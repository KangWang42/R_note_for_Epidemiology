<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 400">
  <defs>
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1e1b4b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#312e81;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="outerGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#4f46e5;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#6366f1;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="innerGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#34d399;stop-opacity:1" />
    </linearGradient>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="400" fill="url(#bgGrad)"/>
  
  <!-- Decorative circles -->
  <circle cx="700" cy="50" r="100" fill="#4f46e5" opacity="0.1"/>
  <circle cx="100" cy="350" r="80" fill="#10b981" opacity="0.1"/>
  
  <!-- Title -->
  <text x="400" y="50" font-family="Arial, sans-serif" font-size="28" font-weight="bold" fill="#ffffff" text-anchor="middle">嵌套交叉验证 (Nested CV)</text>
  <text x="400" y="80" font-family="Arial, sans-serif" font-size="14" fill="#a5b4fc" text-anchor="middle">内外双层循环的无偏模型评估方法</text>
  
  <!-- Outer Loop Visualization -->
  <g transform="translate(80, 120)">
    <!-- Outer loop label -->
    <text x="0" y="-10" font-family="Arial, sans-serif" font-size="12" fill="#a5b4fc">外层循环 (性能评估)</text>
    
    <!-- Outer folds -->
    <rect x="0" y="0" width="120" height="40" rx="5" fill="url(#outerGrad)" opacity="0.9"/>
    <text x="60" y="25" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">训练集 (折 2-5)</text>
    
    <rect x="130" y="0" width="30" height="40" rx="5" fill="#f97316"/>
    <text x="145" y="25" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">测试</text>
    
    <!-- Arrow to inner -->
    <path d="M 75 45 L 75 70" stroke="#6366f1" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  </g>
  
  <!-- Inner Loop Visualization -->
  <g transform="translate(80, 200)">
    <!-- Inner loop label -->
    <text x="0" y="-10" font-family="Arial, sans-serif" font-size="12" fill="#a5b4fc">内层循环 (超参数调优)</text>
    
    <!-- Inner folds -->
    <g>
      <rect x="0" y="0" width="25" height="30" rx="3" fill="url(#innerGrad)"/>
      <rect x="30" y="0" width="25" height="30" rx="3" fill="url(#innerGrad)"/>
      <rect x="60" y="0" width="25" height="30" rx="3" fill="#f97316" opacity="0.8"/>
      <rect x="90" y="0" width="25" height="30" rx="3" fill="url(#innerGrad)"/>
      <rect x="120" y="0" width="25" height="30" rx="3" fill="url(#innerGrad)"/>
    </g>
    <text x="75" y="50" font-family="Arial, sans-serif" font-size="10" fill="#a5b4fc" text-anchor="middle">3-5折 内层CV</text>
  </g>
  
  <!-- Flow Diagram on Right -->
  <g transform="translate(450, 110)">
    <!-- Data box -->
    <rect x="0" y="0" width="100" height="35" rx="5" fill="#4f46e5"/>
    <text x="50" y="22" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">完整数据集</text>
    
    <!-- Arrow -->
    <path d="M 50 40 L 50 60" stroke="#6366f1" stroke-width="2" fill="none"/>
    
    <!-- Outer CV box -->
    <rect x="-20" y="65" width="140" height="45" rx="5" fill="url(#outerGrad)"/>
    <text x="50" y="85" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">外层 K 折划分</text>
    <text x="50" y="100" font-family="Arial, sans-serif" font-size="9" fill="#c7d2fe" text-anchor="middle">(无偏性能评估)</text>
    
    <!-- Arrow -->
    <path d="M 50 115 L 50 135" stroke="#6366f1" stroke-width="2" fill="none"/>
    
    <!-- Inner CV box -->
    <rect x="-20" y="140" width="140" height="45" rx="5" fill="url(#innerGrad)"/>
    <text x="50" y="160" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">内层 K 折调参</text>
    <text x="50" y="175" font-family="Arial, sans-serif" font-size="9" fill="#a7f3d0" text-anchor="middle">(选择最优超参数)</text>
    
    <!-- Arrow -->
    <path d="M 50 190 L 50 210" stroke="#10b981" stroke-width="2" fill="none"/>
    
    <!-- Result box -->
    <rect x="-10" y="215" width="120" height="35" rx="5" fill="#f97316"/>
    <text x="50" y="237" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">无偏泛化误差估计</text>
  </g>
  
  <!-- Key Points -->
  <g transform="translate(620, 130)">
    <text x="0" y="0" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#ffffff">核心优势</text>
    
    <circle cx="10" cy="25" r="4" fill="#10b981"/>
    <text x="20" y="29" font-family="Arial, sans-serif" font-size="10" fill="#d1d5db">避免选择偏差</text>
    
    <circle cx="10" cy="50" r="4" fill="#10b981"/>
    <text x="20" y="54" font-family="Arial, sans-serif" font-size="10" fill="#d1d5db">无偏性能估计</text>
    
    <circle cx="10" cy="75" r="4" fill="#10b981"/>
    <text x="20" y="79" font-family="Arial, sans-serif" font-size="10" fill="#d1d5db">调参与评估分离</text>
    
    <circle cx="10" cy="100" r="4" fill="#f97316"/>
    <text x="20" y="104" font-family="Arial, sans-serif" font-size="10" fill="#d1d5db">计算开销较大</text>
  </g>
  
  <!-- Formula -->
  <g transform="translate(80, 300)">
    <rect x="0" y="0" width="300" height="50" rx="8" fill="#1e1b4b" stroke="#4f46e5" stroke-width="1"/>
    <text x="150" y="20" font-family="monospace" font-size="11" fill="#a5b4fc" text-anchor="middle">复杂度: O(K_outer × K_inner × N_params)</text>
    <text x="150" y="38" font-family="Arial, sans-serif" font-size="10" fill="#6b7280" text-anchor="middle">例: 5×3×20 = 300 次模型训练</text>
  </g>
  
  <!-- mlr3 badge -->
  <g transform="translate(620, 300)">
    <rect x="0" y="0" width="100" height="30" rx="15" fill="#4f46e5"/>
    <text x="50" y="20" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white" text-anchor="middle">mlr3</text>
  </g>
  
  <!-- Footer -->
  <text x="400" y="380" font-family="Arial, sans-serif" font-size="10" fill="#6b7280" text-anchor="middle">R 语言学习笔记 | 机器学习与AI</text>
</svg>