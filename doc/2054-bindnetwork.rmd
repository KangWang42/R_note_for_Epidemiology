---
title: R语言网络关系图绘制
date: '2026-01-15'
categories:
- 数据可视化
- 其他图形
- 统计图表
- 网络图
image: images/bindnetwork_cover.svg
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
    echo = TRUE, warning = FALSE, message = FALSE,
    fig.width = 8, fig.height = 8, fig.retina = 2, out.width = "100%", dpi = 150
)
```

## 什么是网络关系图

网络关系图（Network Graph）用**节点和边**表示对象之间的关系，适合展示社交网络、引用关系、知识图谱等。

---

## R包加载

```{r}
library(igraph)
library(ggraph)
library(tidygraph)
```

---

## 创建网络数据

```{r}
# 创建边数据
edges <- data.frame(
    from = c("A", "A", "B", "B", "C", "D", "E", "E", "F"),
    to = c("B", "C", "D", "E", "D", "F", "F", "G", "G")
)

# 创建图对象
graph <- as_tbl_graph(edges, directed = FALSE)
```

---

## 基础网络图

```{r}
ggraph(graph, layout = "fr") +
    geom_edge_link(color = "#94a3b8", width = 1) +
    geom_node_point(size = 8, color = "#4f46e5") +
    geom_node_text(aes(label = name), color = "white", fontface = "bold") +
    theme_void() +
    labs(title = "基础网络关系图") +
    theme(plot.title = element_text(face = "bold", hjust = 0.5))
```

---

## 圆形布局

```{r}
ggraph(graph, layout = "circle") +
    geom_edge_link(color = "#94a3b8", width = 1.5) +
    geom_node_point(size = 10, color = "#10b981") +
    geom_node_text(aes(label = name), color = "white", fontface = "bold") +
    theme_void() +
    labs(title = "圆形布局网络图")
```

---

## 节点着色按度

```{r}
graph <- graph %>%
    mutate(degree = centrality_degree())

ggraph(graph, layout = "stress") +
    geom_edge_link(color = "#e2e8f0", width = 1) +
    geom_node_point(aes(size = degree, color = degree)) +
    geom_node_text(aes(label = name), color = "white", fontface = "bold", size = 4) +
    scale_color_gradient(low = "#a5b4fc", high = "#4f46e5") +
    scale_size_continuous(range = c(8, 15)) +
    theme_void() +
    labs(title = "按节点度数着色") +
    theme(legend.position = "none")
```

---

## 总结

| 布局 | 函数 |
|------|------|
| 力导向 | `layout = "fr"` |
| 圆形 | `layout = "circle"` |
| 树形 | `layout = "tree"` |

### 相关教程

- [桑基图](2014-sankey.html)
