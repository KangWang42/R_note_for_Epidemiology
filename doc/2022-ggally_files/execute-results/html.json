{
  "hash": "c9d3a51f8438311fafb563ee38a65e7d",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"GGally - æ‰©å±• ggplot2 çš„å¯è§†åŒ–åˆ©å™¨\"\ndate: \"2026-01-11\"\ncategories: [RåŒ…, å¯è§†åŒ–, æ¢ç´¢æ€§åˆ†æ]\nimage: \"figure/ggally-cover.svg\"\n---\n\n\n\n## ğŸ“¦ RåŒ…ç®€ä»‹\n\n> **GGally** æ˜¯ ggplot2 çš„æ‰©å±•åŒ…ï¼Œæ—¨åœ¨é€šè¿‡æ·»åŠ å‡ ä¸ªå‡½æ•°æ¥é™ä½ç»„åˆå‡ ä½•å¯¹è±¡çš„å¤æ‚æ€§ã€‚å®ƒæœ€è‘—åçš„åŠŸèƒ½æ˜¯å¿«é€Ÿç”ŸæˆçŸ©é˜µæ•£ç‚¹å›¾ã€ç›¸å…³ç³»æ•°çƒ­å›¾å’Œå¹³è¡Œåæ ‡å›¾ï¼Œæ˜¯æ¢ç´¢æ€§æ•°æ®åˆ†æï¼ˆEDAï¼‰çš„å¾—åŠ›åŠ©æ‰‹ã€‚\n\n- **æ ¸å¿ƒåŠŸèƒ½**ï¼šçŸ©é˜µæ•£ç‚¹å›¾ (`ggpairs`)ã€åŒå˜é‡åˆ†æ (`ggbivariate`)ã€æ¨¡å‹è¯Šæ–­ (`ggnostic`)ã€ç³»æ•°å›¾ (`ggcoef_model`)\n- **å®˜æ–¹é“¾æ¥**ï¼š[CRAN](https://cran.r-project.org/package=GGally) | [GitHub](https://github.com/ggobi/ggally) | [æ–‡æ¡£](https://ggobi.github.io/ggally/)\n\n### ä¸ºä»€ä¹ˆé€‰æ‹©å®ƒï¼Ÿ\n\n- **æ•ˆç‡æé«˜**ï¼šä¸€è¡Œä»£ç å³å¯æŸ¥çœ‹æ•°æ®é›†ä¸­æ‰€æœ‰å˜é‡çš„ä¸¤ä¸¤å…³ç³»ã€‚\n- **å…¼å®¹æ€§å¥½**ï¼šåŸºäº ggplot2 æ„å»ºï¼Œå›¾è¡¨å¯¹è±¡å¯ä»¥åƒ ggplot ä¸€æ ·æ·»åŠ å›¾å±‚å’Œä¿®æ”¹ä¸»é¢˜ã€‚\n- **ä¿¡æ¯ä¸°å¯Œ**ï¼šä¸ä»…å±•ç¤ºå›¾å½¢ï¼Œè¿˜è‡ªåŠ¨è®¡ç®—å¹¶å±•ç¤ºç›¸å…³ç³»æ•°ç­‰ç»Ÿè®¡é‡ã€‚\n\n## ğŸ›  å®‰è£…ä¸åŠ è½½\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# å®‰è£…\nif (!requireNamespace(\"GGally\", quietly = TRUE)) {\n  install.packages(\"GGally\", repos = \"https://cloud.r-project.org\")\n}\nif (!requireNamespace(\"broom.helpers\", quietly = TRUE)) {\n  install.packages(\"broom.helpers\", repos = \"https://cloud.r-project.org\")\n}\n\n# åŠ è½½\nlibrary(GGally)\nlibrary(ggplot2)\n```\n:::\n\n\n## ğŸ’¡ æ ¸å¿ƒåŠŸèƒ½è¯¦è§£\n\n### 1. ggpairs()ï¼šçŸ©é˜µæ•£ç‚¹å›¾ï¼ˆå®Œå…¨æŒ‡å—ï¼‰\n\n`ggpairs()` æ˜¯ GGally çš„æ——èˆ°å‡½æ•°ã€‚é™¤äº†é»˜è®¤å±•ç¤ºï¼Œå®ƒå…è®¸é«˜åº¦è‡ªå®šä¹‰æ¯ä¸ªåŒºåŸŸï¼ˆå¯¹è§’çº¿ã€ä¸Šä¸‰è§’ã€ä¸‹ä¸‰è§’ï¼‰çš„å±•ç¤ºå½¢å¼ã€‚\n\n#### åŸºç¡€ç”¨æ³•ä¸åˆ†ç»„\n\næœ€ç®€å•çš„ç”¨æ³•æ˜¯ç›´æ¥ä¼ å…¥æ•°æ®æ¡†ï¼Œä½†é€šå¸¸æˆ‘ä»¬éœ€è¦æŒ‡å®šåˆ—å’Œåˆ†ç»„å˜é‡ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# ä½¿ç”¨ iris æ•°æ®é›†\ndata(iris)\n\nggpairs(iris, \n        columns = 1:5,        # åŒ…å«æ•°å€¼å’Œåˆ†ç±»å˜é‡\n        aes(color = Species,  # åˆ†ç»„ç€è‰²\n            alpha = 0.5)) +   # é€æ˜åº¦\n  theme_bw() +\n  labs(title = \"åŸºç¡€ç”¨æ³•ï¼šåˆ†ç»„å±•ç¤º\")\n```\n\n::: {.cell-output-display}\n![](2022-ggally_files/figure-html/unnamed-chunk-2-1.png){width=100%}\n:::\n:::\n\n\n#### è¿›é˜¶å®šåˆ¶ï¼šæ§åˆ¶ä¸åŒåŒºåŸŸ\n\nä½ å¯ä»¥é€šè¿‡ `upper`, `lower`, `diag` å‚æ•°åˆ†åˆ«æ§åˆ¶ä¸‰ä¸ªåŒºåŸŸçš„ç»˜å›¾ç±»å‹ (`continuous`, `combo`, `discrete`)ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# è‡ªå®šä¹‰å‡½æ•°ï¼šåˆ›å»ºæ›´ç¾è§‚çš„æ•£ç‚¹å›¾\nmy_scatter <- function(data, mapping, ...) {\n  ggplot(data = data, mapping = mapping) +\n    geom_point(..., size = 0.5) +  # ç¼©å°ç‚¹çš„å¤§å°\n    geom_smooth(method = \"lm\", se = FALSE, size = 0.5) # æ·»åŠ å›å½’çº¿\n}\n\nggpairs(iris, \n        columns = 1:4,\n        aes(color = Species),\n        # ä¸Šä¸‰è§’ï¼šå±•ç¤ºç›¸å…³ç³»æ•°ï¼Œå­—ä½“å¤§å°è®¾ä¸º 3\n        upper = list(continuous = wrap(\"cor\", size = 3)),\n        # ä¸‹ä¸‰è§’ï¼šä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°\n        lower = list(continuous = my_scatter),\n        # å¯¹è§’çº¿ï¼šä½¿ç”¨å¯†åº¦å›¾ï¼Œé€æ˜åº¦ 0.5\n        diag = list(continuous = wrap(\"densityDiag\", alpha = 0.5))\n        ) +\n  theme_light() +\n  labs(title = \"è¿›é˜¶ç”¨æ³•ï¼šè‡ªå®šä¹‰é¢æ¿å‡½æ•°\")\n```\n\n::: {.cell-output-display}\n![](2022-ggally_files/figure-html/unnamed-chunk-3-1.png){width=100%}\n:::\n:::\n\n\n### 2. ggbivariate()ï¼šåŒå˜é‡åˆ†æ\n\nå®˜æ–¹æ–‡æ¡£å°†å…¶æ ‡è®°ä¸º\"ä¸»è¦ç»˜å›¾å‡½æ•°\"ä¹‹ä¸€ã€‚å®ƒç”¨äºå±•ç¤º**ä¸€ä¸ªç»“æœå˜é‡ (Outcome)** ä¸**å¤šä¸ªè§£é‡Šå˜é‡ (Explanatory)** ä¹‹é—´çš„å…³ç³»ã€‚è¿™åœ¨å»ºæ¨¡å‰çš„ EDA é˜¶æ®µéå¸¸é«˜æ•ˆã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# ä»¥ tips æ•°æ®é›†ä¸ºä¾‹ (éœ€è¦ reshape2 æˆ–å…¶ä»–åŒ…æä¾›ï¼Œè¿™é‡Œç”¨ iris)\n# æ¢ç´¢ Sepal.Length (æ•°å€¼å‹) ä¸å…¶ä»–å˜é‡çš„å…³ç³»\nggbivariate(iris, \n            outcome = \"Sepal.Length\", \n            explanatory = c(\"Sepal.Width\", \"Petal.Length\", \"Species\")) +\n  labs(title = \"ggbivariate: æ¢ç´¢ Sepal.Length çš„å½±å“å› ç´ \")\n```\n\n::: {.cell-output-display}\n![](2022-ggally_files/figure-html/unnamed-chunk-4-1.png){width=100%}\n:::\n:::\n\n\n### 3. ggcorr()ï¼šç›¸å…³æ€§çƒ­å›¾\n\nä¸“é—¨ç”¨äºå¯è§†åŒ–ç›¸å…³ç³»æ•°çŸ©é˜µï¼Œæ”¯æŒæ— éœ€è®¡ç®— `cor` ç›´æ¥ä¼ å…¥åŸå§‹æ•°æ®ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggcorr(iris[, 1:4], \n       method = c(\"everything\", \"pearson\"), # è®¡ç®—æ–¹æ³•\n       label = TRUE,           # æ˜¾ç¤ºæ•°å€¼\n       label_size = 3,         # æ•°å€¼å¤§å°\n       label_round = 2,        # ä¿ç•™å°æ•°ä½\n       label_alpha = TRUE,     # æ•°å€¼é€æ˜åº¦éšç›¸å…³æ€§å˜åŒ–\n       nbreaks = 5,            # é¢œè‰²åˆ†æ®µæ•°\n       palette = \"RdBu\",       # é…è‰²æ–¹æ¡ˆ (RColorBrewer)\n       layout.exp = 1) +       # æ‰©å……å¸ƒå±€é˜²æ­¢æ ‡ç­¾æˆªæ–­\n  labs(title = \"ç²¾ç¾ç›¸å…³æ€§çƒ­å›¾\")\n```\n\n::: {.cell-output-display}\n![](2022-ggally_files/figure-html/unnamed-chunk-5-1.png){width=100%}\n:::\n:::\n\n\n### 4. ggtable()ï¼šå¯è§†åŒ–äº¤å‰è¡¨\n\nç”¨äºå±•ç¤ºç¦»æ•£å˜é‡ä¹‹é—´çš„åˆ†ç±»æ±‡æ€»æƒ…å†µï¼Œç±»ä¼¼äº `table()` çš„å›¾å½¢åŒ–ç‰ˆæœ¬ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# åˆ¶é€ ä¸€äº›ç¦»æ•£æ•°æ®\ndf_tips <- as.data.frame(Titanic)\n# å±•å¼€æ•°æ®ï¼Œå› ä¸º ggtable é»˜è®¤æ¯è¡Œæ˜¯ä¸€ä¸ªè§‚æµ‹\ndf_tips_expanded <- df_tips[rep(row.names(df_tips), df_tips$Freq), 1:4]\n\nggtable(df_tips_expanded, \"Class\", c(\"Survived\", \"Sex\", \"Age\"), cells = \"observed\") +\n  labs(title = \"ggtable: æ³°å¦å°¼å…‹å·ä¹˜å®¢åˆ†å¸ƒ\")\n```\n\n::: {.cell-output-display}\n![](2022-ggally_files/figure-html/unnamed-chunk-6-1.png){width=100%}\n:::\n:::\n\n\n### 5. ggduo()ï¼šåŒç»„å˜é‡å…³è”\n\nå½“ä½ ä¸æƒ³çœ‹æ‰€æœ‰å˜é‡çš„ä¸¤ä¸¤å…³ç³»ï¼Œè€Œæ˜¯æƒ³çœ‹ **ä¸€ç»„å˜é‡ (X)** ä¸ **å¦ä¸€ç»„å˜é‡ (Y)** çš„å…³ç³»æ—¶ï¼ˆç±»ä¼¼å…¸å‹ç›¸å…³åˆ†æçš„è§†è§’ï¼‰ï¼Œ`ggduo()` éå¸¸æœ‰ç”¨ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# æ¯”å¦‚ï¼šæ¢ç´¢ è¼ç‰‡(Sepal) å°ºå¯¸ ä¸ èŠ±ç“£(Petal) å°ºå¯¸çš„å…³ç³»\nggduo(iris,\n      columnsX = c(\"Sepal.Length\", \"Sepal.Width\"),\n      columnsY = c(\"Petal.Length\", \"Petal.Width\"),\n      aes(color = Species),\n      types = list(continuous = \"smooth_lm\")) + # æ·»åŠ çº¿æ€§æ‹Ÿåˆ\n  theme_bw() +\n  labs(title = \"ggduo: è¼ç‰‡ vs èŠ±ç“£\")\n```\n\n::: {.cell-output-display}\n![](2022-ggally_files/figure-html/unnamed-chunk-7-1.png){width=100%}\n:::\n:::\n\n\n### 6. ggnostic()ï¼šæ¨¡å‹è¯Šæ–­çŸ©é˜µ\n\nè¿™æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œç”¨äºå±•ç¤ºæ¨¡å‹è¯Šæ–­ä¿¡æ¯ã€‚å®ƒç”Ÿæˆä¸€ä¸ªçŸ©é˜µï¼ŒåŒ…å«æ®‹å·®ã€æ æ†å€¼ã€Cookè·ç¦»ç­‰ç»Ÿè®¡é‡ä¸è§£é‡Šå˜é‡çš„å…³ç³»ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# æ‹Ÿåˆä¸€ä¸ªç®€å•æ¨¡å‹ (ä½¿ç”¨ iris æ•°æ®ä»¥æ”¯æŒè‡ªåŠ¨ç€è‰²)\nfit_iris <- lm(Sepal.Length ~ Sepal.Width + Petal.Length + Species, data = iris)\n\n# ç”Ÿæˆè¯Šæ–­çŸ©é˜µ\n# é»˜è®¤å±•ç¤ºæ‰€æœ‰æ ‡å‡†è¯Šæ–­æŒ‡æ ‡ vs è§£é‡Šå˜é‡\nggnostic(fit_iris,\n         columnsY = c(\".resid\", \".std.resid\", \".hat\", \".cooksd\"), # é€‰å®šè¯Šæ–­æŒ‡æ ‡\n         mapping = aes(color = Species)) +\n  theme_bw() +\n  labs(title = \"ggnostic: çº¿æ€§æ¨¡å‹è¯Šæ–­\")\n```\n\n::: {.cell-output-display}\n![](2022-ggally_files/figure-html/unnamed-chunk-8-1.png){width=100%}\n:::\n:::\n\n\n### 7. ggcoef_model()ï¼šå›å½’ç³»æ•°å¯è§†åŒ–\n\næ¯”åŸºç¡€çš„ `summary(model)` æ›´ç›´è§‚ï¼Œç‰¹åˆ«é€‚åˆåœ¨è®ºæ–‡ä¸­å±•ç¤ºæ¨¡å‹ç»“æœã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# å»ºç«‹ä¸¤ä¸ªå›å½’æ¨¡å‹\nmod1 <- lm(Sepal.Length ~ Sepal.Width + Petal.Length, data = iris)\nmod2 <- lm(Sepal.Length ~ Sepal.Width + Petal.Length + Petal.Width, data = iris)\n\n# å¯¹æ¯”æ¨¡å‹\nggcoef_compare(list(\"Model A\" = mod1, \"Model B\" = mod2),\n               variable_labels = c(\n                 Sepal.Width = \"è¼ç‰‡å®½åº¦\",\n                 Petal.Length = \"èŠ±ç“£é•¿åº¦\",\n                 Petal.Width = \"èŠ±ç“£å®½åº¦\"\n               ),\n               conf.level = 0.95) +\n  scale_color_brewer(palette = \"Dark2\") + # ä½¿ç”¨æ›´å¥½çœ‹çš„é…è‰²\n  theme_minimal() +\n  labs(title = \"å›å½’æ¨¡å‹ç³»æ•°å¯¹æ¯”\", \n       caption = \"æ³¨ï¼šè¯¯å·®æ£’è¡¨ç¤º 95% ç½®ä¿¡åŒºé—´\")\n```\n\n::: {.cell-output-display}\n![](2022-ggally_files/figure-html/unnamed-chunk-9-1.png){width=100%}\n:::\n:::\n\n\n## ğŸ“Š å®æˆ˜æ¡ˆä¾‹ï¼šé«˜ç»´æ•°æ®æ¢ç´¢\n\nå¹³è¡Œåæ ‡å›¾ (`ggparcoord`) æ˜¯å±•ç¤ºå¤šç»´æ•°æ®ï¼ˆ>3ç»´ï¼‰æ¨¡å¼çš„åˆ©å™¨ï¼Œç‰¹åˆ«é€‚åˆè§‚å¯Ÿåˆ†ç±»æ•ˆæœæˆ–å¼‚å¸¸å€¼ã€‚\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# æ¨¡æ‹Ÿä¸€ä¸ªç¨å¤æ‚çš„æ•°æ®å¤„ç†åœºæ™¯\n# 1. é€‰å–æ•°å€¼åˆ—\n# 2. è¿™é‡Œçš„ scale=\"globalminmax\" ä¿ç•™äº†åŸå§‹æ•°æ®çš„ç›¸å¯¹å¤§å°ï¼Œæˆ–è€…ç”¨ \"std\" (é»˜è®¤) çœ‹ç›¸å¯¹è¶‹åŠ¿\nggparcoord(iris,\n           columns = 1:4,          \n           groupColumn = 5,        \n           order = \"anyClass\",     # è‡ªåŠ¨æ’åºä¼˜åŒ–å±•ç¤º\n           showPoints = TRUE,      \n           scale = \"uniminmax\",    # æ ‡å‡†åŒ–åˆ° 0-1 ä¹‹é—´ï¼Œä¾¿äºæ¯”è¾ƒå½¢çŠ¶\n           alphaLines = 0.3) +     \n  scale_color_brewer(palette = \"Set1\") +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    axis.text.x = element_text(angle = 15, hjust = 1)\n  ) +\n  labs(title = \"å¹³è¡Œåæ ‡å›¾ï¼šæ ‡å‡†åŒ–åçš„ç‰¹å¾æ¨¡å¼\",\n       y = \"Standardized Value (0-1)\",\n       x = \"Features\")\n```\n\n::: {.cell-output-display}\n![](2022-ggally_files/figure-html/unnamed-chunk-10-1.png){width=100%}\n:::\n:::\n\n\n## ğŸ“ å‡½æ•°é€ŸæŸ¥è¡¨\n\n| å‡½æ•° | åŠŸèƒ½æè¿° | æ ¸å¿ƒå‚æ•°/æŠ€å·§ |\n|------|----------|----------|\n| `ggpairs()` | çŸ©é˜µæ•£ç‚¹å›¾ (é€šç”¨) | `upper/lower/diag` æ§åˆ¶é¢æ¿å†…å®¹ |\n| `ggbivariate()` | åŒå˜é‡åˆ†æ (Outcome vs X) | `outcome`, `explanatory` æŒ‡å®šå˜é‡ |\n| `ggcorr()` | ç›¸å…³æ€§çƒ­å›¾ | `label = TRUE`, `nbreaks` é¢œè‰²åˆ†æ®µ |\n| `ggtable()` | å¯è§†åŒ–äº¤å‰è¡¨ | `cells = \"observed\"` æ˜¾ç¤ºæ•°å€¼ |\n| `ggduo()` | åŒç»„å˜é‡çŸ©é˜µ | `columnsX`, `columnsY` ä¸¤ç»„å¯¹æ’ |\n| `ggnostic()` | æ¨¡å‹è¯Šæ–­çŸ©é˜µ | æ”¯æŒ `lm`, `glm` ç­‰æ¨¡å‹å¯¹è±¡ |\n| `ggcoef_model()` | æ¨¡å‹ç³»æ•°å›¾ | `include_intercept = FALSE` |\n| `ggparcoord()` | å¹³è¡Œåæ ‡å›¾ | `scale = \"uniminmax\"` å½’ä¸€åŒ– |\n\n## ğŸ”— å‚è€ƒèµ„æ–™\n\n- **[å®˜æ–¹æ–‡æ¡£ (Pkgdown)](https://ggobi.github.io/ggally/)**ï¼šæœ¬æ–‡ç»“æ„å‚è€ƒäº†å®˜æ–¹æ–‡æ¡£çš„ Core Functionality åˆ†ç±»ã€‚\n    - **[Core Functionality](https://ggobi.github.io/ggally/articles/ggally_plots.html)**: åŒ…å«æ‰€æœ‰é«˜çº§ç»˜å›¾å‡½æ•°çš„åˆ—è¡¨ã€‚\n    - **[Vignette: ggpairs](https://ggobi.github.io/ggally/articles/ggpairs.html)**: å¼ºçƒˆæ¨èé˜…è¯»ï¼Œè¿™æ˜¯ GGally æœ€æ ¸å¿ƒçš„åŠŸèƒ½ã€‚\n- **GitHub**: [https://github.com/ggobi/ggally](https://github.com/ggobi/ggally)\n\n",
    "supporting": [
      "2022-ggally_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}