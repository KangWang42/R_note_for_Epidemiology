[
  {
    "objectID": "test.html",
    "href": "test.html",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "",
    "text": "bruceR å…¨ç§° â€œBRoadly Useful Convenient and Efficient R functionsâ€ï¼Œç”±åŒ…å¯’å´éœœåšå£«å¼€å‘ï¼Œæ˜¯ä¸€ä¸ªé›†æˆäº†ä¼—å¤šå®ç”¨åŠŸèƒ½çš„ R åŒ…ï¼Œä¸“ä¸ºç§‘ç ”æ•°æ®åˆ†æè®¾è®¡ã€‚\né“¾æ¥ï¼šCRAN | GitHub | ä¸­æ–‡æ•™ç¨‹\n\n\nbruceR æ¶µç›–äº†æ•°æ®åˆ†æçš„å®Œæ•´æµç¨‹ï¼š\n\n\n\n\n\n\n\n\næ¨¡å—\nåŠŸèƒ½\nä¸»è¦å‡½æ•°\n\n\n\n\nåŸºç¡€ç¼–ç¨‹\nè·¯å¾„è®¾ç½®ã€æ•°æ®å¯¼å…¥å¯¼å‡ºã€è¡¨æ ¼æ‰“å°\nset.wd(), import(), export(), print_table()\n\n\næ•°æ®è®¡ç®—\né‡è¡¨è®¡ç®—ã€åå‘è®¡åˆ†ã€é‡ç¼–ç \nMEAN(), SUM(), RECODE(), RESCALE()\n\n\nä¿¡æ•ˆåº¦åˆ†æ\nä¿¡åº¦åˆ†æã€å› å­åˆ†æ\nAlpha(), EFA(), PCA(), CFA()\n\n\næè¿°ç»Ÿè®¡\næè¿°ç»Ÿè®¡ã€é¢‘ç‡åˆ†æã€ç›¸å…³åˆ†æ\nDescribe(), Freq(), Corr()\n\n\næ–¹å·®åˆ†æ\ntæ£€éªŒã€ANOVAã€ç®€å•æ•ˆåº”ã€äº‹åæ¯”è¾ƒ\nTTEST(), MANOVA(), EMMEANS()\n\n\nå›å½’æ¨¡å‹\næ¨¡å‹æ±‡æ€»ã€å¤šå±‚æ¨¡å‹\nmodel_summary(), HLM_summary()\n\n\nä¸­ä»‹è°ƒèŠ‚\nPROCESS å®\nPROCESS(), med_summary()\n\n\n\n\n\n\nåŠ è½½ bruceR æ—¶ä¼šè‡ªåŠ¨åŠ è½½å¸¸ç”¨åŒ…ï¼š\n\næ•°æ®å¤„ç†ï¼šdata.table, dplyr, tidyr, stringr\nå¯è§†åŒ–ï¼šggplot2\nç»Ÿè®¡åˆ†æï¼špsych, emmeans, lmerTest, effectsize, performance"
  },
  {
    "objectID": "test.html#råŒ…ä»‹ç»",
    "href": "test.html#råŒ…ä»‹ç»",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "",
    "text": "bruceR å…¨ç§° â€œBRoadly Useful Convenient and Efficient R functionsâ€ï¼Œç”±åŒ…å¯’å´éœœåšå£«å¼€å‘ï¼Œæ˜¯ä¸€ä¸ªé›†æˆäº†ä¼—å¤šå®ç”¨åŠŸèƒ½çš„ R åŒ…ï¼Œä¸“ä¸ºç§‘ç ”æ•°æ®åˆ†æè®¾è®¡ã€‚\né“¾æ¥ï¼šCRAN | GitHub | ä¸­æ–‡æ•™ç¨‹\n\n\nbruceR æ¶µç›–äº†æ•°æ®åˆ†æçš„å®Œæ•´æµç¨‹ï¼š\n\n\n\n\n\n\n\n\næ¨¡å—\nåŠŸèƒ½\nä¸»è¦å‡½æ•°\n\n\n\n\nåŸºç¡€ç¼–ç¨‹\nè·¯å¾„è®¾ç½®ã€æ•°æ®å¯¼å…¥å¯¼å‡ºã€è¡¨æ ¼æ‰“å°\nset.wd(), import(), export(), print_table()\n\n\næ•°æ®è®¡ç®—\né‡è¡¨è®¡ç®—ã€åå‘è®¡åˆ†ã€é‡ç¼–ç \nMEAN(), SUM(), RECODE(), RESCALE()\n\n\nä¿¡æ•ˆåº¦åˆ†æ\nä¿¡åº¦åˆ†æã€å› å­åˆ†æ\nAlpha(), EFA(), PCA(), CFA()\n\n\næè¿°ç»Ÿè®¡\næè¿°ç»Ÿè®¡ã€é¢‘ç‡åˆ†æã€ç›¸å…³åˆ†æ\nDescribe(), Freq(), Corr()\n\n\næ–¹å·®åˆ†æ\ntæ£€éªŒã€ANOVAã€ç®€å•æ•ˆåº”ã€äº‹åæ¯”è¾ƒ\nTTEST(), MANOVA(), EMMEANS()\n\n\nå›å½’æ¨¡å‹\næ¨¡å‹æ±‡æ€»ã€å¤šå±‚æ¨¡å‹\nmodel_summary(), HLM_summary()\n\n\nä¸­ä»‹è°ƒèŠ‚\nPROCESS å®\nPROCESS(), med_summary()\n\n\n\n\n\n\nåŠ è½½ bruceR æ—¶ä¼šè‡ªåŠ¨åŠ è½½å¸¸ç”¨åŒ…ï¼š\n\næ•°æ®å¤„ç†ï¼šdata.table, dplyr, tidyr, stringr\nå¯è§†åŒ–ï¼šggplot2\nç»Ÿè®¡åˆ†æï¼špsych, emmeans, lmerTest, effectsize, performance"
  },
  {
    "objectID": "test.html#råŒ…å®‰è£…",
    "href": "test.html#råŒ…å®‰è£…",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "RåŒ…å®‰è£…",
    "text": "RåŒ…å®‰è£…\n# æ–¹æ³•1ï¼šä» CRAN å®‰è£…ï¼ˆæ¨èï¼‰\ninstall.packages(\"bruceR\", dep = TRUE)\n\n# æ–¹æ³•2ï¼šä» GitHub å®‰è£…æœ€æ–°ç‰ˆ\ninstall.packages(\"devtools\")\ndevtools::install_github(\"psychbruce/bruceR\", dep = TRUE, force = TRUE)\nlibrary(bruceR)"
  },
  {
    "objectID": "test.html#åŸºç¡€ç¼–ç¨‹åŠŸèƒ½",
    "href": "test.html#åŸºç¡€ç¼–ç¨‹åŠŸèƒ½",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "åŸºç¡€ç¼–ç¨‹åŠŸèƒ½",
    "text": "åŸºç¡€ç¼–ç¨‹åŠŸèƒ½\n\nset.wd()ï¼šæ™ºèƒ½è®¾ç½®å·¥ä½œç›®å½•\nè‡ªåŠ¨å°†å·¥ä½œç›®å½•è®¾ç½®ä¸ºå½“å‰è„šæœ¬æ‰€åœ¨è·¯å¾„ï¼š\nset.wd()\n\n\nimport() / export()ï¼šä¸‡èƒ½æ•°æ®å¯¼å…¥å¯¼å‡º\næ”¯æŒå‡ ä¹æ‰€æœ‰å¸¸è§æ•°æ®æ ¼å¼ï¼Œè‡ªåŠ¨è¯†åˆ«æ–‡ä»¶ç±»å‹ï¼š\n# æ”¯æŒçš„æ ¼å¼ï¼š\n# - æ–‡æœ¬ï¼š.txt, .csv, .tsv\n# - Excelï¼š.xls, .xlsx\n# - SPSSï¼š.sav\n# - Stataï¼š.dta\n# - Rå¯¹è±¡ï¼š.rda, .rds, .RData\n\n# å¯¼å…¥æ•°æ®\ndata &lt;- import(\"data.xlsx\")\ndata &lt;- import(\"data.sav\")\ndata &lt;- import(\"data.dta\")\n\n# å¯¼å‡ºæ•°æ®\nexport(data, file = \"output.xlsx\")\nexport(data, file = \"output.csv\")\n\n\ncc()ï¼šå¿«é€Ÿåˆ›å»ºå­—ç¬¦å‘é‡\næ¯” c() æ›´ç®€æ´ï¼Œæ— éœ€å¼•å·ï¼š\n# ä¼ ç»Ÿå†™æ³•\nc(\"age\", \"gender\", \"education\")\n## [1] \"age\"       \"gender\"    \"education\"\n# bruceR å†™æ³•\ncc(\"age, gender, education\")\n## [1] \"age\"       \"gender\"    \"education\"\n\n\nprint_table()ï¼šç”Ÿæˆä¸‰çº¿è¡¨\nsummary_data &lt;- data.frame(\n  Variable = c(\"Age\", \"Income\", \"Score\"),\n  Mean = c(35.2, 5000, 78.5),\n  SD = c(8.3, 1200, 12.1),\n  N = c(100, 100, 100)\n)\n\nprint_table(summary_data)\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##    Variable     Mean       SD       N\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## 1    Age      35.200    8.300 100.000\n## 2    Income 5000.000 1200.000 100.000\n## 3    Score    78.500   12.100 100.000\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
  },
  {
    "objectID": "test.html#æ•°æ®è®¡ç®—åŠŸèƒ½",
    "href": "test.html#æ•°æ®è®¡ç®—åŠŸèƒ½",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "æ•°æ®è®¡ç®—åŠŸèƒ½",
    "text": "æ•°æ®è®¡ç®—åŠŸèƒ½\n\nMEAN() / SUM()ï¼šæ¨ªå‘è®¡ç®—ï¼ˆæ”¯æŒåå‘è®¡åˆ†ï¼‰\nå¿ƒç†å­¦é‡è¡¨ç»å¸¸éœ€è¦è®¡ç®—å¤šä¸ªé¢˜ç›®çš„å‡å€¼æˆ–æ€»åˆ†ï¼Œå¹¶å¤„ç†åå‘è®¡åˆ†ï¼š\n# åˆ›å»ºæ¨¡æ‹Ÿé—®å·æ•°æ®ï¼ˆ5ç‚¹é‡è¡¨ï¼Œå…±6é¢˜ï¼‰\nset.seed(42)\nquestionnaire &lt;- data.frame(\n  id = 1:5,\n  q1 = sample(1:5, 5, replace = TRUE),\n  q2 = sample(1:5, 5, replace = TRUE),\n  q3 = sample(1:5, 5, replace = TRUE),\n  q4 = sample(1:5, 5, replace = TRUE),\n  q5 = sample(1:5, 5, replace = TRUE),\n  q6 = sample(1:5, 5, replace = TRUE)\n)\nquestionnaire\n##   id q1 q2 q3 q4 q5 q6\n## 1  1  1  4  1  3  5  4\n## 2  2  5  2  5  1  5  3\n## 3  3  1  2  4  1  5  2\n## 4  4  1  1  2  3  4  1\n## 5  5  2  4  2  4  2  2\n# è®¡ç®—å‡å€¼ï¼ˆq3ã€q6 åå‘è®¡åˆ†ï¼Œé‡è¡¨èŒƒå›´1-5ï¼‰\nquestionnaire$score_mean &lt;- MEAN(\n  questionnaire, \n  varrange = \"q1:q6\",\n  rev = c(\"q3\", \"q6\"),\n  likert = 1:5\n)\n\n# è®¡ç®—æ€»åˆ†\nquestionnaire$score_sum &lt;- SUM(\n  questionnaire, \n  varrange = \"q1:q6\",\n  rev = c(\"q3\", \"q6\"),\n  likert = 1:5\n)\n\nquestionnaire[, c(\"id\", \"score_mean\", \"score_sum\")]\n##   id score_mean score_sum\n## 1  1   3.333333        20\n## 2  2   2.833333        17\n## 3  3   2.500000        15\n## 4  4   3.000000        18\n## 5  5   3.333333        20\n\n\nRECODE()ï¼šå˜é‡é‡ç¼–ç \nd &lt;- data.frame(age = c(18, 25, 35, 45, 55, 65, 75))\n\nd$age_group &lt;- RECODE(d$age, \n  \"lo:29 = 'é’å¹´'; \n   30:59 = 'ä¸­å¹´'; \n   60:hi = 'è€å¹´'\"\n)\nd\n##   age age_group\n## 1  18      é’å¹´\n## 2  25      é’å¹´\n## 3  35      ä¸­å¹´\n## 4  45      ä¸­å¹´\n## 5  55      ä¸­å¹´\n## 6  65      è€å¹´\n## 7  75      è€å¹´\n\n\nRESCALE()ï¼šå˜é‡æ ‡å‡†åŒ–\nscores &lt;- c(2, 3, 4, 5, 6, 7, 8)\nRESCALE(scores, to = 0:100)\n## [1]   0.00000  16.66667  33.33333  50.00000  66.66667  83.33333 100.00000"
  },
  {
    "objectID": "test.html#ä¿¡åº¦ä¸å› å­åˆ†æ",
    "href": "test.html#ä¿¡åº¦ä¸å› å­åˆ†æ",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "ä¿¡åº¦ä¸å› å­åˆ†æ",
    "text": "ä¿¡åº¦ä¸å› å­åˆ†æ\n\nAlpha()ï¼šä¿¡åº¦åˆ†æ\ndata(\"bfi\", package = \"psych\")\n\n# Alpha éœ€è¦æŒ‡å®šæ•°æ®å’Œå˜é‡å\nAlpha(bfi, var = \"A\", items = 1:5)\n## \n## Reliability Analysis\n## \n## Summary:\n## Total Items: 5\n## Scale Range: 1 ~ 6\n## Total Cases: 2800\n## Valid Cases: 2709 (96.8%)\n## \n## Scale Statistics:\n## Mean = 4.208\n## S.D. = 0.735\n## Cronbachâ€™s Î± = 0.431\n## McDonaldâ€™s Ï‰ = 0.592\n## \n## Warning: Scale reliability is low. You may check item codings.\n## Item A1 correlates negatively with the scale and may be reversed.\n## You can specify this argument: rev=c(\"A1\")\n## \n## Item Statistics (Cronbachâ€™s Î± If Item Deleted):\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##      Mean    S.D. Item-Rest Cor. Cronbachâ€™s Î±\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## A1  2.412 (1.405)         -0.311        0.718\n## A2  4.797 (1.176)          0.372        0.278\n## A3  4.599 (1.305)          0.478        0.174\n## A4  4.682 (1.486)          0.365        0.252\n## A5  4.551 (1.262)          0.448        0.207\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## Item-Rest Cor. = Corrected Item-Total Correlation\n\n\nEFA()ï¼šæ¢ç´¢æ€§å› å­åˆ†æ\ndata(\"bfi\", package = \"psych\")\n\n# æ¢ç´¢æ€§å› å­åˆ†æï¼šä½¿ç”¨ var + items æ ¼å¼\n# åˆ†æå¤–å‘æ€§(E)é‡è¡¨çš„5ä¸ªé¢˜ç›®\nEFA(bfi, var = \"E\", items = 1:5, nfactors = 2, plot.scree = FALSE)\n## \n## Principal Component Analysis\n## \n## Summary:\n## Total Items: 5\n## Scale Range: 1 ~ 6\n## Total Cases: 2800\n## Valid Cases: 2713 (96.9%)\n## \n## Extraction Method:\n## - Principal Component Analysis\n## Rotation Method:\n## - Varimax (with Kaiser Normalization)\n## \n## KMO and Bartlett's Test:\n## - Kaiser-Meyer-Olkin (KMO) Measure of Sampling Adequacy: MSA = 0.799\n## - Bartlett's Test of Sphericity: Approx. Ï‡Â²(10) = 3011.40, p &lt; 1e-99 ***\n## \n## Total Variance Explained:\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##              Eigenvalue Variance % Cumulative % SS Loading Variance % Cumulative %\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## Component 1       2.565     51.298       51.298      1.884     37.680       37.680\n## Component 2       0.768     15.368       66.666      1.449     28.986       66.666\n## Component 3       0.643     12.851       79.517                                   \n## Component 4       0.561     11.211       90.728                                   \n## Component 5       0.464      9.272      100.000                                   \n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## \n## Component Loadings (Rotated) (Sorted by Size):\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##        RC1    RC2 Communality\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## E1   0.812 -0.098       0.668\n## E2   0.752 -0.304       0.658\n## E4  -0.736  0.290       0.625\n## E5  -0.145  0.860       0.761\n## E3  -0.312  0.723       0.620\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## Communality = Sum of Squared (SS) Factor Loadings\n## (Uniqueness = 1 - Communality)"
  },
  {
    "objectID": "test.html#æè¿°ç»Ÿè®¡ä¸ç›¸å…³åˆ†æ",
    "href": "test.html#æè¿°ç»Ÿè®¡ä¸ç›¸å…³åˆ†æ",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "æè¿°ç»Ÿè®¡ä¸ç›¸å…³åˆ†æ",
    "text": "æè¿°ç»Ÿè®¡ä¸ç›¸å…³åˆ†æ\n\nDescribe()ï¼šæè¿°ç»Ÿè®¡\nDescribe(iris[, 1:4])\n## Descriptive Statistics:\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##                 N Mean   SD | Median  Min  Max Skewness Kurtosis\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## Sepal.Length  150 5.84 0.83 |   5.80 4.30 7.90     0.31    -0.61\n## Sepal.Width   150 3.06 0.44 |   3.00 2.00 4.40     0.31     0.14\n## Petal.Length  150 3.76 1.77 |   4.35 1.00 6.90    -0.27    -1.42\n## Petal.Width   150 1.20 0.76 |   1.30 0.10 2.50    -0.10    -1.36\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\n\nFreq()ï¼šé¢‘ç‡åˆ†æ\nFreq(iris$Species)\n## Frequency Statistics:\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##              N    %\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## setosa      50 33.3\n## versicolor  50 33.3\n## virginica   50 33.3\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## Total N = 150\n\n\nCorr()ï¼šç›¸å…³åˆ†æ\nCorr(iris[, 1:4])\n## Pearson's r and 95% confidence intervals:\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##                                r       [95% CI]     p       N\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## Sepal.Length-Sepal.Width   -0.12 [-0.27,  0.04]  .152     150\n## Sepal.Length-Petal.Length   0.87 [ 0.83,  0.91] &lt;.001 *** 150\n## Sepal.Length-Petal.Width    0.82 [ 0.76,  0.86] &lt;.001 *** 150\n## Sepal.Width-Petal.Length   -0.43 [-0.55, -0.29] &lt;.001 *** 150\n## Sepal.Width-Petal.Width    -0.37 [-0.50, -0.22] &lt;.001 *** 150\n## Petal.Length-Petal.Width    0.96 [ 0.95,  0.97] &lt;.001 *** 150\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\n\n\nplot of chunk unnamed-chunk-14"
  },
  {
    "objectID": "test.html#ç»Ÿè®¡æ£€éªŒ",
    "href": "test.html#ç»Ÿè®¡æ£€éªŒ",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "ç»Ÿè®¡æ£€éªŒ",
    "text": "ç»Ÿè®¡æ£€éªŒ\n\nTTEST()ï¼štæ£€éªŒ\n# ç‹¬ç«‹æ ·æœ¬ t æ£€éªŒï¼ˆéœ€è¦ä¸¤æ°´å¹³å› å­ï¼‰\niris_subset &lt;- iris[iris$Species %in% c(\"versicolor\", \"virginica\"), ]\niris_subset$Species &lt;- droplevels(iris_subset$Species)\n\nTTEST(iris_subset, y = \"Sepal.Length\", x = \"Species\")\n## \n## Independent-Samples t-test\n## \n## Hypothesis: two-sided (Î¼2 - Î¼1 â‰  0)\n## \n## Descriptives:\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##      Variable  Factor      Level  N Mean (S.D.)\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##  Sepal.Length Species versicolor 50 5.94 (0.52)\n##  Sepal.Length Species virginica  50 6.59 (0.64)\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## \n## Leveneâ€™s test for homogeneity of variance:\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##                                                 Leveneâ€™s F df1 df2     p    \n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## Sepal.Length: Species (virginica - versicolor)        1.42   1  98  .236    \n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## Note: H0 = equal variance (homoscedasticity).\n## If significant (violation of the assumption),\n## then you should better set `var.equal=FALSE`.\n## \n## Results of t-test:\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##                                                    t df     p     Difference [95% CI] Cohenâ€™s d [95% CI]     BF10\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## Sepal.Length: Species (virginica - versicolor)  5.63 98 &lt;.001 ***   0.65 [0.42, 0.88]  1.13 [0.73, 1.52] 7.04e+04\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\n\nMANOVA()ï¼šå¤šå› ç´ æ–¹å·®åˆ†æ\nMANOVA(data = npk, dv = \"yield\", between = c(\"N\", \"P\", \"K\"))\n## \n## ====== ANOVA (Between-Subjects Design) ======\n## \n## Descriptives:\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##  \"N\" \"P\" \"K\"   Mean    S.D. n\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##   N0  P0  K0 51.433 (4.600) 3\n##   N0  P0  K1 52.000 (5.635) 3\n##   N0  P1  K0 54.333 (9.411) 3\n##   N0  P1  K1 50.500 (2.364) 3\n##   N1  P0  K0 63.767 (5.086) 3\n##   N1  P0  K1 54.667 (4.216) 3\n##   N1  P1  K0 57.933 (5.478) 3\n##   N1  P1  K1 54.367 (5.006) 3\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## Total sample size: N = 24\n## \n## ANOVA Table:\n## Dependent variable(s):      yield\n## Between-subjects factor(s): N, P, K\n## Within-subjects factor(s):  â€“\n## Covariate(s):               â€“\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##                 MS    MSE df1 df2     F     p     Î·Â²p [90% CI of Î·Â²p]  Î·Â²G\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## N          189.282 30.724   1  16 6.161  .025 *     .278 [.024, .529] .278\n## P            8.402 30.724   1  16 0.273  .608       .017 [.000, .220] .017\n## K           95.202 30.724   1  16 3.099  .097 .     .162 [.000, .427] .162\n## N * P       21.282 30.724   1  16 0.693  .418       .041 [.000, .277] .041\n## N * K       33.135 30.724   1  16 1.078  .314       .063 [.000, .312] .063\n## P * K        0.482 30.724   1  16 0.016  .902       .001 [.000, .078] .001\n## N * P * K   37.002 30.724   1  16 1.204  .289       .070 [.000, .322] .070\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## MSE = mean square error (the residual variance of the linear model)\n## Î·Â²p = partial eta-squared = SS / (SS + SSE) = F * df1 / (F * df1 + df2)\n## Ï‰Â²p = partial omega-squared = (F - 1) * df1 / (F * df1 + df2 + 1)\n## Î·Â²G = generalized eta-squared (see Olejnik & Algina, 2003)\n## Cohenâ€™s fÂ² = Î·Â²p / (1 - Î·Â²p)\n## \n## Leveneâ€™s Test for Homogeneity of Variance:\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##            Leveneâ€™s F df1 df2     p    \n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## DV: yield       0.986   7  16  .475    \n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\n\nEMMEANS()ï¼šè¾¹é™…å‡å€¼ä¸äº‹åæ¯”è¾ƒ\nresult &lt;- MANOVA(npk, dv = \"yield\", between = c(\"N\", \"P\"))\n## \n## ====== ANOVA (Between-Subjects Design) ======\n## \n## Descriptives:\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##  \"N\" \"P\"   Mean    S.D. n\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##   N0  P0 51.717 (4.611) 6\n##   N0  P1 52.417 (6.486) 6\n##   N1  P0 59.217 (6.504) 6\n##   N1  P1 56.150 (5.084) 6\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## Total sample size: N = 24\n## \n## ANOVA Table:\n## Dependent variable(s):      yield\n## Between-subjects factor(s): N, P\n## Within-subjects factor(s):  â€“\n## Covariate(s):               â€“\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##             MS    MSE df1 df2     F     p     Î·Â²p [90% CI of Î·Â²p]  Î·Â²G\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## N      189.282 32.870   1  20 5.758  .026 *     .224 [.017, .460] .224\n## P        8.402 32.870   1  20 0.256  .619       .013 [.000, .181] .013\n## N * P   21.282 32.870   1  20 0.647  .430       .031 [.000, .230] .031\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## MSE = mean square error (the residual variance of the linear model)\n## Î·Â²p = partial eta-squared = SS / (SS + SSE) = F * df1 / (F * df1 + df2)\n## Ï‰Â²p = partial omega-squared = (F - 1) * df1 / (F * df1 + df2 + 1)\n## Î·Â²G = generalized eta-squared (see Olejnik & Algina, 2003)\n## Cohenâ€™s fÂ² = Î·Â²p / (1 - Î·Â²p)\n## \n## Leveneâ€™s Test for Homogeneity of Variance:\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##            Leveneâ€™s F df1 df2     p    \n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## DV: yield       0.160   3  20  .922    \n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nEMMEANS(result, effect = \"N\")\n## ------ EMMEANS (effect = \"N\") ------\n## \n## Joint Tests of \"N\":\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##  Effect df1 df2     F     p     Î·Â²p [90% CI of Î·Â²p]\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##   N       1  20 5.758  .026 *     .224 [.017, .460]\n##   P       1  20 0.256  .619       .013 [.000, .181]\n##   N * P   1  20 0.647  .430       .031 [.000, .230]\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## Note. Simple effects of repeated measures with 3 or more levels\n## are different from the results obtained with SPSS MANOVA syntax.\n## \n## Univariate Tests of \"N\":\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##            Sum of Squares df Mean Square     F     p    \n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## Mean: \"N\"         189.282  1     189.282 5.758  .026 *  \n## Residuals         657.400 20      32.870                \n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## Note. Identical to the results obtained with SPSS GLM EMMEANS syntax.\n## \n## Estimated Marginal Means of \"N\":\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##  \"N\"   Mean [95% CI of Mean]    S.E.\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##   N0 52.067 [48.614, 55.519] (1.655)\n##   N1 57.683 [54.231, 61.136] (1.655)\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## \n## Pairwise Comparisons of \"N\":\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##  Contrast Estimate    S.E. df     t     p     Cohenâ€™s d [95% CI of d]\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##   N1 - N0    5.617 (2.341) 20 2.400  .026 *      0.980 [0.128, 1.831]\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## Pooled SD for computing Cohenâ€™s d: 5.733\n## Results are averaged over the levels of: P\n## No need to adjust p values.\n## \n## Disclaimer:\n## By default, pooled SD is Root Mean Square Error (RMSE).\n## There is much disagreement on how to compute Cohenâ€™s d.\n## You are completely responsible for setting `sd.pooled`.\n## You might also use `effectsize::t_to_d()` to compute d."
  },
  {
    "objectID": "test.html#å›å½’åˆ†æ",
    "href": "test.html#å›å½’åˆ†æ",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "å›å½’åˆ†æ",
    "text": "å›å½’åˆ†æ\n\nmodel_summary()ï¼šæ¨¡å‹æ±‡æ€»\nlm1 &lt;- lm(Sepal.Length ~ Sepal.Width, data = iris)\nlm2 &lt;- lm(Sepal.Length ~ Sepal.Width + Petal.Length, data = iris)\nlm3 &lt;- lm(Sepal.Length ~ Sepal.Width + Petal.Length + Petal.Width, data = iris)\n\n# å¤šä¸ªæ¨¡å‹å¯¹æ¯”\nmodel_summary(list(lm1, lm2, lm3))\n## \n## Model Summary\n## \n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##               (1) Sepal.Length  (2) Sepal.Length  (3) Sepal.Length\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## (Intercept)     6.526 ***         2.249 ***         1.856 ***     \n##                (0.479)           (0.248)           (0.251)        \n## Sepal.Width    -0.223             0.596 ***         0.651 ***     \n##                (0.155)           (0.069)           (0.067)        \n## Petal.Length                      0.472 ***         0.709 ***     \n##                                  (0.017)           (0.057)        \n## Petal.Width                                        -0.556 ***     \n##                                                    (0.128)        \n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## R^2             0.014             0.840             0.859         \n## Adj. R^2        0.007             0.838             0.856         \n## Num. obs.     150               150               150             \n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## Note. * p &lt; .05, ** p &lt; .01, *** p &lt; .001.\n# è¾“å‡ºæ ‡å‡†åŒ–ç³»æ•°\nmodel_summary(lm3, std = TRUE)\n## \n## Model Summary\n## \n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##               (1) Sepal.Length\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## Sepal.Width      .343 ***     \n##                 (.035)        \n## Petal.Length    1.512 ***     \n##                 (.121)        \n## Petal.Width     -.512 ***     \n##                 (.117)        \n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## R^2              .859         \n## Adj. R^2         .856         \n## Num. obs.     150             \n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## Note. * p &lt; .05, ** p &lt; .01, *** p &lt; .001.\n## \n## # Check for Multicollinearity\n## \n## Low Correlation\n## \n##         Term  VIF     VIF 95% CI adj. VIF Tolerance Tolerance 95% CI\n##  Sepal.Width 1.27 [ 1.11,  1.65]     1.13      0.79     [0.61, 0.90]\n## \n## High Correlation\n## \n##          Term   VIF     VIF 95% CI adj. VIF Tolerance Tolerance 95% CI\n##  Petal.Length 15.10 [11.27, 20.36]     3.89      0.07     [0.05, 0.09]\n##   Petal.Width 14.23 [10.63, 19.19]     3.77      0.07     [0.05, 0.09]"
  },
  {
    "objectID": "test.html#ä¸­ä»‹ä¸è°ƒèŠ‚åˆ†æ",
    "href": "test.html#ä¸­ä»‹ä¸è°ƒèŠ‚åˆ†æ",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "ä¸­ä»‹ä¸è°ƒèŠ‚åˆ†æ",
    "text": "ä¸­ä»‹ä¸è°ƒèŠ‚åˆ†æ\n\nPROCESS()ï¼šä¸­ä»‹è°ƒèŠ‚åˆ†æ\nset.seed(123)\nn &lt;- 200\nmediation_data &lt;- data.frame(\n  X = rnorm(n),\n  M = rnorm(n),\n  Y = rnorm(n)\n)\nmediation_data$M &lt;- 0.5 * mediation_data$X + rnorm(n, sd = 0.5)\nmediation_data$Y &lt;- 0.4 * mediation_data$M + 0.3 * mediation_data$X + rnorm(n, sd = 0.5)\n\n# ç®€å•ä¸­ä»‹æ¨¡å‹\nPROCESS(mediation_data, y = \"Y\", x = \"X\", meds = \"M\", \n        ci = \"boot\", nsim = 100)\n## \n## ****************** PART 1. Regression Model Summary ******************\n## \n## PROCESS Model ID : 4\n## Model Type : Simple Mediation\n## -    Outcome (Y) : Y\n## -  Predictor (X) : X\n## -  Mediators (M) : M\n## - Moderators (W) : -\n## - Covariates (C) : -\n## -   HLM Clusters : -\n## \n## All numeric predictors have been grand-mean centered.\n## (For details, please see the help page of PROCESS.)\n## \n## Formula of Mediator:\n## -    M ~ X\n## Formula of Outcome:\n## -    Y ~ X + M\n## \n## CAUTION:\n##   Fixed effect (coef.) of a predictor involved in an interaction\n##   denotes its \"simple effect/slope\" at the other predictor = 0.\n##   Only when all predictors in an interaction are mean-centered\n##   can the fixed effect be interpreted as \"main effect\"!\n##   \n## Model Summary\n## \n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##              (1) Y        (2) M        (3) Y      \n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## (Intercept)    0.010       -0.015        0.010    \n##               (0.039)      (0.036)      (0.037)   \n## X              0.462 ***    0.475 ***    0.302 ***\n##               (0.041)      (0.039)      (0.052)   \n## M                                        0.336 ***\n##                                         (0.072)   \n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## R^2            0.391        0.434        0.452    \n## Adj. R^2       0.388        0.431        0.446    \n## Num. obs.    200          200          200        \n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## Note. * p &lt; .05, ** p &lt; .01, *** p &lt; .001.\n## \n## ************ PART 2. Mediation/Moderation Effect Estimate ************\n## \n## Package Use : â€˜mediationâ€™ (v4.5.0)\n## Effect Type : Simple Mediation (Model 4)\n## Sample Size : 200\n## Random Seed : set.seed()\n## Simulations : 100 (Bootstrap)\n## \n## Running 100 simulations...\n## Indirect Path: \"X\" (X) ==&gt; \"M\" (M) ==&gt; \"Y\" (Y)\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n##                Effect    S.E.      z     p      [Boot 95% CI]\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## Indirect (ab)   0.160 (0.039)  4.046 &lt;.001 *** [0.098, 0.240]\n## Direct (c')     0.302 (0.053)  5.713 &lt;.001 *** [0.192, 0.387]\n## Total (c)       0.462 (0.040) 11.623 &lt;.001 *** [0.399, 0.545]\n## â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n## Percentile Bootstrap Confidence Interval\n## (SE and CI are estimated based on 100 Bootstrap samples.)\n## \n## Note. The results based on bootstrapping or other random processes\n## are unlikely identical to other statistical software (e.g., SPSS).\n## To make results reproducible, you need to set a seed (any number).\n## Please see the help page for details: help(PROCESS)\n## Ignore this note if you have already set a seed. :)"
  },
  {
    "objectID": "test.html#å…¶ä»–å®ç”¨åŠŸèƒ½",
    "href": "test.html#å…¶ä»–å®ç”¨åŠŸèƒ½",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "å…¶ä»–å®ç”¨åŠŸèƒ½",
    "text": "å…¶ä»–å®ç”¨åŠŸèƒ½\n\nè¿ç®—ç¬¦\n# %notin%ï¼šä¸åœ¨å…¶ä¸­\nc(1, 2, 3) %notin% c(2, 4, 6)\n## [1]  TRUE FALSE  TRUE\n# %allin%ï¼šå…¨éƒ¨åœ¨å…¶ä¸­\nc(1, 2) %allin% c(1, 2, 3, 4)\n## [1] TRUE\n\n\ntheme_bruce()ï¼šggplot2 ä¸»é¢˜\nlibrary(ggplot2)\n\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width, color = Species)) +\n  geom_point(size = 2, alpha = 0.7) +\n  geom_smooth(method = \"lm\", se = FALSE) +\n  labs(title = \"é¸¢å°¾èŠ±æ•°æ®å¯è§†åŒ–\") +\n  theme_bruce()\n\n\n\nplot of chunk unnamed-chunk-21"
  },
  {
    "objectID": "test.html#å¯¼å‡ºåˆ°-word",
    "href": "test.html#å¯¼å‡ºåˆ°-word",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "å¯¼å‡ºåˆ° Word",
    "text": "å¯¼å‡ºåˆ° Word\nbruceR çš„ä¸€å¤§ç‰¹è‰²æ˜¯å¯ä»¥å°†ç»“æœç›´æ¥å¯¼å‡ºåˆ° Word æ–‡æ¡£ï¼š\n# æè¿°ç»Ÿè®¡\nDescribe(iris[, 1:4], file = \"descriptives.doc\")\n\n# ç›¸å…³çŸ©é˜µ\nCorr(iris[, 1:4], file = \"correlation.doc\")\n\n# å›å½’æ¨¡å‹\nmodel_summary(list(lm1, lm2, lm3), file = \"regression.doc\")\n\n# ä¸­ä»‹åˆ†æ\nPROCESS(data, y = \"Y\", x = \"X\", meds = \"M\", file = \"mediation.doc\")"
  },
  {
    "objectID": "test.html#å‡½æ•°é€ŸæŸ¥è¡¨",
    "href": "test.html#å‡½æ•°é€ŸæŸ¥è¡¨",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "å‡½æ•°é€ŸæŸ¥è¡¨",
    "text": "å‡½æ•°é€ŸæŸ¥è¡¨\n\n\n\nç±»åˆ«\nå‡½æ•°\nåŠŸèƒ½\n\n\n\n\nåŸºç¡€\nset.wd()\nè®¾ç½®å·¥ä½œç›®å½•åˆ°å½“å‰è„šæœ¬ä½ç½®\n\n\n\nimport() / export()\nä¸‡èƒ½æ•°æ®å¯¼å…¥/å¯¼å‡º\n\n\n\ncc()\nå¿«é€Ÿåˆ›å»ºå­—ç¬¦å‘é‡\n\n\n\nprint_table()\næ‰“å°ä¸‰çº¿è¡¨\n\n\nè®¡ç®—\nMEAN() / SUM()\næ¨ªå‘è®¡ç®—ï¼ˆæ”¯æŒåå‘è®¡åˆ†ï¼‰\n\n\n\nRECODE()\nå˜é‡é‡ç¼–ç \n\n\n\nRESCALE()\nå˜é‡æ ‡å‡†åŒ–\n\n\nä¿¡æ•ˆåº¦\nAlpha()\nCronbachâ€™s Î± ä¿¡åº¦åˆ†æ\n\n\n\nEFA() / PCA()\næ¢ç´¢æ€§å› å­åˆ†æ/ä¸»æˆåˆ†åˆ†æ\n\n\n\nCFA()\néªŒè¯æ€§å› å­åˆ†æ\n\n\næè¿°\nDescribe()\næè¿°ç»Ÿè®¡\n\n\n\nFreq()\né¢‘ç‡åˆ†æä¸äº¤å‰è¡¨\n\n\n\nCorr()\nç›¸å…³åˆ†æä¸çƒ­åŠ›å›¾\n\n\næ£€éªŒ\nTTEST()\ntæ£€éªŒï¼ˆå•æ ·æœ¬/ç‹¬ç«‹/é…å¯¹ï¼‰\n\n\n\nMANOVA()\nå¤šå› ç´ æ–¹å·®åˆ†æ\n\n\n\nEMMEANS()\nè¾¹é™…å‡å€¼ä¸äº‹åæ¯”è¾ƒ\n\n\nå›å½’\nmodel_summary()\nå›å½’æ¨¡å‹æ•´æ´è¾“å‡º\n\n\n\nGLM_summary()\nå¹¿ä¹‰çº¿æ€§æ¨¡å‹æ±‡æ€»\n\n\n\nHLM_summary()\nå¤šå±‚çº¿æ€§æ¨¡å‹æ±‡æ€»\n\n\nä¸­ä»‹\nPROCESS()\nä¸­ä»‹/è°ƒèŠ‚æ•ˆåº”åˆ†æ\n\n\n\nmed_summary()\nä¸­ä»‹æ•ˆåº”æ±‡æ€»"
  },
  {
    "objectID": "test.html#å‚è€ƒèµ„æº",
    "href": "test.html#å‚è€ƒèµ„æº",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nbruceR GitHub ä¸»é¡µ\nCRAN å®˜æ–¹é¡µé¢\nä¸­æ–‡æ•™ç¨‹ï¼šæ¦‚è¿°ç¯‡\nä¸­æ–‡æ•™ç¨‹ï¼šå¸¸è§é—®é¢˜\nå¼•ç”¨ï¼šBao, H. W. S. (2021). bruceR: Broadly useful convenient and efficient R functions. https://doi.org/10.32614/CRAN.package.bruceR"
  },
  {
    "objectID": "sections/packages.html",
    "href": "sections/packages.html",
    "title": "å®ç”¨ R åŒ…",
    "section": "",
    "text": "è¿™é‡Œæ”¶é›†äº†æé«˜æ•ˆç‡çš„å„ç±» R åŒ…ï¼Œæ¶µç›–è¡¨æ ¼åˆ¶ä½œã€æ•°æ®å¤„ç†å’Œæ¨¡å‹æ•´ç†ç­‰æ–¹é¢ã€‚"
  },
  {
    "objectID": "sections/packages.html#r-åŒ…å·¥å…·åº“",
    "href": "sections/packages.html#r-åŒ…å·¥å…·åº“",
    "title": "å®ç”¨ R åŒ…",
    "section": "",
    "text": "è¿™é‡Œæ”¶é›†äº†æé«˜æ•ˆç‡çš„å„ç±» R åŒ…ï¼Œæ¶µç›–è¡¨æ ¼åˆ¶ä½œã€æ•°æ®å¤„ç†å’Œæ¨¡å‹æ•´ç†ç­‰æ–¹é¢ã€‚"
  },
  {
    "objectID": "sections/methods.html",
    "href": "sections/methods.html",
    "title": "R è¯­è¨€ç»Ÿè®¡æ–¹æ³•",
    "section": "",
    "text": "è¿™é‡Œæ”¶é›†äº†ä½¿ç”¨ R è¯­è¨€å®ç°çš„å„ç±»åˆ†ææ–¹æ³•ï¼Œæ¶µç›–å›å½’åˆ†æã€ç”Ÿå­˜åˆ†æã€å› æœæ¨æ–­ã€é«˜çº§å»ºæ¨¡ã€æœºå™¨å­¦ä¹ ç­‰é¢†åŸŸã€‚æ¯ç¯‡æ•™ç¨‹éƒ½ä»åŸç†å‡ºå‘ï¼Œé…ä»¥å®Œæ•´çš„ä»£ç å®ç°å’Œå¯è§†åŒ–ã€‚"
  },
  {
    "objectID": "sections/methods.html#ç»Ÿè®¡å»ºæ¨¡æ–¹æ³•åº“",
    "href": "sections/methods.html#ç»Ÿè®¡å»ºæ¨¡æ–¹æ³•åº“",
    "title": "R è¯­è¨€ç»Ÿè®¡æ–¹æ³•",
    "section": "",
    "text": "è¿™é‡Œæ”¶é›†äº†ä½¿ç”¨ R è¯­è¨€å®ç°çš„å„ç±»åˆ†ææ–¹æ³•ï¼Œæ¶µç›–å›å½’åˆ†æã€ç”Ÿå­˜åˆ†æã€å› æœæ¨æ–­ã€é«˜çº§å»ºæ¨¡ã€æœºå™¨å­¦ä¹ ç­‰é¢†åŸŸã€‚æ¯ç¯‡æ•™ç¨‹éƒ½ä»åŸç†å‡ºå‘ï¼Œé…ä»¥å®Œæ•´çš„ä»£ç å®ç°å’Œå¯è§†åŒ–ã€‚"
  },
  {
    "objectID": "4001-shiny.html",
    "href": "4001-shiny.html",
    "title": "Shiny Web åº”ç”¨å¼€å‘å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "Shiny æ˜¯ RStudioï¼ˆç° Positï¼‰å¼€å‘çš„ R åŒ…ï¼Œç”¨äºæ„å»ºäº¤äº’å¼ Web åº”ç”¨ç¨‹åºã€‚æ— éœ€ HTMLã€CSS æˆ– JavaScript çŸ¥è¯†ï¼Œåªç”¨ R ä»£ç å°±èƒ½åˆ›å»ºä¸“ä¸šçš„æ•°æ®åˆ†æåº”ç”¨ã€‚\n\n\n\n\n\nä¼˜åŠ¿\nè¯´æ˜\n\n\n\n\nçº¯ R å¼€å‘\næ— éœ€å­¦ä¹ å‰ç«¯æŠ€æœ¯\n\n\nå“åº”å¼ç¼–ç¨‹\nè¾“å…¥å˜åŒ–æ—¶è¾“å‡ºè‡ªåŠ¨æ›´æ–°\n\n\nä¸°å¯Œç»„ä»¶\nå†…ç½®å¤§é‡è¾“å…¥/è¾“å‡ºæ§ä»¶\n\n\nå¯æ‰©å±•\nå¯é›†æˆ HTML/CSS/JavaScript\n\n\næ˜“äºéƒ¨ç½²\næ”¯æŒå¤šç§æ‰˜ç®¡å¹³å°\n\n\n\n\n\n\n\næ•°æ®ä»ªè¡¨ç›˜ï¼šå®æ—¶ç›‘æ§ã€KPI å±•ç¤º\näº¤äº’å¼æŠ¥å‘Šï¼šå…è®¸ç”¨æˆ·è‡ªå®šä¹‰å‚æ•°\næ•°æ®æ¢ç´¢å·¥å…·ï¼šåŠ¨æ€ç­›é€‰å’Œå¯è§†åŒ–\næœºå™¨å­¦ä¹ æ¼”ç¤ºï¼šæ¨¡å‹é¢„æµ‹ç•Œé¢\næ•™å­¦å·¥å…·ï¼šç»Ÿè®¡æ¦‚å¿µå¯è§†åŒ–",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "Shiny Web åº”ç”¨"
    ]
  },
  {
    "objectID": "4001-shiny.html#ä»€ä¹ˆæ˜¯-shiny",
    "href": "4001-shiny.html#ä»€ä¹ˆæ˜¯-shiny",
    "title": "Shiny Web åº”ç”¨å¼€å‘å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "Shiny æ˜¯ RStudioï¼ˆç° Positï¼‰å¼€å‘çš„ R åŒ…ï¼Œç”¨äºæ„å»ºäº¤äº’å¼ Web åº”ç”¨ç¨‹åºã€‚æ— éœ€ HTMLã€CSS æˆ– JavaScript çŸ¥è¯†ï¼Œåªç”¨ R ä»£ç å°±èƒ½åˆ›å»ºä¸“ä¸šçš„æ•°æ®åˆ†æåº”ç”¨ã€‚\n\n\n\n\n\nä¼˜åŠ¿\nè¯´æ˜\n\n\n\n\nçº¯ R å¼€å‘\næ— éœ€å­¦ä¹ å‰ç«¯æŠ€æœ¯\n\n\nå“åº”å¼ç¼–ç¨‹\nè¾“å…¥å˜åŒ–æ—¶è¾“å‡ºè‡ªåŠ¨æ›´æ–°\n\n\nä¸°å¯Œç»„ä»¶\nå†…ç½®å¤§é‡è¾“å…¥/è¾“å‡ºæ§ä»¶\n\n\nå¯æ‰©å±•\nå¯é›†æˆ HTML/CSS/JavaScript\n\n\næ˜“äºéƒ¨ç½²\næ”¯æŒå¤šç§æ‰˜ç®¡å¹³å°\n\n\n\n\n\n\n\næ•°æ®ä»ªè¡¨ç›˜ï¼šå®æ—¶ç›‘æ§ã€KPI å±•ç¤º\näº¤äº’å¼æŠ¥å‘Šï¼šå…è®¸ç”¨æˆ·è‡ªå®šä¹‰å‚æ•°\næ•°æ®æ¢ç´¢å·¥å…·ï¼šåŠ¨æ€ç­›é€‰å’Œå¯è§†åŒ–\næœºå™¨å­¦ä¹ æ¼”ç¤ºï¼šæ¨¡å‹é¢„æµ‹ç•Œé¢\næ•™å­¦å·¥å…·ï¼šç»Ÿè®¡æ¦‚å¿µå¯è§†åŒ–",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "Shiny Web åº”ç”¨"
    ]
  },
  {
    "objectID": "4001-shiny.html#å®‰è£…ä¸åŠ è½½",
    "href": "4001-shiny.html#å®‰è£…ä¸åŠ è½½",
    "title": "Shiny Web åº”ç”¨å¼€å‘å®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\n# å®‰è£… Shiny\n# install.packages(\"shiny\")\n\n# åŠ è½½åŒ…\nlibrary(shiny)\nlibrary(tidyverse)\nlibrary(DT) # äº¤äº’å¼è¡¨æ ¼",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "Shiny Web åº”ç”¨"
    ]
  },
  {
    "objectID": "4001-shiny.html#shiny-åº”ç”¨ç»“æ„",
    "href": "4001-shiny.html#shiny-åº”ç”¨ç»“æ„",
    "title": "Shiny Web åº”ç”¨å¼€å‘å®Œå…¨æŒ‡å—",
    "section": "Shiny åº”ç”¨ç»“æ„",
    "text": "Shiny åº”ç”¨ç»“æ„\næ¯ä¸ª Shiny åº”ç”¨ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š\n\nlibrary(shiny)\n\n# 1. ç”¨æˆ·ç•Œé¢ (UI)\nui &lt;- fluidPage(\n    titlePanel(\"æˆ‘çš„ç¬¬ä¸€ä¸ª Shiny åº”ç”¨\"),\n    sidebarLayout(\n        sidebarPanel(\n            # è¾“å…¥æ§ä»¶\n            sliderInput(\"n\", \"æ ·æœ¬é‡:\", min = 10, max = 1000, value = 100)\n        ),\n        mainPanel(\n            # è¾“å‡ºå±•ç¤º\n            plotOutput(\"histogram\")\n        )\n    )\n)\n\n# 2. æœåŠ¡å™¨é€»è¾‘ (Server)\nserver &lt;- function(input, output, session) {\n    output$histogram &lt;- renderPlot({\n        data &lt;- rnorm(input$n)\n        hist(data, main = paste(\"n =\", input$n), col = \"#4f46e5\")\n    })\n}\n\n# 3. åˆ›å»ºåº”ç”¨\nshinyApp(ui = ui, server = server)\n\n\næ ¸å¿ƒæ¦‚å¿µ\n\n\n\n\n\næ¦‚å¿µ\nè¯´æ˜\n\n\n\n\nUI\nå®šä¹‰åº”ç”¨å¤–è§‚å’Œå¸ƒå±€\n\n\nServer\nå®šä¹‰åº”ç”¨é€»è¾‘å’Œè®¡ç®—\n\n\nInput\nç”¨æˆ·äº¤äº’æ§ä»¶ï¼ˆæ»‘å—ã€æŒ‰é’®ç­‰ï¼‰\n\n\nOutput\nå±•ç¤ºç»“æœï¼ˆå›¾è¡¨ã€è¡¨æ ¼ç­‰ï¼‰\n\n\nReactive\nå“åº”å¼ç¼–ç¨‹ï¼Œè¾“å…¥å˜åŒ–è§¦å‘æ›´æ–°",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "Shiny Web åº”ç”¨"
    ]
  },
  {
    "objectID": "4001-shiny.html#è¾“å…¥æ§ä»¶",
    "href": "4001-shiny.html#è¾“å…¥æ§ä»¶",
    "title": "Shiny Web åº”ç”¨å¼€å‘å®Œå…¨æŒ‡å—",
    "section": "è¾“å…¥æ§ä»¶",
    "text": "è¾“å…¥æ§ä»¶\nShiny æä¾›å¤šç§è¾“å…¥æ§ä»¶ï¼š\n\næ•°å€¼è¾“å…¥\n\n# æ»‘å—\nsliderInput(\"slider\", \"é€‰æ‹©èŒƒå›´:\", min = 0, max = 100, value = 50)\n\n# æ•°å€¼æ¡†\nnumericInput(\"num\", \"è¾“å…¥æ•°å­—:\", value = 10, min = 1, max = 100)\n\n# èŒƒå›´æ»‘å—\nsliderInput(\"range\", \"èŒƒå›´:\", min = 0, max = 100, value = c(25, 75))\n\n\n\næ–‡æœ¬è¾“å…¥\n\n# å•è¡Œæ–‡æœ¬\ntextInput(\"text\", \"è¾“å…¥æ–‡æœ¬:\", value = \"é»˜è®¤å€¼\")\n\n# å¤šè¡Œæ–‡æœ¬\ntextAreaInput(\"textarea\", \"è¾“å…¥æè¿°:\", rows = 3)\n\n# å¯†ç è¾“å…¥\npasswordInput(\"password\", \"å¯†ç :\")\n\n\n\né€‰æ‹©è¾“å…¥\n\n# ä¸‹æ‹‰é€‰æ‹©\nselectInput(\"select\", \"é€‰æ‹©ä¸€é¡¹:\",\n    choices = c(\"é€‰é¡¹A\", \"é€‰é¡¹B\", \"é€‰é¡¹C\")\n)\n\n# å¤šé€‰\nselectInput(\"multi\", \"å¤šé€‰:\",\n    choices = c(\"A\", \"B\", \"C\"), multiple = TRUE\n)\n\n# å•é€‰æŒ‰é’®\nradioButtons(\"radio\", \"å•é€‰:\",\n    choices = c(\"ç”·\" = \"M\", \"å¥³\" = \"F\")\n)\n\n# å¤é€‰æ¡†ç»„\ncheckboxGroupInput(\"checkbox\", \"å¤šé€‰:\",\n    choices = c(\"é€‰é¡¹1\", \"é€‰é¡¹2\", \"é€‰é¡¹3\")\n)\n\n# å•ä¸ªå¤é€‰æ¡†\ncheckboxInput(\"agree\", \"æˆ‘åŒæ„æ¡æ¬¾\", value = FALSE)\n\n\n\næ—¥æœŸä¸æ–‡ä»¶\n\n# æ—¥æœŸé€‰æ‹©\ndateInput(\"date\", \"é€‰æ‹©æ—¥æœŸ:\", value = Sys.Date())\n\n# æ—¥æœŸèŒƒå›´\ndateRangeInput(\"daterange\", \"æ—¥æœŸèŒƒå›´:\")\n\n# æ–‡ä»¶ä¸Šä¼ \nfileInput(\"file\", \"ä¸Šä¼ æ–‡ä»¶:\", accept = c(\".csv\", \".xlsx\"))\n\n\n\nåŠ¨ä½œæŒ‰é’®\n\n# æŒ‰é’®\nactionButton(\"go\", \"å¼€å§‹åˆ†æ\", class = \"btn-primary\")\n\n# é“¾æ¥æŒ‰é’®\nactionLink(\"link\", \"ç‚¹å‡»è¿™é‡Œ\")",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "Shiny Web åº”ç”¨"
    ]
  },
  {
    "objectID": "4001-shiny.html#è¾“å‡ºæ§ä»¶",
    "href": "4001-shiny.html#è¾“å‡ºæ§ä»¶",
    "title": "Shiny Web åº”ç”¨å¼€å‘å®Œå…¨æŒ‡å—",
    "section": "è¾“å‡ºæ§ä»¶",
    "text": "è¾“å‡ºæ§ä»¶\nå±•ç¤ºè®¡ç®—ç»“æœçš„æ§ä»¶ï¼š\n\nå›¾è¡¨è¾“å‡º\n\n# UI ç«¯\nplotOutput(\"myplot\", height = \"400px\")\n\n# Server ç«¯\noutput$myplot &lt;- renderPlot({\n    ggplot(iris, aes(Sepal.Length, Sepal.Width, color = Species)) +\n        geom_point() +\n        theme_minimal()\n})\n\n\n\nè¡¨æ ¼è¾“å‡º\n\n# é™æ€è¡¨æ ¼\ntableOutput(\"table\")\noutput$table &lt;- renderTable({\n    head(iris)\n})\n\n# äº¤äº’å¼è¡¨æ ¼ (DT)\nDTOutput(\"dt_table\")\noutput$dt_table &lt;- renderDT({\n    datatable(iris, options = list(pageLength = 5))\n})\n\n\n\næ–‡æœ¬è¾“å‡º\n\n# æ™®é€šæ–‡æœ¬\ntextOutput(\"text\")\noutput$text &lt;- renderText({\n    paste(\"ç»“æœ:\", input$n)\n})\n\n# æ ¼å¼åŒ–è¾“å‡º\nverbatimTextOutput(\"code\")\noutput$code &lt;- renderPrint({\n    summary(iris)\n})\n\n\n\nHTML è¾“å‡º\n\n# HTML å†…å®¹\nhtmlOutput(\"html\")\nuiOutput(\"dynamic_ui\")\n\noutput$html &lt;- renderUI({\n    tags$div(\n        tags$h3(\"åŠ¨æ€æ ‡é¢˜\"),\n        tags$p(\"è¿™æ˜¯åŠ¨æ€ç”Ÿæˆçš„å†…å®¹\")\n    )\n})",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "Shiny Web åº”ç”¨"
    ]
  },
  {
    "objectID": "4001-shiny.html#å“åº”å¼ç¼–ç¨‹",
    "href": "4001-shiny.html#å“åº”å¼ç¼–ç¨‹",
    "title": "Shiny Web åº”ç”¨å¼€å‘å®Œå…¨æŒ‡å—",
    "section": "å“åº”å¼ç¼–ç¨‹",
    "text": "å“åº”å¼ç¼–ç¨‹\nShiny çš„æ ¸å¿ƒæ˜¯å“åº”å¼ç¼–ç¨‹ï¼šå½“è¾“å…¥å˜åŒ–æ—¶ï¼Œç›¸å…³è¾“å‡ºè‡ªåŠ¨æ›´æ–°ã€‚\n\nreactive() è¡¨è¾¾å¼\nç”¨äºåˆ›å»ºå¯å…±äº«çš„å“åº”å¼æ•°æ®ï¼š\n\nserver &lt;- function(input, output, session) {\n    # åˆ›å»ºå“åº”å¼æ•°æ®\n    filtered_data &lt;- reactive({\n        iris %&gt;%\n            filter(Species == input$species)\n    })\n\n    # å¤šä¸ªè¾“å‡ºå…±äº«åŒä¸€ä¸ªå“åº”å¼æ•°æ®\n    output$plot &lt;- renderPlot({\n        ggplot(filtered_data(), aes(Sepal.Length, Sepal.Width)) +\n            geom_point()\n    })\n\n    output$table &lt;- renderTable({\n        head(filtered_data())\n    })\n}\n\n\n\nobserve() ä¸ observeEvent()\nç”¨äºæ‰§è¡Œå‰¯ä½œç”¨ï¼ˆä¸è¿”å›å€¼ï¼‰ï¼š\n\nserver &lt;- function(input, output, session) {\n    # ç›‘è§†æŸä¸ªè¾“å…¥çš„å˜åŒ–\n    observe({\n        print(paste(\"å½“å‰å€¼:\", input$slider))\n    })\n\n    # ä»…åœ¨æŒ‰é’®ç‚¹å‡»æ—¶æ‰§è¡Œ\n    observeEvent(input$go_button, {\n        showNotification(\"åˆ†æå¼€å§‹ï¼\", type = \"message\")\n    })\n}\n\n\n\nreactiveValues()\nåˆ›å»ºå¯ä¿®æ”¹çš„å“åº”å¼å€¼ï¼š\n\nserver &lt;- function(input, output, session) {\n    # åˆ›å»ºå“åº”å¼å€¼å¯¹è±¡\n    rv &lt;- reactiveValues(count = 0, data = NULL)\n\n    # ç‚¹å‡»æŒ‰é’®æ—¶å¢åŠ è®¡æ•°\n    observeEvent(input$add, {\n        rv$count &lt;- rv$count + 1\n    })\n\n    output$counter &lt;- renderText({\n        paste(\"ç‚¹å‡»æ¬¡æ•°:\", rv$count)\n    })\n}\n\n\n\nisolate()\né˜»æ­¢å“åº”å¼ä¾èµ–ï¼š\n\noutput$result &lt;- renderText({\n    # ä»…åœ¨æŒ‰é’®ç‚¹å‡»æ—¶æ›´æ–°ï¼Œslider å˜åŒ–ä¸è§¦å‘\n    input$go_button\n\n    isolate({\n        paste(\"å›ºå®šå€¼:\", input$slider)\n    })\n})",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "Shiny Web åº”ç”¨"
    ]
  },
  {
    "objectID": "4001-shiny.html#å¸ƒå±€è®¾è®¡",
    "href": "4001-shiny.html#å¸ƒå±€è®¾è®¡",
    "title": "Shiny Web åº”ç”¨å¼€å‘å®Œå…¨æŒ‡å—",
    "section": "å¸ƒå±€è®¾è®¡",
    "text": "å¸ƒå±€è®¾è®¡\n\nåŸºç¡€å¸ƒå±€\n\n# ä¾§è¾¹æ å¸ƒå±€\nui &lt;- fluidPage(\n    titlePanel(\"æ ‡é¢˜\"),\n    sidebarLayout(\n        sidebarPanel(\n            # è¾“å…¥æ§ä»¶\n        ),\n        mainPanel(\n            # è¾“å‡ºå±•ç¤º\n        )\n    )\n)\n\n\n\nå¤šè¡Œå¤šåˆ—å¸ƒå±€\n\nui &lt;- fluidPage(\n    fluidRow(\n        column(\n            4,\n            wellPanel(\n                sliderInput(\"n\", \"N:\", min = 1, max = 100, value = 50)\n            )\n        ),\n        column(\n            8,\n            plotOutput(\"plot\")\n        )\n    ),\n    fluidRow(\n        column(\n            12,\n            tableOutput(\"table\")\n        )\n    )\n)\n\n\n\næ ‡ç­¾é¡µå¸ƒå±€\n\nui &lt;- fluidPage(\n    tabsetPanel(\n        tabPanel(\"å›¾è¡¨\", plotOutput(\"plot\")),\n        tabPanel(\"æ•°æ®\", tableOutput(\"table\")),\n        tabPanel(\"æ‘˜è¦\", verbatimTextOutput(\"summary\"))\n    )\n)\n\n\n\nå¯¼èˆªæ å¸ƒå±€\n\nui &lt;- navbarPage(\n    \"æˆ‘çš„åº”ç”¨\",\n    tabPanel(\n        \"é¦–é¡µ\",\n        h2(\"æ¬¢è¿\"),\n        p(\"è¿™æ˜¯é¦–é¡µå†…å®¹\")\n    ),\n    tabPanel(\n        \"åˆ†æ\",\n        plotOutput(\"plot\")\n    ),\n    navbarMenu(\n        \"æ›´å¤š\",\n        tabPanel(\"è®¾ç½®\"),\n        tabPanel(\"å¸®åŠ©\")\n    )\n)\n\n\n\nä»ªè¡¨ç›˜å¸ƒå±€\nä½¿ç”¨ shinydashboard åŒ…åˆ›å»ºä¸“ä¸šä»ªè¡¨ç›˜ï¼š\n\nlibrary(shinydashboard)\n\nui &lt;- dashboardPage(\n    dashboardHeader(title = \"æ•°æ®ä»ªè¡¨ç›˜\"),\n    dashboardSidebar(\n        sidebarMenu(\n            menuItem(\"æ¦‚è§ˆ\", tabName = \"overview\", icon = icon(\"dashboard\")),\n            menuItem(\"åˆ†æ\", tabName = \"analysis\", icon = icon(\"chart-line\"))\n        )\n    ),\n    dashboardBody(\n        tabItems(\n            tabItem(\n                tabName = \"overview\",\n                fluidRow(\n                    valueBox(100, \"æ€»è®°å½•\", icon = icon(\"database\")),\n                    valueBox(50, \"æ´»è·ƒç”¨æˆ·\", icon = icon(\"users\"))\n                )\n            ),\n            tabItem(\n                tabName = \"analysis\",\n                plotOutput(\"plot\")\n            )\n        )\n    )\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "Shiny Web åº”ç”¨"
    ]
  },
  {
    "objectID": "4001-shiny.html#å®Œæ•´ç¤ºä¾‹æ•°æ®æ¢ç´¢åº”ç”¨",
    "href": "4001-shiny.html#å®Œæ•´ç¤ºä¾‹æ•°æ®æ¢ç´¢åº”ç”¨",
    "title": "Shiny Web åº”ç”¨å¼€å‘å®Œå…¨æŒ‡å—",
    "section": "å®Œæ•´ç¤ºä¾‹ï¼šæ•°æ®æ¢ç´¢åº”ç”¨",
    "text": "å®Œæ•´ç¤ºä¾‹ï¼šæ•°æ®æ¢ç´¢åº”ç”¨\nä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ•°æ®æ¢ç´¢åº”ç”¨ç¤ºä¾‹ï¼š\n\nlibrary(shiny)\nlibrary(tidyverse)\nlibrary(DT)\n\n# ä½¿ç”¨å†…ç½®æ•°æ®é›†\ndata(mtcars)\nmtcars$car &lt;- rownames(mtcars)\n\nui &lt;- fluidPage(\n    # åº”ç”¨æ ‡é¢˜\n    titlePanel(\"ğŸš— æ±½è½¦æ•°æ®æ¢ç´¢å™¨\"),\n\n    # ä¾§è¾¹æ å¸ƒå±€\n    sidebarLayout(\n        sidebarPanel(\n            width = 3,\n\n            # å˜é‡é€‰æ‹©\n            selectInput(\"x_var\", \"X è½´å˜é‡:\",\n                choices = names(mtcars)[sapply(mtcars, is.numeric)],\n                selected = \"wt\"\n            ),\n            selectInput(\"y_var\", \"Y è½´å˜é‡:\",\n                choices = names(mtcars)[sapply(mtcars, is.numeric)],\n                selected = \"mpg\"\n            ),\n\n            # é¢œè‰²åˆ†ç»„\n            selectInput(\"color_var\", \"é¢œè‰²åˆ†ç»„:\",\n                choices = c(\"æ— \" = \"none\", \"cyl\", \"gear\", \"am\")\n            ),\n\n            # æ°”ç¼¸æ•°ç­›é€‰\n            checkboxGroupInput(\"cyl_filter\", \"æ°”ç¼¸æ•°:\",\n                choices = unique(mtcars$cyl),\n                selected = unique(mtcars$cyl)\n            ),\n            hr(),\n\n            # ä¸‹è½½æŒ‰é’®\n            downloadButton(\"download_data\", \"ä¸‹è½½ç­›é€‰æ•°æ®\"),\n            downloadButton(\"download_plot\", \"ä¸‹è½½å›¾è¡¨\")\n        ),\n        mainPanel(\n            width = 9,\n            tabsetPanel(\n                tabPanel(\n                    \"ğŸ“Š æ•£ç‚¹å›¾\",\n                    plotOutput(\"scatter_plot\", height = \"500px\")\n                ),\n                tabPanel(\n                    \"ğŸ“ˆ åˆ†å¸ƒå›¾\",\n                    fluidRow(\n                        column(6, plotOutput(\"hist_x\")),\n                        column(6, plotOutput(\"hist_y\"))\n                    )\n                ),\n                tabPanel(\n                    \"ğŸ“‹ æ•°æ®è¡¨\",\n                    DTOutput(\"data_table\")\n                ),\n                tabPanel(\n                    \"ğŸ“ ç»Ÿè®¡æ‘˜è¦\",\n                    verbatimTextOutput(\"summary_stats\")\n                )\n            )\n        )\n    )\n)\n\nserver &lt;- function(input, output, session) {\n    # å“åº”å¼ç­›é€‰æ•°æ®\n    filtered_data &lt;- reactive({\n        mtcars %&gt;%\n            filter(cyl %in% input$cyl_filter)\n    })\n\n    # æ•£ç‚¹å›¾\n    output$scatter_plot &lt;- renderPlot({\n        p &lt;- ggplot(\n            filtered_data(),\n            aes_string(x = input$x_var, y = input$y_var)\n        ) +\n            geom_point(size = 3, alpha = 0.7) +\n            geom_smooth(method = \"lm\", se = TRUE, color = \"#4f46e5\") +\n            theme_minimal(base_size = 14) +\n            labs(\n                title = paste(input$y_var, \"vs\", input$x_var),\n                x = input$x_var,\n                y = input$y_var\n            )\n\n        # æ·»åŠ é¢œè‰²åˆ†ç»„\n        if (input$color_var != \"none\") {\n            p &lt;- ggplot(\n                filtered_data(),\n                aes_string(\n                    x = input$x_var, y = input$y_var,\n                    color = paste0(\"factor(\", input$color_var, \")\")\n                )\n            ) +\n                geom_point(size = 3, alpha = 0.7) +\n                theme_minimal(base_size = 14) +\n                labs(color = input$color_var)\n        }\n\n        p\n    })\n\n    # X å˜é‡ç›´æ–¹å›¾\n    output$hist_x &lt;- renderPlot({\n        ggplot(filtered_data(), aes_string(x = input$x_var)) +\n            geom_histogram(fill = \"#4f46e5\", color = \"white\", bins = 15) +\n            theme_minimal(base_size = 12) +\n            labs(title = paste(input$x_var, \"åˆ†å¸ƒ\"), x = input$x_var)\n    })\n\n    # Y å˜é‡ç›´æ–¹å›¾\n    output$hist_y &lt;- renderPlot({\n        ggplot(filtered_data(), aes_string(x = input$y_var)) +\n            geom_histogram(fill = \"#7c3aed\", color = \"white\", bins = 15) +\n            theme_minimal(base_size = 12) +\n            labs(title = paste(input$y_var, \"åˆ†å¸ƒ\"), x = input$y_var)\n    })\n\n    # æ•°æ®è¡¨\n    output$data_table &lt;- renderDT({\n        datatable(\n            filtered_data(),\n            options = list(\n                pageLength = 10,\n                scrollX = TRUE\n            ),\n            filter = \"top\"\n        )\n    })\n\n    # ç»Ÿè®¡æ‘˜è¦\n    output$summary_stats &lt;- renderPrint({\n        cat(\"=== æ•°æ®æ‘˜è¦ ===\\n\\n\")\n        cat(\"æ ·æœ¬é‡:\", nrow(filtered_data()), \"\\n\\n\")\n        summary(filtered_data()[, c(input$x_var, input$y_var)])\n    })\n\n    # ä¸‹è½½æ•°æ®\n    output$download_data &lt;- downloadHandler(\n        filename = function() {\n            paste0(\"mtcars_filtered_\", Sys.Date(), \".csv\")\n        },\n        content = function(file) {\n            write.csv(filtered_data(), file, row.names = FALSE)\n        }\n    )\n\n    # ä¸‹è½½å›¾è¡¨\n    output$download_plot &lt;- downloadHandler(\n        filename = function() {\n            paste0(\"scatter_plot_\", Sys.Date(), \".png\")\n        },\n        content = function(file) {\n            p &lt;- ggplot(\n                filtered_data(),\n                aes_string(x = input$x_var, y = input$y_var)\n            ) +\n                geom_point(size = 3) +\n                geom_smooth(method = \"lm\") +\n                theme_minimal()\n            ggsave(file, p, width = 10, height = 6)\n        }\n    )\n}\n\n# è¿è¡Œåº”ç”¨\nshinyApp(ui = ui, server = server)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "Shiny Web åº”ç”¨"
    ]
  },
  {
    "objectID": "4001-shiny.html#ç¾åŒ–åº”ç”¨",
    "href": "4001-shiny.html#ç¾åŒ–åº”ç”¨",
    "title": "Shiny Web åº”ç”¨å¼€å‘å®Œå…¨æŒ‡å—",
    "section": "ç¾åŒ–åº”ç”¨",
    "text": "ç¾åŒ–åº”ç”¨\n\nä½¿ç”¨ bslib ä¸»é¢˜\n\nlibrary(bslib)\n\nui &lt;- fluidPage(\n    theme = bs_theme(\n        bootswatch = \"flatly\", # ä¸»é¢˜åç§°\n        primary = \"#4f46e5\", # ä¸»è‰²è°ƒ\n        base_font = font_google(\"Noto Sans SC\") # ä¸­æ–‡å­—ä½“\n    ),\n    # ... å…¶ä»–å†…å®¹\n)\n\n\n\nè‡ªå®šä¹‰ CSS\n\nui &lt;- fluidPage(\n    tags$head(\n        tags$style(HTML(\"\n      .well { background-color: #f8fafc; }\n      .btn-primary { background-color: #4f46e5; }\n      h1 { color: #1e293b; }\n    \"))\n    ),\n    # ... å…¶ä»–å†…å®¹\n)\n\n\n\næ·»åŠ è¿›åº¦æ¡å’Œé€šçŸ¥\n\nserver &lt;- function(input, output, session) {\n    observeEvent(input$long_task, {\n        # æ˜¾ç¤ºè¿›åº¦æ¡\n        withProgress(message = \"å¤„ç†ä¸­...\", value = 0, {\n            for (i in 1:10) {\n                incProgress(1 / 10, detail = paste(\"æ­¥éª¤\", i))\n                Sys.sleep(0.5)\n            }\n        })\n\n        # æ˜¾ç¤ºæˆåŠŸé€šçŸ¥\n        showNotification(\"å¤„ç†å®Œæˆï¼\", type = \"message\", duration = 3)\n    })\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "Shiny Web åº”ç”¨"
    ]
  },
  {
    "objectID": "4001-shiny.html#åº”ç”¨éƒ¨ç½²",
    "href": "4001-shiny.html#åº”ç”¨éƒ¨ç½²",
    "title": "Shiny Web åº”ç”¨å¼€å‘å®Œå…¨æŒ‡å—",
    "section": "åº”ç”¨éƒ¨ç½²",
    "text": "åº”ç”¨éƒ¨ç½²\n\næœ¬åœ°è¿è¡Œ\n\n# ä»æ–‡ä»¶è¿è¡Œ\nrunApp(\"my_app/\")\n\n# æŒ‡å®šç«¯å£\nrunApp(\"my_app/\", port = 8080)\n\n\n\néƒ¨ç½²åˆ° shinyapps.io\n\n# å®‰è£…éƒ¨ç½²å·¥å…·\ninstall.packages(\"rsconnect\")\n\n# é…ç½®è´¦æˆ·\nrsconnect::setAccountInfo(\n    name = \"your_account\",\n    token = \"your_token\",\n    secret = \"your_secret\"\n)\n\n# éƒ¨ç½²åº”ç”¨\nrsconnect::deployApp(\"my_app/\")\n\n\n\néƒ¨ç½²åˆ° Shiny Server\n\nå®‰è£… Shiny Serverï¼ˆå¼€æºç‰ˆæˆ–ä¸“ä¸šç‰ˆï¼‰\nå°†åº”ç”¨æ”¾åˆ° /srv/shiny-server/ ç›®å½•\nè®¿é—® http://your_server:3838/app_name",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "Shiny Web åº”ç”¨"
    ]
  },
  {
    "objectID": "4001-shiny.html#è¿›é˜¶æŠ€å·§",
    "href": "4001-shiny.html#è¿›é˜¶æŠ€å·§",
    "title": "Shiny Web åº”ç”¨å¼€å‘å®Œå…¨æŒ‡å—",
    "section": "è¿›é˜¶æŠ€å·§",
    "text": "è¿›é˜¶æŠ€å·§\n\næ¨¡å—åŒ–å¼€å‘\nå°†å¤§å‹åº”ç”¨æ‹†åˆ†ä¸ºæ¨¡å—ï¼š\n\n# å®šä¹‰æ¨¡å— UI\nhistogramUI &lt;- function(id) {\n    ns &lt;- NS(id)\n    tagList(\n        sliderInput(ns(\"bins\"), \"Bins:\", min = 5, max = 50, value = 20),\n        plotOutput(ns(\"plot\"))\n    )\n}\n\n# å®šä¹‰æ¨¡å— Server\nhistogramServer &lt;- function(id, data) {\n    moduleServer(id, function(input, output, session) {\n        output$plot &lt;- renderPlot({\n            hist(data(), breaks = input$bins, col = \"#4f46e5\")\n        })\n    })\n}\n\n# åœ¨ä¸»åº”ç”¨ä¸­ä½¿ç”¨\nui &lt;- fluidPage(\n    histogramUI(\"hist1\"),\n    histogramUI(\"hist2\")\n)\n\nserver &lt;- function(input, output, session) {\n    histogramServer(\"hist1\", reactive(rnorm(500)))\n    histogramServer(\"hist2\", reactive(runif(500)))\n}\n\n\n\nä½¿ç”¨ JavaScript\n\nui &lt;- fluidPage(\n    tags$head(\n        tags$script(HTML(\"\n      Shiny.addCustomMessageHandler('alert', function(message) {\n        alert(message);\n      });\n    \"))\n    ),\n    actionButton(\"show_alert\", \"æ˜¾ç¤ºæç¤º\")\n)\n\nserver &lt;- function(input, output, session) {\n    observeEvent(input$show_alert, {\n        session$sendCustomMessage(\"alert\", \"Hello from R!\")\n    })\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "Shiny Web åº”ç”¨"
    ]
  },
  {
    "objectID": "4001-shiny.html#å¸¸è§é—®é¢˜",
    "href": "4001-shiny.html#å¸¸è§é—®é¢˜",
    "title": "Shiny Web åº”ç”¨å¼€å‘å®Œå…¨æŒ‡å—",
    "section": "å¸¸è§é—®é¢˜",
    "text": "å¸¸è§é—®é¢˜\n\n1. åº”ç”¨å“åº”ç¼“æ…¢\n\nä½¿ç”¨ reactive() ç¼“å­˜è®¡ç®—ç»“æœ\né¿å…åœ¨ render* å‡½æ•°ä¸­è¿›è¡Œé‡å¤è®¡ç®—\nä½¿ç”¨ bindCache() ç¼“å­˜è¾“å‡º\n\n\n\n2. æ–‡ä»¶ä¸Šä¼ é™åˆ¶\n\n# å¢åŠ ä¸Šä¼ å¤§å°é™åˆ¶ï¼ˆ100MBï¼‰\noptions(shiny.maxRequestSize = 100 * 1024^2)\n\n\n\n3. ä¸­æ–‡æ˜¾ç¤ºé—®é¢˜\n\n# è®¾ç½®ç¼–ç \nSys.setlocale(\"LC_ALL\", \"Chinese\")",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "Shiny Web åº”ç”¨"
    ]
  },
  {
    "objectID": "4001-shiny.html#æ€»ç»“",
    "href": "4001-shiny.html#æ€»ç»“",
    "title": "Shiny Web åº”ç”¨å¼€å‘å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nç»„ä»¶\nä¸»è¦å‡½æ•°\nç”¨é€”\n\n\n\n\nUI å¸ƒå±€\nfluidPage(), sidebarLayout()\nå®šä¹‰åº”ç”¨ç»“æ„\n\n\nè¾“å…¥æ§ä»¶\n*Input()\næ”¶é›†ç”¨æˆ·è¾“å…¥\n\n\nè¾“å‡ºæ§ä»¶\n*Output()\nå±•ç¤ºç»“æœ\n\n\nå“åº”å¼\nreactive(), observe()\nå¤„ç†æ•°æ®æµ\n\n\néƒ¨ç½²\nrsconnect::deployApp()\nå‘å¸ƒåº”ç”¨\n\n\n\n\næ¨èèµ„æº\n\nShiny å®˜æ–¹æ•™ç¨‹\nMastering Shiny - Hadley Wickham è‘—\nShiny Gallery - ç¤ºä¾‹åº”ç”¨é›†\nshinydashboard - ä»ªè¡¨ç›˜æ‰©å±•",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "Shiny Web åº”ç”¨"
    ]
  },
  {
    "objectID": "3011-forcats.html",
    "href": "3011-forcats.html",
    "title": "forcats å› å­å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "åœ¨ R è¯­è¨€ä¸­ï¼Œå› å­ï¼ˆfactorï¼‰ æ˜¯ç”¨äºè¡¨ç¤ºåˆ†ç±»æ•°æ®çš„ç‰¹æ®Šæ•°æ®ç±»å‹ã€‚ä¸å­—ç¬¦å‹ä¸åŒï¼Œå› å­æœ‰é¢„å®šä¹‰çš„æ°´å¹³ï¼ˆlevelsï¼‰ï¼Œè¿™äº›æ°´å¹³å†³å®šäº†æ•°æ®çš„å–å€¼èŒƒå›´å’Œé¡ºåºã€‚\nå› å­åœ¨ä»¥ä¸‹åœºæ™¯ä¸­éå¸¸é‡è¦ï¼š\n\n\n\nåº”ç”¨åœºæ™¯\nè¯´æ˜\n\n\n\n\nç»Ÿè®¡å»ºæ¨¡\nå›å½’åˆ†æä¸­è‡ªåŠ¨ç”Ÿæˆå“‘å˜é‡\n\n\nå¯è§†åŒ–\næ§åˆ¶å›¾ä¾‹å’Œåæ ‡è½´çš„é¡ºåº\n\n\næ•°æ®éªŒè¯\né™åˆ¶å˜é‡åªèƒ½å–ç‰¹å®šå€¼\n\n\nåˆ†ç»„åˆ†æ\næŒ‰ç±»åˆ«è¿›è¡Œæ±‡æ€»ç»Ÿè®¡\n\n\n\n\n# å®‰è£…å¹¶åŠ è½½å¿…è¦çš„åŒ…\nif (!require(\"forcats\")) install.packages(\"forcats\")\nif (!require(\"dplyr\")) install.packages(\"dplyr\")\nif (!require(\"ggplot2\")) install.packages(\"ggplot2\")\nif (!require(\"tibble\")) install.packages(\"tibble\")\n\nlibrary(forcats)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(tibble)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "forcats - å› å­å¤„ç†"
    ]
  },
  {
    "objectID": "3011-forcats.html#ä»€ä¹ˆæ˜¯å› å­",
    "href": "3011-forcats.html#ä»€ä¹ˆæ˜¯å› å­",
    "title": "forcats å› å­å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "åœ¨ R è¯­è¨€ä¸­ï¼Œå› å­ï¼ˆfactorï¼‰ æ˜¯ç”¨äºè¡¨ç¤ºåˆ†ç±»æ•°æ®çš„ç‰¹æ®Šæ•°æ®ç±»å‹ã€‚ä¸å­—ç¬¦å‹ä¸åŒï¼Œå› å­æœ‰é¢„å®šä¹‰çš„æ°´å¹³ï¼ˆlevelsï¼‰ï¼Œè¿™äº›æ°´å¹³å†³å®šäº†æ•°æ®çš„å–å€¼èŒƒå›´å’Œé¡ºåºã€‚\nå› å­åœ¨ä»¥ä¸‹åœºæ™¯ä¸­éå¸¸é‡è¦ï¼š\n\n\n\nåº”ç”¨åœºæ™¯\nè¯´æ˜\n\n\n\n\nç»Ÿè®¡å»ºæ¨¡\nå›å½’åˆ†æä¸­è‡ªåŠ¨ç”Ÿæˆå“‘å˜é‡\n\n\nå¯è§†åŒ–\næ§åˆ¶å›¾ä¾‹å’Œåæ ‡è½´çš„é¡ºåº\n\n\næ•°æ®éªŒè¯\né™åˆ¶å˜é‡åªèƒ½å–ç‰¹å®šå€¼\n\n\nåˆ†ç»„åˆ†æ\næŒ‰ç±»åˆ«è¿›è¡Œæ±‡æ€»ç»Ÿè®¡\n\n\n\n\n# å®‰è£…å¹¶åŠ è½½å¿…è¦çš„åŒ…\nif (!require(\"forcats\")) install.packages(\"forcats\")\nif (!require(\"dplyr\")) install.packages(\"dplyr\")\nif (!require(\"ggplot2\")) install.packages(\"ggplot2\")\nif (!require(\"tibble\")) install.packages(\"tibble\")\n\nlibrary(forcats)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(tibble)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "forcats - å› å­å¤„ç†"
    ]
  },
  {
    "objectID": "3011-forcats.html#å› å­åŸºç¡€",
    "href": "3011-forcats.html#å› å­åŸºç¡€",
    "title": "forcats å› å­å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å› å­åŸºç¡€",
    "text": "å› å­åŸºç¡€\n\nåˆ›å»ºå› å­\n\n# ä»å­—ç¬¦å‘é‡åˆ›å»ºå› å­\neducation &lt;- c(\"æœ¬ç§‘\", \"ç¡•å£«\", \"åšå£«\", \"æœ¬ç§‘\", \"é«˜ä¸­\", \"ç¡•å£«\")\nedu_factor &lt;- factor(education)\nedu_factor\n\n[1] æœ¬ç§‘ ç¡•å£« åšå£« æœ¬ç§‘ é«˜ä¸­ ç¡•å£«\nLevels: æœ¬ç§‘ åšå£« é«˜ä¸­ ç¡•å£«\n\n# æŸ¥çœ‹å› å­æ°´å¹³\nlevels(edu_factor)\n\n[1] \"æœ¬ç§‘\" \"åšå£«\" \"é«˜ä¸­\" \"ç¡•å£«\"\n\n# æŒ‡å®šæ°´å¹³é¡ºåºï¼ˆæœ‰åºå› å­ï¼‰\nedu_ordered &lt;- factor(\n    education,\n    levels = c(\"é«˜ä¸­\", \"æœ¬ç§‘\", \"ç¡•å£«\", \"åšå£«\"),\n    ordered = TRUE\n)\nedu_ordered\n\n[1] æœ¬ç§‘ ç¡•å£« åšå£« æœ¬ç§‘ é«˜ä¸­ ç¡•å£«\nLevels: é«˜ä¸­ &lt; æœ¬ç§‘ &lt; ç¡•å£« &lt; åšå£«\n\n\n\n\nå› å­çš„é—®é¢˜\nBase R çš„å› å­æ“ä½œå­˜åœ¨ä¸€äº›ç—›ç‚¹ï¼š\n\n# é—®é¢˜1ï¼šé»˜è®¤æŒ‰å­—æ¯é¡ºåºæ’åº\ntreatment &lt;- factor(c(\"Control\", \"Treatment A\", \"Treatment B\"))\nlevels(treatment) # å­—æ¯é¡ºåºï¼Œè€Œéé€»è¾‘é¡ºåº\n\n[1] \"Control\"     \"Treatment A\" \"Treatment B\"\n\n# é—®é¢˜2ï¼šä¿®æ”¹æ°´å¹³é¡ºåºç¹ç\n# éœ€è¦é‡æ–°åˆ›å»ºå› å­æˆ–ä½¿ç”¨å¤æ‚çš„ç´¢å¼•æ“ä½œ\n\n# é—®é¢˜3ï¼šæ·»åŠ æ–°æ°´å¹³å®¹æ˜“å‡ºé”™\n# ç›´æ¥èµ‹å€¼å¯èƒ½äº§ç”Ÿ NA\n\nforcats åŒ…å®Œç¾è§£å†³äº†è¿™äº›é—®é¢˜ï¼",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "forcats - å› å­å¤„ç†"
    ]
  },
  {
    "objectID": "3011-forcats.html#forcats-æ ¸å¿ƒå‡½æ•°",
    "href": "3011-forcats.html#forcats-æ ¸å¿ƒå‡½æ•°",
    "title": "forcats å› å­å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "forcats æ ¸å¿ƒå‡½æ•°",
    "text": "forcats æ ¸å¿ƒå‡½æ•°\n\næŸ¥çœ‹å› å­ä¿¡æ¯ï¼šfct_count å’Œ fct_unique\n\n# åˆ›å»ºç¤ºä¾‹æ•°æ®\nresponses &lt;- factor(c(\"åŒæ„\", \"ä¸­ç«‹\", \"åå¯¹\", \"åŒæ„\", \"åŒæ„\", \"ä¸­ç«‹\", \"åå¯¹\", \"åŒæ„\"))\n\n# ç»Ÿè®¡å„æ°´å¹³é¢‘æ•°\nfct_count(responses)\n\n# A tibble: 3 Ã— 2\n  f         n\n  &lt;fct&gt; &lt;int&gt;\n1 åå¯¹      2\n2 åŒæ„      4\n3 ä¸­ç«‹      2\n\n# è·å–å”¯ä¸€æ°´å¹³ï¼ˆç±»ä¼¼ levels() ä½†è¿”å›å› å­ï¼‰\nfct_unique(responses)\n\n[1] åå¯¹ åŒæ„ ä¸­ç«‹\nLevels: åå¯¹ åŒæ„ ä¸­ç«‹",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "forcats - å› å­å¤„ç†"
    ]
  },
  {
    "objectID": "3011-forcats.html#é‡æ–°æ’åºæ°´å¹³",
    "href": "3011-forcats.html#é‡æ–°æ’åºæ°´å¹³",
    "title": "forcats å› å­å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "é‡æ–°æ’åºæ°´å¹³",
    "text": "é‡æ–°æ’åºæ°´å¹³\n\næ‰‹åŠ¨æ’åºï¼šfct_relevel\nfct_relevel() å…è®¸æ‰‹åŠ¨æŒ‡å®šæ°´å¹³é¡ºåºã€‚\n\n# åŸå§‹å› å­\nsize &lt;- factor(c(\"Small\", \"Medium\", \"Large\", \"Small\", \"Large\"))\nlevels(size) # å­—æ¯é¡ºåº\n\n[1] \"Large\"  \"Medium\" \"Small\" \n\n# é‡æ–°æ’åº\nsize_ordered &lt;- fct_relevel(size, \"Small\", \"Medium\", \"Large\")\nlevels(size_ordered)\n\n[1] \"Small\"  \"Medium\" \"Large\" \n\n# åªç§»åŠ¨ç‰¹å®šæ°´å¹³åˆ°å¼€å¤´\nsize_small_first &lt;- fct_relevel(size, \"Small\")\nlevels(size_small_first)\n\n[1] \"Small\"  \"Large\"  \"Medium\"\n\n# ç§»åŠ¨åˆ°æœ«å°¾ï¼ˆä½¿ç”¨ after å‚æ•°ï¼‰\nsize_large_last &lt;- fct_relevel(size, \"Large\", after = Inf)\nlevels(size_large_last)\n\n[1] \"Medium\" \"Small\"  \"Large\" \n\n# ç§»åŠ¨åˆ°ç‰¹å®šä½ç½®\nsize_medium_second &lt;- fct_relevel(size, \"Medium\", after = 1)\nlevels(size_medium_second)\n\n[1] \"Large\"  \"Medium\" \"Small\" \n\n\n\n\næŒ‰é¢‘ç‡æ’åºï¼šfct_infreq å’Œ fct_inseq\n\n# ç¤ºä¾‹æ•°æ®\ncolors &lt;- factor(c(\"çº¢\", \"è“\", \"çº¢\", \"ç»¿\", \"çº¢\", \"è“\", \"çº¢\", \"ç»¿\", \"ç»¿\"))\n\n# æŒ‰é¢‘ç‡é™åºæ’åº\ncolors_freq &lt;- fct_infreq(colors)\nlevels(colors_freq)\n\n[1] \"çº¢\" \"ç»¿\" \"è“\"\n\n# æŒ‰é¢‘ç‡å‡åº\ncolors_freq_asc &lt;- fct_rev(fct_infreq(colors))\nlevels(colors_freq_asc)\n\n[1] \"è“\" \"ç»¿\" \"çº¢\"\n\n# æŒ‰æ•°å­—é¡ºåºï¼ˆé€‚ç”¨äº \"1\", \"2\", \"10\" ç­‰ï¼‰\nnums &lt;- factor(c(\"1\", \"2\", \"10\", \"20\", \"3\"))\nlevels(fct_inseq(nums))\n\n[1] \"1\"  \"2\"  \"3\"  \"10\" \"20\"\n\n\n\n\næŒ‰å¦ä¸€å˜é‡æ’åºï¼šfct_reorder\nfct_reorder() æ˜¯å¯è§†åŒ–ä¸­æœ€å¸¸ç”¨çš„å‡½æ•°ï¼Œæ ¹æ®å¦ä¸€ä¸ªå˜é‡çš„ç»Ÿè®¡å€¼é‡æ’å› å­ã€‚\n\n# åˆ›å»ºç¤ºä¾‹æ•°æ®\nsales &lt;- tibble(\n    product = factor(c(\"A\", \"B\", \"C\", \"D\", \"E\")),\n    revenue = c(100, 250, 180, 300, 150)\n)\n\n# æŒ‰æ”¶å…¥æ’åº\nsales &lt;- sales %&gt;%\n    mutate(product = fct_reorder(product, revenue))\n\nlevels(sales$product)\n\n[1] \"A\" \"E\" \"C\" \"B\" \"D\"\n\n# å¯è§†åŒ–æ•ˆæœ\nggplot(sales, aes(x = revenue, y = product)) +\n    geom_col(fill = \"#667eea\") +\n    labs(title = \"æŒ‰æ”¶å…¥æ’åºçš„äº§å“\", x = \"æ”¶å…¥\", y = \"äº§å“\") +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n# ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°æ’åº\n# ä¾‹å¦‚ï¼šæŒ‰æ”¶å…¥çš„ä¸­ä½æ•°æ’åº\nmulti_sales &lt;- tibble(\n    product = factor(rep(c(\"A\", \"B\", \"C\"), each = 3)),\n    revenue = c(100, 120, 110, 200, 250, 220, 150, 160, 155)\n)\n\nmulti_sales &lt;- multi_sales %&gt;%\n    mutate(product = fct_reorder(product, revenue, .fun = median))\n\nlevels(multi_sales$product)\n\n[1] \"A\" \"C\" \"B\"\n\n\n\n\næŒ‰å‡ºç°é¡ºåºï¼šfct_inorder\n\n# æŒ‰æ•°æ®ä¸­é¦–æ¬¡å‡ºç°çš„é¡ºåºæ’åˆ—\nfirst_appearance &lt;- factor(c(\"C\", \"A\", \"B\", \"C\", \"A\"))\nlevels(first_appearance) # é»˜è®¤å­—æ¯é¡ºåº\n\n[1] \"A\" \"B\" \"C\"\n\nlevels(fct_inorder(first_appearance)) # æŒ‰å‡ºç°é¡ºåº\n\n[1] \"C\" \"A\" \"B\"\n\n\n\n\nåè½¬é¡ºåºï¼šfct_rev\n\nsize &lt;- factor(c(\"Small\", \"Medium\", \"Large\"),\n    levels = c(\"Small\", \"Medium\", \"Large\")\n)\n\n# åè½¬æ°´å¹³é¡ºåº\nsize_rev &lt;- fct_rev(size)\nlevels(size_rev)\n\n[1] \"Large\"  \"Medium\" \"Small\" \n\n\n\n\nç§»åŠ¨ç‰¹å®šæ°´å¹³ï¼šfct_shift\n\ndays &lt;- factor(c(\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\"),\n    levels = c(\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\")\n)\n\n# å‘å·¦ç§»åŠ¨ï¼ˆMon å˜æˆæœ€åä¸€ä¸ªï¼‰\ndays_shift &lt;- fct_shift(days, n = 1)\nlevels(days_shift)\n\n[1] \"Tue\" \"Wed\" \"Thu\" \"Fri\" \"Mon\"\n\n# å‘å³ç§»åŠ¨\ndays_shift_right &lt;- fct_shift(days, n = -1)\nlevels(days_shift_right)\n\n[1] \"Fri\" \"Mon\" \"Tue\" \"Wed\" \"Thu\"",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "forcats - å› å­å¤„ç†"
    ]
  },
  {
    "objectID": "3011-forcats.html#é‡æ–°ç¼–ç æ°´å¹³",
    "href": "3011-forcats.html#é‡æ–°ç¼–ç æ°´å¹³",
    "title": "forcats å› å­å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "é‡æ–°ç¼–ç æ°´å¹³",
    "text": "é‡æ–°ç¼–ç æ°´å¹³\n\nä¿®æ”¹æ°´å¹³åç§°ï¼šfct_recode\n\n# åŸå§‹æ•°æ®\nsatisfaction &lt;- factor(c(\"1\", \"2\", \"3\", \"4\", \"5\", \"3\", \"4\", \"5\"))\n\n# é‡æ–°ç¼–ç \nsatisfaction_named &lt;- fct_recode(satisfaction,\n    \"éå¸¸ä¸æ»¡æ„\" = \"1\",\n    \"ä¸æ»¡æ„\" = \"2\",\n    \"ä¸­ç«‹\" = \"3\",\n    \"æ»¡æ„\" = \"4\",\n    \"éå¸¸æ»¡æ„\" = \"5\"\n)\n\nlevels(satisfaction_named)\n\n[1] \"éå¸¸ä¸æ»¡æ„\" \"ä¸æ»¡æ„\"     \"ä¸­ç«‹\"       \"æ»¡æ„\"       \"éå¸¸æ»¡æ„\"  \n\nfct_count(satisfaction_named)\n\n# A tibble: 5 Ã— 2\n  f              n\n  &lt;fct&gt;      &lt;int&gt;\n1 éå¸¸ä¸æ»¡æ„     1\n2 ä¸æ»¡æ„         1\n3 ä¸­ç«‹           2\n4 æ»¡æ„           2\n5 éå¸¸æ»¡æ„       2\n\n\n\n\nåˆå¹¶æ°´å¹³ï¼šfct_collapse\n\n# è¯¦ç»†åˆ†ç±»\neducation &lt;- factor(c(\"å°å­¦\", \"åˆä¸­\", \"é«˜ä¸­\", \"æœ¬ç§‘\", \"ç¡•å£«\", \"åšå£«\", \"é«˜ä¸­\", \"æœ¬ç§‘\"))\n\n# åˆå¹¶ä¸ºç²—ç•¥åˆ†ç±»\neducation_collapsed &lt;- fct_collapse(education,\n    \"åˆç­‰æ•™è‚²\" = c(\"å°å­¦\", \"åˆä¸­\"),\n    \"ä¸­ç­‰æ•™è‚²\" = \"é«˜ä¸­\",\n    \"é«˜ç­‰æ•™è‚²\" = c(\"æœ¬ç§‘\", \"ç¡•å£«\", \"åšå£«\")\n)\n\nlevels(education_collapsed)\n\n[1] \"é«˜ç­‰æ•™è‚²\" \"åˆç­‰æ•™è‚²\" \"ä¸­ç­‰æ•™è‚²\"\n\nfct_count(education_collapsed)\n\n# A tibble: 3 Ã— 2\n  f            n\n  &lt;fct&gt;    &lt;int&gt;\n1 é«˜ç­‰æ•™è‚²     4\n2 åˆç­‰æ•™è‚²     2\n3 ä¸­ç­‰æ•™è‚²     2\n\n\n\n\nåˆå¹¶ä½é¢‘æ°´å¹³ï¼šfct_lump\nfct_lump ç³»åˆ—å‡½æ•°ç”¨äºå°†ä½é¢‘æ°´å¹³åˆå¹¶ä¸º â€œOtherâ€ã€‚\n\n# ç¤ºä¾‹æ•°æ®\ncountries &lt;- factor(c(\n    rep(\"ä¸­å›½\", 50), rep(\"ç¾å›½\", 30), rep(\"è‹±å›½\", 10),\n    rep(\"æ³•å›½\", 5), rep(\"å¾·å›½\", 3), rep(\"æ—¥æœ¬\", 2)\n))\n\n# ä¿ç•™å‰ n ä¸ªæœ€å¸¸è§çš„æ°´å¹³\nfct_count(fct_lump_n(countries, n = 3))\n\n# A tibble: 4 Ã— 2\n  f         n\n  &lt;fct&gt; &lt;int&gt;\n1 ç¾å›½     30\n2 è‹±å›½     10\n3 ä¸­å›½     50\n4 Other    10\n\n# ä¿ç•™è‡³å°‘å æ¯” p çš„æ°´å¹³\nfct_count(fct_lump_prop(countries, prop = 0.1))\n\n# A tibble: 3 Ã— 2\n  f         n\n  &lt;fct&gt; &lt;int&gt;\n1 ç¾å›½     30\n2 ä¸­å›½     50\n3 Other    20\n\n# ä¿ç•™è‡³å°‘å‡ºç° min æ¬¡çš„æ°´å¹³\nfct_count(fct_lump_min(countries, min = 5))\n\n# A tibble: 5 Ã— 2\n  f         n\n  &lt;fct&gt; &lt;int&gt;\n1 æ³•å›½      5\n2 ç¾å›½     30\n3 è‹±å›½     10\n4 ä¸­å›½     50\n5 Other     5\n\n# è‡ªå®šä¹‰ \"Other\" çš„åç§°\nfct_count(fct_lump_n(countries, n = 3, other_level = \"å…¶ä»–å›½å®¶\"))\n\n# A tibble: 4 Ã— 2\n  f            n\n  &lt;fct&gt;    &lt;int&gt;\n1 ç¾å›½        30\n2 è‹±å›½        10\n3 ä¸­å›½        50\n4 å…¶ä»–å›½å®¶    10\n\n\n\n\nåŒ¿ååŒ–æ°´å¹³ï¼šfct_anon\n\n# åŸå§‹æ•æ„Ÿæ•°æ®\npatients &lt;- factor(c(\"å¼ ä¸‰\", \"æå››\", \"ç‹äº”\", \"å¼ ä¸‰\", \"æå››\"))\n\n# åŒ¿ååŒ–\npatients_anon &lt;- fct_anon(patients, prefix = \"Patient_\")\nlevels(patients_anon)\n\n[1] \"Patient_1\" \"Patient_2\" \"Patient_3\"",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "forcats - å› å­å¤„ç†"
    ]
  },
  {
    "objectID": "3011-forcats.html#æ·»åŠ å’Œåˆ é™¤æ°´å¹³",
    "href": "3011-forcats.html#æ·»åŠ å’Œåˆ é™¤æ°´å¹³",
    "title": "forcats å› å­å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "æ·»åŠ å’Œåˆ é™¤æ°´å¹³",
    "text": "æ·»åŠ å’Œåˆ é™¤æ°´å¹³\n\nåˆ é™¤æœªä½¿ç”¨çš„æ°´å¹³ï¼šfct_drop\n\n# åˆ›å»ºæœ‰å¤šä½™æ°´å¹³çš„å› å­\ncolors &lt;- factor(c(\"çº¢\", \"è“\", \"çº¢\"), levels = c(\"çº¢\", \"è“\", \"ç»¿\", \"é»„\"))\nlevels(colors) # åŒ…å«æœªä½¿ç”¨çš„ \"ç»¿\" å’Œ \"é»„\"\n\n[1] \"çº¢\" \"è“\" \"ç»¿\" \"é»„\"\n\n# åˆ é™¤æœªä½¿ç”¨çš„æ°´å¹³\ncolors_clean &lt;- fct_drop(colors)\nlevels(colors_clean)\n\n[1] \"çº¢\" \"è“\"\n\n# åªåˆ é™¤ç‰¹å®šæ°´å¹³\ncolors_keep_green &lt;- fct_drop(colors, only = \"é»„\")\nlevels(colors_keep_green)\n\n[1] \"çº¢\" \"è“\" \"ç»¿\"\n\n\n\n\næ·»åŠ æ°´å¹³ï¼šfct_expand\n\n# åŸå§‹å› å­\nsizes &lt;- factor(c(\"S\", \"M\", \"L\"))\n\n# æ·»åŠ æ–°æ°´å¹³\nsizes_expanded &lt;- fct_expand(sizes, \"XS\", \"XL\")\nlevels(sizes_expanded)\n\n[1] \"L\"  \"M\"  \"S\"  \"XS\" \"XL\"\n\n\n\n\nç»Ÿä¸€å¤šä¸ªå› å­çš„æ°´å¹³ï¼šfct_unify\n\n# ä¸¤ä¸ªæ¥è‡ªä¸åŒæ•°æ®æºçš„å› å­\nsurvey1 &lt;- factor(c(\"åŒæ„\", \"ä¸­ç«‹\", \"åå¯¹\"))\nsurvey2 &lt;- factor(c(\"åŒæ„\", \"åå¯¹\", \"å¼ºçƒˆåå¯¹\"))\n\n# ç»Ÿä¸€æ°´å¹³\nunified &lt;- fct_unify(list(survey1, survey2))\nlapply(unified, levels)\n\n[[1]]\n[1] \"åå¯¹\"     \"åŒæ„\"     \"ä¸­ç«‹\"     \"å¼ºçƒˆåå¯¹\"\n\n[[2]]\n[1] \"åå¯¹\"     \"åŒæ„\"     \"ä¸­ç«‹\"     \"å¼ºçƒˆåå¯¹\"",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "forcats - å› å­å¤„ç†"
    ]
  },
  {
    "objectID": "3011-forcats.html#ä¸-ggplot2-è”åŠ¨",
    "href": "3011-forcats.html#ä¸-ggplot2-è”åŠ¨",
    "title": "forcats å› å­å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ä¸ ggplot2 è”åŠ¨",
    "text": "ä¸ ggplot2 è”åŠ¨\nå› å­åœ¨å¯è§†åŒ–ä¸­æœ€é‡è¦çš„ä½œç”¨æ˜¯æ§åˆ¶å…ƒç´ çš„é¡ºåºã€‚\n\næ§åˆ¶æŸ±çŠ¶å›¾é¡ºåº\n\n# ç¤ºä¾‹æ•°æ®\nsales_data &lt;- tibble(\n    product = c(\"äº§å“A\", \"äº§å“B\", \"äº§å“C\", \"äº§å“D\"),\n    sales = c(120, 300, 180, 250)\n)\n\n# é»˜è®¤é¡ºåºï¼ˆå­—æ¯åºï¼‰\np1 &lt;- ggplot(sales_data, aes(x = product, y = sales)) +\n    geom_col(fill = \"#667eea\") +\n    labs(title = \"é»˜è®¤é¡ºåº\") +\n    theme_minimal()\n\n# æŒ‰é”€é‡æ’åº\np2 &lt;- sales_data %&gt;%\n    mutate(product = fct_reorder(product, sales)) %&gt;%\n    ggplot(aes(x = product, y = sales)) +\n    geom_col(fill = \"#764ba2\") +\n    labs(title = \"æŒ‰é”€é‡å‡åº\") +\n    theme_minimal()\n\n# æŒ‰é”€é‡é™åº\np3 &lt;- sales_data %&gt;%\n    mutate(product = fct_reorder(product, sales, .desc = TRUE)) %&gt;%\n    ggplot(aes(x = product, y = sales)) +\n    geom_col(fill = \"#f093fb\") +\n    labs(title = \"æŒ‰é”€é‡é™åº\") +\n    theme_minimal()\n\nlibrary(patchwork)\np1 | p2 | p3\n\n\n\n\n\n\n\n\n\n\næ§åˆ¶å›¾ä¾‹é¡ºåº\n\n# åˆ†ç»„æ•°æ®\ngroup_data &lt;- tibble(\n    category = rep(c(\"Aç»„\", \"Bç»„\", \"Cç»„\"), each = 10),\n    value = c(rnorm(10, 5), rnorm(10, 8), rnorm(10, 6))\n)\n\n# æŒ‰å‡å€¼æ’åºå›¾ä¾‹\ngroup_data %&gt;%\n    mutate(category = fct_reorder(category, value, .fun = mean)) %&gt;%\n    ggplot(aes(x = value, fill = category)) +\n    geom_density(alpha = 0.5) +\n    scale_fill_manual(values = c(\"#667eea\", \"#764ba2\", \"#f093fb\")) +\n    labs(title = \"æŒ‰å‡å€¼æ’åºçš„å¯†åº¦å›¾\", fill = \"åˆ†ç»„\") +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\næ§åˆ¶åˆ†é¢é¡ºåº\n\n# ä½¿ç”¨ fct_reorder2 æŒ‰æœ€åä¸€ä¸ªå€¼æ’åºï¼ˆé€‚åˆæŠ˜çº¿å›¾ï¼‰\ntrend_data &lt;- tibble(\n    year = rep(2020:2024, 3),\n    group = rep(c(\"A\", \"B\", \"C\"), each = 5),\n    value = c(\n        c(10, 15, 18, 22, 25), # A: ä¸Šå‡è¶‹åŠ¿\n        c(20, 18, 22, 19, 21), # B: å¹³ç¨³\n        c(15, 20, 25, 30, 35) # C: å¿«é€Ÿä¸Šå‡\n    )\n)\n\n# æŒ‰æœ€åä¸€ä¸ªå€¼æ’åº\ntrend_data %&gt;%\n    mutate(group = fct_reorder2(group, year, value)) %&gt;%\n    ggplot(aes(x = year, y = value, color = group)) +\n    geom_line(linewidth = 1) +\n    geom_point(size = 2) +\n    scale_color_manual(values = c(\"#f093fb\", \"#667eea\", \"#764ba2\")) +\n    labs(title = \"æŒ‰2024å¹´å€¼æ’åºçš„è¶‹åŠ¿å›¾\") +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "forcats - å› å­å¤„ç†"
    ]
  },
  {
    "objectID": "3011-forcats.html#ä¸-dplyr-è”åŠ¨",
    "href": "3011-forcats.html#ä¸-dplyr-è”åŠ¨",
    "title": "forcats å› å­å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ä¸ dplyr è”åŠ¨",
    "text": "ä¸ dplyr è”åŠ¨\n\nåœ¨åˆ†ç»„ç»Ÿè®¡ä¸­ä½¿ç”¨\n\n# ç¤ºä¾‹æ•°æ®\nsurvey &lt;- tibble(\n    region = factor(c(\"åŒ—\", \"å—\", \"ä¸œ\", \"è¥¿\", \"åŒ—\", \"å—\", \"ä¸œ\", \"è¥¿\", \"åŒ—\", \"å—\")),\n    score = c(85, 92, 78, 88, 90, 95, 82, 85, 88, 91)\n)\n\n# æŒ‰å¹³å‡åˆ†æ’åºååˆ†ç»„ç»Ÿè®¡\nsurvey %&gt;%\n    mutate(region = fct_reorder(region, score, .fun = mean)) %&gt;%\n    group_by(region) %&gt;%\n    summarise(\n        mean_score = mean(score),\n        n = n()\n    ) %&gt;%\n    arrange(desc(mean_score))\n\n# A tibble: 4 Ã— 3\n  region mean_score     n\n  &lt;fct&gt;       &lt;dbl&gt; &lt;int&gt;\n1 å—           92.7     3\n2 åŒ—           87.7     3\n3 è¥¿           86.5     2\n4 ä¸œ           80       2\n\n\n\n\nåœ¨ case_when ä¸­ä½¿ç”¨\n\n# æ ¹æ®æ¡ä»¶åˆ›å»ºæœ‰åºå› å­\npatients &lt;- tibble(\n    id = 1:10,\n    age = c(25, 45, 67, 38, 72, 55, 29, 61, 43, 80)\n)\n\npatients &lt;- patients %&gt;%\n    mutate(\n        age_group = case_when(\n            age &lt; 30 ~ \"é’å¹´\",\n            age &lt; 60 ~ \"ä¸­å¹´\",\n            TRUE ~ \"è€å¹´\"\n        ),\n        # è½¬ä¸ºæœ‰åºå› å­\n        age_group = factor(age_group, levels = c(\"é’å¹´\", \"ä¸­å¹´\", \"è€å¹´\"))\n    )\n\nfct_count(patients$age_group)\n\n# A tibble: 3 Ã— 2\n  f         n\n  &lt;fct&gt; &lt;int&gt;\n1 é’å¹´      2\n2 ä¸­å¹´      4\n3 è€å¹´      4",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "forcats - å› å­å¤„ç†"
    ]
  },
  {
    "objectID": "3011-forcats.html#å®æˆ˜æ¡ˆä¾‹",
    "href": "3011-forcats.html#å®æˆ˜æ¡ˆä¾‹",
    "title": "forcats å› å­å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å®æˆ˜æ¡ˆä¾‹",
    "text": "å®æˆ˜æ¡ˆä¾‹\n\næ¡ˆä¾‹ä¸€ï¼šé—®å·æ•°æ®å¤„ç†\n\n# æ¨¡æ‹Ÿé—®å·æ•°æ®\nsurvey_data &lt;- tibble(\n    id = 1:100,\n    education = sample(c(\"é«˜ä¸­\", \"æœ¬ç§‘\", \"ç¡•å£«\", \"åšå£«\", \"å…¶ä»–\"), 100,\n        replace = TRUE, prob = c(0.2, 0.4, 0.25, 0.1, 0.05)\n    ),\n    satisfaction = sample(1:5, 100, replace = TRUE),\n    income = sample(c(\"3000ä»¥ä¸‹\", \"3000-5000\", \"5000-10000\", \"10000-20000\", \"20000ä»¥ä¸Š\"),\n        100,\n        replace = TRUE\n    )\n)\n\n# å¤„ç†å› å­\nsurvey_clean &lt;- survey_data %&gt;%\n    mutate(\n        # æ•™è‚²ç¨‹åº¦ï¼šåˆå¹¶ \"å…¶ä»–\" å¹¶æ’åº\n        education = factor(education) %&gt;%\n            fct_relevel(\"é«˜ä¸­\", \"æœ¬ç§‘\", \"ç¡•å£«\", \"åšå£«\", \"å…¶ä»–\") %&gt;%\n            fct_recode(\"æœ¬ç§‘åŠä»¥ä¸‹\" = \"å…¶ä»–\"),\n\n        # æ»¡æ„åº¦ï¼šç¼–ç å¹¶æ’åº\n        satisfaction = factor(satisfaction) %&gt;%\n            fct_recode(\n                \"éå¸¸ä¸æ»¡\" = \"1\", \"ä¸æ»¡\" = \"2\", \"ä¸­ç«‹\" = \"3\",\n                \"æ»¡æ„\" = \"4\", \"éå¸¸æ»¡æ„\" = \"5\"\n            ),\n\n        # æ”¶å…¥ï¼šæ’åº\n        income = factor(income) %&gt;%\n            fct_relevel(\"3000ä»¥ä¸‹\", \"3000-5000\", \"5000-10000\", \"10000-20000\", \"20000ä»¥ä¸Š\")\n    )\n\n# æŸ¥çœ‹å¤„ç†ç»“æœ\nsurvey_clean %&gt;%\n    count(education, satisfaction) %&gt;%\n    head(10)\n\n# A tibble: 10 Ã— 3\n   education satisfaction     n\n   &lt;fct&gt;     &lt;fct&gt;        &lt;int&gt;\n 1 é«˜ä¸­      éå¸¸ä¸æ»¡         1\n 2 é«˜ä¸­      ä¸æ»¡             7\n 3 é«˜ä¸­      ä¸­ç«‹             4\n 4 é«˜ä¸­      æ»¡æ„             7\n 5 é«˜ä¸­      éå¸¸æ»¡æ„         3\n 6 æœ¬ç§‘      éå¸¸ä¸æ»¡         8\n 7 æœ¬ç§‘      ä¸æ»¡            12\n 8 æœ¬ç§‘      ä¸­ç«‹             6\n 9 æœ¬ç§‘      æ»¡æ„             6\n10 æœ¬ç§‘      éå¸¸æ»¡æ„        10\n\n\n\n\næ¡ˆä¾‹äºŒï¼šåŒ»å­¦åˆ†çº§æ•°æ®\n\n# æ¨¡æ‹Ÿç–¾ç—…ä¸¥é‡ç¨‹åº¦æ•°æ®\nclinical_data &lt;- tibble(\n    patient_id = 1:50,\n    severity = sample(c(\"Mild\", \"Moderate\", \"Severe\", \"Critical\"), 50,\n        replace = TRUE, prob = c(0.3, 0.35, 0.25, 0.1)\n    ),\n    treatment = sample(c(\"Standard\", \"Intensive\", \"Experimental\"), 50, replace = TRUE)\n)\n\n# å¤„ç†ä¸¥é‡ç¨‹åº¦ï¼ˆç¡®ä¿æ­£ç¡®é¡ºåºï¼‰\nclinical_clean &lt;- clinical_data %&gt;%\n    mutate(\n        severity = factor(severity) %&gt;%\n            fct_relevel(\"Mild\", \"Moderate\", \"Severe\", \"Critical\") %&gt;%\n            fct_recode(\n                \"è½»åº¦\" = \"Mild\",\n                \"ä¸­åº¦\" = \"Moderate\",\n                \"é‡åº¦\" = \"Severe\",\n                \"å±é‡\" = \"Critical\"\n            )\n    )\n\n# ç»Ÿè®¡å¹¶å¯è§†åŒ–\nclinical_clean %&gt;%\n    count(severity, treatment) %&gt;%\n    ggplot(aes(x = severity, y = n, fill = treatment)) +\n    geom_col(position = \"dodge\") +\n    scale_fill_manual(values = c(\"#667eea\", \"#764ba2\", \"#f093fb\")) +\n    labs(title = \"å„ä¸¥é‡ç¨‹åº¦çš„æ²»ç–—æ–¹æ¡ˆåˆ†å¸ƒ\", x = \"ä¸¥é‡ç¨‹åº¦\", y = \"äººæ•°\") +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\næ¡ˆä¾‹ä¸‰ï¼šæ—¶é—´åºåˆ—ä¸­çš„æœˆä»½å¤„ç†\n\n# æ¨¡æ‹Ÿæœˆåº¦é”€å”®æ•°æ®\nmonthly_sales &lt;- tibble(\n    month = factor(month.abb, levels = month.abb),\n    sales = c(120, 135, 150, 180, 200, 220, 250, 240, 210, 190, 160, 145)\n)\n\n# ä»æŸä¸ªæœˆä»½å¼€å§‹ï¼ˆå¦‚è´¢å¹´ä»4æœˆå¼€å§‹ï¼‰\nmonthly_sales_fy &lt;- monthly_sales %&gt;%\n    mutate(month = fct_shift(month, n = 3)) # Apr æˆä¸ºç¬¬ä¸€ä¸ª\n\nlevels(monthly_sales_fy$month)\n\n [1] \"Apr\" \"May\" \"Jun\" \"Jul\" \"Aug\" \"Sep\" \"Oct\" \"Nov\" \"Dec\" \"Jan\" \"Feb\" \"Mar\"\n\n# å¯è§†åŒ–\nggplot(monthly_sales, aes(x = month, y = sales, group = 1)) +\n    geom_line(color = \"#667eea\", linewidth = 1) +\n    geom_point(color = \"#764ba2\", size = 3) +\n    labs(title = \"æœˆåº¦é”€å”®è¶‹åŠ¿\", x = \"æœˆä»½\", y = \"é”€å”®é¢\") +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "forcats - å› å­å¤„ç†"
    ]
  },
  {
    "objectID": "3011-forcats.html#forcats-å‡½æ•°é€ŸæŸ¥è¡¨",
    "href": "3011-forcats.html#forcats-å‡½æ•°é€ŸæŸ¥è¡¨",
    "title": "forcats å› å­å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "forcats å‡½æ•°é€ŸæŸ¥è¡¨",
    "text": "forcats å‡½æ•°é€ŸæŸ¥è¡¨\n\n\n\nåŠŸèƒ½\nå‡½æ•°\nè¯´æ˜\n\n\n\n\næŸ¥çœ‹\nfct_count()\nç»Ÿè®¡å„æ°´å¹³é¢‘æ•°\n\n\n\nfct_unique()\nè·å–å”¯ä¸€æ°´å¹³\n\n\næ’åº\nfct_relevel()\næ‰‹åŠ¨æŒ‡å®šé¡ºåº\n\n\n\nfct_infreq()\næŒ‰é¢‘ç‡é™åº\n\n\n\nfct_inorder()\næŒ‰å‡ºç°é¡ºåº\n\n\n\nfct_reorder()\næŒ‰å¦ä¸€å˜é‡æ’åº\n\n\n\nfct_reorder2()\næŒ‰ä¸¤å˜é‡å…³ç³»æ’åº\n\n\n\nfct_rev()\nåè½¬é¡ºåº\n\n\n\nfct_shift()\nå¾ªç¯ç§»åŠ¨\n\n\nç¼–ç \nfct_recode()\né‡å‘½åæ°´å¹³\n\n\n\nfct_collapse()\nåˆå¹¶æ°´å¹³\n\n\n\nfct_lump_n()\nä¿ç•™å‰ n ä¸ª\n\n\n\nfct_lump_prop()\næŒ‰æ¯”ä¾‹ä¿ç•™\n\n\n\nfct_lump_min()\næŒ‰æœ€å°é¢‘æ•°ä¿ç•™\n\n\n\nfct_anon()\nåŒ¿ååŒ–\n\n\nä¿®æ”¹\nfct_drop()\nåˆ é™¤æœªç”¨æ°´å¹³\n\n\n\nfct_expand()\næ·»åŠ æ–°æ°´å¹³\n\n\n\nfct_unify()\nç»Ÿä¸€å¤šå› å­æ°´å¹³",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "forcats - å› å­å¤„ç†"
    ]
  },
  {
    "objectID": "3011-forcats.html#æ€»ç»“",
    "href": "3011-forcats.html#æ€»ç»“",
    "title": "forcats å› å­å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nforcats åŒ…è®© R ä¸­çš„å› å­å¤„ç†å˜å¾—ç›´è§‚é«˜æ•ˆï¼š\n\n\n\nä¼˜åŠ¿\nè¯´æ˜\n\n\n\n\nè¯­ä¹‰åŒ–å‘½å\nå‡½æ•°åæ¸…æ™°è¡¨è¾¾åŠŸèƒ½\n\n\nç®¡é“å‹å¥½\nä¸ dplyrã€ggplot2 å®Œç¾é›†æˆ\n\n\nåŠŸèƒ½å…¨é¢\nè¦†ç›–å› å­æ“ä½œçš„å„ç§éœ€æ±‚\n\n\né¿å…é™·é˜±\nå®‰å…¨å¤„ç†æ°´å¹³å˜æ›´\n\n\n\næŒæ¡ forcats åï¼Œä½ å°†èƒ½å¤Ÿä¼˜é›…åœ°å¤„ç†å„ç§åˆ†ç±»æ•°æ®ï¼",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "forcats - å› å­å¤„ç†"
    ]
  },
  {
    "objectID": "3011-forcats.html#å‚è€ƒèµ„æº",
    "href": "3011-forcats.html#å‚è€ƒèµ„æº",
    "title": "forcats å› å­å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nforcats å®˜æ–¹æ–‡æ¡£\nR for Data Science - Factors\nforcats cheatsheet",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "forcats - å› å­å¤„ç†"
    ]
  },
  {
    "objectID": "3009-datetime.html",
    "href": "3009-datetime.html",
    "title": "æ—¥æœŸä¸æ—¶é—´å˜é‡å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "åœ¨åŒ»å­¦å’Œæµè¡Œç—…å­¦ç ”ç©¶ä¸­ï¼Œæ—¥æœŸæ—¶é—´å˜é‡æ— å¤„ä¸åœ¨ï¼š\n\nçºµå‘ç ”ç©¶ï¼šè®¡ç®—éšè®¿æ—¶é—´ã€è§‚å¯ŸæœŸé•¿åº¦\nç”Ÿå­˜åˆ†æï¼šä»å…¥ç»„æ—¥æœŸåˆ°äº‹ä»¶å‘ç”Ÿçš„æ—¶é—´\næ—¶é—´åºåˆ—ï¼šæŒ‰å‘¨/æœˆ/å­£åº¦èšåˆæ•°æ®\næ•°æ®æ¸…æ´—ï¼šç»Ÿä¸€å¤šç§æ—¥æœŸæ ¼å¼\n\nç„¶è€Œï¼Œæ—¥æœŸæ—¶é—´æ•°æ®å¾€å¾€æ˜¯æ•°æ®æ¸…æ´—ä¸­æœ€éº»çƒ¦çš„éƒ¨åˆ†ã€‚æœ¬æ•™ç¨‹å°†å¸®åŠ©ä½ ç³»ç»ŸæŒæ¡ R ä¸­çš„æ—¥æœŸæ—¶é—´å¤„ç†æŠ€å·§ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "æ—¥æœŸæ—¶é—´å¤„ç†"
    ]
  },
  {
    "objectID": "3009-datetime.html#ä¸ºä»€ä¹ˆæ—¥æœŸæ—¶é—´å¤„ç†å¾ˆé‡è¦",
    "href": "3009-datetime.html#ä¸ºä»€ä¹ˆæ—¥æœŸæ—¶é—´å¤„ç†å¾ˆé‡è¦",
    "title": "æ—¥æœŸä¸æ—¶é—´å˜é‡å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "åœ¨åŒ»å­¦å’Œæµè¡Œç—…å­¦ç ”ç©¶ä¸­ï¼Œæ—¥æœŸæ—¶é—´å˜é‡æ— å¤„ä¸åœ¨ï¼š\n\nçºµå‘ç ”ç©¶ï¼šè®¡ç®—éšè®¿æ—¶é—´ã€è§‚å¯ŸæœŸé•¿åº¦\nç”Ÿå­˜åˆ†æï¼šä»å…¥ç»„æ—¥æœŸåˆ°äº‹ä»¶å‘ç”Ÿçš„æ—¶é—´\næ—¶é—´åºåˆ—ï¼šæŒ‰å‘¨/æœˆ/å­£åº¦èšåˆæ•°æ®\næ•°æ®æ¸…æ´—ï¼šç»Ÿä¸€å¤šç§æ—¥æœŸæ ¼å¼\n\nç„¶è€Œï¼Œæ—¥æœŸæ—¶é—´æ•°æ®å¾€å¾€æ˜¯æ•°æ®æ¸…æ´—ä¸­æœ€éº»çƒ¦çš„éƒ¨åˆ†ã€‚æœ¬æ•™ç¨‹å°†å¸®åŠ©ä½ ç³»ç»ŸæŒæ¡ R ä¸­çš„æ—¥æœŸæ—¶é—´å¤„ç†æŠ€å·§ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "æ—¥æœŸæ—¶é—´å¤„ç†"
    ]
  },
  {
    "objectID": "3009-datetime.html#r-ä¸­çš„æ—¥æœŸæ—¶é—´ç±»å‹",
    "href": "3009-datetime.html#r-ä¸­çš„æ—¥æœŸæ—¶é—´ç±»å‹",
    "title": "æ—¥æœŸä¸æ—¶é—´å˜é‡å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "R ä¸­çš„æ—¥æœŸæ—¶é—´ç±»å‹",
    "text": "R ä¸­çš„æ—¥æœŸæ—¶é—´ç±»å‹\nR ä¸­æœ‰ä¸‰ç§ä¸»è¦çš„æ—¥æœŸæ—¶é—´ç±»å‹ï¼š\n\n\n\nç±»å‹\næè¿°\nç¤ºä¾‹\n\n\n\n\nDate\nåªæœ‰æ—¥æœŸï¼Œæ— æ—¶é—´\nâ€œ2024-01-15â€\n\n\nPOSIXct\næ—¥æœŸ+æ—¶é—´ï¼Œå­˜å‚¨ä¸ºç§’æ•°\nâ€œ2024-01-15 14:30:00â€\n\n\nPOSIXlt\næ—¥æœŸ+æ—¶é—´ï¼Œå­˜å‚¨ä¸ºåˆ—è¡¨\nåŒä¸Šï¼Œä½†ç»“æ„ä¸åŒ\n\n\n\n\n# å®‰è£…å¹¶åŠ è½½å¿…è¦çš„åŒ…\nif (!require(\"lubridate\")) install.packages(\"lubridate\")\nif (!require(\"dplyr\")) install.packages(\"dplyr\")\nif (!require(\"tibble\")) install.packages(\"tibble\")\nif (!require(\"ggplot2\")) install.packages(\"ggplot2\")\nif (!require(\"hms\")) install.packages(\"hms\")\n\nlibrary(lubridate)\nlibrary(dplyr)\nlibrary(tibble)\nlibrary(ggplot2)\nlibrary(hms)\n\n\nDate ç±»å‹\næœ€ç®€å•çš„æ—¥æœŸç±»å‹ï¼ŒåªåŒ…å«å¹´æœˆæ—¥ä¿¡æ¯ï¼š\n\n# åˆ›å»º Date å¯¹è±¡\ntoday_date &lt;- Sys.Date()\ntoday_date\n\n[1] \"2026-01-16\"\n\nclass(today_date)\n\n[1] \"Date\"\n\n# å†…éƒ¨å­˜å‚¨ä¸ºæ•´æ•°ï¼ˆè‡ª 1970-01-01 çš„å¤©æ•°ï¼‰\nas.numeric(today_date)\n\n[1] 20469\n\n\n\n\nPOSIXct ä¸ POSIXlt\nå½“éœ€è¦åŒæ—¶å¤„ç†æ—¥æœŸå’Œæ—¶é—´æ—¶ï¼Œä½¿ç”¨ POSIX ç±»å‹ï¼š\n\n# POSIXctï¼šç´§å‡‘å‹ï¼ˆæ¨èç”¨äºæ•°æ®å­˜å‚¨ï¼‰\nnow_ct &lt;- Sys.time()\nnow_ct\n\n[1] \"2026-01-16 14:48:07 CST\"\n\nclass(now_ct)\n\n[1] \"POSIXct\" \"POSIXt\" \n\n# å†…éƒ¨å­˜å‚¨ä¸ºç§’æ•°\nas.numeric(now_ct)\n\n[1] 1768546088\n\n# POSIXltï¼šåˆ—è¡¨å‹ï¼ˆæ–¹ä¾¿æå–ç»„ä»¶ï¼‰\nnow_lt &lt;- as.POSIXlt(now_ct)\nnow_lt$year + 1900 # å¹´ä»½ï¼ˆä»1900å¼€å§‹è®¡ï¼‰\n\n[1] 2026\n\nnow_lt$mon + 1 # æœˆä»½ï¼ˆ0-11ï¼‰\n\n[1] 1\n\nnow_lt$mday # æ—¥\n\n[1] 16\n\nnow_lt$hour # æ—¶\n\n[1] 14\n\nnow_lt$min # åˆ†\n\n[1] 48\n\n\n\n[!TIP] æ¨èä½¿ç”¨ POSIXct å­˜å‚¨æ—¥æœŸæ—¶é—´æ•°æ®ï¼Œå› ä¸ºå®ƒæ›´ç´§å‡‘ã€æ›´é€‚åˆæ”¾å…¥æ•°æ®æ¡†ã€‚ä½¿ç”¨ lubridate åŒ…åˆ™å¯ä»¥è½»æ¾æå–ç»„ä»¶ï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç† POSIXltã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "æ—¥æœŸæ—¶é—´å¤„ç†"
    ]
  },
  {
    "objectID": "3009-datetime.html#lubridate-åŒ…æ ¸å¿ƒåŠŸèƒ½",
    "href": "3009-datetime.html#lubridate-åŒ…æ ¸å¿ƒåŠŸèƒ½",
    "title": "æ—¥æœŸä¸æ—¶é—´å˜é‡å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "lubridate åŒ…æ ¸å¿ƒåŠŸèƒ½",
    "text": "lubridate åŒ…æ ¸å¿ƒåŠŸèƒ½\nlubridate æ˜¯ tidyverse ç”Ÿæ€ä¸­å¤„ç†æ—¥æœŸæ—¶é—´çš„æ ¸å¿ƒåŒ…ï¼Œæä¾›äº†ç›´è§‚ã€ä¸€è‡´çš„å‡½æ•°æ¥å£ã€‚\n\næ—¥æœŸè§£æï¼šæ™ºèƒ½è¯†åˆ«æ ¼å¼\nlubridate æä¾›äº†ä¸€ç³»åˆ—æ ¹æ®æ—¥æœŸé¡ºåºå‘½åçš„è§£æå‡½æ•°ï¼š\n\n\n\nå‡½æ•°\næ ¼å¼\nç¤ºä¾‹è¾“å…¥\n\n\n\n\nymd()\nå¹´-æœˆ-æ—¥\nâ€œ2024-01-15â€, â€œ2024/01/15â€, â€œ20240115â€\n\n\nmdy()\næœˆ-æ—¥-å¹´\nâ€œ01-15-2024â€, â€œJan 15, 2024â€\n\n\ndmy()\næ—¥-æœˆ-å¹´\nâ€œ15-01-2024â€, â€œ15 January 2024â€\n\n\nymd_hms()\nå¹´æœˆæ—¥æ—¶åˆ†ç§’\nâ€œ2024-01-15 14:30:00â€\n\n\n\n\n# å„ç§æ ¼å¼éƒ½èƒ½æ™ºèƒ½è¯†åˆ«\nymd(\"2024-01-15\")\n\n[1] \"2024-01-15\"\n\nymd(\"2024/01/15\")\n\n[1] \"2024-01-15\"\n\nymd(\"20240115\")\n\n[1] \"2024-01-15\"\n\nymd(\"24-1-15\") # ä¸¤ä½å¹´ä»½ä¹Ÿèƒ½è¯†åˆ«\n\n[1] \"2024-01-15\"\n\n# æœˆæ—¥å¹´æ ¼å¼\nmdy(\"January 15, 2024\")\n\n[1] \"2024-01-15\"\n\nmdy(\"01/15/2024\")\n\n[1] \"2024-01-15\"\n\n# æ—¥æœˆå¹´æ ¼å¼ï¼ˆæ¬§æ´²å¸¸ç”¨ï¼‰\ndmy(\"15-01-2024\")\n\n[1] \"2024-01-15\"\n\ndmy(\"15 Jan 2024\")\n\n[1] \"2024-01-15\"\n\n\n\n\nå¸¦æ—¶é—´çš„è§£æ\n\n# å®Œæ•´æ—¥æœŸæ—¶é—´\nymd_hms(\"2024-01-15 14:30:00\")\n\n[1] \"2024-01-15 14:30:00 UTC\"\n\nymd_hms(\"2024-01-15 14:30:00\", tz = \"Asia/Shanghai\")\n\n[1] \"2024-01-15 14:30:00 CST\"\n\n# åªæœ‰æ—¶åˆ†\nymd_hm(\"2024-01-15 14:30\")\n\n[1] \"2024-01-15 14:30:00 UTC\"\n\n# ä½¿ç”¨ hms åŒ…å¤„ç†çº¯æ—¶é—´\nhms::as_hms(\"14:30:00\")\n\n14:30:00\n\n\n\n\nç»„ä»¶æå–\nlubridate æä¾›äº†ç®€æ´çš„ç»„ä»¶æå–å‡½æ•°ï¼š\n\ndt &lt;- ymd_hms(\"2024-03-15 14:30:45\")\n\n# æ—¥æœŸç»„ä»¶\nyear(dt) # å¹´\n\n[1] 2024\n\nmonth(dt) # æœˆï¼ˆæ•°å­—ï¼‰\n\n[1] 3\n\nmonth(dt, label = TRUE) # æœˆï¼ˆåç§°ï¼‰\n\n[1] 3æœˆ\n12 Levels: 1æœˆ &lt; 2æœˆ &lt; 3æœˆ &lt; 4æœˆ &lt; 5æœˆ &lt; 6æœˆ &lt; 7æœˆ &lt; 8æœˆ &lt; 9æœˆ &lt; ... &lt; 12æœˆ\n\nday(dt) # æ—¥\n\n[1] 15\n\nyday(dt) # ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©\n\n[1] 75\n\nwday(dt) # æ˜ŸæœŸå‡ ï¼ˆæ•°å­—ï¼Œ1=å‘¨æ—¥ï¼‰\n\n[1] 6\n\nwday(dt, label = TRUE) # æ˜ŸæœŸå‡ ï¼ˆåç§°ï¼‰\n\n[1] å‘¨äº”\nLevels: å‘¨æ—¥ &lt; å‘¨ä¸€ &lt; å‘¨äºŒ &lt; å‘¨ä¸‰ &lt; å‘¨å›› &lt; å‘¨äº” &lt; å‘¨å…­\n\nweek(dt) # ä¸€å¹´ä¸­çš„ç¬¬å‡ å‘¨\n\n[1] 11\n\n# æ—¶é—´ç»„ä»¶\nhour(dt) # æ—¶\n\n[1] 14\n\nminute(dt) # åˆ†\n\n[1] 30\n\nsecond(dt) # ç§’\n\n[1] 45\n\n\n\n\nç»„ä»¶ä¿®æ”¹\nå¯ä»¥ç›´æ¥ä¿®æ”¹æ—¥æœŸæ—¶é—´çš„æŸä¸ªç»„ä»¶ï¼š\n\ndt &lt;- ymd(\"2024-03-15\")\n\n# ä¿®æ”¹å¹´ä»½\nyear(dt) &lt;- 2025\ndt\n\n[1] \"2025-03-15\"\n\n# ä¿®æ”¹æœˆä»½\nmonth(dt) &lt;- 6\ndt\n\n[1] \"2025-06-15\"\n\n# ä¿®æ”¹æ—¥æœŸ\nday(dt) &lt;- 1\ndt\n\n[1] \"2025-06-01\"",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "æ—¥æœŸæ—¶é—´å¤„ç†"
    ]
  },
  {
    "objectID": "3009-datetime.html#æ—¥æœŸè¿ç®—",
    "href": "3009-datetime.html#æ—¥æœŸè¿ç®—",
    "title": "æ—¥æœŸä¸æ—¶é—´å˜é‡å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "æ—¥æœŸè¿ç®—",
    "text": "æ—¥æœŸè¿ç®—\n\nç®—æœ¯è¿ç®—\næ—¥æœŸå¯ä»¥ç›´æ¥è¿›è¡ŒåŠ å‡è¿ç®—ï¼š\n\nstart_date &lt;- ymd(\"2024-01-15\")\n\n# åŠ å‡å¤©æ•°\nstart_date + 30\n\n[1] \"2024-02-14\"\n\nstart_date - 10\n\n[1] \"2024-01-05\"\n\n# ä½¿ç”¨ lubridate çš„æ—¶é—´å•ä½å‡½æ•°\nstart_date + days(30)\n\n[1] \"2024-02-14\"\n\nstart_date + weeks(2)\n\n[1] \"2024-01-29\"\n\nstart_date + months(3)\n\n[1] \"2024-04-15\"\n\nstart_date + years(1)\n\n[1] \"2025-01-15\"\n\n\n\n\nDurationï¼ˆæŒç»­æ—¶é—´ï¼‰\nDuration æ˜¯ç²¾ç¡®çš„æ—¶é—´é•¿åº¦ï¼Œä»¥ç§’ä¸ºå•ä½å­˜å‚¨ï¼š\n\n# åˆ›å»º Duration\nd1 &lt;- ddays(30) # 30å¤© = 30 * 86400 ç§’\nd2 &lt;- dweeks(2) # 2å‘¨\nd3 &lt;- dhours(48) # 48å°æ—¶\nd4 &lt;- dminutes(90) # 90åˆ†é’Ÿ\n\n# Duration æ˜¯ç²¾ç¡®çš„\nymd(\"2024-01-31\") + dmonths(1) # æ³¨æ„ï¼šä¼šåŠ ä¸Šç²¾ç¡®çš„ç§’æ•°\n\n[1] \"2024-03-01 10:30:00 UTC\"\n\n\n\n\nPeriodï¼ˆå‘¨æœŸï¼‰\nPeriod æ˜¯äººç±»ç›´è§‰çš„æ—¶é—´é•¿åº¦ï¼Œè€ƒè™‘æ—¥å†ï¼š\n\n# åˆ›å»º Period\np1 &lt;- days(30)\np2 &lt;- weeks(2)\np3 &lt;- months(1)\np4 &lt;- years(1)\n\n# Period ä¼šæ ¹æ®æ—¥å†è°ƒæ•´\nymd(\"2024-01-31\") + months(1) # ä¼šè°ƒæ•´ä¸ºæœ‰æ•ˆæ—¥æœŸ\n\n[1] NA\n\nymd(\"2024-02-29\") + years(1) # ä¼šè€ƒè™‘é—°å¹´\n\n[1] NA\n\n\n\n[!IMPORTANT] Duration vs Period çš„åŒºåˆ«ï¼š - Duration æ˜¯ç²¾ç¡®çš„ç§’æ•°ï¼Œé€‚åˆè®¡ç®—æ—¶é—´å·® - Period æ˜¯æ—¥å†å•ä½ï¼Œé€‚åˆå¤„ç†â€ä¸‹ä¸ªæœˆâ€è¿™æ ·çš„æ¦‚å¿µ\nä¾‹å¦‚ï¼š1ä¸ªæœˆçš„ Duration æ€»æ˜¯çº¦ 30.44 å¤©ï¼Œä½† 1 ä¸ªæœˆçš„ Period ä¼šæ ¹æ®å®é™…æœˆä»½å˜åŒ–ã€‚\n\n\n\nIntervalï¼ˆæ—¶é—´æ®µï¼‰\nInterval è¡¨ç¤ºä¸€ä¸ªæœ‰èµ·æ­¢æ—¶é—´çš„æ—¶é—´æ®µï¼š\n\n# åˆ›å»ºæ—¶é—´æ®µ\nstart &lt;- ymd(\"2024-01-01\")\nend &lt;- ymd(\"2024-12-31\")\n\nstudy_period &lt;- interval(start, end)\nstudy_period\n\n[1] 2024-01-01 UTC--2024-12-31 UTC\n\n# æ£€æŸ¥æ—¥æœŸæ˜¯å¦åœ¨æ—¶é—´æ®µå†…\nevent_date &lt;- ymd(\"2024-06-15\")\nevent_date %within% study_period\n\n[1] TRUE\n\n# è®¡ç®—æ—¶é—´æ®µé•¿åº¦\nint_length(study_period) # ç§’æ•°\n\n[1] 31536000\n\nint_length(study_period) / 86400 # å¤©æ•°\n\n[1] 365\n\n# ä½¿ç”¨ time_length å‡½æ•°\ntime_length(study_period, unit = \"day\")\n\n[1] 365\n\ntime_length(study_period, unit = \"month\")\n\n[1] 11.96774\n\ntime_length(study_period, unit = \"year\")\n\n[1] 0.9972678",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "æ—¥æœŸæ—¶é—´å¤„ç†"
    ]
  },
  {
    "objectID": "3009-datetime.html#æ—¶é—´å·®è®¡ç®—",
    "href": "3009-datetime.html#æ—¶é—´å·®è®¡ç®—",
    "title": "æ—¥æœŸä¸æ—¶é—´å˜é‡å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "æ—¶é—´å·®è®¡ç®—",
    "text": "æ—¶é—´å·®è®¡ç®—\n\ndifftime å‡½æ•°\n\ndate1 &lt;- ymd(\"2024-01-15\")\ndate2 &lt;- ymd(\"2024-03-20\")\n\n# è®¡ç®—å·®å€¼\ndiff &lt;- date2 - date1\ndiff\n\nTime difference of 65 days\n\nclass(diff)\n\n[1] \"difftime\"\n\n# æŒ‡å®šå•ä½\ndifftime(date2, date1, units = \"days\")\n\nTime difference of 65 days\n\ndifftime(date2, date1, units = \"weeks\")\n\nTime difference of 9.285714 weeks\n\ndifftime(date2, date1, units = \"hours\")\n\nTime difference of 1560 hours\n\n# è½¬æ¢ä¸ºæ•°å€¼\nas.numeric(difftime(date2, date1, units = \"days\"))\n\n[1] 65\n\n\n\n\nå®æˆ˜ï¼šè®¡ç®—éšè®¿æ—¶é—´\n\n# æ¨¡æ‹Ÿé˜Ÿåˆ—æ•°æ®\ncohort &lt;- tibble(\n    patient_id = 1:10,\n    enrollment_date = ymd(\"2020-01-01\") + days(sample(0:365, 10)),\n    event_date = enrollment_date + days(sample(100:1000, 10)),\n    event_type = sample(c(\"event\", \"censored\"), 10, replace = TRUE)\n)\n\n# è®¡ç®—éšè®¿æ—¶é—´\ncohort &lt;- cohort %&gt;%\n    mutate(\n        follow_up_days = as.numeric(difftime(event_date, enrollment_date, units = \"days\")),\n        follow_up_months = follow_up_days / 30.44,\n        follow_up_years = follow_up_days / 365.25\n    )\n\ncohort %&gt;% select(patient_id, follow_up_days, follow_up_months, follow_up_years)\n\n# A tibble: 10 Ã— 4\n   patient_id follow_up_days follow_up_months follow_up_years\n        &lt;int&gt;          &lt;dbl&gt;            &lt;dbl&gt;           &lt;dbl&gt;\n 1          1            566            18.6            1.55 \n 2          2            194             6.37           0.531\n 3          3            858            28.2            2.35 \n 4          4            235             7.72           0.643\n 5          5            177             5.81           0.485\n 6          6            182             5.98           0.498\n 7          7            480            15.8            1.31 \n 8          8            267             8.77           0.731\n 9          9            537            17.6            1.47 \n10         10            441            14.5            1.21",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "æ—¥æœŸæ—¶é—´å¤„ç†"
    ]
  },
  {
    "objectID": "3009-datetime.html#base-r-æ—¥æœŸå‡½æ•°",
    "href": "3009-datetime.html#base-r-æ—¥æœŸå‡½æ•°",
    "title": "æ—¥æœŸä¸æ—¶é—´å˜é‡å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "Base R æ—¥æœŸå‡½æ•°",
    "text": "Base R æ—¥æœŸå‡½æ•°\nè™½ç„¶ lubridate æ›´æ–¹ä¾¿ï¼Œäº†è§£ Base R å‡½æ•°ä»ç„¶å¾ˆæœ‰ä»·å€¼ã€‚\n\nas.Date() è½¬æ¢\n\n# ä»å­—ç¬¦ä¸²è½¬æ¢\nas.Date(\"2024-01-15\") # é»˜è®¤æ ¼å¼ YYYY-MM-DD\n\n[1] \"2024-01-15\"\n\n# æŒ‡å®šæ ¼å¼\nas.Date(\"15/01/2024\", format = \"%d/%m/%Y\")\n\n[1] \"2024-01-15\"\n\nas.Date(\"January 15, 2024\", format = \"%B %d, %Y\")\n\n[1] NA\n\n# ä»æ•°å€¼è½¬æ¢ï¼ˆå¤©æ•°è‡ª 1970-01-01ï¼‰\nas.Date(19737, origin = \"1970-01-01\")\n\n[1] \"2024-01-15\"\n\n\n\n\næ ¼å¼åŒ–ç¬¦å·\n\n\n\nç¬¦å·\nå«ä¹‰\nç¤ºä¾‹\n\n\n\n\n%Y\nå››ä½å¹´ä»½\n2024\n\n\n%y\nä¸¤ä½å¹´ä»½\n24\n\n\n%m\nä¸¤ä½æœˆä»½\n01-12\n\n\n%B\nå®Œæ•´æœˆä»½å\nJanuary\n\n\n%b\nç¼©å†™æœˆä»½å\nJan\n\n\n%d\nä¸¤ä½æ—¥æœŸ\n01-31\n\n\n%H\n24å°æ—¶åˆ¶æ—¶\n00-23\n\n\n%M\nåˆ†é’Ÿ\n00-59\n\n\n%S\nç§’\n00-59\n\n\n%A\nå®Œæ•´æ˜ŸæœŸå\nMonday\n\n\n%a\nç¼©å†™æ˜ŸæœŸå\nMon\n\n\n\n\n\nstrptime ä¸ strftime\n\n# strptime: å­—ç¬¦ä¸² -&gt; æ—¥æœŸæ—¶é—´\ndt &lt;- strptime(\"2024-01-15 14:30:00\", format = \"%Y-%m-%d %H:%M:%S\")\ndt\n\n[1] \"2024-01-15 14:30:00 CST\"\n\n# strftime: æ—¥æœŸæ—¶é—´ -&gt; å­—ç¬¦ä¸²\nstrftime(Sys.time(), format = \"%Yå¹´%mæœˆ%dæ—¥ %H:%M\")\n\n[1] \"2026å¹´01æœˆ16æ—¥ 14:48\"\n\nstrftime(Sys.Date(), format = \"%A, %B %d, %Y\")\n\n[1] \"æ˜ŸæœŸäº”, ä¸€æœˆ 16, 2026\"",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "æ—¥æœŸæ—¶é—´å¤„ç†"
    ]
  },
  {
    "objectID": "3009-datetime.html#å®æˆ˜åº”ç”¨",
    "href": "3009-datetime.html#å®æˆ˜åº”ç”¨",
    "title": "æ—¥æœŸä¸æ—¶é—´å˜é‡å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å®æˆ˜åº”ç”¨",
    "text": "å®æˆ˜åº”ç”¨\n\næ¡ˆä¾‹ä¸€ï¼šå¤šæ ¼å¼æ—¥æœŸæ¸…æ´—\nåœ¨å®é™…æ•°æ®ä¸­ï¼Œæ—¥æœŸæ ¼å¼å¾€å¾€äº”èŠ±å…«é—¨ï¼š\n\n# æ··ä¹±çš„æ—¥æœŸæ•°æ®\nmessy_dates &lt;- c(\n    \"2024-01-15\",\n    \"01/15/2024\",\n    \"15-Jan-2024\",\n    \"January 15, 2024\",\n    \"20240115\",\n    \"2024.01.15\"\n)\n\n# ä½¿ç”¨ parse_date_time æ™ºèƒ½è§£æå¤šç§æ ¼å¼\nclean_dates &lt;- parse_date_time(\n    messy_dates,\n    orders = c(\"ymd\", \"mdy\", \"dmy\", \"Bdy\", \"ymd\", \"ymd\")\n)\nclean_dates\n\n[1] \"2024-01-15 UTC\" \"2024-01-15 UTC\" \"2024-01-15 UTC\" \"2024-01-15 UTC\"\n[5] \"2024-01-15 UTC\" \"2024-01-15 UTC\"\n\n# æˆ–è€…ä½¿ç”¨æ›´æ™ºèƒ½çš„æ–¹å¼\nparse_date_time(messy_dates, orders = c(\"ymd\", \"mdy\", \"dmy\"))\n\n[1] \"2024-01-15 UTC\" \"2024-01-15 UTC\" \"2024-01-15 UTC\" \"2024-01-15 UTC\"\n[5] \"2024-01-15 UTC\" \"2024-01-15 UTC\"\n\n\n\n\næ¡ˆä¾‹äºŒï¼šç”Ÿå­˜åˆ†ææ—¶é—´å˜é‡\n\n# æ¨¡æ‹Ÿä¸´åºŠè¯•éªŒæ•°æ®\ntrial_data &lt;- tibble(\n    patient_id = sprintf(\"PT%03d\", 1:20),\n    enrollment = ymd(\"2022-01-01\") + days(sample(0:180, 20, replace = TRUE)),\n    last_visit = enrollment + days(sample(90:730, 20, replace = TRUE)),\n    death_date = if_else(\n        runif(20) &lt; 0.3,\n        enrollment + days(sample(30:365, 20, replace = TRUE)),\n        as.Date(NA)\n    )\n)\n\n# è®¡ç®—ç”Ÿå­˜æ—¶é—´\ntrial_data &lt;- trial_data %&gt;%\n    mutate(\n        # äº‹ä»¶æ—¥æœŸï¼šæ­»äº¡æ—¥æœŸæˆ–æœ€åéšè®¿æ—¥æœŸ\n        event_date = coalesce(death_date, last_visit),\n        # äº‹ä»¶çŠ¶æ€\n        status = if_else(!is.na(death_date), 1, 0),\n        # ç”Ÿå­˜æ—¶é—´ï¼ˆå¤©ï¼‰\n        survival_days = as.numeric(difftime(event_date, enrollment, units = \"days\")),\n        # ç”Ÿå­˜æ—¶é—´ï¼ˆå¹´ï¼‰\n        survival_years = survival_days / 365.25\n    )\n\ntrial_data %&gt;%\n    select(patient_id, enrollment, event_date, status, survival_days, survival_years) %&gt;%\n    head(10)\n\n# A tibble: 10 Ã— 6\n   patient_id enrollment event_date status survival_days survival_years\n   &lt;chr&gt;      &lt;date&gt;     &lt;date&gt;      &lt;dbl&gt;         &lt;dbl&gt;          &lt;dbl&gt;\n 1 PT001      2022-05-04 2022-10-06      0           155          0.424\n 2 PT002      2022-02-10 2023-03-16      0           399          1.09 \n 3 PT003      2022-01-07 2023-05-09      0           487          1.33 \n 4 PT004      2022-01-11 2022-06-29      1           169          0.463\n 5 PT005      2022-02-18 2023-01-27      0           343          0.939\n 6 PT006      2022-05-22 2024-03-14      0           662          1.81 \n 7 PT007      2022-04-14 2022-11-13      0           213          0.583\n 8 PT008      2022-01-14 2023-07-24      0           556          1.52 \n 9 PT009      2022-01-16 2022-10-14      0           271          0.742\n10 PT010      2022-03-13 2022-06-17      0            96          0.263\n\n\n\n\næ¡ˆä¾‹ä¸‰ï¼šæ—¶é—´åºåˆ—èšåˆ\n\n# æ¨¡æ‹Ÿæ¯æ—¥æ•°æ®\ndaily_data &lt;- tibble(\n    date = seq(ymd(\"2023-01-01\"), ymd(\"2023-12-31\"), by = \"day\"),\n    cases = rpois(365, lambda = 50)\n)\n\n# æŒ‰å‘¨èšåˆ\nweekly_data &lt;- daily_data %&gt;%\n    mutate(\n        week_start = floor_date(date, unit = \"week\")\n    ) %&gt;%\n    group_by(week_start) %&gt;%\n    summarize(\n        weekly_cases = sum(cases),\n        avg_daily = mean(cases),\n        .groups = \"drop\"\n    )\n\nhead(weekly_data)\n\n# A tibble: 6 Ã— 3\n  week_start weekly_cases avg_daily\n  &lt;date&gt;            &lt;int&gt;     &lt;dbl&gt;\n1 2023-01-01          361      51.6\n2 2023-01-08          341      48.7\n3 2023-01-15          340      48.6\n4 2023-01-22          335      47.9\n5 2023-01-29          382      54.6\n6 2023-02-05          361      51.6\n\n# æŒ‰æœˆèšåˆ\nmonthly_data &lt;- daily_data %&gt;%\n    mutate(\n        year_month = floor_date(date, unit = \"month\")\n    ) %&gt;%\n    group_by(year_month) %&gt;%\n    summarize(\n        monthly_cases = sum(cases),\n        .groups = \"drop\"\n    )\n\nhead(monthly_data)\n\n# A tibble: 6 Ã— 2\n  year_month monthly_cases\n  &lt;date&gt;             &lt;int&gt;\n1 2023-01-01          1532\n2 2023-02-01          1415\n3 2023-03-01          1538\n4 2023-04-01          1522\n5 2023-05-01          1570\n6 2023-06-01          1478\n\n\n\n\næ¡ˆä¾‹å››ï¼šå¹´é¾„è®¡ç®—\n\n# ç²¾ç¡®è®¡ç®—å¹´é¾„\nbirth_dates &lt;- ymd(c(\"1990-05-15\", \"1985-11-30\", \"2000-02-29\"))\nreference_date &lt;- ymd(\"2024-01-15\")\n\n# æ–¹æ³•1ï¼šä½¿ç”¨ interval å’Œ years\nages &lt;- interval(birth_dates, reference_date) / years(1)\nfloor(ages)\n\n[1] 33 38 23\n\n# æ–¹æ³•2ï¼šä½¿ç”¨ time_length\ntime_length(interval(birth_dates, reference_date), unit = \"year\") %&gt;% floor()\n\n[1] 33 38 23\n\n# å°è£…ä¸ºå‡½æ•°\ncalc_age &lt;- function(birth_date, ref_date = Sys.Date()) {\n    interval(birth_date, ref_date) / years(1) %&gt;% floor()\n}\n\ncalc_age(ymd(\"1990-05-15\"))\n\n[1] 35.67397",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "æ—¥æœŸæ—¶é—´å¤„ç†"
    ]
  },
  {
    "objectID": "3009-datetime.html#é«˜çº§æŠ€å·§",
    "href": "3009-datetime.html#é«˜çº§æŠ€å·§",
    "title": "æ—¥æœŸä¸æ—¶é—´å˜é‡å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "é«˜çº§æŠ€å·§",
    "text": "é«˜çº§æŠ€å·§\n\næ—¶åŒºå¤„ç†\n\n# åˆ›å»ºå¸¦æ—¶åŒºçš„æ—¥æœŸæ—¶é—´\ndt_utc &lt;- ymd_hms(\"2024-01-15 12:00:00\", tz = \"UTC\")\ndt_utc\n\n[1] \"2024-01-15 12:00:00 UTC\"\n\n# æŸ¥çœ‹æœ¬åœ°æ—¶åŒº\nSys.timezone()\n\n[1] \"Asia/Shanghai\"\n\n# è½¬æ¢æ—¶åŒº\nwith_tz(dt_utc, tzone = \"Asia/Shanghai\") # æ˜¾ç¤ºä¸ºä¸Šæµ·æ—¶é—´\n\n[1] \"2024-01-15 20:00:00 CST\"\n\nwith_tz(dt_utc, tzone = \"America/New_York\") # æ˜¾ç¤ºä¸ºçº½çº¦æ—¶é—´\n\n[1] \"2024-01-15 07:00:00 EST\"\n\n# å¼ºåˆ¶æ›´æ”¹æ—¶åŒºï¼ˆä¸æ”¹å˜æ˜¾ç¤ºçš„æ•°å€¼ï¼‰\nforce_tz(dt_utc, tzone = \"Asia/Shanghai\")\n\n[1] \"2024-01-15 12:00:00 CST\"\n\n\n\n\nå·¥ä½œæ—¥ä¸èŠ‚å‡æ—¥\n\n# åˆ¤æ–­æ˜¯å¦ä¸ºå‘¨æœ«\ndates &lt;- seq(ymd(\"2024-01-01\"), ymd(\"2024-01-14\"), by = \"day\")\n\ntibble(\n    date = dates,\n    weekday = wday(dates, label = TRUE),\n    is_weekend = wday(dates) %in% c(1, 7) # 1=å‘¨æ—¥, 7=å‘¨å…­\n)\n\n# A tibble: 14 Ã— 3\n   date       weekday is_weekend\n   &lt;date&gt;     &lt;ord&gt;   &lt;lgl&gt;     \n 1 2024-01-01 å‘¨ä¸€    FALSE     \n 2 2024-01-02 å‘¨äºŒ    FALSE     \n 3 2024-01-03 å‘¨ä¸‰    FALSE     \n 4 2024-01-04 å‘¨å››    FALSE     \n 5 2024-01-05 å‘¨äº”    FALSE     \n 6 2024-01-06 å‘¨å…­    TRUE      \n 7 2024-01-07 å‘¨æ—¥    TRUE      \n 8 2024-01-08 å‘¨ä¸€    FALSE     \n 9 2024-01-09 å‘¨äºŒ    FALSE     \n10 2024-01-10 å‘¨ä¸‰    FALSE     \n11 2024-01-11 å‘¨å››    FALSE     \n12 2024-01-12 å‘¨äº”    FALSE     \n13 2024-01-13 å‘¨å…­    TRUE      \n14 2024-01-14 å‘¨æ—¥    TRUE      \n\n# è®¡ç®—å·¥ä½œæ—¥å·®å¼‚\nworkdays &lt;- function(start, end) {\n    dates &lt;- seq(start, end, by = \"day\")\n    sum(!wday(dates) %in% c(1, 7))\n}\n\nworkdays(ymd(\"2024-01-01\"), ymd(\"2024-01-31\"))\n\n[1] 23\n\n\n\n\næ»šåŠ¨æ—¶é—´çª—å£\n\n# ä½¿ç”¨ slider åŒ…è¿›è¡Œæ»šåŠ¨è®¡ç®—\nif (!require(\"slider\")) install.packages(\"slider\")\nlibrary(slider)\n\n# 7å¤©ç§»åŠ¨å¹³å‡\ndaily_data &lt;- daily_data %&gt;%\n    mutate(\n        ma_7day = slide_dbl(cases, mean, .before = 6, .complete = TRUE)\n    )\n\n# å¯è§†åŒ–\nggplot(daily_data %&gt;% filter(date &gt;= ymd(\"2023-06-01\"), date &lt;= ymd(\"2023-08-31\"))) +\n    geom_col(aes(x = date, y = cases), fill = \"#e2e8f0\", alpha = 0.7) +\n    geom_line(aes(x = date, y = ma_7day), color = \"#4f46e5\", linewidth = 1) +\n    labs(\n        title = \"æ¯æ—¥ç—…ä¾‹æ•°ä¸7å¤©ç§»åŠ¨å¹³å‡\",\n        x = \"æ—¥æœŸ\",\n        y = \"ç—…ä¾‹æ•°\"\n    ) +\n    theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\n\n\næ—¥æœŸæ ¼å¼åŒ–è¾“å‡º\n\n# åˆ›å»ºå‹å¥½çš„æ—¥æœŸæ˜¾ç¤º\ndt &lt;- ymd_hms(\"2024-03-15 14:30:00\")\n\n# ä¸­æ–‡æ ¼å¼\nformat(dt, \"%Yå¹´%mæœˆ%dæ—¥ %Hæ—¶%Måˆ†\")\n\n[1] \"2024å¹´03æœˆ15æ—¥ 14æ—¶30åˆ†\"\n\n# è‡ªå®šä¹‰å‡½æ•°\nformat_date_cn &lt;- function(date) {\n    paste0(\n        year(date), \"å¹´\",\n        month(date), \"æœˆ\",\n        day(date), \"æ—¥\"\n    )\n}\n\nformat_date_cn(Sys.Date())\n\n[1] \"2026å¹´1æœˆ16æ—¥\"\n\n# ç›¸å¯¹æ—¶é—´\ndifftime(Sys.time(), dt, units = \"days\") %&gt;%\n    as.numeric() %&gt;%\n    round(1) %&gt;%\n    paste(\"å¤©å‰\")\n\n[1] \"671.7 å¤©å‰\"",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "æ—¥æœŸæ—¶é—´å¤„ç†"
    ]
  },
  {
    "objectID": "3009-datetime.html#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ",
    "href": "3009-datetime.html#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ",
    "title": "æ—¥æœŸä¸æ—¶é—´å˜é‡å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ",
    "text": "å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ\n\né—®é¢˜ä¸€ï¼šExcel æ—¥æœŸæ•°å­—\nExcel å­˜å‚¨æ—¥æœŸä¸ºæ•°å­—ï¼ˆè‡ª 1899-12-30 çš„å¤©æ•°ï¼‰ï¼š\n\n# Excel æ—¥æœŸæ•°å­—è½¬æ¢\nexcel_date &lt;- 45306 # Excel ä¸­çš„æ—¥æœŸæ•°å­—\nas.Date(excel_date, origin = \"1899-12-30\")\n\n[1] \"2024-01-15\"\n\n# æ‰¹é‡è½¬æ¢\nexcel_dates &lt;- c(45306, 45337, 45366)\nas.Date(excel_dates, origin = \"1899-12-30\")\n\n[1] \"2024-01-15\" \"2024-02-15\" \"2024-03-15\"\n\n\n\n\né—®é¢˜äºŒï¼šç¼ºå¤±æ—¥æœŸå¤„ç†\n\ndates_with_na &lt;- c(\"2024-01-15\", NA, \"invalid\", \"2024-02-28\")\n\n# ä½¿ç”¨ lubridate ä¼šå¯¹æ— æ•ˆæ—¥æœŸè¿”å› NA\nymd(dates_with_na, quiet = TRUE)\n\n[1] \"2024-01-15\" NA           NA           \"2024-02-28\"\n\n# æ£€æŸ¥ç¼ºå¤±\ntibble(raw = dates_with_na) %&gt;%\n    mutate(\n        parsed = ymd(raw, quiet = TRUE),\n        is_valid = !is.na(parsed)\n    )\n\n# A tibble: 4 Ã— 3\n  raw        parsed     is_valid\n  &lt;chr&gt;      &lt;date&gt;     &lt;lgl&gt;   \n1 2024-01-15 2024-01-15 TRUE    \n2 &lt;NA&gt;       NA         FALSE   \n3 invalid    NA         FALSE   \n4 2024-02-28 2024-02-28 TRUE    \n\n\n\n\né—®é¢˜ä¸‰ï¼šè·¨å¹´è®¡ç®—\n\n# å¹´æœ«åˆ°å¹´åˆçš„æ—¶é—´å·®\ndate1 &lt;- ymd(\"2023-12-25\")\ndate2 &lt;- ymd(\"2024-01-05\")\n\ndifftime(date2, date1, units = \"days\")\n\nTime difference of 11 days\n\n# è®¡ç®—è·¨å¹´å‘¨æ•°\nweek(date1) # 2023å¹´ç¬¬52å‘¨\n\n[1] 52\n\nweek(date2) # 2024å¹´ç¬¬1å‘¨\n\n[1] 1\n\nisoweek(date1) # ISOå‘¨æ•°\n\n[1] 52\n\nisoweek(date2)\n\n[1] 1",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "æ—¥æœŸæ—¶é—´å¤„ç†"
    ]
  },
  {
    "objectID": "3009-datetime.html#æ€»ç»“",
    "href": "3009-datetime.html#æ€»ç»“",
    "title": "æ—¥æœŸä¸æ—¶é—´å˜é‡å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\n\n\n\n\n\nä»»åŠ¡\næ¨èå‡½æ•°\nç¤ºä¾‹\n\n\n\n\nå­—ç¬¦ä¸²è½¬æ—¥æœŸ\nymd(), mdy(), dmy()\nymd(\"2024-01-15\")\n\n\næå–ç»„ä»¶\nyear(), month(), day()\nmonth(date)\n\n\næ—¥æœŸè¿ç®—\ndays(), months(), years()\ndate + months(3)\n\n\næ—¶é—´å·®\ndifftime(), interval()\ndifftime(d2, d1)\n\n\næ ¼å¼åŒ–è¾“å‡º\nformat(), strftime()\nformat(date, \"%Yå¹´%mæœˆ%dæ—¥\")\n\n\nèšåˆ\nfloor_date(), ceiling_date()\nfloor_date(date, \"month\")",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "æ—¥æœŸæ—¶é—´å¤„ç†"
    ]
  },
  {
    "objectID": "3009-datetime.html#å‚è€ƒèµ„æº",
    "href": "3009-datetime.html#å‚è€ƒèµ„æº",
    "title": "æ—¥æœŸä¸æ—¶é—´å˜é‡å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nlubridate å®˜æ–¹æ–‡æ¡£\nR for Data Science - Dates and Times\nlubridate é€ŸæŸ¥è¡¨",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "æ—¥æœŸæ—¶é—´å¤„ç†"
    ]
  },
  {
    "objectID": "3007-research-databases.html",
    "href": "3007-research-databases.html",
    "title": "ç§‘ç ”æ•°æ®åº“ç™¾ç§‘å…¨ä¹¦å¼æŒ‡å— (æ·±åº¦ç‰ˆ)",
    "section": "",
    "text": "åœ¨å½“ä»Šçš„æ•°æ®é©±åŠ¨æ—¶ä»£ï¼ŒæŒæ¡å¤§å‹å…¬å…±æ•°æ®åº“çš„ä½¿ç”¨æŠ€å·§æ˜¯ç§‘ç ”äººå‘˜çš„â€œå¿…ä¿®è¯¾â€ã€‚æœ¬æŒ‡å—å°†ä¸å†åªæ˜¯ç½—åˆ—åœ°å€ï¼Œè€Œæ˜¯æ·±å…¥æ¯ä¸ªæ•°æ®åº“çš„åº•å±‚é€»è¾‘ï¼Œå¸¦ä½ å®Œæˆä»æ³¨å†Œç”³è¯·åˆ°æ•°æ®äº§å‡ºçš„å…¨æµç¨‹ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "ä¸»æµç§‘ç ”æ•°æ®åº“æŒ‡å—"
    ]
  },
  {
    "objectID": "3007-research-databases.html#å‰è¨€å¦‚ä½•å¼€å¯ä½ çš„æ•°æ®åº“ç ”ç©¶ä¹‹æ—…",
    "href": "3007-research-databases.html#å‰è¨€å¦‚ä½•å¼€å¯ä½ çš„æ•°æ®åº“ç ”ç©¶ä¹‹æ—…",
    "title": "ç§‘ç ”æ•°æ®åº“ç™¾ç§‘å…¨ä¹¦å¼æŒ‡å— (æ·±åº¦ç‰ˆ)",
    "section": "",
    "text": "åœ¨å½“ä»Šçš„æ•°æ®é©±åŠ¨æ—¶ä»£ï¼ŒæŒæ¡å¤§å‹å…¬å…±æ•°æ®åº“çš„ä½¿ç”¨æŠ€å·§æ˜¯ç§‘ç ”äººå‘˜çš„â€œå¿…ä¿®è¯¾â€ã€‚æœ¬æŒ‡å—å°†ä¸å†åªæ˜¯ç½—åˆ—åœ°å€ï¼Œè€Œæ˜¯æ·±å…¥æ¯ä¸ªæ•°æ®åº“çš„åº•å±‚é€»è¾‘ï¼Œå¸¦ä½ å®Œæˆä»æ³¨å†Œç”³è¯·åˆ°æ•°æ®äº§å‡ºçš„å…¨æµç¨‹ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "ä¸»æµç§‘ç ”æ•°æ®åº“æŒ‡å—"
    ]
  },
  {
    "objectID": "3007-research-databases.html#ä¸“é¢˜ä¸€charls-ä¸­å›½å¥åº·ä¸å…»è€è¿½è¸ªè°ƒæŸ¥-æ·±åº¦è§£æ",
    "href": "3007-research-databases.html#ä¸“é¢˜ä¸€charls-ä¸­å›½å¥åº·ä¸å…»è€è¿½è¸ªè°ƒæŸ¥-æ·±åº¦è§£æ",
    "title": "ç§‘ç ”æ•°æ®åº“ç™¾ç§‘å…¨ä¹¦å¼æŒ‡å— (æ·±åº¦ç‰ˆ)",
    "section": "ä¸“é¢˜ä¸€ï¼šCHARLS (ä¸­å›½å¥åº·ä¸å…»è€è¿½è¸ªè°ƒæŸ¥) æ·±åº¦è§£æ",
    "text": "ä¸“é¢˜ä¸€ï¼šCHARLS (ä¸­å›½å¥åº·ä¸å…»è€è¿½è¸ªè°ƒæŸ¥) æ·±åº¦è§£æ\nCHARLS æ˜¯ä¸­å›½è€é¾„åŒ–ç ”ç©¶çš„â€œé»„é‡‘æ ‡å‡†â€ã€‚\n\n1. æ•°æ®åº“æ¦‚å†µä¸é‡è¦æ³¢æ¬¡\n\n\n\n\n\n\n\n\næ³¢æ¬¡\nè°ƒæŸ¥å¹´ä»½\næ ¸å¿ƒå¢é‡å†…å®¹\n\n\n\n\nWave 1\n2011\nå…¨å›½åŸºçº¿è°ƒæŸ¥ï¼Œæ¶µç›– 28 ä¸ªçœ\n\n\nWave 2\n2013\né¦–æ¬¡è¿½è¸ªï¼Œå¢åŠ  ADL/IADL è¯¦ç»†è¯„ä¼°\n\n\nWave 3\n2014\nç”Ÿå‘½å†ç¨‹è°ƒæŸ¥ (Life History)ï¼šæå…¶çè´µçš„ç«¥å¹´ç»å†æ•°æ®\n\n\nWave 4\n2015\nå¢åŠ è¡€æ¶²æ£€æµ‹æ•°æ®\n\n\nWave 5\n2018\nè®¤çŸ¥åŠŸèƒ½è¯„ä¼°é‡è¡¨å‡çº§\n\n\nWave 6\n2020\néƒ¨åˆ†çœä»½å—ç–«æƒ…å½±å“çš„ç‰¹æ®Šè¯„ä¼°\n\n\n\n\n\n2. è¯¦ç»†ç”³è¯·æµç¨‹\n\nå®˜æ–¹æ³¨å†Œï¼šè®¿é—® CHARLS å®˜ç½‘ã€‚å»ºè®®ä½¿ç”¨ä»¥ .edu.cn æˆ– .org ç»“å°¾çš„æœºæ„é‚®ç®±ï¼ŒæˆåŠŸç‡æ›´é«˜ã€‚\nä¸ªäººä¿¡æ¯å¡«å†™ï¼šéœ€ä¸Šä¼ å­¦ç”Ÿè¯ã€æ•™å¸ˆè¯æˆ–å•ä½è¯æ˜ã€‚\nç­¾ç½²æ‰¿è¯ºä¹¦ï¼šåœ¨çº¿ç­¾ç½²ã€Šæ•°æ®ä½¿ç”¨åè®®ã€‹ï¼Œæ‰¿è¯ºä¸ç”¨äºå•†ä¸šç”¨é€”ï¼Œä¸å°è¯•è¯†åˆ«ä¸ªä½“éšç§ã€‚\nå®¡æ ¸æ—¶é—´ï¼šé€šå¸¸ä¸º 1-3 ä¸ªå·¥ä½œæ—¥ã€‚å®¡æ ¸é€šè¿‡åï¼Œå³å¯ä¸‹è½½ Stata æ ¼å¼çš„ .dta åŸå§‹æ–‡ä»¶ã€‚\n\n\n\n3. æ ¸å¿ƒå˜é‡å­—å…¸ (å¸¸ç”¨æ¨¡å—)\n\nDemographics: æˆ·ç± (Hukou)ã€æ€§åˆ«ã€å‡ºç”Ÿæ—¥æœŸã€‚\nHealth Status: è‡ªè¯„å¥åº· (Self-reported Health)ã€æ…¢æ€§ç—… (Chronic Diseases)ã€ADL/IADL æŒ‡æ ‡ã€‚\nCognition: æƒ…èŠ‚è®°å¿† (Episodic Memory)ã€å¿ƒç®— (Numerical Ability)ã€ç”»å›¾æµ‹è¯•ã€‚\nFamily: å­å¥³æ•°é‡ã€è·¨ä»£ç»æµæ”¯æŒ (Intergenerational Transfers)ã€‚\n\n\n\n4. R è¯­è¨€å®æˆ˜ï¼šå¤šæ³¢æ¬¡é•¿å®½è½¬æ¢ä»£ç ç¤ºä¾‹\n\nlibrary(haven)\nlibrary(tidyverse)\n\n# æ¨¡æ‹Ÿä¸¤æ³¢æ¬¡æ•°æ®è½½å…¥\nw1 &lt;- tibble(ID = 1:500, health_w1 = sample(1:5, 500, replace = T))\nw2 &lt;- tibble(ID = sample(1:500, 450), health_w2 = sample(1:5, 450, replace = T))\n\n# çºµå‘åˆå¹¶ (Longitudinal Merging)\ncharls_all &lt;- left_join(w1, w2, by = \"ID\")\n\n# è½¬æ¢ä¸ºé•¿æ•°æ® (Long Format) è¿›è¡Œç”Ÿå­˜åˆ†ææˆ–å¤šæ°´å¹³æ¨¡å‹\ncharls_long &lt;- charls_all %&gt;%\n    pivot_longer(\n        cols = starts_with(\"health_\"),\n        names_to = \"wave\",\n        names_prefix = \"health_w\",\n        values_to = \"health_status\"\n    )\n\nhead(charls_long)\n\n# A tibble: 6 Ã— 3\n     ID wave  health_status\n  &lt;int&gt; &lt;chr&gt;         &lt;int&gt;\n1     1 1                 3\n2     1 2                 4\n3     2 1                 5\n4     2 2                 2\n5     3 1                 5\n6     3 2                NA",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "ä¸»æµç§‘ç ”æ•°æ®åº“æŒ‡å—"
    ]
  },
  {
    "objectID": "3007-research-databases.html#ä¸“é¢˜äºŒcfps-ä¸­å›½å®¶åº­è¿½è¸ªè°ƒæŸ¥-æ·±åº¦è§£æ",
    "href": "3007-research-databases.html#ä¸“é¢˜äºŒcfps-ä¸­å›½å®¶åº­è¿½è¸ªè°ƒæŸ¥-æ·±åº¦è§£æ",
    "title": "ç§‘ç ”æ•°æ®åº“ç™¾ç§‘å…¨ä¹¦å¼æŒ‡å— (æ·±åº¦ç‰ˆ)",
    "section": "ä¸“é¢˜äºŒï¼šCFPS (ä¸­å›½å®¶åº­è¿½è¸ªè°ƒæŸ¥) æ·±åº¦è§£æ",
    "text": "ä¸“é¢˜äºŒï¼šCFPS (ä¸­å›½å®¶åº­è¿½è¸ªè°ƒæŸ¥) æ·±åº¦è§£æ\nCFPS æ˜¯ç ”ç©¶ä¸­å›½å½“ä»£å®¶åº­å…³ç³»ã€ä¸ªäººç»æµè¡Œä¸ºå’Œä»·å€¼è§‚å˜è¿çš„é¡¶åˆŠåˆ©å™¨ã€‚\n\n1. æ•°æ®çš„â€œä¸‰å±‚åµŒå¥—â€é€»è¾‘\nCFPS çš„å¤æ‚æ€§åœ¨äºå…¶æŠ½æ ·å±‚çº§ï¼š * ç¤¾åŒº (Community)ï¼šç¯å¢ƒã€åŸºæœ¬å…¬å…±æœåŠ¡ã€‚ * å®¶åº­ (Family)ï¼šæ€»æ”¶å…¥ã€æˆ¿äº§ã€æ¶ˆè´¹æ”¯å‡ºã€‚ * ä¸ªäºº (Individual)ï¼šèŒä¸šã€æ•™è‚²ã€ä¸ªæ€§å’Œä»·å€¼è§‚ã€‚\n\n[!TIP] åŒ¹é…é€»è¾‘ï¼šé€šå¸¸ä½¿ç”¨ pid é“¾æ¥ä¸ªäººä¿¡æ¯ï¼Œä½¿ç”¨ fid é“¾æ¥å®¶åº­ç‰¹å¾ã€‚\n\n\n\n2. æ ¸å¿ƒæ¨¡å—ä¸å˜é‡\n\næ”¶å…¥è®¡ç®—ï¼šCFPS æä¾›äº†æå…¶è¯¦å°½çš„æ”¶å…¥åˆ†è§£é¡¹ï¼ˆå·¥èµ„ã€å¥–é‡‘ã€å†œä¸šè¡¥è´´ã€ç†è´¢ç­‰ï¼‰ã€‚\nå¿ƒç†ç‰¹å¾ï¼šåŒ…å« Big Five äººæ ¼æµ‹è¯•ç®€ç‰ˆã€æŠ‘éƒé‡è¡¨ (CES-D)ã€‚\nä»£é™…è¿½è¸ªï¼šå¯ä»¥å®Œç¾åŒ¹é…çˆ¶æ¯ä¸å­å¥³çš„ç¤¾ä¼šç»æµåœ°ä½ï¼ˆSESï¼‰ã€‚\n\n\n\n3. R è¯­è¨€å®æˆ˜ï¼šå®¶åº­æ”¶å…¥ä¸ä¸ªä½“å¥åº·åŒ¹é…\n\n# æ¨¡æ‹Ÿä¸ªäººè¡¨\nperson_df &lt;- tibble(\n    pid = 1:5,\n    fid = c(101, 101, 102, 103, 103),\n    depression = c(15, 12, 25, 18, 20)\n)\n\n# æ¨¡æ‹Ÿå®¶åº­è¡¨\nfamily_df &lt;- tibble(\n    fid = c(101, 102, 103),\n    fam_income = c(50000, 12000, 35000)\n)\n\n# åŒ¹é…å¹¶è®¡ç®—äººå‡æ”¶å…¥\nfinal_df &lt;- person_df %&gt;%\n    left_join(family_df, by = \"fid\") %&gt;%\n    group_by(fid) %&gt;%\n    mutate(family_size = n()) %&gt;%\n    ungroup() %&gt;%\n    mutate(income_per_capita = fam_income / family_size)\n\nprint(final_df)\n\n# A tibble: 5 Ã— 6\n    pid   fid depression fam_income family_size income_per_capita\n  &lt;int&gt; &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;       &lt;int&gt;             &lt;dbl&gt;\n1     1   101         15      50000           2             25000\n2     2   101         12      50000           2             25000\n3     3   102         25      12000           1             12000\n4     4   103         18      35000           2             17500\n5     5   103         20      35000           2             17500",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "ä¸»æµç§‘ç ”æ•°æ®åº“æŒ‡å—"
    ]
  },
  {
    "objectID": "3007-research-databases.html#ä¸“é¢˜ä¸‰nhanes-ç¾å›½å¥åº·ä¸è¥å…»è°ƒæŸ¥-æ·±åº¦è§£æ",
    "href": "3007-research-databases.html#ä¸“é¢˜ä¸‰nhanes-ç¾å›½å¥åº·ä¸è¥å…»è°ƒæŸ¥-æ·±åº¦è§£æ",
    "title": "ç§‘ç ”æ•°æ®åº“ç™¾ç§‘å…¨ä¹¦å¼æŒ‡å— (æ·±åº¦ç‰ˆ)",
    "section": "ä¸“é¢˜ä¸‰ï¼šNHANES (ç¾å›½å¥åº·ä¸è¥å…»è°ƒæŸ¥) æ·±åº¦è§£æ",
    "text": "ä¸“é¢˜ä¸‰ï¼šNHANES (ç¾å›½å¥åº·ä¸è¥å…»è°ƒæŸ¥) æ·±åº¦è§£æ\nå¦‚æœä½ è¿½æ±‚å‘è¡¨é«˜åˆ†ä¸´åºŠåŒ»å­¦æ–‡ç« ï¼ŒNHANES æ˜¯ä¸äºŒä¹‹é€‰ã€‚\n\n1. æ ¸å¿ƒä¼˜åŠ¿ï¼šç²¾å‡†æµ‹é‡\nä¸ CHARLS ä¸åŒï¼ŒNHANES çš„æ ¸å¿ƒåœ¨äºå…¶ç§»åŠ¨ä½“æ£€ä¸­å¿ƒ (MEC)ï¼š * è¡€æ¸…æŒ‡æ ‡ï¼šç»´ç”Ÿç´  Dã€ç‚ç—‡å› å­ã€é‡é‡‘å±æ°´å¹³ã€‚ * éª¨å¯†åº¦/ä½“æˆåˆ†ï¼šDXA æ‰«æã€‚ * 24å°æ—¶è†³é£Ÿå›é¡¾ï¼šæå…¶ç²¾ç¡®çš„çƒ­é‡å’Œè¥å…»ç´ æ‘„å…¥åˆ†æã€‚\n\n\n2. å¤æ‚æŠ½æ ·æƒé‡çš„çœŸç›¸\nNHANES ä¸æ˜¯ç®€å•çš„éšæœºæŠ½æ ·ï¼Œè€Œæ˜¯å¤šé˜¶æ®µå±‚åŒ–èšç±»æŠ½æ ·ã€‚ä¸ä½¿ç”¨æƒé‡ (WTMEC2YR æˆ– WTINT2YR) ä¼šå¯¼è‡´ä¸¥é‡çš„æ¨æ–­åå€šã€‚\n\n\n3. R è¯­è¨€å®æˆ˜ï¼šä½¿ç”¨ nhanesA åŒ…è·å–å¹¶åˆ†ææ•°æ®\n\n# install.packages(\"nhanesA\")\nlibrary(nhanesA)\nlibrary(survey)\n\n# ä¸‹è½½ 2017-2018 å¹´åº¦çš„è¡€å‹æ•°æ®å’Œäººå£å­¦æ•°æ®\n# bp &lt;- nhanes('BPX_J')\n# demo &lt;- nhanes('DEMO_J')\n\n# æ¨¡æ‹Ÿå¸¦æƒé‡çš„æ•°æ®åˆ†æ\nnhanes_sim &lt;- tibble(\n    ID = 1:100,\n    sbp = rnorm(100, 120, 15),\n    age = runif(100, 20, 80),\n    weight = runif(100, 0.5, 2.0), # æŠ½æ ·æƒé‡\n    psu = sample(1:15, 100, replace = T), # åŸå®šæŠ½æ ·å•ä½\n    strata = sample(1:5, 100, replace = T) # åœ°å±‚\n)\n\n# è®¾ç½®å¤æ‚æŠ½æ ·è®¾è®¡\ndesign &lt;- svydesign(\n    id = ~psu,\n    strata = ~strata,\n    weights = ~weight,\n    data = nhanes_sim,\n    nest = TRUE\n)\n\n# è®¡ç®—åŠ æƒåçš„å¹³å‡æ”¶ç¼©å‹\nsvymean(~sbp, design)\n\n     mean     SE\nsbp 120.7 1.4546",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "ä¸»æµç§‘ç ”æ•°æ®åº“æŒ‡å—"
    ]
  },
  {
    "objectID": "3007-research-databases.html#é¿å‘æŒ‡å—ç”³è¯·ä¸ä½¿ç”¨çš„-5-ä¸ªæ ¸å¿ƒå»ºè®®",
    "href": "3007-research-databases.html#é¿å‘æŒ‡å—ç”³è¯·ä¸ä½¿ç”¨çš„-5-ä¸ªæ ¸å¿ƒå»ºè®®",
    "title": "ç§‘ç ”æ•°æ®åº“ç™¾ç§‘å…¨ä¹¦å¼æŒ‡å— (æ·±åº¦ç‰ˆ)",
    "section": "é¿å‘æŒ‡å—ï¼šç”³è¯·ä¸ä½¿ç”¨çš„ 5 ä¸ªæ ¸å¿ƒå»ºè®®",
    "text": "é¿å‘æŒ‡å—ï¼šç”³è¯·ä¸ä½¿ç”¨çš„ 5 ä¸ªæ ¸å¿ƒå»ºè®®\n\nç”³è¯·ç†ç”±è¦è¯šæ³ï¼šåœ¨æè¿°ç ”ç©¶è®¡åˆ’æ—¶ï¼Œä¸è¦åªå†™â€œæ¯•ä¸šè®ºæ–‡â€ï¼Œè¦å†™æ¸…æ¥šâ€œæ¢è®¨æŸæŸå› ç´ ä¸æŸæŸç–¾ç—…çš„å…³ç³»â€ï¼Œå¹¶å¼•ç”¨ 1-2 ç¯‡è¯¥æ•°æ®åº“å·²å‘çš„æ–‡çŒ®ã€‚\nå•ä½è®¤è¯å¾ˆé‡è¦ï¼šå¦‚æœä½ çš„å•ä½é‚®ç®±å¤±æ•ˆï¼Œå¯å°è¯•è”ç³»å¯¼å¸ˆæˆ–æä¾›çº¸è´¨åè®®æ‰«æä»¶ã€‚\næ³¨æ„ç¼–ç ç‰¹æ®Šå€¼ï¼šå›½å†…æ•°æ®åº“å¸¸ç”¨ 888, 999 è¡¨ç¤ºâ€œä¸é€‚ç”¨â€æˆ–â€œä¸çŸ¥é“â€ï¼Œå¿…é¡»å…ˆè½¬ä¸º NA æ‰èƒ½è®¡ç®—ã€‚\nå…³æ³¨æ•°æ®æ›´æ–°è½¨è¿¹ï¼šå¾ˆå¤šæ•°æ®åº“ä¼šå‘å¸ƒ â€œRefreshâ€ ç‰ˆæˆ–ä¿®æ­£ç‰ˆï¼Œä¸‹è½½å‰åŠ¡å¿…çœ‹æ–‡æ¡£ã€‚\nå›½é™…è§†é‡ï¼šé€šè¿‡ Gateway to Global Aging Data å¯ä»¥æ¨ªå‘å¯¹æ¯”å…¨çƒè€é¾„åŒ–æ•°æ®ï¼Œå¢åŠ æ–‡ç« çš„å¹¿åº¦ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "ä¸»æµç§‘ç ”æ•°æ®åº“æŒ‡å—"
    ]
  },
  {
    "objectID": "3007-research-databases.html#æ€»ç»“",
    "href": "3007-research-databases.html#æ€»ç»“",
    "title": "ç§‘ç ”æ•°æ®åº“ç™¾ç§‘å…¨ä¹¦å¼æŒ‡å— (æ·±åº¦ç‰ˆ)",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nå…¬å…±æ•°æ®åº“ä¸å†æ˜¯â€œå†·å†°å†°çš„æ–‡ä»¶â€ï¼Œè€Œæ˜¯äººç±»ç¤¾ä¼šå˜è¿çš„è®°å½•ã€‚æ— è®ºä½ é€‰æ‹©è¿½éšå›½å†…çš„è€é¾„åŒ–è¶‹åŠ¿ï¼Œè¿˜æ˜¯æŒ‘æˆ˜å›½é™…çš„ä¸´åºŠè¥å…»æ ‡å‡†ï¼Œæ‰å®çš„æ•°æ®å¤„ç†èƒ½åŠ›ï¼ˆR è¯­è¨€ï¼‰å’Œæ·±åˆ»çš„èƒŒæ™¯ç†è§£ï¼ˆCodebookï¼‰éƒ½æ˜¯ä½ ä¸å¯æˆ–ç¼ºçš„ç¿…è†€ã€‚\n\n\nèµ„æºå¿«æ·è·³è½¬\n\nä¸­å›½ç±»ï¼šCHARLS | CFPS | CLHLS | CGSS\nå›½é™…ç±»ï¼šNHANES | UK Biobank | MIMIC",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "ä¸»æµç§‘ç ”æ•°æ®åº“æŒ‡å—"
    ]
  },
  {
    "objectID": "3005-pdf-reading.html",
    "href": "3005-pdf-reading.html",
    "title": "Rè¯­è¨€è¯»å–PDFå®Œå…¨æŒ‡å—",
    "section": "",
    "text": "PDF æ˜¯æœ€å¸¸è§çš„æ–‡æ¡£æ ¼å¼ï¼Œä½†Rè¯­è¨€å¤„ç†PDFå¹¶ä¸ç›´æ¥ã€‚ä»¥ä¸‹åœºæ™¯éœ€è¦ä»PDFæå–æ•°æ®ï¼š\n\n\n\nåœºæ™¯\nç¤ºä¾‹\n\n\n\n\nå­¦æœ¯ç ”ç©¶\nä»è®ºæ–‡PDFæå–è¡¨æ ¼æ•°æ®\n\n\næ•°æ®åˆ†æ\nè¯»å–æ”¿åºœ/ä¼ä¸šå‘å¸ƒçš„PDFæŠ¥å‘Š\n\n\næ–‡æœ¬æŒ–æ˜\nåˆ†æå¤§é‡PDFæ–‡æ¡£å†…å®¹\n\n\nè‡ªåŠ¨åŒ–å¤„ç†\næ‰¹é‡æå–å‘ç¥¨ã€åˆåŒä¿¡æ¯",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "PDFæ–‡ä»¶è¯»å–"
    ]
  },
  {
    "objectID": "3005-pdf-reading.html#ä¸ºä»€ä¹ˆéœ€è¦è¯»å–pdf",
    "href": "3005-pdf-reading.html#ä¸ºä»€ä¹ˆéœ€è¦è¯»å–pdf",
    "title": "Rè¯­è¨€è¯»å–PDFå®Œå…¨æŒ‡å—",
    "section": "",
    "text": "PDF æ˜¯æœ€å¸¸è§çš„æ–‡æ¡£æ ¼å¼ï¼Œä½†Rè¯­è¨€å¤„ç†PDFå¹¶ä¸ç›´æ¥ã€‚ä»¥ä¸‹åœºæ™¯éœ€è¦ä»PDFæå–æ•°æ®ï¼š\n\n\n\nåœºæ™¯\nç¤ºä¾‹\n\n\n\n\nå­¦æœ¯ç ”ç©¶\nä»è®ºæ–‡PDFæå–è¡¨æ ¼æ•°æ®\n\n\næ•°æ®åˆ†æ\nè¯»å–æ”¿åºœ/ä¼ä¸šå‘å¸ƒçš„PDFæŠ¥å‘Š\n\n\næ–‡æœ¬æŒ–æ˜\nåˆ†æå¤§é‡PDFæ–‡æ¡£å†…å®¹\n\n\nè‡ªåŠ¨åŒ–å¤„ç†\næ‰¹é‡æå–å‘ç¥¨ã€åˆåŒä¿¡æ¯",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "PDFæ–‡ä»¶è¯»å–"
    ]
  },
  {
    "objectID": "3005-pdf-reading.html#råŒ…æ¦‚è§ˆ",
    "href": "3005-pdf-reading.html#råŒ…æ¦‚è§ˆ",
    "title": "Rè¯­è¨€è¯»å–PDFå®Œå…¨æŒ‡å—",
    "section": "RåŒ…æ¦‚è§ˆ",
    "text": "RåŒ…æ¦‚è§ˆ\n\n\n\nRåŒ…\nåŠŸèƒ½\né€‚ç”¨åœºæ™¯\n\n\n\n\npdftools\næå–æ–‡æœ¬å’Œå…ƒæ•°æ®\né€šç”¨æ–‡æœ¬æå–\n\n\ntabulizer\næå–è¡¨æ ¼\nè¡¨æ ¼æ•°æ®æå–\n\n\ntesseract\nOCRè¯†åˆ«\næ‰«æç‰ˆPDF\n\n\nqpdf\nPDFæ“ä½œ\nåˆå¹¶ã€æ‹†åˆ†ã€åŠ å¯†",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "PDFæ–‡ä»¶è¯»å–"
    ]
  },
  {
    "objectID": "3005-pdf-reading.html#å®‰è£…ä¸åŠ è½½",
    "href": "3005-pdf-reading.html#å®‰è£…ä¸åŠ è½½",
    "title": "Rè¯­è¨€è¯»å–PDFå®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\n# å®‰è£…pdftoolsï¼ˆCRANï¼‰\n# install.packages(\"pdftools\")\n\n# å®‰è£…tabulizerï¼ˆéœ€è¦Javaç¯å¢ƒï¼‰\n# install.packages(\"tabulizer\")\n\n# åŠ è½½åŒ…\nlibrary(pdftools)\nlibrary(tidyverse)\n\n\næ³¨æ„ï¼štabulizer éœ€è¦å…ˆå®‰è£… Javaï¼ˆJDK 8æˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "PDFæ–‡ä»¶è¯»å–"
    ]
  },
  {
    "objectID": "3005-pdf-reading.html#pdftoolsåŸºç¡€æ–‡æœ¬æå–",
    "href": "3005-pdf-reading.html#pdftoolsåŸºç¡€æ–‡æœ¬æå–",
    "title": "Rè¯­è¨€è¯»å–PDFå®Œå…¨æŒ‡å—",
    "section": "pdftoolsï¼šåŸºç¡€æ–‡æœ¬æå–",
    "text": "pdftoolsï¼šåŸºç¡€æ–‡æœ¬æå–\n\næå–å…¨éƒ¨æ–‡æœ¬\n\n# è¯»å–PDFæ–‡æœ¬\ntext &lt;- pdf_text(\"document.pdf\")\n\n# è¿”å›ä¸€ä¸ªå­—ç¬¦å‘é‡ï¼Œæ¯ä¸ªå…ƒç´ å¯¹åº”ä¸€é¡µ\nlength(text) # é¡µæ•°\ntext[1] # ç¬¬ä¸€é¡µå†…å®¹\n\n\n\nå®ä¾‹ï¼šè¯»å–åœ¨çº¿PDF\n\n# è¯»å–Rå®˜æ–¹æ–‡æ¡£ï¼ˆæ¼”ç¤ºç”¨ï¼‰\nurl &lt;- \"https://cran.r-project.org/doc/manuals/r-release/R-intro.pdf\"\n\n# ä¸‹è½½å¹¶è¯»å–\ntemp_file &lt;- tempfile(fileext = \".pdf\")\ndownload.file(url, temp_file, mode = \"wb\", quiet = TRUE)\n\n# æå–æ–‡æœ¬\ntext &lt;- pdf_text(temp_file)\n\n# æŸ¥çœ‹é¡µæ•°\ncat(\"æ€»é¡µæ•°:\", length(text), \"\\n\")\n\næ€»é¡µæ•°: 103 \n\n# æŸ¥çœ‹ç¬¬ä¸€é¡µï¼ˆå‰500å­—ç¬¦ï¼‰\ncat(substr(text[1], 1, 500), \"...\\n\")\n\nAn Introduction to R\n            Notes on R: A Programming Environment for Data Analysis and Graphics\n                                                       Version 4.5.2 (2025-10-31)\n\n\n\n\nW. N. Venables, D. M. Smith\nand the R Core Team\n ...\n\n\n\n\næå–PDFå…ƒæ•°æ®\n\n# è·å–PDFä¿¡æ¯\ninfo &lt;- pdf_info(temp_file)\n\n# æŸ¥çœ‹å…ƒæ•°æ®\ncat(\"æ ‡é¢˜:\", info$keys$Title, \"\\n\")\n\næ ‡é¢˜: \n\ncat(\"ä½œè€…:\", info$keys$Author, \"\\n\")\n\nä½œè€…: \n\ncat(\"åˆ›å»ºæ—¶é—´:\", as.character(info$created), \"\\n\")\n\nåˆ›å»ºæ—¶é—´: 2025-11-01 05:41:20 \n\ncat(\"é¡µæ•°:\", info$pages, \"\\n\")\n\né¡µæ•°: 103 \n\n\n\n\næŒ‰è¡Œåˆ†å‰²æ–‡æœ¬\n\n# ç¬¬ä¸€é¡µæŒ‰è¡Œåˆ†å‰²\nlines &lt;- strsplit(text[1], \"\\n\")[[1]]\n\n# æŸ¥çœ‹å‰10è¡Œ\nhead(lines, 10)\n\n[1] \"An Introduction to R\"                                                             \n[2] \"            Notes on R: A Programming Environment for Data Analysis and Graphics\" \n[3] \"                                                       Version 4.5.2 (2025-10-31)\"\n[4] \"\"                                                                                 \n[5] \"\"                                                                                 \n[6] \"\"                                                                                 \n[7] \"\"                                                                                 \n[8] \"W. N. Venables, D. M. Smith\"                                                      \n[9] \"and the R Core Team\"",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "PDFæ–‡ä»¶è¯»å–"
    ]
  },
  {
    "objectID": "3005-pdf-reading.html#æå–è¡¨æ ¼æ•°æ®",
    "href": "3005-pdf-reading.html#æå–è¡¨æ ¼æ•°æ®",
    "title": "Rè¯­è¨€è¯»å–PDFå®Œå…¨æŒ‡å—",
    "section": "æå–è¡¨æ ¼æ•°æ®",
    "text": "æå–è¡¨æ ¼æ•°æ®\n\nä½¿ç”¨ tabulizer\n\nlibrary(tabulizer)\n\n# æå–PDFä¸­çš„æ‰€æœ‰è¡¨æ ¼\ntables &lt;- extract_tables(\"report.pdf\")\n\n# è¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªè¡¨æ ¼çŸ©é˜µ\nlength(tables) # è¡¨æ ¼æ•°é‡\n\n# è½¬æ¢ä¸ºæ•°æ®æ¡†\ndf &lt;- as.data.frame(tables[[1]])\nhead(df)\n\n\n\næå–ç‰¹å®šé¡µé¢çš„è¡¨æ ¼\n\n# åªæå–ç¬¬2-3é¡µçš„è¡¨æ ¼\ntables &lt;- extract_tables(\"report.pdf\", pages = c(2, 3))\n\n# æå–ç‰¹å®šåŒºåŸŸï¼ˆéœ€è¦çŸ¥é“åæ ‡ï¼‰\n# areaå‚æ•°ï¼šc(top, left, bottom, right)\ntables &lt;- extract_tables(\"report.pdf\",\n    pages = 1,\n    area = list(c(100, 50, 400, 550))\n)\n\n\n\näº¤äº’å¼é€‰æ‹©åŒºåŸŸ\n\n# åœ¨å¼¹å‡ºçª—å£ä¸­æ‰‹åŠ¨é€‰æ‹©è¡¨æ ¼åŒºåŸŸ\ntables &lt;- extract_tables(\"report.pdf\",\n    method = \"decide\",\n    output = \"data.frame\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "PDFæ–‡ä»¶è¯»å–"
    ]
  },
  {
    "objectID": "3005-pdf-reading.html#æ–‡æœ¬æ¸…ç†ä¸å¤„ç†",
    "href": "3005-pdf-reading.html#æ–‡æœ¬æ¸…ç†ä¸å¤„ç†",
    "title": "Rè¯­è¨€è¯»å–PDFå®Œå…¨æŒ‡å—",
    "section": "æ–‡æœ¬æ¸…ç†ä¸å¤„ç†",
    "text": "æ–‡æœ¬æ¸…ç†ä¸å¤„ç†\nPDFæå–çš„æ–‡æœ¬é€šå¸¸éœ€è¦æ¸…ç†ï¼š\n\n# ç¤ºä¾‹ï¼šæ¸…ç†æå–çš„æ–‡æœ¬\nclean_pdf_text &lt;- function(text) {\n    text %&gt;%\n        # åˆå¹¶æ‰€æœ‰é¡µ\n        paste(collapse = \"\\n\") %&gt;%\n        # ç§»é™¤å¤šä½™ç©ºç™½\n        str_squish() %&gt;%\n        # ç§»é™¤é¡µçœ‰é¡µè„šï¼ˆç¤ºä¾‹æ¨¡å¼ï¼‰\n        str_remove_all(\"Page \\\\d+ of \\\\d+\") %&gt;%\n        # ç§»é™¤ç‰¹æ®Šå­—ç¬¦\n        str_remove_all(\"[\\\\x00-\\\\x1f]\")\n}\n\n# æ¸…ç†æ–‡æœ¬\ncleaned &lt;- clean_pdf_text(text[1:3])\ncat(substr(cleaned, 1, 300), \"...\\n\")\n\nAn Introduction to R Notes on R: A Programming Environment for Data Analysis and Graphics Version 4.5.2 (2025-10-31) W. N. Venables, D. M. Smith and the R Core Team This manual is for R, version 4.5.2 (2025-10-31). Copyright c 1990 W. N. Venables Copyright c 1992 W. N. Venables & D. M. Smith Copyrig ...\n\n\n\næå–ç‰¹å®šæ¨¡å¼\n\n# æå–æ‰€æœ‰é‚®ç®±\nextract_emails &lt;- function(text) {\n    pattern &lt;- \"[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,}\"\n    str_extract_all(text, pattern) %&gt;%\n        unlist() %&gt;%\n        unique()\n}\n\n# æå–æ‰€æœ‰URL\nextract_urls &lt;- function(text) {\n    pattern &lt;- \"https?://[\\\\w./%-]+\"\n    str_extract_all(text, pattern) %&gt;%\n        unlist() %&gt;%\n        unique()\n}\n\n# æå–æ•°å­—\nextract_numbers &lt;- function(text) {\n    pattern &lt;- \"\\\\d+\\\\.?\\\\d*\"\n    str_extract_all(text, pattern) %&gt;% unlist()\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "PDFæ–‡ä»¶è¯»å–"
    ]
  },
  {
    "objectID": "3005-pdf-reading.html#å¤„ç†æ‰«æç‰ˆpdfocr",
    "href": "3005-pdf-reading.html#å¤„ç†æ‰«æç‰ˆpdfocr",
    "title": "Rè¯­è¨€è¯»å–PDFå®Œå…¨æŒ‡å—",
    "section": "å¤„ç†æ‰«æç‰ˆPDFï¼ˆOCRï¼‰",
    "text": "å¤„ç†æ‰«æç‰ˆPDFï¼ˆOCRï¼‰\næ‰«æç‰ˆPDFæ˜¯å›¾åƒï¼Œéœ€è¦OCRè¯†åˆ«ï¼š\n\n# å®‰è£…tesseract\n# install.packages(\"tesseract\")\n\nlibrary(tesseract)\n\n# ä¸‹è½½ä¸­æ–‡è¯­è¨€åŒ…ï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰\n# tesseract_download(\"chi_sim\")\n\n# åˆå§‹åŒ–OCRå¼•æ“\neng &lt;- tesseract(\"eng\") # è‹±æ–‡\nchi &lt;- tesseract(\"chi_sim\") # ç®€ä½“ä¸­æ–‡\n\n# å¯¹PDFè¿›è¡ŒOCR\n# é¦–å…ˆå°†PDFè½¬æ¢ä¸ºå›¾åƒ\nlibrary(pdftools)\nimages &lt;- pdf_convert(\"scanned_document.pdf\", dpi = 300)\n\n# å¯¹æ¯å¼ å›¾åƒè¿›è¡ŒOCR\nocr_results &lt;- lapply(images, function(img) {\n    ocr(img, engine = eng)\n})\n\n# åˆå¹¶ç»“æœ\nfull_text &lt;- paste(ocr_results, collapse = \"\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "PDFæ–‡ä»¶è¯»å–"
    ]
  },
  {
    "objectID": "3005-pdf-reading.html#qpdfpdfæ“ä½œ",
    "href": "3005-pdf-reading.html#qpdfpdfæ“ä½œ",
    "title": "Rè¯­è¨€è¯»å–PDFå®Œå…¨æŒ‡å—",
    "section": "qpdfï¼šPDFæ“ä½œ",
    "text": "qpdfï¼šPDFæ“ä½œ\n\nlibrary(qpdf)\n\n# åˆå¹¶å¤šä¸ªPDF\npdf_combine(c(\"file1.pdf\", \"file2.pdf\"), output = \"combined.pdf\")\n\n# æ‹†åˆ†PDFï¼ˆæ¯é¡µä¸€ä¸ªæ–‡ä»¶ï¼‰\npdf_split(\"document.pdf\", output = \"pages/page\")\n\n# æå–ç‰¹å®šé¡µé¢\npdf_subset(\"document.pdf\", pages = 1:5, output = \"first5pages.pdf\")\n\n# å‹ç¼©PDF\npdf_compress(\"large.pdf\", output = \"compressed.pdf\")\n\n# è·å–é¡µæ•°\npdf_length(\"document.pdf\")",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "PDFæ–‡ä»¶è¯»å–"
    ]
  },
  {
    "objectID": "3005-pdf-reading.html#æ‰¹é‡å¤„ç†pdf",
    "href": "3005-pdf-reading.html#æ‰¹é‡å¤„ç†pdf",
    "title": "Rè¯­è¨€è¯»å–PDFå®Œå…¨æŒ‡å—",
    "section": "æ‰¹é‡å¤„ç†PDF",
    "text": "æ‰¹é‡å¤„ç†PDF\n\næ‰¹é‡æå–æ–‡æœ¬\n\n# è·å–æ–‡ä»¶å¤¹ä¸­æ‰€æœ‰PDF\npdf_files &lt;- list.files(\"pdf_folder\", pattern = \"\\\\.pdf$\", full.names = TRUE)\n\n# æ‰¹é‡æå–\nresults &lt;- lapply(pdf_files, function(file) {\n    tryCatch(\n        {\n            text &lt;- pdf_text(file)\n            tibble(\n                file = basename(file),\n                pages = length(text),\n                text = paste(text, collapse = \"\\n\")\n            )\n        },\n        error = function(e) {\n            tibble(file = basename(file), pages = NA, text = NA)\n        }\n    )\n})\n\n# åˆå¹¶ç»“æœ\nall_texts &lt;- bind_rows(results)\n\n\n\nå¹¶è¡Œå¤„ç†\n\nlibrary(future)\nlibrary(furrr)\n\n# è®¾ç½®å¹¶è¡Œ\nplan(multisession, workers = 4)\n\n# å¹¶è¡Œæå–\nresults &lt;- future_map(pdf_files, function(file) {\n    text &lt;- pdf_text(file)\n    tibble(file = basename(file), text = paste(text, collapse = \"\\n\"))\n}, .progress = TRUE)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "PDFæ–‡ä»¶è¯»å–"
    ]
  },
  {
    "objectID": "3005-pdf-reading.html#å®æˆ˜æ¡ˆä¾‹æå–è®ºæ–‡è¡¨æ ¼",
    "href": "3005-pdf-reading.html#å®æˆ˜æ¡ˆä¾‹æå–è®ºæ–‡è¡¨æ ¼",
    "title": "Rè¯­è¨€è¯»å–PDFå®Œå…¨æŒ‡å—",
    "section": "å®æˆ˜æ¡ˆä¾‹ï¼šæå–è®ºæ–‡è¡¨æ ¼",
    "text": "å®æˆ˜æ¡ˆä¾‹ï¼šæå–è®ºæ–‡è¡¨æ ¼\n\n# ä»å­¦æœ¯è®ºæ–‡PDFæå–è¡¨æ ¼\nextract_paper_tables &lt;- function(pdf_path) {\n    library(tabulizer)\n\n    # æå–æ‰€æœ‰è¡¨æ ¼\n    tables &lt;- extract_tables(pdf_path, output = \"data.frame\")\n\n    # æ¸…ç†æ¯ä¸ªè¡¨æ ¼\n    cleaned_tables &lt;- lapply(seq_along(tables), function(i) {\n        df &lt;- tables[[i]]\n\n        # ä½¿ç”¨ç¬¬ä¸€è¡Œä½œä¸ºåˆ—åï¼ˆå¦‚æœåˆé€‚ï¼‰\n        if (nrow(df) &gt; 1) {\n            names(df) &lt;- as.character(df[1, ])\n            df &lt;- df[-1, ]\n        }\n\n        # æ·»åŠ è¡¨æ ¼ç¼–å·\n        df$table_id &lt;- paste0(\"Table_\", i)\n\n        df\n    })\n\n    cleaned_tables\n}\n\n# ä½¿ç”¨ç¤ºä¾‹\ntables &lt;- extract_paper_tables(\"research_paper.pdf\")\n\n# ä¿å­˜ä¸ºExcel\nlibrary(openxlsx)\nwb &lt;- createWorkbook()\nfor (i in seq_along(tables)) {\n    addWorksheet(wb, paste0(\"Table\", i))\n    writeData(wb, i, tables[[i]])\n}\nsaveWorkbook(wb, \"extracted_tables.xlsx\", overwrite = TRUE)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "PDFæ–‡ä»¶è¯»å–"
    ]
  },
  {
    "objectID": "3005-pdf-reading.html#å¸¸è§é—®é¢˜è§£å†³",
    "href": "3005-pdf-reading.html#å¸¸è§é—®é¢˜è§£å†³",
    "title": "Rè¯­è¨€è¯»å–PDFå®Œå…¨æŒ‡å—",
    "section": "å¸¸è§é—®é¢˜è§£å†³",
    "text": "å¸¸è§é—®é¢˜è§£å†³\n\n1. ç¼–ç é—®é¢˜\n\n# å°è¯•ä¸åŒç¼–ç \ntext &lt;- pdf_text(\"document.pdf\")\ntext &lt;- iconv(text, from = \"UTF-8\", to = \"UTF-8\", sub = \"\")\n\n\n\n2. è¡¨æ ¼è¯†åˆ«ä¸å‡†ç¡®\n\n# è°ƒæ•´è¡¨æ ¼æå–å‚æ•°\ntables &lt;- extract_tables(\n    \"document.pdf\",\n    method = \"lattice\", # æˆ– \"stream\"\n    guess = FALSE, # ä¸è‡ªåŠ¨çŒœæµ‹\n    output = \"data.frame\"\n)\n\n\n\n3. å¯†ç ä¿æŠ¤çš„PDF\n\n# ä½¿ç”¨å¯†ç æ‰“å¼€\ntext &lt;- pdf_text(\"protected.pdf\", upw = \"password\")\n\n\n\n4. Javaç¯å¢ƒé—®é¢˜ï¼ˆtabulizerï¼‰\n\n# è®¾ç½®Javaè·¯å¾„\nSys.setenv(JAVA_HOME = \"C:/Program Files/Java/jdk1.8.0_301\")\n\n# æˆ–ä½¿ç”¨rJava\nlibrary(rJava)\n.jinit()",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "PDFæ–‡ä»¶è¯»å–"
    ]
  },
  {
    "objectID": "3005-pdf-reading.html#æ€»ç»“",
    "href": "3005-pdf-reading.html#æ€»ç»“",
    "title": "Rè¯­è¨€è¯»å–PDFå®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nä»»åŠ¡\næ¨èæ–¹æ¡ˆ\n\n\n\n\næå–æ–‡æœ¬\npdftools::pdf_text()\n\n\næå–è¡¨æ ¼\ntabulizer::extract_tables()\n\n\næ‰«æç‰ˆOCR\ntesseract::ocr()\n\n\nPDFæ“ä½œ\nqpdf\n\n\næ‰¹é‡å¤„ç†\npurrr + future\n\n\n\n\næœ€ä½³å®è·µ\n\nå…ˆæ£€æŸ¥PDFç±»å‹ï¼šæ–‡å­—å‹è¿˜æ˜¯æ‰«æå‹å†³å®šäº†å¤„ç†æ–¹å¼\nè¡¨æ ¼æå–è¦éªŒè¯ï¼šè‡ªåŠ¨æå–çš„è¡¨æ ¼ç»å¸¸éœ€è¦æ‰‹åŠ¨è°ƒæ•´\næ‰¹é‡å¤„ç†åŠ å…¥é”™è¯¯å¤„ç†ï¼šä½¿ç”¨ tryCatch é˜²æ­¢å•ä¸ªæ–‡ä»¶å¤±è´¥ä¸­æ–­\nOCRéœ€è¦å¥½çš„å›¾åƒè´¨é‡ï¼šè‡³å°‘300 DPI\n\n\n\næ¨èèµ„æº\n\npdftoolsæ–‡æ¡£\ntabulizer GitHub\ntesseractæ–‡æ¡£",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "PDFæ–‡ä»¶è¯»å–"
    ]
  },
  {
    "objectID": "3003-dplyr-tidyr.html",
    "href": "3003-dplyr-tidyr.html",
    "title": "dplyr/tidyr æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "dplyr å’Œ tidyr æ˜¯ tidyverse çš„æ ¸å¿ƒæ•°æ®å¤„ç†åŒ…ï¼Œæä¾›äº†ç›´è§‚ã€é«˜æ•ˆçš„æ•°æ®æ“ä½œè¯­æ³•ã€‚\n\n\n\n\n\nç‰¹ç‚¹\nè¯´æ˜\n\n\n\n\nè¯­æ³•ç›´è§‚\nå‡½æ•°åå³åŠ¨è¯ï¼Œæ˜“è¯»æ˜“å†™\n\n\nç®¡é“æ“ä½œ\n%&gt;% é“¾å¼è°ƒç”¨\n\n\næ€§èƒ½ä¼˜ç§€\nåº•å±‚C++å®ç°\n\n\nç”Ÿæ€å®Œå–„\nä¸tidyverseæ— ç¼é›†æˆ",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "dplyr/tidyr æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3003-dplyr-tidyr.html#dplyrtidyr-ç®€ä»‹",
    "href": "3003-dplyr-tidyr.html#dplyrtidyr-ç®€ä»‹",
    "title": "dplyr/tidyr æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "dplyr å’Œ tidyr æ˜¯ tidyverse çš„æ ¸å¿ƒæ•°æ®å¤„ç†åŒ…ï¼Œæä¾›äº†ç›´è§‚ã€é«˜æ•ˆçš„æ•°æ®æ“ä½œè¯­æ³•ã€‚\n\n\n\n\n\nç‰¹ç‚¹\nè¯´æ˜\n\n\n\n\nè¯­æ³•ç›´è§‚\nå‡½æ•°åå³åŠ¨è¯ï¼Œæ˜“è¯»æ˜“å†™\n\n\nç®¡é“æ“ä½œ\n%&gt;% é“¾å¼è°ƒç”¨\n\n\næ€§èƒ½ä¼˜ç§€\nåº•å±‚C++å®ç°\n\n\nç”Ÿæ€å®Œå–„\nä¸tidyverseæ— ç¼é›†æˆ",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "dplyr/tidyr æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3003-dplyr-tidyr.html#å®‰è£…ä¸åŠ è½½",
    "href": "3003-dplyr-tidyr.html#å®‰è£…ä¸åŠ è½½",
    "title": "dplyr/tidyr æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(tibble)\n\n# ç¤ºä¾‹æ•°æ®\ndata(mtcars)\ndf &lt;- as_tibble(mtcars, rownames = \"car\")\nhead(df)\n\n# A tibble: 6 Ã— 12\n  car            mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb\n  &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 Mazda RX4     21       6   160   110  3.9   2.62  16.5     0     1     4     4\n2 Mazda RX4 Wâ€¦  21       6   160   110  3.9   2.88  17.0     0     1     4     4\n3 Datsun 710    22.8     4   108    93  3.85  2.32  18.6     1     1     4     1\n4 Hornet 4 Drâ€¦  21.4     6   258   110  3.08  3.22  19.4     1     0     3     1\n5 Hornet Sporâ€¦  18.7     8   360   175  3.15  3.44  17.0     0     0     3     2\n6 Valiant       18.1     6   225   105  2.76  3.46  20.2     1     0     3     1",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "dplyr/tidyr æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3003-dplyr-tidyr.html#ç¬¬ä¸€éƒ¨åˆ†dplyr-æ ¸å¿ƒå‡½æ•°",
    "href": "3003-dplyr-tidyr.html#ç¬¬ä¸€éƒ¨åˆ†dplyr-æ ¸å¿ƒå‡½æ•°",
    "title": "dplyr/tidyr æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šdplyr æ ¸å¿ƒå‡½æ•°",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šdplyr æ ¸å¿ƒå‡½æ•°\n\nfilter() - ç­›é€‰è¡Œ\n\n# å•æ¡ä»¶ç­›é€‰\ndf %&gt;% filter(mpg &gt; 25)\n\n# A tibble: 6 Ã— 12\n  car            mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb\n  &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 Fiat 128      32.4     4  78.7    66  4.08  2.2   19.5     1     1     4     1\n2 Honda Civic   30.4     4  75.7    52  4.93  1.62  18.5     1     1     4     2\n3 Toyota Coroâ€¦  33.9     4  71.1    65  4.22  1.84  19.9     1     1     4     1\n4 Fiat X1-9     27.3     4  79      66  4.08  1.94  18.9     1     1     4     1\n5 Porsche 914â€¦  26       4 120.     91  4.43  2.14  16.7     0     1     5     2\n6 Lotus Europa  30.4     4  95.1   113  3.77  1.51  16.9     1     1     5     2\n\n\n\n# å¤šæ¡ä»¶ç­›é€‰ï¼ˆANDï¼‰\ndf %&gt;% filter(mpg &gt; 20, cyl == 4)\n\n# A tibble: 11 Ã— 12\n   car           mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb\n   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1 Datsun 710   22.8     4 108      93  3.85  2.32  18.6     1     1     4     1\n 2 Merc 240D    24.4     4 147.     62  3.69  3.19  20       1     0     4     2\n 3 Merc 230     22.8     4 141.     95  3.92  3.15  22.9     1     0     4     2\n 4 Fiat 128     32.4     4  78.7    66  4.08  2.2   19.5     1     1     4     1\n 5 Honda Civic  30.4     4  75.7    52  4.93  1.62  18.5     1     1     4     2\n 6 Toyota Corâ€¦  33.9     4  71.1    65  4.22  1.84  19.9     1     1     4     1\n 7 Toyota Corâ€¦  21.5     4 120.     97  3.7   2.46  20.0     1     0     3     1\n 8 Fiat X1-9    27.3     4  79      66  4.08  1.94  18.9     1     1     4     1\n 9 Porsche 91â€¦  26       4 120.     91  4.43  2.14  16.7     0     1     5     2\n10 Lotus Euroâ€¦  30.4     4  95.1   113  3.77  1.51  16.9     1     1     5     2\n11 Volvo 142E   21.4     4 121     109  4.11  2.78  18.6     1     1     4     2\n\n# å¤šæ¡ä»¶ç­›é€‰ï¼ˆORï¼‰\ndf %&gt;% filter(mpg &gt; 30 | hp &gt; 200)\n\n# A tibble: 11 Ã— 12\n   car           mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb\n   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1 Duster 360   14.3     8 360     245  3.21  3.57  15.8     0     0     3     4\n 2 Cadillac Fâ€¦  10.4     8 472     205  2.93  5.25  18.0     0     0     3     4\n 3 Lincoln Coâ€¦  10.4     8 460     215  3     5.42  17.8     0     0     3     4\n 4 Chrysler Iâ€¦  14.7     8 440     230  3.23  5.34  17.4     0     0     3     4\n 5 Fiat 128     32.4     4  78.7    66  4.08  2.2   19.5     1     1     4     1\n 6 Honda Civic  30.4     4  75.7    52  4.93  1.62  18.5     1     1     4     2\n 7 Toyota Corâ€¦  33.9     4  71.1    65  4.22  1.84  19.9     1     1     4     1\n 8 Camaro Z28   13.3     8 350     245  3.73  3.84  15.4     0     0     3     4\n 9 Lotus Euroâ€¦  30.4     4  95.1   113  3.77  1.51  16.9     1     1     5     2\n10 Ford Panteâ€¦  15.8     8 351     264  4.22  3.17  14.5     0     1     5     4\n11 Maserati Bâ€¦  15       8 301     335  3.54  3.57  14.6     0     1     5     8\n\n\n\n# ä½¿ç”¨ %in%\ndf %&gt;% filter(cyl %in% c(4, 6))\n\n# A tibble: 18 Ã— 12\n   car           mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb\n   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1 Mazda RX4    21       6 160     110  3.9   2.62  16.5     0     1     4     4\n 2 Mazda RX4 â€¦  21       6 160     110  3.9   2.88  17.0     0     1     4     4\n 3 Datsun 710   22.8     4 108      93  3.85  2.32  18.6     1     1     4     1\n 4 Hornet 4 Dâ€¦  21.4     6 258     110  3.08  3.22  19.4     1     0     3     1\n 5 Valiant      18.1     6 225     105  2.76  3.46  20.2     1     0     3     1\n 6 Merc 240D    24.4     4 147.     62  3.69  3.19  20       1     0     4     2\n 7 Merc 230     22.8     4 141.     95  3.92  3.15  22.9     1     0     4     2\n 8 Merc 280     19.2     6 168.    123  3.92  3.44  18.3     1     0     4     4\n 9 Merc 280C    17.8     6 168.    123  3.92  3.44  18.9     1     0     4     4\n10 Fiat 128     32.4     4  78.7    66  4.08  2.2   19.5     1     1     4     1\n11 Honda Civic  30.4     4  75.7    52  4.93  1.62  18.5     1     1     4     2\n12 Toyota Corâ€¦  33.9     4  71.1    65  4.22  1.84  19.9     1     1     4     1\n13 Toyota Corâ€¦  21.5     4 120.     97  3.7   2.46  20.0     1     0     3     1\n14 Fiat X1-9    27.3     4  79      66  4.08  1.94  18.9     1     1     4     1\n15 Porsche 91â€¦  26       4 120.     91  4.43  2.14  16.7     0     1     5     2\n16 Lotus Euroâ€¦  30.4     4  95.1   113  3.77  1.51  16.9     1     1     5     2\n17 Ferrari Diâ€¦  19.7     6 145     175  3.62  2.77  15.5     0     1     5     6\n18 Volvo 142E   21.4     4 121     109  4.11  2.78  18.6     1     1     4     2\n\n\n\n\nselect() - é€‰æ‹©åˆ—\n\n# é€‰æ‹©ç‰¹å®šåˆ—\ndf %&gt;% select(car, mpg, hp)\n\n# A tibble: 32 Ã— 3\n   car                 mpg    hp\n   &lt;chr&gt;             &lt;dbl&gt; &lt;dbl&gt;\n 1 Mazda RX4          21     110\n 2 Mazda RX4 Wag      21     110\n 3 Datsun 710         22.8    93\n 4 Hornet 4 Drive     21.4   110\n 5 Hornet Sportabout  18.7   175\n 6 Valiant            18.1   105\n 7 Duster 360         14.3   245\n 8 Merc 240D          24.4    62\n 9 Merc 230           22.8    95\n10 Merc 280           19.2   123\n# â„¹ 22 more rows\n\n\n\n# æ’é™¤åˆ—\ndf %&gt;% select(-car, -vs, -am)\n\n# A tibble: 32 Ã— 9\n     mpg   cyl  disp    hp  drat    wt  qsec  gear  carb\n   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1  21       6  160    110  3.9   2.62  16.5     4     4\n 2  21       6  160    110  3.9   2.88  17.0     4     4\n 3  22.8     4  108     93  3.85  2.32  18.6     4     1\n 4  21.4     6  258    110  3.08  3.22  19.4     3     1\n 5  18.7     8  360    175  3.15  3.44  17.0     3     2\n 6  18.1     6  225    105  2.76  3.46  20.2     3     1\n 7  14.3     8  360    245  3.21  3.57  15.8     3     4\n 8  24.4     4  147.    62  3.69  3.19  20       4     2\n 9  22.8     4  141.    95  3.92  3.15  22.9     4     2\n10  19.2     6  168.   123  3.92  3.44  18.3     4     4\n# â„¹ 22 more rows\n\n# é€‰æ‹©èŒƒå›´\ndf %&gt;% select(mpg:hp)\n\n# A tibble: 32 Ã— 4\n     mpg   cyl  disp    hp\n   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1  21       6  160    110\n 2  21       6  160    110\n 3  22.8     4  108     93\n 4  21.4     6  258    110\n 5  18.7     8  360    175\n 6  18.1     6  225    105\n 7  14.3     8  360    245\n 8  24.4     4  147.    62\n 9  22.8     4  141.    95\n10  19.2     6  168.   123\n# â„¹ 22 more rows\n\n\n\n# è¾…åŠ©å‡½æ•°\ndf %&gt;% select(starts_with(\"c\")) # ä»¥cå¼€å¤´\n\n# A tibble: 32 Ã— 3\n   car                 cyl  carb\n   &lt;chr&gt;             &lt;dbl&gt; &lt;dbl&gt;\n 1 Mazda RX4             6     4\n 2 Mazda RX4 Wag         6     4\n 3 Datsun 710            4     1\n 4 Hornet 4 Drive        6     1\n 5 Hornet Sportabout     8     2\n 6 Valiant               6     1\n 7 Duster 360            8     4\n 8 Merc 240D             4     2\n 9 Merc 230              4     2\n10 Merc 280              6     4\n# â„¹ 22 more rows\n\ndf %&gt;% select(ends_with(\"p\")) # ä»¥pç»“å°¾\n\n# A tibble: 32 Ã— 2\n    disp    hp\n   &lt;dbl&gt; &lt;dbl&gt;\n 1  160    110\n 2  160    110\n 3  108     93\n 4  258    110\n 5  360    175\n 6  225    105\n 7  360    245\n 8  147.    62\n 9  141.    95\n10  168.   123\n# â„¹ 22 more rows\n\ndf %&gt;% select(contains(\"ar\")) # åŒ…å«ar\n\n# A tibble: 32 Ã— 3\n   car                gear  carb\n   &lt;chr&gt;             &lt;dbl&gt; &lt;dbl&gt;\n 1 Mazda RX4             4     4\n 2 Mazda RX4 Wag         4     4\n 3 Datsun 710            4     1\n 4 Hornet 4 Drive        3     1\n 5 Hornet Sportabout     3     2\n 6 Valiant               3     1\n 7 Duster 360            3     4\n 8 Merc 240D             4     2\n 9 Merc 230              4     2\n10 Merc 280              4     4\n# â„¹ 22 more rows\n\ndf %&gt;% select(where(is.numeric)) # æ•°å€¼å‹åˆ—\n\n# A tibble: 32 Ã— 11\n     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb\n   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1  21       6  160    110  3.9   2.62  16.5     0     1     4     4\n 2  21       6  160    110  3.9   2.88  17.0     0     1     4     4\n 3  22.8     4  108     93  3.85  2.32  18.6     1     1     4     1\n 4  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1\n 5  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2\n 6  18.1     6  225    105  2.76  3.46  20.2     1     0     3     1\n 7  14.3     8  360    245  3.21  3.57  15.8     0     0     3     4\n 8  24.4     4  147.    62  3.69  3.19  20       1     0     4     2\n 9  22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2\n10  19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4\n# â„¹ 22 more rows\n\n\n\n\nmutate() - åˆ›å»º/ä¿®æ”¹åˆ—\n\n# åˆ›å»ºæ–°åˆ—\ndf %&gt;% mutate(\n    kpl = mpg * 0.425, # è‹±é‡Œè½¬å…¬é‡Œ\n    hp_per_cyl = hp / cyl # æ¯ç¼¸é©¬åŠ›\n)\n\n# A tibble: 32 Ã— 14\n   car     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb   kpl\n   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1 Mazdâ€¦  21       6  160    110  3.9   2.62  16.5     0     1     4     4  8.92\n 2 Mazdâ€¦  21       6  160    110  3.9   2.88  17.0     0     1     4     4  8.92\n 3 Datsâ€¦  22.8     4  108     93  3.85  2.32  18.6     1     1     4     1  9.69\n 4 Hornâ€¦  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1  9.09\n 5 Hornâ€¦  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2  7.95\n 6 Valiâ€¦  18.1     6  225    105  2.76  3.46  20.2     1     0     3     1  7.69\n 7 Dustâ€¦  14.3     8  360    245  3.21  3.57  15.8     0     0     3     4  6.08\n 8 Mercâ€¦  24.4     4  147.    62  3.69  3.19  20       1     0     4     2 10.4 \n 9 Mercâ€¦  22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2  9.69\n10 Mercâ€¦  19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4  8.16\n# â„¹ 22 more rows\n# â„¹ 1 more variable: hp_per_cyl &lt;dbl&gt;\n\n\n\n# æ¡ä»¶åˆ›å»º\ndf %&gt;% mutate(\n    efficiency = case_when(\n        mpg &gt;= 25 ~ \"é«˜æ•ˆ\",\n        mpg &gt;= 18 ~ \"ä¸­ç­‰\",\n        TRUE ~ \"ä½æ•ˆ\"\n    )\n)\n\n# A tibble: 32 Ã— 13\n   car           mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb\n   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1 Mazda RX4    21       6  160    110  3.9   2.62  16.5     0     1     4     4\n 2 Mazda RX4 â€¦  21       6  160    110  3.9   2.88  17.0     0     1     4     4\n 3 Datsun 710   22.8     4  108     93  3.85  2.32  18.6     1     1     4     1\n 4 Hornet 4 Dâ€¦  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1\n 5 Hornet Spoâ€¦  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2\n 6 Valiant      18.1     6  225    105  2.76  3.46  20.2     1     0     3     1\n 7 Duster 360   14.3     8  360    245  3.21  3.57  15.8     0     0     3     4\n 8 Merc 240D    24.4     4  147.    62  3.69  3.19  20       1     0     4     2\n 9 Merc 230     22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2\n10 Merc 280     19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4\n# â„¹ 22 more rows\n# â„¹ 1 more variable: efficiency &lt;chr&gt;\n\n\n\n# ä¿®æ”¹ç°æœ‰åˆ—\ndf %&gt;% mutate(\n    cyl = as.factor(cyl),\n    am = ifelse(am == 1, \"æ‰‹åŠ¨\", \"è‡ªåŠ¨\")\n)\n\n# A tibble: 32 Ã— 12\n   car           mpg cyl    disp    hp  drat    wt  qsec    vs am     gear  carb\n   &lt;chr&gt;       &lt;dbl&gt; &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1 Mazda RX4    21   6      160    110  3.9   2.62  16.5     0 æ‰‹åŠ¨      4     4\n 2 Mazda RX4 â€¦  21   6      160    110  3.9   2.88  17.0     0 æ‰‹åŠ¨      4     4\n 3 Datsun 710   22.8 4      108     93  3.85  2.32  18.6     1 æ‰‹åŠ¨      4     1\n 4 Hornet 4 Dâ€¦  21.4 6      258    110  3.08  3.22  19.4     1 è‡ªåŠ¨      3     1\n 5 Hornet Spoâ€¦  18.7 8      360    175  3.15  3.44  17.0     0 è‡ªåŠ¨      3     2\n 6 Valiant      18.1 6      225    105  2.76  3.46  20.2     1 è‡ªåŠ¨      3     1\n 7 Duster 360   14.3 8      360    245  3.21  3.57  15.8     0 è‡ªåŠ¨      3     4\n 8 Merc 240D    24.4 4      147.    62  3.69  3.19  20       1 è‡ªåŠ¨      4     2\n 9 Merc 230     22.8 4      141.    95  3.92  3.15  22.9     1 è‡ªåŠ¨      4     2\n10 Merc 280     19.2 6      168.   123  3.92  3.44  18.3     1 è‡ªåŠ¨      4     4\n# â„¹ 22 more rows\n\n\n\n\narrange() - æ’åº\n\n# å‡åº\ndf %&gt;% arrange(mpg)\n\n# A tibble: 32 Ã— 12\n   car           mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb\n   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1 Cadillac Fâ€¦  10.4     8  472    205  2.93  5.25  18.0     0     0     3     4\n 2 Lincoln Coâ€¦  10.4     8  460    215  3     5.42  17.8     0     0     3     4\n 3 Camaro Z28   13.3     8  350    245  3.73  3.84  15.4     0     0     3     4\n 4 Duster 360   14.3     8  360    245  3.21  3.57  15.8     0     0     3     4\n 5 Chrysler Iâ€¦  14.7     8  440    230  3.23  5.34  17.4     0     0     3     4\n 6 Maserati Bâ€¦  15       8  301    335  3.54  3.57  14.6     0     1     5     8\n 7 Merc 450SLC  15.2     8  276.   180  3.07  3.78  18       0     0     3     3\n 8 AMC Javelin  15.2     8  304    150  3.15  3.44  17.3     0     0     3     2\n 9 Dodge Chalâ€¦  15.5     8  318    150  2.76  3.52  16.9     0     0     3     2\n10 Ford Panteâ€¦  15.8     8  351    264  4.22  3.17  14.5     0     1     5     4\n# â„¹ 22 more rows\n\n# é™åº\ndf %&gt;% arrange(desc(mpg))\n\n# A tibble: 32 Ã— 12\n   car           mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb\n   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1 Toyota Corâ€¦  33.9     4  71.1    65  4.22  1.84  19.9     1     1     4     1\n 2 Fiat 128     32.4     4  78.7    66  4.08  2.2   19.5     1     1     4     1\n 3 Honda Civic  30.4     4  75.7    52  4.93  1.62  18.5     1     1     4     2\n 4 Lotus Euroâ€¦  30.4     4  95.1   113  3.77  1.51  16.9     1     1     5     2\n 5 Fiat X1-9    27.3     4  79      66  4.08  1.94  18.9     1     1     4     1\n 6 Porsche 91â€¦  26       4 120.     91  4.43  2.14  16.7     0     1     5     2\n 7 Merc 240D    24.4     4 147.     62  3.69  3.19  20       1     0     4     2\n 8 Datsun 710   22.8     4 108      93  3.85  2.32  18.6     1     1     4     1\n 9 Merc 230     22.8     4 141.     95  3.92  3.15  22.9     1     0     4     2\n10 Toyota Corâ€¦  21.5     4 120.     97  3.7   2.46  20.0     1     0     3     1\n# â„¹ 22 more rows\n\n# å¤šåˆ—æ’åº\ndf %&gt;% arrange(cyl, desc(mpg))\n\n# A tibble: 32 Ã— 12\n   car           mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb\n   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1 Toyota Corâ€¦  33.9     4  71.1    65  4.22  1.84  19.9     1     1     4     1\n 2 Fiat 128     32.4     4  78.7    66  4.08  2.2   19.5     1     1     4     1\n 3 Honda Civic  30.4     4  75.7    52  4.93  1.62  18.5     1     1     4     2\n 4 Lotus Euroâ€¦  30.4     4  95.1   113  3.77  1.51  16.9     1     1     5     2\n 5 Fiat X1-9    27.3     4  79      66  4.08  1.94  18.9     1     1     4     1\n 6 Porsche 91â€¦  26       4 120.     91  4.43  2.14  16.7     0     1     5     2\n 7 Merc 240D    24.4     4 147.     62  3.69  3.19  20       1     0     4     2\n 8 Datsun 710   22.8     4 108      93  3.85  2.32  18.6     1     1     4     1\n 9 Merc 230     22.8     4 141.     95  3.92  3.15  22.9     1     0     4     2\n10 Toyota Corâ€¦  21.5     4 120.     97  3.7   2.46  20.0     1     0     3     1\n# â„¹ 22 more rows\n\n\n\n\nsummarise() - æ±‡æ€»\n\n# åŸºç¡€æ±‡æ€»\ndf %&gt;% summarise(\n    n = n(),\n    mean_mpg = mean(mpg),\n    sd_mpg = sd(mpg),\n    median_hp = median(hp)\n)\n\n# A tibble: 1 Ã— 4\n      n mean_mpg sd_mpg median_hp\n  &lt;int&gt;    &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;\n1    32     20.1   6.03       123\n\n\n\n# å¤šåˆ—æ±‡æ€»\ndf %&gt;% summarise(\n    across(c(mpg, hp, wt), list(\n        mean = mean,\n        sd = sd\n    ))\n)\n\n# A tibble: 1 Ã— 6\n  mpg_mean mpg_sd hp_mean hp_sd wt_mean wt_sd\n     &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;\n1     20.1   6.03    147.  68.6    3.22 0.978",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "dplyr/tidyr æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3003-dplyr-tidyr.html#ç¬¬äºŒéƒ¨åˆ†åˆ†ç»„æ“ä½œ",
    "href": "3003-dplyr-tidyr.html#ç¬¬äºŒéƒ¨åˆ†åˆ†ç»„æ“ä½œ",
    "title": "dplyr/tidyr æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šåˆ†ç»„æ“ä½œ",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šåˆ†ç»„æ“ä½œ\n\ngroup_by() + summarise()\n\n# åˆ†ç»„æ±‡æ€»\ndf %&gt;%\n    group_by(cyl) %&gt;%\n    summarise(\n        n = n(),\n        mean_mpg = mean(mpg),\n        mean_hp = mean(hp)\n    )\n\n# A tibble: 3 Ã— 4\n    cyl     n mean_mpg mean_hp\n  &lt;dbl&gt; &lt;int&gt;    &lt;dbl&gt;   &lt;dbl&gt;\n1     4    11     26.7    82.6\n2     6     7     19.7   122. \n3     8    14     15.1   209. \n\n\n\n# å¤šåˆ—åˆ†ç»„\ndf %&gt;%\n    group_by(cyl, am) %&gt;%\n    summarise(\n        n = n(),\n        mean_mpg = mean(mpg),\n        .groups = \"drop\"\n    )\n\n# A tibble: 6 Ã— 4\n    cyl    am     n mean_mpg\n  &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;    &lt;dbl&gt;\n1     4     0     3     22.9\n2     4     1     8     28.1\n3     6     0     4     19.1\n4     6     1     3     20.6\n5     8     0    12     15.0\n6     8     1     2     15.4\n\n\n\n\ngroup_by() + mutate()\n\n# åˆ†ç»„å†…è®¡ç®—\ndf %&gt;%\n    group_by(cyl) %&gt;%\n    mutate(\n        mpg_rank = rank(-mpg), # ç»„å†…æ’å\n        mpg_pct = mpg / max(mpg) # ç»„å†…ç™¾åˆ†æ¯”\n    ) %&gt;%\n    select(car, cyl, mpg, mpg_rank, mpg_pct)\n\n# A tibble: 32 Ã— 5\n# Groups:   cyl [3]\n   car                 cyl   mpg mpg_rank mpg_pct\n   &lt;chr&gt;             &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;\n 1 Mazda RX4             6  21        2.5   0.981\n 2 Mazda RX4 Wag         6  21        2.5   0.981\n 3 Datsun 710            4  22.8      8.5   0.673\n 4 Hornet 4 Drive        6  21.4      1     1    \n 5 Hornet Sportabout     8  18.7      2     0.974\n 6 Valiant               6  18.1      6     0.846\n 7 Duster 360            8  14.3     11     0.745\n 8 Merc 240D             4  24.4      7     0.720\n 9 Merc 230              4  22.8      8.5   0.673\n10 Merc 280              6  19.2      5     0.897\n# â„¹ 22 more rows\n\n\n\n\nåˆ†ç»„ç­›é€‰\n\n# æ¯ç»„å–æœ€å¤§å€¼\ndf %&gt;%\n    group_by(cyl) %&gt;%\n    slice_max(mpg, n = 2)\n\n# A tibble: 7 Ã— 12\n# Groups:   cyl [3]\n  car            mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb\n  &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 Toyota Coroâ€¦  33.9     4  71.1    65  4.22  1.84  19.9     1     1     4     1\n2 Fiat 128      32.4     4  78.7    66  4.08  2.2   19.5     1     1     4     1\n3 Hornet 4 Drâ€¦  21.4     6 258     110  3.08  3.22  19.4     1     0     3     1\n4 Mazda RX4     21       6 160     110  3.9   2.62  16.5     0     1     4     4\n5 Mazda RX4 Wâ€¦  21       6 160     110  3.9   2.88  17.0     0     1     4     4\n6 Pontiac Firâ€¦  19.2     8 400     175  3.08  3.84  17.0     0     0     3     2\n7 Hornet Sporâ€¦  18.7     8 360     175  3.15  3.44  17.0     0     0     3     2\n\n# æ¯ç»„å–å‰Nè¡Œ\ndf %&gt;%\n    group_by(cyl) %&gt;%\n    slice_head(n = 3)\n\n# A tibble: 9 Ã— 12\n# Groups:   cyl [3]\n  car            mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb\n  &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 Datsun 710    22.8     4  108     93  3.85  2.32  18.6     1     1     4     1\n2 Merc 240D     24.4     4  147.    62  3.69  3.19  20       1     0     4     2\n3 Merc 230      22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2\n4 Mazda RX4     21       6  160    110  3.9   2.62  16.5     0     1     4     4\n5 Mazda RX4 Wâ€¦  21       6  160    110  3.9   2.88  17.0     0     1     4     4\n6 Hornet 4 Drâ€¦  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1\n7 Hornet Sporâ€¦  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2\n8 Duster 360    14.3     8  360    245  3.21  3.57  15.8     0     0     3     4\n9 Merc 450SE    16.4     8  276.   180  3.07  4.07  17.4     0     0     3     3",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "dplyr/tidyr æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3003-dplyr-tidyr.html#ç¬¬ä¸‰éƒ¨åˆ†è¡¨è¿æ¥join",
    "href": "3003-dplyr-tidyr.html#ç¬¬ä¸‰éƒ¨åˆ†è¡¨è¿æ¥join",
    "title": "dplyr/tidyr æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šè¡¨è¿æ¥ï¼ˆJoinï¼‰",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šè¡¨è¿æ¥ï¼ˆJoinï¼‰\n\n# åˆ›å»ºç¤ºä¾‹æ•°æ®\ncars_info &lt;- tibble(\n    car = c(\"Mazda RX4\", \"Honda Civic\", \"Toyota Corolla\"),\n    country = c(\"æ—¥æœ¬\", \"æ—¥æœ¬\", \"æ—¥æœ¬\"),\n    year = c(1978, 1980, 1979)\n)\n\nprices &lt;- tibble(\n    car = c(\"Mazda RX4\", \"Datsun 710\", \"Honda Civic\"),\n    price = c(25000, 18000, 15000)\n)\n\n\nleft_join() - å·¦è¿æ¥\n\n# ä¿ç•™å·¦è¡¨æ‰€æœ‰è¡Œ\ndf %&gt;%\n    select(car, mpg, hp) %&gt;%\n    left_join(cars_info, by = \"car\")\n\n# A tibble: 32 Ã— 5\n   car                 mpg    hp country  year\n   &lt;chr&gt;             &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;\n 1 Mazda RX4          21     110 æ—¥æœ¬     1978\n 2 Mazda RX4 Wag      21     110 &lt;NA&gt;       NA\n 3 Datsun 710         22.8    93 &lt;NA&gt;       NA\n 4 Hornet 4 Drive     21.4   110 &lt;NA&gt;       NA\n 5 Hornet Sportabout  18.7   175 &lt;NA&gt;       NA\n 6 Valiant            18.1   105 &lt;NA&gt;       NA\n 7 Duster 360         14.3   245 &lt;NA&gt;       NA\n 8 Merc 240D          24.4    62 &lt;NA&gt;       NA\n 9 Merc 230           22.8    95 &lt;NA&gt;       NA\n10 Merc 280           19.2   123 &lt;NA&gt;       NA\n# â„¹ 22 more rows\n\n\n\n\ninner_join() - å†…è¿æ¥\n\n# åªä¿ç•™åŒ¹é…è¡Œ\ndf %&gt;%\n    select(car, mpg) %&gt;%\n    inner_join(prices, by = \"car\")\n\n# A tibble: 3 Ã— 3\n  car           mpg price\n  &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;\n1 Mazda RX4    21   25000\n2 Datsun 710   22.8 18000\n3 Honda Civic  30.4 15000\n\n\n\n\nfull_join() - å…¨è¿æ¥\n\n# ä¿ç•™æ‰€æœ‰è¡Œ\ncars_info %&gt;% full_join(prices, by = \"car\")\n\n# A tibble: 4 Ã— 4\n  car            country  year price\n  &lt;chr&gt;          &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;\n1 Mazda RX4      æ—¥æœ¬     1978 25000\n2 Honda Civic    æ—¥æœ¬     1980 15000\n3 Toyota Corolla æ—¥æœ¬     1979    NA\n4 Datsun 710     &lt;NA&gt;       NA 18000\n\n\n\n\nanti_join() - åè¿æ¥\n\n# ä¿ç•™ä¸åŒ¹é…çš„è¡Œ\ndf %&gt;%\n    select(car, mpg) %&gt;%\n    anti_join(prices, by = \"car\") %&gt;%\n    head()\n\n# A tibble: 6 Ã— 2\n  car                 mpg\n  &lt;chr&gt;             &lt;dbl&gt;\n1 Mazda RX4 Wag      21  \n2 Hornet 4 Drive     21.4\n3 Hornet Sportabout  18.7\n4 Valiant            18.1\n5 Duster 360         14.3\n6 Merc 240D          24.4",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "dplyr/tidyr æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3003-dplyr-tidyr.html#ç¬¬å››éƒ¨åˆ†tidyr-æ•°æ®æ•´å½¢",
    "href": "3003-dplyr-tidyr.html#ç¬¬å››éƒ¨åˆ†tidyr-æ•°æ®æ•´å½¢",
    "title": "dplyr/tidyr æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼štidyr æ•°æ®æ•´å½¢",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼štidyr æ•°æ®æ•´å½¢\n\npivot_longer() - å®½è½¬é•¿\n\n# åˆ›å»ºå®½æ ¼å¼æ•°æ®\nwide_data &lt;- tibble(\n    id = 1:3,\n    time1 = c(10, 15, 12),\n    time2 = c(12, 18, 14),\n    time3 = c(14, 20, 16)\n)\nwide_data\n\n# A tibble: 3 Ã— 4\n     id time1 time2 time3\n  &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1     1    10    12    14\n2     2    15    18    20\n3     3    12    14    16\n\n\n\n# è½¬ä¸ºé•¿æ ¼å¼\nlong_data &lt;- wide_data %&gt;%\n    pivot_longer(\n        cols = starts_with(\"time\"),\n        names_to = \"time\",\n        values_to = \"value\"\n    )\nlong_data\n\n# A tibble: 9 Ã— 3\n     id time  value\n  &lt;int&gt; &lt;chr&gt; &lt;dbl&gt;\n1     1 time1    10\n2     1 time2    12\n3     1 time3    14\n4     2 time1    15\n5     2 time2    18\n6     2 time3    20\n7     3 time1    12\n8     3 time2    14\n9     3 time3    16\n\n\n\n\npivot_wider() - é•¿è½¬å®½\n\n# è½¬å›å®½æ ¼å¼\nlong_data %&gt;%\n    pivot_wider(\n        names_from = time,\n        values_from = value\n    )\n\n# A tibble: 3 Ã— 4\n     id time1 time2 time3\n  &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1     1    10    12    14\n2     2    15    18    20\n3     3    12    14    16\n\n\n\n\nseparate() - æ‹†åˆ†åˆ—\n\n# æ‹†åˆ†æ—¥æœŸ\ndates &lt;- tibble(\n    id = 1:3,\n    date = c(\"2024-01-15\", \"2024-02-20\", \"2024-03-25\")\n)\n\ndates %&gt;%\n    separate(date, into = c(\"year\", \"month\", \"day\"), sep = \"-\")\n\n# A tibble: 3 Ã— 4\n     id year  month day  \n  &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;\n1     1 2024  01    15   \n2     2 2024  02    20   \n3     3 2024  03    25   \n\n\n\n\nunite() - åˆå¹¶åˆ—\n\n# åˆå¹¶åˆ—\ntibble(\n    year = c(2024, 2024, 2024),\n    month = c(1, 2, 3),\n    day = c(15, 20, 25)\n) %&gt;%\n    unite(\"date\", year:day, sep = \"-\")\n\n# A tibble: 3 Ã— 1\n  date     \n  &lt;chr&gt;    \n1 2024-1-15\n2 2024-2-20\n3 2024-3-25\n\n\n\n\nnest()/unnest() - åµŒå¥—\n\n# åµŒå¥—æ•°æ®æ¡†\nnested &lt;- df %&gt;%\n    group_by(cyl) %&gt;%\n    nest()\n\nnested\n\n# A tibble: 3 Ã— 2\n# Groups:   cyl [3]\n    cyl data              \n  &lt;dbl&gt; &lt;list&gt;            \n1     6 &lt;tibble [7 Ã— 11]&gt; \n2     4 &lt;tibble [11 Ã— 11]&gt;\n3     8 &lt;tibble [14 Ã— 11]&gt;\n\n\n\n# å±•å¼€åµŒå¥—\nnested %&gt;% unnest(data)\n\n# A tibble: 32 Ã— 12\n# Groups:   cyl [3]\n     cyl car           mpg  disp    hp  drat    wt  qsec    vs    am  gear  carb\n   &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1     6 Mazda RX4    21    160    110  3.9   2.62  16.5     0     1     4     4\n 2     6 Mazda RX4 â€¦  21    160    110  3.9   2.88  17.0     0     1     4     4\n 3     6 Hornet 4 Dâ€¦  21.4  258    110  3.08  3.22  19.4     1     0     3     1\n 4     6 Valiant      18.1  225    105  2.76  3.46  20.2     1     0     3     1\n 5     6 Merc 280     19.2  168.   123  3.92  3.44  18.3     1     0     4     4\n 6     6 Merc 280C    17.8  168.   123  3.92  3.44  18.9     1     0     4     4\n 7     6 Ferrari Diâ€¦  19.7  145    175  3.62  2.77  15.5     0     1     5     6\n 8     4 Datsun 710   22.8  108     93  3.85  2.32  18.6     1     1     4     1\n 9     4 Merc 240D    24.4  147.    62  3.69  3.19  20       1     0     4     2\n10     4 Merc 230     22.8  141.    95  3.92  3.15  22.9     1     0     4     2\n# â„¹ 22 more rows",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "dplyr/tidyr æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3003-dplyr-tidyr.html#ç¬¬äº”éƒ¨åˆ†å®ç”¨æŠ€å·§",
    "href": "3003-dplyr-tidyr.html#ç¬¬äº”éƒ¨åˆ†å®ç”¨æŠ€å·§",
    "title": "dplyr/tidyr æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šå®ç”¨æŠ€å·§",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šå®ç”¨æŠ€å·§\n\nè·¨åˆ—æ“ä½œ across()\n\n# æ‰¹é‡æ ‡å‡†åŒ–\ndf %&gt;%\n    mutate(across(\n        where(is.numeric),\n        ~ (. - mean(.)) / sd(.)\n    )) %&gt;%\n    select(car, mpg, hp, wt)\n\n# A tibble: 32 Ã— 4\n   car                  mpg     hp       wt\n   &lt;chr&gt;              &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;\n 1 Mazda RX4          0.151 -0.535 -0.610  \n 2 Mazda RX4 Wag      0.151 -0.535 -0.350  \n 3 Datsun 710         0.450 -0.783 -0.917  \n 4 Hornet 4 Drive     0.217 -0.535 -0.00230\n 5 Hornet Sportabout -0.231  0.413  0.228  \n 6 Valiant           -0.330 -0.608  0.248  \n 7 Duster 360        -0.961  1.43   0.361  \n 8 Merc 240D          0.715 -1.24  -0.0278 \n 9 Merc 230           0.450 -0.754 -0.0687 \n10 Merc 280          -0.148 -0.345  0.228  \n# â„¹ 22 more rows\n\n\n\n\nè¡Œæ“ä½œ rowwise()\n\n# è¡Œæ–¹å‘è®¡ç®—\ndf %&gt;%\n    rowwise() %&gt;%\n    mutate(row_mean = mean(c(mpg, hp, wt))) %&gt;%\n    select(car, mpg, hp, wt, row_mean)\n\n# A tibble: 32 Ã— 5\n# Rowwise: \n   car                 mpg    hp    wt row_mean\n   &lt;chr&gt;             &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;\n 1 Mazda RX4          21     110  2.62     44.5\n 2 Mazda RX4 Wag      21     110  2.88     44.6\n 3 Datsun 710         22.8    93  2.32     39.4\n 4 Hornet 4 Drive     21.4   110  3.22     44.9\n 5 Hornet Sportabout  18.7   175  3.44     65.7\n 6 Valiant            18.1   105  3.46     42.2\n 7 Duster 360         14.3   245  3.57     87.6\n 8 Merc 240D          24.4    62  3.19     29.9\n 9 Merc 230           22.8    95  3.15     40.3\n10 Merc 280           19.2   123  3.44     48.5\n# â„¹ 22 more rows\n\n\n\n\nè®¡æ•°ä¸å»é‡\n\n# è®¡æ•°\ndf %&gt;% count(cyl, sort = TRUE)\n\n# A tibble: 3 Ã— 2\n    cyl     n\n  &lt;dbl&gt; &lt;int&gt;\n1     8    14\n2     4    11\n3     6     7\n\n# å»é‡\ndf %&gt;% distinct(cyl, am)\n\n# A tibble: 6 Ã— 2\n    cyl    am\n  &lt;dbl&gt; &lt;dbl&gt;\n1     6     1\n2     4     1\n3     6     0\n4     8     0\n5     4     0\n6     8     1\n\n\n\n\nç¼ºå¤±å€¼å¤„ç†\n\n# åˆ é™¤å«NAè¡Œ\ndf %&gt;% drop_na()\n\n# A tibble: 32 Ã— 12\n   car           mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb\n   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1 Mazda RX4    21       6  160    110  3.9   2.62  16.5     0     1     4     4\n 2 Mazda RX4 â€¦  21       6  160    110  3.9   2.88  17.0     0     1     4     4\n 3 Datsun 710   22.8     4  108     93  3.85  2.32  18.6     1     1     4     1\n 4 Hornet 4 Dâ€¦  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1\n 5 Hornet Spoâ€¦  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2\n 6 Valiant      18.1     6  225    105  2.76  3.46  20.2     1     0     3     1\n 7 Duster 360   14.3     8  360    245  3.21  3.57  15.8     0     0     3     4\n 8 Merc 240D    24.4     4  147.    62  3.69  3.19  20       1     0     4     2\n 9 Merc 230     22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2\n10 Merc 280     19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4\n# â„¹ 22 more rows\n\n# å¡«å……NA\ndf %&gt;% replace_na(list(mpg = 0, hp = 0))\n\n# A tibble: 32 Ã— 12\n   car           mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb\n   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1 Mazda RX4    21       6  160    110  3.9   2.62  16.5     0     1     4     4\n 2 Mazda RX4 â€¦  21       6  160    110  3.9   2.88  17.0     0     1     4     4\n 3 Datsun 710   22.8     4  108     93  3.85  2.32  18.6     1     1     4     1\n 4 Hornet 4 Dâ€¦  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1\n 5 Hornet Spoâ€¦  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2\n 6 Valiant      18.1     6  225    105  2.76  3.46  20.2     1     0     3     1\n 7 Duster 360   14.3     8  360    245  3.21  3.57  15.8     0     0     3     4\n 8 Merc 240D    24.4     4  147.    62  3.69  3.19  20       1     0     4     2\n 9 Merc 230     22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2\n10 Merc 280     19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4\n# â„¹ 22 more rows\n\n# ç”¨å‰å€¼å¡«å……\ntibble(x = c(1, NA, NA, 4)) %&gt;%\n    fill(x, .direction = \"down\")\n\n# A tibble: 4 Ã— 1\n      x\n  &lt;dbl&gt;\n1     1\n2     1\n3     1\n4     4",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "dplyr/tidyr æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3003-dplyr-tidyr.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "3003-dplyr-tidyr.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "dplyr/tidyr æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# ç­›é€‰\ndf %&gt;% filter(æ¡ä»¶)\ndf %&gt;% filter(x &gt; 10, y == \"A\")\ndf %&gt;% filter(x %in% c(1, 2, 3))\n\n# é€‰æ‹©\ndf %&gt;% select(col1, col2)\ndf %&gt;% select(-col)\ndf %&gt;% select(where(is.numeric))\n\n# ä¿®æ”¹\ndf %&gt;% mutate(new_col = è®¡ç®—)\ndf %&gt;% mutate(across(cols, fun))\n\n# æ±‡æ€»\ndf %&gt;%\n    group_by(group) %&gt;%\n    summarise(mean = mean(x))\n\n# æ’åº\ndf %&gt;% arrange(desc(col))\n\n# è¿æ¥\nleft_join(df1, df2, by = \"key\")\ninner_join(df1, df2, by = c(\"a\" = \"b\"))\n\n# æ•´å½¢\npivot_longer(cols, names_to, values_to)\npivot_wider(names_from, values_from)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "dplyr/tidyr æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3003-dplyr-tidyr.html#å°ç»“",
    "href": "3003-dplyr-tidyr.html#å°ç»“",
    "title": "dplyr/tidyr æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å°ç»“",
    "text": "å°ç»“\ndplyr/tidyr æ ¸å¿ƒä»·å€¼ï¼š\n\nåŠ¨è¯å³å‡½æ•°ï¼šfilter, select, mutate, arrange, summarise\nç®¡é“æµç•…ï¼š%&gt;% è¿æ¥æ“ä½œ\nåˆ†ç»„å¼ºå¤§ï¼šgroup_by + ä»»æ„æ“ä½œ\nè¿æ¥å®Œå¤‡ï¼šleft/right/inner/full/anti join\næ•´å½¢è‡ªå¦‚ï¼špivot_longer/wider",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "dplyr/tidyr æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3003-dplyr-tidyr.html#å‚è€ƒèµ„æº",
    "href": "3003-dplyr-tidyr.html#å‚è€ƒèµ„æº",
    "title": "dplyr/tidyr æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\ndplyr å®˜æ–¹æ–‡æ¡£\ntidyr å®˜æ–¹æ–‡æ¡£\nR for Data Science",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "dplyr/tidyr æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3001-imports.html",
    "href": "3001-imports.html",
    "title": "Rè¯­è¨€æ‰¹é‡å¯¼å…¥æ•°æ®",
    "section": "",
    "text": "ä»¥å…¬å¼€æ•°æ®åº“CHRALSä¸ºä¾‹\nåœ¨æ–‡ä»¶å¤¹ä¸‹æœ‰10ä¸ªdtaæ–‡ä»¶ï¼Œæ–‡ä»¶åå„ä¸ä¸€è‡´ã€‚å¦‚ä½•å°†æ‰€æœ‰æ–‡ä»¶å¯¼å…¥ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Ÿ\n\n\n\n\nlibrary(bruceR)\nlibrary(purrr)\nrm(list = ls())\n# set_wd() # è‡ªåŠ¨æ„å»ºæ—¶æ— éœ€è®¾ç½®å·¥ä½œè·¯å¾„\n\n\n\n\n\nfiles &lt;- \n    fs::dir_ls(\"01-attch\\\\10\\\\CHARLS\", \n                   recurse = TRUE,\n                    glob = \"*.dta\")\n\nprint(files)\n\n01-attch/10/CHARLS/COVID_Module.dta\n01-attch/10/CHARLS/Demographic_Background.dta\n01-attch/10/CHARLS/Exit_Module.dta\n01-attch/10/CHARLS/Family_Information.dta\n01-attch/10/CHARLS/Health_Status_and_Functioning.dta\n01-attch/10/CHARLS/Household_Income.dta\n01-attch/10/CHARLS/Individual_Income.dta\n01-attch/10/CHARLS/Sample_Infor.dta\n01-attch/10/CHARLS/Weights.dta\n01-attch/10/CHARLS/Work_Retirement.dta\n\n\n\n\n\n\ndata_list &lt;- files |&gt; \n    map(\\(filename)\n    {import(file=filename)})\n\nå¯ä»¥çœ‹åˆ°å·²ç»å¯¼å…¥æˆåŠŸ \n\n\n\n\ndata_list_neat &lt;- set_names(\n    data_list,\n    files |&gt; \n        map(\\(str)\n        {str_remove(str, \n        \"01-attch/10/CHARLS/\")})\n)\n\nå¯ä»¥çœ‹åˆ°åˆ—è¡¨æ¯ä¸ªå…ƒç´ åä¹Ÿè§„èŒƒäº†",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "æ•°æ®å¯¼å…¥å¯¼å‡º"
    ]
  },
  {
    "objectID": "3001-imports.html#æ‰¹é‡å¯¼å…¥æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ•°æ®æ–‡ä»¶",
    "href": "3001-imports.html#æ‰¹é‡å¯¼å…¥æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ•°æ®æ–‡ä»¶",
    "title": "Rè¯­è¨€æ‰¹é‡å¯¼å…¥æ•°æ®",
    "section": "",
    "text": "ä»¥å…¬å¼€æ•°æ®åº“CHRALSä¸ºä¾‹\nåœ¨æ–‡ä»¶å¤¹ä¸‹æœ‰10ä¸ªdtaæ–‡ä»¶ï¼Œæ–‡ä»¶åå„ä¸ä¸€è‡´ã€‚å¦‚ä½•å°†æ‰€æœ‰æ–‡ä»¶å¯¼å…¥ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Ÿ\n\n\n\n\nlibrary(bruceR)\nlibrary(purrr)\nrm(list = ls())\n# set_wd() # è‡ªåŠ¨æ„å»ºæ—¶æ— éœ€è®¾ç½®å·¥ä½œè·¯å¾„\n\n\n\n\n\nfiles &lt;- \n    fs::dir_ls(\"01-attch\\\\10\\\\CHARLS\", \n                   recurse = TRUE,\n                    glob = \"*.dta\")\n\nprint(files)\n\n01-attch/10/CHARLS/COVID_Module.dta\n01-attch/10/CHARLS/Demographic_Background.dta\n01-attch/10/CHARLS/Exit_Module.dta\n01-attch/10/CHARLS/Family_Information.dta\n01-attch/10/CHARLS/Health_Status_and_Functioning.dta\n01-attch/10/CHARLS/Household_Income.dta\n01-attch/10/CHARLS/Individual_Income.dta\n01-attch/10/CHARLS/Sample_Infor.dta\n01-attch/10/CHARLS/Weights.dta\n01-attch/10/CHARLS/Work_Retirement.dta\n\n\n\n\n\n\ndata_list &lt;- files |&gt; \n    map(\\(filename)\n    {import(file=filename)})\n\nå¯ä»¥çœ‹åˆ°å·²ç»å¯¼å…¥æˆåŠŸ \n\n\n\n\ndata_list_neat &lt;- set_names(\n    data_list,\n    files |&gt; \n        map(\\(str)\n        {str_remove(str, \n        \"01-attch/10/CHARLS/\")})\n)\n\nå¯ä»¥çœ‹åˆ°åˆ—è¡¨æ¯ä¸ªå…ƒç´ åä¹Ÿè§„èŒƒäº†",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "æ•°æ®å¯¼å…¥å¯¼å‡º"
    ]
  },
  {
    "objectID": "3001-imports.html#æ‰¹é‡å¯¼å…¥excelä¸‹çš„å¤šä¸ªsheet",
    "href": "3001-imports.html#æ‰¹é‡å¯¼å…¥excelä¸‹çš„å¤šä¸ªsheet",
    "title": "Rè¯­è¨€æ‰¹é‡å¯¼å…¥æ•°æ®",
    "section": "æ‰¹é‡å¯¼å…¥excelä¸‹çš„å¤šä¸ªsheet",
    "text": "æ‰¹é‡å¯¼å…¥excelä¸‹çš„å¤šä¸ªsheet\nç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªexcelæ–‡ä»¶ï¼Œå…¶ä¸­æœ‰å¤šä¸ªsheetï¼Œå¦‚ä½•ä¸€æ¬¡æ€§å¯¼å…¥åˆ°åˆ—è¡¨é‡Œå‘¢ \n\nç¬¬ä¸€æ­¥:æå–sheetå\n\nsheet_names &lt;- readxl::excel_sheets(\n    \"01-attch/10/CHARLS/data.xlsx\"\n)\n\nsheet_names\n\n[1] \"gong\" \"bo\"   \"hong\" \"wan\"  \"he\"  \n\n\n\n\nç¬¬äºŒæ­¥:æ‰¹é‡å¯¼å…¥\n\ndata_list &lt;- \n    sheet_names |&gt;\n    map(\\(var)\n        {import(\n        file='01-attch/10/CHARLS/data.xlsx',\n        sheet = var) \n    }) |&gt; \n    set_names(sheet_names)\n\nNew names:\nNew names:\nNew names:\nNew names:\nNew names:\nâ€¢ `` -&gt; `...1`\n\nstr(data_list)\n\nList of 5\n $ gong:'data.frame':   12 obs. of  9 variables:\n  ..$ ...1: num [1:12] 1 2 3 4 5 6 7 8 9 10 ...\n  ..$ æ¥æº: chr [1:12] \"ç™½äº‘åŒº\" \"ç™½äº‘åŒº\" \"å¤©æ²³åŒº\" \"å¤©æ²³åŒº\" ...\n  ..$ é‡é‡: num [1:12] 0.501 0.502 0.498 0.497 0.499 0.496 0.5 0.503 0.5 0.501 ...\n  ..$ ç¼–å·: chr [1:12] \"1.19â‘£\" \"1.19â‘¨\" \"1.20â‘¦\" \"1.20â‘§\" ...\n  ..$ Cr  : num [1:12] 0.3465 0.1507 0.0616 0.0745 0.7903 ...\n  ..$ As  : num [1:12] 1.87 4.63 9.89 3.43 3.02 ...\n  ..$ Cd  : num [1:12] 0.0262 0.2018 0.4037 0 0.0485 ...\n  ..$ Pb  : num [1:12] 0.0761 0.2169 0.0744 0.131 0.4851 ...\n  ..$ Hg  : num [1:12] 0.1011 0.0577 0.187 0.1879 0.0538 ...\n $ bo  :'data.frame':   12 obs. of  9 variables:\n  ..$ ...1: num [1:12] 1 2 3 4 5 6 7 8 9 10 ...\n  ..$ æ¥æº: chr [1:12] \"ç™½äº‘åŒº\" \"å¤©æ²³åŒº\" \"å¤©æ²³åŒº\" \"å¤©æ²³åŒº\" ...\n  ..$ é‡é‡: num [1:12] 0.501 0.496 0.499 0.504 0.5 ...\n  ..$ ç¼–å·: chr [1:12] \"1.19â‘¢\" \"1.20â‘¨\" \"1.20â‘©\" \"1.21â‘ \" ...\n  ..$ Cr  : num [1:12] 0.0198 0.0384 0.0375 0.7255 1.784 ...\n  ..$ As  : num [1:12] 6.08 2.76 3.1 2.45 3.23 ...\n  ..$ Cd  : num [1:12] 0.0639 0.0788 0.0217 0 0.0549 ...\n  ..$ Pb  : num [1:12] 0.2474 0.0799 0.0743 0.0906 0.0836 ...\n  ..$ Hg  : num [1:12] 0.0362 0.0671 0.0383 0.0527 0.0442 ...\n $ hong:'data.frame':   12 obs. of  9 variables:\n  ..$ ...1: num [1:12] 1 2 3 4 5 6 7 8 9 10 ...\n  ..$ æ¥æº: chr [1:12] \"ç™½äº‘åŒº\" \"ç™½äº‘åŒº\" \"å¤©æ²³åŒº\" \"è¶Šç§€åŒº\" ...\n  ..$ é‡é‡: num [1:12] 0.496 0.498 0.499 0.5 0.501 ...\n  ..$ ç¼–å·: chr [1:12] \"1.17â‘¡\" \"1.17â‘£\" \"1.20â‘¥\" \"1.21â‘©\" ...\n  ..$ Cr  : num [1:12] 1.283 0.636 0.233 1.073 0.979 ...\n  ..$ As  : num [1:12] 5.57 2.56 2.15 4.8 3.21 ...\n  ..$ Cd  : num [1:12] 0.1119 0.0241 0.0224 0 0 ...\n  ..$ Pb  : num [1:12] 0.157 0.0256 0.0745 0.1524 0.356 ...\n  ..$ Hg  : num [1:12] 0.37 0.184 1.375 1.49 0.469 ...\n $ wan :'data.frame':   12 obs. of  9 variables:\n  ..$ ...1: num [1:12] 1 2 3 4 5 6 7 8 9 10 ...\n  ..$ æ¥æº: chr [1:12] \"ç™½äº‘åŒº\" \"ç™½äº‘åŒº\" \"è¶Šç§€åŒº\" \"è¶Šç§€åŒº\" ...\n  ..$ é‡é‡: num [1:12] 0.497 0.498 0.493 0.499 0.498 ...\n  ..$ ç¼–å·: chr [1:12] \"1.23â‘¦\" \"1.23â‘§\" \"1.21â‘¤\" \"1.21â‘¥\" ...\n  ..$ Cr  : num [1:12] 4.011 4.461 0.899 0.816 0.326 ...\n  ..$ As  : num [1:12] 0.0396 0.0934 0 0 1.4307 ...\n  ..$ Cd  : num [1:12] 0 0 0 0 0 0 0 0 0 0 ...\n  ..$ Pb  : num [1:12] 0 0.5965 0.0808 0.0878 0 ...\n  ..$ Hg  : num [1:12] 0.0066 0.017 0.062 0.0196 0.0404 0.0559 0.0074 0.0437 0.0177 0.0122 ...\n $ he  :'data.frame':   12 obs. of  9 variables:\n  ..$ ...1: num [1:12] 1 2 3 4 5 6 7 8 9 10 ...\n  ..$ æ¥æº: chr [1:12] \"ç™½äº‘åŒº\" \"ç™½äº‘åŒº\" \"å¤©æ²³åŒº\" \"è¶Šç§€åŒº\" ...\n  ..$ é‡é‡: num [1:12] 0.497 0.497 0.5 0.501 0.501 0.5 0.502 0.502 0.497 0.501 ...\n  ..$ ç¼–å·: chr [1:12] \"1.19â‘¡\" \"1.23â‘¨\" \"1.20â‘¤\" \"1.21â‘£\" ...\n  ..$ Cr  : num [1:12] 0 3.746 0.221 1.027 3.893 ...\n  ..$ As  : num [1:12] 0.908 3.099 0.935 0.896 2.939 ...\n  ..$ Cd  : num [1:12] 0.0115 0.0884 0.0395 0 0.1448 ...\n  ..$ Pb  : num [1:12] 0.065 1.545 0.845 0.125 0.226 ...\n  ..$ Hg  : num [1:12] 0.3371 0.0898 0.1123 0.1392 0.1663 ...",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "æ•°æ®å¯¼å…¥å¯¼å‡º"
    ]
  },
  {
    "objectID": "3001-imports.html#å°¾è¯­",
    "href": "3001-imports.html#å°¾è¯­",
    "title": "Rè¯­è¨€æ‰¹é‡å¯¼å…¥æ•°æ®",
    "section": "å°¾è¯­",
    "text": "å°¾è¯­\næœ¬æœŸä¸»è¦ä½¿ç”¨äº†bruceRåŒ…å’ŒpurrråŒ…ï¼ŒåŸºæœ¬å¯ä»¥æ»¡è¶³æ—¥å¸¸æ•°æ®å¯¼å…¥çš„æ‰€æœ‰éœ€æ±‚ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "æ•°æ®å¯¼å…¥å¯¼å‡º"
    ]
  },
  {
    "objectID": "2048-bindpeakvalley.html",
    "href": "2048-bindpeakvalley.html",
    "title": "Rè¯­è¨€æ—¶åºå³°è°·æ ‡è®°å›¾ç»˜åˆ¶",
    "section": "",
    "text": "å³°è°·æ ‡è®°å›¾åœ¨æ—¶é—´åºåˆ—ä¸Šè‡ªåŠ¨æ£€æµ‹å¹¶æ ‡æ³¨å±€éƒ¨æœ€å¤§å€¼ï¼ˆå³°ï¼‰å’Œæœ€å°å€¼ï¼ˆè°·ï¼‰ï¼Œå¸®åŠ©è¯†åˆ«å…³é”®è½¬æŠ˜ç‚¹ã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\nè‚¡ç¥¨åˆ†æ\nä¹°å–æ—¶æœºè¯†åˆ«\n\n\nä¸šåŠ¡å‘¨æœŸ\nå­£èŠ‚æ€§é«˜ä½ç‚¹\n\n\nè¶‹åŠ¿åˆ†æ\nå…³é”®è½¬æŠ˜ç‚¹æ ‡è®°",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æ—¶åºå³°è°·æ ‡è®°å›¾"
    ]
  },
  {
    "objectID": "2048-bindpeakvalley.html#ä»€ä¹ˆæ˜¯å³°è°·æ ‡è®°å›¾",
    "href": "2048-bindpeakvalley.html#ä»€ä¹ˆæ˜¯å³°è°·æ ‡è®°å›¾",
    "title": "Rè¯­è¨€æ—¶åºå³°è°·æ ‡è®°å›¾ç»˜åˆ¶",
    "section": "",
    "text": "å³°è°·æ ‡è®°å›¾åœ¨æ—¶é—´åºåˆ—ä¸Šè‡ªåŠ¨æ£€æµ‹å¹¶æ ‡æ³¨å±€éƒ¨æœ€å¤§å€¼ï¼ˆå³°ï¼‰å’Œæœ€å°å€¼ï¼ˆè°·ï¼‰ï¼Œå¸®åŠ©è¯†åˆ«å…³é”®è½¬æŠ˜ç‚¹ã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\nè‚¡ç¥¨åˆ†æ\nä¹°å–æ—¶æœºè¯†åˆ«\n\n\nä¸šåŠ¡å‘¨æœŸ\nå­£èŠ‚æ€§é«˜ä½ç‚¹\n\n\nè¶‹åŠ¿åˆ†æ\nå…³é”®è½¬æŠ˜ç‚¹æ ‡è®°",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æ—¶åºå³°è°·æ ‡è®°å›¾"
    ]
  },
  {
    "objectID": "2048-bindpeakvalley.html#råŒ…åŠ è½½",
    "href": "2048-bindpeakvalley.html#råŒ…åŠ è½½",
    "title": "Rè¯­è¨€æ—¶åºå³°è°·æ ‡è®°å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\n\nlibrary(ggplot2)\nlibrary(dplyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æ—¶åºå³°è°·æ ‡è®°å›¾"
    ]
  },
  {
    "objectID": "2048-bindpeakvalley.html#å³°è°·æ£€æµ‹å‡½æ•°",
    "href": "2048-bindpeakvalley.html#å³°è°·æ£€æµ‹å‡½æ•°",
    "title": "Rè¯­è¨€æ—¶åºå³°è°·æ ‡è®°å›¾ç»˜åˆ¶",
    "section": "å³°è°·æ£€æµ‹å‡½æ•°",
    "text": "å³°è°·æ£€æµ‹å‡½æ•°\n\n# å®šä¹‰å³°è°·æ£€æµ‹å‡½æ•°\nfind_peaks &lt;- function(x, threshold = 1) {\n    n &lt;- length(x)\n    peaks &lt;- rep(FALSE, n)\n    for (i in (threshold + 1):(n - threshold)) {\n        if (all(x[i] &gt; x[(i - threshold):(i - 1)]) &&\n            all(x[i] &gt; x[(i + 1):(i + threshold)])) {\n            peaks[i] &lt;- TRUE\n        }\n    }\n    peaks\n}\n\nfind_valleys &lt;- function(x, threshold = 1) {\n    n &lt;- length(x)\n    valleys &lt;- rep(FALSE, n)\n    for (i in (threshold + 1):(n - threshold)) {\n        if (all(x[i] &lt; x[(i - threshold):(i - 1)]) &&\n            all(x[i] &lt; x[(i + 1):(i + threshold)])) {\n            valleys[i] &lt;- TRUE\n        }\n    }\n    valleys\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æ—¶åºå³°è°·æ ‡è®°å›¾"
    ]
  },
  {
    "objectID": "2048-bindpeakvalley.html#åŸºç¡€å³°è°·æ ‡è®°",
    "href": "2048-bindpeakvalley.html#åŸºç¡€å³°è°·æ ‡è®°",
    "title": "Rè¯­è¨€æ—¶åºå³°è°·æ ‡è®°å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€å³°è°·æ ‡è®°",
    "text": "åŸºç¡€å³°è°·æ ‡è®°\n\n# åˆ›å»ºæ—¶åºæ•°æ®\nset.seed(42)\nts_data &lt;- data.frame(\n    date = seq(as.Date(\"2023-01-01\"), by = \"week\", length.out = 52),\n    value = 100 + cumsum(rnorm(52, 0, 5)) + sin(1:52 / 4) * 15\n)\n\n# æ£€æµ‹å³°è°·\nts_data &lt;- ts_data %&gt;%\n    mutate(\n        is_peak = find_peaks(value, threshold = 2),\n        is_valley = find_valleys(value, threshold = 2)\n    )\n\nggplot(ts_data, aes(x = date, y = value)) +\n    geom_line(color = \"#4f46e5\", linewidth = 1) +\n    # æ ‡è®°å³°\n    geom_point(\n        data = filter(ts_data, is_peak),\n        color = \"#10b981\", size = 4, shape = 17\n    ) +\n    # æ ‡è®°è°·\n    geom_point(\n        data = filter(ts_data, is_valley),\n        color = \"#ef4444\", size = 4, shape = 25, fill = \"#ef4444\"\n    ) +\n    labs(\n        title = \"æ—¶åºå³°è°·æ ‡è®°å›¾\",\n        subtitle = \"â–² å³°å€¼  â–¼ è°·å€¼\",\n        x = NULL, y = \"æ•°å€¼\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(plot.title = element_text(face = \"bold\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æ—¶åºå³°è°·æ ‡è®°å›¾"
    ]
  },
  {
    "objectID": "2048-bindpeakvalley.html#å¸¦æ ‡ç­¾çš„å³°è°·",
    "href": "2048-bindpeakvalley.html#å¸¦æ ‡ç­¾çš„å³°è°·",
    "title": "Rè¯­è¨€æ—¶åºå³°è°·æ ‡è®°å›¾ç»˜åˆ¶",
    "section": "å¸¦æ ‡ç­¾çš„å³°è°·",
    "text": "å¸¦æ ‡ç­¾çš„å³°è°·\n\nlibrary(ggrepel)\n\nggplot(ts_data, aes(x = date, y = value)) +\n    geom_line(color = \"#4f46e5\", linewidth = 1) +\n    geom_point(\n        data = filter(ts_data, is_peak),\n        color = \"#10b981\", size = 3\n    ) +\n    geom_point(\n        data = filter(ts_data, is_valley),\n        color = \"#ef4444\", size = 3\n    ) +\n    geom_text_repel(\n        data = filter(ts_data, is_peak | is_valley),\n        aes(label = round(value, 1), color = is_peak),\n        size = 3, fontface = \"bold\"\n    ) +\n    scale_color_manual(values = c(\"TRUE\" = \"#10b981\", \"FALSE\" = \"#ef4444\")) +\n    labs(\n        title = \"å¸¦æ•°å€¼æ ‡ç­¾çš„å³°è°·å›¾\",\n        x = NULL, y = \"æ•°å€¼\"\n    ) +\n    theme_minimal() +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"none\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æ—¶åºå³°è°·æ ‡è®°å›¾"
    ]
  },
  {
    "objectID": "2048-bindpeakvalley.html#æ€»ç»“",
    "href": "2048-bindpeakvalley.html#æ€»ç»“",
    "title": "Rè¯­è¨€æ—¶åºå³°è°·æ ‡è®°å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\næŠ€å·§\nè¯´æ˜\n\n\n\n\nå³°æ£€æµ‹\næ¯”ç›¸é‚»ç‚¹éƒ½é«˜\n\n\nè°·æ£€æµ‹\næ¯”ç›¸é‚»ç‚¹éƒ½ä½\n\n\nthreshold\næ§åˆ¶æ£€æµ‹çµæ•åº¦\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\næŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—\né¢ç§¯å›¾",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æ—¶åºå³°è°·æ ‡è®°å›¾"
    ]
  },
  {
    "objectID": "2046-bindwaterfall.html",
    "href": "2046-bindwaterfall.html",
    "title": "Rè¯­è¨€ç€‘å¸ƒå›¾ç»˜åˆ¶",
    "section": "",
    "text": "ç€‘å¸ƒå›¾ï¼ˆWaterfall Chartï¼‰å±•ç¤ºæ•°å€¼çš„ç´¯ç§¯å¢å‡è¿‡ç¨‹ï¼Œç”¨æ‚¬æµ®æŸ±çŠ¶å›¾è¡¨ç¤ºå„é¡¹å˜åŒ–å¯¹æ€»ä½“çš„è´¡çŒ®ï¼Œå¸¸ç”¨äºè´¢åŠ¡åˆ†æã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\nè´¢åŠ¡åˆ†æ\næ”¶å…¥â†’æˆæœ¬â†’åˆ©æ¶¦åˆ†è§£\n\n\né”€å”®å½’å› \nå„æ¸ é“è´¡çŒ®\n\n\né¢„ç®—å·®å¼‚\nå®é™…vsé¢„ç®—å·®å¼‚åˆ†è§£",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "ç€‘å¸ƒå›¾"
    ]
  },
  {
    "objectID": "2046-bindwaterfall.html#ä»€ä¹ˆæ˜¯ç€‘å¸ƒå›¾",
    "href": "2046-bindwaterfall.html#ä»€ä¹ˆæ˜¯ç€‘å¸ƒå›¾",
    "title": "Rè¯­è¨€ç€‘å¸ƒå›¾ç»˜åˆ¶",
    "section": "",
    "text": "ç€‘å¸ƒå›¾ï¼ˆWaterfall Chartï¼‰å±•ç¤ºæ•°å€¼çš„ç´¯ç§¯å¢å‡è¿‡ç¨‹ï¼Œç”¨æ‚¬æµ®æŸ±çŠ¶å›¾è¡¨ç¤ºå„é¡¹å˜åŒ–å¯¹æ€»ä½“çš„è´¡çŒ®ï¼Œå¸¸ç”¨äºè´¢åŠ¡åˆ†æã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\nè´¢åŠ¡åˆ†æ\næ”¶å…¥â†’æˆæœ¬â†’åˆ©æ¶¦åˆ†è§£\n\n\né”€å”®å½’å› \nå„æ¸ é“è´¡çŒ®\n\n\né¢„ç®—å·®å¼‚\nå®é™…vsé¢„ç®—å·®å¼‚åˆ†è§£",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "ç€‘å¸ƒå›¾"
    ]
  },
  {
    "objectID": "2046-bindwaterfall.html#råŒ…åŠ è½½",
    "href": "2046-bindwaterfall.html#råŒ…åŠ è½½",
    "title": "Rè¯­è¨€ç€‘å¸ƒå›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\n\nlibrary(ggplot2)\nlibrary(dplyr)\n\n# ç€‘å¸ƒå›¾åŒ…\n# install.packages(\"waterfalls\")\nlibrary(waterfalls)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "ç€‘å¸ƒå›¾"
    ]
  },
  {
    "objectID": "2046-bindwaterfall.html#åŸºç¡€ç€‘å¸ƒå›¾",
    "href": "2046-bindwaterfall.html#åŸºç¡€ç€‘å¸ƒå›¾",
    "title": "Rè¯­è¨€ç€‘å¸ƒå›¾ç»˜åˆ¶",
    "section": "åŸºç¡€ç€‘å¸ƒå›¾",
    "text": "åŸºç¡€ç€‘å¸ƒå›¾\n\n# è´¢åŠ¡æ•°æ®\nfinance_data &lt;- data.frame(\n    category = c(\"æœŸåˆä½™é¢\", \"äº§å“é”€å”®\", \"æœåŠ¡æ”¶å…¥\", \"è¿è¥æˆæœ¬\", \"äººåŠ›æˆæœ¬\", \"ç¨è´¹\", \"æœŸæœ«ä½™é¢\"),\n    value = c(1000, 500, 200, -300, -250, -50, NA)\n)\n\n# è®¡ç®—æœŸæœ«ä½™é¢\nfinance_data$value[7] &lt;- sum(finance_data$value, na.rm = TRUE)\n\n# ä½¿ç”¨waterfallsåŒ…\nwaterfall(finance_data,\n    calc_total = TRUE,\n    total_rect_color = \"#4f46e5\",\n    total_rect_text_color = \"white\",\n    fill_by_sign = TRUE,\n    fill_colours = c(\"æ­£\" = \"#10b981\", \"è´Ÿ\" = \"#ef4444\")\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "ç€‘å¸ƒå›¾"
    ]
  },
  {
    "objectID": "2046-bindwaterfall.html#æ‰‹åŠ¨æ„å»ºç€‘å¸ƒå›¾",
    "href": "2046-bindwaterfall.html#æ‰‹åŠ¨æ„å»ºç€‘å¸ƒå›¾",
    "title": "Rè¯­è¨€ç€‘å¸ƒå›¾ç»˜åˆ¶",
    "section": "æ‰‹åŠ¨æ„å»ºç€‘å¸ƒå›¾",
    "text": "æ‰‹åŠ¨æ„å»ºç€‘å¸ƒå›¾\n\n# è®¡ç®—ç´¯ç§¯ä½ç½®\nwaterfall_data &lt;- finance_data %&gt;%\n    mutate(\n        is_total = category == \"æœŸæœ«ä½™é¢\",\n        type = case_when(\n            is_total ~ \"æ€»è®¡\",\n            value &gt;= 0 ~ \"å¢åŠ \",\n            TRUE ~ \"å‡å°‘\"\n        ),\n        end = cumsum(ifelse(is.na(value), 0, value)),\n        end = ifelse(is_total, value, end),\n        start = lag(end, default = 0),\n        start = ifelse(is_total, 0, start),\n        id = row_number()\n    )\n\nggplot(waterfall_data, aes(x = reorder(category, id))) +\n    geom_rect(aes(\n        xmin = id - 0.4, xmax = id + 0.4,\n        ymin = start, ymax = end,\n        fill = type\n    )) +\n    # è¿æ¥çº¿\n    geom_segment(\n        data = waterfall_data %&gt;% filter(!is_total),\n        aes(x = id + 0.4, xend = id + 1 - 0.4, y = end, yend = end),\n        linetype = \"dashed\", color = \"gray50\"\n    ) +\n    # æ•°å€¼æ ‡ç­¾\n    geom_text(aes(\n        x = id, y = (start + end) / 2,\n        label = ifelse(value &gt;= 0, paste0(\"+\", value), value)\n    ), color = \"white\", fontface = \"bold\", size = 3.5) +\n    scale_fill_manual(values = c(\"å¢åŠ \" = \"#10b981\", \"å‡å°‘\" = \"#ef4444\", \"æ€»è®¡\" = \"#4f46e5\")) +\n    scale_x_discrete(labels = waterfall_data$category) +\n    labs(\n        title = \"è´¢åŠ¡å˜åŠ¨ç€‘å¸ƒå›¾\",\n        x = NULL, y = \"é‡‘é¢ï¼ˆä¸‡å…ƒï¼‰\", fill = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"top\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "ç€‘å¸ƒå›¾"
    ]
  },
  {
    "objectID": "2046-bindwaterfall.html#æ€»ç»“",
    "href": "2046-bindwaterfall.html#æ€»ç»“",
    "title": "Rè¯­è¨€ç€‘å¸ƒå›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\næŠ€å·§\nè¯´æ˜\n\n\n\n\né¢œè‰²ç¼–ç \nç»¿è‰²å¢åŠ ï¼Œçº¢è‰²å‡å°‘ï¼Œè“è‰²æ€»è®¡\n\n\nè¿æ¥çº¿\nè™šçº¿è¿æ¥ç›¸é‚»æŸ±å­\n\n\nç´¯ç§¯è®¡ç®—\nä½¿ç”¨ cumsum() è®¡ç®—ä½ç½®\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\næŸ±çŠ¶å›¾ä¸é¥¼å›¾\nå‘æ•£å‹å›¾è¡¨",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "ç€‘å¸ƒå›¾"
    ]
  },
  {
    "objectID": "2044-bindcalendar.html",
    "href": "2044-bindcalendar.html",
    "title": "Rè¯­è¨€æ—¥å†çƒ­å›¾ç»˜åˆ¶",
    "section": "",
    "text": "æ—¥å†çƒ­å›¾ï¼ˆCalendar Heatmapï¼‰æŒ‰æ—¥å†æ ¼å¼æ’åˆ—æ•°æ®ï¼Œç”¨é¢œè‰²æ·±æµ…è¡¨ç¤ºæ¯æ—¥æ•°å€¼å¤§å°ï¼Œç±»ä¼¼ GitHub çš„è´¡çŒ®çƒ­å›¾ã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\næ´»åŠ¨è¿½è¸ª\nè¿åŠ¨ã€å­¦ä¹ ã€æäº¤è®°å½•\n\n\né”€å”®æ—¥æŠ¥\næ¯æ—¥é”€å”®é¢çƒ­åŠ›å›¾\n\n\nç½‘ç«™æµé‡\næ¯æ—¥è®¿é—®é‡\n\n\nå¥åº·è®°å½•\næ¯æ—¥æ­¥æ•°ã€ç¡çœ ç­‰",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "æ—¥å†çƒ­å›¾"
    ]
  },
  {
    "objectID": "2044-bindcalendar.html#ä»€ä¹ˆæ˜¯æ—¥å†çƒ­å›¾",
    "href": "2044-bindcalendar.html#ä»€ä¹ˆæ˜¯æ—¥å†çƒ­å›¾",
    "title": "Rè¯­è¨€æ—¥å†çƒ­å›¾ç»˜åˆ¶",
    "section": "",
    "text": "æ—¥å†çƒ­å›¾ï¼ˆCalendar Heatmapï¼‰æŒ‰æ—¥å†æ ¼å¼æ’åˆ—æ•°æ®ï¼Œç”¨é¢œè‰²æ·±æµ…è¡¨ç¤ºæ¯æ—¥æ•°å€¼å¤§å°ï¼Œç±»ä¼¼ GitHub çš„è´¡çŒ®çƒ­å›¾ã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\næ´»åŠ¨è¿½è¸ª\nè¿åŠ¨ã€å­¦ä¹ ã€æäº¤è®°å½•\n\n\né”€å”®æ—¥æŠ¥\næ¯æ—¥é”€å”®é¢çƒ­åŠ›å›¾\n\n\nç½‘ç«™æµé‡\næ¯æ—¥è®¿é—®é‡\n\n\nå¥åº·è®°å½•\næ¯æ—¥æ­¥æ•°ã€ç¡çœ ç­‰",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "æ—¥å†çƒ­å›¾"
    ]
  },
  {
    "objectID": "2044-bindcalendar.html#råŒ…åŠ è½½",
    "href": "2044-bindcalendar.html#råŒ…åŠ è½½",
    "title": "Rè¯­è¨€æ—¥å†çƒ­å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(lubridate)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "æ—¥å†çƒ­å›¾"
    ]
  },
  {
    "objectID": "2044-bindcalendar.html#å‡†å¤‡ç¤ºä¾‹æ•°æ®",
    "href": "2044-bindcalendar.html#å‡†å¤‡ç¤ºä¾‹æ•°æ®",
    "title": "Rè¯­è¨€æ—¥å†çƒ­å›¾ç»˜åˆ¶",
    "section": "å‡†å¤‡ç¤ºä¾‹æ•°æ®",
    "text": "å‡†å¤‡ç¤ºä¾‹æ•°æ®\n\n# ç”Ÿæˆä¸€å¹´çš„æ—¥æœŸå’Œéšæœºå€¼\nset.seed(42)\ncalendar_data &lt;- data.frame(\n    date = seq(as.Date(\"2023-01-01\"), as.Date(\"2023-12-31\"), by = \"day\")\n) %&gt;%\n    mutate(\n        value = round(runif(n(), 0, 100)),\n        week = week(date),\n        weekday = wday(date, label = TRUE, abbr = TRUE),\n        month = month(date, label = TRUE),\n        year = year(date)\n    )\n\nhead(calendar_data)\n\n        date value week weekday month year\n1 2023-01-01    91    1    å‘¨æ—¥   1æœˆ 2023\n2 2023-01-02    94    1    å‘¨ä¸€   1æœˆ 2023\n3 2023-01-03    29    1    å‘¨äºŒ   1æœˆ 2023\n4 2023-01-04    83    1    å‘¨ä¸‰   1æœˆ 2023\n5 2023-01-05    64    1    å‘¨å››   1æœˆ 2023\n6 2023-01-06    52    1    å‘¨äº”   1æœˆ 2023",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "æ—¥å†çƒ­å›¾"
    ]
  },
  {
    "objectID": "2044-bindcalendar.html#githubé£æ ¼æ—¥å†çƒ­å›¾",
    "href": "2044-bindcalendar.html#githubé£æ ¼æ—¥å†çƒ­å›¾",
    "title": "Rè¯­è¨€æ—¥å†çƒ­å›¾ç»˜åˆ¶",
    "section": "GitHubé£æ ¼æ—¥å†çƒ­å›¾",
    "text": "GitHubé£æ ¼æ—¥å†çƒ­å›¾\n\n# è®¡ç®—æ¯å‘¨åœ¨å¹´ä¸­çš„ä½ç½®\ncalendar_data &lt;- calendar_data %&gt;%\n    mutate(\n        week_of_year = as.numeric(format(date, \"%W\")),\n        day_of_week = wday(date)\n    )\n\nggplot(calendar_data, aes(x = week_of_year, y = factor(day_of_week, levels = 7:1))) +\n    geom_tile(aes(fill = value), color = \"white\", linewidth = 0.3) +\n    scale_fill_gradient(low = \"#ebedf0\", high = \"#4f46e5\", name = \"æ•°å€¼\") +\n    scale_x_continuous(\n        breaks = c(1, 9, 18, 27, 36, 44, 52),\n        labels = c(\"1æœˆ\", \"3æœˆ\", \"5æœˆ\", \"7æœˆ\", \"9æœˆ\", \"11æœˆ\", \"12æœˆ\")\n    ) +\n    scale_y_discrete(labels = c(\"æ—¥\", \"å…­\", \"äº”\", \"å››\", \"ä¸‰\", \"äºŒ\", \"ä¸€\")) +\n    labs(\n        title = \"2023å¹´æ¯æ—¥æ•°æ®çƒ­å›¾\",\n        subtitle = \"GitHubé£æ ¼æ—¥å†çƒ­å›¾\",\n        x = NULL,\n        y = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        panel.grid = element_blank(),\n        legend.position = \"right\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "æ—¥å†çƒ­å›¾"
    ]
  },
  {
    "objectID": "2044-bindcalendar.html#æœˆä»½åˆ†é¢æ—¥å†",
    "href": "2044-bindcalendar.html#æœˆä»½åˆ†é¢æ—¥å†",
    "title": "Rè¯­è¨€æ—¥å†çƒ­å›¾ç»˜åˆ¶",
    "section": "æœˆä»½åˆ†é¢æ—¥å†",
    "text": "æœˆä»½åˆ†é¢æ—¥å†\n\n# è®¡ç®—æœˆå†…å‘¨æ•°\ncalendar_data &lt;- calendar_data %&gt;%\n    group_by(month) %&gt;%\n    mutate(\n        week_of_month = dense_rank(week_of_year)\n    ) %&gt;%\n    ungroup()\n\nggplot(calendar_data, aes(x = week_of_month, y = factor(day_of_week, levels = 7:1))) +\n    geom_tile(aes(fill = value), color = \"white\", linewidth = 0.5) +\n    facet_wrap(~month, nrow = 2, scales = \"free_x\") +\n    scale_fill_gradient(low = \"#f0fdf4\", high = \"#10b981\", name = \"æ•°å€¼\") +\n    scale_y_discrete(labels = c(\"æ—¥\", \"å…­\", \"äº”\", \"å››\", \"ä¸‰\", \"äºŒ\", \"ä¸€\")) +\n    labs(\n        title = \"2023å¹´æœˆåº¦æ—¥å†çƒ­å›¾\",\n        x = \"å‘¨\",\n        y = NULL\n    ) +\n    theme_minimal(base_size = 10) +\n    theme(\n        plot.title = element_text(face = \"bold\", size = 14),\n        panel.grid = element_blank(),\n        strip.text = element_text(face = \"bold\"),\n        legend.position = \"bottom\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "æ—¥å†çƒ­å›¾"
    ]
  },
  {
    "objectID": "2044-bindcalendar.html#åˆ†æ®µç€è‰²",
    "href": "2044-bindcalendar.html#åˆ†æ®µç€è‰²",
    "title": "Rè¯­è¨€æ—¥å†çƒ­å›¾ç»˜åˆ¶",
    "section": "åˆ†æ®µç€è‰²",
    "text": "åˆ†æ®µç€è‰²\n\n# åˆ†çº§ç€è‰²\ncalendar_data &lt;- calendar_data %&gt;%\n    mutate(\n        level = cut(value,\n            breaks = c(-Inf, 25, 50, 75, Inf),\n            labels = c(\"ä½\", \"ä¸­ä½\", \"ä¸­é«˜\", \"é«˜\")\n        )\n    )\n\nggplot(calendar_data, aes(x = week_of_year, y = factor(day_of_week, levels = 7:1))) +\n    geom_tile(aes(fill = level), color = \"white\", linewidth = 0.3) +\n    scale_fill_manual(\n        values = c(\n            \"ä½\" = \"#ebedf0\", \"ä¸­ä½\" = \"#9be9a8\",\n            \"ä¸­é«˜\" = \"#40c463\", \"é«˜\" = \"#216e39\"\n        ),\n        name = \"ç­‰çº§\"\n    ) +\n    labs(\n        title = \"åˆ†çº§ç€è‰²æ—¥å†çƒ­å›¾\",\n        x = NULL,\n        y = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        panel.grid = element_blank()\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "æ—¥å†çƒ­å›¾"
    ]
  },
  {
    "objectID": "2044-bindcalendar.html#æ€»ç»“",
    "href": "2044-bindcalendar.html#æ€»ç»“",
    "title": "Rè¯­è¨€æ—¥å†çƒ­å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\næ ·å¼\nç‰¹ç‚¹\n\n\n\n\nGitHubé£æ ¼\næ¨ªå‘52å‘¨ï¼Œçºµå‘7å¤©\n\n\næœˆä»½åˆ†é¢\næ¯æœˆç‹¬ç«‹æ˜¾ç¤º\n\n\nåˆ†æ®µç€è‰²\nç¦»æ•£é¢œè‰²ç­‰çº§\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\nçƒ­å›¾ç»˜åˆ¶å®Œå…¨æŒ‡å—\næŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "æ—¥å†çƒ­å›¾"
    ]
  },
  {
    "objectID": "2042-bindmarginal.html",
    "href": "2042-bindmarginal.html",
    "title": "Rè¯­è¨€è¾¹ç¼˜åˆ†å¸ƒå›¾ç»˜åˆ¶",
    "section": "",
    "text": "è¾¹ç¼˜åˆ†å¸ƒå›¾ï¼ˆMarginal Distribution Plotï¼‰åœ¨æ•£ç‚¹å›¾çš„è¾¹ç¼˜æ·»åŠ ç›´æ–¹å›¾ã€å¯†åº¦å›¾æˆ–ç®±çº¿å›¾ï¼ŒåŒæ—¶å±•ç¤ºä¸¤ä¸ªå˜é‡çš„è”åˆåˆ†å¸ƒå’Œå„è‡ªçš„è¾¹ç¼˜åˆ†å¸ƒã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\næ¢ç´¢æ€§åˆ†æ\nå¿«é€Ÿäº†è§£å˜é‡åˆ†å¸ƒå’Œç›¸å…³æ€§\n\n\nåŒå˜é‡åˆ†æ\nåŒæ—¶æŸ¥çœ‹è¾¹ç¼˜å’Œè”åˆåˆ†å¸ƒ\n\n\nç›¸å…³æ€§å±•ç¤º\nå¢å¼ºæ•£ç‚¹å›¾ä¿¡æ¯é‡",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "è¾¹ç¼˜åˆ†å¸ƒå›¾"
    ]
  },
  {
    "objectID": "2042-bindmarginal.html#ä»€ä¹ˆæ˜¯è¾¹ç¼˜åˆ†å¸ƒå›¾",
    "href": "2042-bindmarginal.html#ä»€ä¹ˆæ˜¯è¾¹ç¼˜åˆ†å¸ƒå›¾",
    "title": "Rè¯­è¨€è¾¹ç¼˜åˆ†å¸ƒå›¾ç»˜åˆ¶",
    "section": "",
    "text": "è¾¹ç¼˜åˆ†å¸ƒå›¾ï¼ˆMarginal Distribution Plotï¼‰åœ¨æ•£ç‚¹å›¾çš„è¾¹ç¼˜æ·»åŠ ç›´æ–¹å›¾ã€å¯†åº¦å›¾æˆ–ç®±çº¿å›¾ï¼ŒåŒæ—¶å±•ç¤ºä¸¤ä¸ªå˜é‡çš„è”åˆåˆ†å¸ƒå’Œå„è‡ªçš„è¾¹ç¼˜åˆ†å¸ƒã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\næ¢ç´¢æ€§åˆ†æ\nå¿«é€Ÿäº†è§£å˜é‡åˆ†å¸ƒå’Œç›¸å…³æ€§\n\n\nåŒå˜é‡åˆ†æ\nåŒæ—¶æŸ¥çœ‹è¾¹ç¼˜å’Œè”åˆåˆ†å¸ƒ\n\n\nç›¸å…³æ€§å±•ç¤º\nå¢å¼ºæ•£ç‚¹å›¾ä¿¡æ¯é‡",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "è¾¹ç¼˜åˆ†å¸ƒå›¾"
    ]
  },
  {
    "objectID": "2042-bindmarginal.html#råŒ…åŠ è½½",
    "href": "2042-bindmarginal.html#råŒ…åŠ è½½",
    "title": "Rè¯­è¨€è¾¹ç¼˜åˆ†å¸ƒå›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\n\nlibrary(ggplot2)\nlibrary(dplyr)\n\n# è¾¹ç¼˜å›¾ä¸“ç”¨åŒ…\n# install.packages(\"ggExtra\")\nlibrary(ggExtra)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "è¾¹ç¼˜åˆ†å¸ƒå›¾"
    ]
  },
  {
    "objectID": "2042-bindmarginal.html#åŸºç¡€è¾¹ç¼˜ç›´æ–¹å›¾",
    "href": "2042-bindmarginal.html#åŸºç¡€è¾¹ç¼˜ç›´æ–¹å›¾",
    "title": "Rè¯­è¨€è¾¹ç¼˜åˆ†å¸ƒå›¾ç»˜åˆ¶",
    "section": "åŸºç¡€è¾¹ç¼˜ç›´æ–¹å›¾",
    "text": "åŸºç¡€è¾¹ç¼˜ç›´æ–¹å›¾\n\n# åŸºç¡€æ•£ç‚¹å›¾\np &lt;- ggplot(iris, aes(x = Sepal.Length, y = Sepal.Width, color = Species)) +\n    geom_point(size = 2.5, alpha = 0.7) +\n    scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    labs(\n        title = \"é¸¢å°¾èŠ±è¼ç‰‡å°ºå¯¸åˆ†å¸ƒ\",\n        x = \"è¼ç‰‡é•¿åº¦ (cm)\",\n        y = \"è¼ç‰‡å®½åº¦ (cm)\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"bottom\"\n    )\n\n# æ·»åŠ è¾¹ç¼˜ç›´æ–¹å›¾\nggMarginal(p, type = \"histogram\", fill = \"#4f46e5\", alpha = 0.6)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "è¾¹ç¼˜åˆ†å¸ƒå›¾"
    ]
  },
  {
    "objectID": "2042-bindmarginal.html#è¾¹ç¼˜å¯†åº¦å›¾",
    "href": "2042-bindmarginal.html#è¾¹ç¼˜å¯†åº¦å›¾",
    "title": "Rè¯­è¨€è¾¹ç¼˜åˆ†å¸ƒå›¾ç»˜åˆ¶",
    "section": "è¾¹ç¼˜å¯†åº¦å›¾",
    "text": "è¾¹ç¼˜å¯†åº¦å›¾\n\nggMarginal(p, type = \"density\", fill = \"#4f46e5\", alpha = 0.5)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "è¾¹ç¼˜åˆ†å¸ƒå›¾"
    ]
  },
  {
    "objectID": "2042-bindmarginal.html#è¾¹ç¼˜ç®±çº¿å›¾",
    "href": "2042-bindmarginal.html#è¾¹ç¼˜ç®±çº¿å›¾",
    "title": "Rè¯­è¨€è¾¹ç¼˜åˆ†å¸ƒå›¾ç»˜åˆ¶",
    "section": "è¾¹ç¼˜ç®±çº¿å›¾",
    "text": "è¾¹ç¼˜ç®±çº¿å›¾\n\nggMarginal(p, type = \"boxplot\", fill = \"#e0e7ff\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "è¾¹ç¼˜åˆ†å¸ƒå›¾"
    ]
  },
  {
    "objectID": "2042-bindmarginal.html#åˆ†ç»„è¾¹ç¼˜åˆ†å¸ƒ",
    "href": "2042-bindmarginal.html#åˆ†ç»„è¾¹ç¼˜åˆ†å¸ƒ",
    "title": "Rè¯­è¨€è¾¹ç¼˜åˆ†å¸ƒå›¾ç»˜åˆ¶",
    "section": "åˆ†ç»„è¾¹ç¼˜åˆ†å¸ƒ",
    "text": "åˆ†ç»„è¾¹ç¼˜åˆ†å¸ƒ\næŒ‰é¢œè‰²åˆ†ç»„æ˜¾ç¤ºè¾¹ç¼˜åˆ†å¸ƒï¼š\n\nggMarginal(p, type = \"density\", groupColour = TRUE, groupFill = TRUE, alpha = 0.4)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "è¾¹ç¼˜åˆ†å¸ƒå›¾"
    ]
  },
  {
    "objectID": "2042-bindmarginal.html#æ··åˆç±»å‹è¾¹ç¼˜å›¾",
    "href": "2042-bindmarginal.html#æ··åˆç±»å‹è¾¹ç¼˜å›¾",
    "title": "Rè¯­è¨€è¾¹ç¼˜åˆ†å¸ƒå›¾ç»˜åˆ¶",
    "section": "æ··åˆç±»å‹è¾¹ç¼˜å›¾",
    "text": "æ··åˆç±»å‹è¾¹ç¼˜å›¾\nxè½´ç”¨ç›´æ–¹å›¾ï¼Œyè½´ç”¨å¯†åº¦å›¾ï¼š\n\nggMarginal(p, type = \"densigram\", fill = \"#818cf8\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "è¾¹ç¼˜åˆ†å¸ƒå›¾"
    ]
  },
  {
    "objectID": "2042-bindmarginal.html#è‡ªå®šä¹‰è¾¹ç¼˜å›¾å¤§å°",
    "href": "2042-bindmarginal.html#è‡ªå®šä¹‰è¾¹ç¼˜å›¾å¤§å°",
    "title": "Rè¯­è¨€è¾¹ç¼˜åˆ†å¸ƒå›¾ç»˜åˆ¶",
    "section": "è‡ªå®šä¹‰è¾¹ç¼˜å›¾å¤§å°",
    "text": "è‡ªå®šä¹‰è¾¹ç¼˜å›¾å¤§å°\n\nggMarginal(p,\n    type = \"histogram\",\n    fill = \"#4f46e5\", alpha = 0.6,\n    xparams = list(binwidth = 0.3),\n    yparams = list(binwidth = 0.2),\n    size = 8\n) # è¾¹ç¼˜å›¾å ä¸»å›¾çš„ 1/8",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "è¾¹ç¼˜åˆ†å¸ƒå›¾"
    ]
  },
  {
    "objectID": "2042-bindmarginal.html#ä½¿ç”¨-patchwork-æ‰‹åŠ¨æ„å»º",
    "href": "2042-bindmarginal.html#ä½¿ç”¨-patchwork-æ‰‹åŠ¨æ„å»º",
    "title": "Rè¯­è¨€è¾¹ç¼˜åˆ†å¸ƒå›¾ç»˜åˆ¶",
    "section": "ä½¿ç”¨ patchwork æ‰‹åŠ¨æ„å»º",
    "text": "ä½¿ç”¨ patchwork æ‰‹åŠ¨æ„å»º\nå¦‚éœ€æ›´å¤šè‡ªå®šä¹‰æ§åˆ¶ï¼š\n\nlibrary(patchwork)\n\n# ä¸»æ•£ç‚¹å›¾\nmain_plot &lt;- ggplot(iris, aes(x = Sepal.Length, y = Sepal.Width, color = Species)) +\n    geom_point(size = 2.5, alpha = 0.7) +\n    scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    theme_minimal() +\n    theme(legend.position = \"none\")\n\n# é¡¶éƒ¨è¾¹ç¼˜å›¾\ntop_hist &lt;- ggplot(iris, aes(x = Sepal.Length, fill = Species)) +\n    geom_density(alpha = 0.5) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    theme_void() +\n    theme(legend.position = \"none\")\n\n# å³ä¾§è¾¹ç¼˜å›¾\nright_hist &lt;- ggplot(iris, aes(x = Sepal.Width, fill = Species)) +\n    geom_density(alpha = 0.5) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    coord_flip() +\n    theme_void() +\n    theme(legend.position = \"none\")\n\n# ç»„åˆ\ntop_hist + plot_spacer() +\n    main_plot + right_hist +\n    plot_layout(ncol = 2, nrow = 2, widths = c(4, 1), heights = c(1, 4))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "è¾¹ç¼˜åˆ†å¸ƒå›¾"
    ]
  },
  {
    "objectID": "2042-bindmarginal.html#æ€»ç»“",
    "href": "2042-bindmarginal.html#æ€»ç»“",
    "title": "Rè¯­è¨€è¾¹ç¼˜åˆ†å¸ƒå›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nè¾¹ç¼˜ç±»å‹\nå‚æ•°\né€‚ç”¨åœºæ™¯\n\n\n\n\nç›´æ–¹å›¾\ntype = \"histogram\"\nç¦»æ•£åˆ†å¸ƒ\n\n\nå¯†åº¦å›¾\ntype = \"density\"\nå¹³æ»‘åˆ†å¸ƒ\n\n\nç®±çº¿å›¾\ntype = \"boxplot\"\nå¿«é€Ÿç»Ÿè®¡\n\n\nå°æç´å›¾\ntype = \"violin\"\nåˆ†å¸ƒå½¢çŠ¶\n\n\næ··åˆå›¾\ntype = \"densigram\"\nç»“åˆä¸¤è€…\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\næ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿\nç›´æ–¹å›¾ä¸å¯†åº¦å›¾",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "è¾¹ç¼˜åˆ†å¸ƒå›¾"
    ]
  },
  {
    "objectID": "2040-bindbubblechart.html",
    "href": "2040-bindbubblechart.html",
    "title": "Rè¯­è¨€æ°”æ³¡å›¾ç»˜åˆ¶",
    "section": "",
    "text": "æ°”æ³¡å›¾ï¼ˆBubble Chartï¼‰æ˜¯æ•£ç‚¹å›¾çš„æ‰©å±•ï¼Œé™¤äº†ç”¨ xã€y åæ ‡è¡¨ç¤ºä¸¤ä¸ªå˜é‡å¤–ï¼Œè¿˜ç”¨æ°”æ³¡å¤§å°è¡¨ç¤ºç¬¬ä¸‰ä¸ªå˜é‡ï¼Œæœ‰æ—¶è¿˜ç”¨é¢œè‰²è¡¨ç¤ºç¬¬å››ä¸ªå˜é‡ã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\nå¤šç»´æ•°æ®å±•ç¤º\nåŒæ—¶å±•ç¤º3-4ä¸ªå˜é‡\n\n\nå›½å®¶/åŸå¸‚å¯¹æ¯”\nå¦‚è‘—åçš„ Gapminder å›¾\n\n\nå¸‚åœºåˆ†æ\nå±•ç¤ºè§„æ¨¡ã€å¢é•¿ç‡ã€å¸‚åœºä»½é¢\n\n\né¡¹ç›®ä¼˜å…ˆçº§\nå½±å“åŠ› vs å¯è¡Œæ€§ vs èµ„æºéœ€æ±‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "æ°”æ³¡å›¾"
    ]
  },
  {
    "objectID": "2040-bindbubblechart.html#ä»€ä¹ˆæ˜¯æ°”æ³¡å›¾",
    "href": "2040-bindbubblechart.html#ä»€ä¹ˆæ˜¯æ°”æ³¡å›¾",
    "title": "Rè¯­è¨€æ°”æ³¡å›¾ç»˜åˆ¶",
    "section": "",
    "text": "æ°”æ³¡å›¾ï¼ˆBubble Chartï¼‰æ˜¯æ•£ç‚¹å›¾çš„æ‰©å±•ï¼Œé™¤äº†ç”¨ xã€y åæ ‡è¡¨ç¤ºä¸¤ä¸ªå˜é‡å¤–ï¼Œè¿˜ç”¨æ°”æ³¡å¤§å°è¡¨ç¤ºç¬¬ä¸‰ä¸ªå˜é‡ï¼Œæœ‰æ—¶è¿˜ç”¨é¢œè‰²è¡¨ç¤ºç¬¬å››ä¸ªå˜é‡ã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\nå¤šç»´æ•°æ®å±•ç¤º\nåŒæ—¶å±•ç¤º3-4ä¸ªå˜é‡\n\n\nå›½å®¶/åŸå¸‚å¯¹æ¯”\nå¦‚è‘—åçš„ Gapminder å›¾\n\n\nå¸‚åœºåˆ†æ\nå±•ç¤ºè§„æ¨¡ã€å¢é•¿ç‡ã€å¸‚åœºä»½é¢\n\n\né¡¹ç›®ä¼˜å…ˆçº§\nå½±å“åŠ› vs å¯è¡Œæ€§ vs èµ„æºéœ€æ±‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "æ°”æ³¡å›¾"
    ]
  },
  {
    "objectID": "2040-bindbubblechart.html#råŒ…åŠ è½½",
    "href": "2040-bindbubblechart.html#råŒ…åŠ è½½",
    "title": "Rè¯­è¨€æ°”æ³¡å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(scales)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "æ°”æ³¡å›¾"
    ]
  },
  {
    "objectID": "2040-bindbubblechart.html#åŸºç¡€æ°”æ³¡å›¾",
    "href": "2040-bindbubblechart.html#åŸºç¡€æ°”æ³¡å›¾",
    "title": "Rè¯­è¨€æ°”æ³¡å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€æ°”æ³¡å›¾",
    "text": "åŸºç¡€æ°”æ³¡å›¾\n\n# åˆ›å»ºç¤ºä¾‹æ•°æ®ï¼šå„å›½ç»æµæŒ‡æ ‡\ncountry_data &lt;- data.frame(\n    country = c(\n        \"ä¸­å›½\", \"ç¾å›½\", \"æ—¥æœ¬\", \"å¾·å›½\", \"å°åº¦\",\n        \"è‹±å›½\", \"æ³•å›½\", \"å·´è¥¿\", \"ä¿„ç½—æ–¯\", \"éŸ©å›½\"\n    ),\n    gdp_growth = c(5.2, 2.5, 1.8, 1.5, 7.0, 1.2, 1.6, 2.8, 2.1, 2.6),\n    gdp_per_capita = c(12, 76, 40, 52, 2.5, 46, 44, 9, 15, 35),\n    population = c(1400, 330, 125, 84, 1380, 67, 67, 215, 144, 52),\n    region = c(\n        \"äºšæ´²\", \"åŒ—ç¾\", \"äºšæ´²\", \"æ¬§æ´²\", \"äºšæ´²\",\n        \"æ¬§æ´²\", \"æ¬§æ´²\", \"å—ç¾\", \"æ¬§æ´²\", \"äºšæ´²\"\n    )\n)\n\nggplot(country_data, aes(x = gdp_per_capita, y = gdp_growth, size = population)) +\n    geom_point(alpha = 0.6, color = \"#4f46e5\") +\n    scale_size_continuous(range = c(3, 20), name = \"äººå£(ç™¾ä¸‡)\") +\n    labs(\n        title = \"äººå‡GDP vs GDPå¢é•¿ç‡\",\n        subtitle = \"æ°”æ³¡å¤§å°è¡¨ç¤ºäººå£è§„æ¨¡\",\n        x = \"äººå‡GDPï¼ˆåƒç¾å…ƒï¼‰\",\n        y = \"GDPå¢é•¿ç‡ï¼ˆ%ï¼‰\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(plot.title = element_text(face = \"bold\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "æ°”æ³¡å›¾"
    ]
  },
  {
    "objectID": "2040-bindbubblechart.html#æŒ‰åŒºåŸŸç€è‰²",
    "href": "2040-bindbubblechart.html#æŒ‰åŒºåŸŸç€è‰²",
    "title": "Rè¯­è¨€æ°”æ³¡å›¾ç»˜åˆ¶",
    "section": "æŒ‰åŒºåŸŸç€è‰²",
    "text": "æŒ‰åŒºåŸŸç€è‰²\n\nggplot(country_data, aes(\n    x = gdp_per_capita, y = gdp_growth,\n    size = population, color = region\n)) +\n    geom_point(alpha = 0.7) +\n    scale_size_continuous(range = c(4, 20), name = \"äººå£(ç™¾ä¸‡)\") +\n    scale_color_manual(values = c(\n        \"äºšæ´²\" = \"#4f46e5\", \"åŒ—ç¾\" = \"#10b981\",\n        \"æ¬§æ´²\" = \"#f59e0b\", \"å—ç¾\" = \"#ec4899\"\n    )) +\n    labs(\n        title = \"å…¨çƒä¸»è¦ç»æµä½“å¯¹æ¯”\",\n        subtitle = \"æ°”æ³¡å¤§å° = äººå£ï¼Œé¢œè‰² = åœ°åŒº\",\n        x = \"äººå‡GDPï¼ˆåƒç¾å…ƒï¼‰\",\n        y = \"GDPå¢é•¿ç‡ï¼ˆ%ï¼‰\",\n        color = \"åœ°åŒº\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"right\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "æ°”æ³¡å›¾"
    ]
  },
  {
    "objectID": "2040-bindbubblechart.html#æ·»åŠ å›½å®¶æ ‡ç­¾",
    "href": "2040-bindbubblechart.html#æ·»åŠ å›½å®¶æ ‡ç­¾",
    "title": "Rè¯­è¨€æ°”æ³¡å›¾ç»˜åˆ¶",
    "section": "æ·»åŠ å›½å®¶æ ‡ç­¾",
    "text": "æ·»åŠ å›½å®¶æ ‡ç­¾\n\nlibrary(ggrepel)\n\nggplot(country_data, aes(\n    x = gdp_per_capita, y = gdp_growth,\n    size = population, color = region\n)) +\n    geom_point(alpha = 0.7) +\n    geom_text_repel(aes(label = country), size = 3.5, max.overlaps = 15) +\n    scale_size_continuous(range = c(4, 18), name = \"äººå£(ç™¾ä¸‡)\") +\n    scale_color_manual(values = c(\n        \"äºšæ´²\" = \"#4f46e5\", \"åŒ—ç¾\" = \"#10b981\",\n        \"æ¬§æ´²\" = \"#f59e0b\", \"å—ç¾\" = \"#ec4899\"\n    )) +\n    labs(\n        title = \"å…¨çƒä¸»è¦ç»æµä½“\",\n        x = \"äººå‡GDPï¼ˆåƒç¾å…ƒï¼‰\",\n        y = \"GDPå¢é•¿ç‡ï¼ˆ%ï¼‰\",\n        color = \"åœ°åŒº\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(plot.title = element_text(face = \"bold\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "æ°”æ³¡å›¾"
    ]
  },
  {
    "objectID": "2040-bindbubblechart.html#å¸¦è¾¹ç•Œçš„æ°”æ³¡å›¾",
    "href": "2040-bindbubblechart.html#å¸¦è¾¹ç•Œçš„æ°”æ³¡å›¾",
    "title": "Rè¯­è¨€æ°”æ³¡å›¾ç»˜åˆ¶",
    "section": "å¸¦è¾¹ç•Œçš„æ°”æ³¡å›¾",
    "text": "å¸¦è¾¹ç•Œçš„æ°”æ³¡å›¾\næ·»åŠ æ°”æ³¡è¾¹æ¡†ä½¿é‡å åŒºåŸŸæ›´æ¸…æ™°ï¼š\n\nggplot(country_data, aes(\n    x = gdp_per_capita, y = gdp_growth,\n    size = population, fill = region\n)) +\n    geom_point(shape = 21, color = \"white\", stroke = 1.5, alpha = 0.8) +\n    scale_size_continuous(range = c(4, 20), name = \"äººå£(ç™¾ä¸‡)\") +\n    scale_fill_manual(values = c(\n        \"äºšæ´²\" = \"#4f46e5\", \"åŒ—ç¾\" = \"#10b981\",\n        \"æ¬§æ´²\" = \"#f59e0b\", \"å—ç¾\" = \"#ec4899\"\n    )) +\n    labs(\n        title = \"å¸¦è¾¹ç•Œçš„æ°”æ³¡å›¾\",\n        x = \"äººå‡GDPï¼ˆåƒç¾å…ƒï¼‰\",\n        y = \"GDPå¢é•¿ç‡ï¼ˆ%ï¼‰\",\n        fill = \"åœ°åŒº\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(plot.title = element_text(face = \"bold\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "æ°”æ³¡å›¾"
    ]
  },
  {
    "objectID": "2040-bindbubblechart.html#å››è±¡é™åˆ†ææ°”æ³¡å›¾",
    "href": "2040-bindbubblechart.html#å››è±¡é™åˆ†ææ°”æ³¡å›¾",
    "title": "Rè¯­è¨€æ°”æ³¡å›¾ç»˜åˆ¶",
    "section": "å››è±¡é™åˆ†ææ°”æ³¡å›¾",
    "text": "å››è±¡é™åˆ†ææ°”æ³¡å›¾\næ·»åŠ å‚è€ƒçº¿åˆ’åˆ†å››è±¡é™ï¼š\n\n# è®¡ç®—ä¸­ä½æ•°ä½œä¸ºåˆ†ç•Œçº¿\nmedian_x &lt;- median(country_data$gdp_per_capita)\nmedian_y &lt;- median(country_data$gdp_growth)\n\nggplot(country_data, aes(\n    x = gdp_per_capita, y = gdp_growth,\n    size = population, fill = region\n)) +\n    # å››è±¡é™èƒŒæ™¯\n    annotate(\"rect\",\n        xmin = -Inf, xmax = median_x, ymin = median_y, ymax = Inf,\n        fill = \"#dcfce7\", alpha = 0.3\n    ) +\n    annotate(\"rect\",\n        xmin = median_x, xmax = Inf, ymin = median_y, ymax = Inf,\n        fill = \"#dbeafe\", alpha = 0.3\n    ) +\n    # å‚è€ƒçº¿\n    geom_hline(yintercept = median_y, linetype = \"dashed\", color = \"gray50\") +\n    geom_vline(xintercept = median_x, linetype = \"dashed\", color = \"gray50\") +\n    # æ°”æ³¡\n    geom_point(shape = 21, color = \"white\", stroke = 1, alpha = 0.85) +\n    geom_text_repel(aes(label = country), size = 3) +\n    scale_size_continuous(range = c(4, 18)) +\n    scale_fill_manual(values = c(\n        \"äºšæ´²\" = \"#4f46e5\", \"åŒ—ç¾\" = \"#10b981\",\n        \"æ¬§æ´²\" = \"#f59e0b\", \"å—ç¾\" = \"#ec4899\"\n    )) +\n    # è±¡é™æ ‡ç­¾\n    annotate(\"text\", x = 5, y = 6.5, label = \"é«˜æ½œåŠ›\", fontface = \"bold\", color = \"#166534\") +\n    annotate(\"text\", x = 60, y = 6.5, label = \"æ˜æ˜Ÿ\", fontface = \"bold\", color = \"#1e40af\") +\n    labs(\n        title = \"å››è±¡é™åˆ†æï¼šç»æµä½“å®šä½\",\n        x = \"äººå‡GDPï¼ˆåƒç¾å…ƒï¼‰\",\n        y = \"GDPå¢é•¿ç‡ï¼ˆ%ï¼‰\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"none\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "æ°”æ³¡å›¾"
    ]
  },
  {
    "objectID": "2040-bindbubblechart.html#åŠ¨æ€æ•ˆæœæ¨¡æ‹Ÿå¤šå¹´æ•°æ®",
    "href": "2040-bindbubblechart.html#åŠ¨æ€æ•ˆæœæ¨¡æ‹Ÿå¤šå¹´æ•°æ®",
    "title": "Rè¯­è¨€æ°”æ³¡å›¾ç»˜åˆ¶",
    "section": "åŠ¨æ€æ•ˆæœæ¨¡æ‹Ÿï¼ˆå¤šå¹´æ•°æ®ï¼‰",
    "text": "åŠ¨æ€æ•ˆæœæ¨¡æ‹Ÿï¼ˆå¤šå¹´æ•°æ®ï¼‰\n\n# æ¨¡æ‹Ÿå¤šå¹´æ•°æ®\nset.seed(42)\nyears &lt;- 2020:2023\n\nmulti_year &lt;- do.call(rbind, lapply(years, function(y) {\n    country_data %&gt;%\n        mutate(\n            year = y,\n            gdp_growth = gdp_growth + rnorm(n(), 0, 0.5),\n            gdp_per_capita = gdp_per_capita * (1 + rnorm(n(), 0.02, 0.01))\n        )\n}))\n\nggplot(multi_year, aes(\n    x = gdp_per_capita, y = gdp_growth,\n    size = population, fill = region\n)) +\n    geom_point(shape = 21, alpha = 0.7, color = \"white\") +\n    facet_wrap(~year, nrow = 1) +\n    scale_size_continuous(range = c(2, 12), guide = \"none\") +\n    scale_fill_manual(values = c(\n        \"äºšæ´²\" = \"#4f46e5\", \"åŒ—ç¾\" = \"#10b981\",\n        \"æ¬§æ´²\" = \"#f59e0b\", \"å—ç¾\" = \"#ec4899\"\n    )) +\n    labs(\n        title = \"ç»æµä½“å˜åŒ–è¶‹åŠ¿ï¼ˆ2020-2023ï¼‰\",\n        x = \"äººå‡GDP\",\n        y = \"GDPå¢é•¿ç‡\",\n        fill = \"åœ°åŒº\"\n    ) +\n    theme_minimal(base_size = 11) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"bottom\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "æ°”æ³¡å›¾"
    ]
  },
  {
    "objectID": "2040-bindbubblechart.html#å®ç”¨å‡½æ•°å°è£…",
    "href": "2040-bindbubblechart.html#å®ç”¨å‡½æ•°å°è£…",
    "title": "Rè¯­è¨€æ°”æ³¡å›¾ç»˜åˆ¶",
    "section": "å®ç”¨å‡½æ•°å°è£…",
    "text": "å®ç”¨å‡½æ•°å°è£…\n\n#' å¿«é€Ÿç»˜åˆ¶æ°”æ³¡å›¾\nplot_bubble &lt;- function(data, x, y, size, color = NULL,\n                        labels = NULL, title = NULL) {\n    p &lt;- ggplot(data, aes(x = .data[[x]], y = .data[[y]], size = .data[[size]]))\n\n    if (!is.null(color)) {\n        p &lt;- p + geom_point(aes(fill = .data[[color]]),\n            shape = 21, alpha = 0.7, color = \"white\"\n        )\n    } else {\n        p &lt;- p + geom_point(alpha = 0.7, color = \"#4f46e5\")\n    }\n\n    if (!is.null(labels)) {\n        p &lt;- p + ggrepel::geom_text_repel(aes(label = .data[[labels]]), size = 3)\n    }\n\n    p + scale_size_continuous(range = c(3, 18)) +\n        labs(title = title, x = x, y = y) +\n        theme_minimal(base_size = 12) +\n        theme(plot.title = element_text(face = \"bold\"))\n}\n\n# ä½¿ç”¨ç¤ºä¾‹\nplot_bubble(country_data, \"gdp_per_capita\", \"gdp_growth\", \"population\",\n    color = \"region\", labels = \"country\", title = \"å¿«é€Ÿæ°”æ³¡å›¾\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "æ°”æ³¡å›¾"
    ]
  },
  {
    "objectID": "2040-bindbubblechart.html#æ€»ç»“",
    "href": "2040-bindbubblechart.html#æ€»ç»“",
    "title": "Rè¯­è¨€æ°”æ³¡å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\næŠ€å·§\nè¯´æ˜\n\n\n\n\nåŸºç¡€æ°”æ³¡\naes(size = var) æ˜ å°„ç¬¬ä¸‰å˜é‡\n\n\né¢œè‰²ç¼–ç \naes(color/fill = var) æ˜ å°„ç¬¬å››å˜é‡\n\n\nå¸¦è¾¹æ¡†\nshape = 21 + fill + color = \"white\"\n\n\næ ‡ç­¾\nggrepel::geom_text_repel() é¿å…é‡å \n\n\nå››è±¡é™\næ·»åŠ å‚è€ƒçº¿å’ŒèƒŒæ™¯åŒºåŸŸ\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\næ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿\nGGally - ç›¸å…³çŸ©é˜µ",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "æ°”æ³¡å›¾"
    ]
  },
  {
    "objectID": "2038-bindpyramid.html",
    "href": "2038-bindpyramid.html",
    "title": "Rè¯­è¨€äººå£é‡‘å­—å¡”å›¾ç»˜åˆ¶",
    "section": "",
    "text": "äººå£é‡‘å­—å¡”å›¾ï¼ˆPopulation Pyramidï¼‰æ˜¯ä¸€ç§èƒŒé èƒŒæ¡å½¢å›¾ï¼Œæ˜¯å±•ç¤ºäººå£å¹´é¾„-æ€§åˆ«ç»“æ„çš„ç»å…¸å›¾è¡¨ã€‚å®ƒå°†ä¸¤ç»„æ•°æ®ï¼ˆé€šå¸¸æ˜¯ç”·æ€§å’Œå¥³æ€§ï¼‰å¯¹ç§°åœ°æ”¾åœ¨ä¸­è½´ä¸¤ä¾§ï¼Œå½¢æˆç±»ä¼¼é‡‘å­—å¡”çš„å½¢çŠ¶ã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\näººå£ç»Ÿè®¡\nå¹´é¾„-æ€§åˆ«åˆ†å¸ƒåˆ†æ\n\n\nå®¢æˆ·åˆ†æ\nç”¨æˆ·ç¾¤ä½“å¹´é¾„ç»“æ„\n\n\nè¥é”€æ¼æ–—\né˜¶æ®µè½¬åŒ–åˆ†æ\n\n\nå¯¹æ¯”åˆ†æ\nä»»ä½•éœ€è¦å¯¹ç§°æ¯”è¾ƒçš„ä¸¤ç»„æ•°æ®\n\n\n\n\n\n\n\n\n\nå½¢çŠ¶\nå«ä¹‰\n\n\n\n\næ­£ä¸‰è§’å½¢\nå¹´è½»å‹ç¤¾ä¼šï¼Œé«˜å‡ºç”Ÿç‡\n\n\nå€’ä¸‰è§’å½¢\nè€é¾„åŒ–ç¤¾ä¼š\n\n\nçŸ©å½¢/æŸ±å½¢\nç¨³å®šå‹ç¤¾ä¼š\n\n\nè‘«èŠ¦å½¢\nä¸­é—´ä»£æ–­å±‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "äººå£é‡‘å­—å¡”å›¾"
    ]
  },
  {
    "objectID": "2038-bindpyramid.html#ä»€ä¹ˆæ˜¯äººå£é‡‘å­—å¡”å›¾",
    "href": "2038-bindpyramid.html#ä»€ä¹ˆæ˜¯äººå£é‡‘å­—å¡”å›¾",
    "title": "Rè¯­è¨€äººå£é‡‘å­—å¡”å›¾ç»˜åˆ¶",
    "section": "",
    "text": "äººå£é‡‘å­—å¡”å›¾ï¼ˆPopulation Pyramidï¼‰æ˜¯ä¸€ç§èƒŒé èƒŒæ¡å½¢å›¾ï¼Œæ˜¯å±•ç¤ºäººå£å¹´é¾„-æ€§åˆ«ç»“æ„çš„ç»å…¸å›¾è¡¨ã€‚å®ƒå°†ä¸¤ç»„æ•°æ®ï¼ˆé€šå¸¸æ˜¯ç”·æ€§å’Œå¥³æ€§ï¼‰å¯¹ç§°åœ°æ”¾åœ¨ä¸­è½´ä¸¤ä¾§ï¼Œå½¢æˆç±»ä¼¼é‡‘å­—å¡”çš„å½¢çŠ¶ã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\näººå£ç»Ÿè®¡\nå¹´é¾„-æ€§åˆ«åˆ†å¸ƒåˆ†æ\n\n\nå®¢æˆ·åˆ†æ\nç”¨æˆ·ç¾¤ä½“å¹´é¾„ç»“æ„\n\n\nè¥é”€æ¼æ–—\né˜¶æ®µè½¬åŒ–åˆ†æ\n\n\nå¯¹æ¯”åˆ†æ\nä»»ä½•éœ€è¦å¯¹ç§°æ¯”è¾ƒçš„ä¸¤ç»„æ•°æ®\n\n\n\n\n\n\n\n\n\nå½¢çŠ¶\nå«ä¹‰\n\n\n\n\næ­£ä¸‰è§’å½¢\nå¹´è½»å‹ç¤¾ä¼šï¼Œé«˜å‡ºç”Ÿç‡\n\n\nå€’ä¸‰è§’å½¢\nè€é¾„åŒ–ç¤¾ä¼š\n\n\nçŸ©å½¢/æŸ±å½¢\nç¨³å®šå‹ç¤¾ä¼š\n\n\nè‘«èŠ¦å½¢\nä¸­é—´ä»£æ–­å±‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "äººå£é‡‘å­—å¡”å›¾"
    ]
  },
  {
    "objectID": "2038-bindpyramid.html#råŒ…åŠ è½½",
    "href": "2038-bindpyramid.html#råŒ…åŠ è½½",
    "title": "Rè¯­è¨€äººå£é‡‘å­—å¡”å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(scales)\nlibrary(forcats)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "äººå£é‡‘å­—å¡”å›¾"
    ]
  },
  {
    "objectID": "2038-bindpyramid.html#å‡†å¤‡äººå£æ•°æ®",
    "href": "2038-bindpyramid.html#å‡†å¤‡äººå£æ•°æ®",
    "title": "Rè¯­è¨€äººå£é‡‘å­—å¡”å›¾ç»˜åˆ¶",
    "section": "å‡†å¤‡äººå£æ•°æ®",
    "text": "å‡†å¤‡äººå£æ•°æ®\n\n# åˆ›å»ºä¸­å›½äººå£ç»“æ„ç¤ºä¾‹æ•°æ®ï¼ˆç®€åŒ–ç‰ˆï¼‰\npopulation_data &lt;- data.frame(\n    age_group = rep(c(\n        \"0-4\", \"5-9\", \"10-14\", \"15-19\", \"20-24\",\n        \"25-29\", \"30-34\", \"35-39\", \"40-44\", \"45-49\",\n        \"50-54\", \"55-59\", \"60-64\", \"65-69\", \"70-74\",\n        \"75-79\", \"80+\"\n    ), each = 2),\n    gender = rep(c(\"ç”·æ€§\", \"å¥³æ€§\"), 17),\n    population = c(\n        # ç”·æ€§, å¥³æ€§ (ç™¾ä¸‡äºº)\n        38, 35, # 0-4\n        42, 39, # 5-9\n        40, 37, # 10-14\n        35, 33, # 15-19\n        45, 43, # 20-24\n        52, 50, # 25-29\n        58, 55, # 30-34\n        50, 48, # 35-39\n        55, 52, # 40-44\n        62, 58, # 45-49\n        58, 55, # 50-54\n        48, 46, # 55-59\n        42, 41, # 60-64\n        35, 36, # 65-69\n        25, 28, # 70-74\n        18, 22, # 75-79\n        12, 18 # 80+\n    )\n)\n\n# å°†å¹´é¾„ç»„è½¬æ¢ä¸ºæœ‰åºå› å­\npopulation_data &lt;- population_data %&gt;%\n    mutate(\n        age_group = factor(age_group, levels = c(\n            \"0-4\", \"5-9\", \"10-14\", \"15-19\", \"20-24\", \"25-29\", \"30-34\",\n            \"35-39\", \"40-44\", \"45-49\", \"50-54\", \"55-59\", \"60-64\", \"65-69\",\n            \"70-74\", \"75-79\", \"80+\"\n        )),\n        # å°†ç”·æ€§äººå£è½¬ä¸ºè´Ÿå€¼\n        population_adj = ifelse(gender == \"ç”·æ€§\", -population, population)\n    )\n\nhead(population_data)\n\n  age_group gender population population_adj\n1       0-4   ç”·æ€§         38            -38\n2       0-4   å¥³æ€§         35             35\n3       5-9   ç”·æ€§         42            -42\n4       5-9   å¥³æ€§         39             39\n5     10-14   ç”·æ€§         40            -40\n6     10-14   å¥³æ€§         37             37",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "äººå£é‡‘å­—å¡”å›¾"
    ]
  },
  {
    "objectID": "2038-bindpyramid.html#åŸºç¡€äººå£é‡‘å­—å¡”å›¾",
    "href": "2038-bindpyramid.html#åŸºç¡€äººå£é‡‘å­—å¡”å›¾",
    "title": "Rè¯­è¨€äººå£é‡‘å­—å¡”å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€äººå£é‡‘å­—å¡”å›¾",
    "text": "åŸºç¡€äººå£é‡‘å­—å¡”å›¾\n\nggplot(population_data, aes(x = population_adj, y = age_group, fill = gender)) +\n    geom_col(width = 0.8) +\n    # æ·»åŠ ä¸­å¿ƒè½´\n    geom_vline(xintercept = 0, color = \"#374151\", linewidth = 0.5) +\n    # é¢œè‰²è®¾ç½®\n    scale_fill_manual(\n        values = c(\"ç”·æ€§\" = \"#4f46e5\", \"å¥³æ€§\" = \"#ec4899\")\n    ) +\n    # è°ƒæ•´xè½´åˆ»åº¦ï¼ˆæ˜¾ç¤ºæ­£æ•°ï¼‰\n    scale_x_continuous(\n        breaks = seq(-60, 60, by = 20),\n        labels = abs\n    ) +\n    labs(\n        title = \"ä¸­å›½äººå£å¹´é¾„ç»“æ„é‡‘å­—å¡”\",\n        subtitle = \"å•ä½ï¼šç™¾ä¸‡äºº\",\n        x = \"äººå£æ•°é‡ï¼ˆç™¾ä¸‡ï¼‰\",\n        y = \"å¹´é¾„ç»„\",\n        fill = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        panel.grid.major.y = element_blank(),\n        legend.position = \"top\",\n        plot.title = element_text(face = \"bold\", size = 14)\n    )\n\n\n\n\n\n\n\n\n\nä»£ç è§£æ\n\n\n\næŠ€å·§\nè¯´æ˜\n\n\n\n\nç”·æ€§å–è´Ÿå€¼\nifelse(gender == \"ç”·æ€§\", -population, population)\n\n\nåˆ»åº¦æ˜¾ç¤ºæ­£æ•°\nlabels = abs å°†è´Ÿæ•°åˆ»åº¦æ˜¾ç¤ºä¸ºæ­£æ•°\n\n\nä¸­å¿ƒè½´\ngeom_vline(xintercept = 0)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "äººå£é‡‘å­—å¡”å›¾"
    ]
  },
  {
    "objectID": "2038-bindpyramid.html#ç¾åŒ–äººå£é‡‘å­—å¡”å›¾",
    "href": "2038-bindpyramid.html#ç¾åŒ–äººå£é‡‘å­—å¡”å›¾",
    "title": "Rè¯­è¨€äººå£é‡‘å­—å¡”å›¾ç»˜åˆ¶",
    "section": "ç¾åŒ–äººå£é‡‘å­—å¡”å›¾",
    "text": "ç¾åŒ–äººå£é‡‘å­—å¡”å›¾\n\næ·»åŠ æ•°å€¼æ ‡ç­¾\n\nggplot(population_data, aes(x = population_adj, y = age_group, fill = gender)) +\n    geom_col(width = 0.85) +\n    geom_vline(xintercept = 0, color = \"#1f2937\", linewidth = 0.8) +\n    # æ·»åŠ æ•°å€¼æ ‡ç­¾\n    geom_text(\n        aes(\n            label = population,\n            hjust = ifelse(gender == \"ç”·æ€§\", 1.2, -0.2)\n        ),\n        size = 2.8,\n        color = \"#374151\"\n    ) +\n    scale_fill_manual(\n        values = c(\"ç”·æ€§\" = \"#3b82f6\", \"å¥³æ€§\" = \"#f472b6\")\n    ) +\n    scale_x_continuous(\n        breaks = seq(-60, 60, by = 20),\n        labels = abs,\n        limits = c(-75, 75)\n    ) +\n    labs(\n        title = \"ä¸­å›½äººå£å¹´é¾„ç»“æ„\",\n        subtitle = \"2023å¹´æ•°æ®ï¼ˆç™¾ä¸‡äººï¼‰\",\n        x = NULL,\n        y = NULL,\n        fill = NULL\n    ) +\n    theme_minimal(base_size = 11) +\n    theme(\n        panel.grid = element_blank(),\n        legend.position = \"top\",\n        plot.title = element_text(face = \"bold\", size = 14),\n        axis.text.x = element_blank()\n    )\n\n\n\n\n\n\n\n\n\n\nä½¿ç”¨ç™¾åˆ†æ¯”\n\n# è®¡ç®—ç™¾åˆ†æ¯”\ntotal_pop &lt;- sum(population_data$population)\n\npopulation_pct &lt;- population_data %&gt;%\n    mutate(\n        pct = population / total_pop * 100,\n        pct_adj = ifelse(gender == \"ç”·æ€§\", -pct, pct)\n    )\n\nggplot(population_pct, aes(x = pct_adj, y = age_group, fill = gender)) +\n    geom_col(width = 0.85) +\n    geom_vline(xintercept = 0, color = \"#1f2937\", linewidth = 0.8) +\n    scale_fill_manual(\n        values = c(\"ç”·æ€§\" = \"#4f46e5\", \"å¥³æ€§\" = \"#ec4899\")\n    ) +\n    scale_x_continuous(\n        breaks = seq(-5, 5, by = 1),\n        labels = function(x) paste0(abs(x), \"%\"),\n        limits = c(-6, 6)\n    ) +\n    labs(\n        title = \"äººå£å¹´é¾„åˆ†å¸ƒç™¾åˆ†æ¯”\",\n        x = \"å æ€»äººå£æ¯”ä¾‹\",\n        y = NULL,\n        fill = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        panel.grid.major.y = element_blank(),\n        legend.position = \"top\",\n        plot.title = element_text(face = \"bold\")\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "äººå£é‡‘å­—å¡”å›¾"
    ]
  },
  {
    "objectID": "2038-bindpyramid.html#æ¸å˜è‰²é‡‘å­—å¡”å›¾",
    "href": "2038-bindpyramid.html#æ¸å˜è‰²é‡‘å­—å¡”å›¾",
    "title": "Rè¯­è¨€äººå£é‡‘å­—å¡”å›¾ç»˜åˆ¶",
    "section": "æ¸å˜è‰²é‡‘å­—å¡”å›¾",
    "text": "æ¸å˜è‰²é‡‘å­—å¡”å›¾\nä½¿ç”¨å¹´é¾„æ¸å˜è‰²å¢å¼ºè§†è§‰æ•ˆæœï¼š\n\n# æ·»åŠ å¹´é¾„æ®µé¢œè‰²\nlibrary(viridis)\n\nggplot(population_data, aes(x = population_adj, y = age_group, fill = age_group)) +\n    geom_col(width = 0.85) +\n    geom_vline(xintercept = 0, color = \"#1f2937\", linewidth = 0.8) +\n    # ä½¿ç”¨viridisæ¸å˜è‰²\n    scale_fill_viridis_d(option = \"plasma\", guide = \"none\") +\n    scale_x_continuous(\n        breaks = seq(-60, 60, by = 20),\n        labels = abs\n    ) +\n    labs(\n        title = \"æŒ‰å¹´é¾„æ¸å˜ç€è‰²çš„äººå£é‡‘å­—å¡”\",\n        x = \"äººå£æ•°é‡ï¼ˆç™¾ä¸‡ï¼‰\",\n        y = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        panel.grid.major.y = element_blank(),\n        plot.title = element_text(face = \"bold\")\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "äººå£é‡‘å­—å¡”å›¾"
    ]
  },
  {
    "objectID": "2038-bindpyramid.html#ä¸¤æœŸå¯¹æ¯”é‡‘å­—å¡”",
    "href": "2038-bindpyramid.html#ä¸¤æœŸå¯¹æ¯”é‡‘å­—å¡”",
    "title": "Rè¯­è¨€äººå£é‡‘å­—å¡”å›¾ç»˜åˆ¶",
    "section": "ä¸¤æœŸå¯¹æ¯”é‡‘å­—å¡”",
    "text": "ä¸¤æœŸå¯¹æ¯”é‡‘å­—å¡”\næ¯”è¾ƒä¸åŒå¹´ä»½çš„äººå£ç»“æ„å˜åŒ–ï¼š\n\n# åˆ›å»ºä¸¤æœŸæ•°æ®\nmulti_year_pop &lt;- rbind(\n    population_data %&gt;% mutate(year = \"2023å¹´\"),\n    population_data %&gt;%\n        mutate(\n            year = \"2013å¹´\",\n            population = population * runif(nrow(population_data), 0.85, 1.1),\n            population_adj = ifelse(gender == \"ç”·æ€§\", -population, population)\n        )\n)\n\nggplot(multi_year_pop, aes(x = population_adj, y = age_group, fill = gender)) +\n    geom_col(width = 0.85, position = \"identity\", alpha = 0.8) +\n    geom_vline(xintercept = 0, color = \"#1f2937\", linewidth = 0.5) +\n    facet_wrap(~year, ncol = 2) +\n    scale_fill_manual(\n        values = c(\"ç”·æ€§\" = \"#4f46e5\", \"å¥³æ€§\" = \"#ec4899\")\n    ) +\n    scale_x_continuous(\n        breaks = seq(-60, 60, by = 20),\n        labels = abs\n    ) +\n    labs(\n        title = \"äººå£ç»“æ„å˜åŒ–å¯¹æ¯”ï¼ˆ2013 vs 2023ï¼‰\",\n        x = \"äººå£æ•°é‡ï¼ˆç™¾ä¸‡ï¼‰\",\n        y = NULL,\n        fill = NULL\n    ) +\n    theme_minimal(base_size = 11) +\n    theme(\n        panel.grid.major.y = element_blank(),\n        legend.position = \"top\",\n        plot.title = element_text(face = \"bold\", size = 14),\n        strip.text = element_text(face = \"bold\", size = 12)\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "äººå£é‡‘å­—å¡”å›¾"
    ]
  },
  {
    "objectID": "2038-bindpyramid.html#è¥é”€æ¼æ–—é‡‘å­—å¡”",
    "href": "2038-bindpyramid.html#è¥é”€æ¼æ–—é‡‘å­—å¡”",
    "title": "Rè¯­è¨€äººå£é‡‘å­—å¡”å›¾ç»˜åˆ¶",
    "section": "è¥é”€æ¼æ–—é‡‘å­—å¡”",
    "text": "è¥é”€æ¼æ–—é‡‘å­—å¡”\näººå£é‡‘å­—å¡”çš„ç»“æ„ä¹Ÿé€‚ç”¨äºæ¼æ–—åˆ†æï¼š\n\n# è¥é”€æ¼æ–—æ•°æ®\nfunnel_data &lt;- data.frame(\n    stage = factor(c(\n        \"1. ç½‘ç«™è®¿é—®\", \"2. äº§å“æµè§ˆ\", \"3. åŠ å…¥è´­ç‰©è½¦\",\n        \"4. å¼€å§‹ç»“è´¦\", \"5. å®Œæˆæ”¯ä»˜\"\n    ), levels = rev(c(\n        \"1. ç½‘ç«™è®¿é—®\", \"2. äº§å“æµè§ˆ\", \"3. åŠ å…¥è´­ç‰©è½¦\",\n        \"4. å¼€å§‹ç»“è´¦\", \"5. å®Œæˆæ”¯ä»˜\"\n    ))),\n    male = c(50000, 35000, 15000, 8000, 4000),\n    female = c(48000, 38000, 18000, 10000, 5500)\n)\n\n# è½¬æ¢æ ¼å¼\nfunnel_long &lt;- funnel_data %&gt;%\n    tidyr::pivot_longer(\n        cols = c(male, female),\n        names_to = \"gender\",\n        values_to = \"count\"\n    ) %&gt;%\n    mutate(\n        count_adj = ifelse(gender == \"male\", -count, count),\n        gender = ifelse(gender == \"male\", \"ç”·æ€§ç”¨æˆ·\", \"å¥³æ€§ç”¨æˆ·\")\n    )\n\nggplot(funnel_long, aes(x = count_adj, y = stage, fill = gender)) +\n    geom_col(width = 0.7) +\n    geom_vline(xintercept = 0, color = \"#374151\", linewidth = 0.8) +\n    geom_text(\n        aes(\n            label = scales::comma(count),\n            hjust = ifelse(gender == \"ç”·æ€§ç”¨æˆ·\", 1.1, -0.1)\n        ),\n        size = 3.5,\n        fontface = \"bold\"\n    ) +\n    scale_fill_manual(\n        values = c(\"ç”·æ€§ç”¨æˆ·\" = \"#4f46e5\", \"å¥³æ€§ç”¨æˆ·\" = \"#ec4899\")\n    ) +\n    scale_x_continuous(\n        labels = function(x) comma(abs(x)),\n        limits = c(-60000, 60000)\n    ) +\n    labs(\n        title = \"ç”µå•†è½¬åŒ–æ¼æ–— - æ€§åˆ«å¯¹æ¯”\",\n        x = \"ç”¨æˆ·æ•°é‡\",\n        y = NULL,\n        fill = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        panel.grid.major.y = element_blank(),\n        legend.position = \"top\",\n        plot.title = element_text(face = \"bold\", size = 14)\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "äººå£é‡‘å­—å¡”å›¾"
    ]
  },
  {
    "objectID": "2038-bindpyramid.html#å®ç”¨å‡½æ•°å°è£…",
    "href": "2038-bindpyramid.html#å®ç”¨å‡½æ•°å°è£…",
    "title": "Rè¯­è¨€äººå£é‡‘å­—å¡”å›¾ç»˜åˆ¶",
    "section": "å®ç”¨å‡½æ•°å°è£…",
    "text": "å®ç”¨å‡½æ•°å°è£…\n\n#' å¿«é€Ÿç»˜åˆ¶äººå£é‡‘å­—å¡”å›¾\n#' @param data æ•°æ®æ¡†ï¼Œéœ€åŒ…å« age, gender, value åˆ—\n#' @param age_col å¹´é¾„åˆ—å\n#' @param gender_col æ€§åˆ«åˆ—å\n#' @param value_col æ•°å€¼åˆ—å\n#' @param male_label ç”·æ€§æ ‡ç­¾\n#' @param female_label å¥³æ€§æ ‡ç­¾\n#' @param title æ ‡é¢˜\nplot_pyramid &lt;- function(data, age_col, gender_col, value_col,\n                         male_label = \"ç”·æ€§\", female_label = \"å¥³æ€§\",\n                         colors = c(\"#4f46e5\", \"#ec4899\"),\n                         title = NULL) {\n    data &lt;- data %&gt;%\n        mutate(\n            value_adj = ifelse(\n                .data[[gender_col]] == male_label,\n                -.data[[value_col]],\n                .data[[value_col]]\n            )\n        )\n\n    max_val &lt;- max(abs(data$value_adj)) * 1.1\n\n    ggplot(data, aes(\n        x = value_adj,\n        y = .data[[age_col]],\n        fill = .data[[gender_col]]\n    )) +\n        geom_col(width = 0.8) +\n        geom_vline(xintercept = 0, color = \"#374151\", linewidth = 0.8) +\n        scale_fill_manual(values = setNames(colors, c(male_label, female_label))) +\n        scale_x_continuous(\n            breaks = scales::breaks_extended(n = 7),\n            labels = abs,\n            limits = c(-max_val, max_val)\n        ) +\n        labs(title = title, x = NULL, y = NULL, fill = NULL) +\n        theme_minimal(base_size = 12) +\n        theme(\n            panel.grid.major.y = element_blank(),\n            legend.position = \"top\",\n            plot.title = element_text(face = \"bold\")\n        )\n}\n\n# ä½¿ç”¨ç¤ºä¾‹\nplot_pyramid(\n    population_data, \"age_group\", \"gender\", \"population\",\n    title = \"ä½¿ç”¨å°è£…å‡½æ•°ç»˜åˆ¶é‡‘å­—å¡”å›¾\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "äººå£é‡‘å­—å¡”å›¾"
    ]
  },
  {
    "objectID": "2038-bindpyramid.html#æ€»ç»“",
    "href": "2038-bindpyramid.html#æ€»ç»“",
    "title": "Rè¯­è¨€äººå£é‡‘å­—å¡”å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nåº”ç”¨åœºæ™¯\nè¯´æ˜\n\n\n\n\näººå£åˆ†æ\nå¹´é¾„-æ€§åˆ«ç»“æ„ï¼Œè€é¾„åŒ–è¶‹åŠ¿\n\n\nå®¢æˆ·ç”»åƒ\nç”¨æˆ·å¹´é¾„åˆ†å¸ƒ\n\n\næ¼æ–—åˆ†æ\nè½¬åŒ–é˜¶æ®µå¯¹æ¯”\n\n\næ—¶é—´å¯¹æ¯”\nå¤šæœŸç»“æ„å˜åŒ–\n\n\n\n\næ ¸å¿ƒæŠ€å·§\n\nç”·æ€§å–è´Ÿå€¼ï¼šifelse(gender == \"ç”·æ€§\", -value, value)\nåˆ»åº¦æ˜¾ç¤ºæ­£æ•°ï¼šlabels = abs\næœ‰åºå› å­ï¼šç¡®ä¿å¹´é¾„ç»„æ­£ç¡®æ’åº\nä¸­å¿ƒè½´ï¼šgeom_vline(xintercept = 0)\n\n\n\nç›¸å…³æ•™ç¨‹\n\nå‘æ•£å‹å›¾è¡¨ - ç±»ä¼¼çš„å¯¹ç§°ç»“æ„\næŸ±çŠ¶å›¾ä¸é¥¼å›¾ - åŸºç¡€æ¡å½¢å›¾\nç›´æ–¹å›¾ä¸å¯†åº¦å›¾ - åˆ†å¸ƒå¯è§†åŒ–",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "äººå£é‡‘å­—å¡”å›¾"
    ]
  },
  {
    "objectID": "2036-binddivergent.html",
    "href": "2036-binddivergent.html",
    "title": "Rè¯­è¨€å‘æ•£å‹å›¾è¡¨ç»˜åˆ¶",
    "section": "",
    "text": "å‘æ•£å‹å›¾è¡¨ï¼ˆDiverging Chartsï¼‰æ˜¯ä¸€ç±»ä»¥å‚è€ƒçº¿ä¸ºä¸­å¿ƒï¼Œå‘ä¸¤ä¾§å»¶ä¼¸å±•ç¤ºæ­£è´Ÿå€¼æˆ–é«˜ä½å·®å¼‚çš„å¯è§†åŒ–æ–¹å¼ã€‚å®ƒç‰¹åˆ«é€‚åˆå±•ç¤ºæ•°æ®ç›¸å¯¹äºæŸä¸ªåŸºå‡†å€¼çš„åç¦»ç¨‹åº¦ã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\næ­£è´Ÿå€¼å¯¹æ¯”\nç›ˆäºã€å¢å‡ã€è¶…é¢„ç®—/æœªè¾¾\n\n\næ»¡æ„åº¦è°ƒæŸ¥\né«˜äº/ä½äºä¸­æ€§å€¼çš„åˆ†å¸ƒ\n\n\nç›¸å¯¹å˜åŒ–\nåŒæ¯”å¢é•¿/ä¸‹é™\n\n\nåŸºå‡†åç¦»\nä¸å¹³å‡å€¼ã€ç›®æ ‡å€¼çš„å·®è·\n\n\n\n\n\n\n\n\n\nå›¾è¡¨ç±»å‹\nç‰¹ç‚¹\n\n\n\n\nå‘æ•£å‹æ¡å½¢å›¾\nä»¥0ä¸ºä¸­å¿ƒï¼Œæ­£è´Ÿæ¡å‘ä¸¤ä¾§å»¶ä¼¸\n\n\nå‘æ•£å‹æ£’æ£’ç³–å›¾\nè½»ç›ˆç‰ˆæœ¬çš„å‘æ•£æ¡å½¢å›¾\n\n\nå‘æ•£å‹ç‚¹å›¾\nç”¨ç‚¹æ ‡è®°åç¦»ç¨‹åº¦\n\n\nå‘æ•£å‹å †å æ¡å½¢å›¾\næå…‹ç‰¹é‡è¡¨å¯è§†åŒ–å¸¸ç”¨",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å‘æ•£å‹å›¾è¡¨"
    ]
  },
  {
    "objectID": "2036-binddivergent.html#ä»€ä¹ˆæ˜¯å‘æ•£å‹å›¾è¡¨",
    "href": "2036-binddivergent.html#ä»€ä¹ˆæ˜¯å‘æ•£å‹å›¾è¡¨",
    "title": "Rè¯­è¨€å‘æ•£å‹å›¾è¡¨ç»˜åˆ¶",
    "section": "",
    "text": "å‘æ•£å‹å›¾è¡¨ï¼ˆDiverging Chartsï¼‰æ˜¯ä¸€ç±»ä»¥å‚è€ƒçº¿ä¸ºä¸­å¿ƒï¼Œå‘ä¸¤ä¾§å»¶ä¼¸å±•ç¤ºæ­£è´Ÿå€¼æˆ–é«˜ä½å·®å¼‚çš„å¯è§†åŒ–æ–¹å¼ã€‚å®ƒç‰¹åˆ«é€‚åˆå±•ç¤ºæ•°æ®ç›¸å¯¹äºæŸä¸ªåŸºå‡†å€¼çš„åç¦»ç¨‹åº¦ã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\næ­£è´Ÿå€¼å¯¹æ¯”\nç›ˆäºã€å¢å‡ã€è¶…é¢„ç®—/æœªè¾¾\n\n\næ»¡æ„åº¦è°ƒæŸ¥\né«˜äº/ä½äºä¸­æ€§å€¼çš„åˆ†å¸ƒ\n\n\nç›¸å¯¹å˜åŒ–\nåŒæ¯”å¢é•¿/ä¸‹é™\n\n\nåŸºå‡†åç¦»\nä¸å¹³å‡å€¼ã€ç›®æ ‡å€¼çš„å·®è·\n\n\n\n\n\n\n\n\n\nå›¾è¡¨ç±»å‹\nç‰¹ç‚¹\n\n\n\n\nå‘æ•£å‹æ¡å½¢å›¾\nä»¥0ä¸ºä¸­å¿ƒï¼Œæ­£è´Ÿæ¡å‘ä¸¤ä¾§å»¶ä¼¸\n\n\nå‘æ•£å‹æ£’æ£’ç³–å›¾\nè½»ç›ˆç‰ˆæœ¬çš„å‘æ•£æ¡å½¢å›¾\n\n\nå‘æ•£å‹ç‚¹å›¾\nç”¨ç‚¹æ ‡è®°åç¦»ç¨‹åº¦\n\n\nå‘æ•£å‹å †å æ¡å½¢å›¾\næå…‹ç‰¹é‡è¡¨å¯è§†åŒ–å¸¸ç”¨",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å‘æ•£å‹å›¾è¡¨"
    ]
  },
  {
    "objectID": "2036-binddivergent.html#råŒ…å®‰è£…ä¸åŠ è½½",
    "href": "2036-binddivergent.html#råŒ…å®‰è£…ä¸åŠ è½½",
    "title": "Rè¯­è¨€å‘æ•£å‹å›¾è¡¨ç»˜åˆ¶",
    "section": "RåŒ…å®‰è£…ä¸åŠ è½½",
    "text": "RåŒ…å®‰è£…ä¸åŠ è½½\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(forcats)\nlibrary(scales)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å‘æ•£å‹å›¾è¡¨"
    ]
  },
  {
    "objectID": "2036-binddivergent.html#å‡†å¤‡ç¤ºä¾‹æ•°æ®",
    "href": "2036-binddivergent.html#å‡†å¤‡ç¤ºä¾‹æ•°æ®",
    "title": "Rè¯­è¨€å‘æ•£å‹å›¾è¡¨ç»˜åˆ¶",
    "section": "å‡†å¤‡ç¤ºä¾‹æ•°æ®",
    "text": "å‡†å¤‡ç¤ºä¾‹æ•°æ®\n\n# åˆ›å»ºç¤ºä¾‹æ•°æ®ï¼šå„éƒ¨é—¨ä¸šç»©ç›¸å¯¹äºç›®æ ‡çš„åç¦»\nperformance_data &lt;- data.frame(\n    department = c(\n        \"é”€å”®ä¸€éƒ¨\", \"é”€å”®äºŒéƒ¨\", \"å¸‚åœºéƒ¨\", \"ç ”å‘éƒ¨\", \"è¿è¥éƒ¨\",\n        \"å®¢æœéƒ¨\", \"è´¢åŠ¡éƒ¨\", \"äººåŠ›èµ„æº\", \"é‡‡è´­éƒ¨\", \"ITéƒ¨é—¨\"\n    ),\n    actual = c(125, 118, 95, 105, 88, 102, 97, 110, 78, 115),\n    target = rep(100, 10)\n)\n\n# è®¡ç®—åç¦»å€¼å’Œåˆ†ç»„\nperformance_data &lt;- performance_data %&gt;%\n    mutate(\n        deviation = actual - target, # åç¦»å€¼\n        status = ifelse(deviation &gt;= 0, \"è¶…é¢å®Œæˆ\", \"æœªè¾¾æ ‡\"),\n        department = fct_reorder(department, deviation) # æŒ‰åç¦»å€¼æ’åº\n    )\n\nperformance_data\n\n   department actual target deviation   status\n1    é”€å”®ä¸€éƒ¨    125    100        25 è¶…é¢å®Œæˆ\n2    é”€å”®äºŒéƒ¨    118    100        18 è¶…é¢å®Œæˆ\n3      å¸‚åœºéƒ¨     95    100        -5   æœªè¾¾æ ‡\n4      ç ”å‘éƒ¨    105    100         5 è¶…é¢å®Œæˆ\n5      è¿è¥éƒ¨     88    100       -12   æœªè¾¾æ ‡\n6      å®¢æœéƒ¨    102    100         2 è¶…é¢å®Œæˆ\n7      è´¢åŠ¡éƒ¨     97    100        -3   æœªè¾¾æ ‡\n8    äººåŠ›èµ„æº    110    100        10 è¶…é¢å®Œæˆ\n9      é‡‡è´­éƒ¨     78    100       -22   æœªè¾¾æ ‡\n10     ITéƒ¨é—¨    115    100        15 è¶…é¢å®Œæˆ",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å‘æ•£å‹å›¾è¡¨"
    ]
  },
  {
    "objectID": "2036-binddivergent.html#åŸºç¡€å‘æ•£å‹æ¡å½¢å›¾",
    "href": "2036-binddivergent.html#åŸºç¡€å‘æ•£å‹æ¡å½¢å›¾",
    "title": "Rè¯­è¨€å‘æ•£å‹å›¾è¡¨ç»˜åˆ¶",
    "section": "åŸºç¡€å‘æ•£å‹æ¡å½¢å›¾",
    "text": "åŸºç¡€å‘æ•£å‹æ¡å½¢å›¾\nå‘æ•£å‹æ¡å½¢å›¾çš„æ ¸å¿ƒæ˜¯å°†æ•°æ®åˆ†ä¸ºæ­£è´Ÿä¸¤éƒ¨åˆ†ï¼Œä»¥0ä¸ºåŸºå‡†çº¿ï¼š\n\nggplot(performance_data, aes(x = deviation, y = department, fill = status)) +\n    geom_col(width = 0.7) +\n    # æ·»åŠ åŸºå‡†çº¿\n    geom_vline(xintercept = 0, color = \"#1f2937\", linewidth = 0.8) +\n    # é¢œè‰²è®¾ç½®\n    scale_fill_manual(\n        values = c(\"è¶…é¢å®Œæˆ\" = \"#10b981\", \"æœªè¾¾æ ‡\" = \"#ef4444\")\n    ) +\n    labs(\n        title = \"å„éƒ¨é—¨ä¸šç»©å®Œæˆæƒ…å†µ\",\n        subtitle = \"ç›¸å¯¹äºç›®æ ‡å€¼çš„åç¦»ï¼ˆ%ï¼‰\",\n        x = \"åç¦»ç›®æ ‡å€¼ï¼ˆ%ï¼‰\",\n        y = NULL,\n        fill = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        panel.grid.major.y = element_blank(),\n        legend.position = \"top\",\n        plot.title = element_text(face = \"bold\", size = 14)\n    )\n\n\n\n\n\n\n\n\n\nä»£ç è§£æ\n\n\n\nç»„ä»¶\nä½œç”¨\n\n\n\n\ngeom_col()\nç»˜åˆ¶æ¡å½¢å›¾ï¼Œæ­£å€¼å‘å³ã€è´Ÿå€¼å‘å·¦\n\n\ngeom_vline(xintercept = 0)\næ·»åŠ åŸºå‡†çº¿\n\n\nfct_reorder()\næŒ‰åç¦»å€¼æ’åºä¾¿äºé˜…è¯»\n\n\nscale_fill_manual()\nè‡ªå®šä¹‰æ­£è´Ÿå€¼é¢œè‰²",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å‘æ•£å‹å›¾è¡¨"
    ]
  },
  {
    "objectID": "2036-binddivergent.html#ç¾åŒ–å‘æ•£å‹æ¡å½¢å›¾",
    "href": "2036-binddivergent.html#ç¾åŒ–å‘æ•£å‹æ¡å½¢å›¾",
    "title": "Rè¯­è¨€å‘æ•£å‹å›¾è¡¨ç»˜åˆ¶",
    "section": "ç¾åŒ–å‘æ•£å‹æ¡å½¢å›¾",
    "text": "ç¾åŒ–å‘æ•£å‹æ¡å½¢å›¾\n\næ·»åŠ æ•°å€¼æ ‡ç­¾\n\nggplot(performance_data, aes(x = deviation, y = department, fill = status)) +\n    geom_col(width = 0.7) +\n    geom_vline(xintercept = 0, color = \"#374151\", linewidth = 1) +\n    # æ·»åŠ æ•°å€¼æ ‡ç­¾\n    geom_text(\n        aes(\n            label = paste0(ifelse(deviation &gt; 0, \"+\", \"\"), deviation, \"%\"),\n            hjust = ifelse(deviation &gt;= 0, -0.2, 1.2)\n        ),\n        size = 3.5,\n        fontface = \"bold\"\n    ) +\n    scale_fill_manual(\n        values = c(\"è¶…é¢å®Œæˆ\" = \"#10b981\", \"æœªè¾¾æ ‡\" = \"#ef4444\")\n    ) +\n    scale_x_continuous(\n        limits = c(-30, 35),\n        breaks = seq(-30, 30, by = 10)\n    ) +\n    labs(\n        title = \"å„éƒ¨é—¨ä¸šç»©å®Œæˆæƒ…å†µ\",\n        subtitle = \"ç›¸å¯¹äºç›®æ ‡å€¼çš„åç¦»ç™¾åˆ†æ¯”\",\n        x = NULL,\n        y = NULL,\n        fill = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        panel.grid.major.y = element_blank(),\n        panel.grid.minor = element_blank(),\n        legend.position = \"top\",\n        plot.title = element_text(face = \"bold\", size = 14),\n        axis.text.x = element_blank()\n    )\n\n\n\n\n\n\n\n\n\n\næ¸å˜è‰²ç€è‰²\nä½¿ç”¨é¢œè‰²æ¸å˜æ¥è¡¨ç¤ºåç¦»ç¨‹åº¦ï¼š\n\nggplot(performance_data, aes(x = deviation, y = department, fill = deviation)) +\n    geom_col(width = 0.7) +\n    geom_vline(xintercept = 0, color = \"#374151\", linewidth = 1) +\n    geom_text(\n        aes(\n            label = paste0(ifelse(deviation &gt; 0, \"+\", \"\"), deviation),\n            hjust = ifelse(deviation &gt;= 0, -0.2, 1.2)\n        ),\n        size = 3.5,\n        color = \"#374151\"\n    ) +\n    # å‘æ•£å‹æ¸å˜è‰²\n    scale_fill_gradient2(\n        low = \"#ef4444\", # è´Ÿå€¼é¢œè‰²\n        mid = \"#f5f5f4\", # ä¸­é—´å€¼é¢œè‰²\n        high = \"#10b981\", # æ­£å€¼é¢œè‰²\n        midpoint = 0 # ä¸­ç‚¹è®¾ä¸º0\n    ) +\n    scale_x_continuous(limits = c(-30, 35)) +\n    labs(\n        title = \"ä¸šç»©åç¦»çƒ­å›¾\",\n        subtitle = \"é¢œè‰²æ·±æµ…è¡¨ç¤ºåç¦»ç¨‹åº¦\",\n        x = \"åç¦»ç›®æ ‡å€¼ï¼ˆ%ï¼‰\",\n        y = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        panel.grid.major.y = element_blank(),\n        legend.position = \"none\",\n        plot.title = element_text(face = \"bold\")\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å‘æ•£å‹å›¾è¡¨"
    ]
  },
  {
    "objectID": "2036-binddivergent.html#å‘æ•£å‹æ£’æ£’ç³–å›¾",
    "href": "2036-binddivergent.html#å‘æ•£å‹æ£’æ£’ç³–å›¾",
    "title": "Rè¯­è¨€å‘æ•£å‹å›¾è¡¨ç»˜åˆ¶",
    "section": "å‘æ•£å‹æ£’æ£’ç³–å›¾",
    "text": "å‘æ•£å‹æ£’æ£’ç³–å›¾\nå°†æ¡å½¢å›¾æ”¹ä¸ºæ£’æ£’ç³–å›¾ï¼Œè§†è§‰æ›´è½»ç›ˆï¼š\n\nggplot(performance_data, aes(x = deviation, y = department, color = status)) +\n    # ç»˜åˆ¶çº¿æ®µ\n    geom_segment(\n        aes(x = 0, xend = deviation, y = department, yend = department),\n        linewidth = 1.2\n    ) +\n    # ç»˜åˆ¶ç‚¹\n    geom_point(size = 5) +\n    # åŸºå‡†çº¿\n    geom_vline(xintercept = 0, color = \"#374151\", linewidth = 0.8) +\n    # æ•°å€¼æ ‡ç­¾\n    geom_text(\n        aes(\n            label = paste0(ifelse(deviation &gt; 0, \"+\", \"\"), deviation),\n            hjust = ifelse(deviation &gt;= 0, -0.8, 1.8)\n        ),\n        size = 3.5,\n        show.legend = FALSE\n    ) +\n    scale_color_manual(\n        values = c(\"è¶…é¢å®Œæˆ\" = \"#10b981\", \"æœªè¾¾æ ‡\" = \"#ef4444\")\n    ) +\n    scale_x_continuous(limits = c(-35, 40)) +\n    labs(\n        title = \"å‘æ•£å‹æ£’æ£’ç³–å›¾\",\n        subtitle = \"å„éƒ¨é—¨ä¸šç»©åç¦»æƒ…å†µ\",\n        x = \"åç¦»ç›®æ ‡å€¼ï¼ˆ%ï¼‰\",\n        y = NULL,\n        color = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        panel.grid.major.y = element_blank(),\n        legend.position = \"top\",\n        plot.title = element_text(face = \"bold\")\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å‘æ•£å‹å›¾è¡¨"
    ]
  },
  {
    "objectID": "2036-binddivergent.html#æå…‹ç‰¹é‡è¡¨å‘æ•£å‹å †å å›¾",
    "href": "2036-binddivergent.html#æå…‹ç‰¹é‡è¡¨å‘æ•£å‹å †å å›¾",
    "title": "Rè¯­è¨€å‘æ•£å‹å›¾è¡¨ç»˜åˆ¶",
    "section": "æå…‹ç‰¹é‡è¡¨å‘æ•£å‹å †å å›¾",
    "text": "æå…‹ç‰¹é‡è¡¨å‘æ•£å‹å †å å›¾\næå…‹ç‰¹é‡è¡¨ï¼ˆLikert Scaleï¼‰å¸¸ç”¨äºé—®å·è°ƒæŸ¥ï¼Œå‘æ•£å‹å †å å›¾æ˜¯å±•ç¤ºæ­¤ç±»æ•°æ®çš„ç»å…¸æ–¹å¼ï¼š\n\n# åˆ›å»ºæå…‹ç‰¹é‡è¡¨æ•°æ®\nlikert_data &lt;- data.frame(\n    question = c(\"äº§å“è´¨é‡\", \"æœåŠ¡æ€åº¦\", \"äº¤ä»˜é€Ÿåº¦\", \"ä»·æ ¼åˆç†\", \"å”®åæ”¯æŒ\"),\n    strongly_disagree = c(5, 3, 8, 12, 6),\n    disagree = c(12, 8, 15, 18, 11),\n    neutral = c(18, 15, 22, 20, 25),\n    agree = c(35, 38, 32, 30, 33),\n    strongly_agree = c(30, 36, 23, 20, 25)\n)\n\n# è½¬æ¢ä¸ºé•¿æ ¼å¼\nlibrary(tidyr)\n\nlikert_long &lt;- likert_data %&gt;%\n    pivot_longer(\n        cols = -question,\n        names_to = \"response\",\n        values_to = \"percentage\"\n    ) %&gt;%\n    mutate(\n        response = factor(response, levels = c(\n            \"strongly_disagree\", \"disagree\", \"neutral\", \"agree\", \"strongly_agree\"\n        )),\n        # å‘æ•£å‹å¤„ç†ï¼šè´Ÿé¢æ”¾å·¦è¾¹ï¼Œæ­£é¢æ”¾å³è¾¹\n        percentage_adj = case_when(\n            response %in% c(\"strongly_disagree\", \"disagree\") ~ -percentage,\n            response == \"neutral\" ~ 0,\n            TRUE ~ percentage\n        ),\n        sentiment = case_when(\n            response %in% c(\"strongly_disagree\", \"disagree\") ~ \"è´Ÿé¢\",\n            response == \"neutral\" ~ \"ä¸­æ€§\",\n            TRUE ~ \"æ­£é¢\"\n        )\n    )\n\n# è®¡ç®—å †å ä½ç½®\nlikert_stacked &lt;- likert_long %&gt;%\n    filter(response != \"neutral\") %&gt;%\n    group_by(question, sentiment) %&gt;%\n    mutate(\n        position = cumsum(abs(percentage_adj)) - abs(percentage_adj) / 2,\n        position = ifelse(sentiment == \"è´Ÿé¢\", -position, position)\n    ) %&gt;%\n    ungroup()\n\n# ç»˜åˆ¶å‘æ•£å‹å †å å›¾\nggplot(likert_stacked, aes(y = question)) +\n    geom_col(\n        aes(x = percentage_adj, fill = response),\n        position = \"stack\",\n        width = 0.7\n    ) +\n    geom_vline(xintercept = 0, color = \"#374151\", linewidth = 1) +\n    scale_fill_manual(\n        values = c(\n            \"strongly_disagree\" = \"#dc2626\",\n            \"disagree\" = \"#f87171\",\n            \"neutral\" = \"#d4d4d4\",\n            \"agree\" = \"#4ade80\",\n            \"strongly_agree\" = \"#16a34a\"\n        ),\n        labels = c(\"éå¸¸ä¸åŒæ„\", \"ä¸åŒæ„\", \"ä¸­ç«‹\", \"åŒæ„\", \"éå¸¸åŒæ„\")\n    ) +\n    scale_x_continuous(\n        limits = c(-50, 80),\n        breaks = seq(-40, 80, by = 20),\n        labels = abs\n    ) +\n    labs(\n        title = \"å®¢æˆ·æ»¡æ„åº¦è°ƒæŸ¥ç»“æœ\",\n        subtitle = \"å‘æ•£å‹æå…‹ç‰¹é‡è¡¨å¯è§†åŒ–\",\n        x = \"å“åº”æ¯”ä¾‹ï¼ˆ%ï¼‰\",\n        y = NULL,\n        fill = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        panel.grid.major.y = element_blank(),\n        legend.position = \"top\",\n        plot.title = element_text(face = \"bold\")\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å‘æ•£å‹å›¾è¡¨"
    ]
  },
  {
    "objectID": "2036-binddivergent.html#è´è¶å›¾-é‡‘å­—å¡”å¯¹æ¯”å›¾",
    "href": "2036-binddivergent.html#è´è¶å›¾-é‡‘å­—å¡”å¯¹æ¯”å›¾",
    "title": "Rè¯­è¨€å‘æ•£å‹å›¾è¡¨ç»˜åˆ¶",
    "section": "è´è¶å›¾ / é‡‘å­—å¡”å¯¹æ¯”å›¾",
    "text": "è´è¶å›¾ / é‡‘å­—å¡”å¯¹æ¯”å›¾\nè´è¶å›¾æ˜¯ä¸€ç§ç‰¹æ®Šçš„å‘æ•£å‹å›¾è¡¨ï¼Œç”¨äºä¸¤ç»„æ•°æ®çš„å¯¹ç§°æ¯”è¾ƒï¼š\n\n# åˆ›å»ºå¯¹æ¯”æ•°æ®\ncompare_data &lt;- data.frame(\n    category = c(\"18-24å²\", \"25-34å²\", \"35-44å²\", \"45-54å²\", \"55-64å²\", \"65å²+\"),\n    group_a = c(15, 28, 32, 25, 18, 12),\n    group_b = c(18, 35, 28, 22, 15, 10)\n)\n\n# è½¬æ¢ä¸ºå‘æ•£å‹æ ¼å¼\nbutterfly_data &lt;- compare_data %&gt;%\n    mutate(\n        group_a = -group_a, # Aç»„æ”¾å·¦è¾¹ï¼ˆè´Ÿå€¼ï¼‰\n        category = factor(category, levels = category)\n    ) %&gt;%\n    pivot_longer(\n        cols = c(group_a, group_b),\n        names_to = \"group\",\n        values_to = \"value\"\n    ) %&gt;%\n    mutate(\n        group_label = ifelse(group == \"group_a\", \"2022å¹´\", \"2023å¹´\")\n    )\n\nggplot(butterfly_data, aes(x = value, y = category, fill = group_label)) +\n    geom_col(width = 0.7) +\n    geom_vline(xintercept = 0, color = \"#374151\", linewidth = 1) +\n    # æ·»åŠ æ ‡ç­¾\n    geom_text(\n        aes(\n            label = abs(value),\n            hjust = ifelse(value &lt; 0, 1.2, -0.2)\n        ),\n        size = 3.5,\n        color = \"#374151\"\n    ) +\n    scale_fill_manual(values = c(\"2022å¹´\" = \"#818cf8\", \"2023å¹´\" = \"#4f46e5\")) +\n    scale_x_continuous(\n        limits = c(-40, 45),\n        breaks = seq(-40, 40, by = 10),\n        labels = abs\n    ) +\n    labs(\n        title = \"ç”¨æˆ·å¹´é¾„åˆ†å¸ƒå˜åŒ–\",\n        subtitle = \"è´è¶å›¾å¯¹æ¯” 2022 vs 2023\",\n        x = \"ç”¨æˆ·æ¯”ä¾‹ï¼ˆ%ï¼‰\",\n        y = NULL,\n        fill = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        panel.grid.major.y = element_blank(),\n        legend.position = \"top\",\n        plot.title = element_text(face = \"bold\")\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å‘æ•£å‹å›¾è¡¨"
    ]
  },
  {
    "objectID": "2036-binddivergent.html#å®ç”¨å‡½æ•°å°è£…",
    "href": "2036-binddivergent.html#å®ç”¨å‡½æ•°å°è£…",
    "title": "Rè¯­è¨€å‘æ•£å‹å›¾è¡¨ç»˜åˆ¶",
    "section": "å®ç”¨å‡½æ•°å°è£…",
    "text": "å®ç”¨å‡½æ•°å°è£…\nåˆ›å»ºä¸€ä¸ªå¿«é€Ÿç»˜åˆ¶å‘æ•£å‹æ¡å½¢å›¾çš„å‡½æ•°ï¼š\n\n#' å¿«é€Ÿç»˜åˆ¶å‘æ•£å‹æ¡å½¢å›¾\n#' @param data æ•°æ®æ¡†\n#' @param y_var åˆ†ç±»å˜é‡åï¼ˆå­—ç¬¦ä¸²ï¼‰\n#' @param value_var æ•°å€¼å˜é‡åï¼ˆå­—ç¬¦ä¸²ï¼‰\n#' @param positive_color æ­£å€¼é¢œè‰²\n#' @param negative_color è´Ÿå€¼é¢œè‰²\n#' @param title å›¾è¡¨æ ‡é¢˜\nplot_diverging_bar &lt;- function(data, y_var, value_var,\n                               positive_color = \"#10b981\",\n                               negative_color = \"#ef4444\",\n                               title = NULL) {\n    data &lt;- data %&gt;%\n        mutate(\n            status = ifelse(.data[[value_var]] &gt;= 0, \"positive\", \"negative\"),\n            !!sym(y_var) := fct_reorder(.data[[y_var]], .data[[value_var]])\n        )\n\n    ggplot(data, aes(x = .data[[value_var]], y = .data[[y_var]], fill = status)) +\n        geom_col(width = 0.7) +\n        geom_vline(xintercept = 0, color = \"#374151\", linewidth = 1) +\n        scale_fill_manual(\n            values = c(\"positive\" = positive_color, \"negative\" = negative_color)\n        ) +\n        labs(title = title, x = NULL, y = NULL) +\n        theme_minimal(base_size = 12) +\n        theme(\n            panel.grid.major.y = element_blank(),\n            legend.position = \"none\",\n            plot.title = element_text(face = \"bold\")\n        )\n}\n\n# ä½¿ç”¨ç¤ºä¾‹\nplot_diverging_bar(\n    performance_data, \"department\", \"deviation\",\n    title = \"ä½¿ç”¨å°è£…å‡½æ•°ç»˜åˆ¶å‘æ•£å‹æ¡å½¢å›¾\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å‘æ•£å‹å›¾è¡¨"
    ]
  },
  {
    "objectID": "2036-binddivergent.html#æ€»ç»“",
    "href": "2036-binddivergent.html#æ€»ç»“",
    "title": "Rè¯­è¨€å‘æ•£å‹å›¾è¡¨ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\n\n\n\n\n\nå›¾è¡¨ç±»å‹\né€‚ç”¨åœºæ™¯\næ ¸å¿ƒæŠ€å·§\n\n\n\n\nå‘æ•£å‹æ¡å½¢å›¾\næ­£è´Ÿå€¼å¯¹æ¯”\ngeom_col() + geom_vline(xintercept=0)\n\n\nå‘æ•£å‹æ£’æ£’ç³–å›¾\nè½»ç›ˆç‰ˆæ­£è´Ÿå¯¹æ¯”\ngeom_segment() + geom_point()\n\n\næ¸å˜å‘æ•£å›¾\nå¼ºè°ƒåç¦»ç¨‹åº¦\nscale_fill_gradient2()\n\n\næå…‹ç‰¹é‡è¡¨å›¾\né—®å·è°ƒæŸ¥ç»“æœ\nå‘æ•£å‹å †å æ¡å½¢å›¾\n\n\nè´è¶å›¾\nä¸¤ç»„å¯¹ç§°æ¯”è¾ƒ\nä¸€ç»„å–è´Ÿå€¼\n\n\n\n\nè®¾è®¡å»ºè®®\n\nä¿æŒåŸºå‡†çº¿æ¸…æ™°ï¼š0çº¿æˆ–å‚è€ƒçº¿è¦æ˜æ˜¾\né¢œè‰²å¯¹æ¯”é²œæ˜ï¼šæ­£è´Ÿä½¿ç”¨å¯¹æ¯”è‰²ï¼ˆç»¿/çº¢ã€è“/æ©™ï¼‰\næ’åºå¢å¼ºå¯è¯»æ€§ï¼šæŒ‰æ•°å€¼å¤§å°æ’åˆ—\næ·»åŠ æ•°å€¼æ ‡ç­¾ï¼šæ–¹ä¾¿ç²¾ç¡®é˜…è¯»\nå¯¹ç§°è½´åˆ»åº¦ï¼šä½¿ç”¨ labels = abs è®©å·¦å³åˆ»åº¦æ˜¾ç¤ºæ­£æ•°\n\n\n\nç›¸å…³æ•™ç¨‹\n\næŸ±çŠ¶å›¾ä¸é¥¼å›¾ - åŸºç¡€æ¡å½¢å›¾\næ£’æ£’ç³–å›¾ä¸æ’åºå›¾ - è½»ç›ˆç‰ˆæ¡å½¢å›¾\näººå£é‡‘å­—å¡”å›¾ - ç±»ä¼¼çš„å¯¹ç§°ç»“æ„",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å‘æ•£å‹å›¾è¡¨"
    ]
  },
  {
    "objectID": "2034-ggguides.html",
    "href": "2034-ggguides.html",
    "title": "ggguides: ç®€åŒ– ggplot2 å›¾ä¾‹æ“ä½œ",
    "section": "",
    "text": "ggguides æ˜¯ä¸€ä¸ªç®€åŒ– ggplot2 å›¾ä¾‹ï¼ˆlegendï¼‰å’Œå¼•å¯¼ï¼ˆguideï¼‰æ“ä½œçš„ R åŒ…ã€‚å®ƒæä¾›äº†ä¸€ç³»åˆ—ä¸€è¡Œä»£ç å‡½æ•°ï¼Œè®©åŸæœ¬å¤æ‚çš„å›¾ä¾‹è°ƒæ•´å˜å¾—ç®€å•ç›´è§‚ã€‚\n\n\nåœ¨ ggplot2 ä¸­ï¼Œè°ƒæ•´å›¾ä¾‹ä½ç½®ã€æ ·å¼ã€åˆå¹¶å¤šä¸ªå›¾ä¾‹ç­‰æ“ä½œé€šå¸¸éœ€è¦ç¼–å†™å¤§é‡ä»£ç ã€‚ggguides å°†è¿™äº›å¸¸è§æ“ä½œå°è£…æˆç®€æ´çš„å‡½æ•°ï¼š\n\n\n\nä¼ ç»Ÿæ–¹å¼\nggguides æ–¹å¼\n\n\n\n\ntheme(legend.position = \"bottom\")\nlegend_bottom()\n\n\nå¤æ‚çš„ guides() + theme() ç»„åˆ\nlegend_horizontal()\n\n\nå¤šå±‚åµŒå¥—è®¾ç½®\nä¸€è¡Œå‡½æ•°è°ƒç”¨\n\n\n\n\n\n\n\nå›¾ä¾‹å®šä½ï¼šå¿«é€Ÿè®¾ç½®å›¾ä¾‹ä½ç½®\nå›¾ä¾‹æ ·å¼ï¼šè°ƒæ•´æ–¹å‘ã€æ ‡é¢˜ã€æ–‡æœ¬æ ·å¼\nå›¾ä¾‹æ¢è¡Œï¼šè‡ªåŠ¨æˆ–æ‰‹åŠ¨è®¾ç½®å›¾ä¾‹æ¢è¡Œ\npatchwork é›†æˆï¼šè·¨å¤šå›¾æ”¶é›†å’Œç»Ÿä¸€å›¾ä¾‹",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "ggguides - å›¾ä¾‹ç®€åŒ–"
    ]
  },
  {
    "objectID": "2034-ggguides.html#ä»€ä¹ˆæ˜¯-ggguides",
    "href": "2034-ggguides.html#ä»€ä¹ˆæ˜¯-ggguides",
    "title": "ggguides: ç®€åŒ– ggplot2 å›¾ä¾‹æ“ä½œ",
    "section": "",
    "text": "ggguides æ˜¯ä¸€ä¸ªç®€åŒ– ggplot2 å›¾ä¾‹ï¼ˆlegendï¼‰å’Œå¼•å¯¼ï¼ˆguideï¼‰æ“ä½œçš„ R åŒ…ã€‚å®ƒæä¾›äº†ä¸€ç³»åˆ—ä¸€è¡Œä»£ç å‡½æ•°ï¼Œè®©åŸæœ¬å¤æ‚çš„å›¾ä¾‹è°ƒæ•´å˜å¾—ç®€å•ç›´è§‚ã€‚\n\n\nåœ¨ ggplot2 ä¸­ï¼Œè°ƒæ•´å›¾ä¾‹ä½ç½®ã€æ ·å¼ã€åˆå¹¶å¤šä¸ªå›¾ä¾‹ç­‰æ“ä½œé€šå¸¸éœ€è¦ç¼–å†™å¤§é‡ä»£ç ã€‚ggguides å°†è¿™äº›å¸¸è§æ“ä½œå°è£…æˆç®€æ´çš„å‡½æ•°ï¼š\n\n\n\nä¼ ç»Ÿæ–¹å¼\nggguides æ–¹å¼\n\n\n\n\ntheme(legend.position = \"bottom\")\nlegend_bottom()\n\n\nå¤æ‚çš„ guides() + theme() ç»„åˆ\nlegend_horizontal()\n\n\nå¤šå±‚åµŒå¥—è®¾ç½®\nä¸€è¡Œå‡½æ•°è°ƒç”¨\n\n\n\n\n\n\n\nå›¾ä¾‹å®šä½ï¼šå¿«é€Ÿè®¾ç½®å›¾ä¾‹ä½ç½®\nå›¾ä¾‹æ ·å¼ï¼šè°ƒæ•´æ–¹å‘ã€æ ‡é¢˜ã€æ–‡æœ¬æ ·å¼\nå›¾ä¾‹æ¢è¡Œï¼šè‡ªåŠ¨æˆ–æ‰‹åŠ¨è®¾ç½®å›¾ä¾‹æ¢è¡Œ\npatchwork é›†æˆï¼šè·¨å¤šå›¾æ”¶é›†å’Œç»Ÿä¸€å›¾ä¾‹",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "ggguides - å›¾ä¾‹ç®€åŒ–"
    ]
  },
  {
    "objectID": "2034-ggguides.html#å®‰è£…ä¸åŠ è½½",
    "href": "2034-ggguides.html#å®‰è£…ä¸åŠ è½½",
    "title": "ggguides: ç®€åŒ– ggplot2 å›¾ä¾‹æ“ä½œ",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\nlibrary(ggguides)\nlibrary(ggplot2)\nlibrary(patchwork)\nlibrary(dplyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "ggguides - å›¾ä¾‹ç®€åŒ–"
    ]
  },
  {
    "objectID": "2034-ggguides.html#åŸºç¡€å›¾ä¾‹å®šä½",
    "href": "2034-ggguides.html#åŸºç¡€å›¾ä¾‹å®šä½",
    "title": "ggguides: ç®€åŒ– ggplot2 å›¾ä¾‹æ“ä½œ",
    "section": "åŸºç¡€å›¾ä¾‹å®šä½",
    "text": "åŸºç¡€å›¾ä¾‹å®šä½\n\nå››ä¸ªæ–¹å‘å®šä½\n\n# åˆ›å»ºåŸºç¡€å›¾\np &lt;- ggplot(iris, aes(Sepal.Length, Sepal.Width, color = Species)) +\n    geom_point(size = 3) +\n    theme_minimal()\n\n# å›¾ä¾‹åœ¨åº•éƒ¨\np + legend_bottom()\n\n\n\n\n\n\n\n\n\n# å›¾ä¾‹åœ¨é¡¶éƒ¨\np + legend_top()\n\n\n\n\n\n\n\n\n\n# å›¾ä¾‹åœ¨å·¦ä¾§\np + legend_left()\n\n\n\n\n\n\n\n\n\n# å›¾ä¾‹åœ¨å³ä¾§ï¼ˆé»˜è®¤ï¼‰\np + legend_right()\n\n\n\n\n\n\n\n\n\n\néšè—å›¾ä¾‹\n\n# éšè—æ‰€æœ‰å›¾ä¾‹\np + legend_none()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "ggguides - å›¾ä¾‹ç®€åŒ–"
    ]
  },
  {
    "objectID": "2034-ggguides.html#å›¾ä¾‹æ ·å¼è°ƒæ•´",
    "href": "2034-ggguides.html#å›¾ä¾‹æ ·å¼è°ƒæ•´",
    "title": "ggguides: ç®€åŒ– ggplot2 å›¾ä¾‹æ“ä½œ",
    "section": "å›¾ä¾‹æ ·å¼è°ƒæ•´",
    "text": "å›¾ä¾‹æ ·å¼è°ƒæ•´\n\næ°´å¹³/å‚ç›´æ–¹å‘\n\n# æ°´å¹³æ’åˆ—çš„å›¾ä¾‹\np + legend_bottom() + legend_horizontal()\n\n\n\n\n\n\n\n\n\n# å‚ç›´æ’åˆ—çš„å›¾ä¾‹ï¼ˆé»˜è®¤ï¼‰\np + legend_bottom() + legend_vertical()\n\n\n\n\n\n\n\n\n\n\nå›¾ä¾‹æ ‡é¢˜è°ƒæ•´\n\n# éšè—å›¾ä¾‹æ ‡é¢˜ï¼ˆä½¿ç”¨ themeï¼‰\np +\n    legend_bottom() +\n    theme(legend.title = element_blank())\n\n\n\n\n\n\n\n\n\n# è‡ªå®šä¹‰å›¾ä¾‹æ ‡é¢˜æ ·å¼\np +\n    legend_bottom() +\n    theme(\n        legend.title = element_text(face = \"bold\", size = 12)\n    )\n\n\n\n\n\n\n\n\n\n\nå›¾ä¾‹æ¢è¡Œ\nå½“å›¾ä¾‹é¡¹ç›®è¿‡å¤šæ—¶ï¼Œå¯ä»¥è®¾ç½®æ¢è¡Œï¼š\n\n# ä½¿ç”¨æ›´å¤šç±»åˆ«çš„æ•°æ®\np2 &lt;- ggplot(mpg, aes(displ, hwy, color = class)) +\n    geom_point(size = 2) +\n    theme_minimal()\n\n# è‡ªåŠ¨æ¢è¡Œï¼ˆæ¯è¡Œ 3 ä¸ªï¼‰\np2 +\n    legend_bottom() +\n    legend_wrap(nrow = 3)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "ggguides - å›¾ä¾‹ç®€åŒ–"
    ]
  },
  {
    "objectID": "2034-ggguides.html#å¤šç§ç¾å­¦çš„å›¾ä¾‹",
    "href": "2034-ggguides.html#å¤šç§ç¾å­¦çš„å›¾ä¾‹",
    "title": "ggguides: ç®€åŒ– ggplot2 å›¾ä¾‹æ“ä½œ",
    "section": "å¤šç§ç¾å­¦çš„å›¾ä¾‹",
    "text": "å¤šç§ç¾å­¦çš„å›¾ä¾‹\nå½“å›¾å½¢æœ‰å¤šä¸ªç¾å­¦æ˜ å°„æ—¶ï¼Œggguides å¯ä»¥ç»Ÿä¸€ç®¡ç†å®ƒä»¬ï¼š\n\n# æœ‰é¢œè‰²å’Œå½¢çŠ¶ä¸¤ä¸ªå›¾ä¾‹\np3 &lt;- ggplot(iris, aes(Sepal.Length, Sepal.Width,\n    color = Species, shape = Species\n)) +\n    geom_point(size = 3) +\n    theme_minimal()\n\np3\n\n\n\n\n\n\n\n\n\n# å°†ä¸¤ä¸ªå›¾ä¾‹åˆå¹¶æ˜¾ç¤º\np3 +\n    legend_bottom() +\n    legend_horizontal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "ggguides - å›¾ä¾‹ç®€åŒ–"
    ]
  },
  {
    "objectID": "2034-ggguides.html#ä¸-patchwork-é›†æˆ",
    "href": "2034-ggguides.html#ä¸-patchwork-é›†æˆ",
    "title": "ggguides: ç®€åŒ– ggplot2 å›¾ä¾‹æ“ä½œ",
    "section": "ä¸ patchwork é›†æˆ",
    "text": "ä¸ patchwork é›†æˆ\nggguides ä¸ patchwork æ— ç¼é›†æˆï¼Œå¯ä»¥è·¨å¤šä¸ªå­å›¾æ”¶é›†å’Œç»Ÿä¸€å›¾ä¾‹ã€‚\n\næ”¶é›†å…±äº«å›¾ä¾‹\n\n# åˆ›å»ºå¤šä¸ªå­å›¾\np_a &lt;- ggplot(iris, aes(Sepal.Length, Sepal.Width, color = Species)) +\n    geom_point() +\n    labs(title = \"A\") +\n    theme_minimal()\n\np_b &lt;- ggplot(iris, aes(Petal.Length, Petal.Width, color = Species)) +\n    geom_point() +\n    labs(title = \"B\") +\n    theme_minimal()\n\n# ä½¿ç”¨ patchwork ç»„åˆ\ncombined &lt;- p_a + p_b\n\n# æ”¶é›†å›¾ä¾‹åˆ°åº•éƒ¨\ncombined +\n    plot_layout(guides = \"collect\") &\n    legend_bottom()\n\n\n\n\n\n\n\n\n\n\nç»Ÿä¸€å›¾ä¾‹æ ·å¼\n\n# æ‰€æœ‰å­å›¾ä½¿ç”¨ç»Ÿä¸€çš„å›¾ä¾‹è®¾ç½®\ncombined +\n    plot_layout(guides = \"collect\") &\n    legend_bottom() &\n    legend_horizontal() &\n    theme(legend.background = element_rect(fill = \"grey95\", color = NA))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "ggguides - å›¾ä¾‹ç®€åŒ–"
    ]
  },
  {
    "objectID": "2034-ggguides.html#é«˜çº§å®šåˆ¶",
    "href": "2034-ggguides.html#é«˜çº§å®šåˆ¶",
    "title": "ggguides: ç®€åŒ– ggplot2 å›¾ä¾‹æ“ä½œ",
    "section": "é«˜çº§å®šåˆ¶",
    "text": "é«˜çº§å®šåˆ¶\n\nç²¾ç¡®å®šä½\né™¤äº†å››ä¸ªåŸºæœ¬æ–¹å‘ï¼Œè¿˜å¯ä»¥ç²¾ç¡®æ§åˆ¶å›¾ä¾‹ä½ç½®ï¼š\n\n# å›¾ä¾‹æ”¾åœ¨å›¾å†…å³ä¸‹è§’\np +\n    theme(\n        legend.position = c(0.95, 0.05),\n        legend.justification = c(1, 0),\n        legend.background = element_rect(fill = \"white\", color = \"grey80\")\n    )\n\n\n\n\n\n\n\n\n\n\nç»„åˆä½¿ç”¨\n\n# å®Œæ•´çš„å›¾ä¾‹å®šåˆ¶\nggplot(mpg, aes(displ, hwy, color = class, size = cyl)) +\n    geom_point(alpha = 0.7) +\n    scale_size_continuous(range = c(1, 5)) +\n    theme_minimal() +\n    legend_bottom() +\n    legend_horizontal() +\n    legend_wrap(nrow = 2) +\n    labs(\n        title = \"Engine Displacement vs Highway MPG\",\n        x = \"Displacement (L)\",\n        y = \"Highway MPG\",\n        color = \"Class\",\n        size = \"Cylinders\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "ggguides - å›¾ä¾‹ç®€åŒ–"
    ]
  },
  {
    "objectID": "2034-ggguides.html#å®æˆ˜æ¡ˆä¾‹",
    "href": "2034-ggguides.html#å®æˆ˜æ¡ˆä¾‹",
    "title": "ggguides: ç®€åŒ– ggplot2 å›¾ä¾‹æ“ä½œ",
    "section": "å®æˆ˜æ¡ˆä¾‹",
    "text": "å®æˆ˜æ¡ˆä¾‹\n\nç§‘ç ”è®ºæ–‡å›¾è¡¨\n\n# åˆ›å»ºé€‚åˆè®ºæ–‡çš„å›¾è¡¨\nggplot(iris, aes(Sepal.Length, Sepal.Width, color = Species, shape = Species)) +\n    geom_point(size = 2.5, alpha = 0.8) +\n    geom_smooth(method = \"lm\", se = FALSE, linewidth = 0.8) +\n    scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    theme_classic(base_size = 12) +\n    legend_bottom() +\n    legend_horizontal() +\n    theme(legend.title = element_blank()) +\n    labs(\n        x = \"Sepal Length (cm)\",\n        y = \"Sepal Width (cm)\"\n    ) +\n    theme(\n        legend.key.size = unit(0.8, \"cm\"),\n        legend.text = element_text(size = 10)\n    )\n\n\n\n\n\n\n\n\n\n\nä»ªè¡¨ç›˜å¤šå›¾\n\n# åˆ›å»ºä»ªè¡¨ç›˜é£æ ¼çš„å¤šå›¾ç»„åˆ\n# å­å›¾ 1ï¼šæ•£ç‚¹å›¾\nplot1 &lt;- ggplot(mtcars, aes(wt, mpg, color = factor(cyl))) +\n    geom_point(size = 3) +\n    scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    labs(title = \"Weight vs MPG\", color = \"Cylinders\") +\n    theme_minimal()\n\n# å­å›¾ 2ï¼šç®±çº¿å›¾\nplot2 &lt;- ggplot(mtcars, aes(factor(cyl), mpg, fill = factor(cyl))) +\n    geom_boxplot(alpha = 0.7) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    labs(title = \"Cylinders vs MPG\", x = \"Cylinders\", fill = \"Cylinders\") +\n    theme_minimal()\n\n# å­å›¾ 3ï¼šå¯†åº¦å›¾\nplot3 &lt;- ggplot(mtcars, aes(mpg, fill = factor(cyl))) +\n    geom_density(alpha = 0.5) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    labs(title = \"MPG Distribution\", fill = \"Cylinders\") +\n    theme_minimal()\n\n# ç»„åˆå¹¶æ”¶é›†å›¾ä¾‹\n(plot1 + plot2) / plot3 +\n    plot_layout(guides = \"collect\") &\n    legend_bottom() &\n    legend_horizontal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "ggguides - å›¾ä¾‹ç®€åŒ–"
    ]
  },
  {
    "objectID": "2034-ggguides.html#å‡½æ•°é€ŸæŸ¥è¡¨",
    "href": "2034-ggguides.html#å‡½æ•°é€ŸæŸ¥è¡¨",
    "title": "ggguides: ç®€åŒ– ggplot2 å›¾ä¾‹æ“ä½œ",
    "section": "å‡½æ•°é€ŸæŸ¥è¡¨",
    "text": "å‡½æ•°é€ŸæŸ¥è¡¨\n\n\n\nå‡½æ•°\nåŠŸèƒ½\n\n\n\n\nlegend_bottom()\nå›¾ä¾‹ç½®äºåº•éƒ¨\n\n\nlegend_top()\nå›¾ä¾‹ç½®äºé¡¶éƒ¨\n\n\nlegend_left()\nå›¾ä¾‹ç½®äºå·¦ä¾§\n\n\nlegend_right()\nå›¾ä¾‹ç½®äºå³ä¾§\n\n\nlegend_none()\néšè—å›¾ä¾‹\n\n\nlegend_horizontal()\nå›¾ä¾‹æ°´å¹³æ’åˆ—\n\n\nlegend_vertical()\nå›¾ä¾‹å‚ç›´æ’åˆ—\n\n\nlegend_wrap(nrow, ncol)\nå›¾ä¾‹æ¢è¡Œè®¾ç½®\n\n\nlegend_inside()\nå›¾ä¾‹åµŒå…¥å›¾å†…\n\n\ncollect_legends()\næ”¶é›†å¤šå›¾å›¾ä¾‹",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "ggguides - å›¾ä¾‹ç®€åŒ–"
    ]
  },
  {
    "objectID": "2034-ggguides.html#ä¸åŸç”Ÿæ–¹æ³•å¯¹æ¯”",
    "href": "2034-ggguides.html#ä¸åŸç”Ÿæ–¹æ³•å¯¹æ¯”",
    "title": "ggguides: ç®€åŒ– ggplot2 å›¾ä¾‹æ“ä½œ",
    "section": "ä¸åŸç”Ÿæ–¹æ³•å¯¹æ¯”",
    "text": "ä¸åŸç”Ÿæ–¹æ³•å¯¹æ¯”\n\n\n\n\n\n\n\n\n\n\nOperation\nNative\nggguides\n\n\n\n\nBottom legend\ntheme(legend.position = â€œbottomâ€)\nlegend_bottom()\n\n\nHorizontal\ntheme(legend.direction = â€œhorizontalâ€)\nlegend_horizontal()\n\n\nHide title\ntheme(legend.title = element_blank())\nlegend_style(title = FALSE)\n\n\nWrap legend\nguides(color = guide_legend(nrow = 2))\nlegend_wrap(nrow = 2)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "ggguides - å›¾ä¾‹ç®€åŒ–"
    ]
  },
  {
    "objectID": "2034-ggguides.html#æ€»ç»“",
    "href": "2034-ggguides.html#æ€»ç»“",
    "title": "ggguides: ç®€åŒ– ggplot2 å›¾ä¾‹æ“ä½œ",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nggguides çš„ä¼˜åŠ¿ï¼š\n\nç®€æ´ï¼šä¸€è¡Œä»£ç å®Œæˆå¸¸è§å›¾ä¾‹æ“ä½œ\nç›´è§‚ï¼šå‡½æ•°åæ¸…æ™°è¡¨è¾¾åŠŸèƒ½\nå…¼å®¹ï¼šä¸ ggplot2 å’Œ patchwork æ— ç¼é›†æˆ\nå¯é“¾å¼ï¼šå¤šä¸ªå‡½æ•°å¯ä»¥è¿ç»­è°ƒç”¨\n\n\næ¨èèµ„æº\n\nggguides å®˜æ–¹æ–‡æ¡£\nGitHub ä»“åº“\nCRAN é¡µé¢",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "ggguides - å›¾ä¾‹ç®€åŒ–"
    ]
  },
  {
    "objectID": "2032-ggplot2-intro.html",
    "href": "2032-ggplot2-intro.html",
    "title": "ggplot2 å¯è§†åŒ–å…¥é—¨",
    "section": "",
    "text": "ggplot2 æ˜¯ R è¯­è¨€æœ€å¼ºå¤§çš„å¯è§†åŒ–åŒ…ï¼ŒåŸºäºâ€å›¾å½¢è¯­æ³•â€ï¼ˆGrammar of Graphicsï¼‰ç†è®ºæ„å»ºã€‚\n\n\n\n\n\nç»„ä»¶\nå‡½æ•°\nä½œç”¨\n\n\n\n\næ•°æ®\nggplot(data)\næŒ‡å®šæ•°æ®æº\n\n\næ˜ å°„\naes()\nå˜é‡åˆ°è§†è§‰å±æ€§çš„æ˜ å°„\n\n\nå‡ ä½•\ngeom_*()\nå›¾å½¢ç±»å‹\n\n\næ ‡åº¦\nscale_*()\nåˆ»åº¦å’Œå›¾ä¾‹\n\n\nä¸»é¢˜\ntheme()\néæ•°æ®å…ƒç´ æ ·å¼",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "ggplot2 å¯è§†åŒ–å…¥é—¨"
    ]
  },
  {
    "objectID": "2032-ggplot2-intro.html#ggplot2-ç®€ä»‹",
    "href": "2032-ggplot2-intro.html#ggplot2-ç®€ä»‹",
    "title": "ggplot2 å¯è§†åŒ–å…¥é—¨",
    "section": "",
    "text": "ggplot2 æ˜¯ R è¯­è¨€æœ€å¼ºå¤§çš„å¯è§†åŒ–åŒ…ï¼ŒåŸºäºâ€å›¾å½¢è¯­æ³•â€ï¼ˆGrammar of Graphicsï¼‰ç†è®ºæ„å»ºã€‚\n\n\n\n\n\nç»„ä»¶\nå‡½æ•°\nä½œç”¨\n\n\n\n\næ•°æ®\nggplot(data)\næŒ‡å®šæ•°æ®æº\n\n\næ˜ å°„\naes()\nå˜é‡åˆ°è§†è§‰å±æ€§çš„æ˜ å°„\n\n\nå‡ ä½•\ngeom_*()\nå›¾å½¢ç±»å‹\n\n\næ ‡åº¦\nscale_*()\nåˆ»åº¦å’Œå›¾ä¾‹\n\n\nä¸»é¢˜\ntheme()\néæ•°æ®å…ƒç´ æ ·å¼",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "ggplot2 å¯è§†åŒ–å…¥é—¨"
    ]
  },
  {
    "objectID": "2032-ggplot2-intro.html#å®‰è£…ä¸åŠ è½½",
    "href": "2032-ggplot2-intro.html#å®‰è£…ä¸åŠ è½½",
    "title": "ggplot2 å¯è§†åŒ–å…¥é—¨",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\nlibrary(ggplot2)\nlibrary(dplyr)\n\n# ç¤ºä¾‹æ•°æ®\ndata(mpg)\nhead(mpg)\n\n# A tibble: 6 Ã— 11\n  manufacturer model displ  year   cyl trans      drv     cty   hwy fl    class \n  &lt;chr&gt;        &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; \n1 audi         a4      1.8  1999     4 auto(l5)   f        18    29 p     compaâ€¦\n2 audi         a4      1.8  1999     4 manual(m5) f        21    29 p     compaâ€¦\n3 audi         a4      2    2008     4 manual(m6) f        20    31 p     compaâ€¦\n4 audi         a4      2    2008     4 auto(av)   f        21    30 p     compaâ€¦\n5 audi         a4      2.8  1999     6 auto(l5)   f        16    26 p     compaâ€¦\n6 audi         a4      2.8  1999     6 manual(m5) f        18    26 p     compaâ€¦",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "ggplot2 å¯è§†åŒ–å…¥é—¨"
    ]
  },
  {
    "objectID": "2032-ggplot2-intro.html#ç¬¬ä¸€éƒ¨åˆ†åŸºç¡€è¯­æ³•",
    "href": "2032-ggplot2-intro.html#ç¬¬ä¸€éƒ¨åˆ†åŸºç¡€è¯­æ³•",
    "title": "ggplot2 å¯è§†åŒ–å…¥é—¨",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€è¯­æ³•",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€è¯­æ³•\n\næœ€ç®€ç»‘å›¾\n\nggplot(data = mpg, aes(x = displ, y = hwy)) +\n  geom_point()\n\n\n\n\n\n\n\n\n\n\næ·»åŠ é¢œè‰²æ˜ å°„\n\nggplot(mpg, aes(x = displ, y = hwy, color = class)) +\n  geom_point()\n\n\n\n\n\n\n\n\n\n\næ˜ å°„ vs è®¾ç½®\n\n# æ˜ å°„ï¼šå˜é‡ â†’ å±æ€§ï¼ˆåœ¨ aes å†…ï¼‰\nggplot(mpg, aes(x = displ, y = hwy, color = class)) +\n  geom_point()\n\n\n\n\n\n\n\n# è®¾ç½®ï¼šå›ºå®šå€¼ï¼ˆåœ¨ aes å¤–ï¼‰\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point(color = \"#4f46e5\", size = 3, alpha = 0.6)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "ggplot2 å¯è§†åŒ–å…¥é—¨"
    ]
  },
  {
    "objectID": "2032-ggplot2-intro.html#ç¬¬äºŒéƒ¨åˆ†å¸¸ç”¨å‡ ä½•å¯¹è±¡",
    "href": "2032-ggplot2-intro.html#ç¬¬äºŒéƒ¨åˆ†å¸¸ç”¨å‡ ä½•å¯¹è±¡",
    "title": "ggplot2 å¯è§†åŒ–å…¥é—¨",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šå¸¸ç”¨å‡ ä½•å¯¹è±¡",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šå¸¸ç”¨å‡ ä½•å¯¹è±¡\n\næ•£ç‚¹å›¾\n\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point(aes(color = class, size = cyl), alpha = 0.7)\n\n\n\n\n\n\n\n\n\n\næŠ˜çº¿å›¾\n\n# æ—¶é—´åºåˆ—æ•°æ®\neconomics_small &lt;- economics %&gt;% filter(date &gt;= \"2000-01-01\")\n\nggplot(economics_small, aes(x = date, y = unemploy)) +\n  geom_line(color = \"#4f46e5\", linewidth = 1)\n\n\n\n\n\n\n\n\n\n\næŸ±çŠ¶å›¾\n\nggplot(mpg, aes(x = class)) +\n  geom_bar(fill = \"#4f46e5\")\n\n\n\n\n\n\n\n\n\n# å·²æ±‡æ€»æ•°æ®\nclass_summary &lt;- mpg %&gt;% count(class)\n\nggplot(class_summary, aes(x = reorder(class, -n), y = n)) +\n  geom_col(fill = \"#10b981\") +\n  labs(x = \"è½¦å‹\", y = \"æ•°é‡\")\n\n\n\n\n\n\n\n\n\n\nç›´æ–¹å›¾\n\nggplot(mpg, aes(x = hwy)) +\n  geom_histogram(bins = 20, fill = \"#4f46e5\", color = \"white\")\n\n\n\n\n\n\n\n\n\n\nå¯†åº¦å›¾\n\nggplot(mpg, aes(x = hwy, fill = drv)) +\n  geom_density(alpha = 0.5)\n\n\n\n\n\n\n\n\n\n\nç®±çº¿å›¾\n\nggplot(mpg, aes(x = class, y = hwy)) +\n  geom_boxplot(fill = \"#4f46e5\", alpha = 0.7)\n\n\n\n\n\n\n\n\n\n\nå°æç´å›¾\n\nggplot(mpg, aes(x = drv, y = hwy)) +\n  geom_violin(fill = \"#10b981\", alpha = 0.7) +\n  geom_boxplot(width = 0.1, fill = \"white\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "ggplot2 å¯è§†åŒ–å…¥é—¨"
    ]
  },
  {
    "objectID": "2032-ggplot2-intro.html#ç¬¬ä¸‰éƒ¨åˆ†å›¾å±‚å åŠ ",
    "href": "2032-ggplot2-intro.html#ç¬¬ä¸‰éƒ¨åˆ†å›¾å±‚å åŠ ",
    "title": "ggplot2 å¯è§†åŒ–å…¥é—¨",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šå›¾å±‚å åŠ ",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šå›¾å±‚å åŠ \n\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point(color = \"#4f46e5\", alpha = 0.6) +\n  geom_smooth(method = \"lm\", color = \"#ef4444\", se = TRUE)\n\n\n\n\n\n\n\n\n\n# å¤šç§å¹³æ»‘æ–¹æ³•\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point(alpha = 0.5) +\n  geom_smooth(method = \"loess\", color = \"#4f46e5\") +\n  geom_smooth(method = \"lm\", color = \"#ef4444\", linetype = \"dashed\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "ggplot2 å¯è§†åŒ–å…¥é—¨"
    ]
  },
  {
    "objectID": "2032-ggplot2-intro.html#ç¬¬å››éƒ¨åˆ†åˆ†é¢",
    "href": "2032-ggplot2-intro.html#ç¬¬å››éƒ¨åˆ†åˆ†é¢",
    "title": "ggplot2 å¯è§†åŒ–å…¥é—¨",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šåˆ†é¢",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šåˆ†é¢\n\nå•å˜é‡åˆ†é¢\n\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point() +\n  facet_wrap(~class, ncol = 4)\n\n\n\n\n\n\n\n\n\n\nåŒå˜é‡åˆ†é¢\n\nggplot(mpg, aes(x = displ, y = hwy)) +\n  geom_point() +\n  facet_grid(drv ~ cyl)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "ggplot2 å¯è§†åŒ–å…¥é—¨"
    ]
  },
  {
    "objectID": "2032-ggplot2-intro.html#ç¬¬äº”éƒ¨åˆ†æ ‡åº¦ä¸åæ ‡ç³»",
    "href": "2032-ggplot2-intro.html#ç¬¬äº”éƒ¨åˆ†æ ‡åº¦ä¸åæ ‡ç³»",
    "title": "ggplot2 å¯è§†åŒ–å…¥é—¨",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šæ ‡åº¦ä¸åæ ‡ç³»",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šæ ‡åº¦ä¸åæ ‡ç³»\n\né¢œè‰²æ ‡åº¦\n\nggplot(mpg, aes(x = displ, y = hwy, color = class)) +\n  geom_point(size = 3) +\n  scale_color_brewer(palette = \"Set2\")\n\n\n\n\n\n\n\n\n\n# æ‰‹åŠ¨é…è‰²\nggplot(mpg, aes(x = displ, y = hwy, color = drv)) +\n  geom_point(size = 3) +\n  scale_color_manual(values = c(\"4\" = \"#4f46e5\", \"f\" = \"#10b981\", \"r\" = \"#ef4444\"))\n\n\n\n\n\n\n\n\n\n\nåæ ‡å˜æ¢\n\n# å¯¹æ•°åæ ‡\nggplot(diamonds, aes(x = carat, y = price)) +\n  geom_point(alpha = 0.1) +\n  scale_x_log10() +\n  scale_y_log10()\n\n\n\n\n\n\n\n\n\n\nåæ ‡ç¿»è½¬\n\nggplot(mpg, aes(x = class, y = hwy)) +\n  geom_boxplot() +\n  coord_flip()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "ggplot2 å¯è§†åŒ–å…¥é—¨"
    ]
  },
  {
    "objectID": "2032-ggplot2-intro.html#ç¬¬å…­éƒ¨åˆ†ä¸»é¢˜ç³»ç»Ÿ",
    "href": "2032-ggplot2-intro.html#ç¬¬å…­éƒ¨åˆ†ä¸»é¢˜ç³»ç»Ÿ",
    "title": "ggplot2 å¯è§†åŒ–å…¥é—¨",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šä¸»é¢˜ç³»ç»Ÿ",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šä¸»é¢˜ç³»ç»Ÿ\n\né¢„è®¾ä¸»é¢˜\n\np &lt;- ggplot(mpg, aes(x = displ, y = hwy)) + geom_point()\n\np + theme_minimal()\n\n\n\n\n\n\n\n\n\np + theme_classic()\n\n\n\n\n\n\n\n\n\n\nè‡ªå®šä¹‰ä¸»é¢˜\n\nggplot(mpg, aes(x = displ, y = hwy, color = class)) +\n  geom_point(size = 2) +\n  labs(\n    title = \"å‘åŠ¨æœºæ’é‡ä¸æ²¹è€—\",\n    subtitle = \"æ•°æ®æ¥æº: mpg æ•°æ®é›†\",\n    x = \"æ’é‡ (L)\",\n    y = \"é«˜é€Ÿæ²¹è€— (mpg)\",\n    color = \"è½¦å‹\"\n  ) +\n  theme_bw() +\n  theme(\n    plot.title = element_text(size = 16, face = \"bold\", hjust = 0.5),\n    plot.subtitle = element_text(hjust = 0.5, color = \"gray50\"),\n    legend.position = \"bottom\",\n    panel.grid.minor = element_blank()\n  )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "ggplot2 å¯è§†åŒ–å…¥é—¨"
    ]
  },
  {
    "objectID": "2032-ggplot2-intro.html#ç¬¬ä¸ƒéƒ¨åˆ†ä¿å­˜å›¾ç‰‡",
    "href": "2032-ggplot2-intro.html#ç¬¬ä¸ƒéƒ¨åˆ†ä¿å­˜å›¾ç‰‡",
    "title": "ggplot2 å¯è§†åŒ–å…¥é—¨",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šä¿å­˜å›¾ç‰‡",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šä¿å­˜å›¾ç‰‡\n\n# ä¿å­˜æœ€åä¸€å¼ å›¾\nggsave(\"my_plot.png\", width = 8, height = 6, dpi = 300)\n\n# ä¿å­˜æŒ‡å®šå›¾\np &lt;- ggplot(mpg, aes(x = displ, y = hwy)) + geom_point()\nggsave(\"scatter.pdf\", plot = p, width = 10, height = 8)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "ggplot2 å¯è§†åŒ–å…¥é—¨"
    ]
  },
  {
    "objectID": "2032-ggplot2-intro.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "2032-ggplot2-intro.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "ggplot2 å¯è§†åŒ–å…¥é—¨",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# åŸºç¡€æ¡†æ¶\nggplot(data, aes(x, y)) + geom_*()\n\n# å¸¸ç”¨å‡ ä½•\ngeom_point()      # æ•£ç‚¹\ngeom_line()       # æŠ˜çº¿\ngeom_bar()        # æŸ±çŠ¶ï¼ˆè®¡æ•°ï¼‰\ngeom_col()        # æŸ±çŠ¶ï¼ˆå·²æœ‰å€¼ï¼‰\ngeom_histogram()  # ç›´æ–¹å›¾\ngeom_density()    # å¯†åº¦\ngeom_boxplot()    # ç®±çº¿\ngeom_smooth()     # å¹³æ»‘\n\n# æ˜ å°„\naes(x, y, color, fill, size, shape, alpha)\n\n# åˆ†é¢\nfacet_wrap(~ var)\nfacet_grid(row ~ col)\n\n# æ ‡ç­¾\nlabs(title, subtitle, x, y, caption)\n\n# ä¿å­˜\nggsave(\"file.png\", width, height, dpi)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "ggplot2 å¯è§†åŒ–å…¥é—¨"
    ]
  },
  {
    "objectID": "2032-ggplot2-intro.html#å°ç»“",
    "href": "2032-ggplot2-intro.html#å°ç»“",
    "title": "ggplot2 å¯è§†åŒ–å…¥é—¨",
    "section": "å°ç»“",
    "text": "å°ç»“\nggplot2 å­¦ä¹ è·¯å¾„ï¼š\n\næŒæ¡åŸºç¡€ï¼šggplot + aes + geom\nå­¦ä¹ æ˜ å°„ï¼šå˜é‡åˆ°è§†è§‰å±æ€§\nç†Ÿæ‚‰å‡ ä½•ï¼šé€‰æ‹©åˆé€‚çš„å›¾å½¢ç±»å‹\nç²¾é€šä¸»é¢˜ï¼šå®šåˆ¶ç¾è§‚çš„æ ·å¼\n\n\næŠ€å·§ï¼šä»æ¨¡ä»¿å¼€å§‹ï¼Œé€æ­¥ä¿®æ”¹å‚æ•°ï¼Œç†è§£æ¯ä¸ªç»„ä»¶çš„ä½œç”¨ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "ggplot2 å¯è§†åŒ–å…¥é—¨"
    ]
  },
  {
    "objectID": "2032-ggplot2-intro.html#å‚è€ƒèµ„æº",
    "href": "2032-ggplot2-intro.html#å‚è€ƒèµ„æº",
    "title": "ggplot2 å¯è§†åŒ–å…¥é—¨",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nggplot2 å®˜æ–¹æ–‡æ¡£\nR Graph Gallery\nggplot2: Elegant Graphics for Data Analysis",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "ggplot2 å¯è§†åŒ–å…¥é—¨"
    ]
  },
  {
    "objectID": "2030-bindareaplot.html",
    "href": "2030-bindareaplot.html",
    "title": "é¢ç§¯å›¾ä¸å †å å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "é¢ç§¯å›¾æ˜¯æŠ˜çº¿å›¾çš„å»¶ä¼¸ï¼Œå®ƒé€šè¿‡å¡«å……çº¿ä¸‹åŒºåŸŸæ¥å¼ºè°ƒæ•°é‡ç´¯ç§¯æˆ–æ¯”ä¾‹å˜åŒ–ã€‚é€‚ç”¨äºï¼š\n\næ—¶é—´åºåˆ—å †å ï¼šå„éƒ¨åˆ†å¯¹æ€»ä½“çš„è´¡çŒ®\næ¯”ä¾‹å˜åŒ–ï¼šå¸‚åœºä»½é¢ã€é¢„ç®—åˆ†é…\næµé‡å¯è§†åŒ–ï¼šç½‘ç«™æµé‡æ¥æºã€ç”¨æˆ·è½¬åŒ–\n\næœ¬æ•™ç¨‹å°†è¯¦ç»†ä»‹ç» R è¯­è¨€ä¸­å„ç±»é¢ç§¯å›¾çš„ç»‘åˆ¶æ–¹æ³•ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "é¢ç§¯å›¾ä¸å †å å›¾"
    ]
  },
  {
    "objectID": "2030-bindareaplot.html#å‰è¨€",
    "href": "2030-bindareaplot.html#å‰è¨€",
    "title": "é¢ç§¯å›¾ä¸å †å å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "é¢ç§¯å›¾æ˜¯æŠ˜çº¿å›¾çš„å»¶ä¼¸ï¼Œå®ƒé€šè¿‡å¡«å……çº¿ä¸‹åŒºåŸŸæ¥å¼ºè°ƒæ•°é‡ç´¯ç§¯æˆ–æ¯”ä¾‹å˜åŒ–ã€‚é€‚ç”¨äºï¼š\n\næ—¶é—´åºåˆ—å †å ï¼šå„éƒ¨åˆ†å¯¹æ€»ä½“çš„è´¡çŒ®\næ¯”ä¾‹å˜åŒ–ï¼šå¸‚åœºä»½é¢ã€é¢„ç®—åˆ†é…\næµé‡å¯è§†åŒ–ï¼šç½‘ç«™æµé‡æ¥æºã€ç”¨æˆ·è½¬åŒ–\n\næœ¬æ•™ç¨‹å°†è¯¦ç»†ä»‹ç» R è¯­è¨€ä¸­å„ç±»é¢ç§¯å›¾çš„ç»‘åˆ¶æ–¹æ³•ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "é¢ç§¯å›¾ä¸å †å å›¾"
    ]
  },
  {
    "objectID": "2030-bindareaplot.html#åŸºç¡€é¢ç§¯å›¾",
    "href": "2030-bindareaplot.html#åŸºç¡€é¢ç§¯å›¾",
    "title": "é¢ç§¯å›¾ä¸å †å å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "åŸºç¡€é¢ç§¯å›¾",
    "text": "åŸºç¡€é¢ç§¯å›¾\n\nå‡†å¤‡å·¥ä½œ\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(scales)\n\ntheme_set(theme_minimal(base_size = 14))\n\n\n\nåˆ›å»ºç¤ºä¾‹æ•°æ®\n\n# æ¨¡æ‹Ÿç½‘ç«™æµé‡æ•°æ®\nset.seed(42)\nmonths &lt;- seq(as.Date(\"2024-01-01\"), as.Date(\"2025-12-31\"), by = \"month\")\n\ntraffic_data &lt;- data.frame(\n    date = months,\n    organic = 1000 + cumsum(rnorm(length(months), 50, 100)),\n    paid = 500 + cumsum(rnorm(length(months), 30, 80)),\n    social = 300 + cumsum(rnorm(length(months), 20, 50)),\n    direct = 200 + cumsum(rnorm(length(months), 10, 30)),\n    referral = 150 + cumsum(rnorm(length(months), 5, 20))\n)\n\nhead(traffic_data)\n\n        date  organic     paid   social   direct referral\n1 2024-01-01 1187.096 681.6155 298.4277 228.7055 132.3652\n2 2024-02-01 1180.626 677.1779 351.2101 210.0998 108.1809\n3 2024-03-01 1266.939 686.5964 387.3063 203.8150 114.7806\n4 2024-04-01 1380.225 575.5433 368.1144 231.2449 132.8447\n5 2024-05-01 1470.652 642.3511 466.9008 264.2902 161.8640\n6 2024-06-01 1510.040 621.1515 519.0457 288.2033 187.7590\n\n\n\n\nå•å˜é‡é¢ç§¯å›¾\n\nggplot(traffic_data, aes(x = date, y = organic)) +\n    geom_area(fill = \"#4e79a7\", alpha = 0.7) +\n    geom_line(color = \"#4e79a7\", linewidth = 1) +\n    labs(\n        title = \"è‡ªç„¶æœç´¢æµé‡è¶‹åŠ¿\",\n        x = \"æ—¥æœŸ\",\n        y = \"è®¿é—®é‡\"\n    )\n\n\n\n\n\n\n\n\n\n\næ·»åŠ æ¸å˜æ•ˆæœ\n\nggplot(traffic_data, aes(x = date, y = organic)) +\n    geom_area(fill = \"#4e79a7\", alpha = 0.3) +\n    geom_line(color = \"#4e79a7\", linewidth = 1.2) +\n    geom_point(color = \"#4e79a7\", size = 2) +\n    labs(\n        title = \"è‡ªç„¶æœç´¢æµé‡è¶‹åŠ¿\",\n        subtitle = \"åŠé€æ˜å¡«å…… + æŠ˜çº¿æ ‡è®°\",\n        x = \"æ—¥æœŸ\",\n        y = \"è®¿é—®é‡\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "é¢ç§¯å›¾ä¸å †å å›¾"
    ]
  },
  {
    "objectID": "2030-bindareaplot.html#å †å é¢ç§¯å›¾",
    "href": "2030-bindareaplot.html#å †å é¢ç§¯å›¾",
    "title": "é¢ç§¯å›¾ä¸å †å å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "å †å é¢ç§¯å›¾",
    "text": "å †å é¢ç§¯å›¾\n\næ•°æ®æ•´ç†\n\n# è½¬æ¢ä¸ºé•¿æ ¼å¼\ntraffic_long &lt;- traffic_data %&gt;%\n    pivot_longer(\n        cols = c(organic, paid, social, direct, referral),\n        names_to = \"source\",\n        values_to = \"visits\"\n    ) %&gt;%\n    mutate(\n        source = factor(source,\n            levels = c(\"organic\", \"paid\", \"social\", \"direct\", \"referral\"),\n            labels = c(\"è‡ªç„¶æœç´¢\", \"ä»˜è´¹å¹¿å‘Š\", \"ç¤¾äº¤åª’ä½“\", \"ç›´æ¥è®¿é—®\", \"å¤–éƒ¨å¼•è\")\n        )\n    )\n\nhead(traffic_long)\n\n# A tibble: 6 Ã— 3\n  date       source   visits\n  &lt;date&gt;     &lt;fct&gt;     &lt;dbl&gt;\n1 2024-01-01 è‡ªç„¶æœç´¢  1187.\n2 2024-01-01 ä»˜è´¹å¹¿å‘Š   682.\n3 2024-01-01 ç¤¾äº¤åª’ä½“   298.\n4 2024-01-01 ç›´æ¥è®¿é—®   229.\n5 2024-01-01 å¤–éƒ¨å¼•è   132.\n6 2024-02-01 è‡ªç„¶æœç´¢  1181.\n\n\n\n\nåŸºç¡€å †å é¢ç§¯å›¾\n\n# å®šä¹‰é…è‰²\nsource_colors &lt;- c(\n    \"è‡ªç„¶æœç´¢\" = \"#4e79a7\",\n    \"ä»˜è´¹å¹¿å‘Š\" = \"#f28e2b\",\n    \"ç¤¾äº¤åª’ä½“\" = \"#59a14f\",\n    \"ç›´æ¥è®¿é—®\" = \"#e15759\",\n    \"å¤–éƒ¨å¼•è\" = \"#76b7b2\"\n)\n\nggplot(traffic_long, aes(x = date, y = visits, fill = source)) +\n    geom_area(alpha = 0.8) +\n    scale_fill_manual(values = source_colors) +\n    labs(\n        title = \"ç½‘ç«™æµé‡æ¥æºæ„æˆ\",\n        subtitle = \"å †å é¢ç§¯å›¾å±•ç¤ºå„æ¸ é“è´¡çŒ®\",\n        x = \"æ—¥æœŸ\",\n        y = \"æ€»è®¿é—®é‡\",\n        fill = \"æµé‡æ¥æº\"\n    ) +\n    theme(legend.position = \"bottom\")\n\n\n\n\n\n\n\n\n\n\nè°ƒæ•´å †å é¡ºåº\n\n# æŒ‰å¹³å‡æµé‡æ’åºï¼ˆå¤§çš„åœ¨ä¸‹é¢ï¼‰\nsource_order &lt;- traffic_long %&gt;%\n    group_by(source) %&gt;%\n    summarise(mean_visits = mean(visits)) %&gt;%\n    arrange(desc(mean_visits)) %&gt;%\n    pull(source)\n\ntraffic_long$source &lt;- factor(traffic_long$source, levels = rev(source_order))\n\nggplot(traffic_long, aes(x = date, y = visits, fill = source)) +\n    geom_area(alpha = 0.8) +\n    scale_fill_manual(values = source_colors) +\n    labs(\n        title = \"ç½‘ç«™æµé‡æ¥æºæ„æˆï¼ˆæŒ‰æµé‡æ’åºï¼‰\",\n        x = \"æ—¥æœŸ\",\n        y = \"æ€»è®¿é—®é‡\",\n        fill = \"æµé‡æ¥æº\"\n    ) +\n    theme(legend.position = \"bottom\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "é¢ç§¯å›¾ä¸å †å å›¾"
    ]
  },
  {
    "objectID": "2030-bindareaplot.html#ç™¾åˆ†æ¯”å †å é¢ç§¯å›¾",
    "href": "2030-bindareaplot.html#ç™¾åˆ†æ¯”å †å é¢ç§¯å›¾",
    "title": "é¢ç§¯å›¾ä¸å †å å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "3. ç™¾åˆ†æ¯”å †å é¢ç§¯å›¾",
    "text": "3. ç™¾åˆ†æ¯”å †å é¢ç§¯å›¾\n\nposition = â€œfillâ€\n\nggplot(traffic_long, aes(x = date, y = visits, fill = source)) +\n    geom_area(position = \"fill\", alpha = 0.8) +\n    scale_fill_manual(values = source_colors) +\n    scale_y_continuous(labels = percent_format()) +\n    labs(\n        title = \"æµé‡æ¥æºå æ¯”å˜åŒ–\",\n        subtitle = \"100% å †å é¢ç§¯å›¾\",\n        x = \"æ—¥æœŸ\",\n        y = \"å æ¯”\",\n        fill = \"æµé‡æ¥æº\"\n    ) +\n    theme(legend.position = \"bottom\")\n\n\n\n\n\n\n\n\n\n\næ·»åŠ è¾¹ç•Œçº¿\n\nggplot(traffic_long, aes(x = date, y = visits, fill = source)) +\n    geom_area(position = \"fill\", alpha = 0.8, color = \"white\", linewidth = 0.3) +\n    scale_fill_manual(values = source_colors) +\n    scale_y_continuous(labels = percent_format()) +\n    labs(\n        title = \"æµé‡æ¥æºå æ¯”å˜åŒ–\",\n        subtitle = \"æ·»åŠ ç™½è‰²è¾¹ç•Œçº¿æå‡å±‚æ¬¡æ„Ÿ\",\n        x = \"æ—¥æœŸ\",\n        y = \"å æ¯”\",\n        fill = \"æµé‡æ¥æº\"\n    ) +\n    theme(legend.position = \"bottom\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "é¢ç§¯å›¾ä¸å †å å›¾"
    ]
  },
  {
    "objectID": "2030-bindareaplot.html#åˆ†é¢é¢ç§¯å›¾",
    "href": "2030-bindareaplot.html#åˆ†é¢é¢ç§¯å›¾",
    "title": "é¢ç§¯å›¾ä¸å †å å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "åˆ†é¢é¢ç§¯å›¾",
    "text": "åˆ†é¢é¢ç§¯å›¾\n\nç‹¬ç«‹é¢ç§¯å›¾\n\nggplot(traffic_long, aes(x = date, y = visits, fill = source)) +\n    geom_area(alpha = 0.7) +\n    geom_line(color = \"white\", linewidth = 0.5) +\n    facet_wrap(~source, ncol = 1, scales = \"free_y\") +\n    scale_fill_manual(values = source_colors) +\n    labs(\n        title = \"å„æµé‡æ¸ é“ç‹¬ç«‹è¶‹åŠ¿\",\n        x = \"æ—¥æœŸ\",\n        y = \"è®¿é—®é‡\"\n    ) +\n    theme(\n        legend.position = \"none\",\n        strip.text = element_text(face = \"bold\", size = 12)\n    )\n\n\n\n\n\n\n\n\n\n\nå°å¤šå›¾å¯¹æ¯”\n\nggplot(traffic_long, aes(x = date, y = visits)) +\n    geom_area(fill = \"#4e79a7\", alpha = 0.5) +\n    geom_line(color = \"#4e79a7\", linewidth = 0.8) +\n    facet_wrap(~source, nrow = 1, scales = \"fixed\") +\n    labs(\n        title = \"æµé‡æ¸ é“å¯¹æ¯”ï¼ˆç»Ÿä¸€çºµè½´ï¼‰\",\n        x = NULL,\n        y = \"è®¿é—®é‡\"\n    ) +\n    theme(\n        strip.text = element_text(face = \"bold\"),\n        axis.text.x = element_text(angle = 45, hjust = 1)\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "é¢ç§¯å›¾ä¸å †å å›¾"
    ]
  },
  {
    "objectID": "2030-bindareaplot.html#æ²³æµå›¾-streamgraph",
    "href": "2030-bindareaplot.html#æ²³æµå›¾-streamgraph",
    "title": "é¢ç§¯å›¾ä¸å †å å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "æ²³æµå›¾ (Streamgraph)",
    "text": "æ²³æµå›¾ (Streamgraph)\næ²³æµå›¾æ˜¯å±…ä¸­å¯¹ç§°çš„å †å é¢ç§¯å›¾ï¼Œç¾è§‚ä¸”æ›´æ˜“å‘ç°è¶‹åŠ¿ã€‚\n\næ¨¡æ‹Ÿæ²³æµå›¾æ•ˆæœ\n\n# ä½¿ç”¨æ ‡å‡†ggplot2åˆ›å»ºç±»ä¼¼æ²³æµå›¾æ•ˆæœ\n# è®¡ç®—å±…ä¸­å †å \ntraffic_stream &lt;- traffic_long %&gt;%\n    group_by(date) %&gt;%\n    mutate(\n        total = sum(visits),\n        prop = visits / total\n    ) %&gt;%\n    ungroup() %&gt;%\n    arrange(date, source) %&gt;%\n    group_by(date) %&gt;%\n    mutate(\n        ymax = cumsum(visits) - sum(visits) / 2,\n        ymin = ymax - visits\n    ) %&gt;%\n    ungroup()\n\nggplot(traffic_stream, aes(x = date)) +\n    geom_ribbon(aes(ymin = ymin, ymax = ymax, fill = source), alpha = 0.8) +\n    scale_fill_manual(values = source_colors) +\n    labs(\n        title = \"ç½‘ç«™æµé‡æ²³æµå›¾ï¼ˆå±…ä¸­å †å ï¼‰\",\n        subtitle = \"å„æ¸ é“æµé‡å¯¹ç§°å±•ç¤º\",\n        x = \"æ—¥æœŸ\",\n        y = NULL,\n        fill = \"æµé‡æ¥æº\"\n    ) +\n    theme(\n        legend.position = \"bottom\",\n        axis.text.y = element_blank(),\n        axis.ticks.y = element_blank(),\n        panel.grid.major.y = element_blank()\n    )\n\n\n\n\n\n\n\n\n\n\né«˜çº§æ²³æµå›¾ (ggstream åŒ…)\nå¦‚éœ€æ›´ä¸“ä¸šçš„æ²³æµå›¾ï¼Œå¯å®‰è£… ggstream åŒ…ï¼š\n\n# install.packages(\"ggstream\")\nlibrary(ggstream)\n\nggplot(traffic_long, aes(x = date, y = visits, fill = source)) +\n    geom_stream(alpha = 0.8, bw = 0.3) +\n    scale_fill_manual(values = source_colors) +\n    labs(title = \"æ²³æµå›¾\", fill = \"æµé‡æ¥æº\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "é¢ç§¯å›¾ä¸å †å å›¾"
    ]
  },
  {
    "objectID": "2030-bindareaplot.html#é¢ç§¯å›¾ç¾åŒ–æŠ€å·§",
    "href": "2030-bindareaplot.html#é¢ç§¯å›¾ç¾åŒ–æŠ€å·§",
    "title": "é¢ç§¯å›¾ä¸å †å å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "é¢ç§¯å›¾ç¾åŒ–æŠ€å·§",
    "text": "é¢ç§¯å›¾ç¾åŒ–æŠ€å·§\n\næ¸å˜å¡«å……\n\n# ä½¿ç”¨ ggfx æ·»åŠ æ¸å˜æ•ˆæœï¼ˆå¦‚æœå¯ç”¨ï¼‰\n# æ‰‹åŠ¨æ¨¡æ‹Ÿæ¸å˜æ•ˆæœ\nggplot(traffic_data, aes(x = date)) +\n    # å¤šå±‚åŠé€æ˜å¡«å……\n    geom_area(aes(y = organic), fill = \"#4e79a7\", alpha = 0.2) +\n    geom_area(aes(y = organic * 0.8), fill = \"#4e79a7\", alpha = 0.2) +\n    geom_area(aes(y = organic * 0.5), fill = \"#4e79a7\", alpha = 0.3) +\n    geom_line(aes(y = organic), color = \"#4e79a7\", linewidth = 1.2) +\n    labs(\n        title = \"æ¸å˜å¡«å……æ•ˆæœ\",\n        x = \"æ—¥æœŸ\",\n        y = \"è®¿é—®é‡\"\n    )\n\n\n\n\n\n\n\n\n\n\né«˜äº®ç‰¹å®šåŒºåŸŸ\n\nggplot(traffic_data, aes(x = date, y = organic)) +\n    geom_area(fill = \"#4e79a7\", alpha = 0.3) +\n    # é«˜äº®å¢é•¿æœŸ\n    geom_area(\n        data = traffic_data %&gt;% filter(date &gt;= as.Date(\"2024-06-01\") & date &lt;= as.Date(\"2024-12-01\")),\n        fill = \"#59a14f\", alpha = 0.5\n    ) +\n    geom_line(color = \"#4e79a7\", linewidth = 1) +\n    annotate(\"text\",\n        x = as.Date(\"2024-09-01\"), y = max(traffic_data$organic) * 0.8,\n        label = \"å¿«é€Ÿå¢é•¿æœŸ\", fontface = \"bold\", color = \"#59a14f\"\n    ) +\n    labs(\n        title = \"è‡ªç„¶æœç´¢æµé‡è¶‹åŠ¿\",\n        subtitle = \"ç»¿è‰²åŒºåŸŸä¸ºå¿«é€Ÿå¢é•¿æœŸ\",\n        x = \"æ—¥æœŸ\",\n        y = \"è®¿é—®é‡\"\n    )\n\n\n\n\n\n\n\n\n\n\nåŒé¢ç§¯å¯¹æ¯”\n\n# åˆ›å»ºæ­£è´Ÿå¯¹æ¯”æ•°æ®\ncompare_data &lt;- data.frame(\n    date = months,\n    positive = traffic_data$organic - mean(traffic_data$organic),\n    negative = traffic_data$paid - mean(traffic_data$paid)\n)\n\nggplot(compare_data, aes(x = date)) +\n    geom_area(aes(y = positive), fill = \"#59a14f\", alpha = 0.5) +\n    geom_area(aes(y = -abs(negative)), fill = \"#e15759\", alpha = 0.5) +\n    geom_hline(yintercept = 0, color = \"gray40\") +\n    labs(\n        title = \"æµé‡å˜åŒ–å¯¹æ¯”ï¼ˆç›¸å¯¹äºå‡å€¼ï¼‰\",\n        subtitle = \"ç»¿è‰²ï¼šè‡ªç„¶æœç´¢è¶…å‡å€¼ | çº¢è‰²ï¼šä»˜è´¹å¹¿å‘Šè¶…å‡å€¼\",\n        x = \"æ—¥æœŸ\",\n        y = \"åç¦»å‡å€¼\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "é¢ç§¯å›¾ä¸å †å å›¾"
    ]
  },
  {
    "objectID": "2030-bindareaplot.html#å¸¦æ ‡ç­¾çš„é¢ç§¯å›¾",
    "href": "2030-bindareaplot.html#å¸¦æ ‡ç­¾çš„é¢ç§¯å›¾",
    "title": "é¢ç§¯å›¾ä¸å †å å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "å¸¦æ ‡ç­¾çš„é¢ç§¯å›¾",
    "text": "å¸¦æ ‡ç­¾çš„é¢ç§¯å›¾\n\nç›´æ¥æ ‡ç­¾\n\n# è®¡ç®—æ ‡ç­¾ä½ç½®ï¼ˆæ¯ä¸ªåŒºåŸŸçš„ä¸­ç‚¹ï¼‰\nlabel_data &lt;- traffic_long %&gt;%\n    group_by(source) %&gt;%\n    summarise(\n        x = median(date),\n        y = mean(visits)\n    )\n\n# è®¡ç®—ç´¯ç§¯ä½ç½®\ntraffic_wide &lt;- traffic_data %&gt;%\n    mutate(across(c(organic, paid, social, direct, referral), ~ cumsum(.) / row_number()))\n\nggplot(traffic_long, aes(x = date, y = visits, fill = source)) +\n    geom_area(alpha = 0.8, color = \"white\", linewidth = 0.3) +\n    scale_fill_manual(values = source_colors) +\n    labs(\n        title = \"ç½‘ç«™æµé‡æ¥æºæ„æˆ\",\n        x = \"æ—¥æœŸ\",\n        y = \"æ€»è®¿é—®é‡\"\n    ) +\n    theme(legend.position = \"right\")\n\n\n\n\n\n\n\n\n\n\næœ«ç«¯æ ‡ç­¾\n\n# è·å–æœ€åä¸€ä¸ªæ—¶é—´ç‚¹çš„å€¼\nlast_date &lt;- max(traffic_long$date)\n\n# è®¡ç®—å †å åçš„ä½ç½®\nlast_values &lt;- traffic_long %&gt;%\n    filter(date == last_date) %&gt;%\n    arrange(desc(source)) %&gt;%\n    mutate(\n        cumsum_visits = cumsum(visits),\n        label_y = cumsum_visits - visits / 2\n    )\n\nggplot(traffic_long, aes(x = date, y = visits, fill = source)) +\n    geom_area(alpha = 0.8) +\n    geom_text(\n        data = last_values,\n        aes(x = last_date, y = label_y, label = source),\n        hjust = -0.1, size = 3.5, fontface = \"bold\"\n    ) +\n    scale_fill_manual(values = source_colors) +\n    scale_x_date(expand = expansion(mult = c(0.02, 0.2))) +\n    labs(\n        title = \"ç½‘ç«™æµé‡æ¥æºæ„æˆ\",\n        x = \"æ—¥æœŸ\",\n        y = \"æ€»è®¿é—®é‡\"\n    ) +\n    theme(legend.position = \"none\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "é¢ç§¯å›¾ä¸å †å å›¾"
    ]
  },
  {
    "objectID": "2030-bindareaplot.html#ç‰¹æ®Šç±»å‹é¢ç§¯å›¾",
    "href": "2030-bindareaplot.html#ç‰¹æ®Šç±»å‹é¢ç§¯å›¾",
    "title": "é¢ç§¯å›¾ä¸å †å å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "ç‰¹æ®Šç±»å‹é¢ç§¯å›¾",
    "text": "ç‰¹æ®Šç±»å‹é¢ç§¯å›¾\n\né˜¶æ¢¯é¢ç§¯å›¾\n\n# åˆ›å»ºé˜¶æ¢¯å¡«å……æ•°æ®\nstep_data &lt;- traffic_data %&gt;%\n    arrange(date) %&gt;%\n    mutate(\n        date_end = lead(date, default = max(date) + 30)\n    )\n\n# ä½¿ç”¨ geom_rect æ¨¡æ‹Ÿé˜¶æ¢¯é¢ç§¯å›¾\nggplot(step_data, aes(xmin = date, xmax = date_end, ymin = 0, ymax = organic)) +\n    geom_rect(fill = \"#4e79a7\", alpha = 0.5, color = \"#4e79a7\", linewidth = 0.3) +\n    geom_step(aes(x = date, y = organic), color = \"#4e79a7\", linewidth = 1) +\n    labs(\n        title = \"é˜¶æ¢¯é¢ç§¯å›¾\",\n        subtitle = \"é€‚åˆå±•ç¤ºç¦»æ•£æ—¶é—´ç‚¹çš„å˜åŒ–\",\n        x = \"æ—¥æœŸ\",\n        y = \"è®¿é—®é‡\"\n    )\n\n\n\n\n\n\n\n\n\n\né¢ç§¯å›¾ + æ•£ç‚¹\n\nggplot(traffic_data, aes(x = date, y = organic)) +\n    geom_area(fill = \"#4e79a7\", alpha = 0.3) +\n    geom_line(color = \"#4e79a7\", linewidth = 1) +\n    geom_point(color = \"#4e79a7\", size = 2.5, shape = 21, fill = \"white\", stroke = 1.5) +\n    labs(\n        title = \"é¢ç§¯å›¾ + æ•°æ®ç‚¹æ ‡è®°\",\n        x = \"æ—¥æœŸ\",\n        y = \"è®¿é—®é‡\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "é¢ç§¯å›¾ä¸å †å å›¾"
    ]
  },
  {
    "objectID": "2030-bindareaplot.html#äº¤äº’å¼é¢ç§¯å›¾",
    "href": "2030-bindareaplot.html#äº¤äº’å¼é¢ç§¯å›¾",
    "title": "é¢ç§¯å›¾ä¸å †å å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "äº¤äº’å¼é¢ç§¯å›¾",
    "text": "äº¤äº’å¼é¢ç§¯å›¾\n\nlibrary(plotly)\n\n# åˆ›å»ºäº¤äº’å¼å †å é¢ç§¯å›¾\np &lt;- ggplot(traffic_long, aes(\n    x = date, y = visits, fill = source,\n    text = paste0(source, \"\\n\", format(date, \"%Y-%m\"), \"\\nè®¿é—®é‡: \", round(visits))\n)) +\n    geom_area(alpha = 0.8) +\n    scale_fill_manual(values = source_colors) +\n    labs(\n        title = \"ç½‘ç«™æµé‡æ¥æºï¼ˆäº¤äº’å¼ï¼‰\",\n        x = \"æ—¥æœŸ\",\n        y = \"è®¿é—®é‡\"\n    ) +\n    theme_minimal()\n\nggplotly(p, tooltip = \"text\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "é¢ç§¯å›¾ä¸å †å å›¾"
    ]
  },
  {
    "objectID": "2030-bindareaplot.html#å®æˆ˜æ¡ˆä¾‹é¢„ç®—åˆ†é…å˜åŒ–",
    "href": "2030-bindareaplot.html#å®æˆ˜æ¡ˆä¾‹é¢„ç®—åˆ†é…å˜åŒ–",
    "title": "é¢ç§¯å›¾ä¸å †å å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "10. å®æˆ˜æ¡ˆä¾‹ï¼šé¢„ç®—åˆ†é…å˜åŒ–",
    "text": "10. å®æˆ˜æ¡ˆä¾‹ï¼šé¢„ç®—åˆ†é…å˜åŒ–\n\n# æ¨¡æ‹Ÿéƒ¨é—¨é¢„ç®—æ•°æ®\nyears &lt;- 2018:2025\nbudget_data &lt;- data.frame(\n    year = rep(years, each = 5),\n    department = rep(c(\"ç ”å‘\", \"å¸‚åœº\", \"è¿è¥\", \"äººåŠ›\", \"è¡Œæ”¿\"), length(years)),\n    budget = c(\n        # å„å¹´å„éƒ¨é—¨é¢„ç®—ï¼ˆç™¾ä¸‡å…ƒï¼‰\n        c(50, 30, 25, 15, 10), # 2018\n        c(55, 32, 26, 16, 11), # 2019\n        c(62, 35, 28, 18, 12), # 2020\n        c(70, 38, 30, 20, 13), # 2021\n        c(80, 42, 32, 22, 14), # 2022\n        c(90, 45, 35, 24, 15), # 2023\n        c(105, 48, 38, 26, 16), # 2024\n        c(120, 52, 40, 28, 17) # 2025\n    )\n)\n\n# é…è‰²\ndept_colors &lt;- c(\n    \"ç ”å‘\" = \"#4e79a7\",\n    \"å¸‚åœº\" = \"#f28e2b\",\n    \"è¿è¥\" = \"#59a14f\",\n    \"äººåŠ›\" = \"#e15759\",\n    \"è¡Œæ”¿\" = \"#76b7b2\"\n)\n\n# å †å é¢ç§¯å›¾\np1 &lt;- ggplot(budget_data, aes(x = year, y = budget, fill = department)) +\n    geom_area(alpha = 0.8, color = \"white\", linewidth = 0.3) +\n    scale_fill_manual(values = dept_colors) +\n    scale_x_continuous(breaks = years) +\n    labs(\n        title = \"æ€»é¢„ç®—å¢é•¿è¶‹åŠ¿\",\n        x = NULL,\n        y = \"é¢„ç®—ï¼ˆç™¾ä¸‡å…ƒï¼‰\",\n        fill = \"éƒ¨é—¨\"\n    )\n\n# ç™¾åˆ†æ¯”å †å \np2 &lt;- ggplot(budget_data, aes(x = year, y = budget, fill = department)) +\n    geom_area(position = \"fill\", alpha = 0.8, color = \"white\", linewidth = 0.3) +\n    scale_fill_manual(values = dept_colors) +\n    scale_x_continuous(breaks = years) +\n    scale_y_continuous(labels = percent_format()) +\n    labs(\n        title = \"é¢„ç®—åˆ†é…æ¯”ä¾‹å˜åŒ–\",\n        x = \"å¹´ä»½\",\n        y = \"å æ¯”\",\n        fill = \"éƒ¨é—¨\"\n    )\n\n# ç»„åˆ\nlibrary(patchwork)\np1 / p2 +\n    plot_layout(guides = \"collect\") +\n    plot_annotation(\n        title = \"å…¬å¸é¢„ç®—åˆ†é… 2018-2025\",\n        theme = theme(\n            plot.title = element_text(size = 18, face = \"bold\")\n        )\n    ) &\n    theme(legend.position = \"right\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "é¢ç§¯å›¾ä¸å †å å›¾"
    ]
  },
  {
    "objectID": "2030-bindareaplot.html#æ€»ç»“",
    "href": "2030-bindareaplot.html#æ€»ç»“",
    "title": "é¢ç§¯å›¾ä¸å †å å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nç±»å‹\né€‚ç”¨åœºæ™¯\nggplot2 ä»£ç \n\n\n\n\nåŸºç¡€é¢ç§¯å›¾\nå•å˜é‡è¶‹åŠ¿\ngeom_area()\n\n\nå †å é¢ç§¯å›¾\néƒ¨åˆ†ä¸æ•´ä½“\ngeom_area() + fill\n\n\nç™¾åˆ†æ¯”å †å \næ¯”ä¾‹å˜åŒ–\nposition = \"fill\"\n\n\næ²³æµå›¾\nç¾è§‚å±•ç¤º\nggstream::geom_stream()\n\n\nåˆ†é¢é¢ç§¯å›¾\nå¤šå˜é‡å¯¹æ¯”\nfacet_wrap()\n\n\n\n\n[!TIP] è®¾è®¡å»ºè®®ï¼š - å †å é¢ç§¯å›¾ç±»åˆ«ä¸å®œè¶…è¿‡ 6 ä¸ª - å°†é‡è¦ç±»åˆ«æ”¾åœ¨åº•éƒ¨ï¼ˆæ›´å®¹æ˜“æ¯”è¾ƒï¼‰ - ä½¿ç”¨ç™¾åˆ†æ¯”å †å æ—¶ç¡®ä¿æ•°æ®å¯æ¯” - æ²³æµå›¾é€‚åˆå±•ç¤ºè€Œéç²¾ç¡®åˆ†æ",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "é¢ç§¯å›¾ä¸å †å å›¾"
    ]
  },
  {
    "objectID": "2028-bindbarchart.html",
    "href": "2028-bindbarchart.html",
    "title": "æŸ±çŠ¶å›¾ä¸é¥¼å›¾å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "æŸ±çŠ¶å›¾å’Œé¥¼å›¾æ˜¯å±•ç¤ºåˆ†ç±»æ•°æ®çš„ç»å…¸å›¾è¡¨ï¼š\n\n\n\nå›¾è¡¨ç±»å‹\né€‚ç”¨åœºæ™¯\nä¼˜ç‚¹\nç¼ºç‚¹\n\n\n\n\næŸ±çŠ¶å›¾\næ¯”è¾ƒä¸åŒç±»åˆ«\nç²¾ç¡®æ¯”è¾ƒæ•°å€¼\nç±»åˆ«è¿‡å¤šæ—¶æ‹¥æŒ¤\n\n\nå †å æŸ±çŠ¶å›¾\nå±•ç¤ºç»„æˆæ¯”ä¾‹\næ˜¾ç¤ºæ€»é‡å’Œæ„æˆ\nä¸­é—´éƒ¨åˆ†éš¾æ¯”è¾ƒ\n\n\né¥¼å›¾\nå±•ç¤ºå æ¯”\nç›´è§‚å±•ç¤ºç™¾åˆ†æ¯”\néš¾ä»¥ç²¾ç¡®æ¯”è¾ƒ\n\n\næ£’æ£’ç³–å›¾\næ›¿ä»£æŸ±çŠ¶å›¾\nç®€æ´ç°ä»£\nä¸å¤Ÿä¼ ç»Ÿ\n\n\n\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(ggsci)\nlibrary(scales)\n\n# ä½¿ç”¨ mtcars å’Œ diamonds æ•°æ®\ndata(mtcars)\ndata(diamonds)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æŸ±çŠ¶å›¾ä¸é¥¼å›¾"
    ]
  },
  {
    "objectID": "2028-bindbarchart.html#ç®€ä»‹",
    "href": "2028-bindbarchart.html#ç®€ä»‹",
    "title": "æŸ±çŠ¶å›¾ä¸é¥¼å›¾å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "æŸ±çŠ¶å›¾å’Œé¥¼å›¾æ˜¯å±•ç¤ºåˆ†ç±»æ•°æ®çš„ç»å…¸å›¾è¡¨ï¼š\n\n\n\nå›¾è¡¨ç±»å‹\né€‚ç”¨åœºæ™¯\nä¼˜ç‚¹\nç¼ºç‚¹\n\n\n\n\næŸ±çŠ¶å›¾\næ¯”è¾ƒä¸åŒç±»åˆ«\nç²¾ç¡®æ¯”è¾ƒæ•°å€¼\nç±»åˆ«è¿‡å¤šæ—¶æ‹¥æŒ¤\n\n\nå †å æŸ±çŠ¶å›¾\nå±•ç¤ºç»„æˆæ¯”ä¾‹\næ˜¾ç¤ºæ€»é‡å’Œæ„æˆ\nä¸­é—´éƒ¨åˆ†éš¾æ¯”è¾ƒ\n\n\né¥¼å›¾\nå±•ç¤ºå æ¯”\nç›´è§‚å±•ç¤ºç™¾åˆ†æ¯”\néš¾ä»¥ç²¾ç¡®æ¯”è¾ƒ\n\n\næ£’æ£’ç³–å›¾\næ›¿ä»£æŸ±çŠ¶å›¾\nç®€æ´ç°ä»£\nä¸å¤Ÿä¼ ç»Ÿ\n\n\n\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(ggsci)\nlibrary(scales)\n\n# ä½¿ç”¨ mtcars å’Œ diamonds æ•°æ®\ndata(mtcars)\ndata(diamonds)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æŸ±çŠ¶å›¾ä¸é¥¼å›¾"
    ]
  },
  {
    "objectID": "2028-bindbarchart.html#åŸºç¡€æŸ±çŠ¶å›¾",
    "href": "2028-bindbarchart.html#åŸºç¡€æŸ±çŠ¶å›¾",
    "title": "æŸ±çŠ¶å›¾ä¸é¥¼å›¾å®Œå…¨æŒ‡å—",
    "section": "åŸºç¡€æŸ±çŠ¶å›¾",
    "text": "åŸºç¡€æŸ±çŠ¶å›¾\n\nè®¡æ•°æŸ±çŠ¶å›¾\n\nggplot(diamonds, aes(x = cut)) +\n    geom_bar(fill = \"#4f46e5\") +\n    labs(\n        title = \"å„åˆ‡å·¥ç­‰çº§çš„é’»çŸ³æ•°é‡\",\n        x = \"åˆ‡å·¥ç­‰çº§\",\n        y = \"æ•°é‡\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\næ•°å€¼æŸ±çŠ¶å›¾\nå½“æ•°æ®å·²ç»æ±‡æ€»æ—¶ï¼Œä½¿ç”¨ stat = \"identity\"ã€‚\n\n# æ±‡æ€»æ•°æ®\ncut_summary &lt;- diamonds %&gt;%\n    group_by(cut) %&gt;%\n    summarise(avg_price = mean(price))\n\nggplot(cut_summary, aes(x = cut, y = avg_price)) +\n    geom_bar(stat = \"identity\", fill = \"#22c55e\") +\n    labs(\n        title = \"å„åˆ‡å·¥ç­‰çº§çš„å¹³å‡ä»·æ ¼\",\n        x = \"åˆ‡å·¥ç­‰çº§\",\n        y = \"å¹³å‡ä»·æ ¼ ($)\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nä¹Ÿå¯ä»¥ä½¿ç”¨ geom_col\n\n# geom_col ç­‰ä»·äº geom_bar(stat = \"identity\")\nggplot(cut_summary, aes(x = cut, y = avg_price)) +\n    geom_col(fill = \"#f59e0b\") +\n    labs(title = \"ä½¿ç”¨ geom_col()\") +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æŸ±çŠ¶å›¾ä¸é¥¼å›¾"
    ]
  },
  {
    "objectID": "2028-bindbarchart.html#æŸ±çŠ¶å›¾ç¾åŒ–",
    "href": "2028-bindbarchart.html#æŸ±çŠ¶å›¾ç¾åŒ–",
    "title": "æŸ±çŠ¶å›¾ä¸é¥¼å›¾å®Œå…¨æŒ‡å—",
    "section": "æŸ±çŠ¶å›¾ç¾åŒ–",
    "text": "æŸ±çŠ¶å›¾ç¾åŒ–\n\nè‡ªå®šä¹‰é¢œè‰²\n\nggplot(diamonds, aes(x = cut, fill = cut)) +\n    geom_bar() +\n    scale_fill_brewer(palette = \"Set2\") +\n    labs(title = \"æŒ‰ç±»åˆ«å¡«è‰²\") +\n    theme_minimal() +\n    theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\n\n\næ·»åŠ æ•°å€¼æ ‡ç­¾\n\ncut_count &lt;- diamonds %&gt;%\n    count(cut)\n\nggplot(cut_count, aes(x = cut, y = n)) +\n    geom_col(fill = \"#4f46e5\") +\n    geom_text(\n        aes(label = format(n, big.mark = \",\")),\n        vjust = -0.5,\n        size = 4\n    ) +\n    scale_y_continuous(expand = expansion(mult = c(0, 0.1))) +\n    labs(\n        title = \"æ·»åŠ æ•°å€¼æ ‡ç­¾\",\n        x = \"åˆ‡å·¥ç­‰çº§\",\n        y = \"æ•°é‡\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\næŸ±å†…æ ‡ç­¾\n\nggplot(cut_count, aes(x = cut, y = n)) +\n    geom_col(fill = \"#4f46e5\") +\n    geom_text(\n        aes(label = format(n, big.mark = \",\")),\n        vjust = 1.5,\n        color = \"white\",\n        size = 4,\n        fontface = \"bold\"\n    ) +\n    labs(title = \"æŸ±å†…æ•°å€¼æ ‡ç­¾\") +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\næ°´å¹³æŸ±çŠ¶å›¾\n\nggplot(cut_count, aes(x = reorder(cut, n), y = n)) +\n    geom_col(fill = \"#22c55e\") +\n    geom_text(aes(label = format(n, big.mark = \",\")), hjust = -0.1) +\n    coord_flip() +\n    labs(\n        title = \"æ°´å¹³æŸ±çŠ¶å›¾\",\n        x = NULL,\n        y = \"æ•°é‡\"\n    ) +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æŸ±çŠ¶å›¾ä¸é¥¼å›¾"
    ]
  },
  {
    "objectID": "2028-bindbarchart.html#åˆ†ç»„æŸ±çŠ¶å›¾",
    "href": "2028-bindbarchart.html#åˆ†ç»„æŸ±çŠ¶å›¾",
    "title": "æŸ±çŠ¶å›¾ä¸é¥¼å›¾å®Œå…¨æŒ‡å—",
    "section": "åˆ†ç»„æŸ±çŠ¶å›¾",
    "text": "åˆ†ç»„æŸ±çŠ¶å›¾\n\nå¹¶åˆ—åˆ†ç»„\n\n# å‡†å¤‡åˆ†ç»„æ•°æ®\ngrouped_data &lt;- diamonds %&gt;%\n    filter(cut %in% c(\"Fair\", \"Good\", \"Ideal\")) %&gt;%\n    count(cut, color) %&gt;%\n    filter(color %in% c(\"D\", \"E\", \"F\"))\n\nggplot(grouped_data, aes(x = color, y = n, fill = cut)) +\n    geom_col(position = position_dodge(width = 0.8), width = 0.7) +\n    scale_fill_brewer(palette = \"Set2\") +\n    labs(\n        title = \"åˆ†ç»„æŸ±çŠ¶å›¾\",\n        x = \"é¢œè‰²ç­‰çº§\",\n        y = \"æ•°é‡\",\n        fill = \"åˆ‡å·¥\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nè°ƒæ•´åˆ†ç»„é—´è·\n\nggplot(grouped_data, aes(x = color, y = n, fill = cut)) +\n    geom_col(position = position_dodge2(width = 0.9, preserve = \"single\")) +\n    scale_fill_lancet() +\n    labs(title = \"è°ƒæ•´åˆ†ç»„é—´è·\") +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æŸ±çŠ¶å›¾ä¸é¥¼å›¾"
    ]
  },
  {
    "objectID": "2028-bindbarchart.html#å †å æŸ±çŠ¶å›¾",
    "href": "2028-bindbarchart.html#å †å æŸ±çŠ¶å›¾",
    "title": "æŸ±çŠ¶å›¾ä¸é¥¼å›¾å®Œå…¨æŒ‡å—",
    "section": "å †å æŸ±çŠ¶å›¾",
    "text": "å †å æŸ±çŠ¶å›¾\n\nåŸºç¡€å †å \n\nstack_data &lt;- diamonds %&gt;%\n    count(cut, clarity)\n\nggplot(stack_data, aes(x = cut, y = n, fill = clarity)) +\n    geom_col() +\n    scale_fill_brewer(palette = \"Spectral\") +\n    labs(\n        title = \"å †å æŸ±çŠ¶å›¾\",\n        x = \"åˆ‡å·¥\",\n        y = \"æ•°é‡\",\n        fill = \"å‡€åº¦\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nç™¾åˆ†æ¯”å †å \n\nggplot(stack_data, aes(x = cut, y = n, fill = clarity)) +\n    geom_col(position = \"fill\") +\n    scale_fill_brewer(palette = \"Spectral\") +\n    scale_y_continuous(labels = percent_format()) +\n    labs(\n        title = \"ç™¾åˆ†æ¯”å †å æŸ±çŠ¶å›¾\",\n        x = \"åˆ‡å·¥\",\n        y = \"ç™¾åˆ†æ¯”\",\n        fill = \"å‡€åº¦\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\næ·»åŠ ç™¾åˆ†æ¯”æ ‡ç­¾\n\n# è®¡ç®—ç™¾åˆ†æ¯”\nstack_pct &lt;- stack_data %&gt;%\n    group_by(cut) %&gt;%\n    mutate(pct = n / sum(n))\n\nggplot(stack_pct, aes(x = cut, y = pct, fill = clarity)) +\n    geom_col() +\n    geom_text(\n        aes(label = ifelse(pct &gt; 0.05, percent(pct, accuracy = 1), \"\")),\n        position = position_stack(vjust = 0.5),\n        color = \"white\",\n        size = 3\n    ) +\n    scale_fill_brewer(palette = \"Spectral\") +\n    scale_y_continuous(labels = percent_format()) +\n    labs(title = \"å¸¦æ ‡ç­¾çš„ç™¾åˆ†æ¯”å †å å›¾\") +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æŸ±çŠ¶å›¾ä¸é¥¼å›¾"
    ]
  },
  {
    "objectID": "2028-bindbarchart.html#è¯¯å·®æ£’",
    "href": "2028-bindbarchart.html#è¯¯å·®æ£’",
    "title": "æŸ±çŠ¶å›¾ä¸é¥¼å›¾å®Œå…¨æŒ‡å—",
    "section": "è¯¯å·®æ£’",
    "text": "è¯¯å·®æ£’\n\næ·»åŠ æ ‡å‡†è¯¯å·®\n\n# è®¡ç®—å‡å€¼å’Œæ ‡å‡†è¯¯å·®\nerror_data &lt;- diamonds %&gt;%\n    group_by(cut) %&gt;%\n    summarise(\n        mean_price = mean(price),\n        se = sd(price) / sqrt(n()),\n        .groups = \"drop\"\n    )\n\nggplot(error_data, aes(x = cut, y = mean_price)) +\n    geom_col(fill = \"#4f46e5\", alpha = 0.8) +\n    geom_errorbar(\n        aes(ymin = mean_price - se, ymax = mean_price + se),\n        width = 0.2\n    ) +\n    labs(\n        title = \"æŸ±çŠ¶å›¾ + è¯¯å·®æ£’ (æ ‡å‡†è¯¯å·®)\",\n        x = \"åˆ‡å·¥\",\n        y = \"å¹³å‡ä»·æ ¼ ($)\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\næ·»åŠ æ ‡å‡†å·®\n\nerror_data2 &lt;- diamonds %&gt;%\n    group_by(cut) %&gt;%\n    summarise(\n        mean_price = mean(price),\n        sd_price = sd(price),\n        .groups = \"drop\"\n    )\n\nggplot(error_data2, aes(x = cut, y = mean_price)) +\n    geom_col(fill = \"#22c55e\", alpha = 0.8) +\n    geom_errorbar(\n        aes(ymin = mean_price - sd_price, ymax = mean_price + sd_price),\n        width = 0.2,\n        color = \"#166534\"\n    ) +\n    labs(title = \"æŸ±çŠ¶å›¾ + æ ‡å‡†å·®\") +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æŸ±çŠ¶å›¾ä¸é¥¼å›¾"
    ]
  },
  {
    "objectID": "2028-bindbarchart.html#æ£’æ£’ç³–å›¾",
    "href": "2028-bindbarchart.html#æ£’æ£’ç³–å›¾",
    "title": "æŸ±çŠ¶å›¾ä¸é¥¼å›¾å®Œå…¨æŒ‡å—",
    "section": "æ£’æ£’ç³–å›¾",
    "text": "æ£’æ£’ç³–å›¾\næ£’æ£’ç³–å›¾æ˜¯æŸ±çŠ¶å›¾çš„ç°ä»£æ›¿ä»£å“ï¼Œæ›´åŠ ç®€æ´ã€‚\n\nåŸºç¡€æ£’æ£’ç³–å›¾\n\nggplot(cut_summary, aes(x = cut, y = avg_price)) +\n    geom_segment(\n        aes(x = cut, xend = cut, y = 0, yend = avg_price),\n        color = \"#94a3b8\",\n        linewidth = 1\n    ) +\n    geom_point(color = \"#4f46e5\", size = 4) +\n    labs(\n        title = \"æ£’æ£’ç³–å›¾\",\n        x = \"åˆ‡å·¥ç­‰çº§\",\n        y = \"å¹³å‡ä»·æ ¼\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\næ°´å¹³æ£’æ£’ç³–å›¾\n\nggplot(cut_summary, aes(x = reorder(cut, avg_price), y = avg_price)) +\n    geom_segment(\n        aes(xend = cut, y = 0, yend = avg_price),\n        color = \"#94a3b8\",\n        linewidth = 1\n    ) +\n    geom_point(color = \"#ef4444\", size = 5) +\n    geom_text(aes(label = paste0(\"$\", round(avg_price))), hjust = -0.3) +\n    coord_flip() +\n    labs(\n        title = \"æ°´å¹³æ£’æ£’ç³–å›¾\",\n        x = NULL,\n        y = \"å¹³å‡ä»·æ ¼\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nCleveland ç‚¹å›¾\n\nggplot(cut_summary, aes(x = avg_price, y = reorder(cut, avg_price))) +\n    geom_point(color = \"#4f46e5\", size = 4) +\n    geom_segment(\n        aes(x = min(avg_price) - 100, xend = avg_price, yend = cut),\n        linetype = \"dotted\",\n        color = \"#94a3b8\"\n    ) +\n    labs(\n        title = \"Cleveland ç‚¹å›¾\",\n        x = \"å¹³å‡ä»·æ ¼\",\n        y = NULL\n    ) +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æŸ±çŠ¶å›¾ä¸é¥¼å›¾"
    ]
  },
  {
    "objectID": "2028-bindbarchart.html#é¥¼å›¾",
    "href": "2028-bindbarchart.html#é¥¼å›¾",
    "title": "æŸ±çŠ¶å›¾ä¸é¥¼å›¾å®Œå…¨æŒ‡å—",
    "section": "é¥¼å›¾",
    "text": "é¥¼å›¾\n\n[!WARNING] é¥¼å›¾åœ¨æ•°æ®å¯è§†åŒ–ä¸­å¸¸è¢«æ‰¹è¯„ï¼Œå› ä¸ºéš¾ä»¥ç²¾ç¡®æ¯”è¾ƒæ‰‡åŒºå¤§å°ã€‚å»ºè®®åœ¨ç±»åˆ«è¾ƒå°‘ï¼ˆâ‰¤5ï¼‰ä¸”éœ€è¦å¼ºè°ƒå æ¯”æ—¶ä½¿ç”¨ã€‚\n\n\nåŸºç¡€é¥¼å›¾\n\ncut_pct &lt;- diamonds %&gt;%\n    count(cut) %&gt;%\n    mutate(pct = n / sum(n))\n\nggplot(cut_pct, aes(x = \"\", y = pct, fill = cut)) +\n    geom_col(width = 1) +\n    coord_polar(theta = \"y\") +\n    scale_fill_brewer(palette = \"Set2\") +\n    labs(title = \"åŸºç¡€é¥¼å›¾\", fill = \"åˆ‡å·¥\") +\n    theme_void()\n\n\n\n\n\n\n\n\n\n\næ·»åŠ ç™¾åˆ†æ¯”æ ‡ç­¾\n\nggplot(cut_pct, aes(x = \"\", y = pct, fill = cut)) +\n    geom_col(width = 1) +\n    geom_text(\n        aes(label = percent(pct, accuracy = 0.1)),\n        position = position_stack(vjust = 0.5),\n        color = \"white\",\n        fontface = \"bold\"\n    ) +\n    coord_polar(theta = \"y\") +\n    scale_fill_brewer(palette = \"Set2\") +\n    labs(title = \"å¸¦æ ‡ç­¾é¥¼å›¾\") +\n    theme_void()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æŸ±çŠ¶å›¾ä¸é¥¼å›¾"
    ]
  },
  {
    "objectID": "2028-bindbarchart.html#ç¯å½¢å›¾-donut-chart",
    "href": "2028-bindbarchart.html#ç¯å½¢å›¾-donut-chart",
    "title": "æŸ±çŠ¶å›¾ä¸é¥¼å›¾å®Œå…¨æŒ‡å—",
    "section": "ç¯å½¢å›¾ (Donut Chart)",
    "text": "ç¯å½¢å›¾ (Donut Chart)\n\nggplot(cut_pct, aes(x = 2, y = pct, fill = cut)) +\n    geom_col(width = 1) +\n    geom_text(\n        aes(label = percent(pct, accuracy = 0.1)),\n        position = position_stack(vjust = 0.5),\n        color = \"white\",\n        size = 3\n    ) +\n    coord_polar(theta = \"y\") +\n    xlim(0.5, 2.5) + # åˆ›å»ºä¸­å¿ƒç©ºæ´\n    scale_fill_brewer(palette = \"Pastel1\") +\n    labs(title = \"ç¯å½¢å›¾ (Donut Chart)\") +\n    theme_void()\n\n\n\n\n\n\n\n\n\nå¸¦ä¸­å¿ƒæ–‡å­—çš„ç¯å½¢å›¾\n\nggplot(cut_pct, aes(x = 2, y = pct, fill = cut)) +\n    geom_col(width = 1) +\n    coord_polar(theta = \"y\") +\n    xlim(0.5, 2.5) +\n    annotate(\"text\",\n        x = 0.5, y = 0,\n        label = paste0(\"Total\\n\", format(sum(cut_pct$n), big.mark = \",\")),\n        size = 5, fontface = \"bold\"\n    ) +\n    scale_fill_lancet() +\n    labs(title = \"å¸¦æ€»æ•°çš„ç¯å½¢å›¾\") +\n    theme_void()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æŸ±çŠ¶å›¾ä¸é¥¼å›¾"
    ]
  },
  {
    "objectID": "2028-bindbarchart.html#ç«ç‘°å›¾-coxcombnightingale",
    "href": "2028-bindbarchart.html#ç«ç‘°å›¾-coxcombnightingale",
    "title": "æŸ±çŠ¶å›¾ä¸é¥¼å›¾å®Œå…¨æŒ‡å—",
    "section": "ç«ç‘°å›¾ (Coxcomb/Nightingale)",
    "text": "ç«ç‘°å›¾ (Coxcomb/Nightingale)\n\nggplot(cut_pct, aes(x = cut, y = pct, fill = cut)) +\n    geom_col(width = 1) +\n    coord_polar() +\n    scale_fill_brewer(palette = \"Set3\") +\n    labs(title = \"ç«ç‘°å›¾ (Nightingale Chart)\") +\n    theme_minimal() +\n    theme(\n        axis.text.y = element_blank(),\n        axis.title = element_blank(),\n        legend.position = \"none\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æŸ±çŠ¶å›¾ä¸é¥¼å›¾"
    ]
  },
  {
    "objectID": "2028-bindbarchart.html#åå¤«é¥¼å›¾-waffle-chart",
    "href": "2028-bindbarchart.html#åå¤«é¥¼å›¾-waffle-chart",
    "title": "æŸ±çŠ¶å›¾ä¸é¥¼å›¾å®Œå…¨æŒ‡å—",
    "section": "åå¤«é¥¼å›¾ (Waffle Chart)",
    "text": "åå¤«é¥¼å›¾ (Waffle Chart)\n\n# install.packages(\"waffle\")\nlibrary(waffle)\n\n# å‡†å¤‡æ•°æ®ï¼ˆå››èˆäº”å…¥ä¸ºæ•´æ•°ç™¾åˆ†æ¯”ï¼‰\nwaffle_data &lt;- cut_pct %&gt;%\n    mutate(pct_int = round(pct * 100)) %&gt;%\n    pull(pct_int)\nnames(waffle_data) &lt;- cut_pct$cut\n\nwaffle(waffle_data,\n    rows = 5, size = 1,\n    colors = RColorBrewer::brewer.pal(5, \"Set2\"),\n    title = \"åå¤«é¥¼å›¾ï¼šå„åˆ‡å·¥å æ¯”\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æŸ±çŠ¶å›¾ä¸é¥¼å›¾"
    ]
  },
  {
    "objectID": "2028-bindbarchart.html#æ ‘çŠ¶å›¾-treemap",
    "href": "2028-bindbarchart.html#æ ‘çŠ¶å›¾-treemap",
    "title": "æŸ±çŠ¶å›¾ä¸é¥¼å›¾å®Œå…¨æŒ‡å—",
    "section": "æ ‘çŠ¶å›¾ (Treemap)",
    "text": "æ ‘çŠ¶å›¾ (Treemap)\n\n# install.packages(\"treemapify\")\nlibrary(treemapify)\n\ntree_data &lt;- diamonds %&gt;%\n    count(cut, color) %&gt;%\n    group_by(cut) %&gt;%\n    mutate(total = sum(n))\n\nggplot(tree_data, aes(area = n, fill = cut, subgroup = cut)) +\n    geom_treemap() +\n    geom_treemap_subgroup_border(color = \"white\", size = 3) +\n    geom_treemap_text(aes(label = color), color = \"white\", place = \"centre\") +\n    scale_fill_brewer(palette = \"Set2\") +\n    labs(title = \"æ ‘çŠ¶å›¾ï¼šåˆ‡å·¥ä¸é¢œè‰²åˆ†å¸ƒ\") +\n    theme(legend.position = \"bottom\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æŸ±çŠ¶å›¾ä¸é¥¼å›¾"
    ]
  },
  {
    "objectID": "2028-bindbarchart.html#åˆ†é¢æŸ±çŠ¶å›¾",
    "href": "2028-bindbarchart.html#åˆ†é¢æŸ±çŠ¶å›¾",
    "title": "æŸ±çŠ¶å›¾ä¸é¥¼å›¾å®Œå…¨æŒ‡å—",
    "section": "åˆ†é¢æŸ±çŠ¶å›¾",
    "text": "åˆ†é¢æŸ±çŠ¶å›¾\n\nfacet_data &lt;- diamonds %&gt;%\n    count(cut, clarity) %&gt;%\n    filter(clarity %in% c(\"IF\", \"VVS1\", \"VS1\", \"SI1\"))\n\nggplot(facet_data, aes(x = cut, y = n, fill = cut)) +\n    geom_col() +\n    facet_wrap(~clarity, scales = \"free_y\") +\n    scale_fill_brewer(palette = \"Set2\") +\n    labs(title = \"æŒ‰å‡€åº¦åˆ†é¢çš„æŸ±çŠ¶å›¾\") +\n    theme_minimal() +\n    theme(\n        legend.position = \"none\",\n        axis.text.x = element_text(angle = 45, hjust = 1)\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æŸ±çŠ¶å›¾ä¸é¥¼å›¾"
    ]
  },
  {
    "objectID": "2028-bindbarchart.html#ä¸“ä¸šå›¾è¡¨ç¤ºä¾‹",
    "href": "2028-bindbarchart.html#ä¸“ä¸šå›¾è¡¨ç¤ºä¾‹",
    "title": "æŸ±çŠ¶å›¾ä¸é¥¼å›¾å®Œå…¨æŒ‡å—",
    "section": "ä¸“ä¸šå›¾è¡¨ç¤ºä¾‹",
    "text": "ä¸“ä¸šå›¾è¡¨ç¤ºä¾‹\n\n# å‡†å¤‡ä¸“ä¸šå›¾è¡¨æ•°æ®\npro_data &lt;- diamonds %&gt;%\n    group_by(cut) %&gt;%\n    summarise(\n        count = n(),\n        avg_price = mean(price),\n        se = sd(price) / sqrt(n())\n    ) %&gt;%\n    mutate(cut = factor(cut, levels = rev(levels(cut))))\n\nggplot(pro_data, aes(x = cut, y = avg_price)) +\n    geom_col(fill = \"#4f46e5\", alpha = 0.9, width = 0.7) +\n    geom_errorbar(\n        aes(ymin = avg_price - se, ymax = avg_price + se),\n        width = 0.15,\n        color = \"#1e1b4b\"\n    ) +\n    geom_text(\n        aes(label = paste0(\"$\", format(round(avg_price), big.mark = \",\"))),\n        hjust = -0.1,\n        color = \"#1e1b4b\",\n        fontface = \"bold\"\n    ) +\n    coord_flip() +\n    scale_y_continuous(\n        labels = dollar_format(),\n        expand = expansion(mult = c(0, 0.15))\n    ) +\n    labs(\n        title = \"é’»çŸ³å¹³å‡ä»·æ ¼æŒ‰åˆ‡å·¥ç­‰çº§æ¯”è¾ƒ\",\n        subtitle = \"è¯¯å·®æ£’è¡¨ç¤ºæ ‡å‡†è¯¯å·®\",\n        x = NULL,\n        y = \"å¹³å‡ä»·æ ¼\",\n        caption = \"æ•°æ®æ¥æºï¼šggplot2 diamonds\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\", size = 14),\n        plot.subtitle = element_text(color = \"gray50\"),\n        panel.grid.major.y = element_blank(),\n        panel.grid.minor = element_blank()\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æŸ±çŠ¶å›¾ä¸é¥¼å›¾"
    ]
  },
  {
    "objectID": "2028-bindbarchart.html#ä¿å­˜å›¾ç‰‡",
    "href": "2028-bindbarchart.html#ä¿å­˜å›¾ç‰‡",
    "title": "æŸ±çŠ¶å›¾ä¸é¥¼å›¾å®Œå…¨æŒ‡å—",
    "section": "ä¿å­˜å›¾ç‰‡",
    "text": "ä¿å­˜å›¾ç‰‡\n\np &lt;- ggplot(cut_count, aes(x = cut, y = n, fill = cut)) +\n    geom_col() +\n    scale_fill_brewer(palette = \"Set2\") +\n    theme_minimal()\n\nggsave(\"barchart.png\", p, width = 8, height = 6, dpi = 300)\nggsave(\"barchart.pdf\", p, width = 8, height = 6)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æŸ±çŠ¶å›¾ä¸é¥¼å›¾"
    ]
  },
  {
    "objectID": "2028-bindbarchart.html#æ€»ç»“",
    "href": "2028-bindbarchart.html#æ€»ç»“",
    "title": "æŸ±çŠ¶å›¾ä¸é¥¼å›¾å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nåœºæ™¯\næ¨èå›¾è¡¨\n\n\n\n\nç±»åˆ«æ•°å€¼æ¯”è¾ƒ\næŸ±çŠ¶å›¾/æ°´å¹³æŸ±çŠ¶å›¾\n\n\nå¤šç»„å¯¹æ¯”\nåˆ†ç»„æŸ±çŠ¶å›¾\n\n\nå æ¯”æ„æˆ\nå †å æŸ±çŠ¶å›¾/ç™¾åˆ†æ¯”å †å \n\n\nç®€æ´ç°ä»£é£æ ¼\næ£’æ£’ç³–å›¾\n\n\nå æ¯”å±•ç¤ºï¼ˆâ‰¤5ç±»ï¼‰\né¥¼å›¾/ç¯å½¢å›¾\n\n\nå±‚çº§å æ¯”\næ ‘çŠ¶å›¾\n\n\n\n\n[!TIP] æœ€ä½³å®è·µï¼š 1. æ’åºæŸ±çŠ¶å›¾ä½¿æ¯”è¾ƒæ›´å®¹æ˜“ 2. æ°´å¹³æŸ±çŠ¶å›¾é€‚åˆé•¿ç±»åˆ«å 3. é¿å… 3D æ•ˆæœï¼Œä¿æŒç®€æ´ 4. æ·»åŠ æ•°å€¼æ ‡ç­¾å¢å¼ºå¯è¯»æ€§",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æŸ±çŠ¶å›¾ä¸é¥¼å›¾"
    ]
  },
  {
    "objectID": "2026-bindscatterplot.html",
    "href": "2026-bindscatterplot.html",
    "title": "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "æ•£ç‚¹å›¾æ˜¯å±•ç¤ºä¸¤ä¸ªè¿ç»­å˜é‡å…³ç³»çš„åŸºç¡€å›¾è¡¨ï¼Œå¯ä»¥æ­ç¤ºï¼š\n\nç›¸å…³æ€§ï¼šæ­£ç›¸å…³ã€è´Ÿç›¸å…³æˆ–æ— ç›¸å…³\nè¶‹åŠ¿ï¼šçº¿æ€§æˆ–éçº¿æ€§å…³ç³»\nèšç±»ï¼šæ•°æ®çš„è‡ªç„¶åˆ†ç»„\nå¼‚å¸¸å€¼ï¼šåç¦»ä¸»ä½“çš„æ•°æ®ç‚¹\n\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(ggsci)\n\n# ä½¿ç”¨ mtcars æ•°æ®é›†\ndata(mtcars)\nhead(mtcars)\n\n                   mpg cyl disp  hp drat    wt  qsec vs am gear carb\nMazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4\nMazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4\nDatsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1\nHornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1\nHornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2\nValiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿"
    ]
  },
  {
    "objectID": "2026-bindscatterplot.html#ç®€ä»‹",
    "href": "2026-bindscatterplot.html#ç®€ä»‹",
    "title": "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "æ•£ç‚¹å›¾æ˜¯å±•ç¤ºä¸¤ä¸ªè¿ç»­å˜é‡å…³ç³»çš„åŸºç¡€å›¾è¡¨ï¼Œå¯ä»¥æ­ç¤ºï¼š\n\nç›¸å…³æ€§ï¼šæ­£ç›¸å…³ã€è´Ÿç›¸å…³æˆ–æ— ç›¸å…³\nè¶‹åŠ¿ï¼šçº¿æ€§æˆ–éçº¿æ€§å…³ç³»\nèšç±»ï¼šæ•°æ®çš„è‡ªç„¶åˆ†ç»„\nå¼‚å¸¸å€¼ï¼šåç¦»ä¸»ä½“çš„æ•°æ®ç‚¹\n\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(ggsci)\n\n# ä½¿ç”¨ mtcars æ•°æ®é›†\ndata(mtcars)\nhead(mtcars)\n\n                   mpg cyl disp  hp drat    wt  qsec vs am gear carb\nMazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4\nMazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4\nDatsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1\nHornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1\nHornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2\nValiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿"
    ]
  },
  {
    "objectID": "2026-bindscatterplot.html#åŸºç¡€æ•£ç‚¹å›¾",
    "href": "2026-bindscatterplot.html#åŸºç¡€æ•£ç‚¹å›¾",
    "title": "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿å®Œå…¨æŒ‡å—",
    "section": "åŸºç¡€æ•£ç‚¹å›¾",
    "text": "åŸºç¡€æ•£ç‚¹å›¾\n\næœ€ç®€å•çš„æ•£ç‚¹å›¾\n\nggplot(mtcars, aes(x = wt, y = mpg)) +\n    geom_point() +\n    labs(\n        title = \"æ±½è½¦é‡é‡ä¸æ²¹è€—çš„å…³ç³»\",\n        x = \"é‡é‡ (1000 ç£…)\",\n        y = \"æ²¹è€— (è‹±é‡Œ/åŠ ä»‘)\"\n    )\n\n\n\n\n\n\n\n\n\n\nè‡ªå®šä¹‰ç‚¹æ ·å¼\n\nggplot(mtcars, aes(x = wt, y = mpg)) +\n    geom_point(\n        color = \"#4f46e5\", # é¢œè‰²\n        size = 3, # å¤§å°\n        alpha = 0.7, # é€æ˜åº¦\n        shape = 16 # å½¢çŠ¶ï¼ˆå®å¿ƒåœ†ï¼‰\n    ) +\n    labs(title = \"è‡ªå®šä¹‰ç‚¹æ ·å¼\") +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nç‚¹å½¢çŠ¶å‚è€ƒ\n\n# R å†…ç½®çš„ 25 ç§ç‚¹å½¢çŠ¶\nshapes_df &lt;- data.frame(\n    x = rep(1:5, 5),\n    y = rep(5:1, each = 5),\n    shape = 0:24\n)\n\nggplot(shapes_df, aes(x, y)) +\n    geom_point(aes(shape = factor(shape)), size = 5, fill = \"#4f46e5\") +\n    geom_text(aes(label = shape), vjust = -1.5, size = 3) +\n    scale_shape_manual(values = 0:24) +\n    labs(title = \"R å†…ç½®ç‚¹å½¢çŠ¶ (0-24)\", shape = \"Shape\") +\n    theme_void() +\n    theme(legend.position = \"none\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿"
    ]
  },
  {
    "objectID": "2026-bindscatterplot.html#æŒ‰åˆ†ç»„ç€è‰²",
    "href": "2026-bindscatterplot.html#æŒ‰åˆ†ç»„ç€è‰²",
    "title": "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿å®Œå…¨æŒ‡å—",
    "section": "æŒ‰åˆ†ç»„ç€è‰²",
    "text": "æŒ‰åˆ†ç»„ç€è‰²\n\nç¦»æ•£å˜é‡åˆ†ç»„\n\nmtcars$cyl_factor &lt;- factor(mtcars$cyl)\n\nggplot(mtcars, aes(x = wt, y = mpg, color = cyl_factor)) +\n    geom_point(size = 3) +\n    scale_color_brewer(palette = \"Set1\") +\n    labs(\n        title = \"æŒ‰æ°”ç¼¸æ•°åˆ†ç»„\",\n        color = \"æ°”ç¼¸æ•°\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nè¿ç»­å˜é‡ç€è‰²\n\nggplot(mtcars, aes(x = wt, y = mpg, color = hp)) +\n    geom_point(size = 3) +\n    scale_color_viridis_c(option = \"plasma\") + # æ¸å˜è‰²\n    labs(\n        title = \"æŒ‰é©¬åŠ›ç€è‰²\",\n        color = \"é©¬åŠ› (hp)\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nä½¿ç”¨ç§‘å­¦æœŸåˆŠé…è‰²\n\nggplot(mtcars, aes(x = wt, y = mpg, color = cyl_factor)) +\n    geom_point(size = 3) +\n    scale_color_lancet() +\n    labs(title = \"Lancet é…è‰²é£æ ¼\", color = \"æ°”ç¼¸æ•°\") +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿"
    ]
  },
  {
    "objectID": "2026-bindscatterplot.html#æ·»åŠ å›å½’çº¿",
    "href": "2026-bindscatterplot.html#æ·»åŠ å›å½’çº¿",
    "title": "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿å®Œå…¨æŒ‡å—",
    "section": "æ·»åŠ å›å½’çº¿",
    "text": "æ·»åŠ å›å½’çº¿\n\nç®€å•çº¿æ€§å›å½’\n\nggplot(mtcars, aes(x = wt, y = mpg)) +\n    geom_point(color = \"#4f46e5\", size = 2) +\n    geom_smooth(method = \"lm\", se = TRUE, color = \"#ef4444\") +\n    labs(\n        title = \"æ•£ç‚¹å›¾ + çº¿æ€§å›å½’çº¿\",\n        subtitle = \"ç°è‰²åŒºåŸŸä¸º 95% ç½®ä¿¡åŒºé—´\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nä¸æ˜¾ç¤ºç½®ä¿¡åŒºé—´\n\nggplot(mtcars, aes(x = wt, y = mpg)) +\n    geom_point(size = 2, alpha = 0.7) +\n    geom_smooth(method = \"lm\", se = FALSE, color = \"#22c55e\", linewidth = 1.2) +\n    labs(title = \"ä»…æ˜¾ç¤ºå›å½’çº¿\") +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nåˆ†ç»„å›å½’çº¿\n\nggplot(mtcars, aes(x = wt, y = mpg, color = cyl_factor)) +\n    geom_point(size = 2) +\n    geom_smooth(method = \"lm\", se = FALSE) +\n    scale_color_brewer(palette = \"Set1\") +\n    labs(\n        title = \"åˆ†ç»„å›å½’çº¿\",\n        color = \"æ°”ç¼¸æ•°\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nLOESS å¹³æ»‘æ›²çº¿\n\nggplot(mtcars, aes(x = wt, y = mpg)) +\n    geom_point(size = 2, alpha = 0.6) +\n    geom_smooth(method = \"loess\", span = 0.75, color = \"#8b5cf6\") +\n    labs(\n        title = \"LOESS å±€éƒ¨å¤šé¡¹å¼å›å½’\",\n        subtitle = \"é€‚ç”¨äºéçº¿æ€§å…³ç³»\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nå¤šé¡¹å¼å›å½’\n\nggplot(mtcars, aes(x = wt, y = mpg)) +\n    geom_point(size = 2, alpha = 0.6) +\n    geom_smooth(\n        method = \"lm\",\n        formula = y ~ poly(x, 2), # äºŒæ¬¡å¤šé¡¹å¼\n        color = \"#f59e0b\"\n    ) +\n    labs(title = \"äºŒæ¬¡å¤šé¡¹å¼å›å½’\") +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿"
    ]
  },
  {
    "objectID": "2026-bindscatterplot.html#æ·»åŠ æ ‡ç­¾",
    "href": "2026-bindscatterplot.html#æ·»åŠ æ ‡ç­¾",
    "title": "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿å®Œå…¨æŒ‡å—",
    "section": "æ·»åŠ æ ‡ç­¾",
    "text": "æ·»åŠ æ ‡ç­¾\n\næ ‡æ³¨æ‰€æœ‰ç‚¹\n\n# ä½¿ç”¨ ggrepel é¿å…æ ‡ç­¾é‡å \n# install.packages(\"ggrepel\")\nlibrary(ggrepel)\n\n# æ·»åŠ è¡Œåä½œä¸ºæ ‡ç­¾\nmtcars$car_name &lt;- rownames(mtcars)\n\nggplot(mtcars[1:15, ], aes(x = wt, y = mpg, label = car_name)) +\n    geom_point(color = \"#4f46e5\", size = 2) +\n    geom_text_repel(size = 3, max.overlaps = 15) +\n    labs(title = \"æ•£ç‚¹å›¾ + æ•°æ®æ ‡ç­¾\") +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nä»…æ ‡æ³¨é‡è¦ç‚¹\n\n# æ ‡æ³¨æå€¼ç‚¹\nmtcars_labeled &lt;- mtcars %&gt;%\n    mutate(\n        label = ifelse(mpg == max(mpg) | mpg == min(mpg) |\n            wt == max(wt) | wt == min(wt),\n        car_name, \"\"\n        )\n    )\n\nggplot(mtcars_labeled, aes(x = wt, y = mpg)) +\n    geom_point(color = \"#4f46e5\", size = 2) +\n    geom_text_repel(\n        aes(label = label),\n        size = 3,\n        color = \"#ef4444\",\n        fontface = \"bold\"\n    ) +\n    labs(title = \"ä»…æ ‡æ³¨æå€¼ç‚¹\") +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿"
    ]
  },
  {
    "objectID": "2026-bindscatterplot.html#æ°”æ³¡å›¾",
    "href": "2026-bindscatterplot.html#æ°”æ³¡å›¾",
    "title": "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿å®Œå…¨æŒ‡å—",
    "section": "æ°”æ³¡å›¾",
    "text": "æ°”æ³¡å›¾\næ°”æ³¡å›¾é€šè¿‡ç‚¹çš„å¤§å°è¡¨ç¤ºç¬¬ä¸‰ä¸ªå˜é‡ã€‚\n\nåŸºç¡€æ°”æ³¡å›¾\n\nggplot(mtcars, aes(x = wt, y = mpg, size = hp)) +\n    geom_point(alpha = 0.6, color = \"#4f46e5\") +\n    scale_size_continuous(range = c(2, 12)) + # æ§åˆ¶å¤§å°èŒƒå›´\n    labs(\n        title = \"æ°”æ³¡å›¾ï¼šé©¬åŠ›ä½œä¸ºæ°”æ³¡å¤§å°\",\n        size = \"é©¬åŠ›\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\né¢œè‰² + å¤§å°åŒç¼–ç \n\nggplot(mtcars, aes(x = wt, y = mpg, size = hp, color = cyl_factor)) +\n    geom_point(alpha = 0.7) +\n    scale_size_continuous(range = c(2, 10)) +\n    scale_color_brewer(palette = \"Set2\") +\n    labs(\n        title = \"åŒç¼–ç æ°”æ³¡å›¾\",\n        subtitle = \"é¢œè‰²è¡¨ç¤ºæ°”ç¼¸æ•°ï¼Œå¤§å°è¡¨ç¤ºé©¬åŠ›\",\n        size = \"é©¬åŠ›\",\n        color = \"æ°”ç¼¸æ•°\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\næ‰“åŒ…æ°”æ³¡å›¾ (Packed Bubble)\n\n# ä½¿ç”¨ packcircles åŒ…\n# install.packages(\"packcircles\")\nlibrary(packcircles)\n\n# æŒ‰æ°”ç¼¸æ•°ç»Ÿè®¡\ncyl_summary &lt;- mtcars %&gt;%\n    group_by(cyl) %&gt;%\n    summarise(count = n(), mean_mpg = mean(mpg))\n\n# è®¡ç®—åœ†çš„ä½ç½®\npacking &lt;- circleProgressiveLayout(cyl_summary$count, sizetype = \"area\")\ncyl_summary &lt;- cbind(cyl_summary, packing)\ncircles &lt;- circleLayoutVertices(packing, npoints = 50)\n\nggplot() +\n    geom_polygon(\n        data = circles,\n        aes(x, y, group = id, fill = factor(id)),\n        color = \"white\",\n        alpha = 0.8\n    ) +\n    geom_text(\n        data = cyl_summary,\n        aes(x, y, label = paste0(cyl, \"ç¼¸\\nn=\", count)),\n        size = 5\n    ) +\n    scale_fill_brewer(palette = \"Set2\") +\n    coord_equal() +\n    theme_void() +\n    theme(legend.position = \"none\") +\n    labs(title = \"æ‰“åŒ…æ°”æ³¡å›¾ï¼šå„æ°”ç¼¸æ•°è½¦å‹æ•°é‡\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿"
    ]
  },
  {
    "objectID": "2026-bindscatterplot.html#è¾¹é™…åˆ†å¸ƒå›¾",
    "href": "2026-bindscatterplot.html#è¾¹é™…åˆ†å¸ƒå›¾",
    "title": "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿å®Œå…¨æŒ‡å—",
    "section": "è¾¹é™…åˆ†å¸ƒå›¾",
    "text": "è¾¹é™…åˆ†å¸ƒå›¾\nç»“åˆæ•£ç‚¹å›¾å’Œè¾¹é™…ç›´æ–¹å›¾/å¯†åº¦å›¾ã€‚\n\n# ä½¿ç”¨ ggExtra åŒ…\n# install.packages(\"ggExtra\")\nlibrary(ggExtra)\n\np &lt;- ggplot(mtcars, aes(x = wt, y = mpg, color = cyl_factor)) +\n    geom_point(size = 2) +\n    scale_color_brewer(palette = \"Set1\") +\n    labs(color = \"æ°”ç¼¸æ•°\") +\n    theme_minimal()\n\n# æ·»åŠ è¾¹é™…ç›´æ–¹å›¾\nggMarginal(p, type = \"histogram\", groupColour = TRUE, groupFill = TRUE)\n\n\n# æ·»åŠ è¾¹é™…å¯†åº¦å›¾\nggMarginal(p, type = \"density\", groupColour = TRUE, groupFill = TRUE)\n\n\n# æ·»åŠ è¾¹é™…ç®±çº¿å›¾\nggMarginal(p, type = \"boxplot\", groupColour = TRUE, groupFill = TRUE)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿"
    ]
  },
  {
    "objectID": "2026-bindscatterplot.html#å¯†åº¦æ•£ç‚¹å›¾",
    "href": "2026-bindscatterplot.html#å¯†åº¦æ•£ç‚¹å›¾",
    "title": "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿å®Œå…¨æŒ‡å—",
    "section": "å¯†åº¦æ•£ç‚¹å›¾",
    "text": "å¯†åº¦æ•£ç‚¹å›¾\nå¤„ç†å¤§é‡æ•°æ®ç‚¹é‡å é—®é¢˜ã€‚\n\né€æ˜åº¦å¤„ç†\n\n# æ¨¡æ‹Ÿå¤§æ•°æ®\nset.seed(42)\nbig_data &lt;- data.frame(\n    x = rnorm(5000),\n    y = rnorm(5000)\n)\n\nggplot(big_data, aes(x, y)) +\n    geom_point(alpha = 0.1) + # ä½é€æ˜åº¦\n    labs(title = \"ä½¿ç”¨é€æ˜åº¦å¤„ç†é‡å \") +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\n2D å¯†åº¦ç­‰é«˜çº¿\n\nggplot(big_data, aes(x, y)) +\n    geom_point(alpha = 0.05) +\n    geom_density_2d(color = \"#ef4444\") +\n    labs(title = \"2D å¯†åº¦ç­‰é«˜çº¿\") +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\n2D å¯†åº¦å¡«å……\n\nggplot(big_data, aes(x, y)) +\n    stat_density_2d(\n        aes(fill = after_stat(level)),\n        geom = \"polygon\"\n    ) +\n    scale_fill_viridis_c() +\n    labs(title = \"2D å¯†åº¦å¡«å……å›¾\") +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nå…­è¾¹å½¢åˆ†ç®±\n\nggplot(big_data, aes(x, y)) +\n    geom_hex(bins = 30) +\n    scale_fill_viridis_c() +\n    labs(title = \"å…­è¾¹å½¢åˆ†ç®±å›¾\") +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿"
    ]
  },
  {
    "objectID": "2026-bindscatterplot.html#åˆ†é¢æ•£ç‚¹å›¾",
    "href": "2026-bindscatterplot.html#åˆ†é¢æ•£ç‚¹å›¾",
    "title": "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿å®Œå…¨æŒ‡å—",
    "section": "åˆ†é¢æ•£ç‚¹å›¾",
    "text": "åˆ†é¢æ•£ç‚¹å›¾\n\nfacet_wrap\n\nggplot(mtcars, aes(x = wt, y = mpg)) +\n    geom_point(color = \"#4f46e5\", size = 2) +\n    geom_smooth(method = \"lm\", se = FALSE, color = \"#ef4444\") +\n    facet_wrap(~cyl, labeller = labeller(cyl = c(\n        \"4\" = \"4ç¼¸\", \"6\" = \"6ç¼¸\", \"8\" = \"8ç¼¸\"\n    ))) +\n    labs(title = \"æŒ‰æ°”ç¼¸æ•°åˆ†é¢\") +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nfacet_grid\n\nmtcars$am_label &lt;- ifelse(mtcars$am == 0, \"è‡ªåŠ¨æŒ¡\", \"æ‰‹åŠ¨æŒ¡\")\n\nggplot(mtcars, aes(x = wt, y = mpg)) +\n    geom_point(size = 2) +\n    facet_grid(am_label ~ cyl, labeller = labeller(cyl = c(\n        \"4\" = \"4ç¼¸\", \"6\" = \"6ç¼¸\", \"8\" = \"8ç¼¸\"\n    ))) +\n    labs(title = \"åŒå˜é‡åˆ†é¢ç½‘æ ¼\") +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿"
    ]
  },
  {
    "objectID": "2026-bindscatterplot.html#ç›¸å…³ç³»æ•°æ ‡æ³¨",
    "href": "2026-bindscatterplot.html#ç›¸å…³ç³»æ•°æ ‡æ³¨",
    "title": "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿å®Œå…¨æŒ‡å—",
    "section": "ç›¸å…³ç³»æ•°æ ‡æ³¨",
    "text": "ç›¸å…³ç³»æ•°æ ‡æ³¨\n\n# ä½¿ç”¨ ggpubr\nlibrary(ggpubr)\n\nggscatter(mtcars,\n    x = \"wt\", y = \"mpg\",\n    add = \"reg.line\",\n    conf.int = TRUE,\n    color = \"#4f46e5\",\n    add.params = list(color = \"#ef4444\")\n) +\n    stat_cor(method = \"pearson\", label.x = 4, label.y = 33) +\n    labs(\n        title = \"æ•£ç‚¹å›¾ + ç›¸å…³ç³»æ•°\",\n        x = \"é‡é‡\",\n        y = \"æ²¹è€—\"\n    )\n\n\n\n\n\n\n\n\n\nåˆ†ç»„ç›¸å…³ç³»æ•°\n\nggscatter(mtcars,\n    x = \"wt\", y = \"mpg\",\n    color = \"cyl_factor\",\n    palette = \"Set1\",\n    add = \"reg.line\",\n    conf.int = TRUE\n) +\n    stat_cor(aes(color = cyl_factor), label.y = c(32, 30, 28)) +\n    labs(title = \"åˆ†ç»„ç›¸å…³ç³»æ•°\", color = \"æ°”ç¼¸æ•°\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿"
    ]
  },
  {
    "objectID": "2026-bindscatterplot.html#æ·»åŠ å‚è€ƒçº¿",
    "href": "2026-bindscatterplot.html#æ·»åŠ å‚è€ƒçº¿",
    "title": "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿å®Œå…¨æŒ‡å—",
    "section": "æ·»åŠ å‚è€ƒçº¿",
    "text": "æ·»åŠ å‚è€ƒçº¿\n\n# è®¡ç®—å‡å€¼\nmean_wt &lt;- mean(mtcars$wt)\nmean_mpg &lt;- mean(mtcars$mpg)\n\nggplot(mtcars, aes(x = wt, y = mpg)) +\n    geom_point(size = 2, color = \"#4f46e5\") +\n    geom_hline(yintercept = mean_mpg, linetype = \"dashed\", color = \"#ef4444\") +\n    geom_vline(xintercept = mean_wt, linetype = \"dashed\", color = \"#22c55e\") +\n    annotate(\"text\", x = 5, y = mean_mpg + 1, label = \"å¹³å‡æ²¹è€—\", color = \"#ef4444\") +\n    annotate(\"text\", x = mean_wt + 0.2, y = 35, label = \"å¹³å‡é‡é‡\", color = \"#22c55e\", angle = 90) +\n    labs(title = \"æ·»åŠ å‡å€¼å‚è€ƒçº¿\") +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿"
    ]
  },
  {
    "objectID": "2026-bindscatterplot.html#ä¸“ä¸šå›¾è¡¨ç¤ºä¾‹",
    "href": "2026-bindscatterplot.html#ä¸“ä¸šå›¾è¡¨ç¤ºä¾‹",
    "title": "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿å®Œå…¨æŒ‡å—",
    "section": "ä¸“ä¸šå›¾è¡¨ç¤ºä¾‹",
    "text": "ä¸“ä¸šå›¾è¡¨ç¤ºä¾‹\n\nggplot(mtcars, aes(x = wt, y = mpg)) +\n    geom_point(\n        aes(color = cyl_factor, size = hp),\n        alpha = 0.7\n    ) +\n    geom_smooth(\n        method = \"lm\",\n        color = \"#1e293b\",\n        fill = \"#e2e8f0\",\n        linewidth = 1\n    ) +\n    scale_color_manual(\n        values = c(\"#3b82f6\", \"#22c55e\", \"#ef4444\"),\n        labels = c(\"4ç¼¸\", \"6ç¼¸\", \"8ç¼¸\")\n    ) +\n    scale_size_continuous(range = c(2, 8)) +\n    labs(\n        title = \"æ±½è½¦é‡é‡ä¸æ²¹è€—å…³ç³»åˆ†æ\",\n        subtitle = \"ç‚¹å¤§å°è¡¨ç¤ºé©¬åŠ›ï¼Œé¢œè‰²è¡¨ç¤ºæ°”ç¼¸æ•°\",\n        x = \"é‡é‡ (Ã—1000 ç£…)\",\n        y = \"æ²¹è€— (è‹±é‡Œ/åŠ ä»‘)\",\n        color = \"æ°”ç¼¸æ•°\",\n        size = \"é©¬åŠ›\",\n        caption = \"æ•°æ®æ¥æºï¼š1974 Motor Trend US magazine\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\", size = 14),\n        plot.subtitle = element_text(color = \"gray50\"),\n        legend.position = \"right\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿"
    ]
  },
  {
    "objectID": "2026-bindscatterplot.html#æ€»ç»“",
    "href": "2026-bindscatterplot.html#æ€»ç»“",
    "title": "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nåœºæ™¯\næ¨èæ–¹æ³•\n\n\n\n\nä¸¤å˜é‡å…³ç³»\nåŸºç¡€æ•£ç‚¹å›¾ + å›å½’çº¿\n\n\nåˆ†ç»„æ¯”è¾ƒ\né¢œè‰²/å½¢çŠ¶åˆ†ç»„\n\n\nä¸‰å˜é‡\næ°”æ³¡å›¾\n\n\nå¤§æ•°æ®\né€æ˜åº¦/å¯†åº¦å›¾/å…­è¾¹å½¢åˆ†ç®±\n\n\nåˆ†å¸ƒå±•ç¤º\nè¾¹é™…åˆ†å¸ƒå›¾\n\n\nç›¸å…³åˆ†æ\næ·»åŠ ç›¸å…³ç³»æ•°æ ‡æ³¨\n\n\n\n\n[!TIP] æœ€ä½³å®è·µï¼š 1. æ•°æ®é‡å¤§æ—¶ä½¿ç”¨é€æ˜åº¦æˆ–å¯†åº¦å›¾ 2. æ·»åŠ å›å½’çº¿æ—¶è®°å¾—æ˜¾ç¤º RÂ² å€¼ 3. æ°”æ³¡å›¾çš„å¤§å°æ˜ å°„åº”é€‰æ‹©æœ‰æ„ä¹‰çš„å˜é‡ 4. ä½¿ç”¨ ggrepel é¿å…æ ‡ç­¾é‡å ",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿"
    ]
  },
  {
    "objectID": "2024-venn.html",
    "href": "2024-venn.html",
    "title": "éŸ¦æ©å›¾ (Venn Diagram) ç»˜åˆ¶æŒ‡å—",
    "section": "",
    "text": "éŸ¦æ©å›¾ (Venn Diagram) æ˜¯å±•ç¤ºé›†åˆä¹‹é—´äº¤é›†å’Œå·®é›†å…³ç³»çš„ç»å…¸å›¾å½¢ã€‚å®ƒç”±é‡å çš„åœ†ï¼ˆæˆ–æ¤­åœ†ï¼‰ç»„æˆï¼Œä¸åŒåŒºåŸŸä»£è¡¨ä¸åŒçš„é›†åˆå…³ç³»ã€‚\n\n\n\n\n\né¢†åŸŸ\nç¤ºä¾‹\n\n\n\n\nç”Ÿç‰©ä¿¡æ¯å­¦\nå·®å¼‚è¡¨è¾¾åŸºå› äº¤é›†ã€GOå¯Œé›†é€šè·¯æ¯”è¾ƒ\n\n\nå¸‚åœºåˆ†æ\nç”¨æˆ·ç¾¤ä½“é‡å ã€æ¸ é“æ¥æºå¯¹æ¯”\n\n\næ–‡çŒ®ç ”ç©¶\næ•°æ®åº“æ£€ç´¢ç»“æœå¯¹æ¯”ã€ç­›é€‰æµç¨‹\n\n\né—®å·è°ƒæŸ¥\nå¤šé€‰é¢˜ç­”æ¡ˆåˆ†å¸ƒã€åå¥½äº¤å‰åˆ†æ\n\n\n\n\n[!NOTE] æ ‡å‡†éŸ¦æ©å›¾æœ€å¤šæ”¯æŒ 5 ä¸ªé›†åˆã€‚è¶…è¿‡ 5 ä¸ªæ—¶å»ºè®®ä½¿ç”¨ UpSet å›¾æˆ– Euler å›¾ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "éŸ¦æ©å›¾"
    ]
  },
  {
    "objectID": "2024-venn.html#ä»€ä¹ˆæ˜¯éŸ¦æ©å›¾",
    "href": "2024-venn.html#ä»€ä¹ˆæ˜¯éŸ¦æ©å›¾",
    "title": "éŸ¦æ©å›¾ (Venn Diagram) ç»˜åˆ¶æŒ‡å—",
    "section": "",
    "text": "éŸ¦æ©å›¾ (Venn Diagram) æ˜¯å±•ç¤ºé›†åˆä¹‹é—´äº¤é›†å’Œå·®é›†å…³ç³»çš„ç»å…¸å›¾å½¢ã€‚å®ƒç”±é‡å çš„åœ†ï¼ˆæˆ–æ¤­åœ†ï¼‰ç»„æˆï¼Œä¸åŒåŒºåŸŸä»£è¡¨ä¸åŒçš„é›†åˆå…³ç³»ã€‚\n\n\n\n\n\né¢†åŸŸ\nç¤ºä¾‹\n\n\n\n\nç”Ÿç‰©ä¿¡æ¯å­¦\nå·®å¼‚è¡¨è¾¾åŸºå› äº¤é›†ã€GOå¯Œé›†é€šè·¯æ¯”è¾ƒ\n\n\nå¸‚åœºåˆ†æ\nç”¨æˆ·ç¾¤ä½“é‡å ã€æ¸ é“æ¥æºå¯¹æ¯”\n\n\næ–‡çŒ®ç ”ç©¶\næ•°æ®åº“æ£€ç´¢ç»“æœå¯¹æ¯”ã€ç­›é€‰æµç¨‹\n\n\né—®å·è°ƒæŸ¥\nå¤šé€‰é¢˜ç­”æ¡ˆåˆ†å¸ƒã€åå¥½äº¤å‰åˆ†æ\n\n\n\n\n[!NOTE] æ ‡å‡†éŸ¦æ©å›¾æœ€å¤šæ”¯æŒ 5 ä¸ªé›†åˆã€‚è¶…è¿‡ 5 ä¸ªæ—¶å»ºè®®ä½¿ç”¨ UpSet å›¾æˆ– Euler å›¾ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "éŸ¦æ©å›¾"
    ]
  },
  {
    "objectID": "2024-venn.html#æ–¹æ³•ä¸€ggvenndiagramæ¨è",
    "href": "2024-venn.html#æ–¹æ³•ä¸€ggvenndiagramæ¨è",
    "title": "éŸ¦æ©å›¾ (Venn Diagram) ç»˜åˆ¶æŒ‡å—",
    "section": "2. æ–¹æ³•ä¸€ï¼šggVennDiagramï¼ˆæ¨èï¼‰",
    "text": "2. æ–¹æ³•ä¸€ï¼šggVennDiagramï¼ˆæ¨èï¼‰\nggVennDiagram æ˜¯ç›®å‰æœ€ç°ä»£ã€æœ€ç¾è§‚çš„ R éŸ¦æ©å›¾åŒ…ï¼ŒåŸºäº ggplot2ï¼Œæ”¯æŒé«˜åº¦è‡ªå®šä¹‰ã€‚\n\nå®‰è£…ä¸åŠ è½½\n\ninstall.packages(\"ggVennDiagram\")\n\n\nlibrary(ggVennDiagram)\nlibrary(ggplot2)\n\n\n\nåŸºç¡€éŸ¦æ©å›¾ï¼ˆ2-4 ä¸ªé›†åˆï¼‰\n\n# åˆ›å»ºç¤ºä¾‹æ•°æ®ï¼šåŸºå› åˆ—è¡¨\ngene_list &lt;- list(\n    Treatment_A = c(\"Gene1\", \"Gene2\", \"Gene3\", \"Gene4\", \"Gene5\", \"Gene6\"),\n    Treatment_B = c(\"Gene3\", \"Gene4\", \"Gene5\", \"Gene7\", \"Gene8\", \"Gene9\"),\n    Treatment_C = c(\"Gene1\", \"Gene5\", \"Gene9\", \"Gene10\", \"Gene11\", \"Gene12\")\n)\n\n# ç»‘åˆ¶åŸºç¡€éŸ¦æ©å›¾\nggVennDiagram(gene_list) +\n    scale_fill_gradient(low = \"#F4FAFE\", high = \"#4f46e5\") +\n    labs(title = \"ä¸‰ç»„å¤„ç†çš„å·®å¼‚åŸºå› äº¤é›†\") +\n    theme(\n        plot.title = element_text(hjust = 0.5, face = \"bold\", size = 16),\n        legend.position = \"none\"\n    )\n\n\n\nè‡ªå®šä¹‰æ ·å¼\n\n# è‡ªå®šä¹‰é¢œè‰²å’Œæ ‡ç­¾\nggVennDiagram(\n    gene_list,\n    label = \"count\", # æ˜¾ç¤ºè®¡æ•°\n    label_alpha = 0, # æ ‡ç­¾èƒŒæ™¯é€æ˜\n    edge_size = 1 # è¾¹æ¡†å®½åº¦\n) +\n    scale_fill_distiller(palette = \"RdBu\") +\n    scale_color_manual(values = c(\"#e11d48\", \"#0891b2\", \"#16a34a\")) +\n    labs(title = \"å·®å¼‚åŸºå› éŸ¦æ©å›¾\") +\n    theme_void() +\n    theme(\n        plot.title = element_text(hjust = 0.5, face = \"bold\", size = 16),\n        legend.position = \"bottom\"\n    )\n\n\n\næ˜¾ç¤ºç™¾åˆ†æ¯”\n\nggVennDiagram(\n    gene_list,\n    label = \"percent\", # æ˜¾ç¤ºç™¾åˆ†æ¯”\n    label_percent_digit = 1\n) +\n    scale_fill_gradient(low = \"white\", high = \"#22c55e\") +\n    theme_void()\n\n\n\nå››é›†åˆéŸ¦æ©å›¾\n\n# å››ç»„æ•°æ®\ngene_list_4 &lt;- list(\n    Condition_A = paste0(\"Gene\", sample(1:100, 40)),\n    Condition_B = paste0(\"Gene\", sample(1:100, 35)),\n    Condition_C = paste0(\"Gene\", sample(1:100, 45)),\n    Condition_D = paste0(\"Gene\", sample(1:100, 30))\n)\n\nset.seed(123)\nggVennDiagram(gene_list_4, label = \"count\") +\n    scale_fill_gradient(low = \"#f0f9ff\", high = \"#0369a1\") +\n    theme_void() +\n    labs(title = \"å››æ¡ä»¶å·®å¼‚åŸºå› æ¯”è¾ƒ\")\n\n\n\näº”é›†åˆéŸ¦æ©å›¾\n\n# äº”ç»„æ•°æ®\ngene_list_5 &lt;- list(\n    A = paste0(\"Gene\", sample(1:200, 50)),\n    B = paste0(\"Gene\", sample(1:200, 45)),\n    C = paste0(\"Gene\", sample(1:200, 55)),\n    D = paste0(\"Gene\", sample(1:200, 40)),\n    E = paste0(\"Gene\", sample(1:200, 35))\n)\n\nset.seed(456)\nggVennDiagram(gene_list_5, label = \"count\", label_size = 3) +\n    scale_fill_gradient(low = \"white\", high = \"#7c3aed\") +\n    theme_void()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "éŸ¦æ©å›¾"
    ]
  },
  {
    "objectID": "2024-venn.html#æ–¹æ³•äºŒvenndiagram-åŒ…",
    "href": "2024-venn.html#æ–¹æ³•äºŒvenndiagram-åŒ…",
    "title": "éŸ¦æ©å›¾ (Venn Diagram) ç»˜åˆ¶æŒ‡å—",
    "section": "3. æ–¹æ³•äºŒï¼šVennDiagram åŒ…",
    "text": "3. æ–¹æ³•äºŒï¼šVennDiagram åŒ…\nVennDiagram æ˜¯ç»å…¸çš„éŸ¦æ©å›¾åŒ…ï¼ŒåŠŸèƒ½å¼ºå¤§ä½†è¯­æ³•è¾ƒå¤æ‚ã€‚\n\nå®‰è£…ä¸åŠ è½½\n\ninstall.packages(\"VennDiagram\")\n\n\nlibrary(VennDiagram)\nlibrary(grid)\n\n\n\nåŒé›†åˆéŸ¦æ©å›¾\n\n# ç»‘åˆ¶åŒé›†åˆå›¾\nvenn.plot &lt;- draw.pairwise.venn(\n    area1 = 100,\n    area2 = 80,\n    cross.area = 30,\n    category = c(\"Group A\", \"Group B\"),\n    fill = c(\"#4f46e5\", \"#f97316\"),\n    alpha = 0.5,\n    cat.pos = c(-20, 20),\n    cat.dist = 0.05,\n    cat.fontfamily = \"sans\",\n    fontfamily = \"sans\"\n)\ngrid.draw(venn.plot)\n\n\n\nä¸‰é›†åˆéŸ¦æ©å›¾\n\ngrid.newpage()\nvenn.plot &lt;- draw.triple.venn(\n    area1 = 100,\n    area2 = 80,\n    area3 = 90,\n    n12 = 30,\n    n23 = 25,\n    n13 = 35,\n    n123 = 15,\n    category = c(\"A\", \"B\", \"C\"),\n    fill = c(\"#4f46e5\", \"#22c55e\", \"#f97316\"),\n    alpha = 0.4,\n    cat.fontfamily = \"sans\",\n    fontfamily = \"sans\"\n)\ngrid.draw(venn.plot)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "éŸ¦æ©å›¾"
    ]
  },
  {
    "objectID": "2024-venn.html#æå–äº¤é›†å…ƒç´ ",
    "href": "2024-venn.html#æå–äº¤é›†å…ƒç´ ",
    "title": "éŸ¦æ©å›¾ (Venn Diagram) ç»˜åˆ¶æŒ‡å—",
    "section": "4. æå–äº¤é›†å…ƒç´ ",
    "text": "4. æå–äº¤é›†å…ƒç´ \nåœ¨å®é™…åˆ†æä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦æå–å„åŒºåŸŸçš„å…·ä½“å…ƒç´ ã€‚\n\n# ä½¿ç”¨ ggVennDiagram çš„è¾…åŠ©å‡½æ•°\nlibrary(ggVennDiagram)\n\n# è·å–äº¤é›†ä¿¡æ¯\nvenn_result &lt;- process_data(Venn(gene_list))\n\n# æŸ¥çœ‹å„åŒºåŸŸ\nvenn_region(venn_result)\n\n\næ‰‹åŠ¨æå–äº¤é›†\n\n# åˆ›å»ºç¤ºä¾‹æ•°æ®\ngene_list &lt;- list(\n    Treatment_A = c(\"Gene1\", \"Gene2\", \"Gene3\", \"Gene4\", \"Gene5\", \"Gene6\"),\n    Treatment_B = c(\"Gene3\", \"Gene4\", \"Gene5\", \"Gene7\", \"Gene8\", \"Gene9\"),\n    Treatment_C = c(\"Gene1\", \"Gene5\", \"Gene9\", \"Gene10\", \"Gene11\", \"Gene12\")\n)\n\n# ç»å…¸æ–¹æ³•ï¼šä½¿ç”¨ Reduce å’Œ intersect\nA &lt;- gene_list$Treatment_A\nB &lt;- gene_list$Treatment_B\nC &lt;- gene_list$Treatment_C\n\n# A âˆ© Bï¼ˆä»… A å’Œ B çš„äº¤é›†ï¼Œä¸å« Cï¼‰\nAB_only &lt;- setdiff(intersect(A, B), C)\ncat(\"A âˆ© B (not C):\", AB_only, \"\\n\")\n\nA âˆ© B (not C): Gene3 Gene4 \n\n# A âˆ© B âˆ© Cï¼ˆä¸‰è€…å…±æœ‰ï¼‰\nABC &lt;- Reduce(intersect, gene_list)\ncat(\"A âˆ© B âˆ© C:\", ABC, \"\\n\")\n\nA âˆ© B âˆ© C: Gene5 \n\n# ä»… A ç‹¬æœ‰\nA_only &lt;- setdiff(A, union(B, C))\ncat(\"Only A:\", A_only, \"\\n\")\n\nOnly A: Gene2 Gene6",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "éŸ¦æ©å›¾"
    ]
  },
  {
    "objectID": "2024-venn.html#euler-å›¾é¢ç§¯æˆæ¯”ä¾‹",
    "href": "2024-venn.html#euler-å›¾é¢ç§¯æˆæ¯”ä¾‹",
    "title": "éŸ¦æ©å›¾ (Venn Diagram) ç»˜åˆ¶æŒ‡å—",
    "section": "5. Euler å›¾ï¼ˆé¢ç§¯æˆæ¯”ä¾‹ï¼‰",
    "text": "5. Euler å›¾ï¼ˆé¢ç§¯æˆæ¯”ä¾‹ï¼‰\næ ‡å‡†éŸ¦æ©å›¾çš„åœ†åœˆå¤§å°æ˜¯å›ºå®šçš„ã€‚å¦‚æœéœ€è¦é¢ç§¯ä¸é›†åˆå¤§å°æˆæ¯”ä¾‹ï¼Œå¯ä»¥ä½¿ç”¨ eulerr åŒ…ã€‚\n\ninstall.packages(\"eulerr\")\n\n\nlibrary(eulerr)\n\n# å®šä¹‰é›†åˆå¤§å°\nfit &lt;- euler(c(\n    A = 50,\n    B = 40,\n    C = 30,\n    \"A&B\" = 15,\n    \"A&C\" = 10,\n    \"B&C\" = 8,\n    \"A&B&C\" = 5\n))\n\n# ç»‘åˆ¶ Euler å›¾\nplot(fit,\n    fills = list(fill = c(\"#4f46e5\", \"#22c55e\", \"#f97316\"), alpha = 0.5),\n    labels = list(fontsize = 14),\n    quantities = list(fontsize = 12)\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "éŸ¦æ©å›¾"
    ]
  },
  {
    "objectID": "2024-venn.html#upset-å›¾è¶…è¿‡-5-ä¸ªé›†åˆ",
    "href": "2024-venn.html#upset-å›¾è¶…è¿‡-5-ä¸ªé›†åˆ",
    "title": "éŸ¦æ©å›¾ (Venn Diagram) ç»˜åˆ¶æŒ‡å—",
    "section": "6. UpSet å›¾ï¼ˆè¶…è¿‡ 5 ä¸ªé›†åˆï¼‰",
    "text": "6. UpSet å›¾ï¼ˆè¶…è¿‡ 5 ä¸ªé›†åˆï¼‰\nå½“é›†åˆæ•°é‡è¶…è¿‡ 5 ä¸ªæ—¶ï¼ŒéŸ¦æ©å›¾å˜å¾—éš¾ä»¥é˜…è¯»ã€‚UpSet å›¾æ˜¯æ›´å¥½çš„æ›¿ä»£æ–¹æ¡ˆã€‚\n\ninstall.packages(\"UpSetR\")\n\n\nlibrary(UpSetR)\n\n# å‡†å¤‡æ•°æ®ï¼ˆäºŒè¿›åˆ¶çŸ©é˜µæ ¼å¼ï¼‰\nset.seed(789)\nupset_data &lt;- data.frame(\n    Gene = paste0(\"Gene\", 1:100),\n    Study_A = sample(0:1, 100, replace = TRUE),\n    Study_B = sample(0:1, 100, replace = TRUE),\n    Study_C = sample(0:1, 100, replace = TRUE),\n    Study_D = sample(0:1, 100, replace = TRUE),\n    Study_E = sample(0:1, 100, replace = TRUE),\n    Study_F = sample(0:1, 100, replace = TRUE)\n)\n\n# ç»‘åˆ¶ UpSet å›¾\nupset(\n    upset_data,\n    sets = c(\"Study_A\", \"Study_B\", \"Study_C\", \"Study_D\", \"Study_E\", \"Study_F\"),\n    order.by = \"freq\",\n    main.bar.color = \"#4f46e5\",\n    sets.bar.color = \"#22c55e\",\n    matrix.color = \"#1e293b\",\n    point.size = 3,\n    line.size = 1\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "éŸ¦æ©å›¾"
    ]
  },
  {
    "objectID": "2024-venn.html#å®æˆ˜æ¡ˆä¾‹æ–‡çŒ®ç­›é€‰",
    "href": "2024-venn.html#å®æˆ˜æ¡ˆä¾‹æ–‡çŒ®ç­›é€‰",
    "title": "éŸ¦æ©å›¾ (Venn Diagram) ç»˜åˆ¶æŒ‡å—",
    "section": "7. å®æˆ˜æ¡ˆä¾‹ï¼šæ–‡çŒ®ç­›é€‰",
    "text": "7. å®æˆ˜æ¡ˆä¾‹ï¼šæ–‡çŒ®ç­›é€‰\n\n# æ¨¡æ‹Ÿä¸‰ä¸ªæ•°æ®åº“çš„æ–‡çŒ®æ£€ç´¢ç»“æœ\ndatabases &lt;- list(\n    PubMed = paste0(\"PMID_\", sample(1:500, 120)),\n    Web_of_Science = paste0(\"PMID_\", sample(1:500, 100)),\n    Scopus = paste0(\"PMID_\", sample(1:500, 90))\n)\n\n# ç»‘åˆ¶éŸ¦æ©å›¾\nggVennDiagram(databases, label = \"count\") +\n    scale_fill_gradient(low = \"#fef3c7\", high = \"#d97706\") +\n    labs(\n        title = \"æ–‡çŒ®æ£€ç´¢ç»“æœå»é‡\",\n        caption = paste(\"æ€»è®¡:\", length(unique(unlist(databases))), \"ç¯‡ç‹¬ç«‹æ–‡çŒ®\")\n    ) +\n    theme_void() +\n    theme(\n        plot.title = element_text(hjust = 0.5, face = \"bold\", size = 16),\n        plot.caption = element_text(hjust = 0.5, size = 12)\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "éŸ¦æ©å›¾"
    ]
  },
  {
    "objectID": "2024-venn.html#æœ€ä½³å®è·µ",
    "href": "2024-venn.html#æœ€ä½³å®è·µ",
    "title": "éŸ¦æ©å›¾ (Venn Diagram) ç»˜åˆ¶æŒ‡å—",
    "section": "8. æœ€ä½³å®è·µ",
    "text": "8. æœ€ä½³å®è·µ\n\n[!TIP] é€‰æ‹©æ­£ç¡®çš„å¯è§†åŒ–æ–¹æ³•ï¼š - 2-4 ä¸ªé›†åˆ â†’ æ ‡å‡†éŸ¦æ©å›¾ - é¢ç§¯éœ€æˆæ¯”ä¾‹ â†’ Euler å›¾ - 5+ ä¸ªé›†åˆ â†’ UpSet å›¾\n\n\nå¸¸è§é—®é¢˜\n\n\n\né—®é¢˜\nè§£å†³æ–¹æ¡ˆ\n\n\n\n\nå›¾å½¢é‡å æ··ä¹±\nå‡å°‘é›†åˆæ•°é‡æˆ–ä½¿ç”¨ UpSet å›¾\n\n\næ ‡ç­¾æ˜¾ç¤ºä¸å…¨\nè°ƒæ•´ label_size æˆ–ä½¿ç”¨ç™¾åˆ†æ¯”\n\n\né¢œè‰²éš¾ä»¥åŒºåˆ†\nä½¿ç”¨å¯¹æ¯”åº¦é«˜çš„é…è‰²æ–¹æ¡ˆ\n\n\néœ€è¦å¯¼å‡ºå…ƒç´ \nä½¿ç”¨ process_data() æå–",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "éŸ¦æ©å›¾"
    ]
  },
  {
    "objectID": "2024-venn.html#å‚è€ƒæ–‡çŒ®",
    "href": "2024-venn.html#å‚è€ƒæ–‡çŒ®",
    "title": "éŸ¦æ©å›¾ (Venn Diagram) ç»˜åˆ¶æŒ‡å—",
    "section": "å‚è€ƒæ–‡çŒ®",
    "text": "å‚è€ƒæ–‡çŒ®\n\nChen, H., & Boutros, P. C. (2011). VennDiagram: a package for the generation of highly-customizable Venn and Euler diagrams in R. BMC Bioinformatics.\nGao, C. H. (2021). ggVennDiagram: A ggplot2 extension for drawing proportional Venn diagrams.\nConway, J. R., et al.Â (2017). UpSetR: An R package for the visualization of intersecting sets. Bioinformatics.",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "éŸ¦æ©å›¾"
    ]
  },
  {
    "objectID": "2022-ggally.html",
    "href": "2022-ggally.html",
    "title": "GGally - æ‰©å±• ggplot2 çš„å¯è§†åŒ–åˆ©å™¨",
    "section": "",
    "text": "GGally æ˜¯ ggplot2 çš„æ‰©å±•åŒ…ï¼Œæ—¨åœ¨é€šè¿‡æ·»åŠ å‡ ä¸ªå‡½æ•°æ¥é™ä½ç»„åˆå‡ ä½•å¯¹è±¡çš„å¤æ‚æ€§ã€‚å®ƒæœ€è‘—åçš„åŠŸèƒ½æ˜¯å¿«é€Ÿç”ŸæˆçŸ©é˜µæ•£ç‚¹å›¾ã€ç›¸å…³ç³»æ•°çƒ­å›¾å’Œå¹³è¡Œåæ ‡å›¾ï¼Œæ˜¯æ¢ç´¢æ€§æ•°æ®åˆ†æï¼ˆEDAï¼‰çš„å¾—åŠ›åŠ©æ‰‹ã€‚\n\n\næ ¸å¿ƒåŠŸèƒ½ï¼šçŸ©é˜µæ•£ç‚¹å›¾ (ggpairs)ã€åŒå˜é‡åˆ†æ (ggbivariate)ã€æ¨¡å‹è¯Šæ–­ (ggnostic)ã€ç³»æ•°å›¾ (ggcoef_model)\nå®˜æ–¹é“¾æ¥ï¼šCRAN | GitHub | æ–‡æ¡£\n\n\n\n\næ•ˆç‡æé«˜ï¼šä¸€è¡Œä»£ç å³å¯æŸ¥çœ‹æ•°æ®é›†ä¸­æ‰€æœ‰å˜é‡çš„ä¸¤ä¸¤å…³ç³»ã€‚\nå…¼å®¹æ€§å¥½ï¼šåŸºäº ggplot2 æ„å»ºï¼Œå›¾è¡¨å¯¹è±¡å¯ä»¥åƒ ggplot ä¸€æ ·æ·»åŠ å›¾å±‚å’Œä¿®æ”¹ä¸»é¢˜ã€‚\nä¿¡æ¯ä¸°å¯Œï¼šä¸ä»…å±•ç¤ºå›¾å½¢ï¼Œè¿˜è‡ªåŠ¨è®¡ç®—å¹¶å±•ç¤ºç›¸å…³ç³»æ•°ç­‰ç»Ÿè®¡é‡ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "GGally - å¯è§†åŒ–æ‰©å±•"
    ]
  },
  {
    "objectID": "2022-ggally.html#råŒ…ç®€ä»‹",
    "href": "2022-ggally.html#råŒ…ç®€ä»‹",
    "title": "GGally - æ‰©å±• ggplot2 çš„å¯è§†åŒ–åˆ©å™¨",
    "section": "",
    "text": "GGally æ˜¯ ggplot2 çš„æ‰©å±•åŒ…ï¼Œæ—¨åœ¨é€šè¿‡æ·»åŠ å‡ ä¸ªå‡½æ•°æ¥é™ä½ç»„åˆå‡ ä½•å¯¹è±¡çš„å¤æ‚æ€§ã€‚å®ƒæœ€è‘—åçš„åŠŸèƒ½æ˜¯å¿«é€Ÿç”ŸæˆçŸ©é˜µæ•£ç‚¹å›¾ã€ç›¸å…³ç³»æ•°çƒ­å›¾å’Œå¹³è¡Œåæ ‡å›¾ï¼Œæ˜¯æ¢ç´¢æ€§æ•°æ®åˆ†æï¼ˆEDAï¼‰çš„å¾—åŠ›åŠ©æ‰‹ã€‚\n\n\næ ¸å¿ƒåŠŸèƒ½ï¼šçŸ©é˜µæ•£ç‚¹å›¾ (ggpairs)ã€åŒå˜é‡åˆ†æ (ggbivariate)ã€æ¨¡å‹è¯Šæ–­ (ggnostic)ã€ç³»æ•°å›¾ (ggcoef_model)\nå®˜æ–¹é“¾æ¥ï¼šCRAN | GitHub | æ–‡æ¡£\n\n\n\n\næ•ˆç‡æé«˜ï¼šä¸€è¡Œä»£ç å³å¯æŸ¥çœ‹æ•°æ®é›†ä¸­æ‰€æœ‰å˜é‡çš„ä¸¤ä¸¤å…³ç³»ã€‚\nå…¼å®¹æ€§å¥½ï¼šåŸºäº ggplot2 æ„å»ºï¼Œå›¾è¡¨å¯¹è±¡å¯ä»¥åƒ ggplot ä¸€æ ·æ·»åŠ å›¾å±‚å’Œä¿®æ”¹ä¸»é¢˜ã€‚\nä¿¡æ¯ä¸°å¯Œï¼šä¸ä»…å±•ç¤ºå›¾å½¢ï¼Œè¿˜è‡ªåŠ¨è®¡ç®—å¹¶å±•ç¤ºç›¸å…³ç³»æ•°ç­‰ç»Ÿè®¡é‡ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "GGally - å¯è§†åŒ–æ‰©å±•"
    ]
  },
  {
    "objectID": "2022-ggally.html#å®‰è£…ä¸åŠ è½½",
    "href": "2022-ggally.html#å®‰è£…ä¸åŠ è½½",
    "title": "GGally - æ‰©å±• ggplot2 çš„å¯è§†åŒ–åˆ©å™¨",
    "section": "ğŸ›  å®‰è£…ä¸åŠ è½½",
    "text": "ğŸ›  å®‰è£…ä¸åŠ è½½\n\n# å®‰è£…\nif (!requireNamespace(\"GGally\", quietly = TRUE)) {\n  install.packages(\"GGally\", repos = \"https://cloud.r-project.org\")\n}\nif (!requireNamespace(\"broom.helpers\", quietly = TRUE)) {\n  install.packages(\"broom.helpers\", repos = \"https://cloud.r-project.org\")\n}\n\n# åŠ è½½\nlibrary(GGally)\nlibrary(ggplot2)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "GGally - å¯è§†åŒ–æ‰©å±•"
    ]
  },
  {
    "objectID": "2022-ggally.html#æ ¸å¿ƒåŠŸèƒ½è¯¦è§£",
    "href": "2022-ggally.html#æ ¸å¿ƒåŠŸèƒ½è¯¦è§£",
    "title": "GGally - æ‰©å±• ggplot2 çš„å¯è§†åŒ–åˆ©å™¨",
    "section": "ğŸ’¡ æ ¸å¿ƒåŠŸèƒ½è¯¦è§£",
    "text": "ğŸ’¡ æ ¸å¿ƒåŠŸèƒ½è¯¦è§£\n\n1. ggpairs()ï¼šçŸ©é˜µæ•£ç‚¹å›¾ï¼ˆå®Œå…¨æŒ‡å—ï¼‰\nggpairs() æ˜¯ GGally çš„æ——èˆ°å‡½æ•°ã€‚é™¤äº†é»˜è®¤å±•ç¤ºï¼Œå®ƒå…è®¸é«˜åº¦è‡ªå®šä¹‰æ¯ä¸ªåŒºåŸŸï¼ˆå¯¹è§’çº¿ã€ä¸Šä¸‰è§’ã€ä¸‹ä¸‰è§’ï¼‰çš„å±•ç¤ºå½¢å¼ã€‚\n\nåŸºç¡€ç”¨æ³•ä¸åˆ†ç»„\næœ€ç®€å•çš„ç”¨æ³•æ˜¯ç›´æ¥ä¼ å…¥æ•°æ®æ¡†ï¼Œä½†é€šå¸¸æˆ‘ä»¬éœ€è¦æŒ‡å®šåˆ—å’Œåˆ†ç»„å˜é‡ã€‚\n\n# ä½¿ç”¨ iris æ•°æ®é›†\ndata(iris)\n\nggpairs(iris, \n        columns = 1:5,        # åŒ…å«æ•°å€¼å’Œåˆ†ç±»å˜é‡\n        aes(color = Species,  # åˆ†ç»„ç€è‰²\n            alpha = 0.5)) +   # é€æ˜åº¦\n  theme_bw() +\n  labs(title = \"åŸºç¡€ç”¨æ³•ï¼šåˆ†ç»„å±•ç¤º\")\n\n\n\n\n\n\n\n\n\n\nè¿›é˜¶å®šåˆ¶ï¼šæ§åˆ¶ä¸åŒåŒºåŸŸ\nä½ å¯ä»¥é€šè¿‡ upper, lower, diag å‚æ•°åˆ†åˆ«æ§åˆ¶ä¸‰ä¸ªåŒºåŸŸçš„ç»˜å›¾ç±»å‹ (continuous, combo, discrete)ã€‚\n\n# è‡ªå®šä¹‰å‡½æ•°ï¼šåˆ›å»ºæ›´ç¾è§‚çš„æ•£ç‚¹å›¾\nmy_scatter &lt;- function(data, mapping, ...) {\n  ggplot(data = data, mapping = mapping) +\n    geom_point(..., size = 0.5) +  # ç¼©å°ç‚¹çš„å¤§å°\n    geom_smooth(method = \"lm\", se = FALSE, size = 0.5) # æ·»åŠ å›å½’çº¿\n}\n\nggpairs(iris, \n        columns = 1:4,\n        aes(color = Species),\n        # ä¸Šä¸‰è§’ï¼šå±•ç¤ºç›¸å…³ç³»æ•°ï¼Œå­—ä½“å¤§å°è®¾ä¸º 3\n        upper = list(continuous = wrap(\"cor\", size = 3)),\n        # ä¸‹ä¸‰è§’ï¼šä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°\n        lower = list(continuous = my_scatter),\n        # å¯¹è§’çº¿ï¼šä½¿ç”¨å¯†åº¦å›¾ï¼Œé€æ˜åº¦ 0.5\n        diag = list(continuous = wrap(\"densityDiag\", alpha = 0.5))\n        ) +\n  theme_light() +\n  labs(title = \"è¿›é˜¶ç”¨æ³•ï¼šè‡ªå®šä¹‰é¢æ¿å‡½æ•°\")\n\n\n\n\n\n\n\n\n\n\n\n2. ggbivariate()ï¼šåŒå˜é‡åˆ†æ\nå®˜æ–¹æ–‡æ¡£å°†å…¶æ ‡è®°ä¸ºâ€ä¸»è¦ç»˜å›¾å‡½æ•°â€ä¹‹ä¸€ã€‚å®ƒç”¨äºå±•ç¤ºä¸€ä¸ªç»“æœå˜é‡ (Outcome) ä¸å¤šä¸ªè§£é‡Šå˜é‡ (Explanatory) ä¹‹é—´çš„å…³ç³»ã€‚è¿™åœ¨å»ºæ¨¡å‰çš„ EDA é˜¶æ®µéå¸¸é«˜æ•ˆã€‚\n\n# ä»¥ tips æ•°æ®é›†ä¸ºä¾‹ (éœ€è¦ reshape2 æˆ–å…¶ä»–åŒ…æä¾›ï¼Œè¿™é‡Œç”¨ iris)\n# æ¢ç´¢ Sepal.Length (æ•°å€¼å‹) ä¸å…¶ä»–å˜é‡çš„å…³ç³»\nggbivariate(iris, \n            outcome = \"Sepal.Length\", \n            explanatory = c(\"Sepal.Width\", \"Petal.Length\", \"Species\")) +\n  labs(title = \"ggbivariate: æ¢ç´¢ Sepal.Length çš„å½±å“å› ç´ \")\n\n\n\n\n\n\n\n\n\n\n3. ggcorr()ï¼šç›¸å…³æ€§çƒ­å›¾\nä¸“é—¨ç”¨äºå¯è§†åŒ–ç›¸å…³ç³»æ•°çŸ©é˜µï¼Œæ”¯æŒæ— éœ€è®¡ç®— cor ç›´æ¥ä¼ å…¥åŸå§‹æ•°æ®ã€‚\n\nggcorr(iris[, 1:4], \n       method = c(\"everything\", \"pearson\"), # è®¡ç®—æ–¹æ³•\n       label = TRUE,           # æ˜¾ç¤ºæ•°å€¼\n       label_size = 3,         # æ•°å€¼å¤§å°\n       label_round = 2,        # ä¿ç•™å°æ•°ä½\n       label_alpha = TRUE,     # æ•°å€¼é€æ˜åº¦éšç›¸å…³æ€§å˜åŒ–\n       nbreaks = 5,            # é¢œè‰²åˆ†æ®µæ•°\n       palette = \"RdBu\",       # é…è‰²æ–¹æ¡ˆ (RColorBrewer)\n       layout.exp = 1) +       # æ‰©å……å¸ƒå±€é˜²æ­¢æ ‡ç­¾æˆªæ–­\n  labs(title = \"ç²¾ç¾ç›¸å…³æ€§çƒ­å›¾\")\n\n\n\n\n\n\n\n\n\n\n4. ggtable()ï¼šå¯è§†åŒ–äº¤å‰è¡¨\nç”¨äºå±•ç¤ºç¦»æ•£å˜é‡ä¹‹é—´çš„åˆ†ç±»æ±‡æ€»æƒ…å†µï¼Œç±»ä¼¼äº table() çš„å›¾å½¢åŒ–ç‰ˆæœ¬ã€‚\n\n# åˆ¶é€ ä¸€äº›ç¦»æ•£æ•°æ®\ndf_tips &lt;- as.data.frame(Titanic)\n# å±•å¼€æ•°æ®ï¼Œå› ä¸º ggtable é»˜è®¤æ¯è¡Œæ˜¯ä¸€ä¸ªè§‚æµ‹\ndf_tips_expanded &lt;- df_tips[rep(row.names(df_tips), df_tips$Freq), 1:4]\n\nggtable(df_tips_expanded, \"Class\", c(\"Survived\", \"Sex\", \"Age\"), cells = \"observed\") +\n  labs(title = \"ggtable: æ³°å¦å°¼å…‹å·ä¹˜å®¢åˆ†å¸ƒ\")\n\n\n\n\n\n\n\n\n\n\n5. ggduo()ï¼šåŒç»„å˜é‡å…³è”\nå½“ä½ ä¸æƒ³çœ‹æ‰€æœ‰å˜é‡çš„ä¸¤ä¸¤å…³ç³»ï¼Œè€Œæ˜¯æƒ³çœ‹ ä¸€ç»„å˜é‡ (X) ä¸ å¦ä¸€ç»„å˜é‡ (Y) çš„å…³ç³»æ—¶ï¼ˆç±»ä¼¼å…¸å‹ç›¸å…³åˆ†æçš„è§†è§’ï¼‰ï¼Œggduo() éå¸¸æœ‰ç”¨ã€‚\n\n# æ¯”å¦‚ï¼šæ¢ç´¢ è¼ç‰‡(Sepal) å°ºå¯¸ ä¸ èŠ±ç“£(Petal) å°ºå¯¸çš„å…³ç³»\nggduo(iris,\n      columnsX = c(\"Sepal.Length\", \"Sepal.Width\"),\n      columnsY = c(\"Petal.Length\", \"Petal.Width\"),\n      aes(color = Species),\n      types = list(continuous = \"smooth_lm\")) + # æ·»åŠ çº¿æ€§æ‹Ÿåˆ\n  theme_bw() +\n  labs(title = \"ggduo: è¼ç‰‡ vs èŠ±ç“£\")\n\n\n\n\n\n\n\n\n\n\n6. ggnostic()ï¼šæ¨¡å‹è¯Šæ–­çŸ©é˜µ\nè¿™æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œç”¨äºå±•ç¤ºæ¨¡å‹è¯Šæ–­ä¿¡æ¯ã€‚å®ƒç”Ÿæˆä¸€ä¸ªçŸ©é˜µï¼ŒåŒ…å«æ®‹å·®ã€æ æ†å€¼ã€Cookè·ç¦»ç­‰ç»Ÿè®¡é‡ä¸è§£é‡Šå˜é‡çš„å…³ç³»ã€‚\n\n# æ‹Ÿåˆä¸€ä¸ªç®€å•æ¨¡å‹ (ä½¿ç”¨ iris æ•°æ®ä»¥æ”¯æŒè‡ªåŠ¨ç€è‰²)\nfit_iris &lt;- lm(Sepal.Length ~ Sepal.Width + Petal.Length + Species, data = iris)\n\n# ç”Ÿæˆè¯Šæ–­çŸ©é˜µ\n# é»˜è®¤å±•ç¤ºæ‰€æœ‰æ ‡å‡†è¯Šæ–­æŒ‡æ ‡ vs è§£é‡Šå˜é‡\nggnostic(fit_iris,\n         columnsY = c(\".resid\", \".std.resid\", \".hat\", \".cooksd\"), # é€‰å®šè¯Šæ–­æŒ‡æ ‡\n         mapping = aes(color = Species)) +\n  theme_bw() +\n  labs(title = \"ggnostic: çº¿æ€§æ¨¡å‹è¯Šæ–­\")\n\n\n\n\n\n\n\n\n\n\n7. ggcoef_model()ï¼šå›å½’ç³»æ•°å¯è§†åŒ–\næ¯”åŸºç¡€çš„ summary(model) æ›´ç›´è§‚ï¼Œç‰¹åˆ«é€‚åˆåœ¨è®ºæ–‡ä¸­å±•ç¤ºæ¨¡å‹ç»“æœã€‚\n\n# å»ºç«‹ä¸¤ä¸ªå›å½’æ¨¡å‹\nmod1 &lt;- lm(Sepal.Length ~ Sepal.Width + Petal.Length, data = iris)\nmod2 &lt;- lm(Sepal.Length ~ Sepal.Width + Petal.Length + Petal.Width, data = iris)\n\n# å¯¹æ¯”æ¨¡å‹\nggcoef_compare(list(\"Model A\" = mod1, \"Model B\" = mod2),\n               variable_labels = c(\n                 Sepal.Width = \"è¼ç‰‡å®½åº¦\",\n                 Petal.Length = \"èŠ±ç“£é•¿åº¦\",\n                 Petal.Width = \"èŠ±ç“£å®½åº¦\"\n               ),\n               conf.level = 0.95) +\n  scale_color_brewer(palette = \"Dark2\") + # ä½¿ç”¨æ›´å¥½çœ‹çš„é…è‰²\n  theme_minimal() +\n  labs(title = \"å›å½’æ¨¡å‹ç³»æ•°å¯¹æ¯”\", \n       caption = \"æ³¨ï¼šè¯¯å·®æ£’è¡¨ç¤º 95% ç½®ä¿¡åŒºé—´\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "GGally - å¯è§†åŒ–æ‰©å±•"
    ]
  },
  {
    "objectID": "2022-ggally.html#å®æˆ˜æ¡ˆä¾‹é«˜ç»´æ•°æ®æ¢ç´¢",
    "href": "2022-ggally.html#å®æˆ˜æ¡ˆä¾‹é«˜ç»´æ•°æ®æ¢ç´¢",
    "title": "GGally - æ‰©å±• ggplot2 çš„å¯è§†åŒ–åˆ©å™¨",
    "section": "ğŸ“Š å®æˆ˜æ¡ˆä¾‹ï¼šé«˜ç»´æ•°æ®æ¢ç´¢",
    "text": "ğŸ“Š å®æˆ˜æ¡ˆä¾‹ï¼šé«˜ç»´æ•°æ®æ¢ç´¢\nå¹³è¡Œåæ ‡å›¾ (ggparcoord) æ˜¯å±•ç¤ºå¤šç»´æ•°æ®ï¼ˆ&gt;3ç»´ï¼‰æ¨¡å¼çš„åˆ©å™¨ï¼Œç‰¹åˆ«é€‚åˆè§‚å¯Ÿåˆ†ç±»æ•ˆæœæˆ–å¼‚å¸¸å€¼ã€‚\n\n# æ¨¡æ‹Ÿä¸€ä¸ªç¨å¤æ‚çš„æ•°æ®å¤„ç†åœºæ™¯\n# 1. é€‰å–æ•°å€¼åˆ—\n# 2. è¿™é‡Œçš„ scale=\"globalminmax\" ä¿ç•™äº†åŸå§‹æ•°æ®çš„ç›¸å¯¹å¤§å°ï¼Œæˆ–è€…ç”¨ \"std\" (é»˜è®¤) çœ‹ç›¸å¯¹è¶‹åŠ¿\nggparcoord(iris,\n           columns = 1:4,          \n           groupColumn = 5,        \n           order = \"anyClass\",     # è‡ªåŠ¨æ’åºä¼˜åŒ–å±•ç¤º\n           showPoints = TRUE,      \n           scale = \"uniminmax\",    # æ ‡å‡†åŒ–åˆ° 0-1 ä¹‹é—´ï¼Œä¾¿äºæ¯”è¾ƒå½¢çŠ¶\n           alphaLines = 0.3) +     \n  scale_color_brewer(palette = \"Set1\") +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    axis.text.x = element_text(angle = 15, hjust = 1)\n  ) +\n  labs(title = \"å¹³è¡Œåæ ‡å›¾ï¼šæ ‡å‡†åŒ–åçš„ç‰¹å¾æ¨¡å¼\",\n       y = \"Standardized Value (0-1)\",\n       x = \"Features\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "GGally - å¯è§†åŒ–æ‰©å±•"
    ]
  },
  {
    "objectID": "2022-ggally.html#å‡½æ•°é€ŸæŸ¥è¡¨",
    "href": "2022-ggally.html#å‡½æ•°é€ŸæŸ¥è¡¨",
    "title": "GGally - æ‰©å±• ggplot2 çš„å¯è§†åŒ–åˆ©å™¨",
    "section": "ğŸ“ å‡½æ•°é€ŸæŸ¥è¡¨",
    "text": "ğŸ“ å‡½æ•°é€ŸæŸ¥è¡¨\n\n\n\n\n\n\n\n\nå‡½æ•°\nåŠŸèƒ½æè¿°\næ ¸å¿ƒå‚æ•°/æŠ€å·§\n\n\n\n\nggpairs()\nçŸ©é˜µæ•£ç‚¹å›¾ (é€šç”¨)\nupper/lower/diag æ§åˆ¶é¢æ¿å†…å®¹\n\n\nggbivariate()\nåŒå˜é‡åˆ†æ (Outcome vs X)\noutcome, explanatory æŒ‡å®šå˜é‡\n\n\nggcorr()\nç›¸å…³æ€§çƒ­å›¾\nlabel = TRUE, nbreaks é¢œè‰²åˆ†æ®µ\n\n\nggtable()\nå¯è§†åŒ–äº¤å‰è¡¨\ncells = \"observed\" æ˜¾ç¤ºæ•°å€¼\n\n\nggduo()\nåŒç»„å˜é‡çŸ©é˜µ\ncolumnsX, columnsY ä¸¤ç»„å¯¹æ’\n\n\nggnostic()\næ¨¡å‹è¯Šæ–­çŸ©é˜µ\næ”¯æŒ lm, glm ç­‰æ¨¡å‹å¯¹è±¡\n\n\nggcoef_model()\næ¨¡å‹ç³»æ•°å›¾\ninclude_intercept = FALSE\n\n\nggparcoord()\nå¹³è¡Œåæ ‡å›¾\nscale = \"uniminmax\" å½’ä¸€åŒ–",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "GGally - å¯è§†åŒ–æ‰©å±•"
    ]
  },
  {
    "objectID": "2022-ggally.html#å‚è€ƒèµ„æ–™",
    "href": "2022-ggally.html#å‚è€ƒèµ„æ–™",
    "title": "GGally - æ‰©å±• ggplot2 çš„å¯è§†åŒ–åˆ©å™¨",
    "section": "ğŸ”— å‚è€ƒèµ„æ–™",
    "text": "ğŸ”— å‚è€ƒèµ„æ–™\n\nå®˜æ–¹æ–‡æ¡£ (Pkgdown)ï¼šæœ¬æ–‡ç»“æ„å‚è€ƒäº†å®˜æ–¹æ–‡æ¡£çš„ Core Functionality åˆ†ç±»ã€‚\n\nCore Functionality: åŒ…å«æ‰€æœ‰é«˜çº§ç»˜å›¾å‡½æ•°çš„åˆ—è¡¨ã€‚\nVignette: ggpairs: å¼ºçƒˆæ¨èé˜…è¯»ï¼Œè¿™æ˜¯ GGally æœ€æ ¸å¿ƒçš„åŠŸèƒ½ã€‚\n\nGitHub: https://github.com/ggobi/ggally",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "GGally - å¯è§†åŒ–æ‰©å±•"
    ]
  },
  {
    "objectID": "2020-heatmap.html",
    "href": "2020-heatmap.html",
    "title": "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "çƒ­å›¾æ˜¯å±•ç¤ºçŸ©é˜µæ•°æ®çš„å¼ºå¤§å·¥å…·ï¼Œå¹¿æ³›ç”¨äºåŸºå› è¡¨è¾¾ã€ç›¸å…³æ€§åˆ†æã€èšç±»ç»“æœå±•ç¤ºç­‰åœºæ™¯ã€‚æœ¬æ–‡ä»åŸºç¡€åˆ°é«˜çº§ï¼Œå…¨é¢ä»‹ç» R è¯­è¨€çƒ­å›¾ç»‘åˆ¶ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "2020-heatmap.html#çƒ­å›¾åŒ…æ¦‚è§ˆ",
    "href": "2020-heatmap.html#çƒ­å›¾åŒ…æ¦‚è§ˆ",
    "title": "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—",
    "section": "çƒ­å›¾åŒ…æ¦‚è§ˆ",
    "text": "çƒ­å›¾åŒ…æ¦‚è§ˆ\n\n\n\nåŒ…å\nç‰¹ç‚¹\né€‚ç”¨åœºæ™¯\n\n\n\n\npheatmap\nç®€å•æ˜“ç”¨ï¼Œè‡ªåŠ¨èšç±»\nå¿«é€Ÿå‡ºå›¾ã€åŸºç¡€éœ€æ±‚\n\n\nComplexHeatmap\nåŠŸèƒ½æœ€å¼ºå¤§ï¼Œå¯é«˜åº¦å®šåˆ¶\nå¤æ‚æ³¨é‡Šã€å¤šçƒ­å›¾ç»„åˆ\n\n\nheatmaply\näº¤äº’å¼çƒ­å›¾\nç½‘é¡µå±•ç¤ºã€æ•°æ®æ¢ç´¢\n\n\nggplot2 + geom_tile\nä¸ggplotç”Ÿæ€å…¼å®¹\nç®€å•çƒ­å›¾ã€è‡ªå®šä¹‰æ ·å¼",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "2020-heatmap.html#æ•°æ®å‡†å¤‡",
    "href": "2020-heatmap.html#æ•°æ®å‡†å¤‡",
    "title": "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—",
    "section": "æ•°æ®å‡†å¤‡",
    "text": "æ•°æ®å‡†å¤‡\n\nlibrary(ComplexHeatmap) # æœ€å¼ºå¤§çš„çƒ­å›¾åŒ…\nlibrary(circlize) # é…è‰²å·¥å…·\nlibrary(RColorBrewer) # ç»å…¸é…è‰²\nlibrary(viridis) # ç°ä»£é…è‰²\n\n# æ¨¡æ‹ŸåŸºå› è¡¨è¾¾æ•°æ®ï¼š30ä¸ªåŸºå›  Ã— 20ä¸ªæ ·æœ¬\nset.seed(42)\nmat &lt;- matrix(rnorm(600), nrow = 30, ncol = 20)\nrownames(mat) &lt;- paste0(\"Gene\", 1:30)\ncolnames(mat) &lt;- paste0(\"Sample\", 1:20)\n\n# æ·»åŠ ä¸€äº›æ¨¡å¼ï¼ˆæ¨¡æ‹Ÿå·®å¼‚è¡¨è¾¾ï¼‰\nmat[1:10, 1:10] &lt;- mat[1:10, 1:10] + 3 # ç»„1é«˜è¡¨è¾¾\nmat[11:20, 11:20] &lt;- mat[11:20, 11:20] + 3 # ç»„2é«˜è¡¨è¾¾",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "2020-heatmap.html#åŸºç¡€çƒ­å›¾",
    "href": "2020-heatmap.html#åŸºç¡€çƒ­å›¾",
    "title": "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—",
    "section": "åŸºç¡€çƒ­å›¾",
    "text": "åŸºç¡€çƒ­å›¾\n\nComplexHeatmap åŸºç¡€\n\n# æœ€ç®€å•çš„çƒ­å›¾\nHeatmap(mat, name = \"è¡¨è¾¾é‡\")\n\n\n\n\n\n\n\n\n\n\nå…³é—­èšç±»\n\nHeatmap(mat,\n  name = \"è¡¨è¾¾é‡\",\n  cluster_rows = FALSE, # å…³é—­è¡Œèšç±»\n  cluster_columns = FALSE\n) # å…³é—­åˆ—èšç±»",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "2020-heatmap.html#é…è‰²æ–¹æ¡ˆ",
    "href": "2020-heatmap.html#é…è‰²æ–¹æ¡ˆ",
    "title": "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—",
    "section": "é…è‰²æ–¹æ¡ˆ",
    "text": "é…è‰²æ–¹æ¡ˆ\né…è‰²æ˜¯çƒ­å›¾æœ€é‡è¦çš„å…ƒç´ ä¹‹ä¸€ã€‚\n\nè¿ç»­å‹é…è‰²\n\n# è“-ç™½-çº¢ï¼ˆç»å…¸å·®å¼‚è¡¨è¾¾é…è‰²ï¼‰\ncol_bwr &lt;- colorRamp2(c(-3, 0, 3), c(\"blue\", \"white\", \"red\"))\n\n# ç´«-ç™½-æ©™ï¼ˆå¯¹æ¯”æ›´å¼ºï¼‰\ncol_pwo &lt;- colorRamp2(c(-3, 0, 3), c(\"purple\", \"white\", \"orange\"))\n\n# viridisï¼ˆè‰²ç›²å‹å¥½ï¼‰\ncol_viridis &lt;- colorRamp2(seq(-3, 3, length = 100), viridis(100))\n\n# å¯¹æ¯”å±•ç¤º\np1 &lt;- Heatmap(mat,\n  name = \"è“ç™½çº¢\", col = col_bwr,\n  show_row_names = FALSE, show_column_names = FALSE\n)\np2 &lt;- Heatmap(mat,\n  name = \"viridis\", col = col_viridis,\n  show_row_names = FALSE, show_column_names = FALSE\n)\np1 + p2\n\n\n\n\n\n\n\n\n\n\né¢„è®¾é…è‰²æ–¹æ¡ˆ\n\n# RColorBrewer è°ƒè‰²æ¿\ndisplay.brewer.all(type = \"div\") # æŸ¥çœ‹åˆ†æ­§å‹è°ƒè‰²æ¿\n\n\n\n\n\n\n\n\n\n# ä½¿ç”¨ RColorBrewer\ncol_rdbu &lt;- colorRamp2(\n  seq(-3, 3, length = 11),\n  rev(brewer.pal(11, \"RdBu\"))\n)\n\nHeatmap(mat,\n  name = \"RdBu\", col = col_rdbu,\n  column_title = \"RColorBrewer: RdBu\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "2020-heatmap.html#èšç±»è®¾ç½®",
    "href": "2020-heatmap.html#èšç±»è®¾ç½®",
    "title": "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—",
    "section": "èšç±»è®¾ç½®",
    "text": "èšç±»è®¾ç½®\n\nèšç±»æ–¹æ³•\n\n# ä¸åŒèšç±»æ–¹æ³•å¯¹æ¯”\nHeatmap(mat,\n  name = \"ward.D2\",\n  clustering_method_rows = \"ward.D2\", # Wardæ³•\n  clustering_method_columns = \"complete\", # å®Œå…¨è¿æ¥æ³•\n  column_title = \"Ward.D2 è¡Œèšç±» + Complete åˆ—èšç±»\"\n)\n\n\n\n\n\n\n\n\nå¸¸ç”¨èšç±»æ–¹æ³•ï¼š\n\nward.D2ï¼šæ–¹å·®æœ€å°åŒ–ï¼Œäº§ç”Ÿç´§å‡‘èšç±»\ncompleteï¼šæœ€è¿œé‚»æ³•ï¼Œäº§ç”Ÿç´§å‡‘èšç±»\naverageï¼šå¹³å‡è¿æ¥æ³•ï¼ŒæŠ˜ä¸­é€‰æ‹©\nsingleï¼šæœ€è¿‘é‚»æ³•ï¼Œæ˜“äº§ç”Ÿé“¾å¼èšç±»\n\n\n\nè·ç¦»åº¦é‡\n\n# ä½¿ç”¨ç›¸å…³è·ç¦»ï¼ˆåŸºå› è¡¨è¾¾å¸¸ç”¨ï¼‰\nHeatmap(mat,\n  name = \"ç›¸å…³è·ç¦»\",\n  clustering_distance_rows = \"pearson\", # çš®å°”é€Šç›¸å…³\n  clustering_distance_columns = \"spearman\", # æ–¯çš®å°”æ›¼ç›¸å…³\n  column_title = \"åŸºäºç›¸å…³æ€§çš„èšç±»\"\n)\n\n\n\n\n\n\n\n\nè·ç¦»é€‰é¡¹ï¼šeuclidean, pearson, spearman, kendall, manhattan\n\n\næ ‘çŠ¶å›¾ç¾åŒ–\n\nHeatmap(mat,\n  name = \"è¡¨è¾¾é‡\",\n  row_dend_width = unit(2, \"cm\"), # è¡Œæ ‘çŠ¶å›¾å®½åº¦\n  column_dend_height = unit(2, \"cm\"), # åˆ—æ ‘çŠ¶å›¾é«˜åº¦\n  row_dend_gp = gpar(col = \"#4f46e5\"), # æ ‘çŠ¶å›¾é¢œè‰²\n  column_dend_gp = gpar(col = \"#ef4444\", lwd = 2)\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "2020-heatmap.html#è¡Œåˆ—æ³¨é‡Š",
    "href": "2020-heatmap.html#è¡Œåˆ—æ³¨é‡Š",
    "title": "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—",
    "section": "è¡Œåˆ—æ³¨é‡Š",
    "text": "è¡Œåˆ—æ³¨é‡Š\næ³¨é‡Šæ˜¯ ComplexHeatmap æœ€å¼ºå¤§çš„åŠŸèƒ½ã€‚\n\nç®€å•æ³¨é‡Š\n\n# æ ·æœ¬åˆ†ç»„æ³¨é‡Š\nsample_group &lt;- rep(c(\"Treatment\", \"Control\"), each = 10)\ngene_cluster &lt;- rep(c(\"Cluster1\", \"Cluster2\", \"Cluster3\"), each = 10)\n\n# é¡¶éƒ¨æ³¨é‡Š\ntop_anno &lt;- HeatmapAnnotation(\n  Group = sample_group,\n  col = list(Group = c(\"Treatment\" = \"#e63946\", \"Control\" = \"#457b9d\"))\n)\n\n# å·¦ä¾§æ³¨é‡Š\nleft_anno &lt;- rowAnnotation(\n  Cluster = gene_cluster,\n  col = list(Cluster = c(\n    \"Cluster1\" = \"#f4a261\",\n    \"Cluster2\" = \"#2a9d8f\",\n    \"Cluster3\" = \"#264653\"\n  ))\n)\n\nHeatmap(mat,\n  name = \"è¡¨è¾¾é‡\",\n  top_annotation = top_anno,\n  left_annotation = left_anno\n)\n\n\n\n\n\n\n\n\n\n\nå¤šç±»å‹æ³¨é‡Š\n\n# ä¸°å¯Œçš„æ³¨é‡Šç±»å‹\nset.seed(42)\ntop_anno &lt;- HeatmapAnnotation(\n  # åˆ†ç±»å˜é‡\n  Group = sample_group,\n  # è¿ç»­å˜é‡ï¼ˆæ¡å½¢å›¾ï¼‰\n  Age = anno_barplot(runif(20, 20, 60), height = unit(1, \"cm\")),\n  # è¿ç»­å˜é‡ï¼ˆç‚¹å›¾ï¼‰\n  Score = anno_points(rnorm(20, 50, 10)),\n  # è‡ªå®šä¹‰é¢œè‰²\n  col = list(Group = c(\"Treatment\" = \"#e63946\", \"Control\" = \"#457b9d\")),\n  # é—´è·\n  gap = unit(2, \"mm\")\n)\n\nHeatmap(mat,\n  name = \"è¡¨è¾¾é‡\",\n  top_annotation = top_anno,\n  column_title = \"å¤šç±»å‹æ³¨é‡Šç¤ºä¾‹\"\n)\n\n\n\n\n\n\n\n\n\n\nè¡Œæ³¨é‡Šï¼ˆå³ä¾§ï¼‰\n\n# åŸºå› åŠŸèƒ½æ³¨é‡Š\npathway &lt;- sample(c(\"Metabolism\", \"Signaling\", \"Cell Cycle\"), 30, replace = TRUE)\nlog2fc &lt;- rnorm(30, 0, 2)\n\nright_anno &lt;- rowAnnotation(\n  Pathway = pathway,\n  Log2FC = anno_barplot(log2fc,\n    gp = gpar(fill = ifelse(log2fc &gt; 0, \"#e63946\", \"#457b9d\")),\n    width = unit(2, \"cm\")\n  ),\n  col = list(Pathway = c(\n    \"Metabolism\" = \"#f4a261\",\n    \"Signaling\" = \"#2a9d8f\",\n    \"Cell Cycle\" = \"#e9c46a\"\n  ))\n)\n\nHeatmap(mat,\n  name = \"è¡¨è¾¾é‡\",\n  right_annotation = right_anno,\n  show_row_names = FALSE\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "2020-heatmap.html#åˆ†å‰²çƒ­å›¾",
    "href": "2020-heatmap.html#åˆ†å‰²çƒ­å›¾",
    "title": "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—",
    "section": "åˆ†å‰²çƒ­å›¾",
    "text": "åˆ†å‰²çƒ­å›¾\n\næŒ‰èšç±»åˆ†å‰²\n\nHeatmap(mat,\n  name = \"è¡¨è¾¾é‡\",\n  row_split = 3, # è¡Œåˆ†æˆ3ç»„\n  column_split = 2, # åˆ—åˆ†æˆ2ç»„\n  row_title = \"åŸºå› ç»„ %s\",\n  column_title = \"æ ·æœ¬ç»„ %s\"\n)\n\n\n\n\n\n\n\n\n\n\næŒ‰å˜é‡åˆ†å‰²\n\nHeatmap(mat,\n  name = \"è¡¨è¾¾é‡\",\n  row_split = gene_cluster,\n  column_split = sample_group,\n  row_gap = unit(3, \"mm\"),\n  column_gap = unit(3, \"mm\")\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "2020-heatmap.html#çƒ­å›¾ç»„åˆ",
    "href": "2020-heatmap.html#çƒ­å›¾ç»„åˆ",
    "title": "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—",
    "section": "çƒ­å›¾ç»„åˆ",
    "text": "çƒ­å›¾ç»„åˆ\nComplexHeatmap æ”¯æŒå¤šä¸ªçƒ­å›¾çš„çµæ´»ç»„åˆã€‚\n\n# å‡†å¤‡ç¬¬äºŒä¸ªæ•°æ®\nmat2 &lt;- matrix(rnorm(150), nrow = 30, ncol = 5)\ncolnames(mat2) &lt;- paste0(\"Feature\", 1:5)\nrownames(mat2) &lt;- rownames(mat)\n\n# æ°´å¹³ç»„åˆ\nht1 &lt;- Heatmap(mat,\n  name = \"è¡¨è¾¾é‡\", col = col_bwr,\n  show_column_names = FALSE, width = unit(8, \"cm\")\n)\nht2 &lt;- Heatmap(mat2,\n  name = \"ç‰¹å¾\", col = viridis(100),\n  width = unit(3, \"cm\")\n)\n\nht1 + ht2 # ä½¿ç”¨ + æ°´å¹³ç»„åˆ\n\n\n\n\n\n\n\n\n\nå‚ç›´ç»„åˆ\n\nmat3 &lt;- matrix(rnorm(200), nrow = 10, ncol = 20)\nrownames(mat3) &lt;- paste0(\"Protein\", 1:10)\ncolnames(mat3) &lt;- colnames(mat)\n\nht_main &lt;- Heatmap(mat,\n  name = \"mRNA\", col = col_bwr,\n  show_row_names = FALSE\n)\nht_protein &lt;- Heatmap(mat3,\n  name = \"Protein\", col = col_bwr,\n  height = unit(3, \"cm\")\n)\n\nht_main %v% ht_protein # ä½¿ç”¨ %v% å‚ç›´ç»„åˆ",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "2020-heatmap.html#æ–‡å­—ä¸æ ‡ç­¾",
    "href": "2020-heatmap.html#æ–‡å­—ä¸æ ‡ç­¾",
    "title": "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—",
    "section": "æ–‡å­—ä¸æ ‡ç­¾",
    "text": "æ–‡å­—ä¸æ ‡ç­¾\n\nè¡Œåˆ—åæ ·å¼\n\nHeatmap(mat[1:15, 1:10],\n  name = \"è¡¨è¾¾é‡\",\n  # è¡Œåè®¾ç½®\n  row_names_side = \"left\", # è¡Œåä½ç½®\n  row_names_gp = gpar(\n    fontsize = 10, # å­—ä½“å¤§å°\n    fontface = \"italic\", # æ–œä½“\n    col = \"#333333\"\n  ),\n  # åˆ—åè®¾ç½®\n  column_names_side = \"top\",\n  column_names_rot = 45, # æ—‹è½¬è§’åº¦\n  column_names_gp = gpar(fontsize = 9)\n)\n\n\n\n\n\n\n\n\n\n\nåœ¨å•å…ƒæ ¼å†…æ˜¾ç¤ºæ•°å€¼\n\nsmall_mat &lt;- mat[1:8, 1:6]\n\nHeatmap(small_mat,\n  name = \"è¡¨è¾¾é‡\",\n  # æ˜¾ç¤ºæ•°å€¼\n  cell_fun = function(j, i, x, y, width, height, fill) {\n    grid.text(sprintf(\"%.1f\", small_mat[i, j]), x, y,\n      gp = gpar(fontsize = 8, col = \"black\")\n    )\n  }\n)\n\n\n\n\n\n\n\n\n\n\nåªæ˜¾ç¤ºæ˜¾è‘—å€¼\n\n# åªåœ¨ |å€¼| &gt; 2 æ—¶æ˜¾ç¤º\nHeatmap(small_mat,\n  name = \"è¡¨è¾¾é‡\",\n  cell_fun = function(j, i, x, y, width, height, fill) {\n    val &lt;- small_mat[i, j]\n    if (abs(val) &gt; 2) {\n      grid.text(sprintf(\"%.1f\", val), x, y,\n        gp = gpar(\n          fontsize = 8,\n          col = ifelse(abs(val) &gt; 2.5, \"white\", \"black\"),\n          fontface = \"bold\"\n        )\n      )\n    }\n  }\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "2020-heatmap.html#å›¾ä¾‹å®šåˆ¶",
    "href": "2020-heatmap.html#å›¾ä¾‹å®šåˆ¶",
    "title": "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—",
    "section": "å›¾ä¾‹å®šåˆ¶",
    "text": "å›¾ä¾‹å®šåˆ¶\n\nHeatmap(mat,\n  name = \"è¡¨è¾¾é‡\", col = col_bwr,\n  # å›¾ä¾‹è®¾ç½®\n  heatmap_legend_param = list(\n    title = \"Log2 è¡¨è¾¾é‡\",\n    title_position = \"topleft\",\n    legend_height = unit(4, \"cm\"),\n    labels_gp = gpar(fontsize = 10),\n    title_gp = gpar(fontsize = 12, fontface = \"bold\"),\n    at = c(-3, 0, 3), # åˆ»åº¦ä½ç½®\n    labels = c(\"ä½\", \"ä¸­\", \"é«˜\") # åˆ»åº¦æ ‡ç­¾\n  ),\n  show_row_names = FALSE,\n  show_column_names = FALSE\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "2020-heatmap.html#pheatmap-å¿«é€Ÿå‡ºå›¾",
    "href": "2020-heatmap.html#pheatmap-å¿«é€Ÿå‡ºå›¾",
    "title": "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—",
    "section": "pheatmap å¿«é€Ÿå‡ºå›¾",
    "text": "pheatmap å¿«é€Ÿå‡ºå›¾\nå¦‚æœåªéœ€è¦å¿«é€Ÿå‡ºå›¾ï¼Œpheatmap æ›´ç®€æ´ï¼š\n\nlibrary(pheatmap)\n\n# ä¸€è¡Œä»£ç å¿«é€Ÿçƒ­å›¾\npheatmap(mat,\n  color = colorRampPalette(c(\"blue\", \"white\", \"red\"))(100),\n  scale = \"row\", # æŒ‰è¡Œæ ‡å‡†åŒ–\n  clustering_method = \"ward.D2\",\n  show_rownames = FALSE,\n  annotation_col = data.frame(\n    Group = sample_group,\n    row.names = colnames(mat)\n  ),\n  main = \"pheatmap å¿«é€Ÿçƒ­å›¾\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "2020-heatmap.html#ggplot2-çƒ­å›¾",
    "href": "2020-heatmap.html#ggplot2-çƒ­å›¾",
    "title": "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—",
    "section": "ggplot2 çƒ­å›¾",
    "text": "ggplot2 çƒ­å›¾\nå¯¹äºç®€å•çƒ­å›¾ï¼Œggplot2 ä¹Ÿæ˜¯å¥½é€‰æ‹©ï¼š\n\nlibrary(ggplot2)\nlibrary(tidyr)\nlibrary(dplyr)\n\n# è½¬æ¢ä¸ºé•¿æ ¼å¼\nmat_long &lt;- mat[1:15, 1:10] |&gt;\n  as.data.frame() |&gt;\n  mutate(Gene = rownames(mat)[1:15]) |&gt;\n  pivot_longer(-Gene, names_to = \"Sample\", values_to = \"Expression\")\n\nggplot(mat_long, aes(x = Sample, y = Gene, fill = Expression)) +\n  geom_tile(color = \"white\", linewidth = 0.5) +\n  scale_fill_gradient2(\n    low = \"#457b9d\", mid = \"white\", high = \"#e63946\",\n    midpoint = 0, name = \"è¡¨è¾¾é‡\"\n  ) +\n  theme_minimal() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n  labs(title = \"ggplot2 çƒ­å›¾\", x = NULL, y = NULL)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "2020-heatmap.html#ç›¸å…³æ€§çƒ­å›¾",
    "href": "2020-heatmap.html#ç›¸å…³æ€§çƒ­å›¾",
    "title": "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—",
    "section": "ç›¸å…³æ€§çƒ­å›¾",
    "text": "ç›¸å…³æ€§çƒ­å›¾\nå¸¸è§åº”ç”¨ï¼šå±•ç¤ºå˜é‡é—´ç›¸å…³æ€§ã€‚\n\n# è®¡ç®—ç›¸å…³çŸ©é˜µ\ncor_mat &lt;- cor(mat)\n\n# åªæ˜¾ç¤ºä¸‹ä¸‰è§’\ncor_mat[upper.tri(cor_mat)] &lt;- NA\n\nHeatmap(cor_mat,\n  name = \"ç›¸å…³ç³»æ•°\",\n  col = colorRamp2(c(-1, 0, 1), c(\"#2166ac\", \"white\", \"#b2182b\")),\n  na_col = \"white\", # NAæ˜¾ç¤ºä¸ºç™½è‰²\n  cluster_rows = FALSE,\n  cluster_columns = FALSE,\n  cell_fun = function(j, i, x, y, width, height, fill) {\n    val &lt;- cor_mat[i, j]\n    if (!is.na(val) && abs(val) &gt; 0.5) {\n      grid.text(sprintf(\"%.2f\", val), x, y,\n        gp = gpar(fontsize = 6)\n      )\n    }\n  },\n  column_title = \"ç›¸å…³æ€§çƒ­å›¾ï¼ˆä¸‹ä¸‰è§’ï¼‰\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "2020-heatmap.html#å®æˆ˜åŸºå› è¡¨è¾¾çƒ­å›¾",
    "href": "2020-heatmap.html#å®æˆ˜åŸºå› è¡¨è¾¾çƒ­å›¾",
    "title": "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—",
    "section": "å®æˆ˜ï¼šåŸºå› è¡¨è¾¾çƒ­å›¾",
    "text": "å®æˆ˜ï¼šåŸºå› è¡¨è¾¾çƒ­å›¾\nå®Œæ•´çš„åŸºå› è¡¨è¾¾çƒ­å›¾ç¤ºä¾‹ï¼š\n\n# æ¨¡æ‹Ÿå®Œæ•´æ•°æ®\nset.seed(123)\nexpr_mat &lt;- matrix(rnorm(500), nrow = 50, ncol = 10)\nrownames(expr_mat) &lt;- paste0(\"Gene\", 1:50)\ncolnames(expr_mat) &lt;- paste0(\"S\", 1:10)\nexpr_mat[1:20, 1:5] &lt;- expr_mat[1:20, 1:5] + 2 # æ·»åŠ å·®å¼‚\n\n# æ ·æœ¬æ³¨é‡Š\nsample_info &lt;- data.frame(\n  Condition = rep(c(\"Case\", \"Control\"), each = 5),\n  Batch = rep(c(\"B1\", \"B2\"), 5)\n)\n\n# åŸºå› æ³¨é‡Š\ngene_info &lt;- data.frame(\n  Type = sample(c(\"Up\", \"Down\", \"NS\"), 50,\n    replace = TRUE,\n    prob = c(0.3, 0.3, 0.4)\n  ),\n  Pathway = sample(c(\"KEGG1\", \"KEGG2\", \"KEGG3\"), 50, replace = TRUE)\n)\n\n# æ„å»ºå®Œæ•´çƒ­å›¾\nht &lt;- Heatmap(\n  expr_mat,\n  name = \"Z-score\",\n  col = colorRamp2(c(-2, 0, 2), c(\"#2166ac\", \"white\", \"#b2182b\")),\n\n  # èšç±»\n  clustering_distance_rows = \"pearson\",\n  clustering_method_rows = \"ward.D2\",\n  row_split = 3,\n  column_split = sample_info$Condition,\n\n  # æ³¨é‡Š\n  top_annotation = HeatmapAnnotation(\n    Condition = sample_info$Condition,\n    Batch = sample_info$Batch,\n    col = list(\n      Condition = c(\"Case\" = \"#e63946\", \"Control\" = \"#457b9d\"),\n      Batch = c(\"B1\" = \"#f4a261\", \"B2\" = \"#2a9d8f\")\n    ),\n    annotation_name_side = \"left\"\n  ),\n  left_annotation = rowAnnotation(\n    Type = gene_info$Type,\n    col = list(Type = c(\"Up\" = \"#e63946\", \"Down\" = \"#457b9d\", \"NS\" = \"grey\"))\n  ),\n  right_annotation = rowAnnotation(\n    Pathway = gene_info$Pathway,\n    col = list(Pathway = c(\n      \"KEGG1\" = \"#264653\", \"KEGG2\" = \"#e9c46a\",\n      \"KEGG3\" = \"#f4a261\"\n    ))\n  ),\n\n  # å¤–è§‚\n  show_row_names = FALSE,\n  column_names_rot = 45,\n  row_title_gp = gpar(fontsize = 10),\n  column_title_gp = gpar(fontsize = 10),\n\n  # å›¾ä¾‹\n  heatmap_legend_param = list(\n    title = \"Z-score\",\n    legend_height = unit(4, \"cm\")\n  )\n)\n\ndraw(ht, heatmap_legend_side = \"right\", annotation_legend_side = \"right\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "2020-heatmap.html#ä¿å­˜çƒ­å›¾",
    "href": "2020-heatmap.html#ä¿å­˜çƒ­å›¾",
    "title": "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—",
    "section": "ä¿å­˜çƒ­å›¾",
    "text": "ä¿å­˜çƒ­å›¾\n\n# ä¿å­˜ä¸ºPDFï¼ˆæ¨èï¼ŒçŸ¢é‡æ ¼å¼ï¼‰\npdf(\"heatmap.pdf\", width = 10, height = 8)\ndraw(ht)\ndev.off()\n\n# ä¿å­˜ä¸ºPNG\npng(\"heatmap.png\", width = 10, height = 8, units = \"in\", res = 300)\ndraw(ht)\ndev.off()\n\n# ä½¿ç”¨ ComplexHeatmap å†…ç½®å‡½æ•°\nht &lt;- draw(ht)\nsave_pdf(ht, \"heatmap.pdf\", width = 10, height = 8)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "2020-heatmap.html#æ€»ç»“",
    "href": "2020-heatmap.html#æ€»ç»“",
    "title": "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nä»»åŠ¡\næ¨èæ–¹æ¡ˆ\n\n\n\n\nå¿«é€Ÿå‡ºå›¾\npheatmap\n\n\nå¤æ‚æ³¨é‡Š\nComplexHeatmap\n\n\näº¤äº’å¼\nheatmaply\n\n\nggplotç”Ÿæ€\ngeom_tile()\n\n\n\n\n\n\n\n\n\nTip\n\n\n\næœ€ä½³å®è·µï¼š\n\næ ‡å‡†åŒ–æ•°æ®ï¼ˆscale by row/columnï¼‰åå†ç»‘å›¾\né…è‰²é€‰æ‹©å¯¹æ¯”åº¦é«˜çš„å‘æ•£å‹è°ƒè‰²æ¿\nèšç±»å‰è€ƒè™‘æ•°æ®ç‰¹ç‚¹é€‰æ‹©åˆé€‚çš„è·ç¦»å’Œæ–¹æ³•\næ³¨é‡Šè¦ç®€æ´æ˜äº†ï¼Œä¸è¦è¿‡åº¦å †ç Œ\nå¯¼å‡ºæ—¶ä½¿ç”¨çŸ¢é‡æ ¼å¼ï¼ˆPDFï¼‰ä¿è¯æ¸…æ™°åº¦",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "çƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "2018-tidyplots.html",
    "href": "2018-tidyplots.html",
    "title": "tidyplotsï¼šç®€æ´ä¼˜é›…çš„æ•°æ®å¯è§†åŒ–",
    "section": "",
    "text": "tidyplots æ˜¯ä¸€ä¸ªåŸºäº ggplot2 çš„é«˜çº§ç»‘å›¾åŒ…ï¼Œç”¨æç®€çš„è¯­æ³•åˆ›å»ºå‡ºç‰ˆçº§çš„ç§‘ç ”å›¾è¡¨ã€‚å®ƒçš„è®¾è®¡ç†å¿µæ˜¯â€ç”¨æœ€å°‘çš„ä»£ç ï¼Œåšæœ€ä¸“ä¸šçš„å›¾â€ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "tidyplots - æç®€å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2018-tidyplots.html#råŒ…ä»‹ç»",
    "href": "2018-tidyplots.html#råŒ…ä»‹ç»",
    "title": "tidyplotsï¼šç®€æ´ä¼˜é›…çš„æ•°æ®å¯è§†åŒ–",
    "section": "RåŒ…ä»‹ç»",
    "text": "RåŒ…ä»‹ç»\n\nä¸ºä»€ä¹ˆé€‰æ‹© tidyplotsï¼Ÿ\ntidyplots è§£å†³äº† ggplot2 çš„å‡ ä¸ªç—›ç‚¹ï¼š\n\nä»£ç å†—é•¿ï¼šggplot2 éœ€è¦å¤šå±‚å åŠ ï¼Œtidyplots ä¸€è¡Œæå®š\nä¸»é¢˜ç¹çï¼šè‡ªåŠ¨åº”ç”¨ä¸“ä¸šçš„å­¦æœ¯ä¸»é¢˜\né…è‰²å›°éš¾ï¼šå†…ç½®ä¼˜ç§€çš„é…è‰²æ–¹æ¡ˆ\nç»Ÿè®¡æ ‡æ³¨ï¼šè‡ªåŠ¨æ·»åŠ  p å€¼ã€è¯¯å·®çº¿ç­‰\nå¤šå›¾æ‹¼æ¥ï¼šåŸç”Ÿæ”¯æŒåˆ†é¢å’Œç»„åˆ\n\n\n\nå®‰è£…ä¸åŠ è½½\n\n# CRAN å®‰è£…\ninstall.packages(\"tidyplots\")\n\n\nlibrary(tidyplots)\nlibrary(dplyr)\n\n\n\næ ¸å¿ƒè®¾è®¡ç†å¿µ\ntidyplots é‡‡ç”¨ ç®¡é“å¼è¯­æ³•ï¼Œæ ¸å¿ƒå‡½æ•°æ˜¯ tidyplot()ï¼š\næ•°æ® |&gt; tidyplot(x, y, color) |&gt; add_*() |&gt; adjust_*() |&gt; theme_*()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "tidyplots - æç®€å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2018-tidyplots.html#å¿«é€Ÿå…¥é—¨",
    "href": "2018-tidyplots.html#å¿«é€Ÿå…¥é—¨",
    "title": "tidyplotsï¼šç®€æ´ä¼˜é›…çš„æ•°æ®å¯è§†åŒ–",
    "section": "å¿«é€Ÿå…¥é—¨",
    "text": "å¿«é€Ÿå…¥é—¨\n\nç¬¬ä¸€ä¸ª tidyplots å›¾\n\n# ä½¿ç”¨å†…ç½®æ•°æ®é›†\nstudy |&gt;\n  tidyplot(x = treatment, y = score, color = treatment) |&gt;\n  add_mean_bar() |&gt;\n  add_sem_errorbar()\n\n\n\n\n\n\n\n\nå¯¹æ¯”ä¼ ç»Ÿ ggplot2 ä»£ç ï¼š\n\n# ggplot2 éœ€è¦å…ˆè®¡ç®—ç»Ÿè®¡é‡\nlibrary(ggplot2)\nstudy |&gt;\n  group_by(treatment) |&gt;\n  summarise(\n    mean = mean(score),\n    se = sd(score) / sqrt(n())\n  ) |&gt;\n  ggplot(aes(x = treatment, y = mean, fill = treatment)) +\n  geom_col() +\n  geom_errorbar(aes(ymin = mean - se, ymax = mean + se), width = 0.2) +\n  theme_minimal()\n\ntidyplots åªéœ€ 3 è¡Œï¼Œggplot2 éœ€è¦ 10+ è¡Œï¼",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "tidyplots - æç®€å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2018-tidyplots.html#åŸºç¡€å›¾å½¢",
    "href": "2018-tidyplots.html#åŸºç¡€å›¾å½¢",
    "title": "tidyplotsï¼šç®€æ´ä¼˜é›…çš„æ•°æ®å¯è§†åŒ–",
    "section": "åŸºç¡€å›¾å½¢",
    "text": "åŸºç¡€å›¾å½¢\n\næŸ±çŠ¶å›¾ (Bar Plot)\n\n# åŸºç¡€æŸ±çŠ¶å›¾\nstudy |&gt;\n  tidyplot(x = treatment, y = score, color = treatment) |&gt;\n  add_mean_bar()\n\n\n\n\n\n\n\n\n\n# å¸¦è¯¯å·®çº¿å’Œæ•°æ®ç‚¹çš„æŸ±çŠ¶å›¾\nstudy |&gt;\n  tidyplot(x = treatment, y = score, color = treatment) |&gt;\n  add_mean_bar(alpha = 0.4) |&gt;\n  add_sem_errorbar() |&gt;\n  add_data_points()\n\n\n\n\n\n\n\n\n\n\nç®±çº¿å›¾ (Box Plot)\n\n# ç®±çº¿å›¾\nstudy |&gt;\n  tidyplot(x = treatment, y = score, color = treatment) |&gt;\n  add_boxplot()\n\n\n\n\n\n\n\n\n\n# ç®±çº¿å›¾ + æŠ–åŠ¨ç‚¹\nstudy |&gt;\n  tidyplot(x = treatment, y = score, color = treatment) |&gt;\n  add_boxplot(alpha = 0.3) |&gt;\n  add_data_points_jitter()\n\n\n\n\n\n\n\n\n\n\nå°æç´å›¾ (Violin Plot)\n\nstudy |&gt;\n  tidyplot(x = treatment, y = score, color = treatment) |&gt;\n  add_violin() |&gt;\n  add_boxplot(width = 0.1, alpha = 0)\n\n\n\n\n\n\n\n\n\n\næ•£ç‚¹å›¾ (Scatter Plot)\n\n# åŸºç¡€æ•£ç‚¹å›¾\nstudy |&gt;\n  tidyplot(x = age, y = score, color = treatment) |&gt;\n  add_data_points()\n\n\n\n\n\n\n\n\n\n# å¸¦æ‹Ÿåˆçº¿çš„æ•£ç‚¹å›¾\nstudy |&gt;\n  tidyplot(x = age, y = score, color = treatment) |&gt;\n  add_data_points() |&gt;\n  add_curve_fit()\n\n\n\n\n\n\n\n\n\n\næŠ˜çº¿å›¾ (Line Plot)\n\n# åˆ†ç»„æŠ˜çº¿å›¾\ntime_course |&gt;\n  tidyplot(x = day, y = score, color = treatment) |&gt;\n  add_mean_line() |&gt;\n  add_sem_ribbon()\n\n\n\n\n\n\n\n\n\n\nç›´æ–¹å›¾ (Histogram)\n\nstudy |&gt;\n  tidyplot(x = score, color = treatment) |&gt;\n  add_histogram()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "tidyplots - æç®€å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2018-tidyplots.html#ç»Ÿè®¡æ ‡æ³¨",
    "href": "2018-tidyplots.html#ç»Ÿè®¡æ ‡æ³¨",
    "title": "tidyplotsï¼šç®€æ´ä¼˜é›…çš„æ•°æ®å¯è§†åŒ–",
    "section": "ç»Ÿè®¡æ ‡æ³¨",
    "text": "ç»Ÿè®¡æ ‡æ³¨\n\næ·»åŠ  p å€¼\ntidyplots å¯ä»¥è‡ªåŠ¨è®¡ç®—å¹¶æ ‡æ³¨ç»Ÿè®¡æ£€éªŒç»“æœï¼š\n\n# æ·»åŠ é…å¯¹æ¯”è¾ƒçš„ p å€¼\nstudy |&gt;\n  tidyplot(x = treatment, y = score, color = treatment) |&gt;\n  add_mean_bar() |&gt;\n  add_sem_errorbar() |&gt;\n  add_test_pvalue()\n\n\n\n\n\n\n\n\n\n\næ·»åŠ æ˜¾è‘—æ€§æ ‡è®°\n\n# ä½¿ç”¨æ˜Ÿå·è¡¨ç¤ºæ˜¾è‘—æ€§\nstudy |&gt;\n  tidyplot(x = treatment, y = score, color = treatment) |&gt;\n  add_mean_bar() |&gt;\n  add_sem_errorbar() |&gt;\n  add_test_asterisks()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "tidyplots - æç®€å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2018-tidyplots.html#é…è‰²æ–¹æ¡ˆ",
    "href": "2018-tidyplots.html#é…è‰²æ–¹æ¡ˆ",
    "title": "tidyplotsï¼šç®€æ´ä¼˜é›…çš„æ•°æ®å¯è§†åŒ–",
    "section": "é…è‰²æ–¹æ¡ˆ",
    "text": "é…è‰²æ–¹æ¡ˆ\n\nå†…ç½®é…è‰²\ntidyplots å†…ç½®å¤šç§ä¸“ä¸šé…è‰²æ–¹æ¡ˆï¼š\n\n# é»˜è®¤é…è‰²\nstudy |&gt;\n  tidyplot(x = treatment, y = score, color = treatment) |&gt;\n  add_mean_bar()\n\n\n\n\n\n\n\n\n\n# ä½¿ç”¨ä¸åŒé…è‰²æ–¹æ¡ˆ\nstudy |&gt;\n  tidyplot(x = treatment, y = score, color = treatment) |&gt;\n  add_mean_bar() |&gt;\n  adjust_colors(new_colors = c(\"#0073C2\", \"#EFC000\", \"#868686\"))\n\n\n\n\n\n\n\n\n\n\nå¯ç”¨çš„é…è‰²æ–¹æ¡ˆ\n\n\n\né…è‰²åç§°\né€‚ç”¨åœºæ™¯\n\n\n\n\ncolors_discrete_seaside\næµ·æ´‹è‰²è°ƒ\n\n\ncolors_discrete_friendly\nè‰²ç›²å‹å¥½\n\n\ncolors_continuous_viridis\nè¿ç»­å˜é‡",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "tidyplots - æç®€å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2018-tidyplots.html#ä¸»é¢˜è®¾ç½®",
    "href": "2018-tidyplots.html#ä¸»é¢˜è®¾ç½®",
    "title": "tidyplotsï¼šç®€æ´ä¼˜é›…çš„æ•°æ®å¯è§†åŒ–",
    "section": "ä¸»é¢˜è®¾ç½®",
    "text": "ä¸»é¢˜è®¾ç½®\n\nå†…ç½®ä¸»é¢˜\n\n# é»˜è®¤ä¸»é¢˜ (å·²ç»å¾ˆä¸“ä¸š)\nstudy |&gt;\n  tidyplot(x = treatment, y = score, color = treatment) |&gt;\n  add_mean_bar() |&gt;\n  add_sem_errorbar()\n\n\n\n\n\n\n\n\n\n\nè°ƒæ•´æ ‡é¢˜\n\nstudy |&gt;\n  tidyplot(x = treatment, y = score, color = treatment) |&gt;\n  add_mean_bar() |&gt;\n  add_sem_errorbar() |&gt;\n  adjust_title(\"å®éªŒç»“æœ\") |&gt;\n  adjust_x_axis_title(\"åˆ†ç»„\") |&gt;\n  adjust_y_axis_title(\"å¾—åˆ†\")\n\n\n\n\n\n\n\n\n\n\nè°ƒæ•´å­—ä½“å¤§å°\n\nstudy |&gt;\n  tidyplot(x = treatment, y = score, color = treatment) |&gt;\n  add_mean_bar() |&gt;\n  add_sem_errorbar() |&gt;\n  adjust_font(fontsize = 14)\n\n\n\n\n\n\n\n\n\n\néšè—å›¾ä¾‹\n\nstudy |&gt;\n  tidyplot(x = treatment, y = score, color = treatment) |&gt;\n  add_mean_bar() |&gt;\n  remove_legend()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "tidyplots - æç®€å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2018-tidyplots.html#åˆ†é¢ä¸ç»„åˆ",
    "href": "2018-tidyplots.html#åˆ†é¢ä¸ç»„åˆ",
    "title": "tidyplotsï¼šç®€æ´ä¼˜é›…çš„æ•°æ®å¯è§†åŒ–",
    "section": "åˆ†é¢ä¸ç»„åˆ",
    "text": "åˆ†é¢ä¸ç»„åˆ\n\nåˆ†é¢ (Faceting)\n\n# æŒ‰å˜é‡åˆ†é¢\nstudy |&gt;\n  tidyplot(x = treatment, y = score, color = treatment) |&gt;\n  add_mean_bar() |&gt;\n  add_sem_errorbar() |&gt;\n  split_plot(by = group)\n\n\n\n\n\n\n\n\n\n\nå¤šå›¾ç»„åˆ\n\n# åˆ›å»ºå¤šä¸ªå›¾å¹¶ç»„åˆ\np1 &lt;- study |&gt;\n  tidyplot(x = treatment, y = score, color = treatment) |&gt;\n  add_mean_bar() |&gt;\n  add_sem_errorbar() |&gt;\n  adjust_title(\"A. æŸ±çŠ¶å›¾\")\n\np2 &lt;- study |&gt;\n  tidyplot(x = treatment, y = score, color = treatment) |&gt;\n  add_boxplot() |&gt;\n  adjust_title(\"B. ç®±çº¿å›¾\")\n\np3 &lt;- study |&gt;\n  tidyplot(x = treatment, y = score, color = treatment) |&gt;\n  add_violin() |&gt;\n  adjust_title(\"C. å°æç´å›¾\")\n\n# ç»„åˆå›¾å½¢ï¼ˆä½¿ç”¨ patchworkï¼‰\nlibrary(patchwork)\np1 + p2 + p3",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "tidyplots - æç®€å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2018-tidyplots.html#ä¿å­˜å›¾å½¢",
    "href": "2018-tidyplots.html#ä¿å­˜å›¾å½¢",
    "title": "tidyplotsï¼šç®€æ´ä¼˜é›…çš„æ•°æ®å¯è§†åŒ–",
    "section": "ä¿å­˜å›¾å½¢",
    "text": "ä¿å­˜å›¾å½¢\n\nåŸºæœ¬ä¿å­˜\n\n# ä¿å­˜å•ä¸ªå›¾å½¢\nstudy |&gt;\n  tidyplot(x = treatment, y = score, color = treatment) |&gt;\n  add_mean_bar() |&gt;\n  save_plot(\"figure1.png\")\n\n# æŒ‡å®šå°ºå¯¸å’Œåˆ†è¾¨ç‡\nstudy |&gt;\n  tidyplot(x = treatment, y = score, color = treatment) |&gt;\n  add_mean_bar() |&gt;\n  save_plot(\"figure1.png\", width = 10, height = 8, dpi = 300)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "tidyplots - æç®€å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2018-tidyplots.html#å®æˆ˜æ¡ˆä¾‹",
    "href": "2018-tidyplots.html#å®æˆ˜æ¡ˆä¾‹",
    "title": "tidyplotsï¼šç®€æ´ä¼˜é›…çš„æ•°æ®å¯è§†åŒ–",
    "section": "å®æˆ˜æ¡ˆä¾‹",
    "text": "å®æˆ˜æ¡ˆä¾‹\n\næ¡ˆä¾‹1ï¼šä¸´åºŠè¯•éªŒç»“æœå›¾\n\n# æ¨¡æ‹Ÿä¸´åºŠæ•°æ®\nset.seed(42)\nclinical &lt;- data.frame(\n  patient = 1:90,\n  treatment = rep(c(\"Placebo\", \"Drug A\", \"Drug B\"), each = 30),\n  response = c(\n    rnorm(30, 45, 12),\n    rnorm(30, 60, 10),\n    rnorm(30, 72, 8)\n  ),\n  gender = sample(c(\"Male\", \"Female\"), 90, replace = TRUE)\n)\n\n# åˆ›å»ºä¸“ä¸šçš„ä¸´åºŠç»“æœå›¾\nclinical |&gt;\n  tidyplot(x = treatment, y = response, color = treatment) |&gt;\n  add_mean_bar(alpha = 0.6) |&gt;\n  add_sem_errorbar() |&gt;\n  add_data_points_jitter(width = 0.2, alpha = 0.5) |&gt;\n  add_test_asterisks() |&gt;\n  adjust_title(\"è¯ç‰©ç–—æ•ˆæ¯”è¾ƒ\") |&gt;\n  adjust_x_axis_title(\"æ²»ç–—ç»„\") |&gt;\n  adjust_y_axis_title(\"åº”ç­”ç‡ (%)\") |&gt;\n  remove_legend()\n\n\n\n\n\n\n\n\n\n\næ¡ˆä¾‹2ï¼šæ—¶é—´åºåˆ—æ•°æ®\n\n# å¸¦è¯¯å·®å¸¦çš„æ—¶é—´åºåˆ—å›¾\ntime_course |&gt;\n  tidyplot(x = day, y = score, color = treatment) |&gt;\n  add_mean_line(linewidth = 1) |&gt;\n  add_sem_ribbon(alpha = 0.2) |&gt;\n  add_data_points(alpha = 0.3, size = 1) |&gt;\n  adjust_title(\"æ²»ç–—æ•ˆæœæ—¶é—´æ›²çº¿\") |&gt;\n  adjust_x_axis_title(\"æ—¶é—´ (å¤©)\") |&gt;\n  adjust_y_axis_title(\"è¯„åˆ†\")\n\n\n\n\n\n\n\n\n\n\næ¡ˆä¾‹3ï¼šå¤šç»„æ¯”è¾ƒ\n\n# åˆ›å»ºåˆ†ç»„æ¯”è¾ƒå›¾\nstudy |&gt;\n  tidyplot(x = treatment, y = score, color = treatment) |&gt;\n  add_boxplot(alpha = 0.3) |&gt;\n  add_data_points_jitter() |&gt;\n  add_test_pvalue() |&gt;\n  split_plot(by = group) |&gt;\n  adjust_title(\"ä¸åŒäºšç»„çš„æ²»ç–—æ•ˆæœ\")\n\n\n\n\n\n\n\n\n\n\næ¡ˆä¾‹4ï¼šç›¸å…³æ€§åˆ†æ\n\nstudy |&gt;\n  tidyplot(x = age, y = score, color = treatment) |&gt;\n  add_data_points(size = 2.5, alpha = 0.6) |&gt;\n  add_curve_fit() |&gt;\n  adjust_title(\"å¹´é¾„ä¸è¯„åˆ†çš„å…³ç³»\") |&gt;\n  adjust_x_axis_title(\"å¹´é¾„ (å²)\") |&gt;\n  adjust_y_axis_title(\"è¯„åˆ†\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "tidyplots - æç®€å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2018-tidyplots.html#é«˜çº§æŠ€å·§",
    "href": "2018-tidyplots.html#é«˜çº§æŠ€å·§",
    "title": "tidyplotsï¼šç®€æ´ä¼˜é›…çš„æ•°æ®å¯è§†åŒ–",
    "section": "é«˜çº§æŠ€å·§",
    "text": "é«˜çº§æŠ€å·§\n\nä¸ ggplot2 ç»“åˆ\ntidyplots è¿”å›çš„æ˜¯ ggplot2 å¯¹è±¡ï¼Œå¯ä»¥ç»§ç»­æ·»åŠ  ggplot2 å±‚ï¼š\n\nlibrary(ggplot2)\n\nstudy |&gt;\n  tidyplot(x = treatment, y = score, color = treatment) |&gt;\n  add_mean_bar() |&gt;\n  add_sem_errorbar() +\n  # æ·»åŠ  ggplot2 å±‚\n  geom_hline(yintercept = 50, linetype = \"dashed\", color = \"red\") +\n  annotate(\"text\", x = 3.5, y = 52, label = \"åŸºçº¿\", color = \"red\")\n\n\n\n\n\n\n\n\n\n\nè‡ªå®šä¹‰ç»‘å›¾å‡½æ•°\n\n# åˆ›å»ºè‡ªå®šä¹‰ç»‘å›¾å‡½æ•°\nmy_barplot &lt;- function(data, x, y, color) {\n  data |&gt;\n    tidyplot(x = {{x}}, y = {{y}}, color = {{color}}) |&gt;\n    add_mean_bar(alpha = 0.5) |&gt;\n    add_sem_errorbar() |&gt;\n    add_data_points_jitter() |&gt;\n    add_test_asterisks() |&gt;\n    remove_legend()\n}\n\n# ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°\nstudy |&gt;\n  my_barplot(treatment, score, treatment)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "tidyplots - æç®€å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2018-tidyplots.html#tidyplots-å‡½æ•°é€ŸæŸ¥è¡¨",
    "href": "2018-tidyplots.html#tidyplots-å‡½æ•°é€ŸæŸ¥è¡¨",
    "title": "tidyplotsï¼šç®€æ´ä¼˜é›…çš„æ•°æ®å¯è§†åŒ–",
    "section": "tidyplots å‡½æ•°é€ŸæŸ¥è¡¨",
    "text": "tidyplots å‡½æ•°é€ŸæŸ¥è¡¨\n\næ·»åŠ å‡ ä½•å›¾å½¢ (add_*)\n\n\n\nå‡½æ•°\nè¯´æ˜\n\n\n\n\nadd_mean_bar()\nå‡å€¼æŸ±çŠ¶å›¾\n\n\nadd_boxplot()\nç®±çº¿å›¾\n\n\nadd_violin()\nå°æç´å›¾\n\n\nadd_data_points()\næ•°æ®ç‚¹\n\n\nadd_data_points_jitter()\næŠ–åŠ¨æ•°æ®ç‚¹\n\n\nadd_sem_errorbar()\næ ‡å‡†è¯¯è¯¯å·®çº¿\n\n\nadd_sd_errorbar()\næ ‡å‡†å·®è¯¯å·®çº¿\n\n\nadd_sem_ribbon()\næ ‡å‡†è¯¯è¯¯å·®å¸¦\n\n\nadd_mean_line()\nå‡å€¼è¿çº¿\n\n\nadd_curve_fit()\næ‹Ÿåˆçº¿\n\n\nadd_histogram()\nç›´æ–¹å›¾\n\n\nadd_heatmap()\nçƒ­å›¾\n\n\n\n\n\næ·»åŠ ç»Ÿè®¡ (add_test_*)\n\n\n\nå‡½æ•°\nè¯´æ˜\n\n\n\n\nadd_test_pvalue()\np å€¼æ ‡æ³¨\n\n\nadd_test_asterisks()\næ˜Ÿå·æ˜¾è‘—æ€§æ ‡æ³¨\n\n\n\n\n\nè°ƒæ•´æ ·å¼ (adjust_*)\n\n\n\nå‡½æ•°\nè¯´æ˜\n\n\n\n\nadjust_colors()\né…è‰²æ–¹æ¡ˆ\n\n\nadjust_title()\nä¸»æ ‡é¢˜\n\n\nadjust_x_axis_title()\nX è½´æ ‡é¢˜\n\n\nadjust_y_axis_title()\nY è½´æ ‡é¢˜\n\n\nadjust_font()\nå­—ä½“å¤§å°\n\n\nadjust_legend_title()\nå›¾ä¾‹æ ‡é¢˜\n\n\nadjust_size()\nå›¾å½¢å°ºå¯¸\n\n\n\n\n\nå…¶ä»–æ“ä½œ\n\n\n\nå‡½æ•°\nè¯´æ˜\n\n\n\n\nsplit_plot()\nåˆ†é¢\n\n\nremove_legend()\nç§»é™¤å›¾ä¾‹\n\n\nview_plot()\næŸ¥çœ‹å›¾å½¢\n\n\nsave_plot()\nä¿å­˜å›¾å½¢",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "tidyplots - æç®€å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2018-tidyplots.html#å¸¸è§é—®é¢˜",
    "href": "2018-tidyplots.html#å¸¸è§é—®é¢˜",
    "title": "tidyplotsï¼šç®€æ´ä¼˜é›…çš„æ•°æ®å¯è§†åŒ–",
    "section": "å¸¸è§é—®é¢˜",
    "text": "å¸¸è§é—®é¢˜\n\n1. tidyplots å’Œ ggplot2 å“ªä¸ªæ›´å¥½ï¼Ÿ\ntidyplots æ˜¯åŸºäº ggplot2 çš„å°è£…ï¼Œä¸¤è€…å¯ä»¥äº’è¡¥ï¼š\n\nå¿«é€Ÿä½œå›¾ï¼šç”¨ tidyplots\né«˜åº¦å®šåˆ¶ï¼šç”¨ ggplot2\næ··åˆä½¿ç”¨ï¼štidyplots åˆ›å»ºåŸºç¡€å›¾ï¼Œggplot2 æ·»åŠ ç»†èŠ‚\n\n\n\n2. å¦‚ä½•æ·»åŠ ä¸­æ–‡æ ‡ç­¾ï¼Ÿ\n\nstudy |&gt;\n  tidyplot(x = treatment, y = score, color = treatment) |&gt;\n  add_mean_bar() |&gt;\n  adjust_title(\"å®éªŒç»“æœ\") |&gt;\n  adjust_x_axis_title(\"åˆ†ç»„\") |&gt;\n  adjust_y_axis_title(\"å¾—åˆ†\")\n\n\n\n\n\n\n\n\n\n\n3. å¦‚ä½•å¯¼å‡ºé«˜åˆ†è¾¨ç‡å›¾ç‰‡ï¼Ÿ\n\n# ä½¿ç”¨ save_plot æŒ‡å®š dpi\np |&gt; save_plot(\"figure.png\", dpi = 600, width = 12, height = 8)\n\n# æˆ–ç»“åˆ ggplot2::ggsave + ragg\nggsave(\"figure.png\", p, device = ragg::agg_png, dpi = 300)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "tidyplots - æç®€å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2018-tidyplots.html#æ€»ç»“",
    "href": "2018-tidyplots.html#æ€»ç»“",
    "title": "tidyplotsï¼šç®€æ´ä¼˜é›…çš„æ•°æ®å¯è§†åŒ–",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\ntidyplots çš„æ ¸å¿ƒä¼˜åŠ¿ï¼š\n\næç®€è¯­æ³•ï¼šç®¡é“å¼æ“ä½œï¼Œä¸€è¡Œä»£ç ä¸€ä¸ªåŠŸèƒ½\nä¸“ä¸šé»˜è®¤ï¼šå¼€ç®±å³ç”¨çš„å­¦æœ¯ä¸»é¢˜å’Œé…è‰²\nç»Ÿè®¡å†…ç½®ï¼šè‡ªåŠ¨è®¡ç®—å¹¶æ ‡æ³¨ p å€¼\nå®Œå…¨å…¼å®¹ï¼šå¯ä¸ ggplot2 æ— ç¼ç»“åˆ\n\næ¨èå­¦ä¹ è·¯å¾„ï¼š\n\næŒæ¡ tidyplot() |&gt; add_*() åŸºæœ¬æ¨¡å¼\nå­¦ä¹  adjust_*() è°ƒæ•´æ ·å¼\næ¢ç´¢ç»Ÿè®¡æ ‡æ³¨åŠŸèƒ½\nç»“åˆ ggplot2 å®ç°é«˜çº§å®šåˆ¶\n\nå‚è€ƒèµ„æºï¼š\n\ntidyplots å®˜æ–¹æ–‡æ¡£\nGitHub ä»“åº“\nCRAN é¡µé¢",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "tidyplots - æç®€å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2016-forestplot.html",
    "href": "2016-forestplot.html",
    "title": "Rè¯­è¨€ç»˜åˆ¶æ£®æ—å›¾è¯¦ç»†æ•™ç¨‹-forestplot",
    "section": "",
    "text": "æœ¬æœŸä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨forestplotåŒ…ç»˜åˆ¶æ£®æ—å›¾ï¼Œå¸¸ç”¨äºmetaåˆ†æçš„å¯è§†åŒ–\næ ¹æ®æˆ‘çš„æ•™ç¨‹ä¹¦å†™ä½“éªŒæ¥çœ‹forestplotåŒ…è¿˜å¾ˆä¸å¥½ç”¨ï¼ŒåŸºäºgparåŒ…æ¥è®¾ç½®æ ·å¼ï¼Œä½¿ç”¨ä½“éªŒæä¸å¥½ï¼Œä¸è¿‡å†™éƒ½å†™äº†ï¼Œå‘ä¸€ç‚¹ä¸œè¥¿\næ ¹æ®å®é™…ä½“éªŒæ¥çœ‹è¿˜æ˜¯forestploteråŒ…ç»˜åˆ¶æ£®æ—å›¾æ›´å¥½çœ‹ï¼Œä»£ç æ›´åˆç†ï¼Œæ ·å¼ä¹Ÿæ›´å¥½çœ‹ï¼Œä¹‹åä¼šä»‹ç»\nè¿™æœŸä¸å»ºè®®çœ‹ï¼Œè¿™ä¸ªåŒ…ä¹Ÿä¸å»ºè®®ç”¨ï¼Œè¿æ•™ç¨‹æ–‡æ¡£å¾ˆå¤šéƒ½è·‘ä¸åŠ¨",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "æ£®æ—å›¾"
    ]
  },
  {
    "objectID": "2016-forestplot.html#råŒ…ä»‹ç»",
    "href": "2016-forestplot.html#råŒ…ä»‹ç»",
    "title": "Rè¯­è¨€ç»˜åˆ¶æ£®æ—å›¾è¯¦ç»†æ•™ç¨‹-forestplot",
    "section": "RåŒ…ä»‹ç»",
    "text": "RåŒ…ä»‹ç»\nforestplotåŒ…æ˜¯Rè¯­è¨€ä¸­ç”¨äºç»˜åˆ¶æ£®æ—å›¾çš„åŒ…ï¼Œå…¶ä¸»è¦åŠŸèƒ½æ˜¯å°†æ•°æ®æ•´ç†æˆé€‚åˆç»˜åˆ¶æ£®æ—å›¾çš„æ ¼å¼ï¼Œå¹¶æä¾›äº†ä¸°å¯Œçš„ç»˜å›¾é€‰é¡¹ï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥è½»æ¾åœ°ç»˜åˆ¶å‡ºå„ç§ç±»å‹çš„æ£®æ—å›¾ã€‚\næ›´å¤šæ•™ç¨‹",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "æ£®æ—å›¾"
    ]
  },
  {
    "objectID": "2016-forestplot.html#råŒ…å®‰è£…",
    "href": "2016-forestplot.html#råŒ…å®‰è£…",
    "title": "Rè¯­è¨€ç»˜åˆ¶æ£®æ—å›¾è¯¦ç»†æ•™ç¨‹-forestplot",
    "section": "RåŒ…å®‰è£…",
    "text": "RåŒ…å®‰è£…\n\ninstall.packages(\"forestplot\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "æ£®æ—å›¾"
    ]
  },
  {
    "objectID": "2016-forestplot.html#råŒ…æ•™ç¨‹",
    "href": "2016-forestplot.html#råŒ…æ•™ç¨‹",
    "title": "Rè¯­è¨€ç»˜åˆ¶æ£®æ—å›¾è¯¦ç»†æ•™ç¨‹-forestplot",
    "section": "RåŒ…æ•™ç¨‹",
    "text": "RåŒ…æ•™ç¨‹\n\nè½½å…¥åŒ…\n\nlibrary(forestplot)\nlibrary(dplyr)\n\n\n\nå¯¼å…¥æ•°æ®\n\nmean: ORåŒºé—´çš„å¹³å‡å€¼\nlower/upperï¼šç½®ä¿¡åŒºé—´ä¸Šä¸‹é™\nstudyï¼šæ ‡ç­¾\n\n\ndata &lt;- tibble::tibble(\n  mean = c(0.578, 0.165, 0.246, 0.700, 0.348, 0.139, 1.017),\n  lower = c(0.372, 0.018, 0.072, 0.333, 0.083, 0.016, 0.365),\n  upper = c(0.898, 1.517, 0.833, 1.474, 1.455, 1.209, 2.831),\n  study = c(\n    \"Auckland\", \"Block\", \"Doran\", \"Gamsu\",\n    \"Morrison\", \"Papageorgiou\", \"Tauesch\"\n  ),\n  deaths_steroid = c(\"36\", \"1\", \"4\", \"14\", \"3\", \"1\", \"8\"),\n  deaths_placebo = c(\"60\", \"5\", \"11\", \"20\", \"7\", \"7\", \"10\"),\n  OR = c(\"0.58\", \"0.16\", \"0.25\", \"0.70\", \"0.35\", \"0.14\", \"1.02\")\n)\n\n\n\nåŸºç¡€ç»˜å›¾\nå¯ä»¥çœ‹å‡ºforestplotåŒ…ç»˜åˆ¶æ£®æ—å›¾ä¸»ä½“ä¸ºforestplotå‡½æ•°ï¼Œåç»­å¢åŠ fp_xxxå‡½æ•°æ¥å®Œå–„å†…å®¹\n\nfp_set_styleï¼šè®¾ç½®æ ·å¼\nfp_add_headerï¼šæ·»åŠ è¡¨å¤´\nfp_append_rowï¼šé¢å¤–æ·»åŠ è¡Œ\n\n\ndata |&gt;\n  forestplot(\n    labeltext = c(study, deaths_steroid, deaths_placebo, OR),\n    clip = c(0.1, 2.5),\n    xlog = TRUE\n  ) |&gt;\n  fp_set_style(\n    box = \"royalblue\",\n    line = \"darkblue\",\n    summary = \"royalblue\"\n  ) |&gt;\n  fp_add_header(\n    study = c(\"\", \"Study\"),\n    deaths_steroid = c(\"Deaths\", \"(steroid)\"),\n    deaths_placebo = c(\"Deaths\", \"(placebo)\"),\n    OR = c(\"\", \"OR\")\n  ) |&gt;\n  fp_append_row(\n    mean = 0.531,\n    lower = 0.386,\n    upper = 0.731,\n    study = \"Summary\",\n    OR = \"0.53\",\n    is.summary = TRUE\n  ) |&gt;\n  fp_set_zebra_style(\"#EFEFEF\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "æ£®æ—å›¾"
    ]
  },
  {
    "objectID": "2016-forestplot.html#æ ·å¼ç¾åŒ–",
    "href": "2016-forestplot.html#æ ·å¼ç¾åŒ–",
    "title": "Rè¯­è¨€ç»˜åˆ¶æ£®æ—å›¾è¯¦ç»†æ•™ç¨‹-forestplot",
    "section": "æ ·å¼ç¾åŒ–",
    "text": "æ ·å¼ç¾åŒ–\n\nä¿®æ”¹æ ·å¼\n\nä½¿ç”¨fp_set_styleæ¥ä¿®æ”¹å„å†…å®¹çš„æ ·å¼\nä½¿ç”¨fp_add_linesæ¥æ·»åŠ çº¿æ¡\næ›´å¤šå‚æ•°å¤§å®¶éœ€è¦å¤šçœ‹helpæ–‡æ¡£\n\n\nä¸»è¦å‚è€ƒçš„æ˜¯è®¾ç½®æ˜¯gparåŒ…æ ·å¼\n\ndata |&gt;\n  forestplot(\n    labeltext = c(study, deaths_steroid, deaths_placebo, OR),\n    clip = c(0.1, 2.5),\n    xlog = TRUE\n  ) |&gt;\n  fp_add_lines() |&gt;\n  fp_set_style(\n    box = \"royalblue\",\n    line = \"darkblue\",\n    summary = \"royalblue\",\n    align = \"lrrr\",\n    hrz_lines = \"#999999\"\n  ) |&gt;\n  fp_add_header(\n    study = c(\"\", \"Study\"),\n    deaths_steroid = c(\"Deaths\", \"(steroid)\") |&gt;\n      fp_align_center(),\n    deaths_placebo = c(\"Deaths\", \"(placebo)\") |&gt;\n      fp_align_center(),\n    OR = c(\"\", fp_align_center(\"OR\"))\n  ) |&gt;\n  fp_append_row(\n    mean = 0.531,\n    lower = 0.386,\n    upper = 0.731,\n    study = \"Summary\",\n    OR = \"0.53\",\n    is.summary = TRUE\n  )\n\n\n\n\n\n\n\n\n\n\nå¯¹çº¿æ¡è‡ªå®šä¹‰\nä½¿ç”¨fp_add_linesæ¥æ·»åŠ è¾…åŠ©çº¿ï¼Œltyæ˜¯çº¿å½¢ï¼Œlwdæ˜¯çº¿å®½ï¼Œcolæ˜¯é¢œè‰²\nf_nä»£è¡¨å¯¹ç¬¬å‡ åˆ—æ·»åŠ çº¿æ¡ï¼Œcolumnsè®¾ç½®çº¿æ¡æœ‰å¤šå®½\n\ndata |&gt;\n  forestplot(\n    labeltext = c(study, deaths_steroid, deaths_placebo, OR),\n    clip = c(0.1, 2.5),\n    vertices = TRUE,\n    xlog = TRUE\n  ) |&gt;\n  fp_add_lines(\n    h_3 = gpar(lty = 2),\n    h_11 = gpar(lwd = 1, columns = 1:4, col = \"#000044\")\n  ) |&gt;\n  fp_set_style(\n    box = \"royalblue\",\n    line = \"darkblue\",\n    summary = \"royalblue\",\n    align = \"lrrr\",\n    hrz_lines = \"#999999\"\n  ) |&gt;\n  fp_add_header(\n    study = c(\"\", \"Study\"),\n    deaths_steroid = c(\"Deaths\", \"(steroid)\") |&gt;\n      fp_align_center(),\n    deaths_placebo = c(\"Deaths\", \"(placebo)\") |&gt;\n      fp_align_center(),\n    OR = c(\"\", fp_align_center(\"OR\"))\n  ) |&gt;\n  fp_append_row(\n    mean = 0.531,\n    lower = 0.386,\n    upper = 0.731,\n    study = \"Summary\",\n    OR = \"0.53\",\n    is.summary = TRUE\n  )\n\n\n\n\n\n\n\n\n\n\nå‡å°å›ºå®šboxï¼ˆå°±æ˜¯å¹³å‡å€¼çš„é‚£ä¸ªç›’å­ï¼‰å¤§å°\nå¼ºåˆ¶boxsizeçš„å¤§å°ï¼Œä½¿ç”¨å‡½æ•°forestplotçš„å‚æ•°boxsize,ä½†æ˜¯è®¾ç½®ä¹‹åå¤§å°ä¹Ÿä¸ä¼šéšç€ORå¢å¤§è€Œå¢å¤§\n\ndata |&gt;\n  forestplot(\n    labeltext = c(study, deaths_steroid, deaths_placebo, OR),\n    clip = c(0.1, 2.5),\n    vertices = TRUE,\n    boxsize = 0.2,\n    xlog = TRUE\n  ) |&gt;\n  fp_add_lines(\n    h_3 = gpar(lty = 2),\n    h_11 = gpar(lwd = 1, columns = 1:4, col = \"#000044\")\n  ) |&gt;\n  fp_set_style(\n    box = \"royalblue\",\n    line = \"darkblue\",\n    summary = \"royalblue\",\n    align = \"lrrr\",\n    hrz_lines = \"#999999\"\n  ) |&gt;\n  fp_add_header(\n    study = c(\"\", \"Study\"),\n    deaths_steroid = c(\"Deaths\", \"(steroid)\") |&gt;\n      fp_align_center(),\n    deaths_placebo = c(\"Deaths\", \"(placebo)\") |&gt;\n      fp_align_center(),\n    OR = c(\"\", fp_align_center(\"OR\"))\n  ) |&gt;\n  fp_append_row(\n    mean = 0.531,\n    lower = 0.386,\n    upper = 0.731,\n    study = \"Summary\",\n    OR = \"0.53\",\n    is.summary = TRUE\n  )\n\n\n\n\n\n\n\n\n\n\nåˆ†ç»„OR\nåƒåœ¾åŒ…ï¼Œå·²ç»è·‘ä¸äº†åˆ†ç»„äº†ï¼Œåº”è¯¥æ˜¯groupbyæ›´æ–°åæ²¡é€‚é…ä¸Šã€‚æµªè´¹æˆ‘ä¸€ä¸ªå°æ—¶\n\ndata(dfHRQoL)\n\ndfHRQoL  |&gt; group_by(group)|&gt;\n  forestplot(\n    labeltext = c(labeltext),\n    boxsize = 0.1,\n    lineheight = \"lines\",\n    xlab = \"EQ-5D index\"\n  ) |&gt;\n  fp_add_lines(\"steelblue\") |&gt;\n  fp_add_header(\"Variable\") \n\n  |&gt;\n  fp_set_style(\n    box = c(\"blue\", \"darkred\") |&gt;\n      lapply(function(x) gpar(fill = x, col = \"#555555\")),\n    default = gpar(vertices = TRUE)\n  )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "æ£®æ—å›¾"
    ]
  },
  {
    "objectID": "2014-sankey.html",
    "href": "2014-sankey.html",
    "title": "Rè¯­è¨€ç»˜åˆ¶æ¡‘åŸºå›¾è¯¦ç»†æ•™ç¨‹",
    "section": "",
    "text": "æœ¬æœŸä¸»è¦ä»‹ç»å¸¸ç”¨æ¡‘åŸºå›¾ï¼ˆæµé‡å›¾ï¼‰ç»˜åˆ¶åŒ…ggsankeyfierå’Œç›¸å…³ä»£ç æ•™ç¨‹\næ¡‘åŸºå›¾ä¹Ÿå«æµé‡å›¾ï¼Œä¸»è¦ç”¨æ¥å¤„ç†å¤šä¸ªåˆ†ç±»å˜é‡çš„åˆ†å¸ƒæƒ…å†µã€‚å¯è§†åŒ–å±•ç¤ºå æ¯”æ¯”ä¾‹ç­‰ï¼Œç¾è§‚å®¹æ˜“",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "æ¡‘åŸºå›¾"
    ]
  },
  {
    "objectID": "2014-sankey.html#råŒ…ä»‹ç»",
    "href": "2014-sankey.html#råŒ…ä»‹ç»",
    "title": "Rè¯­è¨€ç»˜åˆ¶æ¡‘åŸºå›¾è¯¦ç»†æ•™ç¨‹",
    "section": "RåŒ…ä»‹ç»",
    "text": "RåŒ…ä»‹ç»\nCRANåº“\næ•™ç¨‹æ‰‹å†Œ",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "æ¡‘åŸºå›¾"
    ]
  },
  {
    "objectID": "2014-sankey.html#råŒ…å®‰è£…",
    "href": "2014-sankey.html#råŒ…å®‰è£…",
    "title": "Rè¯­è¨€ç»˜åˆ¶æ¡‘åŸºå›¾è¯¦ç»†æ•™ç¨‹",
    "section": "RåŒ…å®‰è£…",
    "text": "RåŒ…å®‰è£…\n\ninstall.packages(\"ggsankeyfier\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "æ¡‘åŸºå›¾"
    ]
  },
  {
    "objectID": "2014-sankey.html#råŒ…ä½¿ç”¨",
    "href": "2014-sankey.html#råŒ…ä½¿ç”¨",
    "title": "Rè¯­è¨€ç»˜åˆ¶æ¡‘åŸºå›¾è¯¦ç»†æ•™ç¨‹",
    "section": "RåŒ…ä½¿ç”¨",
    "text": "RåŒ…ä½¿ç”¨\næ¡‘åŸºå›¾æœ¬è´¨ä¸Šå°±æ˜¯ä¸åŒåˆ†ç±»å˜é‡çš„æµé‡å›¾ï¼Œå¯è§†åŒ–çš„ç¬¬ä¸€æ­¥å°±æ˜¯æ•°æ®æ•´æ´åŒ–ï¼Œå¸¸ç”¨æ•°æ®å®½å˜é•¿ã€‚ä¸€åˆ—æ˜¯å˜é‡ï¼Œä¸€åˆ—æ˜¯æµé‡å€¼ï¼Œåœ¨ggsankeyfierä½¿ç”¨è¿‡ç¨‹ä¸­é‡è¦çš„å°±æ˜¯ç”¨pivot_stages_longeræ¥åšæ•°æ®æ¸…æ´—\n\næ•°æ®å‡†å¤‡\n\nlibrary(ggsankeyfier)\nlibrary(tidyverse)\nlibrary(cowplot)\n\n\n\n## first get a data set with a wide format:\ndata(ecosystem_services)\ndata &lt;- ecosystem_services\n\n## pivot to long format for plotting:\ndata_neat &lt;-\n  data |&gt;\n  subset(RCSES &gt; 0.005) |&gt;\n  pivot_stages_longer(\n    c(\"activity_realm\", \"biotic_realm\", \"service_section\"),\n    \"RCSES\", \"service_section\"\n  )\n\n# pivotå®½å˜é•¿å‰\nhead(data, 5)\n## # A tibble: 5 Ã— 8\n##   activity_type          activity_realm pressure_cat   biotic_group biotic_realm\n##   &lt;chr&gt;                  &lt;chr&gt;          &lt;chr&gt;          &lt;chr&gt;        &lt;chr&gt;       \n## 1 Agriculture & Forestry Land-based     Biological diâ€¦ Zooplankton  Plankton    \n## 2 Agriculture & Forestry Land-based     Biological diâ€¦ Zooplankton  Plankton    \n## 3 Agriculture & Forestry Land-based     Chemical chanâ€¦ Zooplankton  Plankton    \n## 4 Agriculture & Forestry Land-based     Chemical chanâ€¦ Zooplankton  Plankton    \n## 5 Agriculture & Forestry Land-based     Physical chanâ€¦ Zooplankton  Plankton    \n## # â„¹ 3 more variables: service_division &lt;chr&gt;, service_section &lt;chr&gt;,\n## #   RCSES &lt;dbl&gt;\n# å®½å˜é•¿å\nhead(data_neat, 5)\n## # A tibble: 5 Ã— 6\n##   service_section  RCSES edge_id connector node               stage         \n##   &lt;fct&gt;            &lt;dbl&gt;   &lt;int&gt; &lt;chr&gt;     &lt;fct&gt;              &lt;fct&gt;         \n## 1 Provisioning    0.0123       1 from      Land-based         activity_realm\n## 2 Provisioning    0.0123       1 to        Plant              biotic_realm  \n## 3 Provisioning    0.0133       2 from      Land-based         activity_realm\n## 4 Provisioning    0.0133       2 to        Fish & Cephalopods biotic_realm  \n## 5 Cultural        0.0127       3 from      Land-based         activity_realm",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "æ¡‘åŸºå›¾"
    ]
  },
  {
    "objectID": "2014-sankey.html#æ€»ç»˜å›¾ä»£ç ",
    "href": "2014-sankey.html#æ€»ç»˜å›¾ä»£ç ",
    "title": "Rè¯­è¨€ç»˜åˆ¶æ¡‘åŸºå›¾è¯¦ç»†æ•™ç¨‹",
    "section": "æ€»ç»˜å›¾ä»£ç ",
    "text": "æ€»ç»˜å›¾ä»£ç \n\ndata_neat |&gt;\n  ggplot(\n    mapping = aes(\n      x = stage, y = RCSES,\n      group = node, edge_id = edge_id, connector = connector\n    )\n  ) +\n  geom_sankeyedge(aes(alpha = RCSES, fill = service_section),\n    position = position_sankey(\n      order = \"ascending\", v_space = \"auto\",\n      width = 0.01\n    )\n  ) +\n  geom_sankeynode(aes(fill = node, color = \"grey\"),\n    position = position_sankey(\n      order = \"ascending\", v_space = \"auto\",\n      width = 0.11\n    ),\n    show.legend = FALSE\n  ) +\n  geom_text(\n    data = data_neat,\n    aes(label = node), stat = \"sankeynode\",\n    position = position_sankey(v_space = \"auto\", order = \"ascending\", nudge_x = 0),\n    hjust = 0.5, size = 3.5, fontface = \"bold\", color = \"black\"\n  )+\n  guides(\n    alpha = FALSE,\n    colour = FALSE,\n    fill = guide_legend(position = \"bottom\", nrow = 1)\n  ) +\n  scale_fill_discrete(\n    breaks = unique(data_neat$service_section)[1:3]  # åªåœ¨å›¾ä¾‹ä¸­æ˜¾ç¤ºå‰ä¸‰ä¸ªé”®\n  )+\n  theme_minimal_hgrid() +\n  theme( # å»é™¤å‘¨å›´å¤–è¾¹è·\n    panel.spacing = unit(0, \"cm\"),\n    panel.grid.major.y = element_blank(),\n    axis.text.y = element_blank(),\n    axis.title = element_blank(),\n    legend.key.spacing.x = unit(60, \"pt\")\n  )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "æ¡‘åŸºå›¾"
    ]
  },
  {
    "objectID": "2014-sankey.html#ç»˜å›¾ä»£ç æ‹†è§£",
    "href": "2014-sankey.html#ç»˜å›¾ä»£ç æ‹†è§£",
    "title": "Rè¯­è¨€ç»˜åˆ¶æ¡‘åŸºå›¾è¯¦ç»†æ•™ç¨‹",
    "section": "ç»˜å›¾ä»£ç æ‹†è§£",
    "text": "ç»˜å›¾ä»£ç æ‹†è§£\næ¥ä¸‹æ¥æˆ‘ä»¬æ‹†è§£ä¸Šè¾¹ä¸€å¤§æ®µä»£ç ï¼Œä¸€æ­¥æ­¥çš„è·‘å‡ºæ¥å°±ä¼šæ„Ÿè§‰ä¼šå¥½å¾ˆå¤šã€‚æ•°æ®çš„é¢„å…ˆå‡†å¤‡è‡³å…³é‡è¦ï¼Œçœ‹æ•°æ®å‡†å¤‡éƒ¨åˆ†çš„ä»£ç å°±è¡Œäº†\n\nç¬¬ä¸€æ­¥æˆ‘ä»¬å…ˆæŠŠsankeyedgeåšå‡ºæ¥ï¼Œå°±æ˜¯ä¸­é—´çš„æµé‡\nçœ‹åˆ°æˆ‘ä»¬è®¾ç½®äº†ä¸€ä¸ªè‡³å…³é‡è¦çš„çš„å‚æ•°positionï¼šè¿™ä¸ªå‚æ•°å†³å®šäº†sankeyedgeçš„ä½ç½®ï¼Œæˆ‘ä»¬è®¾ç½®ä¸ºposition_sankey(order =\"ascending\",v_space=\"auto\",width = 0.01)ï¼Œå…¶ä¸­orderæ˜¯è®¾ç½®sankeyedgeçš„æ–¹å‘ï¼Œascendingæ˜¯ä»å·¦åˆ°å³ï¼Œdescendingæ˜¯ä»å³åˆ°å·¦ï¼Œv_spaceæ˜¯è®¾ç½®sankeyedgeçš„é—´è·ï¼Œautoæ˜¯è‡ªåŠ¨è®¾ç½®ï¼Œwidthæ˜¯è®¾ç½®sankeyedgeçš„å®½åº¦ã€‚\n\ndata_neat |&gt;\n  ggplot(\n    mapping = aes(\n      x = stage, y = RCSES,\n      group = node, edge_id = edge_id, connector = connector, fill = stage\n    )\n  ) +\n  geom_sankeyedge(aes(alpha = RCSES, fill = service_section),\n    position = position_sankey(\n      order = \"ascending\", v_space = \"auto\",\n      width = 0.01\n    )\n  )\n\n\n\n\n\n\n\n\n\n\nå¾ˆå¥½ï¼Œä¸‹ä¸€éƒ¨æˆ‘ä»¬æŠŠnodeç»™åŠ ä¸Šï¼Œå°±æ˜¯å„ä¸ªå°æ–¹å—\nè®¾ç½®nodeçš„å¡«å……è‰²æ˜¯nodeï¼Œç„¶åè¾¹æ¡†è®¾ç½®æˆç°è‰²\n\ndata_neat |&gt;\n  ggplot(\n    mapping = aes(\n      x = stage, y = RCSES,\n      group = node, edge_id = edge_id, connector = connector\n    )\n  ) +\n  geom_sankeyedge(aes(alpha = RCSES, fill = service_section),\n    position = position_sankey(\n      order = \"ascending\", v_space = \"auto\",\n      width = 0.01\n    )\n  ) +\n  geom_sankeynode(aes(fill = node, color = \"grey\"),\n    position = position_sankey(\n      order = \"ascending\", v_space = \"auto\",\n      width = 0.1\n    )\n  )\n\n\n\n\n\n\n\n\n\n\nç„¶åæˆ‘ä»¬æ·»åŠ æ–‡å­—åˆ°å›¾å½¢é‡Œ\næ³¨æ„æ·»åŠ  stat = \"sankeynode\"\n\ndata_neat |&gt;\n  ggplot(\n    mapping = aes(\n      x = stage, y = RCSES,\n      group = node, edge_id = edge_id, connector = connector\n    )\n  ) +\n  geom_sankeyedge(aes(alpha = RCSES, fill = service_section),\n    position = position_sankey(\n      order = \"ascending\", v_space = \"auto\",\n      width = 0.01\n    )\n  ) +\n  geom_sankeynode(aes(fill = node, color = \"grey\"),\n    position = position_sankey(\n      order = \"ascending\", v_space = \"auto\",\n      width = 0.1\n    )\n  ) +\n  geom_text(\n    data = data_neat,\n    aes(label = node), stat = \"sankeynode\",\n    position = position_sankey(v_space = \"auto\", order = \"ascending\", nudge_x = 0),\n    hjust = 0.5, size = 3.5, fontface = \"bold\", color = \"black\"\n  )\n\n\n\n\n\n\n\n\n\n\næœ€åé˜¶æ®µæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹å›¾ä¾‹ï¼Œæ”¹æ”¹ä¸»é¢˜\næˆ‘ä»¬çš„ä¸»è¦å˜é‡æ˜¯service_sectionï¼ˆgeom_sankeyedgeçš„fillæ˜ å°„ï¼‰ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œå°±è®¾ç½®è¿™ä¸ªä½œä¸ºå›¾ä¾‹ï¼Œå…¶å®ƒéƒ½åˆ æ‰ã€‚è¿™ä¸€éƒ¨åˆ†è¯´èµ·æ¥ç®€å•ï¼Œå…¶å®æŒºéº»çƒ¦çš„ã€‚\n\ndata_neat |&gt;\n  ggplot(\n    mapping = aes(\n      x = stage, y = RCSES,\n      group = node, edge_id = edge_id, connector = connector\n    )\n  ) +\n  geom_sankeyedge(aes(alpha = RCSES, fill = service_section),\n    position = position_sankey(\n      order = \"ascending\", v_space = \"auto\",\n      width = 0.01\n    )\n  ) +\n  geom_sankeynode(aes(fill = node, color = \"grey\"),\n    position = position_sankey(\n      order = \"ascending\", v_space = \"auto\",\n      width = 0.11\n    ),\n    show.legend = FALSE\n  ) +\n  geom_text(\n    data = data_neat,\n    aes(label = node), stat = \"sankeynode\",\n    position = position_sankey(v_space = \"auto\", order = \"ascending\", nudge_x = 0),\n    hjust = 0.5, size = 3.5, fontface = \"bold\", color = \"black\"\n  )+\n  guides(\n    alpha = FALSE,\n    colour = FALSE,\n    fill = guide_legend(position = \"bottom\", nrow = 1)\n  ) +\n  scale_fill_discrete(\n    breaks = unique(data_neat$service_section)[1:3]  # åªåœ¨å›¾ä¾‹ä¸­æ˜¾ç¤ºå‰ä¸‰ä¸ªé”®\n  )+\n  theme_minimal_hgrid() +\n  theme( # å»é™¤å‘¨å›´å¤–è¾¹è·\n    panel.spacing = unit(0, \"cm\"),\n    panel.grid.major.y = element_blank(),\n    axis.text.y = element_blank(),\n    axis.title = element_blank(),\n    legend.key.spacing.x = unit(60, \"pt\")\n  )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "æ¡‘åŸºå›¾"
    ]
  },
  {
    "objectID": "2012-patchwork.html",
    "href": "2012-patchwork.html",
    "title": "patchworkï¼šæ‹’ç»psï¼ŒRå†…å®ç°å¤šå›¾æ‹¼æ¥",
    "section": "",
    "text": "Patchwork æ˜¯ä¸€ä¸ªè½¯ä»¶åŒ…ï¼Œæ—¨åœ¨ä½¿ R ä¸­çš„ç»˜å›¾åˆæˆå˜å¾—æå…¶ç®€å•å’Œå¼ºå¤§ã€‚å®ƒä¸»è¦é¢å‘ ggplot2 çš„ç”¨æˆ·ï¼Œæ— è®ºç»˜å›¾çš„å¤æ‚ç¨‹åº¦å¦‚ä½•ï¼Œå®ƒéƒ½èƒ½ä¸é—ä½™åŠ›åœ°ç¡®ä¿ ggplots æ­£ç¡®å¯¹é½ã€‚\næ³¨æ„ï¼šä»…ç”¨äºggplot2çš„ç»˜å›¾ï¼ŒRçš„baseç»˜å›¾ä¸èƒ½ç”¨patchworkæ‹¼æ¥\né“¾æ¥:CRANé“¾æ¥\nå­¦ä¹ æ‰‹å†Œ:å­¦ä¹ æ‰‹å†Œ",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "patchwork - å›¾ç‰‡æ‹¼æ¥"
    ]
  },
  {
    "objectID": "2012-patchwork.html#råŒ…ä»‹ç»",
    "href": "2012-patchwork.html#råŒ…ä»‹ç»",
    "title": "patchworkï¼šæ‹’ç»psï¼ŒRå†…å®ç°å¤šå›¾æ‹¼æ¥",
    "section": "",
    "text": "Patchwork æ˜¯ä¸€ä¸ªè½¯ä»¶åŒ…ï¼Œæ—¨åœ¨ä½¿ R ä¸­çš„ç»˜å›¾åˆæˆå˜å¾—æå…¶ç®€å•å’Œå¼ºå¤§ã€‚å®ƒä¸»è¦é¢å‘ ggplot2 çš„ç”¨æˆ·ï¼Œæ— è®ºç»˜å›¾çš„å¤æ‚ç¨‹åº¦å¦‚ä½•ï¼Œå®ƒéƒ½èƒ½ä¸é—ä½™åŠ›åœ°ç¡®ä¿ ggplots æ­£ç¡®å¯¹é½ã€‚\næ³¨æ„ï¼šä»…ç”¨äºggplot2çš„ç»˜å›¾ï¼ŒRçš„baseç»˜å›¾ä¸èƒ½ç”¨patchworkæ‹¼æ¥\né“¾æ¥:CRANé“¾æ¥\nå­¦ä¹ æ‰‹å†Œ:å­¦ä¹ æ‰‹å†Œ",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "patchwork - å›¾ç‰‡æ‹¼æ¥"
    ]
  },
  {
    "objectID": "2012-patchwork.html#råŒ…å®‰è£…",
    "href": "2012-patchwork.html#råŒ…å®‰è£…",
    "title": "patchworkï¼šæ‹’ç»psï¼ŒRå†…å®ç°å¤šå›¾æ‹¼æ¥",
    "section": "RåŒ…å®‰è£…",
    "text": "RåŒ…å®‰è£…\n\ninstall.packages(\"patchwork\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "patchwork - å›¾ç‰‡æ‹¼æ¥"
    ]
  },
  {
    "objectID": "2012-patchwork.html#råŒ…ä½¿ç”¨",
    "href": "2012-patchwork.html#råŒ…ä½¿ç”¨",
    "title": "patchworkï¼šæ‹’ç»psï¼ŒRå†…å®ç°å¤šå›¾æ‹¼æ¥",
    "section": "RåŒ…ä½¿ç”¨",
    "text": "RåŒ…ä½¿ç”¨\n\nå…ˆç”Ÿæˆå¤šå›¾å‡†å¤‡ç€\n\nlibrary(ggplot2)\nlibrary(patchwork)\n\np1 &lt;- ggplot(mtcars) + \n  geom_point(aes(mpg, disp)) + \n  ggtitle('Plot 1')\n\np2 &lt;- ggplot(mtcars) + \n  geom_boxplot(aes(gear, disp, group = gear)) + \n  ggtitle('Plot 2')\n\np3 &lt;- ggplot(mtcars) + \n  geom_point(aes(hp, wt, colour = mpg)) + \n  ggtitle('Plot 3')\n\np4 &lt;- ggplot(mtcars) + \n  geom_bar(aes(gear)) + \n  facet_wrap(~cyl) + \n  ggtitle('Plot 4')\n\n\n\nåŸºç¡€ç”¨æ³•\npatchworkçš„åŸºç¡€ç”¨æ³•å°±æ˜¯ä½¿ç”¨æ•°å­¦ç¬¦å·(+å’Œ/)æ¥å®ç°å›¾å½¢çš„æ¨ªçºµæ‹¼æ¥\n\n\nå¤šå›¾æ¨ªæ‹¼æ¥\n\np1 + p2\n\n\n\n\n\n\n\n\né»˜è®¤patchworkä¼šè®©å›¾å½¢å‘ˆæ–¹å½¢æ’åˆ—ï¼Œå³nxn\n\np1 + p2 + p3 + p4\n\n\n\n\n\n\n\n\n\n\nå¤šå›¾çºµæ‹¼æ¥\n\np1/p2\n\n\n\n\n\n\n\n\n\n\nå¤åˆå›¾æ‹¼æ¥\nè¿™é‡Œå›¾å½¢æ‹¼æ¥ç±»ä¼¼äºæ•°å­¦ç¬¦å·çš„è¡¨è¾¾å¼ï¼ŒåŒæ ·éµå¾ªå…ˆä¹˜é™¤ååŠ å‡çš„è§„å¾‹,æœ‰æ‹¬å·å…ˆæ‹¬å·\n\np1 + p2 / p3 + p4\n\n\n\n\n\n\n\n(p1 + p2)/(p3 + p4 )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "patchwork - å›¾ç‰‡æ‹¼æ¥"
    ]
  },
  {
    "objectID": "2012-patchwork.html#æ·»åŠ å›¾æ³¨",
    "href": "2012-patchwork.html#æ·»åŠ å›¾æ³¨",
    "title": "patchworkï¼šæ‹’ç»psï¼ŒRå†…å®ç°å¤šå›¾æ‹¼æ¥",
    "section": "æ·»åŠ å›¾æ³¨",
    "text": "æ·»åŠ å›¾æ³¨\npatchworkæä¾›äº†plot_annotationå‡½æ•°æ¥å®ç°å›¾æ³¨çš„æ·»åŠ \n\nå°å›¾çš„å›¾æ³¨\nè‡ªå®šä¹‰tag_levelså‚æ•°ï¼Œå¯èƒ½çš„å€¼æœ‰ï¼šâ€œaâ€è¡¨ç¤ºå°å†™å­—æ¯ï¼Œâ€œAâ€è¡¨ç¤ºå¤§å†™å­—æ¯ï¼Œâ€œ1â€è¡¨ç¤ºæ•°å­—ï¼Œâ€œiâ€è¡¨ç¤ºå°å†™ç½—é©¬æ•°å­—ï¼Œâ€œIâ€è¡¨ç¤ºå¤§å†™ç½—é©¬æ•°å­—ã€‚å®ƒä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåŒ…å«å®šä¹‰ä»»æ„æ ‡è®°åºåˆ—çš„å­—ç¬¦å‘é‡çš„åˆ—è¡¨\n\np1 + p2 + p3 + p4 + plot_annotation(tag_levels = 'A')\n\n\n\n\n\n\n\n\n\n\næ‹¼å›¾æ•´ä½“å›¾æ³¨\n\n(p1 | (p2 / p3)) + \n  plot_annotation(title = 'The surprising story about mtcars')",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "patchwork - å›¾ç‰‡æ‹¼æ¥"
    ]
  },
  {
    "objectID": "2012-patchwork.html#å›¾è¡¨æ‹¼æ¥",
    "href": "2012-patchwork.html#å›¾è¡¨æ‹¼æ¥",
    "title": "patchworkï¼šæ‹’ç»psï¼ŒRå†…å®ç°å¤šå›¾æ‹¼æ¥",
    "section": "å›¾è¡¨æ‹¼æ¥",
    "text": "å›¾è¡¨æ‹¼æ¥\n\nåŸºæœ¬æ“ä½œ\npatchworkè¿˜æ”¯æŒå°†è¡¨æ ¼å’Œå›¾è¡¨æ‹¼æ¥èµ·æ¥ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¡¨æ ¼å’Œå›¾è¡¨çš„æ‹¼æ¥éœ€è¦ä½¿ç”¨gtåŒ…\n\n#install.packages(\"gt\")\nlibrary(gt)\nlibrary(ggplot2)\nlibrary(patchwork)\n\np1 &lt;- ggplot(airquality) +\n  geom_line(aes(x = Day, y = Temp, colour = month.name[Month])) +\n  labs(colour = \"Month\")\n\naq &lt;- airquality[sample(nrow(airquality), 10), ]\np1 + gt(aq) + ggtitle(\"Sample of the dataset\")\n\n\n\n\n\n\n\n\n\n\nå‚æ•°è°ƒæ•´\nwrap_table() å¯ä»¥æ§åˆ¶å…¶ä¸­çš„ä¸€äº›è¡Œä¸ºã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥å‡å°è¡¨æ ¼ä¸­çš„å­—ä½“å¤§å°ï¼Œä½¿å…¶å˜å°ï¼Œä½†ä¹Ÿå¯ä»¥ä¸ºå…¶ç•™å‡ºæ›´å¤šç©ºé—´ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ plot_layout(widths = â€¦)æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½†è¿™éœ€è¦æˆ‘ä»¬è¿›è¡Œå¤§é‡çš„çŒœæµ‹æ‰èƒ½åšåˆ°æ°åˆ°å¥½å¤„ã€‚å€¼å¾—åº†å¹¸çš„æ˜¯ï¼Œpatchwork è¶³å¤Ÿèªæ˜ï¼Œå¯ä»¥å¸®æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ wrap_table() ä¸­çš„ space å‚æ•°æŒ‡ç¤ºå®ƒè¿™æ ·åšã€‚å°†ç©ºé—´å‚æ•°è®¾ç½®ä¸º â€œfree_yâ€åï¼Œpatchwork å°±ä¼šå°†å®½åº¦å›ºå®šä¸ºè¡¨æ ¼å®½åº¦ï¼Œä½†ä¿æŒé«˜åº¦è‡ªç”±ï¼š\n\np1 + wrap_table(gt(aq), space = \"free_y\") + ggtitle(\"Sample of the dataset\")\n\n\n\n\n\n\n\np1 + wrap_table(aq, space = \"fixed\")\n\n\n\n\n\n\n\n\nå¦‚æœç©ºé—´å›ºå®šåœ¨ Y æ–¹å‘ï¼Œè€Œè¡¨æ ¼ä¸­æœ‰ä»»ä½•æ¥æºæ³¨é‡Šæˆ–è„šæ³¨ï¼Œåˆ™è¿™äº›æ³¨é‡Šæˆ–è„šæ³¨ä¼šåƒåˆ—å¤´ä¸€æ ·ï¼Œæ ¹æ®é¢æ¿è®¾ç½®æ”¾ç½®åœ¨é¢æ¿åŒºåŸŸä¹‹å¤–ã€‚\n\naq_footer &lt;- gt(aq) |&gt;\n  tab_source_note(\"This is not part of the table body\")\np1 + wrap_table(aq_footer, space = \"fixed\")\n\n\n\n\n\n\n\n\n\n\nå…¶å®ƒ\nå›¾è¡¨æ‹¼æ¥æ˜¯patchworkçš„æœ€æ–°åŠŸèƒ½ï¼Œè¯¦ç»†çš„æ•™ç¨‹å‚è§é“¾æ¥",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "patchwork - å›¾ç‰‡æ‹¼æ¥"
    ]
  },
  {
    "objectID": "1062-treeage-pro.html",
    "href": "1062-treeage-pro.html",
    "title": "TreeAge Proï¼šå«ç”Ÿç»æµå­¦å†³ç­–åˆ†æè½¯ä»¶æŒ‡å—",
    "section": "",
    "text": "TreeAge Pro æ˜¯ä¸€æ¬¾ä¸“ä¸šçš„å«ç”Ÿç»æµå­¦å†³ç­–åˆ†æè½¯ä»¶ï¼Œå¹¿æ³›åº”ç”¨äºåŒ»ç–—å«ç”ŸæŠ€æœ¯è¯„ä¼°ï¼ˆHTAï¼‰ã€å«ç”Ÿç»æµå­¦è¯„ä»·å’Œä¸´åºŠå†³ç­–åˆ†æã€‚å®ƒæä¾›ç›´è§‚çš„å›¾å½¢ç•Œé¢æ¥æ„å»ºå†³ç­–æ ‘ã€é©¬å°”å¯å¤«æ¨¡å‹ï¼Œå¹¶è¿›è¡Œæˆæœ¬æ•ˆæœåˆ†æã€‚\n\n\n\n\n\nç‰¹ç‚¹\nè¯´æ˜\n\n\n\n\nå¯è§†åŒ–å»ºæ¨¡\né€šè¿‡æ‹–æ‹½èŠ‚ç‚¹ç›´è§‚æ„å»ºå†³ç­–æ¨¡å‹\n\n\né›†æˆåˆ†æ\nå†…ç½®æˆæœ¬æ•ˆæœåˆ†æã€æ•æ„Ÿæ€§åˆ†æç­‰åŠŸèƒ½\n\n\nä¸“ä¸šè¾“å‡º\nç”Ÿæˆç¬¦åˆ ISPOR æ ‡å‡†çš„æŠ¥å‘Šå’Œå›¾è¡¨\n\n\nçµæ´»å®šåˆ¶\næ”¯æŒå˜é‡å®šä¹‰ã€å‡½æ•°è¡¨è¾¾å¼å’Œå¤æ‚é€»è¾‘\n\n\n\n\n\n\nè™½ç„¶ R è¯­è¨€çš„ heemodã€hesim ç­‰åŒ…ä¹Ÿèƒ½è¿›è¡Œå«ç”Ÿç»æµå­¦åˆ†æï¼Œä½† TreeAge Pro å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š\n\næ›´ç›´è§‚çš„æ¨¡å‹å¯è§†åŒ–ï¼šå®æ—¶å±•ç¤ºå†³ç­–æ ‘å’Œé©¬å°”å¯å¤«æ¨¡å‹ç»“æ„\nå†…ç½®éªŒè¯åŠŸèƒ½ï¼šè‡ªåŠ¨æ£€æŸ¥æ¦‚ç‡æ€»å’Œã€å¾ªç¯ä¾èµ–ç­‰é—®é¢˜\né€‚åˆå¤æ‚æ¨¡å‹ï¼šå¤„ç†å¤§å‹æ¨¡å‹æ—¶æ›´ç¨³å®š\nå›¢é˜Ÿåä½œï¼šä¾¿äºä¸éç¼–ç¨‹èƒŒæ™¯çš„åˆä½œè€…æ²Ÿé€š\n\n\nğŸ’¡ å»ºè®®å°† TreeAge Pro ä¸ R è¯­è¨€ç»“åˆä½¿ç”¨ï¼šåœ¨ TreeAge ä¸­æ„å»ºæ¨¡å‹é€»è¾‘ï¼Œç”¨ R è¿›è¡Œæ•°æ®é¢„å¤„ç†å’Œç»“æœå¯è§†åŒ–ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "TreeAge Pro å†³ç­–åˆ†æ"
    ]
  },
  {
    "objectID": "1062-treeage-pro.html#ä»€ä¹ˆæ˜¯-treeage-pro",
    "href": "1062-treeage-pro.html#ä»€ä¹ˆæ˜¯-treeage-pro",
    "title": "TreeAge Proï¼šå«ç”Ÿç»æµå­¦å†³ç­–åˆ†æè½¯ä»¶æŒ‡å—",
    "section": "",
    "text": "TreeAge Pro æ˜¯ä¸€æ¬¾ä¸“ä¸šçš„å«ç”Ÿç»æµå­¦å†³ç­–åˆ†æè½¯ä»¶ï¼Œå¹¿æ³›åº”ç”¨äºåŒ»ç–—å«ç”ŸæŠ€æœ¯è¯„ä¼°ï¼ˆHTAï¼‰ã€å«ç”Ÿç»æµå­¦è¯„ä»·å’Œä¸´åºŠå†³ç­–åˆ†æã€‚å®ƒæä¾›ç›´è§‚çš„å›¾å½¢ç•Œé¢æ¥æ„å»ºå†³ç­–æ ‘ã€é©¬å°”å¯å¤«æ¨¡å‹ï¼Œå¹¶è¿›è¡Œæˆæœ¬æ•ˆæœåˆ†æã€‚\n\n\n\n\n\nç‰¹ç‚¹\nè¯´æ˜\n\n\n\n\nå¯è§†åŒ–å»ºæ¨¡\né€šè¿‡æ‹–æ‹½èŠ‚ç‚¹ç›´è§‚æ„å»ºå†³ç­–æ¨¡å‹\n\n\né›†æˆåˆ†æ\nå†…ç½®æˆæœ¬æ•ˆæœåˆ†æã€æ•æ„Ÿæ€§åˆ†æç­‰åŠŸèƒ½\n\n\nä¸“ä¸šè¾“å‡º\nç”Ÿæˆç¬¦åˆ ISPOR æ ‡å‡†çš„æŠ¥å‘Šå’Œå›¾è¡¨\n\n\nçµæ´»å®šåˆ¶\næ”¯æŒå˜é‡å®šä¹‰ã€å‡½æ•°è¡¨è¾¾å¼å’Œå¤æ‚é€»è¾‘\n\n\n\n\n\n\nè™½ç„¶ R è¯­è¨€çš„ heemodã€hesim ç­‰åŒ…ä¹Ÿèƒ½è¿›è¡Œå«ç”Ÿç»æµå­¦åˆ†æï¼Œä½† TreeAge Pro å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š\n\næ›´ç›´è§‚çš„æ¨¡å‹å¯è§†åŒ–ï¼šå®æ—¶å±•ç¤ºå†³ç­–æ ‘å’Œé©¬å°”å¯å¤«æ¨¡å‹ç»“æ„\nå†…ç½®éªŒè¯åŠŸèƒ½ï¼šè‡ªåŠ¨æ£€æŸ¥æ¦‚ç‡æ€»å’Œã€å¾ªç¯ä¾èµ–ç­‰é—®é¢˜\né€‚åˆå¤æ‚æ¨¡å‹ï¼šå¤„ç†å¤§å‹æ¨¡å‹æ—¶æ›´ç¨³å®š\nå›¢é˜Ÿåä½œï¼šä¾¿äºä¸éç¼–ç¨‹èƒŒæ™¯çš„åˆä½œè€…æ²Ÿé€š\n\n\nğŸ’¡ å»ºè®®å°† TreeAge Pro ä¸ R è¯­è¨€ç»“åˆä½¿ç”¨ï¼šåœ¨ TreeAge ä¸­æ„å»ºæ¨¡å‹é€»è¾‘ï¼Œç”¨ R è¿›è¡Œæ•°æ®é¢„å¤„ç†å’Œç»“æœå¯è§†åŒ–ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "TreeAge Pro å†³ç­–åˆ†æ"
    ]
  },
  {
    "objectID": "1062-treeage-pro.html#è½¯ä»¶å®‰è£…ä¸ç•Œé¢æ¦‚è§ˆ",
    "href": "1062-treeage-pro.html#è½¯ä»¶å®‰è£…ä¸ç•Œé¢æ¦‚è§ˆ",
    "title": "TreeAge Proï¼šå«ç”Ÿç»æµå­¦å†³ç­–åˆ†æè½¯ä»¶æŒ‡å—",
    "section": "è½¯ä»¶å®‰è£…ä¸ç•Œé¢æ¦‚è§ˆ",
    "text": "è½¯ä»¶å®‰è£…ä¸ç•Œé¢æ¦‚è§ˆ\n\nè·å–è½¯ä»¶\nTreeAge Pro æ˜¯å•†ä¸šè½¯ä»¶ï¼Œå¯ä» TreeAge å®˜ç½‘ è·å–ã€‚å®˜ç½‘æä¾›ï¼š\n\nè¯•ç”¨ç‰ˆï¼š30 å¤©å…¨åŠŸèƒ½è¯•ç”¨\næ•™è‚²ç‰ˆï¼šå­¦æœ¯æœºæ„æŠ˜æ‰£\nå®Œæ•´ç‰ˆï¼šHealthcare æˆ– Pro Suite è®¸å¯\n\n\n\nä¸»è¦ç•Œé¢ç»„ä»¶\nTreeAge Pro çš„å·¥ä½œç•Œé¢ä¸»è¦åŒ…å«ä»¥ä¸‹éƒ¨åˆ†ï¼š\n\n\n\nåŒºåŸŸ\nåŠŸèƒ½\n\n\n\n\nä¸»èœå•\næ–‡ä»¶ã€ç¼–è¾‘ã€Treeã€åˆ†æç­‰åŠŸèƒ½å…¥å£\n\n\nå·¥å…·æ \nå¿«æ·æ“ä½œæŒ‰é’®ï¼šèŠ‚ç‚¹ç±»å‹é€‰æ‹©ã€è¿è¡Œåˆ†æç­‰\n\n\næ¨¡å‹ç”»å¸ƒ\nå¯è§†åŒ–å±•ç¤ºå’Œç¼–è¾‘å†³ç­–æ¨¡å‹\n\n\nå˜é‡é¢æ¿\nå®šä¹‰å’Œç®¡ç†å…¨å±€å˜é‡\n\n\nå±æ€§é¢æ¿\næŸ¥çœ‹å’Œç¼–è¾‘é€‰ä¸­èŠ‚ç‚¹çš„å±æ€§\n\n\n\n\n\nèŠ‚ç‚¹ç±»å‹\nå†³ç­–æ¨¡å‹ç”±ä¸åŒç±»å‹çš„èŠ‚ç‚¹æ„æˆï¼š\n\n\n\nèŠ‚ç‚¹\nç¬¦å·\nç”¨é€”\n\n\n\n\nå†³ç­–èŠ‚ç‚¹\nğŸ”²ï¼ˆæ–¹å½¢ï¼‰\nå†³ç­–è€…å¯ä»¥é€‰æ‹©çš„ç­–ç•¥\n\n\næœºä¼šèŠ‚ç‚¹\nâšªï¼ˆåœ†å½¢ï¼‰\nä¸ç¡®å®šäº‹ä»¶ï¼Œç”±æ¦‚ç‡å†³å®š\n\n\nç»ˆç«¯èŠ‚ç‚¹\nâ–²ï¼ˆä¸‰è§’å½¢ï¼‰\nè·¯å¾„ç»ˆç‚¹ï¼Œè®°å½•å›æŠ¥å€¼\n\n\nMarkovèŠ‚ç‚¹\nğŸ”µï¼ˆç´«è‰²åœ†è§’ï¼‰\né©¬å°”å¯å¤«è¿‡ç¨‹èµ·ç‚¹",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "TreeAge Pro å†³ç­–åˆ†æ"
    ]
  },
  {
    "objectID": "1062-treeage-pro.html#æ„å»ºå†³ç­–æ ‘æ¨¡å‹",
    "href": "1062-treeage-pro.html#æ„å»ºå†³ç­–æ ‘æ¨¡å‹",
    "title": "TreeAge Proï¼šå«ç”Ÿç»æµå­¦å†³ç­–åˆ†æè½¯ä»¶æŒ‡å—",
    "section": "æ„å»ºå†³ç­–æ ‘æ¨¡å‹",
    "text": "æ„å»ºå†³ç­–æ ‘æ¨¡å‹\nå†³ç­–æ ‘æ˜¯æœ€åŸºç¡€çš„å†³ç­–åˆ†ææ¨¡å‹ï¼Œé€‚ç”¨äºä¸€æ¬¡æ€§æˆ–çŸ­æœŸå†³ç­–é—®é¢˜ã€‚\n\nç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ–°æ¨¡å‹\n\nFile &gt; New æˆ–å¿«æ·é”® Ctrl+N\né€‰æ‹© Healthcare æ¨¡æ¿ç±»åˆ«\né€‰æ‹© Decision Treeï¼ˆCost-Effectivenessï¼‰\næŒ‡å®šä¿å­˜ä½ç½®å’Œæ–‡ä»¶åï¼ˆ.trex æ ¼å¼ï¼‰\n\n\n\nç¬¬äºŒæ­¥ï¼šæ·»åŠ ç­–ç•¥åˆ†æ”¯\nå†³ç­–èŠ‚ç‚¹ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰ä»£è¡¨éœ€è¦æ¯”è¾ƒçš„ç­–ç•¥é€‰é¡¹ï¼š\n\nå³é”®ç‚¹å‡»å†³ç­–èŠ‚ç‚¹ â†’ Add Branch\nä¸ºæ¯ä¸ªç­–ç•¥å‘½åï¼ˆä¾‹å¦‚ï¼šâ€œæ ‡å‡†æ²»ç–—â€ã€â€œæ–°è¯æ²»ç–—â€ï¼‰\né‡å¤ä¸Šè¿°æ­¥éª¤æ·»åŠ æ‰€æœ‰æ¯”è¾ƒç­–ç•¥\n\nç¤ºä¾‹ç»“æ„ï¼š\nå†³ç­–èŠ‚ç‚¹ [Choice]\nâ”œâ”€â”€ æ ‡å‡†æ²»ç–— [Strategy]\nâ””â”€â”€ æ–°è¯æ²»ç–— [Strategy]\n\n\nç¬¬ä¸‰æ­¥ï¼šæ„å»ºäº‹ä»¶è·¯å¾„\nåœ¨æ¯ä¸ªç­–ç•¥ä¸‹æ·»åŠ æœºä¼šèŠ‚ç‚¹å’Œç»ˆç«¯èŠ‚ç‚¹ï¼š\n\né€‰ä¸­ç­–ç•¥åˆ†æ”¯æœ«ç«¯\nå³é”® â†’ Change Type &gt; Chance æ·»åŠ æœºä¼šèŠ‚ç‚¹\næ·»åŠ å¯èƒ½çš„äº‹ä»¶ç»“æœï¼ˆå¦‚â€æ²»ç–—æˆåŠŸâ€ã€â€œæ²»ç–—å¤±è´¥â€ï¼‰\nä¸ºæ¯ä¸ªç»“æœåˆ†æ”¯è®¾ç½®æ¦‚ç‡å€¼ï¼ˆæ‰€æœ‰åˆ†æ”¯æ¦‚ç‡ä¹‹å’Œå¿…é¡»ç­‰äº1ï¼‰\n\nå®Œæ•´ç»“æ„ç¤ºä¾‹ï¼š\nå†³ç­–èŠ‚ç‚¹ [Choice]\nâ”œâ”€â”€ æ ‡å‡†æ²»ç–—\nâ”‚   â””â”€â”€ [Chance] æ²»ç–—ç»“æœ\nâ”‚       â”œâ”€â”€ æˆåŠŸ (p=0.6) â†’ [Terminal]\nâ”‚       â””â”€â”€ å¤±è´¥ (p=0.4) â†’ [Terminal]\nâ””â”€â”€ æ–°è¯æ²»ç–—\n    â””â”€â”€ [Chance] æ²»ç–—ç»“æœ\n        â”œâ”€â”€ æˆåŠŸ (p=0.8) â†’ [Terminal]\n        â””â”€â”€ å¤±è´¥ (p=0.2) â†’ [Terminal]\n\n\nç¬¬å››æ­¥ï¼šè®¾ç½®å›æŠ¥å€¼\nåœ¨ç»ˆç«¯èŠ‚ç‚¹è®¾ç½®æˆæœ¬ï¼ˆCostï¼‰å’Œæ•ˆæœï¼ˆEffectivenessï¼‰ï¼š\n\nç‚¹å‡»ç»ˆç«¯èŠ‚ç‚¹\nåœ¨å±æ€§é¢æ¿ä¸­æ‰¾åˆ° Payoff åŒºåŸŸ\nè¾“å…¥æˆæœ¬å€¼ï¼ˆå¦‚ 10000ï¼‰\nè¾“å…¥æ•ˆæœå€¼ï¼ˆå¦‚ 0.9 è¡¨ç¤º QALYï¼‰\n\n\nğŸ’¡ æŠ€å·§ï¼šå¯ä»¥ä½¿ç”¨å˜é‡ä»£æ›¿å…·ä½“æ•°å€¼ï¼Œä¾¿äºåç»­æ•æ„Ÿæ€§åˆ†æã€‚\n\n\n\nç¬¬äº”æ­¥ï¼šè¿è¡Œå†³ç­–æ ‘åˆ†æ\n\né€‰ä¸­å†³ç­–æ ‘æ ¹èŠ‚ç‚¹\nèœå• Analysis &gt; Roll Back æˆ–æŒ‰ F5\næŸ¥çœ‹æ¯ä¸ªç­–ç•¥çš„æœŸæœ›å€¼ï¼ˆExpected Valueï¼‰\næœŸæœ›å€¼æœ€ä¼˜çš„ç­–ç•¥ä¼šè¢«æ ‡è®°",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "TreeAge Pro å†³ç­–åˆ†æ"
    ]
  },
  {
    "objectID": "1062-treeage-pro.html#å®šä¹‰æ¨¡å‹å˜é‡",
    "href": "1062-treeage-pro.html#å®šä¹‰æ¨¡å‹å˜é‡",
    "title": "TreeAge Proï¼šå«ç”Ÿç»æµå­¦å†³ç­–åˆ†æè½¯ä»¶æŒ‡å—",
    "section": "å®šä¹‰æ¨¡å‹å˜é‡",
    "text": "å®šä¹‰æ¨¡å‹å˜é‡\nä½¿ç”¨å˜é‡å¯ä»¥è®©æ¨¡å‹æ›´æ¸…æ™°ã€æ›´æ˜“äºç»´æŠ¤å’Œè¿›è¡Œæ•æ„Ÿæ€§åˆ†æã€‚\n\nåˆ›å»ºå˜é‡\n\nèœå• Tree &gt; Variable Properties æˆ–å¿«æ·é”® Ctrl+Shift+V\nç‚¹å‡» Add æ·»åŠ æ–°å˜é‡\nå¡«å†™å˜é‡å±æ€§ï¼š\n\nNameï¼šå˜é‡åï¼ˆå¦‚ p_successï¼‰\nDefinitionï¼šå˜é‡å€¼æˆ–è¡¨è¾¾å¼ï¼ˆå¦‚ 0.8ï¼‰\nDescriptionï¼šå¯é€‰çš„æè¿°è¯´æ˜\n\n\n\n\nå˜é‡ç±»å‹\n\n\n\nç±»å‹\nè¯´æ˜\nç¤ºä¾‹\n\n\n\n\næ•°å€¼å˜é‡\nå›ºå®šæ•°å€¼\nc_treatment = 5000\n\n\nè¡¨è¾¾å¼\nè®¡ç®—å…¬å¼\np_failure = 1 - p_success\n\n\nè¡¨æ ¼å˜é‡\näºŒç»´æŸ¥æ‰¾è¡¨\nå¹´é¾„-æ€§åˆ«æ­»äº¡ç‡è¡¨\n\n\nåˆ†å¸ƒå˜é‡\nç”¨äº PSA çš„æ¦‚ç‡åˆ†å¸ƒ\nDist(Beta, 40, 60)\n\n\n\n\n\nå¸¸ç”¨è¡¨è¾¾å¼\n# è¡¥æ¦‚ç‡\np_failure = 1 - p_success\n\n# æ¡ä»¶è¡¨è¾¾å¼\nrisk = if(age &gt; 65; high_risk; low_risk)\n\n# è´´ç°\ndiscounted_cost = cost * (1 / (1 + discount_rate))^_stage\n\n# Markov é˜¶æ®µå¼•ç”¨\ncumulative_cost = Cost + (1 / (1 + r))^_stage * c_annual",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "TreeAge Pro å†³ç­–åˆ†æ"
    ]
  },
  {
    "objectID": "1062-treeage-pro.html#æ„å»ºé©¬å°”å¯å¤«æ¨¡å‹",
    "href": "1062-treeage-pro.html#æ„å»ºé©¬å°”å¯å¤«æ¨¡å‹",
    "title": "TreeAge Proï¼šå«ç”Ÿç»æµå­¦å†³ç­–åˆ†æè½¯ä»¶æŒ‡å—",
    "section": "æ„å»ºé©¬å°”å¯å¤«æ¨¡å‹",
    "text": "æ„å»ºé©¬å°”å¯å¤«æ¨¡å‹\né©¬å°”å¯å¤«æ¨¡å‹é€‚ç”¨äºéœ€è¦æ¨¡æ‹Ÿé•¿æœŸç–¾ç—…è¿›å±•çš„åˆ†æåœºæ™¯ã€‚\n\nä»€ä¹ˆæ˜¯é©¬å°”å¯å¤«æ¨¡å‹\né©¬å°”å¯å¤«æ¨¡å‹å°†æ‚£è€…çŠ¶æ€ç¦»æ•£åŒ–ä¸ºæœ‰é™ä¸ªå¥åº·çŠ¶æ€ï¼Œå¹¶æ¨¡æ‹Ÿæ‚£è€…åœ¨å„çŠ¶æ€é—´çš„å‘¨æœŸæ€§è½¬ç§»ã€‚\n\n\n\næ¦‚å¿µ\nè¯´æ˜\n\n\n\n\nå¥åº·çŠ¶æ€\nå¦‚â€å¥åº·â€ã€â€œç–¾ç—…â€ã€â€œæ­»äº¡â€\n\n\nå‘¨æœŸ\næ—¶é—´å•ä½ï¼ˆå¦‚1å¹´ã€1ä¸ªæœˆï¼‰\n\n\nè½¬ç§»æ¦‚ç‡\nä»ä¸€ä¸ªçŠ¶æ€è½¬ç§»åˆ°å¦ä¸€çŠ¶æ€çš„æ¦‚ç‡\n\n\nå‘¨æœŸå¥–åŠ±\nåœ¨æŸçŠ¶æ€åœç•™ä¸€ä¸ªå‘¨æœŸçš„æˆæœ¬/æ•ˆæœ\n\n\n\n\n\nç¬¬ä¸€æ­¥ï¼šæ·»åŠ  Markov èŠ‚ç‚¹\n\nåœ¨ç­–ç•¥åˆ†æ”¯æœ«ç«¯å³é”® â†’ Change Type &gt; Markov\nèŠ‚ç‚¹å˜ä¸ºç´«è‰²åœ†è§’çŸ©å½¢\nåœ¨ Markov ä¿¡æ¯æ¡†ä¸­è®¾ç½®ï¼š\n\nInit Costï¼šåˆå§‹æˆæœ¬\nInit Effï¼šåˆå§‹æ•ˆæœ\nTerm Condï¼šç»ˆæ­¢æ¡ä»¶ï¼ˆå¦‚ _stage &gt;= 20ï¼‰\nHalf-Cycle Correctionï¼šå¯é€‰çš„åŠå‘¨æœŸæ ¡æ­£\n\n\n\n\nç¬¬äºŒæ­¥ï¼šæ·»åŠ å¥åº·çŠ¶æ€\n\nå³é”® Markov èŠ‚ç‚¹ â†’ Add Branch æ·»åŠ çŠ¶æ€åˆ†æ”¯\nå°†åˆ†æ”¯ç±»å‹è®¾ä¸º Markov State\né‡å¤æ·»åŠ æ‰€æœ‰éœ€è¦çš„å¥åº·çŠ¶æ€\n\nå…¸å‹ä¸‰çŠ¶æ€æ¨¡å‹ï¼š\nMarkov èŠ‚ç‚¹\nâ”œâ”€â”€ [State] å¥åº·\nâ”œâ”€â”€ [State] ç–¾ç—…\nâ””â”€â”€ [State] æ­»äº¡\n\n\nç¬¬ä¸‰æ­¥ï¼šå®šä¹‰çŠ¶æ€è½¬ç§»\nåœ¨æ¯ä¸ªçŠ¶æ€ä¸‹å®šä¹‰è½¬ç§»è·¯å¾„ï¼š\n\né€‰ä¸­çŠ¶æ€èŠ‚ç‚¹\næ·»åŠ æœºä¼šåˆ†æ”¯è¡¨ç¤ºå¯èƒ½çš„è½¬ç§»\nè®¾ç½®å„è½¬ç§»çš„æ¦‚ç‡\nç”¨ç‰¹æ®Šç»ˆç«¯èŠ‚ç‚¹æ ‡è®°è½¬ç§»ç›®æ ‡\n\nçŠ¶æ€è½¬ç§»é€»è¾‘ï¼š\n[State] å¥åº·\nâ””â”€â”€ [Chance]\n    â”œâ”€â”€ ä¿æŒå¥åº· (p=0.85) â†’ [#healthy]\n    â”œâ”€â”€ è¿›å±•ä¸ºç–¾ç—… (p=0.14) â†’ [#disease]\n    â””â”€â”€ æ­»äº¡ (p=0.01) â†’ [#dead]\n\nğŸ’¡ ä½¿ç”¨ #statename è¯­æ³•å¼•ç”¨ç›®æ ‡çŠ¶æ€ï¼ˆè·³è½¬æ ‡è®°ï¼‰ã€‚\n\n\n\nç¬¬å››æ­¥ï¼šè®¾ç½®çŠ¶æ€å¥–åŠ±\næ¯ä¸ªçŠ¶æ€éœ€è¦è®¾ç½®è¿›å…¥æˆ–åœç•™çš„æˆæœ¬å’Œæ•ˆæœï¼š\n\né€‰ä¸­çŠ¶æ€èŠ‚ç‚¹\nåœ¨å±æ€§é¢æ¿æ‰¾åˆ° Rewards åŒºåŸŸ\nè®¾ç½®ï¼š\n\nIncr Costï¼šæ¯ä¸ªå‘¨æœŸçš„å¢é‡æˆæœ¬\nIncr Effï¼šæ¯ä¸ªå‘¨æœŸçš„å¢é‡æ•ˆæœï¼ˆQALYï¼‰\nFinal Cost/Effï¼šå¯é€‰çš„ç»ˆæœ«å€¼\n\n\nç¤ºä¾‹è®¾ç½®ï¼š\n\n\n\nçŠ¶æ€\nå‘¨æœŸæˆæœ¬\nå‘¨æœŸæ•ˆæœ (QALY)\n\n\n\n\nå¥åº·\n1,000\n1.0\n\n\nç–¾ç—…\n8,000\n0.6\n\n\næ­»äº¡\n0\n0\n\n\n\n\n\nç¬¬äº”æ­¥ï¼šè®¾ç½®ç»ˆæ­¢æ¡ä»¶\né©¬å°”å¯å¤«æ¨¡å‹éœ€è¦æ˜ç¡®ä½•æ—¶åœæ­¢æ¨¡æ‹Ÿï¼š\n# æŒ‰å‘¨æœŸæ•°ç»ˆæ­¢ï¼ˆ20å¹´æ—¶é—´èŒƒå›´ï¼‰\n_stage &gt;= 20\n\n# æŒ‰å¸æ”¶çŠ¶æ€æ¯”ä¾‹ç»ˆæ­¢ï¼ˆ99%è¿›å…¥æ­»äº¡ï¼‰\n_stage_sum[Dead] &gt;= 0.99\n\n# ç»„åˆæ¡ä»¶\n_stage &gt;= 50 OR _stage_sum[Dead] &gt;= 0.99\n\n\nç¬¬å…­æ­¥ï¼šåŠå‘¨æœŸæ ¡æ­£\né©¬å°”å¯å¤«æ¨¡å‹å‡è®¾çŠ¶æ€è½¬ç§»å‘ç”Ÿåœ¨å‘¨æœŸçš„æŸä¸ªæ—¶ç‚¹ï¼Œå¯èƒ½å¯¼è‡´åå·®ã€‚åŠå‘¨æœŸæ ¡æ­£æ˜¯å¸¸ç”¨çš„è°ƒæ•´æ–¹æ³•ï¼š\n\nåœ¨ Markov ä¿¡æ¯æ¡†å‹¾é€‰ Half-Cycle Correction\næˆ–æ‰‹åŠ¨è®¾ç½®åˆå§‹/ç»ˆæœ«å¥–åŠ±çš„ 0.5 å€",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "TreeAge Pro å†³ç­–åˆ†æ"
    ]
  },
  {
    "objectID": "1062-treeage-pro.html#æˆæœ¬æ•ˆæœåˆ†æ-cea",
    "href": "1062-treeage-pro.html#æˆæœ¬æ•ˆæœåˆ†æ-cea",
    "title": "TreeAge Proï¼šå«ç”Ÿç»æµå­¦å†³ç­–åˆ†æè½¯ä»¶æŒ‡å—",
    "section": "æˆæœ¬æ•ˆæœåˆ†æ (CEA)",
    "text": "æˆæœ¬æ•ˆæœåˆ†æ (CEA)\n\nè®¾ç½®åˆ†æå‚æ•°\n\nèœå• Tree &gt; Model Setup Wizard æˆ–å·¥å…·æ é½¿è½®å›¾æ ‡\nè®¾ç½®ï¼š\n\nCalculation Methodï¼šCost-Effectiveness\nWillingness to Pay (WTP)ï¼šæ”¯ä»˜æ„æ„¿é˜ˆå€¼ï¼ˆå¦‚ 50000ï¼‰\nPayoffç²¾åº¦ï¼šæˆæœ¬ä¸ºè´§å¸æ ¼å¼ï¼Œæ•ˆæœä¸º LY æˆ– QALY\n\n\n\n\nè¿è¡Œæˆæœ¬æ•ˆæœåˆ†æ\n\né€‰ä¸­å†³ç­–èŠ‚ç‚¹\nèœå• Analysis &gt; Cost-Effectiveness\næŸ¥çœ‹è¾“å‡ºç»“æœ\n\n\n\nç†è§£åˆ†æè¾“å‡º\n\næˆæœ¬æ•ˆæœè¡¨\n\n\n\nç­–ç•¥\næˆæœ¬\næ•ˆæœ\nå¢é‡æˆæœ¬\nå¢é‡æ•ˆæœ\nICER\n\n\n\n\næ ‡å‡†æ²»ç–—\n50,000\n5.2\n-\n-\n-\n\n\næ–°è¯A\n80,000\n6.8\n30,000\n1.6\n18,750\n\n\næ–°è¯B\n120,000\n7.5\n70,000\n2.3\n30,435\n\n\n\n\n\nå…³é”®æŒ‡æ ‡\n\n\n\næŒ‡æ ‡\nå…¬å¼\nè§£é‡Š\n\n\n\n\nICER\nÎ”Cost / Î”Effect\næ¯å¤šè·å¾—1ä¸ªQALYçš„å¢é‡æˆæœ¬\n\n\nNMB\nWTP Ã— Effect - Cost\nå‡€è´§å¸æ”¶ç›Šï¼Œè¶Šå¤§è¶Šä¼˜\n\n\nNHB\nEffect - Cost/WTP\nå‡€å¥åº·æ”¶ç›Š\n\n\n\n\n\n\nä¼˜åŠ¿æ€§åˆ†æ\nTreeAge Pro è‡ªåŠ¨è¯†åˆ«è¢«æ”¯é…çš„ç­–ç•¥ï¼š\n\n\n\nç±»å‹\nå®šä¹‰\nå›¾ç¤º\n\n\n\n\nç»å¯¹ä¼˜åŠ¿\næˆæœ¬æ›´é«˜ä¸”æ•ˆæœæ›´å·®\nåœ¨CEå¹³é¢å³ä¸Šè±¡é™\n\n\næ‰©å±•ä¼˜åŠ¿\nICER é«˜äºæ›´æœ‰æ•ˆçš„æ›¿ä»£æ–¹æ¡ˆ\nåœ¨æ•ˆç‡å‰æ²¿çº¿ä¸‹æ–¹",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "TreeAge Pro å†³ç­–åˆ†æ"
    ]
  },
  {
    "objectID": "1062-treeage-pro.html#æ•æ„Ÿæ€§åˆ†æ",
    "href": "1062-treeage-pro.html#æ•æ„Ÿæ€§åˆ†æ",
    "title": "TreeAge Proï¼šå«ç”Ÿç»æµå­¦å†³ç­–åˆ†æè½¯ä»¶æŒ‡å—",
    "section": "æ•æ„Ÿæ€§åˆ†æ",
    "text": "æ•æ„Ÿæ€§åˆ†æ\n\nå•å› ç´ æ•æ„Ÿæ€§åˆ†æ\næ£€éªŒå•ä¸ªå‚æ•°å˜åŒ–å¯¹ç»“æœçš„å½±å“ï¼š\n\nAnalysis &gt; 1-Way Sensitivity Analysis\né€‰æ‹©è¦åˆ†æçš„å˜é‡\nè®¾ç½®èŒƒå›´ï¼ˆLow, Base, Highï¼‰\né€‰æ‹©è¾“å‡ºæŒ‡æ ‡ï¼ˆICER æˆ– NMBï¼‰\n\nè¾“å‡ºï¼š - é˜ˆå€¼åˆ†æï¼šæ‰¾åˆ°ç­–ç•¥é€‰æ‹©åè½¬çš„ä¸´ç•Œå€¼ - é¾™å·é£å›¾ï¼šå±•ç¤ºå„å‚æ•°å½±å“ç¨‹åº¦æ’åº\n\n\nåŒå› ç´ æ•æ„Ÿæ€§åˆ†æ\nåŒæ—¶å˜åŒ–ä¸¤ä¸ªå‚æ•°ï¼š\n\nAnalysis &gt; 2-Way Sensitivity Analysis\né€‰æ‹©ä¸¤ä¸ªå˜é‡åŠå…¶èŒƒå›´\nç”ŸæˆäºŒç»´çƒ­å›¾æ˜¾ç¤ºæœ€ä¼˜ç­–ç•¥åŒºåŸŸ\n\n\n\næ¦‚ç‡æ•æ„Ÿæ€§åˆ†æ (PSA)\nè€ƒè™‘å¤šå‚æ•°åŒæ—¶ä¸ç¡®å®šï¼š\n\nä¸ºå…³é”®å‚æ•°å®šä¹‰æ¦‚ç‡åˆ†å¸ƒï¼š\n\næ¦‚ç‡ï¼šBeta åˆ†å¸ƒ\næˆæœ¬ï¼šGamma åˆ†å¸ƒ\nç›¸å¯¹é£é™©ï¼šLog-normal åˆ†å¸ƒ\n\nAnalysis &gt; Probabilistic Sensitivity Analysis\nè®¾ç½®æ¨¡æ‹Ÿæ¬¡æ•°ï¼ˆé€šå¸¸ 1000-10000 æ¬¡ï¼‰\næŸ¥çœ‹è¾“å‡ºï¼š\n\nCE æ•£ç‚¹å›¾ï¼šå„æ¨¡æ‹Ÿç»“æœçš„æˆæœ¬-æ•ˆæœåˆ†å¸ƒ\nå¢é‡ CE æ•£ç‚¹å›¾ï¼šç›¸å¯¹äºåŸºå‡†çš„å¢é‡åˆ†å¸ƒ\nCEACï¼šæˆæœ¬æ•ˆæœå¯æ¥å—æ›²çº¿\n\n\n\n\næˆæœ¬æ•ˆæœå¯æ¥å—æ›²çº¿ (CEAC)\nCEAC å±•ç¤ºä¸åŒ WTP é˜ˆå€¼ä¸‹å„ç­–ç•¥å…·æœ‰æˆæœ¬æ•ˆæœçš„æ¦‚ç‡ï¼š\n\nX è½´ï¼šæ”¯ä»˜æ„æ„¿ï¼ˆWTPï¼‰\nY è½´ï¼šè¯¥ç­–ç•¥æˆæœ¬æ•ˆæœçš„æ¦‚ç‡\nè§£è¯»ï¼šåœ¨ç»™å®š WTP ä¸‹ï¼Œé€‰æ‹© CEAC å€¼æœ€é«˜çš„ç­–ç•¥",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "TreeAge Pro å†³ç­–åˆ†æ"
    ]
  },
  {
    "objectID": "1062-treeage-pro.html#å®ç”¨æŠ€å·§",
    "href": "1062-treeage-pro.html#å®ç”¨æŠ€å·§",
    "title": "TreeAge Proï¼šå«ç”Ÿç»æµå­¦å†³ç­–åˆ†æè½¯ä»¶æŒ‡å—",
    "section": "å®ç”¨æŠ€å·§",
    "text": "å®ç”¨æŠ€å·§\n\næ¨¡å‹è°ƒè¯•\n\n\n\né—®é¢˜\næ£€æŸ¥æ–¹æ³•\n\n\n\n\næ¦‚ç‡ä¸ç­‰äº1\nTrees &gt; Validate Tree\n\n\nå˜é‡æœªå®šä¹‰\nå˜é‡é¢æ¿æ£€æŸ¥çº¢è‰²æ ‡è®°\n\n\nå¾ªç¯å¼•ç”¨\næŸ¥çœ‹å˜é‡ä¾èµ–å…³ç³»å›¾\n\n\nMarkovä¸æ”¶æ•›\næ£€æŸ¥ç»ˆæ­¢æ¡ä»¶å’Œå¸æ”¶çŠ¶æ€\n\n\n\n\n\næ¨¡å‹æ•ˆç‡\n\nä½¿ç”¨å­æ ‘ï¼ˆSubtreeï¼‰é‡ç”¨ç›¸åŒç»“æ„\nç”¨å…‹éš†ï¼ˆCloneï¼‰å¤åˆ¶å¸¦å˜é‡çš„ç»“æ„\nè®¾ç½®åˆç†çš„ Markov å‘¨æœŸæ•°å’Œ PSA æ¨¡æ‹Ÿæ¬¡æ•°\n\n\n\næŠ¥å‘Šç”Ÿæˆ\n\nFile &gt; Export &gt; Report\né€‰æ‹©è¾“å‡ºæ ¼å¼ï¼ˆWordã€PDFã€HTMLï¼‰\nè‡ªå®šä¹‰åŒ…å«çš„åˆ†æç»“æœå’Œå›¾è¡¨",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "TreeAge Pro å†³ç­–åˆ†æ"
    ]
  },
  {
    "objectID": "1062-treeage-pro.html#r-è¯­è¨€ä¸-treeage-çš„ç»“åˆä½¿ç”¨",
    "href": "1062-treeage-pro.html#r-è¯­è¨€ä¸-treeage-çš„ç»“åˆä½¿ç”¨",
    "title": "TreeAge Proï¼šå«ç”Ÿç»æµå­¦å†³ç­–åˆ†æè½¯ä»¶æŒ‡å—",
    "section": "R è¯­è¨€ä¸ TreeAge çš„ç»“åˆä½¿ç”¨",
    "text": "R è¯­è¨€ä¸ TreeAge çš„ç»“åˆä½¿ç”¨\nè™½ç„¶ TreeAge Pro æ˜¯å›¾å½¢åŒ–è½¯ä»¶ï¼Œä½†å¯ä»¥ä¸ R è¯­è¨€é…åˆä½¿ç”¨æ¥å¢å¼ºåˆ†æèƒ½åŠ›ã€‚\n\næ•°æ®å‡†å¤‡é˜¶æ®µï¼ˆRï¼‰\nåœ¨ R ä¸­è¿›è¡Œæ•°æ®æ¸…æ´—å’Œå‚æ•°ä¼°è®¡ï¼š\n\nlibrary(dplyr)\nlibrary(survival)\n\n# ä»åŸå§‹æ•°æ®ä¼°è®¡è½¬ç§»æ¦‚ç‡\ntransition_probs &lt;- survival_data %&gt;%\n    group_by(from_state) %&gt;%\n    summarise(\n        p_to_disease = mean(to_state == \"disease\"),\n        p_to_death = mean(to_state == \"death\"),\n        p_stay = 1 - p_to_disease - p_to_death\n    )\n\n# å¯¼å‡ºä¸º CSV ä¾› TreeAge ä½¿ç”¨\nwrite.csv(transition_probs, \"transition_probs.csv\", row.names = FALSE)\n\n\n\nç»“æœå¯è§†åŒ–é˜¶æ®µï¼ˆRï¼‰\nå°† TreeAge å¯¼å‡ºçš„ç»“æœåœ¨ R ä¸­è¿›è¡Œé«˜çº§å¯è§†åŒ–ï¼š\n\nlibrary(ggplot2)\nlibrary(scales)\nlibrary(dplyr)\n\n# æ¨¡æ‹Ÿ TreeAge PSA å¯¼å‡ºæ•°æ®\nset.seed(42)\npsa_results &lt;- data.frame(\n    simulation = 1:1000,\n    strategy = rep(c(\"æ ‡å‡†æ²»ç–—\", \"æ–°è¯æ²»ç–—\"), each = 1000),\n    cost = c(rnorm(1000, 50000, 5000), rnorm(1000, 75000, 8000)),\n    qaly = c(rnorm(1000, 5.2, 0.5), rnorm(1000, 6.5, 0.6))\n)\n\n# å¢é‡æˆæœ¬æ•ˆæœæ•£ç‚¹å›¾\nref_data &lt;- psa_results %&gt;%\n    filter(strategy == \"æ ‡å‡†æ²»ç–—\") %&gt;%\n    select(simulation, ref_cost = cost, ref_qaly = qaly)\n\nincremental &lt;- psa_results %&gt;%\n    filter(strategy == \"æ–°è¯æ²»ç–—\") %&gt;%\n    left_join(ref_data, by = \"simulation\") %&gt;%\n    mutate(\n        delta_cost = cost - ref_cost,\n        delta_qaly = qaly - ref_qaly\n    )\n\nggplot(incremental, aes(x = delta_qaly, y = delta_cost)) +\n    geom_point(alpha = 0.3, color = \"#4f46e5\") +\n    geom_hline(yintercept = 0, linetype = \"dashed\", color = \"gray50\") +\n    geom_vline(xintercept = 0, linetype = \"dashed\", color = \"gray50\") +\n    geom_abline(intercept = 0, slope = 50000, color = \"red\", linewidth = 1) +\n    scale_y_continuous(labels = comma_format()) +\n    labs(\n        title = \"å¢é‡æˆæœ¬æ•ˆæœæ•£ç‚¹å›¾ï¼ˆTreeAge PSA ç»“æœï¼‰\",\n        subtitle = \"çº¢çº¿: WTP = 50,000 å…ƒ/QALY\",\n        x = \"å¢é‡ QALY (Î”QALYs)\",\n        y = \"å¢é‡æˆæœ¬ (Î”å…ƒ)\"\n    ) +\n    theme_bw(base_size = 12) +\n    theme(\n        plot.title = element_text(hjust = 0.5, face = \"bold\")\n    ) +\n    annotate(\"text\",\n        x = 1.8, y = -15000, label = \"ä¼˜åŠ¿è±¡é™\",\n        color = \"darkgreen\", size = 4\n    ) +\n    annotate(\"text\",\n        x = -0.3, y = 45000, label = \"åŠ£åŠ¿è±¡é™\",\n        color = \"darkred\", size = 4\n    )\n\n\n\n\n\n\n\n\n\n\nåˆ¶ä½œ CEAC æ›²çº¿\n\n# è®¡ç®—ä¸åŒ WTP ä¸‹çš„ CEAC\ncalculate_ceac &lt;- function(psa_data, wtp_range) {\n    strategies &lt;- unique(psa_data$strategy)\n    n_sim &lt;- length(unique(psa_data$simulation))\n    results &lt;- data.frame()\n\n    for (wtp in wtp_range) {\n        nmb_data &lt;- psa_data %&gt;%\n            mutate(nmb = wtp * qaly - cost)\n\n        best_strategy &lt;- nmb_data %&gt;%\n            group_by(simulation) %&gt;%\n            slice_max(nmb, n = 1) %&gt;%\n            ungroup()\n\n        prob_best &lt;- best_strategy %&gt;%\n            count(strategy) %&gt;%\n            mutate(probability = n / n_sim)\n\n        for (s in strategies) {\n            if (!s %in% prob_best$strategy) {\n                prob_best &lt;- bind_rows(\n                    prob_best,\n                    data.frame(strategy = s, n = 0, probability = 0)\n                )\n            }\n        }\n\n        prob_best$wtp &lt;- wtp\n        results &lt;- bind_rows(results, prob_best)\n    }\n    results\n}\n\nwtp_range &lt;- seq(0, 150000, by = 5000)\nceac_data &lt;- calculate_ceac(psa_results, wtp_range)\n\nggplot(ceac_data, aes(x = wtp, y = probability, color = strategy)) +\n    geom_line(linewidth = 1.2) +\n    geom_vline(xintercept = 50000, linetype = \"dashed\", color = \"gray50\") +\n    scale_x_continuous(labels = comma_format()) +\n    scale_y_continuous(limits = c(0, 1), labels = percent_format()) +\n    scale_color_manual(values = c(\"#4f46e5\", \"#10b981\")) +\n    labs(\n        title = \"æˆæœ¬æ•ˆæœå¯æ¥å—æ›²çº¿ (CEAC)\",\n        x = \"æ”¯ä»˜æ„æ„¿ (WTP, å…ƒ/QALY)\",\n        y = \"æˆæœ¬æ•ˆæœçš„æ¦‚ç‡\",\n        color = \"æ²»ç–—æ–¹æ¡ˆ\"\n    ) +\n    theme_bw(base_size = 12) +\n    theme(\n        legend.position = \"bottom\",\n        plot.title = element_text(hjust = 0.5, face = \"bold\")\n    ) +\n    annotate(\"text\",\n        x = 55000, y = 0.95, label = \"WTP = 50,000\",\n        hjust = 0, color = \"gray30\", size = 3.5\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "TreeAge Pro å†³ç­–åˆ†æ"
    ]
  },
  {
    "objectID": "1062-treeage-pro.html#å¸¸è§é—®é¢˜è§£ç­”",
    "href": "1062-treeage-pro.html#å¸¸è§é—®é¢˜è§£ç­”",
    "title": "TreeAge Proï¼šå«ç”Ÿç»æµå­¦å†³ç­–åˆ†æè½¯ä»¶æŒ‡å—",
    "section": "å¸¸è§é—®é¢˜è§£ç­”",
    "text": "å¸¸è§é—®é¢˜è§£ç­”\n\næ¨¡å‹éªŒè¯\nQ: å¦‚ä½•éªŒè¯æˆ‘çš„æ¨¡å‹æ˜¯å¦æ­£ç¡®ï¼Ÿ\n\næŠ€æœ¯éªŒè¯ï¼šä½¿ç”¨ Tree &gt; Validate Tree æ£€æŸ¥æŠ€æœ¯é”™è¯¯\nå†…éƒ¨éªŒè¯ï¼šæç«¯å€¼æµ‹è¯•ï¼ˆå‚æ•°è®¾ä¸º0æˆ–1æ—¶ç»“æœæ˜¯å¦åˆç†ï¼‰\nå¤–éƒ¨éªŒè¯ï¼šä¸æ–‡çŒ®æŠ¥é“æˆ–å…¶ä»–æ¨¡å‹ç»“æœæ¯”è¾ƒ\næ•æ„Ÿæ€§åˆ†æï¼šæ£€æŸ¥ç»“æœå¯¹å‚æ•°å˜åŒ–çš„æ•æ„Ÿç¨‹åº¦\n\n\n\nå‚æ•°é€‰æ‹©\nQ: æ¦‚ç‡å‚æ•°åº”è¯¥ç”¨ä»€ä¹ˆåˆ†å¸ƒï¼Ÿ\n\n\n\nå‚æ•°ç±»å‹\næ¨èåˆ†å¸ƒ\nåŸå› \n\n\n\n\næ¦‚ç‡\nBeta\nèŒƒå›´ [0,1]ï¼Œçµæ´»å½¢çŠ¶\n\n\næˆæœ¬\nGamma\néè´Ÿï¼Œå³å\n\n\nç›¸å¯¹é£é™©/æ¯”å€¼æ¯”\nLog-normal\néè´Ÿï¼Œå¯å¤§äº1\n\n\næ•ˆç”¨\nBeta\nèŒƒå›´ [0,1]\n\n\n\n\n\nç»“æœè§£è¯»\nQ: ICER ä¸ºè´Ÿæ•°æ€ä¹ˆè§£é‡Šï¼Ÿ\n\nÎ”Cost &lt; 0, Î”Effect &gt; 0ï¼šæ–°æ–¹æ¡ˆâ€ä¼˜åŠ¿â€ï¼ˆæ›´ä¾¿å®œä¸”æ›´æœ‰æ•ˆï¼‰\nÎ”Cost &gt; 0, Î”Effect &lt; 0ï¼šæ–°æ–¹æ¡ˆâ€è¢«æ”¯é…â€ï¼ˆæ›´è´µä¸”æ›´å·®ï¼‰\nä¸¤ç§æƒ…å†µéƒ½ä¸éœ€è¦è®¡ç®— ICERï¼Œç›´æ¥åˆ¤æ–­ä¼˜åŠ£",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "TreeAge Pro å†³ç­–åˆ†æ"
    ]
  },
  {
    "objectID": "1062-treeage-pro.html#å­¦ä¹ èµ„æº",
    "href": "1062-treeage-pro.html#å­¦ä¹ èµ„æº",
    "title": "TreeAge Proï¼šå«ç”Ÿç»æµå­¦å†³ç­–åˆ†æè½¯ä»¶æŒ‡å—",
    "section": "å­¦ä¹ èµ„æº",
    "text": "å­¦ä¹ èµ„æº\n\nå®˜æ–¹èµ„æº\n\n\n\nèµ„æº\né“¾æ¥\n\n\n\n\nTreeAge å¸®åŠ©æ–‡æ¡£\nTreeAge Help\n\n\næ•™ç¨‹è§†é¢‘\nTreeAge å®˜æ–¹ YouTube\n\n\nç¤ºä¾‹æ¨¡å‹åº“\nè½¯ä»¶å®‰è£…ç›®å½•çš„ Examples æ–‡ä»¶å¤¹\n\n\n\n\n\næ–¹æ³•å­¦å‚è€ƒ\n\n\n\nèµ„æº\nè¯´æ˜\n\n\n\n\nISPOR\nå›½é™…è¯ç‰©ç»æµå­¦å­¦ä¼šï¼Œå‘å¸ƒ HTA æ–¹æ³•æŒ‡å—\n\n\nDARTH å·¥ä½œç»„\nå¼€æºå†³ç­–å»ºæ¨¡æ•™ç¨‹å’Œ R ä»£ç \n\n\nYork HTA Program\nè‹±å›½çº¦å…‹å¤§å­¦ HTA åŸ¹è®­èµ„æº\n\n\n\n\n\næ¨èä¹¦ç±\n\nDecision Modelling for Health Economic Evaluation - Briggs, Claxton, Sculpher\nApplied Methods of Cost-effectiveness Analysis in Healthcare - Gray et al.",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "TreeAge Pro å†³ç­–åˆ†æ"
    ]
  },
  {
    "objectID": "1062-treeage-pro.html#æ€»ç»“",
    "href": "1062-treeage-pro.html#æ€»ç»“",
    "title": "TreeAge Proï¼šå«ç”Ÿç»æµå­¦å†³ç­–åˆ†æè½¯ä»¶æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nTreeAge Pro æ˜¯å«ç”Ÿç»æµå­¦å†³ç­–åˆ†æçš„å¼ºå¤§å·¥å…·ï¼Œæœ¬æ•™ç¨‹æ¶µç›–äº†ï¼š\n\n\n\nä¸»é¢˜\nå†…å®¹è¦ç‚¹\n\n\n\n\nå†³ç­–æ ‘æ¨¡å‹\nåˆ›å»ºç­–ç•¥åˆ†æ”¯ã€è®¾ç½®æ¦‚ç‡å’Œå›æŠ¥ã€Roll Back åˆ†æ\n\n\né©¬å°”å¯å¤«æ¨¡å‹\nå®šä¹‰å¥åº·çŠ¶æ€ã€è½¬ç§»æ¦‚ç‡ã€å‘¨æœŸå¥–åŠ±ã€ç»ˆæ­¢æ¡ä»¶\n\n\næˆæœ¬æ•ˆæœåˆ†æ\nICER è®¡ç®—ã€ä¼˜åŠ¿æ€§åˆ¤å®šã€CE å¹³é¢å›¾\n\n\næ•æ„Ÿæ€§åˆ†æ\nå•å› ç´ ã€åŒå› ç´ ã€æ¦‚ç‡æ•æ„Ÿæ€§åˆ†æã€CEAC\n\n\nä¸ R ç»“åˆ\næ•°æ®å‡†å¤‡ã€ç»“æœå¯è§†åŒ–ã€é«˜çº§åˆ†æ\n\n\n\n\nğŸ’¡ æœ€ä½³å®è·µï¼šåœ¨ç®€å•æ¨¡å‹ä¸Šå……åˆ†ç»ƒä¹ ï¼Œç†è§£æ¯ä¸ªåˆ†ææ­¥éª¤çš„å«ä¹‰ï¼Œç„¶åå†åº”ç”¨äºå®é™…ç ”ç©¶é¡¹ç›®ã€‚\n\n\nç›¸å…³æ•™ç¨‹\næœ¬æ•™ç¨‹æ˜¯å«ç”Ÿç»æµå­¦ç³»åˆ—çš„ä¸€éƒ¨åˆ†ï¼Œé…åˆä»¥ä¸‹æ•™ç¨‹ä½¿ç”¨æ•ˆæœæ›´ä½³ï¼š\n\nRè¯­è¨€å«ç”Ÿç»æµå­¦åˆ†æ - R è¯­è¨€å®ç°æˆæœ¬æ•ˆæœåˆ†æ\nå†³ç­–åˆ†ææ–¹æ³•è®ºåŸºç¡€ - ç†è®ºèƒŒæ™¯å’Œæ–¹æ³•è®ºè¦ç‚¹",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "TreeAge Pro å†³ç­–åˆ†æ"
    ]
  },
  {
    "objectID": "1060-instrumental-variables.html",
    "href": "1060-instrumental-variables.html",
    "title": "å·¥å…·å˜é‡æ³•å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "å·¥å…·å˜é‡æ³•ï¼ˆInstrumental Variables, IVï¼‰ æ˜¯è®¡é‡ç»æµå­¦å’Œæµè¡Œç—…å­¦ä¸­è§£å†³å†…ç”Ÿæ€§é—®é¢˜çš„æ ¸å¿ƒæ–¹æ³•ã€‚å½“è§£é‡Šå˜é‡ä¸è¯¯å·®é¡¹ç›¸å…³æ—¶ï¼Œæ™®é€šæœ€å°äºŒä¹˜æ³•ï¼ˆOLSï¼‰ä¼°è®¡ä¼šäº§ç”Ÿåè¯¯ï¼Œæ­¤æ—¶å·¥å…·å˜é‡æ³•å¯ä»¥å¸®åŠ©æˆ‘ä»¬è¯†åˆ«å› æœæ•ˆåº”ã€‚\n\n\n\n\n\n\n\n\n\n\næ¥æº\næè¿°\nä¾‹å­\n\n\n\n\né—æ¼å˜é‡åè¯¯\nå­˜åœ¨æœªè§‚æµ‹çš„æ··æ‚å› ç´ \nç ”ç©¶æ•™è‚²å¯¹æ”¶å…¥çš„å½±å“æ—¶ï¼Œèƒ½åŠ›æ— æ³•è§‚æµ‹\n\n\næµ‹é‡è¯¯å·®\nè‡ªå˜é‡å­˜åœ¨ç³»ç»Ÿæ€§æµ‹é‡è¯¯å·®\nè‡ªæŠ¥çš„é¥®é£Ÿæ‘„å…¥é‡ä¸å‡†ç¡®\n\n\nåŒæ—¶æ€§åè¯¯\nå› å˜é‡åå‘å½±å“è‡ªå˜é‡\nä»·æ ¼ä¸éœ€æ±‚ç›¸äº’å½±å“\n\n\næ ·æœ¬é€‰æ‹©åè¯¯\næ ·æœ¬ééšæœºé€‰å–\nåªè§‚å¯Ÿåˆ°åœ¨èŒäººç¾¤çš„å·¥èµ„\n\n\n\n\n\n\nä¸€ä¸ªæœ‰æ•ˆçš„å·¥å…·å˜é‡ \\(Z\\) å¿…é¡»æ»¡è¶³ï¼š\n\n\n\n\n\n\n\n\n\næ¡ä»¶\nåç§°\nå«ä¹‰\næ£€éªŒæ–¹æ³•\n\n\n\n\nç›¸å…³æ€§\nRelevance\n\\(Z\\) ä¸å†…ç”Ÿå˜é‡ \\(X\\) ç›¸å…³ï¼š\\(Cov(Z, X) \\neq 0\\)\nF ç»Ÿè®¡é‡ &gt; 10\n\n\nå¤–ç”Ÿæ€§\nExogeneity\n\\(Z\\) ä¸è¯¯å·®é¡¹ä¸ç›¸å…³ï¼š\\(Cov(Z, \\epsilon) = 0\\)\næ— æ³•ç›´æ¥æ£€éªŒï¼Œéœ€ç†è®ºè®ºè¯\n\n\næ’ä»–æ€§\nExclusion\n\\(Z\\) åªé€šè¿‡ \\(X\\) å½±å“ \\(Y\\)\næ— æ³•ç›´æ¥æ£€éªŒï¼Œéœ€ç†è®ºè®ºè¯\n\n\n\n\n\n\n\n\n\næ–¹æ³•\nè§£å†³çš„é—®é¢˜\nå‡è®¾è¦æ±‚\né€‚ç”¨åœºæ™¯\n\n\n\n\nOLS\n-\nä¸¥æ ¼å¤–ç”Ÿæ€§\næ— å†…ç”Ÿæ€§é—®é¢˜\n\n\nPSM\nå¯è§‚æµ‹æ··æ‚\næ¡ä»¶ç‹¬ç«‹æ€§\næ··æ‚å¯æµ‹é‡\n\n\nIV\nä¸å¯è§‚æµ‹æ··æ‚\næœ‰æ•ˆå·¥å…·å˜é‡\nå­˜åœ¨å¤–ç”Ÿå˜å¼‚æ¥æº\n\n\nRDD\nå†…ç”Ÿæ€§\næ–­ç‚¹å¤„éšæœºåŒ–\nå­˜åœ¨æ”¿ç­–æ–­ç‚¹\n\n\nDiD\nä¸å¯è§‚æµ‹å¼‚è´¨æ€§\nå¹³è¡Œè¶‹åŠ¿\næ”¿ç­–å‰åå¯¹ç…§",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å·¥å…·å˜é‡æ³• (IV)"
    ]
  },
  {
    "objectID": "1060-instrumental-variables.html#ä»€ä¹ˆæ˜¯å·¥å…·å˜é‡æ³•",
    "href": "1060-instrumental-variables.html#ä»€ä¹ˆæ˜¯å·¥å…·å˜é‡æ³•",
    "title": "å·¥å…·å˜é‡æ³•å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "å·¥å…·å˜é‡æ³•ï¼ˆInstrumental Variables, IVï¼‰ æ˜¯è®¡é‡ç»æµå­¦å’Œæµè¡Œç—…å­¦ä¸­è§£å†³å†…ç”Ÿæ€§é—®é¢˜çš„æ ¸å¿ƒæ–¹æ³•ã€‚å½“è§£é‡Šå˜é‡ä¸è¯¯å·®é¡¹ç›¸å…³æ—¶ï¼Œæ™®é€šæœ€å°äºŒä¹˜æ³•ï¼ˆOLSï¼‰ä¼°è®¡ä¼šäº§ç”Ÿåè¯¯ï¼Œæ­¤æ—¶å·¥å…·å˜é‡æ³•å¯ä»¥å¸®åŠ©æˆ‘ä»¬è¯†åˆ«å› æœæ•ˆåº”ã€‚\n\n\n\n\n\n\n\n\n\n\næ¥æº\næè¿°\nä¾‹å­\n\n\n\n\né—æ¼å˜é‡åè¯¯\nå­˜åœ¨æœªè§‚æµ‹çš„æ··æ‚å› ç´ \nç ”ç©¶æ•™è‚²å¯¹æ”¶å…¥çš„å½±å“æ—¶ï¼Œèƒ½åŠ›æ— æ³•è§‚æµ‹\n\n\næµ‹é‡è¯¯å·®\nè‡ªå˜é‡å­˜åœ¨ç³»ç»Ÿæ€§æµ‹é‡è¯¯å·®\nè‡ªæŠ¥çš„é¥®é£Ÿæ‘„å…¥é‡ä¸å‡†ç¡®\n\n\nåŒæ—¶æ€§åè¯¯\nå› å˜é‡åå‘å½±å“è‡ªå˜é‡\nä»·æ ¼ä¸éœ€æ±‚ç›¸äº’å½±å“\n\n\næ ·æœ¬é€‰æ‹©åè¯¯\næ ·æœ¬ééšæœºé€‰å–\nåªè§‚å¯Ÿåˆ°åœ¨èŒäººç¾¤çš„å·¥èµ„\n\n\n\n\n\n\nä¸€ä¸ªæœ‰æ•ˆçš„å·¥å…·å˜é‡ \\(Z\\) å¿…é¡»æ»¡è¶³ï¼š\n\n\n\n\n\n\n\n\n\næ¡ä»¶\nåç§°\nå«ä¹‰\næ£€éªŒæ–¹æ³•\n\n\n\n\nç›¸å…³æ€§\nRelevance\n\\(Z\\) ä¸å†…ç”Ÿå˜é‡ \\(X\\) ç›¸å…³ï¼š\\(Cov(Z, X) \\neq 0\\)\nF ç»Ÿè®¡é‡ &gt; 10\n\n\nå¤–ç”Ÿæ€§\nExogeneity\n\\(Z\\) ä¸è¯¯å·®é¡¹ä¸ç›¸å…³ï¼š\\(Cov(Z, \\epsilon) = 0\\)\næ— æ³•ç›´æ¥æ£€éªŒï¼Œéœ€ç†è®ºè®ºè¯\n\n\næ’ä»–æ€§\nExclusion\n\\(Z\\) åªé€šè¿‡ \\(X\\) å½±å“ \\(Y\\)\næ— æ³•ç›´æ¥æ£€éªŒï¼Œéœ€ç†è®ºè®ºè¯\n\n\n\n\n\n\n\n\n\næ–¹æ³•\nè§£å†³çš„é—®é¢˜\nå‡è®¾è¦æ±‚\né€‚ç”¨åœºæ™¯\n\n\n\n\nOLS\n-\nä¸¥æ ¼å¤–ç”Ÿæ€§\næ— å†…ç”Ÿæ€§é—®é¢˜\n\n\nPSM\nå¯è§‚æµ‹æ··æ‚\næ¡ä»¶ç‹¬ç«‹æ€§\næ··æ‚å¯æµ‹é‡\n\n\nIV\nä¸å¯è§‚æµ‹æ··æ‚\næœ‰æ•ˆå·¥å…·å˜é‡\nå­˜åœ¨å¤–ç”Ÿå˜å¼‚æ¥æº\n\n\nRDD\nå†…ç”Ÿæ€§\næ–­ç‚¹å¤„éšæœºåŒ–\nå­˜åœ¨æ”¿ç­–æ–­ç‚¹\n\n\nDiD\nä¸å¯è§‚æµ‹å¼‚è´¨æ€§\nå¹³è¡Œè¶‹åŠ¿\næ”¿ç­–å‰åå¯¹ç…§",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å·¥å…·å˜é‡æ³• (IV)"
    ]
  },
  {
    "objectID": "1060-instrumental-variables.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "href": "1060-instrumental-variables.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "title": "å·¥å…·å˜é‡æ³•å®Œå…¨æŒ‡å—",
    "section": "R åŒ…å®‰è£…ä¸åŠ è½½",
    "text": "R åŒ…å®‰è£…ä¸åŠ è½½\n\n# æ ¸å¿ƒåŒ…\nlibrary(AER) # ç»å…¸ 2SLS å®ç°\nlibrary(ivreg) # ç°ä»£ IV å›å½’\nlibrary(estimatr) # ç¨³å¥æ ‡å‡†è¯¯\nlibrary(modelsummary) # ç»“æœå±•ç¤º\n\n# è¾…åŠ©åŒ…\nlibrary(tidyverse)\nlibrary(broom)\nlibrary(ggplot2)\n\ntheme_set(theme_minimal(base_size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å·¥å…·å˜é‡æ³• (IV)"
    ]
  },
  {
    "objectID": "1060-instrumental-variables.html#ä¸¤é˜¶æ®µæœ€å°äºŒä¹˜æ³•-2sls",
    "href": "1060-instrumental-variables.html#ä¸¤é˜¶æ®µæœ€å°äºŒä¹˜æ³•-2sls",
    "title": "å·¥å…·å˜é‡æ³•å®Œå…¨æŒ‡å—",
    "section": "ä¸¤é˜¶æ®µæœ€å°äºŒä¹˜æ³• (2SLS)",
    "text": "ä¸¤é˜¶æ®µæœ€å°äºŒä¹˜æ³• (2SLS)\n\nåŸç†\n2SLS æ˜¯å®ç° IV ä¼°è®¡çš„æ ‡å‡†æ–¹æ³•ï¼Œåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š\nç¬¬ä¸€é˜¶æ®µï¼ˆFirst Stageï¼‰ï¼šç”¨å·¥å…·å˜é‡é¢„æµ‹å†…ç”Ÿå˜é‡ \\[X = \\pi_0 + \\pi_1 Z + \\nu\\]\nç¬¬äºŒé˜¶æ®µï¼ˆSecond Stageï¼‰ï¼šç”¨é¢„æµ‹å€¼æ›¿ä»£å†…ç”Ÿå˜é‡ \\[Y = \\beta_0 + \\beta_1 \\hat{X} + \\epsilon\\]\nå…¶ä¸­ \\(\\hat{X}\\) æ˜¯ç¬¬ä¸€é˜¶æ®µçš„æ‹Ÿåˆå€¼ï¼Œ\\(\\beta_1\\) å°±æ˜¯æˆ‘ä»¬è¦ä¼°è®¡çš„å› æœæ•ˆåº”ã€‚\n\n\næ•°å­¦æ¨å¯¼\nIV ä¼°è®¡é‡å¯ä»¥è¡¨ç¤ºä¸ºï¼š \\[\\hat{\\beta}_{IV} = \\frac{Cov(Z, Y)}{Cov(Z, X)} = \\frac{\\sum(Z_i - \\bar{Z})(Y_i - \\bar{Y})}{\\sum(Z_i - \\bar{Z})(X_i - \\bar{X})}\\]",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å·¥å…·å˜é‡æ³• (IV)"
    ]
  },
  {
    "objectID": "1060-instrumental-variables.html#å®æˆ˜æ¡ˆä¾‹æ•™è‚²å›æŠ¥ç‡ä¼°è®¡",
    "href": "1060-instrumental-variables.html#å®æˆ˜æ¡ˆä¾‹æ•™è‚²å›æŠ¥ç‡ä¼°è®¡",
    "title": "å·¥å…·å˜é‡æ³•å®Œå…¨æŒ‡å—",
    "section": "å®æˆ˜æ¡ˆä¾‹ï¼šæ•™è‚²å›æŠ¥ç‡ä¼°è®¡",
    "text": "å®æˆ˜æ¡ˆä¾‹ï¼šæ•™è‚²å›æŠ¥ç‡ä¼°è®¡\nç»å…¸é—®é¢˜ï¼šå¤šæ¥å—ä¸€å¹´æ•™è‚²èƒ½å¢åŠ å¤šå°‘æ”¶å…¥ï¼Ÿ\nç›´æ¥å›å½’å­˜åœ¨é—®é¢˜ï¼šèƒ½åŠ›é«˜çš„äººæ—¢æ›´å¯èƒ½æ¥å—æ›´å¤šæ•™è‚²ï¼Œä¹Ÿæ›´å¯èƒ½è·å¾—é«˜æ”¶å…¥ã€‚èƒ½åŠ›æ˜¯æœªè§‚æµ‹çš„æ··æ‚å› ç´ ã€‚\nè§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨å‡ºç”Ÿå­£åº¦ä½œä¸ºå·¥å…·å˜é‡ï¼ˆAngrist & Krueger, 1991 çš„ç»å…¸ç ”ç©¶è®¾è®¡ï¼‰ã€‚\n\næ¨¡æ‹Ÿæ•°æ®\n\n# æ¨¡æ‹Ÿæ•™è‚²å›æŠ¥ç‡æ•°æ®\nset.seed(2024)\nn &lt;- 2000\n\n# ç”Ÿæˆæ•°æ®\nsim_data &lt;- tibble(\n    id = 1:n,\n\n    # æœªè§‚æµ‹çš„èƒ½åŠ›ï¼ˆæ··æ‚å› ç´ ï¼‰\n    ability = rnorm(n, 0, 1),\n\n    # å·¥å…·å˜é‡ï¼šå‡ºç”Ÿå­£åº¦ï¼ˆ1-4å­£åº¦ï¼‰\n    # å‡è®¾ç¬¬1å­£åº¦å‡ºç”Ÿçš„äººå¹³å‡å—æ•™è‚²å¹´é™æ›´çŸ­ï¼ˆå› ä¸ºå…¥å­¦å¹´é¾„è§„å®šï¼‰\n    birth_quarter = sample(1:4, n, replace = TRUE),\n\n    # çˆ¶æ¯æ•™è‚²æ°´å¹³ï¼ˆæ§åˆ¶å˜é‡ï¼‰\n    parent_edu = round(rnorm(n, 12, 3)),\n\n    # æ•™è‚²å¹´é™ï¼ˆå†…ç”Ÿå˜é‡ï¼‰\n    # å—èƒ½åŠ›ã€çˆ¶æ¯æ•™è‚²ã€å‡ºç”Ÿå­£åº¦å½±å“\n    education = 10 +\n        0.5 * ability + # èƒ½åŠ›å½±å“æ•™è‚²\n        0.3 * parent_edu + # å®¶åº­èƒŒæ™¯å½±å“\n        -0.8 * (birth_quarter == 1) + # Q1å‡ºç”Ÿè€…æ•™è‚²æ›´å°‘\n        rnorm(n, 0, 1.5),\n\n    # æ”¶å…¥ï¼ˆç»“å±€å˜é‡ï¼‰\n    # çœŸå®å› æœæ•ˆåº”ï¼šæ¯å¤šä¸€å¹´æ•™è‚²å¢åŠ æ”¶å…¥ 0.08 (8%)\n    log_income = 2 +\n        0.08 * education + # çœŸå®å¤„ç†æ•ˆåº”\n        0.3 * ability + # èƒ½åŠ›å½±å“æ”¶å…¥ï¼ˆæ··æ‚ï¼‰\n        0.02 * parent_edu +\n        rnorm(n, 0, 0.3)\n)\n\n# ä½¿æ•™è‚²å¹´é™åˆç†åŒ–\nsim_data &lt;- sim_data %&gt;%\n    mutate(\n        education = pmax(6, pmin(education, 22)),\n        education = round(education)\n    )\n\nhead(sim_data)\n\n# A tibble: 6 Ã— 6\n     id ability birth_quarter parent_edu education log_income\n  &lt;int&gt;   &lt;dbl&gt;         &lt;int&gt;      &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;\n1     1   0.982             3         12        15       3.72\n2     2   0.469             3         13        14       3.30\n3     3  -0.108             1         14        11       3.47\n4     4  -0.213             3         11        14       3.49\n5     5   1.16              1         12        14       3.52\n6     6   1.29              1         15        15       3.69\n\n\n\n\né—®é¢˜æ¼”ç¤ºï¼šOLS åè¯¯\n\n# æœ´ç´  OLS å›å½’ï¼ˆæœ‰åï¼‰\nols_naive &lt;- lm(log_income ~ education, data = sim_data)\n\n# æ§åˆ¶çˆ¶æ¯æ•™è‚²çš„ OLSï¼ˆä»æœ‰åï¼‰\nols_control &lt;- lm(log_income ~ education + parent_edu, data = sim_data)\n\n# å¦‚æœèƒ½è§‚æµ‹èƒ½åŠ›ï¼Œåˆ™æ— åï¼ˆä½œä¸ºå‚ç…§ï¼‰\nols_true &lt;- lm(log_income ~ education + parent_edu + ability, data = sim_data)\n\n# æ¯”è¾ƒç»“æœ\nmodelsummary(\n    list(\n        \"OLS (æœ´ç´ )\" = ols_naive,\n        \"OLS (æ§åˆ¶å˜é‡)\" = ols_control,\n        \"OLS (å®Œç¾æ§åˆ¶)\" = ols_true\n    ),\n    coef_rename = c(\n        \"education\" = \"æ•™è‚²å¹´é™\",\n        \"parent_edu\" = \"çˆ¶æ¯æ•™è‚²\",\n        \"ability\" = \"èƒ½åŠ›\"\n    ),\n    gof_omit = \"IC|Log|F|RMSE\",\n    title = \"OLS å›å½’ç»“æœæ¯”è¾ƒ\"\n)\n\n\n\n    \n\n    \n\n    \n    \n    \n      \n        OLS å›å½’ç»“æœæ¯”è¾ƒ\n        \n              \n                 \n                OLS (æœ´ç´ )\n                OLS (æ§åˆ¶å˜é‡)\n                OLS (å®Œç¾æ§åˆ¶)\n              \n        \n        \n        \n                \n                  (Intercept)\n                  1.520\n                  1.515\n                  2.006\n                \n                \n                  \n                  (0.069)\n                  (0.069)\n                  (0.052)\n                \n                \n                  æ•™è‚²å¹´é™\n                  0.134\n                  0.130\n                  0.077\n                \n                \n                  \n                  (0.005)\n                  (0.006)\n                  (0.004)\n                \n                \n                  çˆ¶æ¯æ•™è‚²\n                  \n                  0.004\n                  0.022\n                \n                \n                  \n                  \n                  (0.004)\n                  (0.003)\n                \n                \n                  èƒ½åŠ›\n                  \n                  \n                  0.306\n                \n                \n                  \n                  \n                  \n                  (0.007)\n                \n                \n                  Num.Obs.\n                  2000\n                  2000\n                  2000\n                \n                \n                  R2\n                  0.258\n                  0.258\n                  0.602\n                \n                \n                  R2 Adj.\n                  0.257\n                  0.257\n                  0.601\n                \n        \n      \n    \n\n\n\nè§£è¯»ï¼š - æœ´ç´  OLS ä¼°è®¡çš„æ•™è‚²å›æŠ¥ç‡çº¦ä¸º 0.10ï¼Œé«˜äºçœŸå®å€¼ 0.08 - è¿™æ˜¯å› ä¸ºèƒ½åŠ›åŒæ—¶å½±å“æ•™è‚²å’Œæ”¶å…¥ï¼Œé€ æˆå‘ä¸Šåè¯¯ - å³ä½¿æ§åˆ¶çˆ¶æ¯æ•™è‚²ï¼Œåè¯¯ä»ç„¶å­˜åœ¨\n\n\nç¬¬ä¸€é˜¶æ®µï¼šæ£€éªŒå·¥å…·å˜é‡ç›¸å…³æ€§\n\n# æ£€æŸ¥å·¥å…·å˜é‡ä¸å†…ç”Ÿå˜é‡çš„å…³ç³»\nfirst_stage &lt;- lm(education ~ birth_quarter + parent_edu, data = sim_data)\nsummary(first_stage)\n\n\nCall:\nlm(formula = education ~ birth_quarter + parent_edu, data = sim_data)\n\nResiduals:\n   Min     1Q Median     3Q    Max \n-5.682 -1.079  0.020  1.056  5.696 \n\nCoefficients:\n              Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)    9.09278    0.16625   54.69   &lt;2e-16 ***\nbirth_quarter  0.26570    0.03156    8.42   &lt;2e-16 ***\nparent_edu     0.30179    0.01165   25.90   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 1.59 on 1997 degrees of freedom\nMultiple R-squared:  0.2672,    Adjusted R-squared:  0.2665 \nF-statistic: 364.1 on 2 and 1997 DF,  p-value: &lt; 2.2e-16\n\n# æŒ‰å‡ºç”Ÿå­£åº¦æŸ¥çœ‹å¹³å‡æ•™è‚²å¹´é™\nsim_data %&gt;%\n    group_by(birth_quarter) %&gt;%\n    summarise(\n        n = n(),\n        mean_edu = mean(education),\n        sd_edu = sd(education)\n    )\n\n# A tibble: 4 Ã— 4\n  birth_quarter     n mean_edu sd_edu\n          &lt;int&gt; &lt;int&gt;    &lt;dbl&gt;  &lt;dbl&gt;\n1             1   518     12.8   1.77\n2             2   462     13.6   1.82\n3             3   517     13.6   1.86\n4             4   503     13.5   1.85\n\n\n\n# å¯è§†åŒ–å·¥å…·å˜é‡ä¸æ•™è‚²çš„å…³ç³»\nggplot(sim_data, aes(x = factor(birth_quarter), y = education)) +\n    geom_boxplot(fill = \"#4f46e5\", alpha = 0.6) +\n    stat_summary(fun = mean, geom = \"point\", color = \"#ef4444\", size = 3) +\n    labs(\n        title = \"å‡ºç”Ÿå­£åº¦ä¸æ•™è‚²å¹´é™çš„å…³ç³»\",\n        subtitle = \"ç¬¬1å­£åº¦å‡ºç”Ÿè€…å¹³å‡æ•™è‚²å¹´é™æ›´çŸ­\",\n        x = \"å‡ºç”Ÿå­£åº¦\",\n        y = \"æ•™è‚²å¹´é™\"\n    )\n\n\n\n\n\n\n\n\n\n\n2SLS å›å½’\n\n# æ–¹æ³•1ï¼šä½¿ç”¨ AER åŒ…çš„ ivreg\niv_aer &lt;- ivreg(\n    log_income ~ education + parent_edu | birth_quarter + parent_edu,\n    data = sim_data\n)\n\nsummary(iv_aer, diagnostics = TRUE)\n\n\nCall:\nivreg(formula = log_income ~ education + parent_edu | birth_quarter + \n    parent_edu, data = sim_data)\n\nResiduals:\n      Min        1Q    Median        3Q       Max \n-1.415472 -0.294272 -0.001581  0.295888  1.472001 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)  2.03785    0.31712   6.426 1.63e-10 ***\neducation    0.07696    0.03213   2.395   0.0167 *  \nparent_edu   0.02008    0.01010   1.989   0.0469 *  \n\nDiagnostic tests:\n                  df1  df2 statistic p-value    \nWeak instruments    1 1997    70.900  &lt;2e-16 ***\nWu-Hausman          1 1996     2.976  0.0846 .  \nSargan              0   NA        NA      NA    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.4301 on 1997 degrees of freedom\nMultiple R-Squared: 0.2269, Adjusted R-squared: 0.2261 \nWald test: 96.26 on 2 and 1997 DF,  p-value: &lt; 2.2e-16 \n\n\n\n# æ–¹æ³•2ï¼šä½¿ç”¨ ivreg åŒ…ï¼ˆè¯­æ³•æ›´æ¸…æ™°ï¼‰\niv_model &lt;- ivreg(\n    log_income ~ education + parent_edu | birth_quarter + parent_edu,\n    data = sim_data\n)\n\n# æ–¹æ³•3ï¼šä½¿ç”¨ estimatr åŒ…ï¼ˆç¨³å¥æ ‡å‡†è¯¯ï¼‰\niv_robust &lt;- iv_robust(\n    log_income ~ education + parent_edu | birth_quarter + parent_edu,\n    data = sim_data,\n    se_type = \"HC2\"\n)\n\nsummary(iv_robust)\n\n\nCall:\niv_robust(formula = log_income ~ education + parent_edu | birth_quarter + \n    parent_edu, data = sim_data, se_type = \"HC2\")\n\nStandard error type:  HC2 \n\nCoefficients:\n            Estimate Std. Error t value  Pr(&gt;|t|)  CI Lower CI Upper   DF\n(Intercept)  2.03785    0.32009   6.366 2.393e-10 1.4101073  2.66560 1997\neducation    0.07696    0.03240   2.375 1.762e-02 0.0134227  0.14049 1997\nparent_edu   0.02008    0.01017   1.973 4.861e-02 0.0001229  0.04003 1997\n\nMultiple R-squared:  0.2269 ,   Adjusted R-squared:  0.2261 \nF-statistic: 93.17 on 2 and 1997 DF,  p-value: &lt; 2.2e-16\n\n\n\n\nç»“æœæ¯”è¾ƒ\n\n# æ±‡æ€»æ¯”è¾ƒ\nmodelsummary(\n    list(\n        \"OLS (æœ‰å)\" = ols_control,\n        \"IV (2SLS)\" = iv_model,\n        \"IV (ç¨³å¥SE)\" = iv_robust\n    ),\n    coef_rename = c(\n        \"education\" = \"æ•™è‚²å¹´é™\",\n        \"parent_edu\" = \"çˆ¶æ¯æ•™è‚²\"\n    ),\n    gof_omit = \"IC|Log|RMSE\",\n    title = \"OLS vs IV ä¼°è®¡ç»“æœ\",\n    notes = \"çœŸå®å› æœæ•ˆåº” = 0.08\"\n)\n\n\n\n    \n\n    \n\n    \n    \n    \n      \n        OLS vs IV ä¼°è®¡ç»“æœ\n        \n              \n                 \n                OLS (æœ‰å)\n                IV (2SLS)\n                IV (ç¨³å¥SE)\n              \n        \n        çœŸå®å› æœæ•ˆåº” = 0.08\n        \n                \n                  (Intercept)\n                  1.515\n                  2.038\n                  2.038\n                \n                \n                  \n                  (0.069)\n                  (0.317)\n                  (0.320)\n                \n                \n                  æ•™è‚²å¹´é™\n                  0.130\n                  0.077\n                  0.077\n                \n                \n                  \n                  (0.006)\n                  (0.032)\n                  (0.032)\n                \n                \n                  çˆ¶æ¯æ•™è‚²\n                  0.004\n                  0.020\n                  0.020\n                \n                \n                  \n                  (0.004)\n                  (0.010)\n                  (0.010)\n                \n                \n                  Num.Obs.\n                  2000\n                  2000\n                  2000\n                \n                \n                  R2\n                  0.258\n                  0.227\n                  0.227\n                \n                \n                  R2 Adj.\n                  0.257\n                  0.226\n                  0.226\n                \n                \n                  F\n                  347.213\n                  \n                  \n                \n        \n      \n    \n\n\n\nå…³é”®å‘ç°ï¼š - IV ä¼°è®¡é‡ï¼ˆçº¦ 0.08ï¼‰æ¥è¿‘çœŸå®å› æœæ•ˆåº” - OLS ä¼°è®¡é‡ï¼ˆçº¦ 0.10ï¼‰ç”±äºé—æ¼å˜é‡è€Œå‘ä¸Šåå€š - IV æ ‡å‡†è¯¯é€šå¸¸å¤§äº OLSï¼Œè¿™æ˜¯æ­£å¸¸çš„",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å·¥å…·å˜é‡æ³• (IV)"
    ]
  },
  {
    "objectID": "1060-instrumental-variables.html#iv-è¯Šæ–­æ£€éªŒ",
    "href": "1060-instrumental-variables.html#iv-è¯Šæ–­æ£€éªŒ",
    "title": "å·¥å…·å˜é‡æ³•å®Œå…¨æŒ‡å—",
    "section": "IV è¯Šæ–­æ£€éªŒ",
    "text": "IV è¯Šæ–­æ£€éªŒ\n\nå¼±å·¥å…·å˜é‡æ£€éªŒ\nå¼±å·¥å…·å˜é‡ä¼šå¯¼è‡´ï¼š - ä¼°è®¡é‡åå‘ OLS - æ ‡å‡†è¯¯è¢«ä½ä¼° - å‡è®¾æ£€éªŒå¤±æ•ˆ\næ£€éªŒæ–¹æ³•ï¼šç¬¬ä¸€é˜¶æ®µ F ç»Ÿè®¡é‡\n\n# æå–ç¬¬ä¸€é˜¶æ®µ F ç»Ÿè®¡é‡\nsummary(iv_aer, diagnostics = TRUE)\n\n\nCall:\nivreg(formula = log_income ~ education + parent_edu | birth_quarter + \n    parent_edu, data = sim_data)\n\nResiduals:\n      Min        1Q    Median        3Q       Max \n-1.415472 -0.294272 -0.001581  0.295888  1.472001 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)  2.03785    0.31712   6.426 1.63e-10 ***\neducation    0.07696    0.03213   2.395   0.0167 *  \nparent_edu   0.02008    0.01010   1.989   0.0469 *  \n\nDiagnostic tests:\n                  df1  df2 statistic p-value    \nWeak instruments    1 1997    70.900  &lt;2e-16 ***\nWu-Hausman          1 1996     2.976  0.0846 .  \nSargan              0   NA        NA      NA    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.4301 on 1997 degrees of freedom\nMultiple R-Squared: 0.2269, Adjusted R-squared: 0.2261 \nWald test: 96.26 on 2 and 1997 DF,  p-value: &lt; 2.2e-16 \n\n\nåˆ¤æ–­æ ‡å‡†ï¼š - F &gt; 10ï¼šå·¥å…·å˜é‡å¼ºåº¦å¯æ¥å— - F &gt; 20ï¼šå·¥å…·å˜é‡è¾ƒå¼º - F &lt; 10ï¼šå­˜åœ¨å¼±å·¥å…·å˜é‡é—®é¢˜\n\n# æ‰‹åŠ¨è®¡ç®—ç¬¬ä¸€é˜¶æ®µ F ç»Ÿè®¡é‡\nfirst_stage_full &lt;- lm(education ~ birth_quarter + parent_edu, data = sim_data)\nfirst_stage_reduced &lt;- lm(education ~ parent_edu, data = sim_data)\n\n# F æ£€éªŒ\nanova(first_stage_reduced, first_stage_full)\n\nAnalysis of Variance Table\n\nModel 1: education ~ parent_edu\nModel 2: education ~ birth_quarter + parent_edu\n  Res.Df    RSS Df Sum of Sq    F    Pr(&gt;F)    \n1   1998 5228.4                                \n2   1997 5049.2  1    179.26 70.9 &lt; 2.2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\n\n\nå†…ç”Ÿæ€§æ£€éªŒ (Wu-Hausman)\næ£€éªŒæ˜¯å¦çœŸçš„éœ€è¦ä½¿ç”¨ IVï¼š\\(H_0\\): å˜é‡æ˜¯å¤–ç”Ÿçš„\n\n# Wu-Hausman æ£€éªŒå·²åŒ…å«åœ¨ summary è¯Šæ–­ä¸­\n# å¦‚æœ p &lt; 0.05ï¼Œæ‹’ç»å¤–ç”Ÿæ€§å‡è®¾ï¼Œåº”ä½¿ç”¨ IV\n\n\n\nè¿‡åº¦è¯†åˆ«æ£€éªŒ (Sargan/Hansen J)\nå½“å·¥å…·å˜é‡æ•°é‡ &gt; å†…ç”Ÿå˜é‡æ•°é‡æ—¶ï¼Œå¯ä»¥æ£€éªŒå·¥å…·å˜é‡çš„æœ‰æ•ˆæ€§ã€‚\n\n# ä½¿ç”¨å¤šä¸ªå·¥å…·å˜é‡çš„ä¾‹å­\n# å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªå·¥å…·å˜é‡\nsim_data &lt;- sim_data %&gt;%\n    mutate(\n        # ç¬¬äºŒä¸ªå·¥å…·å˜é‡ï¼šè·ç¦»æœ€è¿‘å¤§å­¦çš„è·ç¦»\n        distance_college = abs(rnorm(n, 50, 20)) +\n            10 * (birth_quarter == 1),\n        # è·ç¦»å½±å“æ•™è‚²\n        education_v2 = education - 0.02 * distance_college\n    )\n\n# è¿‡åº¦è¯†åˆ«çš„ IV å›å½’\niv_overid &lt;- ivreg(\n    log_income ~ education + parent_edu |\n        birth_quarter + distance_college + parent_edu,\n    data = sim_data\n)\n\nsummary(iv_overid, diagnostics = TRUE)\n\n\nCall:\nivreg(formula = log_income ~ education + parent_edu | birth_quarter + \n    distance_college + parent_edu, data = sim_data)\n\nResiduals:\n      Min        1Q    Median        3Q       Max \n-1.402945 -0.294087 -0.003928  0.293737  1.464658 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)  2.00038    0.31399   6.371 2.33e-10 ***\neducation    0.08078    0.03181   2.540   0.0112 *  \nparent_edu   0.01893    0.01000   1.893   0.0585 .  \n\nDiagnostic tests:\n                  df1  df2 statistic p-value    \nWeak instruments    2 1996    35.970 4.5e-16 ***\nWu-Hausman          1 1996     2.603   0.107    \nSargan              1   NA     0.990   0.320    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.4289 on 1997 degrees of freedom\nMultiple R-Squared: 0.2312, Adjusted R-squared: 0.2304 \nWald test: 97.14 on 2 and 1997 DF,  p-value: &lt; 2.2e-16 \n\n\nSargan æ£€éªŒè§£è¯»ï¼š - \\(H_0\\): æ‰€æœ‰å·¥å…·å˜é‡éƒ½æ˜¯æœ‰æ•ˆçš„ - p &gt; 0.05: ä¸èƒ½æ‹’ç»åŸå‡è®¾ï¼Œå·¥å…·å˜é‡æœ‰æ•ˆæ€§é€šè¿‡æ£€éªŒ - p &lt; 0.05: è‡³å°‘ä¸€ä¸ªå·¥å…·å˜é‡å¯èƒ½æ— æ•ˆ",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å·¥å…·å˜é‡æ³• (IV)"
    ]
  },
  {
    "objectID": "1060-instrumental-variables.html#å±€éƒ¨å¹³å‡å¤„ç†æ•ˆåº”-late",
    "href": "1060-instrumental-variables.html#å±€éƒ¨å¹³å‡å¤„ç†æ•ˆåº”-late",
    "title": "å·¥å…·å˜é‡æ³•å®Œå…¨æŒ‡å—",
    "section": "å±€éƒ¨å¹³å‡å¤„ç†æ•ˆåº” (LATE)",
    "text": "å±€éƒ¨å¹³å‡å¤„ç†æ•ˆåº” (LATE)\n\nç†è§£ IV ä¼°è®¡çš„å«ä¹‰\nIV ä¼°è®¡çš„æ˜¯å±€éƒ¨å¹³å‡å¤„ç†æ•ˆåº” (Local Average Treatment Effect, LATE)ï¼Œè€Œéæ€»ä½“å¹³å‡å¤„ç†æ•ˆåº” (ATE)ã€‚\nLATE åªé’ˆå¯¹ä¾ä»è€… (Compliers)â€”â€”å³é‚£äº›å› å·¥å…·å˜é‡å˜åŒ–è€Œæ”¹å˜å¤„ç†çŠ¶æ€çš„ä¸ªä½“ã€‚\n\n# å°†äººç¾¤åˆ†ä¸ºä¸åŒç±»å‹ï¼ˆæ¦‚å¿µæ€§å±•ç¤ºï¼‰\ntibble(\n    ç±»å‹ = c(\"Always-takers\", \"Never-takers\", \"Compliers\", \"Defiers\"),\n    æè¿° = c(\n        \"æ— è®ºZå¦‚ä½•ï¼Œéƒ½æ¥å—å¤„ç†\",\n        \"æ— è®ºZå¦‚ä½•ï¼Œéƒ½ä¸æ¥å—å¤„ç†\",\n        \"Z=1æ—¶æ¥å—ï¼ŒZ=0æ—¶ä¸æ¥å—\",\n        \"Z=1æ—¶ä¸æ¥å—ï¼ŒZ=0æ—¶æ¥å—\"\n    ),\n    IVä¼°è®¡ç›¸å…³æ€§ = c(\"ä¸ç›¸å…³\", \"ä¸ç›¸å…³\", \"LATEé’ˆå¯¹æ­¤ç¾¤ä½“\", \"å‡è®¾ä¸å­˜åœ¨\")\n) %&gt;%\n    knitr::kable()\n\n\n\n\nç±»å‹\næè¿°\nIVä¼°è®¡ç›¸å…³æ€§\n\n\n\n\nAlways-takers\næ— è®ºZå¦‚ä½•ï¼Œéƒ½æ¥å—å¤„ç†\nä¸ç›¸å…³\n\n\nNever-takers\næ— è®ºZå¦‚ä½•ï¼Œéƒ½ä¸æ¥å—å¤„ç†\nä¸ç›¸å…³\n\n\nCompliers\nZ=1æ—¶æ¥å—ï¼ŒZ=0æ—¶ä¸æ¥å—\nLATEé’ˆå¯¹æ­¤ç¾¤ä½“\n\n\nDefiers\nZ=1æ—¶ä¸æ¥å—ï¼ŒZ=0æ—¶æ¥å—\nå‡è®¾ä¸å­˜åœ¨",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å·¥å…·å˜é‡æ³• (IV)"
    ]
  },
  {
    "objectID": "1060-instrumental-variables.html#è¿›é˜¶å¤šä¸ªå†…ç”Ÿå˜é‡",
    "href": "1060-instrumental-variables.html#è¿›é˜¶å¤šä¸ªå†…ç”Ÿå˜é‡",
    "title": "å·¥å…·å˜é‡æ³•å®Œå…¨æŒ‡å—",
    "section": "è¿›é˜¶ï¼šå¤šä¸ªå†…ç”Ÿå˜é‡",
    "text": "è¿›é˜¶ï¼šå¤šä¸ªå†…ç”Ÿå˜é‡\nå½“å­˜åœ¨å¤šä¸ªå†…ç”Ÿå˜é‡æ—¶ï¼Œéœ€è¦è‡³å°‘åŒæ ·æ•°é‡çš„å·¥å…·å˜é‡ã€‚\n\n# æ¨¡æ‹Ÿä¸¤ä¸ªå†…ç”Ÿå˜é‡çš„æƒ…å†µ\nset.seed(42)\nn &lt;- 1500\n\nmulti_endo &lt;- tibble(\n    # æ··æ‚å› ç´ \n    u = rnorm(n),\n\n    # ä¸¤ä¸ªå·¥å…·å˜é‡\n    z1 = rnorm(n),\n    z2 = rnorm(n),\n\n    # ä¸¤ä¸ªå†…ç”Ÿå˜é‡\n    x1 = 1 + 0.5 * z1 + 0.2 * z2 + 0.3 * u + rnorm(n, 0, 0.5),\n    x2 = 0.5 + 0.3 * z1 + 0.6 * z2 + 0.4 * u + rnorm(n, 0, 0.5),\n\n    # ç»“æœå˜é‡\n    y = 2 + 0.5 * x1 + 0.3 * x2 + 0.5 * u + rnorm(n, 0, 0.5)\n)\n\n# å¤šå†…ç”Ÿå˜é‡ IV\niv_multi &lt;- ivreg(y ~ x1 + x2 | z1 + z2, data = multi_endo)\nsummary(iv_multi, diagnostics = TRUE)\n\n\nCall:\nivreg(formula = y ~ x1 + x2 | z1 + z2, data = multi_endo)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-2.47123 -0.48457 -0.01707  0.48779  2.81386 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)  1.93029    0.04036  47.832  &lt; 2e-16 ***\nx1           0.55481    0.04641  11.954  &lt; 2e-16 ***\nx2           0.29954    0.03830   7.822 9.75e-15 ***\n\nDiagnostic tests:\n                       df1  df2 statistic p-value    \nWeak instruments (x1)    2 1497     683.6  &lt;2e-16 ***\nWeak instruments (x2)    2 1497     878.5  &lt;2e-16 ***\nWu-Hausman               2 1495     137.5  &lt;2e-16 ***\nSargan                   0   NA        NA      NA    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.7138 on 1497 degrees of freedom\nMultiple R-Squared: 0.5745, Adjusted R-squared: 0.574 \nWald test: 339.3 on 2 and 1497 DF,  p-value: &lt; 2.2e-16",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å·¥å…·å˜é‡æ³• (IV)"
    ]
  },
  {
    "objectID": "1060-instrumental-variables.html#ç»å…¸æ¡ˆä¾‹å­Ÿå¾·å°”éšæœºåŒ–",
    "href": "1060-instrumental-variables.html#ç»å…¸æ¡ˆä¾‹å­Ÿå¾·å°”éšæœºåŒ–",
    "title": "å·¥å…·å˜é‡æ³•å®Œå…¨æŒ‡å—",
    "section": "ç»å…¸æ¡ˆä¾‹ï¼šå­Ÿå¾·å°”éšæœºåŒ–",
    "text": "ç»å…¸æ¡ˆä¾‹ï¼šå­Ÿå¾·å°”éšæœºåŒ–\nå­Ÿå¾·å°”éšæœºåŒ– (Mendelian Randomization) æ˜¯ IV åœ¨æµè¡Œç—…å­¦ä¸­çš„é‡è¦åº”ç”¨ï¼Œä½¿ç”¨é—ä¼ å˜å¼‚ä½œä¸ºå·¥å…·å˜é‡ã€‚\n\nåŸç†\n\nå·¥å…·å˜é‡ï¼šä¸æš´éœ²ç›¸å…³çš„é—ä¼ å˜å¼‚ï¼ˆå¦‚ SNPï¼‰\nç›¸å…³æ€§ï¼šé—ä¼ å˜å¼‚å½±å“æš´éœ²æ°´å¹³\nå¤–ç”Ÿæ€§ï¼šé—ä¼ å˜å¼‚åœ¨å—ç²¾æ—¶éšæœºåˆ†é…\næ’ä»–æ€§ï¼šé—ä¼ å˜å¼‚åªé€šè¿‡æš´éœ²å½±å“ç»“å±€\n\n\n# æ¨¡æ‹Ÿ MR æ•°æ®\nset.seed(2024)\nn_mr &lt;- 5000\n\nmr_data &lt;- tibble(\n    # é—ä¼ å˜å¼‚ï¼ˆå·¥å…·å˜é‡ï¼‰\n    snp = sample(0:2, n_mr, replace = TRUE, prob = c(0.25, 0.5, 0.25)),\n\n    # æ··æ‚å› ç´ \n    confounder = rnorm(n_mr),\n\n    # æš´éœ²ï¼ˆå¦‚ LDL èƒ†å›ºé†‡ï¼‰\n    exposure = 100 + 10 * snp + 5 * confounder + rnorm(n_mr, 0, 15),\n\n    # ç»“å±€ï¼ˆå¦‚å¿ƒè¡€ç®¡ç–¾ç—…é£é™©è¯„åˆ†ï¼‰\n    # çœŸå®å› æœæ•ˆåº”ï¼šæ¯å•ä½æš´éœ²å¢åŠ  0.02 é£é™©\n    outcome = 50 + 0.02 * exposure + 3 * confounder + rnorm(n_mr, 0, 10)\n)\n\n# OLSï¼ˆæœ‰åï¼‰\nmr_ols &lt;- lm(outcome ~ exposure, data = mr_data)\n\n# IV/MRï¼ˆæ— åï¼‰\nmr_iv &lt;- ivreg(outcome ~ exposure | snp, data = mr_data)\n\nmodelsummary(\n    list(\"OLS (è§‚å¯Ÿæ€§)\" = mr_ols, \"MR/IV (å› æœ)\" = mr_iv),\n    coef_rename = c(\"exposure\" = \"æš´éœ²\"),\n    gof_omit = \"IC|Log|RMSE\",\n    title = \"å­Ÿå¾·å°”éšæœºåŒ– vs è§‚å¯Ÿæ€§å…³è”\"\n)\n\n\n\n    \n\n    \n\n    \n    \n    \n      \n        å­Ÿå¾·å°”éšæœºåŒ– vs è§‚å¯Ÿæ€§å…³è”\n        \n              \n                 \n                OLS (è§‚å¯Ÿæ€§)\n                MR/IV (å› æœ)\n              \n        \n        \n        \n                \n                  (Intercept)\n                  45.615\n                  49.203\n                \n                \n                  \n                  (0.940)\n                  (2.340)\n                \n                \n                  æš´éœ²\n                  0.059\n                  0.027\n                \n                \n                  \n                  (0.008)\n                  (0.021)\n                \n                \n                  Num.Obs.\n                  5000\n                  5000\n                \n                \n                  R2\n                  0.010\n                  0.007\n                \n                \n                  R2 Adj.\n                  0.010\n                  0.007\n                \n                \n                  F\n                  49.187",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å·¥å…·å˜é‡æ³• (IV)"
    ]
  },
  {
    "objectID": "1060-instrumental-variables.html#æŠ¥å‘Šæ¨¡æ¿",
    "href": "1060-instrumental-variables.html#æŠ¥å‘Šæ¨¡æ¿",
    "title": "å·¥å…·å˜é‡æ³•å®Œå…¨æŒ‡å—",
    "section": "æŠ¥å‘Šæ¨¡æ¿",
    "text": "æŠ¥å‘Šæ¨¡æ¿\n\næ ‡å‡†æŠ¥å‘Šæ ¼å¼\nåœ¨è®ºæ–‡ä¸­æŠ¥å‘Š IV åˆ†ææ—¶ï¼Œåº”åŒ…å«ï¼š\n\n# ç”ŸæˆæŠ¥å‘Šè¡¨æ ¼\niv_report &lt;- tidy(iv_robust, conf.int = TRUE) %&gt;%\n    filter(term == \"education\") %&gt;%\n    transmute(\n        `ä¼°è®¡é‡` = \"2SLS\",\n        `ç³»æ•°` = round(estimate, 4),\n        `ç¨³å¥SE` = round(std.error, 4),\n        `95% CI` = paste0(\"[\", round(conf.low, 4), \", \", round(conf.high, 4), \"]\"),\n        `på€¼` = format.pval(p.value, digits = 3)\n    )\n\niv_report %&gt;% knitr::kable()\n\n\n\n\nä¼°è®¡é‡\nç³»æ•°\nç¨³å¥SE\n95% CI\npå€¼\n\n\n\n\n2SLS\n0.077\n0.0324\n[0.0134, 0.1405]\n0.0176\n\n\n\n\n\n\n\næŠ¥å‘Š Checklist\n\næŠ¥å‘Šå·¥å…·å˜é‡çš„é€‰æ‹©ç†ç”±åŠç†è®ºä¾æ®\næŠ¥å‘Šç¬¬ä¸€é˜¶æ®µ F ç»Ÿè®¡é‡\nå¦‚æœ‰å¤šä¸ªå·¥å…·å˜é‡ï¼ŒæŠ¥å‘Šè¿‡åº¦è¯†åˆ«æ£€éªŒ\næŠ¥å‘Š IV ç³»æ•°ã€æ ‡å‡†è¯¯ã€95% CI\nä¸ OLS ç»“æœå¯¹æ¯”è®¨è®º\nè®¨è®º LATE çš„è§£é‡Šä¸å¤–æ¨æ€§",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å·¥å…·å˜é‡æ³• (IV)"
    ]
  },
  {
    "objectID": "1060-instrumental-variables.html#å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "href": "1060-instrumental-variables.html#å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "title": "å·¥å…·å˜é‡æ³•å®Œå…¨æŒ‡å—",
    "section": "å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "text": "å¸¸è§é—®é¢˜ä¸é™·é˜±\n\né—®é¢˜æ±‡æ€»\n\n\n\n\n\n\n\n\né—®é¢˜\nåæœ\nè§£å†³æ–¹æ¡ˆ\n\n\n\n\nå¼±å·¥å…·å˜é‡\nä¼°è®¡åå‘ OLSï¼Œå‡è®¾æ£€éªŒå¤±æ•ˆ\nå¯»æ‰¾æ›´å¼ºå·¥å…·å˜é‡ï¼›ä½¿ç”¨å¼±IVç¨³å¥æ–¹æ³•\n\n\nå·¥å…·å˜é‡å¤–ç”Ÿæ€§ä¸æ»¡è¶³\nIV ä¼°è®¡ä»ç„¶æœ‰å\næ•æ„Ÿæ€§åˆ†æï¼›å¯»æ‰¾æ›´å¥½çš„å·¥å…·\n\n\næ’ä»–æ€§å‡è®¾è¿å\næ— æ³•è¯†åˆ«å› æœæ•ˆåº”\næ§åˆ¶å¯èƒ½çš„ç›´æ¥è·¯å¾„\n\n\næ ·æœ¬é‡ä¸è¶³\nç²¾åº¦ä½ï¼Œæ ‡å‡†è¯¯å¤§\nå¢åŠ æ ·æœ¬é‡ï¼›ä½¿ç”¨æ›´å¼ºå·¥å…·\n\n\n\n\n\nå¼±å·¥å…·å˜é‡çš„ç¨³å¥æ–¹æ³•\n\n# ä½¿ç”¨ Anderson-Rubin ç½®ä¿¡åŒºé—´ï¼ˆå¼±IVç¨³å¥ï¼‰\n# AR æ£€éªŒå¯¹å¼±å·¥å…·å˜é‡æ›´ç¨³å¥",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å·¥å…·å˜é‡æ³• (IV)"
    ]
  },
  {
    "objectID": "1060-instrumental-variables.html#ä»£ç é€ŸæŸ¥è¡¨",
    "href": "1060-instrumental-variables.html#ä»£ç é€ŸæŸ¥è¡¨",
    "title": "å·¥å…·å˜é‡æ³•å®Œå…¨æŒ‡å—",
    "section": "ä»£ç é€ŸæŸ¥è¡¨",
    "text": "ä»£ç é€ŸæŸ¥è¡¨\n\n# ========== IV åˆ†ææ¨¡æ¿ ==========\n\nlibrary(AER)\nlibrary(ivreg)\nlibrary(estimatr)\n\n# åŸºæœ¬ 2SLS\niv_basic &lt;- ivreg(y ~ x_endog + controls | z_iv + controls, data = data)\nsummary(iv_basic, diagnostics = TRUE)\n\n# ç¨³å¥æ ‡å‡†è¯¯\niv_robust &lt;- iv_robust(\n    y ~ x_endog + controls | z_iv + controls,\n    data = data,\n    se_type = \"HC2\"\n)\n\n# ç¬¬ä¸€é˜¶æ®µæ£€æŸ¥\nfirst_stage &lt;- lm(x_endog ~ z_iv + controls, data = data)\nsummary(first_stage) # æŸ¥çœ‹ F ç»Ÿè®¡é‡\n\n# ç»“æœå±•ç¤º\nmodelsummary(list(\"OLS\" = ols_model, \"IV\" = iv_model))\n\n# è¯Šæ–­æ£€éªŒï¼ˆè‡ªåŠ¨è¾“å‡ºï¼‰\n# - Weak instruments: F &gt; 10\n# - Wu-Hausman: å†…ç”Ÿæ€§æ£€éªŒ\n# - Sargan: è¿‡åº¦è¯†åˆ«æ£€éªŒï¼ˆå¤šå·¥å…·å˜é‡æ—¶ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å·¥å…·å˜é‡æ³• (IV)"
    ]
  },
  {
    "objectID": "1060-instrumental-variables.html#æ€»ç»“",
    "href": "1060-instrumental-variables.html#æ€»ç»“",
    "title": "å·¥å…·å˜é‡æ³•å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nè¦ç‚¹\nè¯´æ˜\n\n\n\n\nä½•æ—¶ä½¿ç”¨\nå­˜åœ¨å†…ç”Ÿæ€§é—®é¢˜ï¼ˆé—æ¼å˜é‡ã€åå‘å› æœç­‰ï¼‰\n\n\nå…³é”®å‡è®¾\nå·¥å…·å˜é‡ç›¸å…³ã€å¤–ç”Ÿã€æ’ä»–\n\n\nä¸»è¦è¯Šæ–­\nç¬¬ä¸€é˜¶æ®µ F &gt; 10ï¼ŒSargan æ£€éªŒ\n\n\nä¼°è®¡è§£é‡Š\nLATEï¼ˆå±€éƒ¨å¹³å‡å¤„ç†æ•ˆåº”ï¼‰\n\n\næ³¨æ„äº‹é¡¹\nIV æ ‡å‡†è¯¯é€šå¸¸è¾ƒå¤§ï¼Œéœ€æƒè¡¡åè¯¯ä¸ç²¾åº¦",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å·¥å…·å˜é‡æ³• (IV)"
    ]
  },
  {
    "objectID": "1060-instrumental-variables.html#å‚è€ƒèµ„æº",
    "href": "1060-instrumental-variables.html#å‚è€ƒèµ„æº",
    "title": "å·¥å…·å˜é‡æ³•å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nAngrist JD, Pischke JS (2009). Mostly Harmless Econometrics\nAngrist JD, Krueger AB (1991). Does Compulsory School Attendance Affect Schooling and Earnings?\nAER åŒ…æ–‡æ¡£\nivreg åŒ…æ–‡æ¡£\nHernÃ¡n MA, Robins JM. Causal Inference: What If - Chapter 16",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å·¥å…·å˜é‡æ³• (IV)"
    ]
  },
  {
    "objectID": "1058-mendelian-randomization.html",
    "href": "1058-mendelian-randomization.html",
    "title": "å­Ÿå¾·å°”éšæœºåŒ– (Mendelian Randomization) æ•™ç¨‹",
    "section": "",
    "text": "åœ¨æµè¡Œç—…å­¦ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸æƒ³çŸ¥é“ï¼šæš´éœ²å› ç´  X æ˜¯å¦çœŸçš„æ˜¯å¯¼è‡´ç–¾ç—…ç»“å±€ Y çš„åŸå› ï¼Ÿ\nä¼ ç»Ÿçš„è§‚å¯Ÿæ€§ç ”ç©¶ï¼ˆå¦‚é˜Ÿåˆ—ç ”ç©¶ã€ç—…ä¾‹å¯¹ç…§ç ”ç©¶ï¼‰è™½ç„¶èƒ½å‘ç° X å’Œ Y ä¹‹é—´çš„å…³è”ï¼Œä½†å¾ˆéš¾è¯æ˜å› æœå…³ç³»ã€‚æœ€ä¸»è¦çš„é—®é¢˜æ˜¯æ··æ‚å› ç´ ï¼ˆConfoundersï¼‰å’Œåå‘å› æœï¼ˆReverse Causalityï¼‰çš„å¹²æ‰°ã€‚\nå­Ÿå¾·å°”éšæœºåŒ–ï¼ˆMendelian Randomization, MRï¼‰ æä¾›äº†ä¸€ä¸ªå·§å¦™çš„è§£å†³æ–¹æ¡ˆã€‚å®ƒåˆ©ç”¨é—ä¼ å˜å¼‚ï¼ˆé€šå¸¸æ˜¯SNPï¼‰ä½œä¸ºå·¥å…·å˜é‡ï¼Œæ¥æ¨æ–­æš´éœ²å› ç´ ä¸ç»“å±€ä¹‹é—´çš„å› æœæ•ˆåº”ã€‚\n\n\næƒ³è±¡ä¸€ä¸‹éšæœºå¯¹ç…§è¯•éªŒï¼ˆRCTï¼‰ï¼šæˆ‘ä»¬å°†äººç¾¤éšæœºåˆ†ä¸ºä¸¤ç»„ï¼Œä¸€ç»„æ¥å—å¹²é¢„ï¼ˆæš´éœ² Xï¼‰ï¼Œä¸€ç»„ä¸æ¥å—ã€‚ç”±äºåˆ†ç»„æ˜¯éšæœºçš„ï¼Œä¸¤ç»„åœ¨å…¶ä»–ç‰¹å¾ä¸Šæ˜¯å‡è¡¡çš„ï¼Œå› æ­¤ä¸¤ç»„ç»“å±€çš„å·®å¼‚å¯ä»¥å½’å› äºæš´éœ² Xã€‚\nè€Œåœ¨å­Ÿå¾·å°”éšæœºåŒ–ä¸­ï¼š 1. éšæœºåˆ†é…ï¼šåœ¨å—ç²¾åµå½¢æˆæ—¶ï¼Œç­‰ä½åŸºå› æ˜¯éšæœºåˆ†é…ç»™åä»£çš„ï¼ˆå­Ÿå¾·å°”ç¬¬äºŒå®šå¾‹ï¼‰ã€‚è¿™å°±åƒå¤§è‡ªç„¶è¿›è¡Œäº†ä¸€æ¬¡éšæœºåˆ†ç»„ã€‚ 2. ä¸å—åå¤©å½±å“ï¼šåŸºå› å‹ç”Ÿæ¥æ³¨å®šï¼Œä¸€èˆ¬ä¸å—åå¤©ç¯å¢ƒã€ç”Ÿæ´»æ–¹å¼ç”šè‡³ç–¾ç—…çŠ¶æ€çš„å½±å“ã€‚è¿™å®Œç¾è§„é¿äº†â€åå‘å› æœâ€å’Œå¤§éƒ¨åˆ†â€æ··æ‚å› ç´ â€ã€‚\nå¦‚æœç‰¹å®šçš„åŸºå› å˜å¼‚ï¼ˆå¦‚ä¸é«˜BMIç›¸å…³çš„åŸºå› ï¼‰èƒ½æ˜¾è‘—å¢åŠ ç–¾ç—…é£é™©ï¼Œè€Œè¿™äº›åŸºå› é™¤äº†å½±å“BMIå¤–ä¸é€šè¿‡å…¶ä»–é€”å¾„å½±å“ç–¾ç—…ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æœ‰ç†ç”±ç›¸ä¿¡ï¼šBMIæ˜¯å¯¼è‡´è¯¥ç–¾ç—…çš„åŸå› ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å­Ÿå¾·å°”éšæœºåŒ–"
    ]
  },
  {
    "objectID": "1058-mendelian-randomization.html#ä¸ºä»€ä¹ˆè¯´å®ƒæ˜¯è‡ªç„¶çš„rct",
    "href": "1058-mendelian-randomization.html#ä¸ºä»€ä¹ˆè¯´å®ƒæ˜¯è‡ªç„¶çš„rct",
    "title": "å­Ÿå¾·å°”éšæœºåŒ– (Mendelian Randomization) æ•™ç¨‹",
    "section": "",
    "text": "æƒ³è±¡ä¸€ä¸‹éšæœºå¯¹ç…§è¯•éªŒï¼ˆRCTï¼‰ï¼šæˆ‘ä»¬å°†äººç¾¤éšæœºåˆ†ä¸ºä¸¤ç»„ï¼Œä¸€ç»„æ¥å—å¹²é¢„ï¼ˆæš´éœ² Xï¼‰ï¼Œä¸€ç»„ä¸æ¥å—ã€‚ç”±äºåˆ†ç»„æ˜¯éšæœºçš„ï¼Œä¸¤ç»„åœ¨å…¶ä»–ç‰¹å¾ä¸Šæ˜¯å‡è¡¡çš„ï¼Œå› æ­¤ä¸¤ç»„ç»“å±€çš„å·®å¼‚å¯ä»¥å½’å› äºæš´éœ² Xã€‚\nè€Œåœ¨å­Ÿå¾·å°”éšæœºåŒ–ä¸­ï¼š 1. éšæœºåˆ†é…ï¼šåœ¨å—ç²¾åµå½¢æˆæ—¶ï¼Œç­‰ä½åŸºå› æ˜¯éšæœºåˆ†é…ç»™åä»£çš„ï¼ˆå­Ÿå¾·å°”ç¬¬äºŒå®šå¾‹ï¼‰ã€‚è¿™å°±åƒå¤§è‡ªç„¶è¿›è¡Œäº†ä¸€æ¬¡éšæœºåˆ†ç»„ã€‚ 2. ä¸å—åå¤©å½±å“ï¼šåŸºå› å‹ç”Ÿæ¥æ³¨å®šï¼Œä¸€èˆ¬ä¸å—åå¤©ç¯å¢ƒã€ç”Ÿæ´»æ–¹å¼ç”šè‡³ç–¾ç—…çŠ¶æ€çš„å½±å“ã€‚è¿™å®Œç¾è§„é¿äº†â€åå‘å› æœâ€å’Œå¤§éƒ¨åˆ†â€æ··æ‚å› ç´ â€ã€‚\nå¦‚æœç‰¹å®šçš„åŸºå› å˜å¼‚ï¼ˆå¦‚ä¸é«˜BMIç›¸å…³çš„åŸºå› ï¼‰èƒ½æ˜¾è‘—å¢åŠ ç–¾ç—…é£é™©ï¼Œè€Œè¿™äº›åŸºå› é™¤äº†å½±å“BMIå¤–ä¸é€šè¿‡å…¶ä»–é€”å¾„å½±å“ç–¾ç—…ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æœ‰ç†ç”±ç›¸ä¿¡ï¼šBMIæ˜¯å¯¼è‡´è¯¥ç–¾ç—…çš„åŸå› ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å­Ÿå¾·å°”éšæœºåŒ–"
    ]
  },
  {
    "objectID": "1058-mendelian-randomization.html#å®‰è£…-twosamplemr-åŒ…",
    "href": "1058-mendelian-randomization.html#å®‰è£…-twosamplemr-åŒ…",
    "title": "å­Ÿå¾·å°”éšæœºåŒ– (Mendelian Randomization) æ•™ç¨‹",
    "section": "1. å®‰è£… TwoSampleMR åŒ…",
    "text": "1. å®‰è£… TwoSampleMR åŒ…\nè¿™æ˜¯ç›®å‰åŠŸèƒ½æœ€ä¸ºå¼ºå¤§çš„ MR åˆ†æ R åŒ…ï¼Œé›†æˆäº†æ•°æ®è·å–ã€åè°ƒã€åˆ†æå’Œå¯è§†åŒ–çš„å…¨æµç¨‹ã€‚\n# å®‰è£… remotes åŒ…ï¼ˆå¦‚æœæœªå®‰è£…ï¼‰\ninstall.packages(\"remotes\")\n\n# ä» GitHub å®‰è£… TwoSampleMR\nremotes::install_github(\"MRCIEU/TwoSampleMR\")\n\n# åŠ è½½åŒ…\nlibrary(TwoSampleMR)\nlibrary(tidyverse)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å­Ÿå¾·å°”éšæœºåŒ–"
    ]
  },
  {
    "objectID": "1058-mendelian-randomization.html#ç†è§£æ•°æ®ç»“æ„",
    "href": "1058-mendelian-randomization.html#ç†è§£æ•°æ®ç»“æ„",
    "title": "å­Ÿå¾·å°”éšæœºåŒ– (Mendelian Randomization) æ•™ç¨‹",
    "section": "2. ç†è§£æ•°æ®ç»“æ„",
    "text": "2. ç†è§£æ•°æ®ç»“æ„\nåœ¨ MR åˆ†æä¸­ï¼Œæˆ‘ä»¬å¤„ç†çš„æ•°æ®æ¡†é€šå¸¸åŒ…å«ä»¥ä¸‹å…³é”®åˆ—ï¼š * SNP: å˜å¼‚ä½ç‚¹ID (å¦‚ rs123456) * beta: æ•ˆåº”å€¼ (è¯¥SNPæ¯å¢åŠ ä¸€ä¸ªç­‰ä½åŸºå› ï¼Œè¡¨å‹æ”¹å˜å¤šå°‘) * se: æ ‡å‡†è¯¯ (beta çš„ç²¾ç¡®åº¦) * effect_allele: æ•ˆåº”ç­‰ä½åŸºå›  (å¦‚ A) * other_allele: å…¶ä»–ç­‰ä½åŸºå›  (å¦‚ G) * eaf: æ•ˆåº”ç­‰ä½åŸºå› é¢‘ç‡ * pval: På€¼",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å­Ÿå¾·å°”éšæœºåŒ–"
    ]
  },
  {
    "objectID": "1058-mendelian-randomization.html#æ­¥éª¤ä¸€è·å–æš´éœ²æ•°æ®-extract-exposures",
    "href": "1058-mendelian-randomization.html#æ­¥éª¤ä¸€è·å–æš´éœ²æ•°æ®-extract-exposures",
    "title": "å­Ÿå¾·å°”éšæœºåŒ– (Mendelian Randomization) æ•™ç¨‹",
    "section": "æ­¥éª¤ä¸€ï¼šè·å–æš´éœ²æ•°æ® (Extract Exposures)",
    "text": "æ­¥éª¤ä¸€ï¼šè·å–æš´éœ²æ•°æ® (Extract Exposures)\né¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸ BMI å¼ºç›¸å…³çš„ SNP ä½œä¸ºå·¥å…·å˜é‡ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥è¿æ¥ IEU OpenGWAS æ•°æ®åº“ä¸‹è½½ã€‚\næ“ä½œé€»è¾‘ï¼š 1. æŒ‡å®šæš´éœ² IDï¼ˆå¦‚ ieu-a-2 æ˜¯ä¸€ä¸ªè‘—åçš„ BMI GWASï¼‰ã€‚ 2. è®¾å®šæ˜¾è‘—æ€§é˜ˆå€¼ï¼ˆp1 = 5e-8ï¼‰ï¼Œåªé€‰æ˜¾è‘—ç›¸å…³çš„ SNPã€‚ 3. è¿›è¡Œè¿é”ä¸å¹³è¡¡ï¼ˆLDï¼‰å»é™¤ï¼ˆclump = TRUEï¼‰ï¼Œç¡®ä¿é€‰å‡ºçš„ SNP ç›¸äº’ç‹¬ç«‹ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚\n# è·å– BMI çš„å·¥å…·å˜é‡\nbmi_pd &lt;- extract_instruments(\n    outcomes = \"ieu-a-2\",    # æš´éœ²æ•°æ®çš„ID\n    p1 = 5e-8,               # æ˜¾è‘—æ€§é˜ˆå€¼\n    clump = TRUE,            # æ˜¯å¦å»é™¤è¿é”ä¸å¹³è¡¡\n    r2 = 0.001,              # LD é˜ˆå€¼\n    kb = 10000               # çª—å£å¤§å°\n)\n\nprint(dim(bmi_pd)) # æŸ¥çœ‹ç­›é€‰å‡ºäº†å¤šå°‘ä¸ªå·¥å…·å˜é‡",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å­Ÿå¾·å°”éšæœºåŒ–"
    ]
  },
  {
    "objectID": "1058-mendelian-randomization.html#æ­¥éª¤äºŒè·å–ç»“å±€æ•°æ®-extract-outcome",
    "href": "1058-mendelian-randomization.html#æ­¥éª¤äºŒè·å–ç»“å±€æ•°æ®-extract-outcome",
    "title": "å­Ÿå¾·å°”éšæœºåŒ– (Mendelian Randomization) æ•™ç¨‹",
    "section": "æ­¥éª¤äºŒï¼šè·å–ç»“å±€æ•°æ® (Extract Outcome)",
    "text": "æ­¥éª¤äºŒï¼šè·å–ç»“å±€æ•°æ® (Extract Outcome)\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç»“å±€ï¼ˆ2å‹ç³–å°¿ç—…ï¼‰çš„ GWAS æ•°æ®ä¸­ï¼Œæ‰¾åˆ°ä¸Šè¿°è¿™äº› SNP çš„ä¿¡æ¯ã€‚\næ“ä½œé€»è¾‘ï¼š 1. åˆ©ç”¨ä¸Šä¸€æ­¥æå–çš„ SNP åˆ—è¡¨ï¼ˆbmi_pd$SNPï¼‰ã€‚ 2. åœ¨ç»“å±€æ•°æ®ï¼ˆID: ieu-a-26ï¼‰ä¸­æå–è¿™äº› SNP çš„ç»Ÿè®¡é‡ã€‚ 3. å¦‚æœæ‰¾ä¸åˆ°æŸäº› SNPï¼Œå¯èƒ½éœ€è¦å¯»æ‰¾æ›¿ä»£ SNPï¼ˆProxyï¼‰ï¼Œæˆ–è€…ç›´æ¥ä¸¢å¼ƒã€‚\n# æå–ç»“å±€æ•°æ®\nt2d_outcome &lt;- extract_outcome_data(\n    snps = bmi_pd$SNP,       # ä½¿ç”¨æš´éœ²æ•°æ®ä¸­çš„ SNP\n    outcomes = \"ieu-a-26\"    # ç»“å±€æ•°æ®çš„ID\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å­Ÿå¾·å°”éšæœºåŒ–"
    ]
  },
  {
    "objectID": "1058-mendelian-randomization.html#æ­¥éª¤ä¸‰æ•°æ®åè°ƒ-harmonise-data",
    "href": "1058-mendelian-randomization.html#æ­¥éª¤ä¸‰æ•°æ®åè°ƒ-harmonise-data",
    "title": "å­Ÿå¾·å°”éšæœºåŒ– (Mendelian Randomization) æ•™ç¨‹",
    "section": "æ­¥éª¤ä¸‰ï¼šæ•°æ®åè°ƒ (Harmonise Data)",
    "text": "æ­¥éª¤ä¸‰ï¼šæ•°æ®åè°ƒ (Harmonise Data)\nè¿™æ˜¯æå…¶å…³é”®çš„ä¸€æ­¥ã€‚å› ä¸ºæš´éœ²å’Œç»“å±€çš„ GWAS å¯èƒ½å‚è€ƒäº†ä¸åŒçš„ç­‰ä½åŸºå› æ–¹å‘ã€‚ ä¾‹å¦‚ï¼š * æš´éœ²ç ”ç©¶ä¸­ï¼Œrs123 çš„æ•ˆåº”ç­‰ä½åŸºå› æ˜¯ Aï¼ˆå¢åŠ BMIï¼‰ã€‚ * ç»“å±€ç ”ç©¶ä¸­ï¼Œrs123 çš„æ•ˆåº”ç­‰ä½åŸºå› æ˜¯ Gï¼ˆé™ä½ç³–å°¿ç—…é£é™©ï¼‰ã€‚\nå¦‚æœä¸ç»Ÿä¸€æ–¹å‘ï¼Œæˆ‘ä»¬å°±ä¼šå¾—å‡ºé”™è¯¯çš„ç›¸åç»“è®ºã€‚harmonise_data å‡½æ•°ä¼šè‡ªåŠ¨å¤„ç†è¿™äº›æ­£è´Ÿç¿»è½¬ï¼Œç¡®ä¿æ‰€æœ‰æ•ˆåº”éƒ½æŒ‡å‘åŒä¸€ä¸ªæ–¹å‘ã€‚\n# åè°ƒæ•°æ®\ndat &lt;- harmonise_data(\n    exposure_dat = bmi_pd, \n    outcome_dat = t2d_outcome\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å­Ÿå¾·å°”éšæœºåŒ–"
    ]
  },
  {
    "objectID": "1058-mendelian-randomization.html#æ­¥éª¤å››è¿›è¡Œ-mr-åˆ†æ-main-analysis",
    "href": "1058-mendelian-randomization.html#æ­¥éª¤å››è¿›è¡Œ-mr-åˆ†æ-main-analysis",
    "title": "å­Ÿå¾·å°”éšæœºåŒ– (Mendelian Randomization) æ•™ç¨‹",
    "section": "æ­¥éª¤å››ï¼šè¿›è¡Œ MR åˆ†æ (Main Analysis)",
    "text": "æ­¥éª¤å››ï¼šè¿›è¡Œ MR åˆ†æ (Main Analysis)\nç°åœ¨æ•°æ®å‡†å¤‡å°±ç»ªï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œæ ¸å¿ƒçš„å› æœæ¨æ–­äº†ã€‚æœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯ é€†æ–¹å·®åŠ æƒæ³• (Inverse Variance Weighted, IVW)ã€‚\n\nIVW: å‡è®¾æ‰€æœ‰ SNP éƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œå°†æ¯ä¸ª SNP çš„ä¼°ç®—ç»“æœåŠ æƒå¹³å‡ã€‚è¿™æ˜¯æœ€ä¸»è¦çš„å‚è€ƒç»“æœã€‚\nMR-Egger: å…è®¸ SNP å­˜åœ¨å¤šæ•ˆæ€§ï¼ˆå³æˆªè·ä¸ä¸º0ï¼‰ï¼Œå°½ç®¡ç»Ÿè®¡æ•ˆåŠ›è¾ƒä½ï¼Œä½†è¿™æ˜¯ä¸€ç§ç¨³å¥æ€§æ£€éªŒã€‚\nWeighted Median: åªè¦æœ‰ä¸€åŠä»¥ä¸Šçš„æƒé‡æ¥è‡ªæœ‰æ•ˆ SNPï¼Œç»“æœå°±æ˜¯å¯é çš„ã€‚\n\n# è¿è¡Œå¤šç§ MR æ–¹æ³•\nres &lt;- mr(dat)\n\n# æ•´ç†ç»“æœï¼Œè®¡ç®— OR å€¼\n# ä¸»è¦å…³æ³¨ method, nsnp (SNPæ•°), pval, b (å›å½’ç³»æ•°)\nres_table &lt;- generate_odds_ratios(res)\nprint(res_table)\n\nç»“æœè§£è¯»æŒ‡å—\n\nb (beta): æš´éœ²æ”¹å˜ä¸€ä¸ªå•ä½ï¼Œç»“å±€æ”¹å˜å¤šå°‘ï¼ˆå¯¹æ•°æ¯”å€¼æ¯”ï¼‰ã€‚\nOR (Odds Ratio): exp(b)ã€‚å¦‚æœ OR = 1.20ï¼Œè¯´æ˜ BMI æ¯å¢åŠ ä¸€ä¸ªå•ä½ï¼ˆæˆ–æ ‡å‡†å·®ï¼‰ï¼Œç³–å°¿ç—…é£é™©å¢åŠ  20%ã€‚\npval: P &lt; 0.05 é€šå¸¸è®¤ä¸ºå…·æœ‰ç»Ÿè®¡å­¦æ„ä¹‰ã€‚\n\nç»“è®ºåˆ¤å®šï¼šå¦‚æœ IVW æ–¹æ³•çš„ P &lt; 0.05ï¼Œä¸”æ–¹å‘ä¸å…¶ä»–æ–¹æ³•ï¼ˆå¦‚ Weighted Medianï¼‰ä¸€è‡´ï¼Œæˆ‘ä»¬å¯ä»¥åˆæ­¥è®¤ä¸ºå­˜åœ¨å› æœå…³ç³»ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å­Ÿå¾·å°”éšæœºåŒ–"
    ]
  },
  {
    "objectID": "1058-mendelian-randomization.html#æ­¥éª¤äº”æ•æ„Ÿæ€§åˆ†æ-sensitivity-analysis",
    "href": "1058-mendelian-randomization.html#æ­¥éª¤äº”æ•æ„Ÿæ€§åˆ†æ-sensitivity-analysis",
    "title": "å­Ÿå¾·å°”éšæœºåŒ– (Mendelian Randomization) æ•™ç¨‹",
    "section": "æ­¥éª¤äº”ï¼šæ•æ„Ÿæ€§åˆ†æ (Sensitivity Analysis)",
    "text": "æ­¥éª¤äº”ï¼šæ•æ„Ÿæ€§åˆ†æ (Sensitivity Analysis)\nåšå®Œä¸»è¦åˆ†æå¹¶æœªç»“æŸï¼Œå¿…é¡»è¿›è¡Œâ€ä½“æ£€â€ï¼Œç¡®ä¿ç»“æœä¸æ˜¯ç”±åå€šå¯¼è‡´çš„ã€‚\n\n1. å¼‚è´¨æ€§æ£€éªŒ (Heterogeneity Test)\næ£€æŸ¥è¿™äº› SNP ç»™å‡ºçš„å› æœä¼°è®¡æ˜¯å¦å·®å¼‚å¾ˆå¤§ã€‚å¦‚æœå¼‚è´¨æ€§æ˜¾è‘—ï¼ˆQ æ£€éªŒ P &lt; 0.05ï¼‰ï¼Œè¯´æ˜å¯èƒ½å­˜åœ¨ä¸å¯é çš„ SNP æˆ–å¤šæ•ˆæ€§ã€‚\nmr_heterogeneity(dat)\n\n\n2. æ°´å¹³å¤šæ•ˆæ€§æ£€éªŒ (Pleiotropy Test)\nä¸»è¦çœ‹ MR-Egger çš„æˆªè·é¡¹ (intercept)ã€‚ * å¦‚æœæˆªè·é¡¹æ˜¾è‘—ä¸ä¸º 0 (P &lt; 0.05)ï¼Œè¯´æ˜å­˜åœ¨å®šå‘æ°´å¹³å¤šæ•ˆæ€§ï¼ŒIVW ç»“æœå¯èƒ½ä¸å¯é ã€‚ * å¦‚æœæˆªè·é¡¹æ¥è¿‘ 0 ä¸” P &gt; 0.05ï¼Œè¯´æ˜ä¸»è¦ç»“æœæ¯”è¾ƒç¨³å¥ã€‚\nmr_pleiotropy_test(dat)\n\n\n3. ç•™ä¸€æ³• (Leave-one-out Analysis)\nä¾æ¬¡å»æ‰æ¯ä¸€ä¸ª SNPï¼Œé‡æ–°è®¡ç®— MR ç»“æœã€‚å¦‚æœå»æ‰æŸä¸ª SNP åç»“æœå‘ç”Ÿå‰§çƒˆå˜åŒ–ï¼Œè¯´æ˜è¯¥ SNP æ˜¯â€æ£ä¹±åˆ†å­â€ï¼ˆç¦»ç¾¤å€¼ï¼‰ï¼Œåˆ†æç»“æœä¸ç¨³å®šã€‚\nres_loo &lt;- mr_leaveoneout(dat)\nmr_leaveoneout_plot(res_loo)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å­Ÿå¾·å°”éšæœºåŒ–"
    ]
  },
  {
    "objectID": "1056-dag.html",
    "href": "1056-dag.html",
    "title": "DAG å› æœå›¾ä¸æ··æ‚æ§åˆ¶",
    "section": "",
    "text": "DAGï¼ˆDirected Acyclic Graphï¼Œæœ‰å‘æ— ç¯å›¾ï¼‰ æ˜¯è¡¨ç¤ºå˜é‡é—´å› æœå…³ç³»çš„å›¾å½¢å·¥å…·ã€‚åœ¨æµè¡Œç—…å­¦å’Œå› æœæ¨æ–­ä¸­ï¼ŒDAG ç”¨äºï¼š\n\næ¸…æ™°è¡¨è¾¾å› æœå‡è®¾\nè¯†åˆ«æ··æ‚å› ç´ ã€ä¸­ä»‹å˜é‡ã€ç¢°æ’å› ç´ \nç¡®å®šéœ€è¦è°ƒæ•´çš„æœ€å°å˜é‡é›†\nå‘ç°æ½œåœ¨çš„åå€šæ¥æº\n\n\n\n\n\n\nä¼ ç»Ÿæ–¹æ³•\nDAGæ–¹æ³•\n\n\n\n\nåŸºäºç»Ÿè®¡å­¦æ˜¾è‘—æ€§é€‰æ‹©åå˜é‡\nåŸºäºå› æœç†è®ºé€‰æ‹©åå˜é‡\n\n\nå¯èƒ½è¿‡åº¦è°ƒæ•´æˆ–è°ƒæ•´ä¸è¶³\nç²¾ç¡®è¯†åˆ«æœ€å°å……åˆ†è°ƒæ•´é›†\n\n\néš¾ä»¥è¯†åˆ«ç¢°æ’åå€š\næ˜ç¡®é¿å…è°ƒæ•´ç¢°æ’å› ç´ \n\n\nä¸»è§‚æ€§å¼º\nå‡è®¾é€æ˜å¯è®¨è®º\n\n\n\n\nJAMAã€BMJã€Lancet ç­‰é«˜æ°´å¹³æœŸåˆŠè¶Šæ¥è¶Šè¦æ±‚æŠ¥å‘Šç ”ç©¶çš„å› æœå‡è®¾DAG",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "DAG å› æœå›¾"
    ]
  },
  {
    "objectID": "1056-dag.html#ä»€ä¹ˆæ˜¯dag",
    "href": "1056-dag.html#ä»€ä¹ˆæ˜¯dag",
    "title": "DAG å› æœå›¾ä¸æ··æ‚æ§åˆ¶",
    "section": "",
    "text": "DAGï¼ˆDirected Acyclic Graphï¼Œæœ‰å‘æ— ç¯å›¾ï¼‰ æ˜¯è¡¨ç¤ºå˜é‡é—´å› æœå…³ç³»çš„å›¾å½¢å·¥å…·ã€‚åœ¨æµè¡Œç—…å­¦å’Œå› æœæ¨æ–­ä¸­ï¼ŒDAG ç”¨äºï¼š\n\næ¸…æ™°è¡¨è¾¾å› æœå‡è®¾\nè¯†åˆ«æ··æ‚å› ç´ ã€ä¸­ä»‹å˜é‡ã€ç¢°æ’å› ç´ \nç¡®å®šéœ€è¦è°ƒæ•´çš„æœ€å°å˜é‡é›†\nå‘ç°æ½œåœ¨çš„åå€šæ¥æº\n\n\n\n\n\n\nä¼ ç»Ÿæ–¹æ³•\nDAGæ–¹æ³•\n\n\n\n\nåŸºäºç»Ÿè®¡å­¦æ˜¾è‘—æ€§é€‰æ‹©åå˜é‡\nåŸºäºå› æœç†è®ºé€‰æ‹©åå˜é‡\n\n\nå¯èƒ½è¿‡åº¦è°ƒæ•´æˆ–è°ƒæ•´ä¸è¶³\nç²¾ç¡®è¯†åˆ«æœ€å°å……åˆ†è°ƒæ•´é›†\n\n\néš¾ä»¥è¯†åˆ«ç¢°æ’åå€š\næ˜ç¡®é¿å…è°ƒæ•´ç¢°æ’å› ç´ \n\n\nä¸»è§‚æ€§å¼º\nå‡è®¾é€æ˜å¯è®¨è®º\n\n\n\n\nJAMAã€BMJã€Lancet ç­‰é«˜æ°´å¹³æœŸåˆŠè¶Šæ¥è¶Šè¦æ±‚æŠ¥å‘Šç ”ç©¶çš„å› æœå‡è®¾DAG",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "DAG å› æœå›¾"
    ]
  },
  {
    "objectID": "1056-dag.html#å®‰è£…ä¸åŠ è½½",
    "href": "1056-dag.html#å®‰è£…ä¸åŠ è½½",
    "title": "DAG å› æœå›¾ä¸æ··æ‚æ§åˆ¶",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\n# å®‰è£…å¿…è¦çš„åŒ…\n# install.packages(c(\"dagitty\", \"ggdag\"))\n\nlibrary(dagitty)\nlibrary(ggdag)\nlibrary(ggplot2)\nlibrary(dplyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "DAG å› æœå›¾"
    ]
  },
  {
    "objectID": "1056-dag.html#dagåŸºç¡€æ¦‚å¿µ",
    "href": "1056-dag.html#dagåŸºç¡€æ¦‚å¿µ",
    "title": "DAG å› æœå›¾ä¸æ··æ‚æ§åˆ¶",
    "section": "DAGåŸºç¡€æ¦‚å¿µ",
    "text": "DAGåŸºç¡€æ¦‚å¿µ\n\nèŠ‚ç‚¹ç±»å‹\n\n\n\n\n\n\n\n\n\n\n\n\nèŠ‚ç‚¹ç±»å‹\nå®šä¹‰\nç¤ºä¾‹\n\n\n\n\næš´éœ² (Exposure)\nç ”ç©¶çš„ä¸»è¦è‡ªå˜é‡\nå¸çƒŸ\n\n\nç»“å±€ (Outcome)\nç ”ç©¶çš„å› å˜é‡\nè‚ºç™Œ\n\n\næ··æ‚ (Confounder)\nåŒæ—¶å½±å“æš´éœ²å’Œç»“å±€çš„å˜é‡\nå¹´é¾„\n\n\nä¸­ä»‹ (Mediator)\næš´éœ²é€šè¿‡å®ƒå½±å“ç»“å±€çš„å˜é‡\nè‚ºåŠŸèƒ½\n\n\nç¢°æ’ (Collider)\nåŒæ—¶è¢«ä¸¤ä¸ªå˜é‡å½±å“çš„å˜é‡\nä½é™¢\n\n\n\n\n\nè·¯å¾„ç±»å‹\n\n# åˆ›å»ºåŒ…å«ä¸åŒè·¯å¾„çš„DAG\npath_dag &lt;- dagify(\n    Y ~ X + U,\n    X ~ U,\n    M ~ X,\n    Y ~ M,\n    labels = c(X = \"æš´éœ²\", Y = \"ç»“å±€\", U = \"æ··æ‚\", M = \"ä¸­ä»‹\"),\n    exposure = \"X\",\n    outcome = \"Y\"\n)\n\n# è¯†åˆ«æ‰€æœ‰è·¯å¾„\npaths(path_dag)\n\n$paths\n[1] \"X -&gt; M -&gt; Y\" \"X -&gt; Y\"      \"X &lt;- U -&gt; Y\"\n\n$open\n[1] TRUE TRUE TRUE",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "DAG å› æœå›¾"
    ]
  },
  {
    "objectID": "1056-dag.html#ä½¿ç”¨-dagitty-åˆ›å»ºdag",
    "href": "1056-dag.html#ä½¿ç”¨-dagitty-åˆ›å»ºdag",
    "title": "DAG å› æœå›¾ä¸æ··æ‚æ§åˆ¶",
    "section": "ä½¿ç”¨ dagitty åˆ›å»ºDAG",
    "text": "ä½¿ç”¨ dagitty åˆ›å»ºDAG\n\nåŸºç¡€è¯­æ³•\n\n# æ–¹æ³•1ï¼šä½¿ç”¨ dagify å‡½æ•°\ndag1 &lt;- dagify(\n    outcome ~ exposure + confounder,\n    exposure ~ confounder,\n    exposure = \"exposure\",\n    outcome = \"outcome\"\n)\n\n# æ–¹æ³•2ï¼šä½¿ç”¨ dagitty è¯­æ³•\ndag2 &lt;- dagitty(\"dag {\n  exposure -&gt; outcome\n  confounder -&gt; exposure\n  confounder -&gt; outcome\n}\")\n\n# æŸ¥çœ‹DAGç»“æ„\ndag1\n\ndag {\nconfounder\nexposure [exposure]\noutcome [outcome]\nconfounder -&gt; exposure\nconfounder -&gt; outcome\nexposure -&gt; outcome\n}\n\n\n\n\nå®é™…ç ”ç©¶æ¡ˆä¾‹\nåˆ›å»ºä¸€ä¸ªç ”ç©¶â€ä½“åŠ›æ´»åŠ¨ä¸å¿ƒè¡€ç®¡ç–¾ç—…â€å…³ç³»çš„DAGï¼š\n\ncvd_dag &lt;- dagify(\n    cvd ~ activity + age + bmi + smoking + ses + genetics,\n    activity ~ age + ses + bmi,\n    bmi ~ age + ses + genetics,\n    smoking ~ ses + age,\n    labels = c(\n        cvd = \"å¿ƒè¡€ç®¡ç–¾ç—…\",\n        activity = \"ä½“åŠ›æ´»åŠ¨\",\n        age = \"å¹´é¾„\",\n        bmi = \"BMI\",\n        smoking = \"å¸çƒŸ\",\n        ses = \"ç¤¾ä¼šç»æµåœ°ä½\",\n        genetics = \"é—ä¼ å› ç´ \"\n    ),\n    exposure = \"activity\",\n    outcome = \"cvd\"\n)\n\n# ç»‘åˆ¶DAG\nggdag(cvd_dag, text = FALSE, use_labels = \"label\") +\n    theme_dag() +\n    labs(title = \"ä½“åŠ›æ´»åŠ¨ä¸å¿ƒè¡€ç®¡ç–¾ç—…çš„å› æœå›¾\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "DAG å› æœå›¾"
    ]
  },
  {
    "objectID": "1056-dag.html#è¯†åˆ«æ··æ‚è·¯å¾„",
    "href": "1056-dag.html#è¯†åˆ«æ··æ‚è·¯å¾„",
    "title": "DAG å› æœå›¾ä¸æ··æ‚æ§åˆ¶",
    "section": "è¯†åˆ«æ··æ‚è·¯å¾„",
    "text": "è¯†åˆ«æ··æ‚è·¯å¾„\n\nåé—¨è·¯å¾„\nåé—¨è·¯å¾„æ˜¯ä»æš´éœ²åˆ°ç»“å±€çš„éå› æœè·¯å¾„ï¼ˆä»æš´éœ²çš„â€åé—¨â€å‡ºå‘ï¼‰ã€‚è¿™äº›è·¯å¾„ä¼šé€ æˆæ··æ‚åå€šã€‚\n\n# è¯†åˆ«åé—¨è·¯å¾„\nggdag_paths(cvd_dag) +\n    theme_dag() +\n    labs(title = \"æš´éœ²åˆ°ç»“å±€çš„æ‰€æœ‰è·¯å¾„\")\n\n\n\n\n\n\n\n\n\n# æŸ¥çœ‹å…·ä½“è·¯å¾„\npaths(cvd_dag)\n\n$paths\n [1] \"activity -&gt; cvd\"                                            \n [2] \"activity &lt;- age -&gt; bmi -&gt; cvd\"                              \n [3] \"activity &lt;- age -&gt; bmi &lt;- genetics -&gt; cvd\"                  \n [4] \"activity &lt;- age -&gt; bmi &lt;- ses -&gt; cvd\"                       \n [5] \"activity &lt;- age -&gt; bmi &lt;- ses -&gt; smoking -&gt; cvd\"            \n [6] \"activity &lt;- age -&gt; cvd\"                                     \n [7] \"activity &lt;- age -&gt; smoking -&gt; cvd\"                          \n [8] \"activity &lt;- age -&gt; smoking &lt;- ses -&gt; bmi -&gt; cvd\"            \n [9] \"activity &lt;- age -&gt; smoking &lt;- ses -&gt; bmi &lt;- genetics -&gt; cvd\"\n[10] \"activity &lt;- age -&gt; smoking &lt;- ses -&gt; cvd\"                   \n[11] \"activity &lt;- bmi -&gt; cvd\"                                     \n[12] \"activity &lt;- bmi &lt;- age -&gt; cvd\"                              \n[13] \"activity &lt;- bmi &lt;- age -&gt; smoking -&gt; cvd\"                   \n[14] \"activity &lt;- bmi &lt;- age -&gt; smoking &lt;- ses -&gt; cvd\"            \n[15] \"activity &lt;- bmi &lt;- genetics -&gt; cvd\"                         \n[16] \"activity &lt;- bmi &lt;- ses -&gt; cvd\"                              \n[17] \"activity &lt;- bmi &lt;- ses -&gt; smoking -&gt; cvd\"                   \n[18] \"activity &lt;- bmi &lt;- ses -&gt; smoking &lt;- age -&gt; cvd\"            \n[19] \"activity &lt;- ses -&gt; bmi -&gt; cvd\"                              \n[20] \"activity &lt;- ses -&gt; bmi &lt;- age -&gt; cvd\"                       \n[21] \"activity &lt;- ses -&gt; bmi &lt;- age -&gt; smoking -&gt; cvd\"            \n[22] \"activity &lt;- ses -&gt; bmi &lt;- genetics -&gt; cvd\"                  \n[23] \"activity &lt;- ses -&gt; cvd\"                                     \n[24] \"activity &lt;- ses -&gt; smoking -&gt; cvd\"                          \n[25] \"activity &lt;- ses -&gt; smoking &lt;- age -&gt; bmi -&gt; cvd\"            \n[26] \"activity &lt;- ses -&gt; smoking &lt;- age -&gt; bmi &lt;- genetics -&gt; cvd\"\n[27] \"activity &lt;- ses -&gt; smoking &lt;- age -&gt; cvd\"                   \n\n$open\n [1]  TRUE  TRUE FALSE FALSE FALSE  TRUE  TRUE FALSE FALSE FALSE  TRUE  TRUE\n[13]  TRUE FALSE  TRUE  TRUE  TRUE FALSE  TRUE FALSE FALSE FALSE  TRUE  TRUE\n[25] FALSE FALSE FALSE\n\n\n\n\nè¯†åˆ«æ··æ‚å› ç´ \n\n# ç»˜åˆ¶æ··æ‚å› ç´ \nggdag_adjustment_set(cvd_dag, shadow = TRUE) +\n    theme_dag() +\n    labs(title = \"éœ€è¦è°ƒæ•´çš„æ··æ‚å› ç´ ï¼ˆè“è‰²ï¼‰\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "DAG å› æœå›¾"
    ]
  },
  {
    "objectID": "1056-dag.html#ç¡®å®šè°ƒæ•´é›†",
    "href": "1056-dag.html#ç¡®å®šè°ƒæ•´é›†",
    "title": "DAG å› æœå›¾ä¸æ··æ‚æ§åˆ¶",
    "section": "ç¡®å®šè°ƒæ•´é›†",
    "text": "ç¡®å®šè°ƒæ•´é›†\n\næœ€å°å……åˆ†è°ƒæ•´é›†\n\n# è®¡ç®—æœ€å°å……åˆ†è°ƒæ•´é›†\nadjustmentSets(cvd_dag, effect = \"total\")\n\n{ age, bmi, ses }\n\n\n\n# å¯è§†åŒ–è°ƒæ•´é›†\nggdag_adjustment_set(cvd_dag) +\n    theme_dag() +\n    scale_color_manual(values = c(\"#4f46e5\", \"#ef4444\")) +\n    labs(title = \"æœ€å°å……åˆ†è°ƒæ•´é›†\")\n\n\n\n\n\n\n\n\n\n\næ€»æ•ˆåº” vs ç›´æ¥æ•ˆåº”\n\n# æ€»æ•ˆåº”ï¼šactivity -&gt; cvd çš„æ‰€æœ‰è·¯å¾„\ntotal_adj &lt;- adjustmentSets(cvd_dag, effect = \"total\")\ncat(\"æ€»æ•ˆåº”è°ƒæ•´é›†:\\n\")\n\næ€»æ•ˆåº”è°ƒæ•´é›†:\n\nprint(total_adj)\n\n{ age, bmi, ses }\n\n# ç›´æ¥æ•ˆåº”ï¼šæ’é™¤ä¸­ä»‹è·¯å¾„\ndirect_adj &lt;- adjustmentSets(cvd_dag, effect = \"direct\")\ncat(\"\\nç›´æ¥æ•ˆåº”è°ƒæ•´é›†:\\n\")\n\n\nç›´æ¥æ•ˆåº”è°ƒæ•´é›†:\n\nprint(direct_adj)\n\n{ age, bmi, ses }",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "DAG å› æœå›¾"
    ]
  },
  {
    "objectID": "1056-dag.html#ç¢°æ’åå€š",
    "href": "1056-dag.html#ç¢°æ’åå€š",
    "title": "DAG å› æœå›¾ä¸æ··æ‚æ§åˆ¶",
    "section": "ç¢°æ’åå€š",
    "text": "ç¢°æ’åå€š\n\nä»€ä¹ˆæ˜¯ç¢°æ’\nå½“ä¸€ä¸ªå˜é‡åŒæ—¶è¢«ä¸¤ä¸ªå˜é‡å½±å“æ—¶ï¼Œå®ƒå°±æ˜¯ç¢°æ’å› ç´ ï¼ˆColliderï¼‰ã€‚è°ƒæ•´ç¢°æ’å› ç´ ä¼šæ‰“å¼€åŸæœ¬å…³é—­çš„è·¯å¾„ï¼Œé€ æˆåå€šã€‚\n\n# åˆ›å»ºåŒ…å«ç¢°æ’çš„DAG\ncollider_dag &lt;- dagify(\n    C ~ X + Y,\n    Y ~ X,\n    labels = c(X = \"æš´éœ²\", Y = \"ç»“å±€\", C = \"ç¢°æ’\"),\n    exposure = \"X\",\n    outcome = \"Y\"\n)\n\n# æ ‡è®°ç¢°æ’\nggdag_collider(collider_dag, text = FALSE, use_labels = \"label\") +\n    theme_dag() +\n    labs(title = \"ç¢°æ’å› ç´ ç¤ºä¾‹\")\n\n\n\n\n\n\n\n\n\n\nç»å…¸æ¡ˆä¾‹ï¼šå‡ºç”Ÿä½“é‡æ‚–è®º\n\n# å‡ºç”Ÿä½“é‡æ‚–è®º\nbirthweight_dag &lt;- dagify(\n    death ~ smoking + lowbw + defect,\n    lowbw ~ smoking + defect,\n    labels = c(\n        death = \"å©´å„¿æ­»äº¡\",\n        smoking = \"æ¯äº²å¸çƒŸ\",\n        lowbw = \"ä½å‡ºç”Ÿä½“é‡\",\n        defect = \"å…ˆå¤©ç¼ºé™·\"\n    ),\n    exposure = \"smoking\",\n    outcome = \"death\"\n)\n\nggdag(birthweight_dag, text = FALSE, use_labels = \"label\") +\n    theme_dag() +\n    labs(\n        title = \"å‡ºç”Ÿä½“é‡æ‚–è®º\",\n        subtitle = \"ä½å‡ºç”Ÿä½“é‡æ˜¯ç¢°æ’å› ç´ ï¼Œè°ƒæ•´åä¼šäº§ç”Ÿåå€š\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "DAG å› æœå›¾"
    ]
  },
  {
    "objectID": "1056-dag.html#d-åˆ†ç¦»è§„åˆ™",
    "href": "1056-dag.html#d-åˆ†ç¦»è§„åˆ™",
    "title": "DAG å› æœå›¾ä¸æ··æ‚æ§åˆ¶",
    "section": "d-åˆ†ç¦»è§„åˆ™",
    "text": "d-åˆ†ç¦»è§„åˆ™\nd-åˆ†ç¦»ï¼ˆd-separationï¼‰ æ˜¯åˆ¤æ–­ä¸¤å˜é‡åœ¨ç»™å®šæ¡ä»¶ä¸‹æ˜¯å¦ç‹¬ç«‹çš„è§„åˆ™ã€‚\n\nä¸‰æ¡åŸºæœ¬è§„åˆ™\n\n\n\nd-åˆ†ç¦»è§„åˆ™\n\n\nç»“æ„\nå½¢å¼\nè‡ªç„¶çŠ¶æ€\nè°ƒæ•´Bå\n\n\n\n\né“¾ (Chain)\nA â†’ B â†’ C\nå…³è”\nç‹¬ç«‹\n\n\nå‰ (Fork)\nA â† B â†’ C\nå…³è”\nç‹¬ç«‹\n\n\nç¢°æ’ (Inverted Fork)\nA â†’ B â† C\nç‹¬ç«‹\nå…³è”\n\n\n\n\n\n\n\næ£€éªŒd-åˆ†ç¦»\n\n# åˆ›å»ºæµ‹è¯•DAG\ntest_dag &lt;- dagitty(\"dag {\n  X -&gt; M -&gt; Y\n  X -&gt; Y\n  C -&gt; X\n  C -&gt; Y\n}\")\n\n# æ£€éªŒæ¡ä»¶ç‹¬ç«‹æ€§\nimpliedConditionalIndependencies(test_dag)\n\nC _||_ M | X",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "DAG å› æœå›¾"
    ]
  },
  {
    "objectID": "1056-dag.html#dagçš„éªŒè¯",
    "href": "1056-dag.html#dagçš„éªŒè¯",
    "title": "DAG å› æœå›¾ä¸æ··æ‚æ§åˆ¶",
    "section": "DAGçš„éªŒè¯",
    "text": "DAGçš„éªŒè¯\n\næ£€éªŒå¯æµ‹è¯•çš„è•´å«\nå¦‚æœDAGæ­£ç¡®ï¼ŒæŸäº›æ¡ä»¶ç‹¬ç«‹å…³ç³»åº”è¯¥åœ¨æ•°æ®ä¸­æˆç«‹ï¼š\n\n# æ¨¡æ‹Ÿæ•°æ®\nset.seed(42)\nn &lt;- 1000\nC &lt;- rnorm(n)\nX &lt;- 0.5 * C + rnorm(n)\nM &lt;- 0.7 * X + rnorm(n)\nY &lt;- 0.3 * X + 0.6 * M + 0.4 * C + rnorm(n)\n\nsim_data &lt;- data.frame(C, X, M, Y)\n\n# æ ¹æ®DAGï¼Œè°ƒæ•´Cåï¼ŒXå’ŒYåœ¨ç»™å®šMæ—¶åº”è¯¥æ¡ä»¶ç‹¬ç«‹\n# ç®€åŒ–æµ‹è¯•ï¼šåç›¸å…³åº”è¯¥æ¥è¿‘0\npartial_cor &lt;- cor(\n    residuals(lm(X ~ M + C, data = sim_data)),\n    residuals(lm(Y ~ M + C, data = sim_data))\n)\ncat(\"è°ƒæ•´Må’ŒCåï¼ŒXä¸Yçš„åç›¸å…³:\", round(partial_cor, 3), \"\\n\")\n\nè°ƒæ•´Må’ŒCåï¼ŒXä¸Yçš„åç›¸å…³: 0.298",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "DAG å› æœå›¾"
    ]
  },
  {
    "objectID": "1056-dag.html#è®ºæ–‡ä¸­çš„dagæŠ¥å‘Š",
    "href": "1056-dag.html#è®ºæ–‡ä¸­çš„dagæŠ¥å‘Š",
    "title": "DAG å› æœå›¾ä¸æ··æ‚æ§åˆ¶",
    "section": "è®ºæ–‡ä¸­çš„DAGæŠ¥å‘Š",
    "text": "è®ºæ–‡ä¸­çš„DAGæŠ¥å‘Š\n\næŠ¥å‘Šæ ¼å¼\n\n# åˆ›å»ºè®ºæ–‡çº§åˆ«çš„DAG\npublication_dag &lt;- dagify(\n    outcome ~ exposure + age + sex + ses + comorbidity,\n    exposure ~ age + sex + ses,\n    comorbidity ~ age + sex,\n    labels = c(\n        outcome = \"ä¸»è¦ç»“å±€\",\n        exposure = \"æš´éœ²å› ç´ \",\n        age = \"å¹´é¾„\",\n        sex = \"æ€§åˆ«\",\n        ses = \"ç¤¾ä¼šç»æµ\\nåœ°ä½\",\n        comorbidity = \"åˆå¹¶ç—‡\"\n    ),\n    exposure = \"exposure\",\n    outcome = \"outcome\"\n)\n\n# è®¾ç½®èŠ‚ç‚¹ä½ç½®ï¼ˆæ›´æ¸…æ™°çš„å¸ƒå±€ï¼‰\ncoords &lt;- list(\n    x = c(exposure = 0, outcome = 2, age = 0.5, sex = 1, ses = 1.5, comorbidity = 1),\n    y = c(exposure = 0, outcome = 0, age = 1, sex = 1, ses = 1, comorbidity = -1)\n)\n\nggdag(publication_dag, text = FALSE, use_labels = \"label\") +\n    theme_dag_blank() +\n    labs(\n        title = \"å›¾1. ç ”ç©¶å‡è®¾çš„æœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰\",\n        caption = \"èŠ‚ç‚¹è¡¨ç¤ºå˜é‡ï¼Œç®­å¤´è¡¨ç¤ºå‡è®¾çš„å› æœæ–¹å‘\"\n    ) +\n    theme(\n        plot.title = element_text(face = \"bold\", size = 14),\n        plot.caption = element_text(hjust = 0)\n    )\n\n\n\n\n\n\n\n\n\n\nDAGæŠ¥å‘Šçš„æ ‡å‡†è¯­è¨€\n\n\n\n**å› æœå‡è®¾**\n\nå›¾1å±•ç¤ºäº†æœ¬ç ”ç©¶å‡è®¾çš„å› æœå…³ç³»æœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰ã€‚åŸºäºå…ˆéªŒçŸ¥è¯†å’Œæ–‡çŒ®å›é¡¾ï¼Œ\næˆ‘ä»¬å‡è®¾å¹´é¾„ã€æ€§åˆ«å’Œç¤¾ä¼šç»æµåœ°ä½æ˜¯æš´éœ²å› ç´ å’Œä¸»è¦ç»“å±€ä¹‹é—´çš„æ··æ‚å› ç´ ã€‚\nåˆå¹¶ç—‡è¢«è®¤ä¸ºæ˜¯æš´éœ²é€šè¿‡å½±å“å¥åº·çŠ¶æ€åˆ°è¾¾ç»“å±€çš„ä¸­ä»‹å˜é‡ï¼Œå› æ­¤åœ¨ä¸»åˆ†æä¸­\næœªäºˆè°ƒæ•´ã€‚\n\næ ¹æ®åé—¨å‡†åˆ™ï¼Œæœ€å°å……åˆ†è°ƒæ•´é›†ä¸º{å¹´é¾„ï¼Œæ€§åˆ«ï¼Œç¤¾ä¼šç»æµåœ°ä½}ã€‚æ•æ„Ÿæ€§åˆ†æ\nä¸­ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥è°ƒæ•´åˆå¹¶ç—‡ä»¥ä¼°è®¡æš´éœ²çš„ç›´æ¥æ•ˆåº”ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "DAG å› æœå›¾"
    ]
  },
  {
    "objectID": "1056-dag.html#åœ¨çº¿å·¥å…·",
    "href": "1056-dag.html#åœ¨çº¿å·¥å…·",
    "title": "DAG å› æœå›¾ä¸æ··æ‚æ§åˆ¶",
    "section": "åœ¨çº¿å·¥å…·",
    "text": "åœ¨çº¿å·¥å…·\n\nDAGittyç½‘ç«™\nDAGitty æä¾›å¯è§†åŒ–çš„DAGç¼–è¾‘å™¨ï¼š\n\næ‹–æ‹½åˆ›å»ºèŠ‚ç‚¹\nè¿çº¿å®šä¹‰å› æœå…³ç³»\nè‡ªåŠ¨è®¡ç®—è°ƒæ•´é›†\nå¯¼å‡ºRä»£ç \n\n\n# ä»DAGittyç½‘ç«™å¯¼å…¥DAG\nonline_dag &lt;- downloadGraph(\"dagitty.net/mxXyzzy\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "DAG å› æœå›¾"
    ]
  },
  {
    "objectID": "1056-dag.html#å¸¸è§é”™è¯¯",
    "href": "1056-dag.html#å¸¸è§é”™è¯¯",
    "title": "DAG å› æœå›¾ä¸æ··æ‚æ§åˆ¶",
    "section": "å¸¸è§é”™è¯¯",
    "text": "å¸¸è§é”™è¯¯\n\n1. è°ƒæ•´ä¸­ä»‹å˜é‡\n\n# é”™è¯¯ç¤ºä¾‹ï¼šæƒ³ä¼°è®¡æ€»æ•ˆåº”ä½†è°ƒæ•´äº†ä¸­ä»‹\nbad_adjustment &lt;- dagify(\n    Y ~ X + M,\n    M ~ X,\n    exposure = \"X\",\n    outcome = \"Y\"\n)\n\n# å¦‚æœè°ƒæ•´Mï¼Œä¼šé˜»æ–­X-&gt;M-&gt;Yè·¯å¾„\nggdag_paths(bad_adjustment, adjust_for = \"M\") +\n    theme_dag() +\n    labs(title = \"è­¦å‘Šï¼šè°ƒæ•´ä¸­ä»‹å˜é‡ä¼šé˜»æ–­å› æœè·¯å¾„\")\n\n\n\n\n\n\n\n\n\n\n2. è°ƒæ•´ç¢°æ’å› ç´ \n\n# å¼€æ”¾æœ¬åº”å…³é—­çš„å…³è”\nggdag_dseparated(collider_dag, controlling_for = \"C\") +\n    theme_dag() +\n    labs(title = \"è­¦å‘Šï¼šè°ƒæ•´ç¢°æ’å› ç´ æ‰“å¼€äº†åå€šè·¯å¾„\")\n\n\n\n\n\n\n\n\n\n\n3. é€‰æ‹©åå€š\nå½“æ ·æœ¬é€‰æ‹©ä¸æš´éœ²å’Œç»“å±€éƒ½ç›¸å…³æ—¶ï¼Œä¼šäº§ç”Ÿé€‰æ‹©åå€šï¼š\n\nselection_dag &lt;- dagify(\n    S ~ X + Y,\n    Y ~ X,\n    labels = c(X = \"æš´éœ²\", Y = \"ç»“å±€\", S = \"é€‰æ‹©å…¥ç»„\"),\n    exposure = \"X\",\n    outcome = \"Y\"\n)\n\nggdag(selection_dag, text = FALSE, use_labels = \"label\") +\n    theme_dag() +\n    labs(\n        title = \"é€‰æ‹©åå€š\",\n        subtitle = \"å¦‚æœåªåˆ†æS=1çš„äººç¾¤ï¼Œç›¸å½“äºè°ƒæ•´äº†ç¢°æ’å› ç´ \"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "DAG å› æœå›¾"
    ]
  },
  {
    "objectID": "1056-dag.html#æ€»ç»“",
    "href": "1056-dag.html#æ€»ç»“",
    "title": "DAG å› æœå›¾ä¸æ··æ‚æ§åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nä»»åŠ¡\nå‡½æ•°/æ–¹æ³•\n\n\n\n\nåˆ›å»ºDAG\ndagify() æˆ– dagitty()\n\n\nå¯è§†åŒ–\nggdag()\n\n\nè¯†åˆ«è°ƒæ•´é›†\nadjustmentSets()\n\n\nè¯†åˆ«è·¯å¾„\npaths()\n\n\næ£€éªŒd-åˆ†ç¦»\nimpliedConditionalIndependencies()\n\n\nè¯†åˆ«ç¢°æ’\nggdag_collider()\n\n\n\n\næ¨èèµ„æº\n\nDAGitty åœ¨çº¿å·¥å…·\nggdag æ–‡æ¡£\nHernÃ¡n & Robinsã€Šå› æœæ¨æ–­ã€‹\nGreenland et al.Â (1999) Epidemiology - DAGåŸºç¡€è®ºæ–‡",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "DAG å› æœå›¾"
    ]
  },
  {
    "objectID": "1054-subgroup.html",
    "href": "1054-subgroup.html",
    "title": "äºšç»„åˆ†æä¸äº¤äº’ä½œç”¨æ£€éªŒ",
    "section": "",
    "text": "äºšç»„åˆ†æï¼ˆSubgroup Analysisï¼‰æ˜¯ä¸´åºŠç ”ç©¶ä¸­è¯„ä¼°æ²»ç–—æ•ˆæœå¼‚è´¨æ€§çš„é‡è¦æ–¹æ³•ã€‚é€šè¿‡æ¢ç´¢ä¸åŒäººç¾¤ç‰¹å¾ä¸‹çš„æ²»ç–—æ•ˆæœå·®å¼‚ï¼Œå¯ä»¥ä¸ºä¸ªä½“åŒ–æ²»ç–—æä¾›ä¾æ®ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "äºšç»„åˆ†æä¸äº¤äº’ä½œç”¨"
    ]
  },
  {
    "objectID": "1054-subgroup.html#ä»€ä¹ˆæ˜¯äºšç»„åˆ†æ",
    "href": "1054-subgroup.html#ä»€ä¹ˆæ˜¯äºšç»„åˆ†æ",
    "title": "äºšç»„åˆ†æä¸äº¤äº’ä½œç”¨æ£€éªŒ",
    "section": "ä»€ä¹ˆæ˜¯äºšç»„åˆ†æï¼Ÿ",
    "text": "ä»€ä¹ˆæ˜¯äºšç»„åˆ†æï¼Ÿ\n\nå®šä¹‰ä¸ç›®çš„\näºšç»„åˆ†ææ˜¯å°†ç ”ç©¶äººç¾¤æŒ‰æŸäº›ç‰¹å¾ï¼ˆå¦‚å¹´é¾„ã€æ€§åˆ«ã€ç–¾ç—…ä¸¥é‡ç¨‹åº¦ï¼‰åˆ†å±‚ï¼Œåˆ†åˆ«è¯„ä¼°å„äºšç»„ä¸­å¹²é¢„çš„æ•ˆæœã€‚\nä¸»è¦ç›®çš„ï¼š 1. æ¢ç´¢æ•ˆæœä¿®é¥°ï¼šæŸäº›äººç¾¤æ˜¯å¦è·ç›Šæ›´å¤š/æ›´å°‘ï¼Ÿ 2. éªŒè¯ç»“æœä¸€è‡´æ€§ï¼šä¸»è¦ç»“æœæ˜¯å¦åœ¨å„äºšç»„ä¸­ä¸€è‡´ï¼Ÿ 3. ç”Ÿæˆå‡è®¾ï¼šä¸ºåç»­ç ”ç©¶æä¾›æ–¹å‘ 4. æŒ‡å¯¼ä¸´åºŠå†³ç­–ï¼šä¸ªä½“åŒ–æ²»ç–—\n\n\näºšç»„åˆ†æ vs äº¤äº’ä½œç”¨\n\n\n\næ¦‚å¿µ\nå«ä¹‰\næ£€éªŒæ–¹æ³•\n\n\n\n\näºšç»„æ•ˆåº”\nå„äºšç»„å†…çš„æ²»ç–—æ•ˆæœ\nåˆ†å±‚åˆ†æ\n\n\näº¤äº’ä½œç”¨\näºšç»„é—´æ•ˆæœå·®å¼‚æ˜¯å¦æ˜¾è‘—\näº¤äº’é¡¹æ£€éªŒ\n\n\n\n\nâš ï¸ å…³é”®ç‚¹ï¼šä»…å½“äº¤äº’ä½œç”¨På€¼ &lt; 0.05ï¼ˆæˆ–é¢„è®¾é˜ˆå€¼ï¼‰æ—¶ï¼Œæ‰èƒ½è®¤ä¸ºäºšç»„é—´å­˜åœ¨çœŸæ­£çš„æ•ˆæœä¿®é¥°ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "äºšç»„åˆ†æä¸äº¤äº’ä½œç”¨"
    ]
  },
  {
    "objectID": "1054-subgroup.html#råŒ…å®‰è£…",
    "href": "1054-subgroup.html#råŒ…å®‰è£…",
    "title": "äºšç»„åˆ†æä¸äº¤äº’ä½œç”¨æ£€éªŒ",
    "section": "RåŒ…å®‰è£…",
    "text": "RåŒ…å®‰è£…\n\n# å®‰è£…å¿…è¦åŒ…\npackages &lt;- c(\"survival\", \"tidyverse\", \"broom\", \"gtsummary\")\n\nfor (pkg in packages) {\n    if (!require(pkg, character.only = TRUE, quietly = TRUE)) {\n        install.packages(pkg)\n        library(pkg, character.only = TRUE)\n    }\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "äºšç»„åˆ†æä¸äº¤äº’ä½œç”¨"
    ]
  },
  {
    "objectID": "1054-subgroup.html#æ•°æ®å‡†å¤‡",
    "href": "1054-subgroup.html#æ•°æ®å‡†å¤‡",
    "title": "äºšç»„åˆ†æä¸äº¤äº’ä½œç”¨æ£€éªŒ",
    "section": "æ•°æ®å‡†å¤‡",
    "text": "æ•°æ®å‡†å¤‡\n\nlibrary(tidyverse)\nlibrary(survival)\n\n# ä½¿ç”¨gtsummaryçš„trialæ•°æ®\ndata(trial, package = \"gtsummary\")\n\n# æŸ¥çœ‹æ•°æ®\nhead(trial)\n\n# A tibble: 6 Ã— 8\n  trt      age marker stage grade response death ttdeath\n  &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;    &lt;int&gt; &lt;int&gt;   &lt;dbl&gt;\n1 Drug A    23  0.16  T1    II           0     0    24  \n2 Drug B     9  1.11  T2    I            1     0    24  \n3 Drug A    31  0.277 T1    II           0     0    24  \n4 Drug A    NA  2.07  T3    III          1     1    17.6\n5 Drug A    51  2.77  T4    III          1     1    16.4\n6 Drug B    39  0.613 T4    I            0     1    15.6\n\n# åˆ›å»ºäºšç»„å˜é‡\ntrial &lt;- trial %&gt;%\n    mutate(\n        age_group = ifelse(age &gt; 60, \"&gt;60å²\", \"â‰¤60å²\"),\n        marker_high = ifelse(marker &gt; median(marker, na.rm = TRUE), \"é«˜è¡¨è¾¾\", \"ä½è¡¨è¾¾\")\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "äºšç»„åˆ†æä¸äº¤äº’ä½œç”¨"
    ]
  },
  {
    "objectID": "1054-subgroup.html#åŸºæœ¬äºšç»„åˆ†æ",
    "href": "1054-subgroup.html#åŸºæœ¬äºšç»„åˆ†æ",
    "title": "äºšç»„åˆ†æä¸äº¤äº’ä½œç”¨æ£€éªŒ",
    "section": "åŸºæœ¬äºšç»„åˆ†æ",
    "text": "åŸºæœ¬äºšç»„åˆ†æ\n\nè®¡ç®—å„äºšç»„OR\n\nlibrary(broom)\n\n# å‡½æ•°ï¼šè®¡ç®—äºšç»„å†…çš„OR\ncalc_subgroup_or &lt;- function(data, subgroup_var, subgroup_level) {\n    subdata &lt;- data %&gt;%\n        filter(!!sym(subgroup_var) == subgroup_level, !is.na(response))\n\n    if (nrow(subdata) &lt; 10) {\n        return(NULL)\n    }\n\n    model &lt;- glm(response ~ trt, data = subdata, family = binomial)\n\n    result &lt;- tidy(model, conf.int = TRUE, exponentiate = TRUE) %&gt;%\n        filter(term == \"trtDrug B\") %&gt;%\n        mutate(\n            subgroup = subgroup_var,\n            level = subgroup_level,\n            n = nrow(subdata)\n        )\n\n    return(result)\n}\n\n# è®¡ç®—å¹´é¾„äºšç»„OR\nor_age_young &lt;- calc_subgroup_or(trial, \"age_group\", \"â‰¤60å²\")\nor_age_old &lt;- calc_subgroup_or(trial, \"age_group\", \"&gt;60å²\")\n\n# åˆå¹¶ç»“æœ\nage_results &lt;- bind_rows(or_age_young, or_age_old)\nprint(age_results %&gt;% select(subgroup, level, n, estimate, conf.low, conf.high, p.value))\n\n# A tibble: 2 Ã— 7\n  subgroup  level     n estimate conf.low conf.high p.value\n  &lt;chr&gt;     &lt;chr&gt; &lt;int&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;\n1 age_group â‰¤60å²   147     1.09    0.537      2.22   0.814\n2 age_group &gt;60å²    36     1.44    0.372      5.70   0.593\n\n\n\n\nè®¡ç®—è‚¿ç˜¤åˆ†çº§äºšç»„\n\n# è®¡ç®—gradeäºšç»„\ngrade_results &lt;- map_dfr(c(\"I\", \"II\", \"III\"), ~ calc_subgroup_or(trial, \"grade\", .x))\nprint(grade_results %&gt;% select(subgroup, level, n, estimate, conf.low, conf.high, p.value))\n\n# A tibble: 3 Ã— 7\n  subgroup level     n estimate conf.low conf.high p.value\n  &lt;chr&gt;    &lt;chr&gt; &lt;int&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;\n1 grade    I        67    2.31     0.814      6.89   0.121\n2 grade    II       63    1.88     0.633      5.90   0.263\n3 grade    III      63    0.418    0.138      1.21   0.112",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "äºšç»„åˆ†æä¸äº¤äº’ä½œç”¨"
    ]
  },
  {
    "objectID": "1054-subgroup.html#äº¤äº’ä½œç”¨æ£€éªŒ",
    "href": "1054-subgroup.html#äº¤äº’ä½œç”¨æ£€éªŒ",
    "title": "äºšç»„åˆ†æä¸äº¤äº’ä½œç”¨æ£€éªŒ",
    "section": "äº¤äº’ä½œç”¨æ£€éªŒ",
    "text": "äº¤äº’ä½œç”¨æ£€éªŒ\n\næ–¹æ³•1ï¼šäº¤äº’é¡¹æ³•\n\n# åœ¨æ¨¡å‹ä¸­åŠ å…¥äº¤äº’é¡¹\nmodel_interaction &lt;- glm(\n    response ~ trt * age_group + grade,\n    data = trial,\n    family = binomial\n)\n\nsummary(model_interaction)\n\n\nCall:\nglm(formula = response ~ trt * age_group + grade, family = binomial, \n    data = trial)\n\nCoefficients:\n                         Estimate Std. Error z value Pr(&gt;|z|)\n(Intercept)              -0.58495    0.51610  -1.133    0.257\ntrtDrug B                 0.36937    0.68887   0.536    0.592\nage_groupâ‰¤60å²           -0.27095    0.53938  -0.502    0.615\ngradeII                  -0.14682    0.39339  -0.373    0.709\ngradeIII                  0.02605    0.38346   0.068    0.946\ntrtDrug B:age_groupâ‰¤60å² -0.28933    0.77805  -0.372    0.710\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 228.58  on 182  degrees of freedom\nResidual deviance: 226.98  on 177  degrees of freedom\n  (å› ä¸ºä¸å­˜åœ¨ï¼Œ17ä¸ªè§‚å¯Ÿé‡è¢«åˆ é™¤äº†)\nAIC: 238.98\n\nNumber of Fisher Scoring iterations: 4\n\n# æå–äº¤äº’é¡¹på€¼\ninteraction_p &lt;- tidy(model_interaction) %&gt;%\n    filter(str_detect(term, \":\")) %&gt;%\n    select(term, estimate, p.value)\n\nprint(interaction_p)\n\n# A tibble: 1 Ã— 3\n  term                     estimate p.value\n  &lt;chr&gt;                       &lt;dbl&gt;   &lt;dbl&gt;\n1 trtDrug B:age_groupâ‰¤60å²   -0.289   0.710\n\n\n\n\næ–¹æ³•2ï¼šä¼¼ç„¶æ¯”æ£€éªŒ\n\n# æ— äº¤äº’æ¨¡å‹\nmodel_main &lt;- glm(\n    response ~ trt + age_group + grade,\n    data = trial,\n    family = binomial\n)\n\n# æœ‰äº¤äº’æ¨¡å‹\nmodel_inter &lt;- glm(\n    response ~ trt * age_group + grade,\n    data = trial,\n    family = binomial\n)\n\n# ä¼¼ç„¶æ¯”æ£€éªŒ\nlr_test &lt;- anova(model_main, model_inter, test = \"Chisq\")\nprint(lr_test)\n\nAnalysis of Deviance Table\n\nModel 1: response ~ trt + age_group + grade\nModel 2: response ~ trt * age_group + grade\n  Resid. Df Resid. Dev Df Deviance Pr(&gt;Chi)\n1       178     227.12                     \n2       177     226.98  1  0.13843   0.7099\n\ncat(\"\\näº¤äº’ä½œç”¨ På€¼:\", lr_test$`Pr(&gt;Chi)`[2], \"\\n\")\n\n\näº¤äº’ä½œç”¨ På€¼: 0.7098503 \n\n\n\n\nå¤šä¸ªäºšç»„å˜é‡çš„äº¤äº’æ£€éªŒ\n\n# æ£€éªŒå¤šä¸ªå˜é‡çš„äº¤äº’ä½œç”¨\ntest_interaction &lt;- function(data, outcome, treatment, subgroup) {\n    formula_main &lt;- as.formula(paste(outcome, \"~\", treatment, \"+\", subgroup))\n    formula_inter &lt;- as.formula(paste(outcome, \"~\", treatment, \"*\", subgroup))\n\n    model_main &lt;- glm(formula_main, data = data, family = binomial)\n    model_inter &lt;- glm(formula_inter, data = data, family = binomial)\n\n    lr &lt;- anova(model_main, model_inter, test = \"Chisq\")\n\n    return(data.frame(\n        subgroup = subgroup,\n        p_interaction = lr$`Pr(&gt;Chi)`[2]\n    ))\n}\n\n# æ£€éªŒæ‰€æœ‰äºšç»„çš„äº¤äº’ä½œç”¨\ninteraction_results &lt;- map_dfr(\n    c(\"age_group\", \"grade\", \"stage\"),\n    ~ test_interaction(trial, \"response\", \"trt\", .x)\n)\n\nprint(interaction_results)\n\n   subgroup p_interaction\n1 age_group    0.71610982\n2     grade    0.05115396\n3     stage    0.54983155",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "äºšç»„åˆ†æä¸äº¤äº’ä½œç”¨"
    ]
  },
  {
    "objectID": "1054-subgroup.html#ç®€å•æ£®æ—å›¾å¯è§†åŒ–",
    "href": "1054-subgroup.html#ç®€å•æ£®æ—å›¾å¯è§†åŒ–",
    "title": "äºšç»„åˆ†æä¸äº¤äº’ä½œç”¨æ£€éªŒ",
    "section": "ç®€å•æ£®æ—å›¾å¯è§†åŒ–",
    "text": "ç®€å•æ£®æ—å›¾å¯è§†åŒ–\n\n# åˆå¹¶æ‰€æœ‰äºšç»„ç»“æœ\nall_results &lt;- bind_rows(age_results, grade_results) %&gt;%\n    mutate(\n        label = paste(subgroup, level, sep = \": \"),\n        or_ci = sprintf(\"%.2f (%.2f-%.2f)\", estimate, conf.low, conf.high)\n    )\n\n# ä½¿ç”¨ggplot2ç»‘åˆ¶ç®€å•æ£®æ—å›¾\nggplot(all_results, aes(x = estimate, y = reorder(label, estimate))) +\n    geom_vline(xintercept = 1, linetype = \"dashed\", color = \"gray50\") +\n    geom_point(aes(size = n), color = \"#4f46e5\") +\n    geom_errorbarh(aes(xmin = conf.low, xmax = conf.high), height = 0.2, color = \"#4f46e5\") +\n    geom_text(aes(x = max(conf.high) * 1.2, label = or_ci), hjust = 0, size = 3) +\n    scale_x_log10() +\n    scale_size_continuous(range = c(3, 6)) +\n    labs(\n        title = \"äºšç»„åˆ†ææ£®æ—å›¾\",\n        subtitle = \"Drug B vs Drug A - æ²»ç–—ååº”\",\n        x = \"æ¯”å€¼æ¯” OR (95% CI)\",\n        y = NULL,\n        size = \"æ ·æœ¬é‡\"\n    ) +\n    theme_minimal() +\n    theme(\n        plot.title = element_text(face = \"bold\", size = 14),\n        legend.position = \"bottom\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "äºšç»„åˆ†æä¸äº¤äº’ä½œç”¨"
    ]
  },
  {
    "objectID": "1054-subgroup.html#ç”Ÿå­˜åˆ†æä¸­çš„äºšç»„åˆ†æ",
    "href": "1054-subgroup.html#ç”Ÿå­˜åˆ†æä¸­çš„äºšç»„åˆ†æ",
    "title": "äºšç»„åˆ†æä¸äº¤äº’ä½œç”¨æ£€éªŒ",
    "section": "ç”Ÿå­˜åˆ†æä¸­çš„äºšç»„åˆ†æ",
    "text": "ç”Ÿå­˜åˆ†æä¸­çš„äºšç»„åˆ†æ\n\n# Coxå›å½’äºšç»„åˆ†æ\ncalc_subgroup_hr &lt;- function(data, subgroup_var, subgroup_level) {\n    subdata &lt;- data %&gt;%\n        filter(!!sym(subgroup_var) == subgroup_level)\n\n    if (nrow(subdata) &lt; 10) {\n        return(NULL)\n    }\n\n    model &lt;- coxph(Surv(ttdeath, death) ~ trt, data = subdata)\n\n    result &lt;- tidy(model, conf.int = TRUE, exponentiate = TRUE) %&gt;%\n        mutate(\n            subgroup = subgroup_var,\n            level = subgroup_level,\n            n = nrow(subdata),\n            events = sum(subdata$death)\n        )\n\n    return(result)\n}\n\n# è®¡ç®—å¹´é¾„äºšç»„HR\nhr_age &lt;- map_dfr(c(\"â‰¤60å²\", \"&gt;60å²\"), ~ calc_subgroup_hr(trial, \"age_group\", .x))\nprint(hr_age %&gt;% select(subgroup, level, n, events, estimate, conf.low, conf.high))\n\n# A tibble: 2 Ã— 7\n  subgroup  level     n events estimate conf.low conf.high\n  &lt;chr&gt;     &lt;chr&gt; &lt;int&gt;  &lt;int&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n1 age_group â‰¤60å²   152     82     1.39    0.900      2.16\n2 age_group &gt;60å²    37     21     1.10    0.466      2.59\n\n# äº¤äº’ä½œç”¨æ£€éªŒï¼ˆCoxæ¨¡å‹ï¼‰\ncox_inter &lt;- coxph(Surv(ttdeath, death) ~ trt * age_group, data = trial)\nsummary(cox_inter)\n\nCall:\ncoxph(formula = Surv(ttdeath, death) ~ trt * age_group, data = trial)\n\n  n= 189, number of events= 103 \n   (å› ä¸ºä¸å­˜åœ¨ï¼Œ11ä¸ªè§‚å¯Ÿé‡è¢«åˆ é™¤äº†)\n\n                            coef exp(coef) se(coef)      z Pr(&gt;|z|)\ntrtDrug B                 0.1081    1.1141   0.4370  0.247    0.805\nage_groupâ‰¤60å²           -0.2449    0.7828   0.3457 -0.708    0.479\ntrtDrug B:age_groupâ‰¤60å²  0.2182    1.2439   0.4909  0.445    0.657\n\n                         exp(coef) exp(-coef) lower .95 upper .95\ntrtDrug B                   1.1141     0.8976    0.4731     2.624\nage_groupâ‰¤60å²              0.7828     1.2775    0.3975     1.541\ntrtDrug B:age_groupâ‰¤60å²    1.2439     0.8039    0.4753     3.255\n\nConcordance= 0.551  (se = 0.027 )\nLikelihood ratio test= 2.46  on 3 df,   p=0.5\nWald test            = 2.39  on 3 df,   p=0.5\nScore (logrank) test = 2.41  on 3 df,   p=0.5",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "äºšç»„åˆ†æä¸äº¤äº’ä½œç”¨"
    ]
  },
  {
    "objectID": "1054-subgroup.html#æ–¹æ³•è®ºæ³¨æ„äº‹é¡¹",
    "href": "1054-subgroup.html#æ–¹æ³•è®ºæ³¨æ„äº‹é¡¹",
    "title": "äºšç»„åˆ†æä¸äº¤äº’ä½œç”¨æ£€éªŒ",
    "section": "æ–¹æ³•è®ºæ³¨æ„äº‹é¡¹",
    "text": "æ–¹æ³•è®ºæ³¨æ„äº‹é¡¹\n\né¢„è®¾ vs æ¢ç´¢æ€§äºšç»„åˆ†æ\n\n\n\nç±»å‹\né¢„è®¾äºšç»„åˆ†æ\næ¢ç´¢æ€§äºšç»„åˆ†æ\n\n\n\n\næ—¶æœº\nç ”ç©¶è®¾è®¡é˜¶æ®µç¡®å®š\næ•°æ®åˆ†æé˜¶æ®µç¡®å®š\n\n\nè¯æ®ç­‰çº§\nè¾ƒé«˜\nè¾ƒä½\n\n\nå¤šé‡æ¯”è¾ƒæ ¡æ­£\nå¯èƒ½éœ€è¦\néœ€è¦è°¨æ…è§£è¯»\n\n\næŠ¥å‘Šè¦æ±‚\nFDA/EMAè¦æ±‚æŠ¥å‘Š\nåº”æ˜ç¡®æ ‡æ³¨ä¸ºæ¢ç´¢æ€§\n\n\n\n\n\né¿å…å¸¸è§é”™è¯¯\n\nä¸è¦è¿‡åº¦è§£è¯»äºšç»„å†…På€¼\n\näºšç»„å†…æ˜¾è‘— â‰  äºšç»„é—´æœ‰å·®å¼‚\nå¿…é¡»æ£€éªŒäº¤äº’ä½œç”¨\n\nè­¦æƒ•å¤šé‡æ¯”è¾ƒ\n\næ£€éªŒè¶Šå¤šï¼Œå‡é˜³æ€§è¶Šå¤š\nè€ƒè™‘ä½¿ç”¨Bonferroniæˆ–FDRæ ¡æ­£\n\nè€ƒè™‘ç»Ÿè®¡åŠŸæ•ˆ\n\näºšç»„æ ·æœ¬é‡å¯èƒ½ä¸è¶³\näº¤äº’ä½œç”¨æ£€éªŒéœ€è¦æ›´å¤§æ ·æœ¬\n\n\n\n# å¤šé‡æ¯”è¾ƒæ ¡æ­£ç¤ºä¾‹\ninteraction_results &lt;- interaction_results %&gt;%\n    mutate(\n        p_bonferroni = p.adjust(p_interaction, method = \"bonferroni\"),\n        p_fdr = p.adjust(p_interaction, method = \"fdr\")\n    )\n\nprint(interaction_results)\n\n   subgroup p_interaction p_bonferroni     p_fdr\n1 age_group    0.71610982    1.0000000 0.7161098\n2     grade    0.05115396    0.1534619 0.1534619\n3     stage    0.54983155    1.0000000 0.7161098",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "äºšç»„åˆ†æä¸äº¤äº’ä½œç”¨"
    ]
  },
  {
    "objectID": "1054-subgroup.html#æŠ¥å‘Šæ’°å†™æ¨¡æ¿",
    "href": "1054-subgroup.html#æŠ¥å‘Šæ’°å†™æ¨¡æ¿",
    "title": "äºšç»„åˆ†æä¸äº¤äº’ä½œç”¨æ£€éªŒ",
    "section": "æŠ¥å‘Šæ’°å†™æ¨¡æ¿",
    "text": "æŠ¥å‘Šæ’°å†™æ¨¡æ¿\n\næ–¹æ³•éƒ¨åˆ†\n\nè¿›è¡Œé¢„è®¾çš„äºšç»„åˆ†æä»¥è¯„ä¼°æ²»ç–—æ•ˆæœåœ¨ä¸åŒäººç¾¤ç‰¹å¾ä¸­çš„ä¸€è‡´æ€§ã€‚äºšç»„å˜é‡åŒ…æ‹¬å¹´é¾„ï¼ˆâ‰¤60å² vs &gt;60å²ï¼‰ã€è‚¿ç˜¤åˆ†çº§ï¼ˆI/II/IIIçº§ï¼‰å’Œä¸´åºŠåˆ†æœŸï¼ˆT1-T4ï¼‰ã€‚ä½¿ç”¨Logisticå›å½’è®¡ç®—å„äºšç»„å†…çš„æ¯”å€¼æ¯”ï¼ˆORï¼‰åŠ95%ç½®ä¿¡åŒºé—´ã€‚é€šè¿‡åœ¨æ¨¡å‹ä¸­åŠ å…¥æ²»ç–—Ã—äºšç»„å˜é‡çš„äº¤äº’é¡¹æ£€éªŒæ•ˆæœä¿®é¥°ï¼ˆäº¤äº’ä½œç”¨På€¼ï¼‰ï¼Œäº¤äº’ä½œç”¨çš„æ˜¾è‘—æ€§æ°´å¹³è®¾ä¸ºÎ± = 0.10ã€‚ç»“æœä»¥æ£®æ—å›¾å½¢å¼å‘ˆç°ã€‚\n\n\n\nç»“æœéƒ¨åˆ†\n\näºšç»„åˆ†ææ˜¾ç¤ºï¼Œæ²»ç–—æ•ˆæœåœ¨å„é¢„è®¾äºšç»„ä¸­æ€»ä½“ä¸€è‡´ï¼ˆå›¾Xï¼‰ã€‚å¹´é¾„äºšç»„ä¸­ï¼Œâ‰¤60å²æ‚£è€…OR = 1.XX (95% CI: X.XX-X.XX)ï¼Œ&gt;60å²æ‚£è€…OR = 1.XX (95% CI: X.XX-X.XX)ï¼Œäº¤äº’ä½œç”¨P = 0.XXã€‚æ‰€æœ‰äºšç»„çš„äº¤äº’ä½œç”¨æ£€éªŒå‡æœªè¾¾åˆ°ç»Ÿè®¡å­¦æ˜¾è‘—æ€§ï¼ˆPäº¤äº’å‡ &gt; 0.10ï¼‰ï¼Œæç¤ºæ²»ç–—æ•ˆæœæœªå—è¿™äº›å› ç´ çš„æ˜¾è‘—ä¿®é¥°ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "äºšç»„åˆ†æä¸äº¤äº’ä½œç”¨"
    ]
  },
  {
    "objectID": "1054-subgroup.html#æ€»ç»“",
    "href": "1054-subgroup.html#æ€»ç»“",
    "title": "äºšç»„åˆ†æä¸äº¤äº’ä½œç”¨æ£€éªŒ",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nè¦ç‚¹\nè¯´æ˜\n\n\n\n\næ ¸å¿ƒ\näºšç»„æ•ˆæœ + äº¤äº’ä½œç”¨æ£€éªŒ\n\n\näº¤äº’På€¼\nåˆ¤æ–­äºšç»„å·®å¼‚æ˜¯å¦çœŸå®çš„å…³é”®\n\n\næ£®æ—å›¾\næ ‡å‡†å¯è§†åŒ–æ–¹å¼\n\n\né¢„è®¾åˆ†æ\nè¯æ®ç­‰çº§æ›´é«˜\n\n\nå¤šé‡æ¯”è¾ƒ\næ³¨æ„å‡é˜³æ€§æ§åˆ¶\n\n\næ ·æœ¬é‡\nå¯¹äº¤äº’ä½œç”¨æ£€éªŒå°¤ä¸ºé‡è¦",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "äºšç»„åˆ†æä¸äº¤äº’ä½œç”¨"
    ]
  },
  {
    "objectID": "1054-subgroup.html#å‚è€ƒæ–‡çŒ®",
    "href": "1054-subgroup.html#å‚è€ƒæ–‡çŒ®",
    "title": "äºšç»„åˆ†æä¸äº¤äº’ä½œç”¨æ£€éªŒ",
    "section": "å‚è€ƒæ–‡çŒ®",
    "text": "å‚è€ƒæ–‡çŒ®\n\nSun X, et al.Â How to use a subgroup analysis: usersâ€™ guide to the medical literature. JAMA. 2014;311(4):405-411.\nWang R, et al.Â Statistics in medicineâ€”reporting of subgroup analyses in clinical trials. NEJM. 2007;357(21):2189-2194.\nBrookes ST, et al.Â Subgroup analyses in randomized trials: risks of subgroup-specific analyses. J Clin Epidemiol. 2004;57(3):229-236.",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "äºšç»„åˆ†æä¸äº¤äº’ä½œç”¨"
    ]
  },
  {
    "objectID": "1052-bootstrap.html",
    "href": "1052-bootstrap.html",
    "title": "Bootstrapä¸ç½®æ¢æ£€éªŒ",
    "section": "",
    "text": "å½“æ ·æœ¬é‡è¾ƒå°æˆ–æ•°æ®ä¸æ»¡è¶³å‚æ•°å‡è®¾æ—¶ï¼ŒBootstrapï¼ˆè‡ªåŠ©æ³•ï¼‰å’Œç½®æ¢æ£€éªŒæ˜¯ä¸¤ç§å¼ºå¤§çš„éå‚æ•°ç»Ÿè®¡æ–¹æ³•ã€‚å®ƒä»¬é€šè¿‡é‡æŠ½æ ·æŠ€æœ¯æ¥ä¼°è®¡ç»Ÿè®¡é‡çš„åˆ†å¸ƒï¼Œæ— éœ€å¯¹æ€»ä½“åˆ†å¸ƒåšå¼ºå‡è®¾ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "Bootstrapä¸ç½®æ¢æ£€éªŒ"
    ]
  },
  {
    "objectID": "1052-bootstrap.html#ä¸ºä»€ä¹ˆéœ€è¦é‡æŠ½æ ·æ–¹æ³•",
    "href": "1052-bootstrap.html#ä¸ºä»€ä¹ˆéœ€è¦é‡æŠ½æ ·æ–¹æ³•",
    "title": "Bootstrapä¸ç½®æ¢æ£€éªŒ",
    "section": "ä¸ºä»€ä¹ˆéœ€è¦é‡æŠ½æ ·æ–¹æ³•ï¼Ÿ",
    "text": "ä¸ºä»€ä¹ˆéœ€è¦é‡æŠ½æ ·æ–¹æ³•ï¼Ÿ\n\nä¼ ç»Ÿæ–¹æ³•çš„å±€é™\n\næ­£æ€å‡è®¾ï¼šå¾ˆå¤šå‚æ•°æ£€éªŒå‡è®¾æ•°æ®æœä»æ­£æ€åˆ†å¸ƒ\nå¤§æ ·æœ¬ç†è®ºï¼šç½®ä¿¡åŒºé—´ä¾èµ–äºä¸­å¿ƒæé™å®šç†\nå¤æ‚ç»Ÿè®¡é‡ï¼šæŸäº›ç»Ÿè®¡é‡æ²¡æœ‰è§£æå…¬å¼\nå¼‚å¸¸å€¼æ•æ„Ÿï¼šä¼ ç»Ÿæ–¹æ³•å¯¹ç¦»ç¾¤ç‚¹ä¸ç¨³å¥\n\n\n\né‡æŠ½æ ·æ–¹æ³•çš„ä¼˜åŠ¿\n\n\n\nç‰¹ç‚¹\nBootstrap\nç½®æ¢æ£€éªŒ\n\n\n\n\nä¸»è¦ç”¨é€”\nä¼°è®¡æ ‡å‡†è¯¯/ç½®ä¿¡åŒºé—´\nå‡è®¾æ£€éªŒ\n\n\nåŸç†\næœ‰æ”¾å›é‡æŠ½æ ·\næ‰“ä¹±æ ‡ç­¾ï¼Œæ— æ”¾å›\n\n\nå‡è®¾\næ ·æœ¬ä»£è¡¨æ€»ä½“\nH0ä¸‹ç»„åˆ«å¯äº¤æ¢\n\n\né€‚ç”¨\nå‡ ä¹æ‰€æœ‰ç»Ÿè®¡é‡\nä¸¤ç»„/å¤šç»„æ¯”è¾ƒ",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "Bootstrapä¸ç½®æ¢æ£€éªŒ"
    ]
  },
  {
    "objectID": "1052-bootstrap.html#råŒ…å®‰è£…",
    "href": "1052-bootstrap.html#råŒ…å®‰è£…",
    "title": "Bootstrapä¸ç½®æ¢æ£€éªŒ",
    "section": "RåŒ…å®‰è£…",
    "text": "RåŒ…å®‰è£…\n\n# å®‰è£…å¿…è¦åŒ…\npackages &lt;- c(\"boot\", \"tidyverse\")\n\nfor (pkg in packages) {\n    if (!require(pkg, character.only = TRUE, quietly = TRUE)) {\n        install.packages(pkg)\n        library(pkg, character.only = TRUE)\n    }\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "Bootstrapä¸ç½®æ¢æ£€éªŒ"
    ]
  },
  {
    "objectID": "1052-bootstrap.html#bootstrap-è‡ªåŠ©æ³•",
    "href": "1052-bootstrap.html#bootstrap-è‡ªåŠ©æ³•",
    "title": "Bootstrapä¸ç½®æ¢æ£€éªŒ",
    "section": "Bootstrap è‡ªåŠ©æ³•",
    "text": "Bootstrap è‡ªåŠ©æ³•\n\nåŸºæœ¬åŸç†\nBootstrapçš„æ ¸å¿ƒæ€æƒ³ï¼š 1. ä»åŸæ ·æœ¬ï¼ˆnä¸ªè§‚æµ‹ï¼‰ä¸­æœ‰æ”¾å›åœ°æŠ½å–nä¸ªè§‚æµ‹ 2. è®¡ç®—æ„Ÿå…´è¶£çš„ç»Ÿè®¡é‡ 3. é‡å¤Bæ¬¡ï¼ˆé€šå¸¸B = 1000~10000ï¼‰ 4. ç”¨è¿™Bä¸ªç»Ÿè®¡é‡çš„åˆ†å¸ƒä¼°è®¡çœŸå®çš„æŠ½æ ·åˆ†å¸ƒ\n\nlibrary(tidyverse)\n\n# æ¨¡æ‹Ÿæ•°æ®\nset.seed(42)\ndata &lt;- rnorm(30, mean = 10, sd = 3)\n\n# æ‰‹åŠ¨å®ç°Bootstrap\nB &lt;- 1000\nboot_means &lt;- numeric(B)\n\nfor (i in 1:B) {\n    boot_sample &lt;- sample(data, size = length(data), replace = TRUE)\n    boot_means[i] &lt;- mean(boot_sample)\n}\n\n# å¯è§†åŒ–Bootstrapåˆ†å¸ƒ\ndata.frame(boot_mean = boot_means) %&gt;%\n    ggplot(aes(x = boot_mean)) +\n    geom_histogram(aes(y = after_stat(density)),\n        bins = 30,\n        fill = \"#4f46e5\", alpha = 0.7\n    ) +\n    geom_density(color = \"#dc2626\", linewidth = 1) +\n    geom_vline(\n        xintercept = mean(data), color = \"#059669\",\n        linewidth = 1.5, linetype = \"dashed\"\n    ) +\n    labs(\n        title = \"Bootstrap å‡å€¼åˆ†å¸ƒ\",\n        subtitle = paste0(\"åŸå§‹æ ·æœ¬å‡å€¼: \", round(mean(data), 2)),\n        x = \"Bootstrapå‡å€¼\",\n        y = \"å¯†åº¦\"\n    ) +\n    theme_minimal() +\n    theme(plot.title = element_text(face = \"bold\"))\n\n\n\n\n\n\n\n\n\n\nBootstrapæ ‡å‡†è¯¯å’Œç½®ä¿¡åŒºé—´\n\n# Bootstrapæ ‡å‡†è¯¯\nboot_se &lt;- sd(boot_means)\ncat(\"Bootstrapæ ‡å‡†è¯¯:\", round(boot_se, 3), \"\\n\")\n\nBootstrapæ ‡å‡†è¯¯: 0.683 \n\n# ç™¾åˆ†ä½æ³•ç½®ä¿¡åŒºé—´\nci_percentile &lt;- quantile(boot_means, c(0.025, 0.975))\ncat(\"95% ç™¾åˆ†ä½ç½®ä¿¡åŒºé—´:\", round(ci_percentile, 3), \"\\n\")\n\n95% ç™¾åˆ†ä½ç½®ä¿¡åŒºé—´: 8.932 11.539 \n\n# ä¸ç†è®ºå€¼æ¯”è¾ƒ\ntheoretical_se &lt;- sd(data) / sqrt(length(data))\ncat(\"\\nç†è®ºæ ‡å‡†è¯¯:\", round(theoretical_se, 3), \"\\n\")\n\n\nç†è®ºæ ‡å‡†è¯¯: 0.687 \n\n\n\n\nä½¿ç”¨bootåŒ…\n\nlibrary(boot)\n\n# å®šä¹‰ç»Ÿè®¡å‡½æ•°\nmean_func &lt;- function(data, indices) {\n    return(mean(data[indices]))\n}\n\n# Bootstrap\nboot_result &lt;- boot(\n    data = data,\n    statistic = mean_func,\n    R = 1000\n)\n\nprint(boot_result)\n\n\nORDINARY NONPARAMETRIC BOOTSTRAP\n\n\nCall:\nboot(data = data, statistic = mean_func, R = 1000)\n\n\nBootstrap Statistics :\n    original       bias    std. error\nt1* 10.20576 -0.004315002   0.6604349\n\n\n\n\nBootstrapç½®ä¿¡åŒºé—´\n\n# è·å–ä¸åŒç±»å‹çš„ç½®ä¿¡åŒºé—´\nboot_ci &lt;- boot.ci(boot_result, type = c(\"norm\", \"basic\", \"perc\", \"bca\"))\nprint(boot_ci)\n\nBOOTSTRAP CONFIDENCE INTERVAL CALCULATIONS\nBased on 1000 bootstrap replicates\n\nCALL : \nboot.ci(boot.out = boot_result, type = c(\"norm\", \"basic\", \"perc\", \n    \"bca\"))\n\nIntervals : \nLevel      Normal              Basic         \n95%   ( 8.92, 11.50 )   ( 8.84, 11.41 )  \n\nLevel     Percentile            BCa          \n95%   ( 9.01, 11.57 )   ( 9.04, 11.59 )  \nCalculations and Intervals on Original Scale\n\n\nç½®ä¿¡åŒºé—´ç±»å‹è¯´æ˜ï¼š\n\n\n\næ–¹æ³•\nè¯´æ˜\næ¨èåº¦\n\n\n\n\næ­£æ€æ³•\nå‡è®¾Bootstrapåˆ†å¸ƒæ­£æ€\nâ­â­\n\n\nåŸºæœ¬æ³•\nä½¿ç”¨åˆ†ä½æ•°ï¼Œå¯¹ç§°è°ƒæ•´\nâ­â­â­\n\n\nç™¾åˆ†ä½æ³•\nç›´æ¥ä½¿ç”¨Bootstrapåˆ†ä½æ•°\nâ­â­â­\n\n\nBCaæ³•\nåå·®æ ¡æ­£åŠ é€Ÿæ³•\nâ­â­â­â­â­\n\n\n\n\næ¨èä½¿ç”¨BCaæ³•ï¼Œå®ƒæ ¡æ­£äº†åå·®å’Œåæ–œï¼Œåœ¨å°æ ·æœ¬ä¸­è¡¨ç°æ›´å¥½ã€‚\n\n\n\nå›å½’ç³»æ•°çš„Bootstrap\n\n# ä½¿ç”¨mtcarsæ•°æ®\ndata(mtcars)\n\n# å®šä¹‰å›å½’ç³»æ•°æå–å‡½æ•°\nreg_coef &lt;- function(data, indices) {\n    d &lt;- data[indices, ]\n    fit &lt;- lm(mpg ~ wt + hp, data = d)\n    return(coef(fit))\n}\n\n# Bootstrapå›å½’\nboot_reg &lt;- boot(data = mtcars, statistic = reg_coef, R = 1000)\n\n# æŸ¥çœ‹ç»“æœ\nprint(boot_reg)\n\n\nORDINARY NONPARAMETRIC BOOTSTRAP\n\n\nCall:\nboot(data = mtcars, statistic = reg_coef, R = 1000)\n\n\nBootstrap Statistics :\n       original       bias    std. error\nt1* 37.22727012  0.018234418 2.131452964\nt2* -3.87783074  0.022251806 0.711688627\nt3* -0.03177295 -0.001074946 0.008186481\n\n\n\n# wtç³»æ•°çš„ç½®ä¿¡åŒºé—´\nboot.ci(boot_reg, type = \"bca\", index = 2) # index=2 è¡¨ç¤ºwtç³»æ•°\n\nBOOTSTRAP CONFIDENCE INTERVAL CALCULATIONS\nBased on 1000 bootstrap replicates\n\nCALL : \nboot.ci(boot.out = boot_reg, type = \"bca\", index = 2)\n\nIntervals : \nLevel       BCa          \n95%   (-5.293, -2.495 )  \nCalculations and Intervals on Original Scale",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "Bootstrapä¸ç½®æ¢æ£€éªŒ"
    ]
  },
  {
    "objectID": "1052-bootstrap.html#ç½®æ¢æ£€éªŒ-permutation-test",
    "href": "1052-bootstrap.html#ç½®æ¢æ£€éªŒ-permutation-test",
    "title": "Bootstrapä¸ç½®æ¢æ£€éªŒ",
    "section": "ç½®æ¢æ£€éªŒ (Permutation Test)",
    "text": "ç½®æ¢æ£€éªŒ (Permutation Test)\n\nåŸºæœ¬åŸç†\nç½®æ¢æ£€éªŒç”¨äºå‡è®¾æ£€éªŒï¼Œæ ¸å¿ƒæ€æƒ³ï¼š 1. åœ¨åŸå‡è®¾H0ä¸‹ï¼Œç»„åˆ«æ ‡ç­¾å¯¹ç»“æœæ²¡æœ‰å½±å“ 2. æ‰“ä¹±ç»„åˆ«æ ‡ç­¾ï¼Œé‡æ–°è®¡ç®—ç»Ÿè®¡é‡ 3. é‡å¤å¤šæ¬¡ï¼Œå¾—åˆ°H0ä¸‹çš„åˆ†å¸ƒ 4. æ¯”è¾ƒè§‚æµ‹ç»Ÿè®¡é‡ä¸è¯¥åˆ†å¸ƒï¼Œè®¡ç®—på€¼\n\n# ä¸¤ç»„æ¯”è¾ƒçš„ç½®æ¢æ£€éªŒ\ngroup_A &lt;- c(12.5, 14.2, 15.8, 13.1, 16.2, 11.9)\ngroup_B &lt;- c(18.3, 17.1, 19.5, 16.8, 20.2, 17.9)\n\n# è§‚æµ‹åˆ°çš„å·®å¼‚\nobs_diff &lt;- mean(group_B) - mean(group_A)\ncat(\"è§‚æµ‹åˆ°çš„å‡å€¼å·®:\", round(obs_diff, 2), \"\\n\")\n\nè§‚æµ‹åˆ°çš„å‡å€¼å·®: 4.35 \n\n# ç½®æ¢æ£€éªŒ\nset.seed(42)\nn_perm &lt;- 10000\nperm_diffs &lt;- numeric(n_perm)\ncombined &lt;- c(group_A, group_B)\nn_A &lt;- length(group_A)\n\nfor (i in 1:n_perm) {\n    shuffled &lt;- sample(combined)\n    perm_diffs[i] &lt;- mean(shuffled[(n_A + 1):length(combined)]) -\n        mean(shuffled[1:n_A])\n}\n\n# è®¡ç®—på€¼ï¼ˆåŒä¾§ï¼‰\np_value &lt;- mean(abs(perm_diffs) &gt;= abs(obs_diff))\ncat(\"ç½®æ¢æ£€éªŒ på€¼:\", p_value, \"\\n\")\n\nç½®æ¢æ£€éªŒ på€¼: 0.0019 \n\n\n\n# å¯è§†åŒ–\ndata.frame(diff = perm_diffs) %&gt;%\n    ggplot(aes(x = diff)) +\n    geom_histogram(bins = 50, fill = \"#6366f1\", alpha = 0.7) +\n    geom_vline(\n        xintercept = obs_diff, color = \"#dc2626\",\n        linewidth = 1.5, linetype = \"dashed\"\n    ) +\n    geom_vline(\n        xintercept = -obs_diff, color = \"#dc2626\",\n        linewidth = 1.5, linetype = \"dashed\"\n    ) +\n    labs(\n        title = \"ç½®æ¢æ£€éªŒï¼šH0ä¸‹çš„å‡å€¼å·®åˆ†å¸ƒ\",\n        subtitle = paste0(\n            \"è§‚æµ‹å·®å€¼: \", round(obs_diff, 2),\n            \", på€¼: \", round(p_value, 4)\n        ),\n        x = \"ç½®æ¢åçš„å‡å€¼å·®\",\n        y = \"é¢‘æ•°\"\n    ) +\n    theme_minimal() +\n    theme(plot.title = element_text(face = \"bold\"))\n\n\n\n\n\n\n\n\n\n\né…å¯¹æ ·æœ¬çš„ç½®æ¢æ£€éªŒ\n\n# é…å¯¹æ•°æ®\nbefore &lt;- c(25, 30, 28, 35, 32, 27, 29, 31)\nafter &lt;- c(23, 28, 24, 30, 29, 25, 26, 28)\ndiff &lt;- after - before\n\n# é…å¯¹ç½®æ¢æ£€éªŒï¼ˆç¬¦å·ç½®æ¢ï¼‰\nset.seed(42)\nn_perm &lt;- 10000\nn &lt;- length(diff)\nobs_mean_diff &lt;- mean(diff)\n\nperm_means &lt;- numeric(n_perm)\nfor (i in 1:n_perm) {\n    signs &lt;- sample(c(-1, 1), n, replace = TRUE)\n    perm_means[i] &lt;- mean(diff * signs)\n}\n\np_value_paired &lt;- mean(abs(perm_means) &gt;= abs(obs_mean_diff))\ncat(\"é…å¯¹ç½®æ¢æ£€éªŒ på€¼:\", p_value_paired, \"\\n\")\n\né…å¯¹ç½®æ¢æ£€éªŒ på€¼: 0.0093",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "Bootstrapä¸ç½®æ¢æ£€éªŒ"
    ]
  },
  {
    "objectID": "1052-bootstrap.html#å®é™…åº”ç”¨æ¡ˆä¾‹",
    "href": "1052-bootstrap.html#å®é™…åº”ç”¨æ¡ˆä¾‹",
    "title": "Bootstrapä¸ç½®æ¢æ£€éªŒ",
    "section": "å®é™…åº”ç”¨æ¡ˆä¾‹",
    "text": "å®é™…åº”ç”¨æ¡ˆä¾‹\n\næ¡ˆä¾‹1ï¼šä¸­ä½æ•°çš„Bootstrapç½®ä¿¡åŒºé—´\n\n# åæ€æ•°æ®\nset.seed(42)\nskewed_data &lt;- rexp(50, rate = 0.1)\n\n# ä¸­ä½æ•°çš„Bootstrap\nmedian_func &lt;- function(data, indices) {\n    return(median(data[indices]))\n}\n\nboot_median &lt;- boot(skewed_data, median_func, R = 2000)\nboot.ci(boot_median, type = \"bca\")\n\nBOOTSTRAP CONFIDENCE INTERVAL CALCULATIONS\nBased on 2000 bootstrap replicates\n\nCALL : \nboot.ci(boot.out = boot_median, type = \"bca\")\n\nIntervals : \nLevel       BCa          \n95%   ( 4.244, 11.916 )  \nCalculations and Intervals on Original Scale\n\n\n\n\næ¡ˆä¾‹2ï¼šç›¸å…³ç³»æ•°çš„Bootstrap\n\n# ç›¸å…³ç³»æ•°Bootstrap\ncor_func &lt;- function(data, indices) {\n    d &lt;- data[indices, ]\n    return(cor(d$mpg, d$wt))\n}\n\nboot_cor &lt;- boot(mtcars[, c(\"mpg\", \"wt\")], cor_func, R = 2000)\nboot.ci(boot_cor, type = \"bca\")\n\nBOOTSTRAP CONFIDENCE INTERVAL CALCULATIONS\nBased on 2000 bootstrap replicates\n\nCALL : \nboot.ci(boot.out = boot_cor, type = \"bca\")\n\nIntervals : \nLevel       BCa          \n95%   (-0.9191, -0.7708 )  \nCalculations and Intervals on Original Scale",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "Bootstrapä¸ç½®æ¢æ£€éªŒ"
    ]
  },
  {
    "objectID": "1052-bootstrap.html#æŠ¥å‘Šæ’°å†™æ¨¡æ¿",
    "href": "1052-bootstrap.html#æŠ¥å‘Šæ’°å†™æ¨¡æ¿",
    "title": "Bootstrapä¸ç½®æ¢æ£€éªŒ",
    "section": "æŠ¥å‘Šæ’°å†™æ¨¡æ¿",
    "text": "æŠ¥å‘Šæ’°å†™æ¨¡æ¿\n\næ–¹æ³•éƒ¨åˆ†ï¼ˆBootstrapï¼‰\n\nä½¿ç”¨éå‚æ•°Bootstrapæ–¹æ³•ä¼°è®¡ç»Ÿè®¡é‡çš„æ ‡å‡†è¯¯å’Œç½®ä¿¡åŒºé—´ã€‚ä»åŸå§‹æ ·æœ¬ä¸­æœ‰æ”¾å›åœ°æŠ½å–10000ä¸ªBootstrapæ ·æœ¬ï¼Œæ¯ä¸ªæ ·æœ¬å¤§å°ä¸åŸå§‹æ ·æœ¬ç›¸åŒã€‚é‡‡ç”¨åå·®æ ¡æ­£åŠ é€Ÿï¼ˆBCaï¼‰æ–¹æ³•è®¡ç®—95%ç½®ä¿¡åŒºé—´ã€‚åˆ†æä½¿ç”¨Rè½¯ä»¶çš„bootåŒ…å®Œæˆã€‚\n\n\n\næ–¹æ³•éƒ¨åˆ†ï¼ˆç½®æ¢æ£€éªŒï¼‰\n\né‡‡ç”¨ç½®æ¢æ£€éªŒæ¯”è¾ƒä¸¤ç»„é—´çš„å·®å¼‚ã€‚åœ¨åŸå‡è®¾ï¼ˆä¸¤ç»„æ— å·®å¼‚ï¼‰ä¸‹ï¼Œé€šè¿‡éšæœºé‡æ’ç»„åˆ«æ ‡ç­¾ç”Ÿæˆ10000ä¸ªç½®æ¢æ ·æœ¬ï¼Œæ„å»ºç»Ÿè®¡é‡çš„é›¶åˆ†å¸ƒã€‚åŒä¾§på€¼å®šä¹‰ä¸ºé›¶åˆ†å¸ƒä¸­ç»å¯¹å€¼å¤§äºç­‰äºè§‚æµ‹ç»Ÿè®¡é‡çš„æ¯”ä¾‹ã€‚\n\n\n\nç»“æœéƒ¨åˆ†\n\nBootstrapåˆ†ææ˜¾ç¤ºï¼Œæ ·æœ¬ä¸­ä½æ•°ä¸ºXXï¼ˆBCa 95% CI: XXè‡³XXï¼‰ã€‚ç½®æ¢æ£€éªŒç»“æœè¡¨æ˜ï¼Œä¸¤ç»„å‡å€¼å·®å¼‚å…·æœ‰ç»Ÿè®¡å­¦æ„ä¹‰ï¼ˆè§‚æµ‹å·®å€¼ = XXï¼Œç½®æ¢æ£€éªŒ p = XXï¼‰ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "Bootstrapä¸ç½®æ¢æ£€éªŒ"
    ]
  },
  {
    "objectID": "1052-bootstrap.html#å®ç”¨æŠ€å·§",
    "href": "1052-bootstrap.html#å®ç”¨æŠ€å·§",
    "title": "Bootstrapä¸ç½®æ¢æ£€éªŒ",
    "section": "å®ç”¨æŠ€å·§",
    "text": "å®ç”¨æŠ€å·§\n\n1. é€‰æ‹©é‡æŠ½æ ·æ¬¡æ•°\n\næ ‡å‡†è¯¯ä¼°è®¡ï¼šR = 1000 é€šå¸¸è¶³å¤Ÿ\nç½®ä¿¡åŒºé—´ï¼ˆBCaï¼‰ï¼šR = 2000-5000\nç½®æ¢æ£€éªŒpå€¼ï¼šR = 10000ï¼ˆç²¾ç¡®åˆ°4ä½å°æ•°ï¼‰\n\n\n\n2. æ£€æŸ¥ç¨³å®šæ€§\n\n# æ£€æŸ¥Bootstrapç»“æœæ˜¯å¦ç¨³å®š\nstability &lt;- numeric(5)\nfor (j in 1:5) {\n    boot_temp &lt;- boot(data, mean_func, R = 1000)\n    stability[j] &lt;- sd(boot_temp$t)\n}\ncat(\"5æ¬¡Bootstrapæ ‡å‡†è¯¯:\", round(stability, 3), \"\\n\")\n\n5æ¬¡Bootstrapæ ‡å‡†è¯¯: 0.653 0.664 0.673 0.663 0.681 \n\ncat(\"å˜å¼‚ç³»æ•°:\", round(sd(stability) / mean(stability), 4), \"\\n\")\n\nå˜å¼‚ç³»æ•°: 0.0159",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "Bootstrapä¸ç½®æ¢æ£€éªŒ"
    ]
  },
  {
    "objectID": "1052-bootstrap.html#æ–¹æ³•é€‰æ‹©æŒ‡å—",
    "href": "1052-bootstrap.html#æ–¹æ³•é€‰æ‹©æŒ‡å—",
    "title": "Bootstrapä¸ç½®æ¢æ£€éªŒ",
    "section": "æ–¹æ³•é€‰æ‹©æŒ‡å—",
    "text": "æ–¹æ³•é€‰æ‹©æŒ‡å—\n\n\n\nåœºæ™¯\næ¨èæ–¹æ³•\n\n\n\n\nä¼°è®¡æ ‡å‡†è¯¯\nBootstrap\n\n\nç½®ä¿¡åŒºé—´ï¼ˆå°æ ·æœ¬ï¼‰\nBootstrap BCa\n\n\nä¸¤ç»„æ¯”è¾ƒ\nç½®æ¢æ£€éªŒ\n\n\né…å¯¹æ¯”è¾ƒ\nç¬¦å·ç½®æ¢æ£€éªŒ\n\n\nç›¸å…³æ€§æ˜¾è‘—æ€§\nç½®æ¢æ£€éªŒ\n\n\nå¤æ‚ç»Ÿè®¡é‡\nBootstrap\n\n\néæ­£æ€æ•°æ®\nBootstrapæˆ–ç½®æ¢æ£€éªŒ",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "Bootstrapä¸ç½®æ¢æ£€éªŒ"
    ]
  },
  {
    "objectID": "1052-bootstrap.html#å¸¸è§é™·é˜±",
    "href": "1052-bootstrap.html#å¸¸è§é™·é˜±",
    "title": "Bootstrapä¸ç½®æ¢æ£€éªŒ",
    "section": "å¸¸è§é™·é˜±",
    "text": "å¸¸è§é™·é˜±\n\næ ·æœ¬é‡å¤ªå°ï¼šBootstrapéœ€è¦æ ·æœ¬èƒ½ä»£è¡¨æ€»ä½“ï¼Œn &lt; 20æ—¶è°¨æ…ä½¿ç”¨\nç›¸ä¾æ•°æ®ï¼šæ—¶é—´åºåˆ—éœ€è¦å—çŠ¶Bootstrap\næœ‰ç•Œå‚æ•°ï¼šå¦‚æ¯”ä¾‹æ¥è¿‘0æˆ–1æ—¶ï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†\nè®¡ç®—å¯†é›†ï¼šå¤æ‚æ¨¡å‹å¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "Bootstrapä¸ç½®æ¢æ£€éªŒ"
    ]
  },
  {
    "objectID": "1052-bootstrap.html#æ€»ç»“",
    "href": "1052-bootstrap.html#æ€»ç»“",
    "title": "Bootstrapä¸ç½®æ¢æ£€éªŒ",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nè¦ç‚¹\nè¯´æ˜\n\n\n\n\nBootstrap\né€šè¿‡æœ‰æ”¾å›é‡æŠ½æ ·ä¼°è®¡æŠ½æ ·åˆ†å¸ƒ\n\n\nç½®æ¢æ£€éªŒ\né€šè¿‡æ‰“ä¹±æ ‡ç­¾æ£€éªŒH0\n\n\nç½®ä¿¡åŒºé—´\næ¨èä½¿ç”¨BCaæ–¹æ³•\n\n\né‡æŠ½æ ·æ¬¡æ•°\næ ‡å‡†è¯¯1000æ¬¡ï¼ŒCIå’Œpå€¼éœ€æ›´å¤š\n\n\nä¼˜åŠ¿\nåˆ†å¸ƒè‡ªç”±ï¼Œé€‚ç”¨äºå¤æ‚ç»Ÿè®¡é‡",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "Bootstrapä¸ç½®æ¢æ£€éªŒ"
    ]
  },
  {
    "objectID": "1050-competing-risks.html",
    "href": "1050-competing-risks.html",
    "title": "ç«äº‰é£é™©åˆ†æ (Competing Risks)",
    "section": "",
    "text": "åœ¨ä¸´åºŠç ”ç©¶ä¸­ï¼Œæ‚£è€…å¯èƒ½å› å¤šç§åŸå› é€€å‡ºè§‚å¯Ÿï¼ˆå¦‚æ­»äº¡å¯èƒ½æ¥è‡ªå¿ƒè¡€ç®¡ç–¾ç—…æˆ–ç™Œç—‡ï¼‰ã€‚ç«äº‰é£é™©åˆ†ææ˜¯å¤„ç†å­˜åœ¨å¤šä¸ªäº’æ–¥ç»“å±€çš„ç”Ÿå­˜æ•°æ®çš„ä¸“ä¸šæ–¹æ³•ï¼Œèƒ½å¤Ÿæ›´å‡†ç¡®åœ°ä¼°è®¡ç‰¹å®šäº‹ä»¶çš„å‘ç”Ÿé£é™©ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç«äº‰é£é™©åˆ†æ"
    ]
  },
  {
    "objectID": "1050-competing-risks.html#ä»€ä¹ˆæ˜¯ç«äº‰é£é™©",
    "href": "1050-competing-risks.html#ä»€ä¹ˆæ˜¯ç«äº‰é£é™©",
    "title": "ç«äº‰é£é™©åˆ†æ (Competing Risks)",
    "section": "ä»€ä¹ˆæ˜¯ç«äº‰é£é™©ï¼Ÿ",
    "text": "ä»€ä¹ˆæ˜¯ç«äº‰é£é™©ï¼Ÿ\nåœ¨ä¼ ç»Ÿçš„ç”Ÿå­˜åˆ†æï¼ˆå¦‚Kaplan-Meieræ–¹æ³•å’ŒCoxå›å½’ï¼‰ä¸­ï¼Œæˆ‘ä»¬å‡è®¾ï¼š - åˆ å¤±ï¼ˆcensoringï¼‰æ˜¯éä¿¡æ¯æ€§çš„ - å¦‚æœè§‚å¯Ÿæ—¶é—´è¶³å¤Ÿé•¿ï¼Œæ‰€æœ‰äººæœ€ç»ˆéƒ½ä¼šç»å†æ„Ÿå…´è¶£çš„äº‹ä»¶\nä½†åœ¨å®é™…ç ”ç©¶ä¸­ï¼Œç«äº‰é£é™©ï¼ˆCompeting Risksï¼‰æ˜¯æŒ‡ï¼šå½“ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿåï¼Œä¼šé˜»æ­¢æˆ‘ä»¬è§‚å¯Ÿåˆ°æ„Ÿå…´è¶£äº‹ä»¶çš„æƒ…å†µã€‚\n\nå…¸å‹åœºæ™¯ä¸¾ä¾‹\n\n\n\nç ”ç©¶ç›®çš„\næ„Ÿå…´è¶£äº‹ä»¶\nç«äº‰é£é™©äº‹ä»¶\n\n\n\n\nå¿ƒè¡€ç®¡æ­»äº¡é£é™©\nå¿ƒè¡€ç®¡æ­»äº¡\néå¿ƒè¡€ç®¡æ­»äº¡\n\n\nç™Œç—‡å¤å‘\nç™Œç—‡å¤å‘\næ­»äº¡ï¼ˆä»»ä½•åŸå› ï¼‰\n\n\nå™¨å®˜ç§»æ¤\næ¥å—ç§»æ¤\nç­‰å¾…æœŸé—´æ­»äº¡\n\n\nç³–å°¿ç—…å¹¶å‘ç—‡\nè‚¾ç—…\nå¿ƒè¡€ç®¡ç–¾ç—…æ­»äº¡",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç«äº‰é£é™©åˆ†æ"
    ]
  },
  {
    "objectID": "1050-competing-risks.html#ä¸ºä»€ä¹ˆéœ€è¦ç«äº‰é£é™©åˆ†æ",
    "href": "1050-competing-risks.html#ä¸ºä»€ä¹ˆéœ€è¦ç«äº‰é£é™©åˆ†æ",
    "title": "ç«äº‰é£é™©åˆ†æ (Competing Risks)",
    "section": "ä¸ºä»€ä¹ˆéœ€è¦ç«äº‰é£é™©åˆ†æï¼Ÿ",
    "text": "ä¸ºä»€ä¹ˆéœ€è¦ç«äº‰é£é™©åˆ†æï¼Ÿ\n\nä¼ ç»Ÿæ–¹æ³•çš„é—®é¢˜\nä½¿ç”¨æ ‡å‡†Kaplan-Meieræ–¹æ³•å¤„ç†ç«äº‰é£é™©æ•°æ®æ—¶ï¼Œå¦‚æœå°†ç«äº‰äº‹ä»¶ç®€å•åœ°ä½œä¸ºåˆ å¤±å¤„ç†ï¼Œä¼šé«˜ä¼°æ„Ÿå…´è¶£äº‹ä»¶çš„ç´¯ç§¯å‘ç”Ÿç‡ã€‚\nè¿™æ˜¯å› ä¸ºKMæ–¹æ³•å‡è®¾åˆ å¤±æ˜¯éšæœºçš„ï¼Œä½†ç«äº‰é£é™©äº‹ä»¶çš„å‘ç”Ÿæœ¬è´¨ä¸Šæ˜¯ä¿¡æ¯æ€§åˆ å¤±ã€‚\n\n\nä¸¤ç§ä¸»è¦åˆ†ææ–¹æ³•\n\nCause-specific hazard (ç—…å› ç‰¹å¼‚æ€§é£é™©)ï¼šç ”ç©¶åå˜é‡å¯¹ç‰¹å®šäº‹ä»¶ç¬æ—¶é£é™©çš„å½±å“\nSubdistribution hazard (Fine-Grayæ¨¡å‹)ï¼šç ”ç©¶åå˜é‡å¯¹ç´¯ç§¯å‘ç”Ÿç‡çš„å½±å“",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç«äº‰é£é™©åˆ†æ"
    ]
  },
  {
    "objectID": "1050-competing-risks.html#råŒ…å®‰è£…ä¸åŠ è½½",
    "href": "1050-competing-risks.html#råŒ…å®‰è£…ä¸åŠ è½½",
    "title": "ç«äº‰é£é™©åˆ†æ (Competing Risks)",
    "section": "RåŒ…å®‰è£…ä¸åŠ è½½",
    "text": "RåŒ…å®‰è£…ä¸åŠ è½½\n\n# å®‰è£…å¿…è¦çš„RåŒ…\npackages &lt;- c(\"survival\", \"cmprsk\", \"tidyverse\")\n\nfor (pkg in packages) {\n    if (!require(pkg, character.only = TRUE, quietly = TRUE)) {\n        install.packages(pkg)\n        library(pkg, character.only = TRUE)\n    }\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç«äº‰é£é™©åˆ†æ"
    ]
  },
  {
    "objectID": "1050-competing-risks.html#æ•°æ®å‡†å¤‡",
    "href": "1050-competing-risks.html#æ•°æ®å‡†å¤‡",
    "title": "ç«äº‰é£é™©åˆ†æ (Competing Risks)",
    "section": "æ•°æ®å‡†å¤‡",
    "text": "æ•°æ®å‡†å¤‡\næˆ‘ä»¬ä½¿ç”¨æ¨¡æ‹Ÿçš„ä¸´åºŠè¯•éªŒæ•°æ®æ¥æ¼”ç¤ºç«äº‰é£é™©åˆ†æï¼š\n\n# æ¨¡æ‹Ÿç«äº‰é£é™©æ•°æ®\nset.seed(42)\nn &lt;- 200\n\n# åˆ›å»ºæ¨¡æ‹Ÿæ•°æ®\nsim_data &lt;- data.frame(\n    id = 1:n,\n    trt = sample(c(\"Drug A\", \"Drug B\"), n, replace = TRUE),\n    age = round(rnorm(n, 55, 12)),\n    grade = sample(c(\"I\", \"II\", \"III\"), n, replace = TRUE, prob = c(0.3, 0.4, 0.3))\n)\n\n# æ¨¡æ‹Ÿç”Ÿå­˜æ—¶é—´å’Œç«äº‰é£é™©äº‹ä»¶\n# status: 0=åˆ å¤±, 1=æ„Ÿå…´è¶£äº‹ä»¶(ç™Œç—‡æ­»äº¡), 2=ç«äº‰äº‹ä»¶(å…¶ä»–åŸå› æ­»äº¡)\nsim_data$time &lt;- pmin(rexp(n, 0.03), 36) # æœ€å¤§éšè®¿36ä¸ªæœˆ\nsim_data$status &lt;- sample(0:2, n, replace = TRUE, prob = c(0.4, 0.35, 0.25))\n\n# æŸ¥çœ‹æ•°æ®ç»“æ„\nhead(sim_data)\n\n  id    trt age grade      time status\n1  1 Drug A  69   III  4.444211      0\n2  2 Drug A  68    II  2.152684      0\n3  3 Drug A  43     I  1.474983      0\n4  4 Drug A  77    II 36.000000      0\n5  5 Drug B  47   III  1.304468      1\n6  6 Drug B  56   III 36.000000      0\n\n# äº‹ä»¶åˆ†å¸ƒ\ntable(sim_data$status)\n\n\n 0  1  2 \n71 76 53",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç«äº‰é£é™©åˆ†æ"
    ]
  },
  {
    "objectID": "1050-competing-risks.html#ä½¿ç”¨cmprskåŒ…è¿›è¡Œç´¯ç§¯å‘ç”Ÿå‡½æ•°åˆ†æ",
    "href": "1050-competing-risks.html#ä½¿ç”¨cmprskåŒ…è¿›è¡Œç´¯ç§¯å‘ç”Ÿå‡½æ•°åˆ†æ",
    "title": "ç«äº‰é£é™©åˆ†æ (Competing Risks)",
    "section": "ä½¿ç”¨cmprskåŒ…è¿›è¡Œç´¯ç§¯å‘ç”Ÿå‡½æ•°åˆ†æ",
    "text": "ä½¿ç”¨cmprskåŒ…è¿›è¡Œç´¯ç§¯å‘ç”Ÿå‡½æ•°åˆ†æ\n\nè®¡ç®—CIF\n\nlibrary(cmprsk)\n\n# å‡†å¤‡æ•°æ®\nftime &lt;- sim_data$time\nfstatus &lt;- sim_data$status\ngroup &lt;- as.factor(sim_data$trt)\n\n# è®¡ç®—ç´¯ç§¯å‘ç”Ÿå‡½æ•°\ncif_fit &lt;- cuminc(ftime, fstatus, group)\n\n# æŸ¥çœ‹ç»“æœ\nprint(cif_fit)\n\nTests:\n      stat        pv df\n1 1.412838 0.2345859  1\n2 2.392749 0.1218991  1\nEstimates and Variances:\n$est\n                 10        20        30\nDrug A 1 0.15905506 0.1729381 0.2195594\nDrug B 1 0.11378896 0.2068368 0.3042480\nDrug A 2 0.04961402 0.0917772 0.1230801\nDrug B 2 0.08393180 0.1378508 0.2000742\n\n$var\n                   10          20          30\nDrug A 1 0.0016688069 0.001807077 0.002307259\nDrug B 1 0.0009692178 0.001651098 0.002334060\nDrug A 2 0.0005949177 0.001119337 0.001525316\nDrug B 2 0.0007259699 0.001199187 0.001764122\n\n\n\n\nå¯è§†åŒ–CIFæ›²çº¿\n\n# ç»‘åˆ¶CIFæ›²çº¿\nplot(cif_fit,\n    xlab = \"æ—¶é—´ (æœˆ)\",\n    ylab = \"ç´¯ç§¯å‘ç”Ÿç‡\",\n    main = \"ç´¯ç§¯å‘ç”Ÿå‡½æ•° (CIF) æ›²çº¿\",\n    col = c(\"#4f46e5\", \"#dc2626\", \"#059669\", \"#f59e0b\"),\n    lty = c(1, 1, 2, 2),\n    lwd = 2\n)\n\n# æ·»åŠ å›¾ä¾‹\nlegend(\"topleft\",\n    legend = names(cif_fit)[1:4],\n    col = c(\"#4f46e5\", \"#dc2626\", \"#059669\", \"#f59e0b\"),\n    lty = c(1, 1, 2, 2),\n    lwd = 2,\n    cex = 0.8\n)\n\n\n\n\n\n\n\n\n\n\nGrayæ£€éªŒ\nGrayæ£€éªŒæ˜¯æ¯”è¾ƒä¸åŒç»„åˆ«é—´CIFå·®å¼‚çš„éå‚æ•°æ£€éªŒæ–¹æ³•ï¼š\n\n# Grayæ£€éªŒç»“æœå·²åŒ…å«åœ¨cumincè¾“å‡ºä¸­\ncif_fit$Tests\n\n      stat        pv df\n1 1.412838 0.2345859  1\n2 2.392749 0.1218991  1",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç«äº‰é£é™©åˆ†æ"
    ]
  },
  {
    "objectID": "1050-competing-risks.html#fine-grayæ¨¡å‹",
    "href": "1050-competing-risks.html#fine-grayæ¨¡å‹",
    "title": "ç«äº‰é£é™©åˆ†æ (Competing Risks)",
    "section": "Fine-Grayæ¨¡å‹",
    "text": "Fine-Grayæ¨¡å‹\nFine-Grayæ¨¡å‹ï¼ˆäºšåˆ†å¸ƒé£é™©æ¨¡å‹ï¼‰æ˜¯ç«äº‰é£é™©åˆ†æä¸­æœ€å¸¸ç”¨çš„å›å½’æ–¹æ³•ï¼š\n\næ¨¡å‹åŸç†\n\nä½¿ç”¨äºšåˆ†å¸ƒé£é™©å‡½æ•°è€Œéç—…å› ç‰¹å¼‚æ€§é£é™©\nå°†ç«äº‰äº‹ä»¶å‘ç”Ÿçš„ä¸ªä½“ä¿ç•™åœ¨é£é™©é›†ä¸­ï¼ˆèµ‹äºˆæƒé‡ï¼‰\nç»“æœè§£é‡Šï¼šåå˜é‡å¯¹ç´¯ç§¯å‘ç”Ÿç‡çš„å½±å“\n\n\n# å‡†å¤‡åå˜é‡çŸ©é˜µ\ncov_matrix &lt;- model.matrix(~ trt + age + grade, data = sim_data)[, -1]\n\n# æ„å»ºFine-Grayæ¨¡å‹\nfg_model &lt;- crr(\n    ftime = sim_data$time,\n    fstatus = sim_data$status,\n    cov1 = cov_matrix,\n    failcode = 1 # æ„Ÿå…´è¶£çš„äº‹ä»¶ç¼–ç \n)\n\n# æŸ¥çœ‹æ¨¡å‹ç»“æœ\nsummary(fg_model)\n\nCompeting Risks Regression\n\nCall:\ncrr(ftime = sim_data$time, fstatus = sim_data$status, cov1 = cov_matrix, \n    failcode = 1)\n\n              coef exp(coef) se(coef)       z p-value\ntrtDrug B  0.24484     1.277  0.22565  1.0850    0.28\nage        0.00167     1.002  0.00815  0.2046    0.84\ngradeII    0.23958     1.271  0.28161  0.8508    0.39\ngradeIII  -0.02344     0.977  0.29561 -0.0793    0.94\n\n          exp(coef) exp(-coef)  2.5% 97.5%\ntrtDrug B     1.277      0.783 0.821  1.99\nage           1.002      0.998 0.986  1.02\ngradeII       1.271      0.787 0.732  2.21\ngradeIII      0.977      1.024 0.547  1.74\n\nNum. cases = 200\nPseudo Log-likelihood = -367 \nPseudo likelihood ratio test = 2.45  on 4 df,\n\n\n\n\nç»“æœè§£é‡Š\n\n# æå–å…³é”®ç»“æœ\nfg_coef &lt;- summary(fg_model)$coef\n\n# åˆ›å»ºç»“æœè¡¨æ ¼\nresult_table &lt;- data.frame(\n    Variable = rownames(fg_coef),\n    sHR = round(exp(fg_coef[, \"coef\"]), 3),\n    `95% CI Lower` = round(exp(fg_coef[, \"coef\"] - 1.96 * fg_coef[, \"se(coef)\"]), 3),\n    `95% CI Upper` = round(exp(fg_coef[, \"coef\"] + 1.96 * fg_coef[, \"se(coef)\"]), 3),\n    P_value = round(fg_coef[, \"p-value\"], 4)\n)\n\nprint(result_table)\n\n           Variable   sHR X95..CI.Lower X95..CI.Upper P_value\ntrtDrug B trtDrug B 1.277         0.821         1.988    0.28\nage             age 1.002         0.986         1.018    0.84\ngradeII     gradeII 1.271         0.732         2.207    0.39\ngradeIII   gradeIII 0.977         0.547         1.744    0.94",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç«äº‰é£é™©åˆ†æ"
    ]
  },
  {
    "objectID": "1050-competing-risks.html#ç—…å› ç‰¹å¼‚æ€§é£é™©æ¨¡å‹",
    "href": "1050-competing-risks.html#ç—…å› ç‰¹å¼‚æ€§é£é™©æ¨¡å‹",
    "title": "ç«äº‰é£é™©åˆ†æ (Competing Risks)",
    "section": "ç—…å› ç‰¹å¼‚æ€§é£é™©æ¨¡å‹",
    "text": "ç—…å› ç‰¹å¼‚æ€§é£é™©æ¨¡å‹\nä¸Fine-Grayæ¨¡å‹ä¸åŒï¼Œç—…å› ç‰¹å¼‚æ€§é£é™©æ¨¡å‹å…³æ³¨çš„æ˜¯ç¬æ—¶é£é™©ç‡ï¼š\n\nlibrary(survival)\n\n# ç™Œç—‡æ­»äº¡ä½œä¸ºäº‹ä»¶ï¼Œå…¶ä»–æ­»äº¡ä½œä¸ºåˆ å¤±\ncause_specific_model &lt;- coxph(\n    Surv(time, status == 1) ~ trt + age + grade,\n    data = sim_data\n)\n\nsummary(cause_specific_model)\n\nCall:\ncoxph(formula = Surv(time, status == 1) ~ trt + age + grade, \n    data = sim_data)\n\n  n= 200, number of events= 76 \n\n               coef exp(coef)  se(coef)      z Pr(&gt;|z|)\ntrtDrug B  0.374165  1.453777  0.236480  1.582    0.114\nage       -0.001860  0.998142  0.009651 -0.193    0.847\ngradeII    0.322012  1.379902  0.287979  1.118    0.263\ngradeIII   0.069921  1.072424  0.313757  0.223    0.824\n\n          exp(coef) exp(-coef) lower .95 upper .95\ntrtDrug B    1.4538     0.6879    0.9145     2.311\nage          0.9981     1.0019    0.9794     1.017\ngradeII      1.3799     0.7247    0.7847     2.426\ngradeIII     1.0724     0.9325    0.5798     1.984\n\nConcordance= 0.56  (se = 0.04 )\nLikelihood ratio test= 4.13  on 4 df,   p=0.4\nWald test            = 4.09  on 4 df,   p=0.4\nScore (logrank) test = 4.13  on 4 df,   p=0.4",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç«äº‰é£é™©åˆ†æ"
    ]
  },
  {
    "objectID": "1050-competing-risks.html#ä¸¤ç§æ¨¡å‹çš„æ¯”è¾ƒ",
    "href": "1050-competing-risks.html#ä¸¤ç§æ¨¡å‹çš„æ¯”è¾ƒ",
    "title": "ç«äº‰é£é™©åˆ†æ (Competing Risks)",
    "section": "ä¸¤ç§æ¨¡å‹çš„æ¯”è¾ƒ",
    "text": "ä¸¤ç§æ¨¡å‹çš„æ¯”è¾ƒ\n\nä½•æ—¶ä½¿ç”¨å“ªç§æ¨¡å‹ï¼Ÿ\n\n\n\nç ”ç©¶ç›®çš„\næ¨èæ–¹æ³•\nç†ç”±\n\n\n\n\nç—…å› å­¦ç ”ç©¶\nCause-specific HR\nåæ˜ æš´éœ²ä¸ç–¾ç—…çš„â€çœŸæ­£â€å…³è”\n\n\né¢„åé¢„æµ‹\nFine-Gray (sHR)\nç›´æ¥å…³è”ç´¯ç§¯å‘ç”Ÿç‡\n\n\nå…¬å…±å«ç”Ÿå†³ç­–\nFine-Gray (sHR)\nåæ˜ å®é™…äººç¾¤ä¸­çš„é£é™©\n\n\nä¸´åºŠè¯•éªŒ\né€šå¸¸ä¸¤è€…éƒ½æŠ¥å‘Š\næä¾›å®Œæ•´ä¿¡æ¯",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç«äº‰é£é™©åˆ†æ"
    ]
  },
  {
    "objectID": "1050-competing-risks.html#æ¨¡å‹è¯Šæ–­",
    "href": "1050-competing-risks.html#æ¨¡å‹è¯Šæ–­",
    "title": "ç«äº‰é£é™©åˆ†æ (Competing Risks)",
    "section": "æ¨¡å‹è¯Šæ–­",
    "text": "æ¨¡å‹è¯Šæ–­\n\næ¯”ä¾‹é£é™©å‡è®¾æ£€éªŒ\n\n# å¯¹ç—…å› ç‰¹å¼‚æ€§æ¨¡å‹è¿›è¡ŒPHæ£€éªŒ\nph_test &lt;- cox.zph(cause_specific_model)\nprint(ph_test)\n\n       chisq df    p\ntrt    2.062  1 0.15\nage    0.973  1 0.32\ngrade  0.855  2 0.65\nGLOBAL 4.120  4 0.39\n\n\n\n# å¯è§†åŒ–Schoenfeldæ®‹å·®\nif (any(ph_test$table[, \"p\"] &lt; 0.1)) {\n    plot(ph_test)\n} else {\n    cat(\"æ‰€æœ‰å˜é‡æ»¡è¶³æ¯”ä¾‹é£é™©å‡è®¾\\n\")\n}\n\næ‰€æœ‰å˜é‡æ»¡è¶³æ¯”ä¾‹é£é™©å‡è®¾",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç«äº‰é£é™©åˆ†æ"
    ]
  },
  {
    "objectID": "1050-competing-risks.html#ç»“æœæŠ¥å‘Šæ¨¡æ¿",
    "href": "1050-competing-risks.html#ç»“æœæŠ¥å‘Šæ¨¡æ¿",
    "title": "ç«äº‰é£é™©åˆ†æ (Competing Risks)",
    "section": "ç»“æœæŠ¥å‘Šæ¨¡æ¿",
    "text": "ç»“æœæŠ¥å‘Šæ¨¡æ¿\n\næ–¹æ³•å­¦æè¿°\n\nå¯¹äºç«äº‰é£é™©æ•°æ®ï¼Œæˆ‘ä»¬é‡‡ç”¨Fine-Grayäºšåˆ†å¸ƒé£é™©æ¨¡å‹è¯„ä¼°å„å› ç´ å¯¹ä¸»è¦ç»ˆç‚¹ï¼ˆç™Œç—‡ç›¸å…³æ­»äº¡ï¼‰ç´¯ç§¯å‘ç”Ÿç‡çš„å½±å“ã€‚ç«äº‰é£é™©äº‹ä»¶å®šä¹‰ä¸ºéç™Œç—‡ç›¸å…³æ­»äº¡ã€‚ä½¿ç”¨Grayæ£€éªŒæ¯”è¾ƒä¸åŒç»„é—´ç´¯ç§¯å‘ç”Ÿå‡½æ•°çš„å·®å¼‚ã€‚æ‰€æœ‰åˆ†æä½¿ç”¨Rè½¯ä»¶çš„cmprskåŒ…å®Œæˆã€‚\n\n\n\nç»“æœæè¿°\n\nåœ¨XXä¾‹æ‚£è€…ä¸­ï¼ŒXXä¾‹(XX%)å‘ç”Ÿç™Œç—‡ç›¸å…³æ­»äº¡ï¼ŒXXä¾‹(XX%)å‘ç”Ÿéç™Œç—‡æ­»äº¡ï¼ŒXXä¾‹(XX%)ä»å­˜æ´»ã€‚24ä¸ªæœˆæ—¶ï¼Œè¯ç‰©Aç»„å’Œè¯ç‰©Bç»„çš„ç™Œç—‡æ­»äº¡ç´¯ç§¯å‘ç”Ÿç‡åˆ†åˆ«ä¸ºXX% (95%CI: XX-XX%)å’ŒXX% (95%CI: XX-XX%)ï¼ŒGrayæ£€éªŒP = XXã€‚\nå¤šå› ç´ Fine-Grayæ¨¡å‹æ˜¾ç¤ºï¼ŒXXæ˜¯ç™Œç—‡æ­»äº¡çš„ç‹¬ç«‹å±é™©å› ç´ ï¼ˆsHR = XX, 95%CI: XX-XX, P &lt; 0.05ï¼‰ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç«äº‰é£é™©åˆ†æ"
    ]
  },
  {
    "objectID": "1050-competing-risks.html#å®ç”¨æŠ€å·§",
    "href": "1050-competing-risks.html#å®ç”¨æŠ€å·§",
    "title": "ç«äº‰é£é™©åˆ†æ (Competing Risks)",
    "section": "å®ç”¨æŠ€å·§",
    "text": "å®ç”¨æŠ€å·§\n\n1. å¦‚ä½•å®šä¹‰ç«äº‰äº‹ä»¶\n\n# å¸¸è§çš„ç«äº‰é£é™©ç¼–ç æ–¹å¼\ndata &lt;- data %&gt;%\n    mutate(\n        status_cr = case_when(\n            event == 0 ~ 0, # åˆ å¤±\n            event == 1 & cause == \"A\" ~ 1, # æ„Ÿå…´è¶£äº‹ä»¶\n            event == 1 & cause == \"B\" ~ 2, # ç«äº‰äº‹ä»¶1\n            event == 1 & cause == \"C\" ~ 2, # ç«äº‰äº‹ä»¶2ï¼ˆå¯åˆå¹¶ï¼‰\n            TRUE ~ NA_real_\n        )\n    )\n\n\n\n2. å¤šä¸ªç«äº‰äº‹ä»¶\n\n# åˆ†æä¸åŒç«äº‰äº‹ä»¶\n# failcode=1 åˆ†æäº‹ä»¶1\nfg_event1 &lt;- crr(ftime, fstatus, cov1, failcode = 1)\n\n# failcode=2 åˆ†æäº‹ä»¶2\nfg_event2 &lt;- crr(ftime, fstatus, cov1, failcode = 2)\n\n\n\n3. æ•æ„Ÿæ€§åˆ†æ\n\n# æ¯”è¾ƒå°†ç«äº‰äº‹ä»¶ä½œä¸ºåˆ å¤± vs æ­£ç¡®å¤„ç†çš„å·®å¼‚\n# æ–¹æ³•1ï¼šæ ‡å‡†KMï¼ˆå¯èƒ½é«˜ä¼°ï¼‰\nkm_naive &lt;- survfit(Surv(time, status == 1) ~ group, data = data)\n\n# æ–¹æ³•2ï¼šæ­£ç¡®çš„CIF\ncif_correct &lt;- cuminc(ftime, fstatus, group)\n\n# æ¯”è¾ƒä¸¤ç§ä¼°è®¡",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç«äº‰é£é™©åˆ†æ"
    ]
  },
  {
    "objectID": "1050-competing-risks.html#å‚è€ƒæ–‡çŒ®",
    "href": "1050-competing-risks.html#å‚è€ƒæ–‡çŒ®",
    "title": "ç«äº‰é£é™©åˆ†æ (Competing Risks)",
    "section": "å‚è€ƒæ–‡çŒ®",
    "text": "å‚è€ƒæ–‡çŒ®\n\nFine JP, Gray RJ. A Proportional Hazards Model for the Subdistribution of a Competing Risk. JASA. 1999;94(446):496-509.\nAustin PC, Fine JP. Practical recommendations for reporting Fine-Gray model analyses for competing risk data. Stat Med. 2017;36(27):4391-4400.\nLatouche A, et al.Â A competing risks analysis should report results on all cause-specific hazards and cumulative incidence functions. JCE. 2013;66(6):648-653.",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç«äº‰é£é™©åˆ†æ"
    ]
  },
  {
    "objectID": "1050-competing-risks.html#æ€»ç»“",
    "href": "1050-competing-risks.html#æ€»ç»“",
    "title": "ç«äº‰é£é™©åˆ†æ (Competing Risks)",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nè¦ç‚¹\nè¯´æ˜\n\n\n\n\nä½•æ—¶ä½¿ç”¨\nå­˜åœ¨å¤šä¸ªäº’æ–¥ç»ˆç‚¹äº‹ä»¶æ—¶\n\n\nCIF\næ¯”KMæ›´å‡†ç¡®ä¼°è®¡ç´¯ç§¯å‘ç”Ÿç‡\n\n\nFine-Gray\nç”¨äºé¢„åé¢„æµ‹å’Œå…¬å…±å«ç”Ÿå†³ç­–\n\n\nç—…å› ç‰¹å¼‚æ€§\nç”¨äºç—…å› å­¦ç ”ç©¶\n\n\næŠ¥å‘Š\nå»ºè®®åŒæ—¶æŠ¥å‘Šä¸¤ç§åˆ†æç»“æœ",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç«äº‰é£é™©åˆ†æ"
    ]
  },
  {
    "objectID": "1048-power-analysis.html",
    "href": "1048-power-analysis.html",
    "title": "æ ·æœ¬é‡ä¸åŠŸæ•ˆåˆ†æ",
    "section": "",
    "text": "åŠŸæ•ˆåˆ†æç”¨äºç¡®å®šç ”ç©¶æ‰€éœ€çš„æ ·æœ¬é‡ï¼Œæˆ–è¯„ä¼°ç»™å®šæ ·æœ¬é‡ä¸‹æ£€æµ‹æ•ˆåº”çš„èƒ½åŠ›ã€‚\n\n\n\n\n\næ¦‚å¿µ\nç¬¦å·\nå«ä¹‰\nå¸¸ç”¨å€¼\n\n\n\n\næ˜¾è‘—æ€§æ°´å¹³\nÎ±\nIç±»é”™è¯¯æ¦‚ç‡\n0.05\n\n\nåŠŸæ•ˆ\n1-Î²\næ£€æµ‹çœŸå®æ•ˆåº”çš„æ¦‚ç‡\n0.80\n\n\næ•ˆåº”é‡\nd/r/f\næ•ˆåº”å¤§å°\nå› æ£€éªŒè€Œå¼‚\n\n\næ ·æœ¬é‡\nn\næ¯ç»„æ ·æœ¬æ•°\nå¾…è®¡ç®—\n\n\n\n\n\n\nçŸ¥é“ä»»æ„ä¸‰ä¸ªï¼Œå¯æ±‚ç¬¬å››ä¸ªï¼š - æ ·æœ¬é‡è®¡ç®—ï¼šå·²çŸ¥ Î±, åŠŸæ•ˆ, æ•ˆåº”é‡ â†’ æ±‚ n - åŠŸæ•ˆè®¡ç®—ï¼šå·²çŸ¥ Î±, n, æ•ˆåº”é‡ â†’ æ±‚åŠŸæ•ˆ - æ•ˆåº”é‡ä¼°è®¡ï¼šå·²çŸ¥ Î±, n, åŠŸæ•ˆ â†’ æ±‚å¯æ£€æµ‹æ•ˆåº”é‡",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ ·æœ¬é‡è®¡ç®—"
    ]
  },
  {
    "objectID": "1048-power-analysis.html#åŠŸæ•ˆåˆ†æç®€ä»‹",
    "href": "1048-power-analysis.html#åŠŸæ•ˆåˆ†æç®€ä»‹",
    "title": "æ ·æœ¬é‡ä¸åŠŸæ•ˆåˆ†æ",
    "section": "",
    "text": "åŠŸæ•ˆåˆ†æç”¨äºç¡®å®šç ”ç©¶æ‰€éœ€çš„æ ·æœ¬é‡ï¼Œæˆ–è¯„ä¼°ç»™å®šæ ·æœ¬é‡ä¸‹æ£€æµ‹æ•ˆåº”çš„èƒ½åŠ›ã€‚\n\n\n\n\n\næ¦‚å¿µ\nç¬¦å·\nå«ä¹‰\nå¸¸ç”¨å€¼\n\n\n\n\næ˜¾è‘—æ€§æ°´å¹³\nÎ±\nIç±»é”™è¯¯æ¦‚ç‡\n0.05\n\n\nåŠŸæ•ˆ\n1-Î²\næ£€æµ‹çœŸå®æ•ˆåº”çš„æ¦‚ç‡\n0.80\n\n\næ•ˆåº”é‡\nd/r/f\næ•ˆåº”å¤§å°\nå› æ£€éªŒè€Œå¼‚\n\n\næ ·æœ¬é‡\nn\næ¯ç»„æ ·æœ¬æ•°\nå¾…è®¡ç®—\n\n\n\n\n\n\nçŸ¥é“ä»»æ„ä¸‰ä¸ªï¼Œå¯æ±‚ç¬¬å››ä¸ªï¼š - æ ·æœ¬é‡è®¡ç®—ï¼šå·²çŸ¥ Î±, åŠŸæ•ˆ, æ•ˆåº”é‡ â†’ æ±‚ n - åŠŸæ•ˆè®¡ç®—ï¼šå·²çŸ¥ Î±, n, æ•ˆåº”é‡ â†’ æ±‚åŠŸæ•ˆ - æ•ˆåº”é‡ä¼°è®¡ï¼šå·²çŸ¥ Î±, n, åŠŸæ•ˆ â†’ æ±‚å¯æ£€æµ‹æ•ˆåº”é‡",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ ·æœ¬é‡è®¡ç®—"
    ]
  },
  {
    "objectID": "1048-power-analysis.html#å®‰è£…ä¸åŠ è½½",
    "href": "1048-power-analysis.html#å®‰è£…ä¸åŠ è½½",
    "title": "æ ·æœ¬é‡ä¸åŠŸæ•ˆåˆ†æ",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\nlibrary(pwr)\nlibrary(ggplot2)\n\ntheme_set(theme_bw(base_size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ ·æœ¬é‡è®¡ç®—"
    ]
  },
  {
    "objectID": "1048-power-analysis.html#ç¬¬ä¸€éƒ¨åˆ†t-æ£€éªŒæ ·æœ¬é‡",
    "href": "1048-power-analysis.html#ç¬¬ä¸€éƒ¨åˆ†t-æ£€éªŒæ ·æœ¬é‡",
    "title": "æ ·æœ¬é‡ä¸åŠŸæ•ˆåˆ†æ",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼št æ£€éªŒæ ·æœ¬é‡",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼št æ£€éªŒæ ·æœ¬é‡\n\nç‹¬ç«‹æ ·æœ¬ t æ£€éªŒ\n\n# åŒä¾§æ£€éªŒï¼Œä¸­ç­‰æ•ˆåº”ï¼ˆd=0.5ï¼‰ï¼ŒåŠŸæ•ˆ=0.8ï¼ŒÎ±=0.05\npwr.t.test(\n    d = 0.5, # Cohen's d\n    sig.level = 0.05,\n    power = 0.80,\n    type = \"two.sample\"\n)\n\n\n     Two-sample t test power calculation \n\n              n = 63.76561\n              d = 0.5\n      sig.level = 0.05\n          power = 0.8\n    alternative = two.sided\n\nNOTE: n is number in *each* group\n\n\nè§£è¯»ï¼šæ¯ç»„éœ€è¦ 64 äººï¼Œæ€»å…± 128 äººã€‚\n\n\né…å¯¹ t æ£€éªŒ\n\npwr.t.test(\n    d = 0.5,\n    sig.level = 0.05,\n    power = 0.80,\n    type = \"paired\"\n)\n\n\n     Paired t test power calculation \n\n              n = 33.36713\n              d = 0.5\n      sig.level = 0.05\n          power = 0.8\n    alternative = two.sided\n\nNOTE: n is number of *pairs*\n\n\n\n\nCohenâ€™s d å‚è€ƒæ ‡å‡†\n\n\n\næ•ˆåº”å¤§å°\nCohenâ€™s d\nå«ä¹‰\n\n\n\n\nå°\n0.2\nå¾®å¼±å·®å¼‚\n\n\nä¸­\n0.5\nä¸­ç­‰å·®å¼‚\n\n\nå¤§\n0.8\næ˜æ˜¾å·®å¼‚\n\n\n\n\n\nä»åŸå§‹æ•°æ®ä¼°ç®— d\n\n# æ ¹æ®å‡å€¼å·®å’Œæ ‡å‡†å·®ä¼°ç®—\nmean_diff &lt;- 5 # é¢„æœŸå‡å€¼å·®\npooled_sd &lt;- 10 # åˆå¹¶æ ‡å‡†å·®\nd &lt;- mean_diff / pooled_sd\ncat(\"Cohen's d =\", d)\n\nCohen's d = 0.5",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ ·æœ¬é‡è®¡ç®—"
    ]
  },
  {
    "objectID": "1048-power-analysis.html#ç¬¬äºŒéƒ¨åˆ†æ–¹å·®åˆ†ææ ·æœ¬é‡",
    "href": "1048-power-analysis.html#ç¬¬äºŒéƒ¨åˆ†æ–¹å·®åˆ†ææ ·æœ¬é‡",
    "title": "æ ·æœ¬é‡ä¸åŠŸæ•ˆåˆ†æ",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šæ–¹å·®åˆ†ææ ·æœ¬é‡",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šæ–¹å·®åˆ†ææ ·æœ¬é‡\n\nå•å› ç´  ANOVA\n\n# k=3ç»„ï¼Œä¸­ç­‰æ•ˆåº”ï¼ˆf=0.25ï¼‰\npwr.anova.test(\n    k = 3, # ç»„æ•°\n    f = 0.25, # æ•ˆåº”é‡\n    sig.level = 0.05,\n    power = 0.80\n)\n\n\n     Balanced one-way analysis of variance power calculation \n\n              k = 3\n              n = 52.3966\n              f = 0.25\n      sig.level = 0.05\n          power = 0.8\n\nNOTE: n is number in each group\n\n\nè§£è¯»ï¼šæ¯ç»„éœ€è¦ 52 äººï¼Œæ€»å…± 156 äººã€‚\n\n\næ•ˆåº”é‡ f è½¬æ¢\n\n# ä» eta-squared è½¬æ¢\neta_sq &lt;- 0.06 # ä¸­ç­‰æ•ˆåº”\nf &lt;- sqrt(eta_sq / (1 - eta_sq))\ncat(\"f =\", round(f, 3))\n\nf = 0.253\n\n\n\n\n\nÎ·Â²\nf\næ•ˆåº”å¤§å°\n\n\n\n\n0.01\n0.10\nå°\n\n\n0.06\n0.25\nä¸­\n\n\n0.14\n0.40\nå¤§",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ ·æœ¬é‡è®¡ç®—"
    ]
  },
  {
    "objectID": "1048-power-analysis.html#ç¬¬ä¸‰éƒ¨åˆ†ç›¸å…³åˆ†ææ ·æœ¬é‡",
    "href": "1048-power-analysis.html#ç¬¬ä¸‰éƒ¨åˆ†ç›¸å…³åˆ†ææ ·æœ¬é‡",
    "title": "æ ·æœ¬é‡ä¸åŠŸæ•ˆåˆ†æ",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šç›¸å…³åˆ†ææ ·æœ¬é‡",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šç›¸å…³åˆ†ææ ·æœ¬é‡\n\n# ä¸­ç­‰ç›¸å…³ï¼ˆr=0.3ï¼‰\npwr.r.test(\n    r = 0.3,\n    sig.level = 0.05,\n    power = 0.80\n)\n\n\n     approximate correlation power calculation (arctangh transformation) \n\n              n = 84.07364\n              r = 0.3\n      sig.level = 0.05\n          power = 0.8\n    alternative = two.sided\n\n\nè§£è¯»ï¼šéœ€è¦ 84 ä¸ªæ ·æœ¬ã€‚\n\n\n\nr\næ•ˆåº”å¤§å°\n\n\n\n\n0.1\nå°\n\n\n0.3\nä¸­\n\n\n0.5\nå¤§",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ ·æœ¬é‡è®¡ç®—"
    ]
  },
  {
    "objectID": "1048-power-analysis.html#ç¬¬å››éƒ¨åˆ†å¡æ–¹æ£€éªŒæ ·æœ¬é‡",
    "href": "1048-power-analysis.html#ç¬¬å››éƒ¨åˆ†å¡æ–¹æ£€éªŒæ ·æœ¬é‡",
    "title": "æ ·æœ¬é‡ä¸åŠŸæ•ˆåˆ†æ",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šå¡æ–¹æ£€éªŒæ ·æœ¬é‡",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šå¡æ–¹æ£€éªŒæ ·æœ¬é‡\n\n# 2x2 åˆ—è”è¡¨ï¼Œä¸­ç­‰æ•ˆåº”\npwr.chisq.test(\n    w = 0.3, # æ•ˆåº”é‡\n    df = 1, # è‡ªç”±åº¦ = (è¡Œ-1)*(åˆ—-1)\n    sig.level = 0.05,\n    power = 0.80\n)\n\n\n     Chi squared power calculation \n\n              w = 0.3\n              N = 87.20954\n             df = 1\n      sig.level = 0.05\n          power = 0.8\n\nNOTE: N is the number of observations\n\n\n\n\n\nw\næ•ˆåº”å¤§å°\n\n\n\n\n0.1\nå°\n\n\n0.3\nä¸­\n\n\n0.5\nå¤§",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ ·æœ¬é‡è®¡ç®—"
    ]
  },
  {
    "objectID": "1048-power-analysis.html#ç¬¬äº”éƒ¨åˆ†å›å½’åˆ†ææ ·æœ¬é‡",
    "href": "1048-power-analysis.html#ç¬¬äº”éƒ¨åˆ†å›å½’åˆ†ææ ·æœ¬é‡",
    "title": "æ ·æœ¬é‡ä¸åŠŸæ•ˆåˆ†æ",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šå›å½’åˆ†ææ ·æœ¬é‡",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šå›å½’åˆ†ææ ·æœ¬é‡\n\n# å¤šå…ƒå›å½’ï¼š5ä¸ªé¢„æµ‹å˜é‡ï¼ŒfÂ²=0.15\npwr.f2.test(\n    u = 5, # é¢„æµ‹å˜é‡æ•°\n    f2 = 0.15, # æ•ˆåº”é‡\n    sig.level = 0.05,\n    power = 0.80\n)\n\n\n     Multiple regression power calculation \n\n              u = 5\n              v = 85.21369\n             f2 = 0.15\n      sig.level = 0.05\n          power = 0.8\n\n\nè§£è¯»ï¼šéœ€è¦ \\(v+u+1 = 73+5+1 = 79\\) ä¸ªæ ·æœ¬ã€‚\n\n\n\nfÂ²\næ•ˆåº”å¤§å°\nRÂ²\n\n\n\n\n0.02\nå°\n0.02\n\n\n0.15\nä¸­\n0.13\n\n\n0.35\nå¤§\n0.26",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ ·æœ¬é‡è®¡ç®—"
    ]
  },
  {
    "objectID": "1048-power-analysis.html#ç¬¬å…­éƒ¨åˆ†å¯è§†åŒ–åŠŸæ•ˆæ›²çº¿",
    "href": "1048-power-analysis.html#ç¬¬å…­éƒ¨åˆ†å¯è§†åŒ–åŠŸæ•ˆæ›²çº¿",
    "title": "æ ·æœ¬é‡ä¸åŠŸæ•ˆåˆ†æ",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šå¯è§†åŒ–åŠŸæ•ˆæ›²çº¿",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šå¯è§†åŒ–åŠŸæ•ˆæ›²çº¿\n\næ ·æœ¬é‡ vs åŠŸæ•ˆ\n\n# è®¡ç®—ä¸åŒæ ·æœ¬é‡çš„åŠŸæ•ˆ\nsample_sizes &lt;- seq(10, 200, by = 5)\npowers &lt;- sapply(sample_sizes, function(n) {\n    pwr.t.test(n = n, d = 0.5, sig.level = 0.05)$power\n})\n\n# ç»‘å›¾\npower_df &lt;- data.frame(n = sample_sizes, power = powers)\n\nggplot(power_df, aes(x = n, y = power)) +\n    geom_line(color = \"#4f46e5\", linewidth = 1.2) +\n    geom_hline(yintercept = 0.8, linetype = \"dashed\", color = \"red\") +\n    geom_vline(xintercept = 64, linetype = \"dashed\", color = \"gray50\") +\n    labs(\n        title = \"åŠŸæ•ˆæ›²çº¿ï¼ˆCohen's d = 0.5ï¼‰\",\n        x = \"æ¯ç»„æ ·æœ¬é‡\",\n        y = \"ç»Ÿè®¡åŠŸæ•ˆ\"\n    ) +\n    scale_y_continuous(limits = c(0, 1), breaks = seq(0, 1, 0.2)) +\n    annotate(\"text\", x = 70, y = 0.75, label = \"n = 64\", color = \"gray30\")\n\n\n\n\n\n\n\n\n\n\næ•ˆåº”é‡ vs æ‰€éœ€æ ·æœ¬\n\neffect_sizes &lt;- seq(0.2, 1, by = 0.05)\nsample_needed &lt;- sapply(effect_sizes, function(d) {\n    pwr.t.test(d = d, sig.level = 0.05, power = 0.80)$n\n})\n\neffect_df &lt;- data.frame(d = effect_sizes, n = sample_needed)\n\nggplot(effect_df, aes(x = d, y = n)) +\n    geom_line(color = \"#10b981\", linewidth = 1.2) +\n    labs(\n        title = \"æ•ˆåº”é‡ä¸æ‰€éœ€æ ·æœ¬é‡çš„å…³ç³»\",\n        x = \"Cohen's d\",\n        y = \"æ¯ç»„æ‰€éœ€æ ·æœ¬é‡\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ ·æœ¬é‡è®¡ç®—"
    ]
  },
  {
    "objectID": "1048-power-analysis.html#ç¬¬ä¸ƒéƒ¨åˆ†ä¸´åºŠç ”ç©¶æ¡ˆä¾‹",
    "href": "1048-power-analysis.html#ç¬¬ä¸ƒéƒ¨åˆ†ä¸´åºŠç ”ç©¶æ¡ˆä¾‹",
    "title": "æ ·æœ¬é‡ä¸åŠŸæ•ˆåˆ†æ",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šä¸´åºŠç ”ç©¶æ¡ˆä¾‹",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šä¸´åºŠç ”ç©¶æ¡ˆä¾‹\n\nRCT æ ·æœ¬é‡è®¡ç®—\n\n# å‡è®¾ï¼šå¯¹ç…§ç»„æ²»æ„ˆç‡40%ï¼Œå¹²é¢„ç»„é¢„æœŸ60%\n# è½¬æ¢ä¸º Cohen's h\np1 &lt;- 0.40 # å¯¹ç…§ç»„æ¯”ä¾‹\np2 &lt;- 0.60 # å¹²é¢„ç»„æ¯”ä¾‹\nh &lt;- 2 * asin(sqrt(p2)) - 2 * asin(sqrt(p1))\n\npwr.2p.test(h = h, sig.level = 0.05, power = 0.80)\n\n\n     Difference of proportion power calculation for binomial distribution (arcsine transformation) \n\n              h = 0.4027158\n              n = 96.79194\n      sig.level = 0.05\n          power = 0.8\n    alternative = two.sided\n\nNOTE: same sample sizes\n\n\nè§£è¯»ï¼šæ¯ç»„éœ€è¦ 97 äººã€‚\n\n\nè€ƒè™‘è„±è½ç‡\n\n# é¢„æœŸè„±è½ç‡ 15%\nn_calculated &lt;- 97\ndropout_rate &lt;- 0.15\nn_final &lt;- ceiling(n_calculated / (1 - dropout_rate))\ncat(\"è€ƒè™‘è„±è½åæ¯ç»„éœ€è¦:\", n_final, \"äºº\\n\")\n\nè€ƒè™‘è„±è½åæ¯ç»„éœ€è¦: 115 äºº\n\ncat(\"æ€»æ ·æœ¬é‡:\", n_final * 2, \"äºº\")\n\næ€»æ ·æœ¬é‡: 230 äºº",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ ·æœ¬é‡è®¡ç®—"
    ]
  },
  {
    "objectID": "1048-power-analysis.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "1048-power-analysis.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "æ ·æœ¬é‡ä¸åŠŸæ•ˆåˆ†æ",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# t æ£€éªŒ\npwr.t.test(d = 0.5, power = 0.8, sig.level = 0.05)\n\n# é…å¯¹ t æ£€éªŒ\npwr.t.test(d = 0.5, power = 0.8, type = \"paired\")\n\n# ANOVA\npwr.anova.test(k = 3, f = 0.25, power = 0.8)\n\n# ç›¸å…³\npwr.r.test(r = 0.3, power = 0.8)\n\n# å¡æ–¹\npwr.chisq.test(w = 0.3, df = 1, power = 0.8)\n\n# å›å½’\npwr.f2.test(u = 5, f2 = 0.15, power = 0.8)\n\n# ä¸¤æ¯”ä¾‹\npwr.2p.test(h = 0.5, power = 0.8)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ ·æœ¬é‡è®¡ç®—"
    ]
  },
  {
    "objectID": "1048-power-analysis.html#å°ç»“",
    "href": "1048-power-analysis.html#å°ç»“",
    "title": "æ ·æœ¬é‡ä¸åŠŸæ•ˆåˆ†æ",
    "section": "å°ç»“",
    "text": "å°ç»“\næ ·æœ¬é‡è®¡ç®—è¦ç‚¹ï¼š\n\næ˜ç¡®ç ”ç©¶è®¾è®¡ï¼šé€‰æ‹©æ­£ç¡®çš„ç»Ÿè®¡æ–¹æ³•\né¢„ä¼°æ•ˆåº”é‡ï¼šå‚è€ƒæ–‡çŒ®æˆ–é¢„å®éªŒ\nè®¾å®šåŠŸæ•ˆæ°´å¹³ï¼šé€šå¸¸ 80% æˆ– 90%\nè€ƒè™‘å®é™…å› ç´ ï¼šè„±è½ç‡ã€å¤šé‡æ¯”è¾ƒ\n\n\nå»ºè®®ï¼šå®å¯ç•¥å¾®é«˜ä¼°æ ·æœ¬é‡ï¼Œé¢„ç•™ 10-20% ä½™é‡ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ ·æœ¬é‡è®¡ç®—"
    ]
  },
  {
    "objectID": "1048-power-analysis.html#å‚è€ƒèµ„æº",
    "href": "1048-power-analysis.html#å‚è€ƒèµ„æº",
    "title": "æ ·æœ¬é‡ä¸åŠŸæ•ˆåˆ†æ",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\npwr åŒ…æ–‡æ¡£\nG*Power è½¯ä»¶\nCohen, J. (1988). Statistical Power Analysis for the Behavioral Sciences",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ ·æœ¬é‡è®¡ç®—"
    ]
  },
  {
    "objectID": "1046-missing-data.html",
    "href": "1046-missing-data.html",
    "title": "ç¼ºå¤±å€¼æŸ¥çœ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "ç¼ºå¤±æ•°æ®æ˜¯æ•°æ®åˆ†æä¸­æœ€å¸¸è§çš„é—®é¢˜ä¹‹ä¸€ã€‚æ­£ç¡®è¯†åˆ«å’Œå¤„ç†ç¼ºå¤±å€¼å¯¹äºè·å¾—å¯é çš„ç»Ÿè®¡æ¨æ–­è‡³å…³é‡è¦ã€‚æœ¬æ•™ç¨‹å°†å…¨é¢ä»‹ç»ç¼ºå¤±å€¼çš„æ£€æµ‹ã€å¯è§†åŒ–å’Œå¤„ç†æ–¹æ³•ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nç±»å‹\nå…¨ç§°\nå«ä¹‰\nä¾‹å­\nå¤„ç†éš¾åº¦\n\n\n\n\nMCAR\nMissing Completely At Random\nå®Œå…¨éšæœºç¼ºå¤±ï¼Œä¸ä»»ä½•å˜é‡æ— å…³\né—®å·éšæœºä¸¢å¤±\næ˜“\n\n\nMAR\nMissing At Random\nç¼ºå¤±ä¾èµ–äºå…¶ä»–è§‚æµ‹å˜é‡\né«˜æ”¶å…¥äººç¾¤æ›´ä¸æ„¿æŠ¥å‘Šæ”¶å…¥\nä¸­\n\n\nMNAR\nMissing Not At Random\nç¼ºå¤±ä¾èµ–äºç¼ºå¤±å€¼æœ¬èº«\næŠ‘éƒä¸¥é‡è€…æ›´å¯èƒ½ä¸å¡«é—®å·\néš¾\n\n\n\n\n\n\n\n\n\nç­–ç•¥\né€‚ç”¨åœºæ™¯\nä¼˜ç‚¹\nç¼ºç‚¹\n\n\n\n\nåˆ é™¤æ³•\nMCARï¼Œç¼ºå¤±å°‘\nç®€å•\næŸå¤±ä¿¡æ¯ï¼Œå¯èƒ½æœ‰å\n\n\nå•å€¼å¡«å……\nå¿«é€Ÿé¢„è§ˆ\nå¿«é€Ÿ\nä½ä¼°æ–¹å·®\n\n\nå¤šé‡æ’è¡¥\nMAR\nä¿ç•™ä¸ç¡®å®šæ€§\nè®¡ç®—å¤æ‚\n\n\næœ€å¤§ä¼¼ç„¶\nMAR\né«˜æ•ˆæ— å\néœ€ç‰¹å®šæ¨¡å‹",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "ç¼ºå¤±å€¼å¤„ç†"
    ]
  },
  {
    "objectID": "1046-missing-data.html#ç¼ºå¤±å€¼é—®é¢˜æ¦‚è¿°",
    "href": "1046-missing-data.html#ç¼ºå¤±å€¼é—®é¢˜æ¦‚è¿°",
    "title": "ç¼ºå¤±å€¼æŸ¥çœ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "ç¼ºå¤±æ•°æ®æ˜¯æ•°æ®åˆ†æä¸­æœ€å¸¸è§çš„é—®é¢˜ä¹‹ä¸€ã€‚æ­£ç¡®è¯†åˆ«å’Œå¤„ç†ç¼ºå¤±å€¼å¯¹äºè·å¾—å¯é çš„ç»Ÿè®¡æ¨æ–­è‡³å…³é‡è¦ã€‚æœ¬æ•™ç¨‹å°†å…¨é¢ä»‹ç»ç¼ºå¤±å€¼çš„æ£€æµ‹ã€å¯è§†åŒ–å’Œå¤„ç†æ–¹æ³•ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nç±»å‹\nå…¨ç§°\nå«ä¹‰\nä¾‹å­\nå¤„ç†éš¾åº¦\n\n\n\n\nMCAR\nMissing Completely At Random\nå®Œå…¨éšæœºç¼ºå¤±ï¼Œä¸ä»»ä½•å˜é‡æ— å…³\né—®å·éšæœºä¸¢å¤±\næ˜“\n\n\nMAR\nMissing At Random\nç¼ºå¤±ä¾èµ–äºå…¶ä»–è§‚æµ‹å˜é‡\né«˜æ”¶å…¥äººç¾¤æ›´ä¸æ„¿æŠ¥å‘Šæ”¶å…¥\nä¸­\n\n\nMNAR\nMissing Not At Random\nç¼ºå¤±ä¾èµ–äºç¼ºå¤±å€¼æœ¬èº«\næŠ‘éƒä¸¥é‡è€…æ›´å¯èƒ½ä¸å¡«é—®å·\néš¾\n\n\n\n\n\n\n\n\n\nç­–ç•¥\né€‚ç”¨åœºæ™¯\nä¼˜ç‚¹\nç¼ºç‚¹\n\n\n\n\nåˆ é™¤æ³•\nMCARï¼Œç¼ºå¤±å°‘\nç®€å•\næŸå¤±ä¿¡æ¯ï¼Œå¯èƒ½æœ‰å\n\n\nå•å€¼å¡«å……\nå¿«é€Ÿé¢„è§ˆ\nå¿«é€Ÿ\nä½ä¼°æ–¹å·®\n\n\nå¤šé‡æ’è¡¥\nMAR\nä¿ç•™ä¸ç¡®å®šæ€§\nè®¡ç®—å¤æ‚\n\n\næœ€å¤§ä¼¼ç„¶\nMAR\né«˜æ•ˆæ— å\néœ€ç‰¹å®šæ¨¡å‹",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "ç¼ºå¤±å€¼å¤„ç†"
    ]
  },
  {
    "objectID": "1046-missing-data.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "href": "1046-missing-data.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "title": "ç¼ºå¤±å€¼æŸ¥çœ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "R åŒ…å®‰è£…ä¸åŠ è½½",
    "text": "R åŒ…å®‰è£…ä¸åŠ è½½\n\n# æ ¸å¿ƒåŒ…\nlibrary(tidyverse) # æ•°æ®å¤„ç†\nlibrary(naniar) # ç¼ºå¤±å€¼å¯è§†åŒ–ï¼ˆæ ¸å¿ƒï¼‰\nlibrary(VIM) # é«˜çº§å¯è§†åŒ–\nlibrary(mice) # å¤šé‡æ’è¡¥\nlibrary(finalfit) # ä¸´åºŠç ”ç©¶æŠ¥å‘Š\n\n# è¾…åŠ©åŒ…\nlibrary(visdat) # æ•°æ®æ¦‚è§ˆ\nlibrary(missRanger) # éšæœºæ£®æ—æ’è¡¥\n\ntheme_set(theme_minimal(base_size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "ç¼ºå¤±å€¼å¤„ç†"
    ]
  },
  {
    "objectID": "1046-missing-data.html#åˆ›å»ºç¤ºä¾‹æ•°æ®",
    "href": "1046-missing-data.html#åˆ›å»ºç¤ºä¾‹æ•°æ®",
    "title": "ç¼ºå¤±å€¼æŸ¥çœ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "åˆ›å»ºç¤ºä¾‹æ•°æ®",
    "text": "åˆ›å»ºç¤ºä¾‹æ•°æ®\n\n# åˆ›å»ºå«å¤šç§ç¼ºå¤±æ¨¡å¼çš„ç¤ºä¾‹æ•°æ®\nset.seed(2024)\nn &lt;- 500\n\n# åŸºç¡€æ•°æ®ï¼ˆæ— ç¼ºå¤±ï¼‰\ndf_complete &lt;- tibble(\n    id = 1:n,\n    age = round(rnorm(n, 55, 12)),\n    sex = factor(sample(c(\"ç”·\", \"å¥³\"), n, replace = TRUE)),\n    education = factor(\n        sample(c(\"åˆä¸­\", \"é«˜ä¸­\", \"æœ¬ç§‘\", \"ç ”ç©¶ç”Ÿ\"), n,\n            replace = TRUE,\n            prob = c(0.15, 0.35, 0.35, 0.15)\n        ),\n        levels = c(\"åˆä¸­\", \"é«˜ä¸­\", \"æœ¬ç§‘\", \"ç ”ç©¶ç”Ÿ\")\n    ),\n    income = round(rnorm(n, 8000, 3000)),\n    bmi = round(rnorm(n, 24, 4), 1),\n    blood_pressure = round(rnorm(n, 130, 20)),\n    cholesterol = round(rnorm(n, 200, 40)),\n    glucose = round(rnorm(n, 100, 25)),\n    exercise_hours = round(rpois(n, 3)),\n    smoking = factor(sample(c(\"ä»ä¸\", \"å·²æˆ’\", \"å¸çƒŸ\"), n,\n        replace = TRUE,\n        prob = c(0.5, 0.2, 0.3)\n    )),\n    disease_score = round(50 + 0.3 * (age - 55) + 5 * (bmi - 24) + rnorm(n, 0, 10))\n)\n\n# å¼•å…¥ä¸åŒç±»å‹çš„ç¼ºå¤±\ndf &lt;- df_complete %&gt;%\n    mutate(\n        # MCAR: å®Œå…¨éšæœºç¼ºå¤±ï¼ˆå¹´é¾„ï¼Œçº¦10%ï¼‰\n        age = ifelse(runif(n) &lt; 0.10, NA, age),\n\n        # MAR: ä¾èµ–å…¶ä»–å˜é‡ï¼ˆæ”¶å…¥ç¼ºå¤±ä¸æ•™è‚²æ°´å¹³ç›¸å…³ - æ•™è‚²ä½çš„æ›´ä¸æ„¿æŠ¥å‘Šï¼‰\n        income = ifelse(\n            as.numeric(education) &lt;= 2 & runif(n) &lt; 0.25, # åˆä¸­/é«˜ä¸­25%ç¼ºå¤±\n            NA,\n            ifelse(runif(n) &lt; 0.05, NA, income) # å…¶ä»–5%ç¼ºå¤±\n        ),\n\n        # MAR: èƒ†å›ºé†‡ç¼ºå¤±ä¸å¹´é¾„ç›¸å…³\n        cholesterol = ifelse(age &gt; 60 | runif(n) &lt; 0.15,\n            ifelse(runif(n) &lt; 0.3, NA, cholesterol),\n            cholesterol\n        ),\n\n        # è¡€ç³–ï¼šä¸BMIç›¸å…³çš„ç¼ºå¤±\n        glucose = ifelse(bmi &gt; 28 & runif(n) &lt; 0.2, NA,\n            ifelse(runif(n) &lt; 0.08, NA, glucose)\n        ),\n\n        # æ•™è‚²ï¼šå°‘é‡éšæœºç¼ºå¤±\n        education = ifelse(runif(n) &lt; 0.05, NA, as.character(education)),\n        education = factor(education, levels = c(\"åˆä¸­\", \"é«˜ä¸­\", \"æœ¬ç§‘\", \"ç ”ç©¶ç”Ÿ\")),\n\n        # å¸çƒŸçŠ¶æ€ï¼šæå°‘ç¼ºå¤±\n        smoking = ifelse(runif(n) &lt; 0.03, NA, as.character(smoking)),\n        smoking = factor(smoking, levels = c(\"ä»ä¸\", \"å·²æˆ’\", \"å¸çƒŸ\"))\n    )\n\n# æŸ¥çœ‹æ•°æ®\nglimpse(df)\n\nRows: 500\nColumns: 12\n$ id             &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, â€¦\n$ age            &lt;dbl&gt; 67, 61, 54, 52, 69, 71, 61, 53, 40, 42, 35, 61, 65, NA,â€¦\n$ sex            &lt;fct&gt; å¥³, å¥³, ç”·, å¥³, å¥³, ç”·, ç”·, ç”·, å¥³, å¥³, å¥³, å¥³, å¥³, å¥³, ç”·, ç”·, ç”·, ç”·, å¥³â€¦\n$ education      &lt;fct&gt; æœ¬ç§‘, é«˜ä¸­, ç ”ç©¶ç”Ÿ, æœ¬ç§‘, åˆä¸­, åˆä¸­, æœ¬ç§‘, é«˜ä¸­, åˆä¸­, æœ¬ç§‘, é«˜ä¸­, é«˜ä¸­, æœ¬ç§‘, é«˜ä¸­â€¦\n$ income         &lt;dbl&gt; 7845, 6502, 5292, 6884, 7435, 5790, 5371, 3805, 9184, 6â€¦\n$ bmi            &lt;dbl&gt; 34.2, 23.3, 26.9, 19.8, 22.8, 24.1, 28.9, 23.0, 30.8, 2â€¦\n$ blood_pressure &lt;dbl&gt; 150, 104, 118, 83, 122, 89, 150, 152, 104, 111, 104, 11â€¦\n$ cholesterol    &lt;dbl&gt; 121, 232, NA, 212, NA, 177, 247, 187, 138, 238, 171, 17â€¦\n$ glucose        &lt;dbl&gt; NA, 107, 113, 96, 104, 122, NA, 57, 100, 108, 80, NA, 1â€¦\n$ exercise_hours &lt;dbl&gt; 4, 2, 0, 1, 3, 5, 7, 7, 2, 4, 5, 3, 3, 1, 5, 4, 0, 4, 3â€¦\n$ smoking        &lt;fct&gt; å·²æˆ’, ä»ä¸, ä»ä¸, ä»ä¸, ä»ä¸, å·²æˆ’, å·²æˆ’, ä»ä¸, å¸çƒŸ, ä»ä¸, å¸çƒŸ, å·²æˆ’, ä»ä¸, å¸çƒŸ,â€¦\n$ disease_score  &lt;dbl&gt; 115, 42, 50, 4, 55, 62, 88, 53, 90, 71, 48, 73, 40, 45,â€¦",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "ç¼ºå¤±å€¼å¤„ç†"
    ]
  },
  {
    "objectID": "1046-missing-data.html#ç¬¬ä¸€éƒ¨åˆ†ç¼ºå¤±å€¼æ£€æµ‹",
    "href": "1046-missing-data.html#ç¬¬ä¸€éƒ¨åˆ†ç¼ºå¤±å€¼æ£€æµ‹",
    "title": "ç¼ºå¤±å€¼æŸ¥çœ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šç¼ºå¤±å€¼æ£€æµ‹",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šç¼ºå¤±å€¼æ£€æµ‹\n\nåŸºç¡€ç»Ÿè®¡\n\n# æ€»ä½“ç¼ºå¤±æƒ…å†µ\ncat(\"===== ç¼ºå¤±å€¼åŸºç¡€ç»Ÿè®¡ =====\\n\")\n\n===== ç¼ºå¤±å€¼åŸºç¡€ç»Ÿè®¡ =====\n\ncat(\"æ€»ç¼ºå¤±æ•°:\", sum(is.na(df)), \"\\n\")\n\næ€»ç¼ºå¤±æ•°: 301 \n\ncat(\"æ€»ç¼ºå¤±ç‡:\", round(mean(is.na(df)) * 100, 2), \"%\\n\\n\")\n\næ€»ç¼ºå¤±ç‡: 5.02 %\n\n# æ¯åˆ—ç¼ºå¤±æ•°å’Œæ¯”ä¾‹\nmissing_summary &lt;- data.frame(\n    å˜é‡ = names(df),\n    ç¼ºå¤±æ•° = sapply(df, function(x) sum(is.na(x))),\n    ç¼ºå¤±ç‡ = sapply(df, function(x) round(mean(is.na(x)) * 100, 2))\n)\nmissing_summary %&gt;%\n    filter(ç¼ºå¤±æ•° &gt; 0) %&gt;%\n    arrange(desc(ç¼ºå¤±ç‡))\n\n                   å˜é‡ ç¼ºå¤±æ•° ç¼ºå¤±ç‡\ncholesterol cholesterol     90   18.0\nincome           income     80   16.0\nglucose         glucose     66   13.2\nage                 age     36    7.2\neducation     education     18    3.6\nsmoking         smoking     11    2.2\n\n\n\n\nä½¿ç”¨ naniar åŒ…\nnaniar åŒ…æä¾›äº† tidyverse é£æ ¼çš„ç¼ºå¤±å€¼å¤„ç†å‡½æ•°ã€‚\n\n# å˜é‡çº§åˆ«çš„ç¼ºå¤±æ‘˜è¦\nmiss_var_summary(df)\n\n# A tibble: 12 Ã— 3\n   variable       n_miss pct_miss\n   &lt;chr&gt;           &lt;int&gt;    &lt;num&gt;\n 1 cholesterol        90     18  \n 2 income             80     16  \n 3 glucose            66     13.2\n 4 age                36      7.2\n 5 education          18      3.6\n 6 smoking            11      2.2\n 7 id                  0      0  \n 8 sex                 0      0  \n 9 bmi                 0      0  \n10 blood_pressure      0      0  \n11 exercise_hours      0      0  \n12 disease_score       0      0  \n\n\n\n# æ ·æœ¬çº§åˆ«çš„ç¼ºå¤±æ‘˜è¦\nmiss_case_summary(df) %&gt;%\n    head(10)\n\n# A tibble: 10 Ã— 3\n    case n_miss pct_miss\n   &lt;int&gt;  &lt;int&gt;    &lt;dbl&gt;\n 1   136      4     33.3\n 2   346      4     33.3\n 3   413      4     33.3\n 4    41      3     25  \n 5    68      3     25  \n 6    83      3     25  \n 7   111      3     25  \n 8   122      3     25  \n 9   172      3     25  \n10   218      3     25  \n\n\n\n# ç¼ºå¤±è¡¨æ ¼ï¼ˆæŒ‰ç¼ºå¤±å˜é‡æ•°åˆ†ç»„ï¼‰\nmiss_case_table(df)\n\n# A tibble: 5 Ã— 3\n  n_miss_in_case n_cases pct_cases\n           &lt;int&gt;   &lt;int&gt;     &lt;dbl&gt;\n1              0     280      56  \n2              1     156      31.2\n3              2      50      10  \n4              3      11       2.2\n5              4       3       0.6\n\n\n\n\nä½¿ç”¨ finalfit åŒ…\nfinalfit åŒ…ç‰¹åˆ«é€‚åˆä¸´åºŠç ”ç©¶æŠ¥å‘Šã€‚\n\n# ç¼ºå¤±æ¨¡å¼æ‘˜è¦\nff_glimpse(df)\n\n$Continuous\n                        label var_type   n missing_n missing_percent   mean\nid                         id    &lt;int&gt; 500         0             0.0  250.5\nage                       age    &lt;dbl&gt; 464        36             7.2   55.7\nincome                 income    &lt;dbl&gt; 420        80            16.0 8126.0\nbmi                       bmi    &lt;dbl&gt; 500         0             0.0   24.0\nblood_pressure blood_pressure    &lt;dbl&gt; 500         0             0.0  130.7\ncholesterol       cholesterol    &lt;dbl&gt; 410        90            18.0  199.1\nglucose               glucose    &lt;dbl&gt; 434        66            13.2   99.2\nexercise_hours exercise_hours    &lt;dbl&gt; 500         0             0.0    3.0\ndisease_score   disease_score    &lt;dbl&gt; 500         0             0.0   50.2\n                   sd   min quartile_25 median quartile_75     max\nid              144.5   1.0       125.8  250.5       375.2   500.0\nage              11.6  16.0        48.0   56.0        64.0    90.0\nincome         2872.1 438.0      6310.5 7830.5      9930.8 15544.0\nbmi               3.9  12.2        21.4   24.1        26.8    35.0\nblood_pressure   19.2  70.0       118.0  132.0       144.0   190.0\ncholesterol      41.0  78.0       170.0  199.0       229.8   300.0\nglucose          25.3  16.0        81.0   99.0       116.0   171.0\nexercise_hours    1.8   0.0         2.0    3.0         4.0    10.0\ndisease_score    22.2 -21.0        36.0   50.0        64.2   115.0\n\n$Categorical\n              label var_type   n missing_n missing_percent levels_n\nsex             sex    &lt;fct&gt; 500         0             0.0        2\neducation education    &lt;fct&gt; 482        18             3.6        4\nsmoking     smoking    &lt;fct&gt; 489        11             2.2        3\n                                                 levels         levels_count\nsex                             \"ç”·\", \"å¥³\", \"(Missing)\"             255, 245\neducation \"åˆä¸­\", \"é«˜ä¸­\", \"æœ¬ç§‘\", \"ç ”ç©¶ç”Ÿ\", \"(Missing)\" 76, 166, 176, 64, 18\nsmoking             \"ä»ä¸\", \"å·²æˆ’\", \"å¸çƒŸ\", \"(Missing)\"     238, 96, 155, 11\n                        levels_percent\nsex                             51, 49\neducation 15.2, 33.2, 35.2, 12.8,  3.6\nsmoking         47.6, 19.2, 31.0,  2.2\n\n\n\n# ä¸ç»“å±€å˜é‡å…³è”çš„ç¼ºå¤±åˆ†æ\nexplanatory &lt;- c(\"age\", \"sex\", \"education\", \"income\", \"bmi\", \"cholesterol\")\ndependent &lt;- \"disease_score\"\n\ndf %&gt;%\n    missing_pattern(dependent, explanatory)\n\n\n\n\n\n\n\n\n    sex bmi disease_score education age income cholesterol    \n329   1   1             1         1   1      1           1   0\n48    1   1             1         1   1      1           0   1\n67    1   1             1         1   1      0           1   1\n5     1   1             1         1   1      0           0   2\n1     1   1             1         1   0      1           1   1\n28    1   1             1         1   0      1           0   2\n4     1   1             1         1   0      0           0   3\n11    1   1             1         0   1      1           1   1\n1     1   1             1         0   1      1           0   2\n2     1   1             1         0   1      0           1   2\n1     1   1             1         0   1      0           0   3\n2     1   1             1         0   0      1           0   3\n1     1   1             1         0   0      0           0   4\n      0   0             0        18  36     80          90 224",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "ç¼ºå¤±å€¼å¤„ç†"
    ]
  },
  {
    "objectID": "1046-missing-data.html#ç¬¬äºŒéƒ¨åˆ†ç¼ºå¤±å€¼å¯è§†åŒ–",
    "href": "1046-missing-data.html#ç¬¬äºŒéƒ¨åˆ†ç¼ºå¤±å€¼å¯è§†åŒ–",
    "title": "ç¼ºå¤±å€¼æŸ¥çœ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šç¼ºå¤±å€¼å¯è§†åŒ–",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šç¼ºå¤±å€¼å¯è§†åŒ–\nå¯è§†åŒ–æ˜¯ç†è§£ç¼ºå¤±æ¨¡å¼çš„å…³é”®æ­¥éª¤ã€‚\n\nçƒ­å›¾å¯è§†åŒ–\n\n# ä½¿ç”¨ naniar\nvis_miss(df, sort_miss = TRUE) +\n    labs(\n        title = \"ç¼ºå¤±å€¼çƒ­å›¾\",\n        subtitle = \"é»‘è‰²è¡¨ç¤ºç¼ºå¤±ï¼ŒæŒ‰ç¼ºå¤±ç‡æ’åº\"\n    )\n\n\n\n\n\n\n\n\n\n\næ•°æ®ç±»å‹ä¸ç¼ºå¤±æ¦‚è§ˆ\n\n# ä½¿ç”¨ visdat\nvis_dat(df) +\n    labs(title = \"æ•°æ®ç±»å‹ä¸ç¼ºå¤±å€¼æ¦‚è§ˆ\")\n\n\n\n\n\n\n\n\n\n\nUpSet å›¾ï¼šç¼ºå¤±æ¨¡å¼ç»„åˆ\n\n# æ˜¾ç¤ºå˜é‡ç¼ºå¤±çš„ç»„åˆæ¨¡å¼\ngg_miss_upset(df, nsets = 6) +\n    labs(title = \"ç¼ºå¤±æ¨¡å¼ UpSet å›¾\")\n\nNULL\n\n\nè§£è¯»: UpSet å›¾æ˜¾ç¤ºä¸åŒå˜é‡ç¼ºå¤±çš„ç»„åˆã€‚ä¾‹å¦‚ï¼ŒæŸäº›æ ·æœ¬å¯èƒ½åŒæ—¶ç¼ºå¤±æ”¶å…¥å’Œèƒ†å›ºé†‡ã€‚\n\n\nå˜é‡é—´ç¼ºå¤±å…³è”\n\n# ç¼ºå¤±å€¼çš„ç›¸å…³æ€§\ngg_miss_fct(df, fct = sex) +\n    labs(title = \"ç¼ºå¤±ç‡ä¸æ€§åˆ«çš„å…³ç³»\")\n\n\n\n\n\n\n\n\n\n# æŒ‰æ•™è‚²æ°´å¹³æŸ¥çœ‹ç¼ºå¤±\ngg_miss_fct(df %&gt;% filter(!is.na(education)), fct = education) +\n    labs(title = \"ç¼ºå¤±ç‡ä¸æ•™è‚²æ°´å¹³çš„å…³ç³»\")\n\n\n\n\n\n\n\n\n\n\nVIM åŒ…é«˜çº§å¯è§†åŒ–\n\n# èšåˆå›¾ï¼šå±•ç¤ºå˜é‡ç»„åˆçš„ç¼ºå¤±æ¨¡å¼\naggr_plot &lt;- aggr(df,\n    col = c(\"#4f46e5\", \"#ef4444\"),\n    numbers = TRUE,\n    sortVars = TRUE,\n    labels = names(df),\n    cex.axis = 0.7,\n    gap = 3,\n    ylab = c(\"ç¼ºå¤±æ¯”ä¾‹\", \"ç¼ºå¤±æ¨¡å¼\")\n)\n\n\n\n\n\n\n\n\n\n Variables sorted by number of missings: \n       Variable Count\n    cholesterol 0.180\n         income 0.160\n        glucose 0.132\n            age 0.072\n      education 0.036\n        smoking 0.022\n             id 0.000\n            sex 0.000\n            bmi 0.000\n blood_pressure 0.000\n exercise_hours 0.000\n  disease_score 0.000\n\n\n\n# è¾¹é™…å›¾ï¼šå±•ç¤ºä¸¤ä¸ªå˜é‡çš„ç¼ºå¤±å…³ç³»\nmarginplot(df[c(\"income\", \"cholesterol\")],\n    col = c(\"#4f46e5\", \"#ef4444\", \"#22c55e\"),\n    main = \"æ”¶å…¥ä¸èƒ†å›ºé†‡çš„ç¼ºå¤±è¾¹é™…å›¾\"\n)\n\n\n\n\n\n\n\n\nè§£è¯»: è¾¹é™…å›¾ä¸­ï¼Œçº¢è‰²ç‚¹è¡¨ç¤ºä¸€ä¸ªå˜é‡ç¼ºå¤±æ—¶å¦ä¸€ä¸ªå˜é‡çš„åˆ†å¸ƒã€‚å¦‚æœåˆ†å¸ƒä¸è“è‰²ï¼ˆå®Œæ•´æ•°æ®ï¼‰æ˜æ˜¾ä¸åŒï¼Œè¯´æ˜ç¼ºå¤±å¯èƒ½ä¸æ˜¯ MCARã€‚\n\n\nçŸ©é˜µå›¾\n\n# çŸ©é˜µå›¾ï¼šå˜é‡å¯¹ä¹‹é—´çš„ç¼ºå¤±å…³ç³»\nmatrixplot(df, sortby = \"income\")",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "ç¼ºå¤±å€¼å¤„ç†"
    ]
  },
  {
    "objectID": "1046-missing-data.html#ç¬¬ä¸‰éƒ¨åˆ†ç¼ºå¤±æœºåˆ¶æ£€éªŒ",
    "href": "1046-missing-data.html#ç¬¬ä¸‰éƒ¨åˆ†ç¼ºå¤±æœºåˆ¶æ£€éªŒ",
    "title": "ç¼ºå¤±å€¼æŸ¥çœ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šç¼ºå¤±æœºåˆ¶æ£€éªŒ",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šç¼ºå¤±æœºåˆ¶æ£€éªŒ\n\nLittleâ€™s MCAR æ£€éªŒ\n\n# ä½¿ç”¨ naniar çš„ mcar_test\nmcar_result &lt;- mcar_test(df %&gt;% select(where(is.numeric)))\nprint(mcar_result)\n\n# A tibble: 1 Ã— 4\n  statistic    df p.value missing.patterns\n      &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;            &lt;int&gt;\n1      105.    77  0.0192               12\n\n# è§£è¯»\nif (mcar_result$p.value &lt; 0.05) {\n    cat(\"\\np &lt; 0.05: æ‹’ç» MCAR å‡è®¾ï¼Œç¼ºå¤±å¯èƒ½æ˜¯ MAR æˆ– MNAR\\n\")\n} else {\n    cat(\"\\np &gt;= 0.05: ä¸èƒ½æ‹’ç» MCAR å‡è®¾\\n\")\n}\n\n\np &lt; 0.05: æ‹’ç» MCAR å‡è®¾ï¼Œç¼ºå¤±å¯èƒ½æ˜¯ MAR æˆ– MNAR\n\n\n\n\nç¼ºå¤±æŒ‡ç¤ºå˜é‡åˆ†æ\n\n# åˆ›å»ºç¼ºå¤±æŒ‡ç¤ºå˜é‡ï¼Œæ£€éªŒç¼ºå¤±ä¸å…¶ä»–å˜é‡çš„å…³è”\ndf_shadow &lt;- bind_shadow(df)\n\n# æ£€éªŒæ”¶å…¥ç¼ºå¤±æ˜¯å¦ä¸æ•™è‚²ç›¸å…³\nchisq.test(table(df$education, is.na(df$income)))\n\n\n    Pearson's Chi-squared test\n\ndata:  table(df$education, is.na(df$income))\nX-squared = 32.796, df = 3, p-value = 3.556e-07\n\n\n\n# å¯è§†åŒ–ç¼ºå¤±ä¸å…¶ä»–å˜é‡çš„å…³ç³»\ndf_shadow %&gt;%\n    filter(!is.na(education)) %&gt;%\n    ggplot(aes(x = education, fill = income_NA)) +\n    geom_bar(position = \"fill\") +\n    scale_fill_manual(\n        values = c(\"#4f46e5\", \"#ef4444\"),\n        labels = c(\"æœ‰æ•°æ®\", \"ç¼ºå¤±\")\n    ) +\n    labs(\n        title = \"æ”¶å…¥ç¼ºå¤±ä¸æ•™è‚²æ°´å¹³çš„å…³ç³»\",\n        y = \"æ¯”ä¾‹\",\n        fill = \"æ”¶å…¥çŠ¶æ€\"\n    ) +\n    theme(legend.position = \"top\")",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "ç¼ºå¤±å€¼å¤„ç†"
    ]
  },
  {
    "objectID": "1046-missing-data.html#ç¬¬å››éƒ¨åˆ†ç®€å•å¤„ç†æ–¹æ³•",
    "href": "1046-missing-data.html#ç¬¬å››éƒ¨åˆ†ç®€å•å¤„ç†æ–¹æ³•",
    "title": "ç¼ºå¤±å€¼æŸ¥çœ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šç®€å•å¤„ç†æ–¹æ³•",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šç®€å•å¤„ç†æ–¹æ³•\n\nåˆ é™¤æ³•\n\n# å®Œæ•´æ¡ˆä¾‹åˆ†æï¼ˆlistwise deletionï¼‰\ndf_complete_cases &lt;- df %&gt;%\n    drop_na()\n\ncat(\"åŸå§‹æ ·æœ¬é‡:\", nrow(df), \"\\n\")\n\nåŸå§‹æ ·æœ¬é‡: 500 \n\ncat(\"å®Œæ•´æ¡ˆä¾‹æ ·æœ¬é‡:\", nrow(df_complete_cases), \"\\n\")\n\nå®Œæ•´æ¡ˆä¾‹æ ·æœ¬é‡: 280 \n\ncat(\"æŸå¤±æ¯”ä¾‹:\", round((1 - nrow(df_complete_cases) / nrow(df)) * 100, 1), \"%\\n\")\n\næŸå¤±æ¯”ä¾‹: 44 %\n\n\n\n# åªåˆ é™¤å…³é”®å˜é‡çš„ç¼ºå¤±\ndf_partial_drop &lt;- df %&gt;%\n    drop_na(age, disease_score)\n\ncat(\"åˆ é™¤å…³é”®å˜é‡ç¼ºå¤±åæ ·æœ¬é‡:\", nrow(df_partial_drop), \"\\n\")\n\nåˆ é™¤å…³é”®å˜é‡ç¼ºå¤±åæ ·æœ¬é‡: 464 \n\n\n\nè­¦å‘Š: åˆ é™¤æ³•ä»…åœ¨ MCAR æ—¶æ— åï¼Œä¸”ä¼šæŸå¤±å¤§é‡ä¿¡æ¯ã€‚\n\n\n\nå•å€¼å¡«å……\n\n# å‡å€¼/ä¸­ä½æ•°å¡«å……\ndf_mean_imputed &lt;- df %&gt;%\n    mutate(\n        age = replace_na(age, round(mean(age, na.rm = TRUE))),\n        income = replace_na(income, round(median(income, na.rm = TRUE))),\n        cholesterol = replace_na(cholesterol, round(mean(cholesterol, na.rm = TRUE))),\n        glucose = replace_na(glucose, round(mean(glucose, na.rm = TRUE)))\n    )\n\n# æ£€æŸ¥ç»“æœ\nsum(is.na(df_mean_imputed %&gt;% select(age, income, cholesterol, glucose)))\n\n[1] 0\n\n\n\n# ä½¿ç”¨ tidyr::replace_na\ndf_filled &lt;- df %&gt;%\n    mutate(\n        bmi = replace_na(bmi, median(bmi, na.rm = TRUE))\n    )\n\n\n\nä¼—æ•°å¡«å……ï¼ˆåˆ†ç±»å˜é‡ï¼‰\n\n# å®šä¹‰ä¼—æ•°å‡½æ•°\nget_mode &lt;- function(x) {\n    x &lt;- x[!is.na(x)]\n    ux &lt;- unique(x)\n    ux[which.max(tabulate(match(x, ux)))]\n}\n\n# å¡«å……åˆ†ç±»å˜é‡\ndf_mode_filled &lt;- df %&gt;%\n    mutate(\n        education = replace_na(education, get_mode(education)),\n        smoking = replace_na(smoking, get_mode(smoking))\n    )\n\n\n\nåˆ†ç»„å¡«å……\n\n# æŒ‰æ€§åˆ«åˆ†ç»„å¡«å……å¹´é¾„\ndf_group_filled &lt;- df %&gt;%\n    group_by(sex) %&gt;%\n    mutate(\n        age = replace_na(age, round(mean(age, na.rm = TRUE)))\n    ) %&gt;%\n    ungroup()",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "ç¼ºå¤±å€¼å¤„ç†"
    ]
  },
  {
    "objectID": "1046-missing-data.html#ç¬¬äº”éƒ¨åˆ†å¤šé‡æ’è¡¥-mice",
    "href": "1046-missing-data.html#ç¬¬äº”éƒ¨åˆ†å¤šé‡æ’è¡¥-mice",
    "title": "ç¼ºå¤±å€¼æŸ¥çœ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šå¤šé‡æ’è¡¥ (mice)",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šå¤šé‡æ’è¡¥ (mice)\nå¤šé‡æ’è¡¥æ˜¯å¤„ç† MAR ç¼ºå¤±çš„æ¨èæ–¹æ³•ï¼Œå®ƒé€šè¿‡ç”Ÿæˆå¤šä¸ªæ’è¡¥æ•°æ®é›†æ¥ä¿ç•™ä¼°è®¡çš„ä¸ç¡®å®šæ€§ã€‚\n\nåŸºæœ¬æµç¨‹\n\n# å‡†å¤‡æ•°æ®ï¼ˆåªä¿ç•™éœ€è¦åˆ†æçš„å˜é‡ï¼‰\ndf_mice &lt;- df %&gt;%\n    select(\n        age, sex, education, income, bmi, cholesterol, glucose,\n        exercise_hours, smoking, disease_score\n    )\n\n# æ‰§è¡Œå¤šé‡æ’è¡¥\nimp &lt;- mice(\n    df_mice,\n    m = 5, # ç”Ÿæˆ5ä¸ªæ’è¡¥æ•°æ®é›†\n    method = \"pmm\", # é»˜è®¤æ–¹æ³•ï¼šé¢„æµ‹å‡å€¼åŒ¹é…\n    maxit = 10, # è¿­ä»£æ¬¡æ•°\n    seed = 42,\n    print = FALSE\n)\n\n# æŸ¥çœ‹æ’è¡¥æ¨¡å‹æ‘˜è¦\nimp\n\nClass: mids\nNumber of multiple imputations:  5 \nImputation methods:\n           age            sex      education         income            bmi \n         \"pmm\"             \"\"          \"pmm\"          \"pmm\"             \"\" \n   cholesterol        glucose exercise_hours        smoking  disease_score \n         \"pmm\"          \"pmm\"             \"\"          \"pmm\"             \"\" \nPredictorMatrix:\n            age sex education income bmi cholesterol glucose exercise_hours\nage           0   1         1      1   1           1       1              1\nsex           1   0         1      1   1           1       1              1\neducation     1   1         0      1   1           1       1              1\nincome        1   1         1      0   1           1       1              1\nbmi           1   1         1      1   0           1       1              1\ncholesterol   1   1         1      1   1           0       1              1\n            smoking disease_score\nage               1             1\nsex               1             1\neducation         1             1\nincome            1             1\nbmi               1             1\ncholesterol       1             1\n\n\n\n\næ’è¡¥æ–¹æ³•é€‰æ‹©\n\n\n\næ–¹æ³•\nä»£ç \né€‚ç”¨ç±»å‹\nè¯´æ˜\n\n\n\n\né¢„æµ‹å‡å€¼åŒ¹é…\npmm\næ•°å€¼å‹\né»˜è®¤ï¼Œä¿æŒåŸå§‹åˆ†å¸ƒ\n\n\nè´å¶æ–¯çº¿æ€§å›å½’\nnorm\nè¿ç»­æ•°å€¼\næ­£æ€åˆ†å¸ƒå‡è®¾\n\n\né€»è¾‘å›å½’\nlogreg\näºŒåˆ†ç±»\n0/1 å˜é‡\n\n\nå¤šé¡¹å¼å›å½’\npolyreg\nå¤šåˆ†ç±»\næœ‰åº/æ— åºåˆ†ç±»\n\n\néšæœºæ£®æ—\nrf\né€šç”¨\nå¤æ‚å…³ç³»\n\n\n\n\n# æŸ¥çœ‹ä½¿ç”¨çš„æ’è¡¥æ–¹æ³•\nimp$method\n\n           age            sex      education         income            bmi \n         \"pmm\"             \"\"          \"pmm\"          \"pmm\"             \"\" \n   cholesterol        glucose exercise_hours        smoking  disease_score \n         \"pmm\"          \"pmm\"             \"\"          \"pmm\"             \"\" \n\n\n\n# è‡ªå®šä¹‰æ’è¡¥æ–¹æ³•\nmethod_custom &lt;- make.method(df_mice)\nmethod_custom[\"education\"] &lt;- \"polyreg\" # å¤šåˆ†ç±»ç”¨å¤šé¡¹å¼\nmethod_custom[\"smoking\"] &lt;- \"polyreg\"\n\n# é‡æ–°æ’è¡¥\nimp_custom &lt;- mice(df_mice,\n    m = 5, method = method_custom,\n    seed = 42, print = FALSE\n)\nimp_custom$method\n\n           age            sex      education         income            bmi \n         \"pmm\"             \"\"      \"polyreg\"          \"pmm\"             \"\" \n   cholesterol        glucose exercise_hours        smoking  disease_score \n         \"pmm\"          \"pmm\"             \"\"      \"polyreg\"             \"\" \n\n\n\n\nè¯Šæ–­ï¼šæ£€æŸ¥æ”¶æ•›æ€§\n\n# æŸ¥çœ‹è¿­ä»£è½¨è¿¹ï¼ˆåº”è¯¥ç¨³å®šæ”¶æ•›ï¼‰\nplot(imp, c(\"age\", \"income\", \"cholesterol\"))\n\n\n\n\n\n\n\n\n\n\nè¯Šæ–­ï¼šæ¯”è¾ƒæ’è¡¥å‰ååˆ†å¸ƒ\n\n# å¯†åº¦å›¾æ¯”è¾ƒ\ndensityplot(imp, ~ age + income + cholesterol)\n\n\n\n\n\n\n\n\n\n# æ¡å¸¦å›¾\nstripplot(imp, age + income ~ .imp, pch = 20, cex = 0.8)\n\n\n\n\n\n\n\n\nè§£è¯»: è“è‰²ç‚¹æ˜¯è§‚æµ‹å€¼ï¼Œçº¢è‰²ç‚¹æ˜¯æ’è¡¥å€¼ã€‚å¦‚æœåˆ†å¸ƒåˆç†é‡å ï¼Œè¯´æ˜æ’è¡¥è´¨é‡å¥½ã€‚\n\n\næå–æ’è¡¥æ•°æ®\n\n# æå–ç¬¬1ä¸ªæ’è¡¥æ•°æ®é›†\ncomplete_1 &lt;- complete(imp, 1)\nhead(complete_1)\n\n  age sex education income  bmi cholesterol glucose exercise_hours smoking\n1  67  å¥³      æœ¬ç§‘   7845 34.2         121      66              4    å·²æˆ’\n2  61  å¥³      é«˜ä¸­   6502 23.3         232     107              2    ä»ä¸\n3  54  ç”·    ç ”ç©¶ç”Ÿ   5292 26.9         178     113              0    ä»ä¸\n4  52  å¥³      æœ¬ç§‘   6884 19.8         212      96              1    ä»ä¸\n5  69  å¥³      åˆä¸­   7435 22.8         180     104              3    ä»ä¸\n6  71  ç”·      åˆä¸­   5790 24.1         177     122              5    å·²æˆ’\n  disease_score\n1           115\n2            42\n3            50\n4             4\n5            55\n6            62\n\n\n\n# æå–æ‰€æœ‰æ’è¡¥æ•°æ®ï¼ˆé•¿æ ¼å¼ï¼‰\ncomplete_long &lt;- complete(imp, action = \"long\", include = TRUE)\nhead(complete_long)\n\n  age sex education income  bmi cholesterol glucose exercise_hours smoking\n1  67  å¥³      æœ¬ç§‘   7845 34.2         121      NA              4    å·²æˆ’\n2  61  å¥³      é«˜ä¸­   6502 23.3         232     107              2    ä»ä¸\n3  54  ç”·    ç ”ç©¶ç”Ÿ   5292 26.9          NA     113              0    ä»ä¸\n4  52  å¥³      æœ¬ç§‘   6884 19.8         212      96              1    ä»ä¸\n5  69  å¥³      åˆä¸­   7435 22.8          NA     104              3    ä»ä¸\n6  71  ç”·      åˆä¸­   5790 24.1         177     122              5    å·²æˆ’\n  disease_score .imp .id\n1           115    0   1\n2            42    0   2\n3            50    0   3\n4             4    0   4\n5            55    0   5\n6            62    0   6\n\n\n\n\nå¯¹å¤šé‡æ’è¡¥æ•°æ®å»ºæ¨¡\n\n# åœ¨æ¯ä¸ªæ’è¡¥æ•°æ®é›†ä¸Šæ‹Ÿåˆæ¨¡å‹\nfit &lt;- with(imp, lm(disease_score ~ age + sex + education + income + bmi + cholesterol))\n\n# æŸ¥çœ‹å„æ•°æ®é›†çš„ç»“æœ\nsummary(fit)\n\n# A tibble: 45 Ã— 7\n   term               estimate std.error statistic   p.value  nobs df.residual\n   &lt;chr&gt;                 &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;int&gt;       &lt;dbl&gt;\n 1 (Intercept)     -88.8        4.42       -20.1   6.84e- 66   500         491\n 2 age               0.325      0.0380       8.55  1.56e- 16   500         491\n 3 sexå¥³             0.110      0.874        0.126 9.00e-  1   500         491\n 4 educationé«˜ä¸­    -0.417      1.33        -0.314 7.54e-  1   500         491\n 5 educationæœ¬ç§‘     0.642      1.31         0.489 6.25e-  1   500         491\n 6 educationç ”ç©¶ç”Ÿ  -0.436      1.61        -0.271 7.87e-  1   500         491\n 7 income            0.0000859  0.000152     0.567 5.71e-  1   500         491\n 8 bmi               5.04       0.111       45.3   1.39e-177   500         491\n 9 cholesterol      -0.00579    0.0108      -0.538 5.91e-  1   500         491\n10 (Intercept)     -87.3        4.55       -19.2   1.26e- 61   500         491\n# â„¹ 35 more rows\n\n\n\n# ä½¿ç”¨ Rubin è§„åˆ™åˆå¹¶ç»“æœ\npooled &lt;- pool(fit)\nsummary(pooled)\n\n             term      estimate    std.error    statistic        df\n1     (Intercept) -8.711482e+01 4.6396675465 -18.77609113 289.11817\n2             age  3.166707e-01 0.0385649516   8.21135891 397.69676\n3           sexå¥³  7.586828e-02 0.8792622419   0.08628629 481.75735\n4   educationé«˜ä¸­ -2.728449e-01 1.3677285572  -0.19948763 365.81528\n5   educationæœ¬ç§‘  4.447314e-01 1.3452444928   0.33059520 406.03454\n6 educationç ”ç©¶ç”Ÿ -3.386356e-01 1.7137413023  -0.19760020 210.22579\n7          income  9.915020e-05 0.0001622097   0.61124699 203.73630\n8             bmi  5.033286e+00 0.1131169347  44.49630520 433.33042\n9     cholesterol -1.143134e-02 0.0119734350  -0.95472509  79.13605\n        p.value\n1  5.613713e-52\n2  3.091819e-15\n3  9.312747e-01\n4  8.419922e-01\n5  7.411208e-01\n6  8.435488e-01\n7  5.417175e-01\n8 1.098290e-163\n9  3.426241e-01\n\n\n\n# æ›´å®Œæ•´çš„æ±‡æ€»è¡¨\npool_summary &lt;- summary(pooled) %&gt;%\n    mutate(\n        `95% CI` = paste0(\n            \"[\", round(estimate - 1.96 * std.error, 3), \", \",\n            round(estimate + 1.96 * std.error, 3), \"]\"\n        ),\n        p.value = format.pval(p.value, digits = 3)\n    ) %&gt;%\n    select(term, estimate, std.error, `95% CI`, p.value)\n\npool_summary\n\n             term      estimate    std.error             95% CI  p.value\n1     (Intercept) -8.711482e+01 4.6396675465 [-96.209, -78.021]  &lt; 2e-16\n2             age  3.166707e-01 0.0385649516     [0.241, 0.392] 3.09e-15\n3           sexå¥³  7.586828e-02 0.8792622419    [-1.647, 1.799]    0.931\n4   educationé«˜ä¸­ -2.728449e-01 1.3677285572    [-2.954, 2.408]    0.842\n5   educationæœ¬ç§‘  4.447314e-01 1.3452444928    [-2.192, 3.081]    0.741\n6 educationç ”ç©¶ç”Ÿ -3.386356e-01 1.7137413023     [-3.698, 3.02]    0.844\n7          income  9.915020e-05 0.0001622097             [0, 0]    0.542\n8             bmi  5.033286e+00 0.1131169347     [4.812, 5.255]  &lt; 2e-16\n9     cholesterol -1.143134e-02 0.0119734350    [-0.035, 0.012]    0.343",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "ç¼ºå¤±å€¼å¤„ç†"
    ]
  },
  {
    "objectID": "1046-missing-data.html#ç¬¬å…­éƒ¨åˆ†é«˜çº§æ’è¡¥æ–¹æ³•",
    "href": "1046-missing-data.html#ç¬¬å…­éƒ¨åˆ†é«˜çº§æ’è¡¥æ–¹æ³•",
    "title": "ç¼ºå¤±å€¼æŸ¥çœ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šé«˜çº§æ’è¡¥æ–¹æ³•",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šé«˜çº§æ’è¡¥æ–¹æ³•\n\néšæœºæ£®æ—æ’è¡¥ (missRanger)\nmissRanger ä½¿ç”¨éšæœºæ£®æ—è¿›è¡Œæ’è¡¥ï¼Œé€‚åˆå¤æ‚éçº¿æ€§å…³ç³»ã€‚\n\n# éšæœºæ£®æ—æ’è¡¥\ndf_rf_imputed &lt;- missRanger(\n    df_mice,\n    num.trees = 100,\n    verbose = 0,\n    seed = 42\n)\n\n# æ£€æŸ¥ç»“æœ\nsum(is.na(df_rf_imputed))\n\n[1] 0\n\n\n\n# æ¯”è¾ƒåŸå§‹æ•°æ®å’Œæ’è¡¥æ•°æ®çš„åˆ†å¸ƒ\ncompare_dist &lt;- tibble(\n    variable = \"income\",\n    original = df_mice$income,\n    imputed = df_rf_imputed$income\n) %&gt;%\n    pivot_longer(-variable, names_to = \"type\", values_to = \"value\") %&gt;%\n    filter(!is.na(value))\n\nggplot(compare_dist, aes(x = value, fill = type)) +\n    geom_density(alpha = 0.5) +\n    scale_fill_manual(\n        values = c(\"#4f46e5\", \"#22c55e\"),\n        labels = c(\"æ’è¡¥å\", \"åŸå§‹\")\n    ) +\n    labs(\n        title = \"æ”¶å…¥åˆ†å¸ƒï¼šåŸå§‹ vs éšæœºæ£®æ—æ’è¡¥\",\n        x = \"æ”¶å…¥\", y = \"å¯†åº¦\", fill = \"\"\n    )\n\n\n\n\n\n\n\n\n\n\nKæœ€è¿‘é‚»æ’è¡¥ (VIM)\n\n# KNN æ’è¡¥\ndf_knn_imputed &lt;- kNN(df_mice, k = 5)\n\n        income            bmi    cholesterol        glucose exercise_hours \n         438.0           12.2           78.0           16.0            0.0 \n disease_score         income            bmi    cholesterol        glucose \n         -21.0        15544.0           35.0          300.0          171.0 \nexercise_hours  disease_score \n          10.0          115.0 \n           age         income            bmi    cholesterol        glucose \n          16.0          438.0           12.2           78.0           16.0 \nexercise_hours  disease_score            age         income            bmi \n           0.0          -21.0           90.0        15544.0           35.0 \n   cholesterol        glucose exercise_hours  disease_score \n         300.0          171.0           10.0          115.0 \n           age            bmi    cholesterol        glucose exercise_hours \n          16.0           12.2           78.0           16.0            0.0 \n disease_score            age            bmi    cholesterol        glucose \n         -21.0           90.0           35.0          300.0          171.0 \nexercise_hours  disease_score \n          10.0          115.0 \n           age         income            bmi        glucose exercise_hours \n          16.0          438.0           12.2           16.0            0.0 \n disease_score            age         income            bmi        glucose \n         -21.0           90.0        15544.0           35.0          171.0 \nexercise_hours  disease_score \n          10.0          115.0 \n           age         income            bmi    cholesterol exercise_hours \n          16.0          438.0           12.2           78.0            0.0 \n disease_score            age         income            bmi    cholesterol \n         -21.0           90.0        15544.0           35.0          300.0 \nexercise_hours  disease_score \n          10.0          115.0 \n           age         income            bmi    cholesterol        glucose \n          16.0          438.0           12.2           78.0           16.0 \nexercise_hours  disease_score            age         income            bmi \n           0.0          -21.0           90.0        15544.0           35.0 \n   cholesterol        glucose exercise_hours  disease_score \n         300.0          171.0           10.0          115.0 \n\n# kNN ä¼šæ·»åŠ æŒ‡ç¤ºå˜é‡ï¼Œéœ€è¦ç§»é™¤\ndf_knn_imputed &lt;- df_knn_imputed %&gt;%\n    select(-ends_with(\"_imp\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "ç¼ºå¤±å€¼å¤„ç†"
    ]
  },
  {
    "objectID": "1046-missing-data.html#ç¬¬ä¸ƒéƒ¨åˆ†æ•æ„Ÿæ€§åˆ†æ",
    "href": "1046-missing-data.html#ç¬¬ä¸ƒéƒ¨åˆ†æ•æ„Ÿæ€§åˆ†æ",
    "title": "ç¼ºå¤±å€¼æŸ¥çœ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæ•æ„Ÿæ€§åˆ†æ",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæ•æ„Ÿæ€§åˆ†æ\nç”±äºæ— æ³•ç›´æ¥éªŒè¯ MAR å‡è®¾ï¼Œæ•æ„Ÿæ€§åˆ†æéå¸¸é‡è¦ã€‚\n\nTipping Point åˆ†æ\n\n# æ¨¡æ‹Ÿ MNAR åœºæ™¯ï¼šå‡è®¾ç¼ºå¤±çš„æ”¶å…¥å®é™…ä¸Šåä½\ndelta_values &lt;- c(0, -1000, -2000, -3000) # åç§»é‡\n\nsensitivity_results &lt;- map_dfr(delta_values, function(delta) {\n    # å¯¹ç¬¬ä¸€ä¸ªæ’è¡¥æ•°æ®é›†è¿›è¡Œæ•æ„Ÿæ€§è°ƒæ•´\n    imp_adj &lt;- complete(imp, 1)\n\n    # æ‰¾å‡ºåŸå§‹ç¼ºå¤±çš„ä½ç½®\n    missing_idx &lt;- is.na(df_mice$income)\n\n    # å¯¹æ’è¡¥å€¼è¿›è¡Œåç§»\n    imp_adj$income[missing_idx] &lt;- imp_adj$income[missing_idx] + delta\n\n    # æ‹Ÿåˆæ¨¡å‹\n    fit &lt;- lm(disease_score ~ age + income + bmi, data = imp_adj)\n\n    # è¿”å›æ”¶å…¥ç³»æ•°\n    tibble(\n        delta = delta,\n        estimate = coef(fit)[\"income\"],\n        se = summary(fit)$coefficients[\"income\", \"Std. Error\"],\n        p.value = summary(fit)$coefficients[\"income\", \"Pr(&gt;|t|)\"]\n    )\n})\n\nsensitivity_results\n\n# A tibble: 4 Ã— 4\n  delta  estimate       se p.value\n  &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;\n1     0 0.0000784 0.000150   0.603\n2 -1000 0.0000974 0.000149   0.514\n3 -2000 0.000112  0.000146   0.441\n4 -3000 0.000122  0.000140   0.384\n\n\n\n# å¯è§†åŒ–æ•æ„Ÿæ€§åˆ†æ\nggplot(sensitivity_results, aes(x = delta, y = estimate)) +\n    geom_line(color = \"#4f46e5\", linewidth = 1) +\n    geom_point(size = 3, color = \"#4f46e5\") +\n    geom_errorbar(\n        aes(\n            ymin = estimate - 1.96 * se,\n            ymax = estimate + 1.96 * se\n        ),\n        width = 100, color = \"#4f46e5\"\n    ) +\n    geom_hline(yintercept = 0, linetype = \"dashed\", color = \"red\") +\n    labs(\n        title = \"æ•æ„Ÿæ€§åˆ†æï¼šæ”¶å…¥æ•ˆåº”éš MNAR åç§»çš„å˜åŒ–\",\n        x = \"å‡è®¾çš„ MNAR åç§»é‡ (å…ƒ)\",\n        y = \"æ”¶å…¥ç³»æ•°ä¼°è®¡\"\n    ) +\n    theme(plot.title = element_text(face = \"bold\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "ç¼ºå¤±å€¼å¤„ç†"
    ]
  },
  {
    "objectID": "1046-missing-data.html#ç¬¬å…«éƒ¨åˆ†å®Œæ•´åˆ†ææµç¨‹",
    "href": "1046-missing-data.html#ç¬¬å…«éƒ¨åˆ†å®Œæ•´åˆ†ææµç¨‹",
    "title": "ç¼ºå¤±å€¼æŸ¥çœ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…«éƒ¨åˆ†ï¼šå®Œæ•´åˆ†ææµç¨‹",
    "text": "ç¬¬å…«éƒ¨åˆ†ï¼šå®Œæ•´åˆ†ææµç¨‹\n\nå®æˆ˜æ¡ˆä¾‹\n\n# ========== å®Œæ•´ç¼ºå¤±å€¼åˆ†ææµç¨‹ ==========\n\n# 1. ç¼ºå¤±æ¦‚è§ˆ\ncat(\"===== Step 1: ç¼ºå¤±å€¼æ¦‚è§ˆ =====\\n\")\n\n===== Step 1: ç¼ºå¤±å€¼æ¦‚è§ˆ =====\n\nmiss_var_summary(df_mice)\n\n# A tibble: 10 Ã— 3\n   variable       n_miss pct_miss\n   &lt;chr&gt;           &lt;int&gt;    &lt;num&gt;\n 1 cholesterol        90     18  \n 2 income             80     16  \n 3 glucose            66     13.2\n 4 age                36      7.2\n 5 education          18      3.6\n 6 smoking            11      2.2\n 7 sex                 0      0  \n 8 bmi                 0      0  \n 9 exercise_hours      0      0  \n10 disease_score       0      0  \n\n\n\n# 2. å¯è§†åŒ–ç¼ºå¤±æ¨¡å¼\nvis_miss(df_mice, sort_miss = TRUE) +\n    labs(title = \"Step 2: ç¼ºå¤±çƒ­å›¾\")\n\n\n\n\n\n\n\n\n\n# 3. MCAR æ£€éªŒ\ncat(\"\\n===== Step 3: MCAR æ£€éªŒ =====\\n\")\n\n\n===== Step 3: MCAR æ£€éªŒ =====\n\nmcar_test(df_mice %&gt;% select(where(is.numeric)))\n\n# A tibble: 1 Ã— 4\n  statistic    df p.value missing.patterns\n      &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;            &lt;int&gt;\n1      85.8    55 0.00491               12\n\n\n\n# 4. å¤šé‡æ’è¡¥\ncat(\"\\n===== Step 4: å¤šé‡æ’è¡¥ =====\\n\")\n\n\n===== Step 4: å¤šé‡æ’è¡¥ =====\n\nimp_final &lt;- mice(df_mice,\n    m = 10, method = \"pmm\",\n    maxit = 20, seed = 2024, print = FALSE\n)\n\n\n# 5. è¯Šæ–­\ndensityplot(imp_final, ~ age + income)\n\n\n\n\n\n\n\n\n\n# 6. å»ºæ¨¡ä¸åˆå¹¶\nfit_final &lt;- with(\n    imp_final,\n    lm(disease_score ~ age + sex + income + bmi + cholesterol)\n)\npooled_final &lt;- pool(fit_final)\n\n# 7. ç»“æœæŠ¥å‘Š\nsummary(pooled_final) %&gt;%\n    mutate(\n        estimate = round(estimate, 3),\n        std.error = round(std.error, 3),\n        `95% CI` = paste0(\n            \"[\", round(estimate - 1.96 * std.error, 3), \", \",\n            round(estimate + 1.96 * std.error, 3), \"]\"\n        ),\n        p.value = format.pval(p.value, digits = 3)\n    ) %&gt;%\n    select(term, estimate, std.error, `95% CI`, p.value) %&gt;%\n    knitr::kable(caption = \"å¤šé‡æ’è¡¥åçš„å›å½’ç»“æœ\")\n\n\nå¤šé‡æ’è¡¥åçš„å›å½’ç»“æœ\n\n\nterm\nestimate\nstd.error\n95% CI\np.value\n\n\n\n\n(Intercept)\n-86.697\n4.789\n[-96.083, -77.311]\n&lt; 2e-16\n\n\nage\n0.314\n0.039\n[0.238, 0.39]\n5.96e-15\n\n\nsexå¥³\n0.028\n0.880\n[-1.697, 1.753]\n0.974\n\n\nincome\n0.000\n0.000\n[0, 0]\n0.796\n\n\nbmi\n5.035\n0.111\n[4.817, 5.253]\n&lt; 2e-16\n\n\ncholesterol\n-0.010\n0.013\n[-0.035, 0.015]\n0.425",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "ç¼ºå¤±å€¼å¤„ç†"
    ]
  },
  {
    "objectID": "1046-missing-data.html#ä»£ç é€ŸæŸ¥è¡¨",
    "href": "1046-missing-data.html#ä»£ç é€ŸæŸ¥è¡¨",
    "title": "ç¼ºå¤±å€¼æŸ¥çœ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ä»£ç é€ŸæŸ¥è¡¨",
    "text": "ä»£ç é€ŸæŸ¥è¡¨\n\n# ========== ç¼ºå¤±å€¼å¤„ç†é€ŸæŸ¥ ==========\n\n# æ£€æµ‹\nsum(is.na(df)) # æ€»ç¼ºå¤±æ•°\ncolSums(is.na(df)) # æ¯åˆ—ç¼ºå¤±æ•°\nnaniar::miss_var_summary(df) # å˜é‡æ‘˜è¦\nnaniar::miss_case_summary(df) # æ ·æœ¬æ‘˜è¦\n\n# å¯è§†åŒ–\nnaniar::vis_miss(df) # ç¼ºå¤±çƒ­å›¾\nnaniar::gg_miss_upset(df) # UpSet å›¾\nVIM::aggr(df) # èšåˆå›¾\nVIM::marginplot(df[c(\"x\", \"y\")]) # è¾¹é™…å›¾\n\n# MCAR æ£€éªŒ\nnaniar::mcar_test(df)\n\n# ç®€å•å¤„ç†\ndf %&gt;% drop_na() # åˆ é™¤æ³•\ndf %&gt;% mutate(x = replace_na(x, mean(x, na.rm = TRUE))) # å‡å€¼å¡«å……\n\n# å¤šé‡æ’è¡¥\nimp &lt;- mice(df, m = 5, method = \"pmm\") # æ’è¡¥\ncomplete(imp, 1) # æå–å•ä¸ªæ•°æ®é›†\nfit &lt;- with(imp, lm(y ~ x)) # å»ºæ¨¡\npool(fit) # åˆå¹¶ç»“æœ\n\n# éšæœºæ£®æ—æ’è¡¥\nmissRanger::missRanger(df)\n\n# ä½¿ç”¨ finalfit\ndf %&gt;% missing_pattern(dependent, explanatory)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "ç¼ºå¤±å€¼å¤„ç†"
    ]
  },
  {
    "objectID": "1046-missing-data.html#æŠ¥å‘Šæ¨¡æ¿",
    "href": "1046-missing-data.html#æŠ¥å‘Šæ¨¡æ¿",
    "title": "ç¼ºå¤±å€¼æŸ¥çœ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "æŠ¥å‘Šæ¨¡æ¿",
    "text": "æŠ¥å‘Šæ¨¡æ¿\nåœ¨è®ºæ–‡ä¸­æŠ¥å‘Šç¼ºå¤±å€¼å¤„ç†ï¼š\n\nç¼ºå¤±æ•°æ®å¤„ç†: æœ¬ç ”ç©¶ä¸­ï¼Œæ”¶å…¥å˜é‡æœ‰ X% çš„ç¼ºå¤±ï¼Œèƒ†å›ºé†‡æœ‰ Y% çš„ç¼ºå¤±ã€‚Littleâ€™s MCAR æ£€éªŒæ˜¾ç¤ºç¼ºå¤±ä¸æ»¡è¶³å®Œå…¨éšæœºå‡è®¾ (Ï‡Â² = xx, p &lt; 0.05)ã€‚æˆ‘ä»¬é‡‡ç”¨å¤šé‡æ’è¡¥æ³• (mice åŒ…ï¼Œm = 10) å¤„ç†ç¼ºå¤±æ•°æ®ï¼Œä½¿ç”¨é¢„æµ‹å‡å€¼åŒ¹é…æ³• (PMM) è¿›è¡Œæ’è¡¥ã€‚æ’è¡¥åçš„åˆ†å¸ƒä¸åŸå§‹æ•°æ®åˆ†å¸ƒç›¸ä¼¼ã€‚æ•æ„Ÿæ€§åˆ†ææ˜¾ç¤ºç»“è®ºåœ¨ä¸åŒ MNAR å‡è®¾ä¸‹ä¿æŒç¨³å¥ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "ç¼ºå¤±å€¼å¤„ç†"
    ]
  },
  {
    "objectID": "1046-missing-data.html#æ€»ç»“",
    "href": "1046-missing-data.html#æ€»ç»“",
    "title": "ç¼ºå¤±å€¼æŸ¥çœ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\næƒ…å†µ\næ¨èæ–¹æ³•\n\n\n\n\nç¼ºå¤± &lt; 5%ï¼ŒMCAR\nåˆ é™¤æ³•å¯æ¥å—\n\n\nç¼ºå¤±é€‚ä¸­ï¼ŒMAR\nå¤šé‡æ’è¡¥ (mice) â˜…æ¨è\n\n\néçº¿æ€§å…³ç³»\néšæœºæ£®æ—æ’è¡¥ (missRanger)\n\n\néœ€è¦å¿«é€Ÿé¢„è§ˆ\nå‡å€¼/ä¸­ä½æ•°å¡«å……\n\n\nMNAR æ‹…å¿§\næ•æ„Ÿæ€§åˆ†æå¿…åš\n\n\n\n\næœ€ä½³å®è·µï¼š 1. å§‹ç»ˆæŠ¥å‘Šç¼ºå¤±æƒ…å†µ 2. å¯è§†åŒ–ç¼ºå¤±æ¨¡å¼ 3. æ£€éªŒ MCAR å‡è®¾ 4. å¤šé‡æ’è¡¥ä¼˜äºå•å€¼å¡«å…… 5. è¿›è¡Œæ•æ„Ÿæ€§åˆ†æ",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "ç¼ºå¤±å€¼å¤„ç†"
    ]
  },
  {
    "objectID": "1046-missing-data.html#å‚è€ƒèµ„æº",
    "href": "1046-missing-data.html#å‚è€ƒèµ„æº",
    "title": "ç¼ºå¤±å€¼æŸ¥çœ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nmice åŒ…æ–‡æ¡£\nnaniar åŒ…æ–‡æ¡£\nVIM åŒ…æ–‡æ¡£\nvan Buuren S. Flexible Imputation of Missing Data (åœ¨çº¿å…è´¹ä¹¦ç±)\nLittle RJA, Rubin DB. Statistical Analysis with Missing Data",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "ç¼ºå¤±å€¼å¤„ç†"
    ]
  },
  {
    "objectID": "1044-lstm.html",
    "href": "1044-lstm.html",
    "title": "LSTM æ·±åº¦å­¦ä¹ æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "",
    "text": "æ³¨æ„ï¼šæœ¬æ•™ç¨‹çš„ä»£ç éœ€è¦å®‰è£… keras åŒ…å’Œ TensorFlow åç«¯ã€‚ç”±äºç¯å¢ƒé…ç½®å¤æ‚ï¼Œä»£ç ä»…ä½œå±•ç¤ºï¼Œè¯»è€…éœ€åœ¨æœ¬åœ°æ­£ç¡®é…ç½®åè¿è¡Œã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "LSTM æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1044-lstm.html#lstm-ç®€ä»‹",
    "href": "1044-lstm.html#lstm-ç®€ä»‹",
    "title": "LSTM æ·±åº¦å­¦ä¹ æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "LSTM ç®€ä»‹",
    "text": "LSTM ç®€ä»‹\nLSTMï¼ˆLong Short-Term Memoryï¼Œé•¿çŸ­æœŸè®°å¿†ç½‘ç»œï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRNNï¼‰ï¼Œèƒ½å¤Ÿå­¦ä¹ é•¿æœŸä¾èµ–å…³ç³»ï¼Œç‰¹åˆ«é€‚ç”¨äºæ—¶é—´åºåˆ—é¢„æµ‹ã€è‡ªç„¶è¯­è¨€å¤„ç†ç­‰åºåˆ—æ•°æ®ä»»åŠ¡ã€‚\n\nä¸ºä»€ä¹ˆä½¿ç”¨ LSTMï¼Ÿ\nä¼ ç»Ÿ RNN å­˜åœ¨æ¢¯åº¦æ¶ˆå¤±/çˆ†ç‚¸é—®é¢˜ï¼Œéš¾ä»¥å­¦ä¹ é•¿æœŸä¾èµ–ã€‚LSTM é€šè¿‡å¼•å…¥é—¨æ§æœºåˆ¶è§£å†³äº†è¿™ä¸€é—®é¢˜ï¼š\n\n\n\né—¨\nä½œç”¨\n\n\n\n\né—å¿˜é—¨ (Forget Gate)\nå†³å®šä¸¢å¼ƒå“ªäº›ä¿¡æ¯\n\n\nè¾“å…¥é—¨ (Input Gate)\nå†³å®šæ›´æ–°å“ªäº›ä¿¡æ¯\n\n\nè¾“å‡ºé—¨ (Output Gate)\nå†³å®šè¾“å‡ºä»€ä¹ˆ\n\n\n\n\n\nR è¯­è¨€æ·±åº¦å­¦ä¹ æ¡†æ¶\n\n\n\næ¡†æ¶\nåç«¯\nç‰¹ç‚¹\n\n\n\n\nkeras\nTensorFlow\næœ€æˆç†Ÿï¼Œæ–‡æ¡£ä¸°å¯Œ\n\n\ntorch\nPyTorch\nåŸç”ŸRå®ç°ï¼Œæ— éœ€Python\n\n\ntensorflow\nTensorFlow\nåº•å±‚API\n\n\n\næœ¬æ•™ç¨‹ä½¿ç”¨ keras åŒ…ï¼Œå› å…¶ä½¿ç”¨æœ€å¹¿æ³›ä¸”æ–‡æ¡£å®Œå–„ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "LSTM æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1044-lstm.html#å®‰è£…ä¸é…ç½®",
    "href": "1044-lstm.html#å®‰è£…ä¸é…ç½®",
    "title": "LSTM æ·±åº¦å­¦ä¹ æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "å®‰è£…ä¸é…ç½®",
    "text": "å®‰è£…ä¸é…ç½®\n\nå®‰è£… keras\n\n# å®‰è£… keras åŒ…\ninstall.packages(\"keras\")\n\n# å®‰è£… Python åç«¯ï¼ˆTensorFlowï¼‰\nlibrary(keras)\ninstall_keras() # è‡ªåŠ¨å®‰è£… TensorFlow\n\n\næ³¨æ„ï¼škeras éœ€è¦ Python å’Œ TensorFlow ç¯å¢ƒã€‚install_keras() ä¼šè‡ªåŠ¨é…ç½®ã€‚\n\n\n\nåŠ è½½åŒ…\n\nlibrary(keras)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(tidyr)\n\n# è®¾ç½®ä¸»é¢˜\ntheme_set(theme_bw(base_size = 12))\n\n# è®¾ç½®éšæœºç§å­\nset.seed(42)\ntensorflow::set_random_seed(42)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "LSTM æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1044-lstm.html#ç¬¬ä¸€éƒ¨åˆ†æ—¶é—´åºåˆ—æ•°æ®å‡†å¤‡",
    "href": "1044-lstm.html#ç¬¬ä¸€éƒ¨åˆ†æ—¶é—´åºåˆ—æ•°æ®å‡†å¤‡",
    "title": "LSTM æ·±åº¦å­¦ä¹ æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ—¶é—´åºåˆ—æ•°æ®å‡†å¤‡",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ—¶é—´åºåˆ—æ•°æ®å‡†å¤‡\n\nåˆ›å»ºç¤ºä¾‹æ•°æ®\n\n# ç”Ÿæˆæ¨¡æ‹Ÿæ—¶é—´åºåˆ—ï¼ˆå¸¦è¶‹åŠ¿å’Œå‘¨æœŸï¼‰\nn &lt;- 500\ntime &lt;- 1:n\ntrend &lt;- 0.05 * time\nseasonal &lt;- 10 * sin(2 * pi * time / 50)\nnoise &lt;- rnorm(n, sd = 2)\nseries &lt;- trend + seasonal + noise\n\n# è½¬ä¸ºæ•°æ®æ¡†\nts_data &lt;- data.frame(\n    time = time,\n    value = series\n)\n\n# å¯è§†åŒ–\nggplot(ts_data, aes(x = time, y = value)) +\n    geom_line(color = \"#4f46e5\", alpha = 0.8) +\n    labs(title = \"æ¨¡æ‹Ÿæ—¶é—´åºåˆ—\", x = \"æ—¶é—´\", y = \"å€¼\") +\n    theme(plot.title = element_text(hjust = 0.5, face = \"bold\"))\n\n\n\næ•°æ®æ ‡å‡†åŒ–\nLSTM å¯¹æ•°æ®å°ºåº¦æ•æ„Ÿï¼Œéœ€è¦è¿›è¡Œæ ‡å‡†åŒ–ã€‚\n\n# è®¡ç®—è®­ç»ƒé›†çš„å‡å€¼å’Œæ ‡å‡†å·®ï¼ˆé¿å…æ•°æ®æ³„éœ²ï¼‰\ntrain_size &lt;- floor(0.8 * n)\n\ntrain_mean &lt;- mean(ts_data$value[1:train_size])\ntrain_sd &lt;- sd(ts_data$value[1:train_size])\n\n# æ ‡å‡†åŒ–\nts_data$scaled &lt;- (ts_data$value - train_mean) / train_sd\n\nhead(ts_data)\n\n\n\nåˆ›å»ºåºåˆ—æ•°æ®\nLSTM éœ€è¦å°†æ—¶é—´åºåˆ—è½¬æ¢ä¸º æ»‘åŠ¨çª—å£ æ ¼å¼ã€‚\n\n# åˆ›å»ºæ»‘åŠ¨çª—å£åºåˆ—\ncreate_sequences &lt;- function(data, look_back = 10) {\n    n &lt;- length(data)\n    X &lt;- matrix(0, nrow = n - look_back, ncol = look_back)\n    y &lt;- numeric(n - look_back)\n\n    for (i in 1:(n - look_back)) {\n        X[i, ] &lt;- data[i:(i + look_back - 1)]\n        y[i] &lt;- data[i + look_back]\n    }\n\n    list(X = X, y = y)\n}\n\n# ä½¿ç”¨è¿‡å»10ä¸ªæ—¶é—´æ­¥é¢„æµ‹ä¸‹ä¸€ä¸ª\nlook_back &lt;- 10\nsequences &lt;- create_sequences(ts_data$scaled, look_back)\n\n# æŸ¥çœ‹å½¢çŠ¶\ncat(\"X å½¢çŠ¶:\", dim(sequences$X), \"\\n\")\ncat(\"y é•¿åº¦:\", length(sequences$y), \"\\n\")\n\n\n\nåˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†\n\n# åˆ’åˆ†\ntrain_idx &lt;- 1:(train_size - look_back)\ntest_idx &lt;- (train_size - look_back + 1):nrow(sequences$X)\n\nX_train &lt;- sequences$X[train_idx, ]\ny_train &lt;- sequences$y[train_idx]\nX_test &lt;- sequences$X[test_idx, ]\ny_test &lt;- sequences$y[test_idx]\n\ncat(\"è®­ç»ƒé›†å¤§å°:\", length(y_train), \"\\n\")\ncat(\"æµ‹è¯•é›†å¤§å°:\", length(y_test), \"\\n\")\n\n\n\nè½¬æ¢ä¸º LSTM è¾“å…¥æ ¼å¼\nLSTM éœ€è¦ 3D è¾“å…¥ï¼š[samples, timesteps, features]\n\n# é‡å¡‘ä¸º3Dæ•°ç»„\nX_train_lstm &lt;- array(X_train, dim = c(nrow(X_train), look_back, 1))\nX_test_lstm &lt;- array(X_test, dim = c(nrow(X_test), look_back, 1))\n\ncat(\"LSTM è¾“å…¥å½¢çŠ¶:\", dim(X_train_lstm), \"\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "LSTM æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1044-lstm.html#ç¬¬äºŒéƒ¨åˆ†æ„å»º-lstm-æ¨¡å‹",
    "href": "1044-lstm.html#ç¬¬äºŒéƒ¨åˆ†æ„å»º-lstm-æ¨¡å‹",
    "title": "LSTM æ·±åº¦å­¦ä¹ æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šæ„å»º LSTM æ¨¡å‹",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šæ„å»º LSTM æ¨¡å‹\n\nåŸºç¡€ LSTM æ¨¡å‹\n\n# å®šä¹‰æ¨¡å‹\nmodel &lt;- keras_model_sequential() %&gt;%\n    # LSTM å±‚\n    layer_lstm(\n        units = 50, # éšè—å•å…ƒæ•°\n        input_shape = c(look_back, 1), # è¾“å…¥å½¢çŠ¶\n        return_sequences = FALSE # åªè¿”å›æœ€åä¸€ä¸ªè¾“å‡º\n    ) %&gt;%\n    # Dropout é˜²æ­¢è¿‡æ‹Ÿåˆ\n    layer_dropout(rate = 0.2) %&gt;%\n    # è¾“å‡ºå±‚\n    layer_dense(units = 1)\n\n# ç¼–è¯‘æ¨¡å‹\nmodel %&gt;% compile(\n    optimizer = optimizer_adam(learning_rate = 0.001),\n    loss = \"mse\",\n    metrics = c(\"mae\")\n)\n\n# æŸ¥çœ‹æ¨¡å‹ç»“æ„\nsummary(model)\n\n\n\nå †å  LSTM æ¨¡å‹\nå¤šå±‚ LSTM å¯ä»¥å­¦ä¹ æ›´å¤æ‚çš„æ¨¡å¼ã€‚\n\n# åŒå±‚ LSTM\nstacked_model &lt;- keras_model_sequential() %&gt;%\n    layer_lstm(\n        units = 50,\n        input_shape = c(look_back, 1),\n        return_sequences = TRUE # è¿”å›å®Œæ•´åºåˆ—ç»™ä¸‹ä¸€å±‚\n    ) %&gt;%\n    layer_dropout(rate = 0.2) %&gt;%\n    layer_lstm(\n        units = 30,\n        return_sequences = FALSE\n    ) %&gt;%\n    layer_dropout(rate = 0.2) %&gt;%\n    layer_dense(units = 1)\n\nstacked_model %&gt;% compile(\n    optimizer = \"adam\",\n    loss = \"mse\"\n)\n\nsummary(stacked_model)\n\n\n\nåŒå‘ LSTM\nåŒå‘ LSTM åŒæ—¶å­¦ä¹ æ­£å‘å’Œåå‘çš„ä¾èµ–å…³ç³»ã€‚\n\n# åŒå‘ LSTM\nbidirectional_model &lt;- keras_model_sequential() %&gt;%\n    bidirectional(\n        layer_lstm(units = 50, return_sequences = FALSE),\n        input_shape = c(look_back, 1)\n    ) %&gt;%\n    layer_dropout(rate = 0.2) %&gt;%\n    layer_dense(units = 1)\n\nbidirectional_model %&gt;% compile(\n    optimizer = \"adam\",\n    loss = \"mse\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "LSTM æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1044-lstm.html#ç¬¬ä¸‰éƒ¨åˆ†æ¨¡å‹è®­ç»ƒ",
    "href": "1044-lstm.html#ç¬¬ä¸‰éƒ¨åˆ†æ¨¡å‹è®­ç»ƒ",
    "title": "LSTM æ·±åº¦å­¦ä¹ æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ¨¡å‹è®­ç»ƒ",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ¨¡å‹è®­ç»ƒ\n\nè®­ç»ƒæ¨¡å‹\n\n# è®­ç»ƒåŸºç¡€æ¨¡å‹\nhistory &lt;- model %&gt;% fit(\n    x = X_train_lstm,\n    y = y_train,\n    epochs = 50,\n    batch_size = 32,\n    validation_split = 0.2,\n    verbose = 0\n)\n\n\n\nå¯è§†åŒ–è®­ç»ƒè¿‡ç¨‹\n\n# ç»˜åˆ¶æŸå¤±æ›²çº¿\nplot(history) +\n    theme_bw() +\n    labs(title = \"æ¨¡å‹è®­ç»ƒè¿‡ç¨‹\") +\n    theme(plot.title = element_text(hjust = 0.5, face = \"bold\"))\n\n\n\næ—©åœå’Œæ£€æŸ¥ç‚¹\n\n# å›è°ƒå‡½æ•°\ncallbacks &lt;- list(\n    # æ—©åœï¼šéªŒè¯æŸå¤±è¿ç»­10è½®ä¸é™ä½åˆ™åœæ­¢\n    callback_early_stopping(\n        monitor = \"val_loss\",\n        patience = 10,\n        restore_best_weights = TRUE\n    ),\n    # ä¿å­˜æœ€ä½³æ¨¡å‹\n    callback_model_checkpoint(\n        filepath = \"best_model.keras\",\n        monitor = \"val_loss\",\n        save_best_only = TRUE\n    )\n)\n\n# è®­ç»ƒæ—¶ä½¿ç”¨å›è°ƒ\nhistory &lt;- model %&gt;% fit(\n    x = X_train_lstm,\n    y = y_train,\n    epochs = 100,\n    batch_size = 32,\n    validation_split = 0.2,\n    callbacks = callbacks\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "LSTM æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1044-lstm.html#ç¬¬å››éƒ¨åˆ†é¢„æµ‹ä¸è¯„ä¼°",
    "href": "1044-lstm.html#ç¬¬å››éƒ¨åˆ†é¢„æµ‹ä¸è¯„ä¼°",
    "title": "LSTM æ·±åº¦å­¦ä¹ æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šé¢„æµ‹ä¸è¯„ä¼°",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šé¢„æµ‹ä¸è¯„ä¼°\n\nè¿›è¡Œé¢„æµ‹\n\n# åœ¨æµ‹è¯•é›†ä¸Šé¢„æµ‹\npredictions_scaled &lt;- model %&gt;% predict(X_test_lstm)\n\n# åæ ‡å‡†åŒ–\npredictions &lt;- predictions_scaled * train_sd + train_mean\nactual &lt;- y_test * train_sd + train_mean\n\n# åˆ›å»ºç»“æœæ•°æ®æ¡†\nresults &lt;- data.frame(\n    time = test_idx + look_back,\n    actual = actual,\n    predicted = as.vector(predictions)\n)\n\nhead(results)\n\n\n\nå¯è§†åŒ–é¢„æµ‹ç»“æœ\n\n# ç»˜åˆ¶é¢„æµ‹ vs å®é™…\nggplot(results, aes(x = time)) +\n    geom_line(aes(y = actual, color = \"å®é™…å€¼\"), linewidth = 0.8) +\n    geom_line(aes(y = predicted, color = \"é¢„æµ‹å€¼\"), linewidth = 0.8, linetype = \"dashed\") +\n    scale_color_manual(\n        values = c(\"å®é™…å€¼\" = \"#4f46e5\", \"é¢„æµ‹å€¼\" = \"#ef4444\"),\n        name = \"\"\n    ) +\n    labs(\n        title = \"LSTM æ—¶é—´åºåˆ—é¢„æµ‹\",\n        x = \"æ—¶é—´\",\n        y = \"å€¼\"\n    ) +\n    theme(\n        plot.title = element_text(hjust = 0.5, face = \"bold\"),\n        legend.position = \"top\"\n    )\n\n\n\nè®¡ç®—è¯„ä¼°æŒ‡æ ‡\n\n# è®¡ç®—æŒ‡æ ‡\nmse &lt;- mean((results$actual - results$predicted)^2)\nrmse &lt;- sqrt(mse)\nmae &lt;- mean(abs(results$actual - results$predicted))\nmape &lt;- mean(abs((results$actual - results$predicted) / results$actual)) * 100\n\ncat(\"MSE:\", round(mse, 4), \"\\n\")\ncat(\"RMSE:\", round(rmse, 4), \"\\n\")\ncat(\"MAE:\", round(mae, 4), \"\\n\")\ncat(\"MAPE:\", round(mape, 2), \"%\\n\")\n\n\n\né¢„æµ‹ vs å®é™…æ•£ç‚¹å›¾\n\nggplot(results, aes(x = actual, y = predicted)) +\n    geom_point(color = \"#4f46e5\", alpha = 0.6) +\n    geom_abline(slope = 1, intercept = 0, linetype = \"dashed\", color = \"red\") +\n    labs(\n        title = \"é¢„æµ‹å€¼ vs å®é™…å€¼\",\n        x = \"å®é™…å€¼\",\n        y = \"é¢„æµ‹å€¼\"\n    ) +\n    coord_equal() +\n    theme(plot.title = element_text(hjust = 0.5, face = \"bold\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "LSTM æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1044-lstm.html#ç¬¬äº”éƒ¨åˆ†å¤šæ­¥é¢„æµ‹",
    "href": "1044-lstm.html#ç¬¬äº”éƒ¨åˆ†å¤šæ­¥é¢„æµ‹",
    "title": "LSTM æ·±åº¦å­¦ä¹ æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šå¤šæ­¥é¢„æµ‹",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šå¤šæ­¥é¢„æµ‹\n\né€’å½’å¤šæ­¥é¢„æµ‹\n\n# é€’å½’é¢„æµ‹æœªæ¥ n æ­¥\npredict_future &lt;- function(model, last_sequence, n_steps, train_mean, train_sd) {\n    predictions &lt;- numeric(n_steps)\n    current_seq &lt;- last_sequence\n\n    for (i in 1:n_steps) {\n        # å‡†å¤‡è¾“å…¥\n        input_data &lt;- array(current_seq, dim = c(1, length(current_seq), 1))\n\n        # é¢„æµ‹ä¸‹ä¸€æ­¥\n        pred &lt;- model %&gt;% predict(input_data, verbose = 0)\n        predictions[i] &lt;- pred\n\n        # æ›´æ–°åºåˆ—ï¼ˆæ»‘åŠ¨çª—å£ï¼‰\n        current_seq &lt;- c(current_seq[-1], pred)\n    }\n\n    # åæ ‡å‡†åŒ–\n    predictions * train_sd + train_mean\n}\n\n# ä½¿ç”¨æœ€åä¸€ä¸ªæµ‹è¯•åºåˆ—é¢„æµ‹æœªæ¥20æ­¥\nlast_seq &lt;- X_test_lstm[nrow(X_test_lstm), , 1]\nfuture_preds &lt;- predict_future(model, last_seq, 20, train_mean, train_sd)\n\n# å¯è§†åŒ–\nfuture_time &lt;- (max(results$time) + 1):(max(results$time) + 20)\nfuture_df &lt;- data.frame(\n    time = future_time,\n    predicted = future_preds\n)\n\nggplot() +\n    geom_line(data = results, aes(x = time, y = actual), color = \"#4f46e5\") +\n    geom_line(\n        data = future_df, aes(x = time, y = predicted),\n        color = \"#ef4444\", linewidth = 1\n    ) +\n    geom_vline(xintercept = max(results$time), linetype = \"dashed\", color = \"gray50\") +\n    labs(\n        title = \"å¤šæ­¥é¢„æµ‹\",\n        subtitle = \"çº¢è‰²ä¸ºæœªæ¥20æ­¥é¢„æµ‹\",\n        x = \"æ—¶é—´\",\n        y = \"å€¼\"\n    ) +\n    theme(plot.title = element_text(hjust = 0.5, face = \"bold\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "LSTM æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1044-lstm.html#ç¬¬å…­éƒ¨åˆ†å¤šå˜é‡-lstm",
    "href": "1044-lstm.html#ç¬¬å…­éƒ¨åˆ†å¤šå˜é‡-lstm",
    "title": "LSTM æ·±åº¦å­¦ä¹ æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šå¤šå˜é‡ LSTM",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šå¤šå˜é‡ LSTM\n\nå‡†å¤‡å¤šå˜é‡æ•°æ®\n\n# åˆ›å»ºå¤šå˜é‡æ—¶é—´åºåˆ—\nn &lt;- 500\nset.seed(42)\n\nmultivar_data &lt;- data.frame(\n    time = 1:n,\n    y = cumsum(rnorm(n)) + 0.02 * (1:n), # ç›®æ ‡å˜é‡\n    x1 = sin(2 * pi * (1:n) / 50) + rnorm(n, sd = 0.3), # ç‰¹å¾1\n    x2 = cos(2 * pi * (1:n) / 30) + rnorm(n, sd = 0.3) # ç‰¹å¾2\n)\n\n# æ ‡å‡†åŒ–\ntrain_size &lt;- 400\nfor (col in c(\"y\", \"x1\", \"x2\")) {\n    train_mean &lt;- mean(multivar_data[[col]][1:train_size])\n    train_sd &lt;- sd(multivar_data[[col]][1:train_size])\n    multivar_data[[paste0(col, \"_scaled\")]] &lt;-\n        (multivar_data[[col]] - train_mean) / train_sd\n}\n\n\n\nåˆ›å»ºå¤šå˜é‡åºåˆ—\n\n# å¤šå˜é‡æ»‘åŠ¨çª—å£\ncreate_multivar_sequences &lt;- function(data, target_col, feature_cols, look_back = 10) {\n    n &lt;- nrow(data)\n    n_features &lt;- length(feature_cols)\n\n    X &lt;- array(0, dim = c(n - look_back, look_back, n_features))\n    y &lt;- numeric(n - look_back)\n\n    for (i in 1:(n - look_back)) {\n        for (j in 1:n_features) {\n            X[i, , j] &lt;- data[i:(i + look_back - 1), feature_cols[j]]\n        }\n        y[i] &lt;- data[i + look_back, target_col]\n    }\n\n    list(X = X, y = y)\n}\n\n# åˆ›å»ºåºåˆ—\nlook_back &lt;- 10\nfeature_cols &lt;- c(\"y_scaled\", \"x1_scaled\", \"x2_scaled\")\nmv_seq &lt;- create_multivar_sequences(multivar_data, \"y_scaled\", feature_cols, look_back)\n\ncat(\"å¤šå˜é‡è¾“å…¥å½¢çŠ¶:\", dim(mv_seq$X), \"\\n\")\n\n\n\næ„å»ºå¤šå˜é‡ LSTM\n\n# åˆ’åˆ†æ•°æ®\ntrain_idx &lt;- 1:(train_size - look_back)\ntest_idx &lt;- (train_size - look_back + 1):(n - look_back)\n\nX_train_mv &lt;- mv_seq$X[train_idx, , ]\ny_train_mv &lt;- mv_seq$y[train_idx]\nX_test_mv &lt;- mv_seq$X[test_idx, , ]\ny_test_mv &lt;- mv_seq$y[test_idx]\n\n# å®šä¹‰æ¨¡å‹\nn_features &lt;- length(feature_cols)\n\nmv_model &lt;- keras_model_sequential() %&gt;%\n    layer_lstm(\n        units = 50,\n        input_shape = c(look_back, n_features),\n        return_sequences = FALSE\n    ) %&gt;%\n    layer_dropout(rate = 0.2) %&gt;%\n    layer_dense(units = 1)\n\nmv_model %&gt;% compile(\n    optimizer = \"adam\",\n    loss = \"mse\"\n)\n\n# è®­ç»ƒ\nmv_history &lt;- mv_model %&gt;% fit(\n    X_train_mv, y_train_mv,\n    epochs = 50,\n    batch_size = 32,\n    validation_split = 0.2,\n    verbose = 0\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "LSTM æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1044-lstm.html#ç¬¬ä¸ƒéƒ¨åˆ†æ¨¡å‹ä¿å­˜ä¸åŠ è½½",
    "href": "1044-lstm.html#ç¬¬ä¸ƒéƒ¨åˆ†æ¨¡å‹ä¿å­˜ä¸åŠ è½½",
    "title": "LSTM æ·±åº¦å­¦ä¹ æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæ¨¡å‹ä¿å­˜ä¸åŠ è½½",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæ¨¡å‹ä¿å­˜ä¸åŠ è½½\n\n# ä¿å­˜æ¨¡å‹\nsave_model_keras(model, \"lstm_model.keras\")\n\n# åŠ è½½æ¨¡å‹\nloaded_model &lt;- load_model_keras(\"lstm_model.keras\")\n\n# ä½¿ç”¨åŠ è½½çš„æ¨¡å‹é¢„æµ‹\npredictions &lt;- loaded_model %&gt;% predict(X_test_lstm)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "LSTM æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1044-lstm.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "1044-lstm.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "LSTM æ·±åº¦å­¦ä¹ æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# æ•°æ®å‡†å¤‡\ncreate_sequences &lt;- function(data, look_back) {\n    # è¿”å› X (n x look_back) å’Œ y (n)\n}\n\n# è½¬ä¸º LSTM æ ¼å¼\nX_lstm &lt;- array(X, dim = c(nrow(X), look_back, n_features))\n\n# æ„å»ºæ¨¡å‹\nmodel &lt;- keras_model_sequential() %&gt;%\n    layer_lstm(units = 50, input_shape = c(timesteps, features)) %&gt;%\n    layer_dropout(0.2) %&gt;%\n    layer_dense(1)\n\n# ç¼–è¯‘\nmodel %&gt;% compile(optimizer = \"adam\", loss = \"mse\")\n\n# è®­ç»ƒ\nhistory &lt;- model %&gt;% fit(X_train, y_train, epochs = 50, batch_size = 32)\n\n# é¢„æµ‹\npredictions &lt;- model %&gt;% predict(X_test)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "LSTM æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1044-lstm.html#å°ç»“",
    "href": "1044-lstm.html#å°ç»“",
    "title": "LSTM æ·±åº¦å­¦ä¹ æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "å°ç»“",
    "text": "å°ç»“\nLSTM æ—¶é—´åºåˆ—é¢„æµ‹å…³é”®æ­¥éª¤ï¼š\n\næ•°æ®å‡†å¤‡ï¼šæ ‡å‡†åŒ– + æ»‘åŠ¨çª—å£\næ ¼å¼è½¬æ¢ï¼š3D æ•°ç»„ [samples, timesteps, features]\næ¨¡å‹æ„å»ºï¼šé€‰æ‹©åˆé€‚çš„ LSTM ç»“æ„\nè®­ç»ƒæŠ€å·§ï¼šæ—©åœã€å­¦ä¹ ç‡è°ƒæ•´\nè¯„ä¼°è¾“å‡ºï¼šåæ ‡å‡†åŒ–åè®¡ç®—æŒ‡æ ‡\n\n\næœ€ä½³å®è·µï¼š - æ€»æ˜¯å¯¹æ•°æ®è¿›è¡Œæ ‡å‡†åŒ– - ä½¿ç”¨éªŒè¯é›†ç›‘æ§è¿‡æ‹Ÿåˆ - å¤šå°è¯•ä¸åŒçš„ look_back é•¿åº¦ - å †å  LSTM å¯æå‡å¤æ‚åºåˆ—çš„å»ºæ¨¡èƒ½åŠ›",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "LSTM æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1044-lstm.html#å‚è€ƒèµ„æº",
    "href": "1044-lstm.html#å‚è€ƒèµ„æº",
    "title": "LSTM æ·±åº¦å­¦ä¹ æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nKeras for R\nDeep Learning with R\nUnderstanding LSTM Networks",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "LSTM æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1042-tidymodels.html",
    "href": "1042-tidymodels.html",
    "title": "tidymodels ç°ä»£æœºå™¨å­¦ä¹ æ¡†æ¶",
    "section": "",
    "text": "tidymodels æ˜¯ R è¯­è¨€ä¸­åŸºäº tidyverse è®¾è®¡ç†å¿µçš„æœºå™¨å­¦ä¹ æ¡†æ¶ï¼Œæä¾›äº†ä¸€å¥—ç»Ÿä¸€ã€ç°ä»£åŒ–çš„å»ºæ¨¡å·¥ä½œæµã€‚å®ƒç”±å¤šä¸ªååŒå·¥ä½œçš„åŒ…ç»„æˆï¼Œæ¶µç›–ä»æ•°æ®é¢„å¤„ç†åˆ°æ¨¡å‹è¯„ä¼°çš„å…¨æµç¨‹ã€‚\n\n\n\n\n\nç‰¹ç‚¹\nè¯´æ˜\n\n\n\n\ntidyverse é£æ ¼\nç®¡é“æ“ä½œã€ä¸€è‡´çš„è¯­æ³•\n\n\næ¨¡å—åŒ–è®¾è®¡\næ¯ä¸ªåŒ…ä¸“æ³¨ä¸€ä¸ªä»»åŠ¡\n\n\nå·¥ä½œæµç»Ÿä¸€\né¢„å¤„ç†å’Œå»ºæ¨¡å°è£…åœ¨ä¸€èµ·\n\n\nå¯å¤ç°\né¿å…æ•°æ®æ³„éœ²\n\n\nçµæ´»è°ƒå‚\nå¼ºå¤§çš„ç½‘æ ¼æœç´¢å’Œè´å¶æ–¯ä¼˜åŒ–\n\n\n\n\n\n\n\n\n\n\n\nåŒ…å\nåŠŸèƒ½\n\n\n\n\nrsample\næ•°æ®æ‹†åˆ†ä¸é‡é‡‡æ ·\n\n\nrecipes\nç‰¹å¾å·¥ç¨‹é¢„å¤„ç†\n\n\nparsnip\nç»Ÿä¸€æ¨¡å‹æ¥å£\n\n\nworkflows\næ‰“åŒ…é¢„å¤„ç†+æ¨¡å‹\n\n\ntune\nè¶…å‚æ•°è°ƒä¼˜\n\n\nyardstick\næ¨¡å‹è¯„ä¼°æŒ‡æ ‡\n\n\nbroom\næ•´ç†æ¨¡å‹è¾“å‡º",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "tidymodels æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1042-tidymodels.html#tidymodels-ç®€ä»‹",
    "href": "1042-tidymodels.html#tidymodels-ç®€ä»‹",
    "title": "tidymodels ç°ä»£æœºå™¨å­¦ä¹ æ¡†æ¶",
    "section": "",
    "text": "tidymodels æ˜¯ R è¯­è¨€ä¸­åŸºäº tidyverse è®¾è®¡ç†å¿µçš„æœºå™¨å­¦ä¹ æ¡†æ¶ï¼Œæä¾›äº†ä¸€å¥—ç»Ÿä¸€ã€ç°ä»£åŒ–çš„å»ºæ¨¡å·¥ä½œæµã€‚å®ƒç”±å¤šä¸ªååŒå·¥ä½œçš„åŒ…ç»„æˆï¼Œæ¶µç›–ä»æ•°æ®é¢„å¤„ç†åˆ°æ¨¡å‹è¯„ä¼°çš„å…¨æµç¨‹ã€‚\n\n\n\n\n\nç‰¹ç‚¹\nè¯´æ˜\n\n\n\n\ntidyverse é£æ ¼\nç®¡é“æ“ä½œã€ä¸€è‡´çš„è¯­æ³•\n\n\næ¨¡å—åŒ–è®¾è®¡\næ¯ä¸ªåŒ…ä¸“æ³¨ä¸€ä¸ªä»»åŠ¡\n\n\nå·¥ä½œæµç»Ÿä¸€\né¢„å¤„ç†å’Œå»ºæ¨¡å°è£…åœ¨ä¸€èµ·\n\n\nå¯å¤ç°\né¿å…æ•°æ®æ³„éœ²\n\n\nçµæ´»è°ƒå‚\nå¼ºå¤§çš„ç½‘æ ¼æœç´¢å’Œè´å¶æ–¯ä¼˜åŒ–\n\n\n\n\n\n\n\n\n\n\n\nåŒ…å\nåŠŸèƒ½\n\n\n\n\nrsample\næ•°æ®æ‹†åˆ†ä¸é‡é‡‡æ ·\n\n\nrecipes\nç‰¹å¾å·¥ç¨‹é¢„å¤„ç†\n\n\nparsnip\nç»Ÿä¸€æ¨¡å‹æ¥å£\n\n\nworkflows\næ‰“åŒ…é¢„å¤„ç†+æ¨¡å‹\n\n\ntune\nè¶…å‚æ•°è°ƒä¼˜\n\n\nyardstick\næ¨¡å‹è¯„ä¼°æŒ‡æ ‡\n\n\nbroom\næ•´ç†æ¨¡å‹è¾“å‡º",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "tidymodels æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1042-tidymodels.html#å®‰è£…ä¸åŠ è½½",
    "href": "1042-tidymodels.html#å®‰è£…ä¸åŠ è½½",
    "title": "tidymodels ç°ä»£æœºå™¨å­¦ä¹ æ¡†æ¶",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\n# å®‰è£… tidymodelsï¼ˆåŒ…å«æ‰€æœ‰æ ¸å¿ƒåŒ…ï¼‰\ninstall.packages(\"tidymodels\")\n\n# é¢å¤–æ¨è\ninstall.packages(c(\"ranger\", \"xgboost\", \"kknn\"))\n\n\nlibrary(tidymodels)\nlibrary(ggplot2)\n\n# è®¾ç½®ä¸»é¢˜\ntheme_set(theme_bw(base_size = 12))\n\n# è®¾ç½®éšæœºç§å­\nset.seed(42)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "tidymodels æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1042-tidymodels.html#æœºå™¨å­¦ä¹ å·¥ä½œæµæ¦‚è§ˆ",
    "href": "1042-tidymodels.html#æœºå™¨å­¦ä¹ å·¥ä½œæµæ¦‚è§ˆ",
    "title": "tidymodels ç°ä»£æœºå™¨å­¦ä¹ æ¡†æ¶",
    "section": "æœºå™¨å­¦ä¹ å·¥ä½œæµæ¦‚è§ˆ",
    "text": "æœºå™¨å­¦ä¹ å·¥ä½œæµæ¦‚è§ˆ\ntidymodels çš„å…¸å‹å·¥ä½œæµç¨‹ï¼š\næ•°æ® â†’ rsampleï¼ˆæ‹†åˆ†ï¼‰â†’ recipesï¼ˆé¢„å¤„ç†ï¼‰â†’ parsnipï¼ˆæ¨¡å‹ï¼‰\n                              â†“\n                   workflowsï¼ˆæ‰“åŒ…ï¼‰â†’ tuneï¼ˆè°ƒå‚ï¼‰â†’ yardstickï¼ˆè¯„ä¼°ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "tidymodels æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1042-tidymodels.html#ç¬¬ä¸€éƒ¨åˆ†rsample-æ•°æ®æ‹†åˆ†",
    "href": "1042-tidymodels.html#ç¬¬ä¸€éƒ¨åˆ†rsample-æ•°æ®æ‹†åˆ†",
    "title": "tidymodels ç°ä»£æœºå™¨å­¦ä¹ æ¡†æ¶",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šrsample æ•°æ®æ‹†åˆ†",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šrsample æ•°æ®æ‹†åˆ†\nrsample æä¾›äº†å¤šç§æ•°æ®æ‹†åˆ†å’Œé‡é‡‡æ ·æ–¹æ³•ã€‚\n\nè®­ç»ƒ/æµ‹è¯•é›†æ‹†åˆ†\n\n# ä½¿ç”¨ä¼é¹…æ•°æ®é›†\ndata(\"penguins\", package = \"palmerpenguins\")\npenguins &lt;- na.omit(penguins)\n\n# 70/30 æ‹†åˆ†ï¼Œåˆ†å±‚æŠ½æ ·\npenguin_split &lt;- initial_split(penguins, prop = 0.7, strata = species)\n\npenguin_split\n\n&lt;Training/Testing/Total&gt;\n&lt;232/101/333&gt;\n\n\n\n# æå–è®­ç»ƒé›†å’Œæµ‹è¯•é›†\ntrain_data &lt;- training(penguin_split)\ntest_data &lt;- testing(penguin_split)\n\ncat(\"è®­ç»ƒé›†:\", nrow(train_data), \"è¡Œ\\n\")\n\nè®­ç»ƒé›†: 232 è¡Œ\n\ncat(\"æµ‹è¯•é›†:\", nrow(test_data), \"è¡Œ\\n\")\n\næµ‹è¯•é›†: 101 è¡Œ\n\n\n\n\näº¤å‰éªŒè¯\n\n# 5æŠ˜äº¤å‰éªŒè¯\ncv_folds &lt;- vfold_cv(train_data, v = 5, strata = species)\ncv_folds\n\n#  5-fold cross-validation using stratification \n# A tibble: 5 Ã— 2\n  splits           id   \n  &lt;list&gt;           &lt;chr&gt;\n1 &lt;split [184/48]&gt; Fold1\n2 &lt;split [184/48]&gt; Fold2\n3 &lt;split [186/46]&gt; Fold3\n4 &lt;split [187/45]&gt; Fold4\n5 &lt;split [187/45]&gt; Fold5\n\n\n\n\nå…¶ä»–é‡é‡‡æ ·æ–¹æ³•\n\n# Bootstrap\nbootstraps(train_data, times = 25)\n\n# é‡å¤äº¤å‰éªŒè¯\nvfold_cv(train_data, v = 5, repeats = 3)\n\n# ç•™ä¸€æ³•\nloo_cv(train_data)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "tidymodels æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1042-tidymodels.html#ç¬¬äºŒéƒ¨åˆ†recipes-ç‰¹å¾å·¥ç¨‹",
    "href": "1042-tidymodels.html#ç¬¬äºŒéƒ¨åˆ†recipes-ç‰¹å¾å·¥ç¨‹",
    "title": "tidymodels ç°ä»£æœºå™¨å­¦ä¹ æ¡†æ¶",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šrecipes ç‰¹å¾å·¥ç¨‹",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šrecipes ç‰¹å¾å·¥ç¨‹\nrecipes åŒ…æä¾›äº†å¼ºå¤§çš„æ•°æ®é¢„å¤„ç†èƒ½åŠ›ï¼Œæ‰€æœ‰æ­¥éª¤éƒ½å¯ä»¥å¤ç°åˆ°æ–°æ•°æ®ä¸Šã€‚\n\nåˆ›å»ºé¢„å¤„ç†é…æ–¹\n\n# å®šä¹‰é¢„å¤„ç†æ­¥éª¤\npenguin_recipe &lt;- recipe(species ~ ., data = train_data) %&gt;%\n    # åˆ é™¤ä¸éœ€è¦çš„å˜é‡\n    step_rm(year) %&gt;%\n    # è™šæ‹Ÿå˜é‡ç¼–ç \n    step_dummy(all_nominal_predictors()) %&gt;%\n    # æ ‡å‡†åŒ–æ•°å€¼å˜é‡\n    step_normalize(all_numeric_predictors()) %&gt;%\n    # ç§»é™¤é›¶æ–¹å·®å˜é‡\n    step_zv(all_predictors())\n\npenguin_recipe\n\n\n\næŸ¥çœ‹é¢„å¤„ç†æ•ˆæœ\n\n# å‡†å¤‡é…æ–¹ï¼ˆfit to training dataï¼‰\npenguin_recipe_prep &lt;- prep(penguin_recipe)\n\n# åº”ç”¨åˆ°æ•°æ®\nbaked_train &lt;- bake(penguin_recipe_prep, new_data = NULL)\nhead(baked_train)\n\n# A tibble: 6 Ã— 8\n  bill_length_mm bill_depth_mm flipper_length_mm body_mass_g species\n           &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  \n1         -0.863         0.773            -1.40       -0.560 Adelie \n2         -0.791         0.114            -1.05       -0.498 Adelie \n3         -0.648         0.418            -0.413      -1.18  Adelie \n4         -1.29          1.08             -0.554      -0.932 Adelie \n5         -0.827         1.74             -0.765      -0.684 Adelie \n6         -0.899         0.317            -1.40       -0.715 Adelie \n# â„¹ 3 more variables: island_Dream &lt;dbl&gt;, island_Torgersen &lt;dbl&gt;,\n#   sex_male &lt;dbl&gt;\n\n\n\n\nå¸¸ç”¨é¢„å¤„ç†æ­¥éª¤\n\n\n\nå‡½æ•°\nä½œç”¨\n\n\n\n\nstep_normalize()\næ ‡å‡†åŒ–ï¼ˆå‡å€¼0ï¼Œæ ‡å‡†å·®1ï¼‰\n\n\nstep_scale()\nä»…ç¼©æ”¾\n\n\nstep_center()\nä»…ä¸­å¿ƒåŒ–\n\n\nstep_dummy()\nå“‘å˜é‡ç¼–ç \n\n\nstep_impute_median()\nä¸­ä½æ•°å¡«å……ç¼ºå¤±å€¼\n\n\nstep_impute_knn()\nKNNå¡«å……ç¼ºå¤±å€¼\n\n\nstep_pca()\nä¸»æˆåˆ†åˆ†æé™ç»´\n\n\nstep_log()\nå¯¹æ•°å˜æ¢\n\n\nstep_interact()\nåˆ›å»ºäº¤äº’é¡¹\n\n\nstep_zv()\nç§»é™¤é›¶æ–¹å·®å˜é‡\n\n\nstep_corr()\nç§»é™¤é«˜ç›¸å…³å˜é‡",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "tidymodels æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1042-tidymodels.html#ç¬¬ä¸‰éƒ¨åˆ†parsnip-ç»Ÿä¸€æ¨¡å‹æ¥å£",
    "href": "1042-tidymodels.html#ç¬¬ä¸‰éƒ¨åˆ†parsnip-ç»Ÿä¸€æ¨¡å‹æ¥å£",
    "title": "tidymodels ç°ä»£æœºå™¨å­¦ä¹ æ¡†æ¶",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šparsnip ç»Ÿä¸€æ¨¡å‹æ¥å£",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šparsnip ç»Ÿä¸€æ¨¡å‹æ¥å£\nparsnip ä¸ºä¸åŒæœºå™¨å­¦ä¹ ç®—æ³•æä¾›ç»Ÿä¸€çš„æ¥å£ã€‚\n\nå®šä¹‰æ¨¡å‹\n\n# éšæœºæ£®æ—åˆ†ç±»æ¨¡å‹\nrf_spec &lt;- rand_forest(\n    trees = 500,\n    mtry = tune(), # å¾…è°ƒå‚\n    min_n = tune() # å¾…è°ƒå‚\n) %&gt;%\n    set_engine(\"ranger\") %&gt;%\n    set_mode(\"classification\")\n\nrf_spec\n\nRandom Forest Model Specification (classification)\n\nMain Arguments:\n  mtry = tune()\n  trees = 500\n  min_n = tune()\n\nComputational engine: ranger \n\n\n\n\nå¸¸ç”¨æ¨¡å‹ç±»å‹\n\n\n\n\n\næ¨¡å‹å‡½æ•°\nç®—æ³•\nå¼•æ“\n\n\n\n\nlogistic_reg()\né€»è¾‘å›å½’\nglm/glmnet\n\n\nlinear_reg()\nçº¿æ€§å›å½’\nlm/glmnet\n\n\nrand_forest()\néšæœºæ£®æ—\nranger/randomForest\n\n\nboost_tree()\næ¢¯åº¦æå‡æ ‘\nxgboost/lightgbm\n\n\nsvm_rbf()\næ”¯æŒå‘é‡æœº\nkernlab\n\n\nnearest_neighbor()\nKè¿‘é‚»\nkknn\n\n\ndecision_tree()\nå†³ç­–æ ‘\nrpart\n\n\nnaive_Bayes()\næœ´ç´ è´å¶æ–¯\nnaivebayes\n\n\n\n\n\n\n\nä¸åŒå¼•æ“ç¤ºä¾‹\n\n# logistic å›å½’ï¼ˆglmå¼•æ“ï¼‰\nlog_spec &lt;- logistic_reg() %&gt;%\n    set_engine(\"glm\") %&gt;%\n    set_mode(\"classification\")\n\n# å¸¦æ­£åˆ™åŒ–çš„logisticå›å½’ï¼ˆglmnetå¼•æ“ï¼‰\nlog_reg_spec &lt;- logistic_reg(penalty = 0.01, mixture = 1) %&gt;%\n    set_engine(\"glmnet\") %&gt;%\n    set_mode(\"classification\")\n\n# XGBoost\nxgb_spec &lt;- boost_tree(\n    trees = 500,\n    tree_depth = 6,\n    learn_rate = 0.01\n) %&gt;%\n    set_engine(\"xgboost\") %&gt;%\n    set_mode(\"classification\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "tidymodels æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1042-tidymodels.html#ç¬¬å››éƒ¨åˆ†workflows-å·¥ä½œæµ",
    "href": "1042-tidymodels.html#ç¬¬å››éƒ¨åˆ†workflows-å·¥ä½œæµ",
    "title": "tidymodels ç°ä»£æœºå™¨å­¦ä¹ æ¡†æ¶",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šworkflows å·¥ä½œæµ",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šworkflows å·¥ä½œæµ\nworkflows å°†é¢„å¤„ç†å’Œæ¨¡å‹æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œç¡®ä¿ä¸€è‡´æ€§ã€‚\n\nåˆ›å»ºå·¥ä½œæµ\n\n# åˆ›å»ºå·¥ä½œæµ\npenguin_wf &lt;- workflow() %&gt;%\n    add_recipe(penguin_recipe) %&gt;%\n    add_model(rf_spec)\n\npenguin_wf\n\nâ•â• Workflow â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nPreprocessor: Recipe\nModel: rand_forest()\n\nâ”€â”€ Preprocessor â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n4 Recipe Steps\n\nâ€¢ step_rm()\nâ€¢ step_dummy()\nâ€¢ step_normalize()\nâ€¢ step_zv()\n\nâ”€â”€ Model â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nRandom Forest Model Specification (classification)\n\nMain Arguments:\n  mtry = tune()\n  trees = 500\n  min_n = tune()\n\nComputational engine: ranger \n\n\n\n\nè®­ç»ƒå·¥ä½œæµ\n\n# å…ˆç”¨å›ºå®šå‚æ•°è®­ç»ƒä¸€ä¸ªç®€å•æ¨¡å‹\nrf_simple &lt;- rand_forest(trees = 100, mtry = 3, min_n = 5) %&gt;%\n    set_engine(\"ranger\") %&gt;%\n    set_mode(\"classification\")\n\nsimple_wf &lt;- workflow() %&gt;%\n    add_recipe(penguin_recipe) %&gt;%\n    add_model(rf_simple)\n\n# è®­ç»ƒ\nsimple_fit &lt;- fit(simple_wf, data = train_data)\nsimple_fit\n\nâ•â• Workflow [trained] â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nPreprocessor: Recipe\nModel: rand_forest()\n\nâ”€â”€ Preprocessor â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n4 Recipe Steps\n\nâ€¢ step_rm()\nâ€¢ step_dummy()\nâ€¢ step_normalize()\nâ€¢ step_zv()\n\nâ”€â”€ Model â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nRanger result\n\nCall:\n ranger::ranger(x = maybe_data_frame(x), y = y, mtry = min_cols(~3,      x), num.trees = ~100, min.node.size = min_rows(~5, x), num.threads = 1,      verbose = FALSE, seed = sample.int(10^5, 1), probability = TRUE) \n\nType:                             Probability estimation \nNumber of trees:                  100 \nSample size:                      232 \nNumber of independent variables:  7 \nMtry:                             3 \nTarget node size:                 5 \nVariable importance mode:         none \nSplitrule:                        gini \nOOB prediction error (Brier s.):  0.02059993 \n\n\n\n\né¢„æµ‹\n\n# åœ¨æµ‹è¯•é›†ä¸Šé¢„æµ‹\npredictions &lt;- predict(simple_fit, new_data = test_data)\nhead(predictions)\n\n# A tibble: 6 Ã— 1\n  .pred_class\n  &lt;fct&gt;      \n1 Adelie     \n2 Adelie     \n3 Adelie     \n4 Adelie     \n5 Adelie     \n6 Adelie     \n\n# é¢„æµ‹æ¦‚ç‡\npred_prob &lt;- predict(simple_fit, new_data = test_data, type = \"prob\")\nhead(pred_prob)\n\n# A tibble: 6 Ã— 3\n  .pred_Adelie .pred_Chinstrap .pred_Gentoo\n         &lt;dbl&gt;           &lt;dbl&gt;        &lt;dbl&gt;\n1        0.992          0            0.0085\n2        1              0            0     \n3        1              0            0     \n4        0.968          0.0323       0     \n5        1              0            0     \n6        0.97           0.03         0     \n\n# åˆå¹¶ç»“æœ\nresults &lt;- bind_cols(\n    test_data %&gt;% select(species),\n    predictions,\n    pred_prob\n)\nhead(results)\n\n# A tibble: 6 Ã— 5\n  species .pred_class .pred_Adelie .pred_Chinstrap .pred_Gentoo\n  &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;           &lt;dbl&gt;        &lt;dbl&gt;\n1 Adelie  Adelie             0.992          0            0.0085\n2 Adelie  Adelie             1              0            0     \n3 Adelie  Adelie             1              0            0     \n4 Adelie  Adelie             0.968          0.0323       0     \n5 Adelie  Adelie             1              0            0     \n6 Adelie  Adelie             0.97           0.03         0",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "tidymodels æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1042-tidymodels.html#ç¬¬äº”éƒ¨åˆ†yardstick-æ¨¡å‹è¯„ä¼°",
    "href": "1042-tidymodels.html#ç¬¬äº”éƒ¨åˆ†yardstick-æ¨¡å‹è¯„ä¼°",
    "title": "tidymodels ç°ä»£æœºå™¨å­¦ä¹ æ¡†æ¶",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šyardstick æ¨¡å‹è¯„ä¼°",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šyardstick æ¨¡å‹è¯„ä¼°\nyardstick æä¾›ä¸°å¯Œçš„è¯„ä¼°æŒ‡æ ‡ã€‚\n\nåˆ†ç±»æŒ‡æ ‡\n\n# å‡†ç¡®ç‡\naccuracy(results, truth = species, estimate = .pred_class)\n\n# A tibble: 1 Ã— 3\n  .metric  .estimator .estimate\n  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;\n1 accuracy multiclass     0.990\n\n# å¤šä¸ªæŒ‡æ ‡\nclass_metrics &lt;- metric_set(accuracy, kap, mcc)\nclass_metrics(results, truth = species, estimate = .pred_class)\n\n# A tibble: 3 Ã— 3\n  .metric  .estimator .estimate\n  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;\n1 accuracy multiclass     0.990\n2 kap      multiclass     0.985\n3 mcc      multiclass     0.985\n\n\n\n\næ··æ·†çŸ©é˜µ\n\n# æ··æ·†çŸ©é˜µ\nconf_mat(results, truth = species, estimate = .pred_class)\n\n           Truth\nPrediction  Adelie Chinstrap Gentoo\n  Adelie        43         0      0\n  Chinstrap      1        21      0\n  Gentoo         0         0     36\n\n\n\n# å¯è§†åŒ–æ··æ·†çŸ©é˜µ\nresults %&gt;%\n    conf_mat(truth = species, estimate = .pred_class) %&gt;%\n    autoplot(type = \"heatmap\")\n\n\n\n\n\n\n\n\n\n\nROCæ›²çº¿ï¼ˆå¤šåˆ†ç±»ï¼‰\n\n# ROC AUC\nroc_auc(results, truth = species, .pred_Adelie:.pred_Gentoo)\n\n# A tibble: 1 Ã— 3\n  .metric .estimator .estimate\n  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;\n1 roc_auc hand_till      0.999\n\n# ROCæ›²çº¿\nresults %&gt;%\n    roc_curve(truth = species, .pred_Adelie:.pred_Gentoo) %&gt;%\n    autoplot()\n\n\n\n\n\n\n\n\n\n\nå¸¸ç”¨è¯„ä¼°æŒ‡æ ‡\n\n\n\nåˆ†ç±»æŒ‡æ ‡\nå‡½æ•°\nå›å½’æŒ‡æ ‡\nå‡½æ•°\n\n\n\n\nå‡†ç¡®ç‡\naccuracy()\nMSE\nrmse()\n\n\nKappa\nkap()\nMAE\nmae()\n\n\nAUC\nroc_auc()\nRÂ²\nrsq()\n\n\nç²¾ç¡®ç‡\nprecision()\nMAPE\nmape()\n\n\nå¬å›ç‡\nrecall()\nHuber\nhuber_loss()\n\n\nF1\nf_meas()",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "tidymodels æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1042-tidymodels.html#ç¬¬å…­éƒ¨åˆ†tune-è¶…å‚æ•°è°ƒä¼˜",
    "href": "1042-tidymodels.html#ç¬¬å…­éƒ¨åˆ†tune-è¶…å‚æ•°è°ƒä¼˜",
    "title": "tidymodels ç°ä»£æœºå™¨å­¦ä¹ æ¡†æ¶",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼štune è¶…å‚æ•°è°ƒä¼˜",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼štune è¶…å‚æ•°è°ƒä¼˜\ntune åŒ…æ”¯æŒç½‘æ ¼æœç´¢ã€éšæœºæœç´¢å’Œè´å¶æ–¯ä¼˜åŒ–ã€‚\n\nå®šä¹‰è°ƒå‚æ¨¡å‹\n\n# å¸¦è°ƒå‚æ ‡è®°çš„æ¨¡å‹\nrf_tune_spec &lt;- rand_forest(\n    trees = 500,\n    mtry = tune(),\n    min_n = tune()\n) %&gt;%\n    set_engine(\"ranger\") %&gt;%\n    set_mode(\"classification\")\n\n# åˆ›å»ºå·¥ä½œæµ\ntune_wf &lt;- workflow() %&gt;%\n    add_recipe(penguin_recipe) %&gt;%\n    add_model(rf_tune_spec)\n\n\n\nç½‘æ ¼æœç´¢\n\n# åˆ›å»ºå‚æ•°ç½‘æ ¼\nrf_grid &lt;- grid_regular(\n    mtry(range = c(1, 5)),\n    min_n(range = c(2, 10)),\n    levels = 4\n)\n\nrf_grid\n\n# A tibble: 16 Ã— 2\n    mtry min_n\n   &lt;int&gt; &lt;int&gt;\n 1     1     2\n 2     2     2\n 3     3     2\n 4     5     2\n 5     1     4\n 6     2     4\n 7     3     4\n 8     5     4\n 9     1     7\n10     2     7\n11     3     7\n12     5     7\n13     1    10\n14     2    10\n15     3    10\n16     5    10\n\n\n\n# æ‰§è¡Œç½‘æ ¼æœç´¢\ntune_results &lt;- tune_grid(\n    tune_wf,\n    resamples = cv_folds,\n    grid = rf_grid,\n    metrics = metric_set(accuracy, roc_auc)\n)\n\ntune_results\n\n# Tuning results\n# 5-fold cross-validation using stratification \n# A tibble: 5 Ã— 4\n  splits           id    .metrics          .notes          \n  &lt;list&gt;           &lt;chr&gt; &lt;list&gt;            &lt;list&gt;          \n1 &lt;split [184/48]&gt; Fold1 &lt;tibble [32 Ã— 6]&gt; &lt;tibble [0 Ã— 4]&gt;\n2 &lt;split [184/48]&gt; Fold2 &lt;tibble [32 Ã— 6]&gt; &lt;tibble [0 Ã— 4]&gt;\n3 &lt;split [186/46]&gt; Fold3 &lt;tibble [32 Ã— 6]&gt; &lt;tibble [0 Ã— 4]&gt;\n4 &lt;split [187/45]&gt; Fold4 &lt;tibble [32 Ã— 6]&gt; &lt;tibble [0 Ã— 4]&gt;\n5 &lt;split [187/45]&gt; Fold5 &lt;tibble [32 Ã— 6]&gt; &lt;tibble [0 Ã— 4]&gt;\n\n\n\n\næŸ¥çœ‹è°ƒå‚ç»“æœ\n\n# æŸ¥çœ‹æ‰€æœ‰ç»“æœ\ncollect_metrics(tune_results)\n\n# A tibble: 32 Ã— 8\n    mtry min_n .metric  .estimator  mean     n  std_err .config         \n   &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;    &lt;dbl&gt; &lt;chr&gt;           \n 1     1     2 accuracy multiclass 0.992     5 0.00833  pre0_mod01_post0\n 2     1     2 roc_auc  hand_till  0.999     5 0.000635 pre0_mod01_post0\n 3     1     4 accuracy multiclass 0.992     5 0.00833  pre0_mod02_post0\n 4     1     4 roc_auc  hand_till  0.999     5 0.000635 pre0_mod02_post0\n 5     1     7 accuracy multiclass 0.992     5 0.00833  pre0_mod03_post0\n 6     1     7 roc_auc  hand_till  0.999     5 0.000952 pre0_mod03_post0\n 7     1    10 accuracy multiclass 0.992     5 0.00833  pre0_mod04_post0\n 8     1    10 roc_auc  hand_till  0.999     5 0.00127  pre0_mod04_post0\n 9     2     2 accuracy multiclass 0.988     5 0.00833  pre0_mod05_post0\n10     2     2 roc_auc  hand_till  0.999     5 0.000635 pre0_mod05_post0\n# â„¹ 22 more rows\n\n\n\n# æœ€ä¼˜å‚æ•°\nshow_best(tune_results, metric = \"accuracy\", n = 5)\n\n# A tibble: 5 Ã— 8\n   mtry min_n .metric  .estimator  mean     n std_err .config         \n  &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;           \n1     1     2 accuracy multiclass 0.992     5 0.00833 pre0_mod01_post0\n2     1     4 accuracy multiclass 0.992     5 0.00833 pre0_mod02_post0\n3     1     7 accuracy multiclass 0.992     5 0.00833 pre0_mod03_post0\n4     1    10 accuracy multiclass 0.992     5 0.00833 pre0_mod04_post0\n5     2     4 accuracy multiclass 0.992     5 0.00833 pre0_mod06_post0\n\n\n\n# é€‰æ‹©æœ€ä½³å‚æ•°\nbest_params &lt;- select_best(tune_results, metric = \"accuracy\")\nbest_params\n\n# A tibble: 1 Ã— 3\n   mtry min_n .config         \n  &lt;int&gt; &lt;int&gt; &lt;chr&gt;           \n1     1     2 pre0_mod01_post0\n\n\n\n\nå¯è§†åŒ–è°ƒå‚è¿‡ç¨‹\n\nautoplot(tune_results)\n\n\n\n\n\n\n\n\n\n\nä½¿ç”¨æœ€ä¼˜å‚æ•°è®­ç»ƒæœ€ç»ˆæ¨¡å‹\n\n# ç”¨æœ€ä¼˜å‚æ•°æ›´æ–°å·¥ä½œæµ\nfinal_wf &lt;- finalize_workflow(tune_wf, best_params)\nfinal_wf\n\nâ•â• Workflow â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nPreprocessor: Recipe\nModel: rand_forest()\n\nâ”€â”€ Preprocessor â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n4 Recipe Steps\n\nâ€¢ step_rm()\nâ€¢ step_dummy()\nâ€¢ step_normalize()\nâ€¢ step_zv()\n\nâ”€â”€ Model â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nRandom Forest Model Specification (classification)\n\nMain Arguments:\n  mtry = 1\n  trees = 500\n  min_n = 2\n\nComputational engine: ranger \n\n\n\n# åœ¨å…¨éƒ¨è®­ç»ƒæ•°æ®ä¸Šæ‹Ÿåˆæœ€ç»ˆæ¨¡å‹\nfinal_fit &lt;- fit(final_wf, data = train_data)\n\n# åœ¨æµ‹è¯•é›†ä¸Šè¯„ä¼°\nfinal_results &lt;- predict(final_fit, new_data = test_data) %&gt;%\n    bind_cols(test_data %&gt;% select(species))\n\naccuracy(final_results, truth = species, estimate = .pred_class)\n\n# A tibble: 1 Ã— 3\n  .metric  .estimator .estimate\n  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;\n1 accuracy multiclass     0.990\n\n\n\n\nlast_fit: ä¸€æ­¥åˆ°ä½\n\n# last_fit è‡ªåŠ¨åœ¨è®­ç»ƒé›†æ‹Ÿåˆï¼Œåœ¨æµ‹è¯•é›†è¯„ä¼°\nfinal_results_full &lt;- last_fit(final_wf, split = penguin_split)\n\n# æ”¶é›†æµ‹è¯•é›†æŒ‡æ ‡\ncollect_metrics(final_results_full)\n\n# A tibble: 3 Ã— 4\n  .metric     .estimator .estimate .config        \n  &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;          \n1 accuracy    multiclass    0.980  pre0_mod0_post0\n2 roc_auc     hand_till     1.000  pre0_mod0_post0\n3 brier_class multiclass    0.0376 pre0_mod0_post0\n\n# æå–æœ€ç»ˆæ¨¡å‹\nfinal_model &lt;- extract_workflow(final_results_full)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "tidymodels æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1042-tidymodels.html#ç¬¬ä¸ƒéƒ¨åˆ†å®Œæ•´æ¡ˆä¾‹",
    "href": "1042-tidymodels.html#ç¬¬ä¸ƒéƒ¨åˆ†å®Œæ•´æ¡ˆä¾‹",
    "title": "tidymodels ç°ä»£æœºå™¨å­¦ä¹ æ¡†æ¶",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®Œæ•´æ¡ˆä¾‹",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®Œæ•´æ¡ˆä¾‹\n\næ¡ˆä¾‹ï¼šmtcars å›å½’é¢„æµ‹\n\n# 1. æ•°æ®å‡†å¤‡\ndata(mtcars)\nset.seed(123)\n\ncar_split &lt;- initial_split(mtcars, prop = 0.75)\ncar_train &lt;- training(car_split)\ncar_test &lt;- testing(car_split)\ncar_folds &lt;- vfold_cv(car_train, v = 5)\n\n# 2. é¢„å¤„ç†\ncar_recipe &lt;- recipe(mpg ~ ., data = car_train) %&gt;%\n    step_normalize(all_numeric_predictors()) %&gt;%\n    step_zv(all_predictors())\n\n# 3. å®šä¹‰å¤šä¸ªæ¨¡å‹\nlm_spec &lt;- linear_reg() %&gt;%\n    set_engine(\"lm\")\n\nrf_reg_spec &lt;- rand_forest(trees = 500) %&gt;%\n    set_engine(\"ranger\") %&gt;%\n    set_mode(\"regression\")\n\nxgb_reg_spec &lt;- boost_tree(trees = 500, learn_rate = 0.05) %&gt;%\n    set_engine(\"xgboost\") %&gt;%\n    set_mode(\"regression\")\n\n# 4. åˆ›å»ºå·¥ä½œæµé›†\nwf_set &lt;- workflow_set(\n    preproc = list(recipe = car_recipe),\n    models = list(\n        lm = lm_spec,\n        rf = rf_reg_spec,\n        xgb = xgb_reg_spec\n    )\n)\n\nwf_set\n\n# A workflow set/tibble: 3 Ã— 4\n  wflow_id   info             option    result    \n  &lt;chr&gt;      &lt;list&gt;           &lt;list&gt;    &lt;list&gt;    \n1 recipe_lm  &lt;tibble [1 Ã— 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;\n2 recipe_rf  &lt;tibble [1 Ã— 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;\n3 recipe_xgb &lt;tibble [1 Ã— 4]&gt; &lt;opts[0]&gt; &lt;list [0]&gt;\n\n\n\n# 5. æ‰¹é‡è®­ç»ƒè¯„ä¼°\nwf_results &lt;- workflow_map(\n    wf_set,\n    resamples = car_folds,\n    metrics = metric_set(rmse, rsq, mae)\n)\n\n# 6. æ¯”è¾ƒç»“æœ\nrank_results(wf_results, rank_metric = \"rmse\")\n\n# A tibble: 9 Ã— 9\n  wflow_id   .config        .metric  mean std_err     n preprocessor model  rank\n  &lt;chr&gt;      &lt;chr&gt;          &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;        &lt;chr&gt; &lt;int&gt;\n1 recipe_rf  pre0_mod0_posâ€¦ mae     2.10   0.446      5 recipe       randâ€¦     1\n2 recipe_rf  pre0_mod0_posâ€¦ rmse    2.60   0.409      5 recipe       randâ€¦     1\n3 recipe_rf  pre0_mod0_posâ€¦ rsq     0.870  0.0448     5 recipe       randâ€¦     1\n4 recipe_xgb pre0_mod0_posâ€¦ mae     2.90   0.383      5 recipe       boosâ€¦     2\n5 recipe_xgb pre0_mod0_posâ€¦ rmse    3.40   0.437      5 recipe       boosâ€¦     2\n6 recipe_xgb pre0_mod0_posâ€¦ rsq     0.736  0.101      5 recipe       boosâ€¦     2\n7 recipe_lm  pre0_mod0_posâ€¦ mae     3.44   0.559      5 recipe       lineâ€¦     3\n8 recipe_lm  pre0_mod0_posâ€¦ rmse    4.29   0.759      5 recipe       lineâ€¦     3\n9 recipe_lm  pre0_mod0_posâ€¦ rsq     0.728  0.129      5 recipe       lineâ€¦     3\n\n\n\n# 7. å¯è§†åŒ–æ¯”è¾ƒ\nautoplot(wf_results, metric = \"rmse\")\n\n\n\n\n\n\n\n\n\n# 8. é€‰æ‹©æœ€ä½³æ¨¡å‹è¿›è¡Œæœ€ç»ˆè®­ç»ƒ\nbest_wf_id &lt;- \"recipe_rf\" # å‡è®¾éšæœºæ£®æ—æœ€ä¼˜\nbest_wf &lt;- extract_workflow(wf_results, id = best_wf_id)\n\n# æœ€ç»ˆæ‹Ÿåˆ\nfinal_car_fit &lt;- fit(best_wf, data = car_train)\n\n# æµ‹è¯•é›†è¯„ä¼°\ncar_preds &lt;- predict(final_car_fit, new_data = car_test) %&gt;%\n    bind_cols(car_test %&gt;% select(mpg))\n\nmetrics(car_preds, truth = mpg, estimate = .pred)\n\n# A tibble: 3 Ã— 3\n  .metric .estimator .estimate\n  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;\n1 rmse    standard       2.10 \n2 rsq     standard       0.685\n3 mae     standard       1.90 \n\n\n\n# é¢„æµ‹ vs å®é™…\nggplot(car_preds, aes(x = mpg, y = .pred)) +\n    geom_point(color = \"#4f46e5\", size = 3, alpha = 0.7) +\n    geom_abline(slope = 1, intercept = 0, linetype = \"dashed\", color = \"red\") +\n    labs(\n        title = \"é¢„æµ‹å€¼ vs å®é™…å€¼\",\n        x = \"å®é™… MPG\",\n        y = \"é¢„æµ‹ MPG\"\n    ) +\n    coord_equal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "tidymodels æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1042-tidymodels.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "1042-tidymodels.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "tidymodels ç°ä»£æœºå™¨å­¦ä¹ æ¡†æ¶",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\næ•°æ®æ‹†åˆ†\n\n# åŸºç¡€æ‹†åˆ†\nsplit &lt;- initial_split(data, prop = 0.8, strata = outcome)\ntrain &lt;- training(split)\ntest &lt;- testing(split)\n\n# äº¤å‰éªŒè¯\nfolds &lt;- vfold_cv(train, v = 10, strata = outcome)\n\n\n\né¢„å¤„ç†é…æ–¹\n\nrecipe(outcome ~ ., data = train) %&gt;%\n    step_impute_median(all_numeric_predictors()) %&gt;%\n    step_dummy(all_nominal_predictors()) %&gt;%\n    step_normalize(all_numeric_predictors()) %&gt;%\n    step_zv(all_predictors())\n\n\n\næ¨¡å‹å®šä¹‰\n\n# åˆ†ç±»\nrand_forest(trees = 500, mtry = tune()) %&gt;%\n    set_engine(\"ranger\") %&gt;%\n    set_mode(\"classification\")\n\n# å›å½’\nlinear_reg(penalty = tune(), mixture = 1) %&gt;%\n    set_engine(\"glmnet\") %&gt;%\n    set_mode(\"regression\")\n\n\n\nå·¥ä½œæµ\n\nworkflow() %&gt;%\n    add_recipe(recipe) %&gt;%\n    add_model(model) %&gt;%\n    fit(data = train)\n\n\n\nè°ƒå‚\n\ntune_grid(workflow, resamples = folds, grid = 20) %&gt;%\n    select_best(metric = \"accuracy\") %&gt;%\n    finalize_workflow(workflow, .)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "tidymodels æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1042-tidymodels.html#å°ç»“",
    "href": "1042-tidymodels.html#å°ç»“",
    "title": "tidymodels ç°ä»£æœºå™¨å­¦ä¹ æ¡†æ¶",
    "section": "å°ç»“",
    "text": "å°ç»“\ntidymodels çš„æ ¸å¿ƒä»·å€¼ï¼š\n\nä¸€è‡´æ€§ï¼šæ‰€æœ‰æ¨¡å‹ä½¿ç”¨ç›¸åŒçš„æ¥å£\nå¯å¤ç°æ€§ï¼šé¢„å¤„ç†æ­¥éª¤å¯å‡†ç¡®åº”ç”¨åˆ°æ–°æ•°æ®\né˜²æ­¢æ•°æ®æ³„éœ²ï¼šå·¥ä½œæµç¡®ä¿æµ‹è¯•æ•°æ®éš”ç¦»\nçµæ´»æ€§ï¼šè½»æ¾åˆ‡æ¢ç®—æ³•å’Œå¼•æ“\nå¯æ‰©å±•ï¼šä¸°å¯Œçš„ç¤¾åŒºåŒ…ç”Ÿæ€\n\n\nä¸ mlr3 çš„åŒºåˆ«ï¼štidymodels æ›´ç¬¦åˆ tidyverse ä¹ æƒ¯ï¼Œç®¡é“æ“ä½œæµç•…ï¼›mlr3 ä½¿ç”¨ R6 é¢å‘å¯¹è±¡ï¼Œæ›´çµæ´»ä½†å­¦ä¹ æ›²çº¿ç•¥é™¡ã€‚æ ¹æ®ä¸ªäººåå¥½é€‰æ‹©å³å¯ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "tidymodels æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1042-tidymodels.html#å‚è€ƒèµ„æº",
    "href": "1042-tidymodels.html#å‚è€ƒèµ„æº",
    "title": "tidymodels ç°ä»£æœºå™¨å­¦ä¹ æ¡†æ¶",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\ntidymodels å®˜æ–¹ç½‘ç«™\nTidy Modeling with R - å…è´¹åœ¨çº¿ç”µå­ä¹¦\ntidymodels GitHub",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "tidymodels æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1040-scoping-review.html",
    "href": "1040-scoping-review.html",
    "title": "èŒƒå›´ç»¼è¿° (Scoping Review) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "èŒƒå›´ç»¼è¿° (Scoping Review) æ˜¯ä¸€ç§ç³»ç»ŸåŒ–çš„æ–‡çŒ®ç»¼è¿°æ–¹æ³•ï¼Œæ—¨åœ¨â€ç»˜åˆ¶â€æŸä¸€ç ”ç©¶é¢†åŸŸçš„æ–‡çŒ®åœ°å›¾ã€‚ä¸ä¼ ç»Ÿç³»ç»Ÿç»¼è¿°ä¸åŒï¼ŒèŒƒå›´ç»¼è¿°æ›´å…³æ³¨ç ”ç©¶çš„å¹¿åº¦è€Œéæ·±åº¦ã€‚\næœ¬æ•™ç¨‹å°†ä»‹ç»èŒƒå›´ç»¼è¿°çš„æ–¹æ³•å­¦æ¡†æ¶ã€R è¯­è¨€è¾…åŠ©å·¥å…·åŠå®Œæ•´æ“ä½œæµç¨‹ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "èŒƒå›´ç»¼è¿°"
    ]
  },
  {
    "objectID": "1040-scoping-review.html#å‰è¨€",
    "href": "1040-scoping-review.html#å‰è¨€",
    "title": "èŒƒå›´ç»¼è¿° (Scoping Review) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "èŒƒå›´ç»¼è¿° (Scoping Review) æ˜¯ä¸€ç§ç³»ç»ŸåŒ–çš„æ–‡çŒ®ç»¼è¿°æ–¹æ³•ï¼Œæ—¨åœ¨â€ç»˜åˆ¶â€æŸä¸€ç ”ç©¶é¢†åŸŸçš„æ–‡çŒ®åœ°å›¾ã€‚ä¸ä¼ ç»Ÿç³»ç»Ÿç»¼è¿°ä¸åŒï¼ŒèŒƒå›´ç»¼è¿°æ›´å…³æ³¨ç ”ç©¶çš„å¹¿åº¦è€Œéæ·±åº¦ã€‚\næœ¬æ•™ç¨‹å°†ä»‹ç»èŒƒå›´ç»¼è¿°çš„æ–¹æ³•å­¦æ¡†æ¶ã€R è¯­è¨€è¾…åŠ©å·¥å…·åŠå®Œæ•´æ“ä½œæµç¨‹ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "èŒƒå›´ç»¼è¿°"
    ]
  },
  {
    "objectID": "1040-scoping-review.html#ä»€ä¹ˆæ˜¯èŒƒå›´ç»¼è¿°",
    "href": "1040-scoping-review.html#ä»€ä¹ˆæ˜¯èŒƒå›´ç»¼è¿°",
    "title": "èŒƒå›´ç»¼è¿° (Scoping Review) å®Œå…¨æŒ‡å—",
    "section": "1. ä»€ä¹ˆæ˜¯èŒƒå›´ç»¼è¿°ï¼Ÿ",
    "text": "1. ä»€ä¹ˆæ˜¯èŒƒå›´ç»¼è¿°ï¼Ÿ\n\nå®šä¹‰ä¸ç›®çš„\nèŒƒå›´ç»¼è¿°ï¼ˆä¹Ÿç§°â€èŒƒç•´ç»¼è¿°â€æˆ–â€æ˜ å°„ç»¼è¿°â€ï¼‰çš„ä¸»è¦ç›®çš„æ˜¯ï¼š\n\nè¯†åˆ«ç ”ç©¶ç©ºç™½ï¼šå‘ç°æŸé¢†åŸŸå°šæœªè¢«å……åˆ†ç ”ç©¶çš„é—®é¢˜\næ¾„æ¸…æ¦‚å¿µè¾¹ç•Œï¼šæ˜ç¡®å¤æ‚æ¦‚å¿µçš„å®šä¹‰å’Œä½¿ç”¨æ–¹å¼\nç»˜åˆ¶è¯æ®åœ°å›¾ï¼šå±•ç¤ºç°æœ‰ç ”ç©¶çš„ç±»å‹ã€æ•°é‡å’Œåˆ†å¸ƒ\nä¸ºç³»ç»Ÿç»¼è¿°åšå‡†å¤‡ï¼šåˆ¤æ–­æ˜¯å¦å€¼å¾—è¿›è¡Œæ·±å…¥çš„ç³»ç»Ÿç»¼è¿°\n\n\n\nä¸ç³»ç»Ÿç»¼è¿°çš„åŒºåˆ«\n\n\n\nç‰¹å¾\nèŒƒå›´ç»¼è¿°\nç³»ç»Ÿç»¼è¿°\n\n\n\n\nç ”ç©¶é—®é¢˜\nå®½æ³›ã€æ¢ç´¢æ€§\nç²¾ç¡®ã€èšç„¦\n\n\nç›®çš„\næè¿°è¯æ®èŒƒå›´\nå›ç­”å…·ä½“é—®é¢˜\n\n\nè´¨é‡è¯„ä»·\né€šå¸¸ä¸è¿›è¡Œ\nå¿…é¡»è¿›è¡Œ\n\n\næ•°æ®åˆæˆ\næè¿°æ€§/åˆ¶å›¾\nå®šé‡/Metaåˆ†æ\n\n\nçº³å…¥æ ‡å‡†\nç›¸å¯¹å®½æ¾\nä¸¥æ ¼æ˜ç¡®\n\n\nç»“æœå‘ˆç°\nè¡¨æ ¼ã€å›¾è¡¨ä¸ºä¸»\næ•ˆåº”é‡ã€ç½®ä¿¡åŒºé—´\n\n\n\n\n\né€‚ç”¨åœºæ™¯\nâœ… é€‚åˆèŒƒå›´ç»¼è¿°ï¼š - æ–°å…´ç ”ç©¶é¢†åŸŸï¼Œéœ€è¦äº†è§£æ•´ä½“æ ¼å±€ - æ¦‚å¿µå¤æ‚/å®šä¹‰ä¸ä¸€ï¼Œéœ€è¦æ¢³ç† - æ–‡çŒ®ç±»å‹å¤šæ ·ï¼ˆé‡åŒ–ã€è´¨æ€§ã€ç°è‰²æ–‡çŒ®ï¼‰ - å‡†å¤‡ç”³è¯·é¡¹ç›®ï¼Œéœ€è¦æ–‡çŒ®èƒŒæ™¯\nâŒ ä¸é€‚åˆèŒƒå›´ç»¼è¿°ï¼š - éœ€è¦å›ç­”å…·ä½“ä¸´åºŠé—®é¢˜ - éœ€è¦è¿›è¡Œ Meta åˆ†æ - ç ”ç©¶é¢†åŸŸå·²éå¸¸æˆç†Ÿ",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "èŒƒå›´ç»¼è¿°"
    ]
  },
  {
    "objectID": "1040-scoping-review.html#æ–¹æ³•å­¦æ¡†æ¶",
    "href": "1040-scoping-review.html#æ–¹æ³•å­¦æ¡†æ¶",
    "title": "èŒƒå›´ç»¼è¿° (Scoping Review) å®Œå…¨æŒ‡å—",
    "section": "2. æ–¹æ³•å­¦æ¡†æ¶",
    "text": "2. æ–¹æ³•å­¦æ¡†æ¶\n\nArksey & Oâ€™Malley æ¡†æ¶ (2005)\nè¿™æ˜¯èŒƒå›´ç»¼è¿°çš„ç»å…¸æ¡†æ¶ï¼ŒåŒ…å« 5 ä¸ªæ­¥éª¤ï¼š\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  Step 1: ç¡®å®šç ”ç©¶é—®é¢˜                                   â”‚\nâ”‚  â””â”€ å®šä¹‰å¹¿æ³›ä½†æ˜ç¡®çš„ç ”ç©¶é—®é¢˜                            â”‚\nâ”‚                                                        â”‚\nâ”‚  Step 2: è¯†åˆ«ç›¸å…³æ–‡çŒ®                                   â”‚\nâ”‚  â””â”€ å¤šæ•°æ®åº“æ£€ç´¢ + æ‰‹å·¥æ£€ç´¢                             â”‚\nâ”‚                                                        â”‚\nâ”‚  Step 3: ç­›é€‰æ–‡çŒ®                                       â”‚\nâ”‚  â””â”€ ä¸¤é˜¶æ®µç­›é€‰ï¼ˆæ ‡é¢˜/æ‘˜è¦ â†’ å…¨æ–‡ï¼‰                      â”‚\nâ”‚                                                        â”‚\nâ”‚  Step 4: æ•°æ®åˆ¶å›¾                                       â”‚\nâ”‚  â””â”€ æå–å…³é”®æ•°æ®ï¼Œç»˜åˆ¶è¯æ®åœ°å›¾                          â”‚\nâ”‚                                                        â”‚\nâ”‚  Step 5: æ•´ç†ã€æ€»ç»“ã€æŠ¥å‘Š                               â”‚\nâ”‚  â””â”€ æè¿°æ€§åˆ†æï¼Œè¯†åˆ«ç ”ç©¶ç©ºç™½                            â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n\nJBI Scoping Review æŒ‡å—\nJoanna Briggs Institute (JBI) åœ¨ 2020 å¹´å‘å¸ƒäº†æ›´è¯¦ç»†çš„æŒ‡å—ï¼Œå¢åŠ äº†ï¼š\n\nå¯é€‰æ­¥éª¤ï¼šåˆ©ç›Šç›¸å…³è€…å’¨è¯¢\nè´¨é‡è¯„ä¼°å»ºè®®ï¼šè™½éå¿…é¡»ï¼Œä½†å¯è€ƒè™‘\nPCC æ¡†æ¶ï¼šPopulation + Concept + Context",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "èŒƒå›´ç»¼è¿°"
    ]
  },
  {
    "objectID": "1040-scoping-review.html#prisma-scr-æŠ¥å‘Šè§„èŒƒ",
    "href": "1040-scoping-review.html#prisma-scr-æŠ¥å‘Šè§„èŒƒ",
    "title": "èŒƒå›´ç»¼è¿° (Scoping Review) å®Œå…¨æŒ‡å—",
    "section": "3. PRISMA-ScR æŠ¥å‘Šè§„èŒƒ",
    "text": "3. PRISMA-ScR æŠ¥å‘Šè§„èŒƒ\nPRISMA-ScR (2018) æ˜¯èŒƒå›´ç»¼è¿°çš„æŠ¥å‘Šè§„èŒƒï¼ŒåŒ…å« 22 ä¸ªæ¡ç›®ã€‚\n\næ ¸å¿ƒæ¡ç›®\n\n# PRISMA-ScR æ£€æŸ¥æ¸…å•å…³é”®æ¡ç›®\nprisma_scr &lt;- data.frame(\n    æ¡ç›® = c(\n        \"æ ‡é¢˜\", \"æ‘˜è¦\", \"å¼•è¨€\", \"æ–¹æ³•-èµ„æ ¼æ ‡å‡†\",\n        \"æ–¹æ³•-ä¿¡æ¯æ¥æº\", \"æ–¹æ³•-æ£€ç´¢ç­–ç•¥\", \"æ–¹æ³•-è¯æ®ç­›é€‰\",\n        \"æ–¹æ³•-æ•°æ®åˆ¶å›¾\", \"ç»“æœ-ç­›é€‰æµç¨‹\", \"ç»“æœ-è¯æ®ç‰¹å¾\",\n        \"è®¨è®º-æ€»ç»“\", \"è®¨è®º-å±€é™æ€§\"\n    ),\n    è¦æ±‚ = c(\n        \"æ ‡é¢˜ä¸­æ˜ç¡®'Scoping Review'\",\n        \"ç»“æ„åŒ–æ‘˜è¦ï¼Œè¯´æ˜æ¯”å¯¹ç›®çš„\",\n        \"è¯´æ˜ä¸ºä½•é€‰æ‹©èŒƒå›´ç»¼è¿°\",\n        \"çº³å…¥/æ’é™¤æ ‡å‡†ï¼ˆPCCæ ¼å¼ï¼‰\",\n        \"åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“å’Œæ—¥æœŸ\",\n        \"è‡³å°‘ä¸€ä¸ªå®Œæ•´æ£€ç´¢ç­–ç•¥\",\n        \"è¯´æ˜ç­›é€‰æµç¨‹å’Œä¸€è‡´æ€§\",\n        \"æ•°æ®æå–è¡¨æ ¼/æ¡†æ¶\",\n        \"PRISMAæµç¨‹å›¾\",\n        \"è¯æ®ç‰¹å¾è¡¨æ ¼\",\n        \"ä¸»è¦å‘ç°çš„æ€»ç»“\",\n        \"æ–¹æ³•å­¦å’Œè¯æ®å±€é™æ€§\"\n    )\n)\n\nknitr::kable(prisma_scr, caption = \"PRISMA-ScR æ ¸å¿ƒæŠ¥å‘Šæ¡ç›®\")\n\n\nPRISMA-ScR æ ¸å¿ƒæŠ¥å‘Šæ¡ç›®\n\n\næ¡ç›®\nè¦æ±‚\n\n\n\n\næ ‡é¢˜\næ ‡é¢˜ä¸­æ˜ç¡®â€™Scoping Reviewâ€™\n\n\næ‘˜è¦\nç»“æ„åŒ–æ‘˜è¦ï¼Œè¯´æ˜æ¯”å¯¹ç›®çš„\n\n\nå¼•è¨€\nè¯´æ˜ä¸ºä½•é€‰æ‹©èŒƒå›´ç»¼è¿°\n\n\næ–¹æ³•-èµ„æ ¼æ ‡å‡†\nçº³å…¥/æ’é™¤æ ‡å‡†ï¼ˆPCCæ ¼å¼ï¼‰\n\n\næ–¹æ³•-ä¿¡æ¯æ¥æº\nåˆ—å‡ºæ‰€æœ‰æ•°æ®åº“å’Œæ—¥æœŸ\n\n\næ–¹æ³•-æ£€ç´¢ç­–ç•¥\nè‡³å°‘ä¸€ä¸ªå®Œæ•´æ£€ç´¢ç­–ç•¥\n\n\næ–¹æ³•-è¯æ®ç­›é€‰\nè¯´æ˜ç­›é€‰æµç¨‹å’Œä¸€è‡´æ€§\n\n\næ–¹æ³•-æ•°æ®åˆ¶å›¾\næ•°æ®æå–è¡¨æ ¼/æ¡†æ¶\n\n\nç»“æœ-ç­›é€‰æµç¨‹\nPRISMAæµç¨‹å›¾\n\n\nç»“æœ-è¯æ®ç‰¹å¾\nè¯æ®ç‰¹å¾è¡¨æ ¼\n\n\nè®¨è®º-æ€»ç»“\nä¸»è¦å‘ç°çš„æ€»ç»“\n\n\nè®¨è®º-å±€é™æ€§\næ–¹æ³•å­¦å’Œè¯æ®å±€é™æ€§\n\n\n\n\n\n\n\nPRISMA æµç¨‹å›¾\n\nlibrary(ggplot2)\n\n# PRISMA æµç¨‹æ•°æ®\nprisma_data &lt;- data.frame(\n    stage = c(\"Identification\", \"Identification\", \"Screening\", \"Eligibility\", \"Included\"),\n    step = c(\n        \"Database\\n(n=1250)\", \"Other\\n(n=25)\",\n        \"Screened\\n(n=980)\", \"Full-text\\n(n=160)\",\n        \"Included\\n(n=65)\"\n    ),\n    x = c(1, 3, 2, 2, 2),\n    y = c(5, 5, 4, 3, 2)\n)\n\n# ç»‘åˆ¶æµç¨‹å›¾\nggplot() +\n    # ä¸»è¦èŠ‚ç‚¹\n    geom_tile(\n        data = prisma_data, aes(x = x, y = y),\n        width = 1.8, height = 0.7, fill = \"#4e79a7\", color = \"white\", linewidth = 1\n    ) +\n    geom_text(\n        data = prisma_data, aes(x = x, y = y, label = step),\n        color = \"white\", size = 3.5, fontface = \"bold\"\n    ) +\n\n    # ç®­å¤´è¿æ¥\n    geom_segment(aes(x = 1, y = 4.6, xend = 1.5, yend = 4.3),\n        arrow = arrow(length = unit(0.2, \"cm\")), color = \"gray40\"\n    ) +\n    geom_segment(aes(x = 3, y = 4.6, xend = 2.5, yend = 4.3),\n        arrow = arrow(length = unit(0.2, \"cm\")), color = \"gray40\"\n    ) +\n    geom_segment(aes(x = 2, y = 3.6, xend = 2, yend = 3.4),\n        arrow = arrow(length = unit(0.2, \"cm\")), color = \"gray40\"\n    ) +\n    geom_segment(aes(x = 2, y = 2.6, xend = 2, yend = 2.4),\n        arrow = arrow(length = unit(0.2, \"cm\")), color = \"gray40\"\n    ) +\n\n    # æ’é™¤èŠ‚ç‚¹\n    geom_tile(aes(x = 3.5, y = 4),\n        width = 1.2, height = 0.5,\n        fill = \"#e15759\", alpha = 0.8\n    ) +\n    geom_text(aes(x = 3.5, y = 4, label = \"Excluded\\n(n=820)\"),\n        color = \"white\", size = 3\n    ) +\n    geom_segment(aes(x = 2.9, y = 4, xend = 2.9, yend = 4),\n        arrow = arrow(length = unit(0.15, \"cm\")), color = \"gray40\"\n    ) +\n    geom_tile(aes(x = 3.5, y = 3),\n        width = 1.2, height = 0.5,\n        fill = \"#e15759\", alpha = 0.8\n    ) +\n    geom_text(aes(x = 3.5, y = 3, label = \"Excluded\\n(n=95)\"),\n        color = \"white\", size = 3\n    ) +\n\n    # Stage labels\n    annotate(\"text\", x = 0, y = 5, label = \"Identification\", fontface = \"bold\", hjust = 1, size = 4) +\n    annotate(\"text\", x = 0, y = 4, label = \"Screening\", fontface = \"bold\", hjust = 1, size = 4) +\n    annotate(\"text\", x = 0, y = 3, label = \"Eligibility\", fontface = \"bold\", hjust = 1, size = 4) +\n    annotate(\"text\", x = 0, y = 2, label = \"Included\", fontface = \"bold\", hjust = 1, size = 4) +\n    labs(title = \"PRISMA Flow Diagram\") +\n    theme_void() +\n    theme(plot.title = element_text(hjust = 0.5, size = 16, face = \"bold\")) +\n    coord_cartesian(xlim = c(-0.5, 4.5), ylim = c(1.5, 5.5))",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "èŒƒå›´ç»¼è¿°"
    ]
  },
  {
    "objectID": "1040-scoping-review.html#r-è¯­è¨€è¾…åŠ©å·¥å…·",
    "href": "1040-scoping-review.html#r-è¯­è¨€è¾…åŠ©å·¥å…·",
    "title": "èŒƒå›´ç»¼è¿° (Scoping Review) å®Œå…¨æŒ‡å—",
    "section": "4. R è¯­è¨€è¾…åŠ©å·¥å…·",
    "text": "4. R è¯­è¨€è¾…åŠ©å·¥å…·\n\næ–‡çŒ®ç®¡ç†ä¸å»é‡\n\n# revtools åŒ…ç”¨äºæ–‡çŒ®ç­›é€‰\n# install.packages(\"revtools\")\nlibrary(revtools)\n\n# è¯»å–æ–‡çŒ®æ•°æ®\nrefs &lt;- read_bibliography(\"search_results.ris\")\n\n# è‡ªåŠ¨å»é‡\nunique_refs &lt;- find_duplicates(refs)\n\n# äº¤äº’å¼ç­›é€‰ï¼ˆShiny ç•Œé¢ï¼‰\nscreen_abstracts(unique_refs)\n\n\n\nlitsearchrï¼šä¼˜åŒ–æ£€ç´¢ç­–ç•¥\n\n# litsearchr å¸®åŠ©è¯†åˆ«å…³é”®è¯\n# install.packages(\"litsearchr\")\nlibrary(litsearchr)\n\n# ä»åˆæ­¥æ£€ç´¢ä¸­æå–å…³é”®è¯ç½‘ç»œ\nkeywords &lt;- extract_terms(\n    text = refs$abstract,\n    method = \"fakerake\",\n    min_freq = 3,\n    ngrams = TRUE,\n    min_n = 2,\n    max_n = 3\n)\n\n# è¯†åˆ«å…³é”®æœ¯è¯­\nkey_terms &lt;- identify_important_terms(\n    keywords,\n    method = \"strength\",\n    cutoff_strength = 0.5\n)\n\n\n\næ•°æ®æå–æ¨¡æ¿\n\n# åˆ›å»ºæ•°æ®æå–è¡¨æ ¼\nextraction_form &lt;- data.frame(\n    å­—æ®µ = c(\n        \"ä½œè€…\", \"å¹´ä»½\", \"å›½å®¶\", \"ç ”ç©¶è®¾è®¡\", \"æ ·æœ¬é‡\",\n        \"äººç¾¤ç‰¹å¾\", \"æ ¸å¿ƒæ¦‚å¿µ\", \"ä¸»è¦å‘ç°\", \"å¤‡æ³¨\"\n    ),\n    è¯´æ˜ = c(\n        \"ç¬¬ä¸€ä½œè€…å§“æ°\", \"å‘è¡¨å¹´ä»½\", \"ç ”ç©¶å¼€å±•å›½å®¶\",\n        \"æ¨ªæ–­é¢/é˜Ÿåˆ—/RCTç­‰\", \"å‚ä¸è€…æ•°é‡\",\n        \"å¹´é¾„/æ€§åˆ«/ç–¾ç—…ç­‰\", \"ç ”ç©¶çš„æ ¸å¿ƒå˜é‡\",\n        \"ä¸ç ”ç©¶é—®é¢˜ç›¸å…³çš„å…³é”®ç»“æœ\", \"å…¶ä»–é‡è¦ä¿¡æ¯\"\n    )\n)\n\nknitr::kable(extraction_form, caption = \"æ•°æ®æå–è¡¨æ¨¡æ¿\")\n\n\næ•°æ®æå–è¡¨æ¨¡æ¿\n\n\nå­—æ®µ\nè¯´æ˜\n\n\n\n\nä½œè€…\nç¬¬ä¸€ä½œè€…å§“æ°\n\n\nå¹´ä»½\nå‘è¡¨å¹´ä»½\n\n\nå›½å®¶\nç ”ç©¶å¼€å±•å›½å®¶\n\n\nç ”ç©¶è®¾è®¡\næ¨ªæ–­é¢/é˜Ÿåˆ—/RCTç­‰\n\n\næ ·æœ¬é‡\nå‚ä¸è€…æ•°é‡\n\n\näººç¾¤ç‰¹å¾\nå¹´é¾„/æ€§åˆ«/ç–¾ç—…ç­‰\n\n\næ ¸å¿ƒæ¦‚å¿µ\nç ”ç©¶çš„æ ¸å¿ƒå˜é‡\n\n\nä¸»è¦å‘ç°\nä¸ç ”ç©¶é—®é¢˜ç›¸å…³çš„å…³é”®ç»“æœ\n\n\nå¤‡æ³¨\nå…¶ä»–é‡è¦ä¿¡æ¯",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "èŒƒå›´ç»¼è¿°"
    ]
  },
  {
    "objectID": "1040-scoping-review.html#è¯æ®åˆ¶å›¾ä¸å¯è§†åŒ–",
    "href": "1040-scoping-review.html#è¯æ®åˆ¶å›¾ä¸å¯è§†åŒ–",
    "title": "èŒƒå›´ç»¼è¿° (Scoping Review) å®Œå…¨æŒ‡å—",
    "section": "5. è¯æ®åˆ¶å›¾ä¸å¯è§†åŒ–",
    "text": "5. è¯æ®åˆ¶å›¾ä¸å¯è§†åŒ–\n\næ—¶é—´è¶‹åŠ¿å›¾\n\nlibrary(ggplot2)\nlibrary(dplyr)\n\n# æ¨¡æ‹Ÿæ–‡çŒ®å‘è¡¨å¹´ä»½æ•°æ®\nset.seed(42)\npublication_data &lt;- data.frame(\n    year = sample(2010:2024, 100,\n        replace = TRUE,\n        prob = c(rep(0.03, 5), rep(0.05, 5), rep(0.08, 3), 0.12, 0.15)\n    )\n) %&gt;%\n    count(year)\n\nggplot(publication_data, aes(x = year, y = n)) +\n    geom_col(fill = \"#4e79a7\", alpha = 0.8) +\n    geom_smooth(method = \"loess\", se = FALSE, color = \"#e15759\", linewidth = 1.2) +\n    labs(\n        title = \"æ–‡çŒ®å‘è¡¨å¹´ä»½åˆ†å¸ƒ\",\n        subtitle = \"2010-2024å¹´ç›¸å…³ç ”ç©¶æ•°é‡è¶‹åŠ¿\",\n        x = \"å‘è¡¨å¹´ä»½\",\n        y = \"æ–‡çŒ®æ•°é‡\"\n    ) +\n    scale_x_continuous(breaks = seq(2010, 2024, 2)) +\n    theme_minimal(base_size = 14)\n\n\n\n\n\n\n\n\n\n\nåœ°ç†åˆ†å¸ƒå›¾\n\n# æ¨¡æ‹Ÿå›½å®¶åˆ†å¸ƒæ•°æ®\ncountry_data &lt;- data.frame(\n    country = c(\n        \"USA\", \"UK\", \"China\", \"Australia\", \"Canada\",\n        \"Germany\", \"Netherlands\", \"Sweden\", \"Japan\", \"Others\"\n    ),\n    count = c(25, 15, 12, 10, 8, 6, 5, 4, 3, 12)\n)\n\nggplot(country_data, aes(x = reorder(country, count), y = count)) +\n    geom_col(fill = \"#59a14f\", alpha = 0.8) +\n    geom_text(aes(label = count), hjust = -0.3, size = 4) +\n    coord_flip() +\n    labs(\n        title = \"ç ”ç©¶åœ°ç†åˆ†å¸ƒ\",\n        x = NULL,\n        y = \"æ–‡çŒ®æ•°é‡\"\n    ) +\n    theme_minimal(base_size = 14) +\n    theme(panel.grid.major.y = element_blank())\n\n\n\n\n\n\n\n\n\n\nç ”ç©¶è®¾è®¡åˆ†å¸ƒ\n\nlibrary(tidyr)\n\n# ç ”ç©¶è®¾è®¡åˆ†ç±»\ndesign_data &lt;- data.frame(\n    è®¾è®¡ç±»å‹ = c(\n        \"æ¨ªæ–­é¢ç ”ç©¶\", \"é˜Ÿåˆ—ç ”ç©¶\", \"éšæœºå¯¹ç…§è¯•éªŒ\",\n        \"è´¨æ€§ç ”ç©¶\", \"æ··åˆæ–¹æ³•\", \"ç»¼è¿°\"\n    ),\n    æ•°é‡ = c(28, 18, 12, 15, 8, 19)\n)\n\n# è®¡ç®—ç™¾åˆ†æ¯”\ndesign_data &lt;- design_data %&gt;%\n    mutate(\n        ç™¾åˆ†æ¯” = æ•°é‡ / sum(æ•°é‡) * 100,\n        æ ‡ç­¾ = paste0(æ•°é‡, \" (\", round(ç™¾åˆ†æ¯”, 1), \"%)\")\n    )\n\n# ç¯å½¢å›¾\nggplot(design_data, aes(x = 2, y = æ•°é‡, fill = è®¾è®¡ç±»å‹)) +\n    geom_bar(stat = \"identity\", width = 1) +\n    coord_polar(theta = \"y\") +\n    xlim(0.5, 2.5) +\n    geom_text(aes(label = æ ‡ç­¾),\n        position = position_stack(vjust = 0.5),\n        color = \"white\", fontface = \"bold\", size = 3.5\n    ) +\n    scale_fill_brewer(palette = \"Set2\") +\n    labs(\n        title = \"ç ”ç©¶è®¾è®¡ç±»å‹åˆ†å¸ƒ\",\n        fill = \"è®¾è®¡ç±»å‹\"\n    ) +\n    theme_void() +\n    theme(\n        plot.title = element_text(hjust = 0.5, size = 16, face = \"bold\"),\n        legend.position = \"right\"\n    )\n\n\n\n\n\n\n\n\n\n\næ¦‚å¿µæ˜ å°„è¡¨\n\n# åˆ›å»ºæ¦‚å¿µ-ä¸»é¢˜çŸ©é˜µ\nconcept_matrix &lt;- data.frame(\n    æ–‡çŒ®ID = paste0(\"Study \", 1:15),\n    æ¦‚å¿µ1_å®šä¹‰ = sample(c(1, 0, NA), 15, replace = TRUE, prob = c(0.5, 0.3, 0.2)),\n    æ¦‚å¿µ2_æµ‹é‡ = sample(c(1, 0, NA), 15, replace = TRUE, prob = c(0.4, 0.4, 0.2)),\n    æ¦‚å¿µ3_å¹²é¢„ = sample(c(1, 0, NA), 15, replace = TRUE, prob = c(0.3, 0.5, 0.2)),\n    æ¦‚å¿µ4_ç»“å±€ = sample(c(1, 0, NA), 15, replace = TRUE, prob = c(0.6, 0.3, 0.1))\n)\n\n# è½¬æ¢ä¸ºé•¿æ ¼å¼\nconcept_long &lt;- concept_matrix %&gt;%\n    pivot_longer(-æ–‡çŒ®ID, names_to = \"æ¦‚å¿µ\", values_to = \"è¦†ç›–\") %&gt;%\n    mutate(\n        æ¦‚å¿µ = gsub(\"æ¦‚å¿µ\\\\d_\", \"\", æ¦‚å¿µ),\n        çŠ¶æ€ = case_when(\n            è¦†ç›– == 1 ~ \"æ¶µç›–\",\n            è¦†ç›– == 0 ~ \"æœªæ¶µç›–\",\n            TRUE ~ \"ä¸é€‚ç”¨\"\n        )\n    )\n\n# ç»˜åˆ¶æ¦‚å¿µæ˜ å°„çƒ­å›¾\nggplot(concept_long, aes(x = æ¦‚å¿µ, y = æ–‡çŒ®ID, fill = çŠ¶æ€)) +\n    geom_tile(color = \"white\", linewidth = 0.5) +\n    scale_fill_manual(\n        values = c(\"æ¶µç›–\" = \"#59a14f\", \"æœªæ¶µç›–\" = \"#e15759\", \"ä¸é€‚ç”¨\" = \"gray90\"),\n        na.value = \"gray90\"\n    ) +\n    labs(\n        title = \"æ¦‚å¿µè¦†ç›–æ˜ å°„è¡¨\",\n        subtitle = \"å±•ç¤ºå„æ–‡çŒ®å¯¹ä¸åŒæ¦‚å¿µçš„è¦†ç›–æƒ…å†µ\",\n        x = NULL,\n        y = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        axis.text.x = element_text(angle = 45, hjust = 1, face = \"bold\"),\n        panel.grid = element_blank()\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "èŒƒå›´ç»¼è¿°"
    ]
  },
  {
    "objectID": "1040-scoping-review.html#è´¨æ€§æ•°æ®å½’çº³",
    "href": "1040-scoping-review.html#è´¨æ€§æ•°æ®å½’çº³",
    "title": "èŒƒå›´ç»¼è¿° (Scoping Review) å®Œå…¨æŒ‡å—",
    "section": "6. è´¨æ€§æ•°æ®å½’çº³",
    "text": "6. è´¨æ€§æ•°æ®å½’çº³\n\nä¸»é¢˜åˆ†ææ¡†æ¶\n\n# ä½¿ç”¨è¡¨æ ¼å±•ç¤ºä¸»é¢˜åˆ†æç»“æœ\nthemes &lt;- data.frame(\n    ä¸»é¢˜ = c(\n        \"ä¸»é¢˜1ï¼šå®šä¹‰åˆ†æ­§\", \"ä¸»é¢˜1ï¼šå®šä¹‰åˆ†æ­§\",\n        \"ä¸»é¢˜2ï¼šæµ‹é‡å·¥å…·\", \"ä¸»é¢˜2ï¼šæµ‹é‡å·¥å…·\",\n        \"ä¸»é¢˜3ï¼šå®æ–½éšœç¢\", \"ä¸»é¢˜3ï¼šå®æ–½éšœç¢\"\n    ),\n    å­ä¸»é¢˜ = c(\n        \"æ¦‚å¿µè¾¹ç•Œæ¨¡ç³Š\", \"æœ¯è¯­ä½¿ç”¨ä¸ä¸€\",\n        \"é‡è¡¨å¼€å‘\", \"æ•ˆåº¦éªŒè¯\",\n        \"èµ„æºé™åˆ¶\", \"æ–‡åŒ–å› ç´ \"\n    ),\n    æ–‡çŒ®æ•° = c(12, 8, 15, 10, 18, 6),\n    ä»£è¡¨æ€§å¼•ç”¨ = c(\n        \"\\\"è¯¥æ¦‚å¿µçš„å®šä¹‰åœ¨ä¸åŒç ”ç©¶ä¸­å·®å¼‚æ˜¾è‘—...\\\" (Author, 2020)\",\n        \"\\\"æœ¯è¯­Aå’Œæœ¯è¯­Bç»å¸¸è¢«äº’æ¢ä½¿ç”¨...\\\" (Author, 2021)\",\n        \"\\\"æœ¬ç ”ç©¶å¼€å‘äº†æ–°çš„æµ‹é‡å·¥å…·...\\\" (Author, 2019)\",\n        \"\\\"é‡è¡¨çš„ä¿¡æ•ˆåº¦åœ¨ä¸åŒäººç¾¤ä¸­...\\\" (Author, 2022)\",\n        \"\\\"èµ„æºä¸è¶³æ˜¯ä¸»è¦éšœç¢...\\\" (Author, 2020)\",\n        \"\\\"æ–‡åŒ–å·®å¼‚å½±å“äº†å®æ–½æ•ˆæœ...\\\" (Author, 2023)\"\n    )\n)\n\nknitr::kable(themes, caption = \"ä¸»é¢˜åˆ†æç»“æœæ±‡æ€»\")\n\n\nä¸»é¢˜åˆ†æç»“æœæ±‡æ€»\n\n\n\n\n\n\n\n\nä¸»é¢˜\nå­ä¸»é¢˜\næ–‡çŒ®æ•°\nä»£è¡¨æ€§å¼•ç”¨\n\n\n\n\nä¸»é¢˜1ï¼šå®šä¹‰åˆ†æ­§\næ¦‚å¿µè¾¹ç•Œæ¨¡ç³Š\n12\nâ€œè¯¥æ¦‚å¿µçš„å®šä¹‰åœ¨ä¸åŒç ”ç©¶ä¸­å·®å¼‚æ˜¾è‘—â€¦â€ (Author, 2020)\n\n\nä¸»é¢˜1ï¼šå®šä¹‰åˆ†æ­§\næœ¯è¯­ä½¿ç”¨ä¸ä¸€\n8\nâ€œæœ¯è¯­Aå’Œæœ¯è¯­Bç»å¸¸è¢«äº’æ¢ä½¿ç”¨â€¦â€ (Author, 2021)\n\n\nä¸»é¢˜2ï¼šæµ‹é‡å·¥å…·\né‡è¡¨å¼€å‘\n15\nâ€œæœ¬ç ”ç©¶å¼€å‘äº†æ–°çš„æµ‹é‡å·¥å…·â€¦â€ (Author, 2019)\n\n\nä¸»é¢˜2ï¼šæµ‹é‡å·¥å…·\næ•ˆåº¦éªŒè¯\n10\nâ€œé‡è¡¨çš„ä¿¡æ•ˆåº¦åœ¨ä¸åŒäººç¾¤ä¸­â€¦â€ (Author, 2022)\n\n\nä¸»é¢˜3ï¼šå®æ–½éšœç¢\nèµ„æºé™åˆ¶\n18\nâ€œèµ„æºä¸è¶³æ˜¯ä¸»è¦éšœç¢â€¦â€ (Author, 2020)\n\n\nä¸»é¢˜3ï¼šå®æ–½éšœç¢\næ–‡åŒ–å› ç´ \n6\nâ€œæ–‡åŒ–å·®å¼‚å½±å“äº†å®æ–½æ•ˆæœâ€¦â€ (Author, 2023)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "èŒƒå›´ç»¼è¿°"
    ]
  },
  {
    "objectID": "1040-scoping-review.html#å®Œæ•´æ¡ˆä¾‹æµç¨‹",
    "href": "1040-scoping-review.html#å®Œæ•´æ¡ˆä¾‹æµç¨‹",
    "title": "èŒƒå›´ç»¼è¿° (Scoping Review) å®Œå…¨æŒ‡å—",
    "section": "7. å®Œæ•´æ¡ˆä¾‹æµç¨‹",
    "text": "7. å®Œæ•´æ¡ˆä¾‹æµç¨‹\n\nç ”ç©¶é—®é¢˜å®šä¹‰\nç ”ç©¶é—®é¢˜ï¼š\n\"åœ¨ç¤¾åŒºç¯å¢ƒä¸­ï¼Œé’ˆå¯¹è€å¹´äººçš„æ•°å­—å¥åº·å¹²é¢„æªæ–½æœ‰å“ªäº›ç±»å‹ï¼Ÿ\nè¿™äº›å¹²é¢„çš„ç›®æ ‡äººç¾¤ã€å¹²é¢„å†…å®¹å’Œè¯„ä»·ç»“å±€æ˜¯ä»€ä¹ˆï¼Ÿ\"\n\nPCC æ¡†æ¶ï¼š\n- Population: ç¤¾åŒºå±…ä½çš„è€å¹´äºº(â‰¥65å²)\n- Concept: æ•°å­—å¥åº·å¹²é¢„\n- Context: ç¤¾åŒºç¯å¢ƒï¼ˆéåŒ»ç–—æœºæ„ï¼‰\n\n\næ£€ç´¢ç­–ç•¥ç¤ºä¾‹\n\n# ç¤ºä¾‹æ£€ç´¢ç­–ç•¥ï¼ˆPubMedæ ¼å¼ï¼‰\nsearch_strategy &lt;- '\n(((\"aged\"[MeSH Terms] OR \"elderly\"[tiab] OR \"older adult*\"[tiab])\nAND\n(\"telemedicine\"[MeSH Terms] OR \"mobile health\"[tiab] OR\n \"digital health\"[tiab] OR \"eHealth\"[tiab] OR \"mHealth\"[tiab])\nAND\n(\"community\"[tiab] OR \"home-based\"[tiab] OR \"community-dwelling\"[tiab]))\n)\nFilters: 2015-2024, English\n'\n\ncat(search_strategy)\n\n\n(((\"aged\"[MeSH Terms] OR \"elderly\"[tiab] OR \"older adult*\"[tiab])\nAND\n(\"telemedicine\"[MeSH Terms] OR \"mobile health\"[tiab] OR\n \"digital health\"[tiab] OR \"eHealth\"[tiab] OR \"mHealth\"[tiab])\nAND\n(\"community\"[tiab] OR \"home-based\"[tiab] OR \"community-dwelling\"[tiab]))\n)\nFilters: 2015-2024, English\n\n\n\n\nç­›é€‰æµç¨‹ä»£ç \n\nlibrary(revtools)\n\n# 1. å¯¼å…¥æ£€ç´¢ç»“æœ\nresults_pubmed &lt;- read_bibliography(\"pubmed_results.ris\")\nresults_embase &lt;- read_bibliography(\"embase_results.ris\")\nresults_wos &lt;- read_bibliography(\"wos_results.ris\")\n\n# 2. åˆå¹¶æ•°æ®åº“\nall_results &lt;- merge_columns(\n    list(results_pubmed, results_embase, results_wos)\n)\n\n# 3. å»é‡\ndeduplicated &lt;- find_duplicates(all_results)\nunique_refs &lt;- extract_unique_references(deduplicated)\n\n# 4. æ ‡é¢˜/æ‘˜è¦ç­›é€‰ï¼ˆäº¤äº’å¼ï¼‰\nscreened_round1 &lt;- screen_titles(unique_refs)\n\n# 5. å…¨æ–‡ç­›é€‰\n# å¯¼å‡ºéœ€è¦è·å–å…¨æ–‡çš„æ–‡çŒ®\nexport_ris(screened_round1, filename = \"for_fulltext.ris\")\n\n# ç­›é€‰åå†æ¬¡å¯¼å…¥\nfulltext_screened &lt;- read_bibliography(\"fulltext_screened.ris\")\n\n# 6. æœ€ç»ˆçº³å…¥\nincluded_studies &lt;- fulltext_screened[fulltext_screened$include == TRUE, ]",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "èŒƒå›´ç»¼è¿°"
    ]
  },
  {
    "objectID": "1040-scoping-review.html#æ³¨æ„äº‹é¡¹ä¸å»ºè®®",
    "href": "1040-scoping-review.html#æ³¨æ„äº‹é¡¹ä¸å»ºè®®",
    "title": "èŒƒå›´ç»¼è¿° (Scoping Review) å®Œå…¨æŒ‡å—",
    "section": "8. æ³¨æ„äº‹é¡¹ä¸å»ºè®®",
    "text": "8. æ³¨æ„äº‹é¡¹ä¸å»ºè®®\n\nå¸¸è§é—®é¢˜\n\n\n\né—®é¢˜\nè§£å†³æ–¹æ¡ˆ\n\n\n\n\nèŒƒå›´å¤ªå®½\nä½¿ç”¨ PCC æ¡†æ¶ç»†åŒ–ç ”ç©¶é—®é¢˜\n\n\næ£€ç´¢ä¸å…¨é¢\nè‡³å°‘æ£€ç´¢ 3 ä¸ªæ•°æ®åº“ + ç°è‰²æ–‡çŒ®\n\n\nç­›é€‰ä¸ä¸€è‡´\nåŒäººç‹¬ç«‹ç­›é€‰ + Kappa ä¸€è‡´æ€§æ£€éªŒ\n\n\næ•°æ®æå–ä¸»è§‚\nåˆ¶å®šè¯¦ç»†æå–æŒ‡å—ï¼Œè¿›è¡ŒåŸ¹è®­\n\n\næŠ¥å‘Šä¸è§„èŒƒ\nä¸¥æ ¼éµå¾ª PRISMA-ScR æ£€æŸ¥æ¸…å•\n\n\n\n\n\nè´¨é‡æå‡å»ºè®®\n\n[!TIP] èŒƒå›´ç»¼è¿°è´¨é‡æå‡æ¸…å•ï¼š 1. åˆ¶å®šå¹¶å‘è¡¨ç ”ç©¶æ–¹æ¡ˆ (Protocol) 2. ç»„å»ºç ”ç©¶å›¢é˜Ÿï¼Œæ˜ç¡®åˆ†å·¥ 3. åˆ¶ä½œè¯¦ç»†çš„æ•°æ®æå–è¡¨ï¼Œé¢„å…ˆæµ‹è¯• 4. ä½¿ç”¨å¯è§†åŒ–å¢å¼ºç»“æœå‘ˆç° 5. è€ƒè™‘çº³å…¥åˆ©ç›Šç›¸å…³è€…å’¨è¯¢ç¯èŠ‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "èŒƒå›´ç»¼è¿°"
    ]
  },
  {
    "objectID": "1040-scoping-review.html#å‚è€ƒæ–‡çŒ®",
    "href": "1040-scoping-review.html#å‚è€ƒæ–‡çŒ®",
    "title": "èŒƒå›´ç»¼è¿° (Scoping Review) å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒæ–‡çŒ®",
    "text": "å‚è€ƒæ–‡çŒ®\n\nArksey, H., & Oâ€™Malley, L. (2005). Scoping studies: towards a methodological framework. International Journal of Social Research Methodology, 8(1), 19-32.\nTricco, A. C., et al.Â (2018). PRISMA extension for scoping reviews (PRISMA-ScR): checklist and explanation. Annals of Internal Medicine, 169(7), 467-473.\nPeters, M. D., et al.Â (2020). Updated methodological guidance for the conduct of scoping reviews. JBI Evidence Synthesis, 18(10), 2119-2126.\nMunn, Z., et al.Â (2018). Systematic review or scoping review? Guidance for authors when choosing between a systematic or scoping review approach. BMC Medical Research Methodology, 18(1), 143.",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "èŒƒå›´ç»¼è¿°"
    ]
  },
  {
    "objectID": "1038-efa-cfa.html",
    "href": "1038-efa-cfa.html",
    "title": "æ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—",
    "section": "",
    "text": "å› å­åˆ†ææ˜¯å¿ƒç†å­¦ã€æ•™è‚²å­¦å’Œç¤¾ä¼šç§‘å­¦ä¸­æœ€å¸¸ç”¨çš„ç»Ÿè®¡æ–¹æ³•ä¹‹ä¸€ï¼Œç”¨äºæ­ç¤ºè§‚æµ‹å˜é‡èƒŒåçš„æ½œåœ¨ç»“æ„ã€‚\n\n\n\n\n\nç‰¹æ€§\nEFA (æ¢ç´¢æ€§å› å­åˆ†æ)\nCFA (éªŒè¯æ€§å› å­åˆ†æ)\n\n\n\n\nç›®çš„\næ¢ç´¢æ½œåœ¨ç»“æ„\néªŒè¯ç†è®ºå‡è®¾\n\n\nå‡è®¾\nä¸é¢„è®¾å› å­ç»“æ„\né¢„è®¾å› å­ç»“æ„\n\n\né€‚ç”¨é˜¶æ®µ\né‡è¡¨å¼€å‘åˆæœŸ\né‡è¡¨éªŒè¯ã€ç†è®ºæ£€éªŒ\n\n\nå› å­æ•°\næ•°æ®é©±åŠ¨ç¡®å®š\nç†è®ºé¢„å…ˆç¡®å®š\n\n\näº¤å‰è½½è·\nå…è®¸æ‰€æœ‰è½½è·è‡ªç”±ä¼°è®¡\né™åˆ¶äº¤å‰è½½è·ä¸º0\n\n\næ‹ŸåˆæŒ‡æ•°\nè¾ƒå°‘å…³æ³¨\næ ¸å¿ƒè¯„ä¼°æŒ‡æ ‡\n\n\n\n\n\n\ngraph LR\n    A[ç†è®ºæ„å»º] --&gt; B[é‡è¡¨å¼€å‘]\n    B --&gt; C[æ ·æœ¬1: EFA]\n    C --&gt; D[ç¡®å®šå› å­ç»“æ„]\n    D --&gt; E[æ ·æœ¬2: CFA]\n    E --&gt; F[éªŒè¯å› å­ç»“æ„]\n    F --&gt; G[ä¿®æ­£/å‘è¡¨]",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å› å­åˆ†æ (EFA/CFA)"
    ]
  },
  {
    "objectID": "1038-efa-cfa.html#ç®€ä»‹",
    "href": "1038-efa-cfa.html#ç®€ä»‹",
    "title": "æ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—",
    "section": "",
    "text": "å› å­åˆ†ææ˜¯å¿ƒç†å­¦ã€æ•™è‚²å­¦å’Œç¤¾ä¼šç§‘å­¦ä¸­æœ€å¸¸ç”¨çš„ç»Ÿè®¡æ–¹æ³•ä¹‹ä¸€ï¼Œç”¨äºæ­ç¤ºè§‚æµ‹å˜é‡èƒŒåçš„æ½œåœ¨ç»“æ„ã€‚\n\n\n\n\n\nç‰¹æ€§\nEFA (æ¢ç´¢æ€§å› å­åˆ†æ)\nCFA (éªŒè¯æ€§å› å­åˆ†æ)\n\n\n\n\nç›®çš„\næ¢ç´¢æ½œåœ¨ç»“æ„\néªŒè¯ç†è®ºå‡è®¾\n\n\nå‡è®¾\nä¸é¢„è®¾å› å­ç»“æ„\né¢„è®¾å› å­ç»“æ„\n\n\né€‚ç”¨é˜¶æ®µ\né‡è¡¨å¼€å‘åˆæœŸ\né‡è¡¨éªŒè¯ã€ç†è®ºæ£€éªŒ\n\n\nå› å­æ•°\næ•°æ®é©±åŠ¨ç¡®å®š\nç†è®ºé¢„å…ˆç¡®å®š\n\n\näº¤å‰è½½è·\nå…è®¸æ‰€æœ‰è½½è·è‡ªç”±ä¼°è®¡\né™åˆ¶äº¤å‰è½½è·ä¸º0\n\n\næ‹ŸåˆæŒ‡æ•°\nè¾ƒå°‘å…³æ³¨\næ ¸å¿ƒè¯„ä¼°æŒ‡æ ‡\n\n\n\n\n\n\ngraph LR\n    A[ç†è®ºæ„å»º] --&gt; B[é‡è¡¨å¼€å‘]\n    B --&gt; C[æ ·æœ¬1: EFA]\n    C --&gt; D[ç¡®å®šå› å­ç»“æ„]\n    D --&gt; E[æ ·æœ¬2: CFA]\n    E --&gt; F[éªŒè¯å› å­ç»“æ„]\n    F --&gt; G[ä¿®æ­£/å‘è¡¨]",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å› å­åˆ†æ (EFA/CFA)"
    ]
  },
  {
    "objectID": "1038-efa-cfa.html#å®‰è£…ä¸åŠ è½½",
    "href": "1038-efa-cfa.html#å®‰è£…ä¸åŠ è½½",
    "title": "æ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\n# install.packages(\"psych\")      # EFA\n# install.packages(\"lavaan\")     # CFA\n# install.packages(\"semPlot\")    # è·¯å¾„å›¾\n\nlibrary(psych)\nlibrary(lavaan)\nlibrary(semPlot)\nlibrary(dplyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å› å­åˆ†æ (EFA/CFA)"
    ]
  },
  {
    "objectID": "1038-efa-cfa.html#ç¤ºä¾‹æ•°æ®",
    "href": "1038-efa-cfa.html#ç¤ºä¾‹æ•°æ®",
    "title": "æ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¤ºä¾‹æ•°æ®",
    "text": "ç¤ºä¾‹æ•°æ®\nä½¿ç”¨ psych åŒ…è‡ªå¸¦çš„ bfi æ•°æ®é›†ï¼ˆå¤§äº”äººæ ¼é—®å·ï¼‰ã€‚\n\ndata(bfi)\n# é€‰å– 25 ä¸ªé¢˜ç›®ï¼ˆ5 ä¸ªå› å­ï¼Œæ¯ä¸ª 5 é¢˜ï¼‰\nitems &lt;- bfi[, 1:25]\nhead(items)\n\n      A1 A2 A3 A4 A5 C1 C2 C3 C4 C5 E1 E2 E3 E4 E5 N1 N2 N3 N4 N5 O1 O2 O3 O4\n61617  2  4  3  4  4  2  3  3  4  4  3  3  3  4  4  3  4  2  2  3  3  6  3  4\n61618  2  4  5  2  5  5  4  4  3  4  1  1  6  4  3  3  3  3  5  5  4  2  4  3\n61620  5  4  5  4  4  4  5  4  2  5  2  4  4  4  5  4  5  4  2  3  4  2  5  5\n61621  4  4  6  5  5  4  4  3  5  5  5  3  4  4  4  2  5  2  4  1  3  3  4  3\n61622  2  3  3  4  5  4  4  5  3  2  2  2  5  4  5  2  3  4  4  3  3  3  4  3\n61623  6  6  5  6  5  6  6  6  1  3  2  1  6  5  6  3  5  2  2  3  4  3  5  6\n      O5\n61617  3\n61618  3\n61620  2\n61621  5\n61622  3\n61623  1\n\n\nå˜é‡è¯´æ˜ï¼š - A1-A5: å®œäººæ€§ (Agreeableness) - C1-C5: å°½è´£æ€§ (Conscientiousness) - E1-E5: å¤–å‘æ€§ (Extraversion) - N1-N5: ç¥ç»è´¨ (Neuroticism) - O1-O5: å¼€æ”¾æ€§ (Openness)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å› å­åˆ†æ (EFA/CFA)"
    ]
  },
  {
    "objectID": "1038-efa-cfa.html#æ•°æ®é¢„å¤„ç†",
    "href": "1038-efa-cfa.html#æ•°æ®é¢„å¤„ç†",
    "title": "æ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æ•°æ®é¢„å¤„ç†",
    "text": "æ•°æ®é¢„å¤„ç†\n\nç¼ºå¤±å€¼å¤„ç†\n\n# æ£€æŸ¥ç¼ºå¤±å€¼\ncolSums(is.na(items))\n\nA1 A2 A3 A4 A5 C1 C2 C3 C4 C5 E1 E2 E3 E4 E5 N1 N2 N3 N4 N5 O1 O2 O3 O4 O5 \n16 27 26 19 16 21 24 20 26 16 23 16 25  9 21 22 21 11 36 29 22  0 28 14 20 \n\n# åˆ é™¤å«ç¼ºå¤±çš„è¡Œï¼ˆç®€å•å¤„ç†ï¼‰\nitems_complete &lt;- na.omit(items)\ncat(\"å®Œæ•´æ¡ˆä¾‹æ•°:\", nrow(items_complete), \"\\n\")\n\nå®Œæ•´æ¡ˆä¾‹æ•°: 2436 \n\n\n\n\næè¿°ç»Ÿè®¡\n\ndescribe(items_complete)[, c(\"n\", \"mean\", \"sd\", \"min\", \"max\")]\n\n      n mean   sd min max\nA1 2436 2.41 1.41   1   6\nA2 2436 4.80 1.18   1   6\nA3 2436 4.60 1.31   1   6\nA4 2436 4.69 1.49   1   6\nA5 2436 4.54 1.27   1   6\nC1 2436 4.53 1.24   1   6\nC2 2436 4.37 1.32   1   6\nC3 2436 4.30 1.29   1   6\nC4 2436 2.55 1.38   1   6\nC5 2436 3.31 1.63   1   6\nE1 2436 2.98 1.63   1   6\nE2 2436 3.15 1.61   1   6\nE3 2436 3.98 1.35   1   6\nE4 2436 4.41 1.47   1   6\nE5 2436 4.39 1.34   1   6\nN1 2436 2.94 1.58   1   6\nN2 2436 3.52 1.53   1   6\nN3 2436 3.22 1.59   1   6\nN4 2436 3.20 1.57   1   6\nN5 2436 2.97 1.62   1   6\nO1 2436 4.81 1.13   1   6\nO2 2436 2.68 1.55   1   6\nO3 2436 4.45 1.21   1   6\nO4 2436 4.93 1.19   1   6\nO5 2436 2.47 1.32   1   6",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å› å­åˆ†æ (EFA/CFA)"
    ]
  },
  {
    "objectID": "1038-efa-cfa.html#æ¢ç´¢æ€§å› å­åˆ†æ-efa",
    "href": "1038-efa-cfa.html#æ¢ç´¢æ€§å› å­åˆ†æ-efa",
    "title": "æ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æ¢ç´¢æ€§å› å­åˆ†æ (EFA)",
    "text": "æ¢ç´¢æ€§å› å­åˆ†æ (EFA)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å› å­åˆ†æ (EFA/CFA)"
    ]
  },
  {
    "objectID": "1038-efa-cfa.html#é€‚ç”¨æ€§æ£€éªŒ",
    "href": "1038-efa-cfa.html#é€‚ç”¨æ€§æ£€éªŒ",
    "title": "æ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—",
    "section": "é€‚ç”¨æ€§æ£€éªŒ",
    "text": "é€‚ç”¨æ€§æ£€éªŒ\n\nKMO æ£€éªŒ\nKaiser-Meyer-Olkin æ£€éªŒè¯„ä¼°æ•°æ®æ˜¯å¦é€‚åˆå› å­åˆ†æã€‚\n\nKMO(items_complete)\n\nKaiser-Meyer-Olkin factor adequacy\nCall: KMO(r = items_complete)\nOverall MSA =  0.85\nMSA for each item = \n  A1   A2   A3   A4   A5   C1   C2   C3   C4   C5   E1   E2   E3   E4   E5   N1 \n0.75 0.84 0.87 0.88 0.90 0.84 0.80 0.85 0.83 0.86 0.84 0.88 0.90 0.88 0.89 0.78 \n  N2   N3   N4   N5   O1   O2   O3   O4   O5 \n0.78 0.86 0.89 0.86 0.86 0.78 0.84 0.77 0.76 \n\n\nKMO è§£é‡Šï¼š - &gt; 0.9ï¼šæå¥½ - 0.8-0.9ï¼šå¥½ - 0.7-0.8ï¼šä¸­ç­‰ - 0.6-0.7ï¼šä¸€èˆ¬ - &lt; 0.6ï¼šä¸é€‚åˆå› å­åˆ†æ\n\n\nBartlett çƒå½¢æ£€éªŒ\næ£€éªŒç›¸å…³çŸ©é˜µæ˜¯å¦ä¸ºå•ä½çŸ©é˜µã€‚\n\ncortest.bartlett(items_complete)\n\n$chisq\n[1] 18146.07\n\n$p.value\n[1] 0\n\n$df\n[1] 300\n\n\nè§£é‡Šï¼šp &lt; 0.05 è¡¨ç¤ºç›¸å…³çŸ©é˜µä¸æ˜¯å•ä½çŸ©é˜µï¼Œé€‚åˆå› å­åˆ†æã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å› å­åˆ†æ (EFA/CFA)"
    ]
  },
  {
    "objectID": "1038-efa-cfa.html#å› å­æ•°ç¡®å®š",
    "href": "1038-efa-cfa.html#å› å­æ•°ç¡®å®š",
    "title": "æ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å› å­æ•°ç¡®å®š",
    "text": "å› å­æ•°ç¡®å®š\n\næ–¹æ³•1ï¼šç‰¹å¾å€¼ &gt; 1 å‡†åˆ™ (Kaiser å‡†åˆ™)\n\n# è®¡ç®—ç›¸å…³çŸ©é˜µ\ncor_matrix &lt;- cor(items_complete)\n\n# ç‰¹å¾å€¼åˆ†è§£\neigen_values &lt;- eigen(cor_matrix)$values\nprint(eigen_values)\n\n [1] 5.1343112 2.7518867 2.1427020 1.8523276 1.5481628 1.0735825 0.8395389\n [8] 0.7992062 0.7189892 0.6880888 0.6763734 0.6517998 0.6232530 0.5965628\n[15] 0.5630908 0.5433053 0.5145175 0.4945031 0.4826395 0.4489210 0.4233661\n[22] 0.4006715 0.3878045 0.3818568 0.2625390\n\n# ç‰¹å¾å€¼ &gt; 1 çš„å› å­æ•°\nsum(eigen_values &gt; 1)\n\n[1] 6\n\n\n\n\næ–¹æ³•2ï¼šç¢çŸ³å›¾ (Scree Plot)\n\nscree(items_complete, factors = FALSE)\n\n\n\n\n\n\n\n\nè§£é‡Šï¼šæ‰¾åˆ°â€æ‹ç‚¹â€ï¼Œå³æ›²çº¿å˜å¹³çš„ä½ç½®ã€‚\n\n\næ–¹æ³•3ï¼šå¹³è¡Œåˆ†æ (æ¨è)\n\nfa.parallel(items_complete, fa = \"fa\", n.iter = 100)\n\n\n\n\n\n\n\n\nParallel analysis suggests that the number of factors =  6  and the number of components =  NA \n\n\nè§£é‡Šï¼šå®é™…ç‰¹å¾å€¼è¶…è¿‡éšæœºæ¨¡æ‹Ÿç‰¹å¾å€¼çš„å› å­æ•°ã€‚\n\n\næ–¹æ³•4ï¼šMAP æ£€éªŒ\n\nVSS(items_complete, n = 8, rotate = \"promax\")\n\n\n\n\n\n\n\n\n\nVery Simple Structure\nCall: vss(x = x, n = n, rotate = rotate, diagonal = diagonal, fm = fm, \n    n.obs = n.obs, plot = plot, title = title, use = use, cor = cor)\nVSS complexity 1 achieves a maximimum of 0.6  with  4  factors\nVSS complexity 2 achieves a maximimum of 0.7  with  5  factors\n\nThe Velicer MAP achieves a minimum of 0.01  with  5  factors \nBIC achieves a minimum of  -550.01  with  8  factors\nSample Size adjusted BIC achieves a minimum of  -143.33  with  8  factors\n\nStatistics by number of factors \n  vss1 vss2   map dof chisq     prob sqresid  fit RMSEA  BIC SABIC complex\n1 0.50 0.00 0.025 275 10656  0.0e+00      26 0.50 0.124 8512  9386     1.0\n2 0.55 0.58 0.019 251  6669  0.0e+00      22 0.58 0.102 4712  5509     1.2\n3 0.57 0.65 0.018 228  4585  0.0e+00      18 0.65 0.089 2807  3531     1.2\n4 0.60 0.69 0.016 206  3033  0.0e+00      16 0.69 0.075 1426  2081     1.3\n5 0.54 0.70 0.015 185  1539 8.6e-212      15 0.71 0.055   96   684     1.4\n6 0.53 0.61 0.016 165   917 1.6e-104      16 0.69 0.043 -370   154     1.7\n7 0.51 0.59 0.019 146   631  1.8e-61      17 0.68 0.037 -508   -44     1.7\n8 0.47 0.61 0.022 128   448  4.0e-37      17 0.68 0.032 -550  -143     1.7\n  eChisq  SRMR eCRMS  eBIC\n1  21181 0.120 0.126 19037\n2  11015 0.087 0.095  9058\n3   6268 0.065 0.075  4490\n4   3129 0.046 0.056  1523\n5   1132 0.028 0.035  -311\n6    553 0.019 0.026  -734\n7    372 0.016 0.023  -767\n8    238 0.013 0.020  -760\n\n\nç»¼åˆåˆ¤æ–­ï¼šå¤šç§æ–¹æ³•çš„ç»“æœåº”è¯¥ç»¼åˆè€ƒè™‘ï¼Œé€‰æ‹©æœ€åˆç†çš„å› å­æ•°ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å› å­åˆ†æ (EFA/CFA)"
    ]
  },
  {
    "objectID": "1038-efa-cfa.html#å› å­æå–",
    "href": "1038-efa-cfa.html#å› å­æå–",
    "title": "æ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å› å­æå–",
    "text": "å› å­æå–\n\nä¸»è½´å› å­æ³• (æ¨è)\n\n# æå– 5 ä¸ªå› å­ï¼Œä½¿ç”¨ promax æ–œäº¤æ—‹è½¬\nfa_result &lt;- fa(items_complete,\n    nfactors = 5,\n    rotate = \"promax\", # æ–œäº¤æ—‹è½¬\n    fm = \"pa\"\n) # ä¸»è½´å› å­æ³•\n\nprint(fa_result, cut = 0.3) # åªæ˜¾ç¤º &gt; 0.3 çš„è½½è·\n\nFactor Analysis using method =  pa\nCall: fa(r = items_complete, nfactors = 5, rotate = \"promax\", fm = \"pa\")\nStandardized loadings (pattern matrix) based upon correlation matrix\n     PA2   PA1   PA3   PA5   PA4   h2   u2 com\nA1                   -0.46       0.20 0.80 1.4\nA2                    0.61       0.46 0.54 1.1\nA3                    0.62       0.54 0.46 1.3\nA4                    0.41       0.30 0.70 2.0\nA5        0.33        0.49       0.47 0.53 1.8\nC1              0.57             0.35 0.65 1.2\nC2              0.70             0.45 0.55 1.2\nC3              0.60             0.32 0.68 1.1\nC4             -0.65             0.48 0.52 1.2\nC5             -0.56             0.44 0.56 1.4\nE1       -0.64                   0.35 0.65 1.1\nE2       -0.71                   0.55 0.45 1.1\nE3        0.55                   0.44 0.56 1.6\nE4        0.66                   0.54 0.46 1.3\nE5        0.50                   0.41 0.59 1.8\nN1  0.84                         0.68 0.32 1.3\nN2  0.79                         0.61 0.39 1.2\nN3  0.74                         0.54 0.46 1.0\nN4  0.53 -0.31                   0.51 0.49 1.8\nN5  0.53                         0.35 0.65 1.5\nO1                          0.49 0.32 0.68 1.3\nO2                         -0.48 0.27 0.73 1.5\nO3                          0.58 0.47 0.53 1.5\nO4                          0.37 0.25 0.75 2.7\nO5                         -0.54 0.30 0.70 1.1\n\n                       PA2  PA1  PA3  PA5  PA4\nSS loadings           2.69 2.59 2.02 1.79 1.50\nProportion Var        0.11 0.10 0.08 0.07 0.06\nCumulative Var        0.11 0.21 0.29 0.36 0.42\nProportion Explained  0.25 0.24 0.19 0.17 0.14\nCumulative Proportion 0.25 0.50 0.69 0.86 1.00\n\n With factor correlations of \n      PA2   PA1   PA3   PA5  PA4\nPA2  1.00 -0.26 -0.22 -0.01 0.04\nPA1 -0.26  1.00  0.40  0.35 0.14\nPA3 -0.22  0.40  1.00  0.24 0.19\nPA5 -0.01  0.35  0.24  1.00 0.16\nPA4  0.04  0.14  0.19  0.16 1.00\n\nMean item complexity =  1.4\nTest of the hypothesis that 5 factors are sufficient.\n\ndf null model =  300  with the objective function =  7.48 with Chi Square =  18146.07\ndf of  the model are 185  and the objective function was  0.64 \n\nThe root mean square of the residuals (RMSR) is  0.03 \nThe df corrected root mean square of the residuals is  0.04 \n\nThe harmonic n.obs is  2436 with the empirical chi square  1131.91  with prob &lt;  1.1e-135 \nThe total n.obs was  2436  with Likelihood Chi Square =  1538.69  with prob &lt;  8e-212 \n\nTucker Lewis Index of factoring reliability =  0.877\nRMSEA index =  0.055  and the 90 % confidence intervals are  0.052 0.057\nBIC =  96.03\nFit based upon off diagonal values = 0.98\nMeasures of factor score adequacy             \n                                                   PA2  PA1  PA3  PA5  PA4\nCorrelation of (regression) scores with factors   0.93 0.91 0.89 0.87 0.84\nMultiple R square of scores with factors          0.86 0.83 0.79 0.75 0.70\nMinimum correlation of possible factor scores     0.72 0.66 0.58 0.51 0.40\n\n\n\n\næœ€å¤§ä¼¼ç„¶æ³•\n\nfa_ml &lt;- fa(items_complete,\n    nfactors = 5,\n    rotate = \"promax\",\n    fm = \"ml\"\n) # æœ€å¤§ä¼¼ç„¶æ³•\n\n# æ¯”è¾ƒæ‹Ÿåˆ\ncat(\"PA æ³• RMSEA:\", fa_result$RMSEA[1], \"\\n\")\n\nPA æ³• RMSEA: 0.05480526 \n\ncat(\"ML æ³• RMSEA:\", fa_ml$RMSEA[1], \"\\n\")\n\nML æ³• RMSEA: 0.05382273",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å› å­åˆ†æ (EFA/CFA)"
    ]
  },
  {
    "objectID": "1038-efa-cfa.html#æ—‹è½¬æ–¹æ³•",
    "href": "1038-efa-cfa.html#æ—‹è½¬æ–¹æ³•",
    "title": "æ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æ—‹è½¬æ–¹æ³•",
    "text": "æ—‹è½¬æ–¹æ³•\n\næ­£äº¤æ—‹è½¬ vs æ–œäº¤æ—‹è½¬\n\n# æ­£äº¤æ—‹è½¬ï¼ˆå› å­ä¸ç›¸å…³ï¼‰\nfa_varimax &lt;- fa(items_complete, nfactors = 5, rotate = \"varimax\")\n\n# æ–œäº¤æ—‹è½¬ï¼ˆå› å­å¯ç›¸å…³ï¼‰\nfa_promax &lt;- fa(items_complete, nfactors = 5, rotate = \"promax\")\n\n# æ¯”è¾ƒå› å­ç›¸å…³\ncat(\"Varimax å› å­ç›¸å…³:\\n\")\n\nVarimax å› å­ç›¸å…³:\n\nprint(fa_varimax$Phi)\n\nNULL\n\ncat(\"\\nPromax å› å­ç›¸å…³:\\n\")\n\n\nPromax å› å­ç›¸å…³:\n\nprint(round(fa_promax$Phi, 3))\n\n       MR2    MR1    MR3    MR5   MR4\nMR2  1.000 -0.256 -0.224 -0.013 0.040\nMR1 -0.256  1.000  0.399  0.345 0.142\nMR3 -0.224  0.399  1.000  0.236 0.192\nMR5 -0.013  0.345  0.236  1.000 0.155\nMR4  0.040  0.142  0.192  0.155 1.000\n\n\né€‰æ‹©å»ºè®®ï¼š - ç†è®ºä¸Šå› å­åº”ç›¸å…³ â†’ æ–œäº¤æ—‹è½¬ (promax, oblimin) - éœ€è¦å› å­æ­£äº¤ â†’ æ­£äº¤æ—‹è½¬ (varimax)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å› å­åˆ†æ (EFA/CFA)"
    ]
  },
  {
    "objectID": "1038-efa-cfa.html#ç»“æœè§£è¯»",
    "href": "1038-efa-cfa.html#ç»“æœè§£è¯»",
    "title": "æ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç»“æœè§£è¯»",
    "text": "ç»“æœè§£è¯»\n\nå› å­è½½è·çŸ©é˜µ\n\n# æŸ¥çœ‹å› å­è½½è·\nloadings &lt;- fa_result$loadings\nprint(loadings, cut = 0.3)\n\n\nLoadings:\n   PA2    PA1    PA3    PA5    PA4   \nA1                      -0.463       \nA2                       0.611       \nA3                       0.620       \nA4                       0.411       \nA5         0.332         0.489       \nC1                0.567              \nC2                0.697              \nC3                0.597              \nC4               -0.652              \nC5               -0.561              \nE1        -0.636                     \nE2        -0.711                     \nE3         0.545                     \nE4         0.660                     \nE5         0.498                     \nN1  0.835                            \nN2  0.791                            \nN3  0.741                            \nN4  0.533 -0.311                     \nN5  0.529                            \nO1                              0.491\nO2                             -0.484\nO3                              0.576\nO4                              0.370\nO5                             -0.543\n\n                 PA2   PA1   PA3   PA5   PA4\nSS loadings    2.704 2.486 2.050 1.638 1.461\nProportion Var 0.108 0.099 0.082 0.066 0.058\nCumulative Var 0.108 0.208 0.290 0.355 0.414\n\n\nè½½è·è§£é‡Šï¼š - &gt; 0.7ï¼šä¼˜ç§€ - 0.6-0.7ï¼šè‰¯å¥½ - 0.4-0.6ï¼šå¯æ¥å— - &lt; 0.4ï¼šè€ƒè™‘åˆ é™¤\n\n\nå…±åŒåº¦\n\n# æ¯ä¸ªå˜é‡è¢«å› å­è§£é‡Šçš„æ–¹å·®æ¯”ä¾‹\nfa_result$communalities\n\n[1] 10.59006\n\n\næ ‡å‡†ï¼šå…±åŒåº¦ &lt; 0.2 çš„å˜é‡è€ƒè™‘åˆ é™¤ã€‚\n\n\nå› å­å¾—åˆ†\n\n# è®¡ç®—å› å­å¾—åˆ†\nfactor_scores &lt;- factor.scores(items_complete, fa_result)$scores\nhead(factor_scores)\n\n              PA2        PA1         PA3        PA5        PA4\n61617 -0.43958636 -0.2227535 -1.46918220 -1.0398564 -1.9486251\n61618  0.07605077  0.4354195 -0.62143534 -0.2315558 -0.3297932\n61620  0.52227907  0.1737052 -0.03530488 -0.7979095  0.2324926\n61621 -0.16388898 -0.1413499 -1.17247939 -0.1013337 -1.3034475\n61622 -0.42091443  0.3272949 -0.09403904 -0.9823147 -0.8739858\n61623  0.03826001  1.3614244  1.62152869  0.1130949  0.4775330",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å› å­åˆ†æ (EFA/CFA)"
    ]
  },
  {
    "objectID": "1038-efa-cfa.html#efa-å¯è§†åŒ–",
    "href": "1038-efa-cfa.html#efa-å¯è§†åŒ–",
    "title": "æ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—",
    "section": "EFA å¯è§†åŒ–",
    "text": "EFA å¯è§†åŒ–\n\nå› å­è½½è·å›¾\n\nfa.diagram(fa_result, simple = FALSE, cut = 0.3)\n\n\n\n\n\n\n\n\n\n\nçƒ­å›¾å±•ç¤º\n\n# æå–è½½è·çŸ©é˜µ\nload_mat &lt;- unclass(fa_result$loadings)\n\n# ä½¿ç”¨ ggplot2 ç»˜åˆ¶\nlibrary(ggplot2)\nlibrary(tidyr)\n\nload_df &lt;- as.data.frame(load_mat) %&gt;%\n    mutate(item = rownames(load_mat)) %&gt;%\n    pivot_longer(-item, names_to = \"Factor\", values_to = \"Loading\")\n\nggplot(load_df, aes(x = Factor, y = item, fill = Loading)) +\n    geom_tile() +\n    geom_text(aes(label = round(Loading, 2)), size = 3) +\n    scale_fill_gradient2(\n        low = \"#457b9d\", mid = \"white\", high = \"#e63946\",\n        midpoint = 0, limits = c(-1, 1)\n    ) +\n    labs(title = \"å› å­è½½è·çƒ­å›¾\") +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å› å­åˆ†æ (EFA/CFA)"
    ]
  },
  {
    "objectID": "1038-efa-cfa.html#éªŒè¯æ€§å› å­åˆ†æ-cfa",
    "href": "1038-efa-cfa.html#éªŒè¯æ€§å› å­åˆ†æ-cfa",
    "title": "æ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—",
    "section": "éªŒè¯æ€§å› å­åˆ†æ (CFA)",
    "text": "éªŒè¯æ€§å› å­åˆ†æ (CFA)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å› å­åˆ†æ (EFA/CFA)"
    ]
  },
  {
    "objectID": "1038-efa-cfa.html#æ¨¡å‹è®¾å®š",
    "href": "1038-efa-cfa.html#æ¨¡å‹è®¾å®š",
    "title": "æ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹è®¾å®š",
    "text": "æ¨¡å‹è®¾å®š\nåŸºäº EFA ç»“æœæˆ–ç†è®ºå‡è®¾ï¼Œè®¾å®š CFA æ¨¡å‹ã€‚\n\n# å®šä¹‰ CFA æ¨¡å‹\ncfa_model &lt;- \"\n  # æµ‹é‡æ¨¡å‹\n  Agreeableness =~ A1 + A2 + A3 + A4 + A5\n  Conscientiousness =~ C1 + C2 + C3 + C4 + C5\n  Extraversion =~ E1 + E2 + E3 + E4 + E5\n  Neuroticism =~ N1 + N2 + N3 + N4 + N5\n  Openness =~ O1 + O2 + O3 + O4 + O5\n\"",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å› å­åˆ†æ (EFA/CFA)"
    ]
  },
  {
    "objectID": "1038-efa-cfa.html#æ¨¡å‹æ‹Ÿåˆ",
    "href": "1038-efa-cfa.html#æ¨¡å‹æ‹Ÿåˆ",
    "title": "æ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹æ‹Ÿåˆ",
    "text": "æ¨¡å‹æ‹Ÿåˆ\n\n# æ‹Ÿåˆ CFA æ¨¡å‹\ncfa_fit &lt;- cfa(cfa_model, data = items_complete)\n\n# æŸ¥çœ‹ç»“æœæ‘˜è¦\nsummary(cfa_fit, fit.measures = TRUE, standardized = TRUE)\n\nlavaan 0.6-21 ended normally after 55 iterations\n\n  Estimator                                         ML\n  Optimization method                           NLMINB\n  Number of model parameters                        60\n\n  Number of observations                          2436\n\nModel Test User Model:\n                                                      \n  Test statistic                              4165.467\n  Degrees of freedom                               265\n  P-value (Chi-square)                           0.000\n\nModel Test Baseline Model:\n\n  Test statistic                             18222.116\n  Degrees of freedom                               300\n  P-value                                        0.000\n\nUser Model versus Baseline Model:\n\n  Comparative Fit Index (CFI)                    0.782\n  Tucker-Lewis Index (TLI)                       0.754\n\nLoglikelihood and Information Criteria:\n\n  Loglikelihood user model (H0)             -99840.238\n  Loglikelihood unrestricted model (H1)     -97757.504\n                                                      \n  Akaike (AIC)                              199800.476\n  Bayesian (BIC)                            200148.363\n  Sample-size adjusted Bayesian (SABIC)     199957.729\n\nRoot Mean Square Error of Approximation:\n\n  RMSEA                                          0.078\n  90 Percent confidence interval - lower         0.076\n  90 Percent confidence interval - upper         0.080\n  P-value H_0: RMSEA &lt;= 0.050                    0.000\n  P-value H_0: RMSEA &gt;= 0.080                    0.037\n\nStandardized Root Mean Square Residual:\n\n  SRMR                                           0.075\n\nParameter Estimates:\n\n  Standard errors                             Standard\n  Information                                 Expected\n  Information saturated (h1) model          Structured\n\nLatent Variables:\n                       Estimate  Std.Err  z-value  P(&gt;|z|)   Std.lv  Std.all\n  Agreeableness =~                                                          \n    A1                    1.000                               0.484    0.344\n    A2                   -1.579    0.108  -14.650    0.000   -0.764   -0.648\n    A3                   -2.030    0.134  -15.093    0.000   -0.983   -0.749\n    A4                   -1.564    0.115  -13.616    0.000   -0.757   -0.510\n    A5                   -1.804    0.121  -14.852    0.000   -0.873   -0.687\n  Conscientiousness =~                                                      \n    C1                    1.000                               0.680    0.551\n    C2                    1.148    0.057   20.152    0.000    0.781    0.592\n    C3                    1.036    0.054   19.172    0.000    0.705    0.546\n    C4                   -1.421    0.065  -21.924    0.000   -0.967   -0.702\n    C5                   -1.489    0.072  -20.694    0.000   -1.012   -0.620\n  Extraversion =~                                                           \n    E1                    1.000                               0.920    0.564\n    E2                    1.226    0.051   23.899    0.000    1.128    0.699\n    E3                   -0.921    0.041  -22.431    0.000   -0.847   -0.627\n    E4                   -1.121    0.047  -23.977    0.000   -1.031   -0.703\n    E5                   -0.808    0.039  -20.648    0.000   -0.743   -0.553\n  Neuroticism =~                                                            \n    N1                    1.000                               1.300    0.825\n    N2                    0.947    0.024   39.899    0.000    1.230    0.803\n    N3                    0.884    0.025   35.919    0.000    1.149    0.721\n    N4                    0.692    0.025   27.753    0.000    0.899    0.573\n    N5                    0.628    0.026   24.027    0.000    0.816    0.503\n  Openness =~                                                               \n    O1                    1.000                               0.635    0.564\n    O2                   -1.020    0.068  -14.962    0.000   -0.648   -0.418\n    O3                    1.373    0.072   18.942    0.000    0.872    0.724\n    O4                    0.437    0.048    9.160    0.000    0.277    0.233\n    O5                   -0.960    0.060  -16.056    0.000   -0.610   -0.461\n\nCovariances:\n                       Estimate  Std.Err  z-value  P(&gt;|z|)   Std.lv  Std.all\n  Agreeableness ~~                                                          \n    Conscientisnss       -0.110    0.012   -9.254    0.000   -0.334   -0.334\n    Extraversion          0.304    0.025   12.293    0.000    0.683    0.683\n    Neuroticism           0.141    0.018    7.712    0.000    0.223    0.223\n    Openness             -0.093    0.011   -8.446    0.000   -0.303   -0.303\n  Conscientiousness ~~                                                      \n    Extraversion         -0.224    0.020  -11.121    0.000   -0.357   -0.357\n    Neuroticism          -0.250    0.025  -10.117    0.000   -0.283   -0.283\n    Openness              0.130    0.014    9.190    0.000    0.301    0.301\n  Extraversion ~~                                                           \n    Neuroticism           0.292    0.032    9.131    0.000    0.244    0.244\n    Openness             -0.265    0.021  -12.347    0.000   -0.453   -0.453\n  Neuroticism ~~                                                            \n    Openness             -0.093    0.022   -4.138    0.000   -0.112   -0.112\n\nVariances:\n                   Estimate  Std.Err  z-value  P(&gt;|z|)   Std.lv  Std.all\n   .A1                1.745    0.052   33.725    0.000    1.745    0.882\n   .A2                0.807    0.028   28.396    0.000    0.807    0.580\n   .A3                0.754    0.032   23.339    0.000    0.754    0.438\n   .A4                1.632    0.051   31.796    0.000    1.632    0.740\n   .A5                0.852    0.032   26.800    0.000    0.852    0.528\n   .C1                1.063    0.035   30.073    0.000    1.063    0.697\n   .C2                1.130    0.039   28.890    0.000    1.130    0.650\n   .C3                1.170    0.039   30.194    0.000    1.170    0.702\n   .C4                0.960    0.040   24.016    0.000    0.960    0.507\n   .C5                1.640    0.059   27.907    0.000    1.640    0.615\n   .E1                1.814    0.058   31.047    0.000    1.814    0.682\n   .E2                1.332    0.049   26.928    0.000    1.332    0.512\n   .E3                1.108    0.038   29.522    0.000    1.108    0.607\n   .E4                1.088    0.041   26.732    0.000    1.088    0.506\n   .E5                1.251    0.040   31.258    0.000    1.251    0.694\n   .N1                0.793    0.037   21.575    0.000    0.793    0.320\n   .N2                0.836    0.036   23.458    0.000    0.836    0.356\n   .N3                1.222    0.043   28.271    0.000    1.222    0.481\n   .N4                1.654    0.052   31.977    0.000    1.654    0.672\n   .N5                1.969    0.060   32.889    0.000    1.969    0.747\n   .O1                0.865    0.032   27.216    0.000    0.865    0.682\n   .O2                1.990    0.063   31.618    0.000    1.990    0.826\n   .O3                0.691    0.039   17.717    0.000    0.691    0.476\n   .O4                1.346    0.040   34.036    0.000    1.346    0.946\n   .O5                1.380    0.045   30.662    0.000    1.380    0.788\n    Agreeableness     0.234    0.030    7.839    0.000    1.000    1.000\n    Conscientisnss    0.463    0.036   12.810    0.000    1.000    1.000\n    Extraversion      0.846    0.062   13.693    0.000    1.000    1.000\n    Neuroticism       1.689    0.073   23.034    0.000    1.000    1.000\n    Openness          0.404    0.033   12.156    0.000    1.000    1.000",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å› å­åˆ†æ (EFA/CFA)"
    ]
  },
  {
    "objectID": "1038-efa-cfa.html#æ‹ŸåˆæŒ‡æ•°è§£è¯»",
    "href": "1038-efa-cfa.html#æ‹ŸåˆæŒ‡æ•°è§£è¯»",
    "title": "æ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æ‹ŸåˆæŒ‡æ•°è§£è¯»",
    "text": "æ‹ŸåˆæŒ‡æ•°è§£è¯»\n\næå–æ‹ŸåˆæŒ‡æ•°\n\n# æå–å¸¸ç”¨æ‹ŸåˆæŒ‡æ•°\nfit_indices &lt;- fitMeasures(cfa_fit, c(\n    \"chisq\", \"df\", \"pvalue\",\n    \"cfi\", \"tli\", \"rmsea\",\n    \"rmsea.ci.lower\", \"rmsea.ci.upper\",\n    \"srmr\"\n))\nround(fit_indices, 3)\n\n         chisq             df         pvalue            cfi            tli \n      4165.467        265.000          0.000          0.782          0.754 \n         rmsea rmsea.ci.lower rmsea.ci.upper           srmr \n         0.078          0.076          0.080          0.075 \n\n\n\n\næ‹Ÿåˆæ ‡å‡†\n\n\n\næŒ‡æ ‡\nä¼˜ç§€\nå¯æ¥å—\nè¯´æ˜\n\n\n\n\nÏ‡Â²/df\n&lt; 2\n&lt; 3\nå¡æ–¹/è‡ªç”±åº¦æ¯”\n\n\nCFI\n&gt; 0.95\n&gt; 0.90\næ¯”è¾ƒæ‹ŸåˆæŒ‡æ•°\n\n\nTLI\n&gt; 0.95\n&gt; 0.90\nTucker-Lewis æŒ‡æ•°\n\n\nRMSEA\n&lt; 0.05\n&lt; 0.08\nè¿‘ä¼¼è¯¯å·®å‡æ–¹æ ¹\n\n\nSRMR\n&lt; 0.05\n&lt; 0.08\næ ‡å‡†åŒ–æ®‹å·®å‡æ–¹æ ¹",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å› å­åˆ†æ (EFA/CFA)"
    ]
  },
  {
    "objectID": "1038-efa-cfa.html#å› å­è½½è·",
    "href": "1038-efa-cfa.html#å› å­è½½è·",
    "title": "æ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å› å­è½½è·",
    "text": "å› å­è½½è·\n\n# æ ‡å‡†åŒ–å› å­è½½è·\nstd_loadings &lt;- standardizedSolution(cfa_fit)\nstd_loadings[std_loadings$op == \"=~\", c(\"lhs\", \"rhs\", \"est.std\", \"pvalue\")]\n\n                 lhs rhs est.std pvalue\n1      Agreeableness  A1   0.344      0\n2      Agreeableness  A2  -0.648      0\n3      Agreeableness  A3  -0.749      0\n4      Agreeableness  A4  -0.510      0\n5      Agreeableness  A5  -0.687      0\n6  Conscientiousness  C1   0.551      0\n7  Conscientiousness  C2   0.592      0\n8  Conscientiousness  C3   0.546      0\n9  Conscientiousness  C4  -0.702      0\n10 Conscientiousness  C5  -0.620      0\n11      Extraversion  E1   0.564      0\n12      Extraversion  E2   0.699      0\n13      Extraversion  E3  -0.627      0\n14      Extraversion  E4  -0.703      0\n15      Extraversion  E5  -0.553      0\n16       Neuroticism  N1   0.825      0\n17       Neuroticism  N2   0.803      0\n18       Neuroticism  N3   0.721      0\n19       Neuroticism  N4   0.573      0\n20       Neuroticism  N5   0.503      0\n21          Openness  O1   0.564      0\n22          Openness  O2  -0.418      0\n23          Openness  O3   0.724      0\n24          Openness  O4   0.233      0\n25          Openness  O5  -0.461      0\n\n\næ ‡å‡†ï¼šæ ‡å‡†åŒ–è½½è· &gt; 0.5ï¼ˆæœ€ä½ 0.4ï¼‰ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å› å­åˆ†æ (EFA/CFA)"
    ]
  },
  {
    "objectID": "1038-efa-cfa.html#ä¿¡æ•ˆåº¦è¯„ä¼°",
    "href": "1038-efa-cfa.html#ä¿¡æ•ˆåº¦è¯„ä¼°",
    "title": "æ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ä¿¡æ•ˆåº¦è¯„ä¼°",
    "text": "ä¿¡æ•ˆåº¦è¯„ä¼°\n\nç»„åˆä¿¡åº¦ (CR)\n\n# è®¡ç®—ç»„åˆä¿¡åº¦\ncalc_CR &lt;- function(fit, factor_name) {\n    params &lt;- parameterEstimates(fit, standardized = TRUE)\n    loadings &lt;- params[params$op == \"=~\" & params$lhs == factor_name, \"std.all\"]\n    sum_loadings &lt;- sum(loadings)\n    sum_errors &lt;- sum(1 - loadings^2)\n    CR &lt;- sum_loadings^2 / (sum_loadings^2 + sum_errors)\n    return(CR)\n}\n\nfactors &lt;- c(\n    \"Agreeableness\", \"Conscientiousness\", \"Extraversion\",\n    \"Neuroticism\", \"Openness\"\n)\nCR_values &lt;- sapply(factors, function(f) calc_CR(cfa_fit, f))\nprint(round(CR_values, 3))\n\n    Agreeableness Conscientiousness      Extraversion       Neuroticism \n            0.615             0.041             0.114             0.820 \n         Openness \n            0.100 \n\n\næ ‡å‡†ï¼šCR &gt; 0.7\n\n\nå¹³å‡æ–¹å·®èƒå–é‡ (AVE)\n\n# è®¡ç®— AVE\ncalc_AVE &lt;- function(fit, factor_name) {\n    params &lt;- parameterEstimates(fit, standardized = TRUE)\n    loadings &lt;- params[params$op == \"=~\" & params$lhs == factor_name, \"std.all\"]\n    AVE &lt;- mean(loadings^2)\n    return(AVE)\n}\n\nAVE_values &lt;- sapply(factors, function(f) calc_AVE(cfa_fit, f))\nprint(round(AVE_values, 3))\n\n    Agreeableness Conscientiousness      Extraversion       Neuroticism \n            0.367             0.366             0.400             0.485 \n         Openness \n            0.257 \n\n\næ ‡å‡†ï¼š - AVE &gt; 0.5ï¼šæ”¶æ•›æ•ˆåº¦è‰¯å¥½ - AVE çš„å¹³æ–¹æ ¹ &gt; å› å­é—´ç›¸å…³ï¼šåŒºåˆ†æ•ˆåº¦è‰¯å¥½\n\n\nå› å­ç›¸å…³çŸ©é˜µ\n\n# å› å­ç›¸å…³\nfactor_cor &lt;- lavInspect(cfa_fit, \"cor.lv\")\nprint(round(factor_cor, 3))\n\n                  Agrbln Cnscnt Extrvr Nrtcsm Opnnss\nAgreeableness      1.000                            \nConscientiousness -0.334  1.000                     \nExtraversion       0.683 -0.357  1.000              \nNeuroticism        0.223 -0.283  0.244  1.000       \nOpenness          -0.303  0.301 -0.453 -0.112  1.000\n\n\n\n\nåŒºåˆ†æ•ˆåº¦æ£€éªŒ\n\n# æ¯”è¾ƒ AVE å¹³æ–¹æ ¹ä¸å› å­ç›¸å…³\nAVE_sqrt &lt;- sqrt(AVE_values)\ncat(\"AVE å¹³æ–¹æ ¹:\\n\")\n\nAVE å¹³æ–¹æ ¹:\n\nprint(round(AVE_sqrt, 3))\n\n    Agreeableness Conscientiousness      Extraversion       Neuroticism \n            0.605             0.605             0.633             0.696 \n         Openness \n            0.507 \n\ncat(\"\\næœ€å¤§å› å­ç›¸å…³:\\n\")\n\n\næœ€å¤§å› å­ç›¸å…³:\n\n# è·å–æœ€å¤§ç›¸å…³ï¼ˆæ’é™¤å¯¹è§’çº¿ï¼‰\nfactor_cor_nodiag &lt;- factor_cor\ndiag(factor_cor_nodiag) &lt;- 0\nprint(round(apply(abs(factor_cor_nodiag), 1, max), 3))\n\n    Agreeableness Conscientiousness      Extraversion       Neuroticism \n            0.683             0.357             0.683             0.283 \n         Openness \n            0.453",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å› å­åˆ†æ (EFA/CFA)"
    ]
  },
  {
    "objectID": "1038-efa-cfa.html#cfa-å¯è§†åŒ–",
    "href": "1038-efa-cfa.html#cfa-å¯è§†åŒ–",
    "title": "æ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—",
    "section": "CFA å¯è§†åŒ–",
    "text": "CFA å¯è§†åŒ–\n\nè·¯å¾„å›¾\n\nsemPaths(cfa_fit,\n    what = \"std\", # æ ‡å‡†åŒ–ç³»æ•°\n    layout = \"tree2\",\n    edge.label.cex = 0.8,\n    curvePivot = TRUE,\n    fade = FALSE,\n    style = \"lisrel\",\n    sizeLat = 8,\n    sizeMan = 6,\n    nCharNodes = 0,\n    residuals = FALSE\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å› å­åˆ†æ (EFA/CFA)"
    ]
  },
  {
    "objectID": "1038-efa-cfa.html#æ¨¡å‹ä¿®æ­£",
    "href": "1038-efa-cfa.html#æ¨¡å‹ä¿®æ­£",
    "title": "æ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹ä¿®æ­£",
    "text": "æ¨¡å‹ä¿®æ­£\n\nä¿®æ­£æŒ‡æ•°\n\n# æŸ¥çœ‹ä¿®æ­£æŒ‡æ•°\nmi &lt;- modindices(cfa_fit, sort = TRUE, minimum.value = 10)\nhead(mi, 10)\n\n                  lhs op rhs      mi    epc sepc.lv sepc.all sepc.nox\n421                N1 ~~  N2 418.812  0.841   0.841    1.033    1.033\n119      Extraversion =~  N4 200.790  0.487   0.448    0.285    0.285\n158          Openness =~  E3 153.715  0.672   0.427    0.316    0.316\n438                N3 ~~  N4 134.104  0.403   0.403    0.283    0.283\n159          Openness =~  E4 122.558 -0.636  -0.404   -0.276   -0.276\n95  Conscientiousness =~  E5 121.499  0.504   0.343    0.255    0.255\n123      Extraversion =~  O3 114.202 -0.429  -0.395   -0.328   -0.328\n124      Extraversion =~  O4 113.863  0.372   0.343    0.287    0.287\n135       Neuroticism =~  C5 108.754  0.271   0.352    0.216    0.216\n110      Extraversion =~  A5 108.587 -0.488  -0.449   -0.354   -0.354\n\n\n\n[!WARNING] ä¿®æ­£æŒ‡æ•°åº”è°¨æ…ä½¿ç”¨ï¼ä»…åœ¨æœ‰ç†è®ºæ”¯æŒæ—¶æ·»åŠ è·¯å¾„ï¼Œé¿å…è¿‡åº¦æ‹Ÿåˆã€‚\n\n\n\næ·»åŠ æ®‹å·®ç›¸å…³\n\n# ä¿®æ­£æ¨¡å‹ç¤ºä¾‹\ncfa_model_modified &lt;- \"\n  Agreeableness =~ A1 + A2 + A3 + A4 + A5\n  Conscientiousness =~ C1 + C2 + C3 + C4 + C5\n  Extraversion =~ E1 + E2 + E3 + E4 + E5\n  Neuroticism =~ N1 + N2 + N3 + N4 + N5\n  Openness =~ O1 + O2 + O3 + O4 + O5\n\n  # æ ¹æ®ç†è®ºæ·»åŠ æ®‹å·®ç›¸å…³\n  # E1 ~~ E2\n\"\n\ncfa_fit_mod &lt;- cfa(cfa_model_modified, data = items_complete)\n\n\n\næ¨¡å‹æ¯”è¾ƒ\n\n# æ¯”è¾ƒåŸå§‹æ¨¡å‹å’Œä¿®æ­£æ¨¡å‹\n# anova(cfa_fit, cfa_fit_mod)  # è‹¥æ¨¡å‹åµŒå¥—",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å› å­åˆ†æ (EFA/CFA)"
    ]
  },
  {
    "objectID": "1038-efa-cfa.html#å¤šç»„-cfa",
    "href": "1038-efa-cfa.html#å¤šç»„-cfa",
    "title": "æ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å¤šç»„ CFA",
    "text": "å¤šç»„ CFA\næ£€éªŒå› å­ç»“æ„åœ¨ä¸åŒç»„åˆ«æ˜¯å¦ç­‰å€¼ã€‚\n\n# æ·»åŠ æ€§åˆ«å˜é‡\nitems_with_gender &lt;- cbind(items_complete, gender = bfi$gender[complete.cases(bfi[, 1:25])])\nitems_with_gender &lt;- items_with_gender[!is.na(items_with_gender$gender), ]\n\n# å‹æ€ç­‰å€¼ï¼ˆå› å­ç»“æ„ç›¸åŒï¼‰\nfit_config &lt;- cfa(cfa_model, data = items_with_gender, group = \"gender\")\n\n# å¼±ç­‰å€¼ï¼ˆè½½è·ç›¸ç­‰ï¼‰\nfit_metric &lt;- cfa(cfa_model,\n    data = items_with_gender, group = \"gender\",\n    group.equal = \"loadings\"\n)\n\n# æ¯”è¾ƒ\nanova(fit_config, fit_metric)\n\n\nChi-Squared Difference Test\n\n            Df    AIC    BIC  Chisq Chisq diff RMSEA Df diff Pr(&gt;Chisq)\nfit_config 530 199494 200479 4545.3                                    \nfit_metric 550 199471 200341 4562.6     17.307     0      20     0.6329",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å› å­åˆ†æ (EFA/CFA)"
    ]
  },
  {
    "objectID": "1038-efa-cfa.html#æŠ¥å‘Šæ¨¡æ¿",
    "href": "1038-efa-cfa.html#æŠ¥å‘Šæ¨¡æ¿",
    "title": "æ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æŠ¥å‘Šæ¨¡æ¿",
    "text": "æŠ¥å‘Šæ¨¡æ¿\n\n\n\n## CFA ç»“æœæŠ¥å‘Š\n\n### æ¨¡å‹æ‹Ÿåˆ\nä½¿ç”¨æœ€å¤§ä¼¼ç„¶æ³•ä¼°è®¡äº”å› å­æ¨¡å‹ã€‚æ¨¡å‹æ‹ŸåˆæŒ‡æ•°å¦‚ä¸‹ï¼š\nÏ‡Â²( 265 ) =  4165.47 , p &lt; .001,\nCFI =  0.782 ,\nTLI =  0.754 ,\nRMSEA =  0.078  (90% CI [ 0.076 ,  0.08 ]),\nSRMR =  0.075 ã€‚\n\n### ä¿¡æ•ˆåº¦\næ‰€æœ‰å› å­çš„ç»„åˆä¿¡åº¦ (CR) å‡å¤§äº 0.7ï¼ŒAVE å‡å¤§äº 0.4ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å› å­åˆ†æ (EFA/CFA)"
    ]
  },
  {
    "objectID": "1038-efa-cfa.html#efa-vs-cfa-é€‰æ‹©æŒ‡å—",
    "href": "1038-efa-cfa.html#efa-vs-cfa-é€‰æ‹©æŒ‡å—",
    "title": "æ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—",
    "section": "EFA vs CFA é€‰æ‹©æŒ‡å—",
    "text": "EFA vs CFA é€‰æ‹©æŒ‡å—\n\n\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                  é€‰æ‹©å†³ç­–æ ‘                      â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ 1. æ˜¯å¦æœ‰å…ˆéªŒçš„å› å­ç»“æ„å‡è®¾ï¼Ÿ                    â”‚\nâ”‚    â”œâ”€ å¦ â†’ EFAï¼ˆæ¢ç´¢ç»“æ„ï¼‰                       â”‚\nâ”‚    â””â”€ æ˜¯ â†’ CFAï¼ˆéªŒè¯ç»“æ„ï¼‰                       â”‚\nâ”‚                                                 â”‚\nâ”‚ 2. é‡è¡¨å¼€å‘é˜¶æ®µï¼Ÿ                               â”‚\nâ”‚    â”œâ”€ åˆæœŸå¼€å‘ â†’ EFA                            â”‚\nâ”‚    â””â”€ éªŒè¯ä¿®è®¢ â†’ CFA                            â”‚\nâ”‚                                                 â”‚\nâ”‚ 3. æ˜¯å¦éœ€è¦è·¨ç»„æ¯”è¾ƒï¼Ÿ                           â”‚\nâ”‚    â””â”€ æ˜¯ â†’ å¤šç»„ CFA                              â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å› å­åˆ†æ (EFA/CFA)"
    ]
  },
  {
    "objectID": "1038-efa-cfa.html#æ€»ç»“",
    "href": "1038-efa-cfa.html#æ€»ç»“",
    "title": "æ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\né˜¶æ®µ\næ–¹æ³•\nç›®çš„\n\n\n\n\né‡è¡¨å¼€å‘\nEFA\næ¢ç´¢å› å­ç»“æ„\n\n\né‡è¡¨éªŒè¯\nCFA\néªŒè¯å› å­ç»“æ„\n\n\nè·¨æ–‡åŒ–ç ”ç©¶\nå¤šç»„CFA\næ£€éªŒæµ‹é‡ç­‰å€¼\n\n\nç†è®ºæ£€éªŒ\nCFA\néªŒè¯æµ‹é‡æ¨¡å‹\n\n\n\n\n[!TIP] æœ€ä½³å®è·µï¼š 1. EFA å’Œ CFA åº”ä½¿ç”¨ä¸åŒæ ·æœ¬ 2. å› å­æ•°ç¡®å®šç»¼åˆå¤šç§æ–¹æ³• 3. æ‹Ÿåˆä¸ä½³æ—¶å…ˆæ£€æŸ¥æ•°æ®è´¨é‡ 4. æ¨¡å‹ä¿®æ­£éœ€æœ‰ç†è®ºæ”¯æŒ",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å› å­åˆ†æ (EFA/CFA)"
    ]
  },
  {
    "objectID": "1038-efa-cfa.html#å‚è€ƒæ–‡çŒ®",
    "href": "1038-efa-cfa.html#å‚è€ƒæ–‡çŒ®",
    "title": "æ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒæ–‡çŒ®",
    "text": "å‚è€ƒæ–‡çŒ®\n\nBrown, T. A. (2015). Confirmatory Factor Analysis for Applied Research (2nd ed.). Guilford Press.\nFabrigar, L. R., & Wegener, D. T. (2012). Exploratory Factor Analysis. Oxford University Press.\nRevelle, W. (2023). psych: Procedures for Psychological, Psychometric, and Personality Research. R package.",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å› å­åˆ†æ (EFA/CFA)"
    ]
  },
  {
    "objectID": "1036-anova.html",
    "href": "1036-anova.html",
    "title": "æ–¹å·®åˆ†æ (ANOVA) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "æ–¹å·®åˆ†æ (Analysis of Variance, ANOVA) ç”¨äºæ¯”è¾ƒä¸‰ä¸ªæˆ–æ›´å¤šç»„çš„å‡å€¼æ˜¯å¦å­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚æ ¹æ®å› ç´ çš„æ•°é‡å’Œè®¾è®¡ç±»å‹ï¼Œå¯åˆ†ä¸ºå•å› ç´  ANOVAã€å¤šå› ç´  ANOVAã€é‡å¤æµ‹é‡ ANOVA ç­‰ã€‚\nåœ¨ R ä¸­ï¼ŒåŸºç¡€åŒ… stats æä¾›äº† aov() å‡½æ•°ï¼Œä½† rstatix åŒ…æä¾›äº†ä¸€ä¸ªæ›´ç°ä»£ã€æ›´ç¬¦åˆ â€œTidyâ€ é£æ ¼çš„æ¡†æ¶ï¼Œç‰¹åˆ«é€‚åˆä¸ ggplot2 å’Œ ggpubr ç»“åˆä½¿ç”¨ã€‚\n\n\n\n\n\n\n\n\n\n\nç±»å‹\né€‚ç”¨åœºæ™¯\nå‡½æ•°\n\n\n\n\nå•å› ç´  ANOVA\n1ä¸ªå› ç´ ï¼Œå¤šä¸ªæ°´å¹³\nanova_test(y ~ group)\n\n\nåŒå› ç´  ANOVA\n2ä¸ªå› ç´ ï¼Œè€ƒå¯Ÿä¸»æ•ˆåº”+äº¤äº’\nanova_test(y ~ A * B)\n\n\né‡å¤æµ‹é‡ ANOVA\nåŒä¸€å—è¯•è€…å¤šæ¬¡æµ‹é‡\nanova_test(y ~ time + Error(id/time))\n\n\næ··åˆè®¾è®¡ ANOVA\nç»„é—´+ç»„å†…å› ç´ \nanova_test(y ~ between * within + Error(id/within))",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "æ–¹å·®åˆ†æ (ANOVA)"
    ]
  },
  {
    "objectID": "1036-anova.html#ç®€ä»‹",
    "href": "1036-anova.html#ç®€ä»‹",
    "title": "æ–¹å·®åˆ†æ (ANOVA) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "æ–¹å·®åˆ†æ (Analysis of Variance, ANOVA) ç”¨äºæ¯”è¾ƒä¸‰ä¸ªæˆ–æ›´å¤šç»„çš„å‡å€¼æ˜¯å¦å­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚æ ¹æ®å› ç´ çš„æ•°é‡å’Œè®¾è®¡ç±»å‹ï¼Œå¯åˆ†ä¸ºå•å› ç´  ANOVAã€å¤šå› ç´  ANOVAã€é‡å¤æµ‹é‡ ANOVA ç­‰ã€‚\nåœ¨ R ä¸­ï¼ŒåŸºç¡€åŒ… stats æä¾›äº† aov() å‡½æ•°ï¼Œä½† rstatix åŒ…æä¾›äº†ä¸€ä¸ªæ›´ç°ä»£ã€æ›´ç¬¦åˆ â€œTidyâ€ é£æ ¼çš„æ¡†æ¶ï¼Œç‰¹åˆ«é€‚åˆä¸ ggplot2 å’Œ ggpubr ç»“åˆä½¿ç”¨ã€‚\n\n\n\n\n\n\n\n\n\n\nç±»å‹\né€‚ç”¨åœºæ™¯\nå‡½æ•°\n\n\n\n\nå•å› ç´  ANOVA\n1ä¸ªå› ç´ ï¼Œå¤šä¸ªæ°´å¹³\nanova_test(y ~ group)\n\n\nåŒå› ç´  ANOVA\n2ä¸ªå› ç´ ï¼Œè€ƒå¯Ÿä¸»æ•ˆåº”+äº¤äº’\nanova_test(y ~ A * B)\n\n\né‡å¤æµ‹é‡ ANOVA\nåŒä¸€å—è¯•è€…å¤šæ¬¡æµ‹é‡\nanova_test(y ~ time + Error(id/time))\n\n\næ··åˆè®¾è®¡ ANOVA\nç»„é—´+ç»„å†…å› ç´ \nanova_test(y ~ between * within + Error(id/within))",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "æ–¹å·®åˆ†æ (ANOVA)"
    ]
  },
  {
    "objectID": "1036-anova.html#å®‰è£…",
    "href": "1036-anova.html#å®‰è£…",
    "title": "æ–¹å·®åˆ†æ (ANOVA) å®Œå…¨æŒ‡å—",
    "section": "å®‰è£…",
    "text": "å®‰è£…\n\ninstall.packages(\"rstatix\")\ninstall.packages(\"ggpubr\")\n\n\nlibrary(rstatix)\nlibrary(ggpubr)\nlibrary(dplyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "æ–¹å·®åˆ†æ (ANOVA)"
    ]
  },
  {
    "objectID": "1036-anova.html#å•å› ç´ æ–¹å·®åˆ†æ-one-way-anova",
    "href": "1036-anova.html#å•å› ç´ æ–¹å·®åˆ†æ-one-way-anova",
    "title": "æ–¹å·®åˆ†æ (ANOVA) å®Œå…¨æŒ‡å—",
    "section": "1. å•å› ç´ æ–¹å·®åˆ†æ (One-way ANOVA)",
    "text": "1. å•å› ç´ æ–¹å·®åˆ†æ (One-way ANOVA)\nç ”ç©¶æ¤ç‰©ç”Ÿé•¿æ•°æ® (PlantGrowth)ï¼Œæ¯”è¾ƒä¸‰ç§å¤„ç†æ¡ä»¶ä¸‹çš„äº§é‡å·®å¼‚ã€‚\n\ndata(\"PlantGrowth\")\nhead(PlantGrowth)\n\n  weight group\n1   4.17  ctrl\n2   5.58  ctrl\n3   5.18  ctrl\n4   6.11  ctrl\n5   4.50  ctrl\n6   4.61  ctrl\n\n# 1.1 æè¿°ç»Ÿè®¡\nPlantGrowth %&gt;%\n    group_by(group) %&gt;%\n    get_summary_stats(weight, type = \"mean_sd\")\n\n# A tibble: 3 Ã— 5\n  group variable     n  mean    sd\n  &lt;fct&gt; &lt;fct&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 ctrl  weight      10  5.03 0.583\n2 trt1  weight      10  4.66 0.794\n3 trt2  weight      10  5.53 0.443\n\n# 1.2 å¯è§†åŒ–\nggboxplot(PlantGrowth, x = \"group\", y = \"weight\", color = \"group\")\n\n\n\n\n\n\n\n\n\n# 1.3 æ‰§è¡Œ ANOVA\nres.aov &lt;- PlantGrowth %&gt;% anova_test(weight ~ group)\nres.aov\n\nANOVA Table (type II tests)\n\n  Effect DFn DFd     F     p p&lt;.05   ges\n1  group   2  27 4.846 0.016     * 0.264\n\n# 1.4 äº‹åä¸¤ä¸¤æ¯”è¾ƒ (Tukey HSD)\npwc &lt;- PlantGrowth %&gt;% tukey_hsd(weight ~ group)\npwc\n\n# A tibble: 3 Ã— 9\n  term  group1 group2 null.value estimate conf.low conf.high p.adj p.adj.signif\n* &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       \n1 group ctrl   trt1            0   -0.371   -1.06      0.320 0.391 ns          \n2 group ctrl   trt2            0    0.494   -0.197     1.19  0.198 ns          \n3 group trt1   trt2            0    0.865    0.174     1.56  0.012 *           \n\n\n\næ•ˆåº”é‡è§£è¯»\nrstatix è‡ªåŠ¨è®¡ç®— Î·Â² (eta-squared) å’Œ ges (generalized eta-squared)ï¼š\n\n\n\næ•ˆåº”é‡\nå°æ•ˆåº”\nä¸­æ•ˆåº”\nå¤§æ•ˆåº”\n\n\n\n\nÎ·Â²\n0.01\n0.06\n0.14\n\n\nÏ‰Â²\n0.01\n0.06\n0.14\n\n\nCohenâ€™s f\n0.10\n0.25\n0.40\n\n\n\n\n[!TIP] Î·Â² è§£è¯»ï¼šè¡¨ç¤ºå› å˜é‡å˜å¼‚ä¸­è¢«è‡ªå˜é‡è§£é‡Šçš„æ¯”ä¾‹ã€‚Î·Â² = 0.14 æ„å‘³ç€ 14% çš„æ–¹å·®å¯ä»¥ç”±ç»„åˆ«å·®å¼‚è§£é‡Šã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "æ–¹å·®åˆ†æ (ANOVA)"
    ]
  },
  {
    "objectID": "1036-anova.html#åŒå› ç´ æ–¹å·®åˆ†æ-two-way-anova",
    "href": "1036-anova.html#åŒå› ç´ æ–¹å·®åˆ†æ-two-way-anova",
    "title": "æ–¹å·®åˆ†æ (ANOVA) å®Œå…¨æŒ‡å—",
    "section": "2. åŒå› ç´ æ–¹å·®åˆ†æ (Two-way ANOVA)",
    "text": "2. åŒå› ç´ æ–¹å·®åˆ†æ (Two-way ANOVA)\nä½¿ç”¨ ToothGrowth æ•°æ®é›†ï¼Œç ”ç©¶ç»´ç”Ÿç´  C å‰‚é‡ (dose) å’Œç»™è¯æ–¹å¼ (supp) å¯¹ç‰™é½¿é•¿åº¦ (len) çš„å½±å“ã€‚\n\ndata(\"ToothGrowth\")\nToothGrowth$dose &lt;- as.factor(ToothGrowth$dose) # è½¬æ¢ä¸ºå› å­\n\n# 2.1 å¯è§†åŒ–\nggboxplot(ToothGrowth,\n    x = \"dose\", y = \"len\", color = \"supp\",\n    add = \"jitter\"\n)\n\n\n\n\n\n\n\n# 2.2 æ‰§è¡Œ ANOVA (åŒ…å«äº¤äº’ä½œç”¨)\nres.aov2 &lt;- ToothGrowth %&gt;% anova_test(len ~ supp * dose)\nres.aov2\n\nANOVA Table (type II tests)\n\n     Effect DFn DFd      F        p p&lt;.05   ges\n1      supp   1  54 15.572 2.31e-04     * 0.224\n2      dose   2  54 92.000 4.05e-18     * 0.773\n3 supp:dose   2  54  4.107 2.20e-02     * 0.132\n\n\nç»“æœæ˜¾ç¤º dose ä¸»æ•ˆåº”æ˜¾è‘—ï¼Œsupp ä¸»æ•ˆåº”æ˜¾è‘—ï¼Œä¸”äºŒè€…å­˜åœ¨äº¤äº’ä½œç”¨ (supp:dose)ã€‚\n\näº¤äº’ä½œç”¨è§£è¯»\nå½“äº¤äº’ä½œç”¨æ˜¾è‘—æ—¶ï¼š 1. ä¸åº”å•ç‹¬è§£é‡Šä¸»æ•ˆåº”ï¼šå› ä¸ºä¸€ä¸ªå› ç´ çš„æ•ˆåº”å–å†³äºå¦ä¸€ä¸ªå› ç´ çš„æ°´å¹³ 2. åº”è¿›è¡Œç®€å•æ•ˆåº”åˆ†æï¼šåˆ†åˆ«æ£€éªŒæ¯ä¸ªå› ç´ åœ¨å¦ä¸€å› ç´ å„æ°´å¹³çš„æ•ˆåº”\n\n# ç®€å•æ•ˆåº”åˆ†æï¼šåœ¨æ¯ä¸ª dose æ°´å¹³æ£€éªŒ supp çš„æ•ˆåº”\nToothGrowth %&gt;%\n    group_by(dose) %&gt;%\n    anova_test(len ~ supp)\n\n# A tibble: 3 Ã— 8\n  dose  Effect   DFn   DFd      F        p `p&lt;.05`      ges\n* &lt;fct&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;\n1 0.5   supp       1    18 10.0   0.005    \"*\"     0.358   \n2 1     supp       1    18 16.3   0.000781 \"*\"     0.475   \n3 2     supp       1    18  0.002 0.964    \"\"      0.000118",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "æ–¹å·®åˆ†æ (ANOVA)"
    ]
  },
  {
    "objectID": "1036-anova.html#é‡å¤æµ‹é‡æ–¹å·®åˆ†æ-repeated-measures-anova",
    "href": "1036-anova.html#é‡å¤æµ‹é‡æ–¹å·®åˆ†æ-repeated-measures-anova",
    "title": "æ–¹å·®åˆ†æ (ANOVA) å®Œå…¨æŒ‡å—",
    "section": "3. é‡å¤æµ‹é‡æ–¹å·®åˆ†æ (Repeated Measures ANOVA)",
    "text": "3. é‡å¤æµ‹é‡æ–¹å·®åˆ†æ (Repeated Measures ANOVA)\nå‡è®¾æˆ‘ä»¬æœ‰ä¸€ç»„å—è¯•è€…åœ¨ä¸‰ä¸ªä¸åŒæ—¶é—´ç‚¹æµ‹é‡äº†ç„¦è™‘åˆ†æ•°ã€‚\n\n# ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®\n# 10 subjects, 3 time points\nset.seed(123)\ndata_rm &lt;- data.frame(\n    id = rep(1:10, each = 3),\n    time = rep(c(\"T1\", \"T2\", \"T3\"), 10),\n    score = c(replicate(10, sort(rnorm(3, mean = 20, sd = 5))))\n)\n\n# è½¬æ¢ä¸ºå› å­\ndata_rm$id &lt;- as.factor(data_rm$id)\ndata_rm$time &lt;- as.factor(data_rm$time)\n\n# 3.1 æ‰§è¡Œé‡å¤æµ‹é‡ ANOVA\nres.rm &lt;- data_rm %&gt;% anova_test(score ~ time + Error(id / time))\nres.rm\n\nANOVA Table (type III tests)\n\n$ANOVA\n  Effect DFn DFd     F        p p&lt;.05   ges\n1   time   2  18 40.83 2.05e-07     * 0.677\n\n$`Mauchly's Test for Sphericity`\n  Effect     W     p p&lt;.05\n1   time 0.626 0.154      \n\n$`Sphericity Corrections`\n  Effect   GGe     DF[GG]    p[GG] p[GG]&lt;.05   HFe      DF[HF]    p[HF]\n1   time 0.728 1.46, 13.1 6.65e-06         * 0.832 1.66, 14.98 1.74e-06\n  p[HF]&lt;.05\n1         *\n\n# 3.2 äº‹åæ¯”è¾ƒ (é…å¯¹ t æ£€éªŒ + Bonferroni æ ¡æ­£)\npwc_rm &lt;- data_rm %&gt;%\n    pairwise_t_test(\n        score ~ time,\n        paired = TRUE,\n        p.adjust.method = \"bonferroni\"\n    )\npwc_rm\n\n# A tibble: 3 Ã— 10\n  .y.   group1 group2    n1    n2 statistic    df         p   p.adj p.adj.signif\n* &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;  &lt;int&gt; &lt;int&gt;     &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;       \n1 score T1     T2        10    10     -3.77     9 0.004     1.3 e-2 *           \n2 score T1     T3        10    10     -7.29     9 0.0000462 1.39e-4 ***         \n3 score T2     T3        10    10     -7.64     9 0.000032  9.60e-5 ****        \n\n\n\n[!WARNING] é‡å¤æµ‹é‡ ANOVA éœ€è¦æ»¡è¶³çƒå½¢æ€§å‡è®¾ã€‚å¦‚æœ Mauchly çƒå½¢æ€§æ£€éªŒæ˜¾è‘— (p &lt; 0.05)ï¼Œåº”ä½¿ç”¨ Greenhouse-Geisser æˆ– Huynh-Feldt æ ¡æ­£ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "æ–¹å·®åˆ†æ (ANOVA)"
    ]
  },
  {
    "objectID": "1036-anova.html#å‡è®¾æ£€éªŒ",
    "href": "1036-anova.html#å‡è®¾æ£€éªŒ",
    "title": "æ–¹å·®åˆ†æ (ANOVA) å®Œå…¨æŒ‡å—",
    "section": "4. å‡è®¾æ£€éªŒ",
    "text": "4. å‡è®¾æ£€éªŒ\nANOVA æœ‰å‡ ä¸ªå…³é”®å‡è®¾éœ€è¦æ»¡è¶³ï¼šæ­£æ€æ€§å’Œæ–¹å·®é½æ€§ã€‚\n\n# æ£€æŸ¥æ­£æ€æ€§ (Shapiro-Wilk test)\nPlantGrowth %&gt;%\n    group_by(group) %&gt;%\n    shapiro_test(weight)\n\n# A tibble: 3 Ã— 4\n  group variable statistic     p\n  &lt;fct&gt; &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;\n1 ctrl  weight       0.957 0.747\n2 trt1  weight       0.930 0.452\n3 trt2  weight       0.941 0.564\n\n# æ£€æŸ¥æ–¹å·®é½æ€§ (Levene's test)\nPlantGrowth %&gt;% levene_test(weight ~ group)\n\n# A tibble: 1 Ã— 4\n    df1   df2 statistic     p\n  &lt;int&gt; &lt;int&gt;     &lt;dbl&gt; &lt;dbl&gt;\n1     2    27      1.12 0.341\n\n\n\nå‡è®¾è¿åæ—¶çš„æ›¿ä»£æ–¹æ¡ˆ\n\n\n\nå‡è®¾è¿å\næ›¿ä»£æ–¹æ¡ˆ\n\n\n\n\næ­£æ€æ€§\nKruskal-Wallis æ£€éªŒï¼ˆéå‚æ•°ï¼‰\n\n\næ–¹å·®é½æ€§\nWelchâ€™s ANOVA\n\n\nä¸¤è€…éƒ½è¿å\nç½®æ¢æ£€éªŒæˆ–ç§©å˜æ¢\n\n\n\nå¦‚æœå‡è®¾ä¸æ»¡è¶³ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨éå‚æ•°æ£€éªŒï¼ˆå¦‚ Kruskal-Wallis æ£€éªŒï¼‰ã€‚\n\nPlantGrowth %&gt;% kruskal_test(weight ~ group)\n\n# A tibble: 1 Ã— 6\n  .y.        n statistic    df      p method        \n* &lt;chr&gt;  &lt;int&gt;     &lt;dbl&gt; &lt;int&gt;  &lt;dbl&gt; &lt;chr&gt;         \n1 weight    30      7.99     2 0.0184 Kruskal-Wallis\n\n\næˆ–ä½¿ç”¨ Welchâ€™s ANOVAï¼ˆä¸å‡è®¾æ–¹å·®é½æ€§ï¼‰ï¼š\n\nPlantGrowth %&gt;% welch_anova_test(weight ~ group)\n\n# A tibble: 1 Ã— 7\n  .y.        n statistic   DFn   DFd     p method     \n* &lt;chr&gt;  &lt;int&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;      \n1 weight    30      5.18     2  17.1 0.017 Welch ANOVA",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "æ–¹å·®åˆ†æ (ANOVA)"
    ]
  },
  {
    "objectID": "1036-anova.html#ç»“æœæŠ¥å‘Šæ¨¡æ¿",
    "href": "1036-anova.html#ç»“æœæŠ¥å‘Šæ¨¡æ¿",
    "title": "æ–¹å·®åˆ†æ (ANOVA) å®Œå…¨æŒ‡å—",
    "section": "5. ç»“æœæŠ¥å‘Šæ¨¡æ¿",
    "text": "5. ç»“æœæŠ¥å‘Šæ¨¡æ¿\n\nAPA æ ¼å¼æŠ¥å‘Šç¤ºä¾‹\n\nå•å› ç´ æ–¹å·®åˆ†æç»“æœæ˜¾ç¤ºï¼Œå¤„ç†ç»„åˆ«å¯¹æ¤ç‰©é‡é‡æœ‰æ˜¾è‘—å½±å“ï¼ŒF(2, 27) = 4.85, p = .016, Î·Â² = .26ã€‚äº‹åæ¯”è¾ƒï¼ˆTukey HSDï¼‰è¡¨æ˜ï¼Œtrt2 ç»„çš„é‡é‡æ˜¾è‘—é«˜äº ctrl ç»„ï¼ˆp = .012ï¼‰ï¼Œè€Œ trt1 ç»„ä¸å…¶ä»–ç»„æ— æ˜¾è‘—å·®å¼‚ã€‚\n\n\n\nåˆ¶ä½œç»“æœè¡¨æ ¼\n\n# ç»„åˆä¸»åˆ†æå’Œäº‹åæ¯”è¾ƒç»“æœ\nknitr::kable(res.aov, caption = \"ANOVA Results\")\n\n\nANOVA Results\n\n\nEffect\nDFn\nDFd\nF\np\np&lt;.05\nges\n\n\n\n\ngroup\n2\n27\n4.846\n0.016\n*\n0.264\n\n\n\n\nknitr::kable(pwc, caption = \"Post-hoc Pairwise Comparisons\")\n\n\nPost-hoc Pairwise Comparisons\n\n\n\n\n\n\n\n\n\n\n\n\n\nterm\ngroup1\ngroup2\nnull.value\nestimate\nconf.low\nconf.high\np.adj\np.adj.signif\n\n\n\n\ngroup\nctrl\ntrt1\n0\n-0.371\n-1.0622161\n0.3202161\n0.391\nns\n\n\ngroup\nctrl\ntrt2\n0\n0.494\n-0.1972161\n1.1852161\n0.198\nns\n\n\ngroup\ntrt1\ntrt2\n0\n0.865\n0.1737839\n1.5562161\n0.012\n*\n\n\n\n\n\n\n\nå¯è§†åŒ–å¸¦æ˜¾è‘—æ€§æ ‡è®°\n\n# æ·»åŠ æ˜¾è‘—æ€§æ ‡è®°çš„ç®±çº¿å›¾\npwc &lt;- pwc %&gt;% add_xy_position(x = \"group\")\nggboxplot(PlantGrowth, x = \"group\", y = \"weight\", color = \"group\") +\n    stat_pvalue_manual(pwc, hide.ns = TRUE) +\n    labs(\n        subtitle = get_test_label(res.aov, detailed = TRUE),\n        caption = get_pwc_label(pwc)\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "æ–¹å·®åˆ†æ (ANOVA)"
    ]
  },
  {
    "objectID": "1036-anova.html#æ€»ç»“",
    "href": "1036-anova.html#æ€»ç»“",
    "title": "æ–¹å·®åˆ†æ (ANOVA) å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nrstatix åŒ…ä½¿å¾— ANOVA åˆ†ææµç¨‹éå¸¸æ ‡å‡†åŒ–ï¼š\n\n\n\næ­¥éª¤\nå‡½æ•°\n\n\n\n\nä¸»åˆ†æ\nanova_test()\n\n\näº‹åæ¯”è¾ƒ\ntukey_hsd(), pairwise_t_test()\n\n\nå‡è®¾æ£€éªŒ\nshapiro_test(), levene_test()\n\n\néå‚æ•°æ›¿ä»£\nkruskal_test(), welch_anova_test()\n\n\n\n\n[!IMPORTANT] å§‹ç»ˆæŠ¥å‘Šæ•ˆåº”é‡ï¼ˆÎ·Â²ï¼‰ï¼ç»Ÿè®¡æ˜¾è‘—æ€§åªè¯´æ˜å·®å¼‚æ˜¯å¦å­˜åœ¨ï¼Œæ•ˆåº”é‡è¯´æ˜å·®å¼‚æœ‰å¤šå¤§ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "æ–¹å·®åˆ†æ (ANOVA)"
    ]
  },
  {
    "objectID": "1036-anova.html#å‚è€ƒæ–‡çŒ®",
    "href": "1036-anova.html#å‚è€ƒæ–‡çŒ®",
    "title": "æ–¹å·®åˆ†æ (ANOVA) å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒæ–‡çŒ®",
    "text": "å‚è€ƒæ–‡çŒ®\n\nKassambara, A. (2023). rstatix: Pipe-Friendly Framework for Basic Statistical Tests. R package.\nCohen, J. (1988). Statistical Power Analysis for the Behavioral Sciences (2nd ed.).",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "æ–¹å·®åˆ†æ (ANOVA)"
    ]
  },
  {
    "objectID": "1034-nvmd.html",
    "href": "1034-nvmd.html",
    "title": "å˜åˆ†æ¨¡æ€åˆ†è§£ (VMD) ä¿¡å·å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "åœ¨ç”Ÿç‰©åŒ»å­¦ä¿¡å·ï¼ˆEEG, ECGï¼‰ã€é‡‘èæ—¶é—´åºåˆ—å’Œæœºæ¢°æŒ¯åŠ¨åˆ†æä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°éå¹³ç¨³å’Œéçº¿æ€§ä¿¡å·ã€‚ä¼ ç»Ÿçš„å‚…é‡Œå¶åˆ†æå‡è®¾ä¿¡å·æ˜¯å¹³ç¨³çš„ï¼Œæ— æ³•æœ‰æ•ˆå¤„ç†è¿™ç±»å¤æ‚ä¿¡å·ã€‚å˜åˆ†æ¨¡æ€åˆ†è§£ (Variational Mode Decomposition, VMD) æä¾›äº†ä¸€ç§å¼ºå¤§çš„è§£å†³æ–¹æ¡ˆã€‚\næœ¬æ•™ç¨‹å°†å…¨é¢ä»‹ç» VMD çš„ç†è®ºåŸºç¡€ã€R è¯­è¨€å®ç°ã€å‚æ•°è°ƒä¼˜ç­–ç•¥ä»¥åŠå®é™…åº”ç”¨æ¡ˆä¾‹ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å˜åˆ†æ¨¡æ€åˆ†è§£ (VMD)"
    ]
  },
  {
    "objectID": "1034-nvmd.html#å‰è¨€",
    "href": "1034-nvmd.html#å‰è¨€",
    "title": "å˜åˆ†æ¨¡æ€åˆ†è§£ (VMD) ä¿¡å·å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "åœ¨ç”Ÿç‰©åŒ»å­¦ä¿¡å·ï¼ˆEEG, ECGï¼‰ã€é‡‘èæ—¶é—´åºåˆ—å’Œæœºæ¢°æŒ¯åŠ¨åˆ†æä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°éå¹³ç¨³å’Œéçº¿æ€§ä¿¡å·ã€‚ä¼ ç»Ÿçš„å‚…é‡Œå¶åˆ†æå‡è®¾ä¿¡å·æ˜¯å¹³ç¨³çš„ï¼Œæ— æ³•æœ‰æ•ˆå¤„ç†è¿™ç±»å¤æ‚ä¿¡å·ã€‚å˜åˆ†æ¨¡æ€åˆ†è§£ (Variational Mode Decomposition, VMD) æä¾›äº†ä¸€ç§å¼ºå¤§çš„è§£å†³æ–¹æ¡ˆã€‚\næœ¬æ•™ç¨‹å°†å…¨é¢ä»‹ç» VMD çš„ç†è®ºåŸºç¡€ã€R è¯­è¨€å®ç°ã€å‚æ•°è°ƒä¼˜ç­–ç•¥ä»¥åŠå®é™…åº”ç”¨æ¡ˆä¾‹ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å˜åˆ†æ¨¡æ€åˆ†è§£ (VMD)"
    ]
  },
  {
    "objectID": "1034-nvmd.html#vmd-çš„æ•°å­¦åŸç†",
    "href": "1034-nvmd.html#vmd-çš„æ•°å­¦åŸç†",
    "title": "å˜åˆ†æ¨¡æ€åˆ†è§£ (VMD) ä¿¡å·å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "VMD çš„æ•°å­¦åŸç†",
    "text": "VMD çš„æ•°å­¦åŸç†\n\nä»€ä¹ˆæ˜¯æ¨¡æ€åˆ†è§£ï¼Ÿ\næ¨¡æ€åˆ†è§£çš„ç›®æ ‡æ˜¯å°†ä¸€ä¸ªå¤æ‚ä¿¡å· \\(f(t)\\) åˆ†è§£ä¸ºè‹¥å¹²ä¸ªæœ¬å¾æ¨¡æ€å‡½æ•° (Intrinsic Mode Functions, IMF)ï¼š\n\\[f(t) = \\sum_{k=1}^{K} u_k(t) + r(t)\\]\nå…¶ä¸­ \\(u_k(t)\\) æ˜¯ç¬¬ \\(k\\) ä¸ªæ¨¡æ€åˆ†é‡ï¼Œ\\(r(t)\\) æ˜¯æ®‹å·®ã€‚\næ¯ä¸ª IMF åº”è¯¥æ˜¯ä¸€ä¸ªè°ƒå¹…-è°ƒé¢‘ (AM-FM) ä¿¡å·ï¼š \\[u_k(t) = A_k(t) \\cos(\\phi_k(t))\\]\nå…¶ä¸­ \\(A_k(t)\\) æ˜¯ç¬æ—¶å¹…åº¦ï¼Œ\\(\\phi_k(t)\\) æ˜¯ç¬æ—¶ç›¸ä½ã€‚\n\n\nVMD çš„å˜åˆ†é—®é¢˜\nVMD å°†ä¿¡å·åˆ†è§£æ„é€ ä¸ºä¸€ä¸ªçº¦æŸå˜åˆ†ä¼˜åŒ–é—®é¢˜ï¼š\nç›®æ ‡ï¼šæ‰¾åˆ° K ä¸ªæ¨¡æ€ \\(\\{u_k\\}\\)ï¼Œä½¿å¾—æ¯ä¸ªæ¨¡æ€çš„å¸¦å®½æœ€å°åŒ–ã€‚\næœ€å°åŒ–ï¼šÎ£ ||âˆ‚_t[(Î´(t) + j/Ï€t) * u_k(t)] e^{-jÏ‰_k t}||Â²\n\nçº¦æŸæ¡ä»¶ï¼šÎ£ u_k = f\nå…¶ä¸­ï¼š - \\(\\omega_k\\) æ˜¯ç¬¬ \\(k\\) ä¸ªæ¨¡æ€çš„ä¸­å¿ƒé¢‘ç‡ - \\((Î´(t) + j/Ï€t) * u_k(t)\\) æ˜¯ \\(u_k\\) çš„è§£æä¿¡å·ï¼ˆé€šè¿‡å¸Œå°”ä¼¯ç‰¹å˜æ¢è·å¾—ï¼‰ - \\(e^{-j\\omega_k t}\\) å°†ä¿¡å·é¢‘è°±ç§»è‡³åŸºå¸¦\n\n\nADMM æ±‚è§£ç®—æ³•\nVMD ä½¿ç”¨äº¤æ›¿æ–¹å‘ä¹˜å­æ³• (ADMM) è¿­ä»£æ±‚è§£ï¼š\n\n\n\næ­¥éª¤\næ›´æ–°å˜é‡\nè¯´æ˜\n\n\n\n\n1\n\\(\\hat{u}_k^{n+1}\\)\næ›´æ–°æ¨¡æ€é¢‘è°±\n\n\n2\n\\(\\omega_k^{n+1}\\)\næ›´æ–°ä¸­å¿ƒé¢‘ç‡\n\n\n3\n\\(\\hat{\\lambda}^{n+1}\\)\næ›´æ–°æ‹‰æ ¼æœ—æ—¥ä¹˜å­\n\n\n\nè¿­ä»£ç›´åˆ°æ»¡è¶³æ”¶æ•›æ¡ä»¶ï¼š \\[\\sum_k \\|\\hat{u}_k^{n+1} - \\hat{u}_k^n\\|_2^2 / \\|\\hat{u}_k^n\\|_2^2 &lt; \\epsilon\\]\n\n\nVMD vs EMD è¯¦ç»†å¯¹æ¯”\n\n\n\nç‰¹æ€§\nVMD\nEMD\n\n\n\n\nç†è®ºåŸºç¡€\nå˜åˆ†ä¼˜åŒ–ç†è®ºï¼Œæ•°å­¦ä¸¥æ ¼\nç»éªŒç®—æ³•ï¼Œæ— ä¸¥æ ¼æ•°å­¦åŸºç¡€\n\n\nåˆ†è§£æ–¹å¼\néé€’å½’ï¼ŒåŒæ—¶åˆ†è§£æ‰€æœ‰æ¨¡æ€\né€’å½’ç­›é€‰ï¼Œé€ä¸€æå–\n\n\næ¨¡æ€æ··å \né€šè¿‡å¸¦å®½çº¦æŸæœ‰æ•ˆé¿å…\nå®¹æ˜“å‘ç”Ÿï¼Œå°¤å…¶ç›¸è¿‘é¢‘ç‡\n\n\nå™ªå£°æ•æ„Ÿæ€§\nä½ï¼Œå†…ç½®å»å™ªæœºåˆ¶\né«˜ï¼Œå™ªå£°ç›´æ¥å½±å“ç­›é€‰\n\n\nç«¯ç‚¹æ•ˆåº”\nè¾ƒå°ï¼ˆé¢‘åŸŸå¤„ç†ï¼‰\næ˜æ˜¾ï¼ˆæ—¶åŸŸå¤„ç†ï¼‰\n\n\næ¨¡æ€æ•° K\néœ€é¢„å…ˆè®¾å®š\nè‡ªé€‚åº”ç¡®å®š\n\n\nè®¡ç®—é€Ÿåº¦\nè¾ƒæ…¢ï¼ˆè¿­ä»£ä¼˜åŒ–ï¼‰\nè¾ƒå¿«ï¼ˆç­›é€‰è¿‡ç¨‹ï¼‰\n\n\nå‚æ•°æ•æ„Ÿåº¦\nä¸­ç­‰ï¼ˆalpha, Kï¼‰\nä½ï¼ˆè‡ªåŠ¨ï¼‰\n\n\n\n\n[!NOTE] VMD çš„ä¸»è¦ä¼˜åŠ¿åœ¨äºå…¶â€å¸¦å®½é™åˆ¶â€çš„å˜åˆ†æ¡†æ¶ï¼Œèƒ½å¤Ÿå°†é¢‘ç‡ç›¸è¿‘çš„æˆåˆ†æœ‰æ•ˆåˆ†ç¦»ï¼Œè¿™åœ¨ EMD ä¸­å‡ ä¹ä¸å¯èƒ½å®ç°ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å˜åˆ†æ¨¡æ€åˆ†è§£ (VMD)"
    ]
  },
  {
    "objectID": "1034-nvmd.html#r-è¯­è¨€å·¥å…·vmdecomp-åŒ…",
    "href": "1034-nvmd.html#r-è¯­è¨€å·¥å…·vmdecomp-åŒ…",
    "title": "å˜åˆ†æ¨¡æ€åˆ†è§£ (VMD) ä¿¡å·å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "R è¯­è¨€å·¥å…·ï¼šVMDecomp åŒ…",
    "text": "R è¯­è¨€å·¥å…·ï¼šVMDecomp åŒ…\n\nå®‰è£…\n\n# VMDecomp åŒ…ä¸åœ¨ CRANï¼Œéœ€ä» GitHub å®‰è£…\ninstall.packages(\"devtools\")\ndevtools::install_github(\"lampros-mouselimis/VMDecomp\")\n\n\n\nå‡½æ•°æ¥å£\n\nlibrary(VMDecomp)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(tidyr)\n\nvmd() å‡½æ•°çš„å®Œæ•´å‚æ•°ï¼š\nvmd(\n  signal,        # è¾“å…¥ä¿¡å·ï¼ˆä¸€ç»´æ•°å€¼å‘é‡ï¼‰\n  alpha,         # å¸¦å®½çº¦æŸå› å­ï¼ˆæƒ©ç½šå‚æ•°ï¼‰\n  tau,           # å™ªå£°å®¹é™ï¼ˆ0 = æ— ä¸¥æ ¼çº¦æŸï¼‰\n  K,             # æ¨¡æ€æ•°é‡\n  DC,            # æ˜¯å¦åŒ…å«ç›´æµåˆ†é‡ï¼ˆTRUE/FALSEï¼‰\n  init,          # ä¸­å¿ƒé¢‘ç‡åˆå§‹åŒ–æ–¹å¼ï¼ˆ1=å‡åŒ€, 2=éšæœºï¼‰\n  tol            # æ”¶æ•›å®¹å·®\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å˜åˆ†æ¨¡æ€åˆ†è§£ (VMD)"
    ]
  },
  {
    "objectID": "1034-nvmd.html#ä»¿çœŸä¿¡å·åˆ†è§£å®éªŒ",
    "href": "1034-nvmd.html#ä»¿çœŸä¿¡å·åˆ†è§£å®éªŒ",
    "title": "å˜åˆ†æ¨¡æ€åˆ†è§£ (VMD) ä¿¡å·å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ä»¿çœŸä¿¡å·åˆ†è§£å®éªŒ",
    "text": "ä»¿çœŸä¿¡å·åˆ†è§£å®éªŒ\n\næ„é€ å·²çŸ¥æˆåˆ†çš„æµ‹è¯•ä¿¡å·\nä¸ºäº†éªŒè¯ VMD çš„åˆ†è§£æ•ˆæœï¼Œæˆ‘ä»¬æ„é€ ä¸€ä¸ªåŒ…å«ä¸‰ä¸ªå·²çŸ¥é¢‘ç‡æˆåˆ†çš„åˆæˆä¿¡å·ï¼š\n\\[S(t) = 2\\sin(2\\pi \\cdot 10 \\cdot t) + 1.5\\sin(2\\pi \\cdot 50 \\cdot t) + \\sin(2\\pi \\cdot 100 \\cdot t) + \\epsilon\\]\n\n# é‡‡æ ·å‚æ•°\nfs &lt;- 1000 # é‡‡æ ·é¢‘ç‡ (Hz)\nduration &lt;- 1 # ä¿¡å·æ—¶é•¿ (s)\nt &lt;- seq(0, duration, length.out = fs * duration)\n\n# çœŸå®ä¿¡å·æˆåˆ†\nf1 &lt;- 10 # ä½é¢‘\nf2 &lt;- 50 # ä¸­é¢‘\nf3 &lt;- 100 # é«˜é¢‘\n\n# åŸå§‹æˆåˆ†ï¼ˆç”¨äºåç»­å¯¹æ¯”ï¼‰\ncomp1_true &lt;- 2 * sin(2 * pi * f1 * t)\ncomp2_true &lt;- 1.5 * sin(2 * pi * f2 * t)\ncomp3_true &lt;- 1 * sin(2 * pi * f3 * t)\n\n# åˆæˆä¿¡å· (åŠ é«˜æ–¯ç™½å™ªå£°)\nset.seed(123)\nnoise &lt;- rnorm(length(t), 0, 0.5)\nsig &lt;- comp1_true + comp2_true + comp3_true + noise\n\n# ç»˜åˆ¶åŸå§‹ä¿¡å·\nplot(t, sig,\n    type = \"l\", col = \"darkgrey\",\n    main = \"åˆæˆæµ‹è¯•ä¿¡å· (10Hz + 50Hz + 100Hz + Noise)\",\n    xlab = \"Time (s)\", ylab = \"Amplitude\"\n)\n\n\n\n\n\n\n\n\n\n\nFFT é¢‘è°±åˆ†æç¡®å®š K å€¼\nåœ¨ä½¿ç”¨ VMD ä¹‹å‰ï¼Œé€šå¸¸å…ˆç”¨ FFT åˆ†æä¿¡å·çš„é¢‘ç‡æˆåˆ†ï¼š\n\n# è®¡ç®— FFT\nsig_fft &lt;- fft(sig)\nP &lt;- abs(sig_fft / length(sig))\nP1 &lt;- P[1:(length(sig) / 2 + 1)]\nP1[2:length(P1)] &lt;- 2 * P1[2:length(P1)]\nf &lt;- fs * (0:(length(sig) / 2)) / length(sig)\n\n# ç»˜åˆ¶å•è¾¹é¢‘è°±\nplot(f, P1,\n    type = \"l\", xlim = c(0, 150),\n    main = \"FFT é¢‘è°±åˆ†æ - ç¡®å®š K å€¼\",\n    xlab = \"Frequency (Hz)\", ylab = \"Amplitude\"\n)\nabline(v = c(10, 50, 100), col = \"red\", lty = 2)\ntext(c(10, 50, 100), max(P1) * 0.9, c(\"10Hz\", \"50Hz\", \"100Hz\"), pos = 4, col = \"red\")\n\n\n\n\n\n\n\n\nä»é¢‘è°±å›¾å¯ä»¥æ¸…æ™°çœ‹åˆ° 3 ä¸ªå³°å€¼ï¼Œå› æ­¤è®¾ç½® K = 3ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å˜åˆ†æ¨¡æ€åˆ†è§£ (VMD)"
    ]
  },
  {
    "objectID": "1034-nvmd.html#vmd-å‚æ•°è¯¦è§£ä¸è°ƒä¼˜",
    "href": "1034-nvmd.html#vmd-å‚æ•°è¯¦è§£ä¸è°ƒä¼˜",
    "title": "å˜åˆ†æ¨¡æ€åˆ†è§£ (VMD) ä¿¡å·å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "VMD å‚æ•°è¯¦è§£ä¸è°ƒä¼˜",
    "text": "VMD å‚æ•°è¯¦è§£ä¸è°ƒä¼˜\n\nå…³é”®å‚æ•°è¯´æ˜\n\n\n\nå‚æ•°\nç¬¦å·\nä½œç”¨\næ¨èå€¼\n\n\n\n\nK\næ¨¡æ€æ•°\nåˆ†è§£å‡ºçš„ IMF æ•°é‡\nFFT å³°å€¼æ•° + 0~1\n\n\nalpha\nÎ±\nå¸¦å®½çº¦æŸå¼ºåº¦\n1000-5000\n\n\ntau\nÏ„\nå™ªå£°å®¹é™\n0 æˆ– 0.01\n\n\nDC\n-\nåŒ…å«ç›´æµåˆ†é‡\né€šå¸¸ FALSE\n\n\ninit\n-\nåˆå§‹åŒ–æ–¹å¼\n1 (å‡åŒ€åˆ†å¸ƒ)\n\n\ntol\nÎµ\næ”¶æ•›é˜ˆå€¼\n1e-6 æˆ– 1e-7\n\n\n\n\n\nalpha å‚æ•°çš„å½±å“å®éªŒ\nalpha æ§åˆ¶æ¨¡æ€çš„å¸¦å®½ï¼š - alpha å° â†’ å¸¦å®½å®½ â†’ æ¨¡æ€å¯èƒ½é‡å /æ··åˆ - alpha å¤§ â†’ å¸¦å®½çª„ â†’ åˆ†ç¦»æ›´æ¸…æ™°ï¼Œä½†å¯èƒ½ä¸¢å¤±è¾¹ç¼˜ä¿¡æ¯\n\n# å¯¹æ¯”ä¸åŒ alpha å€¼\nalphas &lt;- c(500, 2000, 5000)\npar(mfrow = c(length(alphas), 1), mar = c(3, 4, 2, 1))\n\nfor (a in alphas) {\n    vmd_res &lt;- VMDecomp::vmd(sig, alpha = a, tau = 0, K = 3, DC = FALSE, init = 1, tol = 1e-6)\n\n    # ç»˜åˆ¶ç¬¬ä¸€ä¸ªæ¨¡æ€ï¼ˆåº”å¯¹åº”10Hzï¼‰\n    plot(t, vmd_res$u[, 1],\n        type = \"l\", col = \"blue\",\n        main = paste0(\"IMF 1 (alpha = \", a, \")\"),\n        xlab = \"\", ylab = \"Amplitude\"\n    )\n    # å åŠ çœŸå®10Hzæˆåˆ†ç”¨äºå¯¹æ¯”\n    lines(t, comp1_true, col = \"red\", lty = 2)\n}\n\n\n\n\n\n\n\n\n\n\nK å€¼é€‰æ‹©ç­–ç•¥\n\n[!TIP] K å€¼é€‰æ‹©çš„ 3 ç§æ–¹æ³•ï¼š\n\nFFT å³°å€¼æ³•ï¼šè§‚å¯Ÿé¢‘è°±ä¸­æ˜æ˜¾çš„å³°å€¼æ•°é‡\nèƒ½é‡æ³•ï¼šé€æ¸å¢åŠ  Kï¼Œå½“æ®‹å·®èƒ½é‡å˜åŒ–å°äºé˜ˆå€¼æ—¶åœæ­¢\nä¸­å¿ƒé¢‘ç‡æ³•ï¼šæ£€æŸ¥ç›¸é‚»æ¨¡æ€çš„ä¸­å¿ƒé¢‘ç‡å·®å¼‚ï¼Œè¿‡å°è¯´æ˜ K è¿‡å¤§\n\n\n\n# K å€¼æ•æ„Ÿæ€§åˆ†æ\npar(mfrow = c(2, 2), mar = c(3, 4, 2, 1))\n\nfor (K_test in c(2, 3, 4, 5)) {\n    vmd_res &lt;- VMDecomp::vmd(sig, alpha = 2000, tau = 0, K = K_test, DC = FALSE, init = 1, tol = 1e-6)\n\n    # è®¡ç®—é‡æ„è¯¯å·®\n    reconstructed &lt;- rowSums(vmd_res$u)\n    error &lt;- mean((sig - reconstructed)^2)\n\n    # ç»˜åˆ¶é‡æ„ä¿¡å·\n    plot(t[1:200], sig[1:200],\n        type = \"l\", col = \"gray\",\n        main = paste0(\"K = \", K_test, \", MSE = \", round(error, 4)),\n        xlab = \"Time\", ylab = \"Amplitude\"\n    )\n    lines(t[1:200], reconstructed[1:200], col = \"blue\")\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å˜åˆ†æ¨¡æ€åˆ†è§£ (VMD)"
    ]
  },
  {
    "objectID": "1034-nvmd.html#å®Œæ•´åˆ†è§£ä¸éªŒè¯",
    "href": "1034-nvmd.html#å®Œæ•´åˆ†è§£ä¸éªŒè¯",
    "title": "å˜åˆ†æ¨¡æ€åˆ†è§£ (VMD) ä¿¡å·å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å®Œæ•´åˆ†è§£ä¸éªŒè¯",
    "text": "å®Œæ•´åˆ†è§£ä¸éªŒè¯\n\næ‰§è¡Œæ ‡å‡† VMD åˆ†è§£\n\n# æœ€ä¼˜å‚æ•°è®¾ç½®\nalpha &lt;- 2000 # é€‚ä¸­çš„å¸¦å®½é™åˆ¶\ntau &lt;- 0 # æ— å™ªå£°å®¹é™\nK &lt;- 3 # 3 ä¸ªä¸»è¦æˆåˆ†\nDC &lt;- FALSE # æ— ç›´æµåç§»\ninit &lt;- 1 # å‡åŒ€åˆå§‹åŒ–\ntol &lt;- 1e-6 # æ”¶æ•›å®¹å·®\n\n# æ‰§è¡Œåˆ†è§£\nvmd_res &lt;- VMDecomp::vmd(sig, alpha, tau, K, DC, init, tol)\n\n# æå–æ¨¡æ€åˆ†é‡çŸ©é˜µ\nimfs &lt;- vmd_res$u\n\n# æŸ¥çœ‹ä¸­å¿ƒé¢‘ç‡ï¼ˆå¦‚æœè¿”å›ï¼‰\nif (!is.null(vmd_res$omega)) {\n    cat(\"æ¨¡æ€ä¸­å¿ƒé¢‘ç‡ (å½’ä¸€åŒ–): \", round(vmd_res$omega[nrow(vmd_res$omega), ], 4), \"\\n\")\n    cat(\"å¯¹åº”å®é™…é¢‘ç‡ (Hz): \", round(vmd_res$omega[nrow(vmd_res$omega), ] * fs / 2, 1), \"\\n\")\n}\n\næ¨¡æ€ä¸­å¿ƒé¢‘ç‡ (å½’ä¸€åŒ–):  0.0107 0.0982 0.2829 \nå¯¹åº”å®é™…é¢‘ç‡ (Hz):  5.3 49.1 141.4 \n\n\n\n\nåˆ†è§£ç»“æœå¯è§†åŒ–\n\npar(mfrow = c(5, 1), mar = c(2, 4, 2, 1))\n\n# åŸå§‹ä¿¡å·\nplot(t, sig, type = \"l\", main = \"åŸå§‹å«å™ªä¿¡å·\", col = \"gray\", ylab = \"Amplitude\")\n\n# åˆ†è§£å‡ºçš„å„ IMF\ncolors &lt;- c(\"blue\", \"green\", \"red\")\ntitles &lt;- c(\"IMF 1 (ä½é¢‘ ~10Hz)\", \"IMF 2 (ä¸­é¢‘ ~50Hz)\", \"IMF 3 (é«˜é¢‘ ~100Hz)\")\n\nfor (i in 1:3) {\n    plot(t, imfs[, i],\n        type = \"l\", col = colors[i], lwd = 1.5,\n        main = titles[i], ylab = \"Amplitude\"\n    )\n}\n\n# é‡æ„ä¿¡å·\nplot(t, rowSums(imfs), type = \"l\", main = \"é‡æ„ä¿¡å·\", col = \"purple\", ylab = \"Amplitude\")\n\n\n\n\n\n\n\n\n\n\né¢‘è°±éªŒè¯\n\npar(mfrow = c(3, 1), mar = c(4, 4, 2, 1))\n\nfor (i in 1:3) {\n    imf_fft &lt;- fft(imfs[, i])\n    P &lt;- abs(imf_fft / length(imfs[, i]))\n    P1 &lt;- P[1:(length(imfs[, i]) / 2 + 1)]\n    f &lt;- fs * (0:(length(imfs[, i]) / 2)) / length(imfs[, i])\n\n    plot(f, P1,\n        type = \"l\", xlim = c(0, 150),\n        main = paste(\"IMF\", i, \"é¢‘è°±\"),\n        xlab = \"Frequency (Hz)\", ylab = \"Amplitude\",\n        col = colors[i], lwd = 2\n    )\n\n    # æ ‡æ³¨å³°å€¼é¢‘ç‡\n    peak_idx &lt;- which.max(P1[f &lt; 150 & f &gt; 5])\n    peak_freq &lt;- f[f &lt; 150 & f &gt; 5][peak_idx]\n    abline(v = peak_freq, col = \"red\", lty = 2)\n    text(peak_freq + 5, max(P1) * 0.8, paste0(round(peak_freq, 1), \" Hz\"), col = \"red\")\n}\n\n\n\n\n\n\n\n\n\n\nä¸çœŸå®æˆåˆ†å¯¹æ¯”\n\n# è®¡ç®—ç›¸å…³ç³»æ•°\ncor1 &lt;- cor(imfs[, 1], comp1_true)\ncor2 &lt;- cor(imfs[, 2], comp2_true)\ncor3 &lt;- cor(imfs[, 3], comp3_true)\n\npar(mfrow = c(3, 1), mar = c(3, 4, 2, 1))\n\nplot(t[1:200], imfs[1:200, 1],\n    type = \"l\", col = \"blue\",\n    main = paste0(\"IMF 1 vs çœŸå® 10Hz (r = \", round(cor1, 4), \")\"), ylab = \"Amplitude\"\n)\nlines(t[1:200], comp1_true[1:200], col = \"red\", lty = 2)\nlegend(\"topright\", c(\"VMDæå–\", \"çœŸå®æˆåˆ†\"), col = c(\"blue\", \"red\"), lty = c(1, 2), cex = 0.8)\n\nplot(t[1:200], imfs[1:200, 2],\n    type = \"l\", col = \"green\",\n    main = paste0(\"IMF 2 vs çœŸå® 50Hz (r = \", round(cor2, 4), \")\"), ylab = \"Amplitude\"\n)\nlines(t[1:200], comp2_true[1:200], col = \"red\", lty = 2)\n\nplot(t[1:200], imfs[1:200, 3],\n    type = \"l\", col = \"red\",\n    main = paste0(\"IMF 3 vs çœŸå® 100Hz (r = \", round(cor3, 4), \")\"), ylab = \"Amplitude\"\n)\nlines(t[1:200], comp3_true[1:200], col = \"darkred\", lty = 2)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å˜åˆ†æ¨¡æ€åˆ†è§£ (VMD)"
    ]
  },
  {
    "objectID": "1034-nvmd.html#é«˜çº§åº”ç”¨vmd-å»å™ª",
    "href": "1034-nvmd.html#é«˜çº§åº”ç”¨vmd-å»å™ª",
    "title": "å˜åˆ†æ¨¡æ€åˆ†è§£ (VMD) ä¿¡å·å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "é«˜çº§åº”ç”¨ï¼šVMD å»å™ª",
    "text": "é«˜çº§åº”ç”¨ï¼šVMD å»å™ª\nVMD çš„ä¸€ä¸ªé‡è¦åº”ç”¨æ˜¯ä¿¡å·å»å™ªï¼šé€šè¿‡åˆ†è§£åé€‰æ‹©æ€§é‡æ„å®ç°ã€‚\n\nå»å™ªåŸç†\n\nç”¨ VMD åˆ†è§£å«å™ªä¿¡å·\nè¯†åˆ«å“ªäº› IMF ä¸»è¦åŒ…å«å™ªå£°ï¼ˆé€šå¸¸æ˜¯é«˜é¢‘æ¨¡æ€ï¼‰\nä»…ç”¨â€å¹²å‡€â€çš„ IMF é‡æ„ä¿¡å·\n\n\n# ç”Ÿæˆå¼ºå™ªå£°ä¿¡å·\nset.seed(42)\nsig_noisy &lt;- comp1_true + comp2_true + rnorm(length(t), 0, 1.5)\n\n# VMD åˆ†è§£ (ä½¿ç”¨æ›´å¤§çš„ K æ¥åˆ†ç¦»å™ªå£°)\nvmd_denoise &lt;- VMDecomp::vmd(sig_noisy, alpha = 3000, tau = 0, K = 4, DC = FALSE, init = 1, tol = 1e-6)\n\n# è®¡ç®—æ¯ä¸ª IMF çš„èƒ½é‡\nimf_energy &lt;- apply(vmd_denoise$u, 2, function(x) sum(x^2))\ncat(\"å„ IMF èƒ½é‡å æ¯”:\\n\")\n\nå„ IMF èƒ½é‡å æ¯”:\n\nprint(round(imf_energy / sum(imf_energy) * 100, 1))\n\n[1] 54.9 35.4  5.3  4.4\n\n\n\npar(mfrow = c(3, 1), mar = c(3, 4, 2, 1))\n\n# åŸå§‹å«å™ªä¿¡å·\nplot(t, sig_noisy,\n    type = \"l\", col = \"gray\",\n    main = \"å¼ºå™ªå£°ä¿¡å·\", ylab = \"Amplitude\"\n)\n\n# ä½¿ç”¨å‰2ä¸ª IMF é‡æ„ï¼ˆå»é™¤é«˜é¢‘å™ªå£°æ¨¡æ€ï¼‰\nsig_denoised &lt;- rowSums(vmd_denoise$u[, 1:2])\nplot(t, sig_denoised,\n    type = \"l\", col = \"blue\",\n    main = \"VMD å»å™ªå (ä½¿ç”¨ IMF 1-2)\", ylab = \"Amplitude\"\n)\n\n# çœŸå®ä¿¡å·å¯¹æ¯”\nsig_true &lt;- comp1_true + comp2_true\nplot(t, sig_true,\n    type = \"l\", col = \"green\",\n    main = \"çœŸå®å¹²å‡€ä¿¡å·\", ylab = \"Amplitude\"\n)\n\n\n\n\n\n\n\n# è®¡ç®—å»å™ªæ•ˆæœ\nsnr_before &lt;- 10 * log10(sum(sig_true^2) / sum((sig_noisy - sig_true)^2))\nsnr_after &lt;- 10 * log10(sum(sig_true^2) / sum((sig_denoised - sig_true)^2))\ncat(\"å»å™ªå‰ SNR:\", round(snr_before, 2), \"dB\\n\")\n\nå»å™ªå‰ SNR: 1.4 dB\n\ncat(\"å»å™ªå SNR:\", round(snr_after, 2), \"dB\\n\")\n\nå»å™ªå SNR: 11.22 dB",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å˜åˆ†æ¨¡æ€åˆ†è§£ (VMD)"
    ]
  },
  {
    "objectID": "1034-nvmd.html#å®é™…åº”ç”¨åœºæ™¯",
    "href": "1034-nvmd.html#å®é™…åº”ç”¨åœºæ™¯",
    "title": "å˜åˆ†æ¨¡æ€åˆ†è§£ (VMD) ä¿¡å·å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å®é™…åº”ç”¨åœºæ™¯",
    "text": "å®é™…åº”ç”¨åœºæ™¯\n\nç”Ÿç‰©åŒ»å­¦ä¿¡å·å¤„ç†\n\n\n\n\n\n\n\n\n\nåº”ç”¨é¢†åŸŸ\nä¿¡å·ç±»å‹\nVMD ä½œç”¨\nå®é™…ç”¨é€”\n\n\n\n\nå¿ƒç”µå›¾ (ECG)\nå¿ƒç”µèŠ‚å¾‹\nåˆ†ç¦» QRS æ³¢ç¾¤å’ŒåŸºçº¿æ¼‚ç§»\nå¿ƒå¾‹å¤±å¸¸æ£€æµ‹\n\n\nè„‘ç”µå›¾ (EEG)\nè„‘æ³¢èŠ‚å¾‹\næå– Î±, Î², Î¸, Î´ æ³¢æ®µ\nç¡çœ åˆ†æœŸã€ç™«ç—«æ£€æµ‹\n\n\nè‚Œç”µå›¾ (EMG)\nè‚Œè‚‰æ´»åŠ¨\nå»é™¤è¿åŠ¨ä¼ªè¿¹å’Œç”µæºå¹²æ‰°\nè‚Œç–²åŠ³åˆ†æ\n\n\nå‘¼å¸ä¿¡å·\nå‘¼å¸æ¨¡å¼\nåˆ†ç¦»å‘¼å¸æˆåˆ†å’Œå¿ƒè·³å¹²æ‰°\nç¡çœ å‘¼å¸æš‚åœè¯Šæ–­\n\n\n\n\n\né‡‘èæ—¶é—´åºåˆ—åˆ†æ\n\n# é‡‘èæ•°æ®åˆ†è§£ç¤ºä¾‹ï¼ˆæ¦‚å¿µä»£ç ï¼‰\n# å°†è‚¡ä»·åˆ†è§£ä¸ºï¼šé•¿æœŸè¶‹åŠ¿ + å‘¨æœŸæ³¢åŠ¨ + çŸ­æœŸå™ªå£°\n\nstock_price &lt;- get_stock_data(\"AAPL\")\nvmd_stock &lt;- vmd(stock_price, alpha = 2000, K = 3)\n\ntrend &lt;- vmd_stock$u[, 1] # é•¿æœŸè¶‹åŠ¿\ncycle &lt;- vmd_stock$u[, 2] # ä¸­æœŸå‘¨æœŸ\nnoise &lt;- vmd_stock$u[, 3] # çŸ­æœŸæ³¢åŠ¨/å™ªå£°\n\n\n\næœºæ¢°æ•…éšœè¯Šæ–­\n\nè½´æ‰¿æŒ¯åŠ¨ä¿¡å·ï¼šæå–æ•…éšœç‰¹å¾é¢‘ç‡\né½¿è½®ç®±ä¿¡å·ï¼šåˆ†ç¦»å•®åˆé¢‘ç‡æˆåˆ†\næ—‹è½¬æœºæ¢°ï¼šè¯†åˆ«ä¸å¹³è¡¡ã€ä¸å¯¹ä¸­ç­‰æ•…éšœæ¨¡å¼",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å˜åˆ†æ¨¡æ€åˆ†è§£ (VMD)"
    ]
  },
  {
    "objectID": "1034-nvmd.html#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ",
    "href": "1034-nvmd.html#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ",
    "title": "å˜åˆ†æ¨¡æ€åˆ†è§£ (VMD) ä¿¡å·å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ",
    "text": "å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ\n\né—®é¢˜è¯Šæ–­è¡¨\n\n\n\né—®é¢˜\nå¯èƒ½åŸå› \nè§£å†³æ–¹æ¡ˆ\n\n\n\n\næ¨¡æ€æ··å \nK å€¼è¿‡å°\nå¢åŠ  K å€¼\n\n\nè¿‡åˆ†è§£ï¼ˆæ¨¡æ€å¤ªç¢ï¼‰\nK å€¼è¿‡å¤§\nå‡å°‘ K å€¼\n\n\nç›¸é‚»æ¨¡æ€é¢‘ç‡å¤ªè¿‘\nalpha è¿‡å°\nå¢åŠ  alpha\n\n\nè¾¹ç¼˜æ•ˆåº”\nä¿¡å·æˆªæ–­ä¸å½“\nä½¿ç”¨é•œåƒå»¶æ‹“é¢„å¤„ç†\n\n\næ”¶æ•›æ…¢/ä¸æ”¶æ•›\nå‚æ•°ä¸å½“\nè°ƒæ•´ alpha æˆ– tol\n\n\né«˜é¢‘æ¨¡æ€ä¸¢å¤±\nalpha è¿‡å¤§\nå‡å° alpha\n\n\n\n\n\nå‚æ•°é€‰æ‹©æµç¨‹å›¾\nå¼€å§‹\n  â”‚\n  â†“\n[FFT åˆ†æ]â”€â”€â†’ ç¡®å®š K å€¼\n  â”‚\n  â†“\n[è®¾ç½® alpha=2000]\n  â”‚\n  â†“\n[è¿è¡Œ VMD]\n  â”‚\n  â†“\næ£€æŸ¥æ¨¡æ€é¢‘è°±\n  â”‚\n  â”œâ”€â”€â†’ æ··å ? â”€â”€â†’ å¢åŠ  K æˆ– alpha\n  â”‚\n  â”œâ”€â”€â†’ è¿‡åˆ†è§£? â”€â”€â†’ å‡å°‘ K\n  â”‚\n  â””â”€â”€â†’ æ»¡æ„ â”€â”€â†’ å®Œæˆ\n\n[!WARNING] VMD å¯¹å‚æ•°è¾ƒä¸ºæ•æ„Ÿï¼å»ºè®®å…ˆç”¨ä»¿çœŸä¿¡å·ï¼ˆå·²çŸ¥æˆåˆ†ï¼‰æµ‹è¯•å‚æ•°è®¾ç½®ï¼Œç¡®å®šæœ€ä½³å‚æ•°åå†åº”ç”¨äºçœŸå®æ•°æ®ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å˜åˆ†æ¨¡æ€åˆ†è§£ (VMD)"
    ]
  },
  {
    "objectID": "1034-nvmd.html#ä¸å…¶ä»–åˆ†è§£æ–¹æ³•çš„å¯¹æ¯”",
    "href": "1034-nvmd.html#ä¸å…¶ä»–åˆ†è§£æ–¹æ³•çš„å¯¹æ¯”",
    "title": "å˜åˆ†æ¨¡æ€åˆ†è§£ (VMD) ä¿¡å·å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ä¸å…¶ä»–åˆ†è§£æ–¹æ³•çš„å¯¹æ¯”",
    "text": "ä¸å…¶ä»–åˆ†è§£æ–¹æ³•çš„å¯¹æ¯”\n\nä¸»æµåˆ†è§£æ–¹æ³•ä¸€è§ˆ\n\n\n\n\n\n\n\n\n\næ–¹æ³•\nå…¨ç§°\nç‰¹ç‚¹\né€‚ç”¨åœºæ™¯\n\n\n\n\nEMD\nç»éªŒæ¨¡æ€åˆ†è§£\nè‡ªé€‚åº”ã€æ— éœ€è®¾å®š K\nä¸€èˆ¬éå¹³ç¨³ä¿¡å·\n\n\nEEMD\né›†åˆç»éªŒæ¨¡æ€åˆ†è§£\næ·»åŠ å™ªå£°æŠ‘åˆ¶æ¨¡æ€æ··å \nå™ªå£°æ•æ„Ÿä¿¡å·\n\n\nCEEMDAN\nå®Œå…¨è‡ªé€‚åº”å™ªå£°é›†åˆç»éªŒæ¨¡æ€åˆ†è§£\nè¿›ä¸€æ­¥æ”¹è¿›å™ªå£°å¤„ç†\nå¼ºå™ªå£°ä¿¡å·\n\n\nVMD\nå˜åˆ†æ¨¡æ€åˆ†è§£\néé€’å½’ã€å¸¦å®½å¯æ§\né¢‘ç‡ç›¸è¿‘æˆåˆ†åˆ†ç¦»\n\n\nEWT\nç»éªŒå°æ³¢å˜æ¢\nè‡ªé€‚åº”å°æ³¢\né¢‘ç‡å˜åŒ–ä¿¡å·\n\n\n\n\n\nä½•æ—¶é€‰æ‹© VMDï¼Ÿ\nâœ… æ¨èä½¿ç”¨ VMDï¼š - éœ€è¦åˆ†ç¦»é¢‘ç‡ç›¸è¿‘çš„æˆåˆ† - ä¿¡å·å«è¾ƒå¼ºå™ªå£° - éœ€è¦ç²¾ç¡®æ§åˆ¶å„æ¨¡æ€å¸¦å®½ - ç«¯ç‚¹æ•ˆåº”æ•æ„Ÿçš„åº”ç”¨\nâŒ è€ƒè™‘å…¶ä»–æ–¹æ³•ï¼š - å®Œå…¨æœªçŸ¥ä¿¡å·æˆåˆ†æ•°é‡ â†’ EMD/EEMD - è®¡ç®—é€Ÿåº¦è¦æ±‚æé«˜ â†’ EMD - é¢‘ç‡éšæ—¶é—´å‰§çƒˆå˜åŒ– â†’ EWT",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å˜åˆ†æ¨¡æ€åˆ†è§£ (VMD)"
    ]
  },
  {
    "objectID": "1034-nvmd.html#å‚è€ƒæ–‡çŒ®",
    "href": "1034-nvmd.html#å‚è€ƒæ–‡çŒ®",
    "title": "å˜åˆ†æ¨¡æ€åˆ†è§£ (VMD) ä¿¡å·å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒæ–‡çŒ®",
    "text": "å‚è€ƒæ–‡çŒ®\n\nDragomiretskiy, K., & Zosso, D. (2014). Variational Mode Decomposition. IEEE Transactions on Signal Processing, 62(3), 531-544.\nNazari, M., & Sakhaei, S. M. (2020). Variational Mode Decomposition: Applications in biomedical signal processing. Computers in Biology and Medicine.\nWang, Y., Markert, R., Xiang, J., & Zheng, W. (2015). Research on variational mode decomposition and its application in detecting rub-impact fault of the rotor system. Mechanical Systems and Signal Processing.\nLahmiri, S. (2014). Comparative study of ECG signal denoising by wavelet thresholding in empirical and variational mode decomposition domains. Healthcare Technology Letters.",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å˜åˆ†æ¨¡æ€åˆ†è§£ (VMD)"
    ]
  },
  {
    "objectID": "1032-sem.html",
    "href": "1032-sem.html",
    "title": "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (Structural Equation Modeling, SEM) æ˜¯ä¸€ç§å¼ºå¤§çš„å¤šå…ƒç»Ÿè®¡åˆ†ææŠ€æœ¯ï¼Œå®ƒç»“åˆäº†å› å­åˆ†æï¼ˆæµ‹é‡æ¨¡å‹ï¼‰å’Œè·¯å¾„åˆ†æï¼ˆç»“æ„æ¨¡å‹ï¼‰ï¼Œå…è®¸ç ”ç©¶è€…åŒæ—¶æ£€éªŒè§‚æµ‹å˜é‡ä¸æ½œå˜é‡ä¹‹é—´ã€ä»¥åŠæ½œå˜é‡ä¹‹é—´çš„å¤æ‚å…³ç³»ã€‚\nåœ¨ R è¯­è¨€ä¸­ï¼Œlavaan (Latent Variable Analysis) æ˜¯æœ€æµè¡Œçš„ SEM åŒ…ï¼Œå®ƒè¯­æ³•ç®€æ´ä¸”åŠŸèƒ½å…¨é¢ã€‚semPlot åŒ…åˆ™å¸¸ç”¨äºç»˜åˆ¶è·¯å¾„å›¾ã€‚\n\n\n\næµ‹é‡æ¨¡å‹ (Measurement Model)ï¼šæè¿°æ½œå˜é‡å¦‚ä½•ç”±è§‚æµ‹æŒ‡æ ‡æµ‹é‡\nç»“æ„æ¨¡å‹ (Structural Model)ï¼šæè¿°æ½œå˜é‡ä¹‹é—´çš„å› æœ/ç›¸å…³å…³ç³»\n\ngraph LR\n    subgraph æµ‹é‡æ¨¡å‹\n        X1 --&gt; F1[æ½œå˜é‡1]\n        X2 --&gt; F1\n        X3 --&gt; F1\n    end\n    subgraph ç»“æ„æ¨¡å‹\n        F1 --&gt; F2[æ½œå˜é‡2]\n    end\n    subgraph æµ‹é‡æ¨¡å‹2\n        F2 --&gt; Y1\n        F2 --&gt; Y2\n    end",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM)"
    ]
  },
  {
    "objectID": "1032-sem.html#ç®€ä»‹",
    "href": "1032-sem.html#ç®€ä»‹",
    "title": "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (Structural Equation Modeling, SEM) æ˜¯ä¸€ç§å¼ºå¤§çš„å¤šå…ƒç»Ÿè®¡åˆ†ææŠ€æœ¯ï¼Œå®ƒç»“åˆäº†å› å­åˆ†æï¼ˆæµ‹é‡æ¨¡å‹ï¼‰å’Œè·¯å¾„åˆ†æï¼ˆç»“æ„æ¨¡å‹ï¼‰ï¼Œå…è®¸ç ”ç©¶è€…åŒæ—¶æ£€éªŒè§‚æµ‹å˜é‡ä¸æ½œå˜é‡ä¹‹é—´ã€ä»¥åŠæ½œå˜é‡ä¹‹é—´çš„å¤æ‚å…³ç³»ã€‚\nåœ¨ R è¯­è¨€ä¸­ï¼Œlavaan (Latent Variable Analysis) æ˜¯æœ€æµè¡Œçš„ SEM åŒ…ï¼Œå®ƒè¯­æ³•ç®€æ´ä¸”åŠŸèƒ½å…¨é¢ã€‚semPlot åŒ…åˆ™å¸¸ç”¨äºç»˜åˆ¶è·¯å¾„å›¾ã€‚\n\n\n\næµ‹é‡æ¨¡å‹ (Measurement Model)ï¼šæè¿°æ½œå˜é‡å¦‚ä½•ç”±è§‚æµ‹æŒ‡æ ‡æµ‹é‡\nç»“æ„æ¨¡å‹ (Structural Model)ï¼šæè¿°æ½œå˜é‡ä¹‹é—´çš„å› æœ/ç›¸å…³å…³ç³»\n\ngraph LR\n    subgraph æµ‹é‡æ¨¡å‹\n        X1 --&gt; F1[æ½œå˜é‡1]\n        X2 --&gt; F1\n        X3 --&gt; F1\n    end\n    subgraph ç»“æ„æ¨¡å‹\n        F1 --&gt; F2[æ½œå˜é‡2]\n    end\n    subgraph æµ‹é‡æ¨¡å‹2\n        F2 --&gt; Y1\n        F2 --&gt; Y2\n    end",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM)"
    ]
  },
  {
    "objectID": "1032-sem.html#å®‰è£…",
    "href": "1032-sem.html#å®‰è£…",
    "title": "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM) å®Œå…¨æŒ‡å—",
    "section": "å®‰è£…",
    "text": "å®‰è£…\n\ninstall.packages(\"lavaan\")\ninstall.packages(\"semPlot\")\n\n\nlibrary(lavaan)\nlibrary(semPlot)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM)"
    ]
  },
  {
    "objectID": "1032-sem.html#å®ä¾‹æ•°æ®",
    "href": "1032-sem.html#å®ä¾‹æ•°æ®",
    "title": "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM) å®Œå…¨æŒ‡å—",
    "section": "å®ä¾‹æ•°æ®",
    "text": "å®ä¾‹æ•°æ®\næˆ‘ä»¬å°†ä½¿ç”¨ lavaan è‡ªå¸¦çš„ PoliticalDemocracy æ•°æ®é›†ï¼Œè¯¥æ•°æ®é›†åŒ…å«äº† 1960 å¹´å’Œ 1965 å¹´å„å›½çš„å·¥ä¸šåŒ–ç¨‹åº¦ä¸æ”¿æ²»æ°‘ä¸»ç¨‹åº¦çš„æ•°æ®ã€‚\n\ndata(PoliticalDemocracy)\nhead(PoliticalDemocracy)\n\n     y1       y2       y3       y4       y5       y6       y7       y8       x1\n1  2.50 0.000000 3.333333 0.000000 1.250000 0.000000 3.726360 3.333333 4.442651\n2  1.25 0.000000 3.333333 0.000000 6.250000 1.100000 6.666666 0.736999 5.384495\n3  7.50 8.800000 9.999998 9.199991 8.750000 8.094061 9.999998 8.211809 5.961005\n4  8.90 8.800000 9.999998 9.199991 8.907948 8.127979 9.999998 4.615086 6.285998\n5 10.00 3.333333 9.999998 6.666666 7.500000 3.333333 9.999998 6.666666 5.863631\n6  7.50 3.333333 6.666666 6.666666 6.250000 1.100000 6.666666 0.368500 5.533389\n        x2       x3\n1 3.637586 2.557615\n2 5.062595 3.568079\n3 6.255750 5.224433\n4 7.567863 6.267495\n5 6.818924 4.573679\n6 5.135798 3.892270\n\n\nå˜é‡è¯´æ˜ï¼š - x1-x3: 1960å¹´å·¥ä¸šåŒ–æŒ‡æ ‡ - y1-y4: 1960å¹´æ°‘ä¸»ç¨‹åº¦æŒ‡æ ‡ - y5-y8: 1965å¹´æ°‘ä¸»ç¨‹åº¦æŒ‡æ ‡",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM)"
    ]
  },
  {
    "objectID": "1032-sem.html#æ¨¡å‹è®¾å®š",
    "href": "1032-sem.html#æ¨¡å‹è®¾å®š",
    "title": "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM) å®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹è®¾å®š",
    "text": "æ¨¡å‹è®¾å®š\nlavaan ä½¿ç”¨ä¸€ç§ç›´è§‚çš„å­—ç¬¦ä¸²è¯­æ³•æ¥æè¿°æ¨¡å‹ï¼š\n\n\n\nç¬¦å·\nå«ä¹‰\nç¤ºä¾‹\n\n\n\n\n=~\nå®šä¹‰æ½œå˜é‡ï¼ˆç”±â€¦æµ‹é‡ï¼‰\nF =~ x1 + x2 + x3\n\n\n~\nå›å½’å…³ç³»ï¼ˆè¢«â€¦é¢„æµ‹ï¼‰\nY ~ X1 + X2\n\n\n~~\nåæ–¹å·®/æ–¹å·®\nx1 ~~ x2\n\n\n:=\nå®šä¹‰æ–°å‚æ•°\nindirect := a*b\n\n\n\n\nmodel &lt;- \"\n  # æµ‹é‡æ¨¡å‹ (å®šä¹‰æ½œå˜é‡)\n    ind60 =~ x1 + x2 + x3\n    dem60 =~ y1 + y2 + y3 + y4\n    dem65 =~ y5 + y6 + y7 + y8\n\n  # ç»“æ„æ¨¡å‹ (å›å½’å…³ç³»)\n    dem60 ~ ind60\n    dem65 ~ ind60 + dem60\n\n  # æ®‹å·®ç›¸å…³ (å¯é€‰)\n    y1 ~~ y5\n    y2 ~~ y4 + y6\n    y3 ~~ y7\n    y4 ~~ y8\n    y6 ~~ y8\n\"",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM)"
    ]
  },
  {
    "objectID": "1032-sem.html#æ¨¡å‹æ‹Ÿåˆ",
    "href": "1032-sem.html#æ¨¡å‹æ‹Ÿåˆ",
    "title": "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM) å®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹æ‹Ÿåˆ",
    "text": "æ¨¡å‹æ‹Ÿåˆ\nä½¿ç”¨ sem() å‡½æ•°æ‹Ÿåˆæ¨¡å‹ã€‚\n\nfit &lt;- sem(model, data = PoliticalDemocracy)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM)"
    ]
  },
  {
    "objectID": "1032-sem.html#æŸ¥çœ‹ç»“æœ",
    "href": "1032-sem.html#æŸ¥çœ‹ç»“æœ",
    "title": "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM) å®Œå…¨æŒ‡å—",
    "section": "æŸ¥çœ‹ç»“æœ",
    "text": "æŸ¥çœ‹ç»“æœ\nä½¿ç”¨ summary() å‡½æ•°æŸ¥çœ‹è¯¦ç»†ç»“æœï¼Œstandardized = TRUE å¯ä»¥è¾“å‡ºæ ‡å‡†åŒ–ç³»æ•°ï¼Œfit.measures = TRUE è¾“å‡ºæ‹ŸåˆæŒ‡æ•°ã€‚\n\nsummary(fit, standardized = TRUE, fit.measures = TRUE, rsquare = TRUE)\n\nlavaan 0.6-21 ended normally after 68 iterations\n\n  Estimator                                         ML\n  Optimization method                           NLMINB\n  Number of model parameters                        31\n\n  Number of observations                            75\n\nModel Test User Model:\n                                                      \n  Test statistic                                38.125\n  Degrees of freedom                                35\n  P-value (Chi-square)                           0.329\n\nModel Test Baseline Model:\n\n  Test statistic                               730.654\n  Degrees of freedom                                55\n  P-value                                        0.000\n\nUser Model versus Baseline Model:\n\n  Comparative Fit Index (CFI)                    0.995\n  Tucker-Lewis Index (TLI)                       0.993\n\nLoglikelihood and Information Criteria:\n\n  Loglikelihood user model (H0)              -1547.791\n  Loglikelihood unrestricted model (H1)      -1528.728\n                                                      \n  Akaike (AIC)                                3157.582\n  Bayesian (BIC)                              3229.424\n  Sample-size adjusted Bayesian (SABIC)       3131.720\n\nRoot Mean Square Error of Approximation:\n\n  RMSEA                                          0.035\n  90 Percent confidence interval - lower         0.000\n  90 Percent confidence interval - upper         0.092\n  P-value H_0: RMSEA &lt;= 0.050                    0.611\n  P-value H_0: RMSEA &gt;= 0.080                    0.114\n\nStandardized Root Mean Square Residual:\n\n  SRMR                                           0.044\n\nParameter Estimates:\n\n  Standard errors                             Standard\n  Information                                 Expected\n  Information saturated (h1) model          Structured\n\nLatent Variables:\n                   Estimate  Std.Err  z-value  P(&gt;|z|)   Std.lv  Std.all\n  ind60 =~                                                              \n    x1                1.000                               0.670    0.920\n    x2                2.180    0.139   15.742    0.000    1.460    0.973\n    x3                1.819    0.152   11.967    0.000    1.218    0.872\n  dem60 =~                                                              \n    y1                1.000                               2.223    0.850\n    y2                1.257    0.182    6.889    0.000    2.794    0.717\n    y3                1.058    0.151    6.987    0.000    2.351    0.722\n    y4                1.265    0.145    8.722    0.000    2.812    0.846\n  dem65 =~                                                              \n    y5                1.000                               2.103    0.808\n    y6                1.186    0.169    7.024    0.000    2.493    0.746\n    y7                1.280    0.160    8.002    0.000    2.691    0.824\n    y8                1.266    0.158    8.007    0.000    2.662    0.828\n\nRegressions:\n                   Estimate  Std.Err  z-value  P(&gt;|z|)   Std.lv  Std.all\n  dem60 ~                                                               \n    ind60             1.483    0.399    3.715    0.000    0.447    0.447\n  dem65 ~                                                               \n    ind60             0.572    0.221    2.586    0.010    0.182    0.182\n    dem60             0.837    0.098    8.514    0.000    0.885    0.885\n\nCovariances:\n                   Estimate  Std.Err  z-value  P(&gt;|z|)   Std.lv  Std.all\n .y1 ~~                                                                 \n   .y5                0.624    0.358    1.741    0.082    0.624    0.296\n .y2 ~~                                                                 \n   .y4                1.313    0.702    1.871    0.061    1.313    0.273\n   .y6                2.153    0.734    2.934    0.003    2.153    0.356\n .y3 ~~                                                                 \n   .y7                0.795    0.608    1.308    0.191    0.795    0.191\n .y4 ~~                                                                 \n   .y8                0.348    0.442    0.787    0.431    0.348    0.109\n .y6 ~~                                                                 \n   .y8                1.356    0.568    2.386    0.017    1.356    0.338\n\nVariances:\n                   Estimate  Std.Err  z-value  P(&gt;|z|)   Std.lv  Std.all\n   .x1                0.082    0.019    4.184    0.000    0.082    0.154\n   .x2                0.120    0.070    1.718    0.086    0.120    0.053\n   .x3                0.467    0.090    5.177    0.000    0.467    0.239\n   .y1                1.891    0.444    4.256    0.000    1.891    0.277\n   .y2                7.373    1.374    5.366    0.000    7.373    0.486\n   .y3                5.067    0.952    5.324    0.000    5.067    0.478\n   .y4                3.148    0.739    4.261    0.000    3.148    0.285\n   .y5                2.351    0.480    4.895    0.000    2.351    0.347\n   .y6                4.954    0.914    5.419    0.000    4.954    0.443\n   .y7                3.431    0.713    4.814    0.000    3.431    0.322\n   .y8                3.254    0.695    4.685    0.000    3.254    0.315\n    ind60             0.448    0.087    5.173    0.000    1.000    1.000\n   .dem60             3.956    0.921    4.295    0.000    0.800    0.800\n   .dem65             0.172    0.215    0.803    0.422    0.039    0.039\n\nR-Square:\n                   Estimate\n    x1                0.846\n    x2                0.947\n    x3                0.761\n    y1                0.723\n    y2                0.514\n    y3                0.522\n    y4                0.715\n    y5                0.653\n    y6                0.557\n    y7                0.678\n    y8                0.685\n    dem60             0.200\n    dem65             0.961",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM)"
    ]
  },
  {
    "objectID": "1032-sem.html#æ‹ŸåˆæŒ‡æ•°è¯¦è§£",
    "href": "1032-sem.html#æ‹ŸåˆæŒ‡æ•°è¯¦è§£",
    "title": "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM) å®Œå…¨æŒ‡å—",
    "section": "æ‹ŸåˆæŒ‡æ•°è¯¦è§£",
    "text": "æ‹ŸåˆæŒ‡æ•°è¯¦è§£\nè¿™æ˜¯ SEM åˆ†æä¸­æœ€å…³é”®çš„éƒ¨åˆ†ã€‚ä»¥ä¸‹æ˜¯å¸¸ç”¨æ‹ŸåˆæŒ‡æ•°åŠå…¶é˜ˆå€¼ï¼š\n\nç»å¯¹æ‹ŸåˆæŒ‡æ•°\n\n\n\næŒ‡æ ‡\nç†æƒ³å€¼\nå¯æ¥å—å€¼\nè¯´æ˜\n\n\n\n\nÏ‡Â²\np &gt; 0.05\n-\næ ·æœ¬é‡æ•æ„Ÿï¼Œå¤§æ ·æœ¬å¸¸è¢«æ‹’ç»\n\n\nRMSEA\n&lt; 0.05\n&lt; 0.08\nè¿‘ä¼¼è¯¯å·®å‡æ–¹æ ¹ï¼Œè€ƒè™‘æ¨¡å‹ç®€æ´æ€§\n\n\nSRMR\n&lt; 0.05\n&lt; 0.08\næ ‡å‡†åŒ–æ®‹å·®å‡æ–¹æ ¹\n\n\n\n\n\nç›¸å¯¹æ‹ŸåˆæŒ‡æ•°\n\n\n\næŒ‡æ ‡\nç†æƒ³å€¼\nå¯æ¥å—å€¼\nè¯´æ˜\n\n\n\n\nCFI\n&gt; 0.95\n&gt; 0.90\næ¯”è¾ƒæ‹ŸåˆæŒ‡æ•°\n\n\nTLI\n&gt; 0.95\n&gt; 0.90\nTucker-Lewis æŒ‡æ•°\n\n\nNFI\n&gt; 0.95\n&gt; 0.90\nè§„èŒƒæ‹ŸåˆæŒ‡æ•°ï¼ˆæ ·æœ¬é‡æ•æ„Ÿï¼‰\n\n\n\n\n[!TIP] å¿«é€Ÿåˆ¤æ–­æ³•åˆ™ï¼šCFI/TLI &gt; 0.90ï¼ŒRMSEA &lt; 0.08ï¼ŒSRMR &lt; 0.08 é€šå¸¸è¢«è®¤ä¸ºæ˜¯å¯æ¥å—çš„æ¨¡å‹æ‹Ÿåˆã€‚\n\n\n\næå–æ‹ŸåˆæŒ‡æ•°\n\n# æå–å¸¸ç”¨æ‹ŸåˆæŒ‡æ•°\nfit_indices &lt;- fitMeasures(fit, c(\"chisq\", \"df\", \"pvalue\", \"cfi\", \"tli\", \"rmsea\", \"srmr\"))\nround(fit_indices, 3)\n\n chisq     df pvalue    cfi    tli  rmsea   srmr \n38.125 35.000  0.329  0.995  0.993  0.035  0.044",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM)"
    ]
  },
  {
    "objectID": "1032-sem.html#è·¯å¾„ç³»æ•°è§£è¯»",
    "href": "1032-sem.html#è·¯å¾„ç³»æ•°è§£è¯»",
    "title": "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM) å®Œå…¨æŒ‡å—",
    "section": "è·¯å¾„ç³»æ•°è§£è¯»",
    "text": "è·¯å¾„ç³»æ•°è§£è¯»\n\næ ‡å‡†åŒ–ç³»æ•°è§£è¯»ç¤ºä¾‹\n\n# æå–æ ‡å‡†åŒ–è·¯å¾„ç³»æ•°\nstd_coef &lt;- standardizedSolution(fit)\n# åªçœ‹ç»“æ„è·¯å¾„ï¼ˆå›å½’å…³ç³»ï¼‰\nstd_coef[std_coef$op == \"~\", c(\"lhs\", \"op\", \"rhs\", \"est.std\", \"pvalue\")]\n\n     lhs op   rhs est.std pvalue\n12 dem60  ~ ind60   0.447   0.00\n13 dem65  ~ ind60   0.182   0.01\n14 dem65  ~ dem60   0.885   0.00\n\n\nè§£è¯»ç¤ºä¾‹ï¼š - dem60 ~ ind60 = 0.45 è¡¨ç¤ºï¼šå·¥ä¸šåŒ–ç¨‹åº¦æ¯å¢åŠ 1ä¸ªæ ‡å‡†å·®ï¼Œæ°‘ä¸»ç¨‹åº¦å¢åŠ 0.45ä¸ªæ ‡å‡†å·® - æ ‡å‡†åŒ–ç³»æ•°å…è®¸æ¯”è¾ƒä¸åŒè·¯å¾„çš„ç›¸å¯¹é‡è¦æ€§",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM)"
    ]
  },
  {
    "objectID": "1032-sem.html#è·¯å¾„å›¾å¯è§†åŒ–",
    "href": "1032-sem.html#è·¯å¾„å›¾å¯è§†åŒ–",
    "title": "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM) å®Œå…¨æŒ‡å—",
    "section": "è·¯å¾„å›¾å¯è§†åŒ–",
    "text": "è·¯å¾„å›¾å¯è§†åŒ–\nä½¿ç”¨ semPaths() å‡½æ•°ç»˜åˆ¶æ¨¡å‹è·¯å¾„å›¾ã€‚\n\nsemPaths(fit,\n  what = \"std\", # æ˜¾ç¤ºæ ‡å‡†åŒ–ç³»æ•°\n  layout = \"tree\", # æ ‘çŠ¶å¸ƒå±€\n  edge.label.cex = 0.8, # æ ‡ç­¾å­—ä½“å¤§å°\n  curvePivot = TRUE, # æ›²çº¿å¼¯æ›²\n  fade = FALSE, # ä¸æ ¹æ®ç³»æ•°å¤§å°æ·¡åŒ–é¢œè‰²\n  style = \"lisrel\", # ç»˜å›¾é£æ ¼\n  rotation = 2 # æ—‹è½¬\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM)"
    ]
  },
  {
    "objectID": "1032-sem.html#ä¿®æ­£æŒ‡æ•°-modification-indices",
    "href": "1032-sem.html#ä¿®æ­£æŒ‡æ•°-modification-indices",
    "title": "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM) å®Œå…¨æŒ‡å—",
    "section": "ä¿®æ­£æŒ‡æ•° (Modification Indices)",
    "text": "ä¿®æ­£æŒ‡æ•° (Modification Indices)\nå¦‚æœæ¨¡å‹æ‹Ÿåˆä¸ä½³ï¼Œå¯ä»¥æŸ¥çœ‹ä¿®æ­£æŒ‡æ•°ï¼Œäº†è§£æ·»åŠ å“ªäº›è·¯å¾„å¯ä»¥æ”¹å–„æ¨¡å‹ã€‚\n\nmi &lt;- modindices(fit, sort = TRUE)\nhead(mi[mi$mi &gt; 10, ]) # æŸ¥çœ‹ MI &gt; 10 çš„è·¯å¾„\n\n[1] lhs      op       rhs      mi       epc      sepc.lv  sepc.all sepc.nox\n&lt;0 è¡Œ&gt; (æˆ–0-é•¿åº¦çš„row.names)\n\n\n\n[!WARNING] ä¿®æ­£æŒ‡æ•°ä»…ä¾›å‚è€ƒï¼æ·»åŠ è·¯å¾„å¿…é¡»æœ‰ç†è®ºæ”¯æŒï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´è¿‡åº¦æ‹Ÿåˆï¼ˆoverfittingï¼‰ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM)"
    ]
  },
  {
    "objectID": "1032-sem.html#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ",
    "href": "1032-sem.html#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ",
    "title": "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM) å®Œå…¨æŒ‡å—",
    "section": "å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ",
    "text": "å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ\n\n\n\n\n\n\n\n\né—®é¢˜\nç—‡çŠ¶\nè§£å†³æ–¹æ¡ˆ\n\n\n\n\næ¨¡å‹ä¸æ”¶æ•›\næŠ¥é”™ â€œdid not convergeâ€\næ£€æŸ¥æ•°æ®ç¼ºå¤±ã€å˜é‡å°ºåº¦å·®å¼‚è¿‡å¤§\n\n\nè´Ÿæ–¹å·®\nHeywood case\nå¢åŠ æ ·æœ¬é‡ã€ç®€åŒ–æ¨¡å‹ã€æ£€æŸ¥ç¼–ç é”™è¯¯\n\n\nCFI/TLIè¿‡ä½\n&lt; 0.90\næ£€æŸ¥æµ‹é‡æ¨¡å‹ã€è€ƒè™‘æ·»åŠ æ®‹å·®ç›¸å…³\n\n\nRMSEAè¿‡é«˜\n&gt; 0.10\næ£€æŸ¥æ¨¡å‹è®¾å®šã€ç§»é™¤ä¸æ˜¾è‘—è·¯å¾„\n\n\nå› å­è½½è·è¿‡ä½\n&lt; 0.4\nè€ƒè™‘ç§»é™¤è¯¥æŒ‡æ ‡æˆ–åˆå¹¶ç›¸ä¼¼æŒ‡æ ‡\n\n\n\n\nè¯Šæ–­æ€§æ£€æŸ¥\n\n# æ£€æŸ¥æ®‹å·®\nresid(fit, type = \"standardized\")$cov[1:5, 1:5] # æŸ¥çœ‹æ ‡å‡†åŒ–æ®‹å·®çŸ©é˜µ\n\n              x1            x2            x3         y1         y2\nx1  2.498795e-07 -4.962612e-01 -3.886844e-01  0.5929215 -1.0534229\nx2 -4.962612e-01  6.564805e-07  8.097965e-01 -1.1285847 -0.8861320\nx3 -3.886844e-01  8.097965e-01  3.335385e-07 -1.3703533 -0.8492539\ny1  5.929215e-01 -1.128585e+00 -1.370353e+00 -1.6265896 -0.1465265\ny2 -1.053423e+00 -8.861320e-01 -8.492539e-01 -0.1465265  1.0237701\n\n\n\n[!IMPORTANT] æ ‡å‡†åŒ–æ®‹å·®ç»å¯¹å€¼ &gt; 2.58 (Î±=0.01) è¡¨ç¤ºå­˜åœ¨æ˜¾è‘—çš„å±€éƒ¨æ‹Ÿåˆé—®é¢˜ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM)"
    ]
  },
  {
    "objectID": "1032-sem.html#é«˜çº§æŠ€å·§",
    "href": "1032-sem.html#é«˜çº§æŠ€å·§",
    "title": "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM) å®Œå…¨æŒ‡å—",
    "section": "é«˜çº§æŠ€å·§",
    "text": "é«˜çº§æŠ€å·§\n\nå¤šç»„æ¯”è¾ƒ\n\n# æŒ‰ç»„æ‹Ÿåˆå¹¶æ¯”è¾ƒ\nfit_group &lt;- sem(model, data = mydata, group = \"gender\")\nsummary(fit_group)\n\n\n\nä¸­ä»‹æ•ˆåº”æ£€éªŒ\n\n# å®šä¹‰å¸¦ä¸­ä»‹çš„æ¨¡å‹\nmed_model &lt;- \"\n  # ç›´æ¥æ•ˆåº”\n  Y ~ c*X\n  # é€šè¿‡ M çš„é—´æ¥æ•ˆåº”\n  M ~ a*X\n  Y ~ b*M\n  # å®šä¹‰é—´æ¥æ•ˆåº”\n  indirect := a*b\n  total := c + a*b\n\"",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM)"
    ]
  },
  {
    "objectID": "1032-sem.html#å‚è€ƒæ–‡çŒ®",
    "href": "1032-sem.html#å‚è€ƒæ–‡çŒ®",
    "title": "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM) å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒæ–‡çŒ®",
    "text": "å‚è€ƒæ–‡çŒ®\n\nRosseel, Y. (2012). lavaan: An R Package for Structural Equation Modeling. Journal of Statistical Software, 48(2), 1-36.\nHu, L., & Bentler, P. M. (1999). Cutoff criteria for fit indexes in covariance structure analysis. Structural Equation Modeling, 6(1), 1-55.\nKline, R. B. (2015). Principles and Practice of Structural Equation Modeling (4th ed.). Guilford Press.",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM)"
    ]
  },
  {
    "objectID": "1030-qualitative-research.html",
    "href": "1030-qualitative-research.html",
    "title": "è´¨æ€§ç ”ç©¶ä¸æ–‡æœ¬æŒ–æ˜ (Text Mining) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "è´¨æ€§ç ”ç©¶ (Qualitative Research) ä¼ ç»Ÿä¸Šä¾èµ–äººå·¥é˜…è¯»ã€ç¼–ç å’Œå½’çº³ï¼ˆå¦‚ä½¿ç”¨ NVivo, MAXQDAï¼‰ã€‚ä½†åœ¨é¢å¯¹æµ·é‡æ–‡æœ¬ï¼ˆå¦‚æˆåƒä¸Šä¸‡æ¡æ‚£è€…è¯„è®ºã€æ”¿ç­–æ–‡æ¡£ï¼‰æ—¶ï¼Œäººå·¥ç¼–ç å˜å¾—ä¸å¯èƒ½ã€‚\næ–‡æœ¬æŒ–æ˜ (Text Mining) æä¾›äº†â€œè¿œè¯» (Distant Reading)â€çš„è§†è§’ï¼Œå¸®åŠ©æˆ‘ä»¬ï¼š - ä¸‰è§’éªŒè¯ (Triangulation)ï¼šç”¨é‡åŒ–ç»“æœéªŒè¯è´¨æ€§å‘ç°ã€‚ - æ¢ç´¢æ€§åˆ†æï¼šå¿«é€Ÿè¯†åˆ«é«˜é¢‘è¯å’Œæ½œåœ¨ä¸»é¢˜ã€‚ - æƒ…æ„Ÿåˆ†æï¼šé‡åŒ–æ–‡æœ¬çš„æƒ…æ„Ÿå€¾å‘ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ”¬ è´¨æ€§ç ”ç©¶",
      "è´¨æ€§ç ”ç©¶ä¸æ–‡æœ¬æŒ–æ˜"
    ]
  },
  {
    "objectID": "1030-qualitative-research.html#ä¸ºä»€ä¹ˆè´¨æ€§ç ”ç©¶éœ€è¦-r",
    "href": "1030-qualitative-research.html#ä¸ºä»€ä¹ˆè´¨æ€§ç ”ç©¶éœ€è¦-r",
    "title": "è´¨æ€§ç ”ç©¶ä¸æ–‡æœ¬æŒ–æ˜ (Text Mining) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "è´¨æ€§ç ”ç©¶ (Qualitative Research) ä¼ ç»Ÿä¸Šä¾èµ–äººå·¥é˜…è¯»ã€ç¼–ç å’Œå½’çº³ï¼ˆå¦‚ä½¿ç”¨ NVivo, MAXQDAï¼‰ã€‚ä½†åœ¨é¢å¯¹æµ·é‡æ–‡æœ¬ï¼ˆå¦‚æˆåƒä¸Šä¸‡æ¡æ‚£è€…è¯„è®ºã€æ”¿ç­–æ–‡æ¡£ï¼‰æ—¶ï¼Œäººå·¥ç¼–ç å˜å¾—ä¸å¯èƒ½ã€‚\næ–‡æœ¬æŒ–æ˜ (Text Mining) æä¾›äº†â€œè¿œè¯» (Distant Reading)â€çš„è§†è§’ï¼Œå¸®åŠ©æˆ‘ä»¬ï¼š - ä¸‰è§’éªŒè¯ (Triangulation)ï¼šç”¨é‡åŒ–ç»“æœéªŒè¯è´¨æ€§å‘ç°ã€‚ - æ¢ç´¢æ€§åˆ†æï¼šå¿«é€Ÿè¯†åˆ«é«˜é¢‘è¯å’Œæ½œåœ¨ä¸»é¢˜ã€‚ - æƒ…æ„Ÿåˆ†æï¼šé‡åŒ–æ–‡æœ¬çš„æƒ…æ„Ÿå€¾å‘ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ”¬ è´¨æ€§ç ”ç©¶",
      "è´¨æ€§ç ”ç©¶ä¸æ–‡æœ¬æŒ–æ˜"
    ]
  },
  {
    "objectID": "1030-qualitative-research.html#å·¥å…·å‡†å¤‡",
    "href": "1030-qualitative-research.html#å·¥å…·å‡†å¤‡",
    "title": "è´¨æ€§ç ”ç©¶ä¸æ–‡æœ¬æŒ–æ˜ (Text Mining) å®Œå…¨æŒ‡å—",
    "section": "å·¥å…·å‡†å¤‡",
    "text": "å·¥å…·å‡†å¤‡\næˆ‘ä»¬å°†ä½¿ç”¨ tidytext æ¡†æ¶ï¼Œå®ƒå°†æ–‡æœ¬å¤„ç†èå…¥åˆ°ç†Ÿæ‚‰çš„ Tidyverse å·¥ä½œæµä¸­ã€‚\n\ntidytext: æ–‡æœ¬æ•´æ´åŒ–ã€‚\njiebaR: ä¸­æ–‡åˆ†è¯ç¥å™¨ï¼ˆæ³¨ï¼šæœ¬ç¯å¢ƒæš‚ä¸å¯ç”¨ï¼Œä»¥ä¸‹ä»…å±•ç¤ºä»£ç é€»è¾‘ï¼‰ã€‚\ntopicmodels: LDA ä¸»é¢˜æ¨¡å‹ã€‚\nwordcloud2: äº¤äº’å¼è¯äº‘ã€‚\n\n\n[!WARNING] ç”±äº jiebaR åŒ…åœ¨å½“å‰ Windows R 4.5 ç¯å¢ƒä¸­å…¼å®¹æ€§é—®é¢˜ï¼Œä»¥ä¸‹æ¶‰åŠä¸­æ–‡åˆ†è¯çš„ä»£ç å—å·²è®¾ç½®ä¸ºä¸æ‰§è¡Œ (eval=FALSE)ã€‚è¯·åœ¨æœ¬åœ°å®‰è£…äº† Rtools çš„ç¯å¢ƒä¸­å°è¯•è¿è¡Œã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ”¬ è´¨æ€§ç ”ç©¶",
      "è´¨æ€§ç ”ç©¶ä¸æ–‡æœ¬æŒ–æ˜"
    ]
  },
  {
    "objectID": "1030-qualitative-research.html#å®‰è£…ä¸åŠ è½½",
    "href": "1030-qualitative-research.html#å®‰è£…ä¸åŠ è½½",
    "title": "è´¨æ€§ç ”ç©¶ä¸æ–‡æœ¬æŒ–æ˜ (Text Mining) å®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\ninstall.packages(c(\"tidytext\", \"jiebaR\", \"topicmodels\", \"wordcloud2\", \"dplyr\", \"ggplot2\"))\n\n\nlibrary(tidytext)\n# library(jiebaR)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(wordcloud2)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ”¬ è´¨æ€§ç ”ç©¶",
      "è´¨æ€§ç ”ç©¶ä¸æ–‡æœ¬æŒ–æ˜"
    ]
  },
  {
    "objectID": "1030-qualitative-research.html#ä¸­æ–‡åˆ†è¯æœºåˆ¶",
    "href": "1030-qualitative-research.html#ä¸­æ–‡åˆ†è¯æœºåˆ¶",
    "title": "è´¨æ€§ç ”ç©¶ä¸æ–‡æœ¬æŒ–æ˜ (Text Mining) å®Œå…¨æŒ‡å—",
    "section": "ä¸­æ–‡åˆ†è¯æœºåˆ¶",
    "text": "ä¸­æ–‡åˆ†è¯æœºåˆ¶\nä¸­æ–‡ä¸è‹±æ–‡ä¸åŒï¼ˆè‹±æ–‡æœ‰ç©ºæ ¼åˆ†éš”ï¼‰ï¼Œéœ€è¦ä¸“é—¨çš„ç®—æ³•åˆ‡åˆ†è¯è¯­ã€‚\n\n# æ¨¡æ‹Ÿè®¿è°ˆæ•°æ®\ntext_data &lt;- data.frame(\n    id = 1:3,\n    text = c(\n        \"æ‚£è€…è¡¨ç¤ºå¯¹æ²»ç–—æ•ˆæœéå¸¸æ»¡æ„ï¼ŒæŠ¤å£«æœåŠ¡æ€åº¦å¾ˆå¥½ã€‚\",\n        \"æ²»ç–—è¿‡ç¨‹å¾ˆç—›è‹¦ï¼Œä½†æ˜¯ä¸ºäº†åº·å¤å¿…é¡»åšæŒï¼ŒåŒ»ç”Ÿå¾ˆä¸“ä¸šã€‚\",\n        \"åŒ»é™¢ç¯å¢ƒä¸é”™ï¼Œä½†æ˜¯æŒ‚å·æ’é˜Ÿæ—¶é—´å¤ªé•¿äº†ï¼Œå¸Œæœ›æ”¹è¿›ã€‚\"\n    ),\n    stringsAsFactors = FALSE\n)\n\n# åˆå§‹åŒ–åˆ†è¯å™¨ (æ··å’Œæ¨¡å¼)\ncutter &lt;- worker()\n\n# åˆ†è¯å‡½æ•°\nsegment_text &lt;- function(text) {\n    segment(text, cutter)\n}\n\n# 1. åˆ—è¡¨åˆ—è½¬æ¢ï¼šå°†å¥å­åˆ‡åˆ†ä¸ºè¯å‘é‡\ntext_data$segmented &lt;- sapply(text_data$text, function(x) paste(segment_text(x), collapse = \" \"))\n\n# 2. Tidy æ ¼å¼è½¬æ¢ (Unnest)\n# è¿™ä¸€æ­¥æ˜¯æ ¸å¿ƒï¼šå°† \"ä¸€è¡Œä¸€æ–‡æ¡£\" è½¬æ¢ä¸º \"ä¸€è¡Œä¸€è¯ (One-token-per-row)\"\ntidy_text &lt;- text_data %&gt;%\n    unnest_tokens(word, segmented, token = \"ngrams\", n = 1)\n\nhead(tidy_text)\n\nTidy Text æ ¼å¼ç¤ºä¾‹ï¼š è½¬æ¢åçš„æ•°æ®ç»“æ„å¦‚ä¸‹ï¼Œéå¸¸é€‚åˆ dplyr å¤„ç†ï¼š\n\n\n\nid\nword\n\n\n\n\n1\næ‚£è€…\n\n\n1\nè¡¨ç¤º\n\n\n1\næ»¡æ„\n\n\n2\næ²»ç–—",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ”¬ è´¨æ€§ç ”ç©¶",
      "è´¨æ€§ç ”ç©¶ä¸æ–‡æœ¬æŒ–æ˜"
    ]
  },
  {
    "objectID": "1030-qualitative-research.html#è¯é¢‘ç»Ÿè®¡ä¸å¯è§†åŒ–",
    "href": "1030-qualitative-research.html#è¯é¢‘ç»Ÿè®¡ä¸å¯è§†åŒ–",
    "title": "è´¨æ€§ç ”ç©¶ä¸æ–‡æœ¬æŒ–æ˜ (Text Mining) å®Œå…¨æŒ‡å—",
    "section": "è¯é¢‘ç»Ÿè®¡ä¸å¯è§†åŒ–",
    "text": "è¯é¢‘ç»Ÿè®¡ä¸å¯è§†åŒ–\næˆ‘ä»¬ä½¿ç”¨è‡ªå¸¦çš„è‹±æ–‡æ•°æ®é›† sentiments æˆ–æ¨¡æ‹Ÿæ•°æ®æ¥æ¼”ç¤ºæµç¨‹ï¼ˆè·³è¿‡åˆ†è¯æ­¥éª¤ï¼‰ã€‚\n\n# ç»Ÿè®¡é«˜é¢‘è¯\nword_counts &lt;- tidy_text %&gt;%\n    count(word, sort = TRUE) %&gt;%\n    filter(nchar(word) &gt; 1) # è¿‡æ»¤æ‰å•å­—ï¼ˆå¦‚\"çš„\"ã€\"äº†\"ï¼‰\n\n# æŸ±çŠ¶å›¾å±•ç¤º\nword_counts %&gt;%\n    head(10) %&gt;%\n    ggplot(aes(reorder(word, n), n)) +\n    geom_col(fill = \"#4e79a7\") +\n    coord_flip() +\n    labs(x = NULL, y = \"å‡ºç°é¢‘æ¬¡\", title = \"è®¿è°ˆæ ¸å¿ƒè®®é¢˜\") +\n    theme_minimal(base_size = 14)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ”¬ è´¨æ€§ç ”ç©¶",
      "è´¨æ€§ç ”ç©¶ä¸æ–‡æœ¬æŒ–æ˜"
    ]
  },
  {
    "objectID": "1030-qualitative-research.html#lda-ä¸»é¢˜æ¨¡å‹-latent-dirichlet-allocation",
    "href": "1030-qualitative-research.html#lda-ä¸»é¢˜æ¨¡å‹-latent-dirichlet-allocation",
    "title": "è´¨æ€§ç ”ç©¶ä¸æ–‡æœ¬æŒ–æ˜ (Text Mining) å®Œå…¨æŒ‡å—",
    "section": "LDA ä¸»é¢˜æ¨¡å‹ (Latent Dirichlet Allocation)",
    "text": "LDA ä¸»é¢˜æ¨¡å‹ (Latent Dirichlet Allocation)\nLDA æ˜¯ä¸€ç§éç›‘ç£å­¦ä¹ ç®—æ³•ï¼Œå®ƒå‡è®¾ï¼š 1. æ¯ç¯‡æ–‡æ¡£æ˜¯ç”±å¤šç§ä¸»é¢˜æ··åˆè€Œæˆçš„ã€‚ 2. æ¯ä¸ªä¸»é¢˜æ˜¯ç”±å¤šç§è¯æ±‡æ··åˆè€Œæˆçš„ã€‚\nå®ƒçš„ç›®æ ‡æ˜¯åæ¨è¿™äº›â€œä¸»é¢˜â€ã€‚\n\nlibrary(topicmodels)\n\n# 1. æ„å»ºæ–‡æ¡£-è¯çŸ©é˜µ (Document-Term Matrix, DTM)\n# è¿™æ˜¯ LDA çš„æ ‡å‡†è¾“å…¥æ ¼å¼\ndtm &lt;- tidy_text %&gt;%\n    count(id, word) %&gt;%\n    cast_dtm(id, word, n)\n\n# 2. è¿è¡Œæ¨¡å‹ (å‡è®¾å­˜åœ¨ K=2 ä¸ªä¸»é¢˜)\nlda_model &lt;- LDA(dtm, k = 2, control = list(seed = 1234))\n\n# 3. æå– \"è¯-ä¸»é¢˜\" æ¦‚ç‡ (beta)\ntopics &lt;- tidy(lda_model, matrix = \"beta\")\n\n# 4. å¯è§†åŒ–æ¯ä¸ªä¸»é¢˜çš„å…³é”®è¯\ntop_terms &lt;- topics %&gt;%\n    group_by(topic) %&gt;%\n    slice_max(beta, n = 5) %&gt;%\n    ungroup() %&gt;%\n    arrange(topic, -beta)\n\ntop_terms %&gt;%\n    mutate(term = reorder_within(term, beta, topic)) %&gt;%\n    ggplot(aes(beta, term, fill = factor(topic))) +\n    geom_col(show.legend = FALSE) +\n    facet_wrap(~topic, scales = \"free\") +\n    scale_y_reordered() +\n    labs(\n        title = \"LDA æ¨¡å‹æå–çš„æ½œåœ¨ä¸»é¢˜\",\n        subtitle = \"ä¸»é¢˜ 1 å¯èƒ½å¯¹åº” 'å°±åŒ»ä½“éªŒ'ï¼Œä¸»é¢˜ 2 å¯¹åº” 'æ²»ç–—æ„Ÿå—'\",\n        x = \"Beta (è¯å±äºè¯¥ä¸»é¢˜çš„æ¦‚ç‡)\", y = NULL\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ”¬ è´¨æ€§ç ”ç©¶",
      "è´¨æ€§ç ”ç©¶ä¸æ–‡æœ¬æŒ–æ˜"
    ]
  },
  {
    "objectID": "1030-qualitative-research.html#æ··åˆç ”ç©¶è®¾è®¡çš„åº”ç”¨",
    "href": "1030-qualitative-research.html#æ··åˆç ”ç©¶è®¾è®¡çš„åº”ç”¨",
    "title": "è´¨æ€§ç ”ç©¶ä¸æ–‡æœ¬æŒ–æ˜ (Text Mining) å®Œå…¨æŒ‡å—",
    "section": "æ··åˆç ”ç©¶è®¾è®¡çš„åº”ç”¨",
    "text": "æ··åˆç ”ç©¶è®¾è®¡çš„åº”ç”¨\nå°†æ–‡æœ¬æŒ–æ˜ç»“æœæ•´åˆå›è´¨æ€§ç ”ç©¶ï¼š\n\nå…³é”®è¯å¯¼å‡ºï¼šå°† LDA æå–çš„ Top 20 è¯æ±‡ä½œä¸º NVivo çš„é¢„è®¾èŠ‚ç‚¹ (Nodes)ã€‚\næƒ…æ„Ÿé‡åŒ–ï¼šè®¡ç®—æ¯ä¸ªå—è®¿è€…çš„æƒ…æ„Ÿå¾—åˆ†ï¼Œä¸ä»–ä»¬çš„é—®å·æ»¡æ„åº¦è¿›è¡Œç›¸å…³æ€§åˆ†æï¼ˆMixed Methodsï¼‰ã€‚\nå¼‚å¸¸å€¼å‘ç°ï¼šæ‰¾åˆ°ä¸ç¬¦åˆä¸»æµä¸»é¢˜çš„â€œç¦»ç¾¤â€æ–‡æ¡£ï¼Œè¿›è¡Œæ·±å…¥ä¸ªæ¡ˆç ”ç©¶ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ”¬ è´¨æ€§ç ”ç©¶",
      "è´¨æ€§ç ”ç©¶ä¸æ–‡æœ¬æŒ–æ˜"
    ]
  },
  {
    "objectID": "1030-qualitative-research.html#å‚è€ƒæ–‡çŒ®",
    "href": "1030-qualitative-research.html#å‚è€ƒæ–‡çŒ®",
    "title": "è´¨æ€§ç ”ç©¶ä¸æ–‡æœ¬æŒ–æ˜ (Text Mining) å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒæ–‡çŒ®",
    "text": "å‚è€ƒæ–‡çŒ®\n\nSilge, J., & Robinson, D. (2017). Text Mining with R: A Tidy Approach. Oâ€™Reilly Media.\nBlei, D. M. (2012). Probabilistic topic models. Communications of the ACM.",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ”¬ è´¨æ€§ç ”ç©¶",
      "è´¨æ€§ç ”ç©¶ä¸æ–‡æœ¬æŒ–æ˜"
    ]
  },
  {
    "objectID": "1028-did.html",
    "href": "1028-did.html",
    "title": "åŒé‡å·®åˆ†æ³• (DiD) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "åŒé‡å·®åˆ†æ³•ï¼ˆDifference-in-Differences, DiDï¼‰ æ˜¯ä¸€ç§å‡†å®éªŒè®¾è®¡æ–¹æ³•ï¼Œç”¨äºä¼°è®¡æ”¿ç­–å¹²é¢„æˆ–äº‹ä»¶çš„å› æœæ•ˆåº”ã€‚å®ƒé€šè¿‡æ¯”è¾ƒå¤„ç†ç»„å’Œå¯¹ç…§ç»„åœ¨å¹²é¢„å‰åçš„å˜åŒ–å·®å¼‚æ¥è¯†åˆ«æ•ˆåº”ã€‚\n\n\n\\[\\text{DiD} = (\\bar{Y}_{treat,post} - \\bar{Y}_{treat,pre}) - (\\bar{Y}_{control,post} - \\bar{Y}_{control,pre})\\]\n\n\n\nå¯¹æ¯”\nå«ä¹‰\n\n\n\n\nç¬¬ä¸€é‡å·®åˆ†\næ¯”è¾ƒå‰åæ—¶é—´å˜åŒ–\n\n\nç¬¬äºŒé‡å·®åˆ†\næ¯”è¾ƒå¤„ç†ç»„ä¸å¯¹ç…§ç»„\n\n\n\n\n\n\n\n\n\nåœºæ™¯\nç¤ºä¾‹\n\n\n\n\næ”¿ç­–è¯„ä¼°\næœ€ä½å·¥èµ„è°ƒæ•´å¯¹å°±ä¸šçš„å½±å“\n\n\nå…¬å…±å«ç”Ÿ\nç¦çƒŸä»¤å¯¹å¥åº·çš„å½±å“\n\n\nåŒ»ç–—å¹²é¢„\næ–°è¯ä¸Šå¸‚å¯¹å¤„æ–¹è¡Œä¸ºçš„å½±å“\n\n\næ•™è‚²æ”¿ç­–\nå­¦è´¹è¡¥è´´å¯¹å…¥å­¦ç‡çš„å½±å“\n\n\n\n\n\n\nå¹³è¡Œè¶‹åŠ¿å‡è®¾ï¼ˆParallel Trendsï¼‰ï¼š &gt; å¦‚æœæ²¡æœ‰å¹²é¢„ï¼Œå¤„ç†ç»„å’Œå¯¹ç…§ç»„çš„ç»“å±€å˜é‡ä¼šå‘ˆç°ç›¸åŒçš„æ—¶é—´è¶‹åŠ¿ã€‚\nè¿™æ˜¯ DiD æ–¹æ³•æœ€å…³é”®çš„å‡è®¾ï¼",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "åŒé‡å·®åˆ†æ³• (DiD)"
    ]
  },
  {
    "objectID": "1028-did.html#ä»€ä¹ˆæ˜¯åŒé‡å·®åˆ†æ³•",
    "href": "1028-did.html#ä»€ä¹ˆæ˜¯åŒé‡å·®åˆ†æ³•",
    "title": "åŒé‡å·®åˆ†æ³• (DiD) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "åŒé‡å·®åˆ†æ³•ï¼ˆDifference-in-Differences, DiDï¼‰ æ˜¯ä¸€ç§å‡†å®éªŒè®¾è®¡æ–¹æ³•ï¼Œç”¨äºä¼°è®¡æ”¿ç­–å¹²é¢„æˆ–äº‹ä»¶çš„å› æœæ•ˆåº”ã€‚å®ƒé€šè¿‡æ¯”è¾ƒå¤„ç†ç»„å’Œå¯¹ç…§ç»„åœ¨å¹²é¢„å‰åçš„å˜åŒ–å·®å¼‚æ¥è¯†åˆ«æ•ˆåº”ã€‚\n\n\n\\[\\text{DiD} = (\\bar{Y}_{treat,post} - \\bar{Y}_{treat,pre}) - (\\bar{Y}_{control,post} - \\bar{Y}_{control,pre})\\]\n\n\n\nå¯¹æ¯”\nå«ä¹‰\n\n\n\n\nç¬¬ä¸€é‡å·®åˆ†\næ¯”è¾ƒå‰åæ—¶é—´å˜åŒ–\n\n\nç¬¬äºŒé‡å·®åˆ†\næ¯”è¾ƒå¤„ç†ç»„ä¸å¯¹ç…§ç»„\n\n\n\n\n\n\n\n\n\nåœºæ™¯\nç¤ºä¾‹\n\n\n\n\næ”¿ç­–è¯„ä¼°\næœ€ä½å·¥èµ„è°ƒæ•´å¯¹å°±ä¸šçš„å½±å“\n\n\nå…¬å…±å«ç”Ÿ\nç¦çƒŸä»¤å¯¹å¥åº·çš„å½±å“\n\n\nåŒ»ç–—å¹²é¢„\næ–°è¯ä¸Šå¸‚å¯¹å¤„æ–¹è¡Œä¸ºçš„å½±å“\n\n\næ•™è‚²æ”¿ç­–\nå­¦è´¹è¡¥è´´å¯¹å…¥å­¦ç‡çš„å½±å“\n\n\n\n\n\n\nå¹³è¡Œè¶‹åŠ¿å‡è®¾ï¼ˆParallel Trendsï¼‰ï¼š &gt; å¦‚æœæ²¡æœ‰å¹²é¢„ï¼Œå¤„ç†ç»„å’Œå¯¹ç…§ç»„çš„ç»“å±€å˜é‡ä¼šå‘ˆç°ç›¸åŒçš„æ—¶é—´è¶‹åŠ¿ã€‚\nè¿™æ˜¯ DiD æ–¹æ³•æœ€å…³é”®çš„å‡è®¾ï¼",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "åŒé‡å·®åˆ†æ³• (DiD)"
    ]
  },
  {
    "objectID": "1028-did.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "href": "1028-did.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "title": "åŒé‡å·®åˆ†æ³• (DiD) å®Œå…¨æŒ‡å—",
    "section": "R åŒ…å®‰è£…ä¸åŠ è½½",
    "text": "R åŒ…å®‰è£…ä¸åŠ è½½\n\n# æ ¸å¿ƒåŒ…\nlibrary(tidyverse) # æ•°æ®å¤„ç†\nlibrary(fixest) # å›ºå®šæ•ˆåº”æ¨¡å‹ï¼ˆæ¨èï¼‰\nlibrary(did) # Callaway & Sant'Anna DiD\nlibrary(plm) # é¢æ¿æ•°æ®\nlibrary(ggplot2) # å¯è§†åŒ–\nlibrary(broom) # æ¨¡å‹æ•´ç†",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "åŒé‡å·®åˆ†æ³• (DiD)"
    ]
  },
  {
    "objectID": "1028-did.html#æ•°æ®å‡†å¤‡",
    "href": "1028-did.html#æ•°æ®å‡†å¤‡",
    "title": "åŒé‡å·®åˆ†æ³• (DiD) å®Œå…¨æŒ‡å—",
    "section": "æ•°æ®å‡†å¤‡",
    "text": "æ•°æ®å‡†å¤‡\næ¨¡æ‹Ÿä¸€ä¸ªæ”¿ç­–è¯„ä¼°åœºæ™¯ï¼šæŸåœ°åŒºåœ¨ 2018 å¹´å®æ–½å¥åº·å¹²é¢„æ”¿ç­–\n\n# æ¨¡æ‹Ÿé¢æ¿æ•°æ®\nset.seed(2024)\n\nn_units &lt;- 200 # åœ°åŒºæ•°\nn_periods &lt;- 8 # æ—¶é—´æœŸæ•° (2015-2022)\ntreat_time &lt;- 4 # å¹²é¢„å‘ç”Ÿæ—¶ç‚¹ (ç¬¬4æœŸ=2018å¹´)\n\n# ç”ŸæˆåŸºç¡€é¢æ¿ç»“æ„\npanel_data &lt;- expand_grid(\n    unit_id = 1:n_units,\n    time = 1:n_periods\n) |&gt;\n    mutate(\n        year = 2014 + time,\n\n        # å¤„ç†ç»„åˆ†é…ï¼ˆ50%çš„åœ°åŒºæ¥å—å¹²é¢„ï¼‰\n        treated = as.integer(unit_id &lt;= n_units / 2),\n\n        # å¹²é¢„åæ ‡è®°\n        post = as.integer(time &gt;= treat_time),\n\n        # DiD äº¤äº’é¡¹\n        did = treated * post,\n\n        # å•ä½å›ºå®šæ•ˆåº”\n        unit_fe = rep(rnorm(n_units, 0, 5), each = n_periods),\n\n        # æ—¶é—´å›ºå®šæ•ˆåº”\n        time_fe = rep(rnorm(n_periods, 0, 2), n_units),\n\n        # ä¸ªä½“æ—¶å˜åå˜é‡\n        population = round(100000 + 50000 * rnorm(n()) + 5000 * time),\n        income = round(30000 + 2000 * time + rnorm(n(), 0, 5000))\n    )\n\n# ç”Ÿæˆç»“å±€å˜é‡ï¼šç–¾ç—…å‘ç—…ç‡\n# çœŸå®å¹²é¢„æ•ˆåº” = -3ï¼ˆé™ä½ 3 ä¸ªå‘ç—…ç‡å•ä½ï¼‰\npanel_data &lt;- panel_data |&gt;\n    mutate(\n        # åŸºçº¿å‘ç—…ç‡\n        baseline_rate = 50 + unit_fe + time_fe,\n\n        # å¤„ç†æ•ˆåº”ï¼ˆçœŸå®æ•ˆåº” = -3ï¼‰\n        treatment_effect = -3 * did,\n\n        # å¹³è¡Œè¶‹åŠ¿ï¼ˆå¹²é¢„å‰ä¸¤ç»„è¶‹åŠ¿ç›¸åŒï¼‰\n        common_trend = 0.5 * time,\n\n        # æœ€ç»ˆç»“å±€\n        outcome = baseline_rate + common_trend + treatment_effect +\n            rnorm(n(), 0, 3),\n\n        # è½¬ä¸ºå› å­\n        unit_id = factor(unit_id),\n        year = factor(year)\n    )\n\nglimpse(panel_data)\n\nRows: 1,600\nColumns: 14\n$ unit_id          &lt;fct&gt; 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3,â€¦\n$ time             &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 1, 2, 3, 4, 5, 6, 7, 8, 1, 2,â€¦\n$ year             &lt;fct&gt; 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2015,â€¦\n$ treated          &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,â€¦\n$ post             &lt;int&gt; 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0,â€¦\n$ did              &lt;int&gt; 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0,â€¦\n$ unit_fe          &lt;dbl&gt; 4.9098471, 4.9098471, 4.9098471, 4.9098471, 4.9098471â€¦\n$ time_fe          &lt;dbl&gt; 0.004378923, 0.950728669, -1.555484993, 0.410755350, â€¦\n$ population       &lt;dbl&gt; 149028, 131568, 80453, 147967, 96810, -7116, 167134, â€¦\n$ income           &lt;dbl&gt; 26219, 36752, 46703, 30755, 36470, 36142, 46737, 5285â€¦\n$ baseline_rate    &lt;dbl&gt; 54.91423, 55.86058, 53.35436, 55.32060, 56.95494, 52.â€¦\n$ treatment_effect &lt;dbl&gt; 0, 0, 0, -3, -3, -3, -3, -3, 0, 0, 0, -3, -3, -3, -3,â€¦\n$ common_trend     &lt;dbl&gt; 0.5, 1.0, 1.5, 2.0, 2.5, 3.0, 3.5, 4.0, 0.5, 1.0, 1.5â€¦\n$ outcome          &lt;dbl&gt; 51.27613, 57.68301, 53.51673, 52.82152, 54.10289, 48.â€¦\n\n\n\næ¢ç´¢æ€§åˆ†æ\n\n# è®¡ç®—å„ç»„å„æ—¶æœŸçš„å‡å€¼\ngroup_means &lt;- panel_data |&gt;\n    group_by(treated, time) |&gt;\n    summarise(\n        mean_outcome = mean(outcome),\n        se = sd(outcome) / sqrt(n()),\n        .groups = \"drop\"\n    ) |&gt;\n    mutate(\n        group = factor(treated, labels = c(\"å¯¹ç…§ç»„\", \"å¤„ç†ç»„\")),\n        year = 2014 + time\n    )\n\n# å¯è§†åŒ–è¶‹åŠ¿\nggplot(group_means, aes(x = year, y = mean_outcome, color = group)) +\n    geom_line(linewidth = 1.2) +\n    geom_point(size = 3) +\n    geom_ribbon(aes(\n        ymin = mean_outcome - 1.96 * se,\n        ymax = mean_outcome + 1.96 * se,\n        fill = group\n    ), alpha = 0.2, color = NA) +\n    geom_vline(xintercept = 2017.5, linetype = \"dashed\", color = \"gray50\") +\n    annotate(\"text\",\n        x = 2017.5, y = max(group_means$mean_outcome),\n        label = \"å¹²é¢„å®æ–½\", hjust = -0.1, vjust = 1\n    ) +\n    scale_color_manual(values = c(\"#4f46e5\", \"#ef4444\")) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#ef4444\")) +\n    labs(\n        title = \"å¤„ç†ç»„ä¸å¯¹ç…§ç»„çš„è¶‹åŠ¿æ¯”è¾ƒ\",\n        subtitle = \"å¹²é¢„å‰çš„å¹³è¡Œè¶‹åŠ¿æ˜¯ DiD çš„å…³é”®å‡è®¾\",\n        x = \"å¹´ä»½\",\n        y = \"å‘ç—…ç‡\",\n        color = \"ç»„åˆ«\",\n        fill = \"ç»„åˆ«\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(legend.position = \"bottom\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "åŒé‡å·®åˆ†æ³• (DiD)"
    ]
  },
  {
    "objectID": "1028-did.html#åŸºç¡€-did-ä¼°è®¡",
    "href": "1028-did.html#åŸºç¡€-did-ä¼°è®¡",
    "title": "åŒé‡å·®åˆ†æ³• (DiD) å®Œå…¨æŒ‡å—",
    "section": "åŸºç¡€ DiD ä¼°è®¡",
    "text": "åŸºç¡€ DiD ä¼°è®¡\n\n2Ã—2 DiDï¼ˆæœ€ç®€å•æƒ…å†µï¼‰\n\n# ä¿ç•™å¹²é¢„å‰åå„ä¸€æœŸ\ndid_2x2 &lt;- panel_data |&gt;\n    filter(time %in% c(3, 5)) # å¹²é¢„å‰ä¸€æœŸ vs å¹²é¢„åä¸€æœŸ\n\n# åŸºç¡€ DiD å›å½’\nbasic_did &lt;- lm(outcome ~ treated + post + did, data = did_2x2)\nsummary(basic_did)\n\n\nCall:\nlm(formula = outcome ~ treated + post + did, data = did_2x2)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-18.5866  -3.9671  -0.1156   4.0321  16.3757 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)  50.7672     0.6081  83.485  &lt; 2e-16 ***\ntreated      -1.3255     0.8600  -1.541   0.1240    \npost          4.3712     0.8600   5.083 5.74e-07 ***\ndid          -2.7537     1.2162  -2.264   0.0241 *  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 6.081 on 396 degrees of freedom\nMultiple R-squared:  0.1104,    Adjusted R-squared:  0.1036 \nF-statistic: 16.37 on 3 and 396 DF,  p-value: 4.748e-10\n\n\n\n# è§£è¯»ï¼šdid ç³»æ•°å°±æ˜¯ DiD ä¼°è®¡é‡\ncat(\"DiD ä¼°è®¡é‡:\", round(coef(basic_did)[\"did\"], 3), \"\\n\")\n\nDiD ä¼°è®¡é‡: -2.754 \n\ncat(\"çœŸå®æ•ˆåº”: -3.000\\n\")\n\nçœŸå®æ•ˆåº”: -3.000\n\n\n\n\næ‰‹åŠ¨è®¡ç®— DiD\n\n# æ‰‹åŠ¨éªŒè¯ DiD\nmeans_table &lt;- panel_data |&gt;\n    filter(time %in% c(3, 5)) |&gt;\n    group_by(treated, post) |&gt;\n    summarise(mean_y = mean(outcome), .groups = \"drop\") |&gt;\n    pivot_wider(\n        names_from = post, values_from = mean_y,\n        names_prefix = \"post_\"\n    )\n\nmeans_table\n\n# A tibble: 2 Ã— 3\n  treated post_0 post_1\n    &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n1       0   50.8   55.1\n2       1   49.4   51.1\n\n# DiD = (å¤„ç†ç»„å - å¤„ç†ç»„å‰) - (å¯¹ç…§ç»„å - å¯¹ç…§ç»„å‰)\ndid_manual &lt;- (means_table$post_1[2] - means_table$post_0[2]) -\n    (means_table$post_1[1] - means_table$post_0[1])\ncat(\"æ‰‹åŠ¨è®¡ç®— DiD:\", round(did_manual, 3), \"\\n\")\n\næ‰‹åŠ¨è®¡ç®— DiD: -2.754",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "åŒé‡å·®åˆ†æ³• (DiD)"
    ]
  },
  {
    "objectID": "1028-did.html#åŒå‘å›ºå®šæ•ˆåº”-didtwfe",
    "href": "1028-did.html#åŒå‘å›ºå®šæ•ˆåº”-didtwfe",
    "title": "åŒé‡å·®åˆ†æ³• (DiD) å®Œå…¨æŒ‡å—",
    "section": "åŒå‘å›ºå®šæ•ˆåº” DiDï¼ˆTWFEï¼‰",
    "text": "åŒå‘å›ºå®šæ•ˆåº” DiDï¼ˆTWFEï¼‰\nä½¿ç”¨é¢æ¿æ•°æ®çš„æ ‡å‡†æ–¹æ³•ï¼š\n\n# ä½¿ç”¨ fixest åŒ…ï¼ˆæ¨èï¼‰\ntwfe_model &lt;- feols(\n    outcome ~ did | unit_id + year, # å•ä½å›ºå®šæ•ˆåº” + æ—¶é—´å›ºå®šæ•ˆåº”\n    data = panel_data,\n    cluster = ~unit_id # èšç±»æ ‡å‡†è¯¯\n)\n\nsummary(twfe_model)\n\nOLS estimation, Dep. Var.: outcome\nObservations: 1,600\nFixed-effects: unit_id: 200,  year: 8\nStandard-errors: Clustered (unit_id) \n    Estimate Std. Error  t value  Pr(&gt;|t|)    \ndid -2.84542   0.297556 -9.56264 &lt; 2.2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\nRMSE: 2.8407     Adj. R2: 0.760579\n               Within R2: 0.055525\n\n\n\næ·»åŠ æ§åˆ¶å˜é‡\n\n# æ·»åŠ æ—¶å˜åå˜é‡\ntwfe_controls &lt;- feols(\n    outcome ~ did + log(population) + log(income) | unit_id + year,\n    data = panel_data,\n    cluster = ~unit_id\n)\n\nsummary(twfe_controls)\n\nOLS estimation, Dep. Var.: outcome\nObservations: 1,591\nFixed-effects: unit_id: 200,  year: 8\nStandard-errors: Clustered (unit_id) \n                 Estimate Std. Error   t value  Pr(&gt;|t|)    \ndid             -2.818033   0.295763 -9.527999 &lt; 2.2e-16 ***\nlog(population) -0.115437   0.155857 -0.740660   0.45977    \nlog(income)      0.495693   0.590165  0.839922   0.40196    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\nRMSE: 2.84025     Adj. R2: 0.760808\n                Within R2: 0.054949\n\n\n\n\næ¨¡å‹æ¯”è¾ƒ\n\n# ä½¿ç”¨ fixest çš„æ¨¡å‹æ¯”è¾ƒè¡¨æ ¼\netable(twfe_model, twfe_controls,\n    headers = c(\"åŸºç¡€æ¨¡å‹\", \"å«æ§åˆ¶å˜é‡\"),\n    fitstat = c(\"n\", \"r2\", \"ar2\")\n)\n\n                        twfe_model      twfe_controls\n                      åŸºç¡€æ¨¡å‹    å«æ§åˆ¶å˜é‡\nDependent Var.:            outcome            outcome\n                                                     \ndid             -2.845*** (0.2976) -2.818*** (0.2958)\nlog(population)                      -0.1154 (0.1559)\nlog(income)                           0.4957 (0.5902)\nFixed-Effects:  ------------------ ------------------\nunit_id                        Yes                Yes\nyear                           Yes                Yes\n_______________ __________________ __________________\nS.E.: Clustered        by: unit_id        by: unit_id\nObservations                 1,600              1,591\nR2                         0.79157            0.79225\nAdj. R2                    0.76058            0.76081\n---\nSignif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "åŒé‡å·®åˆ†æ³• (DiD)"
    ]
  },
  {
    "objectID": "1028-did.html#å¹³è¡Œè¶‹åŠ¿æ£€éªŒ",
    "href": "1028-did.html#å¹³è¡Œè¶‹åŠ¿æ£€éªŒ",
    "title": "åŒé‡å·®åˆ†æ³• (DiD) å®Œå…¨æŒ‡å—",
    "section": "å¹³è¡Œè¶‹åŠ¿æ£€éªŒ",
    "text": "å¹³è¡Œè¶‹åŠ¿æ£€éªŒ\n\näº‹ä»¶ç ”ç©¶æ³•ï¼ˆEvent Studyï¼‰\näº‹ä»¶ç ”ç©¶æ³•æ˜¯æ£€éªŒå¹³è¡Œè¶‹åŠ¿çš„æ ‡å‡†æ–¹æ³•ï¼š\n\n# åˆ›å»ºç›¸å¯¹æ—¶é—´å˜é‡\npanel_data &lt;- panel_data |&gt;\n    mutate(\n        rel_time = time - treat_time,\n        # åˆ›å»ºå„æœŸæŒ‡ç¤ºå˜é‡ï¼ˆå¤„ç†ç»„ Ã— ç›¸å¯¹æ—¶æœŸï¼‰\n        rel_time_factor = factor(rel_time)\n    )\n\n# äº‹ä»¶ç ”ç©¶å›å½’ï¼ˆä»¥ t-1 ä¸ºå‚ç…§æœŸï¼‰\nes_model &lt;- feols(\n    outcome ~ i(rel_time_factor, treated, ref = -1) | unit_id + year,\n    data = panel_data,\n    cluster = ~unit_id\n)\n\nsummary(es_model)\n\nOLS estimation, Dep. Var.: outcome\nObservations: 1,600\nFixed-effects: unit_id: 200,  year: 8\nStandard-errors: Clustered (unit_id) \n                             Estimate Std. Error   t value   Pr(&gt;|t|)    \nrel_time_factor::-3:treated  0.261268   0.583770  0.447552 6.5496e-01    \nrel_time_factor::-2:treated  0.405381   0.613904  0.660333 5.0980e-01    \nrel_time_factor::0:treated  -2.865183   0.551963 -5.190901 5.1468e-07 ***\nrel_time_factor::1:treated  -2.753691   0.629742 -4.372727 1.9767e-05 ***\nrel_time_factor::2:treated  -2.487630   0.583297 -4.264777 3.0907e-05 ***\nrel_time_factor::3:treated  -2.860663   0.615626 -4.646752 6.1265e-06 ***\nrel_time_factor::4:treated  -2.148864   0.617776 -3.478385 6.1956e-04 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\nRMSE: 2.83817     Adj. R2: 0.75997 \n                Within R2: 0.057206\n\n\n\n# å¯è§†åŒ–äº‹ä»¶ç ”ç©¶å›¾\niplot(es_model,\n    main = \"äº‹ä»¶ç ”ç©¶å›¾ï¼ˆEvent Studyï¼‰\",\n    xlab = \"ç›¸å¯¹äºå¹²é¢„çš„æ—¶æœŸ\",\n    ylab = \"DiD ä¼°è®¡é‡\"\n)\n\n# æ·»åŠ å‚ç…§çº¿\nabline(h = 0, lty = 2, col = \"gray\")\nabline(v = -0.5, lty = 2, col = \"red\")\n\n\n\n\n\n\n\n\n\n\nè‡ªå®šä¹‰äº‹ä»¶ç ”ç©¶å›¾\n\n# æå–äº‹ä»¶ç ”ç©¶ç³»æ•°\nes_coefs &lt;- tidy(es_model, conf.int = TRUE) |&gt;\n    filter(str_detect(term, \"rel_time\")) |&gt;\n    mutate(\n        rel_time = as.numeric(str_extract(term, \"-?\\\\d+\")),\n        significant = p.value &lt; 0.05\n    )\n\n# æ·»åŠ å‚ç…§æœŸï¼ˆt-1 = 0ï¼‰\nes_coefs &lt;- bind_rows(\n    es_coefs,\n    tibble(rel_time = -1, estimate = 0, conf.low = 0, conf.high = 0)\n) |&gt;\n    arrange(rel_time)\n\n# é«˜è´¨é‡å¯è§†åŒ–\nggplot(es_coefs, aes(x = rel_time, y = estimate)) +\n    # é˜´å½±åŒºåˆ†å¹²é¢„å‰å\n    annotate(\"rect\",\n        xmin = -0.5, xmax = Inf, ymin = -Inf, ymax = Inf,\n        fill = \"#fee2e2\", alpha = 0.5\n    ) +\n    # å‚ç…§çº¿\n    geom_hline(yintercept = 0, linetype = \"dashed\", color = \"gray50\") +\n    geom_vline(xintercept = -0.5, linetype = \"solid\", color = \"#ef4444\") +\n    # ç½®ä¿¡åŒºé—´\n    geom_errorbar(aes(ymin = conf.low, ymax = conf.high),\n        width = 0.2, color = \"#4f46e5\"\n    ) +\n    # ç‚¹ä¼°è®¡\n    geom_point(size = 3, color = \"#4f46e5\") +\n    geom_line(linetype = \"dashed\", color = \"#4f46e5\", alpha = 0.5) +\n    # æ ‡æ³¨å¹²é¢„ç‚¹\n    annotate(\"text\",\n        x = 0.5, y = max(es_coefs$estimate, na.rm = TRUE),\n        label = \"å¹²é¢„å\", color = \"#ef4444\", fontface = \"bold\"\n    ) +\n    labs(\n        title = \"äº‹ä»¶ç ”ç©¶å›¾ï¼šå¹³è¡Œè¶‹åŠ¿æ£€éªŒ\",\n        subtitle = \"å¹²é¢„å‰ç³»æ•°åº”æ¥è¿‘ 0ï¼ˆå¹³è¡Œè¶‹åŠ¿å‡è®¾ï¼‰\",\n        x = \"ç›¸å¯¹äºå¹²é¢„çš„æ—¶æœŸ\",\n        y = \"ä¼°è®¡æ•ˆåº”\",\n        caption = \"è¯¯å·®æ£’: 95% ç½®ä¿¡åŒºé—´ | å‚ç…§æœŸ: t-1\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(plot.title = element_text(face = \"bold\"))\n\n\n\n\n\n\n\n\n\n\nå¹³è¡Œè¶‹åŠ¿çš„æ­£å¼æ£€éªŒ\n\n# è”åˆæ£€éªŒï¼šå¹²é¢„å‰æ‰€æœ‰ç³»æ•°æ˜¯å¦åŒæ—¶ä¸º 0\npre_treatment_terms &lt;- names(coef(es_model))[str_detect(names(coef(es_model)), \":-[2-9]|:-1[0-9]\")]\n\n# å¦‚æœæœ‰å¹²é¢„å‰çš„ç³»æ•°ï¼Œè¿›è¡Œ F æ£€éªŒ\nif (length(pre_treatment_terms) &gt; 0) {\n    wald_test &lt;- wald(es_model, pre_treatment_terms)\n    print(wald_test)\n}\n\nWald test, H0: joint nullity of rel_time_factor::-3:treated and rel_time_factor::-2:treated\n stat = 0.233644, p-value = 0.791675, on 2 and 1,386 DoF, VCOV: Clustered (unit_id).$stat\n[1] 0.2336438\n\n$p\n[1] 0.791675\n\n$df1\n[1] 2\n\n$df2\n[1] 1386\n\n$vcov\n[1] \"Clustered (unit_id)\"",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "åŒé‡å·®åˆ†æ³• (DiD)"
    ]
  },
  {
    "objectID": "1028-did.html#äº¤é”™å¤„ç†-did",
    "href": "1028-did.html#äº¤é”™å¤„ç†-did",
    "title": "åŒé‡å·®åˆ†æ³• (DiD) å®Œå…¨æŒ‡å—",
    "section": "äº¤é”™å¤„ç† DiD",
    "text": "äº¤é”™å¤„ç† DiD\nå½“ä¸åŒå•ä½åœ¨ä¸åŒæ—¶é—´æ¥å—å¤„ç†æ—¶ï¼š\n\n# æ¨¡æ‹Ÿäº¤é”™å¤„ç†æ•°æ®\nset.seed(42)\n\nstaggered_data &lt;- expand_grid(\n    unit_id = 1:100,\n    time = 1:10\n) |&gt;\n    mutate(\n        # ä¸åŒå•ä½çš„å¤„ç†æ—¶ç‚¹\n        treat_time_unit = case_when(\n            unit_id &lt;= 30 ~ 4, # ç¬¬ä¸€ç»„ï¼šç¬¬4æœŸå¤„ç†\n            unit_id &lt;= 60 ~ 6, # ç¬¬äºŒç»„ï¼šç¬¬6æœŸå¤„ç†\n            unit_id &lt;= 80 ~ 8, # ç¬¬ä¸‰ç»„ï¼šç¬¬8æœŸå¤„ç†\n            TRUE ~ NA_real_ # å¯¹ç…§ç»„ï¼šä»ä¸å¤„ç†\n        ),\n\n        # å¤„ç†çŠ¶æ€\n        treated = as.integer(!is.na(treat_time_unit) & time &gt;= treat_time_unit),\n\n        # ç»“å±€å˜é‡\n        outcome = 50 + rnorm(n(), unit_id / 5, 3) + 0.5 * time - 2.5 * treated + rnorm(n(), 0, 2),\n        unit_id = factor(unit_id),\n        year = factor(2014 + time),\n        cohort = factor(case_when(\n            treat_time_unit == 4 ~ \"2018\",\n            treat_time_unit == 6 ~ \"2020\",\n            treat_time_unit == 8 ~ \"2022\",\n            TRUE ~ \"ä»ä¸å¤„ç†\"\n        ))\n    )\n\nhead(staggered_data)\n\n# A tibble: 6 Ã— 7\n  unit_id  time treat_time_unit treated outcome year  cohort\n  &lt;fct&gt;   &lt;int&gt;           &lt;dbl&gt;   &lt;int&gt;   &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt; \n1 1           1               4       0    59.5 2015  2018  \n2 1           2               4       0    50.6 2016  2018  \n3 1           3               4       0    54.7 2017  2018  \n4 1           4               4       1    52.4 2018  2018  \n5 1           5               4       1    49.4 2019  2018  \n6 1           6               4       1    49.2 2020  2018  \n\n\n\nCallaway-Santâ€™Anna ä¼°è®¡å™¨\n\n# ä½¿ç”¨ did åŒ…çš„ç°ä»£æ–¹æ³•\nstaggered_data_num &lt;- staggered_data |&gt;\n    mutate(\n        unit_id = as.numeric(as.character(unit_id)),\n        time = 2014 + as.numeric(as.character(year)) - 2014,\n        first_treat = treat_time_unit + 2014,\n        first_treat = ifelse(is.na(first_treat), 0, first_treat) # ä»ä¸å¤„ç†è®¾ä¸º 0\n    )\n\n# Callaway-Sant'Anna ATT(g,t)\ncs_result &lt;- att_gt(\n    yname = \"outcome\",\n    tname = \"time\",\n    idname = \"unit_id\",\n    gname = \"first_treat\",\n    data = as.data.frame(staggered_data_num),\n    control_group = \"nevertreated\" # ä½¿ç”¨ä»ä¸å¤„ç†ç»„ä½œä¸ºå¯¹ç…§\n)\n\nsummary(cs_result)\n\n\nCall:\natt_gt(yname = \"outcome\", tname = \"time\", idname = \"unit_id\", \n    gname = \"first_treat\", data = as.data.frame(staggered_data_num), \n    control_group = \"nevertreated\")\n\nReference: Callaway, Brantly and Pedro H.C. Sant'Anna.  \"Difference-in-Differences with Multiple Time Periods.\" Journal of Econometrics, Vol. 225, No. 2, pp. 200-230, 2021. &lt;https://doi.org/10.1016/j.jeconom.2020.12.001&gt;, &lt;https://arxiv.org/abs/1803.09015&gt; \n\nGroup-Time Average Treatment Effects:\n Group Time ATT(g,t) Std. Error [95% Simult.  Conf. Band]  \n  2018 2016  -1.4185     1.4147       -5.5896      2.7527  \n  2018 2017   0.5697     1.2634       -3.1554      4.2947  \n  2018 2018  -0.7454     1.2441       -4.4138      2.9229  \n  2018 2019  -1.8390     1.4593       -6.1417      2.4637  \n  2018 2020  -1.7104     1.5705       -6.3412      2.9204  \n  2018 2021  -1.3518     1.2803       -5.1268      2.4231  \n  2018 2022  -3.5454     1.3629       -7.5640      0.4732  \n  2018 2023  -4.3045     1.5907       -8.9946      0.3857  \n  2018 2024  -2.4410     1.9255       -8.1183      3.2362  \n  2020 2016  -2.8201     1.4833       -7.1935      1.5533  \n  2020 2017   0.4182     1.2621       -3.3033      4.1397  \n  2020 2018   0.5867     1.2960       -3.2346      4.4080  \n  2020 2019   2.9767     1.2955       -0.8431      6.7964  \n  2020 2020  -4.2941     1.6671       -9.2096      0.6213  \n  2020 2021  -4.7660     1.4661       -9.0888     -0.4433 *\n  2020 2022  -6.4106     1.4336      -10.6375     -2.1836 *\n  2020 2023  -5.7517     1.6456      -10.6039     -0.8995 *\n  2020 2024  -6.1822     1.9778      -12.0138     -0.3506 *\n  2022 2016  -1.1763     1.6367       -6.0022      3.6496  \n  2022 2017  -1.2594     1.5486       -5.8254      3.3066  \n  2022 2018   1.9291     1.4074       -2.2208      6.0789  \n  2022 2019   1.5848     1.3592       -2.4228      5.5923  \n  2022 2020  -1.3853     1.7944       -6.6760      3.9055  \n  2022 2021  -1.8428     1.5575       -6.4352      2.7496  \n  2022 2022  -1.4912     1.3927       -5.5977      2.6154  \n  2022 2023  -2.7435     1.6262       -7.5385      2.0515  \n  2022 2024  -1.8666     1.7832       -7.1243      3.3910  \n---\nSignif. codes: `*' confidence band does not cover 0\n\nP-value for pre-test of parallel trends assumption:  0.27625\nControl Group:  Never Treated,  Anticipation Periods:  0\nEstimation Method:  Doubly Robust\n\n\n\n# èšåˆä¸ºæ•´ä½“ ATT\ncs_agg &lt;- aggte(cs_result, type = \"simple\")\nsummary(cs_agg)\n\n\nCall:\naggte(MP = cs_result, type = \"simple\")\n\nReference: Callaway, Brantly and Pedro H.C. Sant'Anna.  \"Difference-in-Differences with Multiple Time Periods.\" Journal of Econometrics, Vol. 225, No. 2, pp. 200-230, 2021. &lt;https://doi.org/10.1016/j.jeconom.2020.12.001&gt;, &lt;https://arxiv.org/abs/1803.09015&gt; \n\n     ATT    Std. Error     [ 95%  Conf. Int.]  \n -3.3864        0.7648    -4.8853     -1.8875 *\n\n\n---\nSignif. codes: `*' confidence band does not cover 0\n\nControl Group:  Never Treated,  Anticipation Periods:  0\nEstimation Method:  Doubly Robust\n\n\n\n# äº‹ä»¶ç ”ç©¶å›¾\ncs_dynamic &lt;- aggte(cs_result, type = \"dynamic\")\nggdid(cs_dynamic, title = \"äº¤é”™ DiD äº‹ä»¶ç ”ç©¶å›¾\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "åŒé‡å·®åˆ†æ³• (DiD)"
    ]
  },
  {
    "objectID": "1028-did.html#å®‰æ…°å‰‚æ£€éªŒ",
    "href": "1028-did.html#å®‰æ…°å‰‚æ£€éªŒ",
    "title": "åŒé‡å·®åˆ†æ³• (DiD) å®Œå…¨æŒ‡å—",
    "section": "å®‰æ…°å‰‚æ£€éªŒ",
    "text": "å®‰æ…°å‰‚æ£€éªŒ\n\næ—¶é—´å®‰æ…°å‰‚\n\n# å‡è®¾å¹²é¢„å‘ç”Ÿåœ¨æ›´æ—©çš„æ—¶é—´\npanel_data_placebo &lt;- panel_data |&gt;\n    mutate(\n        # å‡è£…å¹²é¢„åœ¨ t=2 æ—¶å‘ç”Ÿ\n        fake_post = as.integer(time &gt;= 2 & time &lt; 4),\n        fake_did = treated * fake_post\n    ) |&gt;\n    filter(time &lt; 4) # åªç”¨å¹²é¢„å‰æ•°æ®\n\nplacebo_model &lt;- feols(\n    outcome ~ fake_did | unit_id + time,\n    data = panel_data_placebo,\n    cluster = ~unit_id\n)\n\nsummary(placebo_model)\n\nOLS estimation, Dep. Var.: outcome\nObservations: 600\nFixed-effects: unit_id: 200,  time: 3\nStandard-errors: Clustered (unit_id) \n          Estimate Std. Error   t value Pr(&gt;|t|) \nfake_did -0.058577   0.526645 -0.111227  0.91155 \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\nRMSE: 2.48101     Adj. R2: 0.749052\n                Within R2: 3.097e-5\n\n# å¦‚æœ fake_did æ˜¾è‘—ï¼Œè¯´æ˜å¹³è¡Œè¶‹åŠ¿å‡è®¾å¯èƒ½ä¸æ»¡è¶³\n\n\n\nç»„åˆ«å®‰æ…°å‰‚\n\n# åœ¨ä»æœªå¤„ç†çš„ç»„ä¸­éšæœºåˆ†é…\"å‡å¤„ç†\"\nnever_treated &lt;- panel_data |&gt;\n    filter(treated == 0) |&gt;\n    mutate(\n        fake_treated = as.integer(unit_id %in% sample(\n            unique(unit_id),\n            length(unique(unit_id)) / 2\n        )),\n        fake_did = fake_treated * post\n    )\n\nplacebo_group &lt;- feols(\n    outcome ~ fake_did | unit_id + year,\n    data = never_treated,\n    cluster = ~unit_id\n)\n\nsummary(placebo_group)\n\nOLS estimation, Dep. Var.: outcome\nObservations: 800\nFixed-effects: unit_id: 100,  year: 8\nStandard-errors: Clustered (unit_id) \n         Estimate Std. Error  t value Pr(&gt;|t|) \nfake_did 0.353765   0.442619 0.799253  0.42606 \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\nRMSE: 2.78359     Adj. R2: 0.756684\n                Within R2: 9.455e-4\n\n# fake_did åº”è¯¥ä¸æ˜¾è‘—",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "åŒé‡å·®åˆ†æ³• (DiD)"
    ]
  },
  {
    "objectID": "1028-did.html#ç»“æœå¯è§†åŒ–",
    "href": "1028-did.html#ç»“æœå¯è§†åŒ–",
    "title": "åŒé‡å·®åˆ†æ³• (DiD) å®Œå…¨æŒ‡å—",
    "section": "ç»“æœå¯è§†åŒ–",
    "text": "ç»“æœå¯è§†åŒ–\n\nDiD å›¾è§£\n\n# åˆ›å»ºç›´è§‚çš„ DiD å¯è§†åŒ–\ndid_visual &lt;- panel_data |&gt;\n    group_by(treated, post) |&gt;\n    summarise(mean_y = mean(outcome), .groups = \"drop\") |&gt;\n    mutate(\n        group = factor(treated, labels = c(\"å¯¹ç…§ç»„\", \"å¤„ç†ç»„\")),\n        period = factor(post, labels = c(\"å¹²é¢„å‰\", \"å¹²é¢„å\"))\n    )\n\n# ç»˜å›¾\nggplot(did_visual, aes(x = period, y = mean_y, color = group, group = group)) +\n    geom_line(linewidth = 1.5) +\n    geom_point(size = 4) +\n    # æ·»åŠ åäº‹å®çº¿\n    geom_segment(\n        aes(\n            x = 1, xend = 2,\n            y = did_visual$mean_y[did_visual$group == \"å¤„ç†ç»„\" & did_visual$period == \"å¹²é¢„å‰\"],\n            yend = did_visual$mean_y[did_visual$group == \"å¤„ç†ç»„\" & did_visual$period == \"å¹²é¢„å‰\"] +\n                diff(did_visual$mean_y[did_visual$group == \"å¯¹ç…§ç»„\"])\n        ),\n        linetype = \"dashed\", color = \"#ef4444\", alpha = 0.5, linewidth = 1\n    ) +\n    # æ ‡æ³¨ DiD\n    annotate(\"segment\",\n        x = 2.1, xend = 2.1,\n        y = did_visual$mean_y[did_visual$group == \"å¤„ç†ç»„\" & did_visual$period == \"å¹²é¢„å\"],\n        yend = did_visual$mean_y[did_visual$group == \"å¤„ç†ç»„\" & did_visual$period == \"å¹²é¢„å‰\"] +\n            diff(did_visual$mean_y[did_visual$group == \"å¯¹ç…§ç»„\"]),\n        arrow = arrow(length = unit(0.3, \"cm\"), ends = \"both\"),\n        color = \"#22c55e\"\n    ) +\n    annotate(\"text\",\n        x = 2.2, y = mean(did_visual$mean_y),\n        label = \"DiD\\næ•ˆåº”\", color = \"#22c55e\", fontface = \"bold\"\n    ) +\n    scale_color_manual(values = c(\"#4f46e5\", \"#ef4444\")) +\n    labs(\n        title = \"åŒé‡å·®åˆ†æ³•å›¾è§£\",\n        subtitle = \"è™šçº¿: å¤„ç†ç»„çš„åäº‹å®è¶‹åŠ¿ï¼ˆå¦‚æœæœªå—å¹²é¢„ï¼‰\",\n        x = \"æ—¶æœŸ\",\n        y = \"ç»“å±€å˜é‡\",\n        color = \"ç»„åˆ«\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(legend.position = \"bottom\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "åŒé‡å·®åˆ†æ³• (DiD)"
    ]
  },
  {
    "objectID": "1028-did.html#å¼‚è´¨æ€§åˆ†æ",
    "href": "1028-did.html#å¼‚è´¨æ€§åˆ†æ",
    "title": "åŒé‡å·®åˆ†æ³• (DiD) å®Œå…¨æŒ‡å—",
    "section": "å¼‚è´¨æ€§åˆ†æ",
    "text": "å¼‚è´¨æ€§åˆ†æ\n\n# æŒ‰åå˜é‡åˆ†ç»„ä¼°è®¡å¼‚è´¨æ€§æ•ˆåº”\npanel_data &lt;- panel_data |&gt;\n    mutate(\n        income_group = ifelse(income &gt; median(income), \"é«˜æ”¶å…¥\", \"ä½æ”¶å…¥\")\n    )\n\n# åˆ†ç»„å›å½’\nhet_model &lt;- feols(\n    outcome ~ did | unit_id + year,\n    data = panel_data,\n    cluster = ~unit_id,\n    split = ~income_group\n)\n\netable(het_model)\n\n                             het_model.1        het_model.2\nSample (income_group)          ä½æ”¶å…¥          é«˜æ”¶å…¥\nDependent Var.:                  outcome            outcome\n                                                           \ndid                   -3.387*** (0.4936) -2.238*** (0.5974)\nFixed-Effects:        ------------------ ------------------\nunit_id                              Yes                Yes\nyear                                 Yes                Yes\n_____________________ __________________ __________________\nS.E.: Clustered              by: unit_id        by: unit_id\nObservations                         799                798\nR2                               0.83248            0.81211\nWithin R2                        0.07877            0.01714\n---\nSignif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "åŒé‡å·®åˆ†æ³• (DiD)"
    ]
  },
  {
    "objectID": "1028-did.html#å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "href": "1028-did.html#å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "title": "åŒé‡å·®åˆ†æ³• (DiD) å®Œå…¨æŒ‡å—",
    "section": "å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "text": "å¸¸è§é—®é¢˜ä¸é™·é˜±\n\n1. å¹³è¡Œè¶‹åŠ¿å‡è®¾\n# è¿™æ˜¯ DiD çš„æ ¸å¿ƒå‡è®¾ï¼Œæ— æ³•ç›´æ¥æ£€éªŒ\n# è§£å†³æ–¹æ¡ˆï¼š\n# - äº‹ä»¶ç ”ç©¶å›¾\n# - å®‰æ…°å‰‚æ£€éªŒ\n# - æ”¶é›†æ›´å¤šå¹²é¢„å‰æ—¶æœŸ\n# - ä½¿ç”¨åˆæˆæ§åˆ¶æ³•ä½œä¸ºè¡¥å……\n\n\n2. é¢„æœŸæ•ˆåº”\n# å¦‚æœå¤„ç†ç»„åœ¨å¹²é¢„å‰å°±å¼€å§‹æ”¹å˜è¡Œä¸º\n# å¹²é¢„å‰ç³»æ•°å¯èƒ½ä¸ä¸º 0\n# éœ€è¦ç†è§£æ”¿ç­–å…¬å¸ƒå’Œå®æ–½çš„æ—¶é—´å·®\n\n\n3. æº¢å‡ºæ•ˆåº”\n# å¦‚æœå¤„ç†å½±å“äº†å¯¹ç…§ç»„\n# DiD ä¼°è®¡ä¼šæœ‰å\n# éœ€è¦é€‰æ‹©ä¸å—å½±å“çš„å¯¹ç…§ç»„\n\n\n4. äº¤é”™å¤„ç†ä¸‹çš„ TWFE é—®é¢˜\n# æ ‡å‡† TWFE åœ¨äº¤é”™å¤„ç†ä¸‹å¯èƒ½æœ‰å\n# æ¨èä½¿ç”¨ï¼š\n# - Callaway-Sant'Anna (2021)\n# - Sun-Abraham (2021)\n# - de Chaisemartin-D'HaultfÅ“uille (2020)\n\n\n5. æ ‡å‡†è¯¯èšç±»\n# é¢æ¿æ•°æ®é€šå¸¸éœ€è¦åœ¨å¤„ç†å•ä½å±‚é¢èšç±»\n# å¦‚æœå¤„ç†å•ä½å°‘ï¼ˆ&lt; 50ï¼‰ï¼Œè€ƒè™‘ Wild bootstrap",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "åŒé‡å·®åˆ†æ³• (DiD)"
    ]
  },
  {
    "objectID": "1028-did.html#å®Œæ•´åˆ†ææ¨¡æ¿",
    "href": "1028-did.html#å®Œæ•´åˆ†ææ¨¡æ¿",
    "title": "åŒé‡å·®åˆ†æ³• (DiD) å®Œå…¨æŒ‡å—",
    "section": "å®Œæ•´åˆ†ææ¨¡æ¿",
    "text": "å®Œæ•´åˆ†ææ¨¡æ¿\n\n# ========== DiD åˆ†æå®Œæ•´æµç¨‹ ==========\n\nlibrary(fixest)\nlibrary(did)\n\n# 1. æ•°æ®å‡†å¤‡\ndata &lt;- data |&gt;\n    mutate(\n        did = treated * post\n    )\n\n# 2. å¯è§†åŒ–è¶‹åŠ¿\n# æ£€æŸ¥å¹²é¢„å‰æ˜¯å¦å¹³è¡Œ\n\n# 3. åŸºç¡€ TWFE ä¼°è®¡\nmodel &lt;- feols(y ~ did | unit + time, data, cluster = ~unit)\n\n# 4. äº‹ä»¶ç ”ç©¶\nes &lt;- feols(y ~ i(rel_time, treated, ref = -1) | unit + time, data)\niplot(es)\n\n# 5. å®‰æ…°å‰‚æ£€éªŒ\n# æ—¶é—´å®‰æ…°å‰‚ + ç»„åˆ«å®‰æ…°å‰‚\n\n# 6. ç¨³å¥æ€§æ£€éªŒ\n# - ä¸åŒæ§åˆ¶ç»„\n# - ä¸åŒæ—¶é—´çª—å£\n# - æ·»åŠ /ç§»é™¤æ§åˆ¶å˜é‡\n\n# 7. äº¤é”™å¤„ç†ï¼ˆå¦‚é€‚ç”¨ï¼‰\ncs &lt;- att_gt(yname, tname, idname, gname, data)\naggte(cs, type = \"simple\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "åŒé‡å·®åˆ†æ³• (DiD)"
    ]
  },
  {
    "objectID": "1028-did.html#æ€»ç»“",
    "href": "1028-did.html#æ€»ç»“",
    "title": "åŒé‡å·®åˆ†æ³• (DiD) å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\næ­¥éª¤\nå†…å®¹\nR å‡½æ•°/åŒ…\n\n\n\n\næ•°æ®å‡†å¤‡\nåˆ›å»º DiD äº¤äº’é¡¹\nmutate()\n\n\nè¶‹åŠ¿å¯è§†åŒ–\næ£€æŸ¥å¹³è¡Œè¶‹åŠ¿\nggplot2\n\n\nTWFE ä¼°è®¡\nåŒå‘å›ºå®šæ•ˆåº”\nfixest::feols()\n\n\näº‹ä»¶ç ”ç©¶\nå¹³è¡Œè¶‹åŠ¿æ£€éªŒ\ni() + iplot()\n\n\näº¤é”™ DiD\nç°ä»£ä¼°è®¡å™¨\ndid::att_gt()\n\n\nå®‰æ…°å‰‚æ£€éªŒ\nç¨³å¥æ€§\næ‰‹åŠ¨æ„é€ \n\n\n\n\næŠ¥å‘Š DiD åˆ†æçš„ Checklist\n\næ¸…æ™°æè¿°å¹²é¢„/æ”¿ç­–\nå®šä¹‰å¤„ç†ç»„å’Œå¯¹ç…§ç»„\næä¾›å¹²é¢„å‰åçš„è¶‹åŠ¿å›¾\næŠ¥å‘Šäº‹ä»¶ç ”ç©¶å›¾ï¼ˆæ£€éªŒå¹³è¡Œè¶‹åŠ¿ï¼‰\næŠ¥å‘Š DiD ä¼°è®¡é‡åŠç½®ä¿¡åŒºé—´\nè¯´æ˜æ ‡å‡†è¯¯èšç±»æ–¹å¼\nè¿›è¡Œå®‰æ…°å‰‚æ£€éªŒ\nè®¨è®ºæ½œåœ¨å¨èƒï¼ˆé¢„æœŸæ•ˆåº”ã€æº¢å‡ºç­‰ï¼‰\n\n\n\næ¨èé˜…è¯»\n\nCunningham S. Causal Inference: The Mixtape\nAngrist JD, Pischke JS. Mostly Harmless Econometrics\nCallaway B, Santâ€™Anna PHC (2021). Difference-in-Differences with Multiple Time Periods. J Econometrics\nfixest åŒ…æ–‡æ¡£\ndid åŒ…æ–‡æ¡£",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "åŒé‡å·®åˆ†æ³• (DiD)"
    ]
  },
  {
    "objectID": "1026-poisson.html",
    "href": "1026-poisson.html",
    "title": "Poisson ä¸è´ŸäºŒé¡¹å›å½’å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "è®¡æ•°æ•°æ®ï¼ˆCount Dataï¼‰ æ˜¯æŒ‡å–å€¼ä¸ºéè´Ÿæ•´æ•°çš„æ•°æ®ï¼ˆ0, 1, 2, 3, â€¦ï¼‰ã€‚Poisson å›å½’å’Œè´ŸäºŒé¡¹å›å½’æ˜¯åˆ†ææ­¤ç±»æ•°æ®çš„æ ¸å¿ƒæ–¹æ³•ã€‚\n\n\n\n\n\nåœºæ™¯\nç¤ºä¾‹\n\n\n\n\nå‘ç—…ç‡ç ”ç©¶\næŸåœ°åŒºç™Œç—‡å‘ç—…äººæ•°\n\n\näº‹æ•…åˆ†æ\näº¤é€šäº‹æ•…æ¬¡æ•°\n\n\nç”Ÿæ€å­¦\næ ·æ–¹ä¸­ç‰©ç§æ•°é‡\n\n\nåŒ»ç–—æœåŠ¡\nå°±è¯Šæ¬¡æ•°ã€ä½é™¢å¤©æ•°\n\n\nè¡Œä¸ºç ”ç©¶\nå¸çƒŸæ”¯æ•°ã€ç¼ºå‹¤å¤©æ•°\n\n\n\n\n\n\nè®¡æ•°æ•°æ®\n    â”‚\n    â”œâ”€â”€ æ–¹å·® â‰ˆ å‡å€¼ï¼Ÿ â”€â”€Yesâ”€â”€â†’ Poisson å›å½’\n    â”‚\n    â””â”€â”€ æ–¹å·® &gt; å‡å€¼ï¼Ÿ â”€â”€Yesâ”€â”€â†’ è´ŸäºŒé¡¹å›å½’ï¼ˆè¿‡ç¦»æ•£ï¼‰\n         â”‚\n         â””â”€â”€ é›¶å€¼è¿‡å¤šï¼Ÿ â”€Yesâ”€â†’ é›¶è†¨èƒ€æ¨¡å‹ï¼ˆZIP/ZINBï¼‰\n\n\n\nPoisson å›å½’ï¼š \\[\\log(\\mu) = \\beta_0 + \\beta_1 X_1 + \\cdots \\quad \\text{å…¶ä¸­ } Y \\sim \\text{Poisson}(\\mu)\\]\nè´ŸäºŒé¡¹å›å½’ï¼š \\[\\log(\\mu) = \\beta_0 + \\beta_1 X_1 + \\cdots \\quad \\text{å…¶ä¸­ } Y \\sim \\text{NegBin}(\\mu, \\theta)\\]\nå›å½’ç³»æ•°è§£è¯»ï¼š\\(e^{\\beta_i}\\) = å‘ç—…ç‡æ¯”ï¼ˆIRR, Incidence Rate Ratioï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Poisson/è´ŸäºŒé¡¹å›å½’"
    ]
  },
  {
    "objectID": "1026-poisson.html#ä»€ä¹ˆæ˜¯è®¡æ•°æ•°æ®å›å½’",
    "href": "1026-poisson.html#ä»€ä¹ˆæ˜¯è®¡æ•°æ•°æ®å›å½’",
    "title": "Poisson ä¸è´ŸäºŒé¡¹å›å½’å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "è®¡æ•°æ•°æ®ï¼ˆCount Dataï¼‰ æ˜¯æŒ‡å–å€¼ä¸ºéè´Ÿæ•´æ•°çš„æ•°æ®ï¼ˆ0, 1, 2, 3, â€¦ï¼‰ã€‚Poisson å›å½’å’Œè´ŸäºŒé¡¹å›å½’æ˜¯åˆ†ææ­¤ç±»æ•°æ®çš„æ ¸å¿ƒæ–¹æ³•ã€‚\n\n\n\n\n\nåœºæ™¯\nç¤ºä¾‹\n\n\n\n\nå‘ç—…ç‡ç ”ç©¶\næŸåœ°åŒºç™Œç—‡å‘ç—…äººæ•°\n\n\näº‹æ•…åˆ†æ\näº¤é€šäº‹æ•…æ¬¡æ•°\n\n\nç”Ÿæ€å­¦\næ ·æ–¹ä¸­ç‰©ç§æ•°é‡\n\n\nåŒ»ç–—æœåŠ¡\nå°±è¯Šæ¬¡æ•°ã€ä½é™¢å¤©æ•°\n\n\nè¡Œä¸ºç ”ç©¶\nå¸çƒŸæ”¯æ•°ã€ç¼ºå‹¤å¤©æ•°\n\n\n\n\n\n\nè®¡æ•°æ•°æ®\n    â”‚\n    â”œâ”€â”€ æ–¹å·® â‰ˆ å‡å€¼ï¼Ÿ â”€â”€Yesâ”€â”€â†’ Poisson å›å½’\n    â”‚\n    â””â”€â”€ æ–¹å·® &gt; å‡å€¼ï¼Ÿ â”€â”€Yesâ”€â”€â†’ è´ŸäºŒé¡¹å›å½’ï¼ˆè¿‡ç¦»æ•£ï¼‰\n         â”‚\n         â””â”€â”€ é›¶å€¼è¿‡å¤šï¼Ÿ â”€Yesâ”€â†’ é›¶è†¨èƒ€æ¨¡å‹ï¼ˆZIP/ZINBï¼‰\n\n\n\nPoisson å›å½’ï¼š \\[\\log(\\mu) = \\beta_0 + \\beta_1 X_1 + \\cdots \\quad \\text{å…¶ä¸­ } Y \\sim \\text{Poisson}(\\mu)\\]\nè´ŸäºŒé¡¹å›å½’ï¼š \\[\\log(\\mu) = \\beta_0 + \\beta_1 X_1 + \\cdots \\quad \\text{å…¶ä¸­ } Y \\sim \\text{NegBin}(\\mu, \\theta)\\]\nå›å½’ç³»æ•°è§£è¯»ï¼š\\(e^{\\beta_i}\\) = å‘ç—…ç‡æ¯”ï¼ˆIRR, Incidence Rate Ratioï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Poisson/è´ŸäºŒé¡¹å›å½’"
    ]
  },
  {
    "objectID": "1026-poisson.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "href": "1026-poisson.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "title": "Poisson ä¸è´ŸäºŒé¡¹å›å½’å®Œå…¨æŒ‡å—",
    "section": "R åŒ…å®‰è£…ä¸åŠ è½½",
    "text": "R åŒ…å®‰è£…ä¸åŠ è½½\n\n# æ ¸å¿ƒåŒ…\nlibrary(MASS) # è´ŸäºŒé¡¹å›å½’\nlibrary(pscl) # é›¶è†¨èƒ€æ¨¡å‹\nlibrary(AER) # è¿‡ç¦»æ•£æ£€éªŒ\nlibrary(performance) # æ¨¡å‹è¯Šæ–­\nlibrary(tidyverse) # æ•°æ®å¤„ç†\nlibrary(broom) # æ¨¡å‹æ•´ç†\nlibrary(gtsummary) # ç»“æœè¡¨æ ¼\nlibrary(ggplot2) # å¯è§†åŒ–",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Poisson/è´ŸäºŒé¡¹å›å½’"
    ]
  },
  {
    "objectID": "1026-poisson.html#æ•°æ®å‡†å¤‡",
    "href": "1026-poisson.html#æ•°æ®å‡†å¤‡",
    "title": "Poisson ä¸è´ŸäºŒé¡¹å›å½’å®Œå…¨æŒ‡å—",
    "section": "æ•°æ®å‡†å¤‡",
    "text": "æ•°æ®å‡†å¤‡\nä½¿ç”¨æ¨¡æ‹Ÿçš„åŒ»ç–—åˆ©ç”¨æ•°æ®ï¼š\n\n# æ¨¡æ‹Ÿæ•°æ®ï¼šå¹´åº¦å°±è¯Šæ¬¡æ•°\nset.seed(2024)\nn &lt;- 800\n\nvisit_data &lt;- tibble(\n    id = 1:n,\n    age = round(runif(n, 20, 80)),\n    sex = factor(sample(c(\"ç”·\", \"å¥³\"), n, replace = TRUE)),\n    chronic = rbinom(n, 3, 0.3), # æ…¢æ€§ç—…æ•°é‡\n    insurance = factor(sample(c(\"æ— \", \"åŸºæœ¬\", \"å•†ä¸š\"), n,\n        replace = TRUE,\n        prob = c(0.2, 0.5, 0.3)\n    )),\n    income = round(rnorm(n, 50, 20)) # æ”¶å…¥ï¼ˆåƒå…ƒï¼‰\n) |&gt;\n    mutate(\n        # ç”Ÿæˆå°±è¯Šæ¬¡æ•°ï¼ˆPoisson åˆ†å¸ƒï¼Œå­˜åœ¨è¿‡ç¦»æ•£ï¼‰\n        log_mu = -0.5 +\n            0.02 * age +\n            0.2 * (sex == \"å¥³\") +\n            0.5 * chronic +\n            0.3 * (insurance == \"åŸºæœ¬\") +\n            0.6 * (insurance == \"å•†ä¸š\") -\n            0.01 * income,\n\n        # æ·»åŠ è¿‡ç¦»æ•£\n        mu = exp(log_mu) * exp(rnorm(n, 0, 0.5)),\n        visits = rpois(n, lambda = mu)\n    ) |&gt;\n    mutate(visits = pmin(visits, 20)) # é™åˆ¶æœ€å¤§å€¼\n\n# æŸ¥çœ‹æ•°æ®\nglimpse(visit_data)\n\nRows: 800\nColumns: 9\n$ id        &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 1â€¦\n$ age       &lt;dbl&gt; 70, 39, 61, 62, 47, 62, 45, 38, 73, 27, 74, 77, 62, 51, 47, â€¦\n$ sex       &lt;fct&gt; ç”·, ç”·, ç”·, ç”·, å¥³, å¥³, ç”·, å¥³, å¥³, å¥³, ç”·, ç”·, ç”·, ç”·, å¥³, ç”·, å¥³, å¥³, å¥³, ç”·, â€¦\n$ chronic   &lt;int&gt; 1, 3, 1, 1, 2, 2, 0, 0, 0, 2, 2, 1, 0, 1, 0, 1, 1, 0, 2, 1, â€¦\n$ insurance &lt;fct&gt; åŸºæœ¬, åŸºæœ¬, å•†ä¸š, åŸºæœ¬, åŸºæœ¬, å•†ä¸š, æ— , åŸºæœ¬, åŸºæœ¬, åŸºæœ¬, åŸºæœ¬, å•†ä¸š, åŸºæœ¬, æ— , å•†ä¸š, å•†ä¸šâ€¦\n$ income    &lt;dbl&gt; 60, 87, 30, 37, 31, 34, 67, 27, 46, 16, 31, 55, 80, 66, 64, â€¦\n$ log_mu    &lt;dbl&gt; 1.10, 1.21, 1.52, 1.17, 1.63, 2.20, -0.27, 0.49, 1.00, 1.38,â€¦\n$ mu        &lt;dbl&gt; 2.6256991, 4.4162407, 2.7385602, 2.9103810, 3.3281252, 15.75â€¦\n$ visits    &lt;dbl&gt; 3, 2, 4, 2, 3, 19, 0, 2, 1, 11, 14, 6, 3, 0, 2, 9, 2, 3, 3, â€¦\n\n# ç»“å±€åˆ†å¸ƒ\ntable(visit_data$visits)\n\n\n  0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  19  20 \n133 140 144 119  77  50  30  26  15  11  14  10   9   3   6   1   2   1   2   7 \n\n\n\næ¢ç´¢æ€§åˆ†æ\n\n# å°±è¯Šæ¬¡æ•°åˆ†å¸ƒ\nggplot(visit_data, aes(x = visits)) +\n    geom_histogram(binwidth = 1, fill = \"#4f46e5\", color = \"white\", alpha = 0.8) +\n    labs(\n        title = \"å¹´åº¦å°±è¯Šæ¬¡æ•°åˆ†å¸ƒ\",\n        x = \"å°±è¯Šæ¬¡æ•°\",\n        y = \"é¢‘æ•°\"\n    ) +\n    theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\n\n# æ£€æŸ¥å‡å€¼å’Œæ–¹å·®\ncat(\"å‡å€¼:\", round(mean(visit_data$visits), 2), \"\\n\")\n\nå‡å€¼: 3.31 \n\ncat(\"æ–¹å·®:\", round(var(visit_data$visits), 2), \"\\n\")\n\næ–¹å·®: 12.33 \n\ncat(\"æ–¹å·®/å‡å€¼æ¯”:\", round(var(visit_data$visits) / mean(visit_data$visits), 2), \"\\n\")\n\næ–¹å·®/å‡å€¼æ¯”: 3.73 \n\n# æ¯”å€¼ &gt; 1 æç¤ºè¿‡ç¦»æ•£",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Poisson/è´ŸäºŒé¡¹å›å½’"
    ]
  },
  {
    "objectID": "1026-poisson.html#poisson-å›å½’",
    "href": "1026-poisson.html#poisson-å›å½’",
    "title": "Poisson ä¸è´ŸäºŒé¡¹å›å½’å®Œå…¨æŒ‡å—",
    "section": "Poisson å›å½’",
    "text": "Poisson å›å½’\n\næ¨¡å‹æ‹Ÿåˆ\n\n# æ‹Ÿåˆ Poisson å›å½’\npois_model &lt;- glm(\n    visits ~ age + sex + chronic + insurance + income,\n    data = visit_data,\n    family = poisson(link = \"log\")\n)\n\nsummary(pois_model)\n\n\nCall:\nglm(formula = visits ~ age + sex + chronic + insurance + income, \n    family = poisson(link = \"log\"), data = visit_data)\n\nCoefficients:\n               Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept)   -0.100855   0.093363  -1.080  0.28003    \nage            0.018205   0.001164  15.644  &lt; 2e-16 ***\nsexå¥³          0.153304   0.039064   3.924 8.69e-05 ***\nchronic        0.534433   0.022469  23.785  &lt; 2e-16 ***\ninsuranceå•†ä¸š  0.457244   0.042523  10.753  &lt; 2e-16 ***\ninsuranceæ—    -0.149484   0.057944  -2.580  0.00989 ** \nincome        -0.009631   0.001021  -9.433  &lt; 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for poisson family taken to be 1)\n\n    Null deviance: 2565.2  on 799  degrees of freedom\nResidual deviance: 1475.9  on 793  degrees of freedom\nAIC: 3482.1\n\nNumber of Fisher Scoring iterations: 5\n\n\n\n\nå‘ç—…ç‡æ¯” (IRR)\n\n# æå– IRR åŠç½®ä¿¡åŒºé—´\ntidy(pois_model, conf.int = TRUE, exponentiate = TRUE) |&gt;\n    filter(term != \"(Intercept)\") |&gt;\n    select(term, IRR = estimate, conf.low, conf.high, p.value) |&gt;\n    mutate(across(c(IRR, conf.low, conf.high), ~ round(.x, 3)))\n\n# A tibble: 6 Ã— 5\n  term            IRR conf.low conf.high   p.value\n  &lt;chr&gt;         &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;\n1 age           1.02     1.02      1.02  3.63e- 55\n2 sexå¥³         1.17     1.08      1.26  8.69e-  5\n3 chronic       1.71     1.63      1.78  4.75e-125\n4 insuranceå•†ä¸š 1.58     1.45      1.72  5.74e- 27\n5 insuranceæ—    0.861    0.768     0.964 9.89e-  3\n6 income        0.99     0.988     0.992 3.99e- 21\n\n\n\n\næ•´æ´è¾“å‡º\n\npois_model |&gt;\n    tbl_regression(\n        exponentiate = TRUE,\n        label = list(\n            age ~ \"å¹´é¾„\",\n            sex ~ \"æ€§åˆ«\",\n            chronic ~ \"æ…¢æ€§ç—…æ•°é‡\",\n            insurance ~ \"ä¿é™©ç±»å‹\",\n            income ~ \"æ”¶å…¥ï¼ˆåƒå…ƒï¼‰\"\n        )\n    ) |&gt;\n    bold_p() |&gt;\n    modify_header(label = \"**å˜é‡**\", estimate = \"**IRR**\")\n\n\n\n\n\n\n\n\n\n\n\n\n\nå˜é‡\nIRR\n95% CI\np-value\n\n\n\n\nå¹´é¾„\n1.02\n1.02, 1.02\n&lt;0.001\n\n\næ€§åˆ«\n\n\n\n\n\n\n\n\nÂ Â Â Â ç”·\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â å¥³\n1.17\n1.08, 1.26\n&lt;0.001\n\n\næ…¢æ€§ç—…æ•°é‡\n1.71\n1.63, 1.78\n&lt;0.001\n\n\nä¿é™©ç±»å‹\n\n\n\n\n\n\n\n\nÂ Â Â Â åŸºæœ¬\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â å•†ä¸š\n1.58\n1.45, 1.72\n&lt;0.001\n\n\nÂ Â Â Â æ— \n0.86\n0.77, 0.96\n0.010\n\n\næ”¶å…¥ï¼ˆåƒå…ƒï¼‰\n0.99\n0.99, 0.99\n&lt;0.001\n\n\n\nAbbreviations: CI = Confidence Interval, IRR = Incidence Rate Ratio",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Poisson/è´ŸäºŒé¡¹å›å½’"
    ]
  },
  {
    "objectID": "1026-poisson.html#è¿‡ç¦»æ•£æ£€éªŒ",
    "href": "1026-poisson.html#è¿‡ç¦»æ•£æ£€éªŒ",
    "title": "Poisson ä¸è´ŸäºŒé¡¹å›å½’å®Œå…¨æŒ‡å—",
    "section": "è¿‡ç¦»æ•£æ£€éªŒ",
    "text": "è¿‡ç¦»æ•£æ£€éªŒ\n\næ–¹æ³• 1ï¼šæ®‹å·®ç¦»æ•£å‚æ•°\n\n# è®¡ç®—è¿‡ç¦»æ•£å‚æ•°\nn_obs &lt;- nrow(visit_data)\nn_params &lt;- length(coef(pois_model))\n\n# Pearson æ®‹å·®\npearson_resid &lt;- residuals(pois_model, type = \"pearson\")\ndispersion &lt;- sum(pearson_resid^2) / (n_obs - n_params)\n\ncat(\"ç¦»æ•£å‚æ•°:\", round(dispersion, 3), \"\\n\")\n\nç¦»æ•£å‚æ•°: 1.903 \n\n# æ˜¾è‘— &gt; 1 æç¤ºè¿‡ç¦»æ•£\n\n\n\næ–¹æ³• 2ï¼šAER åŒ…æ£€éªŒ\n\n# æ­£å¼çš„è¿‡ç¦»æ•£æ£€éªŒ\ndispersiontest(pois_model)\n\n\n    Overdispersion test\n\ndata:  pois_model\nz = 6.6702, p-value = 1.277e-11\nalternative hypothesis: true dispersion is greater than 1\nsample estimates:\ndispersion \n  1.893057 \n\n# p &lt; 0.05 æ‹’ç» \"æ— è¿‡ç¦»æ•£\" åŸå‡è®¾\n\n\n\næ–¹æ³• 3ï¼šå¯è§†åŒ–æ£€éªŒ\n\n# è§‚å¯Ÿå€¼ vs æ¨¡å‹é¢„æµ‹\nvisit_data$fitted_pois &lt;- fitted(pois_model)\n\nggplot(visit_data, aes(x = fitted_pois, y = visits)) +\n    geom_jitter(alpha = 0.4, color = \"#4f46e5\", width = 0.2, height = 0.2) +\n    geom_abline(slope = 1, intercept = 0, color = \"red\", linetype = \"dashed\") +\n    labs(\n        title = \"è§‚å¯Ÿå€¼ vs é¢„æµ‹å€¼\",\n        x = \"Poisson æ¨¡å‹é¢„æµ‹å€¼\",\n        y = \"å®é™…å°±è¯Šæ¬¡æ•°\"\n    ) +\n    theme_minimal(base_size = 12)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Poisson/è´ŸäºŒé¡¹å›å½’"
    ]
  },
  {
    "objectID": "1026-poisson.html#è´ŸäºŒé¡¹å›å½’",
    "href": "1026-poisson.html#è´ŸäºŒé¡¹å›å½’",
    "title": "Poisson ä¸è´ŸäºŒé¡¹å›å½’å®Œå…¨æŒ‡å—",
    "section": "è´ŸäºŒé¡¹å›å½’",
    "text": "è´ŸäºŒé¡¹å›å½’\nå½“å­˜åœ¨è¿‡ç¦»æ•£æ—¶ï¼Œä½¿ç”¨è´ŸäºŒé¡¹åˆ†å¸ƒï¼š\n\n# æ‹Ÿåˆè´ŸäºŒé¡¹å›å½’\nnb_model &lt;- glm.nb(\n    visits ~ age + sex + chronic + insurance + income,\n    data = visit_data\n)\n\nsummary(nb_model)\n\n\nCall:\nglm.nb(formula = visits ~ age + sex + chronic + insurance + income, \n    data = visit_data, init.theta = 4.232512845, link = log)\n\nCoefficients:\n               Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept)   -0.102368   0.125472  -0.816  0.41458    \nage            0.018353   0.001596  11.496  &lt; 2e-16 ***\nsexå¥³          0.157906   0.054640   2.890  0.00385 ** \nchronic        0.543248   0.032946  16.489  &lt; 2e-16 ***\ninsuranceå•†ä¸š  0.451984   0.060441   7.478 7.54e-14 ***\ninsuranceæ—    -0.169898   0.076867  -2.210  0.02709 *  \nincome        -0.009902   0.001430  -6.926 4.33e-12 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for Negative Binomial(4.2325) family taken to be 1)\n\n    Null deviance: 1475.5  on 799  degrees of freedom\nResidual deviance:  888.4  on 793  degrees of freedom\nAIC: 3304\n\nNumber of Fisher Scoring iterations: 1\n\n              Theta:  4.233 \n          Std. Err.:  0.524 \n\n 2 x log-likelihood:  -3287.960 \n\n\n\n# æŸ¥çœ‹ç¦»æ•£å‚æ•° theta\ncat(\"theta:\", nb_model$theta, \"\\n\")\n\ntheta: 4.232513 \n\ncat(\"æ ‡å‡†è¯¯:\", nb_model$SE.theta, \"\\n\")\n\næ ‡å‡†è¯¯: 0.5241768 \n\n# theta è¶Šå°ï¼Œè¿‡ç¦»æ•£è¶Šä¸¥é‡\n\n\nè´ŸäºŒé¡¹ vs Poisson æ¯”è¾ƒ\n\n# ä½¿ç”¨ AIC æ¯”è¾ƒ\nAIC(pois_model, nb_model)\n\n           df      AIC\npois_model  7 3482.087\nnb_model    8 3303.960\n\n# ä¼¼ç„¶æ¯”æ£€éªŒ\nlrtest &lt;- 2 * (logLik(nb_model) - logLik(pois_model))\np_value &lt;- pchisq(lrtest, df = 1, lower.tail = FALSE)\ncat(\"ä¼¼ç„¶æ¯”æ£€éªŒ p å€¼:\", format.pval(p_value, digits = 3), \"\\n\")\n\nä¼¼ç„¶æ¯”æ£€éªŒ p å€¼: &lt;2e-16 \n\n\n\n\nè´ŸäºŒé¡¹å›å½’ç»“æœ\n\nnb_model |&gt;\n    tbl_regression(\n        exponentiate = TRUE,\n        label = list(\n            age ~ \"å¹´é¾„\",\n            sex ~ \"æ€§åˆ«\",\n            chronic ~ \"æ…¢æ€§ç—…æ•°é‡\",\n            insurance ~ \"ä¿é™©ç±»å‹\",\n            income ~ \"æ”¶å…¥ï¼ˆåƒå…ƒï¼‰\"\n        )\n    ) |&gt;\n    add_significance_stars() |&gt;\n    modify_header(label = \"**å˜é‡**\", estimate = \"**IRR**\")\n\n\n\n\n\n\n\n\n\n\n\n\nå˜é‡\nIRR1\nSE\n\n\n\n\nå¹´é¾„\n1.02***\n0.002\n\n\næ€§åˆ«\n\n\n\n\n\n\nÂ Â Â Â ç”·\nâ€”\nâ€”\n\n\nÂ Â Â Â å¥³\n1.17**\n0.055\n\n\næ…¢æ€§ç—…æ•°é‡\n1.72***\n0.033\n\n\nä¿é™©ç±»å‹\n\n\n\n\n\n\nÂ Â Â Â åŸºæœ¬\nâ€”\nâ€”\n\n\nÂ Â Â Â å•†ä¸š\n1.57***\n0.060\n\n\nÂ Â Â Â æ— \n0.84*\n0.077\n\n\næ”¶å…¥ï¼ˆåƒå…ƒï¼‰\n0.99***\n0.001\n\n\n\n1 p&lt;0.05; p&lt;0.01; p&lt;0.001\n\n\nAbbreviations: CI = Confidence Interval, IRR = Incidence Rate Ratio, SE = Standard Error",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Poisson/è´ŸäºŒé¡¹å›å½’"
    ]
  },
  {
    "objectID": "1026-poisson.html#é›¶è†¨èƒ€æ¨¡å‹",
    "href": "1026-poisson.html#é›¶è†¨èƒ€æ¨¡å‹",
    "title": "Poisson ä¸è´ŸäºŒé¡¹å›å½’å®Œå…¨æŒ‡å—",
    "section": "é›¶è†¨èƒ€æ¨¡å‹",
    "text": "é›¶è†¨èƒ€æ¨¡å‹\nå½“é›¶å€¼è¿‡å¤šæ—¶ï¼ˆè¶…è¿‡ Poisson/è´ŸäºŒé¡¹é¢„æœŸï¼‰ï¼Œä½¿ç”¨é›¶è†¨èƒ€æ¨¡å‹ã€‚\n\næ£€éªŒé›¶å€¼è¿‡å¤š\n\n# è§‚å¯Ÿé›¶å€¼æ¯”ä¾‹\nzero_observed &lt;- mean(visit_data$visits == 0)\n\n# Poisson æ¨¡å‹é¢„æœŸçš„é›¶å€¼æ¯”ä¾‹\nzero_expected_pois &lt;- mean(dpois(0, fitted(pois_model)))\n\n# è´ŸäºŒé¡¹é¢„æœŸçš„é›¶å€¼æ¯”ä¾‹\nzero_expected_nb &lt;- mean(dnbinom(0, mu = fitted(nb_model), size = nb_model$theta))\n\ncat(\"è§‚å¯Ÿé›¶å€¼æ¯”ä¾‹:\", round(zero_observed * 100, 1), \"%\\n\")\n\nè§‚å¯Ÿé›¶å€¼æ¯”ä¾‹: 16.6 %\n\ncat(\"Poisson é¢„æœŸ:\", round(zero_expected_pois * 100, 1), \"%\\n\")\n\nPoisson é¢„æœŸ: 11.3 %\n\ncat(\"è´ŸäºŒé¡¹é¢„æœŸ:\", round(zero_expected_nb * 100, 1), \"%\\n\")\n\nè´ŸäºŒé¡¹é¢„æœŸ: 16 %\n\n\n\n\né›¶è†¨èƒ€ Poisson (ZIP)\n\n# é›¶è†¨èƒ€ Poisson æ¨¡å‹\nzip_model &lt;- zeroinfl(\n    visits ~ age + sex + chronic + insurance + income |\n        chronic + insurance, # é›¶è†¨èƒ€éƒ¨åˆ†çš„é¢„æµ‹å˜é‡\n    data = visit_data,\n    dist = \"poisson\"\n)\n\nsummary(zip_model)\n\n\nCall:\nzeroinfl(formula = visits ~ age + sex + chronic + insurance + income | \n    chronic + insurance, data = visit_data, dist = \"poisson\")\n\nPearson residuals:\n    Min      1Q  Median      3Q     Max \n-2.3680 -0.8888 -0.2849  0.5524  6.7491 \n\nCount model coefficients (poisson with log link):\n               Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept)    0.010637   0.097094   0.110 0.912761    \nage            0.018078   0.001202  15.038  &lt; 2e-16 ***\nsexå¥³          0.154005   0.040058   3.845 0.000121 ***\nchronic        0.476440   0.024271  19.630  &lt; 2e-16 ***\ninsuranceå•†ä¸š  0.433576   0.044523   9.738  &lt; 2e-16 ***\ninsuranceæ—    -0.147719   0.062056  -2.380 0.017294 *  \nincome        -0.009093   0.001039  -8.753  &lt; 2e-16 ***\n\nZero-inflation model coefficients (binomial with logit link):\n              Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept)    -1.5463     0.3060  -5.054 4.34e-07 ***\nchronic        -1.6892     0.4521  -3.737 0.000187 ***\ninsuranceå•†ä¸š  -0.4877     0.4990  -0.977 0.328345    \ninsuranceæ—      0.2234     0.5678   0.393 0.694002    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 \n\nNumber of iterations in BFGS optimization: 18 \nLog-likelihood: -1715 on 11 Df\n\n\n\n\né›¶è†¨èƒ€è´ŸäºŒé¡¹ (ZINB)\n\n# é›¶è†¨èƒ€è´ŸäºŒé¡¹æ¨¡å‹\nzinb_model &lt;- zeroinfl(\n    visits ~ age + sex + chronic + insurance + income |\n        chronic + insurance,\n    data = visit_data,\n    dist = \"negbin\"\n)\n\nsummary(zinb_model)\n\n\nCall:\nzeroinfl(formula = visits ~ age + sex + chronic + insurance + income | \n    chronic + insurance, data = visit_data, dist = \"negbin\")\n\nPearson residuals:\n    Min      1Q  Median      3Q     Max \n-1.5813 -0.7646 -0.2429  0.4725  5.0418 \n\nCount model coefficients (negbin with log link):\n               Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept)   -0.050550   0.125108  -0.404  0.68617    \nage            0.018443   0.001593  11.580  &lt; 2e-16 ***\nsexå¥³          0.157523   0.054189   2.907  0.00365 ** \nchronic        0.505921   0.035358  14.309  &lt; 2e-16 ***\ninsuranceå•†ä¸š  0.442216   0.061320   7.212 5.53e-13 ***\ninsuranceæ—    -0.163720   0.078923  -2.074  0.03804 *  \nincome        -0.009695   0.001404  -6.907 4.94e-12 ***\nLog(theta)     1.539889   0.132239  11.645  &lt; 2e-16 ***\n\nZero-inflation model coefficients (binomial with logit link):\n              Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept)    -2.2545     0.6072  -3.713 0.000205 ***\nchronic        -9.8971    77.2154  -0.128 0.898011    \ninsuranceå•†ä¸š  -0.4379     1.0229  -0.428 0.668626    \ninsuranceæ—      0.3481     1.0506   0.331 0.740390    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 \n\nTheta = 4.6641 \nNumber of iterations in BFGS optimization: 26 \nLog-likelihood: -1641 on 12 Df\n\n\n\n\næ¨¡å‹æ¯”è¾ƒ\n\n# Vuong æ£€éªŒï¼šæ¯”è¾ƒé›¶è†¨èƒ€æ¨¡å‹ä¸æ ‡å‡†æ¨¡å‹\nvuong(zip_model, pois_model)\n\nVuong Non-Nested Hypothesis Test-Statistic: \n(test-statistic is asymptotically distributed N(0,1) under the\n null that the models are indistinguishible)\n-------------------------------------------------------------\n              Vuong z-statistic             H_A   p-value\nRaw                   2.6247360 model1 &gt; model2 0.0043358\nAIC-corrected         2.0872706 model1 &gt; model2 0.0184318\nBIC-corrected         0.8283623 model1 &gt; model2 0.2037327\n\nvuong(zinb_model, nb_model)\n\nVuong Non-Nested Hypothesis Test-Statistic: \n(test-statistic is asymptotically distributed N(0,1) under the\n null that the models are indistinguishible)\n-------------------------------------------------------------\n              Vuong z-statistic             H_A    p-value\nRaw                    1.225645 model1 &gt; model2    0.11017\nAIC-corrected         -0.361933 model2 &gt; model1    0.35870\nBIC-corrected         -4.080527 model2 &gt; model1 2.2467e-05\n\n# AIC æ¯”è¾ƒ\nAIC(pois_model, nb_model, zip_model, zinb_model)\n\n           df      AIC\npois_model  7 3482.087\nnb_model    8 3303.960\nzip_model  11 3451.018\nzinb_model 12 3305.784",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Poisson/è´ŸäºŒé¡¹å›å½’"
    ]
  },
  {
    "objectID": "1026-poisson.html#æš´éœ²æ—¶é—´è°ƒæ•´rate-æ¨¡å‹",
    "href": "1026-poisson.html#æš´éœ²æ—¶é—´è°ƒæ•´rate-æ¨¡å‹",
    "title": "Poisson ä¸è´ŸäºŒé¡¹å›å½’å®Œå…¨æŒ‡å—",
    "section": "æš´éœ²æ—¶é—´è°ƒæ•´ï¼ˆRate æ¨¡å‹ï¼‰",
    "text": "æš´éœ²æ—¶é—´è°ƒæ•´ï¼ˆRate æ¨¡å‹ï¼‰\nå½“è§‚å¯Ÿæ—¶é—´ä¸åŒæ—¶ï¼Œéœ€è¦ä½¿ç”¨åç§»é‡ï¼ˆoffsetï¼‰ï¼š\n\n# æ·»åŠ éšè®¿æ—¶é—´\nvisit_data &lt;- visit_data |&gt;\n    mutate(\n        followup_years = runif(n, 0.5, 2) # éšè®¿æ—¶é—´ï¼ˆå¹´ï¼‰\n    )\n\n# ä½¿ç”¨ offset è°ƒæ•´æš´éœ²æ—¶é—´\npois_rate &lt;- glm(\n    visits ~ age + sex + chronic + insurance + offset(log(followup_years)),\n    data = visit_data,\n    family = poisson\n)\n\nsummary(pois_rate)\n\n\nCall:\nglm(formula = visits ~ age + sex + chronic + insurance + offset(log(followup_years)), \n    family = poisson, data = visit_data)\n\nCoefficients:\n               Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept)   -0.744336   0.080359  -9.263  &lt; 2e-16 ***\nage            0.017713   0.001174  15.085  &lt; 2e-16 ***\nsexå¥³          0.149779   0.039073   3.833 0.000126 ***\nchronic        0.518782   0.022418  23.142  &lt; 2e-16 ***\ninsuranceå•†ä¸š  0.471642   0.042386  11.127  &lt; 2e-16 ***\ninsuranceæ—    -0.151766   0.057893  -2.621 0.008755 ** \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for poisson family taken to be 1)\n\n    Null deviance: 2795.2  on 799  degrees of freedom\nResidual deviance: 1834.2  on 794  degrees of freedom\nAIC: 3838.4\n\nNumber of Fisher Scoring iterations: 5\n\n\n\n# ç»“æœè§£è¯»ä¸ºå‘ç—…ç‡æ¯”ï¼ˆæ¯äººå¹´ï¼‰\ntidy(pois_rate, conf.int = TRUE, exponentiate = TRUE) |&gt;\n    filter(term != \"(Intercept)\") |&gt;\n    select(term, IRR = estimate, conf.low, conf.high, p.value)\n\n# A tibble: 5 Ã— 5\n  term            IRR conf.low conf.high   p.value\n  &lt;chr&gt;         &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;\n1 age           1.02     1.02      1.02  2.02e- 51\n2 sexå¥³         1.16     1.08      1.25  1.26e-  4\n3 chronic       1.68     1.61      1.76  1.77e-118\n4 insuranceå•†ä¸š 1.60     1.47      1.74  9.25e- 29\n5 insuranceæ—    0.859    0.766     0.962 8.75e-  3",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Poisson/è´ŸäºŒé¡¹å›å½’"
    ]
  },
  {
    "objectID": "1026-poisson.html#æ¨¡å‹è¯Šæ–­",
    "href": "1026-poisson.html#æ¨¡å‹è¯Šæ–­",
    "title": "Poisson ä¸è´ŸäºŒé¡¹å›å½’å®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹è¯Šæ–­",
    "text": "æ¨¡å‹è¯Šæ–­\n\næ®‹å·®åˆ†æ\n\n# Deviance æ®‹å·®\nvisit_data$resid_dev &lt;- residuals(nb_model, type = \"deviance\")\n\nggplot(visit_data, aes(x = fitted(nb_model), y = resid_dev)) +\n    geom_point(alpha = 0.4, color = \"#4f46e5\") +\n    geom_hline(yintercept = 0, linetype = \"dashed\", color = \"red\") +\n    geom_smooth(method = \"loess\", color = \"#10b981\", se = FALSE) +\n    labs(\n        title = \"Deviance æ®‹å·® vs æ‹Ÿåˆå€¼\",\n        x = \"æ‹Ÿåˆå€¼\",\n        y = \"Deviance æ®‹å·®\"\n    ) +\n    theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\n\n\nç»¼åˆè¯Šæ–­\n\ncheck_model(nb_model, check = c(\"qq\", \"outliers\", \"homogeneity\"))\n\n\n\n\n\n\n\n\n\n\nå½±å“è¯Šæ–­\n\n# Cook's è·ç¦»\nvisit_data$cooks_d &lt;- cooks.distance(nb_model)\n\n# è¯†åˆ«é«˜å½±å“åŠ›è§‚æµ‹\nhigh_influence &lt;- which(visit_data$cooks_d &gt; 4 / nrow(visit_data))\ncat(\"é«˜å½±å“åŠ›è§‚æµ‹æ•°é‡:\", length(high_influence), \"\\n\")\n\né«˜å½±å“åŠ›è§‚æµ‹æ•°é‡: 36",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Poisson/è´ŸäºŒé¡¹å›å½’"
    ]
  },
  {
    "objectID": "1026-poisson.html#é¢„æµ‹",
    "href": "1026-poisson.html#é¢„æµ‹",
    "title": "Poisson ä¸è´ŸäºŒé¡¹å›å½’å®Œå…¨æŒ‡å—",
    "section": "é¢„æµ‹",
    "text": "é¢„æµ‹\n\nä¸ªä½“é¢„æµ‹\n\n# æ–°æ•°æ®é¢„æµ‹\nnew_data &lt;- tibble(\n    age = c(40, 60, 80),\n    sex = factor(c(\"ç”·\", \"å¥³\", \"ç”·\"), levels = levels(visit_data$sex)),\n    chronic = c(0, 1, 2),\n    insurance = factor(c(\"æ— \", \"åŸºæœ¬\", \"å•†ä¸š\"), levels = levels(visit_data$insurance)),\n    income = c(60, 50, 40)\n)\n\n# é¢„æµ‹æœŸæœ›å€¼\npred &lt;- predict(nb_model, newdata = new_data, type = \"response\", se.fit = TRUE)\n\nnew_data |&gt;\n    mutate(\n        predicted = round(pred$fit, 2),\n        se = round(pred$se.fit, 2),\n        lower = round(pred$fit - 1.96 * pred$se.fit, 2),\n        upper = round(pred$fit + 1.96 * pred$se.fit, 2)\n    )\n\n# A tibble: 3 Ã— 9\n    age sex   chronic insurance income predicted    se lower upper\n  &lt;dbl&gt; &lt;fct&gt;   &lt;dbl&gt; &lt;fct&gt;      &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1    40 ç”·          0 æ—             60      0.88  0.08  0.73  1.02\n2    60 å¥³          1 åŸºæœ¬          50      3.34  0.16  3.02  3.66\n3    80 ç”·          2 å•†ä¸š          40     12.3   0.94 10.4  14.1 \n\n\n\n\nè¾¹é™…æ•ˆåº”å¯è§†åŒ–\n\n# å¹´é¾„çš„è¾¹é™…æ•ˆåº”\nlibrary(ggeffects)\n\npred_age &lt;- ggpredict(nb_model, terms = \"age [20:80]\")\n\nplot(pred_age) +\n    labs(\n        title = \"å¹´é¾„ä¸é¢„æµ‹å°±è¯Šæ¬¡æ•°çš„å…³ç³»\",\n        x = \"å¹´é¾„\",\n        y = \"é¢„æµ‹å°±è¯Šæ¬¡æ•°\"\n    ) +\n    theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\n\n# å¤šå˜é‡é¢„æµ‹å›¾\npred_chronic &lt;- ggpredict(nb_model, terms = c(\"chronic [0:3]\", \"insurance\"))\n\nplot(pred_chronic) +\n    labs(\n        title = \"æ…¢æ€§ç—…æ•°é‡ä¸å°±è¯Šæ¬¡æ•°ï¼ˆæŒ‰ä¿é™©ç±»å‹ï¼‰\",\n        x = \"æ…¢æ€§ç—…æ•°é‡\",\n        y = \"é¢„æµ‹å°±è¯Šæ¬¡æ•°\",\n        color = \"ä¿é™©ç±»å‹\"\n    ) +\n    theme_minimal(base_size = 12)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Poisson/è´ŸäºŒé¡¹å›å½’"
    ]
  },
  {
    "objectID": "1026-poisson.html#ç¨³å¥æ ‡å‡†è¯¯",
    "href": "1026-poisson.html#ç¨³å¥æ ‡å‡†è¯¯",
    "title": "Poisson ä¸è´ŸäºŒé¡¹å›å½’å®Œå…¨æŒ‡å—",
    "section": "ç¨³å¥æ ‡å‡†è¯¯",
    "text": "ç¨³å¥æ ‡å‡†è¯¯\n\nlibrary(sandwich)\nlibrary(lmtest)\n\n# ä½¿ç”¨ç¨³å¥æ ‡å‡†è¯¯\ncoeftest(nb_model, vcov = vcovHC(nb_model, type = \"HC1\"))\n\n\nz test of coefficients:\n\n                Estimate Std. Error z value  Pr(&gt;|z|)    \n(Intercept)   -0.1023680  0.1295706 -0.7901  0.429495    \nage            0.0183534  0.0016220 11.3151 &lt; 2.2e-16 ***\nsexå¥³          0.1579062  0.0567742  2.7813  0.005414 ** \nchronic        0.5432478  0.0329738 16.4751 &lt; 2.2e-16 ***\ninsuranceå•†ä¸š  0.4519842  0.0641486  7.0459 1.843e-12 ***\ninsuranceæ—    -0.1698983  0.0732351 -2.3199  0.020346 *  \nincome        -0.0099020  0.0014155 -6.9953 2.648e-12 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Poisson/è´ŸäºŒé¡¹å›å½’"
    ]
  },
  {
    "objectID": "1026-poisson.html#æŠ¥å‘Šæ ¼å¼",
    "href": "1026-poisson.html#æŠ¥å‘Šæ ¼å¼",
    "title": "Poisson ä¸è´ŸäºŒé¡¹å›å½’å®Œå…¨æŒ‡å—",
    "section": "æŠ¥å‘Šæ ¼å¼",
    "text": "æŠ¥å‘Šæ ¼å¼\n\n# å®Œæ•´æŠ¥å‘Šè¡¨æ ¼\nnb_model |&gt;\n    tbl_regression(\n        exponentiate = TRUE,\n        label = list(\n            age ~ \"å¹´é¾„ï¼ˆæ¯å¢åŠ 1å²ï¼‰\",\n            sex ~ \"æ€§åˆ«\",\n            chronic ~ \"æ…¢æ€§ç—…æ•°é‡ï¼ˆæ¯å¢åŠ 1ç§ï¼‰\",\n            insurance ~ \"ä¿é™©ç±»å‹\",\n            income ~ \"æ”¶å…¥ï¼ˆæ¯å¢åŠ 1åƒå…ƒï¼‰\"\n        ),\n        pvalue_fun = ~ style_pvalue(.x, digits = 3)\n    ) |&gt;\n    add_global_p() |&gt;\n    add_glance_table(include = c(AIC, BIC, nobs)) |&gt;\n    modify_header(label = \"**å˜é‡**\", estimate = \"**IRR**\") |&gt;\n    modify_caption(\"**è¡¨. è´ŸäºŒé¡¹å›å½’åˆ†æç»“æœ**\") |&gt;\n    modify_footnote(estimate = \"IRR = å‘ç—…ç‡æ¯”\")\n\n\n\n\n\nè¡¨. è´ŸäºŒé¡¹å›å½’åˆ†æç»“æœ\n\n\n\n\n\n\n\n\nå˜é‡\nIRR1\n95% CI\np-value\n\n\n\n\nå¹´é¾„ï¼ˆæ¯å¢åŠ 1å²ï¼‰\n1.02\n1.02, 1.02\n&lt;0.001\n\n\næ€§åˆ«\n\n\n\n\n0.004\n\n\nÂ Â Â Â ç”·\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â å¥³\n1.17\n1.05, 1.30\n\n\n\n\næ…¢æ€§ç—…æ•°é‡ï¼ˆæ¯å¢åŠ 1ç§ï¼‰\n1.72\n1.61, 1.84\n&lt;0.001\n\n\nä¿é™©ç±»å‹\n\n\n\n\n&lt;0.001\n\n\nÂ Â Â Â åŸºæœ¬\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â å•†ä¸š\n1.57\n1.40, 1.77\n\n\n\n\nÂ Â Â Â æ— \n0.84\n0.73, 0.98\n\n\n\n\næ”¶å…¥ï¼ˆæ¯å¢åŠ 1åƒå…ƒï¼‰\n0.99\n0.99, 0.99\n&lt;0.001\n\n\nAIC\n3,304\n\n\n\n\n\n\nBIC\n3,341\n\n\n\n\n\n\nNo. Obs.\n800\n\n\n\n\n\n\n\n1 IRR = å‘ç—…ç‡æ¯”\n\n\nAbbreviations: CI = Confidence Interval, IRR = Incidence Rate Ratio",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Poisson/è´ŸäºŒé¡¹å›å½’"
    ]
  },
  {
    "objectID": "1026-poisson.html#å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "href": "1026-poisson.html#å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "title": "Poisson ä¸è´ŸäºŒé¡¹å›å½’å®Œå…¨æŒ‡å—",
    "section": "å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "text": "å¸¸è§é—®é¢˜ä¸é™·é˜±\n\n1. Poisson vs è´ŸäºŒé¡¹é€‰æ‹©\n\n\n\nPoisson\nè´ŸäºŒé¡¹\n\n\n\n\næ–¹å·® = å‡å€¼\næ–¹å·® &gt; å‡å€¼\n\n\næ— è¿‡ç¦»æ•£\nå­˜åœ¨è¿‡ç¦»æ•£\n\n\næ›´ç®€æ´\næ›´çµæ´»\n\n\nè®¡ç®—æ›´å¿«\né¢å¤–ä¼°è®¡ Î¸\n\n\n\n\n\n2. é›¶è†¨èƒ€æ¨¡å‹çš„ä½¿ç”¨\n# ä»…å½“ä»¥ä¸‹æ¡ä»¶æ»¡è¶³æ—¶ä½¿ç”¨ï¼š\n# 1. é›¶å€¼æ¯”ä¾‹æ˜æ˜¾é«˜äºæ¨¡å‹é¢„æœŸ\n# 2. å­˜åœ¨æ˜ç¡®çš„\"ç»“æ„æ€§é›¶\"ï¼ˆæ°¸è¿œä¸ä¼šå‘ç”Ÿï¼‰\n# 3. æ™®é€šæ¨¡å‹æ— æ³•å¾ˆå¥½æ‹Ÿåˆ\n\n# ä¾‹å¦‚ï¼šä»ä¸å¸çƒŸè€…çš„å¸çƒŸé‡ï¼ˆç»“æ„æ€§é›¶ï¼‰\n\n\n3. æš´éœ²æ—¶é—´å·®å¼‚\n# å¿…é¡»ä½¿ç”¨ offset è°ƒæ•´ï¼\n# é”™è¯¯ï¼šglm(events ~ x, family = poisson)\n# æ­£ç¡®ï¼šglm(events ~ x + offset(log(time)), family = poisson)\n\n\n4. ç›¸å¯¹é£é™© vs å‘ç—…ç‡æ¯”\n# Poisson/è´ŸäºŒé¡¹å›å½’ä¼°è®¡çš„æ˜¯ IRRï¼Œä¸æ˜¯ RR\n# å¯¹äºç½•è§äº‹ä»¶ï¼ŒIRR â‰ˆ RR\n# å¯¹äºå¸¸è§äº‹ä»¶ï¼Œä¸¤è€…å¯èƒ½å·®å¼‚è¾ƒå¤§",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Poisson/è´ŸäºŒé¡¹å›å½’"
    ]
  },
  {
    "objectID": "1026-poisson.html#å®Œæ•´åˆ†ææ¨¡æ¿",
    "href": "1026-poisson.html#å®Œæ•´åˆ†ææ¨¡æ¿",
    "title": "Poisson ä¸è´ŸäºŒé¡¹å›å½’å®Œå…¨æŒ‡å—",
    "section": "å®Œæ•´åˆ†ææ¨¡æ¿",
    "text": "å®Œæ•´åˆ†ææ¨¡æ¿\n\n# ========== è®¡æ•°æ•°æ®å›å½’å®Œæ•´æµç¨‹ ==========\n\nlibrary(MASS)\nlibrary(AER)\nlibrary(pscl)\n\n# 1. æ¢ç´¢æ•°æ®\nmean(y)\nvar(y) # æ£€æŸ¥å‡å€¼/æ–¹å·®\ntable(y == 0) # é›¶å€¼æ¯”ä¾‹\n\n# 2. æ‹Ÿåˆ Poisson æ¨¡å‹\npois &lt;- glm(y ~ x1 + x2, family = poisson, data = data)\n\n# 3. æ£€éªŒè¿‡ç¦»æ•£\ndispersiontest(pois)\n\n# 4. å¦‚æœè¿‡ç¦»æ•£ï¼Œæ‹Ÿåˆè´ŸäºŒé¡¹\nnb &lt;- glm.nb(y ~ x1 + x2, data = data)\nAIC(pois, nb)\n\n# 5. æ£€éªŒé›¶è†¨èƒ€\nmean(y == 0)\nmean(dpois(0, fitted(pois)))\n\n# 6. å¦‚éœ€è¦ï¼Œæ‹Ÿåˆé›¶è†¨èƒ€æ¨¡å‹\nzinb &lt;- zeroinfl(y ~ x1 + x2 | z1, dist = \"negbin\", data = data)\n\n# 7. ç»“æœå‘ˆç°\ntbl_regression(nb, exponentiate = TRUE)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Poisson/è´ŸäºŒé¡¹å›å½’"
    ]
  },
  {
    "objectID": "1026-poisson.html#æ€»ç»“",
    "href": "1026-poisson.html#æ€»ç»“",
    "title": "Poisson ä¸è´ŸäºŒé¡¹å›å½’å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\n\n\n\n\n\næ¨¡å‹\né€‚ç”¨æ¡ä»¶\nR å‡½æ•°\n\n\n\n\nPoisson\næ–¹å·®â‰ˆå‡å€¼ï¼Œæ— è¿‡ç¦»æ•£\nglm(..., family = poisson)\n\n\nè´ŸäºŒé¡¹\næ–¹å·®&gt;å‡å€¼ï¼Œå­˜åœ¨è¿‡ç¦»æ•£\nMASS::glm.nb()\n\n\né›¶è†¨èƒ€ Poisson\né›¶å€¼è¿‡å¤š\npscl::zeroinfl(..., dist = \"poisson\")\n\n\né›¶è†¨èƒ€è´ŸäºŒé¡¹\né›¶å€¼è¿‡å¤š + è¿‡ç¦»æ•£\npscl::zeroinfl(..., dist = \"negbin\")\n\n\n\n\næŠ¥å‘Šè®¡æ•°æ•°æ®å›å½’çš„ Checklist\n\næè¿°ç»“å±€å˜é‡åˆ†å¸ƒï¼ˆå‡å€¼ã€æ–¹å·®ã€é›¶å€¼æ¯”ä¾‹ï¼‰\næŠ¥å‘Šè¿‡ç¦»æ•£æ£€éªŒç»“æœ\næ˜ç¡®ä½¿ç”¨çš„æ¨¡å‹ç±»å‹åŠç†ç”±\næŠ¥å‘Š IRR åŠ 95% CI\nå¦‚æœ‰æš´éœ²æ—¶é—´å·®å¼‚ï¼Œè¯´æ˜ offset ä½¿ç”¨\næŠ¥å‘Šæ¨¡å‹æ‹ŸåˆæŒ‡æ ‡ï¼ˆAIC/BICï¼‰\nè¿›è¡Œæ®‹å·®è¯Šæ–­\n\n\n\næ¨èé˜…è¯»\n\nCameron AC, Trivedi PK. Regression Analysis of Count Data (2nd ed.)\nHilbe JM. Negative Binomial Regression (2nd ed.)\nUCLA: è®¡æ•°æ•°æ®å›å½’",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Poisson/è´ŸäºŒé¡¹å›å½’"
    ]
  },
  {
    "objectID": "1024-multilevel.html",
    "href": "1024-multilevel.html",
    "title": "å¤šæ°´å¹³/æ··åˆæ•ˆåº”æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "å¤šæ°´å¹³æ¨¡å‹ï¼ˆMultilevel Modelï¼‰ï¼Œä¹Ÿç§°æ··åˆæ•ˆåº”æ¨¡å‹ï¼ˆMixed Effects Modelï¼‰ æˆ–å±‚æ¬¡æ¨¡å‹ï¼ˆHierarchical Modelï¼‰ï¼Œç”¨äºåˆ†æå…·æœ‰åµŒå¥—/å±‚æ¬¡ç»“æ„çš„æ•°æ®ã€‚\n\n\n\n\n\nå±‚æ¬¡ç»“æ„\nç¬¬ä¸€å±‚\nç¬¬äºŒå±‚\nç¬¬ä¸‰å±‚\n\n\n\n\næ•™è‚²ç ”ç©¶\nå­¦ç”Ÿ\nç­çº§\nå­¦æ ¡\n\n\nä¸´åºŠè¯•éªŒ\næµ‹é‡æ—¶ç‚¹\næ‚£è€…\nåŒ»é™¢\n\n\nå¿ƒç†å­¦\nè¯•éªŒ\nè¢«è¯•\nå®éªŒæ¡ä»¶\n\n\nç»„ç»‡è¡Œä¸º\nå‘˜å·¥\nå›¢é˜Ÿ\nå…¬å¸\n\n\n\n\n\n\n\nè¿åç‹¬ç«‹æ€§å‡è®¾ï¼šåŒä¸€ç»„å†…çš„è§‚æµ‹ä¸ç‹¬ç«‹\né¿å…èšåˆåå·®ï¼šä¿æŒåŸå§‹æ•°æ®å±‚æ¬¡\næ­£ç¡®ä¼°è®¡æ–¹å·®ï¼šè€ƒè™‘ç»„å†…ç›¸å…³æ€§\nç ”ç©¶è·¨å±‚æ•ˆåº”ï¼šæ¢ç´¢ä¸åŒå±‚æ¬¡å˜é‡çš„å½±å“\n\n\n\n\n\n\n\næ¦‚å¿µ\nå®šä¹‰\n\n\n\n\nå›ºå®šæ•ˆåº”\næ‰€æœ‰ç»„å…±äº«çš„æ•ˆåº”ï¼ˆæ€»ä½“å¹³å‡ï¼‰\n\n\néšæœºæ•ˆåº”\nå„ç»„ç‰¹æœ‰çš„éšæœºå˜å¼‚\n\n\néšæœºæˆªè·\nå„ç»„çš„åŸºçº¿æ°´å¹³ä¸åŒ\n\n\néšæœºæ–œç‡\nå„ç»„çš„æ•ˆåº”å¼ºåº¦ä¸åŒ\n\n\nICC\nç»„å†…ç›¸å…³ç³»æ•°ï¼Œç»„é—´æ–¹å·®å æ€»æ–¹å·®çš„æ¯”ä¾‹",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šæ°´å¹³æ¨¡å‹"
    ]
  },
  {
    "objectID": "1024-multilevel.html#ä»€ä¹ˆæ˜¯å¤šæ°´å¹³æ¨¡å‹",
    "href": "1024-multilevel.html#ä»€ä¹ˆæ˜¯å¤šæ°´å¹³æ¨¡å‹",
    "title": "å¤šæ°´å¹³/æ··åˆæ•ˆåº”æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "å¤šæ°´å¹³æ¨¡å‹ï¼ˆMultilevel Modelï¼‰ï¼Œä¹Ÿç§°æ··åˆæ•ˆåº”æ¨¡å‹ï¼ˆMixed Effects Modelï¼‰ æˆ–å±‚æ¬¡æ¨¡å‹ï¼ˆHierarchical Modelï¼‰ï¼Œç”¨äºåˆ†æå…·æœ‰åµŒå¥—/å±‚æ¬¡ç»“æ„çš„æ•°æ®ã€‚\n\n\n\n\n\nå±‚æ¬¡ç»“æ„\nç¬¬ä¸€å±‚\nç¬¬äºŒå±‚\nç¬¬ä¸‰å±‚\n\n\n\n\næ•™è‚²ç ”ç©¶\nå­¦ç”Ÿ\nç­çº§\nå­¦æ ¡\n\n\nä¸´åºŠè¯•éªŒ\næµ‹é‡æ—¶ç‚¹\næ‚£è€…\nåŒ»é™¢\n\n\nå¿ƒç†å­¦\nè¯•éªŒ\nè¢«è¯•\nå®éªŒæ¡ä»¶\n\n\nç»„ç»‡è¡Œä¸º\nå‘˜å·¥\nå›¢é˜Ÿ\nå…¬å¸\n\n\n\n\n\n\n\nè¿åç‹¬ç«‹æ€§å‡è®¾ï¼šåŒä¸€ç»„å†…çš„è§‚æµ‹ä¸ç‹¬ç«‹\né¿å…èšåˆåå·®ï¼šä¿æŒåŸå§‹æ•°æ®å±‚æ¬¡\næ­£ç¡®ä¼°è®¡æ–¹å·®ï¼šè€ƒè™‘ç»„å†…ç›¸å…³æ€§\nç ”ç©¶è·¨å±‚æ•ˆåº”ï¼šæ¢ç´¢ä¸åŒå±‚æ¬¡å˜é‡çš„å½±å“\n\n\n\n\n\n\n\næ¦‚å¿µ\nå®šä¹‰\n\n\n\n\nå›ºå®šæ•ˆåº”\næ‰€æœ‰ç»„å…±äº«çš„æ•ˆåº”ï¼ˆæ€»ä½“å¹³å‡ï¼‰\n\n\néšæœºæ•ˆåº”\nå„ç»„ç‰¹æœ‰çš„éšæœºå˜å¼‚\n\n\néšæœºæˆªè·\nå„ç»„çš„åŸºçº¿æ°´å¹³ä¸åŒ\n\n\néšæœºæ–œç‡\nå„ç»„çš„æ•ˆåº”å¼ºåº¦ä¸åŒ\n\n\nICC\nç»„å†…ç›¸å…³ç³»æ•°ï¼Œç»„é—´æ–¹å·®å æ€»æ–¹å·®çš„æ¯”ä¾‹",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šæ°´å¹³æ¨¡å‹"
    ]
  },
  {
    "objectID": "1024-multilevel.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "href": "1024-multilevel.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "title": "å¤šæ°´å¹³/æ··åˆæ•ˆåº”æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "R åŒ…å®‰è£…ä¸åŠ è½½",
    "text": "R åŒ…å®‰è£…ä¸åŠ è½½\n\n# æ ¸å¿ƒåŒ…\nlibrary(lme4)         # æ··åˆæ•ˆåº”æ¨¡å‹ä¸»åŠ›åŒ…\nlibrary(lmerTest)     # æä¾› p å€¼\nlibrary(performance)  # æ¨¡å‹è¯Šæ–­\nlibrary(sjPlot)       # ç»“æœå¯è§†åŒ–\nlibrary(tidyverse)    # æ•°æ®å¤„ç†\nlibrary(broom.mixed)  # æ¨¡å‹æ•´ç†\nlibrary(MuMIn)        # æ¨¡å‹æ¯”è¾ƒ",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šæ°´å¹³æ¨¡å‹"
    ]
  },
  {
    "objectID": "1024-multilevel.html#æ•°æ®å‡†å¤‡",
    "href": "1024-multilevel.html#æ•°æ®å‡†å¤‡",
    "title": "å¤šæ°´å¹³/æ··åˆæ•ˆåº”æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "æ•°æ®å‡†å¤‡",
    "text": "æ•°æ®å‡†å¤‡\nä½¿ç”¨æ¨¡æ‹Ÿçš„æ•™è‚²æ•°æ®ï¼šå­¦ç”Ÿæˆç»©ï¼ˆå­¦ç”ŸåµŒå¥—åœ¨ç­çº§ä¸­ï¼‰\n\n# æ¨¡æ‹Ÿä¸¤å±‚åµŒå¥—æ•°æ®\nset.seed(2024)\n\nn_classes &lt;- 30      # ç­çº§æ•°\nn_students &lt;- 20     # æ¯ç­å­¦ç”Ÿæ•°\nN &lt;- n_classes * n_students  # æ€»æ ·æœ¬é‡\n\n# ç”Ÿæˆç­çº§å±‚é¢æ•°æ®\nclass_data &lt;- tibble(\n  class_id = 1:n_classes,\n  teacher_exp = round(runif(n_classes, 1, 20)),  # æ•™å¸ˆç»éªŒï¼ˆå¹´ï¼‰\n  class_size = sample(25:40, n_classes, replace = TRUE),\n  # ç­çº§å±‚é¢éšæœºæ•ˆåº”\n  class_intercept = rnorm(n_classes, 0, 8),      # éšæœºæˆªè·\n  class_slope = rnorm(n_classes, 0, 0.3)         # éšæœºæ–œç‡\n)\n\n# ç”Ÿæˆå­¦ç”Ÿå±‚é¢æ•°æ®\nstudent_data &lt;- tibble(\n  student_id = 1:N,\n  class_id = rep(1:n_classes, each = n_students),\n  # å­¦ç”Ÿå˜é‡\n  prior_score = round(rnorm(N, 70, 12)),         # å…ˆå‰æˆç»©\n  study_hours = round(pmax(0, rnorm(N, 10, 4))), # å­¦ä¹ æ—¶é•¿\n  gender = factor(sample(c(\"ç”·\", \"å¥³\"), N, replace = TRUE))\n) |&gt;\n  left_join(class_data, by = \"class_id\") |&gt;\n  mutate(\n    # ç”Ÿæˆç»“å±€ï¼šæ•°å­¦æˆç»©\n    score = 20 +\n      0.5 * prior_score +                        # ä¸ªä½“æ•ˆåº”\n      (2 + class_slope) * study_hours +          # éšæœºæ–œç‡æ•ˆåº”\n      0.8 * teacher_exp +                        # ç­çº§æ•ˆåº”\n      class_intercept +                          # éšæœºæˆªè·\n      rnorm(N, 0, 8)                             # æ®‹å·®\n  ) |&gt;\n  mutate(\n    score = round(pmin(100, pmax(0, score))),\n    class_id = factor(class_id)\n  )\n\n# æŸ¥çœ‹æ•°æ®\nglimpse(student_data)\n\nRows: 600\nColumns: 10\n$ student_id      &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16,â€¦\n$ class_id        &lt;fct&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, â€¦\n$ prior_score     &lt;dbl&gt; 55, 64, 62, 78, 77, 45, 56, 56, 70, 84, 97, 75, 83, 72â€¦\n$ study_hours     &lt;dbl&gt; 9, 9, 13, 14, 13, 7, 8, 17, 17, 4, 6, 15, 9, 6, 8, 6, â€¦\n$ gender          &lt;fct&gt; å¥³, å¥³, ç”·, ç”·, å¥³, å¥³, ç”·, ç”·, ç”·, å¥³, ç”·, å¥³, å¥³, ç”·, å¥³, ç”·, å¥³, å¥³, â€¦\n$ teacher_exp     &lt;dbl&gt; 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17â€¦\n$ class_size      &lt;int&gt; 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38, 38â€¦\n$ class_intercept &lt;dbl&gt; -11.51835, -11.51835, -11.51835, -11.51835, -11.51835,â€¦\n$ class_slope     &lt;dbl&gt; 0.4778841, 0.4778841, 0.4778841, 0.4778841, 0.4778841,â€¦\n$ score           &lt;dbl&gt; 68, 88, 76, 100, 91, 69, 69, 87, 100, 68, 90, 100, 78,â€¦\n\n\n\næ¢ç´¢æ€§åˆ†æ\n\n# æŸ¥çœ‹å„ç­çº§æˆç»©åˆ†å¸ƒ\nggplot(student_data, aes(x = class_id, y = score, fill = class_id)) +\n  geom_boxplot(show.legend = FALSE, alpha = 0.7) +\n  scale_fill_viridis_d() +\n  labs(\n    title = \"å„ç­çº§æ•°å­¦æˆç»©åˆ†å¸ƒ\",\n    x = \"ç­çº§\",\n    y = \"æˆç»©\"\n  ) +\n  theme_minimal(base_size = 11) +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n\n\n\n\n\n\n\n\n\n# å„ç­çº§å›å½’çº¿\nggplot(student_data, aes(x = study_hours, y = score, color = class_id)) +\n  geom_point(alpha = 0.3, size = 1) +\n  geom_smooth(method = \"lm\", se = FALSE, linewidth = 0.5) +\n  scale_color_viridis_d() +\n  labs(\n    title = \"å­¦ä¹ æ—¶é•¿ä¸æˆç»©çš„å…³ç³»ï¼ˆæŒ‰ç­çº§ï¼‰\",\n    subtitle = \"æ–œç‡çš„å˜å¼‚æç¤ºéœ€è¦éšæœºæ–œç‡æ¨¡å‹\",\n    x = \"æ¯å‘¨å­¦ä¹ æ—¶é•¿\",\n    y = \"æ•°å­¦æˆç»©\"\n  ) +\n  theme_minimal(base_size = 12) +\n  theme(legend.position = \"none\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šæ°´å¹³æ¨¡å‹"
    ]
  },
  {
    "objectID": "1024-multilevel.html#è®¡ç®—ç»„å†…ç›¸å…³ç³»æ•°-icc",
    "href": "1024-multilevel.html#è®¡ç®—ç»„å†…ç›¸å…³ç³»æ•°-icc",
    "title": "å¤šæ°´å¹³/æ··åˆæ•ˆåº”æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "è®¡ç®—ç»„å†…ç›¸å…³ç³»æ•° (ICC)",
    "text": "è®¡ç®—ç»„å†…ç›¸å…³ç³»æ•° (ICC)\nICC è¡¡é‡ç»„é—´å˜å¼‚å æ€»å˜å¼‚çš„æ¯”ä¾‹ï¼Œç”¨äºåˆ¤æ–­æ˜¯å¦éœ€è¦å¤šæ°´å¹³æ¨¡å‹ã€‚\n\n# æ‹Ÿåˆç©ºæ¨¡å‹ï¼ˆä»…å«éšæœºæˆªè·ï¼‰\nnull_model &lt;- lmer(score ~ 1 + (1 | class_id), data = student_data)\n\n# è®¡ç®— ICC\nicc(null_model)\n\n# Intraclass Correlation Coefficient\n\n    Adjusted ICC: 0.294\n  Unadjusted ICC: 0.294\n\n\nè§£è¯»ï¼š - ICC &gt; 0.05 é€šå¸¸å»ºè®®ä½¿ç”¨å¤šæ°´å¹³æ¨¡å‹ - ICC è¡¨ç¤ºçº¦ X% çš„æˆç»©å·®å¼‚å½’å› äºç­çº§é—´å·®å¼‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šæ°´å¹³æ¨¡å‹"
    ]
  },
  {
    "objectID": "1024-multilevel.html#æ¨¡å‹æ„å»º",
    "href": "1024-multilevel.html#æ¨¡å‹æ„å»º",
    "title": "å¤šæ°´å¹³/æ··åˆæ•ˆåº”æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹æ„å»º",
    "text": "æ¨¡å‹æ„å»º\n\næ¨¡å‹ 1ï¼šéšæœºæˆªè·æ¨¡å‹\n\n# éšæœºæˆªè·æ¨¡å‹\n# (1 | class_id) è¡¨ç¤ºç­çº§æœ‰ä¸åŒçš„åŸºå‡†æ°´å¹³\nmodel1 &lt;- lmer(\n  score ~ study_hours + prior_score + gender + (1 | class_id),\n  data = student_data\n)\n\nsummary(model1)\n\nLinear mixed model fit by REML. t-tests use Satterthwaite's method [\nlmerModLmerTest]\nFormula: score ~ study_hours + prior_score + gender + (1 | class_id)\n   Data: student_data\n\nREML criterion at convergence: 4180\n\nScaled residuals: \n    Min      1Q  Median      3Q     Max \n-3.3501 -0.6802  0.0232  0.6909  2.7313 \n\nRandom effects:\n Groups   Name        Variance Std.Dev.\n class_id (Intercept) 49.27    7.019   \n Residual             53.41    7.308   \nNumber of obs: 600, groups:  class_id, 30\n\nFixed effects:\n             Estimate Std. Error        df t value Pr(&gt;|t|)    \n(Intercept)  37.07606    2.41343 253.77145  15.362   &lt;2e-16 ***\nstudy_hours   1.72842    0.07830 570.76205  22.075   &lt;2e-16 ***\nprior_score   0.40721    0.02598 568.70999  15.672   &lt;2e-16 ***\ngenderå¥³     -0.18581    0.61609 570.82714  -0.302    0.763    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nCorrelation of Fixed Effects:\n\n\n            (Intr) stdy_h prr_sc\nstudy_hours -0.330              \nprior_score -0.764  0.010       \ngenderå¥³    -0.148 -0.012  0.033\n\n\n\n\næ¨¡å‹ 2ï¼šéšæœºæ–œç‡æ¨¡å‹\n\n# éšæœºæ–œç‡æ¨¡å‹\n# (study_hours | class_id) è¡¨ç¤ºå­¦ä¹ æ—¶é•¿çš„æ•ˆåº”å› ç­çº§è€Œå¼‚\nmodel2 &lt;- lmer(\n  score ~ study_hours + prior_score + gender + (study_hours | class_id),\n  data = student_data\n)\n\nsummary(model2)\n\nLinear mixed model fit by REML. t-tests use Satterthwaite's method [\nlmerModLmerTest]\nFormula: score ~ study_hours + prior_score + gender + (study_hours | class_id)\n   Data: student_data\n\nREML criterion at convergence: 4171.8\n\nScaled residuals: \n    Min      1Q  Median      3Q     Max \n-3.4465 -0.6501  0.0372  0.7114  2.7951 \n\nRandom effects:\n Groups   Name        Variance Std.Dev. Corr \n class_id (Intercept) 86.86538 9.3202        \n          study_hours  0.05472 0.2339   -1.00\n Residual             52.63035 7.2547        \nNumber of obs: 600, groups:  class_id, 30\n\nFixed effects:\n             Estimate Std. Error        df t value Pr(&gt;|t|)    \n(Intercept)  36.94511    2.64657 106.90776  13.960   &lt;2e-16 ***\nstudy_hours   1.72766    0.08858  62.90176  19.503   &lt;2e-16 ***\nprior_score   0.40979    0.02577 568.62417  15.899   &lt;2e-16 ***\ngenderå¥³     -0.26772    0.61022 570.19279  -0.439    0.661    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nCorrelation of Fixed Effects:\n\n\n            (Intr) stdy_h prr_sc\nstudy_hours -0.570              \nprior_score -0.690  0.006       \ngenderå¥³    -0.134 -0.009  0.033\noptimizer (nloptwrap) convergence code: 0 (OK)\nboundary (singular) fit: see help('isSingular')\n\n\n\n\næ¨¡å‹ 3ï¼šæ·»åŠ è·¨å±‚å˜é‡\n\n# æ·»åŠ ç­çº§å±‚é¢çš„è§£é‡Šå˜é‡\nmodel3 &lt;- lmer(\n  score ~ study_hours + prior_score + gender + teacher_exp + \n    (study_hours | class_id),\n  data = student_data\n)\n\nsummary(model3)\n\nLinear mixed model fit by REML. t-tests use Satterthwaite's method [\nlmerModLmerTest]\nFormula: \nscore ~ study_hours + prior_score + gender + teacher_exp + (study_hours |  \n    class_id)\n   Data: student_data\n\nREML criterion at convergence: 4164\n\nScaled residuals: \n    Min      1Q  Median      3Q     Max \n-3.3693 -0.6613  0.0374  0.7236  2.7826 \n\nRandom effects:\n Groups   Name        Variance Std.Dev. Corr \n class_id (Intercept) 71.6293  8.4634        \n          study_hours  0.0599  0.2448   -1.00\n Residual             52.5735  7.2508        \nNumber of obs: 600, groups:  class_id, 30\n\nFixed effects:\n             Estimate Std. Error        df t value Pr(&gt;|t|)    \n(Intercept)  30.81048    3.13697 101.58371   9.822  &lt; 2e-16 ***\nstudy_hours   1.73530    0.08950  56.62115  19.389  &lt; 2e-16 ***\nprior_score   0.40914    0.02575 568.95067  15.886  &lt; 2e-16 ***\ngenderå¥³     -0.26085    0.60933 570.92035  -0.428  0.66874    \nteacher_exp   0.56942    0.17116  28.83962   3.327  0.00241 ** \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nCorrelation of Fixed Effects:\n\n\n            (Intr) stdy_h prr_sc gendrå¥³\nstudy_hours -0.478                      \nprior_score -0.572  0.005               \ngenderå¥³    -0.116 -0.009  0.033        \nteacher_exp -0.584  0.027 -0.016  0.004 \noptimizer (nloptwrap) convergence code: 0 (OK)\nboundary (singular) fit: see help('isSingular')\n\n\n\n\næ¨¡å‹ 4ï¼šè·¨å±‚äº¤äº’ä½œç”¨\n\n# æ£€éªŒæ•™å¸ˆç»éªŒæ˜¯å¦è°ƒèŠ‚å­¦ä¹ æ—¶é•¿çš„æ•ˆåº”\nmodel4 &lt;- lmer(\n  score ~ study_hours * teacher_exp + prior_score + gender + \n    (study_hours | class_id),\n  data = student_data\n)\n\nsummary(model4)\n\nLinear mixed model fit by REML. t-tests use Satterthwaite's method [\nlmerModLmerTest]\nFormula: \nscore ~ study_hours * teacher_exp + prior_score + gender + (study_hours |  \n    class_id)\n   Data: student_data\n\nREML criterion at convergence: 4170.1\n\nScaled residuals: \n    Min      1Q  Median      3Q     Max \n-3.4071 -0.6581  0.0418  0.7183  2.7709 \n\nRandom effects:\n Groups   Name        Variance Std.Dev. Corr \n class_id (Intercept) 72.56481 8.518         \n          study_hours  0.06201 0.249    -1.00\n Residual             52.61972 7.254         \nNumber of obs: 600, groups:  class_id, 30\n\nFixed effects:\n                         Estimate Std. Error        df t value Pr(&gt;|t|)    \n(Intercept)              29.18486    4.13454  43.62636   7.059 9.80e-09 ***\nstudy_hours               1.83367    0.18552  50.45406   9.884 2.16e-13 ***\nteacher_exp               0.72122    0.30398  28.35875   2.373   0.0247 *  \nprior_score               0.40945    0.02577 568.04888  15.889  &lt; 2e-16 ***\ngenderå¥³                 -0.27831    0.61019 569.48840  -0.456   0.6485    \nstudy_hours:teacher_exp  -0.00935    0.01543  53.35172  -0.606   0.5472    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nCorrelation of Fixed Effects:\n\n\n            (Intr) stdy_h tchr_x prr_sc gendrå¥³\nstudy_hours -0.746                             \nteacher_exp -0.786  0.731                      \nprior_score -0.445  0.018  0.006               \ngenderå¥³    -0.059 -0.043 -0.034  0.032        \nstdy_hrs:t_  0.650 -0.875 -0.827 -0.018  0.045 \noptimizer (nloptwrap) convergence code: 0 (OK)\nboundary (singular) fit: see help('isSingular')",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šæ°´å¹³æ¨¡å‹"
    ]
  },
  {
    "objectID": "1024-multilevel.html#æ¨¡å‹æ¯”è¾ƒ",
    "href": "1024-multilevel.html#æ¨¡å‹æ¯”è¾ƒ",
    "title": "å¤šæ°´å¹³/æ··åˆæ•ˆåº”æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹æ¯”è¾ƒ",
    "text": "æ¨¡å‹æ¯”è¾ƒ\n\nä¼¼ç„¶æ¯”æ£€éªŒ\n\n# æ¯”è¾ƒéšæœºæˆªè· vs éšæœºæ–œç‡æ¨¡å‹\nanova(model1, model2)  # æ£€éªŒéšæœºæ–œç‡æ˜¯å¦å¿…è¦\n\nData: student_data\nModels:\nmodel1: score ~ study_hours + prior_score + gender + (1 | class_id)\nmodel2: score ~ study_hours + prior_score + gender + (study_hours | class_id)\n       npar    AIC    BIC  logLik -2*log(L)  Chisq Df Pr(&gt;Chisq)  \nmodel1    6 4186.5 4212.9 -2087.3    4174.5                       \nmodel2    8 4182.3 4217.5 -2083.2    4166.3 8.2451  2     0.0162 *\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\n\n\nä¿¡æ¯å‡†åˆ™æ¯”è¾ƒ\n\n# AIC/BIC æ¯”è¾ƒ\nmodel_comparison &lt;- data.frame(\n  Model = c(\"éšæœºæˆªè·\", \"éšæœºæ–œç‡\", \"å«è·¨å±‚å˜é‡\", \"å«äº¤äº’ä½œç”¨\"),\n  AIC = c(AIC(model1), AIC(model2), AIC(model3), AIC(model4)),\n  BIC = c(BIC(model1), BIC(model2), BIC(model3), BIC(model4))\n) |&gt;\n  mutate(\n    Delta_AIC = AIC - min(AIC),\n    Delta_BIC = BIC - min(BIC)\n  )\n\nmodel_comparison\n\n       Model      AIC      BIC Delta_AIC Delta_BIC\n1   éšæœºæˆªè· 4192.037 4218.419 10.035207  0.000000\n2   éšæœºæ–œç‡ 4187.841 4223.016  5.838907  4.597560\n3 å«è·¨å±‚å˜é‡ 4182.002 4221.574  0.000000  3.155582\n4 å«äº¤äº’ä½œç”¨ 4190.142 4234.111  8.140060 15.692572\n\n\n\n\nRÂ² è®¡ç®—\n\n# è¾¹é™… RÂ²ï¼ˆä»…å›ºå®šæ•ˆåº”ï¼‰å’Œæ¡ä»¶ RÂ²ï¼ˆå›ºå®š+éšæœºæ•ˆåº”ï¼‰\nr2(model3)\n\nRandom effect variances not available. Returned R2 does not account for random effects.\n\n\n# R2 for Mixed Models\n\n  Conditional R2: NA\n     Marginal R2: 0.600",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šæ°´å¹³æ¨¡å‹"
    ]
  },
  {
    "objectID": "1024-multilevel.html#ç»“æœè§£é‡Š",
    "href": "1024-multilevel.html#ç»“æœè§£é‡Š",
    "title": "å¤šæ°´å¹³/æ··åˆæ•ˆåº”æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç»“æœè§£é‡Š",
    "text": "ç»“æœè§£é‡Š\n\nå›ºå®šæ•ˆåº”\n\n# æå–å›ºå®šæ•ˆåº”\nfixef(model3)\n\n(Intercept) study_hours prior_score    genderå¥³ teacher_exp \n 30.8104788   1.7352975   0.4091422  -0.2608521   0.5694199 \n\n# ç½®ä¿¡åŒºé—´\nconfint(model3, parm = \"beta_\", method = \"Wald\")\n\n                 2.5 %     97.5 %\n(Intercept) 24.6621365 36.9588210\nstudy_hours  1.5598819  1.9107131\nprior_score  0.3586641  0.4596204\ngenderå¥³    -1.4551098  0.9334056\nteacher_exp  0.2339522  0.9048876\n\n\n\n\néšæœºæ•ˆåº”\n\n# éšæœºæ•ˆåº”æ–¹å·®\nVarCorr(model3)\n\n Groups   Name        Std.Dev. Corr  \n class_id (Intercept) 8.46341        \n          study_hours 0.24475  -1.000\n Residual             7.25076        \n\n# å„ç­çº§çš„éšæœºæ•ˆåº”\nranef(model3)$class_id |&gt; head(10)\n\n   (Intercept) study_hours\n1    -8.913800  0.25777883\n2     1.026193 -0.02967655\n3     1.075480 -0.03110190\n4     9.109699 -0.26344406\n5     2.028876 -0.05867322\n6     2.553099 -0.07383327\n7    -2.481370  0.07175894\n8    -2.517308  0.07279822\n9    -3.838791  0.11101429\n10   -6.177900  0.17865914\n\n\n\n\næ•´æ´è¾“å‡º\n\n# ä½¿ç”¨ sjPlot ç”Ÿæˆè¡¨æ ¼\ntab_model(model3,\n          show.se = TRUE,\n          show.ci = 0.95,\n          show.stat = TRUE,\n          title = \"å¤šæ°´å¹³çº¿æ€§å›å½’ç»“æœ\")\n\n\nå¤šæ°´å¹³çº¿æ€§å›å½’ç»“æœ\n\nÂ \nscore\n\n\nPredictors\nEstimates\nstd. Error\nCI\nStatistic\np\n\n\n(Intercept)\n30.81\n3.14\n24.65Â â€“Â 36.97\n9.82\n&lt;0.001\n\n\nstudy hours\n1.74\n0.09\n1.56Â â€“Â 1.91\n19.39\n&lt;0.001\n\n\nprior score\n0.41\n0.03\n0.36Â â€“Â 0.46\n15.89\n&lt;0.001\n\n\ngender [å¥³]\n-0.26\n0.61\n-1.46Â â€“Â 0.94\n-0.43\n0.669\n\n\nteacher exp\n0.57\n0.17\n0.23Â â€“Â 0.91\n3.33\n0.001\n\n\nRandom Effects\n\n\n\nÏƒ2\n52.57\n\n\n\nÏ„00 class_id\n71.63\n\n\nÏ„11 class_id.study_hours\n0.06\n\n\nÏ01 class_id\n-1.00\n\n\nN class_id\n30\n\nObservations\n600\n\n\nMarginal R2 / Conditional R2\n0.600 / NA",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šæ°´å¹³æ¨¡å‹"
    ]
  },
  {
    "objectID": "1024-multilevel.html#æ¨¡å‹è¯Šæ–­",
    "href": "1024-multilevel.html#æ¨¡å‹è¯Šæ–­",
    "title": "å¤šæ°´å¹³/æ··åˆæ•ˆåº”æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹è¯Šæ–­",
    "text": "æ¨¡å‹è¯Šæ–­\n\næ®‹å·®æ£€éªŒ\n\n# ç»¼åˆè¯Šæ–­\ncheck_model(model3)\n\n\n\n\n\n\n\n\n\n\næ­£æ€æ€§æ£€éªŒ\n\n# ç¬¬ä¸€å±‚æ®‹å·®\nplot(model3, type = c(\"p\", \"smooth\"))\n\n\n\n\n\n\n\n# ç¬¬äºŒå±‚éšæœºæ•ˆåº”\nqqnorm(ranef(model3)$class_id$`(Intercept)`, main = \"éšæœºæˆªè· Q-Q å›¾\")\nqqline(ranef(model3)$class_id$`(Intercept)`)\n\n\n\n\n\n\n\n\n\n\nå½±å“è¯Šæ–­\n\n# æ£€æµ‹æœ‰å½±å“åŠ›çš„ç»„\ninfluence_class &lt;- influence(model3, group = \"class_id\")\n\n# Cook's è·ç¦»\ncooks_d &lt;- cooks.distance(influence_class)\nplot(cooks_d, type = \"h\", main = \"å„ç­çº§ Cook's è·ç¦»\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šæ°´å¹³æ¨¡å‹"
    ]
  },
  {
    "objectID": "1024-multilevel.html#å¯è§†åŒ–",
    "href": "1024-multilevel.html#å¯è§†åŒ–",
    "title": "å¤šæ°´å¹³/æ··åˆæ•ˆåº”æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å¯è§†åŒ–",
    "text": "å¯è§†åŒ–\n\nå›ºå®šæ•ˆåº”å¯è§†åŒ–\n\n# å›ºå®šæ•ˆåº”æ£®æ—å›¾\nplot_model(model3, type = \"est\", show.values = TRUE, \n           title = \"å›ºå®šæ•ˆåº”ä¼°è®¡\")\n\n\n\n\n\n\n\n\n\n\néšæœºæ•ˆåº”å¯è§†åŒ–\n\n# éšæœºæ•ˆåº”åˆ†å¸ƒ\nplot_model(model3, type = \"re\", \n           title = \"å„ç­çº§éšæœºæ•ˆåº”\")\n\n\n\n\n\n\n\n\n\n\næ¡ä»¶æ•ˆåº”å›¾\n\n# é¢„æµ‹å›¾ï¼šå­¦ä¹ æ—¶é•¿ä¸æˆç»©ï¼ˆè€ƒè™‘éšæœºæ•ˆåº”ï¼‰\nplot_model(model3, type = \"pred\", terms = \"study_hours\",\n           title = \"å­¦ä¹ æ—¶é•¿çš„é¢„æµ‹æ•ˆåº”\")\n\n\n\n\n\n\n\n\n\n\nè¾¹é™…æ•ˆåº”\n\n# æŸ¥çœ‹è¾¹é™…æ•ˆåº”\nlibrary(ggeffects)\n\n# é¢„æµ‹å€¼\npred_hours &lt;- ggpredict(model3, terms = \"study_hours [0:20]\")\nplot(pred_hours) +\n  labs(title = \"å­¦ä¹ æ—¶é•¿çš„è¾¹é™…æ•ˆåº”\")\n\n\n\n\n\n\n\n\n\n\näº¤äº’æ•ˆåº”å¯è§†åŒ–\n\n# è·¨å±‚äº¤äº’ä½œç”¨\npred_interact &lt;- ggpredict(model4, terms = c(\"study_hours\", \"teacher_exp [5, 10, 15]\"))\nplot(pred_interact) +\n  labs(\n    title = \"å­¦ä¹ æ—¶é•¿ Ã— æ•™å¸ˆç»éªŒçš„äº¤äº’æ•ˆåº”\",\n    color = \"æ•™å¸ˆç»éªŒ\"\n  )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šæ°´å¹³æ¨¡å‹"
    ]
  },
  {
    "objectID": "1024-multilevel.html#å¹¿ä¹‰æ··åˆæ•ˆåº”æ¨¡å‹-glmm",
    "href": "1024-multilevel.html#å¹¿ä¹‰æ··åˆæ•ˆåº”æ¨¡å‹-glmm",
    "title": "å¤šæ°´å¹³/æ··åˆæ•ˆåº”æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å¹¿ä¹‰æ··åˆæ•ˆåº”æ¨¡å‹ (GLMM)",
    "text": "å¹¿ä¹‰æ··åˆæ•ˆåº”æ¨¡å‹ (GLMM)\nå¯¹äºéæ­£æ€åˆ†å¸ƒçš„ç»“å±€å˜é‡ï¼š\n\näºŒåˆ†ç±»ç»“å±€\n\n# æ¨¡æ‹ŸäºŒåˆ†ç±»æ•°æ®ï¼šæ˜¯å¦é€šè¿‡è€ƒè¯•\nstudent_data &lt;- student_data |&gt;\n  mutate(\n    pass = as.integer(score &gt;= 60)\n  )\n\n# Logistic æ··åˆæ•ˆåº”æ¨¡å‹\nglmm_logit &lt;- glmer(\n  pass ~ study_hours + prior_score + (1 | class_id),\n  data = student_data,\n  family = binomial\n)\n\nsummary(glmm_logit)\n\nGeneralized linear mixed model fit by maximum likelihood (Laplace\n  Approximation) [glmerMod]\n Family: binomial  ( logit )\nFormula: pass ~ study_hours + prior_score + (1 | class_id)\n   Data: student_data\n\n      AIC       BIC    logLik -2*log(L)  df.resid \n    157.1     174.7     -74.5     149.1       596 \n\nScaled residuals: \n    Min      1Q  Median      3Q     Max \n-5.5559  0.0244  0.0573  0.1329  1.6747 \n\nRandom effects:\n Groups   Name        Variance Std.Dev.\n class_id (Intercept) 3.444    1.856   \nNumber of obs: 600, groups:  class_id, 30\n\nFixed effects:\n            Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept) -6.32502    1.89259  -3.342 0.000832 ***\nstudy_hours  0.38210    0.08449   4.522 6.11e-06 ***\nprior_score  0.11643    0.02632   4.424 9.70e-06 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nCorrelation of Fixed Effects:\n            (Intr) stdy_h\nstudy_hours -0.588       \nprior_score -0.911  0.392\n\n\n\n# OR åŠ 95% CI\nexp(fixef(glmm_logit))\n\n(Intercept) study_hours prior_score \n0.001790937 1.465353355 1.123484111 \n\nexp(confint(glmm_logit, parm = \"beta_\", method = \"Wald\"))\n\n                   2.5 %     97.5 %\n(Intercept) 4.386341e-05 0.07312374\nstudy_hours 1.241724e+00 1.72925710\nprior_score 1.066996e+00 1.18296325\n\n\n\n\nè®¡æ•°ç»“å±€\n\n# æ¨¡æ‹Ÿè®¡æ•°æ•°æ®ï¼šç¼ºå‹¤æ¬¡æ•°\nstudent_data &lt;- student_data |&gt;\n  mutate(\n    absences = rpois(n(), lambda = exp(2 - 0.05 * score + rnorm(n(), 0, 0.3)))\n  )\n\n# Poisson æ··åˆæ•ˆåº”æ¨¡å‹\nglmm_pois &lt;- glmer(\n  absences ~ score + gender + (1 | class_id),\n  data = student_data,\n  family = poisson\n)\n\nsummary(glmm_pois)\n\nGeneralized linear mixed model fit by maximum likelihood (Laplace\n  Approximation) [glmerMod]\n Family: poisson  ( log )\nFormula: absences ~ score + gender + (1 | class_id)\n   Data: student_data\n\n      AIC       BIC    logLik -2*log(L)  df.resid \n    525.9     543.5    -259.0     517.9       596 \n\nScaled residuals: \n    Min      1Q  Median      3Q     Max \n-1.0442 -0.3922 -0.3046 -0.2352  7.6861 \n\nRandom effects:\n Groups   Name        Variance Std.Dev.\n class_id (Intercept) 0.2332   0.4829  \nNumber of obs: 600, groups:  class_id, 30\n\nFixed effects:\n             Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept)  1.742140   0.002197  793.10   &lt;2e-16 ***\nscore       -0.046619   0.001449  -32.17   &lt;2e-16 ***\ngenderå¥³    -0.048648   0.002195  -22.16   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nCorrelation of Fixed Effects:\n\n\n         (Intr) score \nscore    -0.012       \ngenderå¥³  0.001 -0.006\noptimizer (Nelder_Mead) convergence code: 0 (OK)\nModel failed to converge with max|grad| = 0.03211 (tol = 0.002, component 1)\n  See ?lme4::convergence and ?lme4::troubleshooting.",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šæ°´å¹³æ¨¡å‹"
    ]
  },
  {
    "objectID": "1024-multilevel.html#ä¸‰å±‚åµŒå¥—æ¨¡å‹",
    "href": "1024-multilevel.html#ä¸‰å±‚åµŒå¥—æ¨¡å‹",
    "title": "å¤šæ°´å¹³/æ··åˆæ•ˆåº”æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ä¸‰å±‚åµŒå¥—æ¨¡å‹",
    "text": "ä¸‰å±‚åµŒå¥—æ¨¡å‹\n\n# æ¨¡æ‹Ÿä¸‰å±‚æ•°æ®ï¼šå­¦ç”Ÿ â†’ ç­çº§ â†’ å­¦æ ¡\nn_schools &lt;- 10\nn_classes_per_school &lt;- 3\nn_students_per_class &lt;- 20\n\nthree_level_data &lt;- expand_grid(\n  school_id = 1:n_schools,\n  class_in_school = 1:n_classes_per_school,\n  student_in_class = 1:n_students_per_class\n) |&gt;\n  mutate(\n    class_id = paste0(school_id, \"_\", class_in_school),\n    student_id = row_number(),\n    # å­¦æ ¡éšæœºæ•ˆåº”\n    school_effect = rep(rnorm(n_schools, 0, 5), \n                        each = n_classes_per_school * n_students_per_class),\n    # ç­çº§éšæœºæ•ˆåº”\n    class_effect = rep(rnorm(n_schools * n_classes_per_school, 0, 3),\n                       each = n_students_per_class),\n    # å­¦ç”Ÿå˜é‡\n    ability = rnorm(n(), 0, 1),\n    # æˆç»©\n    score = 70 + 10 * ability + school_effect + class_effect + rnorm(n(), 0, 5)\n  ) |&gt;\n  mutate(\n    school_id = factor(school_id),\n    class_id = factor(class_id)\n  )\n\n# ä¸‰å±‚åµŒå¥—æ¨¡å‹\nmodel_3level &lt;- lmer(\n  score ~ ability + (1 | school_id/class_id),  # ç­çº§åµŒå¥—åœ¨å­¦æ ¡ä¸­\n  data = three_level_data\n)\n\nsummary(model_3level)\n\nLinear mixed model fit by REML. t-tests use Satterthwaite's method [\nlmerModLmerTest]\nFormula: score ~ ability + (1 | school_id/class_id)\n   Data: three_level_data\n\nREML criterion at convergence: 3710.8\n\nScaled residuals: \n    Min      1Q  Median      3Q     Max \n-3.1231 -0.6097 -0.0221  0.6810  3.1675 \n\nRandom effects:\n Groups             Name        Variance Std.Dev.\n class_id:school_id (Intercept)  6.828   2.613   \n school_id          (Intercept) 18.651   4.319   \n Residual                       25.145   5.014   \nNumber of obs: 600, groups:  class_id:school_id, 30; school_id, 10\n\nFixed effects:\n            Estimate Std. Error       df t value Pr(&gt;|t|)    \n(Intercept)  67.8011     1.4610   9.0000   46.41 5.02e-12 ***\nability       9.7484     0.2052 573.8904   47.50  &lt; 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nCorrelation of Fixed Effects:\n        (Intr)\nability 0.000 \n\n\n\n# å„å±‚ ICC\nicc(model_3level, by_group = TRUE)\n\n# ICC by Group\n\nGroup              |   ICC\n--------------------------\nclass_id:school_id | 0.135\nschool_id          | 0.368",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šæ°´å¹³æ¨¡å‹"
    ]
  },
  {
    "objectID": "1024-multilevel.html#çºµå‘æ•°æ®åˆ†æ",
    "href": "1024-multilevel.html#çºµå‘æ•°æ®åˆ†æ",
    "title": "å¤šæ°´å¹³/æ··åˆæ•ˆåº”æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "çºµå‘æ•°æ®åˆ†æ",
    "text": "çºµå‘æ•°æ®åˆ†æ\næ··åˆæ•ˆåº”æ¨¡å‹éå¸¸é€‚åˆåˆ†æé‡å¤æµ‹é‡æ•°æ®ï¼š\n\n# æ¨¡æ‹Ÿçºµå‘æ•°æ®ï¼š4 ä¸ªæ—¶é—´ç‚¹\nn_subjects &lt;- 100\nn_timepoints &lt;- 4\n\nlongitudinal_data &lt;- expand_grid(\n  subject_id = 1:n_subjects,\n  time = 0:(n_timepoints - 1)\n) |&gt;\n  mutate(\n    # ä¸ªä½“éšæœºæ•ˆåº”\n    subject_intercept = rep(rnorm(n_subjects, 0, 10), each = n_timepoints),\n    subject_slope = rep(rnorm(n_subjects, 0, 2), each = n_timepoints),\n    # æ²»ç–—ç»„\n    treatment = factor(rep(sample(c(\"å¯¹ç…§\", \"æ²»ç–—\"), n_subjects, replace = TRUE), \n                           each = n_timepoints)),\n    # ç»“å±€\n    outcome = 50 + subject_intercept + \n      (3 + subject_slope) * time + \n      5 * (treatment == \"æ²»ç–—\") * time +\n      rnorm(n(), 0, 5)\n  ) |&gt;\n  mutate(subject_id = factor(subject_id))\n\n# å¢é•¿æ›²çº¿æ¨¡å‹\ngrowth_model &lt;- lmer(\n  outcome ~ time * treatment + (time | subject_id),\n  data = longitudinal_data\n)\n\nsummary(growth_model)\n\nLinear mixed model fit by REML. t-tests use Satterthwaite's method [\nlmerModLmerTest]\nFormula: outcome ~ time * treatment + (time | subject_id)\n   Data: longitudinal_data\n\nREML criterion at convergence: 2769.4\n\nScaled residuals: \n    Min      1Q  Median      3Q     Max \n-2.6672 -0.5199  0.0244  0.5511  2.4879 \n\nRandom effects:\n Groups     Name        Variance Std.Dev. Corr\n subject_id (Intercept) 99.518   9.976        \n            time         4.326   2.080    0.02\n Residual               25.560   5.056        \nNumber of obs: 400, groups:  subject_id, 100\n\nFixed effects:\n                   Estimate Std. Error      df t value Pr(&gt;|t|)    \n(Intercept)         49.5178     1.5324 97.9997  32.314  &lt; 2e-16 ***\ntime                 2.8694     0.4345 97.9995   6.605 2.07e-09 ***\ntreatmentæ²»ç–—        1.8449     2.1671 97.9997   0.851    0.397    \ntime:treatmentæ²»ç–—   5.1287     0.6144 97.9995   8.347 4.58e-13 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\n\nCorrelation of Fixed Effects:\n\n\n              (Intr) time   trtmæ²»ç–—\ntime          -0.220                \ntreatmentæ²»ç–— -0.707  0.156         \ntm:trtmntæ²»ç–—  0.156 -0.707 -0.220  \n\n\n\n# å¯è§†åŒ–çºµå‘å˜åŒ–\nggplot(longitudinal_data, aes(x = time, y = outcome, group = subject_id, \n                               color = treatment)) +\n  geom_line(alpha = 0.3) +\n  geom_smooth(aes(group = treatment), method = \"lm\", linewidth = 1.5) +\n  scale_color_manual(values = c(\"#4f46e5\", \"#10b981\")) +\n  labs(\n    title = \"çºµå‘å˜åŒ–è½¨è¿¹\",\n    x = \"æ—¶é—´ç‚¹\",\n    y = \"ç»“å±€\",\n    color = \"ç»„åˆ«\"\n  ) +\n  theme_minimal(base_size = 12)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šæ°´å¹³æ¨¡å‹"
    ]
  },
  {
    "objectID": "1024-multilevel.html#å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "href": "1024-multilevel.html#å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "title": "å¤šæ°´å¹³/æ··åˆæ•ˆåº”æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "text": "å¸¸è§é—®é¢˜ä¸é™·é˜±\n\n1. ç»„æ•°å¤ªå°‘\n# éšæœºæ•ˆåº”ä¼°è®¡éœ€è¦è¶³å¤Ÿçš„ç»„æ•°\n# æ¨èï¼šè‡³å°‘ 20-30 ä¸ªç»„\n# ç»„æ•°å°‘æ—¶ï¼Œéšæœºæ•ˆåº”æ–¹å·®ä¼°è®¡å¯èƒ½ä¸º 0\n\n\n2. å¥‡å¼‚æ€§æ‹Ÿåˆ\n\n# æ£€æŸ¥æ˜¯å¦å­˜åœ¨å¥‡å¼‚æ€§\nisSingular(model2)\n\n[1] TRUE\n\n# è§£å†³æ–¹æ¡ˆï¼š\n# 1. ç®€åŒ–éšæœºæ•ˆåº”ç»“æ„\n# 2. ç§»é™¤ç›¸å…³æ€§å‚æ•°\n# model_nocorr &lt;- lmer(y ~ x + (1 | g) + (0 + x | g), data = data)\n\n\n\n3. ä¸­å¿ƒåŒ–\n\n# ç»„å†…ä¸­å¿ƒåŒ–ï¼ˆç»„å‡å€¼ä¸­å¿ƒåŒ–ï¼‰\nstudent_data &lt;- student_data |&gt;\n  group_by(class_id) |&gt;\n  mutate(\n    study_hours_cwc = study_hours - mean(study_hours)  # ç»„å†…ä¸­å¿ƒåŒ–\n  ) |&gt;\n  ungroup() |&gt;\n  mutate(\n    class_mean_hours = ave(study_hours, class_id)       # ç»„å‡å€¼\n  )\n\n# åˆ†è§£ç»„å†…å’Œç»„é—´æ•ˆåº”\nmodel_cwc &lt;- lmer(\n  score ~ study_hours_cwc + class_mean_hours + prior_score + (1 | class_id),\n  data = student_data\n)\n\nsummary(model_cwc)\n\nLinear mixed model fit by REML. t-tests use Satterthwaite's method [\nlmerModLmerTest]\nFormula: score ~ study_hours_cwc + class_mean_hours + prior_score + (1 |  \n    class_id)\n   Data: student_data\n\nREML criterion at convergence: 4178.6\n\nScaled residuals: \n    Min      1Q  Median      3Q     Max \n-3.3354 -0.6901  0.0148  0.7052  2.7266 \n\nRandom effects:\n Groups   Name        Variance Std.Dev.\n class_id (Intercept) 51.05    7.145   \n Residual             53.33    7.303   \nNumber of obs: 600, groups:  class_id, 30\n\nFixed effects:\n                  Estimate Std. Error        df t value Pr(&gt;|t|)    \n(Intercept)       37.29756   13.75866  29.07582   2.711   0.0111 *  \nstudy_hours_cwc    1.72825    0.07837 568.00213  22.053   &lt;2e-16 ***\nclass_mean_hours   1.69527    1.35998  28.00013   1.247   0.2229    \nprior_score        0.40745    0.02595 569.64949  15.702   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nCorrelation of Fixed Effects:\n            (Intr) stdy__ clss__\nstdy_hrs_cw -0.001              \nclss_mn_hrs -0.986  0.000       \nprior_score -0.137  0.010  0.004\n\n\n\n\n4. æ”¶æ•›é—®é¢˜\n# æ”¶æ•›å¤±è´¥æ—¶çš„è§£å†³æ–¹æ¡ˆ\n# 1. å¢åŠ è¿­ä»£æ¬¡æ•°\nlmerControl(optimizer = \"bobyqa\", optCtrl = list(maxfun = 100000))\n\n# 2. ä½¿ç”¨ä¸åŒä¼˜åŒ–å™¨\nlmerControl(optimizer = \"nloptwrap\")\n\n# 3. ç®€åŒ–æ¨¡å‹\n# 4. å¯¹å˜é‡æ ‡å‡†åŒ–",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šæ°´å¹³æ¨¡å‹"
    ]
  },
  {
    "objectID": "1024-multilevel.html#å®Œæ•´åˆ†ææ¨¡æ¿",
    "href": "1024-multilevel.html#å®Œæ•´åˆ†ææ¨¡æ¿",
    "title": "å¤šæ°´å¹³/æ··åˆæ•ˆåº”æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å®Œæ•´åˆ†ææ¨¡æ¿",
    "text": "å®Œæ•´åˆ†ææ¨¡æ¿\n\n# ========== å¤šæ°´å¹³æ¨¡å‹å®Œæ•´æµç¨‹ ==========\n\nlibrary(lme4)\nlibrary(lmerTest)\nlibrary(performance)\n\n# 1. æ•°æ®å‡†å¤‡å’Œæ¢ç´¢\n# - è¯†åˆ«å±‚æ¬¡ç»“æ„\n# - å¯è§†åŒ–ç»„é—´å·®å¼‚\n\n# 2. è®¡ç®— ICC\nnull &lt;- lmer(y ~ 1 + (1 | group), data = data)\nicc(null)\n\n# 3. é€æ­¥æ„å»ºæ¨¡å‹\nm1 &lt;- lmer(y ~ x1 + (1 | group), data)                    # éšæœºæˆªè·\nm2 &lt;- lmer(y ~ x1 + (x1 | group), data)                   # éšæœºæ–œç‡\nm3 &lt;- lmer(y ~ x1 + group_var + (x1 | group), data)       # è·¨å±‚å˜é‡\nm4 &lt;- lmer(y ~ x1 * group_var + (x1 | group), data)       # è·¨å±‚äº¤äº’\n\n# 4. æ¨¡å‹æ¯”è¾ƒ\nanova(m1, m2, m3, m4)\ncompare_performance(m1, m2, m3, m4)\n\n# 5. æ¨¡å‹è¯Šæ–­\ncheck_model(m3)\n\n# 6. ç»“æœå‘ˆç°\nsummary(m3)\ntab_model(m3)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šæ°´å¹³æ¨¡å‹"
    ]
  },
  {
    "objectID": "1024-multilevel.html#æ€»ç»“",
    "href": "1024-multilevel.html#æ€»ç»“",
    "title": "å¤šæ°´å¹³/æ··åˆæ•ˆåº”æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\næ¨¡å‹ç±»å‹\nè¯­æ³•\né€‚ç”¨åœºæ™¯\n\n\n\n\néšæœºæˆªè·\n(1 | g)\nç»„é—´åŸºçº¿ä¸åŒ\n\n\néšæœºæ–œç‡\n(x | g)\næ•ˆåº”å¼ºåº¦å› ç»„è€Œå¼‚\n\n\næ— ç›¸å…³æ€§\n(1 | g) + (0 + x | g)\næˆªè·å’Œæ–œç‡ç‹¬ç«‹\n\n\nä¸‰å±‚åµŒå¥—\n(1 | g1/g2)\nå¤šå±‚åµŒå¥—ç»“æ„\n\n\näº¤å‰éšæœºæ•ˆåº”\n(1 | g1) + (1 | g2)\néåµŒå¥—åˆ†ç»„\n\n\n\n\næŠ¥å‘Šå¤šæ°´å¹³æ¨¡å‹çš„ Checklist\n\næè¿°æ•°æ®çš„å±‚æ¬¡ç»“æ„\næŠ¥å‘Šå„å±‚æ ·æœ¬é‡\næŠ¥å‘Š ICC\næŠ¥å‘Šå›ºå®šæ•ˆåº”åŠç½®ä¿¡åŒºé—´\næŠ¥å‘Šéšæœºæ•ˆåº”æ–¹å·®\næŠ¥å‘Šè¾¹é™… RÂ² å’Œæ¡ä»¶ RÂ²\næä¾›æ®‹å·®è¯Šæ–­\nè¯´æ˜å¦‚ä½•å¤„ç†ç¼ºå¤±å€¼\n\n\n\næ¨èé˜…è¯»\n\nRaudenbush SW, Bryk AS. Hierarchical Linear Models\nSnijders TAB, Bosker RJ. Multilevel Analysis\nlme4 package æ–‡æ¡£\nUCLA å¤šæ°´å¹³æ¨¡å‹æ•™ç¨‹",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šæ°´å¹³æ¨¡å‹"
    ]
  },
  {
    "objectID": "1022-meta-analysis.html",
    "href": "1022-meta-analysis.html",
    "title": "Meta åˆ†æå®Œå…¨æŒ‡å—",
    "section": "",
    "text": "Meta åˆ†æï¼ˆMeta-analysisï¼‰ æ˜¯ä¸€ç§ç³»ç»Ÿæ€§åœ°åˆå¹¶å¤šä¸ªç‹¬ç«‹ç ”ç©¶ç»“æœçš„ç»Ÿè®¡æ–¹æ³•ï¼Œé€šè¿‡ç»¼åˆç°æœ‰è¯æ®æ¥è·å¾—æ›´ç²¾ç¡®çš„æ•ˆåº”ä¼°è®¡å’Œæ›´å¯é çš„ç»“è®ºã€‚\n\n\n\n\n\nåœºæ™¯\nç¤ºä¾‹\n\n\n\n\nä¸´åºŠè¯•éªŒç»¼åˆ\nåˆå¹¶å¤šä¸ª RCT è¯„ä¼°è¯ç‰©ç–—æ•ˆ\n\n\nè§‚å¯Ÿæ€§ç ”ç©¶\nç»¼åˆé˜Ÿåˆ—ç ”ç©¶è¯„ä¼°æš´éœ²é£é™©\n\n\nè¯Šæ–­å‡†ç¡®æ€§\nåˆå¹¶å¤šä¸ªè¯Šæ–­è¯•éªŒçš„æ•æ„Ÿåº¦/ç‰¹å¼‚åº¦\n\n\næ•ˆåº”éªŒè¯\nè§£å†³å•ä¸ªç ”ç©¶ç»“è®ºä¸ä¸€è‡´é—®é¢˜\n\n\n\n\n\n\n\n\n\næ¦‚å¿µ\nå®šä¹‰\n\n\n\n\næ•ˆåº”é‡\næ ‡å‡†åŒ–çš„æ•ˆåº”æŒ‡æ ‡ï¼ˆOR, RR, SMD, MD ç­‰ï¼‰\n\n\næƒé‡\nå„ç ”ç©¶å¯¹åˆå¹¶æ•ˆåº”çš„è´¡çŒ®ï¼ˆé€šå¸¸åŸºäºæ–¹å·®å€’æ•°ï¼‰\n\n\nå¼‚è´¨æ€§\nå„ç ”ç©¶æ•ˆåº”ä¹‹é—´çš„å˜å¼‚ç¨‹åº¦\n\n\nå›ºå®šæ•ˆåº”æ¨¡å‹\nå‡è®¾æ‰€æœ‰ç ”ç©¶ä¼°è®¡åŒä¸€ä¸ªçœŸå®æ•ˆåº”\n\n\néšæœºæ•ˆåº”æ¨¡å‹\nå‡è®¾å„ç ”ç©¶çš„çœŸå®æ•ˆåº”å­˜åœ¨å˜å¼‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1022-meta-analysis.html#ä»€ä¹ˆæ˜¯-meta-åˆ†æ",
    "href": "1022-meta-analysis.html#ä»€ä¹ˆæ˜¯-meta-åˆ†æ",
    "title": "Meta åˆ†æå®Œå…¨æŒ‡å—",
    "section": "",
    "text": "Meta åˆ†æï¼ˆMeta-analysisï¼‰ æ˜¯ä¸€ç§ç³»ç»Ÿæ€§åœ°åˆå¹¶å¤šä¸ªç‹¬ç«‹ç ”ç©¶ç»“æœçš„ç»Ÿè®¡æ–¹æ³•ï¼Œé€šè¿‡ç»¼åˆç°æœ‰è¯æ®æ¥è·å¾—æ›´ç²¾ç¡®çš„æ•ˆåº”ä¼°è®¡å’Œæ›´å¯é çš„ç»“è®ºã€‚\n\n\n\n\n\nåœºæ™¯\nç¤ºä¾‹\n\n\n\n\nä¸´åºŠè¯•éªŒç»¼åˆ\nåˆå¹¶å¤šä¸ª RCT è¯„ä¼°è¯ç‰©ç–—æ•ˆ\n\n\nè§‚å¯Ÿæ€§ç ”ç©¶\nç»¼åˆé˜Ÿåˆ—ç ”ç©¶è¯„ä¼°æš´éœ²é£é™©\n\n\nè¯Šæ–­å‡†ç¡®æ€§\nåˆå¹¶å¤šä¸ªè¯Šæ–­è¯•éªŒçš„æ•æ„Ÿåº¦/ç‰¹å¼‚åº¦\n\n\næ•ˆåº”éªŒè¯\nè§£å†³å•ä¸ªç ”ç©¶ç»“è®ºä¸ä¸€è‡´é—®é¢˜\n\n\n\n\n\n\n\n\n\næ¦‚å¿µ\nå®šä¹‰\n\n\n\n\næ•ˆåº”é‡\næ ‡å‡†åŒ–çš„æ•ˆåº”æŒ‡æ ‡ï¼ˆOR, RR, SMD, MD ç­‰ï¼‰\n\n\næƒé‡\nå„ç ”ç©¶å¯¹åˆå¹¶æ•ˆåº”çš„è´¡çŒ®ï¼ˆé€šå¸¸åŸºäºæ–¹å·®å€’æ•°ï¼‰\n\n\nå¼‚è´¨æ€§\nå„ç ”ç©¶æ•ˆåº”ä¹‹é—´çš„å˜å¼‚ç¨‹åº¦\n\n\nå›ºå®šæ•ˆåº”æ¨¡å‹\nå‡è®¾æ‰€æœ‰ç ”ç©¶ä¼°è®¡åŒä¸€ä¸ªçœŸå®æ•ˆåº”\n\n\néšæœºæ•ˆåº”æ¨¡å‹\nå‡è®¾å„ç ”ç©¶çš„çœŸå®æ•ˆåº”å­˜åœ¨å˜å¼‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1022-meta-analysis.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "href": "1022-meta-analysis.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "title": "Meta åˆ†æå®Œå…¨æŒ‡å—",
    "section": "R åŒ…å®‰è£…ä¸åŠ è½½",
    "text": "R åŒ…å®‰è£…ä¸åŠ è½½\n\n# æ ¸å¿ƒåŒ…\nlibrary(meta) # Meta åˆ†æä¸»åŠ›åŒ…\nlibrary(metafor) # æ›´å¼ºå¤§çš„ Meta åˆ†æåŒ…\nlibrary(tidyverse) # æ•°æ®å¤„ç†\nlibrary(ggplot2) # å¯è§†åŒ–",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1022-meta-analysis.html#æ•°æ®å‡†å¤‡",
    "href": "1022-meta-analysis.html#æ•°æ®å‡†å¤‡",
    "title": "Meta åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æ•°æ®å‡†å¤‡",
    "text": "æ•°æ®å‡†å¤‡\n\näºŒåˆ†ç±»ç»“å±€ï¼ˆOR/RRï¼‰\n\n# æ¨¡æ‹Ÿæ•°æ®ï¼šæŸè¯ç‰©é¢„é˜²å¿ƒè¡€ç®¡äº‹ä»¶çš„ RCT\nset.seed(2024)\n\ncvd_studies &lt;- tibble(\n  study = paste0(\"Study \", 1:12),\n  year = sample(2015:2023, 12, replace = TRUE),\n  n_treat = sample(100:500, 12, replace = TRUE),\n  n_control = sample(100:500, 12, replace = TRUE)\n) |&gt;\n  mutate(\n    # çœŸå®æ•ˆåº” OR â‰ˆ 0.7ï¼Œå„ç ”ç©¶æœ‰éšæœºå˜å¼‚\n    true_or = 0.7 * exp(rnorm(12, 0, 0.15)),\n    p_control = runif(12, 0.10, 0.25),\n    p_treat = p_control * true_or / (1 - p_control + p_control * true_or),\n\n    # äº‹ä»¶æ•°\n    event_treat = rbinom(12, n_treat, p_treat),\n    event_control = rbinom(12, n_control, p_control),\n\n    # éäº‹ä»¶æ•°\n    nonevent_treat = n_treat - event_treat,\n    nonevent_control = n_control - event_control\n  ) |&gt;\n  select(\n    study, year, event_treat, nonevent_treat, event_control, nonevent_control,\n    n_treat, n_control\n  )\n\ncvd_studies\n\n# A tibble: 12 Ã— 8\n   study  year event_treat nonevent_treat event_control nonevent_control n_treat\n   &lt;chr&gt; &lt;int&gt;       &lt;int&gt;          &lt;int&gt;         &lt;int&gt;            &lt;int&gt;   &lt;int&gt;\n 1 Studâ€¦  2016          61            322            47              187     383\n 2 Studâ€¦  2019          68            335            79              356     403\n 3 Studâ€¦  2015          51            264            75              236     315\n 4 Studâ€¦  2023          28            155            84              338     183\n 5 Studâ€¦  2016          30            409            47              333     439\n 6 Studâ€¦  2016          89            382            86              303     471\n 7 Studâ€¦  2016          26            349            40              276     375\n 8 Studâ€¦  2019          33            153            92              320     186\n 9 Studâ€¦  2015          31            256            70              334     287\n10 Studâ€¦  2017          37            168            93              316     205\n11 Studâ€¦  2023          57            422            92              353     479\n12 Studâ€¦  2015          43            444            29              201     487\n# â„¹ 1 more variable: n_control &lt;int&gt;\n\n\n\n\nè¿ç»­å‹ç»“å±€ï¼ˆMD/SMDï¼‰\n\n# æ¨¡æ‹Ÿæ•°æ®ï¼šæŸå¹²é¢„å¯¹è¡€å‹çš„å½±å“\nbp_studies &lt;- tibble(\n  study = paste0(\"Trial \", LETTERS[1:10]),\n  year = sample(2018:2024, 10, replace = TRUE),\n  n_treat = sample(30:150, 10, replace = TRUE),\n  n_control = sample(30:150, 10, replace = TRUE)\n) |&gt;\n  mutate(\n    # çœŸå®æ•ˆåº”ï¼šé™å‹ 5 mmHgï¼ŒSD â‰ˆ 12\n    true_md = 5 + rnorm(10, 0, 1.5),\n    mean_control = 140 + rnorm(10, 0, 3),\n    mean_treat = mean_control - true_md,\n    sd_treat = 10 + runif(10, 0, 5),\n    sd_control = 10 + runif(10, 0, 5)\n  ) |&gt;\n  select(study, year, n_treat, mean_treat, sd_treat, n_control, mean_control, sd_control)\n\nbp_studies\n\n# A tibble: 10 Ã— 8\n   study    year n_treat mean_treat sd_treat n_control mean_control sd_control\n   &lt;chr&gt;   &lt;int&gt;   &lt;int&gt;      &lt;dbl&gt;    &lt;dbl&gt;     &lt;int&gt;        &lt;dbl&gt;      &lt;dbl&gt;\n 1 Trial A  2022     121       139.     10.2        60         141.       12.0\n 2 Trial B  2023     114       136.     10.9        70         139.       10.2\n 3 Trial C  2023      63       140.     14.9        51         143.       11.9\n 4 Trial D  2018     142       133.     11.4        50         138.       12.0\n 5 Trial E  2019     148       130.     13.5        47         137.       10.5\n 6 Trial F  2020      85       128.     14.7        31         136.       10.7\n 7 Trial G  2022      50       138.     12.0        42         143.       12.1\n 8 Trial H  2022      65       131.     10.7       103         138.       14.1\n 9 Trial I  2019      93       135.     14.1        94         140.       11.2\n10 Trial J  2022     109       135.     14.7        80         138.       14.0",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1022-meta-analysis.html#äºŒåˆ†ç±»ç»“å±€-meta-åˆ†æ",
    "href": "1022-meta-analysis.html#äºŒåˆ†ç±»ç»“å±€-meta-åˆ†æ",
    "title": "Meta åˆ†æå®Œå…¨æŒ‡å—",
    "section": "äºŒåˆ†ç±»ç»“å±€ Meta åˆ†æ",
    "text": "äºŒåˆ†ç±»ç»“å±€ Meta åˆ†æ\n\nè®¡ç®—æ•ˆåº”é‡\n\n# ä½¿ç”¨ meta åŒ…è¿›è¡ŒäºŒåˆ†ç±» Meta åˆ†æ\nmeta_or &lt;- metabin(\n  event.e = event_treat,\n  n.e = n_treat,\n  event.c = event_control,\n  n.c = n_control,\n  studlab = study,\n  data = cvd_studies,\n  sm = \"OR\", # æ•ˆåº”æŒ‡æ ‡ï¼šOR\n  method = \"MH\", # Mantel-Haenszel æ–¹æ³•\n  random = TRUE, # éšæœºæ•ˆåº”æ¨¡å‹\n  fixed = TRUE, # åŒæ—¶è®¡ç®—å›ºå®šæ•ˆåº”\n  title = \"CVD é¢„é˜²è¯ç‰©ç–—æ•ˆ Meta åˆ†æ\"\n)\n\n# æŸ¥çœ‹ç»“æœ\nsummary(meta_or)\n\nReview:     CVD é¢„é˜²è¯ç‰©ç–—æ•ˆ Meta åˆ†æ\n\n             OR           95%-CI %W(common) %W(random)\nStudy 1  0.7537 [0.4948; 1.1482]        7.5        8.2\nStudy 2  0.9147 [0.6402; 1.3070]        9.7       11.3\nStudy 3  0.6079 [0.4088; 0.9039]        9.7        9.2\nStudy 4  0.7269 [0.4552; 1.1607]        6.6        6.7\nStudy 5  0.5197 [0.3215; 0.8401]        7.2        6.4\nStudy 6  0.8209 [0.5887; 1.1447]       11.7       12.9\nStudy 7  0.5140 [0.3061; 0.8632]        6.2        5.5\nStudy 8  0.7502 [0.4822; 1.1671]        7.2        7.5\nStudy 9  0.5778 [0.3673; 0.9090]        8.0        7.1\nStudy 10 0.7483 [0.4895; 1.1440]        7.8        8.1\nStudy 11 0.5183 [0.3618; 0.7424]       12.9       11.1\nStudy 12 0.6712 [0.4073; 1.1062]        5.5        5.9\n\nNumber of studies: k = 12\nNumber of observations: o = 8600 (o.e = 4213, o.c = 4387)\nNumber of events: e = 1388\n\n                         OR           95%-CI     z  p-value\nCommon effect model  0.6800 [0.6030; 0.7669] -6.29 &lt; 0.0001\nRandom effects model 0.6802 [0.6013; 0.7694] -6.13 &lt; 0.0001\n\nQuantifying heterogeneity (with 95%-CIs):\n tau^2 = 0.0019 [0.0000; 0.0647]; tau = 0.0436 [0.0000; 0.2544]\n I^2 = 0.0% [0.0%; 58.3%]; H = 1.00 [1.00; 1.55]\n\nTest of heterogeneity:\n    Q d.f. p-value\n 9.90   11  0.5395\n\nDetails of meta-analysis methods:\n- Mantel-Haenszel method (common effect model)\n- Inverse variance method (random effects model)\n- Restricted maximum-likelihood estimator for tau^2\n- Q-Profile method for confidence interval of tau^2 and tau\n- Calculation of I^2 based on Q\n\n\n\n\næ£®æ—å›¾\n\n# ç»‘åˆ¶æ£®æ—å›¾\nforest(meta_or,\n  sortvar = year, # æŒ‰å¹´ä»½æ’åº\n  prediction = TRUE, # é¢„æµ‹åŒºé—´\n  print.tau2 = TRUE, # æ˜¾ç¤º Ï„Â²\n  leftcols = c(\"studlab\", \"event.e\", \"n.e\", \"event.c\", \"n.c\"),\n  leftlabs = c(\"ç ”ç©¶\", \"äº‹ä»¶(æ²»ç–—)\", \"n(æ²»ç–—)\", \"äº‹ä»¶(å¯¹ç…§)\", \"n(å¯¹ç…§)\"),\n  rightcols = c(\"effect\", \"ci\"),\n  rightlabs = c(\"OR\", \"95% CI\"),\n  col.diamond = \"#4f46e5\",\n  col.diamond.lines = \"#4f46e5\",\n  col.predict = \"#10b981\"\n)\n\n\n\n\n\n\n\n\n\n\nä½¿ç”¨ metafor åŒ…\n\n# ä½¿ç”¨ metafor è¿›è¡Œæ›´çµæ´»çš„åˆ†æ\nlibrary(metafor)\n\n# è®¡ç®—å¯¹æ•° OR åŠå…¶æ–¹å·®\ncvd_es &lt;- escalc(\n  measure = \"OR\",\n  ai = event_treat, bi = nonevent_treat,\n  ci = event_control, di = nonevent_control,\n  data = cvd_studies\n)\n\n# éšæœºæ•ˆåº”æ¨¡å‹ï¼ˆREML ä¼°è®¡ï¼‰\nres_or &lt;- rma(yi, vi, data = cvd_es, method = \"REML\")\nsummary(res_or)\n\n\nRandom-Effects Model (k = 12; tau^2 estimator: REML)\n\n  logLik  deviance       AIC       BIC      AICc   \n  1.7312   -3.4624    0.5376    1.3334    2.0376   \n\ntau^2 (estimated amount of total heterogeneity): 0.0019 (SE = 0.0197)\ntau (square root of estimated tau^2 value):      0.0436\nI^2 (total heterogeneity / total variability):   3.99%\nH^2 (total variability / sampling variability):  1.04\n\nTest for Heterogeneity:\nQ(df = 11) = 9.8991, p-val = 0.5395\n\nModel Results:\n\nestimate      se     zval    pval    ci.lb    ci.ub      \n -0.3854  0.0629  -6.1296  &lt;.0001  -0.5087  -0.2622  *** \n\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\n\n# metafor æ£®æ—å›¾\nforest(res_or,\n  slab = cvd_studies$study,\n  header = c(\"ç ”ç©¶\", \"OR [95% CI]\"),\n  xlab = \"æ¯”å€¼æ¯” (OR)\",\n  atransf = exp, # è½¬æ¢å› OR å°ºåº¦\n  at = log(c(0.25, 0.5, 1, 2)),\n  refline = 0,\n  col = \"#4f46e5\",\n  border = \"#4f46e5\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1022-meta-analysis.html#è¿ç»­å‹ç»“å±€-meta-åˆ†æ",
    "href": "1022-meta-analysis.html#è¿ç»­å‹ç»“å±€-meta-åˆ†æ",
    "title": "Meta åˆ†æå®Œå…¨æŒ‡å—",
    "section": "è¿ç»­å‹ç»“å±€ Meta åˆ†æ",
    "text": "è¿ç»­å‹ç»“å±€ Meta åˆ†æ\n\nå‡å€¼å·® (MD)\n\n# è¿ç»­å‹ç»“å±€ Meta åˆ†æ\nmeta_md &lt;- metacont(\n  n.e = n_treat,\n  mean.e = mean_treat,\n  sd.e = sd_treat,\n  n.c = n_control,\n  mean.c = mean_control,\n  sd.c = sd_control,\n  studlab = study,\n  data = bp_studies,\n  sm = \"MD\", # å‡å€¼å·®\n  random = TRUE,\n  fixed = TRUE,\n  title = \"é™å‹å¹²é¢„æ•ˆæœ Meta åˆ†æ\"\n)\n\nsummary(meta_md)\n\nReview:     é™å‹å¹²é¢„æ•ˆæœ Meta åˆ†æ\n\n             MD              95%-CI %W(common) %W(random)\nTrial A -1.9012 [ -5.4320;  1.6296]       12.3       12.3\nTrial B -3.2513 [ -6.3674; -0.1351]       15.8       15.8\nTrial C -3.2311 [ -8.1351;  1.6729]        6.4        6.4\nTrial D -4.9554 [ -8.7855; -1.1252]       10.4       10.4\nTrial E -6.7273 [-10.4307; -3.0238]       11.2       11.2\nTrial F -8.3130 [-13.2050; -3.4210]        6.4        6.4\nTrial G -5.6602 [-10.6033; -0.7171]        6.3        6.3\nTrial H -6.5647 [-10.3338; -2.7957]       10.8       10.8\nTrial I -5.1885 [ -8.8380; -1.5391]       11.5       11.5\nTrial J -3.1021 [ -7.2217;  1.0174]        9.0        9.0\n\nNumber of studies: k = 10\nNumber of observations: o = 1618 (o.e = 990, o.c = 628)\n\n                          MD             95%-CI     z  p-value\nCommon effect model  -4.6916 [-5.9291; -3.4541] -7.43 &lt; 0.0001\nRandom effects model -4.6916 [-5.9291; -3.4541] -7.43 &lt; 0.0001\n\nQuantifying heterogeneity (with 95%-CIs):\n tau^2 = 0 [0.0000; 8.9142]; tau = 0 [0.0000; 2.9857]\n I^2 = 0.0% [0.0%; 62.4%]; H = 1.00 [1.00; 1.63]\n\nTest of heterogeneity:\n    Q d.f. p-value\n 8.58    9  0.4765\n\nDetails of meta-analysis methods:\n- Inverse variance method\n- Restricted maximum-likelihood estimator for tau^2\n- Q-Profile method for confidence interval of tau^2 and tau\n- Calculation of I^2 based on Q\n\n\n\n# æ£®æ—å›¾\nforest(meta_md,\n  sortvar = year,\n  prediction = TRUE,\n  print.tau2 = TRUE,\n  leftcols = c(\"studlab\", \"n.e\", \"mean.e\", \"n.c\", \"mean.c\"),\n  leftlabs = c(\"ç ”ç©¶\", \"n(æ²»ç–—)\", \"å‡å€¼(æ²»ç–—)\", \"n(å¯¹ç…§)\", \"å‡å€¼(å¯¹ç…§)\"),\n  xlab = \"å‡å€¼å·® (mmHg)\",\n  smlab = \"å¹²é¢„ç»„æ›´ä¼˜ â† â†’ å¯¹ç…§ç»„æ›´ä¼˜\",\n  col.diamond = \"#10b981\",\n  col.diamond.lines = \"#10b981\"\n)\n\n\n\n\n\n\n\n\n\n\næ ‡å‡†åŒ–å‡å€¼å·® (SMD)\nå½“å„ç ”ç©¶ä½¿ç”¨ä¸åŒæµ‹é‡å·¥å…·æ—¶ï¼Œä½¿ç”¨ SMDï¼š\n\n# SMD åˆ†æ\nmeta_smd &lt;- metacont(\n  n.e = n_treat,\n  mean.e = mean_treat,\n  sd.e = sd_treat,\n  n.c = n_control,\n  mean.c = mean_control,\n  sd.c = sd_control,\n  studlab = study,\n  data = bp_studies,\n  sm = \"SMD\", # æ ‡å‡†åŒ–å‡å€¼å·®ï¼ˆHedges' gï¼‰\n  method.smd = \"Hedges\",\n  random = TRUE\n)\n\nsummary(meta_smd)\n\n            SMD             95%-CI %W(common) %W(random)\nTrial A -0.1753 [-0.4853;  0.1347]       11.2       11.2\nTrial B -0.3043 [-0.6036; -0.0051]       12.0       12.0\nTrial C -0.2360 [-0.6065;  0.1345]        7.9        7.9\nTrial D -0.4259 [-0.7510; -0.1007]       10.2       10.2\nTrial E -0.5214 [-0.8537; -0.1891]        9.8        9.8\nTrial F -0.6016 [-1.0203; -0.1829]        6.1        6.1\nTrial G -0.4663 [-0.8822; -0.0503]        6.2        6.2\nTrial H -0.5063 [-0.8216; -0.1910]       10.8       10.8\nTrial I -0.4064 [-0.6960; -0.1167]       12.8       12.8\nTrial J -0.2148 [-0.5041;  0.0746]       12.9       12.9\n\nNumber of studies: k = 10\nNumber of observations: o = 1618 (o.e = 990, o.c = 628)\n\n                         SMD             95%-CI     z  p-value\nCommon effect model  -0.3699 [-0.4737; -0.2661] -6.98 &lt; 0.0001\nRandom effects model -0.3699 [-0.4737; -0.2661] -6.98 &lt; 0.0001\n\nQuantifying heterogeneity (with 95%-CIs):\n tau^2 = 0 [0.0000; 0.0396]; tau = 0 [0.0000; 0.1991]\n I^2 = 0.0% [0.0%; 62.4%]; H = 1.00 [1.00; 1.63]\n\nTest of heterogeneity:\n    Q d.f. p-value\n 6.38    9  0.7016\n\nDetails of meta-analysis methods:\n- Inverse variance method\n- Restricted maximum-likelihood estimator for tau^2\n- Q-Profile method for confidence interval of tau^2 and tau\n- Calculation of I^2 based on Q\n- Hedges' g (bias corrected standardised mean difference; using exact formulae)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1022-meta-analysis.html#å¼‚è´¨æ€§è¯„ä¼°",
    "href": "1022-meta-analysis.html#å¼‚è´¨æ€§è¯„ä¼°",
    "title": "Meta åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å¼‚è´¨æ€§è¯„ä¼°",
    "text": "å¼‚è´¨æ€§è¯„ä¼°\n\nå¼‚è´¨æ€§æŒ‡æ ‡\n\n\n\næŒ‡æ ‡\nè§£è¯»\n\n\n\n\nQ ç»Ÿè®¡é‡\næ£€éªŒå¼‚è´¨æ€§æ˜¯å¦å­˜åœ¨ï¼ˆp &lt; 0.1 æç¤ºå¼‚è´¨æ€§ï¼‰\n\n\nIÂ²\nå¼‚è´¨æ€§å æ€»å˜å¼‚çš„æ¯”ä¾‹ï¼ˆ25%ä½, 50%ä¸­, 75%é«˜ï¼‰\n\n\nÏ„Â²\nç ”ç©¶é—´æ–¹å·®ï¼ˆéšæœºæ•ˆåº”çš„æ–¹å·®åˆ†é‡ï¼‰\n\n\nHÂ²\næ€»å˜å¼‚/æŠ½æ ·è¯¯å·®å˜å¼‚\n\n\n\n\n# ä» meta å¯¹è±¡ä¸­æå–å¼‚è´¨æ€§æŒ‡æ ‡\ncat(\"Q ç»Ÿè®¡é‡:\", meta_or$Q, \", df =\", meta_or$df.Q, \", p =\", meta_or$pval.Q, \"\\n\")\n\nQ ç»Ÿè®¡é‡: 9.899119 , df = 11 , p = 0.5394837 \n\ncat(\"IÂ² =\", round(meta_or$I2 * 100, 1), \"%\\n\")\n\nIÂ² = 0 %\n\ncat(\"Ï„Â² =\", round(meta_or$tau2, 4), \"\\n\")\n\nÏ„Â² = 0.0019 \n\n\n\n\nå¯è§†åŒ–å¼‚è´¨æ€§\n\n# ä½¿ç”¨ metafor ç»‘åˆ¶ Baujat å›¾ï¼ˆè¯†åˆ«å¼‚è´¨æ€§æ¥æºï¼‰\nbaujat(res_or, main = \"Baujat å›¾ï¼šè¯†åˆ«å¼‚è´¨æ€§æ¥æº\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1022-meta-analysis.html#äºšç»„åˆ†æ",
    "href": "1022-meta-analysis.html#äºšç»„åˆ†æ",
    "title": "Meta åˆ†æå®Œå…¨æŒ‡å—",
    "section": "äºšç»„åˆ†æ",
    "text": "äºšç»„åˆ†æ\n\n# æ·»åŠ äºšç»„å˜é‡\ncvd_studies &lt;- cvd_studies |&gt;\n  mutate(\n    sample_size = ifelse(n_treat + n_control &gt; 300, \"å¤§æ ·æœ¬\", \"å°æ ·æœ¬\"),\n    region = sample(c(\"äºšæ´²\", \"æ¬§ç¾\"), 12, replace = TRUE)\n  )\n\n# æŒ‰æ ·æœ¬é‡åˆ†ç»„çš„äºšç»„åˆ†æ\nmeta_subgroup &lt;- metabin(\n  event.e = event_treat,\n  n.e = n_treat,\n  event.c = event_control,\n  n.c = n_control,\n  studlab = study,\n  data = cvd_studies,\n  sm = \"OR\",\n  random = TRUE,\n  subgroup = sample_size, # äºšç»„å˜é‡\n  print.subgroup.name = TRUE\n)\n\nsummary(meta_subgroup)\n\n             OR           95%-CI %W(common) %W(random) sample_size\nStudy 1  0.7537 [0.4948; 1.1482]        7.5        8.2      å¤§æ ·æœ¬\nStudy 2  0.9147 [0.6402; 1.3070]        9.7       11.3      å¤§æ ·æœ¬\nStudy 3  0.6079 [0.4088; 0.9039]        9.7        9.2      å¤§æ ·æœ¬\nStudy 4  0.7269 [0.4552; 1.1607]        6.6        6.7      å¤§æ ·æœ¬\nStudy 5  0.5197 [0.3215; 0.8401]        7.2        6.4      å¤§æ ·æœ¬\nStudy 6  0.8209 [0.5887; 1.1447]       11.7       12.9      å¤§æ ·æœ¬\nStudy 7  0.5140 [0.3061; 0.8632]        6.2        5.5      å¤§æ ·æœ¬\nStudy 8  0.7502 [0.4822; 1.1671]        7.2        7.5      å¤§æ ·æœ¬\nStudy 9  0.5778 [0.3673; 0.9090]        8.0        7.1      å¤§æ ·æœ¬\nStudy 10 0.7483 [0.4895; 1.1440]        7.8        8.1      å¤§æ ·æœ¬\nStudy 11 0.5183 [0.3618; 0.7424]       12.9       11.1      å¤§æ ·æœ¬\nStudy 12 0.6712 [0.4073; 1.1062]        5.5        5.9      å¤§æ ·æœ¬\n\nNumber of studies: k = 12\nNumber of observations: o = 8600 (o.e = 4213, o.c = 4387)\nNumber of events: e = 1388\n\n                         OR           95%-CI     z  p-value\nCommon effect model  0.6800 [0.6030; 0.7669] -6.29 &lt; 0.0001\nRandom effects model 0.6802 [0.6013; 0.7694] -6.13 &lt; 0.0001\n\nQuantifying heterogeneity (with 95%-CIs):\n tau^2 = 0.0019 [0.0000; 0.0647]; tau = 0.0436 [0.0000; 0.2544]\n I^2 = 0.0% [0.0%; 58.3%]; H = 1.00 [1.00; 1.55]\n\nTest of heterogeneity:\n    Q d.f. p-value\n 9.90   11  0.5395\n\nResults for subgroups (common effect model):\n                       k     OR           95%-CI    Q  I^2\nsample_size = å¤§æ ·æœ¬  12 0.6800 [0.6030; 0.7669] 9.90 0.0%\n\nTest for subgroup differences (common effect model):\n                  Q d.f. p-value\nBetween groups 0.00    0      --\n\nResults for subgroups (random effects model):\n                       k     OR           95%-CI  tau^2    tau\nsample_size = å¤§æ ·æœ¬  12 0.6802 [0.6013; 0.7694] 0.0019 0.0436\n\nTest for subgroup differences (random effects model):\n                  Q d.f. p-value\nBetween groups 0.00    0      --\n\nDetails of meta-analysis methods:\n- Mantel-Haenszel method (common effect model)\n- Inverse variance method (random effects model)\n- Restricted maximum-likelihood estimator for tau^2\n- Q-Profile method for confidence interval of tau^2 and tau\n- Calculation of I^2 based on Q\n\n\n\n# äºšç»„æ£®æ—å›¾\nforest(meta_subgroup,\n  sortvar = year,\n  print.subgroup.name = TRUE,\n  subgroup.name = \"æ ·æœ¬é‡åˆ†ç»„\",\n  col.diamond = \"#4f46e5\",\n  col.diamond.lines = \"#4f46e5\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1022-meta-analysis.html#meta-å›å½’",
    "href": "1022-meta-analysis.html#meta-å›å½’",
    "title": "Meta åˆ†æå®Œå…¨æŒ‡å—",
    "section": "Meta å›å½’",
    "text": "Meta å›å½’\næ¢ç´¢å¼‚è´¨æ€§æ¥æºçš„å®šé‡æ–¹æ³•ï¼š\n\n# ä½¿ç”¨ metafor è¿›è¡Œ Meta å›å½’\ncvd_es &lt;- cvd_es |&gt;\n  mutate(\n    year = cvd_studies$year,\n    total_n = cvd_studies$n_treat + cvd_studies$n_control\n  )\n\n# Meta å›å½’ï¼šå¹´ä»½ä½œä¸ºè°ƒèŠ‚å˜é‡\nres_metareg &lt;- rma(yi, vi, mods = ~year, data = cvd_es, method = \"REML\")\nsummary(res_metareg)\n\n\nMixed-Effects Model (k = 12; tau^2 estimator: REML)\n\n  logLik  deviance       AIC       BIC      AICc   \n  1.1411   -2.2823    3.7177    4.6255    7.7177   \n\ntau^2 (estimated amount of residual heterogeneity):     0.0052 (SE = 0.0226)\ntau (square root of estimated tau^2 value):             0.0722\nI^2 (residual heterogeneity / unaccounted variability): 10.14%\nH^2 (unaccounted variability / sampling variability):   1.11\nR^2 (amount of heterogeneity accounted for):            0.00%\n\nTest for Residual Heterogeneity:\nQE(df = 10) = 9.8667, p-val = 0.4523\n\nTest of Moderators (coefficient 2):\nQM(df = 1) = 0.0151, p-val = 0.9022\n\nModel Results:\n\n         estimate       se     zval    pval     ci.lb    ci.ub    \nintrcpt    5.3484  46.6853   0.1146  0.9088  -86.1531  96.8500    \nyear      -0.0028   0.0231  -0.1229  0.9022   -0.0482   0.0425    \n\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\n\n# å¯è§†åŒ– Meta å›å½’\nregplot(res_metareg,\n  xlab = \"å‘è¡¨å¹´ä»½\",\n  ylab = \"log(OR)\",\n  main = \"Meta å›å½’ï¼šå¹´ä»½ä¸æ•ˆåº”é‡å…³ç³»\",\n  col = \"#4f46e5\",\n  lcol = \"#ef4444\"\n)\n\n\n\n\n\n\n\n\n\n# å¤šå˜é‡ Meta å›å½’\nres_metareg2 &lt;- rma(yi, vi, mods = ~ year + total_n, data = cvd_es, method = \"REML\")\nsummary(res_metareg2)\n\n\nMixed-Effects Model (k = 12; tau^2 estimator: REML)\n\n  logLik  deviance       AIC       BIC      AICc   \n  0.5880   -1.1759    6.8241    7.6130   16.8241   \n\ntau^2 (estimated amount of residual heterogeneity):     0.0105 (SE = 0.0268)\ntau (square root of estimated tau^2 value):             0.1023\nI^2 (residual heterogeneity / unaccounted variability): 18.22%\nH^2 (unaccounted variability / sampling variability):   1.22\nR^2 (amount of heterogeneity accounted for):            0.00%\n\nTest for Residual Heterogeneity:\nQE(df = 9) = 9.8242, p-val = 0.3649\n\nTest of Moderators (coefficients 2:3):\nQM(df = 2) = 0.0690, p-val = 0.9661\n\nModel Results:\n\n         estimate       se     zval    pval     ci.lb     ci.ub    \nintrcpt    0.1601  51.0940   0.0031  0.9975  -99.9823  100.3025    \nyear      -0.0002   0.0254  -0.0085  0.9932   -0.0500    0.0495    \ntotal_n   -0.0002   0.0006  -0.2499  0.8027   -0.0014    0.0010    \n\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1022-meta-analysis.html#å‘è¡¨åå€šè¯„ä¼°",
    "href": "1022-meta-analysis.html#å‘è¡¨åå€šè¯„ä¼°",
    "title": "Meta åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å‘è¡¨åå€šè¯„ä¼°",
    "text": "å‘è¡¨åå€šè¯„ä¼°\n\næ¼æ–—å›¾\n\n# åŸºç¡€æ¼æ–—å›¾\nfunnel(res_or,\n  main = \"æ¼æ–—å›¾\",\n  xlab = \"log(OR)\",\n  col = \"#4f46e5\",\n  pch = 19\n)\n\n\n\n\n\n\n\n\n\n# å¸¦ç­‰é«˜çº¿çš„æ¼æ–—å›¾\nfunnel(res_or,\n  level = c(90, 95, 99),\n  shade = c(\"white\", \"gray80\", \"gray60\"),\n  refline = 0,\n  main = \"æ¼æ–—å›¾ï¼ˆå¸¦ç½®ä¿¡åŒºé—´ï¼‰\"\n)\n\n\n\n\n\n\n\n\n\n\nEgger æ£€éªŒ\n\n# Egger çº¿æ€§å›å½’æ£€éªŒ\nregtest(res_or)\n\n\nRegression Test for Funnel Plot Asymmetry\n\nModel:     mixed-effects meta-regression model\nPredictor: standard error\n\nTest for Funnel Plot Asymmetry: z = -1.3452, p = 0.1786\nLimit Estimate (as sei -&gt; 0):   b =  0.2138 (CI: -0.6661, 1.0936)\n\n# p &lt; 0.05 æç¤ºå­˜åœ¨å‘è¡¨åå€š\n\n\n\nBegg æ£€éªŒ\n\n# Begg ç§©ç›¸å…³æ£€éªŒ\nranktest(res_or)\n\n\nRank Correlation Test for Funnel Plot Asymmetry\n\nKendall's tau = -0.4242, p = 0.0629\n\n\n\n\nå‰ªè¡¥æ³• (Trim and Fill)\n\n# å‰ªè¡¥æ³•ä¼°è®¡ç¼ºå¤±ç ”ç©¶\ntf_result &lt;- trimfill(res_or)\nsummary(tf_result)\n\n\nEstimated number of missing studies on the right side: 2 (SE = 2.3928)\n\nRandom-Effects Model (k = 14; tau^2 estimator: REML)\n\n  logLik  deviance       AIC       BIC      AICc   \n  0.3267   -0.6535    3.3465    4.4764    4.5465   \n\ntau^2 (estimated amount of total heterogeneity): 0.0115 (SE = 0.0222)\ntau (square root of estimated tau^2 value):      0.1074\nI^2 (total heterogeneity / total variability):   20.16%\nH^2 (total variability / sampling variability):  1.25\n\nTest for Heterogeneity:\nQ(df = 13) = 15.5142, p-val = 0.2764\n\nModel Results:\n\nestimate      se     zval    pval    ci.lb    ci.ub      \n -0.3338  0.0642  -5.1982  &lt;.0001  -0.4596  -0.2079  *** \n\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\n\n# å‰ªè¡¥åçš„æ¼æ–—å›¾\nfunnel(tf_result,\n  main = \"å‰ªè¡¥æ³•æ¼æ–—å›¾\",\n  xlab = \"log(OR)\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1022-meta-analysis.html#æ•æ„Ÿæ€§åˆ†æ",
    "href": "1022-meta-analysis.html#æ•æ„Ÿæ€§åˆ†æ",
    "title": "Meta åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æ•æ„Ÿæ€§åˆ†æ",
    "text": "æ•æ„Ÿæ€§åˆ†æ\n\né€ä¸€å‰”é™¤æ³•\n\n# Leave-one-out åˆ†æ\nloo_result &lt;- leave1out(res_or)\nprint(loo_result)\n\n\n    estimate     se    zval   pval   ci.lb   ci.ub      Q     Qp   tau2     I2 \n-1   -0.3961 0.0678 -5.8431 0.0000 -0.5290 -0.2633 9.6547 0.4713 0.0048 9.5850 \n-2   -0.4225 0.0653 -6.4651 0.0000 -0.5506 -0.2944 6.9302 0.7320 0.0000 0.0000 \n-3   -0.3751 0.0676 -5.5515 0.0000 -0.5075 -0.2427 9.5537 0.4805 0.0041 8.0519 \n-4   -0.3916 0.0671 -5.8327 0.0000 -0.5232 -0.2600 9.8186 0.4565 0.0047 9.4386 \n-5   -0.3666 0.0641 -5.7186 0.0000 -0.4923 -0.2410 8.6030 0.5701 0.0007 1.6251 \n-6   -0.4129 0.0665 -6.2102 0.0000 -0.5433 -0.2826 8.4995 0.5802 0.0007 1.3917 \n-7   -0.3688 0.0641 -5.7539 0.0000 -0.4945 -0.2432 8.7058 0.5602 0.0011 2.4771 \n-8   -0.3948 0.0674 -5.8539 0.0000 -0.5270 -0.2626 9.6989 0.4673 0.0047 9.4327 \n-9   -0.3733 0.0660 -5.6568 0.0000 -0.5027 -0.2440 9.3569 0.4986 0.0029 6.0337 \n-10  -0.3954 0.0678 -5.8323 0.0000 -0.5282 -0.2625 9.6918 0.4679 0.0049 9.6984 \n-11  -0.3499 0.0653 -5.3583 0.0000 -0.4778 -0.2219 7.4042 0.6868 0.0000 0.0000 \n-12  -0.3858 0.0666 -5.7892 0.0000 -0.5164 -0.2552 9.8958 0.4497 0.0044 8.9323 \n        H2 \n-1  1.1060 \n-2  1.0000 \n-3  1.0876 \n-4  1.1042 \n-5  1.0165 \n-6  1.0141 \n-7  1.0254 \n-8  1.1042 \n-9  1.0642 \n-10 1.1074 \n-11 1.0000 \n-12 1.0981 \n\n\n\n# å¯è§†åŒ–é€ä¸€å‰”é™¤å½±å“ï¼ˆéœ€è¦æ‰‹åŠ¨å¤„ç†æ•°æ®ï¼‰\n# ä½¿ç”¨ loo_result ä¸­çš„æ•°æ®ç»‘åˆ¶\nforest(loo_result,\n  xlab = \"æ¯”å€¼æ¯” (OR)\",\n  atransf = exp,\n  refline = exp(coef(res_or))\n)\n\n\n\nç´¯ç§¯ Meta åˆ†æ\n\n# æŒ‰å¹´ä»½ç´¯ç§¯ Meta åˆ†æ\ncvd_es_sorted &lt;- cvd_es[order(cvd_es$year), ]\nres_sorted &lt;- rma(yi, vi, data = cvd_es_sorted, method = \"REML\")\n\ncumul_result &lt;- cumul(res_sorted, order = cvd_es_sorted$year)\n\nforest(cumul_result,\n  header = c(\"ç´¯ç§¯ç ”ç©¶\", \"OR [95% CI]\"),\n  xlab = \"æ¯”å€¼æ¯” (OR)\",\n  atransf = exp,\n  refline = 1,\n  col = \"#10b981\",\n  main = \"ç´¯ç§¯ Meta åˆ†æ\"\n)\n\n\n\n\n\n\n\n\n\n\nå½±å“åˆ†æ\n\n# å½±å“è¯Šæ–­\ninf &lt;- influence(res_or)\n\nplot(inf, layout = c(4, 2))",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1022-meta-analysis.html#æ•ˆåº”æŒ‡æ ‡é€‰æ‹©",
    "href": "1022-meta-analysis.html#æ•ˆåº”æŒ‡æ ‡é€‰æ‹©",
    "title": "Meta åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æ•ˆåº”æŒ‡æ ‡é€‰æ‹©",
    "text": "æ•ˆåº”æŒ‡æ ‡é€‰æ‹©\n\näºŒåˆ†ç±»ç»“å±€\n\n\n\næŒ‡æ ‡\nä»£ç \né€‚ç”¨åœºæ™¯\n\n\n\n\næ¯”å€¼æ¯” OR\nsm = \"OR\"\nç—…ä¾‹å¯¹ç…§ç ”ç©¶ã€æ¨ªæ–­é¢\n\n\nç›¸å¯¹å±é™©åº¦ RR\nsm = \"RR\"\né˜Ÿåˆ—ç ”ç©¶ã€RCT\n\n\né£é™©å·® RD\nsm = \"RD\"\néœ€è¦ç»å¯¹æ•ˆåº”æ—¶\n\n\n\n\n\nè¿ç»­å‹ç»“å±€\n\n\n\næŒ‡æ ‡\nä»£ç \né€‚ç”¨åœºæ™¯\n\n\n\n\nå‡å€¼å·® MD\nsm = \"MD\"\nç›¸åŒæµ‹é‡å·¥å…·\n\n\næ ‡å‡†åŒ–å‡å€¼å·® SMD\nsm = \"SMD\"\nä¸åŒæµ‹é‡å·¥å…·\n\n\næ¯”ç‡å‡å€¼ ROM\nsm = \"ROM\"\næ¯”ä¾‹å˜åŒ–",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1022-meta-analysis.html#é«˜è´¨é‡å‡ºç‰ˆæ£®æ—å›¾",
    "href": "1022-meta-analysis.html#é«˜è´¨é‡å‡ºç‰ˆæ£®æ—å›¾",
    "title": "Meta åˆ†æå®Œå…¨æŒ‡å—",
    "section": "é«˜è´¨é‡å‡ºç‰ˆæ£®æ—å›¾",
    "text": "é«˜è´¨é‡å‡ºç‰ˆæ£®æ—å›¾\n\n# è‡ªå®šä¹‰é«˜è´¨é‡æ£®æ—å›¾\nforest(meta_or,\n  # æ’åº\n  sortvar = year,\n\n  # æ˜¾ç¤ºå†…å®¹\n  prediction = TRUE,\n  print.tau2 = TRUE,\n  print.I2 = TRUE,\n  print.pval.Q = TRUE,\n\n  # å·¦ä¾§åˆ—\n  leftcols = c(\"studlab\", \"year\", \"event.e\", \"n.e\", \"event.c\", \"n.c\"),\n  leftlabs = c(\"ç ”ç©¶\", \"å¹´ä»½\", \"äº‹ä»¶\", \"n\", \"äº‹ä»¶\", \"n\"),\n\n  # å³ä¾§åˆ—\n  rightcols = c(\"effect\", \"ci\", \"w.random\"),\n  rightlabs = c(\"OR\", \"95% CI\", \"æƒé‡(%)\"),\n\n  # é¢œè‰²è®¾ç½®\n  col.diamond = \"#4f46e5\",\n  col.diamond.lines = \"#4f46e5\",\n  col.predict = \"#10b981\",\n  col.predict.lines = \"#10b981\",\n\n  # æ ‡ç­¾\n  label.e = \"æ²»ç–—ç»„\",\n  label.c = \"å¯¹ç…§ç»„\",\n  label.left = \"æ”¯æŒæ²»ç–—\",\n  label.right = \"æ”¯æŒå¯¹ç…§\",\n\n  # å…¶ä»–è®¾ç½®\n  comb.fixed = FALSE, # ä¸æ˜¾ç¤ºå›ºå®šæ•ˆåº”\n  overall.hetstat = TRUE,\n  test.overall.random = TRUE,\n\n  # å­—ä½“\n  fontsize = 9,\n  spacing = 1.2,\n\n  # æ ‡é¢˜\n  smlab = \"æ¯”å€¼æ¯” (OR)\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1022-meta-analysis.html#å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "href": "1022-meta-analysis.html#å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "title": "Meta åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "text": "å¸¸è§é—®é¢˜ä¸é™·é˜±\n\n1. å›ºå®š vs éšæœºæ•ˆåº”æ¨¡å‹é€‰æ‹©\n\n\n\næƒ…å†µ\næ¨èæ¨¡å‹\n\n\n\n\nç ”ç©¶è®¾è®¡/äººç¾¤é«˜åº¦ç›¸ä¼¼\nå›ºå®šæ•ˆåº”\n\n\nIÂ² &gt; 50%\néšæœºæ•ˆåº”\n\n\nç›®æ ‡æ˜¯æ³›åŒ–åˆ°æ›´å¹¿äººç¾¤\néšæœºæ•ˆåº”\n\n\nç ”ç©¶æ•°é‡ &lt; 5\nå›ºå®šæ•ˆåº”ï¼ˆéšæœºæ•ˆåº”ä¼°è®¡ä¸ç¨³å®šï¼‰\n\n\n\n\n\n2. å°ç ”ç©¶æ•ˆåº”\n\n# é™¤ Egger æ£€éªŒå¤–ï¼Œè¿˜å¯ä»¥æ¯”è¾ƒå›ºå®šå’Œéšæœºæ•ˆåº”ç»“æœ\n# è‹¥éšæœºæ•ˆåº”æ›´æç«¯ï¼Œå¯èƒ½å­˜åœ¨å°ç ”ç©¶æ•ˆåº”\n\n\n\n3. é›¶äº‹ä»¶å¤„ç†\n\n# åœ¨ metabin ä¸­å¤„ç†é›¶äº‹ä»¶\nmeta_zero &lt;- metabin(\n  event.e = event_treat,\n  n.e = n_treat,\n  event.c = event_control,\n  n.c = n_control,\n  studlab = study,\n  data = cvd_studies,\n  sm = \"OR\",\n  incr = 0.5, # è¿ç»­æ€§æ ¡æ­£\n  allincr = FALSE # åªå¯¹é›¶äº‹ä»¶ç ”ç©¶æ·»åŠ \n)\n\n\n\n4. è´¨é‡è¯„ä¼°\n# Meta åˆ†æåº”ç»“åˆç ”ç©¶è´¨é‡è¯„ä¼°\n# å¸¸ç”¨å·¥å…·ï¼š\n# - RCT: Cochrane RoB 2\n# - è§‚å¯Ÿæ€§ç ”ç©¶: Newcastle-Ottawa Scale\n# - è¯Šæ–­ç ”ç©¶: QUADAS-2",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1022-meta-analysis.html#prisma-æµç¨‹å›¾",
    "href": "1022-meta-analysis.html#prisma-æµç¨‹å›¾",
    "title": "Meta åˆ†æå®Œå…¨æŒ‡å—",
    "section": "PRISMA æµç¨‹å›¾",
    "text": "PRISMA æµç¨‹å›¾\n\n# ä½¿ç”¨ PRISMA2020 åŒ…åˆ›å»ºæµç¨‹å›¾\n# install.packages(\"PRISMA2020\")\nlibrary(PRISMA2020)\n\nPRISMA_data(\n  identification = list(\n    records_identified = 1250,\n    records_removed_before = 150,\n    records_screened = 1100\n  ),\n  screening = list(\n    records_excluded = 950,\n    reports_sought = 150,\n    reports_not_retrieved = 10,\n    reports_assessed = 140\n  ),\n  included = list(\n    reports_excluded = 128,\n    new_studies = 12,\n    new_reports = 12\n  )\n) |&gt;\n  PRISMA_flowdiagram()",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1022-meta-analysis.html#å®Œæ•´åˆ†ææ¨¡æ¿",
    "href": "1022-meta-analysis.html#å®Œæ•´åˆ†ææ¨¡æ¿",
    "title": "Meta åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å®Œæ•´åˆ†ææ¨¡æ¿",
    "text": "å®Œæ•´åˆ†ææ¨¡æ¿\n\n# ========== Meta åˆ†æå®Œæ•´æµç¨‹ ==========\n\nlibrary(meta)\nlibrary(metafor)\n\n# 1. æ•°æ®å‡†å¤‡ï¼ˆäºŒåˆ†ç±»ç»“å±€ï¼‰\nmeta_result &lt;- metabin(\n  event.e = event_treat, n.e = n_treat,\n  event.c = event_control, n.c = n_control,\n  studlab = study, data = data,\n  sm = \"OR\", random = TRUE\n)\n\n# 2. æŸ¥çœ‹ç»“æœ\nsummary(meta_result)\n\n# 3. æ£®æ—å›¾\nforest(meta_result, prediction = TRUE)\n\n# 4. å¼‚è´¨æ€§è¯„ä¼°\ncat(\"IÂ² =\", meta_result$I2, \"\\n\")\ncat(\"Ï„Â² =\", meta_result$tau2, \"\\n\")\n\n# 5. å‘è¡¨åå€š\nfunnel(meta_result)\nmetabias(meta_result, method = \"linreg\")\n\n# 6. æ•æ„Ÿæ€§åˆ†æ\nmetainf(meta_result)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1022-meta-analysis.html#æ€»ç»“",
    "href": "1022-meta-analysis.html#æ€»ç»“",
    "title": "Meta åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\næ­¥éª¤\nå†…å®¹\nR å‡½æ•°\n\n\n\n\næ•ˆåº”é‡è®¡ç®—\nOR/RR/MD/SMD\nmetabin(), metacont()\n\n\næ¨¡å‹æ‹Ÿåˆ\nå›ºå®š/éšæœºæ•ˆåº”\nmethod, random å‚æ•°\n\n\næ£®æ—å›¾\nç»“æœå¯è§†åŒ–\nforest()\n\n\nå¼‚è´¨æ€§\nIÂ², Ï„Â², Q\næ¨¡å‹è¾“å‡º\n\n\näºšç»„åˆ†æ\næ¢ç´¢è°ƒèŠ‚æ•ˆåº”\nsubgroup å‚æ•°\n\n\nMeta å›å½’\nå®šé‡è°ƒèŠ‚åˆ†æ\nrma(..., mods = )\n\n\nå‘è¡¨åå€š\næ¼æ–—å›¾ã€Egger\nfunnel(), regtest()\n\n\næ•æ„Ÿæ€§åˆ†æ\né€ä¸€å‰”é™¤\nleave1out()\n\n\n\n\næŠ¥å‘Š Meta åˆ†æçš„ Checklist (PRISMA)\n\næŠ¥å‘Šæ£€ç´¢ç­–ç•¥å’Œæ•°æ®åº“\næŠ¥å‘Šçº³å…¥/æ’é™¤æ ‡å‡†\næä¾› PRISMA æµç¨‹å›¾\næŠ¥å‘Šå„ç ”ç©¶çš„æ•ˆåº”é‡å’Œ 95% CI\næŠ¥å‘Šåˆå¹¶æ•ˆåº”åŠç½®ä¿¡åŒºé—´\næŠ¥å‘Šå¼‚è´¨æ€§æŒ‡æ ‡ï¼ˆIÂ², Ï„Â², Qï¼‰\næä¾›æ£®æ—å›¾\nè¯„ä¼°å‘è¡¨åå€šï¼ˆæ¼æ–—å›¾ï¼‰\nè¿›è¡Œæ•æ„Ÿæ€§åˆ†æ\nè¯„ä¼°è¯æ®è´¨é‡ï¼ˆå¦‚ GRADEï¼‰\n\n\n\næ¨èé˜…è¯»\n\nBorenstein M et al.Â Introduction to Meta-Analysis\nHiggins JPT, Green S. Cochrane Handbook for Systematic Reviews\nR metafor æ–‡æ¡£\nR meta æ–‡æ¡£",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1020-survival.html",
    "href": "1020-survival.html",
    "title": "ç”Ÿå­˜åˆ†æå®Œå…¨æŒ‡å—",
    "section": "",
    "text": "ç”Ÿå­˜åˆ†æï¼ˆSurvival Analysisï¼‰ æ˜¯ç ”ç©¶äº‹ä»¶å‘ç”Ÿæ—¶é—´çš„ç»Ÿè®¡æ–¹æ³•ï¼Œå¸¸ç”¨äºåˆ†æä»æŸä¸ªèµ·ç‚¹åˆ°äº‹ä»¶å‘ç”Ÿçš„æ—¶é—´é—´éš”ï¼ŒåŒæ—¶å¤„ç†åˆ å¤±ï¼ˆCensoringï¼‰æ•°æ®ã€‚\n\n\n\n\n\né¢†åŸŸ\nç ”ç©¶é—®é¢˜\n\n\n\n\nåŒ»å­¦ç ”ç©¶\næ‚£è€…ç¡®è¯Šåçš„ç”Ÿå­˜æ—¶é—´\n\n\nä¸´åºŠè¯•éªŒ\nè¯ç‰©å»¶ç¼“ç–¾ç—…è¿›å±•çš„æ•ˆæœ\n\n\nå¯é æ€§å·¥ç¨‹\nè®¾å¤‡æ•…éšœæ—¶é—´\n\n\nç¤¾ä¼šç§‘å­¦\nå¤±ä¸šæŒç»­æ—¶é—´\n\n\nè¥é”€åˆ†æ\nå®¢æˆ·æµå¤±æ—¶é—´\n\n\n\n\n\n\n\n\n\n\n\n\n\næ¦‚å¿µ\nå®šä¹‰\n\n\n\n\nç”Ÿå­˜æ—¶é—´ (T)\nä»èµ·ç‚¹åˆ°äº‹ä»¶å‘ç”Ÿçš„æ—¶é—´\n\n\nåˆ å¤±\nç ”ç©¶ç»“æŸæ—¶äº‹ä»¶å°šæœªå‘ç”Ÿ\n\n\nç”Ÿå­˜å‡½æ•° S(t)\nå­˜æ´»è¶…è¿‡æ—¶é—´ t çš„æ¦‚ç‡ï¼š\\(S(t) = P(T &gt; t)\\)\n\n\né£é™©å‡½æ•° h(t)\nç¬æ—¶äº‹ä»¶å‘ç”Ÿç‡ï¼š\\(h(t) = \\lim_{\\Delta t \\to 0} \\frac{P(t \\le T &lt; t + \\Delta t | T \\ge t)}{\\Delta t}\\)\n\n\nç´¯ç§¯é£é™© H(t)\n\\(H(t) = \\int_0^t h(u) du = -\\ln S(t)\\)\n\n\næ¯”ä¾‹é£é™©å‡è®¾\nä¸åŒç»„åˆ«é£é™©æ¯”éšæ—¶é—´ä¿æŒä¸å˜",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç”Ÿå­˜åˆ†æ"
    ]
  },
  {
    "objectID": "1020-survival.html#ä»€ä¹ˆæ˜¯ç”Ÿå­˜åˆ†æ",
    "href": "1020-survival.html#ä»€ä¹ˆæ˜¯ç”Ÿå­˜åˆ†æ",
    "title": "ç”Ÿå­˜åˆ†æå®Œå…¨æŒ‡å—",
    "section": "",
    "text": "ç”Ÿå­˜åˆ†æï¼ˆSurvival Analysisï¼‰ æ˜¯ç ”ç©¶äº‹ä»¶å‘ç”Ÿæ—¶é—´çš„ç»Ÿè®¡æ–¹æ³•ï¼Œå¸¸ç”¨äºåˆ†æä»æŸä¸ªèµ·ç‚¹åˆ°äº‹ä»¶å‘ç”Ÿçš„æ—¶é—´é—´éš”ï¼ŒåŒæ—¶å¤„ç†åˆ å¤±ï¼ˆCensoringï¼‰æ•°æ®ã€‚\n\n\n\n\n\né¢†åŸŸ\nç ”ç©¶é—®é¢˜\n\n\n\n\nåŒ»å­¦ç ”ç©¶\næ‚£è€…ç¡®è¯Šåçš„ç”Ÿå­˜æ—¶é—´\n\n\nä¸´åºŠè¯•éªŒ\nè¯ç‰©å»¶ç¼“ç–¾ç—…è¿›å±•çš„æ•ˆæœ\n\n\nå¯é æ€§å·¥ç¨‹\nè®¾å¤‡æ•…éšœæ—¶é—´\n\n\nç¤¾ä¼šç§‘å­¦\nå¤±ä¸šæŒç»­æ—¶é—´\n\n\nè¥é”€åˆ†æ\nå®¢æˆ·æµå¤±æ—¶é—´\n\n\n\n\n\n\n\n\n\n\n\n\n\næ¦‚å¿µ\nå®šä¹‰\n\n\n\n\nç”Ÿå­˜æ—¶é—´ (T)\nä»èµ·ç‚¹åˆ°äº‹ä»¶å‘ç”Ÿçš„æ—¶é—´\n\n\nåˆ å¤±\nç ”ç©¶ç»“æŸæ—¶äº‹ä»¶å°šæœªå‘ç”Ÿ\n\n\nç”Ÿå­˜å‡½æ•° S(t)\nå­˜æ´»è¶…è¿‡æ—¶é—´ t çš„æ¦‚ç‡ï¼š\\(S(t) = P(T &gt; t)\\)\n\n\né£é™©å‡½æ•° h(t)\nç¬æ—¶äº‹ä»¶å‘ç”Ÿç‡ï¼š\\(h(t) = \\lim_{\\Delta t \\to 0} \\frac{P(t \\le T &lt; t + \\Delta t | T \\ge t)}{\\Delta t}\\)\n\n\nç´¯ç§¯é£é™© H(t)\n\\(H(t) = \\int_0^t h(u) du = -\\ln S(t)\\)\n\n\næ¯”ä¾‹é£é™©å‡è®¾\nä¸åŒç»„åˆ«é£é™©æ¯”éšæ—¶é—´ä¿æŒä¸å˜",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç”Ÿå­˜åˆ†æ"
    ]
  },
  {
    "objectID": "1020-survival.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "href": "1020-survival.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "title": "ç”Ÿå­˜åˆ†æå®Œå…¨æŒ‡å—",
    "section": "R åŒ…å®‰è£…ä¸åŠ è½½",
    "text": "R åŒ…å®‰è£…ä¸åŠ è½½\n\n# æ ¸å¿ƒåŒ…\nlibrary(survival) # ç”Ÿå­˜åˆ†æåŸºç¡€\nlibrary(survminer) # ç”Ÿå­˜æ›²çº¿å¯è§†åŒ–\nlibrary(tidyverse) # æ•°æ®å¤„ç†\nlibrary(gtsummary) # ç»“æœè¡¨æ ¼\nlibrary(broom) # æ¨¡å‹æ•´ç†\nlibrary(ggsurvfit) # ç°ä»£ç”Ÿå­˜æ›²çº¿ç»‘åˆ¶",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç”Ÿå­˜åˆ†æ"
    ]
  },
  {
    "objectID": "1020-survival.html#æ•°æ®å‡†å¤‡",
    "href": "1020-survival.html#æ•°æ®å‡†å¤‡",
    "title": "ç”Ÿå­˜åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æ•°æ®å‡†å¤‡",
    "text": "æ•°æ®å‡†å¤‡\nä½¿ç”¨æ¨¡æ‹Ÿçš„è‚¿ç˜¤æ‚£è€…ç”Ÿå­˜æ•°æ®ï¼š\n\n# æ¨¡æ‹Ÿæ•°æ®ï¼šè‚¿ç˜¤æ‚£è€…ç”Ÿå­˜åˆ†æ\nset.seed(2024)\nn &lt;- 500\n\n# ç”Ÿæˆåå˜é‡\ncancer_data &lt;- tibble(\n    id = 1:n,\n    age = round(rnorm(n, 60, 12)),\n    sex = factor(sample(c(\"ç”·\", \"å¥³\"), n, replace = TRUE, prob = c(0.55, 0.45))),\n    stage = factor(\n        sample(c(\"I\", \"II\", \"III\", \"IV\"), n,\n            replace = TRUE,\n            prob = c(0.15, 0.30, 0.35, 0.20)\n        ),\n        levels = c(\"I\", \"II\", \"III\", \"IV\")\n    ),\n    treatment = factor(sample(c(\"æ ‡å‡†æ²»ç–—\", \"æ–°æ–¹æ¡ˆ\"), n, replace = TRUE)),\n    ecog = sample(0:3, n, replace = TRUE, prob = c(0.3, 0.4, 0.2, 0.1))\n)\n\n# ç”Ÿæˆç”Ÿå­˜æ—¶é—´ï¼ˆWeibullåˆ†å¸ƒï¼Œå—åå˜é‡å½±å“ï¼‰\ncancer_data &lt;- cancer_data |&gt;\n    mutate(\n        # çœŸå®é£é™©\n        log_hr = 0.02 * (age - 60) +\n            0.2 * (sex == \"ç”·\") +\n            0.3 * (stage == \"II\") +\n            0.8 * (stage == \"III\") +\n            1.5 * (stage == \"IV\") +\n            -0.4 * (treatment == \"æ–°æ–¹æ¡ˆ\") +\n            0.3 * ecog,\n\n        # ç”Ÿå­˜æ—¶é—´ï¼ˆWeibullåˆ†å¸ƒï¼‰\n        survival_time = rweibull(n, shape = 1.2, scale = 36 * exp(-log_hr / 1.2)),\n        survival_time = pmax(survival_time, 0.5), # æœ€å°0.5ä¸ªæœˆ\n\n        # åˆ å¤±ï¼ˆéšè®¿ç»“æŸæˆ–å¤±è®¿ï¼‰\n        censor_time = runif(n, 12, 60),\n\n        # è§‚å¯Ÿæ—¶é—´å’Œäº‹ä»¶çŠ¶æ€\n        time = pmin(survival_time, censor_time),\n        status = as.integer(survival_time &lt;= censor_time)\n    ) |&gt;\n    select(id, age, sex, stage, treatment, ecog, time, status)\n\n# æŸ¥çœ‹æ•°æ®\nglimpse(cancer_data)\n\nRows: 500\nColumns: 8\n$ id        &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 1â€¦\n$ age       &lt;dbl&gt; 72, 66, 59, 57, 74, 76, 66, 58, 45, 47, 40, 66, 70, 64, 21, â€¦\n$ sex       &lt;fct&gt; å¥³, ç”·, ç”·, å¥³, å¥³, ç”·, ç”·, å¥³, å¥³, ç”·, ç”·, ç”·, ç”·, ç”·, å¥³, å¥³, ç”·, å¥³, ç”·, å¥³, â€¦\n$ stage     &lt;fct&gt; II, III, IV, II, I, I, II, III, I, IV, III, III, II, III, IIâ€¦\n$ treatment &lt;fct&gt; æ–°æ–¹æ¡ˆ, æ–°æ–¹æ¡ˆ, æ ‡å‡†æ²»ç–—, æ–°æ–¹æ¡ˆ, æ ‡å‡†æ²»ç–—, æ ‡å‡†æ²»ç–—, æ ‡å‡†æ²»ç–—, æ–°æ–¹æ¡ˆ, æ ‡å‡†æ²»ç–—, æ ‡å‡†æ²»ç–—, æ–°æ–¹æ¡ˆ,â€¦\n$ ecog      &lt;int&gt; 0, 1, 2, 0, 1, 3, 0, 3, 1, 3, 0, 1, 2, 1, 0, 0, 0, 1, 1, 0, â€¦\n$ time      &lt;dbl&gt; 0.500000, 3.071374, 4.690484, 15.059639, 7.465502, 0.500000,â€¦\n$ status    &lt;int&gt; 1, 1, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, â€¦\n\n# äº‹ä»¶ç‡\nmean(cancer_data$status)\n\n[1] 0.834\n\n\n\nç”Ÿå­˜å¯¹è±¡\n\n# åˆ›å»ºç”Ÿå­˜å¯¹è±¡\nsurv_obj &lt;- Surv(time = cancer_data$time, event = cancer_data$status)\n\n# æŸ¥çœ‹å‰10ä¸ªè§‚æµ‹\nhead(surv_obj, 10)\n\n [1]  0.500000   3.071374   4.690484  15.059639+  7.465502   0.500000 \n [7] 27.566708+  6.799167  34.508659+  4.406258 \n\n# + å·è¡¨ç¤ºåˆ å¤±",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç”Ÿå­˜åˆ†æ"
    ]
  },
  {
    "objectID": "1020-survival.html#kaplan-meier-ç”Ÿå­˜æ›²çº¿",
    "href": "1020-survival.html#kaplan-meier-ç”Ÿå­˜æ›²çº¿",
    "title": "ç”Ÿå­˜åˆ†æå®Œå…¨æŒ‡å—",
    "section": "Kaplan-Meier ç”Ÿå­˜æ›²çº¿",
    "text": "Kaplan-Meier ç”Ÿå­˜æ›²çº¿\n\næ€»ä½“ç”Ÿå­˜æ›²çº¿\n\n# æ‹Ÿåˆ KM æ›²çº¿\nkm_fit &lt;- survfit(Surv(time, status) ~ 1, data = cancer_data)\n\n# æŸ¥çœ‹æ‘˜è¦\nsummary(km_fit, times = c(12, 24, 36, 48, 60))\n\nCall: survfit(formula = Surv(time, status) ~ 1, data = cancer_data)\n\n time n.risk n.event survival std.err lower 95% CI upper 95% CI\n   12    244     256   0.4880  0.0224       0.4461        0.534\n   24    102     108   0.2516  0.0202       0.2150        0.294\n   36     32      39   0.1342  0.0179       0.1033        0.174\n   48      9      12   0.0727  0.0165       0.0466        0.113\n\n\n\n# ä½¿ç”¨ ggsurvfit ç»‘åˆ¶ï¼ˆæ¨èï¼‰\nsurvfit2(Surv(time, status) ~ 1, data = cancer_data) |&gt;\n    ggsurvfit() +\n    add_confidence_interval() +\n    add_risktable() +\n    add_quantile(y_value = 0.5, color = \"gray50\", linetype = \"dashed\") +\n    scale_y_continuous(labels = scales::percent_format(), limits = c(0, 1)) +\n    scale_x_continuous(breaks = seq(0, 60, 12)) +\n    labs(\n        title = \"æ€»ä½“ç”Ÿå­˜æ›²çº¿\",\n        x = \"æ—¶é—´ (æœˆ)\",\n        y = \"ç”Ÿå­˜æ¦‚ç‡\"\n    ) +\n    theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\n\n\nåˆ†ç»„ç”Ÿå­˜æ›²çº¿\n\n# æŒ‰åˆ†æœŸåˆ†ç»„\nkm_stage &lt;- survfit(Surv(time, status) ~ stage, data = cancer_data)\n\n# ä½¿ç”¨ survminer ç»‘åˆ¶\nggsurvplot(\n    km_stage,\n    data = cancer_data,\n    pval = TRUE, # æ˜¾ç¤º log-rank p å€¼\n    conf.int = TRUE, # ç½®ä¿¡åŒºé—´\n    risk.table = TRUE, # é£é™©è¡¨\n    risk.table.col = \"strata\",\n    surv.median.line = \"hv\", # ä¸­ä½ç”Ÿå­˜çº¿\n    palette = c(\"#22c55e\", \"#f59e0b\", \"#ef4444\", \"#7c3aed\"),\n    legend.labs = c(\"IæœŸ\", \"IIæœŸ\", \"IIIæœŸ\", \"IVæœŸ\"),\n    legend.title = \"è‚¿ç˜¤åˆ†æœŸ\",\n    xlab = \"æ—¶é—´ (æœˆ)\",\n    ylab = \"ç”Ÿå­˜æ¦‚ç‡\",\n    title = \"ä¸åŒåˆ†æœŸæ‚£è€…çš„ç”Ÿå­˜æ›²çº¿\"\n)\n\n\n\n\n\n\n\n\n\n\næŒ‰æ²»ç–—æ–¹æ¡ˆåˆ†ç»„\n\nkm_treatment &lt;- survfit(Surv(time, status) ~ treatment, data = cancer_data)\n\nggsurvplot(\n    km_treatment,\n    data = cancer_data,\n    pval = TRUE,\n    pval.method = TRUE,\n    conf.int = TRUE,\n    risk.table = TRUE,\n    palette = c(\"#4f46e5\", \"#10b981\"),\n    legend.labs = c(\"æ ‡å‡†æ²»ç–—\", \"æ–°æ–¹æ¡ˆ\"),\n    legend.title = \"æ²»ç–—æ–¹æ¡ˆ\",\n    xlab = \"æ—¶é—´ (æœˆ)\",\n    ylab = \"ç”Ÿå­˜æ¦‚ç‡\",\n    title = \"ä¸åŒæ²»ç–—æ–¹æ¡ˆçš„ç”Ÿå­˜æ›²çº¿æ¯”è¾ƒ\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç”Ÿå­˜åˆ†æ"
    ]
  },
  {
    "objectID": "1020-survival.html#log-rank-æ£€éªŒ",
    "href": "1020-survival.html#log-rank-æ£€éªŒ",
    "title": "ç”Ÿå­˜åˆ†æå®Œå…¨æŒ‡å—",
    "section": "Log-rank æ£€éªŒ",
    "text": "Log-rank æ£€éªŒ\nLog-rank æ£€éªŒç”¨äºæ¯”è¾ƒä¸¤ç»„æˆ–å¤šç»„ç”Ÿå­˜æ›²çº¿æ˜¯å¦æœ‰æ˜¾è‘—å·®å¼‚ã€‚\n\n# ä¸¤ç»„æ¯”è¾ƒ\nlogrank_treatment &lt;- survdiff(Surv(time, status) ~ treatment, data = cancer_data)\nlogrank_treatment\n\nCall:\nsurvdiff(formula = Surv(time, status) ~ treatment, data = cancer_data)\n\n                     N Observed Expected (O-E)^2/E (O-E)^2/V\ntreatment=æ ‡å‡†æ²»ç–— 245      213      193      2.06      3.84\ntreatment=æ–°æ–¹æ¡ˆ   255      204      224      1.77      3.84\n\n Chisq= 3.8  on 1 degrees of freedom, p= 0.05 \n\n# å¤šç»„æ¯”è¾ƒ\nlogrank_stage &lt;- survdiff(Surv(time, status) ~ stage, data = cancer_data)\nlogrank_stage\n\nCall:\nsurvdiff(formula = Surv(time, status) ~ stage, data = cancer_data)\n\n            N Observed Expected (O-E)^2/E (O-E)^2/V\nstage=I    79       54     93.3     16.57     21.66\nstage=II  155      121    153.0      6.68     10.63\nstage=III 174      151    137.5      1.33      1.99\nstage=IV   92       91     33.2    100.42    114.90\n\n Chisq= 133  on 3 degrees of freedom, p= &lt;2e-16 \n\n\n\nè¶‹åŠ¿æ£€éªŒ\nå¯¹äºæœ‰åºåˆ†ç±»å˜é‡ï¼ˆå¦‚åˆ†æœŸï¼‰ï¼Œå¯ä½¿ç”¨è¶‹åŠ¿æ£€éªŒï¼š\n\n# è¶‹åŠ¿æ£€éªŒ\ncancer_data$stage_num &lt;- as.numeric(cancer_data$stage)\nlogrank_trend &lt;- survdiff(Surv(time, status) ~ stage_num, data = cancer_data)\nlogrank_trend\n\nCall:\nsurvdiff(formula = Surv(time, status) ~ stage_num, data = cancer_data)\n\n              N Observed Expected (O-E)^2/E (O-E)^2/V\nstage_num=1  79       54     93.3     16.57     21.66\nstage_num=2 155      121    153.0      6.68     10.63\nstage_num=3 174      151    137.5      1.33      1.99\nstage_num=4  92       91     33.2    100.42    114.90\n\n Chisq= 133  on 3 degrees of freedom, p= &lt;2e-16",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç”Ÿå­˜åˆ†æ"
    ]
  },
  {
    "objectID": "1020-survival.html#cox-æ¯”ä¾‹é£é™©æ¨¡å‹",
    "href": "1020-survival.html#cox-æ¯”ä¾‹é£é™©æ¨¡å‹",
    "title": "ç”Ÿå­˜åˆ†æå®Œå…¨æŒ‡å—",
    "section": "Cox æ¯”ä¾‹é£é™©æ¨¡å‹",
    "text": "Cox æ¯”ä¾‹é£é™©æ¨¡å‹\n\nå•å› ç´ åˆ†æ\n\n# å•å› ç´  Cox å›å½’\nunivar_cox &lt;- function(data, time_var, status_var, predictors) {\n    results &lt;- map_dfr(predictors, function(var) {\n        formula &lt;- as.formula(paste0(\"Surv(\", time_var, \", \", status_var, \") ~ \", var))\n        model &lt;- coxph(formula, data = data)\n\n        tidy(model, conf.int = TRUE, exponentiate = TRUE) |&gt;\n            mutate(variable = var) |&gt;\n            select(variable, term, estimate, conf.low, conf.high, p.value)\n    })\n\n    results |&gt;\n        mutate(\n            HR_CI = paste0(\n                round(estimate, 2), \" (\",\n                round(conf.low, 2), \"-\",\n                round(conf.high, 2), \")\"\n            )\n        )\n}\n\npredictors &lt;- c(\"age\", \"sex\", \"stage\", \"treatment\", \"ecog\")\nunivar_results &lt;- univar_cox(cancer_data, \"time\", \"status\", predictors)\n\nunivar_results |&gt;\n    select(variable, term, HR_CI, p.value) |&gt;\n    mutate(p.value = format.pval(p.value, digits = 3))\n\n# A tibble: 7 Ã— 4\n  variable  term            HR_CI            p.value \n  &lt;chr&gt;     &lt;chr&gt;           &lt;chr&gt;            &lt;chr&gt;   \n1 age       age             1.02 (1.01-1.03) 8.51e-05\n2 sex       sexå¥³           0.9 (0.74-1.1)   0.3131  \n3 stage     stageII         1.39 (1.01-1.92) 0.0444  \n4 stage     stageIII        1.98 (1.45-2.71) 1.79e-05\n5 stage     stageIV         5.53 (3.88-7.87) &lt; 2e-16 \n6 treatment treatmentæ–°æ–¹æ¡ˆ 0.83 (0.68-1)    0.0505  \n7 ecog      ecog            1.32 (1.19-1.45) 4.67e-08\n\n\n\n\nå¤šå› ç´  Cox æ¨¡å‹\n\n# å¤šå› ç´  Cox å›å½’\ncox_full &lt;- coxph(\n    Surv(time, status) ~ age + sex + stage + treatment + ecog,\n    data = cancer_data\n)\n\nsummary(cox_full)\n\nCall:\ncoxph(formula = Surv(time, status) ~ age + sex + stage + treatment + \n    ecog, data = cancer_data)\n\n  n= 500, number of events= 417 \n\n                     coef exp(coef)  se(coef)      z Pr(&gt;|z|)    \nage              0.018473  1.018645  0.004417  4.182 2.89e-05 ***\nsexå¥³           -0.155118  0.856314  0.101451 -1.529  0.12627    \nstageII          0.318329  1.374828  0.164579  1.934  0.05309 .  \nstageIII         0.730977  2.077108  0.160801  4.546 5.47e-06 ***\nstageIV          1.808575  6.101745  0.182122  9.931  &lt; 2e-16 ***\ntreatmentæ–°æ–¹æ¡ˆ -0.262249  0.769320  0.100184 -2.618  0.00885 ** \necog             0.335977  1.399307  0.050137  6.701 2.07e-11 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                exp(coef) exp(-coef) lower .95 upper .95\nage                1.0186     0.9817    1.0099    1.0275\nsexå¥³              0.8563     1.1678    0.7019    1.0447\nstageII            1.3748     0.7274    0.9958    1.8982\nstageIII           2.0771     0.4814    1.5156    2.8466\nstageIV            6.1017     0.1639    4.2700    8.7192\ntreatmentæ–°æ–¹æ¡ˆ    0.7693     1.2998    0.6322    0.9362\necog               1.3993     0.7146    1.2683    1.5438\n\nConcordance= 0.686  (se = 0.013 )\nLikelihood ratio test= 168.1  on 7 df,   p=&lt;2e-16\nWald test            = 177.4  on 7 df,   p=&lt;2e-16\nScore (logrank) test = 196.1  on 7 df,   p=&lt;2e-16\n\n\n\n\næ•´æ´è¾“å‡º\n\n# ä½¿ç”¨ gtsummary ç”Ÿæˆä¸“ä¸šè¡¨æ ¼\ncox_full |&gt;\n    tbl_regression(\n        exponentiate = TRUE,\n        label = list(\n            age ~ \"å¹´é¾„\",\n            sex ~ \"æ€§åˆ«\",\n            stage ~ \"è‚¿ç˜¤åˆ†æœŸ\",\n            treatment ~ \"æ²»ç–—æ–¹æ¡ˆ\",\n            ecog ~ \"ECOG è¯„åˆ†\"\n        )\n    ) |&gt;\n    add_global_p() |&gt;\n    bold_p() |&gt;\n    add_nevent(location = \"level\") |&gt;\n    modify_header(label = \"**å˜é‡**\") |&gt;\n    modify_caption(\"**è¡¨. å¤šå› ç´  Cox å›å½’åˆ†æç»“æœ**\")\n\n\n\n\n\nè¡¨. å¤šå› ç´  Cox å›å½’åˆ†æç»“æœ\n\n\n\n\n\n\n\n\n\nå˜é‡\nEvent N\nHR\n95% CI\np-value\n\n\n\n\nå¹´é¾„\n417\n1.02\n1.01, 1.03\n&lt;0.001\n\n\næ€§åˆ«\n\n\n\n\n\n\n0.12\n\n\nÂ Â Â Â ç”·\n251\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â å¥³\n166\n0.86\n0.70, 1.04\n\n\n\n\nè‚¿ç˜¤åˆ†æœŸ\n\n\n\n\n\n\n&lt;0.001\n\n\nÂ Â Â Â I\n54\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â II\n121\n1.37\n1.00, 1.90\n\n\n\n\nÂ Â Â Â III\n151\n2.08\n1.52, 2.85\n\n\n\n\nÂ Â Â Â IV\n91\n6.10\n4.27, 8.72\n\n\n\n\næ²»ç–—æ–¹æ¡ˆ\n\n\n\n\n\n\n0.009\n\n\nÂ Â Â Â æ ‡å‡†æ²»ç–—\n213\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â æ–°æ–¹æ¡ˆ\n204\n0.77\n0.63, 0.94\n\n\n\n\nECOG è¯„åˆ†\n417\n1.40\n1.27, 1.54\n&lt;0.001\n\n\n\nAbbreviations: CI = Confidence Interval, HR = Hazard Ratio",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç”Ÿå­˜åˆ†æ"
    ]
  },
  {
    "objectID": "1020-survival.html#æ¯”ä¾‹é£é™©å‡è®¾æ£€éªŒ",
    "href": "1020-survival.html#æ¯”ä¾‹é£é™©å‡è®¾æ£€éªŒ",
    "title": "ç”Ÿå­˜åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æ¯”ä¾‹é£é™©å‡è®¾æ£€éªŒ",
    "text": "æ¯”ä¾‹é£é™©å‡è®¾æ£€éªŒ\nCox æ¨¡å‹çš„æ ¸å¿ƒå‡è®¾æ˜¯æ¯”ä¾‹é£é™©å‡è®¾ï¼šå„ç»„çš„é£é™©æ¯”éšæ—¶é—´ä¿æŒæ’å®šã€‚\n\nSchoenfeld æ®‹å·®æ£€éªŒ\n\n# PH å‡è®¾æ£€éªŒ\nph_test &lt;- cox.zph(cox_full)\nprint(ph_test)\n\n           chisq df    p\nage       1.3144  1 0.25\nsex       0.0453  1 0.83\nstage     3.7598  3 0.29\ntreatment 0.3548  1 0.55\necog      0.0327  1 0.86\nGLOBAL    5.5139  7 0.60\n\n# p &lt; 0.05 è¡¨ç¤ºè¿åæ¯”ä¾‹é£é™©å‡è®¾\n\n\n# å¯è§†åŒ– Schoenfeld æ®‹å·®\nggcoxzph(ph_test)\n\n\n\n\n\n\n\n\n\n\nè§£å†³ PH å‡è®¾è¿å\n\n# æ–¹æ³• 1ï¼šåˆ†å±‚åˆ†æï¼ˆå¯¹è¿åå‡è®¾çš„å˜é‡åˆ†å±‚ï¼‰\ncox_strata &lt;- coxph(\n    Surv(time, status) ~ age + sex + strata(stage) + treatment + ecog,\n    data = cancer_data\n)\n\nsummary(cox_strata)\n\nCall:\ncoxph(formula = Surv(time, status) ~ age + sex + strata(stage) + \n    treatment + ecog, data = cancer_data)\n\n  n= 500, number of events= 417 \n\n                     coef exp(coef)  se(coef)      z Pr(&gt;|z|)    \nage              0.018178  1.018344  0.004429  4.104 4.05e-05 ***\nsexå¥³           -0.153714  0.857517  0.102271 -1.503   0.1328    \ntreatmentæ–°æ–¹æ¡ˆ -0.238311  0.787958  0.101020 -2.359   0.0183 *  \necog             0.339531  1.404289  0.050752  6.690 2.23e-11 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                exp(coef) exp(-coef) lower .95 upper .95\nage                1.0183     0.9820    1.0095    1.0272\nsexå¥³              0.8575     1.1662    0.7018    1.0478\ntreatmentæ–°æ–¹æ¡ˆ    0.7880     1.2691    0.6464    0.9605\necog               1.4043     0.7121    1.2713    1.5512\n\nConcordance= 0.614  (se = 0.016 )\nLikelihood ratio test= 62.07  on 4 df,   p=1e-12\nWald test            = 61.56  on 4 df,   p=1e-12\nScore (logrank) test = 62.32  on 4 df,   p=9e-13\n\n\n\n# æ–¹æ³• 2ï¼šæ—¶é—´ä¾èµ–åå˜é‡ï¼ˆé«˜çº§ç”¨æ³•ï¼‰\n# æ³¨æ„ï¼šæ­¤æ–¹æ³•éœ€è¦ä»”ç»†å¤„ç† stage å˜é‡çš„è½¬æ¢\ncox_tv &lt;- coxph(\n    Surv(time, status) ~ age + sex + stage + treatment + ecog + tt(ecog),\n    data = cancer_data,\n    tt = function(x, t, ...) x * log(t + 1)\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç”Ÿå­˜åˆ†æ"
    ]
  },
  {
    "objectID": "1020-survival.html#æ£®æ—å›¾å¯è§†åŒ–",
    "href": "1020-survival.html#æ£®æ—å›¾å¯è§†åŒ–",
    "title": "ç”Ÿå­˜åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æ£®æ—å›¾å¯è§†åŒ–",
    "text": "æ£®æ—å›¾å¯è§†åŒ–\n\n# ç»‘åˆ¶æ£®æ—å›¾ï¼ˆä½¿ç”¨ survminer çš„ ggforestï¼‰\nggforest(cox_full,\n    data = cancer_data,\n    main = \"å¤šå› ç´  Cox å›å½’æ£®æ—å›¾\",\n    fontsize = 0.9\n)\n\n\nè‡ªå®šä¹‰æ£®æ—å›¾\n\n# æå– HR æ•°æ®\nhr_data &lt;- tidy(cox_full, conf.int = TRUE, exponentiate = TRUE) |&gt;\n    mutate(\n        term = factor(term, levels = rev(term)),\n        significant = p.value &lt; 0.05\n    )\n\nggplot(hr_data, aes(x = estimate, y = term)) +\n    geom_vline(xintercept = 1, linetype = \"dashed\", color = \"gray50\") +\n    geom_errorbarh(aes(xmin = conf.low, xmax = conf.high, color = significant),\n        height = 0.2, linewidth = 0.8\n    ) +\n    geom_point(aes(color = significant), size = 3) +\n    scale_x_log10(breaks = c(0.5, 1, 2, 4)) +\n    scale_color_manual(\n        values = c(\"TRUE\" = \"#ef4444\", \"FALSE\" = \"#9ca3af\"),\n        labels = c(\"TRUE\" = \"æ˜¾è‘—\", \"FALSE\" = \"ä¸æ˜¾è‘—\")\n    ) +\n    labs(\n        title = \"Cox å›å½’é£é™©æ¯”æ£®æ—å›¾\",\n        x = \"é£é™©æ¯” (HR)\",\n        y = NULL,\n        color = \"ç»Ÿè®¡æ˜¾è‘—æ€§\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(hjust = 0.5, face = \"bold\"),\n        legend.position = \"bottom\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç”Ÿå­˜åˆ†æ"
    ]
  },
  {
    "objectID": "1020-survival.html#æ¨¡å‹è¯Šæ–­",
    "href": "1020-survival.html#æ¨¡å‹è¯Šæ–­",
    "title": "ç”Ÿå­˜åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹è¯Šæ–­",
    "text": "æ¨¡å‹è¯Šæ–­\n\nçº¿æ€§å‡è®¾æ£€æŸ¥\nå¯¹è¿ç»­å˜é‡ï¼Œå¯åˆ©ç”¨ Martingale æ®‹å·®æˆ–æ ·æ¡é¡¹è§‚å¯Ÿæ˜¯å¦å­˜åœ¨éçº¿æ€§è¶‹åŠ¿ã€‚ è‹¥è¶‹åŠ¿æ˜æ˜¾ï¼Œåº”è€ƒè™‘æ ·æ¡æˆ–åˆ†æ®µå›å½’ã€‚\n\n\næ®‹å·®åˆ†æ\n\n# Martingale æ®‹å·®ï¼ˆæ£€æµ‹éçº¿æ€§ï¼‰\ncancer_data$resid_martingale &lt;- residuals(cox_full, type = \"martingale\")\n\nggplot(cancer_data, aes(x = age, y = resid_martingale)) +\n    geom_point(alpha = 0.5) +\n    geom_smooth(method = \"loess\", color = \"#4f46e5\") +\n    geom_hline(yintercept = 0, linetype = \"dashed\") +\n    labs(\n        title = \"Martingale æ®‹å·® vs å¹´é¾„\",\n        subtitle = \"æ£€éªŒå¹´é¾„ä¸é£é™©çš„çº¿æ€§å…³ç³»\",\n        x = \"å¹´é¾„\",\n        y = \"Martingale æ®‹å·®\"\n    ) +\n    theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\n\n# Deviance æ®‹å·®ï¼ˆæ£€æµ‹å¼‚å¸¸å€¼ï¼‰\ncancer_data$resid_deviance &lt;- residuals(cox_full, type = \"deviance\")\n\nggplot(cancer_data, aes(x = seq_along(resid_deviance), y = resid_deviance)) +\n    geom_point(alpha = 0.5) +\n    geom_hline(yintercept = c(-2, 2), linetype = \"dashed\", color = \"red\") +\n    labs(\n        title = \"Deviance æ®‹å·®\",\n        subtitle = \"è¶…è¿‡ Â±2 å¯èƒ½æ˜¯å¼‚å¸¸å€¼\",\n        x = \"è§‚æµ‹åºå·\",\n        y = \"Deviance æ®‹å·®\"\n    ) +\n    theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\n\n\nå½±å“è¯Šæ–­\n\n# dfbetaï¼ˆå½±å“åˆ†æï¼‰\ndfbeta_res &lt;- residuals(cox_full, type = \"dfbeta\")\n\n# ç»‘åˆ¶ç¬¬ä¸€ä¸ªå˜é‡ï¼ˆageï¼‰çš„ dfbeta\nplot_data &lt;- tibble(\n    index = 1:nrow(cancer_data),\n    dfbeta_age = dfbeta_res[, 1] # ä½¿ç”¨åˆ—ç´¢å¼•\n)\n\nggplot(plot_data, aes(x = index, y = dfbeta_age)) +\n    geom_point(alpha = 0.5) +\n    geom_hline(yintercept = 0, linetype = \"dashed\") +\n    labs(\n        title = \"å¹´é¾„ç³»æ•°çš„å½±å“è¯Šæ–­\",\n        x = \"è§‚æµ‹åºå·\",\n        y = \"dfbeta\"\n    ) +\n    theme_minimal(base_size = 12)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç”Ÿå­˜åˆ†æ"
    ]
  },
  {
    "objectID": "1020-survival.html#é¢„åé¢„æµ‹",
    "href": "1020-survival.html#é¢„åé¢„æµ‹",
    "title": "ç”Ÿå­˜åˆ†æå®Œå…¨æŒ‡å—",
    "section": "é¢„åé¢„æµ‹",
    "text": "é¢„åé¢„æµ‹\n\nè°ƒæ•´ç”Ÿå­˜æ›²çº¿\n\n# æ ¹æ® Cox æ¨¡å‹ç»‘åˆ¶è°ƒæ•´åçš„ç”Ÿå­˜æ›²çº¿\nadjusted_surv &lt;- survfit(cox_full,\n    newdata = data.frame(\n        age = c(50, 50),\n        sex = factor(c(\"ç”·\", \"ç”·\"), levels = levels(cancer_data$sex)),\n        stage = factor(c(\"II\", \"II\"), levels = levels(cancer_data$stage)),\n        treatment = factor(c(\"æ ‡å‡†æ²»ç–—\", \"æ–°æ–¹æ¡ˆ\"),\n            levels = levels(cancer_data$treatment)\n        ),\n        ecog = c(1, 1)\n    )\n)\n\n# ç»‘åˆ¶è°ƒæ•´åç”Ÿå­˜æ›²çº¿\nggsurvplot(\n    adjusted_surv,\n    data = cancer_data,\n    conf.int = TRUE,\n    palette = c(\"#4f46e5\", \"#10b981\"),\n    legend.labs = c(\"æ ‡å‡†æ²»ç–—\", \"æ–°æ–¹æ¡ˆ\"),\n    legend.title = \"æ²»ç–—æ–¹æ¡ˆ\",\n    xlab = \"æ—¶é—´ (æœˆ)\",\n    ylab = \"ç”Ÿå­˜æ¦‚ç‡\",\n    title = \"è°ƒæ•´åçš„ç”Ÿå­˜æ›²çº¿ï¼ˆå¹´é¾„50ï¼Œç”·æ€§ï¼ŒIIæœŸï¼ŒECOG=1ï¼‰\"\n)\n\n\n\n\n\n\n\n\n\n\nä¸ªä½“é£é™©è¯„åˆ†\n\n# è®¡ç®—çº¿æ€§é¢„æµ‹å€¼ï¼ˆé£é™©è¯„åˆ†ï¼‰\ncancer_data$risk_score &lt;- predict(cox_full, type = \"lp\")\n\n# æ ¹æ®é£é™©è¯„åˆ†åˆ†ç»„\ncancer_data &lt;- cancer_data |&gt;\n    mutate(\n        risk_group = cut(risk_score,\n            breaks = quantile(risk_score, c(0, 0.33, 0.67, 1)),\n            labels = c(\"ä½é£é™©\", \"ä¸­é£é™©\", \"é«˜é£é™©\"),\n            include.lowest = TRUE\n        )\n    )\n\n# ç»˜åˆ¶é£é™©åˆ†å±‚ç”Ÿå­˜æ›²çº¿\nkm_risk &lt;- survfit(Surv(time, status) ~ risk_group, data = cancer_data)\n\nggsurvplot(\n    km_risk,\n    data = cancer_data,\n    pval = TRUE,\n    conf.int = TRUE,\n    risk.table = TRUE,\n    palette = c(\"#22c55e\", \"#f59e0b\", \"#ef4444\"),\n    legend.title = \"é£é™©åˆ†ç»„\",\n    xlab = \"æ—¶é—´ (æœˆ)\",\n    ylab = \"ç”Ÿå­˜æ¦‚ç‡\",\n    title = \"åŸºäº Cox æ¨¡å‹çš„é£é™©åˆ†å±‚\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç”Ÿå­˜åˆ†æ"
    ]
  },
  {
    "objectID": "1020-survival.html#ç«äº‰é£é™©åˆ†æ",
    "href": "1020-survival.html#ç«äº‰é£é™©åˆ†æ",
    "title": "ç”Ÿå­˜åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç«äº‰é£é™©åˆ†æ",
    "text": "ç«äº‰é£é™©åˆ†æ\nå½“å­˜åœ¨å¤šç§äº‹ä»¶ç±»å‹æ—¶ï¼Œéœ€è¦è€ƒè™‘ç«äº‰é£é™©ã€‚\n\n# æ¨¡æ‹Ÿç«äº‰é£é™©æ•°æ®\nset.seed(42)\ncompeting_data &lt;- cancer_data |&gt;\n    mutate(\n        # äº‹ä»¶ç±»å‹ï¼š1=è‚¿ç˜¤æ­»äº¡ï¼Œ2=å…¶ä»–æ­»äº¡ï¼Œ0=åˆ å¤±\n        event_type = case_when(\n            status == 0 ~ 0,\n            rbinom(n(), 1, 0.7) == 1 ~ 1, # 70% è‚¿ç˜¤æ­»äº¡\n            TRUE ~ 2 # 30% å…¶ä»–æ­»äº¡\n        )\n    )\n\ntable(competing_data$event_type)\n\n\n  0   1   2 \n 83 295 122 \n\n\n\n# ä½¿ç”¨ tidycmprsk åŒ…ï¼ˆå¦‚å·²å®‰è£…ï¼‰\n# library(tidycmprsk)\n# cuminc(Surv(time, as.factor(event_type)) ~ treatment, data = competing_data)\n\n# æˆ–ä½¿ç”¨ cmprsk åŒ…\nlibrary(cmprsk)\n\n# ç´¯ç§¯å‘ç—…å‡½æ•°\ncif &lt;- cuminc(\n    ftime = competing_data$time,\n    fstatus = competing_data$event_type,\n    group = competing_data$treatment\n)\n\n# å¯è§†åŒ–\nplot(cif,\n    xlab = \"æ—¶é—´ (æœˆ)\", ylab = \"ç´¯ç§¯å‘ç—…ç‡\",\n    main = \"ç«äº‰é£é™©ç´¯ç§¯å‘ç—…æ›²çº¿\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç”Ÿå­˜åˆ†æ"
    ]
  },
  {
    "objectID": "1020-survival.html#å‚æ•°ç”Ÿå­˜æ¨¡å‹",
    "href": "1020-survival.html#å‚æ•°ç”Ÿå­˜æ¨¡å‹",
    "title": "ç”Ÿå­˜åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å‚æ•°ç”Ÿå­˜æ¨¡å‹",
    "text": "å‚æ•°ç”Ÿå­˜æ¨¡å‹\né™¤ Cox æ¨¡å‹å¤–ï¼Œè¿˜å¯ä½¿ç”¨å‚æ•°æ¨¡å‹ï¼š\n\n# æŒ‡æ•°æ¨¡å‹\nsurv_exp &lt;- survreg(Surv(time, status) ~ age + sex + stage + treatment,\n    data = cancer_data, dist = \"exponential\"\n)\n\n# Weibull æ¨¡å‹\nsurv_weibull &lt;- survreg(Surv(time, status) ~ age + sex + stage + treatment,\n    data = cancer_data, dist = \"weibull\"\n)\n\n# å¯¹æ•°æ­£æ€æ¨¡å‹\nsurv_lognormal &lt;- survreg(Surv(time, status) ~ age + sex + stage + treatment,\n    data = cancer_data, dist = \"lognormal\"\n)\n\n# æ¯”è¾ƒæ¨¡å‹\nAIC(surv_exp, surv_weibull, surv_lognormal)\n\n               df      AIC\nsurv_exp        7 3124.892\nsurv_weibull    8 3102.135\nsurv_lognormal  8 3128.699",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç”Ÿå­˜åˆ†æ"
    ]
  },
  {
    "objectID": "1020-survival.html#å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "href": "1020-survival.html#å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "title": "ç”Ÿå­˜åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "text": "å¸¸è§é—®é¢˜ä¸é™·é˜±\n\n1. åˆ å¤±ç±»å‹\n\n\n\n\n\n\n\n\nåˆ å¤±ç±»å‹\nå®šä¹‰\nå¤„ç†æ–¹æ³•\n\n\n\n\nå³åˆ å¤±\näº‹ä»¶å‘ç”Ÿåœ¨è§‚å¯ŸæœŸå\næ ‡å‡†æ–¹æ³•é€‚ç”¨\n\n\nå·¦åˆ å¤±\näº‹ä»¶å‘ç”Ÿåœ¨è§‚å¯ŸæœŸå‰\néœ€è¦ç‰¹æ®Šæ–¹æ³•\n\n\nåŒºé—´åˆ å¤±\näº‹ä»¶å‘ç”Ÿåœ¨ä¸¤æ¬¡è§‚å¯Ÿä¹‹é—´\nsurvival::Surv(..., type=\"interval\")\n\n\n\n\n\n2. è¿å PH å‡è®¾\n\n# è§£å†³æ–¹æ¡ˆ\n# 1. åˆ†å±‚åˆ†æ\ncoxph(Surv(time, status) ~ x1 + strata(x2), data = data)\n\n# 2. æ—¶é—´ä¾èµ–åå˜é‡\ncoxph(Surv(time, status) ~ x1 + x1:log(time), data = data)\n\n# 3. åŠ é€Ÿå¤±æ•ˆæ—¶é—´æ¨¡å‹\nsurvreg(Surv(time, status) ~ x1 + x2, data = data, dist = \"weibull\")\n\n\n\n3. æ—¶é—´ä¾èµ–åå˜é‡\n\n# å¤„ç†éšæ—¶é—´å˜åŒ–çš„åå˜é‡\n# éœ€è¦è½¬æ¢ä¸ºè®¡æ•°è¿‡ç¨‹æ ¼å¼\nlibrary(survival)\ntmerge(data, data, id = id, event = event(tstop, status)) |&gt;\n    tmerge(..., tdc(time_of_change, new_value))\n\n\n\n4. æ ·æœ¬é‡è®¡ç®—\n\n# è®¡ç®—æ‰€éœ€æ ·æœ¬é‡\nlibrary(powerSurvEpi)\n\n# ç¤ºä¾‹ï¼šæ£€æµ‹ HR = 0.7 çš„å·®å¼‚\n# ssizeCT(\n#   power = 0.8,\n#   k = 1,          # ä¸¤ç»„æ¯”ä¾‹ 1:1\n#   pE = 0.3,       # å¯¹ç…§ç»„äº‹ä»¶ç‡\n#   pC = 0.3,\n#   RR = 0.7,       # é£é™©æ¯”\n#   alpha = 0.05\n# )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç”Ÿå­˜åˆ†æ"
    ]
  },
  {
    "objectID": "1020-survival.html#å®Œæ•´åˆ†ææ¨¡æ¿",
    "href": "1020-survival.html#å®Œæ•´åˆ†ææ¨¡æ¿",
    "title": "ç”Ÿå­˜åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å®Œæ•´åˆ†ææ¨¡æ¿",
    "text": "å®Œæ•´åˆ†ææ¨¡æ¿\n\n# ========== ç”Ÿå­˜åˆ†æå®Œæ•´æµç¨‹ ==========\n\nlibrary(survival)\nlibrary(survminer)\n\n# 1. KM æ›²çº¿\nkm_fit &lt;- survfit(Surv(time, status) ~ group, data = data)\nggsurvplot(km_fit, data = data, pval = TRUE, risk.table = TRUE)\n\n# 2. Log-rank æ£€éªŒ\nsurvdiff(Surv(time, status) ~ group, data = data)\n\n# 3. Cox å›å½’\ncox_model &lt;- coxph(Surv(time, status) ~ x1 + x2 + x3, data = data)\nsummary(cox_model)\n\n# 4. PH å‡è®¾æ£€éªŒ\ncox.zph(cox_model)\n\n# 5. æ£®æ—å›¾\nggforest(cox_model, data = data)\n\n# 6. ç»“æœè¡¨æ ¼\ntbl_regression(cox_model, exponentiate = TRUE)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç”Ÿå­˜åˆ†æ"
    ]
  },
  {
    "objectID": "1020-survival.html#æ€»ç»“",
    "href": "1020-survival.html#æ€»ç»“",
    "title": "ç”Ÿå­˜åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nåˆ†æç›®çš„\næ–¹æ³•\nR å‡½æ•°\n\n\n\n\næè¿°ç”Ÿå­˜æƒ…å†µ\nKaplan-Meier\nsurvfit()\n\n\nç»„é—´æ¯”è¾ƒ\nLog-rank æ£€éªŒ\nsurvdiff()\n\n\nå¤šå› ç´ åˆ†æ\nCox å›å½’\ncoxph()\n\n\nå¯è§†åŒ–\nç”Ÿå­˜æ›²çº¿\nsurvminer::ggsurvplot()\n\n\nå‡è®¾æ£€éªŒ\nPH å‡è®¾\ncox.zph()\n\n\n\n\næŠ¥å‘Šç”Ÿå­˜åˆ†æçš„ Checklist\n\næŠ¥å‘Šéšè®¿æ—¶é—´ï¼ˆä¸­ä½æ•°ã€èŒƒå›´ï¼‰\næŠ¥å‘Šäº‹ä»¶æ•°å’Œåˆ å¤±æ•°\næŠ¥å‘Šä¸­ä½ç”Ÿå­˜æ—¶é—´åŠ 95% CI\næŠ¥å‘Š 1 å¹´ã€3 å¹´ã€5 å¹´ç”Ÿå­˜ç‡\næä¾› KM æ›²çº¿å’Œé£é™©è¡¨\næŠ¥å‘Š Log-rank p å€¼\nCox æ¨¡å‹æŠ¥å‘Š HR åŠ 95% CI\næ£€éªŒ PH å‡è®¾\n\n\n\næ¨èé˜…è¯»\n\nKleinbaum DG, Klein M. Survival Analysis: A Self-Learning Text (3rd ed.)\nTherneau TM, Grambsch PM. Modeling Survival Data\nSTHDA ç”Ÿå­˜åˆ†ææ•™ç¨‹",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç”Ÿå­˜åˆ†æ"
    ]
  },
  {
    "objectID": "1018-psm.html",
    "href": "1018-psm.html",
    "title": "å€¾å‘æ€§å¾—åˆ†åŒ¹é… - å› æœæ¨æ–­çš„åˆ©å™¨",
    "section": "",
    "text": "å€¾å‘æ€§å¾—åˆ†åŒ¹é… (Propensity Score Matching, PSM) æ˜¯ä¸€ç§ç”¨äºè§‚å¯Ÿæ€§ç ”ç©¶ä¸­æ§åˆ¶æ··æ‚å› ç´ ã€ä¼°è®¡å› æœæ•ˆåº”çš„ç»Ÿè®¡æ–¹æ³•ã€‚\n\n\n\nåœ¨éšæœºå¯¹ç…§è¯•éªŒ (RCT) ä¸­ï¼Œéšæœºåˆ†ç»„ç¡®ä¿äº†å¤„ç†ç»„å’Œå¯¹ç…§ç»„åœ¨åŸºçº¿ç‰¹å¾ä¸Šçš„å¯æ¯”æ€§ã€‚ä½†åœ¨è§‚å¯Ÿæ€§ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬æ— æ³•éšæœºåˆ†é…å¤„ç†ï¼Œå¯¼è‡´ï¼š\n\nå¤„ç†ç»„å’Œå¯¹ç…§ç»„å¯èƒ½å­˜åœ¨ç³»ç»Ÿæ€§å·®å¼‚\nç›´æ¥æ¯”è¾ƒç»“å±€ä¼šäº§ç”Ÿé€‰æ‹©åå€š\næ— æ³•åŒºåˆ†æ˜¯â€å¤„ç†æ•ˆåº”â€è¿˜æ˜¯â€åŸºçº¿å·®å¼‚â€å¯¼è‡´çš„ç»“æœå·®å¼‚\n\nPSM çš„æ ¸å¿ƒæ€æƒ³ï¼šæ‰¾åˆ°åœ¨â€æ¥å—å¤„ç†çš„æ¦‚ç‡â€ä¸Šç›¸ä¼¼çš„ä¸ªä½“è¿›è¡Œé…å¯¹ï¼Œä»è€Œæ¨¡æ‹ŸéšæœºåŒ–å®éªŒã€‚\n\n\n\n\n\n\n\n\n\n\n\næ¦‚å¿µ\nå®šä¹‰\nå…¬å¼\n\n\n\n\nå€¾å‘æ€§å¾—åˆ†\nç»™å®šåå˜é‡ X æ—¶ï¼Œä¸ªä½“æ¥å—å¤„ç†çš„æ¡ä»¶æ¦‚ç‡\n\\(e(X) = P(T=1|X)\\)\n\n\nå¹³è¡¡æ€§\nåŒ¹é…åå¤„ç†ç»„ä¸å¯¹ç…§ç»„åå˜é‡åˆ†å¸ƒç›¸ä¼¼\n\\(X \\perp T | e(X)\\)\n\n\nATE\nå¹³å‡å¤„ç†æ•ˆåº” (Average Treatment Effect)\n\\(E[Y(1) - Y(0)]\\)\n\n\nATT\nå¤„ç†ç»„å¹³å‡å¤„ç†æ•ˆåº”\n\\(E[Y(1) - Y(0) | T=1]\\)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å€¾å‘æ€§å¾—åˆ†åŒ¹é…"
    ]
  },
  {
    "objectID": "1018-psm.html#ä»€ä¹ˆæ˜¯å€¾å‘æ€§å¾—åˆ†åŒ¹é…",
    "href": "1018-psm.html#ä»€ä¹ˆæ˜¯å€¾å‘æ€§å¾—åˆ†åŒ¹é…",
    "title": "å€¾å‘æ€§å¾—åˆ†åŒ¹é… - å› æœæ¨æ–­çš„åˆ©å™¨",
    "section": "",
    "text": "å€¾å‘æ€§å¾—åˆ†åŒ¹é… (Propensity Score Matching, PSM) æ˜¯ä¸€ç§ç”¨äºè§‚å¯Ÿæ€§ç ”ç©¶ä¸­æ§åˆ¶æ··æ‚å› ç´ ã€ä¼°è®¡å› æœæ•ˆåº”çš„ç»Ÿè®¡æ–¹æ³•ã€‚\n\n\n\nåœ¨éšæœºå¯¹ç…§è¯•éªŒ (RCT) ä¸­ï¼Œéšæœºåˆ†ç»„ç¡®ä¿äº†å¤„ç†ç»„å’Œå¯¹ç…§ç»„åœ¨åŸºçº¿ç‰¹å¾ä¸Šçš„å¯æ¯”æ€§ã€‚ä½†åœ¨è§‚å¯Ÿæ€§ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬æ— æ³•éšæœºåˆ†é…å¤„ç†ï¼Œå¯¼è‡´ï¼š\n\nå¤„ç†ç»„å’Œå¯¹ç…§ç»„å¯èƒ½å­˜åœ¨ç³»ç»Ÿæ€§å·®å¼‚\nç›´æ¥æ¯”è¾ƒç»“å±€ä¼šäº§ç”Ÿé€‰æ‹©åå€š\næ— æ³•åŒºåˆ†æ˜¯â€å¤„ç†æ•ˆåº”â€è¿˜æ˜¯â€åŸºçº¿å·®å¼‚â€å¯¼è‡´çš„ç»“æœå·®å¼‚\n\nPSM çš„æ ¸å¿ƒæ€æƒ³ï¼šæ‰¾åˆ°åœ¨â€æ¥å—å¤„ç†çš„æ¦‚ç‡â€ä¸Šç›¸ä¼¼çš„ä¸ªä½“è¿›è¡Œé…å¯¹ï¼Œä»è€Œæ¨¡æ‹ŸéšæœºåŒ–å®éªŒã€‚\n\n\n\n\n\n\n\n\n\n\n\næ¦‚å¿µ\nå®šä¹‰\nå…¬å¼\n\n\n\n\nå€¾å‘æ€§å¾—åˆ†\nç»™å®šåå˜é‡ X æ—¶ï¼Œä¸ªä½“æ¥å—å¤„ç†çš„æ¡ä»¶æ¦‚ç‡\n\\(e(X) = P(T=1|X)\\)\n\n\nå¹³è¡¡æ€§\nåŒ¹é…åå¤„ç†ç»„ä¸å¯¹ç…§ç»„åå˜é‡åˆ†å¸ƒç›¸ä¼¼\n\\(X \\perp T | e(X)\\)\n\n\nATE\nå¹³å‡å¤„ç†æ•ˆåº” (Average Treatment Effect)\n\\(E[Y(1) - Y(0)]\\)\n\n\nATT\nå¤„ç†ç»„å¹³å‡å¤„ç†æ•ˆåº”\n\\(E[Y(1) - Y(0) | T=1]\\)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å€¾å‘æ€§å¾—åˆ†åŒ¹é…"
    ]
  },
  {
    "objectID": "1018-psm.html#å®‰è£…ä¸åŠ è½½",
    "href": "1018-psm.html#å®‰è£…ä¸åŠ è½½",
    "title": "å€¾å‘æ€§å¾—åˆ†åŒ¹é… - å› æœæ¨æ–­çš„åˆ©å™¨",
    "section": "ğŸ›  å®‰è£…ä¸åŠ è½½",
    "text": "ğŸ›  å®‰è£…ä¸åŠ è½½\n\n# æ ¸å¿ƒåŒ…\nlibrary(MatchIt)      # PSM ä¸»åŠ›åŒ…\nlibrary(cobalt)       # å¹³è¡¡æ€§è¯Šæ–­\nlibrary(marginaleffects)  # æ•ˆåº”ä¼°è®¡\n\n# è¾…åŠ©åŒ…\nlibrary(tidyverse)\nlibrary(gtsummary)\nlibrary(ggplot2)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å€¾å‘æ€§å¾—åˆ†åŒ¹é…"
    ]
  },
  {
    "objectID": "1018-psm.html#psm-å®Œæ•´æµç¨‹",
    "href": "1018-psm.html#psm-å®Œæ•´æµç¨‹",
    "title": "å€¾å‘æ€§å¾—åˆ†åŒ¹é… - å› æœæ¨æ–­çš„åˆ©å™¨",
    "section": "ğŸ’¡ PSM å®Œæ•´æµç¨‹",
    "text": "ğŸ’¡ PSM å®Œæ•´æµç¨‹\nPSM åˆ†æåŒ…å« 5 ä¸ªå…³é”®æ­¥éª¤ï¼š\n1. æ•°æ®å‡†å¤‡ â†’ 2. ä¼°è®¡å€¾å‘æ€§å¾—åˆ† â†’ 3. åŒ¹é… â†’ 4. å¹³è¡¡æ€§æ£€éªŒ â†’ 5. æ•ˆåº”ä¼°è®¡",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å€¾å‘æ€§å¾—åˆ†åŒ¹é…"
    ]
  },
  {
    "objectID": "1018-psm.html#å®æˆ˜æ¡ˆä¾‹å¸çƒŸå¯¹å‡ºç”Ÿä½“é‡çš„å½±å“",
    "href": "1018-psm.html#å®æˆ˜æ¡ˆä¾‹å¸çƒŸå¯¹å‡ºç”Ÿä½“é‡çš„å½±å“",
    "title": "å€¾å‘æ€§å¾—åˆ†åŒ¹é… - å› æœæ¨æ–­çš„åˆ©å™¨",
    "section": "ğŸ“Š å®æˆ˜æ¡ˆä¾‹ï¼šå¸çƒŸå¯¹å‡ºç”Ÿä½“é‡çš„å½±å“",
    "text": "ğŸ“Š å®æˆ˜æ¡ˆä¾‹ï¼šå¸çƒŸå¯¹å‡ºç”Ÿä½“é‡çš„å½±å“\næˆ‘ä»¬ä½¿ç”¨ MatchIt åŒ…å†…ç½®çš„ lalonde æ•°æ®é›†æ¨¡æ‹Ÿä¸€ä¸ªç»å…¸é—®é¢˜ï¼šæ¯äº²å¸çƒŸæ˜¯å¦å½±å“æ–°ç”Ÿå„¿ä½“é‡ï¼Ÿ\nä¸ºäº†æ¼”ç¤ºï¼Œæˆ‘ä»¬æ„é€ ä¸€ä¸ªæ¨¡æ‹Ÿæ•°æ®é›†ï¼š\n\n# æ¨¡æ‹Ÿæ•°æ®ï¼šæ¯äº²å¸çƒŸä¸æ–°ç”Ÿå„¿ä½“é‡\nset.seed(2024)\nn &lt;- 1000\n\n# ç”Ÿæˆåå˜é‡\nage &lt;- round(rnorm(n, 28, 5))  # æ¯äº²å¹´é¾„\neducation &lt;- sample(1:4, n, replace = TRUE, \n                    prob = c(0.1, 0.3, 0.4, 0.2))  # æ•™è‚²æ°´å¹³\nincome &lt;- round(rnorm(n, 50000, 15000))  # å®¶åº­æ”¶å…¥\nprenatal_visits &lt;- rpois(n, 8)  # äº§æ£€æ¬¡æ•°\n\n# å¸çƒŸçŠ¶æ€å—åå˜é‡å½±å“ï¼ˆæ··æ‚ï¼‰\nsmoke_prob &lt;- plogis(-2 + 0.05 * (age - 28) - 0.3 * education + \n                      0.00001 * (income - 50000) - 0.1 * prenatal_visits)\nsmoking &lt;- rbinom(n, 1, smoke_prob)\n\n# å‡ºç”Ÿä½“é‡å—å¸çƒŸå’Œåå˜é‡å½±å“\n# çœŸå®å› æœæ•ˆåº”ï¼šå¸çƒŸé™ä½ä½“é‡ 250g\nbirthweight &lt;- 3300 + \n  10 * (age - 28) + \n  50 * education + \n  0.002 * (income - 50000) + \n  20 * prenatal_visits - \n  250 * smoking +  # çœŸå®å¤„ç†æ•ˆåº”\n  rnorm(n, 0, 300)\n\n# åˆ›å»ºæ•°æ®æ¡†\nbirth_data &lt;- tibble(\n  id = 1:n,\n  age = age,\n  education = factor(education, labels = c(\"åˆä¸­\", \"é«˜ä¸­\", \"æœ¬ç§‘\", \"ç ”ç©¶ç”Ÿ\")),\n  income = income,\n  prenatal_visits = prenatal_visits,\n  smoking = smoking,\n  birthweight = round(birthweight)\n)\n\nbirth_data\n\n# A tibble: 1,000 Ã— 7\n      id   age education income prenatal_visits smoking birthweight\n   &lt;int&gt; &lt;dbl&gt; &lt;fct&gt;      &lt;dbl&gt;           &lt;int&gt;   &lt;int&gt;       &lt;dbl&gt;\n 1     1    33 é«˜ä¸­       88087               3       0        3714\n 2     2    30 ç ”ç©¶ç”Ÿ     47298               9       0        3139\n 3     3    27 æœ¬ç§‘       60744              10       0        3687\n 4     4    27 é«˜ä¸­       34279               8       0        4095\n 5     5    34 æœ¬ç§‘       45515              10       0        3464\n 6     6    34 é«˜ä¸­       50469               5       0        3902\n 7     7    31 æœ¬ç§‘       68495               9       0        3713\n 8     8    27 æœ¬ç§‘       46204               9       0        3962\n 9     9    22 é«˜ä¸­       75489               8       0        2910\n10    10    22 ç ”ç©¶ç”Ÿ     70732              11       0        3745\n# â„¹ 990 more rows\n\n\n\næ­¥éª¤ 1ï¼šæ¢ç´¢æ€§æ•°æ®åˆ†æ\né¦–å…ˆæŸ¥çœ‹å¸çƒŸç»„å’Œéå¸çƒŸç»„çš„åŸºçº¿ç‰¹å¾å·®å¼‚ï¼š\n\n# åŸºçº¿ç‰¹å¾å¯¹æ¯”\nbirth_data |&gt; \n  tbl_summary(\n    by = smoking,\n    include = c(age, education, income, prenatal_visits, birthweight),\n    label = list(\n      age ~ \"å¹´é¾„\",\n      education ~ \"æ•™è‚²æ°´å¹³\",\n      income ~ \"å®¶åº­æ”¶å…¥\",\n      prenatal_visits ~ \"äº§æ£€æ¬¡æ•°\",\n      birthweight ~ \"å‡ºç”Ÿä½“é‡ (g)\"\n    ),\n    statistic = list(\n      all_continuous() ~ \"{mean} ({sd})\",\n      all_categorical() ~ \"{n} ({p}%)\"\n    )\n  ) |&gt; \n  add_p() |&gt; \n  add_overall() |&gt; \n  modify_header(label = \"**å˜é‡**\") |&gt; \n  modify_spanning_header(c(\"stat_1\", \"stat_2\") ~ \"**å¸çƒŸçŠ¶æ€**\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nå˜é‡\nOverall\nN = 1,0001\n\nå¸çƒŸçŠ¶æ€\n\np-value2\n\n\n0\nN = 9751\n1\nN = 251\n\n\n\n\nå¹´é¾„\n28.0 (4.9)\n27.9 (4.9)\n32.4 (4.3)\n&lt;0.001\n\n\næ•™è‚²æ°´å¹³\n\n\n\n\n\n\n0.090\n\n\nÂ Â Â Â åˆä¸­\n111 (11%)\n106 (11%)\n5 (20%)\n\n\n\n\nÂ Â Â Â é«˜ä¸­\n325 (33%)\n314 (32%)\n11 (44%)\n\n\n\n\nÂ Â Â Â æœ¬ç§‘\n383 (38%)\n375 (38%)\n8 (32%)\n\n\n\n\nÂ Â Â Â ç ”ç©¶ç”Ÿ\n181 (18%)\n180 (18%)\n1 (4.0%)\n\n\n\n\nå®¶åº­æ”¶å…¥\n50,365 (14,556)\n50,400 (14,566)\n49,015 (14,376)\n0.8\n\n\näº§æ£€æ¬¡æ•°\n8 (3)\n8 (3)\n7 (3)\n0.029\n\n\nå‡ºç”Ÿä½“é‡ (g)\n3,585 (319)\n3,589 (318)\n3,416 (287)\n0.009\n\n\n\n1 Mean (SD); n (%)\n\n\n2 Wilcoxon rank sum test; Fisherâ€™s exact test\n\n\n\n\n\n\n\n\nå¯ä»¥çœ‹åˆ°ï¼Œå¸çƒŸç»„å’Œéå¸çƒŸç»„åœ¨å¤šä¸ªåŸºçº¿ç‰¹å¾ä¸Šå­˜åœ¨æ˜¾è‘—å·®å¼‚ï¼Œè¿™å°±æ˜¯æ··æ‚ã€‚\n\n\næ­¥éª¤ 2ï¼šä¼°è®¡å€¾å‘æ€§å¾—åˆ†\nä½¿ç”¨ Logistic å›å½’ä¼°è®¡æ¯ä¸ªä¸ªä½“çš„å€¾å‘æ€§å¾—åˆ†ï¼š\n\n# ä¼°è®¡å€¾å‘æ€§å¾—åˆ†\nps_model &lt;- glm(\n  smoking ~ age + education + income + prenatal_visits,\n  data = birth_data,\n  family = binomial\n)\n\n# æ·»åŠ å€¾å‘æ€§å¾—åˆ†åˆ°æ•°æ®\nbirth_data$ps &lt;- predict(ps_model, type = \"response\")\n\n# æŸ¥çœ‹å€¾å‘æ€§å¾—åˆ†åˆ†å¸ƒ\nggplot(birth_data, aes(x = ps, fill = factor(smoking))) +\n  geom_density(alpha = 0.6) +\n  scale_fill_manual(\n    values = c(\"#3b82f6\", \"#ef4444\"),\n    labels = c(\"ä¸å¸çƒŸ\", \"å¸çƒŸ\")\n  ) +\n  labs(\n    title = \"å€¾å‘æ€§å¾—åˆ†åˆ†å¸ƒ\",\n    subtitle = \"åŒ¹é…å‰ï¼šä¸¤ç»„åˆ†å¸ƒå­˜åœ¨æ˜æ˜¾å·®å¼‚\",\n    x = \"å€¾å‘æ€§å¾—åˆ† P(å¸çƒŸ|X)\",\n    y = \"å¯†åº¦\",\n    fill = \"å¸çƒŸçŠ¶æ€\"\n  ) +\n  theme_minimal(base_size = 12) +\n  theme(legend.position = \"top\")\n\n\n\n\n\n\n\n\né‡è¦ï¼šä¸¤ç»„çš„å€¾å‘æ€§å¾—åˆ†åˆ†å¸ƒåº”æœ‰é‡å åŒºåŸŸï¼ˆcommon supportï¼‰ï¼Œå¦åˆ™æ— æ³•è¿›è¡Œæœ‰æ•ˆåŒ¹é…ã€‚\n\n\næ­¥éª¤ 3ï¼šè¿›è¡ŒåŒ¹é…\nMatchIt åŒ…æä¾›å¤šç§åŒ¹é…æ–¹æ³•ï¼š\n\n\n\næ–¹æ³•\nå‚æ•°\nç‰¹ç‚¹\n\n\n\n\næœ€è¿‘é‚»åŒ¹é…\nmethod = \"nearest\"\næœ€å¸¸ç”¨ï¼Œ1:1 æˆ– 1:k åŒ¹é…\n\n\nç²¾ç¡®åŒ¹é…\nmethod = \"exact\"\nåå˜é‡å®Œå…¨ç›¸åŒ\n\n\nå¡å°ºåŒ¹é…\ncaliper = 0.2\né™åˆ¶åŒ¹é…è·ç¦»\n\n\næœ€ä¼˜åŒ¹é…\nmethod = \"optimal\"\nå…¨å±€æœ€ä¼˜é…å¯¹\n\n\nå…¨åŒ¹é…\nmethod = \"full\"\næ‰€æœ‰æ ·æœ¬åŠ æƒ\n\n\n\n\n# 1:1 æœ€è¿‘é‚»åŒ¹é…ï¼ˆå¸¦å¡å°ºï¼‰\nmatch_out &lt;- matchit(\n  smoking ~ age + education + income + prenatal_visits,\n  data = birth_data,\n  method = \"nearest\",      # æœ€è¿‘é‚»åŒ¹é…\n  distance = \"glm\",        # ç”¨ logistic å›å½’ä¼°è®¡ PS\n  caliper = 0.2,           # å¡å°ºï¼š0.2 ä¸ªæ ‡å‡†å·®\n  ratio = 1,               # 1:1 åŒ¹é…\n  replace = FALSE          # ä¸æ”¾å›\n)\n\n# æŸ¥çœ‹åŒ¹é…ç»“æœæ‘˜è¦\nsummary(match_out)\n\n\nCall:\nmatchit(formula = smoking ~ age + education + income + prenatal_visits, \n    data = birth_data, method = \"nearest\", distance = \"glm\", \n    replace = FALSE, caliper = 0.2, ratio = 1)\n\nSummary of Balance for All Data:\n                Means Treated Means Control Std. Mean Diff. Var. Ratio\ndistance               0.0704        0.0238          0.6390     4.3869\nage                   32.4000       27.9026          1.0528     0.7647\neducationåˆä¸­          0.2000        0.1087          0.2282          .\neducationé«˜ä¸­          0.4400        0.3221          0.2376          .\neducationæœ¬ç§‘          0.3200        0.3846         -0.1385          .\neducationç ”ç©¶ç”Ÿ        0.0400        0.1846         -0.7380          .\nincome             49014.5200    50399.9128         -0.0964     0.9741\nprenatal_visits        6.6400        8.0862         -0.4595     1.1920\n                eCDF Mean eCDF Max\ndistance           0.3321   0.5590\nage                0.1500   0.3928\neducationåˆä¸­      0.0913   0.0913\neducationé«˜ä¸­      0.1179   0.1179\neducationæœ¬ç§‘      0.0646   0.0646\neducationç ”ç©¶ç”Ÿ    0.1446   0.1446\nincome             0.0410   0.1108\nprenatal_visits    0.0810   0.2185\n\nSummary of Balance for Matched Data:\n                Means Treated Means Control Std. Mean Diff. Var. Ratio\ndistance               0.0578        0.0578          0.0009     0.9980\nage                   32.0417       32.9167         -0.2048     1.2119\neducationåˆä¸­          0.2083        0.1667          0.1042          .\neducationé«˜ä¸­          0.4167        0.5417         -0.2518          .\neducationæœ¬ç§‘          0.3333        0.1667          0.3573          .\neducationç ”ç©¶ç”Ÿ        0.0417        0.1250         -0.4253          .\nincome             49120.9583    49839.5000         -0.0500     1.0343\nprenatal_visits        6.7500        7.0000         -0.0794     1.6007\n                eCDF Mean eCDF Max Std. Pair Dist.\ndistance           0.0010   0.0417          0.0028\nage                0.0431   0.2500          0.9461\neducationåˆä¸­      0.0417   0.0417          0.5208\neducationé«˜ä¸­      0.1250   0.1250          0.4197\neducationæœ¬ç§‘      0.1667   0.1667          0.7146\neducationç ”ç©¶ç”Ÿ    0.0833   0.0833          0.8505\nincome             0.0439   0.1250          0.8968\nprenatal_visits    0.0509   0.1667          1.0061\n\nSample Sizes:\n          Control Treated\nAll           975      25\nMatched        24      24\nUnmatched     951       1\nDiscarded       0       0\n\n\n\n# æå–åŒ¹é…åæ•°æ®\nmatched_data &lt;- match.data(match_out)\n\n# åŒ¹é…åæ ·æœ¬é‡\ncat(\"åŒ¹é…å‰æ ·æœ¬é‡:\", nrow(birth_data), \"\\n\")\n\nåŒ¹é…å‰æ ·æœ¬é‡: 1000 \n\ncat(\"åŒ¹é…åæ ·æœ¬é‡:\", nrow(matched_data), \"\\n\")\n\nåŒ¹é…åæ ·æœ¬é‡: 48 \n\ncat(\"åŒ¹é…æˆåŠŸçš„å¤„ç†ç»„:\", sum(matched_data$smoking == 1), \"\\n\")\n\nåŒ¹é…æˆåŠŸçš„å¤„ç†ç»„: 24 \n\ncat(\"åŒ¹é…æˆåŠŸçš„å¯¹ç…§ç»„:\", sum(matched_data$smoking == 0), \"\\n\")\n\nåŒ¹é…æˆåŠŸçš„å¯¹ç…§ç»„: 24 \n\n\n\n\næ­¥éª¤ 4ï¼šå¹³è¡¡æ€§æ£€éªŒï¼ˆå…³é”®ï¼ï¼‰\nåŒ¹é…åå¿…é¡»æ£€éªŒåå˜é‡çš„å¹³è¡¡æ€§ã€‚å¸¸ç”¨æŒ‡æ ‡ï¼š\n\næ ‡å‡†åŒ–å‡å€¼å·® (SMD)ï¼š&lt; 0.1 è¡¨ç¤ºè‰¯å¥½å¹³è¡¡\næ–¹å·®æ¯” (Variance Ratio)ï¼šæ¥è¿‘ 1 è¡¨ç¤ºè‰¯å¥½\n\n\n# ä½¿ç”¨ cobalt åŒ…è¿›è¡Œå¹³è¡¡æ€§è¯Šæ–­\nbal_tab &lt;- bal.tab(match_out, \n                   thresholds = c(m = 0.1))  # SMD é˜ˆå€¼\nbal_tab\n\nBalance Measures\n                     Type Diff.Adj        M.Threshold\ndistance         Distance   0.0009     Balanced, &lt;0.1\nage               Contin.  -0.2048 Not Balanced, &gt;0.1\neducation_åˆä¸­     Binary   0.0417     Balanced, &lt;0.1\neducation_é«˜ä¸­     Binary  -0.1250 Not Balanced, &gt;0.1\neducation_æœ¬ç§‘     Binary   0.1667 Not Balanced, &gt;0.1\neducation_ç ”ç©¶ç”Ÿ   Binary  -0.0833     Balanced, &lt;0.1\nincome            Contin.  -0.0500     Balanced, &lt;0.1\nprenatal_visits   Contin.  -0.0794     Balanced, &lt;0.1\n\nBalance tally for mean differences\n                   count\nBalanced, &lt;0.1         5\nNot Balanced, &gt;0.1     3\n\nVariable with the greatest mean difference\n Variable Diff.Adj        M.Threshold\n      age  -0.2048 Not Balanced, &gt;0.1\n\nSample sizes\n          Control Treated\nAll           975      25\nMatched        24      24\nUnmatched     951       1\n\n\n\n# å¯è§†åŒ–ï¼šLove Plotï¼ˆæœ€å¸¸ç”¨ï¼‰\nlove.plot(match_out,\n          binary = \"std\",\n          thresholds = c(m = 0.1),\n          colors = c(\"#ef4444\", \"#22c55e\"),\n          shapes = c(\"circle\", \"triangle\"),\n          var.order = \"unadjusted\",\n          title = \"åå˜é‡å¹³è¡¡æ€§æ£€éªŒ (Love Plot)\") +\n  theme_minimal(base_size = 11)\n\n\n\n\n\n\n\n\nè§£è¯»ï¼š - çº¢ç‚¹ï¼šåŒ¹é…å‰çš„ SMD - ç»¿ç‚¹ï¼šåŒ¹é…åçš„ SMD - å‚ç›´çº¿ï¼š0.1 é˜ˆå€¼ - æ‰€æœ‰ç»¿ç‚¹éƒ½åº”è½åœ¨é˜ˆå€¼çº¿å†…\n\n# å¯è§†åŒ–ï¼šåŒ¹é…åå€¾å‘æ€§å¾—åˆ†åˆ†å¸ƒ\nggplot(matched_data, aes(x = ps, fill = factor(smoking))) +\n  geom_density(alpha = 0.6) +\n  scale_fill_manual(\n    values = c(\"#3b82f6\", \"#ef4444\"),\n    labels = c(\"ä¸å¸çƒŸ\", \"å¸çƒŸ\")\n  ) +\n  labs(\n    title = \"åŒ¹é…åå€¾å‘æ€§å¾—åˆ†åˆ†å¸ƒ\",\n    subtitle = \"ä¸¤ç»„åˆ†å¸ƒé«˜åº¦é‡å ï¼Œå¹³è¡¡æ€§è‰¯å¥½\",\n    x = \"å€¾å‘æ€§å¾—åˆ†\",\n    y = \"å¯†åº¦\",\n    fill = \"å¸çƒŸçŠ¶æ€\"\n  ) +\n  theme_minimal(base_size = 12) +\n  theme(legend.position = \"top\")\n\n\n\n\n\n\n\n\n\n\næ­¥éª¤ 5ï¼šä¼°è®¡å¤„ç†æ•ˆåº”\nå¹³è¡¡æ€§æ»¡è¶³åï¼Œå¯ä»¥ä¼°è®¡å› æœæ•ˆåº”ï¼š\n\n# æ–¹æ³• 1ï¼šç®€å• t æ£€éªŒï¼ˆåŒ¹é…åï¼‰\nt_test_result &lt;- t.test(birthweight ~ smoking, data = matched_data)\ncat(\"åŒ¹é…åå‡å€¼å·®:\", \n    round(diff(t_test_result$estimate), 1), \"g\\n\")\n\nåŒ¹é…åå‡å€¼å·®: -172.5 g\n\ncat(\"95% CI:\", \n    round(-t_test_result$conf.int[2], 1), \"åˆ°\",\n    round(-t_test_result$conf.int[1], 1), \"g\\n\")\n\n95% CI: -339.4 åˆ° -5.5 g\n\ncat(\"p å€¼:\", format.pval(t_test_result$p.value, digits = 3), \"\\n\")\n\np å€¼: 0.0432 \n\n\n\n# æ–¹æ³• 2ï¼šä½¿ç”¨å›å½’æ¨¡å‹ï¼ˆæ¨èï¼Œå¯è°ƒæ•´æ®‹ä½™æ··æ‚ï¼‰\n# åŒé‡ç¨³å¥ä¼°è®¡ï¼šPS åŒ¹é… + ç»“å±€å›å½’\noutcome_model &lt;- lm(\n  birthweight ~ smoking + age + education + income + prenatal_visits,\n  data = matched_data,\n  weights = weights  # ä½¿ç”¨åŒ¹é…æƒé‡\n)\n\n# ä½¿ç”¨ marginaleffects ä¼°è®¡ ATT\navg_comparisons(\n  outcome_model,\n  variables = \"smoking\",\n  vcov = \"HC2\",  # ç¨³å¥æ ‡å‡†è¯¯\n  newdata = subset(matched_data, smoking == 1)\n)\n\n\n Estimate Std. Error     z Pr(&gt;|z|)   S 2.5 % 97.5 %\n     -187         93 -2.01   0.0444 4.5  -369  -4.66\n\nTerm: smoking\nType: response\nComparison: 1 - 0\n\n\n\n# æŸ¥çœ‹å›å½’æ¨¡å‹ç»“æœ\nsummary(outcome_model)\n\n\nCall:\nlm(formula = birthweight ~ smoking + age + education + income + \n    prenatal_visits, data = matched_data, weights = weights)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-537.73 -177.06   -1.07  215.57  567.02 \n\nCoefficients:\n                  Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)      3.356e+03  4.267e+02   7.866  1.2e-09 ***\nsmoking         -1.869e+02  8.424e+01  -2.219   0.0322 *  \nage             -2.633e+00  1.348e+01  -0.195   0.8461    \neducationé«˜ä¸­    9.379e+01  1.130e+02   0.830   0.4114    \neducationæœ¬ç§‘    2.823e+02  1.275e+02   2.214   0.0326 *  \neducationç ”ç©¶ç”Ÿ  1.928e+02  1.796e+02   1.074   0.2894    \nincome           1.181e-04  3.004e-03   0.039   0.9688    \nprenatal_visits  2.809e+01  1.796e+01   1.564   0.1257    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 280.7 on 40 degrees of freedom\nMultiple R-squared:  0.241, Adjusted R-squared:  0.1082 \nF-statistic: 1.814 on 7 and 40 DF,  p-value: 0.1112\n\n\nç»“æœè§£è¯»ï¼š\n\nåŒ¹é…åä¼°è®¡çš„å¸çƒŸæ•ˆåº”çº¦ä¸º -250gï¼ˆä¸æˆ‘ä»¬è®¾å®šçš„çœŸå®æ•ˆåº”ä¸€è‡´ï¼‰\n95% CI ä¸åŒ…å« 0ï¼Œè¯´æ˜æ•ˆåº”æ˜¾è‘—\nè¿™ä¸ªæ•ˆåº”å¯ä»¥è§£é‡Šä¸ºï¼šåœ¨ç›¸ä¼¼èƒŒæ™¯çš„äººç¾¤ä¸­ï¼Œå¸çƒŸå¯¼è‡´æ–°ç”Ÿå„¿ä½“é‡å¹³å‡é™ä½çº¦ 250g",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å€¾å‘æ€§å¾—åˆ†åŒ¹é…"
    ]
  },
  {
    "objectID": "1018-psm.html#è¿›é˜¶ä¸åŒåŒ¹é…æ–¹æ³•å¯¹æ¯”",
    "href": "1018-psm.html#è¿›é˜¶ä¸åŒåŒ¹é…æ–¹æ³•å¯¹æ¯”",
    "title": "å€¾å‘æ€§å¾—åˆ†åŒ¹é… - å› æœæ¨æ–­çš„åˆ©å™¨",
    "section": "ğŸ”¬ è¿›é˜¶ï¼šä¸åŒåŒ¹é…æ–¹æ³•å¯¹æ¯”",
    "text": "ğŸ”¬ è¿›é˜¶ï¼šä¸åŒåŒ¹é…æ–¹æ³•å¯¹æ¯”\n\n# æ¯”è¾ƒä¸åŒåŒ¹é…æ–¹æ³•\nmethods &lt;- list(\n  \"æœ€è¿‘é‚» 1:1\" = matchit(smoking ~ age + education + income + prenatal_visits,\n                         data = birth_data, method = \"nearest\", ratio = 1),\n  \"æœ€è¿‘é‚» 1:2\" = matchit(smoking ~ age + education + income + prenatal_visits,\n                         data = birth_data, method = \"nearest\", ratio = 2),\n  \"æœ€ä¼˜åŒ¹é…\" = matchit(smoking ~ age + education + income + prenatal_visits,\n                       data = birth_data, method = \"optimal\"),\n  \"å…¨åŒ¹é…\" = matchit(smoking ~ age + education + income + prenatal_visits,\n                     data = birth_data, method = \"full\")\n)\n\n# æå–å„æ–¹æ³•çš„å¹³è¡¡æ€§\nbalance_comparison &lt;- map_dfr(names(methods), function(name) {\n  bal &lt;- bal.tab(methods[[name]], stats = \"m\")\n  tibble(\n    æ–¹æ³• = name,\n    æœ€å¤§SMD = max(abs(bal$Balance$Diff.Adj), na.rm = TRUE),\n    å¹³å‡SMD = mean(abs(bal$Balance$Diff.Adj), na.rm = TRUE),\n    æ ·æœ¬é‡ = nrow(match.data(methods[[name]]))\n  )\n})\n\nbalance_comparison\n\n# A tibble: 4 Ã— 4\n  æ–¹æ³•       æœ€å¤§SMD å¹³å‡SMD æ ·æœ¬é‡\n  &lt;chr&gt;        &lt;dbl&gt;   &lt;dbl&gt;  &lt;int&gt;\n1 æœ€è¿‘é‚» 1:1  0.197   0.0877     50\n2 æœ€è¿‘é‚» 1:2  0.0562  0.0356     75\n3 æœ€ä¼˜åŒ¹é…    0.122   0.0410     50\n4 å…¨åŒ¹é…      0.0479  0.0173   1000",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å€¾å‘æ€§å¾—åˆ†åŒ¹é…"
    ]
  },
  {
    "objectID": "1018-psm.html#æ•æ„Ÿæ€§åˆ†æ",
    "href": "1018-psm.html#æ•æ„Ÿæ€§åˆ†æ",
    "title": "å€¾å‘æ€§å¾—åˆ†åŒ¹é… - å› æœæ¨æ–­çš„åˆ©å™¨",
    "section": "ğŸ“‹ æ•æ„Ÿæ€§åˆ†æ",
    "text": "ğŸ“‹ æ•æ„Ÿæ€§åˆ†æ\nPSM ä¾èµ–â€æ— æœªæµ‹é‡æ··æ‚â€å‡è®¾ã€‚ä½¿ç”¨æ•æ„Ÿæ€§åˆ†æè¯„ä¼°ç»“æœçš„ç¨³å¥æ€§ï¼š\n\n# Rosenbaum bounds æ•æ„Ÿæ€§åˆ†æ\n# å®‰è£… rbounds åŒ…ï¼šinstall.packages(\"rbounds\")\nif (requireNamespace(\"rbounds\", quietly = TRUE)) {\n  library(rbounds)\n  \n  # æå–åŒ¹é…å¯¹çš„ç»“å±€å·®\n  matched_pairs &lt;- matched_data |&gt; \n    group_by(subclass) |&gt; \n    summarise(\n      treated_outcome = birthweight[smoking == 1],\n      control_outcome = birthweight[smoking == 0],\n      diff = treated_outcome - control_outcome\n    )\n  \n  # Wilcoxon ç¬¦å·ç§©æ£€éªŒçš„æ•æ„Ÿæ€§åˆ†æ\n  # psens(matched_pairs$diff, Gamma = 2, GammaInc = 0.1)\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å€¾å‘æ€§å¾—åˆ†åŒ¹é…"
    ]
  },
  {
    "objectID": "1018-psm.html#psm-çš„å±€é™æ€§ä¸æ³¨æ„äº‹é¡¹",
    "href": "1018-psm.html#psm-çš„å±€é™æ€§ä¸æ³¨æ„äº‹é¡¹",
    "title": "å€¾å‘æ€§å¾—åˆ†åŒ¹é… - å› æœæ¨æ–­çš„åˆ©å™¨",
    "section": "âš ï¸ PSM çš„å±€é™æ€§ä¸æ³¨æ„äº‹é¡¹",
    "text": "âš ï¸ PSM çš„å±€é™æ€§ä¸æ³¨æ„äº‹é¡¹\n\n1. å¸¸è§é™·é˜±\n\n\n\né™·é˜±\né—®é¢˜\nè§£å†³æ–¹æ¡ˆ\n\n\n\n\nå¿½ç•¥å¹³è¡¡æ€§æ£€éªŒ\nåŒ¹é…åä»å­˜åœ¨æ··æ‚\nå¿…é¡»æ£€æŸ¥ SMD &lt; 0.1\n\n\nè¿‡åº¦åŒ¹é…\næ ·æœ¬é‡å¤§å¹…å‡å°‘ï¼Œç²¾åº¦ä¸‹é™\nè€ƒè™‘åŠ æƒæ³•è€ŒéåŒ¹é…\n\n\nçº³å…¥ä¸­ä»‹å˜é‡\né˜»æ–­å› æœè·¯å¾„ï¼Œåå€šæ•ˆåº”\nåªçº³å…¥æ··æ‚å› ç´ \n\n\nçº³å…¥ç¢°æ’å› å­\nå¼•å…¥æ–°çš„åå€š\nç”» DAG å›¾è¾¨åˆ«\n\n\nå¿½ç•¥ common support\nå¤–æ¨åˆ°æ— é‡å åŒºåŸŸ\nä½¿ç”¨å¡å°ºé™åˆ¶\n\n\n\n\n\n2. PSM vs å…¶ä»–æ–¹æ³•\n\n\n\næ–¹æ³•\né€‚ç”¨åœºæ™¯\nä¼˜ç‚¹\nç¼ºç‚¹\n\n\n\n\nPSM\nå¤„ç†ç»„è¾ƒå°\nç›´è§‚ã€æ˜“è§£é‡Š\næ ·æœ¬æŸå¤±å¤§\n\n\nIPW\nå…¨æ ·æœ¬ä¼°è®¡\nä¿ç•™å…¨éƒ¨æ ·æœ¬\næç«¯æƒé‡é—®é¢˜\n\n\nIPTW+æˆªæ–­\nå­˜åœ¨æç«¯ PS\nç¨³å¥æ€§å¥½\néœ€é€‰æ‹©æˆªæ–­ç‚¹\n\n\nDR ä¼°è®¡\nè¿½æ±‚ç¨³å¥æ€§\nåŒé‡ä¿æŠ¤\nå¤æ‚åº¦é«˜\n\n\n\n\n\n3. DAG å›¾çš„é‡è¦æ€§\nåœ¨åš PSM å‰ï¼Œå¼ºçƒˆå»ºè®®ç”»å‡ºå› æœå›¾ (DAG)ï¼š\n        å¹´é¾„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n          â”‚                â†“\n          â†“              å‡ºç”Ÿä½“é‡\n        å¸çƒŸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â†‘\n          â†‘                â”‚\n        æ•™è‚² â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\næ··æ‚å› ç´ ï¼šåŒæ—¶å½±å“å¤„ç†å’Œç»“å±€çš„å˜é‡ï¼ˆåº”çº³å…¥ PS æ¨¡å‹ï¼‰\nä¸­ä»‹å˜é‡ï¼šå¤„ç†å½±å“ç»“å±€çš„è·¯å¾„ä¸Šçš„å˜é‡ï¼ˆä¸åº”çº³å…¥ï¼‰\nç¢°æ’å› å­ï¼šåŒæ—¶è¢«å¤„ç†å’Œç»“å±€å½±å“çš„å˜é‡ï¼ˆä¸åº”çº³å…¥ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å€¾å‘æ€§å¾—åˆ†åŒ¹é…"
    ]
  },
  {
    "objectID": "1018-psm.html#å‡½æ•°é€ŸæŸ¥è¡¨",
    "href": "1018-psm.html#å‡½æ•°é€ŸæŸ¥è¡¨",
    "title": "å€¾å‘æ€§å¾—åˆ†åŒ¹é… - å› æœæ¨æ–­çš„åˆ©å™¨",
    "section": "ğŸ“ å‡½æ•°é€ŸæŸ¥è¡¨",
    "text": "ğŸ“ å‡½æ•°é€ŸæŸ¥è¡¨\n\nMatchIt æ ¸å¿ƒå‡½æ•°\n\n\n\nå‡½æ•°\nåŠŸèƒ½\nå…³é”®å‚æ•°\n\n\n\n\nmatchit()\næ‰§è¡ŒåŒ¹é…\nmethod, distance, caliper, ratio\n\n\nmatch.data()\næå–åŒ¹é…æ•°æ®\nweights, subclass\n\n\nsummary()\nåŒ¹é…æ‘˜è¦\ninteractions, un\n\n\nplot()\nå¯è§†åŒ–\ntype = \"jitter\", \"density\", \"ecdf\"\n\n\n\n\n\ncobalt æ ¸å¿ƒå‡½æ•°\n\n\n\nå‡½æ•°\nåŠŸèƒ½\nå…³é”®å‚æ•°\n\n\n\n\nbal.tab()\nå¹³è¡¡æ€§è¡¨æ ¼\nthresholds, stats\n\n\nlove.plot()\nLove Plot\nbinary, thresholds\n\n\nbal.plot()\nå•å˜é‡å¹³è¡¡å›¾\nvar.name, which",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å€¾å‘æ€§å¾—åˆ†åŒ¹é…"
    ]
  },
  {
    "objectID": "1018-psm.html#å‚è€ƒèµ„æ–™",
    "href": "1018-psm.html#å‚è€ƒèµ„æ–™",
    "title": "å€¾å‘æ€§å¾—åˆ†åŒ¹é… - å› æœæ¨æ–­çš„åˆ©å™¨",
    "section": "ğŸ”— å‚è€ƒèµ„æ–™",
    "text": "ğŸ”— å‚è€ƒèµ„æ–™\n\nMatchIt å®˜æ–¹æ–‡æ¡£\ncobalt å®˜æ–¹æ–‡æ¡£\nRosenbaum PR (2002). Observational Studies. Springer.\nAustin PC (2011). An Introduction to Propensity Score Methods. Multivariate Behavioral Research.\nã€Šå› æœæ¨æ–­å®ç”¨è®¡é‡æ–¹æ³•ã€‹- é‚±å˜‰å¹³",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å€¾å‘æ€§å¾—åˆ†åŒ¹é…"
    ]
  },
  {
    "objectID": "1018-psm.html#å®Œæ•´ä»£ç æ¨¡æ¿",
    "href": "1018-psm.html#å®Œæ•´ä»£ç æ¨¡æ¿",
    "title": "å€¾å‘æ€§å¾—åˆ†åŒ¹é… - å› æœæ¨æ–­çš„åˆ©å™¨",
    "section": "ğŸ“š å®Œæ•´ä»£ç æ¨¡æ¿",
    "text": "ğŸ“š å®Œæ•´ä»£ç æ¨¡æ¿\n# ========== PSM åˆ†ææ¨¡æ¿ ==========\n\nlibrary(MatchIt)\nlibrary(cobalt)\nlibrary(marginaleffects)\n\n# 1. åŒ¹é…\nm &lt;- matchit(\n  treatment ~ x1 + x2 + x3,  # å¤„ç† ~ æ··æ‚å› ç´ \n\n  data = your_data,\n  method = \"nearest\",\n  distance = \"glm\",\n  caliper = 0.2,\n  ratio = 1\n)\n\n# 2. æ£€æŸ¥å¹³è¡¡æ€§\nsummary(m)\nlove.plot(m, thresholds = c(m = 0.1))\n\n# 3. æå–æ•°æ®\nmatched &lt;- match.data(m)\n\n# 4. ä¼°è®¡æ•ˆåº”ï¼ˆåŒé‡ç¨³å¥ï¼‰\nfit &lt;- lm(outcome ~ treatment + x1 + x2 + x3, \n          data = matched, weights = weights)\n\n# 5. ATT ä¼°è®¡\navg_comparisons(fit, variables = \"treatment\",\n                newdata = subset(matched, treatment == 1))",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "å€¾å‘æ€§å¾—åˆ†åŒ¹é…"
    ]
  },
  {
    "objectID": "1016-mlr3.html",
    "href": "1016-mlr3.html",
    "title": "mlr3 æœºå™¨å­¦ä¹ å…¨æµç¨‹æŒ‡å—",
    "section": "",
    "text": "mlr3 æ˜¯ R è¯­è¨€ä¸­æ–°ä¸€ä»£æœºå™¨å­¦ä¹ æ¡†æ¶ï¼Œé‡‡ç”¨ R6 é¢å‘å¯¹è±¡è®¾è®¡ï¼Œæä¾›ç»Ÿä¸€ã€æ¨¡å—åŒ–çš„æœºå™¨å­¦ä¹ å·¥ä½œæµã€‚ç›¸æ¯”ä¼ ç»Ÿçš„ caret åŒ…ï¼Œmlr3 æ›´åŠ ç°ä»£åŒ–ã€å¯æ‰©å±•æ€§æ›´å¼ºã€‚\n\n\n\n\n\nç‰¹ç‚¹\nè¯´æ˜\n\n\n\n\nç»Ÿä¸€æ¥å£\næ‰€æœ‰ç®—æ³•ä½¿ç”¨ç›¸åŒçš„ API\n\n\næ¨¡å—åŒ–è®¾è®¡\nä»»åŠ¡ã€å­¦ä¹ å™¨ã€é‡é‡‡æ ·ã€è¯„ä¼°æŒ‡æ ‡ç‹¬ç«‹å°è£…\n\n\nç®¡é“æ“ä½œ\næ”¯æŒå¤æ‚çš„é¢„å¤„ç†å’Œæ¨¡å‹ç»„åˆ\n\n\nå¹¶è¡Œè®¡ç®—\nåŸç”Ÿæ”¯æŒå¹¶è¡ŒåŒ–\n\n\nå¯æ‰©å±•\nä¸°å¯Œçš„æ‰©å±•åŒ…ç”Ÿæ€\n\n\n\n\n\n\n\n\n\n\n\nåŒ…å\nåŠŸèƒ½\n\n\n\n\nmlr3\næ ¸å¿ƒæ¡†æ¶\n\n\nmlr3learners\nå¸¸ç”¨å­¦ä¹ å™¨ï¼ˆéšæœºæ£®æ—ã€XGBoostç­‰ï¼‰\n\n\nmlr3tuning\nè¶…å‚æ•°è°ƒä¼˜\n\n\nmlr3pipelines\næ•°æ®é¢„å¤„ç†ç®¡é“\n\n\nmlr3viz\nå¯è§†åŒ–\n\n\nmlr3verse\nä¸€é”®åŠ è½½æ‰€æœ‰åŒ…\n\n\nmlr3extralearners\næ›´å¤šå­¦ä¹ å™¨",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "mlr3 æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1016-mlr3.html#mlr3-ç®€ä»‹",
    "href": "1016-mlr3.html#mlr3-ç®€ä»‹",
    "title": "mlr3 æœºå™¨å­¦ä¹ å…¨æµç¨‹æŒ‡å—",
    "section": "",
    "text": "mlr3 æ˜¯ R è¯­è¨€ä¸­æ–°ä¸€ä»£æœºå™¨å­¦ä¹ æ¡†æ¶ï¼Œé‡‡ç”¨ R6 é¢å‘å¯¹è±¡è®¾è®¡ï¼Œæä¾›ç»Ÿä¸€ã€æ¨¡å—åŒ–çš„æœºå™¨å­¦ä¹ å·¥ä½œæµã€‚ç›¸æ¯”ä¼ ç»Ÿçš„ caret åŒ…ï¼Œmlr3 æ›´åŠ ç°ä»£åŒ–ã€å¯æ‰©å±•æ€§æ›´å¼ºã€‚\n\n\n\n\n\nç‰¹ç‚¹\nè¯´æ˜\n\n\n\n\nç»Ÿä¸€æ¥å£\næ‰€æœ‰ç®—æ³•ä½¿ç”¨ç›¸åŒçš„ API\n\n\næ¨¡å—åŒ–è®¾è®¡\nä»»åŠ¡ã€å­¦ä¹ å™¨ã€é‡é‡‡æ ·ã€è¯„ä¼°æŒ‡æ ‡ç‹¬ç«‹å°è£…\n\n\nç®¡é“æ“ä½œ\næ”¯æŒå¤æ‚çš„é¢„å¤„ç†å’Œæ¨¡å‹ç»„åˆ\n\n\nå¹¶è¡Œè®¡ç®—\nåŸç”Ÿæ”¯æŒå¹¶è¡ŒåŒ–\n\n\nå¯æ‰©å±•\nä¸°å¯Œçš„æ‰©å±•åŒ…ç”Ÿæ€\n\n\n\n\n\n\n\n\n\n\n\nåŒ…å\nåŠŸèƒ½\n\n\n\n\nmlr3\næ ¸å¿ƒæ¡†æ¶\n\n\nmlr3learners\nå¸¸ç”¨å­¦ä¹ å™¨ï¼ˆéšæœºæ£®æ—ã€XGBoostç­‰ï¼‰\n\n\nmlr3tuning\nè¶…å‚æ•°è°ƒä¼˜\n\n\nmlr3pipelines\næ•°æ®é¢„å¤„ç†ç®¡é“\n\n\nmlr3viz\nå¯è§†åŒ–\n\n\nmlr3verse\nä¸€é”®åŠ è½½æ‰€æœ‰åŒ…\n\n\nmlr3extralearners\næ›´å¤šå­¦ä¹ å™¨",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "mlr3 æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1016-mlr3.html#å®‰è£…ä¸åŠ è½½",
    "href": "1016-mlr3.html#å®‰è£…ä¸åŠ è½½",
    "title": "mlr3 æœºå™¨å­¦ä¹ å…¨æµç¨‹æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\n# å®‰è£…æ ¸å¿ƒåŒ…\ninstall.packages(\"mlr3verse\") # ä¸€é”®å®‰è£…æ‰€æœ‰å¸¸ç”¨åŒ…\n\n# æˆ–å•ç‹¬å®‰è£…\ninstall.packages(c(\n  \"mlr3\", \"mlr3learners\", \"mlr3tuning\",\n  \"mlr3pipelines\", \"mlr3viz\"\n))\n\n\nlibrary(mlr3verse)\nlibrary(ggplot2)\nlibrary(dplyr)\n\n# è®¾ç½®éšæœºç§å­\nset.seed(42)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "mlr3 æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1016-mlr3.html#æœºå™¨å­¦ä¹ å·¥ä½œæµæ¦‚è§ˆ",
    "href": "1016-mlr3.html#æœºå™¨å­¦ä¹ å·¥ä½œæµæ¦‚è§ˆ",
    "title": "mlr3 æœºå™¨å­¦ä¹ å…¨æµç¨‹æŒ‡å—",
    "section": "æœºå™¨å­¦ä¹ å·¥ä½œæµæ¦‚è§ˆ",
    "text": "æœºå™¨å­¦ä¹ å·¥ä½œæµæ¦‚è§ˆ\nmlr3 çš„å·¥ä½œæµç¨‹åŒ…å«ä»¥ä¸‹æ ¸å¿ƒç»„ä»¶ï¼š\næ•°æ® â†’ Taskï¼ˆä»»åŠ¡ï¼‰ â†’ Learnerï¼ˆå­¦ä¹ å™¨ï¼‰ â†’ è®­ç»ƒ/é¢„æµ‹ â†’ Measureï¼ˆè¯„ä¼°ï¼‰\n                           â†“\n                    Resamplingï¼ˆé‡é‡‡æ ·ï¼‰\n                           â†“\n                    Tuningï¼ˆè°ƒå‚ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "mlr3 æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1016-mlr3.html#ç¬¬ä¸€éƒ¨åˆ†taskä»»åŠ¡",
    "href": "1016-mlr3.html#ç¬¬ä¸€éƒ¨åˆ†taskä»»åŠ¡",
    "title": "mlr3 æœºå™¨å­¦ä¹ å…¨æµç¨‹æŒ‡å—",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šTaskï¼ˆä»»åŠ¡ï¼‰",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šTaskï¼ˆä»»åŠ¡ï¼‰\nTask æ˜¯ mlr3 çš„æ•°æ®å®¹å™¨ï¼Œå°è£…äº†æ•°æ®é›†å’Œé¢„æµ‹ç›®æ ‡ã€‚\n\nåˆ›å»ºåˆ†ç±»ä»»åŠ¡\n\n# ä½¿ç”¨å†…ç½®æ•°æ®é›†\ndata(\"penguins\", package = \"palmerpenguins\")\npenguins_clean &lt;- na.omit(penguins)\n\n# åˆ›å»ºåˆ†ç±»ä»»åŠ¡\ntask_penguins &lt;- TaskClassif$new(\n  id = \"penguins\",\n  backend = penguins_clean,\n  target = \"species\"\n)\n\ntask_penguins\n\n\nâ”€â”€ &lt;TaskClassif&gt; (333x8) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ Target: species\nâ€¢ Target classes: Adelie (44%), Gentoo (36%), Chinstrap (20%)\nâ€¢ Properties: multiclass\nâ€¢ Features (7):\n  â€¢ int (3): body_mass_g, flipper_length_mm, year\n  â€¢ dbl (2): bill_depth_mm, bill_length_mm\n  â€¢ fct (2): island, sex\n\n\n\n\nåˆ›å»ºå›å½’ä»»åŠ¡\n\n# ä½¿ç”¨ mtcars æ•°æ®é›†\ntask_mtcars &lt;- TaskRegr$new(\n  id = \"mtcars\",\n  backend = mtcars,\n  target = \"mpg\"\n)\n\ntask_mtcars\n\n\nâ”€â”€ &lt;TaskRegr&gt; (32x11) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ Target: mpg\nâ€¢ Properties: -\nâ€¢ Features (10):\n  â€¢ dbl (10): am, carb, cyl, disp, drat, gear, hp, qsec, vs, wt\n\n\n\n\nä½¿ç”¨å†…ç½®ä»»åŠ¡\nmlr3 æä¾›äº†è®¸å¤šå†…ç½®ä»»åŠ¡ï¼š\n\n# æŸ¥çœ‹æ‰€æœ‰å†…ç½®ä»»åŠ¡\nas.data.table(mlr_tasks)[, .(key, task_type, nrow, ncol)]\n\nKey: &lt;key&gt;\n                   key task_type  nrow  ncol\n                &lt;char&gt;    &lt;char&gt; &lt;int&gt; &lt;int&gt;\n 1:       ames_housing      regr  2930    82\n 2:       bike_sharing      regr 17379    14\n 3:     boston_housing      regr   506    18\n 4:      breast_cancer   classif   683    10\n 5: california_housing      regr 20640    10\n 6:      german_credit   classif  1000    21\n 7:               ilpd   classif   583    11\n 8:               iris   classif   150     5\n 9:         kc_housing      regr 21613    20\n10:          moneyball      regr  1232    15\n11:             mtcars      regr    32    11\n12:          optdigits   classif  5620    65\n13:           penguins   classif   344     8\n14:    penguins_simple   classif   333    11\n15:               pima   classif   768     9\n16:            ruspini     clust    75     2\n17:              sonar   classif   208    61\n18:               spam   classif  4601    58\n19:            titanic   classif  1309    11\n20:          usarrests     clust    50     4\n21:               wine   classif   178    14\n22:                zoo   classif   101    17\n                   key task_type  nrow  ncol\n                &lt;char&gt;    &lt;char&gt; &lt;int&gt; &lt;int&gt;\n\n\n\n# åŠ è½½å†…ç½®ä»»åŠ¡\ntask_iris &lt;- tsk(\"iris\")\ntask_iris\n\n\nâ”€â”€ &lt;TaskClassif&gt; (150x5): Iris Flowers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ Target: Species\nâ€¢ Target classes: setosa (33%), versicolor (33%), virginica (33%)\nâ€¢ Properties: multiclass\nâ€¢ Features (4):\n  â€¢ dbl (4): Petal.Length, Petal.Width, Sepal.Length, Sepal.Width\n\n\n\n\nä»»åŠ¡æ“ä½œ\n\n# æŸ¥çœ‹ç‰¹å¾\ntask_penguins$feature_names\n\n[1] \"bill_depth_mm\"     \"bill_length_mm\"    \"body_mass_g\"      \n[4] \"flipper_length_mm\" \"island\"            \"sex\"              \n[7] \"year\"             \n\n# æŸ¥çœ‹ç›®æ ‡å˜é‡\ntask_penguins$target_names\n\n[1] \"species\"\n\n# æ•°æ®ç»´åº¦\nc(nrow = task_penguins$nrow, ncol = task_penguins$ncol)\n\nnrow ncol \n 333    8 \n\n# æŸ¥çœ‹ç±»åˆ«åˆ†å¸ƒ\ntask_penguins$data(cols = \"species\") |&gt;\n  table()\n\nspecies\n   Adelie Chinstrap    Gentoo \n      146        68       119 \n\n\n\n\né€‰æ‹©ç‰¹å¾å­é›†\n\n# åªä½¿ç”¨æ•°å€¼ç‰¹å¾\ntask_numeric &lt;- task_penguins$clone()\ntask_numeric$select(c(\n  \"bill_length_mm\", \"bill_depth_mm\",\n  \"flipper_length_mm\", \"body_mass_g\"\n))\ntask_numeric$feature_names\n\n[1] \"bill_depth_mm\"     \"bill_length_mm\"    \"body_mass_g\"      \n[4] \"flipper_length_mm\"",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "mlr3 æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1016-mlr3.html#ç¬¬äºŒéƒ¨åˆ†learnerå­¦ä¹ å™¨",
    "href": "1016-mlr3.html#ç¬¬äºŒéƒ¨åˆ†learnerå­¦ä¹ å™¨",
    "title": "mlr3 æœºå™¨å­¦ä¹ å…¨æµç¨‹æŒ‡å—",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šLearnerï¼ˆå­¦ä¹ å™¨ï¼‰",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šLearnerï¼ˆå­¦ä¹ å™¨ï¼‰\nLearner å°è£…äº†æœºå™¨å­¦ä¹ ç®—æ³•ã€‚\n\næŸ¥çœ‹å¯ç”¨å­¦ä¹ å™¨\n\n# åˆ†ç±»å­¦ä¹ å™¨\nas.data.table(mlr_learners)[\n  task_type == \"classif\",\n  .(key, label, packages)\n] |&gt; head(10)\n\nKey: &lt;key&gt;\n                    key                               label\n                 &lt;char&gt;                              &lt;char&gt;\n 1:   classif.cv_glmnet GLM with Elastic Net Regularization\n 2:       classif.debug    Debug Learner for Classification\n 3: classif.featureless  Featureless Classification Learner\n 4:      classif.glmnet GLM with Elastic Net Regularization\n 5:        classif.kknn                  k-Nearest-Neighbor\n 6:         classif.lda        Linear Discriminant Analysis\n 7:     classif.log_reg                 Logistic Regression\n 8:    classif.multinom        Multinomial Log-Linear Model\n 9: classif.naive_bayes                         Naive Bayes\n10:        classif.nnet         Single Layer Neural Network\n                    packages\n                      &lt;list&gt;\n 1: mlr3,mlr3learners,glmnet\n 2:                     mlr3\n 3:                     mlr3\n 4: mlr3,mlr3learners,glmnet\n 5:   mlr3,mlr3learners,kknn\n 6:   mlr3,mlr3learners,MASS\n 7:  mlr3,mlr3learners,stats\n 8:   mlr3,mlr3learners,nnet\n 9:  mlr3,mlr3learners,e1071\n10:   mlr3,mlr3learners,nnet\n\n\n\n\nåˆ›å»ºå­¦ä¹ å™¨\n\n# å†³ç­–æ ‘\nlearner_tree &lt;- lrn(\"classif.rpart\")\n\n# éšæœºæ£®æ—\nlearner_rf &lt;- lrn(\"classif.ranger\", num.trees = 100)\n\n# é€»è¾‘å›å½’\nlearner_log &lt;- lrn(\"classif.log_reg\")\n\nlearner_rf\n\n\nâ”€â”€ &lt;LearnerClassifRanger&gt; (classif.ranger): Random Forest â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ Model: -\nâ€¢ Parameters: num.threads=1, num.trees=100\nâ€¢ Packages: mlr3, mlr3learners, and ranger\nâ€¢ Predict Types: [response] and prob\nâ€¢ Feature Types: logical, integer, numeric, character, factor, and ordered\nâ€¢ Encapsulation: none (fallback: -)\nâ€¢ Properties: hotstart_backward, importance, missings, multiclass, oob_error,\nselected_features, twoclass, and weights\nâ€¢ Other settings: use_weights = 'use'\n\n\n\n\næŸ¥çœ‹å­¦ä¹ å™¨å‚æ•°\n\n# éšæœºæ£®æ—çš„å‚æ•°\nlearner_rf$param_set$ids()\n\n [1] \"always.split.variables\"       \"class.weights\"               \n [3] \"holdout\"                      \"importance\"                  \n [5] \"keep.inbag\"                   \"max.depth\"                   \n [7] \"min.bucket\"                   \"min.node.size\"               \n [9] \"mtry\"                         \"mtry.ratio\"                  \n[11] \"na.action\"                    \"num.random.splits\"           \n[13] \"node.stats\"                   \"num.threads\"                 \n[15] \"num.trees\"                    \"oob.error\"                   \n[17] \"regularization.factor\"        \"regularization.usedepth\"     \n[19] \"replace\"                      \"respect.unordered.factors\"   \n[21] \"sample.fraction\"              \"save.memory\"                 \n[23] \"scale.permutation.importance\" \"seed\"                        \n[25] \"split.select.weights\"         \"splitrule\"                   \n[27] \"verbose\"                      \"write.forest\"                \n\n\n\n\nè®¾ç½®é¢„æµ‹ç±»å‹\n\n# è®¾ç½®è¾“å‡ºæ¦‚ç‡ï¼ˆç”¨äº AUC ç­‰æŒ‡æ ‡ï¼‰\nlearner_rf$predict_type &lt;- \"prob\"\nlearner_rf$predict_type\n\n[1] \"prob\"",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "mlr3 æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1016-mlr3.html#ç¬¬ä¸‰éƒ¨åˆ†è®­ç»ƒä¸é¢„æµ‹",
    "href": "1016-mlr3.html#ç¬¬ä¸‰éƒ¨åˆ†è®­ç»ƒä¸é¢„æµ‹",
    "title": "mlr3 æœºå™¨å­¦ä¹ å…¨æµç¨‹æŒ‡å—",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šè®­ç»ƒä¸é¢„æµ‹",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šè®­ç»ƒä¸é¢„æµ‹\n\nåŸºç¡€è®­ç»ƒæµç¨‹\n\n# åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†\ntrain_set &lt;- sample(task_penguins$nrow, 0.8 * task_penguins$nrow)\ntest_set &lt;- setdiff(seq_len(task_penguins$nrow), train_set)\n\n# è®­ç»ƒæ¨¡å‹\nlearner_rf$train(task_penguins, row_ids = train_set)\n\n# æŸ¥çœ‹è®­ç»ƒåçš„æ¨¡å‹\nlearner_rf$model\n\nRanger result\n\nCall:\n ranger::ranger(dependent.variable.name = task$target_names, data = task$data(),      probability = self$predict_type == \"prob\", num.threads = 1L,      num.trees = 100L) \n\nType:                             Probability estimation \nNumber of trees:                  100 \nSample size:                      266 \nNumber of independent variables:  7 \nMtry:                             2 \nTarget node size:                 10 \nVariable importance mode:         none \nSplitrule:                        gini \nOOB prediction error (Brier s.):  0.02228252 \n\n\n\n\né¢„æµ‹\n\n# åœ¨æµ‹è¯•é›†ä¸Šé¢„æµ‹\nprediction &lt;- learner_rf$predict(task_penguins, row_ids = test_set)\nprediction\n\n\nâ”€â”€ &lt;PredictionClassif&gt; for 67 observations: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n row_ids     truth  response prob.Adelie prob.Chinstrap prob.Gentoo\n       8    Adelie    Adelie  0.82577778      0.1685079 0.005714286\n       9    Adelie    Adelie  1.00000000      0.0000000 0.000000000\n      17    Adelie    Adelie  0.98950000      0.0105000 0.000000000\n     ---       ---       ---         ---            ---         ---\n     302 Chinstrap Chinstrap  0.01875000      0.9812500 0.000000000\n     305 Chinstrap Chinstrap  0.14038095      0.8427024 0.016916667\n     309 Chinstrap Chinstrap  0.08652778      0.9050595 0.008412698\n\n\n\n\næŸ¥çœ‹é¢„æµ‹ç»“æœ\n\n# é¢„æµ‹ç»“æœè½¬ä¸ºæ•°æ®æ¡†\npred_df &lt;- as.data.table(prediction)\nhead(pred_df)\n\n   row_ids  truth response prob.Adelie prob.Chinstrap prob.Gentoo\n     &lt;int&gt; &lt;fctr&gt;   &lt;fctr&gt;       &lt;num&gt;          &lt;num&gt;       &lt;num&gt;\n1:       8 Adelie   Adelie   0.8257778     0.16850794 0.005714286\n2:       9 Adelie   Adelie   1.0000000     0.00000000 0.000000000\n3:      17 Adelie   Adelie   0.9895000     0.01050000 0.000000000\n4:      22 Adelie   Adelie   0.9920000     0.00800000 0.000000000\n5:      26 Adelie   Adelie   0.8459947     0.15300535 0.001000000\n6:      29 Adelie   Adelie   0.9665556     0.02233333 0.011111111\n\n\n\n\næ··æ·†çŸ©é˜µ\n\n# ç”Ÿæˆæ··æ·†çŸ©é˜µ\nprediction$confusion\n\n           truth\nresponse    Adelie Chinstrap Gentoo\n  Adelie        31         0      0\n  Chinstrap      2        14      0\n  Gentoo         0         0     20",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "mlr3 æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1016-mlr3.html#ç¬¬å››éƒ¨åˆ†measureè¯„ä¼°æŒ‡æ ‡",
    "href": "1016-mlr3.html#ç¬¬å››éƒ¨åˆ†measureè¯„ä¼°æŒ‡æ ‡",
    "title": "mlr3 æœºå™¨å­¦ä¹ å…¨æµç¨‹æŒ‡å—",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šMeasureï¼ˆè¯„ä¼°æŒ‡æ ‡ï¼‰",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šMeasureï¼ˆè¯„ä¼°æŒ‡æ ‡ï¼‰\n\næŸ¥çœ‹å¯ç”¨æŒ‡æ ‡\n\n# åˆ†ç±»æŒ‡æ ‡\nas.data.table(mlr_measures)[\n  task_type == \"classif\",\n  .(key, label)\n] |&gt; head(15)\n\nKey: &lt;key&gt;\n                key                         label\n             &lt;char&gt;                        &lt;char&gt;\n 1:     classif.acc       Classification Accuracy\n 2:     classif.auc      Area Under the ROC Curve\n 3:    classif.bacc             Balanced Accuracy\n 4:  classif.bbrier            Binary Brier Score\n 5:      classif.ce          Classification Error\n 6:   classif.costs Cost-sensitive Classification\n 7:     classif.dor         Diagnostic Odds Ratio\n 8:   classif.fbeta                  F-beta score\n 9:     classif.fdr          False Discovery Rate\n10:      classif.fn               False Negatives\n11:     classif.fnr           False Negative Rate\n12:    classif.fomr           False Omission Rate\n13:      classif.fp               False Positives\n14:     classif.fpr           False Positive Rate\n15: classif.logloss                      Log Loss\n\n\n\n\nè®¡ç®—è¯„ä¼°æŒ‡æ ‡\n\n# å•ä¸ªæŒ‡æ ‡\nprediction$score(msr(\"classif.acc\"))\n\nclassif.acc \n  0.9701493 \n\n# å¤šä¸ªæŒ‡æ ‡\nmeasures &lt;- msrs(c(\"classif.acc\", \"classif.ce\", \"classif.bacc\"))\nprediction$score(measures)\n\n classif.acc   classif.ce classif.bacc \n  0.97014925   0.02985075   0.97979798 \n\n\n\n\nå¸¸ç”¨åˆ†ç±»æŒ‡æ ‡\n\n\n\næŒ‡æ ‡\nä»£ç \nè¯´æ˜\n\n\n\n\nå‡†ç¡®ç‡\nclassif.acc\næ­£ç¡®é¢„æµ‹æ¯”ä¾‹\n\n\né”™è¯¯ç‡\nclassif.ce\n1 - å‡†ç¡®ç‡\n\n\nAUC\nclassif.auc\nROCæ›²çº¿ä¸‹é¢ç§¯ï¼ˆéœ€è¦æ¦‚ç‡é¢„æµ‹ï¼‰\n\n\nF1\nclassif.fbeta\nç²¾ç¡®ç‡å’Œå¬å›ç‡çš„è°ƒå’Œå¹³å‡\n\n\nKappa\nclassif.kappa\nè€ƒè™‘éšæœºä¸€è‡´æ€§çš„å‡†ç¡®ç‡\n\n\n\n\n\nå¸¸ç”¨å›å½’æŒ‡æ ‡\n\n\n\næŒ‡æ ‡\nä»£ç \nè¯´æ˜\n\n\n\n\nMSE\nregr.mse\nå‡æ–¹è¯¯å·®\n\n\nRMSE\nregr.rmse\nå‡æ–¹æ ¹è¯¯å·®\n\n\nMAE\nregr.mae\nå¹³å‡ç»å¯¹è¯¯å·®\n\n\nRÂ²\nregr.rsq\nå†³å®šç³»æ•°",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "mlr3 æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1016-mlr3.html#ç¬¬äº”éƒ¨åˆ†resamplingé‡é‡‡æ ·",
    "href": "1016-mlr3.html#ç¬¬äº”éƒ¨åˆ†resamplingé‡é‡‡æ ·",
    "title": "mlr3 æœºå™¨å­¦ä¹ å…¨æµç¨‹æŒ‡å—",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šResamplingï¼ˆé‡é‡‡æ ·ï¼‰",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šResamplingï¼ˆé‡é‡‡æ ·ï¼‰\né‡é‡‡æ ·ç”¨äºæ›´å¯é åœ°è¯„ä¼°æ¨¡å‹æ€§èƒ½ã€‚\n\næŸ¥çœ‹é‡é‡‡æ ·æ–¹æ³•\n\nas.data.table(mlr_resamplings)[, .(key, label)]\n\nKey: &lt;key&gt;\n                   key                         label\n                &lt;char&gt;                        &lt;char&gt;\n 1:          bootstrap                     Bootstrap\n 2:             custom                 Custom Splits\n 3:          custom_cv Custom Split Cross-Validation\n 4:                 cv              Cross-Validation\n 5:            holdout                       Holdout\n 6:           insample           Insample Resampling\n 7:                loo                 Leave-One-Out\n 8:                ncv                     Nested CV\n 9: paired_subsampling            Paired Subsampling\n10:        repeated_cv     Repeated Cross-Validation\n11:        subsampling                   Subsampling\n\n\n\n\näº¤å‰éªŒè¯\n\n# 5æŠ˜äº¤å‰éªŒè¯\ncv5 &lt;- rsmp(\"cv\", folds = 5)\n\n# æ‰§è¡Œé‡é‡‡æ ·\nrr &lt;- resample(task_penguins, learner_rf, cv5)\n\n# æŸ¥çœ‹æ¯æŠ˜ç»“æœ\nrr$score(msr(\"classif.acc\"))\n\n    task_id     learner_id resampling_id iteration classif.acc\n     &lt;char&gt;         &lt;char&gt;        &lt;char&gt;     &lt;int&gt;       &lt;num&gt;\n1: penguins classif.ranger            cv         1   0.9850746\n2: penguins classif.ranger            cv         2   0.9850746\n3: penguins classif.ranger            cv         3   1.0000000\n4: penguins classif.ranger            cv         4   0.9545455\n5: penguins classif.ranger            cv         5   1.0000000\nHidden columns: task, learner, resampling, prediction_test\n\n\n\n\næ±‡æ€»ç»“æœ\n\n# å¹³å‡æ€§èƒ½\nrr$aggregate(msr(\"classif.acc\"))\n\nclassif.acc \n  0.9849389 \n\n# å¤šä¸ªæŒ‡æ ‡\nrr$aggregate(msrs(c(\"classif.acc\", \"classif.ce\")))\n\nclassif.acc  classif.ce \n 0.98493894  0.01506106 \n\n\n\n\né‡å¤äº¤å‰éªŒè¯\n\n# 5æŠ˜äº¤å‰éªŒè¯é‡å¤3æ¬¡\nrcv &lt;- rsmp(\"repeated_cv\", folds = 5, repeats = 3)\nrr_repeated &lt;- resample(task_penguins, learner_rf, rcv)\n\nrr_repeated$aggregate(msr(\"classif.acc\"))\n\nclassif.acc \n   0.980989 \n\n\n\n\nå¯è§†åŒ–é‡é‡‡æ ·ç»“æœ\n\n# æå–æ¯æŠ˜çš„å‡†ç¡®ç‡\nscores &lt;- rr$score(msr(\"classif.acc\"))\n\nggplot(scores, aes(x = factor(iteration), y = classif.acc)) +\n  geom_col(fill = \"#4f46e5\", alpha = 0.8) +\n  geom_hline(\n    yintercept = mean(scores$classif.acc),\n    linetype = \"dashed\", color = \"red\"\n  ) +\n  labs(\n    title = \"5æŠ˜äº¤å‰éªŒè¯ç»“æœ\",\n    subtitle = paste(\"å¹³å‡å‡†ç¡®ç‡:\", round(mean(scores$classif.acc), 4)),\n    x = \"æŠ˜æ•°\",\n    y = \"å‡†ç¡®ç‡\"\n  ) +\n  theme_bw(base_size = 12) +\n  theme(plot.title = element_text(hjust = 0.5, face = \"bold\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "mlr3 æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1016-mlr3.html#ç¬¬å…­éƒ¨åˆ†benchmarkingæ¨¡å‹æ¯”è¾ƒ",
    "href": "1016-mlr3.html#ç¬¬å…­éƒ¨åˆ†benchmarkingæ¨¡å‹æ¯”è¾ƒ",
    "title": "mlr3 æœºå™¨å­¦ä¹ å…¨æµç¨‹æŒ‡å—",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šBenchmarkingï¼ˆæ¨¡å‹æ¯”è¾ƒï¼‰",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šBenchmarkingï¼ˆæ¨¡å‹æ¯”è¾ƒï¼‰\næ¯”è¾ƒå¤šä¸ªæ¨¡å‹åœ¨åŒä¸€ä»»åŠ¡ä¸Šçš„è¡¨ç°ã€‚\n\nè®¾è®¡åŸºå‡†æµ‹è¯•\n\n# å®šä¹‰å¤šä¸ªå­¦ä¹ å™¨\nlearners &lt;- list(\n  lrn(\"classif.rpart\", id = \"å†³ç­–æ ‘\"),\n  lrn(\"classif.ranger\", num.trees = 100, id = \"éšæœºæ£®æ—\"),\n  lrn(\"classif.kknn\", id = \"KNN\"),\n  lrn(\"classif.naive_bayes\", id = \"æœ´ç´ è´å¶æ–¯\")\n)\n\n# å®šä¹‰é‡é‡‡æ ·\ncv5 &lt;- rsmp(\"cv\", folds = 5)\n\n# åˆ›å»ºåŸºå‡†æµ‹è¯•è®¾è®¡\ndesign &lt;- benchmark_grid(\n  tasks = task_penguins,\n  learners = learners,\n  resamplings = cv5\n)\n\ndesign\n\n       task    learner resampling\n     &lt;char&gt;     &lt;char&gt;     &lt;char&gt;\n1: penguins     å†³ç­–æ ‘         cv\n2: penguins   éšæœºæ£®æ—         cv\n3: penguins        KNN         cv\n4: penguins æœ´ç´ è´å¶æ–¯         cv\n\n\n\n\nè¿è¡ŒåŸºå‡†æµ‹è¯•\n\n# æ‰§è¡ŒåŸºå‡†æµ‹è¯•\nbmr &lt;- benchmark(design)\n\n# æ±‡æ€»ç»“æœ\n# æ±‡æ€»ç»“æœ\nresults_agg &lt;- bmr$aggregate(msrs(c(\"classif.acc\", \"classif.ce\")))\n# é€‰æ‹©éƒ¨åˆ†åˆ—å±•ç¤ºå¹¶ä½¿ç”¨ kable\nknitr::kable(as.data.frame(results_agg[, .(learner_id, classif.acc, classif.ce)]))\n\n\n\n\nlearner_id\nclassif.acc\nclassif.ce\n\n\n\n\nå†³ç­–æ ‘\n0.9399367\n0.0600633\n\n\néšæœºæ£®æ—\n0.9910448\n0.0089552\n\n\nKNN\n0.9909995\n0.0090005\n\n\næœ´ç´ è´å¶æ–¯\n0.9819539\n0.0180461\n\n\n\n\n\n\n\nå¯è§†åŒ–æ¯”è¾ƒ\n\n# æå–æ‰€æœ‰ç»“æœ\nscores_all &lt;- bmr$score(msr(\"classif.acc\"))\n\nggplot(scores_all, aes(x = learner_id, y = classif.acc, fill = learner_id)) +\n  geom_boxplot(alpha = 0.8) +\n  scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\", \"#ef4444\")) +\n  labs(\n    title = \"æ¨¡å‹æ€§èƒ½æ¯”è¾ƒ\",\n    x = \"æ¨¡å‹\",\n    y = \"å‡†ç¡®ç‡\"\n  ) +\n  theme_bw(base_size = 12) +\n  theme(\n    legend.position = \"none\",\n    plot.title = element_text(hjust = 0.5, face = \"bold\")\n  )\n\n\n\n\n\n\n\n\n\n\næ’ååˆ†æ\n\n# è®¡ç®—å¹³å‡æ’å\n# è®¡ç®—å¹³å‡æ’å\nrank_res &lt;- bmr$aggregate(msr(\"classif.acc\"))[order(-classif.acc)]\nknitr::kable(as.data.frame(rank_res[, .(learner_id, classif.acc)]))\n\n\n\n\nlearner_id\nclassif.acc\n\n\n\n\néšæœºæ£®æ—\n0.9910448\n\n\nKNN\n0.9909995\n\n\næœ´ç´ è´å¶æ–¯\n0.9819539\n\n\nå†³ç­–æ ‘\n0.9399367",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "mlr3 æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1016-mlr3.html#ç¬¬ä¸ƒéƒ¨åˆ†tuningè¶…å‚æ•°è°ƒä¼˜",
    "href": "1016-mlr3.html#ç¬¬ä¸ƒéƒ¨åˆ†tuningè¶…å‚æ•°è°ƒä¼˜",
    "title": "mlr3 æœºå™¨å­¦ä¹ å…¨æµç¨‹æŒ‡å—",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šTuningï¼ˆè¶…å‚æ•°è°ƒä¼˜ï¼‰",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šTuningï¼ˆè¶…å‚æ•°è°ƒä¼˜ï¼‰\n\nå®šä¹‰æœç´¢ç©ºé—´\n\n# éšæœºæ£®æ—çš„å‚æ•°ç©ºé—´\nlearner_rf_tune &lt;- lrn(\"classif.ranger\")\n\nsearch_space &lt;- ps(\n  num.trees = p_int(lower = 50, upper = 500),\n  mtry = p_int(lower = 1, upper = 4),\n  min.node.size = p_int(lower = 1, upper = 10)\n)\n\nsearch_space\n\n&lt;ParamSet(3)&gt;\n              id    class lower upper nlevels        default  value\n          &lt;char&gt;   &lt;char&gt; &lt;num&gt; &lt;num&gt;   &lt;num&gt;         &lt;list&gt; &lt;list&gt;\n1:     num.trees ParamInt    50   500     451 &lt;NoDefault[0]&gt; [NULL]\n2:          mtry ParamInt     1     4       4 &lt;NoDefault[0]&gt; [NULL]\n3: min.node.size ParamInt     1    10      10 &lt;NoDefault[0]&gt; [NULL]\n\n\n\n\nç½‘æ ¼æœç´¢\n\n# åˆ›å»ºè°ƒä¼˜å®ä¾‹ï¼ˆæ–°ç‰ˆ mlr3tuning ä½¿ç”¨ ti() å‡½æ•°ï¼‰\ninstance &lt;- ti(\n  task = task_penguins,\n  learner = learner_rf_tune,\n  resampling = rsmp(\"cv\", folds = 3),\n  measures = msr(\"classif.acc\"),\n  search_space = search_space,\n  terminator = trm(\"evals\", n_evals = 20)\n)\n\n# ç½‘æ ¼æœç´¢è°ƒä¼˜å™¨\ntuner &lt;- tnr(\"grid_search\", resolution = 3)\n\n# æ‰§è¡Œè°ƒä¼˜\ntuner$optimize(instance)\n\n   num.trees  mtry min.node.size learner_param_vals  x_domain classif.acc\n       &lt;int&gt; &lt;int&gt;         &lt;int&gt;             &lt;list&gt;    &lt;list&gt;       &lt;num&gt;\n1:       275     1             1          &lt;list[4]&gt; &lt;list[3]&gt;    0.990991\n\n\n\n\næŸ¥çœ‹è°ƒä¼˜ç»“æœ\n\n# æœ€ä¼˜å‚æ•°\ninstance$result_learner_param_vals\n\n$num.threads\n[1] 1\n\n$num.trees\n[1] 275\n\n$mtry\n[1] 1\n\n$min.node.size\n[1] 1\n\n# æœ€ä¼˜æ€§èƒ½\ninstance$result_y\n\nclassif.acc \n   0.990991 \n\n\n\n\nè°ƒä¼˜å†å²å¯è§†åŒ–\n\n# æå–è°ƒä¼˜å†å²\narchive &lt;- as.data.table(instance$archive)\n\nggplot(archive, aes(x = seq_len(nrow(archive)), y = classif.acc)) +\n  geom_line(color = \"#4f46e5\", linewidth = 0.8) +\n  geom_point(color = \"#4f46e5\", size = 2) +\n  geom_hline(\n    yintercept = instance$result_y,\n    linetype = \"dashed\", color = \"red\"\n  ) +\n  labs(\n    title = \"è¶…å‚æ•°è°ƒä¼˜è¿‡ç¨‹\",\n    subtitle = paste(\"æœ€ä¼˜å‡†ç¡®ç‡:\", round(instance$result_y, 4)),\n    x = \"è¿­ä»£æ¬¡æ•°\",\n    y = \"å‡†ç¡®ç‡\"\n  ) +\n  theme_bw(base_size = 12) +\n  theme(plot.title = element_text(hjust = 0.5, face = \"bold\"))\n\n\n\n\n\n\n\n\n\n\nä½¿ç”¨æœ€ä¼˜å‚æ•°è®­ç»ƒæœ€ç»ˆæ¨¡å‹\n\n# ç”¨æœ€ä¼˜å‚æ•°åˆ›å»ºå­¦ä¹ å™¨\nlearner_final &lt;- lrn(\"classif.ranger\")\nlearner_final$param_set$values &lt;- instance$result_learner_param_vals\n\n# åœ¨å…¨éƒ¨æ•°æ®ä¸Šè®­ç»ƒ\nlearner_final$train(task_penguins)\nlearner_final$model\n\nRanger result\n\nCall:\n ranger::ranger(dependent.variable.name = task$target_names, data = task$data(),      probability = self$predict_type == \"prob\", min.node.size = 1L,      mtry = 1L, num.threads = 1L, num.trees = 275L) \n\nType:                             Classification \nNumber of trees:                  275 \nSample size:                      333 \nNumber of independent variables:  7 \nMtry:                             1 \nTarget node size:                 1 \nVariable importance mode:         none \nSplitrule:                        gini \nOOB prediction error:             1.20 % \n\n\n\n\néšæœºæœç´¢\n\n# éšæœºæœç´¢ï¼ˆæ›´é€‚åˆå¤§æœç´¢ç©ºé—´ï¼‰\ntuner_random &lt;- tnr(\"random_search\")\ntuner_random$optimize(instance)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "mlr3 æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1016-mlr3.html#ç¬¬å…«éƒ¨åˆ†pipelineé¢„å¤„ç†ç®¡é“",
    "href": "1016-mlr3.html#ç¬¬å…«éƒ¨åˆ†pipelineé¢„å¤„ç†ç®¡é“",
    "title": "mlr3 æœºå™¨å­¦ä¹ å…¨æµç¨‹æŒ‡å—",
    "section": "ç¬¬å…«éƒ¨åˆ†ï¼šPipelineï¼ˆé¢„å¤„ç†ç®¡é“ï¼‰",
    "text": "ç¬¬å…«éƒ¨åˆ†ï¼šPipelineï¼ˆé¢„å¤„ç†ç®¡é“ï¼‰\nmlr3pipelines æä¾›äº†çµæ´»çš„æ•°æ®é¢„å¤„ç†èƒ½åŠ›ã€‚\n\næŸ¥çœ‹å¯ç”¨æ“ä½œ\n\n# å¸¸ç”¨é¢„å¤„ç†æ“ä½œ\nas.data.table(mlr_pipeops)[, .(key, packages)] |&gt; head(15)\n\nKey: &lt;key&gt;\n                key                    packages\n             &lt;char&gt;                      &lt;list&gt;\n 1:            adas   mlr3pipelines,smotefamily\n 2:         blsmote   mlr3pipelines,smotefamily\n 3:          boxcox mlr3pipelines,bestNormalize\n 4:          branch               mlr3pipelines\n 5:           chunk               mlr3pipelines\n 6:  classbalancing               mlr3pipelines\n 7:      classifavg         mlr3pipelines,stats\n 8:    classweights               mlr3pipelines\n 9:        colapply               mlr3pipelines\n10: collapsefactors               mlr3pipelines\n11:        colroles               mlr3pipelines\n12:            copy               mlr3pipelines\n13:    datefeatures               mlr3pipelines\n14:          decode               mlr3pipelines\n15:          encode         mlr3pipelines,stats\n\n\n\n\nåˆ›å»ºé¢„å¤„ç†æ­¥éª¤\n\n# ç¼ºå¤±å€¼å¡«å……\npo_impute &lt;- po(\"imputemedian\")\n\n# æ ‡å‡†åŒ–\npo_scale &lt;- po(\"scale\")\n\n# ç‹¬çƒ­ç¼–ç \npo_encode &lt;- po(\"encode\")\n\n\n\næ„å»ºç®¡é“\n\n# åˆ›å»ºå®Œæ•´ç®¡é“ï¼šå¡«å…… â†’ ç¼–ç  â†’ æ ‡å‡†åŒ– â†’ éšæœºæ£®æ—\ngraph &lt;- po(\"imputemedian\") %&gt;&gt;%\n  po(\"encode\") %&gt;&gt;%\n  po(\"scale\") %&gt;&gt;%\n  lrn(\"classif.ranger\", num.trees = 100)\n\n# è½¬æ¢ä¸ºå­¦ä¹ å™¨\ngraph_learner &lt;- as_learner(graph)\ngraph_learner$id &lt;- \"pipeline_rf\"\n\ngraph_learner\n\n\nâ”€â”€ &lt;GraphLearner&gt; (pipeline_rf) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ Model: -\nâ€¢ Parameters: encode.method=one-hot, scale.robust=FALSE,\nclassif.ranger.num.threads=1, classif.ranger.num.trees=100\nâ€¢ Validate: NULL\nâ€¢ Packages: mlr3, mlr3pipelines, stats, mlr3learners, and ranger\nâ€¢ Predict Types: [response] and prob\nâ€¢ Feature Types: logical, integer, numeric, character, factor, ordered,\nPOSIXct, and Date\nâ€¢ Encapsulation: none (fallback: -)\nâ€¢ Properties: featureless, hotstart_backward, hotstart_forward, importance,\nmarshal, missings, multiclass, offset, oob_error, selected_features, twoclass,\nand weights\nâ€¢ Other settings: use_weights = 'use'\n\nâ”€â”€ Pipeline: &lt;INPUT&gt; -&gt; imputemedian -&gt; encode -&gt; scale -&gt; classif.ranger -&gt; &lt;OUTPUT&gt; \n\n\n\n\nä½¿ç”¨ç®¡é“è®­ç»ƒ\n\n# ä½¿ç”¨åŸå§‹æ•°æ®ï¼ˆå«ç¼ºå¤±å€¼ï¼‰\ndata(\"penguins\", package = \"palmerpenguins\")\n\ntask_full &lt;- TaskClassif$new(\n  id = \"penguins_full\",\n  backend = penguins,\n  target = \"species\"\n)\n\n# äº¤å‰éªŒè¯\ncv5 &lt;- rsmp(\"cv\", folds = 5)\nrr_pipe &lt;- resample(task_full, graph_learner, cv5)\n\nrr_pipe$aggregate(msr(\"classif.acc\"))\n\nclassif.acc \n  0.9884058 \n\n\n\n\nå¯è§†åŒ–ç®¡é“ç»“æ„\n\n# ç®€å•ç®¡é“å¯è§†åŒ–\ngraph_simple &lt;- po(\"imputemedian\") %&gt;&gt;%\n  po(\"scale\") %&gt;&gt;%\n  lrn(\"classif.ranger\")\n\ngraph_simple$plot()\n\n\n\n\n\n\n\n\n\n\nåˆ†æ”¯ç®¡é“ï¼ˆæ¨¡å‹é€‰æ‹©ï¼‰\n\n# åˆ›å»ºåˆ†æ”¯ï¼šåŒæ—¶å°è¯•å¤šä¸ªæ¨¡å‹\ngraph_branch &lt;- po(\"imputemedian\") %&gt;&gt;%\n  po(\"encode\") %&gt;&gt;%\n  po(\"branch\", options = c(\"rf\", \"tree\", \"knn\")) %&gt;&gt;%\n  gunion(list(\n    rf = lrn(\"classif.ranger\", num.trees = 100),\n    tree = lrn(\"classif.rpart\"),\n    knn = lrn(\"classif.kknn\")\n  )) %&gt;&gt;%\n  po(\"unbranch\")\n\ngraph_branch\n\n\nâ”€â”€ Graph with 7 PipeOps: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n                  ID         State            sccssors           prdcssors\n              &lt;char&gt;        &lt;char&gt;              &lt;char&gt;              &lt;char&gt;\n        imputemedian &lt;&lt;UNTRAINED&gt;&gt;              encode                    \n              encode &lt;&lt;UNTRAINED&gt;&gt;              branch        imputemedian\n              branch &lt;&lt;UNTRAINED&gt;&gt; rf.classif.range...              encode\n rf.classif.range... &lt;&lt;UNTRAINED&gt;&gt;            unbranch              branch\n tree.classif.rpa... &lt;&lt;UNTRAINED&gt;&gt;            unbranch              branch\n    knn.classif.kknn &lt;&lt;UNTRAINED&gt;&gt;            unbranch              branch\n            unbranch &lt;&lt;UNTRAINED&gt;&gt;                     rf.classif.range...\n\nâ”€â”€ Pipeline: non-sequential",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "mlr3 æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1016-mlr3.html#ç¬¬ä¹éƒ¨åˆ†ç‰¹å¾å·¥ç¨‹",
    "href": "1016-mlr3.html#ç¬¬ä¹éƒ¨åˆ†ç‰¹å¾å·¥ç¨‹",
    "title": "mlr3 æœºå™¨å­¦ä¹ å…¨æµç¨‹æŒ‡å—",
    "section": "ç¬¬ä¹éƒ¨åˆ†ï¼šç‰¹å¾å·¥ç¨‹",
    "text": "ç¬¬ä¹éƒ¨åˆ†ï¼šç‰¹å¾å·¥ç¨‹\n\nç‰¹å¾é€‰æ‹©\n\n# åŸºäºè¿‡æ»¤å™¨çš„ç‰¹å¾é€‰æ‹©\nlibrary(mlr3filters)\n\n# æŸ¥çœ‹å¯ç”¨è¿‡æ»¤å™¨\nas.data.table(mlr_filters)[, .(key, task_types, packages)]\n\n\n# ä½¿ç”¨éšæœºæ£®æ—å†…ç½®çš„ç‰¹å¾é‡è¦æ€§\nlearner_rf_imp &lt;- lrn(\"classif.ranger\",\n  num.trees = 100,\n  importance = \"impurity\"\n)\nlearner_rf_imp$train(task_penguins)\n\n# æå–ç‰¹å¾é‡è¦æ€§\nimportance_scores &lt;- learner_rf_imp$model$variable.importance\nimportance_df &lt;- data.frame(\n  feature = names(importance_scores),\n  score = importance_scores\n)\nimportance_df\n\n                            feature      score\nbill_depth_mm         bill_depth_mm 43.1413318\nbill_length_mm       bill_length_mm 75.3820546\nbody_mass_g             body_mass_g 21.1290406\nflipper_length_mm flipper_length_mm 47.9487795\nisland                       island 22.0412215\nsex                             sex  1.2935402\nyear                           year  0.6906693\n\n\n\n\nå¯è§†åŒ–ç‰¹å¾é‡è¦æ€§\n\nggplot(importance_df, aes(x = reorder(feature, score), y = score)) +\n  geom_col(fill = \"#4f46e5\", alpha = 0.8) +\n  coord_flip() +\n  labs(\n    title = \"ç‰¹å¾é‡è¦æ€§ï¼ˆéšæœºæ£®æ—ï¼‰\",\n    x = \"ç‰¹å¾\",\n    y = \"é‡è¦æ€§å¾—åˆ†\"\n  ) +\n  theme_bw(base_size = 12) +\n  theme(plot.title = element_text(hjust = 0.5, face = \"bold\"))\n\n\n\n\n\n\n\n\n\n\nåœ¨ç®¡é“ä¸­è¿›è¡Œç‰¹å¾é€‰æ‹©\n\n# ä½¿ç”¨ select æ“ä½œç¬¦é€‰æ‹©ç‰¹å®šç‰¹å¾\ngraph_fs &lt;- po(\"select\",\n  selector = selector_name(c(\"flipper_length_mm\", \"bill_length_mm\", \"bill_depth_mm\"))\n) %&gt;&gt;%\n  lrn(\"classif.ranger\", num.trees = 100)\n\ngraph_fs_learner &lt;- as_learner(graph_fs)\ngraph_fs_learner$id &lt;- \"fs_rf\"\n\n# è¯„ä¼°\nrr_fs &lt;- resample(task_penguins, graph_fs_learner, rsmp(\"cv\", folds = 5))\nrr_fs$aggregate(msr(\"classif.acc\"))\n\nclassif.acc \n  0.9819539",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "mlr3 æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1016-mlr3.html#ç¬¬åéƒ¨åˆ†å®Œæ•´å®æˆ˜æ¡ˆä¾‹",
    "href": "1016-mlr3.html#ç¬¬åéƒ¨åˆ†å®Œæ•´å®æˆ˜æ¡ˆä¾‹",
    "title": "mlr3 æœºå™¨å­¦ä¹ å…¨æµç¨‹æŒ‡å—",
    "section": "ç¬¬åéƒ¨åˆ†ï¼šå®Œæ•´å®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬åéƒ¨åˆ†ï¼šå®Œæ•´å®æˆ˜æ¡ˆä¾‹\n\næ¡ˆä¾‹ï¼šä¼é¹…ç‰©ç§åˆ†ç±»\n\n# 1. å‡†å¤‡æ•°æ®\ndata(\"penguins\", package = \"palmerpenguins\")\n\ntask &lt;- TaskClassif$new(\n  id = \"penguin_classification\",\n  backend = penguins,\n  target = \"species\"\n)\n\n# 2. æ„å»ºé¢„å¤„ç†ç®¡é“\n# æ³¨æ„ï¼šå…ˆç”¨ä¼—æ•°å¡«å……å› å­ç¼ºå¤±å€¼ï¼Œå†ç”¨ä¸­ä½æ•°å¡«å……æ•°å€¼ç¼ºå¤±å€¼\npreprocess &lt;- po(\"imputemode\") %&gt;&gt;% # å¡«å……å› å­ç¼ºå¤±å€¼ï¼ˆå¦‚ sexï¼‰\n  po(\"imputemedian\") %&gt;&gt;% # å¡«å……æ•°å€¼ç¼ºå¤±å€¼\n  po(\"encode\") %&gt;&gt;%\n  po(\"scale\")\n\n# 3. å®šä¹‰å€™é€‰æ¨¡å‹\nlearners &lt;- list(\n  å†³ç­–æ ‘ = preprocess %&gt;&gt;% lrn(\"classif.rpart\"),\n  éšæœºæ£®æ— = preprocess %&gt;&gt;% lrn(\"classif.ranger\", num.trees = 200),\n  KNN = preprocess %&gt;&gt;% lrn(\"classif.kknn\", k = 5),\n  æœ´ç´ è´å¶æ–¯ = preprocess %&gt;&gt;% lrn(\"classif.naive_bayes\")\n)\n\n# è½¬æ¢ä¸ºå­¦ä¹ å™¨\ngraph_learners &lt;- lapply(names(learners), function(name) {\n  gl &lt;- as_learner(learners[[name]])\n  gl$id &lt;- name\n  gl\n})\n\n# 4. åŸºå‡†æµ‹è¯•\ndesign &lt;- benchmark_grid(\n  tasks = task,\n  learners = graph_learners,\n  resamplings = rsmp(\"repeated_cv\", folds = 5, repeats = 3)\n)\n\nbmr &lt;- benchmark(design)\n\n\n\nç»“æœæ±‡æ€»\n\n# æ±‡æ€»ç»Ÿè®¡\nresults &lt;- bmr$aggregate(msrs(c(\"classif.acc\", \"classif.ce\")))\nresults[order(-classif.acc)]\n\n      nr                task_id learner_id resampling_id iters classif.acc\n   &lt;int&gt;                 &lt;char&gt;     &lt;char&gt;        &lt;char&gt; &lt;int&gt;       &lt;num&gt;\n1:     2 penguin_classification   éšæœºæ£®æ—   repeated_cv    15   0.9874112\n2:     3 penguin_classification        KNN   repeated_cv    15   0.9835180\n3:     1 penguin_classification     å†³ç­–æ ‘   repeated_cv    15   0.9418869\n4:     4 penguin_classification æœ´ç´ è´å¶æ–¯   repeated_cv    15   0.7684854\n   classif.ce\n        &lt;num&gt;\n1: 0.01258880\n2: 0.01648196\n3: 0.05811310\n4: 0.23151463\nHidden columns: resample_result\n\n\n\n\nå¯è§†åŒ–æœ€ç»ˆç»“æœ\n\nscores_final &lt;- bmr$score(msr(\"classif.acc\"))\n\nggplot(scores_final, aes(x = learner_id, y = classif.acc, fill = learner_id)) +\n  geom_boxplot(alpha = 0.8, outlier.shape = NA) +\n  geom_jitter(width = 0.2, alpha = 0.5, size = 1) +\n  scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\", \"#ef4444\")) +\n  labs(\n    title = \"ä¼é¹…ç‰©ç§åˆ†ç±» - æ¨¡å‹æ¯”è¾ƒ\",\n    subtitle = \"5æŠ˜äº¤å‰éªŒè¯ Ã— 3æ¬¡é‡å¤\",\n    x = \"æ¨¡å‹\",\n    y = \"å‡†ç¡®ç‡\"\n  ) +\n  theme_bw(base_size = 12) +\n  theme(\n    legend.position = \"none\",\n    plot.title = element_text(hjust = 0.5, face = \"bold\")\n  ) +\n  ylim(0.9, 1.0)\n\n\n\n\n\n\n\n\n\n\né€‰æ‹©æœ€ä¼˜æ¨¡å‹å¹¶è°ƒå‚\n\n# å¯¹æœ€ä¼˜æ¨¡å‹ï¼ˆéšæœºæ£®æ—ï¼‰è¿›è¡Œè°ƒå‚\nlearner_best &lt;- as_learner(\n  preprocess %&gt;&gt;% lrn(\"classif.ranger\")\n)\n\nsearch_space &lt;- ps(\n  classif.ranger.num.trees = p_int(100, 500),\n  classif.ranger.mtry = p_int(1, 4),\n  classif.ranger.min.node.size = p_int(1, 10)\n)\n\ninstance &lt;- ti(\n  task = task,\n  learner = learner_best,\n  resampling = rsmp(\"cv\", folds = 5),\n  measures = msr(\"classif.acc\"),\n  search_space = search_space,\n  terminator = trm(\"evals\", n_evals = 30)\n)\n\ntuner &lt;- tnr(\"random_search\")\ntuner$optimize(instance)\n\n   classif.ranger.num.trees classif.ranger.mtry classif.ranger.min.node.size\n                      &lt;int&gt;               &lt;int&gt;                        &lt;int&gt;\n1:                      455                   2                            3\n   learner_param_vals  x_domain classif.acc\n               &lt;list&gt;    &lt;list&gt;       &lt;num&gt;\n1:          &lt;list[6]&gt; &lt;list[3]&gt;   0.9912617\n\n# æœ€ä¼˜å‚æ•°\ninstance$result_learner_param_vals\n\n$encode.method\n[1] \"one-hot\"\n\n$scale.robust\n[1] FALSE\n\n$classif.ranger.num.threads\n[1] 1\n\n$classif.ranger.num.trees\n[1] 455\n\n$classif.ranger.mtry\n[1] 2\n\n$classif.ranger.min.node.size\n[1] 3\n\n# æœ€ä¼˜æ€§èƒ½\ninstance$result_y\n\nclassif.acc \n  0.9912617",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "mlr3 æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1016-mlr3.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "1016-mlr3.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "mlr3 æœºå™¨å­¦ä¹ å…¨æµç¨‹æŒ‡å—",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\nåˆ›å»ºä»»åŠ¡\n\n# åˆ†ç±»ä»»åŠ¡\ntask &lt;- TaskClassif$new(id, backend, target)\n\n# å›å½’ä»»åŠ¡\ntask &lt;- TaskRegr$new(id, backend, target)\n\n# å†…ç½®ä»»åŠ¡\ntask &lt;- tsk(\"iris\")\n\n\n\nåˆ›å»ºå­¦ä¹ å™¨\n\n# åŸºç¡€è¯­æ³•\nlearner &lt;- lrn(\"classif.ranger\", num.trees = 100)\n\n# è®¾ç½®é¢„æµ‹ç±»å‹\nlearner$predict_type &lt;- \"prob\"\n\n\n\nè®­ç»ƒä¸é¢„æµ‹\n\n# è®­ç»ƒ\nlearner$train(task, row_ids = train_ids)\n\n# é¢„æµ‹\nprediction &lt;- learner$predict(task, row_ids = test_ids)\n\n# è¯„ä¼°\nprediction$score(msr(\"classif.acc\"))\n\n\n\né‡é‡‡æ ·\n\n# äº¤å‰éªŒè¯\nrr &lt;- resample(task, learner, rsmp(\"cv\", folds = 5))\nrr$aggregate(msr(\"classif.acc\"))\n\n\n\nåŸºå‡†æµ‹è¯•\n\ndesign &lt;- benchmark_grid(tasks, learners, resamplings)\nbmr &lt;- benchmark(design)\nbmr$aggregate(measures)\n\n\n\nè°ƒå‚\n\n# å®šä¹‰æœç´¢ç©ºé—´\nsearch_space &lt;- ps(\n  param1 = p_int(lower, upper),\n  param2 = p_dbl(lower, upper)\n)\n\n# è°ƒä¼˜ï¼ˆæ–°ç‰ˆä½¿ç”¨ ti() å‡½æ•°ï¼‰\ninstance &lt;- ti(task, learner, resampling, measures, search_space, terminator)\ntuner &lt;- tnr(\"grid_search\")\ntuner$optimize(instance)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "mlr3 æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1016-mlr3.html#æ€»ç»“",
    "href": "1016-mlr3.html#æ€»ç»“",
    "title": "mlr3 æœºå™¨å­¦ä¹ å…¨æµç¨‹æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nmlr3 æä¾›äº†å®Œæ•´çš„æœºå™¨å­¦ä¹ å·¥ä½œæµï¼š\n\n\n\né˜¶æ®µ\nç»„ä»¶\nåŠŸèƒ½\n\n\n\n\næ•°æ®å‡†å¤‡\nTask\nå°è£…æ•°æ®å’Œç›®æ ‡\n\n\nå»ºæ¨¡\nLearner\nå°è£…ç®—æ³•\n\n\nè¯„ä¼°\nMeasure\nå®šä¹‰è¯„ä¼°æŒ‡æ ‡\n\n\néªŒè¯\nResampling\näº¤å‰éªŒè¯ç­‰\n\n\næ¯”è¾ƒ\nBenchmark\nå¤šæ¨¡å‹å¯¹æ¯”\n\n\nè°ƒå‚\nTuning\nè¶…å‚æ•°ä¼˜åŒ–\n\n\né¢„å¤„ç†\nPipeline\næ•°æ®è½¬æ¢æµç¨‹\n\n\n\n\næ¨èå­¦ä¹ èµ„æº\n\nmlr3 å®˜æ–¹æ–‡æ¡£\nmlr3 book\nmlr3 gallery\n\n\n\nä¸å…¶ä»–æ¡†æ¶å¯¹æ¯”\n\n\n\nç‰¹æ€§\nmlr3\ncaret\ntidymodels\n\n\n\n\nè®¾è®¡\nR6 OOP\nS3 å‡½æ•°å¼\ntidy å‡½æ•°å¼\n\n\nç®¡é“\nmlr3pipelines\nå†…ç½®\nrecipes\n\n\næ‰©å±•æ€§\né«˜\nä¸­\né«˜\n\n\nå­¦ä¹ æ›²çº¿\nä¸­ç­‰\nä½\nä¸­ç­‰\n\n\nå¹¶è¡Œæ”¯æŒ\nåŸç”Ÿ\néœ€é…ç½®\nåŸç”Ÿ",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "mlr3 æœºå™¨å­¦ä¹ "
    ]
  },
  {
    "objectID": "1014-purrr.html",
    "href": "1014-purrr.html",
    "title": "purrr: å‡½æ•°å¼ç¼–ç¨‹,å½»åº•æ‘†è„±forå¾ªç¯",
    "section": "",
    "text": "purrr é€šè¿‡æä¾›ä¸€å¥—å®Œæ•´ä¸”ä¸€è‡´çš„ç”¨äºå¤„ç†å‡½æ•°å’Œå‘é‡çš„å·¥å…·æ¥å¢å¼º R çš„å‡½æ•°å¼ç¼–ç¨‹ (FP) å·¥å…·åŒ…ã€‚å¦‚æœæ‚¨ä»¥å‰ä»æœªå¬è¯´è¿‡ FPï¼Œé‚£ä¹ˆæœ€å¥½çš„èµ·ç‚¹æ˜¯map()å‡½æ•°ç³»åˆ—ï¼Œå®ƒå…è®¸æ‚¨ç”¨æ›´ç®€æ´ã€æ›´æ˜“äºé˜…è¯»çš„ä»£ç æ›¿æ¢è®¸å¤š for å¾ªç¯ã€‚\nå¬èµ·æ¥æœ‰ç‚¹å¤æ‚ï¼Œä½†æ›´ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ç”¨åµŒå¥—å‡½æ•°æ¥æ›¿ä»£forå¾ªç¯çš„å†—é•¿çš„æ¡†æ¶ç»“æ„ã€‚è®©è¾“å…¥è¾“å‡ºæ›´ç®€å•ã€‚\nç›¸å…³æ•™ç¨‹ï¼šå®˜ç½‘ç½‘ç«™",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "purrr - å‡½æ•°å¼ç¼–ç¨‹"
    ]
  },
  {
    "objectID": "1014-purrr.html#råŒ…ä»‹ç»",
    "href": "1014-purrr.html#råŒ…ä»‹ç»",
    "title": "purrr: å‡½æ•°å¼ç¼–ç¨‹,å½»åº•æ‘†è„±forå¾ªç¯",
    "section": "",
    "text": "purrr é€šè¿‡æä¾›ä¸€å¥—å®Œæ•´ä¸”ä¸€è‡´çš„ç”¨äºå¤„ç†å‡½æ•°å’Œå‘é‡çš„å·¥å…·æ¥å¢å¼º R çš„å‡½æ•°å¼ç¼–ç¨‹ (FP) å·¥å…·åŒ…ã€‚å¦‚æœæ‚¨ä»¥å‰ä»æœªå¬è¯´è¿‡ FPï¼Œé‚£ä¹ˆæœ€å¥½çš„èµ·ç‚¹æ˜¯map()å‡½æ•°ç³»åˆ—ï¼Œå®ƒå…è®¸æ‚¨ç”¨æ›´ç®€æ´ã€æ›´æ˜“äºé˜…è¯»çš„ä»£ç æ›¿æ¢è®¸å¤š for å¾ªç¯ã€‚\nå¬èµ·æ¥æœ‰ç‚¹å¤æ‚ï¼Œä½†æ›´ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ç”¨åµŒå¥—å‡½æ•°æ¥æ›¿ä»£forå¾ªç¯çš„å†—é•¿çš„æ¡†æ¶ç»“æ„ã€‚è®©è¾“å…¥è¾“å‡ºæ›´ç®€å•ã€‚\nç›¸å…³æ•™ç¨‹ï¼šå®˜ç½‘ç½‘ç«™",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "purrr - å‡½æ•°å¼ç¼–ç¨‹"
    ]
  },
  {
    "objectID": "1014-purrr.html#råŒ…å®‰è£…",
    "href": "1014-purrr.html#råŒ…å®‰è£…",
    "title": "purrr: å‡½æ•°å¼ç¼–ç¨‹,å½»åº•æ‘†è„±forå¾ªç¯",
    "section": "RåŒ…å®‰è£…",
    "text": "RåŒ…å®‰è£…\n\ninstall.packages(\"purrr\")",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "purrr - å‡½æ•°å¼ç¼–ç¨‹"
    ]
  },
  {
    "objectID": "1014-purrr.html#è¯­æ³•",
    "href": "1014-purrr.html#è¯­æ³•",
    "title": "purrr: å‡½æ•°å¼ç¼–ç¨‹,å½»åº•æ‘†è„±forå¾ªç¯",
    "section": "è¯­æ³•",
    "text": "è¯­æ³•\npurrrç³»åˆ—å‡½æ•°éƒ½ä»¥mapï¼Œmap2å’Œpmapä½œä¸ºå¤§ç±»ï¼Œæ­é…æ›´å¤šçš„åç¼€æ¥è®¾å®šè¾“å‡ºç±»å‹ã€‚\n\nmap(.x, .f)ï¼šè¾“å…¥ä¸€ä¸ªå‘é‡(.x)ï¼Œä»¥è¯¥å‘é‡ä¸ºè¾“å…¥è¿›è¡Œå¾ªç¯(.få‡½æ•°å¾ªç¯)\nmap(.x, .f)ï¼šè¾“å…¥ä¸¤ä¸ªå‘é‡\nmap3(.x, .f)ï¼šè¾“å…¥nï¼ˆå¤§äº2ï¼‰å‘é‡\n\nè¿™é‡Œè¾¹çš„å‘é‡æ˜¯æ¯”è¾ƒå¹¿çš„å‘é‡ï¼ŒåŒ…å«å‘é‡ï¼Œåˆ—è¡¨ï¼Œå­—ç¬¦ä¸²ï¼Œæ•°æ®æ¡†ï¼ˆå¯ä»¥çœ‹ä½œå‘é‡çš„å‘é‡ï¼‰ï¼Œåªè¦æœ‰è¿™ç§é¡ºåºç»“æ„çš„éƒ½å¯ä»¥ä½œä¸ºmapçš„è¾“å…¥",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "purrr - å‡½æ•°å¼ç¼–ç¨‹"
    ]
  },
  {
    "objectID": "1014-purrr.html#ä¸¾ä¸ªæ —å­",
    "href": "1014-purrr.html#ä¸¾ä¸ªæ —å­",
    "title": "purrr: å‡½æ•°å¼ç¼–ç¨‹,å½»åº•æ‘†è„±forå¾ªç¯",
    "section": "ä¸¾ä¸ªæ —å­",
    "text": "ä¸¾ä¸ªæ —å­\n\nåŠ è½½æ•°æ®\n\nlibrary(tidyverse)\nlibrary(purrr)\n\n\ndata &lt;- mtcars\n\nhead(data, 5)\n\n                   mpg cyl disp  hp drat    wt  qsec vs am gear carb\nMazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4\nMazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4\nDatsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1\nHornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1\nHornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2\n\n\n\n\nä½¿ç”¨tidyverseç»“æ„å’Œpurrræ¥åˆ’åˆ†æ•°æ®åˆ†åˆ«åšå›å½’\næˆ‘ä»¬ç°åœ¨æƒ³æ ¹æ®cylå¯¹æ•°æ®æ¡†è¿›è¡Œåˆ’åˆ†ï¼Œåœ¨åˆ†å‡ºæ¥çš„æ•°æ®æ¡†ä¸­åšå›å½’ï¼Œç„¶åæŠŠå›å½’ç»“æœæ”¾åˆ°ä¸€ä¸ªæ•°å­—å‘é‡é‡Œ\n\ndata |&gt; \n  split(data$cyl) |&gt;  # åˆ’åˆ†æ•°æ®\n  map(\\(df) lm(mpg ~ wt, data = df)) |&gt; #åˆ†åˆ«åšå¾ªç¯\n  map(summary) %&gt;%  #å¯¹ç»“æœåšsummary\n  map_dbl(\"r.squared\")\n\n        4         6         8 \n0.5086326 0.4645102 0.4229655 \n\n\næŸ¥çœ‹ä»¥ä¸‹ä»£ç ï¼Œå‘ç°äº†ä»€ä¹ˆï¼Ÿ\n\npurrrå¾ªç¯çš„ç¬¬ä¸€ä¸ªå‚æ•°å§‹ç»ˆæ˜¯æ•°æ®ï¼Œå› æ­¤ purrr å¯ä»¥è‡ªç„¶åœ°ä¸ç®¡é“é…åˆä½¿ç”¨ã€‚\nmap_xxxï¼ˆmapçš„åç¼€ç›¸å½“äºè‡ªå®šä¹‰äº†è¾“å‡ºç±»å‹ï¼‰\n\n\n\nå¸¸è§„æ–¹æ³•æ¥åšè¿™ä¸ªæ¨¡å‹\n\nvar &lt;- c(\"disp\", \"hp\", \"drat\")\n\ndata_list &lt;- split(data, mtcars$cyl)\n\nvec_result = c()\nfor (temp_data in data_list) {\n    model = lm(mpg ~ wt, data = temp_data)\n    model_summary = summary(model)\n    r2 = model_summary$\"r.squared\"\n    vec_result = c(vec_result, r2)\n}\n\nprint(vec_result)\n\n[1] 0.5086326 0.4645102 0.4229655\n\n\nå‘ç°äº†ä»€ä¹ˆ\n\nä»£ç è¡Œæ•°å¤šäº†å¾ˆå¤š\nå¤šäº†ä¸€äº›ä¸­é—´å˜é‡\nä»£ç å¯è¯»æ€§å·®ï¼Œå¾ˆä¸ä¼˜é›…",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "purrr - å‡½æ•°å¼ç¼–ç¨‹"
    ]
  },
  {
    "objectID": "1014-purrr.html#å¤šå˜é‡ç´¢å¼•å¾ªç¯",
    "href": "1014-purrr.html#å¤šå˜é‡ç´¢å¼•å¾ªç¯",
    "title": "purrr: å‡½æ•°å¼ç¼–ç¨‹,å½»åº•æ‘†è„±forå¾ªç¯",
    "section": "å¤šå˜é‡ç´¢å¼•å¾ªç¯",
    "text": "å¤šå˜é‡ç´¢å¼•å¾ªç¯\nå¦‚æœæ˜¯æƒ³ç”¨å¤šä¸ªå‘é‡æ¥ç´¢å¼•å¾ªç¯ï¼Œè¾“å…¥å¤šä¸ªå‘é‡ï¼Œæˆ‘ä»¬è¦æ€ä¹ˆåšå‘¢ã€‚ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­å°±çŸ¥é“äº†ã€‚\n\nvar1 &lt;- c(\"disp\", \"hp\", \"drat\")\nvar2 &lt;- c(\"wt\", \"qsec\", \"vs\")\nvar_add &lt;- map2(var1, var2, \\(x, y) paste0(x, \"+\", y))\nprint(var_add)\n\n[[1]]\n[1] \"disp+wt\"\n\n[[2]]\n[1] \"hp+qsec\"\n\n[[3]]\n[1] \"drat+vs\"\n\n\nå†ä¸¾ä¸ªä¾‹å­\n\nmeans &lt;- 1:4\nsds &lt;- 1:4\nset.seed(2020)\nsamples &lt;- map2(means, sds, \\(mean, sds){rnorm(mean, sds, n = 5)})\n\n#è¿™é‡Œä¹Ÿå¯ä»¥å†™ä¸ºï¼Œå¦‚ä¸‹ï¼Œä¸è¿‡æœ‰æ—¶å€™æƒ³è¦æ›´å¤æ‚çš„æ“ä½œå°±ä¸è¦ç”¨è¿™ç§ç®€åŒ–çš„å†™æ³•\n#samples &lt;- map2(means, sds, rnorm, n = 5)\nstr(samples)\n\nList of 4\n $ : num [1:5] 1.377 1.302 -0.098 -0.13 -1.797\n $ : num [1:5] 3.44 3.88 1.54 5.52 2.23\n $ : num [1:5] 0.441 5.728 6.589 1.885 2.63\n $ : num [1:5] 11.2 10.82 -8.16 -5.16 4.23\n\n\nå¦‚æœè¾“å…¥çš„æ˜¯å¤šä¸ªå‘é‡å¯ä»¥å‚è€ƒå¦‚ä¸‹\n\nvar3 &lt;- c(\"disp\", \"hp\", \"drat\")\n\nvar4 &lt;- c(\"wt\", \"qsec\", \"vs\")\n\n#ä½¿ç”¨pmapçš„æ—¶å€™ï¼ŒæŠŠå¤šä¸ªå‘é‡æ”¾åˆ°listæ¡†é‡Œä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°\npvar_add &lt;- pmap(list(var1, var2, var3, var4), \n            \\(x, y, z, p) \n            paste0(x, \"+\", y, \"+\", z, \"+\", \"p\"))\n\nprint(pvar_add)\n\n[[1]]\n[1] \"disp+wt+disp+p\"\n\n[[2]]\n[1] \"hp+qsec+hp+p\"\n\n[[3]]\n[1] \"drat+vs+drat+p\"\n\n\næ³¨æ„ï¼šè¿™é‡Œç”¨çš„éƒ½æ˜¯ç®€å•çš„å­—ç¬¦å‘é‡ï¼Œä½†æˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™å¯ä»¥è‡ªç”±æ‹“å±•åˆ°æ•°æ®æ¡†å’Œåˆ—è¡¨ç­‰å¤æ‚å‘é‡ç»“æ„ï¼Œå°±èƒ½æ„Ÿè§‰åˆ°purrrå¾ªç¯çš„é­…åŠ›äº†",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "purrr - å‡½æ•°å¼ç¼–ç¨‹"
    ]
  },
  {
    "objectID": "1014-purrr.html#åµŒå¥—å¾ªç¯",
    "href": "1014-purrr.html#åµŒå¥—å¾ªç¯",
    "title": "purrr: å‡½æ•°å¼ç¼–ç¨‹,å½»åº•æ‘†è„±forå¾ªç¯",
    "section": "åµŒå¥—å¾ªç¯",
    "text": "åµŒå¥—å¾ªç¯\nå¦‚æœæ˜¯åµŒå¥—ç»“æ„æˆ‘ä»¬æ€ä¹ˆç”¨purrræ¥åšå‘¢ï¼Œå…¶å®ä¹Ÿå¾ˆç®€å•ã€‚æˆ‘ä»¬ç°åœ¨æ¥ç®—ä¸€ä¸‹1ï¼š10åˆ†åˆ«ä¹˜ä»¥10:20ç„¶åæ”¾åˆ°ä¸€ä¸ªæ•°å­—å‘é‡é‡Œæ€ä¹ˆå®ç°å§\n\nmap(1:10, \n        \\(x){map(10:20, \n        \\(y){x*y})}) |&gt; \n    unlist()\n\n  [1]  10  11  12  13  14  15  16  17  18  19  20  20  22  24  26  28  30  32\n [19]  34  36  38  40  30  33  36  39  42  45  48  51  54  57  60  40  44  48\n [37]  52  56  60  64  68  72  76  80  50  55  60  65  70  75  80  85  90  95\n [55] 100  60  66  72  78  84  90  96 102 108 114 120  70  77  84  91  98 105\n [73] 112 119 126 133 140  80  88  96 104 112 120 128 136 144 152 160  90  99\n [91] 108 117 126 135 144 153 162 171 180 100 110 120 130 140 150 160 170 180\n[109] 190 200\n\n\nä¸¾å¾—ä¾‹å­æ¯”è¾ƒæ²¡æœ‰æ„ä¹‰ï¼Œä½†æ˜¯å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šä¸€çª¥åµŒå¥—å¾ªç¯çš„å®ç°ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "purrr - å‡½æ•°å¼ç¼–ç¨‹"
    ]
  },
  {
    "objectID": "1014-purrr.html#æ›´å¤š",
    "href": "1014-purrr.html#æ›´å¤š",
    "title": "purrr: å‡½æ•°å¼ç¼–ç¨‹,å½»åº•æ‘†è„±forå¾ªç¯",
    "section": "æ›´å¤š",
    "text": "æ›´å¤š\npurrrå¯ä»¥å¿«æ·å®ç°å¾ˆå¤šé«˜çº§æ“ä½œï¼Œæ¯”å¦‚æ‰¹é‡å¯¼å…¥æ•°æ®ï¼Œæ‰¹é‡ç»˜å›¾ä»¥åŠæ‰¹é‡å»ºæ¨¡ç­‰ï¼Œåç»­åˆ†å¼€å†™å§ã€‚è¿™ä¸€æœŸå†™å¾—å¾ˆå®½æ³›ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±å»æ¢ç´¢æ›´å¤šæ“ä½œã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "purrr - å‡½æ•°å¼ç¼–ç¨‹"
    ]
  },
  {
    "objectID": "1013-scitb.html",
    "href": "1013-scitb.html",
    "title": "scitb-å¿«é€Ÿç”ŸæˆåŸºçº¿è¡¨ä¸€",
    "section": "",
    "text": "scitbæ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºåŸºçº¿è¡¨å¼€å‘çš„åŒ…ï¼Œç›¸è¾ƒäºtableone scitbå…·æœ‰æ›´å¥½ä½¿ç”¨ï¼Œå¯¼å‡ºæ–¹ä¾¿ï¼Œå¿«é€Ÿè®¾ç½®çš„ä¼˜ç‚¹\nCRANåº“\nä½œè€…æ•™ç¨‹",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "scitb - å¿«é€ŸåŸºçº¿è¡¨"
    ]
  },
  {
    "objectID": "1013-scitb.html#råŒ…ä»‹ç»",
    "href": "1013-scitb.html#råŒ…ä»‹ç»",
    "title": "scitb-å¿«é€Ÿç”ŸæˆåŸºçº¿è¡¨ä¸€",
    "section": "",
    "text": "scitbæ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºåŸºçº¿è¡¨å¼€å‘çš„åŒ…ï¼Œç›¸è¾ƒäºtableone scitbå…·æœ‰æ›´å¥½ä½¿ç”¨ï¼Œå¯¼å‡ºæ–¹ä¾¿ï¼Œå¿«é€Ÿè®¾ç½®çš„ä¼˜ç‚¹\nCRANåº“\nä½œè€…æ•™ç¨‹",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "scitb - å¿«é€ŸåŸºçº¿è¡¨"
    ]
  },
  {
    "objectID": "1013-scitb.html#råŒ…å®‰è£…",
    "href": "1013-scitb.html#råŒ…å®‰è£…",
    "title": "scitb-å¿«é€Ÿç”ŸæˆåŸºçº¿è¡¨ä¸€",
    "section": "RåŒ…å®‰è£…",
    "text": "RåŒ…å®‰è£…\n\ninstall.packages(\"scitb\")",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "scitb - å¿«é€ŸåŸºçº¿è¡¨"
    ]
  },
  {
    "objectID": "1013-scitb.html#råŒ…ä½¿ç”¨",
    "href": "1013-scitb.html#råŒ…ä½¿ç”¨",
    "title": "scitb-å¿«é€Ÿç”ŸæˆåŸºçº¿è¡¨ä¸€",
    "section": "RåŒ…ä½¿ç”¨",
    "text": "RåŒ…ä½¿ç”¨\n\nå¯¼å…¥ç¤ºä¾‹æ•°æ®\nå¯¼å…¥æ•°æ®prematurityï¼Œï¼šlow æ˜¯å¦æ˜¯å°äº2500gæ—©äº§ä½ä½“é‡å„¿ï¼Œage æ¯äº²çš„å¹´é¾„ï¼Œlwt æœ«æ¬¡æœˆç»ä½“é‡ï¼Œrace ç§æ—ï¼Œsmokeå­•æœŸæŠ½çƒŸï¼Œptl æ—©äº§å²ï¼ˆè®¡æ•°ï¼‰ï¼Œht æœ‰é«˜è¡€å‹ç—…å²ï¼Œui å­å®«è¿‡æ•ï¼Œftv æ—©å­•æ—¶çœ‹åŒ»ç”Ÿçš„æ¬¡æ•°bwt æ–°ç”Ÿå„¿ä½“é‡æ•°å€¼\n\nlibrary(scitb)\nlibrary(bruceR)\n\n\nbruceR (v2025.11)\nBroadly Useful Convenient and Efficient R functions\n\nPackages also loaded:\nâœ” dplyr         âœ” data.table\nâœ” tidyr         âœ” emmeans\nâœ” stringr       âœ” lmerTest\nâœ” forcats       âœ” effectsize\nâœ” ggplot2       âœ” performance\nâœ” cowplot       âœ” interactions\n\nMain functions of `bruceR`:\ncc()            Describe()  TTEST()\nadd()           Freq()      MANOVA()\n.mean()         Corr()      EMMEANS()\nset.wd()        Alpha()     PROCESS()\nimport()        EFA()       model_summary()\nprint_table()   CFA()       lavaan_summary()\n\nFor full functionality, please install all dependencies:\ninstall.packages(\"bruceR\", dep=TRUE)\n\nOnline documentation:\nhttps://psychbruce.github.io/bruceR\n\nTo use this package in publications, please cite:\nBao, H. W. S. (2021). bruceR: Broadly useful convenient and efficient R functions (Version 2025.11) [Computer software]. https://doi.org/10.32614/CRAN.package.bruceR\n\ndata &lt;- prematurity\nhead(data,5)\n\n  id low age lwt  race     smoke ptl ht ui ftv  bwt\n1 85   0  19 182 black nonsmoker   0  0  1   0 2523\n2 86   0  33 155 other nonsmoker   0  0  0   3 2551\n3 87   0  20 105 white    smoker   0  0  0   1 2557\n4 88   0  21 108 white    smoker   0  0  1   2 2594\n5 89   0  18 107 white    smoker   0  0  1   0 2600\n\n\n\n\nç”Ÿæˆæè¿°æ€§è¡¨1\n\né¦–å…ˆå®šä¹‰å˜é‡\nä¸ºä»€ä¹ˆè¿™é‡Œè¦å®šä¹‰å˜é‡ï¼Œè€Œä¸åœ¨åŸºçº¿è¡¨å‡½æ•°é‡Œç›´æ¥å¼•å…¥å­—ç¬¦å‘é‡ï¼Œè¿™æ˜¯ä¸ºäº†æœ‰è‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ã€‚å…ˆä»æ„å»ºå‡½æ•°æ¡†æ¶å¼€å§‹ï¼Œæœ€åå‡½æ•°è°ƒç”¨ï¼Œåç»­æ— è®ºæ˜¯ä¿®æ”¹å˜é‡è¿˜æ˜¯å¢åˆ å˜é‡éƒ½ä¼šå¾ˆæ¸…æ™°\n\nallVars&lt;-c(\"low\",\"age\",\"lwt\",\"race\",\"smoke\",\"ptl\",\"ht\",\"ui\",\"ftv\",\"bwt\")\nfvars&lt;-c(\"low\",\"race\",\"smoke\",\"ptl\",\"ht\",\"ui\",\"ftv\")\nstrata&lt;-c(\"bwt\")\n\n\n\nç”ŸæˆåŸºçº¿è¡¨\n\ndata_neat &lt;- data |&gt; \n  mutate(\n    race = as.factor(race),\n    smoke = as.factor(smoke)\n  )\n\ntab0&lt;-scitb1(vars=allVars,fvars=fvars,strata=strata,data=data_neat)\n\n      Min 33.33333% 66.66667%       Max \n  709.000  2598.000  3283.667  4990.000 \n\n\nStrata is treated as a continuous variable.\n\ntab0\n\n   Characteristic G.0                      G.1                     \n   \"N\"            \"63\"                     \"63\"                    \nd1 \"age\"          \"22.00 (19.50-25.00)\"    \"23.00 (19.00-28.00)\"   \nd1 \"lwt\"          \"120.00 (105.00-131.00)\" \"120.00 (109.50-132.50)\"\nd1 \"bwt\"          \"2126.24Â±394.60\"         \"2969.94Â±190.20\"        \nd2 \"low\"          \" \"                      \" \"                     \n   \"0\"            \" 4 (6.35%)\"             \"63 (100.00%)\"          \n   \"1\"            \"59 (93.65%)\"            \" 0 (0.00%)\"            \nd2 \"race\"         \" \"                      \" \"                     \n   \"black\"        \"12 (19.05%)\"            \" 8 (12.70%)\"           \n   \"other\"        \"26 (41.27%)\"            \"25 (39.68%)\"           \n   \"white\"        \"25 (39.68%)\"            \"30 (47.62%)\"           \nd2 \"smoke\"        \" \"                      \" \"                     \n   \"nonsmoker\"    \"31 (49.21%)\"            \"39 (61.90%)\"           \n   \"smoker\"       \"32 (50.79%)\"            \"24 (38.10%)\"           \nd2 \"ptl\"          \" \"                      \" \"                     \n   \"0\"            \"45 (71.43%)\"            \"58 (92.06%)\"           \n   \"1\"            \"16 (25.40%)\"            \" 4 (6.35%)\"            \n   \"2\"            \" 2 (3.17%)\"             \" 1 (1.59%)\"            \n   \"3\"            \" 0 (0.00%)\"             \" 0 (0.00%)\"            \nd2 \"ht\"           \" \"                      \" \"                     \n   \"0\"            \"56 (88.89%)\"            \"61 (96.83%)\"           \n   \"1\"            \" 7 (11.11%)\"            \" 2 (3.17%)\"            \nd2 \"ui\"           \" \"                      \" \"                     \n   \"0\"            \"47 (74.60%)\"            \"54 (85.71%)\"           \n   \"1\"            \"16 (25.40%)\"            \" 9 (14.29%)\"           \nd2 \"ftv\"          \" \"                      \" \"                     \n   \"0\"            \"37 (58.73%)\"            \"32 (50.79%)\"           \n   \"1\"            \"12 (19.05%)\"            \"15 (23.81%)\"           \n   \"2\"            \" 8 (12.70%)\"            \"13 (20.63%)\"           \n   \"3\"            \" 5 (7.94%)\"             \" 2 (3.17%)\"            \n   \"4\"            \" 1 (1.59%)\"             \" 1 (1.59%)\"            \n   \"6\"            \" 0 (0.00%)\"             \" 0 (0.00%)\"            \n   G.2                      p value \n   \"63\"                     \"\"      \nd1 \"23.00 (19.50-28.00)\"    \"0.483\" \nd1 \"131.00 (120.00-156.00)\" \"&lt;0.001\"\nd1 \"3736.68Â±317.76\"         \"&lt;0.001\"\nd2 \" \"                      \"&lt;0.001\"\n   \"63 (100.00%)\"           \" \"     \n   \" 0 (0.00%)\"             \" \"     \nd2 \" \"                      \"0.060\" \n   \" 6 (9.52%)\"             \" \"     \n   \"16 (25.40%)\"            \" \"     \n   \"41 (65.08%)\"            \" \"     \nd2 \" \"                      \"0.037\" \n   \"45 (71.43%)\"            \" \"     \n   \"18 (28.57%)\"            \" \"     \nd2 \" \"                      \"0.012\" \n   \"56 (88.89%)\"            \" \"     \n   \" 4 (6.35%)\"             \" \"     \n   \" 2 (3.17%)\"             \" \"     \n   \" 1 (1.59%)\"             \" \"     \nd2 \" \"                      \"0.154\" \n   \"60 (95.24%)\"            \" \"     \n   \" 3 (4.76%)\"             \" \"     \nd2 \" \"                      \"0.005\" \n   \"60 (95.24%)\"            \" \"     \n   \" 3 (4.76%)\"             \" \"     \nd2 \" \"                      \"0.283\" \n   \"31 (49.21%)\"            \" \"     \n   \"20 (31.75%)\"            \" \"     \n   \" 9 (14.29%)\"            \" \"     \n   \" 0 (0.00%)\"             \" \"     \n   \" 2 (3.17%)\"             \" \"     \n   \" 1 (1.59%)\"             \" \"     \n\n\n\n\nè®¾ç½®æœ‰éæ­£æ€èµ„æ–™\nè®¾ç½®éæ­£æ€åå¯ä»¥çœ‹åˆ°lwtå˜é‡æ˜¯ç”¨ç™¾åˆ†ä½æ•°è¿›è¡Œæè¿°ï¼Œåè¾¹çš„pvalueä¹Ÿè°ƒç”¨éå‚æ£€éªŒ\n\ntab2 &lt;-scitb1(vars=allVars,fvars=fvars,strata=strata,data=data_neat, nonnormal=c(\"lwt\"))\n\n      Min 33.33333% 66.66667%       Max \n  709.000  2598.000  3283.667  4990.000 \n\n\nStrata is treated as a continuous variable.\n\ntab2\n\n   Characteristic G.0                      G.1                     \n   \"N\"            \"63\"                     \"63\"                    \nd1 \"age\"          \"22.00 (19.50-25.00)\"    \"23.00 (19.00-28.00)\"   \nd1 \"lwt\"          \"120.00 (105.00-131.00)\" \"120.00 (109.50-132.50)\"\nd1 \"bwt\"          \"2126.24Â±394.60\"         \"2969.94Â±190.20\"        \nd2 \"low\"          \" \"                      \" \"                     \n   \"0\"            \" 4 (6.35%)\"             \"63 (100.00%)\"          \n   \"1\"            \"59 (93.65%)\"            \" 0 (0.00%)\"            \nd2 \"race\"         \" \"                      \" \"                     \n   \"black\"        \"12 (19.05%)\"            \" 8 (12.70%)\"           \n   \"other\"        \"26 (41.27%)\"            \"25 (39.68%)\"           \n   \"white\"        \"25 (39.68%)\"            \"30 (47.62%)\"           \nd2 \"smoke\"        \" \"                      \" \"                     \n   \"nonsmoker\"    \"31 (49.21%)\"            \"39 (61.90%)\"           \n   \"smoker\"       \"32 (50.79%)\"            \"24 (38.10%)\"           \nd2 \"ptl\"          \" \"                      \" \"                     \n   \"0\"            \"45 (71.43%)\"            \"58 (92.06%)\"           \n   \"1\"            \"16 (25.40%)\"            \" 4 (6.35%)\"            \n   \"2\"            \" 2 (3.17%)\"             \" 1 (1.59%)\"            \n   \"3\"            \" 0 (0.00%)\"             \" 0 (0.00%)\"            \nd2 \"ht\"           \" \"                      \" \"                     \n   \"0\"            \"56 (88.89%)\"            \"61 (96.83%)\"           \n   \"1\"            \" 7 (11.11%)\"            \" 2 (3.17%)\"            \nd2 \"ui\"           \" \"                      \" \"                     \n   \"0\"            \"47 (74.60%)\"            \"54 (85.71%)\"           \n   \"1\"            \"16 (25.40%)\"            \" 9 (14.29%)\"           \nd2 \"ftv\"          \" \"                      \" \"                     \n   \"0\"            \"37 (58.73%)\"            \"32 (50.79%)\"           \n   \"1\"            \"12 (19.05%)\"            \"15 (23.81%)\"           \n   \"2\"            \" 8 (12.70%)\"            \"13 (20.63%)\"           \n   \"3\"            \" 5 (7.94%)\"             \" 2 (3.17%)\"            \n   \"4\"            \" 1 (1.59%)\"             \" 1 (1.59%)\"            \n   \"6\"            \" 0 (0.00%)\"             \" 0 (0.00%)\"            \n   G.2                      p value \n   \"63\"                     \"\"      \nd1 \"23.00 (19.50-28.00)\"    \"0.483\" \nd1 \"131.00 (120.00-156.00)\" \"&lt;0.001\"\nd1 \"3736.68Â±317.76\"         \"&lt;0.001\"\nd2 \" \"                      \"&lt;0.001\"\n   \"63 (100.00%)\"           \" \"     \n   \" 0 (0.00%)\"             \" \"     \nd2 \" \"                      \"0.060\" \n   \" 6 (9.52%)\"             \" \"     \n   \"16 (25.40%)\"            \" \"     \n   \"41 (65.08%)\"            \" \"     \nd2 \" \"                      \"0.037\" \n   \"45 (71.43%)\"            \" \"     \n   \"18 (28.57%)\"            \" \"     \nd2 \" \"                      \"0.012\" \n   \"56 (88.89%)\"            \" \"     \n   \" 4 (6.35%)\"             \" \"     \n   \" 2 (3.17%)\"             \" \"     \n   \" 1 (1.59%)\"             \" \"     \nd2 \" \"                      \"0.154\" \n   \"60 (95.24%)\"            \" \"     \n   \" 3 (4.76%)\"             \" \"     \nd2 \" \"                      \"0.005\" \n   \"60 (95.24%)\"            \" \"     \n   \" 3 (4.76%)\"             \" \"     \nd2 \" \"                      \"0.283\" \n   \"31 (49.21%)\"            \" \"     \n   \"20 (31.75%)\"            \" \"     \n   \" 9 (14.29%)\"            \" \"     \n   \" 0 (0.00%)\"             \" \"     \n   \" 2 (3.17%)\"             \" \"     \n   \" 1 (1.59%)\"             \" \"     \n\n\n\n\n\nè¿ç»­å˜é‡å¿«é€Ÿåˆ†å±‚æè¿°\nè¾“å‡º1å¯ä»¥çœ‹å‡ºå¹´é¾„çš„è‡ªåŠ¨åˆ†å±‚è®°å½•ï¼Œè¡¨æ˜ä»14åˆ°20åˆ°25åˆ°45è¿›è¡Œäº†åˆ†å±‚\nå¦‚æœæƒ³è¦ç”Ÿæˆå…¶å®ƒåˆ†å±‚æ•°ï¼Œè®¾ç½®å‚æ•° num = n\n\n# allvaråˆ ä¸åˆ é™¤å¹´é¾„éƒ½å¯ä»¥\n\nallVars3 &lt;-c(\"race\", \"lwt\",\"smoke\", \"ptl\", \"ht\", \"ui\",\"ftv\", \"bwt\")\nfvars3 &lt;-c(\"smoke\",\"ht\",\"ui\",\"race\")\nstrata3 &lt;- \"age\"\n\ntab3 &lt;-scitb1(vars=allVars3,fvars=fvars3,strata=strata3,data=data_neat)\n\n      Min 33.33333% 66.66667%       Max \n       14        20        25        45 \n\n\nStrata is treated as a continuous variable.\n\ntab3\n\n   Characteristic G.0                      G.1                     \n   \"N\"            \"51\"                     \"69\"                    \nd1 \"lwt\"          \"119.00 (106.00-135.00)\" \"121.00 (110.00-132.00)\"\nd1 \"ptl\"          \"0.00 (0.00-0.00)\"       \"0.00 (0.00-0.00)\"      \nd1 \"ftv\"          \"0.00 (0.00-1.00)\"       \"0.00 (0.00-1.00)\"      \nd1 \"bwt\"          \"2974.08Â±612.51\"         \"2921.42Â±697.85\"        \nd2 \"smoke\"        \" \"                      \" \"                     \n   \"nonsmoker\"    \"28 (54.90%)\"            \"44 (63.77%)\"           \n   \"smoker\"       \"23 (45.10%)\"            \"25 (36.23%)\"           \nd2 \"ht\"           \" \"                      \" \"                     \n   \"0\"            \"48 (94.12%)\"            \"64 (92.75%)\"           \n   \"1\"            \" 3 (5.88%)\"             \" 5 (7.25%)\"            \nd2 \"ui\"           \" \"                      \" \"                     \n   \"0\"            \"43 (84.31%)\"            \"58 (84.06%)\"           \n   \"1\"            \" 8 (15.69%)\"            \"11 (15.94%)\"           \nd2 \"race\"         \" \"                      \" \"                     \n   \"black\"        \"10 (19.61%)\"            \"10 (14.49%)\"           \n   \"other\"        \"18 (35.29%)\"            \"27 (39.13%)\"           \n   \"white\"        \"23 (45.10%)\"            \"32 (46.38%)\"           \n   G.2                      p value\n   \"69\"                     \"\"     \nd1 \"130.00 (115.00-153.00)\" \"0.086\"\nd1 \"0.00 (0.00-0.00)\"       \"0.171\"\nd1 \"1.00 (0.00-2.00)\"       \"0.011\"\nd1 \"2945.13Â±839.82\"         \"0.927\"\nd2 \" \"                      \"0.587\"\n   \"43 (62.32%)\"            \" \"    \n   \"26 (37.68%)\"            \" \"    \nd2 \" \"                      \"0.929\"\n   \"65 (94.20%)\"            \" \"    \n   \" 4 (5.80%)\"             \" \"    \nd2 \" \"                      \"0.873\"\n   \"60 (86.96%)\"            \" \"    \n   \" 9 (13.04%)\"            \" \"    \nd2 \" \"                      \"0.320\"\n   \" 6 (8.70%)\"             \" \"    \n   \"22 (31.88%)\"            \" \"    \n   \"41 (59.42%)\"            \" \"    \n\n\n\n\nä¿å­˜ç»“æœ\n\nwrite.csv(tab0,file= \"01-attch\\\\10\\\\data.csv\",row.names = F, \n    fileEncoding = \"gbk\")\n\nä¿å­˜å‡ºæ¥æ˜¯ä¸‹å›¾ï¼Œå¤åˆ¶åˆ°wordæ”¹æ”¹å°±èƒ½ç”¨",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "scitb - å¿«é€ŸåŸºçº¿è¡¨"
    ]
  },
  {
    "objectID": "1013-scitb.html#æ€»ç»“",
    "href": "1013-scitb.html#æ€»ç»“",
    "title": "scitb-å¿«é€Ÿç”ŸæˆåŸºçº¿è¡¨ä¸€",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nä½¿ç”¨ä½“éªŒï¼šè‡ªå®šä¹‰åº¦ï¼Œç»“æœå±•ç¤ºç­‰ä¸å¦‚comparegroupsï¼Œä½†æ˜¯èƒœåœ¨å‚æ•°ç®€å•ï¼Œåœ¨æœŸåˆŠæ²¡é‚£ä¹ˆé«˜è¦æ±‚å’Œå¹³æ—¶å±•ç¤ºå¯ä»¥ç”¨",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "scitb - å¿«é€ŸåŸºçº¿è¡¨"
    ]
  },
  {
    "objectID": "1011-rpac_brucer.html",
    "href": "1011-rpac_brucer.html",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "",
    "text": "bruceR å…¨ç§° â€œBRoadly Useful Convenient and Efficient R functionsâ€ï¼Œç”±åŒ…å¯’å´éœœåšå£«å¼€å‘ï¼Œæ˜¯ä¸€ä¸ªé›†æˆäº†ä¼—å¤šå®ç”¨åŠŸèƒ½çš„ R åŒ…ï¼Œä¸“ä¸ºç§‘ç ”æ•°æ®åˆ†æè®¾è®¡ã€‚\né“¾æ¥ï¼šCRAN | GitHub | ä¸­æ–‡æ•™ç¨‹\n\n\nbruceR æ¶µç›–äº†æ•°æ®åˆ†æçš„å®Œæ•´æµç¨‹ï¼š\n\n\n\n\n\n\n\n\næ¨¡å—\nåŠŸèƒ½\nä¸»è¦å‡½æ•°\n\n\n\n\nåŸºç¡€ç¼–ç¨‹\nè·¯å¾„è®¾ç½®ã€æ•°æ®å¯¼å…¥å¯¼å‡ºã€è¡¨æ ¼æ‰“å°\nset.wd(), import(), export(), print_table()\n\n\næ•°æ®è®¡ç®—\né‡è¡¨è®¡ç®—ã€åå‘è®¡åˆ†ã€é‡ç¼–ç \nMEAN(), SUM(), RECODE(), RESCALE()\n\n\nä¿¡æ•ˆåº¦åˆ†æ\nä¿¡åº¦åˆ†æã€å› å­åˆ†æ\nAlpha(), EFA(), PCA(), CFA()\n\n\næè¿°ç»Ÿè®¡\næè¿°ç»Ÿè®¡ã€é¢‘ç‡åˆ†æã€ç›¸å…³åˆ†æ\nDescribe(), Freq(), Corr()\n\n\næ–¹å·®åˆ†æ\ntæ£€éªŒã€ANOVAã€ç®€å•æ•ˆåº”ã€äº‹åæ¯”è¾ƒ\nTTEST(), MANOVA(), EMMEANS()\n\n\nå›å½’æ¨¡å‹\næ¨¡å‹æ±‡æ€»ã€å¤šå±‚æ¨¡å‹\nmodel_summary(), HLM_summary()\n\n\nä¸­ä»‹è°ƒèŠ‚\nPROCESS å®\nPROCESS(), med_summary()\n\n\n\n\n\n\nåŠ è½½ bruceR æ—¶ä¼šè‡ªåŠ¨åŠ è½½å¸¸ç”¨åŒ…ï¼š\n\næ•°æ®å¤„ç†ï¼šdata.table, dplyr, tidyr, stringr\nå¯è§†åŒ–ï¼šggplot2\nç»Ÿè®¡åˆ†æï¼špsych, emmeans, lmerTest, effectsize, performance",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·"
    ]
  },
  {
    "objectID": "1011-rpac_brucer.html#råŒ…ä»‹ç»",
    "href": "1011-rpac_brucer.html#råŒ…ä»‹ç»",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "",
    "text": "bruceR å…¨ç§° â€œBRoadly Useful Convenient and Efficient R functionsâ€ï¼Œç”±åŒ…å¯’å´éœœåšå£«å¼€å‘ï¼Œæ˜¯ä¸€ä¸ªé›†æˆäº†ä¼—å¤šå®ç”¨åŠŸèƒ½çš„ R åŒ…ï¼Œä¸“ä¸ºç§‘ç ”æ•°æ®åˆ†æè®¾è®¡ã€‚\né“¾æ¥ï¼šCRAN | GitHub | ä¸­æ–‡æ•™ç¨‹\n\n\nbruceR æ¶µç›–äº†æ•°æ®åˆ†æçš„å®Œæ•´æµç¨‹ï¼š\n\n\n\n\n\n\n\n\næ¨¡å—\nåŠŸèƒ½\nä¸»è¦å‡½æ•°\n\n\n\n\nåŸºç¡€ç¼–ç¨‹\nè·¯å¾„è®¾ç½®ã€æ•°æ®å¯¼å…¥å¯¼å‡ºã€è¡¨æ ¼æ‰“å°\nset.wd(), import(), export(), print_table()\n\n\næ•°æ®è®¡ç®—\né‡è¡¨è®¡ç®—ã€åå‘è®¡åˆ†ã€é‡ç¼–ç \nMEAN(), SUM(), RECODE(), RESCALE()\n\n\nä¿¡æ•ˆåº¦åˆ†æ\nä¿¡åº¦åˆ†æã€å› å­åˆ†æ\nAlpha(), EFA(), PCA(), CFA()\n\n\næè¿°ç»Ÿè®¡\næè¿°ç»Ÿè®¡ã€é¢‘ç‡åˆ†æã€ç›¸å…³åˆ†æ\nDescribe(), Freq(), Corr()\n\n\næ–¹å·®åˆ†æ\ntæ£€éªŒã€ANOVAã€ç®€å•æ•ˆåº”ã€äº‹åæ¯”è¾ƒ\nTTEST(), MANOVA(), EMMEANS()\n\n\nå›å½’æ¨¡å‹\næ¨¡å‹æ±‡æ€»ã€å¤šå±‚æ¨¡å‹\nmodel_summary(), HLM_summary()\n\n\nä¸­ä»‹è°ƒèŠ‚\nPROCESS å®\nPROCESS(), med_summary()\n\n\n\n\n\n\nåŠ è½½ bruceR æ—¶ä¼šè‡ªåŠ¨åŠ è½½å¸¸ç”¨åŒ…ï¼š\n\næ•°æ®å¤„ç†ï¼šdata.table, dplyr, tidyr, stringr\nå¯è§†åŒ–ï¼šggplot2\nç»Ÿè®¡åˆ†æï¼špsych, emmeans, lmerTest, effectsize, performance",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·"
    ]
  },
  {
    "objectID": "1011-rpac_brucer.html#råŒ…å®‰è£…",
    "href": "1011-rpac_brucer.html#råŒ…å®‰è£…",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "RåŒ…å®‰è£…",
    "text": "RåŒ…å®‰è£…\n\n# æ–¹æ³•1ï¼šä» CRAN å®‰è£…ï¼ˆæ¨èï¼‰\ninstall.packages(\"bruceR\", dep = TRUE)\n\n# æ–¹æ³•2ï¼šä» GitHub å®‰è£…æœ€æ–°ç‰ˆ\ninstall.packages(\"devtools\")\ndevtools::install_github(\"psychbruce/bruceR\", dep = TRUE, force = TRUE)\n\n\nlibrary(bruceR)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·"
    ]
  },
  {
    "objectID": "1011-rpac_brucer.html#åŸºç¡€ç¼–ç¨‹åŠŸèƒ½",
    "href": "1011-rpac_brucer.html#åŸºç¡€ç¼–ç¨‹åŠŸèƒ½",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "åŸºç¡€ç¼–ç¨‹åŠŸèƒ½",
    "text": "åŸºç¡€ç¼–ç¨‹åŠŸèƒ½\n\nset.wd()ï¼šæ™ºèƒ½è®¾ç½®å·¥ä½œç›®å½•\nè‡ªåŠ¨å°†å·¥ä½œç›®å½•è®¾ç½®ä¸ºå½“å‰è„šæœ¬æ‰€åœ¨è·¯å¾„ï¼š\n\nset.wd()\n\n\n\nimport() / export()ï¼šä¸‡èƒ½æ•°æ®å¯¼å…¥å¯¼å‡º\næ”¯æŒå‡ ä¹æ‰€æœ‰å¸¸è§æ•°æ®æ ¼å¼ï¼Œè‡ªåŠ¨è¯†åˆ«æ–‡ä»¶ç±»å‹ï¼š\n\n# æ”¯æŒçš„æ ¼å¼ï¼š\n# - æ–‡æœ¬ï¼š.txt, .csv, .tsv\n# - Excelï¼š.xls, .xlsx\n# - SPSSï¼š.sav\n# - Stataï¼š.dta\n# - Rå¯¹è±¡ï¼š.rda, .rds, .RData\n\n# å¯¼å…¥æ•°æ®\ndata &lt;- import(\"data.xlsx\")\ndata &lt;- import(\"data.sav\")\ndata &lt;- import(\"data.dta\")\n\n# å¯¼å‡ºæ•°æ®\nexport(data, file = \"output.xlsx\")\nexport(data, file = \"output.csv\")\n\n\n\ncc()ï¼šå¿«é€Ÿåˆ›å»ºå­—ç¬¦å‘é‡\næ¯” c() æ›´ç®€æ´ï¼Œæ— éœ€å¼•å·ï¼š\n\n# ä¼ ç»Ÿå†™æ³•\nc(\"age\", \"gender\", \"education\")\n\n[1] \"age\"       \"gender\"    \"education\"\n\n# bruceR å†™æ³•\ncc(\"age, gender, education\")\n\n[1] \"age\"       \"gender\"    \"education\"\n\n\n\n\nprint_table()ï¼šç”Ÿæˆä¸‰çº¿è¡¨\n\nsummary_data &lt;- data.frame(\n  Variable = c(\"Age\", \"Income\", \"Score\"),\n  Mean = c(35.2, 5000, 78.5),\n  SD = c(8.3, 1200, 12.1),\n  N = c(100, 100, 100)\n)\n\nprint_table(summary_data)\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n   Variable     Mean       SD       N\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n1    Age      35.200    8.300 100.000\n2    Income 5000.000 1200.000 100.000\n3    Score    78.500   12.100 100.000\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·"
    ]
  },
  {
    "objectID": "1011-rpac_brucer.html#æ•°æ®è®¡ç®—åŠŸèƒ½",
    "href": "1011-rpac_brucer.html#æ•°æ®è®¡ç®—åŠŸèƒ½",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "æ•°æ®è®¡ç®—åŠŸèƒ½",
    "text": "æ•°æ®è®¡ç®—åŠŸèƒ½\n\nMEAN() / SUM()ï¼šæ¨ªå‘è®¡ç®—ï¼ˆæ”¯æŒåå‘è®¡åˆ†ï¼‰\nå¿ƒç†å­¦é‡è¡¨ç»å¸¸éœ€è¦è®¡ç®—å¤šä¸ªé¢˜ç›®çš„å‡å€¼æˆ–æ€»åˆ†ï¼Œå¹¶å¤„ç†åå‘è®¡åˆ†ï¼š\n\n# åˆ›å»ºæ¨¡æ‹Ÿé—®å·æ•°æ®ï¼ˆ5ç‚¹é‡è¡¨ï¼Œå…±6é¢˜ï¼‰\nset.seed(42)\nquestionnaire &lt;- data.frame(\n  id = 1:5,\n  q1 = sample(1:5, 5, replace = TRUE),\n  q2 = sample(1:5, 5, replace = TRUE),\n  q3 = sample(1:5, 5, replace = TRUE),\n  q4 = sample(1:5, 5, replace = TRUE),\n  q5 = sample(1:5, 5, replace = TRUE),\n  q6 = sample(1:5, 5, replace = TRUE)\n)\nquestionnaire\n\n  id q1 q2 q3 q4 q5 q6\n1  1  1  4  1  3  5  4\n2  2  5  2  5  1  5  3\n3  3  1  2  4  1  5  2\n4  4  1  1  2  3  4  1\n5  5  2  4  2  4  2  2\n\n# è®¡ç®—å‡å€¼ï¼ˆq3ã€q6 åå‘è®¡åˆ†ï¼Œé‡è¡¨èŒƒå›´1-5ï¼‰\nquestionnaire$score_mean &lt;- MEAN(\n  questionnaire, \n  varrange = \"q1:q6\",\n  rev = c(\"q3\", \"q6\"),\n  likert = 1:5\n)\n\n# è®¡ç®—æ€»åˆ†\nquestionnaire$score_sum &lt;- SUM(\n  questionnaire, \n  varrange = \"q1:q6\",\n  rev = c(\"q3\", \"q6\"),\n  likert = 1:5\n)\n\nquestionnaire[, c(\"id\", \"score_mean\", \"score_sum\")]\n\n  id score_mean score_sum\n1  1   3.333333        20\n2  2   2.833333        17\n3  3   2.500000        15\n4  4   3.000000        18\n5  5   3.333333        20\n\n\n\n\nRECODE()ï¼šå˜é‡é‡ç¼–ç \n\nd &lt;- data.frame(age = c(18, 25, 35, 45, 55, 65, 75))\n\nd$age_group &lt;- RECODE(d$age, \n  \"lo:29 = 'é’å¹´'; \n   30:59 = 'ä¸­å¹´'; \n   60:hi = 'è€å¹´'\"\n)\nd\n\n  age age_group\n1  18      é’å¹´\n2  25      é’å¹´\n3  35      ä¸­å¹´\n4  45      ä¸­å¹´\n5  55      ä¸­å¹´\n6  65      è€å¹´\n7  75      è€å¹´\n\n\n\n\nRESCALE()ï¼šå˜é‡æ ‡å‡†åŒ–\n\nscores &lt;- c(2, 3, 4, 5, 6, 7, 8)\nRESCALE(scores, to = 0:100)\n\n[1]   0.00000  16.66667  33.33333  50.00000  66.66667  83.33333 100.00000",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·"
    ]
  },
  {
    "objectID": "1011-rpac_brucer.html#ä¿¡åº¦ä¸å› å­åˆ†æ",
    "href": "1011-rpac_brucer.html#ä¿¡åº¦ä¸å› å­åˆ†æ",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "ä¿¡åº¦ä¸å› å­åˆ†æ",
    "text": "ä¿¡åº¦ä¸å› å­åˆ†æ\n\nAlpha()ï¼šä¿¡åº¦åˆ†æ\n\ndata(\"bfi\", package = \"psych\")\n\n# Alpha éœ€è¦æŒ‡å®šæ•°æ®å’Œå˜é‡å\nAlpha(bfi, var = \"A\", items = 1:5)\n\n\nReliability Analysis\n\nSummary:\nTotal Items: 5\nScale Range: 1 ~ 6\nTotal Cases: 2800\nValid Cases: 2709 (96.8%)\n\nScale Statistics:\nMean = 4.208\nS.D. = 0.735\nCronbachâ€™s Î± = 0.431\nMcDonaldâ€™s Ï‰ = 0.592\n\nWarning: Scale reliability is low. You may check item codings.\nItem A1 correlates negatively with the scale and may be reversed.\nYou can specify this argument: rev=c(\"A1\")\n\nItem Statistics (Cronbachâ€™s Î± If Item Deleted):\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n     Mean    S.D. Item-Rest Cor. Cronbachâ€™s Î±\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nA1  2.412 (1.405)         -0.311        0.718\nA2  4.797 (1.176)          0.372        0.278\nA3  4.599 (1.305)          0.478        0.174\nA4  4.682 (1.486)          0.365        0.252\nA5  4.551 (1.262)          0.448        0.207\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nItem-Rest Cor. = Corrected Item-Total Correlation\n\n\n\n\nEFA()ï¼šæ¢ç´¢æ€§å› å­åˆ†æ\n\ndata(\"bfi\", package = \"psych\")\n\n# æ¢ç´¢æ€§å› å­åˆ†æï¼šä½¿ç”¨ var + items æ ¼å¼\n# åˆ†æå¤–å‘æ€§(E)é‡è¡¨çš„5ä¸ªé¢˜ç›®\nEFA(bfi, var = \"E\", items = 1:5, nfactors = 2, plot.scree = FALSE)\n\n\nPrincipal Component Analysis\n\nSummary:\nTotal Items: 5\nScale Range: 1 ~ 6\nTotal Cases: 2800\nValid Cases: 2713 (96.9%)\n\nExtraction Method:\n- Principal Component Analysis\nRotation Method:\n- Varimax (with Kaiser Normalization)\n\nKMO and Bartlett's Test:\n- Kaiser-Meyer-Olkin (KMO) Measure of Sampling Adequacy: MSA = 0.799\n- Bartlett's Test of Sphericity: Approx. Ï‡Â²(10) = 3011.40, p &lt; 1e-99 ***\n\nTotal Variance Explained:\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n             Eigenvalue Variance % Cumulative % SS Loading Variance % Cumulative %\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nComponent 1       2.565     51.298       51.298      1.884     37.680       37.680\nComponent 2       0.768     15.368       66.666      1.449     28.986       66.666\nComponent 3       0.643     12.851       79.517                                   \nComponent 4       0.561     11.211       90.728                                   \nComponent 5       0.464      9.272      100.000                                   \nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nComponent Loadings (Rotated) (Sorted by Size):\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n       RC1    RC2 Communality\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nE1   0.812 -0.098       0.668\nE2   0.752 -0.304       0.658\nE4  -0.736  0.290       0.625\nE5  -0.145  0.860       0.761\nE3  -0.312  0.723       0.620\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nCommunality = Sum of Squared (SS) Factor Loadings\n(Uniqueness = 1 - Communality)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·"
    ]
  },
  {
    "objectID": "1011-rpac_brucer.html#æè¿°ç»Ÿè®¡ä¸ç›¸å…³åˆ†æ",
    "href": "1011-rpac_brucer.html#æè¿°ç»Ÿè®¡ä¸ç›¸å…³åˆ†æ",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "æè¿°ç»Ÿè®¡ä¸ç›¸å…³åˆ†æ",
    "text": "æè¿°ç»Ÿè®¡ä¸ç›¸å…³åˆ†æ\n\nDescribe()ï¼šæè¿°ç»Ÿè®¡\n\nDescribe(iris[, 1:4])\n\nDescriptive Statistics:\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n                N Mean   SD | Median  Min  Max Skewness Kurtosis\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nSepal.Length  150 5.84 0.83 |   5.80 4.30 7.90     0.31    -0.61\nSepal.Width   150 3.06 0.44 |   3.00 2.00 4.40     0.31     0.14\nPetal.Length  150 3.76 1.77 |   4.35 1.00 6.90    -0.27    -1.42\nPetal.Width   150 1.20 0.76 |   1.30 0.10 2.50    -0.10    -1.36\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\n\n\n\nFreq()ï¼šé¢‘ç‡åˆ†æ\n\nFreq(iris$Species)\n\nFrequency Statistics:\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n             N    %\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nsetosa      50 33.3\nversicolor  50 33.3\nvirginica   50 33.3\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nTotal N = 150\n\n\n\n\nCorr()ï¼šç›¸å…³åˆ†æ\n\nCorr(iris[, 1:4])\n\nPearson's r and 95% confidence intervals:\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n                               r       [95% CI]     p       N\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nSepal.Length-Sepal.Width   -0.12 [-0.27,  0.04]  .152     150\nSepal.Length-Petal.Length   0.87 [ 0.83,  0.91] &lt;.001 *** 150\nSepal.Length-Petal.Width    0.82 [ 0.76,  0.86] &lt;.001 *** 150\nSepal.Width-Petal.Length   -0.43 [-0.55, -0.29] &lt;.001 *** 150\nSepal.Width-Petal.Width    -0.37 [-0.50, -0.22] &lt;.001 *** 150\nPetal.Length-Petal.Width    0.96 [ 0.95,  0.97] &lt;.001 *** 150\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·"
    ]
  },
  {
    "objectID": "1011-rpac_brucer.html#ç»Ÿè®¡æ£€éªŒ",
    "href": "1011-rpac_brucer.html#ç»Ÿè®¡æ£€éªŒ",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "ç»Ÿè®¡æ£€éªŒ",
    "text": "ç»Ÿè®¡æ£€éªŒ\n\nTTEST()ï¼štæ£€éªŒ\n\n# ç‹¬ç«‹æ ·æœ¬ t æ£€éªŒï¼ˆéœ€è¦ä¸¤æ°´å¹³å› å­ï¼‰\niris_subset &lt;- iris[iris$Species %in% c(\"versicolor\", \"virginica\"), ]\niris_subset$Species &lt;- droplevels(iris_subset$Species)\n\nTTEST(iris_subset, y = \"Sepal.Length\", x = \"Species\")\n\n\nIndependent-Samples t-test\n\nHypothesis: two-sided (Î¼2 - Î¼1 â‰  0)\n\nDescriptives:\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n     Variable  Factor      Level  N Mean (S.D.)\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n Sepal.Length Species versicolor 50 5.94 (0.52)\n Sepal.Length Species virginica  50 6.59 (0.64)\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nLeveneâ€™s test for homogeneity of variance:\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n                                                Leveneâ€™s F df1 df2     p    \nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nSepal.Length: Species (virginica - versicolor)        1.42   1  98  .236    \nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nNote: H0 = equal variance (homoscedasticity).\nIf significant (violation of the assumption),\nthen you should better set `var.equal=FALSE`.\n\nResults of t-test:\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n                                                   t df     p     Difference [95% CI] Cohenâ€™s d [95% CI]     BF10\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nSepal.Length: Species (virginica - versicolor)  5.63 98 &lt;.001 ***   0.65 [0.42, 0.88]  1.13 [0.73, 1.52] 7.04e+04\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\n\n\n\nMANOVA()ï¼šå¤šå› ç´ æ–¹å·®åˆ†æ\n\nMANOVA(data = npk, dv = \"yield\", between = c(\"N\", \"P\", \"K\"))\n\n\n====== ANOVA (Between-Subjects Design) ======\n\nDescriptives:\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n \"N\" \"P\" \"K\"   Mean    S.D. n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  N0  P0  K0 51.433 (4.600) 3\n  N0  P0  K1 52.000 (5.635) 3\n  N0  P1  K0 54.333 (9.411) 3\n  N0  P1  K1 50.500 (2.364) 3\n  N1  P0  K0 63.767 (5.086) 3\n  N1  P0  K1 54.667 (4.216) 3\n  N1  P1  K0 57.933 (5.478) 3\n  N1  P1  K1 54.367 (5.006) 3\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nTotal sample size: N = 24\n\nANOVA Table:\nDependent variable(s):      yield\nBetween-subjects factor(s): N, P, K\nWithin-subjects factor(s):  â€“\nCovariate(s):               â€“\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n                MS    MSE df1 df2     F     p     Î·Â²p [90% CI of Î·Â²p]  Î·Â²G\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nN          189.282 30.724   1  16 6.161  .025 *     .278 [.024, .529] .278\nP            8.402 30.724   1  16 0.273  .608       .017 [.000, .220] .017\nK           95.202 30.724   1  16 3.099  .097 .     .162 [.000, .427] .162\nN * P       21.282 30.724   1  16 0.693  .418       .041 [.000, .277] .041\nN * K       33.135 30.724   1  16 1.078  .314       .063 [.000, .312] .063\nP * K        0.482 30.724   1  16 0.016  .902       .001 [.000, .078] .001\nN * P * K   37.002 30.724   1  16 1.204  .289       .070 [.000, .322] .070\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nMSE = mean square error (the residual variance of the linear model)\nÎ·Â²p = partial eta-squared = SS / (SS + SSE) = F * df1 / (F * df1 + df2)\nÏ‰Â²p = partial omega-squared = (F - 1) * df1 / (F * df1 + df2 + 1)\nÎ·Â²G = generalized eta-squared (see Olejnik & Algina, 2003)\nCohenâ€™s fÂ² = Î·Â²p / (1 - Î·Â²p)\n\nLeveneâ€™s Test for Homogeneity of Variance:\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n           Leveneâ€™s F df1 df2     p    \nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nDV: yield       0.986   7  16  .475    \nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\n\n\n\nEMMEANS()ï¼šè¾¹é™…å‡å€¼ä¸äº‹åæ¯”è¾ƒ\n\nresult &lt;- MANOVA(npk, dv = \"yield\", between = c(\"N\", \"P\"))\n\n\n====== ANOVA (Between-Subjects Design) ======\n\nDescriptives:\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n \"N\" \"P\"   Mean    S.D. n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  N0  P0 51.717 (4.611) 6\n  N0  P1 52.417 (6.486) 6\n  N1  P0 59.217 (6.504) 6\n  N1  P1 56.150 (5.084) 6\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nTotal sample size: N = 24\n\nANOVA Table:\nDependent variable(s):      yield\nBetween-subjects factor(s): N, P\nWithin-subjects factor(s):  â€“\nCovariate(s):               â€“\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n            MS    MSE df1 df2     F     p     Î·Â²p [90% CI of Î·Â²p]  Î·Â²G\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nN      189.282 32.870   1  20 5.758  .026 *     .224 [.017, .460] .224\nP        8.402 32.870   1  20 0.256  .619       .013 [.000, .181] .013\nN * P   21.282 32.870   1  20 0.647  .430       .031 [.000, .230] .031\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nMSE = mean square error (the residual variance of the linear model)\nÎ·Â²p = partial eta-squared = SS / (SS + SSE) = F * df1 / (F * df1 + df2)\nÏ‰Â²p = partial omega-squared = (F - 1) * df1 / (F * df1 + df2 + 1)\nÎ·Â²G = generalized eta-squared (see Olejnik & Algina, 2003)\nCohenâ€™s fÂ² = Î·Â²p / (1 - Î·Â²p)\n\nLeveneâ€™s Test for Homogeneity of Variance:\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n           Leveneâ€™s F df1 df2     p    \nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nDV: yield       0.160   3  20  .922    \nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nEMMEANS(result, effect = \"N\")\n\n------ EMMEANS (effect = \"N\") ------\n\nJoint Tests of \"N\":\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n Effect df1 df2     F     p     Î·Â²p [90% CI of Î·Â²p]\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  N       1  20 5.758  .026 *     .224 [.017, .460]\n  P       1  20 0.256  .619       .013 [.000, .181]\n  N * P   1  20 0.647  .430       .031 [.000, .230]\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nNote. Simple effects of repeated measures with 3 or more levels\nare different from the results obtained with SPSS MANOVA syntax.\n\nUnivariate Tests of \"N\":\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n           Sum of Squares df Mean Square     F     p    \nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nMean: \"N\"         189.282  1     189.282 5.758  .026 *  \nResiduals         657.400 20      32.870                \nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nNote. Identical to the results obtained with SPSS GLM EMMEANS syntax.\n\nEstimated Marginal Means of \"N\":\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n \"N\"   Mean [95% CI of Mean]    S.E.\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  N0 52.067 [48.614, 55.519] (1.655)\n  N1 57.683 [54.231, 61.136] (1.655)\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nPairwise Comparisons of \"N\":\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n Contrast Estimate    S.E. df     t     p     Cohenâ€™s d [95% CI of d]\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  N1 - N0    5.617 (2.341) 20 2.400  .026 *      0.980 [0.128, 1.831]\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nPooled SD for computing Cohenâ€™s d: 5.733\nResults are averaged over the levels of: P\nNo need to adjust p values.\n\nDisclaimer:\nBy default, pooled SD is Root Mean Square Error (RMSE).\nThere is much disagreement on how to compute Cohenâ€™s d.\nYou are completely responsible for setting `sd.pooled`.\nYou might also use `effectsize::t_to_d()` to compute d.",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·"
    ]
  },
  {
    "objectID": "1011-rpac_brucer.html#å›å½’åˆ†æ",
    "href": "1011-rpac_brucer.html#å›å½’åˆ†æ",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "å›å½’åˆ†æ",
    "text": "å›å½’åˆ†æ\n\nmodel_summary()ï¼šæ¨¡å‹æ±‡æ€»\n\nlm1 &lt;- lm(Sepal.Length ~ Sepal.Width, data = iris)\nlm2 &lt;- lm(Sepal.Length ~ Sepal.Width + Petal.Length, data = iris)\nlm3 &lt;- lm(Sepal.Length ~ Sepal.Width + Petal.Length + Petal.Width, data = iris)\n\n# å¤šä¸ªæ¨¡å‹å¯¹æ¯”\nmodel_summary(list(lm1, lm2, lm3))\n\n\nModel Summary\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n              (1) Sepal.Length  (2) Sepal.Length  (3) Sepal.Length\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n(Intercept)     6.526 ***         2.249 ***         1.856 ***     \n               (0.479)           (0.248)           (0.251)        \nSepal.Width    -0.223             0.596 ***         0.651 ***     \n               (0.155)           (0.069)           (0.067)        \nPetal.Length                      0.472 ***         0.709 ***     \n                                 (0.017)           (0.057)        \nPetal.Width                                        -0.556 ***     \n                                                   (0.128)        \nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nR^2             0.014             0.840             0.859         \nAdj. R^2        0.007             0.838             0.856         \nNum. obs.     150               150               150             \nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nNote. * p &lt; .05, ** p &lt; .01, *** p &lt; .001.\n\n# è¾“å‡ºæ ‡å‡†åŒ–ç³»æ•°\nmodel_summary(lm3, std = TRUE)\n\n\nModel Summary\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n              (1) Sepal.Length\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nSepal.Width      .343 ***     \n                (.035)        \nPetal.Length    1.512 ***     \n                (.121)        \nPetal.Width     -.512 ***     \n                (.117)        \nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nR^2              .859         \nAdj. R^2         .856         \nNum. obs.     150             \nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nNote. * p &lt; .05, ** p &lt; .01, *** p &lt; .001.\n\n# Check for Multicollinearity\n\nLow Correlation\n\n        Term  VIF     VIF 95% CI adj. VIF Tolerance Tolerance 95% CI\n Sepal.Width 1.27 [ 1.11,  1.65]     1.13      0.79     [0.61, 0.90]\n\nHigh Correlation\n\n         Term   VIF     VIF 95% CI adj. VIF Tolerance Tolerance 95% CI\n Petal.Length 15.10 [11.27, 20.36]     3.89      0.07     [0.05, 0.09]\n  Petal.Width 14.23 [10.63, 19.19]     3.77      0.07     [0.05, 0.09]",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·"
    ]
  },
  {
    "objectID": "1011-rpac_brucer.html#ä¸­ä»‹ä¸è°ƒèŠ‚åˆ†æ",
    "href": "1011-rpac_brucer.html#ä¸­ä»‹ä¸è°ƒèŠ‚åˆ†æ",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "ä¸­ä»‹ä¸è°ƒèŠ‚åˆ†æ",
    "text": "ä¸­ä»‹ä¸è°ƒèŠ‚åˆ†æ\n\nPROCESS()ï¼šä¸­ä»‹è°ƒèŠ‚åˆ†æ\n\nset.seed(123)\nn &lt;- 200\nmediation_data &lt;- data.frame(\n  X = rnorm(n),\n  M = rnorm(n),\n  Y = rnorm(n)\n)\nmediation_data$M &lt;- 0.5 * mediation_data$X + rnorm(n, sd = 0.5)\nmediation_data$Y &lt;- 0.4 * mediation_data$M + 0.3 * mediation_data$X + rnorm(n, sd = 0.5)\n\n# ç®€å•ä¸­ä»‹æ¨¡å‹\nPROCESS(mediation_data, y = \"Y\", x = \"X\", meds = \"M\", \n        ci = \"boot\", nsim = 100)\n\n\n****************** PART 1. Regression Model Summary ******************\n\nPROCESS Model ID : 4\nModel Type : Simple Mediation\n-    Outcome (Y) : Y\n-  Predictor (X) : X\n-  Mediators (M) : M\n- Moderators (W) : -\n- Covariates (C) : -\n-   HLM Clusters : -\n\nAll numeric predictors have been grand-mean centered.\n(For details, please see the help page of PROCESS.)\n\nFormula of Mediator:\n-    M ~ X\nFormula of Outcome:\n-    Y ~ X + M\n\nCAUTION:\n  Fixed effect (coef.) of a predictor involved in an interaction\n  denotes its \"simple effect/slope\" at the other predictor = 0.\n  Only when all predictors in an interaction are mean-centered\n  can the fixed effect be interpreted as \"main effect\"!\n  \nModel Summary\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n             (1) Y        (2) M        (3) Y      \nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n(Intercept)    0.010       -0.015        0.010    \n              (0.039)      (0.036)      (0.037)   \nX              0.462 ***    0.475 ***    0.302 ***\n              (0.041)      (0.039)      (0.052)   \nM                                        0.336 ***\n                                        (0.072)   \nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nR^2            0.391        0.434        0.452    \nAdj. R^2       0.388        0.431        0.446    \nNum. obs.    200          200          200        \nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nNote. * p &lt; .05, ** p &lt; .01, *** p &lt; .001.\n\n************ PART 2. Mediation/Moderation Effect Estimate ************\n\nPackage Use : â€˜mediationâ€™ (v4.5.1)\nEffect Type : Simple Mediation (Model 4)\nSample Size : 200\nRandom Seed : set.seed()\nSimulations : 100 (Bootstrap)\n\n\n\nRunning 100 simulations...\nIndirect Path: \"X\" (X) ==&gt; \"M\" (M) ==&gt; \"Y\" (Y)\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n               Effect    S.E.      z     p      [Boot 95% CI]\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nIndirect (ab)   0.160 (0.035)  4.498 &lt;.001 *** [0.096, 0.234]\nDirect (c')     0.302 (0.053)  5.659 &lt;.001 *** [0.218, 0.424]\nTotal (c)       0.462 (0.040) 11.504 &lt;.001 *** [0.393, 0.541]\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nPercentile Bootstrap Confidence Interval\n(SE and CI are estimated based on 100 Bootstrap samples.)\n\nNote. The results based on bootstrapping or other random processes\nare unlikely identical to other statistical software (e.g., SPSS).\nTo make results reproducible, you need to set a seed (any number).\nPlease see the help page for details: help(PROCESS)\nIgnore this note if you have already set a seed. :)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·"
    ]
  },
  {
    "objectID": "1011-rpac_brucer.html#å…¶ä»–å®ç”¨åŠŸèƒ½",
    "href": "1011-rpac_brucer.html#å…¶ä»–å®ç”¨åŠŸèƒ½",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "å…¶ä»–å®ç”¨åŠŸèƒ½",
    "text": "å…¶ä»–å®ç”¨åŠŸèƒ½\n\nè¿ç®—ç¬¦\n\n# %notin%ï¼šä¸åœ¨å…¶ä¸­\nc(1, 2, 3) %notin% c(2, 4, 6)\n\n[1]  TRUE FALSE  TRUE\n\n# %allin%ï¼šå…¨éƒ¨åœ¨å…¶ä¸­\nc(1, 2) %allin% c(1, 2, 3, 4)\n\n[1] TRUE\n\n\n\n\ntheme_bruce()ï¼šggplot2 ä¸»é¢˜\n\nlibrary(ggplot2)\n\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width, color = Species)) +\n  geom_point(size = 2, alpha = 0.7) +\n  geom_smooth(method = \"lm\", se = FALSE) +\n  labs(title = \"é¸¢å°¾èŠ±æ•°æ®å¯è§†åŒ–\") +\n  theme_bruce()",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·"
    ]
  },
  {
    "objectID": "1011-rpac_brucer.html#å¯¼å‡ºåˆ°-word",
    "href": "1011-rpac_brucer.html#å¯¼å‡ºåˆ°-word",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "å¯¼å‡ºåˆ° Word",
    "text": "å¯¼å‡ºåˆ° Word\nbruceR çš„ä¸€å¤§ç‰¹è‰²æ˜¯å¯ä»¥å°†ç»“æœç›´æ¥å¯¼å‡ºåˆ° Word æ–‡æ¡£ï¼š\n\n# æè¿°ç»Ÿè®¡\nDescribe(iris[, 1:4], file = \"descriptives.doc\")\n\n# ç›¸å…³çŸ©é˜µ\nCorr(iris[, 1:4], file = \"correlation.doc\")\n\n# å›å½’æ¨¡å‹\nmodel_summary(list(lm1, lm2, lm3), file = \"regression.doc\")\n\n# ä¸­ä»‹åˆ†æ\nPROCESS(data, y = \"Y\", x = \"X\", meds = \"M\", file = \"mediation.doc\")",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·"
    ]
  },
  {
    "objectID": "1011-rpac_brucer.html#å‡½æ•°é€ŸæŸ¥è¡¨",
    "href": "1011-rpac_brucer.html#å‡½æ•°é€ŸæŸ¥è¡¨",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "å‡½æ•°é€ŸæŸ¥è¡¨",
    "text": "å‡½æ•°é€ŸæŸ¥è¡¨\n\n\n\nç±»åˆ«\nå‡½æ•°\nåŠŸèƒ½\n\n\n\n\nåŸºç¡€\nset.wd()\nè®¾ç½®å·¥ä½œç›®å½•åˆ°å½“å‰è„šæœ¬ä½ç½®\n\n\n\nimport() / export()\nä¸‡èƒ½æ•°æ®å¯¼å…¥/å¯¼å‡º\n\n\n\ncc()\nå¿«é€Ÿåˆ›å»ºå­—ç¬¦å‘é‡\n\n\n\nprint_table()\næ‰“å°ä¸‰çº¿è¡¨\n\n\nè®¡ç®—\nMEAN() / SUM()\næ¨ªå‘è®¡ç®—ï¼ˆæ”¯æŒåå‘è®¡åˆ†ï¼‰\n\n\n\nRECODE()\nå˜é‡é‡ç¼–ç \n\n\n\nRESCALE()\nå˜é‡æ ‡å‡†åŒ–\n\n\nä¿¡æ•ˆåº¦\nAlpha()\nCronbachâ€™s Î± ä¿¡åº¦åˆ†æ\n\n\n\nEFA() / PCA()\næ¢ç´¢æ€§å› å­åˆ†æ/ä¸»æˆåˆ†åˆ†æ\n\n\n\nCFA()\néªŒè¯æ€§å› å­åˆ†æ\n\n\næè¿°\nDescribe()\næè¿°ç»Ÿè®¡\n\n\n\nFreq()\né¢‘ç‡åˆ†æä¸äº¤å‰è¡¨\n\n\n\nCorr()\nç›¸å…³åˆ†æä¸çƒ­åŠ›å›¾\n\n\næ£€éªŒ\nTTEST()\ntæ£€éªŒï¼ˆå•æ ·æœ¬/ç‹¬ç«‹/é…å¯¹ï¼‰\n\n\n\nMANOVA()\nå¤šå› ç´ æ–¹å·®åˆ†æ\n\n\n\nEMMEANS()\nè¾¹é™…å‡å€¼ä¸äº‹åæ¯”è¾ƒ\n\n\nå›å½’\nmodel_summary()\nå›å½’æ¨¡å‹æ•´æ´è¾“å‡º\n\n\n\nGLM_summary()\nå¹¿ä¹‰çº¿æ€§æ¨¡å‹æ±‡æ€»\n\n\n\nHLM_summary()\nå¤šå±‚çº¿æ€§æ¨¡å‹æ±‡æ€»\n\n\nä¸­ä»‹\nPROCESS()\nä¸­ä»‹/è°ƒèŠ‚æ•ˆåº”åˆ†æ\n\n\n\nmed_summary()\nä¸­ä»‹æ•ˆåº”æ±‡æ€»",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·"
    ]
  },
  {
    "objectID": "1011-rpac_brucer.html#å‚è€ƒèµ„æº",
    "href": "1011-rpac_brucer.html#å‚è€ƒèµ„æº",
    "title": "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nbruceR GitHub ä¸»é¡µ\nCRAN å®˜æ–¹é¡µé¢\nä¸­æ–‡æ•™ç¨‹ï¼šæ¦‚è¿°ç¯‡\nä¸­æ–‡æ•™ç¨‹ï¼šå¸¸è§é—®é¢˜\nå¼•ç”¨ï¼šBao, H. W. S. (2021). bruceR: Broadly useful convenient and efficient R functions. https://doi.org/10.32614/CRAN.package.bruceR",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "bruceR - ç»Ÿè®¡åˆ†æå·¥å…·"
    ]
  },
  {
    "objectID": "0012-quarto-vs-rmd.html",
    "href": "0012-quarto-vs-rmd.html",
    "title": "Quarto vs RMarkdown å¯¹æ¯”",
    "section": "",
    "text": "Quarto æ˜¯ RMarkdown çš„ä¸‹ä¸€ä»£ç‰ˆæœ¬ï¼Œç”± Positï¼ˆåŸ RStudioï¼‰å¼€å‘ã€‚ä¸¤è€…éƒ½ç”¨äºåˆ›å»ºå¯é‡å¤çš„æ–‡æ¡£ï¼Œä½† Quarto æä¾›äº†æ›´å¤šç°ä»£ç‰¹æ€§ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Quarto vs RMarkdown"
    ]
  },
  {
    "objectID": "0012-quarto-vs-rmd.html#æ¦‚è¿°",
    "href": "0012-quarto-vs-rmd.html#æ¦‚è¿°",
    "title": "Quarto vs RMarkdown å¯¹æ¯”",
    "section": "",
    "text": "Quarto æ˜¯ RMarkdown çš„ä¸‹ä¸€ä»£ç‰ˆæœ¬ï¼Œç”± Positï¼ˆåŸ RStudioï¼‰å¼€å‘ã€‚ä¸¤è€…éƒ½ç”¨äºåˆ›å»ºå¯é‡å¤çš„æ–‡æ¡£ï¼Œä½† Quarto æä¾›äº†æ›´å¤šç°ä»£ç‰¹æ€§ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Quarto vs RMarkdown"
    ]
  },
  {
    "objectID": "0012-quarto-vs-rmd.html#æ ¸å¿ƒåŒºåˆ«",
    "href": "0012-quarto-vs-rmd.html#æ ¸å¿ƒåŒºåˆ«",
    "title": "Quarto vs RMarkdown å¯¹æ¯”",
    "section": "æ ¸å¿ƒåŒºåˆ«",
    "text": "æ ¸å¿ƒåŒºåˆ«\n\n\n\nç‰¹æ€§\nRMarkdown\nQuarto\n\n\n\n\næ–‡ä»¶æ‰©å±•å\n.Rmd\n.qmd\n\n\nè¯­è¨€æ”¯æŒ\nä¸»è¦æ˜¯ R\nRã€Pythonã€Juliaã€Observable\n\n\nä¾èµ–\néœ€è¦ R å’Œ knitr\nç‹¬ç«‹å‘½ä»¤è¡Œå·¥å…·\n\n\né…ç½®è¯­æ³•\nYAML + R ä»£ç å—é€‰é¡¹\nç»Ÿä¸€çš„ YAML è¯­æ³•\n\n\nè¾“å‡ºæ ¼å¼\né€šè¿‡ R åŒ…\nå†…ç½®æ”¯æŒ",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Quarto vs RMarkdown"
    ]
  },
  {
    "objectID": "0012-quarto-vs-rmd.html#è¯­æ³•å¯¹æ¯”",
    "href": "0012-quarto-vs-rmd.html#è¯­æ³•å¯¹æ¯”",
    "title": "Quarto vs RMarkdown å¯¹æ¯”",
    "section": "è¯­æ³•å¯¹æ¯”",
    "text": "è¯­æ³•å¯¹æ¯”\n\nä»£ç å—é€‰é¡¹\nRMarkdown æ–¹å¼ï¼š é€‰é¡¹å†™åœ¨èŠ±æ‹¬å·å†…\nä»£ç å—å¤´: {r myplot, echo=TRUE, fig.width=8}\nQuarto æ–¹å¼ï¼š ä½¿ç”¨ #| æ³¨é‡Šè¯­æ³•\nä»£ç å—å¤´: {r}\n#| label: myplot\n#| echo: true\n#| fig-width: 8\nQuarto çš„ #| è¯­æ³•æ›´æ¸…æ™°ï¼Œä¸”æ”¯æŒä»£ç è¡¥å…¨ã€‚\n\n\näº¤å‰å¼•ç”¨\n\n\n\nåŠŸèƒ½\nRMarkdown\nQuarto\n\n\n\n\nå›¾ç‰‡å¼•ç”¨\n\\@ref(fig:myplot)\n@fig-myplot\n\n\nè¡¨æ ¼å¼•ç”¨\n\\@ref(tab:mytable)\n@tbl-mytable\n\n\nä¾èµ–\néœ€è¦ bookdown åŒ…\nå†…ç½®æ”¯æŒ\n\n\n\n\n\næ¡ä»¶å†…å®¹\nQuarto åŸç”Ÿæ”¯æŒæŒ‰è¾“å‡ºæ ¼å¼æ˜¾ç¤ºä¸åŒå†…å®¹ï¼š\n\n::: {.content-visible when-format=\"html\"} ä»… HTML æ˜¾ç¤º\n::: {.content-visible when-format=\"pdf\"} ä»… PDF æ˜¾ç¤º",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Quarto vs RMarkdown"
    ]
  },
  {
    "objectID": "0012-quarto-vs-rmd.html#quarto-çš„ä¼˜åŠ¿",
    "href": "0012-quarto-vs-rmd.html#quarto-çš„ä¼˜åŠ¿",
    "title": "Quarto vs RMarkdown å¯¹æ¯”",
    "section": "Quarto çš„ä¼˜åŠ¿",
    "text": "Quarto çš„ä¼˜åŠ¿\n\n1. å¤šè¯­è¨€æ”¯æŒ\nåœ¨åŒä¸€æ–‡æ¡£ä¸­å¯æ··åˆä½¿ç”¨ Rã€Pythonã€Juliaã€Observable JSã€‚\n\n\n2. æ›´å¥½çš„é¡¹ç›®æ”¯æŒ\né€šè¿‡ _quarto.yml ç»Ÿä¸€é…ç½®æ•´ä¸ªé¡¹ç›®ï¼Œæ”¯æŒç½‘ç«™ã€ä¹¦ç±ã€åšå®¢ç­‰å¤šç§é¡¹ç›®ç±»å‹ã€‚\n\n\n3. å†…ç½®å¹»ç¯ç‰‡\nåŸç”Ÿæ”¯æŒ Revealjs å¹»ç¯ç‰‡ï¼Œåªéœ€è®¾ç½® format: revealjsã€‚\n\n\n4. æ‰©å±•ç³»ç»Ÿ\nå¯é€šè¿‡ quarto add å®‰è£…æ‰©å±•ï¼Œæ·»åŠ æ–°æ ¼å¼ã€è¿‡æ»¤å™¨å’ŒçŸ­ä»£ç ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Quarto vs RMarkdown"
    ]
  },
  {
    "objectID": "0012-quarto-vs-rmd.html#rmarkdown-çš„ä¼˜åŠ¿",
    "href": "0012-quarto-vs-rmd.html#rmarkdown-çš„ä¼˜åŠ¿",
    "title": "Quarto vs RMarkdown å¯¹æ¯”",
    "section": "RMarkdown çš„ä¼˜åŠ¿",
    "text": "RMarkdown çš„ä¼˜åŠ¿\n\nç”Ÿæ€æˆç†Ÿï¼šå¤§é‡ç°æœ‰æ¨¡æ¿å’ŒåŒ…\nR æ·±åº¦é›†æˆï¼šä¸ R åŒ…ç³»ç»Ÿæ— ç¼é…åˆ\nå­¦ä¹ èµ„æ–™ä¸°å¯Œï¼šæ•™ç¨‹å’Œæ–‡æ¡£æ›´å¤š",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Quarto vs RMarkdown"
    ]
  },
  {
    "objectID": "0012-quarto-vs-rmd.html#è¿ç§»å»ºè®®",
    "href": "0012-quarto-vs-rmd.html#è¿ç§»å»ºè®®",
    "title": "Quarto vs RMarkdown å¯¹æ¯”",
    "section": "è¿ç§»å»ºè®®",
    "text": "è¿ç§»å»ºè®®\n\nä» RMarkdown è¿ç§»åˆ° Quarto\n\nå°† .Rmd é‡å‘½åä¸º .qmdï¼ˆå¤§å¤šæ•°æƒ…å†µä¸‹ç›´æ¥å¯ç”¨ï¼‰\næ›´æ–°ä»£ç å—é€‰é¡¹ä¸º #| è¯­æ³•\næ›´æ–° YAML å¤´éƒ¨ï¼šoutput: html_document â†’ format: html\n\n\n\nYAML å¤´éƒ¨å¯¹æ¯”\n\n\n\nRMarkdown\nQuarto\n\n\n\n\noutput: html_document\nformat: html\n\n\ntoc: true\ntoc: true\n\n\ntoc_float: true\ntoc-location: left\n\n\ncode_folding: show\ncode-fold: show",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Quarto vs RMarkdown"
    ]
  },
  {
    "objectID": "0012-quarto-vs-rmd.html#é€‰æ‹©å»ºè®®",
    "href": "0012-quarto-vs-rmd.html#é€‰æ‹©å»ºè®®",
    "title": "Quarto vs RMarkdown å¯¹æ¯”",
    "section": "é€‰æ‹©å»ºè®®",
    "text": "é€‰æ‹©å»ºè®®\n\n\n\nåœºæ™¯\næ¨è\n\n\n\n\næ–°é¡¹ç›®\nQuarto\n\n\nçº¯ R é¡¹ç›®\nä¸¤è€…çš†å¯\n\n\nå¤šè¯­è¨€é¡¹ç›®\nQuarto\n\n\nå·²æœ‰ RMarkdown é¡¹ç›®\nç»§ç»­ä½¿ç”¨ï¼Œæœ‰éœ€è¦å†è¿ç§»\n\n\néœ€è¦ç‰¹å®š R åŒ…åŠŸèƒ½\nRMarkdown\n\n\nç½‘ç«™/ä¹¦ç±é¡¹ç›®\nQuarto",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Quarto vs RMarkdown"
    ]
  },
  {
    "objectID": "0012-quarto-vs-rmd.html#æ€»ç»“",
    "href": "0012-quarto-vs-rmd.html#æ€»ç»“",
    "title": "Quarto vs RMarkdown å¯¹æ¯”",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nQuarto æ˜¯ RMarkdown çš„ç°ä»£ç»§æ‰¿è€…ï¼Œæä¾›ï¼š\n\nç»Ÿä¸€çš„è·¨è¯­è¨€ä½“éªŒ\næ›´æ¸…æ™°çš„è¯­æ³•\nå†…ç½®ä¸°å¯ŒåŠŸèƒ½\næ´»è·ƒçš„å¼€å‘å’Œç¤¾åŒº\n\nå¯¹äºæ–°é¡¹ç›®ï¼Œæ¨èä½¿ç”¨ Quartoã€‚ç°æœ‰ RMarkdown é¡¹ç›®å¯ä»¥æŒ‰éœ€é€æ­¥è¿ç§»ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Quarto vs RMarkdown"
    ]
  },
  {
    "objectID": "0012-quarto-vs-rmd.html#å‚è€ƒèµ„æº",
    "href": "0012-quarto-vs-rmd.html#å‚è€ƒèµ„æº",
    "title": "Quarto vs RMarkdown å¯¹æ¯”",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nQuarto å®˜æ–¹æ–‡æ¡£\nRMarkdown å®˜æ–¹æ–‡æ¡£\nä» RMarkdown è¿ç§»åˆ° Quarto",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Quarto vs RMarkdown"
    ]
  },
  {
    "objectID": "0001-guide.html",
    "href": "0001-guide.html",
    "title": "R è¯­è¨€å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š",
    "section": "",
    "text": "è¿™æ˜¯ä¸€ä¸ªä¸“æ³¨äº æµè¡Œç—…å­¦ã€åŒ»å­¦ç»Ÿè®¡å’Œæ•°æ®åˆ†æ çš„ R è¯­è¨€æ•™ç¨‹åˆé›†ã€‚æ— è®ºä½ æ˜¯åˆšå¼€å§‹å­¦ä¹  Rï¼Œè¿˜æ˜¯æƒ³æ·±å…¥æŸä¸ªç‰¹å®šé¢†åŸŸï¼Œè¿™é‡Œéƒ½æœ‰ä½ éœ€è¦çš„å†…å®¹ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“˜ å­¦ä¹ è·¯çº¿",
      "æ–°æ‰‹å…¥é—¨æŒ‡å—"
    ]
  },
  {
    "objectID": "0001-guide.html#æ¬¢è¿æ¥åˆ°-r-è¯­è¨€å­¦ä¹ ç¬”è®°",
    "href": "0001-guide.html#æ¬¢è¿æ¥åˆ°-r-è¯­è¨€å­¦ä¹ ç¬”è®°",
    "title": "R è¯­è¨€å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š",
    "section": "",
    "text": "è¿™æ˜¯ä¸€ä¸ªä¸“æ³¨äº æµè¡Œç—…å­¦ã€åŒ»å­¦ç»Ÿè®¡å’Œæ•°æ®åˆ†æ çš„ R è¯­è¨€æ•™ç¨‹åˆé›†ã€‚æ— è®ºä½ æ˜¯åˆšå¼€å§‹å­¦ä¹  Rï¼Œè¿˜æ˜¯æƒ³æ·±å…¥æŸä¸ªç‰¹å®šé¢†åŸŸï¼Œè¿™é‡Œéƒ½æœ‰ä½ éœ€è¦çš„å†…å®¹ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“˜ å­¦ä¹ è·¯çº¿",
      "æ–°æ‰‹å…¥é—¨æŒ‡å—"
    ]
  },
  {
    "objectID": "0001-guide.html#å­¦ä¹ è·¯çº¿å›¾",
    "href": "0001-guide.html#å­¦ä¹ è·¯çº¿å›¾",
    "title": "R è¯­è¨€å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š",
    "section": "å­¦ä¹ è·¯çº¿å›¾",
    "text": "å­¦ä¹ è·¯çº¿å›¾\næ ¹æ®ä½ çš„å­¦ä¹ é˜¶æ®µå’Œç›®æ ‡ï¼Œé€‰æ‹©åˆé€‚çš„è·¯çº¿ï¼š\n\nåˆå­¦è€…è·¯çº¿\nå¦‚æœä½ åˆšæ¥è§¦ R è¯­è¨€ï¼Œå»ºè®®æŒ‰ä»¥ä¸‹é¡ºåºå­¦ä¹ ï¼š\n\n\n\né˜¶æ®µ\næ¨èæ•™ç¨‹\nä½ å°†å­¦ä¼š\n\n\n\n\n1. ç¯å¢ƒæ­å»º\nPositron IDE æ•™ç¨‹\nå®‰è£…ä½¿ç”¨ç°ä»£ R IDE\n\n\n2. æ–‡æ¡£åŸºç¡€\nRMarkdown å…¥é—¨\nåˆ›å»ºå¯é‡å¤çš„åˆ†ææŠ¥å‘Š\n\n\n3. æ•°æ®å¤„ç†\nbruceR ç»Ÿè®¡å·¥å…·\næ•°æ®æ¸…æ´—ä¸åŸºç¡€åˆ†æ\n\n\n4. åŸºç¡€å¯è§†åŒ–\né…è‰²æ–¹æ¡ˆ\nç¾è§‚å›¾è¡¨çš„é…è‰²åŸåˆ™\n\n\n5. æè¿°ç»Ÿè®¡\ncompareGroups æè¿°è¡¨\nç”Ÿæˆè§„èŒƒçš„ç»Ÿè®¡è¡¨æ ¼\n\n\n\n\n\n\nå¯è§†åŒ–ä¸“é¢˜\næƒ³è¦åˆ¶ä½œä¸“ä¸šçš„æ•°æ®å¯è§†åŒ–ï¼Ÿè¿™é‡Œæœ‰ä½ éœ€è¦çš„æ‰€æœ‰æŠ€èƒ½ï¼š\n\nåŸºç¡€å›¾è¡¨\n\n\n\nå›¾è¡¨ç±»å‹\næ•™ç¨‹é“¾æ¥\né€‚ç”¨åœºæ™¯\n\n\n\n\nç®±çº¿å›¾\nç®±çº¿å›¾ä¸å°æç´å›¾\nå±•ç¤ºæ•°æ®åˆ†å¸ƒã€æ¯”è¾ƒç»„é—´å·®å¼‚\n\n\næ•£ç‚¹å›¾\næ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿\næ¢ç´¢å˜é‡å…³ç³»ã€å›å½’åˆ†æ\n\n\nç›´æ–¹å›¾\nç›´æ–¹å›¾ä¸å¯†åº¦å›¾\næŸ¥çœ‹æ•°æ®åˆ†å¸ƒå½¢æ€\n\n\næŸ±çŠ¶å›¾\næŸ±çŠ¶å›¾ä¸é¥¼å›¾\nåˆ†ç±»æ•°æ®æ¯”è¾ƒ\n\n\næŠ˜çº¿å›¾\næŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—\næ—¶é—´è¶‹åŠ¿ã€å¤šç»„å¯¹æ¯”\n\n\né¢ç§¯å›¾\né¢ç§¯å›¾ä¸å †å å›¾\nå †å æ¯”ä¾‹ã€æ²³æµå›¾\n\n\n\n\n\nè¿›é˜¶å›¾è¡¨\n\n\n\nå›¾è¡¨ç±»å‹\næ•™ç¨‹é“¾æ¥\né€‚ç”¨åœºæ™¯\n\n\n\n\nçƒ­å›¾\nçƒ­å›¾å®Œå…¨æŒ‡å—\nçŸ©é˜µæ•°æ®ã€èšç±»åˆ†æ\n\n\næ£®æ—å›¾\næ£®æ—å›¾ç»‘åˆ¶\nMeta åˆ†æã€OR/HR å±•ç¤º\n\n\nåœ°å›¾\nåœ°å›¾ç»‘åˆ¶\nåœ°ç†æ•°æ®å¯è§†åŒ–\n\n\næ¡‘åŸºå›¾\næ¡‘åŸºå›¾\næµé‡/è½¬åŒ–è·¯å¾„\n\n\né›·è¾¾å›¾\né›·è¾¾å›¾\nå¤šç»´åº¦å¯¹æ¯”\n\n\néŸ¦æ©å›¾\néŸ¦æ©å›¾\né›†åˆå…³ç³»å±•ç¤º\n\n\nè¯äº‘å›¾\nè¯äº‘å›¾\næ–‡æœ¬å¯è§†åŒ– â­æ–°å¢\n\n\nç½‘ç»œå›¾\nç½‘ç»œå…³ç³»å›¾\nèŠ‚ç‚¹å…³ç³»å±•ç¤º â­æ–°å¢\n\n\nç”˜ç‰¹å›¾\nç”˜ç‰¹å›¾\né¡¹ç›®æ—¶é—´ç®¡ç† â­æ–°å¢\n\n\næ¼æ–—å›¾\næ¼æ–—å›¾\nè¥é”€è½¬åŒ–åˆ†æ â­æ–°å¢\n\n\nMLå¯è§†åŒ–\næœºå™¨å­¦ä¹ å¯è§†åŒ–\næ··æ·†çŸ©é˜µã€ROCæ›²çº¿ã€ç‰¹å¾é‡è¦æ€§ â­æ–°å¢\n\n\nåŠ¨æ€å›¾è¡¨\ngganimate åŠ¨ç”»å¯è§†åŒ–\næ—¶é—´å˜åŒ–ä¸è¿‡ç¨‹å±•ç¤º â­æ–°å¢\n\n\n\n\n\nå›¾è¡¨ç¾åŒ–ä¸ç»„åˆ\n\n\n\næŠ€èƒ½\næ•™ç¨‹é“¾æ¥\nè¯´æ˜\n\n\n\n\né…è‰²\né…è‰²æ–¹æ¡ˆ\nç§‘å­¦æœŸåˆŠé…è‰²ã€è‰²ç›²å‹å¥½\n\n\nå­—ä½“\nggtext ä¸­è‹±æ–‡æ··æ’\nå›¾è¡¨ä¸­çš„ä¸“ä¸šå­—ä½“è®¾ç½®\n\n\næ ·å¼\nggplot2 æ ·å¼è®¾ç½®è¯¦è§£\nä¸»é¢˜ä¸ç»„ä»¶å¾®è°ƒ â­æ–°å¢\n\n\nå›¾ä¾‹\nå›¾ä¾‹è‡ªå®šä¹‰\nå›¾ä¾‹ä½ç½®ã€æ ·å¼è°ƒæ•´\n\n\næ‹¼æ¥\npatchwork æ‹¼æ¥\nå¤šå›¾ç»„åˆæ’ç‰ˆ\n\n\nç»„åˆ\ncowplot å›¾å½¢ç»„åˆ\nä¸“ä¸šå‡ºç‰ˆçº§å›¾è¡¨\n\n\nåŒè½´\nåŒåæ ‡è½´\nåŒ Y è½´å›¾è¡¨\n\n\nå‘è¡¨çº§\nå¤æ‚ç»„åˆå›¾\nè®ºæ–‡å‘è¡¨çº§åˆ«å›¾è¡¨\n\n\nBase R\nBase R ç»‘å›¾åŸºç¡€\nåŸºç¡€ç»˜å›¾ç³»ç»Ÿã€å¿«é€Ÿæ¢ç´¢ â­æ–°å¢\n\n\n\n\n\n\n\nç»Ÿè®¡æ–¹æ³•ä¸“é¢˜\næ ¹æ®ä½ çš„åˆ†æéœ€æ±‚é€‰æ‹©åˆé€‚çš„æ–¹æ³•ï¼š\n\nåŸºç¡€ç»Ÿè®¡\n\n\n\næ–¹æ³•\næ•™ç¨‹é“¾æ¥\né€‚ç”¨åœºæ™¯\n\n\n\n\næ–¹æ³•åˆ†æ\nANOVA\nå¤šç»„å‡å€¼æ¯”è¾ƒ\n\n\nçº¿æ€§å›å½’\nå¤šå…ƒçº¿æ€§å›å½’\nè¿ç»­å› å˜é‡é¢„æµ‹\n\n\nLogistic\nLogistic å›å½’\näºŒåˆ†ç±»ç»“å±€é¢„æµ‹\n\n\nè®¡æ•°æ•°æ®\nPoisson/è´ŸäºŒé¡¹å›å½’\nè®¡æ•°æ•°æ®å»ºæ¨¡\n\n\næœ‰åºå›å½’\næœ‰åºå›å½’\næœ‰åºåˆ†ç±»ç»“å±€å»ºæ¨¡\n\n\nROCåˆ†æ\nROC åˆ†æ\næ¨¡å‹åŒºåˆ†åº¦è¯„ä¼°\n\n\nAUC/AUPRC\nAUC ä¸ AUPRC å¯¹æ¯”\nä¸å¹³è¡¡æ•°æ®è¯„ä¼°\n\n\næ ·æœ¬é‡\næ ·æœ¬é‡è®¡ç®—\nç ”ç©¶è®¾è®¡å¿…å¤‡\n\n\nBootstrap\nBootstrapä¸ç½®æ¢æ£€éªŒ\nå°æ ·æœ¬éå‚æ•°æ–¹æ³•\n\n\n\n\n\nè¿›é˜¶ç»Ÿè®¡\n\n\n\næ–¹æ³•\næ•™ç¨‹é“¾æ¥\né€‚ç”¨åœºæ™¯\n\n\n\n\nç”Ÿå­˜åˆ†æ\nç”Ÿå­˜åˆ†æ\næ—¶é—´åˆ°äº‹ä»¶æ•°æ®\n\n\nå€¾å‘è¯„åˆ†\nPSM å€¾å‘æ€§åŒ¹é…\nè§‚å¯Ÿæ€§ç ”ç©¶å› æœæ¨æ–­\n\n\nä¸­ä»‹æ•ˆåº”\nä¸­ä»‹æ•ˆåº”åˆ†æ\nä½œç”¨æœºåˆ¶æ¢ç´¢\n\n\nå¤šæ°´å¹³æ¨¡å‹\nå¤šæ°´å¹³æ¨¡å‹\nåµŒå¥—/å±‚æ¬¡æ•°æ®\n\n\nGAM\nå¹¿ä¹‰åŠ æ€§æ¨¡å‹\néçº¿æ€§å…³ç³»å»ºæ¨¡\n\n\nGEE\nå¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹\né‡å¤æµ‹é‡ä¸ç›¸å…³æ•°æ®\n\n\nå¤šé‡æ’è¡¥\nå¤šé‡æ’è¡¥\nç¼ºå¤±æ•°æ®ç¨³å¥å¤„ç†\n\n\nMSM/IPTW\nMSM ä¸ IPTW\næ—¶å˜æ··æ‚çš„å› æœæ¨æ–­\n\n\nFine-Gray\nFine-Gray ç«äº‰é£é™©\nç´¯ç§¯å‘ç”Ÿç‡åˆ†æ\n\n\næ—¶å˜ Cox\næ—¶å˜åå˜é‡ Cox\nåŠ¨æ€æš´éœ²ç”Ÿå­˜åˆ†æ\n\n\næƒé‡è¯Šæ–­\nå€¾å‘è¯„åˆ†æƒé‡è¯Šæ–­\nIPTW ç¨³å®šæ€§è¯„ä¼°\n\n\nç›®æ ‡è¯•éªŒè¿›é˜¶\nç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶\næ–¹æ¡ˆè®¾è®¡ä¸æ•æ„Ÿæ€§\n\n\nRCS\né™åˆ¶æ€§ç«‹æ–¹æ ·æ¡\nå‰‚é‡-ååº”å…³ç³»\n\n\nDiD\nåŒé‡å·®åˆ†æ³•\næ”¿ç­–æ•ˆæœè¯„ä¼°\n\n\nç«äº‰é£é™©\nç«äº‰é£é™©åˆ†æ\nå¤šç»“å±€ç”Ÿå­˜åˆ†æ\n\n\n\næ²»ç–—æ•ˆæœ | æ²»ç–—æ•ˆæœåˆ†æ (TxEffects) | æ•ˆåº”é‡åŒ– â­æ–°å¢ |\näºšç»„åˆ†æ | äºšç»„åˆ†æä¸äº¤äº’ä½œç”¨ | æ•ˆæœä¿®é¥°ä¸æ£®æ—å›¾ |\nDAGå› æœå›¾ | DAG å› æœå›¾ | æ··æ‚è¯†åˆ«ä¸è°ƒæ•´ç­–ç•¥ |\nç›®æ ‡è¯•éªŒ | ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ | è§‚å¯Ÿæ•°æ®æ¨¡æ‹ŸRCT |\nå­Ÿå¾·å°”éšæœºåŒ– | å­Ÿå¾·å°”éšæœºåŒ– | é—ä¼ å·¥å…·å˜é‡å› æœæ¨æ–­ â­æ–°å¢ |\nå·¥å…·å˜é‡æ³• | å·¥å…·å˜é‡æ³• (IV) | è§£å†³å†…ç”Ÿæ€§é—®é¢˜ â­æ–°å¢ |\nEå€¼åˆ†æ | Eå€¼æ•æ„Ÿæ€§åˆ†æ | æœªæµ‹é‡æ··æ‚è¯„ä¼° |\n\n\né«˜çº§æ–¹æ³•\n\n\n\næ–¹æ³•\næ•™ç¨‹é“¾æ¥\né€‚ç”¨åœºæ™¯\n\n\n\n\nSEM\nç»“æ„æ–¹ç¨‹æ¨¡å‹\nå¤æ‚è·¯å¾„åˆ†æ\n\n\nCLPM\näº¤å‰æ»åé¢æ¿æ¨¡å‹\nçºµå‘å˜é‡æ—¶åºå½±å“\n\n\nPLS-PM\nPLS-PM è·¯å¾„æ¨¡å‹\nå°æ ·æœ¬è·¯å¾„åˆ†æ\n\n\nå› å­åˆ†æ\nEFA/CFA\né‡è¡¨éªŒè¯ã€ç»“æ„åˆ†æ\n\n\nPCA\nä¸»æˆåˆ†åˆ†æ\né™ç»´ã€ç‰¹å¾æå–\n\n\nLCA\næ½œç±»åˆ«åˆ†æ\näººç¾¤äºšå‹è¯†åˆ«\n\n\nGBTM\nåŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹\nçºµå‘è½¨è¿¹åˆ†ç»„\n\n\nDLNM\nåˆ†å¸ƒæ»åæ¨¡å‹\næš´éœ²-æ»åæ•ˆåº”\n\n\nå°æ³¢å˜æ¢\nå°æ³¢å˜æ¢\næ—¶é¢‘åˆ†æä¸ä¿¡å·å»å™ª â­æ–°å¢\n\n\nVMD\nå˜åˆ†æ¨¡æ€åˆ†è§£\nä¿¡å·å¤„ç†åˆ†æ\n\n\nFFT+GMM\nFFT + VMD + GMM\nç»„åˆä¿¡å·åˆ†æ\n\n\nTreeAge Pro\nTreeAge Pro å†³ç­–åˆ†æ\nä¸“ä¸šHTAè½¯ä»¶æ“ä½œ â­æ–°å¢\n\n\nè´å¶æ–¯\nè´å¶æ–¯ç»Ÿè®¡å…¥é—¨\nå…ˆéªŒ+ä¼¼ç„¶=åéªŒ\n\n\n\n\n\nMeta åˆ†æä¸ç»¼è¿°\n\n\n\næ–¹æ³•\næ•™ç¨‹é“¾æ¥\né€‚ç”¨åœºæ™¯\n\n\n\n\nMeta åˆ†æ\nMeta åˆ†æ\nå¤šç ”ç©¶è¯æ®æ•´åˆ\n\n\nç½‘çŠ¶ Meta\nç½‘çŠ¶ Meta åˆ†æ\nå¤šå¹²é¢„æªæ–½æ¯”è¾ƒ\n\n\nä¼çŠ¶ç»¼è¿°\nä¼çŠ¶ç»¼è¿°\nMeta çš„ Meta\n\n\nèŒƒå›´ç»¼è¿°\nèŒƒå›´ç»¼è¿°\næ–‡çŒ®åœ°å›¾ç»˜åˆ¶\n\n\nè´¨æ€§ç ”ç©¶\nè´¨æ€§ç ”ç©¶ä¸æ–‡æœ¬æŒ–æ˜\næ–‡æœ¬åˆ†æ\n\n\n\n\n\n\n\nå®ç”¨ R åŒ…ä¸“é¢˜\nå¿«é€ŸæŒæ¡é«˜æ•ˆçš„ R åŒ…å·¥å…·ï¼š\n\n\n\nR åŒ…\næ•™ç¨‹é“¾æ¥\nç”¨é€”\n\n\n\n\nbruceR\nbruceR ç»Ÿè®¡å·¥å…·\nä¸€ç«™å¼ç»Ÿè®¡åˆ†æ\n\n\ncompareGroups\næè¿°æ€§è¡¨æ ¼\nåŸºçº¿è¡¨ç”Ÿæˆ\n\n\nscitb\nå¿«é€ŸåŸºçº¿è¡¨\nè®ºæ–‡è¡¨æ ¼\n\n\npurrr\nå‡½æ•°å¼ç¼–ç¨‹\né«˜æ•ˆè¿­ä»£æ“ä½œ\n\n\nfuture\nå¹¶è¡Œè®¡ç®—\nå¤šæ ¸åŠ é€Ÿå¤„ç†\n\n\ndata.table\ndata.table æŒ‡å—\nå¤§æ•°æ®é«˜æ€§èƒ½å¤„ç†\n\n\nstringr\nstringr å­—ç¬¦ä¸²å¤„ç†\ntidyverseå­—ç¬¦ä¸²æ“ä½œ â­æ–°å¢\n\n\nforcats\nforcats å› å­å¤„ç†\nåˆ†ç±»å˜é‡å¤„ç† â­æ–°å¢\n\n\nreadr/readxl\né«˜æ•ˆæ•°æ®è¯»å–\nå¿«é€Ÿè¯»å–CSV/Excel â­æ–°å¢\n\n\ntidyplots\næç®€å¯è§†åŒ–\nå¿«é€Ÿç»‘å›¾\n\n\nGGally\nå¯è§†åŒ–æ‰©å±•\nçŸ©é˜µå›¾ã€ç›¸å…³å›¾\n\n\ntidymodels\ntidymodels æœºå™¨å­¦ä¹ \nç°ä»£MLå·¥ä½œæµ\n\n\nbroom\nbroom æ¨¡å‹æ•´ç†\næ¨¡å‹ç»“æœæ•´ç†\n\n\nrstatix\nrstatix ç®¡é“å¼ç»Ÿè®¡\ntidyverseç»Ÿè®¡æ£€éªŒ\n\n\ndplyr/tidyr\ndplyr/tidyr æ•°æ®å¤„ç†\næ•°æ®æ¸…æ´—æ•´å½¢\n\n\nduckplyr\né«˜æ€§èƒ½æ•°æ®å¤„ç†\nDuckDBé©±åŠ¨çš„dplyråŠ é€Ÿ â­æ–°å¢\n\n\ntidytable\ntidytable æ•°æ®å¤„ç†\ndata.table å¼•æ“çš„ tidyverse è¯­æ³•\n\n\ngtsummary\ngtsummary å‘è¡¨çº§è¡¨æ ¼\nè®ºæ–‡è¡¨æ ¼ä¸€é”®ç”Ÿæˆ\n\n\nggguides\nggguides å›¾ä¾‹ç®€åŒ–\nä¸€è¡Œä»£ç è°ƒæ•´å›¾ä¾‹\n\n\n\n\n\n\nå®ç”¨æ“ä½œä¸“é¢˜\næ—¥å¸¸å·¥ä½œä¸­çš„å¸¸ç”¨æŠ€å·§ï¼š\n\n\n\nä¸»é¢˜\næ•™ç¨‹é“¾æ¥\nè¯´æ˜\n\n\n\n\næ•°æ®å¯¼å…¥\næ•°æ®å¯¼å…¥å¯¼å‡º\nExcelã€CSVã€SPSS ç­‰æ ¼å¼\n\n\né«˜æ•ˆè¯»å–\nreadr/readxl é«˜æ•ˆè¯»å–\nå¿«é€Ÿè¯»å–CSV/Excel â­æ–°å¢\n\n\né«˜æ€§èƒ½å¤„ç†\nduckplyr é«˜æ€§èƒ½æ•°æ®å¤„ç†\nDuckDBåŠ é€Ÿå¤§æ•°æ®åˆ†æ â­æ–°å¢\n\n\ndata.table\ndata.table å®Œå…¨æŒ‡å—\nå¤§æ•°æ®å¤„ç†æœ€ä½³å®è·µ\n\n\nç½‘ç»œçˆ¬è™«\nç½‘ç»œçˆ¬è™«å…¥é—¨\nä½¿ç”¨ rvest/httr æŠ“å–ç½‘é¡µæ•°æ®\n\n\nPDFè¯»å–\nPDFæ–‡ä»¶è¯»å–\npdftoolsæå–PDFæ–‡æœ¬å’Œè¡¨æ ¼\n\n\næ­£åˆ™è¡¨è¾¾å¼\næ­£åˆ™è¡¨è¾¾å¼\nstringr å¤„ç†å­—ç¬¦ä¸²æ¨¡å¼\n\n\nå­—ç¬¦ä¸²å¤„ç†\nstringr å­—ç¬¦ä¸²å¤„ç†\ntidyverse å­—ç¬¦ä¸²æ“ä½œ â­æ–°å¢\n\n\nå› å­å¤„ç†\nforcats å› å­å¤„ç†\nåˆ†ç±»å˜é‡ä¸å¯è§†åŒ– â­æ–°å¢\n\n\næ—¥æœŸæ—¶é—´\næ—¥æœŸæ—¶é—´å¤„ç†\nlubridate æ—¥æœŸè¿ç®—ä¸æ ¼å¼è½¬æ¢\n\n\næ•°æ®åº“æŒ‡å—\nä¸»æµç§‘ç ”æ•°æ®åº“æŒ‡å—\nCHARLS/NHANES/CFPSç­‰æ•°æ®è·å–ä¸æ³¨æ„äº‹é¡¹\n\n\nRMarkdown\nRMarkdown å…¥é—¨\nå¯é‡å¤ç ”ç©¶æŠ¥å‘Š\n\n\næ ¼å¼é€‰æ‹©\nQuarto vs RMarkdown\né€‰æ‹©åˆé€‚çš„æ–‡æ¡£æ ¼å¼\n\n\nIDE\nPositron IDE\nç°ä»£åŒ–çš„ R å¼€å‘ç¯å¢ƒ\n\n\nEDA\næ¢ç´¢æ€§æ•°æ®åˆ†æ\næ•°æ®æ¢ç´¢ä¸è´¨é‡æ£€æŸ¥\n\n\nç¼ºå¤±å€¼\nç¼ºå¤±å€¼å¤„ç†\nå¤šé‡æ’è¡¥ä¸åˆ†æ\n\n\nå¼‚å¸¸å€¼\nå¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†\nIQRã€Z-scoreã€MADç­‰æ–¹æ³• â­æ–°å¢\n\n\nå¯é‡å¤ç ”ç©¶\nå¯é‡å¤ç ”ç©¶å·¥ä½œæµ\nç ”ç©¶é—­ç¯æœ€ä½³å®è·µ\n\n\nShiny\nShiny Web åº”ç”¨\næ„å»ºäº¤äº’å¼æ•°æ®åº”ç”¨",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“˜ å­¦ä¹ è·¯çº¿",
      "æ–°æ‰‹å…¥é—¨æŒ‡å—"
    ]
  },
  {
    "objectID": "0001-guide.html#æŒ‰ä½¿ç”¨åœºæ™¯é€‰æ‹©",
    "href": "0001-guide.html#æŒ‰ä½¿ç”¨åœºæ™¯é€‰æ‹©",
    "title": "R è¯­è¨€å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š",
    "section": "æŒ‰ä½¿ç”¨åœºæ™¯é€‰æ‹©",
    "text": "æŒ‰ä½¿ç”¨åœºæ™¯é€‰æ‹©\n\nå†™è®ºæ–‡\n\nåŸºçº¿è¡¨ï¼šcompareGroups æˆ– gtsummary â­æ–°å¢\næ£®æ—å›¾ï¼šæ£®æ—å›¾ç»‘åˆ¶ æˆ– äºšç»„åˆ†æ\né…è‰²ï¼šç§‘å­¦æœŸåˆŠé…è‰²\næ­£åˆ™è¡¨è¾¾å¼ï¼šæ­£åˆ™è¡¨è¾¾å¼ â­æ–°å¢\nå›¾è¡¨ç»„åˆï¼špatchwork æˆ– å¤æ‚ç»„åˆå›¾\n\n\n\nåšæµè¡Œç—…å­¦ç ”ç©¶\n\né˜Ÿåˆ—ç ”ç©¶ï¼šç”Ÿå­˜åˆ†æ + PSM + ç«äº‰é£é™© â­æ–°å¢\nç—…ä¾‹å¯¹ç…§ï¼šLogistic å›å½’\nå‰‚é‡ååº”ï¼šRCS + GAM\nMeta åˆ†æï¼šMeta æˆ– ç½‘çŠ¶ Meta\näºšç»„åˆ†æï¼šäºšç»„åˆ†æä¸äº¤äº’ä½œç”¨ â­æ–°å¢\næ•°æ®åº“ä½¿ç”¨ï¼šä¸»æµç§‘ç ”æ•°æ®åº“æŒ‡å— â­æ–°å¢\nå·¥å…·å˜é‡ï¼šå·¥å…·å˜é‡æ³• (IV) â­æ–°å¢\n\n\n\nåšé—®å·ç ”ç©¶\n\né‡è¡¨éªŒè¯ï¼šEFA/CFA\nè·¯å¾„åˆ†æï¼šSEM æˆ– PLS-PM\näººç¾¤åˆ†ç±»ï¼šLCA\nå¯è§†åŒ–ï¼šé›·è¾¾å›¾\n\n\n\nåšæœºå™¨å­¦ä¹ \n\nå…¥é—¨æ¡†æ¶ï¼šmlr3 æœºå™¨å­¦ä¹  æˆ– tidymodels\né‚»è¿‘ç®—æ³•ï¼šKNN æœ€è¿‘é‚»\næ¦‚ç‡æ¨¡å‹ï¼šæœ´ç´ è´å¶æ–¯\næ ‘æ¨¡å‹ï¼šéšæœºæ£®æ—ä¸å†³ç­–æ ‘\næå‡æ ‘æ¨¡å‹ï¼šGBDT æ¢¯åº¦æå‡æ ‘\næ ¸æ–¹æ³•ï¼šæ”¯æŒå‘é‡æœº (SVM)\né›†æˆå­¦ä¹ ï¼šé›†æˆå­¦ä¹ \né™ç»´æ–¹æ³•ï¼šé™ç»´ (PCA/UMAP/t-SNE)\nå¼‚å¸¸æ£€æµ‹ï¼šæ— ç›‘ç£å¼‚å¸¸æ£€æµ‹\nåµŒå¥—äº¤å‰éªŒè¯ï¼šåµŒå¥—äº¤å‰éªŒè¯\næ¨¡å‹æ•´ç†ï¼šbroom æ¨¡å‹æ•´ç†\næ—¶åºé¢„æµ‹ï¼šæ—¶é—´åºåˆ—åˆ†æ\næ·±åº¦å­¦ä¹ ï¼šLSTM æ—¶é—´åºåˆ—é¢„æµ‹\nç”Ÿå­˜é¢„æµ‹ï¼šéšæœºç”Ÿå­˜æ£®æ—\nå¹¶è¡ŒåŠ é€Ÿï¼šfuture å¹¶è¡Œè®¡ç®—\næ¨¡å‹å¯è§†åŒ–ï¼šæœºå™¨å­¦ä¹ å¯è§†åŒ–\n\n\n\nåšç»¼è¿°ç ”ç©¶\n\nç³»ç»Ÿç»¼è¿°ï¼šèŒƒå›´ç»¼è¿° èµ·æ­¥\nå®šé‡ç»¼åˆï¼šMeta åˆ†æ\nå¤šå¹²é¢„æ¯”è¾ƒï¼šç½‘çŠ¶ Meta\nè¯æ®åˆ†çº§ï¼šä¼çŠ¶ç»¼è¿°",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“˜ å­¦ä¹ è·¯çº¿",
      "æ–°æ‰‹å…¥é—¨æŒ‡å—"
    ]
  },
  {
    "objectID": "0001-guide.html#å¦‚ä½•ä½¿ç”¨æœ¬ç«™",
    "href": "0001-guide.html#å¦‚ä½•ä½¿ç”¨æœ¬ç«™",
    "title": "R è¯­è¨€å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š",
    "section": "å¦‚ä½•ä½¿ç”¨æœ¬ç«™",
    "text": "å¦‚ä½•ä½¿ç”¨æœ¬ç«™\n\nå¯¼èˆªç»“æ„\næœ¬ç«™é‡‡ç”¨äºŒçº§ç›®å½•ç»“æ„ï¼Œå¸®åŠ©ä½ å¿«é€Ÿæ‰¾åˆ°éœ€è¦çš„å†…å®¹ï¼š\n\né¡¶éƒ¨å¯¼èˆªæ ï¼š\n\næ‚¬åœ/ç‚¹å‡»å¯å±•å¼€ä¸‹æ‹‰èœå•\nåŒ…å« 4 ä¸ªä¸»åˆ†ç±»ï¼Œæ¯ä¸ªåˆ†ç±»ä¸‹æœ‰ 3-8 ä¸ªå­åˆ†ç±»\nç§»åŠ¨ç«¯åœ¨æ±‰å ¡èœå•å†…å¯å±•å¼€\n\nå·¦ä¾§è¾¹æ ï¼š\n\næ”¯æŒä¸¤çº§å±•å¼€/æŠ˜å \nå…ˆç‚¹å‡»ä¸€çº§åˆ†ç±»å±•å¼€ï¼Œå†ç‚¹å‡»äºŒçº§å­åˆ†ç±»æŸ¥çœ‹å…·ä½“æ–‡ç« \nä¾‹å¦‚ï¼šR è¯­è¨€æ–¹æ³• â†’ ğŸ”¢ å›å½’åˆ†æ â†’ Logistic å›å½’\n\n\n\n\nå¿«é€Ÿå…¥å£\n\n\n\nåˆ†ç±»\nå­åˆ†ç±»æ•°\nå†…å®¹\n\n\n\n\nå®ç”¨ R åŒ…\n3\nè¡¨æ ¼åˆ¶ä½œã€æ•°æ®å¤„ç†ã€æ¨¡å‹æ•´ç†\n\n\nå¯è§†åŒ–æ•™ç¨‹\n5\nå›¾å½¢åŸºç¡€ã€ç»„åˆã€ç»Ÿè®¡å›¾è¡¨ã€ä¸“é¢˜å›¾ã€è¿›é˜¶ç¾åŒ–\n\n\nR è¯­è¨€æ–¹æ³•\n8\nå›å½’ã€ç”Ÿå­˜ã€å› æœã€å»ºæ¨¡ã€MLã€é¢„å¤„ç†ã€ç»¼è¿°ã€ç‰¹æ®Š\n\n\nå®ç”¨æ“ä½œ\n3\næ•°æ®IOã€æ–‡æ¡£ã€å¼€å‘ç¯å¢ƒ\n\n\n\n\n\nå…¶ä»–åŠŸèƒ½\n\næœç´¢åŠŸèƒ½ï¼šåœ¨é¡µé¢é¡¶éƒ¨æœç´¢å…³é”®è¯\néšæœºç¬”è®°ï¼šé¦–é¡µå³ä¾§æ¯æ¬¡åˆ·æ–°éšæœºæ¨èä¸€ç¯‡\nä»£ç å¤åˆ¶ï¼šæ¯ä¸ªä»£ç å—å³ä¸Šè§’æœ‰å¤åˆ¶æŒ‰é’®\nç§»åŠ¨ç«¯ï¼šå·¦ä¸‹è§’æ‚¬æµ®æŒ‰é’®å¯æ‰“å¼€æ–‡ç« ç›®å½•",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“˜ å­¦ä¹ è·¯çº¿",
      "æ–°æ‰‹å…¥é—¨æŒ‡å—"
    ]
  },
  {
    "objectID": "0001-guide.html#æŒç»­æ›´æ–°",
    "href": "0001-guide.html#æŒç»­æ›´æ–°",
    "title": "R è¯­è¨€å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š",
    "section": "æŒç»­æ›´æ–°",
    "text": "æŒç»­æ›´æ–°\næœ¬ç«™å†…å®¹æŒç»­æ›´æ–°ä¸­ï¼Œæ¬¢è¿æ”¶è—å¹¶å®šæœŸè®¿é—®ï¼\n\n\nå¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨ GitHub æ Issueï¼",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“˜ å­¦ä¹ è·¯çº¿",
      "æ–°æ‰‹å…¥é—¨æŒ‡å—"
    ]
  },
  {
    "objectID": "0011-rmarkdown.html",
    "href": "0011-rmarkdown.html",
    "title": "rmarkdownæ•™ç¨‹-åˆå­¦rè¯­è¨€æ¨è",
    "section": "",
    "text": "rmarkdownæ˜¯ä¸€ç§å°†rè¯­è¨€ä»£ç å’Œmarkdownè¯­æ³•æ•´åˆåœ¨ä¸€èµ·çš„å·¥å…·ï¼Œå®ƒå¯ä»¥å°†rè¯­è¨€ä»£ç çš„æ‰§è¡Œç»“æœå’Œæ–‡å­—ã€å›¾ç‰‡ã€è¡¨æ ¼ç­‰å†…å®¹æ•´åˆåœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„æ–‡æ¡£ã€‚rmarkdownçš„æ–‡æ¡£å¯ä»¥å¯¼å‡ºä¸ºhtmlã€pdfã€wordç­‰æ ¼å¼çš„æ–‡æ¡£ã€‚rmarkdownçš„æ–‡æ¡£å¯ä»¥åœ¨githubä¸Šå…è´¹å‘å¸ƒï¼Œä¹Ÿå¯ä»¥åœ¨rstudioä¸Šå…è´¹å‘å¸ƒã€‚rmarkdownçš„æ–‡æ¡£å¯ä»¥åœ¨\nrmarkdownä¸»è¦ç”¨äºé€æ®µè¿è¡Œä»£ç å¹¶å±•ç¤ºç»“æœï¼Œç”Ÿæˆæ¼”ç¤ºæ–‡æ¡£ï¼Œç”Ÿæˆhtmlç”¨äºå…¶å®ƒå¹³å°å‘å¸ƒï¼Œæ­é…bookdownæ­å»ºç½‘é¡µæ•™ç¨‹\nåˆšå­¦ä¹ rè¯­è¨€çš„åŒå­¦å¯ä»¥ä½¿ç”¨rmarkdownæ¥å­¦ä¹ rè¯­è¨€ï¼Œä¸ä»…å¯ä»¥åœ¨æ®µè½ä¸­é—´ç©¿æ’ä¸ªäººè¯´æ˜ï¼ŒåŒæ—¶ç”¨markdownçš„å¤§çº²ç¬¦å·â€œ#â€å¯ä»¥è®©ä»£ç ç»“æ„æ¸…æ™°",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "RMarkdown å…¥é—¨"
    ]
  },
  {
    "objectID": "0011-rmarkdown.html#rmarkdownä»‹ç»",
    "href": "0011-rmarkdown.html#rmarkdownä»‹ç»",
    "title": "rmarkdownæ•™ç¨‹-åˆå­¦rè¯­è¨€æ¨è",
    "section": "",
    "text": "rmarkdownæ˜¯ä¸€ç§å°†rè¯­è¨€ä»£ç å’Œmarkdownè¯­æ³•æ•´åˆåœ¨ä¸€èµ·çš„å·¥å…·ï¼Œå®ƒå¯ä»¥å°†rè¯­è¨€ä»£ç çš„æ‰§è¡Œç»“æœå’Œæ–‡å­—ã€å›¾ç‰‡ã€è¡¨æ ¼ç­‰å†…å®¹æ•´åˆåœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„æ–‡æ¡£ã€‚rmarkdownçš„æ–‡æ¡£å¯ä»¥å¯¼å‡ºä¸ºhtmlã€pdfã€wordç­‰æ ¼å¼çš„æ–‡æ¡£ã€‚rmarkdownçš„æ–‡æ¡£å¯ä»¥åœ¨githubä¸Šå…è´¹å‘å¸ƒï¼Œä¹Ÿå¯ä»¥åœ¨rstudioä¸Šå…è´¹å‘å¸ƒã€‚rmarkdownçš„æ–‡æ¡£å¯ä»¥åœ¨\nrmarkdownä¸»è¦ç”¨äºé€æ®µè¿è¡Œä»£ç å¹¶å±•ç¤ºç»“æœï¼Œç”Ÿæˆæ¼”ç¤ºæ–‡æ¡£ï¼Œç”Ÿæˆhtmlç”¨äºå…¶å®ƒå¹³å°å‘å¸ƒï¼Œæ­é…bookdownæ­å»ºç½‘é¡µæ•™ç¨‹\nåˆšå­¦ä¹ rè¯­è¨€çš„åŒå­¦å¯ä»¥ä½¿ç”¨rmarkdownæ¥å­¦ä¹ rè¯­è¨€ï¼Œä¸ä»…å¯ä»¥åœ¨æ®µè½ä¸­é—´ç©¿æ’ä¸ªäººè¯´æ˜ï¼ŒåŒæ—¶ç”¨markdownçš„å¤§çº²ç¬¦å·â€œ#â€å¯ä»¥è®©ä»£ç ç»“æ„æ¸…æ™°",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "RMarkdown å…¥é—¨"
    ]
  },
  {
    "objectID": "0011-rmarkdown.html#rmarkdownä½¿ç”¨",
    "href": "0011-rmarkdown.html#rmarkdownä½¿ç”¨",
    "title": "rmarkdownæ•™ç¨‹-åˆå­¦rè¯­è¨€æ¨è",
    "section": "rmarkdownä½¿ç”¨",
    "text": "rmarkdownä½¿ç”¨\nåœ¨å·¥å…·æ æ–°å»ºrmarkdownæ–‡æ¡£ï¼Œä¼šç”Ÿæˆæ¨¡æ¿æ–‡ä»¶ï¼Œåœ¨æ¨¡æ¿æ–‡ä»¶çš„åŸºç¡€ä¸Šå¢åˆ ä¿®æ”¹",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "RMarkdown å…¥é—¨"
    ]
  },
  {
    "objectID": "0011-rmarkdown.html#rmarkdownç•Œé¢",
    "href": "0011-rmarkdown.html#rmarkdownç•Œé¢",
    "title": "rmarkdownæ•™ç¨‹-åˆå­¦rè¯­è¨€æ¨è",
    "section": "rmarkdownç•Œé¢",
    "text": "rmarkdownç•Œé¢\n\n\nå…ˆæŠŠyamlé‡Œçš„æ–‡æ¡£åŸå±æ€§è¿›è¡Œä¿®æ”¹ï¼Œä½œè€…æ ‡é¢˜ä¿®æ”¹ä¸€ä¸‹ï¼ŒåæœŸå¦‚æœè¦å‘å¸ƒå±•ç¤ºä¼šæ˜¾ç¤ºåœ¨é¡µé¢æœ€ä¸Šæ–¹\nç”¨markdownè¯­æ³•æ–°å»ºå¤§çº²æ ‡é¢˜ï¼Œç”¨â€œ#â€ç¬¦å·ï¼Œâ€œ#â€ç¬¦å·è¶Šå¤šï¼Œæ ‡é¢˜å­—å·è¶Šå°\nç”¨å¿«æ·é”®â€œctrl+alt+iâ€å¯ä»¥åœ¨å½“å‰ä½ç½®æ’å…¥ä»£ç å—ï¼Œç”¨â€œctrl+alt+oâ€å¯ä»¥åœ¨å½“å‰ä½ç½®æ’å…¥è¾“å‡ºå—\nå°è¯•è¿è¡Œè‡ªå·±çš„ä»£ç å§",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "RMarkdown å…¥é—¨"
    ]
  },
  {
    "objectID": "0011-rmarkdown.html#rticlesåŒ…-rmarkdownæ¨¡æ¿",
    "href": "0011-rmarkdown.html#rticlesåŒ…-rmarkdownæ¨¡æ¿",
    "title": "rmarkdownæ•™ç¨‹-åˆå­¦rè¯­è¨€æ¨è",
    "section": "rticlesåŒ…-rmarkdownæ¨¡æ¿",
    "text": "rticlesåŒ…-rmarkdownæ¨¡æ¿\nå®‰è£…rticlesåŒ…ä¹‹åï¼Œåœ¨æ–°å»ºrmdæ–‡ä»¶å¤„å°±èƒ½çœ‹åˆ°ä¸åŒçš„æ¨¡æ¿ï¼Œé€‰æ‹©ä¸€ä¸ªæ¨¡æ¿ï¼Œå°±å¯ä»¥ç”Ÿæˆä¸€ä¸ªæ¨¡æ¿æ–‡ä»¶ï¼Œæ¨¡æ¿æ–‡ä»¶çš„å†…å®¹å’Œæ¨¡æ¿çš„å†…å®¹æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æ¨¡æ¿æ–‡ä»¶çš„å†…å®¹æ›´åŠ å®Œå–„ï¼Œæ¨¡æ¿æ–‡ä»¶çš„å†…å®¹å¯ä»¥ç›´æ¥è¿è¡Œï¼Œæ¨¡æ¿æ–‡ä»¶çš„å†…å®¹å¯ä»¥å¯¼å‡ºä¸ºhtmlã€pdfã€wordç­‰æ ¼å¼çš„æ–‡æ¡£ï¼Œæ¨¡æ¿æ–‡ä»¶çš„å†…å®¹å¯ä»¥åœ¨githubä¸Šå…è´¹å‘å¸ƒï¼Œä¹Ÿå¯ä»¥åœ¨rstudioä¸Šå…è´¹å‘å¸ƒ\nå®‰è£…prettydocåŒ…ä¹Ÿæ˜¯ä¸€æ ·çš„æ•ˆæœ",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "RMarkdown å…¥é—¨"
    ]
  },
  {
    "objectID": "0011-rmarkdown.html#rmarkdownç¼–è¯‘",
    "href": "0011-rmarkdown.html#rmarkdownç¼–è¯‘",
    "title": "rmarkdownæ•™ç¨‹-åˆå­¦rè¯­è¨€æ¨è",
    "section": "rmarkdownç¼–è¯‘",
    "text": "rmarkdownç¼–è¯‘\nä»£ç å®Œæˆåå³å¯ç‚¹å‡»rstudioçš„â€œknitâ€æŒ‰é’®ï¼Œå³å¯ç¼–è¯‘ï¼Œç¼–è¯‘åä¼šç”Ÿæˆä¸€ä¸ªhtmlæ–‡ä»¶ï¼Œåœ¨htmlæ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ°ä»£ç çš„è¿è¡Œç»“æœï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å¯¼å‡ºä¸ºpdfã€wordç­‰æ ¼å¼çš„æ–‡æ¡£ï¼Œå¯¼å‡ºçš„æ–‡æ¡£å¯ä»¥åœ¨githubä¸Šå…è´¹å‘å¸ƒï¼Œä¹Ÿå¯ä»¥åœ¨rstudioä¸Šå…è´¹å‘å¸ƒ",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "RMarkdown å…¥é—¨"
    ]
  },
  {
    "objectID": "0011-rmarkdown.html#rmarkdownçš„å—è®¾ç½®",
    "href": "0011-rmarkdown.html#rmarkdownçš„å—è®¾ç½®",
    "title": "rmarkdownæ•™ç¨‹-åˆå­¦rè¯­è¨€æ¨è",
    "section": "rmarkdownçš„å—è®¾ç½®",
    "text": "rmarkdownçš„å—è®¾ç½®\nrmarkdownä¸»è¦æ˜¯ç”¨äºä»£ç å¯¼å‡ºç»“æœå±•ç¤ºçš„åŒ…ï¼ŒåŒæ—¶åœ¨å¯¼å‡ºæ—¶æˆ‘ä»¬ä¼šæœ‰ä¾§é‡çš„è®¾ç½®æŸäº›ä»£ç å—çš„è¿è¡Œã€‚ä¾‹å¦‚ï¼šè®¾ç½®ä¸€äº›å—ä¸è¿è¡Œï¼Œä¸€äº›å—è¿è¡Œä½†æ˜¯ä¸æ˜¾ç¤ºä¿¡æ¯ï¼Œä¸€äº›å—è¿è¡Œä½†æ˜¯ä¸æŠ¥é”™ï¼Œä¸€äº›å—è¿è¡Œä½†æ˜¯ä¸æ˜¾ç¤ºç»“æœã€‚\nrmdçš„å—è®¾ç½®å…±æœ‰7ç§ï¼ŒCode evaluationã€Resultsã€Code Decorationã€Chunksã€Cacheã€Animationã€Plotsã€‚çœ‹èµ·æ¥å¤æ‚ï¼Œå…¶å®å®é™…ä½¿ç”¨åˆ°çš„ä¹Ÿå°±å‡ ä¸ªï¼Œå¤§å®¶å…ˆè¿‡ä¸€éï¼Œä»¥åæ…¢æ…¢ç†Ÿæ‚‰ã€‚\n\nå¦‚ä½•æ·»åŠ å—è®¾ç½®\nåœ¨å—å¤´å¤„å’Œrç”¨ç©ºæ ¼éš”å¼€ï¼Œä¸åŒè®¾ç½®é—´ç”¨â€œ,â€éš”å¼€\n\n\n\nCode evaluation-è®¾ç½®å—æ˜¯å¦è¿è¡Œ\n\nevalå‚æ•° ç¤ºä¾‹ï¼šâ€œeval=Fâ€\nå¯è®¾ç½®ä¸è¿è¡Œä»£ç ,æ³¨æ„è¿™é‡Œä¸è¿è¡Œä»£ç \n\nprint('è¿™æ˜¯è¿è¡Œç»“æœ')\n\n\n\nincludeå‚æ•° ç¤ºä¾‹ï¼šâ€œinclude=Fâ€\nè¿™é‡Œå…¶å®æ˜¯æœ‰ä»£ç çš„ï¼Œä½†æ˜¯å¸¦ç€è¾“å‡ºè¢«ä¸€èµ·éšè—äº†ï¼ˆå ä½ç¬¦ï¼‰\n\n\nResultså‚æ•°,è®¾ç½®ç»“æœè¾“å‡º\n\nprint(\"è¿™æ˜¯è®¾ç½® result = 'hide'çš„è¿è¡Œç»“æœ,è™½ç„¶è¿è¡Œäº†ï¼Œä½†æ˜¯ä¸æ˜¾ç¤º\")\n\n\n\ncollapseå‚æ•° ,ä¸ºTè¡¨ç¤ºä»£ç å’Œç»“æœä¸€èµ·è¾“å‡º\nä¸‹æ–¹è®¾ç½®ä¸ºFæ•ˆæœ\n\nprint('è¿™æ˜¯è¿è¡Œç»“æœ')\n\n[1] \"è¿™æ˜¯è¿è¡Œç»“æœ\"\n\n\n\n\n\nechoå‚æ•°ï¼Œè¾“å‡ºæ–‡æ¡£æ˜¯å¦æ˜¾ç¤ºä»£ç \nè®¾ç½®ä¸ºFä¹‹åï¼Œè¿è¡Œä»£ç ï¼Œä½†æ˜¯åªæ˜¾ç¤ºç»“æœä¸æ˜¾ç¤ºä»£ç \n\n\n[1] \"è¿™æ˜¯è¿è¡Œç»“æœ\"\n\n\n\n\nerrorã€warningã€messageä¸ºåŒä¸€ç±»å‚æ•°ï¼Œå½“ä»£ç ä¸­æœ‰è­¦å‘Šæˆ–è€…é”™è¯¯ä¿¡æ¯æ—¶æ˜¯å¦å±•ç¤ºï¼Œå¦‚æœä¸ºFæ—¶å³ä¸å±•ç¤ºã€‚\n\nprint('è¿™æ˜¯è¿è¡Œç»“æœ')\n\n[1] \"è¿™æ˜¯è¿è¡Œç»“æœ\"",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "RMarkdown å…¥é—¨"
    ]
  },
  {
    "objectID": "0011-rmarkdown.html#æ›´å¤šæ•™ç¨‹",
    "href": "0011-rmarkdown.html#æ›´å¤šæ•™ç¨‹",
    "title": "rmarkdownæ•™ç¨‹-åˆå­¦rè¯­è¨€æ¨è",
    "section": "æ›´å¤šæ•™ç¨‹",
    "text": "æ›´å¤šæ•™ç¨‹\nä¸­é—´ä»‹ç»äº†å‡ ä¸ªæˆ‘å¸¸ç”¨çš„ï¼Œæ›´å¤šçš„rmdæ•™ç¨‹å¯ç›´æ¥é˜…è¯»å®˜æ–¹çš„ä½¿ç”¨æ‰‹å†Œ",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "RMarkdown å…¥é—¨"
    ]
  },
  {
    "objectID": "0013-positron.html",
    "href": "0013-positron.html",
    "title": "Positron IDE å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "Positron æ˜¯ç”± Posit PBCï¼ˆåŸ RStudio å…¬å¸ï¼‰å¼€å‘çš„ä¸‹ä¸€ä»£æ•°æ®ç§‘å­¦é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰ã€‚å®ƒçš„ç›®æ ‡æ˜¯ç»“åˆ VS Code çš„å¼ºå¤§æ‰©å±•ä¸å·¥ç¨‹èƒ½åŠ› ä»¥åŠ RStudio çš„æ˜“ç”¨æ€§ä¸æ•°æ®ç§‘å­¦ç›´è§‰ã€‚\n\nå†…æ ¸ï¼šåŸºäº Code OSS (VS Code çš„å¼€æºæ ¸å¿ƒ)ï¼Œè¿™æ„å‘³ç€å®ƒå¤©ç”Ÿæ‹¥æœ‰ VS Code çš„æ‰€æœ‰ä¼˜ç‚¹ï¼ˆæ’ä»¶ç”Ÿæ€ã€Git é›†æˆã€å¤šè¯­è¨€æ”¯æŒï¼‰ã€‚\nå®šä½ï¼šå®ƒä¸æ˜¯ RStudio çš„ç»§ä»»è€…ï¼ˆRStudio ä»ä¼šé•¿æœŸç»´æŠ¤ï¼‰ï¼Œè€Œæ˜¯ä¸€ä¸ªå…¨æ–°çš„ã€å¤šè¯­è¨€ï¼ˆFirst-class R & Python supportï¼‰çš„æ¢ç´¢æ€§ç¼–ç¨‹ç¯å¢ƒã€‚\n\n\n\n\n\n\nç‰¹æ€§\nPositron\nRStudio\nVS Code\n\n\n\n\nR æ”¯æŒ\nä¸€æµ\nä¸€æµ\néœ€è¦é…ç½®\n\n\nPython æ”¯æŒ\nä¸€æµ\næœ‰é™\nä¸€æµ\n\n\næ’ä»¶ç”Ÿæ€\nä¸°å¯Œ\næœ‰é™\næä¸°å¯Œ\n\n\næ•°æ®æŸ¥çœ‹å™¨\nå†…ç½®å¢å¼ºç‰ˆ\nå†…ç½®\néœ€æ‰©å±•\n\n\nå˜é‡é¢æ¿\nä¸€æµ\nä¸€æµ\néœ€æ‰©å±•\n\n\nç»˜å›¾ç®¡ç†\nä¸“ä¸š\nä¸“ä¸š\nåŸºç¡€\n\n\nå­¦ä¹ æ›²çº¿\nä¸­ç­‰\nä½\nè¾ƒé«˜\n\n\n\n\n[!TIP] å¦‚æœä½ åŒæ—¶ä½¿ç”¨ R å’Œ Python è¿›è¡Œæ•°æ®åˆ†æï¼ŒPositron æ˜¯ç›®å‰æœ€ä½³é€‰æ‹©ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Positron IDE æ•™ç¨‹"
    ]
  },
  {
    "objectID": "0013-positron.html#ä¸ºä»€ä¹ˆé€‰æ‹©-positron",
    "href": "0013-positron.html#ä¸ºä»€ä¹ˆé€‰æ‹©-positron",
    "title": "Positron IDE å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "ç‰¹æ€§\nPositron\nRStudio\nVS Code\n\n\n\n\nR æ”¯æŒ\nä¸€æµ\nä¸€æµ\néœ€è¦é…ç½®\n\n\nPython æ”¯æŒ\nä¸€æµ\næœ‰é™\nä¸€æµ\n\n\næ’ä»¶ç”Ÿæ€\nä¸°å¯Œ\næœ‰é™\næä¸°å¯Œ\n\n\næ•°æ®æŸ¥çœ‹å™¨\nå†…ç½®å¢å¼ºç‰ˆ\nå†…ç½®\néœ€æ‰©å±•\n\n\nå˜é‡é¢æ¿\nä¸€æµ\nä¸€æµ\néœ€æ‰©å±•\n\n\nç»˜å›¾ç®¡ç†\nä¸“ä¸š\nä¸“ä¸š\nåŸºç¡€\n\n\nå­¦ä¹ æ›²çº¿\nä¸­ç­‰\nä½\nè¾ƒé«˜\n\n\n\n\n[!TIP] å¦‚æœä½ åŒæ—¶ä½¿ç”¨ R å’Œ Python è¿›è¡Œæ•°æ®åˆ†æï¼ŒPositron æ˜¯ç›®å‰æœ€ä½³é€‰æ‹©ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Positron IDE æ•™ç¨‹"
    ]
  },
  {
    "objectID": "0013-positron.html#ä¸‹è½½ä¸å®‰è£…",
    "href": "0013-positron.html#ä¸‹è½½ä¸å®‰è£…",
    "title": "Positron IDE å®Œå…¨æŒ‡å—",
    "section": "1.1 ä¸‹è½½ä¸å®‰è£…",
    "text": "1.1 ä¸‹è½½ä¸å®‰è£…\nPositron ç›®å‰ï¼ˆ2025/2026ï¼‰ä»å¤„äºæ´»è·ƒå¼€å‘é˜¶æ®µï¼ˆPublic Betaï¼‰ï¼Œå®˜æ–¹ä¸»è¦é€šè¿‡ GitHub å‘å¸ƒæ›´æ–°ã€‚\nä¸‹è½½æ­¥éª¤ï¼š\n\nè®¿é—® Positron GitHub Releases é¡µé¢\né€‰æ‹©æœ€æ–°çš„ Pre-release ç‰ˆæœ¬\nä¸‹è½½å¯¹åº”æ“ä½œç³»ç»Ÿçš„å®‰è£…åŒ…ï¼š\n\nWindows: .exe å®‰è£…æ–‡ä»¶\nmacOS: .dmg ç£ç›˜æ˜ åƒ\nLinux: .deb æˆ– .rpm åŒ…\n\n\nå®‰è£…æ³¨æ„äº‹é¡¹ï¼š\n\nWindows ç”¨æˆ·å¯èƒ½éœ€è¦ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå®‰è£…ç¨‹åº\né¦–æ¬¡å¯åŠ¨ä¼šè‡ªåŠ¨æ£€æµ‹å·²å®‰è£…çš„ R å’Œ Python\nå»ºè®®ä¿æŒé»˜è®¤å®‰è£…è·¯å¾„",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Positron IDE æ•™ç¨‹"
    ]
  },
  {
    "objectID": "0013-positron.html#è§£é‡Šå™¨ç®¡ç†-interpreters",
    "href": "0013-positron.html#è§£é‡Šå™¨ç®¡ç†-interpreters",
    "title": "Positron IDE å®Œå…¨æŒ‡å—",
    "section": "1.2 è§£é‡Šå™¨ç®¡ç† (Interpreters)",
    "text": "1.2 è§£é‡Šå™¨ç®¡ç† (Interpreters)\nå®‰è£…å®Œæˆåï¼Œæœ€é‡è¦çš„ç¬¬ä¸€æ­¥æ˜¯å‘Šè¯‰ Positron ä½ çš„ R å’Œ Python åœ¨å“ªé‡Œã€‚\n\nè‡ªåŠ¨æ£€æµ‹\nPositron æ‹¥æœ‰å¼ºå¤§çš„è‡ªåŠ¨å‘ç°æœºåˆ¶ï¼Œä¼šæ‰«æï¼š\n\nç³»ç»Ÿ PATH ä¸­çš„è§£é‡Šå™¨\nConda ç¯å¢ƒ\nPyenv è™šæ‹Ÿç¯å¢ƒ\nrenv é¡¹ç›®ç¯å¢ƒ\nå¸¸è§å®‰è£…è·¯å¾„\n\n\n\næ‰‹åŠ¨åˆ‡æ¢è§£é‡Šå™¨\næ–¹æ³• Aï¼šç‚¹å‡»çª—å£å³ä¸Šè§’çš„è§£é‡Šå™¨ç‰ˆæœ¬å·ï¼ˆä¾‹å¦‚ R 4.5.0 æˆ– Python 3.12ï¼‰\næ–¹æ³• Bï¼šä½¿ç”¨å‘½ä»¤é¢æ¿ 1. æŒ‰ F1 æˆ– Ctrl+Shift+P 2. è¾“å…¥ &gt; Positron: Select Interpreter 3. é€‰æ‹©éœ€è¦çš„è§£é‡Šå™¨ç‰ˆæœ¬\n\n\n\n\n\n\nNote\n\n\n\nå¯¹äº Python ç”¨æˆ·ï¼ŒPositron ä¼šè‡ªåŠ¨è¯†åˆ«é¡¹ç›®æ–‡ä»¶å¤¹å†…çš„ .venv æˆ– conda ç¯å¢ƒï¼Œå¹¶åœ¨æ‰“å¼€é¡¹ç›®æ—¶è‡ªåŠ¨æ¿€æ´»ã€‚\n\n\n\n\nè§£é‡Šå™¨ç®¡ç†æœ€ä½³å®è·µ\n\n\n\nåœºæ™¯\næ¨èé…ç½®\n\n\n\n\næ—¥å¸¸åˆ†æ\nä½¿ç”¨ç³»ç»Ÿé»˜è®¤ R/Python\n\n\né¡¹ç›®å¼€å‘\nä½¿ç”¨ renv/venv éš”ç¦»ç¯å¢ƒ\n\n\næ•™å­¦æ¼”ç¤º\nå›ºå®šç‰¹å®šç‰ˆæœ¬\n\n\nå¤šç‰ˆæœ¬æµ‹è¯•\næŒ‰éœ€åˆ‡æ¢",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Positron IDE æ•™ç¨‹"
    ]
  },
  {
    "objectID": "0013-positron.html#å…³é”®æ‰©å±•æ¨è",
    "href": "0013-positron.html#å…³é”®æ‰©å±•æ¨è",
    "title": "Positron IDE å®Œå…¨æŒ‡å—",
    "section": "1.3 å…³é”®æ‰©å±•æ¨è",
    "text": "1.3 å…³é”®æ‰©å±•æ¨è\nPositron å…¼å®¹ VS Code æ’ä»¶å¸‚åœºï¼ˆOpen VSX æˆ–å¾®è½¯å¸‚åœºï¼‰ã€‚é€šè¿‡å·¦ä¾§ä¾§è¾¹æ çš„ Extensions å›¾æ ‡å®‰è£…ï¼š\n\nå¿…è£…æ‰©å±•\n\n\n\næ‰©å±•å\nç”¨é€”\nè¯´æ˜\n\n\n\n\nChinese (Simplified)\nä¸­æ–‡ç•Œé¢\nè®©ç•Œé¢å˜ä¸ºä¸­æ–‡\n\n\nQuarto\næ–‡æ¡£æ¸²æŸ“\n.qmd è¯­æ³•é«˜äº®å’Œé¢„è§ˆ\n\n\nShiny\nShiny å¼€å‘\nè¿è¡Œå’Œè°ƒè¯• Shiny åº”ç”¨\n\n\nRainbow CSV\nCSV æŸ¥çœ‹\nCSV åˆ—é«˜äº®æ˜¾ç¤º\n\n\nGitHub Copilot\nAI è¾…åŠ©\nä»£ç è¡¥å…¨å’Œå»ºè®®\n\n\n\n\n\nå¯é€‰æ‰©å±•\n\n\n\næ‰©å±•å\nç”¨é€”\n\n\n\n\nGitLens\nGit å¢å¼ºåŠŸèƒ½\n\n\nError Lens\nå†…è”é”™è¯¯æ˜¾ç¤º\n\n\nMarkdown All in One\nMarkdown å¢å¼º\n\n\nMaterial Icon Theme\nç¾è§‚å›¾æ ‡ä¸»é¢˜\n\n\nOne Dark Pro\næš—è‰²ä¸»é¢˜",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Positron IDE æ•™ç¨‹"
    ]
  },
  {
    "objectID": "0013-positron.html#å››å¤§æ ¸å¿ƒé¢æ¿",
    "href": "0013-positron.html#å››å¤§æ ¸å¿ƒé¢æ¿",
    "title": "Positron IDE å®Œå…¨æŒ‡å—",
    "section": "2.1 å››å¤§æ ¸å¿ƒé¢æ¿",
    "text": "2.1 å››å¤§æ ¸å¿ƒé¢æ¿\n\n1. ç¼–è¾‘å™¨ (Editor)\nä½äºç•Œé¢ä¸­å¤®ï¼Œç”¨äºç¼–å†™ä»£ç ï¼š\n\nåˆ†å±æ”¯æŒï¼šå³é”®ç‚¹å‡»æ ‡ç­¾é¡µé€‰æ‹©â€Split Right/Downâ€\nMarkdown é¢„è§ˆï¼š.qmd å’Œ .rmd æ–‡ä»¶æ”¯æŒå®æ—¶é¢„è§ˆ\nä»£ç æŠ˜å ï¼šç‚¹å‡»è¡Œå·æ—çš„ç®­å¤´æŠ˜å ä»£ç å—\nå¤šå…‰æ ‡ç¼–è¾‘ï¼šæŒ‰ä½ Alt ç‚¹å‡»æ·»åŠ å¤šä¸ªå…‰æ ‡\n\n\n\n2. æ§åˆ¶å° (Console)\nR Consoleï¼š - çº¯æ­£çš„ R äº¤äº’ç¯å¢ƒ - æ”¯æŒ View() ç­‰ RStudio ç‰¹æœ‰å‘½ä»¤ - Tab è¡¥å…¨å’Œè¯­æ³•é«˜äº®\nPython Console (IPython)ï¼š - åŸºäº IPython å†…æ ¸ - æ”¯æŒé­”æœ¯å‘½ä»¤ï¼ˆå¦‚ %timeit, %matplotlibï¼‰ - ä¸ Jupyter ä½“éªŒä¸€è‡´\n\n\n3. å˜é‡è§†çª— (Variables)\nè¿™æ˜¯ Positron ç›¸å¯¹äº VS Code çš„æœ€å¤§æ”¹è¿›ï¼š\n\næ¸…æ™°åˆ—å‡ºæ‰€æœ‰å½“å‰ç¯å¢ƒå˜é‡\næ˜¾ç¤ºå¯¹è±¡ç±»å‹ã€é•¿åº¦ã€ç®€è¦å†…å®¹\nä¸€é”®å±•å¼€ List å’Œ DataFrame\næ”¯æŒ R å’Œ Python æ•°æ®ç»“æ„\n\n\n\n4. è¾…åŠ©é¢æ¿\nPlots é¢æ¿ï¼š - ä¸“é—¨å±•ç¤ºé™æ€å›¾ç‰‡ï¼ˆggplot2, matplotlibï¼‰ - æ”¯æŒå†å²è®°å½•å›çœ‹ï¼ˆå·¦å³ç®­å¤´åˆ‡æ¢ï¼‰ - å¯å¯¼å‡ºä¸ºå¤šç§æ ¼å¼\nViewer é¢æ¿ï¼š - å±•ç¤º HTML å†…å®¹ - Leaflet åœ°å›¾ã€Plotly äº¤äº’å›¾ã€Shiny åº”ç”¨ - ç½‘é¡µé¢„è§ˆ\nHelp é¢æ¿ï¼š - å†…ç½®å¸®åŠ©æ–‡æ¡£æµè§ˆå™¨ - æ— éœ€è·³å‡º IDE å³å¯æŸ¥çœ‹ ?mean",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Positron IDE æ•™ç¨‹"
    ]
  },
  {
    "objectID": "0013-positron.html#æ•°æ®æµè§ˆå™¨-data-explorer",
    "href": "0013-positron.html#æ•°æ®æµè§ˆå™¨-data-explorer",
    "title": "Positron IDE å®Œå…¨æŒ‡å—",
    "section": "2.2 æ•°æ®æµè§ˆå™¨ (Data Explorer)",
    "text": "2.2 æ•°æ®æµè§ˆå™¨ (Data Explorer)\nåœ¨ RStudio ä¸­ï¼Œæˆ‘ä»¬ä¹ æƒ¯ç”¨ View(df) æŸ¥çœ‹æ•°æ®ã€‚Positron é‡æ–°è®¾è®¡äº†è¿™ä¸ªåŠŸèƒ½ï¼š\n\nå¯åŠ¨æ–¹å¼\n\nåœ¨æ§åˆ¶å°è¾“å…¥ View(df)\nåœ¨ Variables é¢æ¿ç‚¹å‡»æ•°æ®æ¡†æ—çš„è¡¨æ ¼å›¾æ ‡\n\n\n\næ ¸å¿ƒåŠŸèƒ½\n\n\n\nåŠŸèƒ½\nè¯´æ˜\n\n\n\n\næ— é™æ»šåŠ¨\nç™¾ä¸‡çº§è¡Œæ•°æ®æµç•…æ»šåŠ¨\n\n\nåˆ—ç»Ÿè®¡\næ‚¬åœåˆ—åæ˜¾ç¤ºç±»å‹ã€ç¼ºå¤±å€¼ã€Min/Max\n\n\nå¼ºå¤§ç­›é€‰\nç‚¹å‡»æ¼æ–—å›¾æ ‡ï¼Œæ”¯æŒå¤šæ¡ä»¶å’Œæ­£åˆ™è¡¨è¾¾å¼\n\n\næ’åº\nç‚¹å‡»åˆ—å¤´æ’åº\n\n\næœç´¢\nå…¨å±€æœç´¢æ•°æ®å†…å®¹",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Positron IDE æ•™ç¨‹"
    ]
  },
  {
    "objectID": "0013-positron.html#é¡¹ç›®ç®¡ç†-workspace",
    "href": "0013-positron.html#é¡¹ç›®ç®¡ç†-workspace",
    "title": "Positron IDE å®Œå…¨æŒ‡å—",
    "section": "3.1 é¡¹ç›®ç®¡ç† (Workspace)",
    "text": "3.1 é¡¹ç›®ç®¡ç† (Workspace)\nPositron æ²¿ç”¨äº† VS Code çš„ â€œFolder as Projectâ€ ç†å¿µï¼š\n\næ‰“å¼€é¡¹ç›®\n\nèœå•ï¼šFile -&gt; Open Folder...\nç»ˆç«¯ï¼šåœ¨é¡¹ç›®ç›®å½•æ‰§è¡Œ positron .\n\n\n\nR Project æ”¯æŒ\nå¦‚æœæ–‡ä»¶å¤¹å†…æœ‰ .Rproj æ–‡ä»¶ï¼š - Positron è‡ªåŠ¨è¯†åˆ«å¹¶è®¾ç½®å·¥ä½œç›®å½• - æ— éœ€åƒ RStudio é‚£æ ·åŒå‡» .Rproj æ–‡ä»¶ - ç›´æ¥æ‰“å¼€æ–‡ä»¶å¤¹å³å¯\n\n\nrenv é›†æˆ\nPositron è‡ªåŠ¨æ£€æµ‹ renv.lock æ–‡ä»¶å¹¶æ¿€æ´»é¡¹ç›®ç¯å¢ƒã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Positron IDE æ•™ç¨‹"
    ]
  },
  {
    "objectID": "0013-positron.html#å¿«æ·é”®é€ŸæŸ¥è¡¨",
    "href": "0013-positron.html#å¿«æ·é”®é€ŸæŸ¥è¡¨",
    "title": "Positron IDE å®Œå…¨æŒ‡å—",
    "section": "3.2 å¿«æ·é”®é€ŸæŸ¥è¡¨",
    "text": "3.2 å¿«æ·é”®é€ŸæŸ¥è¡¨\n\nä»£ç æ‰§è¡Œ\n\n\n\nåŠ¨ä½œ\nWindows/Linux\nMac\n\n\n\n\nè¿è¡Œå½“å‰è¡Œ/é€‰åŒº\nCtrl + Enter\nCmd + Enter\n\n\nè¿è¡Œæ•´ä¸ªä»£ç å—\nCtrl + Shift + Enter\nCmd + Shift + Enter\n\n\nè¿è¡Œæ•´ä¸ªæ–‡ä»¶\nCtrl + Shift + S\nCmd + Shift + S\n\n\nè¿è¡Œåˆ°å…‰æ ‡å¤„\nCtrl + Alt + B\nCmd + Option + B\n\n\n\n\n\nç¼–è¾‘æ“ä½œ\n\n\n\nåŠ¨ä½œ\nWindows/Linux\nMac\n\n\n\n\nå‘½ä»¤é¢æ¿\nCtrl + Shift + P\nCmd + Shift + P\n\n\næ–‡ä»¶æœç´¢\nCtrl + P\nCmd + P\n\n\nå…¨å±€æœç´¢\nCtrl + Shift + F\nCmd + Shift + F\n\n\næ³¨é‡Šè¡Œ\nCtrl + /\nCmd + /\n\n\næ ¼å¼åŒ–ä»£ç \nShift + Alt + F\nShift + Option + F\n\n\nè·³è½¬åˆ°å®šä¹‰\nF12\nF12\n\n\né‡å‘½åç¬¦å·\nF2\nF2\n\n\n\n\n\nR ç‰¹æœ‰å¿«æ·é”®\n\n\n\nåŠ¨ä½œ\nå¿«æ·é”®\n\n\n\n\næ’å…¥èµ‹å€¼å· &lt;-\nAlt + -\n\n\næ’å…¥ç®¡é“ç¬¦ |&gt;\nCtrl + Shift + M\n\n\né‡å¯ R å†…æ ¸\né€šè¿‡å‘½ä»¤é¢æ¿\n\n\n\n\n[!TIP] å®‰è£… RStudio Keymap æ‰©å±•å¯ä»¥å°†å¿«æ·é”®æ˜ å°„ä¸º RStudio ä¹ æƒ¯çš„é”®ä½ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Positron IDE æ•™ç¨‹"
    ]
  },
  {
    "objectID": "0013-positron.html#ç»˜å›¾ä¸å¯è§†åŒ–",
    "href": "0013-positron.html#ç»˜å›¾ä¸å¯è§†åŒ–",
    "title": "Positron IDE å®Œå…¨æŒ‡å—",
    "section": "3.3 ç»˜å›¾ä¸å¯è§†åŒ–",
    "text": "3.3 ç»˜å›¾ä¸å¯è§†åŒ–\nPositron å¯¹ç»˜å›¾çª—å£åšäº†ç‰¹æ®Šä¼˜åŒ–ï¼š\n\nç»˜å›¾åŠŸèƒ½\n\n\n\nåŠŸèƒ½\nè¯´æ˜\n\n\n\n\nå¤šå›¾ç®¡ç†\nå†å²å›¾ç‰‡è‡ªåŠ¨ä¿å­˜ï¼Œå·¦å³ç®­å¤´åˆ‡æ¢\n\n\nç¼©æ”¾\næ»šè½®ç¼©æ”¾ï¼ŒåŒå‡»é‡ç½®\n\n\nå¯¼å‡º\nPNG/SVG/PDF æ ¼å¼\n\n\nå¤åˆ¶\nç›´æ¥å¤åˆ¶åˆ°å‰ªè´´æ¿\n\n\nä»£ç å›æº¯\nç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹ç”Ÿæˆä»£ç \n\n\n\n\n\näº¤äº’å¼å›¾è¡¨\nå¯¹äº plotlyã€leaflet ç­‰äº¤äº’å¼å›¾è¡¨ï¼Œä¼šè‡ªåŠ¨åœ¨ Viewer é¢æ¿ä¸­æ¸²æŸ“ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Positron IDE æ•™ç¨‹"
    ]
  },
  {
    "objectID": "0013-positron.html#quarto-æ–‡æ¡£ç¼–å†™",
    "href": "0013-positron.html#quarto-æ–‡æ¡£ç¼–å†™",
    "title": "Positron IDE å®Œå…¨æŒ‡å—",
    "section": "3.4 Quarto æ–‡æ¡£ç¼–å†™",
    "text": "3.4 Quarto æ–‡æ¡£ç¼–å†™\nPositron æ˜¯ç¼–å†™ Quarto (.qmd) çš„ç»ä½³å·¥å…·ï¼š\n\nå®æ—¶é¢„è§ˆ\n\nç‚¹å‡»ç¼–è¾‘å™¨å³ä¸Šè§’çš„ Preview æŒ‰é’®\næˆ–æŒ‰ Ctrl + Shift + Kï¼ˆéœ€è®¾ç½®å¿«æ·é”®ï¼‰\nViewer é¢æ¿æˆ–æ–°çª—å£ä¸­æ˜¾ç¤ºæ¸²æŸ“ç»“æœ\n\n\n\nä»£ç å—æ‰§è¡Œ\n\nç‚¹å‡»ä»£ç å—å³ä¸Šè§’çš„ç»¿è‰²ç®­å¤´è¿è¡Œå•ä¸ªå—\nCtrl + Shift + Enter è¿è¡Œæ•´ä¸ªå—\næ”¯æŒ Rã€Pythonã€Julia ç­‰å¤šè¯­è¨€ä»£ç å—",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Positron IDE æ•™ç¨‹"
    ]
  },
  {
    "objectID": "0013-positron.html#r-è°ƒè¯•",
    "href": "0013-positron.html#r-è°ƒè¯•",
    "title": "Positron IDE å®Œå…¨æŒ‡å—",
    "section": "4.1 R è°ƒè¯•",
    "text": "4.1 R è°ƒè¯•\n\nè®¾ç½®æ–­ç‚¹\n\nç‚¹å‡»ä»£ç è¡Œå·å·¦ä¾§ç©ºç™½åŒºåŸŸ\nå‡ºç°çº¢ç‚¹è¡¨ç¤ºæ–­ç‚¹å·²è®¾ç½®\n\n\n\nå¯åŠ¨è°ƒè¯•\n\næ‰“å¼€å‘½ä»¤é¢æ¿ Ctrl + Shift + P\nè¾“å…¥ Debug: Start Debugging\næˆ–ä½¿ç”¨ F5\n\n\n\nè°ƒè¯•æ§åˆ¶\n\n\n\næŒ‰é’®\nåŠŸèƒ½\n\n\n\n\nâ–¶ Continue\nç»§ç»­æ‰§è¡Œåˆ°ä¸‹ä¸€æ–­ç‚¹\n\n\nâ­ Step Over\næ‰§è¡Œä¸‹ä¸€è¡Œï¼ˆä¸è¿›å…¥å‡½æ•°ï¼‰\n\n\nâ¬ Step Into\nè¿›å…¥å‡½æ•°å†…éƒ¨\n\n\nâ« Step Out\nè·³å‡ºå½“å‰å‡½æ•°\n\n\nâ¹ Stop\nåœæ­¢è°ƒè¯•\n\n\n\n\n\næ£€æŸ¥å˜é‡\nè°ƒè¯•æ—¶ï¼ŒVariables é¢æ¿ä¼šæ˜¾ç¤ºå½“å‰ä½œç”¨åŸŸçš„æ‰€æœ‰å˜é‡åŠå…¶å€¼ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Positron IDE æ•™ç¨‹"
    ]
  },
  {
    "objectID": "0013-positron.html#python-è°ƒè¯•",
    "href": "0013-positron.html#python-è°ƒè¯•",
    "title": "Positron IDE å®Œå…¨æŒ‡å—",
    "section": "4.2 Python è°ƒè¯•",
    "text": "4.2 Python è°ƒè¯•\nPython è°ƒè¯•åŸºäº debugpyï¼ŒåŠŸèƒ½æ›´åŠ å®Œå–„ï¼š\n\næ¡ä»¶æ–­ç‚¹ï¼šå³é”®æ–­ç‚¹è®¾ç½®è§¦å‘æ¡ä»¶\nWatch è¡¨è¾¾å¼ï¼šç›‘æ§ç‰¹å®šå˜é‡æˆ–è¡¨è¾¾å¼\nCall Stackï¼šæŸ¥çœ‹å‡½æ•°è°ƒç”¨æ ˆ",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Positron IDE æ•™ç¨‹"
    ]
  },
  {
    "objectID": "0013-positron.html#global-options-å»å“ªäº†",
    "href": "0013-positron.html#global-options-å»å“ªäº†",
    "title": "Positron IDE å®Œå…¨æŒ‡å—",
    "section": "5.1 â€œGlobal Optionsâ€ å»å“ªäº†ï¼Ÿ",
    "text": "5.1 â€œGlobal Optionsâ€ å»å“ªäº†ï¼Ÿ\nVS Code/Positron çš„é…ç½®é€šè¿‡ Settings ç®¡ç†ï¼š\n\nè®¿é—®è®¾ç½®\n\nèœå•ï¼šFile -&gt; Preferences -&gt; Settings\nå¿«æ·é”®ï¼šCtrl + ,\n\n\n\næœç´¢è®¾ç½®\nç›´æ¥åœ¨æœç´¢æ¡†è¾“å…¥å…³é”®è¯ï¼Œå¦‚ â€œfont sizeâ€, â€œr pathâ€, â€œthemeâ€ã€‚\n\n\nJSON ç¼–è¾‘\nç‚¹å‡»å³ä¸Šè§’çš„ä¹¦é¡µå›¾æ ‡ï¼Œç›´æ¥ç¼–è¾‘ settings.json æ–‡ä»¶ã€‚\n\n\nå¸¸ç”¨è®¾ç½®ç¤ºä¾‹\n{\n    \"editor.fontSize\": 14,\n    \"editor.fontFamily\": \"'Fira Code', Consolas, monospace\",\n    \"editor.wordWrap\": \"on\",\n    \"r.rpath.windows\": \"C:/Program Files/R/R-4.5.0/bin/R.exe\",\n    \"workbench.colorTheme\": \"One Dark Pro\"\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Positron IDE æ•™ç¨‹"
    ]
  },
  {
    "objectID": "0013-positron.html#rstudio-vs-positron-å¯¹ç…§",
    "href": "0013-positron.html#rstudio-vs-positron-å¯¹ç…§",
    "title": "Positron IDE å®Œå…¨æŒ‡å—",
    "section": "5.2 RStudio vs Positron å¯¹ç…§",
    "text": "5.2 RStudio vs Positron å¯¹ç…§\n\n\n\nRStudio\nPositron\n\n\n\n\nEnvironment é¢æ¿\nVariables é¢æ¿\n\n\nPlots é¢æ¿\nPlots é¢æ¿\n\n\nFiles é¢æ¿\nExplorer ä¾§è¾¹æ \n\n\nPackages é¢æ¿\nç»ˆç«¯ + Extensions\n\n\nHelp é¢æ¿\nHelp é¢æ¿\n\n\nBuild é¢æ¿\nTerminal + Tasks\n\n\nGit é¢æ¿\nSource Control ä¾§è¾¹æ ",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Positron IDE æ•™ç¨‹"
    ]
  },
  {
    "objectID": "0013-positron.html#å¿«æ·é”®æ˜ å°„",
    "href": "0013-positron.html#å¿«æ·é”®æ˜ å°„",
    "title": "Positron IDE å®Œå…¨æŒ‡å—",
    "section": "5.3 å¿«æ·é”®æ˜ å°„",
    "text": "5.3 å¿«æ·é”®æ˜ å°„\nå®‰è£… RStudio Keymap æ’ä»¶ï¼š\n\næ‰“å¼€ Extensionsï¼ˆCtrl + Shift + Xï¼‰\næœç´¢ â€œRStudio Keymapâ€\nå®‰è£…åå¸¸ç”¨å¿«æ·é”®è‡ªåŠ¨æ˜ å°„\n\næ˜ å°„åŒ…æ‹¬ï¼š - Alt + - ç”Ÿæˆ &lt;- - Ctrl + Shift + M ç”Ÿæˆç®¡é“ç¬¦ - Ctrl + Shift + C æ³¨é‡Š/å–æ¶ˆæ³¨é‡Š",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Positron IDE æ•™ç¨‹"
    ]
  },
  {
    "objectID": "0013-positron.html#å¤šå·¥ä½œåŒºç®¡ç†",
    "href": "0013-positron.html#å¤šå·¥ä½œåŒºç®¡ç†",
    "title": "Positron IDE å®Œå…¨æŒ‡å—",
    "section": "6.1 å¤šå·¥ä½œåŒºç®¡ç†",
    "text": "6.1 å¤šå·¥ä½œåŒºç®¡ç†\n\nåˆ›å»ºå·¥ä½œåŒº\n\næ‰“å¼€å¤šä¸ªæ–‡ä»¶å¤¹ï¼ˆFile -&gt; Add Folder to Workspaceï¼‰\nä¿å­˜å·¥ä½œåŒºé…ç½®ï¼ˆFile -&gt; Save Workspace Asï¼‰\n\n\n\nå·¥ä½œåŒºè®¾ç½®\næ¯ä¸ªå·¥ä½œåŒºå¯ä»¥æœ‰ç‹¬ç«‹çš„è®¾ç½®ï¼Œä¿å­˜åœ¨ .code-workspace æ–‡ä»¶ä¸­ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Positron IDE æ•™ç¨‹"
    ]
  },
  {
    "objectID": "0013-positron.html#ç»ˆç«¯é›†æˆ",
    "href": "0013-positron.html#ç»ˆç«¯é›†æˆ",
    "title": "Positron IDE å®Œå…¨æŒ‡å—",
    "section": "6.2 ç»ˆç«¯é›†æˆ",
    "text": "6.2 ç»ˆç«¯é›†æˆ\n\nå†…ç½®ç»ˆç«¯\n\næ‰“å¼€ï¼šCtrl + `\næ–°å»ºï¼šCtrl + Shift + ``\nåˆ‡æ¢ï¼šç‚¹å‡»ç»ˆç«¯æ ‡ç­¾é¡µ\n\n\n\né…ç½®é»˜è®¤ Shell\n{\n    \"terminal.integrated.defaultProfile.windows\": \"PowerShell\",\n    \"terminal.integrated.defaultProfile.linux\": \"bash\"\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Positron IDE æ•™ç¨‹"
    ]
  },
  {
    "objectID": "0013-positron.html#git-é›†æˆ",
    "href": "0013-positron.html#git-é›†æˆ",
    "title": "Positron IDE å®Œå…¨æŒ‡å—",
    "section": "6.3 Git é›†æˆ",
    "text": "6.3 Git é›†æˆ\n\nåŸºæœ¬æ“ä½œ\n\næ‰“å¼€ Source Control é¢æ¿ï¼ˆCtrl + Shift + Gï¼‰\næŸ¥çœ‹æ›´æ”¹ã€æš‚å­˜ã€æäº¤\nåˆ†æ”¯ç®¡ç†ã€æ¨é€ã€æ‹‰å–\n\n\n\nGitLens å¢å¼º\nå®‰è£… GitLens æ‰©å±•åï¼š - è¡Œå†… blame æ³¨é‡Š - æäº¤å†å²å¯è§†åŒ– - æ–‡ä»¶å†å²æ¯”è¾ƒ",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Positron IDE æ•™ç¨‹"
    ]
  },
  {
    "objectID": "0013-positron.html#è¿œç¨‹å¼€å‘",
    "href": "0013-positron.html#è¿œç¨‹å¼€å‘",
    "title": "Positron IDE å®Œå…¨æŒ‡å—",
    "section": "6.4 è¿œç¨‹å¼€å‘",
    "text": "6.4 è¿œç¨‹å¼€å‘\nPositron æ”¯æŒé€šè¿‡ SSH è¿æ¥è¿œç¨‹æœåŠ¡å™¨å¼€å‘ï¼š\n\nå®‰è£… Remote - SSH æ‰©å±•\nCtrl + Shift + P è¾“å…¥ â€œRemote-SSH: Connect to Hostâ€\nè¾“å…¥æœåŠ¡å™¨åœ°å€",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Positron IDE æ•™ç¨‹"
    ]
  },
  {
    "objectID": "0013-positron.html#q1-r-åŒ…å®‰è£…å¤±è´¥æ€ä¹ˆåŠ",
    "href": "0013-positron.html#q1-r-åŒ…å®‰è£…å¤±è´¥æ€ä¹ˆåŠ",
    "title": "Positron IDE å®Œå…¨æŒ‡å—",
    "section": "Q1: R åŒ…å®‰è£…å¤±è´¥æ€ä¹ˆåŠï¼Ÿ",
    "text": "Q1: R åŒ…å®‰è£…å¤±è´¥æ€ä¹ˆåŠï¼Ÿ\nè§£å†³æ–¹æ¡ˆï¼š 1. ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸ 2. å°è¯•æ›´æ¢ CRAN é•œåƒï¼šoptions(repos = c(CRAN = \"https://mirrors.tuna.tsinghua.edu.cn/CRAN/\")) 3. Windows ç”¨æˆ·ç¡®è®¤å®‰è£…äº† Rtools",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Positron IDE æ•™ç¨‹"
    ]
  },
  {
    "objectID": "0013-positron.html#q2-å¦‚ä½•ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„-r",
    "href": "0013-positron.html#q2-å¦‚ä½•ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„-r",
    "title": "Positron IDE å®Œå…¨æŒ‡å—",
    "section": "Q2: å¦‚ä½•ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„ Rï¼Ÿ",
    "text": "Q2: å¦‚ä½•ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„ Rï¼Ÿ\nè§£å†³æ–¹æ¡ˆï¼š 1. å®‰è£…å¤šä¸ª R ç‰ˆæœ¬ 2. ç‚¹å‡»å³ä¸Šè§’è§£é‡Šå™¨åˆ‡æ¢ 3. æˆ–åœ¨ settings.json ä¸­æŒ‡å®š r.rpath.windows",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Positron IDE æ•™ç¨‹"
    ]
  },
  {
    "objectID": "0013-positron.html#q3-ç»˜å›¾ä¸æ˜¾ç¤ºæ€ä¹ˆå¤„ç†",
    "href": "0013-positron.html#q3-ç»˜å›¾ä¸æ˜¾ç¤ºæ€ä¹ˆå¤„ç†",
    "title": "Positron IDE å®Œå…¨æŒ‡å—",
    "section": "Q3: ç»˜å›¾ä¸æ˜¾ç¤ºæ€ä¹ˆå¤„ç†ï¼Ÿ",
    "text": "Q3: ç»˜å›¾ä¸æ˜¾ç¤ºæ€ä¹ˆå¤„ç†ï¼Ÿ\nè§£å†³æ–¹æ¡ˆï¼š 1. ç¡®è®¤ Plots é¢æ¿å·²æ‰“å¼€ 2. å°è¯•è¿è¡Œ dev.new() åˆ›å»ºæ–°è®¾å¤‡ 3. æ£€æŸ¥ç»‘å›¾ä»£ç æ˜¯å¦æœ‰é”™è¯¯",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Positron IDE æ•™ç¨‹"
    ]
  },
  {
    "objectID": "0013-positron.html#q4-å¦‚ä½•æé«˜å¯åŠ¨é€Ÿåº¦",
    "href": "0013-positron.html#q4-å¦‚ä½•æé«˜å¯åŠ¨é€Ÿåº¦",
    "title": "Positron IDE å®Œå…¨æŒ‡å—",
    "section": "Q4: å¦‚ä½•æé«˜å¯åŠ¨é€Ÿåº¦ï¼Ÿ",
    "text": "Q4: å¦‚ä½•æé«˜å¯åŠ¨é€Ÿåº¦ï¼Ÿ\nè§£å†³æ–¹æ¡ˆï¼š 1. å‡å°‘å¯ç”¨çš„æ‰©å±•æ•°é‡ 2. ä½¿ç”¨å·¥ä½œåŒºçº§åˆ«è®¾ç½®è€Œéå…¨å±€è®¾ç½® 3. å®šæœŸæ¸…ç† R å·¥ä½œç©ºé—´ï¼ˆ.RDataï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Positron IDE æ•™ç¨‹"
    ]
  },
  {
    "objectID": "0013-positron.html#q5-ä¸­æ–‡æ˜¾ç¤ºä¹±ç æ€ä¹ˆåŠ",
    "href": "0013-positron.html#q5-ä¸­æ–‡æ˜¾ç¤ºä¹±ç æ€ä¹ˆåŠ",
    "title": "Positron IDE å®Œå…¨æŒ‡å—",
    "section": "Q5: ä¸­æ–‡æ˜¾ç¤ºä¹±ç æ€ä¹ˆåŠï¼Ÿ",
    "text": "Q5: ä¸­æ–‡æ˜¾ç¤ºä¹±ç æ€ä¹ˆåŠï¼Ÿ\nè§£å†³æ–¹æ¡ˆï¼š 1. ç¡®è®¤æ–‡ä»¶ç¼–ç ä¸º UTF-8 2. è®¾ç½®ç»ˆç«¯ç¼–ç ï¼šSys.setlocale(\"LC_CTYPE\", \"Chinese\") 3. ä½¿ç”¨æ”¯æŒä¸­æ–‡çš„å­—ä½“",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "ğŸ“– åŸºç¡€çŸ¥è¯†",
      "Positron IDE æ•™ç¨‹"
    ]
  },
  {
    "objectID": "1012-comparegroups.html",
    "href": "1012-comparegroups.html",
    "title": "compareGroups-æè¿°æ€§è¡¨ä¸€å¿«é€Ÿç”Ÿæˆ",
    "section": "",
    "text": "ç¬¬95æœŸ Rè¯­è¨€æ•™ç¨‹ï¼compareGroupsç¥åŒ…åˆ¶ä½œæè¿°æ€§è¡¨ä¸€\næè¿°æ€§è¡¨1åœ¨è®ºæ–‡å†™ä½œä¸­å æ®ç€å¼€ç¯‡èµ·ç¬”çš„ä½œç”¨ã€‚å¯¹æ‰€ç”¨çš„æ•°æ®è¿›è¡Œæè¿°å’Œç®€å•åˆ†æï¼Œä¸ºåç»­çš„æ¨¡å‹æ„å»ºæä¾›æ•°æ®å¯é æ€§ä¿¡æ¯\næœ¬æœŸä»‹ç»å¦‚ä½•ä½¿ç”¨compareGroupsç¥åŒ…æ¥å¿«é€Ÿç”Ÿæˆç¬¦åˆå­¦æœ¯è§„èŒƒçš„è¡¨1ã€‚å¹¶è¿›è¡ŒåŒ…æ‹¬ä»¥ä¸‹è‡ªå®šä¹‰è®¾ç½®ï¼š1.è®¾ç½®äºšç»„ 2.è®¾ç½®éæ­£æ€å˜é‡ä½¿ç”¨éå‚ç»„é—´æ£€éªŒ 3.è®¾ç½®æ˜¾ç¤ºç¼ºå¤±å€¼ 4.è®¾ç½®æ˜¾ç¤ºORå€¼ 5.è®¾ç½®ä½¿ç”¨è‡ªå®šä¹‰ç»„é—´æ¯”è¾ƒæ–¹æ³• 6 æ•°æ®å¯¼å‡º",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "compareGroups - æè¿°æ€§è¡¨"
    ]
  },
  {
    "objectID": "1012-comparegroups.html#råŒ…ä»‹ç»",
    "href": "1012-comparegroups.html#råŒ…ä»‹ç»",
    "title": "compareGroups-æè¿°æ€§è¡¨ä¸€å¿«é€Ÿç”Ÿæˆ",
    "section": "RåŒ…ä»‹ç»",
    "text": "RåŒ…ä»‹ç»\ncompareGroups æ˜¯ä¸€ä¸ªåœ¨ CRAN ä¸Šå¯ç”¨çš„ R åŒ…ï¼Œå®ƒå¯ä»¥ç”Ÿæˆæè¿°æ€§è¡¨æ ¼ï¼Œå±•ç¤ºå‡ ä¸ªå˜é‡çš„å‡å€¼ã€æ ‡å‡†å·®ã€åˆ†ä½æ•°æˆ–é¢‘ç‡ã€‚æ­¤å¤–ï¼Œè¿˜ä¼šä½¿ç”¨é€‚å½“çš„æµ‹è¯•è®¡ç®— p å€¼æ¥æ£€éªŒç»„é—´å·®å¼‚ã€‚\né€šè¿‡ç®€å•çš„ä»£ç ï¼Œå°±èƒ½åœ¨ R ä¸­ç”Ÿæˆç¾è§‚ã€è§„èŒƒä¸”å¯ç›´æ¥ç”¨äºè®ºæ–‡å‘è¡¨çš„æè¿°æ€§è¡¨æ ¼ã€‚è¿™äº›è¡¨æ ¼è¿˜å¯ä»¥å¯¼å‡ºåˆ°ä¸åŒçš„æ ¼å¼ï¼Œå¦‚ Wordã€Excelã€PDFï¼Œæˆ–æ’å…¥åˆ° R-Sweave æˆ– R-markdown æ–‡æ¡£ä¸­ã€‚\nåœ¨æ‰‹å†Œ https://cran.r-project.org/web/packages/compareGroups/vignettes/compareGroups_vignette.htmlé‡Œæä¾›äº†éå¸¸å‹å¥½çš„RåŒ…æ•™ç¨‹ï¼Œæè¿°äº† compareGroups çš„æ‰€æœ‰åŠŸèƒ½ï¼Œå¹¶é™„æœ‰å®é™…ç¤ºä¾‹ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "compareGroups - æè¿°æ€§è¡¨"
    ]
  },
  {
    "objectID": "1012-comparegroups.html#råŒ…å®‰è£…",
    "href": "1012-comparegroups.html#råŒ…å®‰è£…",
    "title": "compareGroups-æè¿°æ€§è¡¨ä¸€å¿«é€Ÿç”Ÿæˆ",
    "section": "RåŒ…å®‰è£…",
    "text": "RåŒ…å®‰è£…\nä»CRANä¸­å®‰è£…RåŒ…\n\ninstall.packages(\"compareGroups\") \n\næˆ–è€…ä»githubå®‰è£…æœ€æ–°ç‰ˆæœ¬\n\nlibrary(devtools) \ndevtools::install_github(\"isubirana/compareGroups\")",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "compareGroups - æè¿°æ€§è¡¨"
    ]
  },
  {
    "objectID": "1012-comparegroups.html#råŒ…å‚æ•°",
    "href": "1012-comparegroups.html#råŒ…å‚æ•°",
    "title": "compareGroups-æè¿°æ€§è¡¨ä¸€å¿«é€Ÿç”Ÿæˆ",
    "section": "RåŒ…å‚æ•°",
    "text": "RåŒ…å‚æ•°\n\næŸ¥çœ‹æ•°æ®\n(ä¸é‡è¦å¯ä»¥ä¸çœ‹ï¼ŒçŸ¥é“æ˜¯åŒ…å«å¤šç§æ•°æ®ç±»å‹çš„æ•°æ®é›†å³å¯)è°ƒç”¨RåŒ…è‡ªå¸¦çš„regicoræ•°æ®ï¼ŒåŒ…å«25ä¸ªå˜é‡ã€‚regicorï¼ˆå‰ç½—çº³å¿ƒè„ç™»è®°ï¼‰ç ”ç©¶æ˜¯ä¸€é¡¹æ¨ªæ–­é¢ç ”ç©¶ï¼Œå‚ä¸è€…æ¥è‡ªè¥¿ç­ç‰™ä¸œåŒ—éƒ¨åœ°åŒºã€‚åœ¨æ­¤ç ”ç©¶ä¸­ï¼Œæ”¶é›†äº†å‚ä¸è€…çš„å„ç§æ•°æ®é›†ï¼ŒåŒ…æ‹¬äººå£ç»Ÿè®¡ä¿¡æ¯ï¼ˆå¦‚å¹´é¾„å’Œæ€§åˆ«ï¼‰ã€äººä½“æµ‹é‡æ•°æ®ï¼ˆå¦‚èº«é«˜ã€ä½“é‡å’Œè…°å›´ï¼‰ä»¥åŠè„‚è´¨æ°´å¹³ï¼ˆåŒ…æ‹¬æ€»èƒ†å›ºé†‡å’Œç”˜æ²¹ä¸‰é…¯ï¼‰ã€‚æ­¤å¤–ï¼Œå‚ä¸è€…è¿˜å®Œæˆäº†æ¶µç›–ä½“è‚²æ´»åŠ¨å’Œç”Ÿæ´»è´¨é‡ç­‰é¢†åŸŸçš„é—®å·ã€‚\nä¸ºäº†è¿½è¸ªå¥åº·ç»“æœï¼Œç ”ç©¶è¿˜æ”¶é›†äº†å…³äºå¿ƒè¡€ç®¡äº‹ä»¶å’Œæ­»äº¡çš„æ•°æ®ã€‚è¿™äº›ä¿¡æ¯æ˜¯é€šè¿‡åŒ»é™¢å’Œå®˜æ–¹ç™»è®°å†ŒåŠæŠ¥å‘Šï¼Œåœ¨è¶…è¿‡10å¹´çš„æ—¶é—´é‡Œè·å¾—çš„ã€‚\n\nlibrary(compareGroups)\nlibrary(bruceR) #ä¹‹å‰æœ‰ä»‹ç»è¿‡ï¼Œæ–¹ä¾¿æè¿°æ•°æ®\n\n\n# æ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬åªåˆ†æå‰åä¸ªå˜é‡\ndata(\"regicor\")\n\nregicor &lt;- regicor[,1:10]\n\nstr(regicor)\n\n'data.frame':   2294 obs. of  10 variables:\n $ id     : num  2.26e+03 1.88e+03 3.00e+09 3.00e+09 3.00e+09 ...\n  ..- attr(*, \"label\")= Named chr \"Individual id\"\n  .. ..- attr(*, \"names\")= chr \"id\"\n $ year   : Factor w/ 3 levels \"1995\",\"2000\",..: 3 3 2 2 2 2 2 1 3 1 ...\n  ..- attr(*, \"label\")= Named chr \"Recruitment year\"\n  .. ..- attr(*, \"names\")= chr \"year\"\n $ age    : int  70 56 37 69 70 40 66 53 43 70 ...\n  ..- attr(*, \"label\")= Named chr \"Age\"\n  .. ..- attr(*, \"names\")= chr \"age\"\n $ sex    : Factor w/ 2 levels \"Male\",\"Female\": 2 2 1 2 2 2 1 2 2 1 ...\n  ..- attr(*, \"label\")= chr \"Sex\"\n $ smoker : Factor w/ 3 levels \"Never smoker\",..: 1 1 2 1 NA 2 1 1 3 3 ...\n  ..- attr(*, \"label\")= Named chr \"Smoking status\"\n  .. ..- attr(*, \"names\")= chr \"smoker\"\n $ sbp    : int  138 139 132 168 NA 108 120 132 95 142 ...\n  ..- attr(*, \"label\")= Named chr \"Systolic blood pressure\"\n  .. ..- attr(*, \"names\")= chr \"sbp\"\n $ dbp    : int  75 89 82 97 NA 70 72 78 65 78 ...\n  ..- attr(*, \"label\")= Named chr \"Diastolic blood pressure\"\n  .. ..- attr(*, \"names\")= chr \"dbp\"\n $ histhtn: Factor w/ 2 levels \"Yes\",\"No\": 2 2 2 2 2 2 1 2 2 2 ...\n  ..- attr(*, \"label\")= Named chr \"History of hypertension\"\n  .. ..- attr(*, \"names\")= chr \"histbp\"\n $ txhtn  : Factor w/ 2 levels \"No\",\"Yes\": 1 1 1 1 1 1 2 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"Hypertension treatment\"\n $ chol   : num  294 220 245 168 NA NA 298 254 194 188 ...\n  ..- attr(*, \"label\")= Named chr \"Total cholesterol\"\n  .. ..- attr(*, \"names\")= chr \"chol\"\n\n\n\n\nç”Ÿæˆæè¿°æ€§ç»Ÿè®¡è¡¨\nç®€å•ç”Ÿæˆä¸€ä¸ªæœ€ç®€å•çš„æè¿°æ€§ç»Ÿè®¡è¡¨ï¼Œå‘ç°å®šé‡èµ„æ–™ç”¨å¹³å‡å€¼æ ‡å‡†å·®æè¿°ï¼Œåˆ†ç±»èµ„æ–™ç”¨ä¾‹æ•°å’Œå æ¯”æè¿°\n\ndescrTable( ~ ., data = regicor)\n\n\n--------Summary descriptives table ---------\n\n_______________________________________________________ \n                                    [ALL]           N   \n                                   N=2294               \nÂ¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯ \nIndividual id              1215817624 (1339538686) 2294 \nRecruitment year:                                  2294 \n    1995                         431 (18.8%)            \n    2000                         786 (34.3%)            \n    2005                        1077 (46.9%)            \nAge                              54.7 (11.0)       2294 \nSex:                                               2294 \n    Male                        1101 (48.0%)            \n    Female                      1193 (52.0%)            \nSmoking status:                                    2233 \n    Never smoker                1201 (53.8%)            \n    Current or former &lt; 1y       593 (26.6%)            \n    Former &gt;= 1y                 439 (19.7%)            \nSystolic blood pressure          131 (20.3)        2280 \nDiastolic blood pressure         79.7 (10.5)       2280 \nHistory of hypertension:                           2286 \n    Yes                          723 (31.6%)            \n    No                          1563 (68.4%)            \nHypertension treatment:                            2251 \n    No                          1823 (81.0%)            \n    Yes                          428 (19.0%)            \nTotal cholesterol                219 (45.2)        2193 \nÂ¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯ \n\n\n\n\nè®¾ç½®åˆ†ç»„å˜é‡\næ ¹æ®å¸çƒŸæƒ…å†µå°†äººç¾¤åˆ†ä¸ºä¸‰ç»„ï¼ŒåŒæ—¶ç”Ÿæˆç»„é—´æ¯”è¾ƒåˆ—ï¼ˆp.overallï¼‰ã€‚è‡ªåŠ¨ä½¿ç”¨å¡æ–¹æ£€éªŒ(åˆ†ç±»å˜é‡)å’Œæ–¹å·®åˆ†æ(è®¡é‡èµ„æ–™ï¼šä¸¤ç±»æ—¶ç­‰ä»·tæ£€éªŒ)ã€‚\n\ndescrTable(`smoker`~ ., data = regicor)\n\n\n--------Summary descriptives table by 'Smoking status'---------\n\n_________________________________________________________________________________________________________ \n                              Never smoker       Current or former &lt; 1y       Former &gt;= 1y      p.overall \n                                 N=1201                   N=593                  N=439                    \nÂ¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯ \nIndividual id            1229013133 (1337342152) 1534618659 (1372769742) 690225475 (1126583145)  &lt;0.001   \nRecruitment year:                                                                                &lt;0.001   \n    1995                       234 (19.5%)             109 (18.4%)             72 (16.4%)                 \n    2000                       414 (34.5%)             267 (45.0%)             77 (17.5%)                 \n    2005                       553 (46.0%)             217 (36.6%)            290 (66.1%)                 \nAge                            56.5 (10.8)             50.6 (10.7)            55.3 (10.6)        &lt;0.001   \nSex:                                                                                             &lt;0.001   \n    Male                       301 (25.1%)             410 (69.1%)            360 (82.0%)                 \n    Female                     900 (74.9%)             183 (30.9%)             79 (18.0%)                 \nSystolic blood pressure        132 (20.5)              128 (19.8)              133 (19.7)        &lt;0.001   \nDiastolic blood pressure       79.5 (10.2)             78.8 (11.0)            81.2 (10.8)         0.002   \nHistory of hypertension:                                                                         &lt;0.001   \n    Yes                        421 (35.1%)             125 (21.2%)            162 (36.9%)                 \n    No                         777 (64.9%)             464 (78.8%)            277 (63.1%)                 \nHypertension treatment:                                                                          &lt;0.001   \n    No                         922 (77.9%)             525 (90.2%)            331 (77.2%)                 \n    Yes                        262 (22.1%)             57 (9.79%)              98 (22.8%)                 \nTotal cholesterol              220 (46.7)              219 (44.7)              214 (42.6)         0.030   \nÂ¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯ \n\n\n\n\nåˆ é™¤æŸäº›å˜é‡ä¸æ˜¾ç¤º\nå¦‚ä¸å¸Œæœ›æè¿°æ€§ç»Ÿè®¡å¯¹Idå’Œyearè¿›è¡Œæè¿°ï¼Œç›´æ¥åœ¨~å³ä¾§çš„.åä½¿ç”¨å‡å·è¿›è¡Œåˆ é™¤ï¼ˆå¦‚éœ€è¦çš„å˜é‡æ¯”è¾ƒå°‘ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨å†™å…¬å¼ä¸€ä¸ªä¸ªåŠ ï¼‰\n\ndescrTable(`smoker`~ .-id-year, data = regicor)\n\n\n--------Summary descriptives table by 'Smoking status'---------\n\n___________________________________________________________________________________ \n                         Never smoker Current or former &lt; 1y Former &gt;= 1y p.overall \n                            N=1201            N=593             N=439               \nÂ¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯ \nAge                      56.5 (10.8)       50.6 (10.7)       55.3 (10.6)   &lt;0.001   \nSex:                                                                       &lt;0.001   \n    Male                 301 (25.1%)       410 (69.1%)       360 (82.0%)            \n    Female               900 (74.9%)       183 (30.9%)        79 (18.0%)            \nSystolic blood pressure   132 (20.5)        128 (19.8)        133 (19.7)   &lt;0.001   \nDiastolic blood pressure 79.5 (10.2)       78.8 (11.0)       81.2 (10.8)    0.002   \nHistory of hypertension:                                                   &lt;0.001   \n    Yes                  421 (35.1%)       125 (21.2%)       162 (36.9%)            \n    No                   777 (64.9%)       464 (78.8%)       277 (63.1%)            \nHypertension treatment:                                                    &lt;0.001   \n    No                   922 (77.9%)       525 (90.2%)       331 (77.2%)            \n    Yes                  262 (22.1%)        57 (9.79%)        98 (22.8%)            \nTotal cholesterol         220 (46.7)        219 (44.7)        214 (42.6)    0.030   \nÂ¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯ \n\n\n\n\näºšç»„æè¿°\nsubset=(é€»è¾‘åˆ¤æ–­)æ¥æŒ‘é€‰å‡ºç”·æ€§æ‚£è€…è¿›è¡Œåˆ†æ\n\ndescrTable(`smoker`~ .-id-year-sex, data = regicor,\n           subset=(sex==\"Male\"))\n\n\n--------Summary descriptives table by 'smoker'---------\n\n___________________________________________________________________________________ \n                         Never smoker Current or former &lt; 1y Former &gt;= 1y p.overall \n                            N=301             N=410             N=360               \nÂ¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯ \nAge                      55.0 (11.5)       52.7 (11.0)       56.8 (10.5)   &lt;0.001   \nSystolic blood pressure   133 (18.5)        133 (19.0)        136 (19.0)    0.050   \nDiastolic blood pressure 81.3 (9.31)       81.2 (10.6)       82.3 (10.4)    0.263   \nHistory of hypertension:                                                   &lt;0.001   \n    Yes                   85 (28.4%)       101 (24.8%)       145 (40.3%)            \n    No                   214 (71.6%)       306 (75.2%)       215 (59.7%)            \nHypertension treatment:                                                    &lt;0.001   \n    No                   248 (83.5%)       357 (88.4%)       263 (75.1%)            \n    Yes                   49 (16.5%)        47 (11.6%)        87 (24.9%)            \nTotal cholesterol         213 (44.0)        221 (41.9)        216 (43.3)    0.061   \nÂ¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯ \n\n\n\n\nè‡ªå®šä¹‰è®¾ç½®åˆ†ç»„æ£€éªŒæ–¹æ³•\nè®¾ç½®mehtodå‚æ•°å€¼ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œé»˜è®¤æ‰€æœ‰å˜é‡ç¬¦åˆæ­£æ€åˆ†å¸ƒã€‚ä¿®æ”¹ageä¸ºéæ­£æ€åä½¿ç”¨å››åˆ†ä½æ•°è¿›è¡Œæè¿°ï¼ŒåŒæ—¶ä½¿ç”¨éå‚æ£€éªŒè¿›è¡Œåˆ†ç»„æ¯”è¾ƒ\n\nå‚æ•°å€¼ä¸º1ï¼šæ­£æ€åˆ†å¸ƒåˆ†æ ï¼šæ­¤å€¼å¼ºåˆ¶åˆ†æå‡è®¾è¡Œå˜é‡éµå¾ªæ­£æ€åˆ†å¸ƒã€‚\nå‚æ•°å€¼ä¸º2ï¼šè¿ç»­éæ­£æ€åˆ†æ ï¼šé€‰æ‹©æ­¤å€¼æ„å‘³ç€åˆ†æä¸å‡è®¾è¡Œå˜é‡éµå¾ªæ­£æ€åˆ†å¸ƒï¼Œå°†å…¶è§†ä¸ºè¿ç»­ä½†éæ­£æ€åˆ†å¸ƒçš„å˜é‡ã€‚\nå‚æ•°å€¼ä¸º3ï¼šåˆ†ç±»åˆ†æï¼šæ­¤å€¼å¼ºåˆ¶åˆ†æå°†è¡Œå˜é‡è§†ä¸ºåˆ†ç±»å˜é‡ï¼Œæ— è®ºå…¶åŸå§‹ç±»å‹å¦‚ä½•ã€‚\nå‚æ•°å€¼ä¸º4ï¼šShapiro-Wilksæ£€éªŒ ï¼ˆæ­£æ€æ£€éªŒï¼‰ï¼šä½¿ç”¨æ­¤å€¼è§¦å‘Shapiro-Wilksæ£€éªŒï¼Œä»¥ç¡®å®šå˜é‡æ˜¯å¦åº”åœ¨æ­£æ€æ€§å‡è®¾ä¸‹è¿›è¡Œåˆ†æï¼Œè¿˜æ˜¯éæ­£æ€ã€‚è¿™å¯¹äºæ ¹æ®æ•°æ®åšå‡ºå¦‚ä½•å¤„ç†æ¯ä¸ªå˜é‡çš„å†³ç­–éå¸¸æœ‰ç”¨ã€‚\n\n\n# descrTable(`smoker`~ .-id-year, data = regicor,method = 1) å‡å®šæ‰€æœ‰å˜é‡ç¬¦åˆæ­£æ€åˆ†å¸ƒ\n\n#è®¾ç½®ageå˜é‡ä¸ºéæ­£æ€ï¼Œä½¿ç”¨éå‚æ£€éªŒè¿›è¡Œæ¯”è¾ƒ\ndescrTable(`sex`~ .-id-year, data = regicor, method=c(age = 2))\n\n\n--------Summary descriptives table by 'Sex'---------\n\n______________________________________________________________________ \n                                 Male            Female      p.overall \n                                N=1101           N=1193                \nÂ¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯ \nAge                        54.0 [46.0;64.0] 55.0 [46.0;64.0]   0.851   \nSmoking status:                                               &lt;0.001   \n    Never smoker             301 (28.1%)      900 (77.5%)              \n    Current or former &lt; 1y   410 (38.3%)      183 (15.7%)              \n    Former &gt;= 1y             360 (33.6%)       79 (6.80%)              \nSystolic blood pressure       134 (18.9)       129 (21.2)     &lt;0.001   \nDiastolic blood pressure     81.7 (10.2)      77.8 (10.5)     &lt;0.001   \nHistory of hypertension:                                       0.644   \n    Yes                      341 (31.1%)      382 (32.1%)              \n    No                       755 (68.9%)      808 (67.9%)              \nHypertension treatment:                                        0.096   \n    No                       889 (82.5%)      934 (79.6%)              \n    Yes                      189 (17.5%)      239 (20.4%)              \nTotal cholesterol             217 (42.7)       220 (47.4)      0.140   \nÂ¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯ \n\n\n\n\nä¸æ˜¾ç¤ºæ ‡ç­¾labelå€¼\næœ‰äº›æ•°æ®é›†è‡ªå¸¦labelï¼Œå¯ä»¥é€šè¿‡include.labelè®¾ç½®æ˜¯å¦æ˜¾ç¤ºæ ‡ç­¾\n\ndescrTable(`sex`~ .-id-year, data = regicor, include.label= FALSE)\n\n\n--------Summary descriptives table by 'sex'---------\n\n____________________________________________________________ \n                              Male       Female    p.overall \n                             N=1101      N=1193              \nÂ¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯ \nage                        54.8 (11.1) 54.7 (11.0)   0.840   \nsmoker:                                             &lt;0.001   \n    Never smoker           301 (28.1%) 900 (77.5%)           \n    Current or former &lt; 1y 410 (38.3%) 183 (15.7%)           \n    Former &gt;= 1y           360 (33.6%) 79 (6.80%)            \nsbp                        134 (18.9)  129 (21.2)   &lt;0.001   \ndbp                        81.7 (10.2) 77.8 (10.5)  &lt;0.001   \nhisthtn:                                             0.644   \n    Yes                    341 (31.1%) 382 (32.1%)           \n    No                     755 (68.9%) 808 (67.9%)           \ntxhtn:                                               0.096   \n    No                     889 (82.5%) 934 (79.6%)           \n    Yes                    189 (17.5%) 239 (20.4%)           \nchol                       217 (42.7)  220 (47.4)    0.140   \nÂ¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯ \n\n\n\n\nè®¾ç½®è®¡é‡èµ„æ–™ç”¨å››åˆ†ä½æ³•æè¿°\nè®¾ç½®Q1å‚æ•°å’ŒQ3å‚æ•°è®¾ç½®å¦‚ä½•æè¿°éæ­£æ€è¿ç»­å˜é‡ã€‚å¦‚æœè®¾ç½®æˆ0å’Œ1å°±æ˜¯æœ€å°å€¼æœ€å¤§å€¼æè¿°\n\ndescrTable(`sex`~ .-id-year, data = regicor,method = c(age=2),\n           Q1=0.025, Q3=0.975)\n\n\n--------Summary descriptives table by 'Sex'---------\n\n______________________________________________________________________ \n                                 Male            Female      p.overall \n                                N=1101           N=1193                \nÂ¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯ \nAge                        54.0 [36.0;73.0] 55.0 [36.0;73.0]   0.851   \nSmoking status:                                               &lt;0.001   \n    Never smoker             301 (28.1%)      900 (77.5%)              \n    Current or former &lt; 1y   410 (38.3%)      183 (15.7%)              \n    Former &gt;= 1y             360 (33.6%)       79 (6.80%)              \nSystolic blood pressure       134 (18.9)       129 (21.2)     &lt;0.001   \nDiastolic blood pressure     81.7 (10.2)      77.8 (10.5)     &lt;0.001   \nHistory of hypertension:                                       0.644   \n    Yes                      341 (31.1%)      382 (32.1%)              \n    No                       755 (68.9%)      808 (67.9%)              \nHypertension treatment:                                        0.096   \n    No                       889 (82.5%)      934 (79.6%)              \n    Yes                      189 (17.5%)      239 (20.4%)              \nTotal cholesterol             217 (42.7)       220 (47.4)      0.140   \nÂ¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯ \n\n\n\n\nç”ŸæˆORå’ŒHRå€¼\nä½¿ç”¨show.ratioå˜é‡æ¥æ˜¾ç¤ºORå€¼ï¼Œå¯¹äºå˜é‡ç±»å‹æ˜¯time-to-eventå˜é‡åˆ™è¾“å‡ºHRå€¼\n\n descrTable(`sex`~ .-id-year, data = regicor,show.ratio = TRUE)\n\n\n--------Summary descriptives table by 'Sex'---------\n\n_____________________________________________________________________________________ \n                              Male       Female           OR        p.ratio p.overall \n                             N=1101      N=1193                                       \nÂ¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯ \nAge                        54.8 (11.1) 54.7 (11.0) 1.00 [0.99;1.01]  0.840    0.840   \nSmoking status:                                                              &lt;0.001   \n    Never smoker           301 (28.1%) 900 (77.5%)       Ref.        Ref.             \n    Current or former &lt; 1y 410 (38.3%) 183 (15.7%) 0.15 [0.12;0.19]  0.000            \n    Former &gt;= 1y           360 (33.6%) 79 (6.80%)  0.07 [0.06;0.10]  0.000            \nSystolic blood pressure    134 (18.9)  129 (21.2)  0.99 [0.98;0.99] &lt;0.001   &lt;0.001   \nDiastolic blood pressure   81.7 (10.2) 77.8 (10.5) 0.96 [0.96;0.97] &lt;0.001   &lt;0.001   \nHistory of hypertension:                                                      0.644   \n    Yes                    341 (31.1%) 382 (32.1%)       Ref.        Ref.             \n    No                     755 (68.9%) 808 (67.9%) 0.96 [0.80;1.14]  0.612            \nHypertension treatment:                                                       0.096   \n    No                     889 (82.5%) 934 (79.6%)       Ref.        Ref.             \n    Yes                    189 (17.5%) 239 (20.4%) 1.20 [0.97;1.49]  0.086            \nTotal cholesterol          217 (42.7)  220 (47.4)  1.00 [1.00;1.00]  0.141    0.140   \nÂ¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯ \n\n\n\nè®¾ç½®ORå€¼çš„refå¯¹ç…§\nä½¿ç”¨refå‚æ•°è®¾ç½®å˜é‡çš„refå¯¹ç…§å€¼ã€‚ä»£ç æ‰€ç¤ºä¸ºæŠŠsmokerçš„å› å­levelä¸º3ï¼ˆå€¼ä¸ºâ€Former&gt;=1yâ€ï¼‰çš„è®¾ç½®ä¸ºå¯¹ç…§ç»„è®¡ç®—å…¶å®ƒç»„çš„ORå€¼\nåŒæ ·ä½œç”¨çš„å‡½æ•°è¿˜æœ‰ref.no å’Œ ref.y\n\ndescrTable(`sex`~ .-id-year, data = regicor,\n           include.label = FALSE,show.ratio = TRUE,\n           ref = c(smoker=3))\n\n\n--------Summary descriptives table by 'sex'---------\n\n_____________________________________________________________________________________ \n                              Male       Female           OR        p.ratio p.overall \n                             N=1101      N=1193                                       \nÂ¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯ \nage                        54.8 (11.1) 54.7 (11.0) 1.00 [0.99;1.01]  0.840    0.840   \nsmoker:                                                                      &lt;0.001   \n    Never smoker           301 (28.1%) 900 (77.5%) 13.6 [10.4;18.0]  0.000            \n    Current or former &lt; 1y 410 (38.3%) 183 (15.7%) 2.03 [1.51;2.75] &lt;0.001            \n    Former &gt;= 1y           360 (33.6%) 79 (6.80%)        Ref.        Ref.             \nsbp                        134 (18.9)  129 (21.2)  0.99 [0.98;0.99] &lt;0.001   &lt;0.001   \ndbp                        81.7 (10.2) 77.8 (10.5) 0.96 [0.96;0.97] &lt;0.001   &lt;0.001   \nhisthtn:                                                                      0.644   \n    Yes                    341 (31.1%) 382 (32.1%)       Ref.        Ref.             \n    No                     755 (68.9%) 808 (67.9%) 0.96 [0.80;1.14]  0.612            \ntxhtn:                                                                        0.096   \n    No                     889 (82.5%) 934 (79.6%)       Ref.        Ref.             \n    Yes                    189 (17.5%) 239 (20.4%) 1.20 [0.97;1.49]  0.086            \nchol                       217 (42.7)  220 (47.4)  1.00 [1.00;1.00]  0.141    0.140   \nÂ¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯ \n\n\n\n\n\nä¸æ˜¾ç¤ºå¯¹ç…§ç»„çš„æè¿°ä¿¡æ¯\nä½¿ç”¨hide.noæ¥éšè—æŸäº›å› å­æ°´å¹³çš„æè¿°ã€‚å¸¸ç”¨æ¥éšè—æ‰2åˆ†ç±»å˜é‡çš„å¦çš„ä¿¡æ¯\n\n descrTable(`sex`~ .-id-year, data = regicor,hide.no = \"No\")\n\n\n--------Summary descriptives table by 'Sex'---------\n\n____________________________________________________________ \n                              Male       Female    p.overall \n                             N=1101      N=1193              \nÂ¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯ \nAge                        54.8 (11.1) 54.7 (11.0)   0.840   \nSmoking status:                                     &lt;0.001   \n    Never smoker           301 (28.1%) 900 (77.5%)           \n    Current or former &lt; 1y 410 (38.3%) 183 (15.7%)           \n    Former &gt;= 1y           360 (33.6%) 79 (6.80%)            \nSystolic blood pressure    134 (18.9)  129 (21.2)   &lt;0.001   \nDiastolic blood pressure   81.7 (10.2) 77.8 (10.5)  &lt;0.001   \nHistory of hypertension    341 (31.1%) 382 (32.1%)   0.644   \nHypertension treatment     189 (17.5%) 239 (20.4%)   0.096   \nTotal cholesterol          217 (42.7)  220 (47.4)    0.140   \nÂ¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯ \n\n\n\n\nåŒæ—¶æ˜¾ç¤ºæ€»äººç¾¤çš„æè¿°\n\ndescrTable(`sex`~ .-id-year, data = regicor,show.all = TRUE)\n\n\n--------Summary descriptives table by 'Sex'---------\n\n_________________________________________________________________________ \n                              [ALL]        Male       Female    p.overall \n                              N=2294      N=1101      N=1193              \nÂ¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯ \nAge                        54.7 (11.0)  54.8 (11.1) 54.7 (11.0)   0.840   \nSmoking status:                                                  &lt;0.001   \n    Never smoker           1201 (53.8%) 301 (28.1%) 900 (77.5%)           \n    Current or former &lt; 1y 593 (26.6%)  410 (38.3%) 183 (15.7%)           \n    Former &gt;= 1y           439 (19.7%)  360 (33.6%) 79 (6.80%)            \nSystolic blood pressure     131 (20.3)  134 (18.9)  129 (21.2)   &lt;0.001   \nDiastolic blood pressure   79.7 (10.5)  81.7 (10.2) 77.8 (10.5)  &lt;0.001   \nHistory of hypertension:                                          0.644   \n    Yes                    723 (31.6%)  341 (31.1%) 382 (32.1%)           \n    No                     1563 (68.4%) 755 (68.9%) 808 (67.9%)           \nHypertension treatment:                                           0.096   \n    No                     1823 (81.0%) 889 (82.5%) 934 (79.6%)           \n    Yes                    428 (19.0%)  189 (17.5%) 239 (20.4%)           \nTotal cholesterol           219 (45.2)  217 (42.7)  220 (47.4)    0.140   \nÂ¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯Â¯ \n\n\n\n\nç»“æœå¯¼å‡º\nå¯å¯¼å‡ºå„ç§æ ¼å¼,export2xls, export2latex,Â export2pdf,Â export2csv,Â export2md,Â export2word\n\nexport2word(tab_0,file=\"1 data_summary.docx\")\n\n\n\nå¿«é€Ÿå¯è§†åŒ–\nä½¿ç”¨plotå‡½æ•°è¿›è¡Œå¯è§†åŒ–ï¼Œè®¾ç½®fileå’Œtypeå‚æ•°è¿›è¡Œä¿å­˜ä¾‹å¦‚\nplot(res[c(1,2)], file=â€œ./figures/univar/â€, type=â€œpngâ€)\n\ntab0 &lt;- descrTable(`sex`~ .-id-year, data = regicor)\n\nplot(tab0)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "compareGroups - æè¿°æ€§è¡¨"
    ]
  },
  {
    "objectID": "1014-future.html",
    "href": "1014-future.html",
    "title": "future åŒ…å¹¶è¡Œè®¡ç®—å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "åœ¨æ•°æ®ç§‘å­¦å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°éœ€è¦å¤§é‡è®¡ç®—çš„ä»»åŠ¡ï¼š\n\næ‰¹é‡å¤„ç†æ•°åƒä¸ªæ–‡ä»¶\nè’™ç‰¹å¡æ´›æ¨¡æ‹Ÿæ•°ç™¾ä¸‡æ¬¡\nå¤§è§„æ¨¡æœºå™¨å­¦ä¹ äº¤å‰éªŒè¯\nå¤šæ¨¡å‹å‚æ•°è°ƒä¼˜\n\nfuture åŒ…æä¾›äº† R è¯­è¨€ä¸­æœ€ä¼˜é›…ã€æœ€ç°ä»£çš„å¹¶è¡Œè®¡ç®—è§£å†³æ–¹æ¡ˆã€‚å®ƒçš„æ ¸å¿ƒç†å¿µæ˜¯ï¼š\n\nâ€œWrite once, run anywhereâ€ â€” ä»£ç ç¼–å†™ä¸€æ¬¡ï¼Œå¯åœ¨ä»»ä½•æ‰§è¡Œç¯å¢ƒè¿è¡Œ\n\næœ¬æ•™ç¨‹å°†å…¨é¢ä»‹ç» future ç”Ÿæ€ç³»ç»Ÿï¼Œå¸®åŠ©ä½ å¤§å¹…æå‡è®¡ç®—æ•ˆç‡ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "future - å¹¶è¡Œè®¡ç®—"
    ]
  },
  {
    "objectID": "1014-future.html#å‰è¨€",
    "href": "1014-future.html#å‰è¨€",
    "title": "future åŒ…å¹¶è¡Œè®¡ç®—å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "åœ¨æ•°æ®ç§‘å­¦å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°éœ€è¦å¤§é‡è®¡ç®—çš„ä»»åŠ¡ï¼š\n\næ‰¹é‡å¤„ç†æ•°åƒä¸ªæ–‡ä»¶\nè’™ç‰¹å¡æ´›æ¨¡æ‹Ÿæ•°ç™¾ä¸‡æ¬¡\nå¤§è§„æ¨¡æœºå™¨å­¦ä¹ äº¤å‰éªŒè¯\nå¤šæ¨¡å‹å‚æ•°è°ƒä¼˜\n\nfuture åŒ…æä¾›äº† R è¯­è¨€ä¸­æœ€ä¼˜é›…ã€æœ€ç°ä»£çš„å¹¶è¡Œè®¡ç®—è§£å†³æ–¹æ¡ˆã€‚å®ƒçš„æ ¸å¿ƒç†å¿µæ˜¯ï¼š\n\nâ€œWrite once, run anywhereâ€ â€” ä»£ç ç¼–å†™ä¸€æ¬¡ï¼Œå¯åœ¨ä»»ä½•æ‰§è¡Œç¯å¢ƒè¿è¡Œ\n\næœ¬æ•™ç¨‹å°†å…¨é¢ä»‹ç» future ç”Ÿæ€ç³»ç»Ÿï¼Œå¸®åŠ©ä½ å¤§å¹…æå‡è®¡ç®—æ•ˆç‡ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "future - å¹¶è¡Œè®¡ç®—"
    ]
  },
  {
    "objectID": "1014-future.html#å¹¶è¡Œè®¡ç®—åŸºç¡€æ¦‚å¿µ",
    "href": "1014-future.html#å¹¶è¡Œè®¡ç®—åŸºç¡€æ¦‚å¿µ",
    "title": "future åŒ…å¹¶è¡Œè®¡ç®—å®Œå…¨æŒ‡å—",
    "section": "å¹¶è¡Œè®¡ç®—åŸºç¡€æ¦‚å¿µ",
    "text": "å¹¶è¡Œè®¡ç®—åŸºç¡€æ¦‚å¿µ\n\nä¸ºä»€ä¹ˆéœ€è¦å¹¶è¡Œï¼Ÿ\n\n\n\nåœºæ™¯\nä¸²è¡Œæ‰§è¡Œ\nå¹¶è¡Œæ‰§è¡Œï¼ˆ4æ ¸ï¼‰\n\n\n\n\n1000æ¬¡æ¨¡æ‹Ÿ\n100ç§’\n~25ç§’\n\n\nå¤„ç†100ä¸ªæ–‡ä»¶\n50ç§’\n~13ç§’\n\n\n10æŠ˜äº¤å‰éªŒè¯\n60ç§’\n~6ç§’\n\n\n\n\n\nå¹¶è¡Œçš„ç±»å‹\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                     å¹¶è¡Œè®¡ç®—ç±»å‹                          â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  å¤šçº¿ç¨‹ (Multithreading)                                 â”‚\nâ”‚  â””â”€ å…±äº«å†…å­˜ï¼Œé€‚åˆ I/O å¯†é›†å‹ä»»åŠ¡                         â”‚\nâ”‚                                                          â”‚\nâ”‚  å¤šè¿›ç¨‹ (Multiprocessing)                                â”‚\nâ”‚  â””â”€ ç‹¬ç«‹å†…å­˜ï¼Œé€‚åˆ CPU å¯†é›†å‹ä»»åŠ¡ï¼ˆR çš„ä¸»è¦æ–¹å¼ï¼‰          â”‚\nâ”‚                                                          â”‚\nâ”‚  åˆ†å¸ƒå¼è®¡ç®— (Distributed)                                 â”‚\nâ”‚  â””â”€ è·¨æœºå™¨è®¡ç®—ï¼Œé€‚åˆè¶…å¤§è§„æ¨¡ä»»åŠ¡                          â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\n\nR å¹¶è¡Œå·¥å…·æ¼”è¿›\n\n\n\næ—¶æœŸ\nå·¥å…·\nç‰¹ç‚¹\n\n\n\n\næ—©æœŸ\nparallel::mclapply\nä»… Unix/Mac\n\n\næ—©æœŸ\nparallel::parLapply\nè·¨å¹³å°ä½†ç¹ç\n\n\nç°ä»£\nforeach + doParallel\né€šç”¨ä½†è¯­æ³•å¤æ‚\n\n\nå½“å‰æ¨è\nfuture\nç»Ÿä¸€æ¥å£ï¼Œç®€æ´ä¼˜é›…",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "future - å¹¶è¡Œè®¡ç®—"
    ]
  },
  {
    "objectID": "1014-future.html#future-åŒ…å…¥é—¨",
    "href": "1014-future.html#future-åŒ…å…¥é—¨",
    "title": "future åŒ…å¹¶è¡Œè®¡ç®—å®Œå…¨æŒ‡å—",
    "section": "future åŒ…å…¥é—¨",
    "text": "future åŒ…å…¥é—¨\n\nå®‰è£…ä¸åŠ è½½\n\n# å®‰è£…ï¼ˆå¦‚æœªå®‰è£…ï¼‰\n# install.packages(\"future\")\n# install.packages(\"future.apply\")  # apply å®¶æ—å¹¶è¡Œç‰ˆ\n# install.packages(\"furrr\")          # purrr å¹¶è¡Œç‰ˆ\n\nlibrary(future)\nlibrary(future.apply)\nlibrary(furrr)\nlibrary(dplyr) # æ•°æ®å¤„ç†\nlibrary(tictoc) # è®¡æ—¶\n\n\n\næ ¸å¿ƒæ¦‚å¿µï¼šFuture å¯¹è±¡\nFuture æ˜¯ä¸€ä¸ªâ€æ‰¿è¯ºâ€â€”â€”æ‰¿è¯ºåœ¨æœªæ¥æŸä¸ªæ—¶åˆ»è¿”å›ç»“æœã€‚\n\n# åˆ›å»ºä¸€ä¸ª future\nf &lt;- future({\n    Sys.sleep(2) # æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ\n    42\n})\n\n# future æ˜¯éé˜»å¡çš„ï¼ˆç«‹å³è¿”å›ï¼‰\nprint(\"Future å·²åˆ›å»ºï¼Œè¿˜æœªæ‰§è¡Œå®Œ\")\n\n[1] \"Future å·²åˆ›å»ºï¼Œè¿˜æœªæ‰§è¡Œå®Œ\"\n\n# è·å–ç»“æœï¼ˆä¼šé˜»å¡ç›´åˆ°å®Œæˆï¼‰\nresult &lt;- value(f)\nprint(paste(\"ç»“æœ:\", result))\n\n[1] \"ç»“æœ: 42\"\n\n\n\n\næ˜¾å¼ vs éšå¼ Future\n\n# å®šä¹‰ä¸€ä¸ªæ¨¡æ‹Ÿè€—æ—¶çš„å‡½æ•°\nslow_function &lt;- function() {\n    Sys.sleep(0.5)\n    return(\"å®Œæˆ!\")\n}\n\n# æ˜¾å¼ futureï¼ˆæ‰‹åŠ¨åˆ›å»ºï¼‰\nf &lt;- future(slow_function())\nv &lt;- value(f)\nprint(paste(\"æ˜¾å¼ Future ç»“æœ:\", v))\n\n[1] \"æ˜¾å¼ Future ç»“æœ: å®Œæˆ!\"\n\n# éšå¼ futureï¼ˆä½¿ç”¨ %&lt;-% è¯­æ³•ï¼‰\nv2 %&lt;-% {\n    Sys.sleep(0.5)\n    100 * 2\n}\n\n# v2 åœ¨éœ€è¦æ—¶è‡ªåŠ¨è·å–å€¼\nprint(paste(\"éšå¼ Future ç»“æœ:\", v2))\n\n[1] \"éšå¼ Future ç»“æœ: 200\"",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "future - å¹¶è¡Œè®¡ç®—"
    ]
  },
  {
    "objectID": "1014-future.html#æ‰§è¡Œç­–ç•¥è¯¦è§£-plan",
    "href": "1014-future.html#æ‰§è¡Œç­–ç•¥è¯¦è§£-plan",
    "title": "future åŒ…å¹¶è¡Œè®¡ç®—å®Œå…¨æŒ‡å—",
    "section": "æ‰§è¡Œç­–ç•¥è¯¦è§£ (Plan)",
    "text": "æ‰§è¡Œç­–ç•¥è¯¦è§£ (Plan)\n\nplan() çš„ä½œç”¨\nplan() å†³å®š future å¦‚ä½•æ‰§è¡Œã€‚è¿™æ˜¯ future åŒ…æœ€å¼ºå¤§çš„ç‰¹æ€§ï¼š\n\næ”¹å˜ä¸€è¡Œä»£ç ï¼Œå³å¯åˆ‡æ¢ä¸²è¡Œ/å¹¶è¡Œ/åˆ†å¸ƒå¼æ‰§è¡Œ\n\n\n\nå¸¸ç”¨æ‰§è¡Œç­–ç•¥\n\n\n\nç­–ç•¥\nè¯´æ˜\né€‚ç”¨åœºæ™¯\n\n\n\n\nsequential\nä¸²è¡Œæ‰§è¡Œï¼ˆé»˜è®¤ï¼‰\nå¼€å‘è°ƒè¯•\n\n\nmultisession\nå¤šè¿›ç¨‹ï¼ˆè·¨å¹³å°ï¼‰\næœ€å¸¸ç”¨\n\n\nmulticore\nå¤šè¿›ç¨‹ï¼ˆUnix/Macï¼‰\nå†…å­˜æ•ˆç‡é«˜\n\n\ncluster\nåˆ†å¸ƒå¼é›†ç¾¤\nå¤šæœºå™¨\n\n\n\n\n\nplan() ä½¿ç”¨ç¤ºä¾‹\n\n# æŸ¥çœ‹å½“å‰ç­–ç•¥\nplan()\n\nsequential:\n- args: function (..., envir = parent.frame(), workers = \"&lt;NULL&gt;\")\n- tweaked: FALSE\n- call: plan(sequential)\nSequentialFutureBackend:\nInherits: FutureBackend\nUUID: b6c1424aa012bc038b03184e58d7226f\nNumber of workers: 1\nNumber of free workers: 1\nAvailable cores: 32\nAutomatic garbage collection: FALSE\nEarly signaling: FALSE\nInterrupts are enabled: TRUE\nMaximum total size of globals: +Inf\nMaximum total size of value: +Inf\nArgument 'hooks': FALSE\nNumber of active futures: 0\nNumber of futures since start: 3 (3 created, 3 launched, 3 finished)\nTotal runtime of futures: 3.104448 secs (1.034816 secs/finished future)\n\n# è®¾ç½®ä¸ºå¤šè¿›ç¨‹ï¼ˆä½¿ç”¨æ‰€æœ‰å¯ç”¨æ ¸å¿ƒï¼‰\nplan(multisession, workers = availableCores())\n\n# æˆ–æŒ‡å®šæ ¸å¿ƒæ•°\nplan(multisession, workers = 4)\n\n# æ¢å¤ä¸²è¡Œ\nplan(sequential)\n\n\n\næ£€æµ‹å¯ç”¨èµ„æº\n\n# å¯ç”¨ CPU æ ¸å¿ƒæ•°\ncat(\"å¯ç”¨æ ¸å¿ƒ:\", availableCores(), \"\\n\")\n\nå¯ç”¨æ ¸å¿ƒ: 32 \n\n# å¯ç”¨å†…å­˜\ncat(\"å¯ç”¨å†…å­˜:\", availableCores(methods = \"system\"), \"\\n\")\n\nå¯ç”¨å†…å­˜: 32",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "future - å¹¶è¡Œè®¡ç®—"
    ]
  },
  {
    "objectID": "1014-future.html#future.applyå¹¶è¡Œ-apply-å‡½æ•°",
    "href": "1014-future.html#future.applyå¹¶è¡Œ-apply-å‡½æ•°",
    "title": "future åŒ…å¹¶è¡Œè®¡ç®—å®Œå…¨æŒ‡å—",
    "section": "future.applyï¼šå¹¶è¡Œ apply å‡½æ•°",
    "text": "future.applyï¼šå¹¶è¡Œ apply å‡½æ•°\n\nå‡½æ•°å¯¹ç…§è¡¨\n\n\n\næ ‡å‡†å‡½æ•°\nfuture.apply ç‰ˆæœ¬\n\n\n\n\nlapply()\nfuture_lapply()\n\n\nsapply()\nfuture_sapply()\n\n\nvapply()\nfuture_vapply()\n\n\nmapply()\nfuture_mapply()\n\n\napply()\nfuture_apply()\n\n\nby()\nfuture_by()\n\n\n\n\n\nåŸºç¡€ç¤ºä¾‹\n\n# å®šä¹‰è€—æ—¶å‡½æ•°\nslow_sqrt &lt;- function(x) {\n    Sys.sleep(0.1) # æ¨¡æ‹Ÿè®¡ç®—\n    sqrt(x)\n}\n\n# æµ‹è¯•æ•°æ®\nnumbers &lt;- 1:20\n\n# ä¸²è¡Œæ‰§è¡Œ\nplan(sequential)\ntic(\"ä¸²è¡Œ\")\nresult_seq &lt;- future_sapply(numbers, slow_sqrt)\ntoc()\n\nä¸²è¡Œ: 2.18 sec elapsed\n\n# å¹¶è¡Œæ‰§è¡Œ\nplan(multisession, workers = 4)\ntic(\"å¹¶è¡Œï¼ˆ4æ ¸ï¼‰\")\nresult_par &lt;- future_sapply(numbers, slow_sqrt)\ntoc()\n\nå¹¶è¡Œï¼ˆ4æ ¸ï¼‰: 0.67 sec elapsed\n\n# æ¢å¤ä¸²è¡Œ\nplan(sequential)\n\n\n\nå®é™…æ¡ˆä¾‹ï¼šæ‰¹é‡æ–‡ä»¶å¤„ç†\n\nlibrary(readr)\nlibrary(future.apply)\n\n# è®¾ç½®å¹¶è¡Œ\nplan(multisession, workers = 4)\n\n# è·å–æ‰€æœ‰ CSV æ–‡ä»¶\ncsv_files &lt;- list.files(\"data/\", pattern = \"\\\\.csv$\", full.names = TRUE)\n\n# å¹¶è¡Œè¯»å–å¹¶å¤„ç†\nresults &lt;- future_lapply(csv_files, function(file) {\n    df &lt;- read_csv(file, show_col_types = FALSE)\n\n    # å¤„ç†é€»è¾‘\n    df_processed &lt;- df %&gt;%\n        filter(!is.na(key_column)) %&gt;%\n        mutate(processed = TRUE)\n\n    return(df_processed)\n}, future.seed = TRUE) # ç¡®ä¿å¯é‡å¤æ€§\n\n# åˆå¹¶ç»“æœ\nfinal_data &lt;- bind_rows(results)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "future - å¹¶è¡Œè®¡ç®—"
    ]
  },
  {
    "objectID": "1014-future.html#furrrå¹¶è¡ŒåŒ–çš„-purrr",
    "href": "1014-future.html#furrrå¹¶è¡ŒåŒ–çš„-purrr",
    "title": "future åŒ…å¹¶è¡Œè®¡ç®—å®Œå…¨æŒ‡å—",
    "section": "furrrï¼šå¹¶è¡ŒåŒ–çš„ purrr",
    "text": "furrrï¼šå¹¶è¡ŒåŒ–çš„ purrr\n\nä¸ºä»€ä¹ˆç”¨ furrrï¼Ÿ\nå¦‚æœä½ å·²ç»ä¹ æƒ¯äº† purrr çš„ä¼˜é›…è¯­æ³•ï¼Œfurrr è®©ä½ æ— ç¼åˆ‡æ¢åˆ°å¹¶è¡Œï¼š\n\n\n\npurrr å‡½æ•°\nfurrr ç‰ˆæœ¬\n\n\n\n\nmap()\nfuture_map()\n\n\nmap_dfr()\nfuture_map_dfr()\n\n\nmap2()\nfuture_map2()\n\n\npmap()\nfuture_pmap()\n\n\nwalk()\nfuture_walk()\n\n\nimap()\nfuture_imap()\n\n\n\n\n\nåŸºç¡€ç¤ºä¾‹\n\nlibrary(purrr)\nlibrary(furrr)\n\n# è®¾ç½®å¹¶è¡Œ\nplan(multisession, workers = 4)\n\n# purrr è¯­æ³•å®Œå…¨ä¿ç•™\nresults &lt;- future_map(1:10, ~ {\n    Sys.sleep(0.1)\n    .x^2\n})\n\n# è¿”å› data.frame\nresults_df &lt;- future_map_dfr(1:5, ~ {\n    tibble(\n        input = .x,\n        square = .x^2,\n        sqrt = sqrt(.x)\n    )\n})\n\nprint(results_df)\n\n# A tibble: 5 Ã— 3\n  input square  sqrt\n  &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt;\n1     1      1  1   \n2     2      4  1.41\n3     3      9  1.73\n4     4     16  2   \n5     5     25  2.24\n\n# æ¢å¤ä¸²è¡Œ\nplan(sequential)\n\n\n\nå¤šå‚æ•°å¹¶è¡Œï¼šfuture_map2 / future_pmap\n\nplan(multisession, workers = 4)\n\n# ä¸¤ä¸ªè¾“å…¥å‘é‡\nx &lt;- 1:5\ny &lt;- 6:10\n\n# å¹¶è¡Œå¤„ç†\nresults &lt;- future_map2(x, y, ~ {\n    Sys.sleep(0.1)\n    .x + .y\n})\n\nprint(unlist(results))\n\n[1]  7  9 11 13 15\n\n# å¤šå‚æ•°\nparams &lt;- list(\n    a = 1:3,\n    b = 4:6,\n    c = 7:9\n)\n\nresults &lt;- future_pmap(params, function(a, b, c) {\n    a * b + c\n})\n\nprint(unlist(results))\n\n[1] 11 18 27\n\nplan(sequential)\n\n\n\nä¿ç•™è¾“å…¥åç§°\n\nplan(multisession, workers = 2)\n\nnamed_list &lt;- list(\n    first = 10,\n    second = 20,\n    third = 30\n)\n\n# ä½¿ç”¨ future_imap ä¿ç•™åç§°\nresults &lt;- future_imap(named_list, ~ {\n    paste0(.y, \": \", .x * 2)\n})\n\nprint(results)\n\n$first\n[1] \"first: 20\"\n\n$second\n[1] \"second: 40\"\n\n$third\n[1] \"third: 60\"\n\nplan(sequential)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "future - å¹¶è¡Œè®¡ç®—"
    ]
  },
  {
    "objectID": "1014-future.html#è¿›åº¦æ˜¾ç¤ºprogressr",
    "href": "1014-future.html#è¿›åº¦æ˜¾ç¤ºprogressr",
    "title": "future åŒ…å¹¶è¡Œè®¡ç®—å®Œå…¨æŒ‡å—",
    "section": "è¿›åº¦æ˜¾ç¤ºï¼šprogressr",
    "text": "è¿›åº¦æ˜¾ç¤ºï¼šprogressr\n\nå®‰è£…å’Œé…ç½®\n\n# install.packages(\"progressr\")\nlibrary(progressr)\n\n# é…ç½®è¿›åº¦å¤„ç†å™¨ï¼ˆæ–‡æœ¬è¿›åº¦æ¡ï¼‰\n# handlers(\"txtprogressbar\") å¯ä»¥è®¾ç½®ä¸åŒçš„è¿›åº¦æ˜¾ç¤ºæ–¹å¼\n\n\n\nä½¿ç”¨è¿›åº¦æ¡\n\nplan(multisession, workers = 2)\n\n# å®šä¹‰å¸¦è¿›åº¦çš„å‡½æ•°\nprocess_with_progress &lt;- function(items) {\n    p &lt;- progressr::progressor(along = items)\n\n    future_map(items, function(x) {\n        Sys.sleep(0.05)\n        p() # æ›´æ–°è¿›åº¦\n        x^2\n    })\n}\n\n# è¿è¡Œ\nresults &lt;- process_with_progress(1:10)\n\ncat(\"å¤„ç†å®Œæˆï¼Œç»“æœæ•°é‡:\", length(results), \"\\n\")\n\nå¤„ç†å®Œæˆï¼Œç»“æœæ•°é‡: 10 \n\nplan(sequential)\n\n\n\nè‡ªå®šä¹‰è¿›åº¦æ ·å¼\n\n# Shiny é£æ ¼è¿›åº¦æ¡\nhandlers(\"shiny\")\n\n# å¸¦ ETA çš„è¿›åº¦æ¡\nhandlers(handler_txtprogressbar(style = 3))\n\n# å“”å£°æç¤º\nhandlers(handler_beepr())\n\n# å¤šç§å¤„ç†å™¨ç»„åˆ\nhandlers(list(\n    handler_txtprogressbar(),\n    handler_beepr(finish = TRUE)\n))",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "future - å¹¶è¡Œè®¡ç®—"
    ]
  },
  {
    "objectID": "1014-future.html#é”™è¯¯å¤„ç†ä¸è°ƒè¯•",
    "href": "1014-future.html#é”™è¯¯å¤„ç†ä¸è°ƒè¯•",
    "title": "future åŒ…å¹¶è¡Œè®¡ç®—å®Œå…¨æŒ‡å—",
    "section": "é”™è¯¯å¤„ç†ä¸è°ƒè¯•",
    "text": "é”™è¯¯å¤„ç†ä¸è°ƒè¯•\n\næ•è·é”™è¯¯\n\nplan(multisession, workers = 2)\n\n# å®šä¹‰å¯èƒ½å‡ºé”™çš„å‡½æ•°\nrisky_function &lt;- function(x) {\n    if (x == 5) stop(\"Error at 5!\")\n    sqrt(x)\n}\n\n# ä½¿ç”¨ safely åŒ…è£…\nsafe_risky &lt;- purrr::safely(risky_function)\n\nresults &lt;- future_map(1:10, safe_risky)\n\n# æå–ç»“æœå’Œé”™è¯¯\nsuccesses &lt;- map(results, \"result\") %&gt;% compact()\nerrors &lt;- map(results, \"error\") %&gt;% compact()\n\ncat(\"æˆåŠŸ:\", length(successes), \"\\n\")\n\næˆåŠŸ: 9 \n\ncat(\"å¤±è´¥:\", length(errors), \"\\n\")\n\nå¤±è´¥: 1 \n\nplan(sequential)\n\n\n\nè°ƒè¯•æŠ€å·§\n\n# 1. å…ˆåœ¨ä¸²è¡Œæ¨¡å¼ä¸‹è°ƒè¯•\nplan(sequential)\n\n# è¿è¡Œä»£ç ï¼Œç¡®ä¿æ— é”™è¯¯\nresult &lt;- future_map(data, my_function)\n\n# 2. åˆ‡æ¢å¹¶è¡Œ\nplan(multisession, workers = 4)\n\n# å†æ¬¡è¿è¡Œ\nresult &lt;- future_map(data, my_function)\n\n\n\nfuture é€‰é¡¹\n\n# æŸ¥çœ‹å½“å‰ future é…ç½®\ncat(\"å½“å‰ç­–ç•¥:\", class(plan())[1], \"\\n\")\n\nå½“å‰ç­–ç•¥: FutureStrategy \n\ncat(\"å¯ç”¨æ ¸å¿ƒ:\", availableCores(), \"\\n\")\n\nå¯ç”¨æ ¸å¿ƒ: 32 \n\n# å¸¸ç”¨è®¾ç½®\noptions(\n    future.rng.onMisuse = \"warning\", # éšæœºæ•°è­¦å‘Š\n    future.globals.maxSize = 1024 * 1024^2 # å…¨å±€å˜é‡æœ€å¤§ 1GB\n)\n\ncat(\"é…ç½®å®Œæˆ\\n\")\n\né…ç½®å®Œæˆ",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "future - å¹¶è¡Œè®¡ç®—"
    ]
  },
  {
    "objectID": "1014-future.html#å®æˆ˜æ¡ˆä¾‹",
    "href": "1014-future.html#å®æˆ˜æ¡ˆä¾‹",
    "title": "future åŒ…å¹¶è¡Œè®¡ç®—å®Œå…¨æŒ‡å—",
    "section": "å®æˆ˜æ¡ˆä¾‹",
    "text": "å®æˆ˜æ¡ˆä¾‹\n\nè’™ç‰¹å¡æ´›æ¨¡æ‹Ÿ\n\n# ä¼°ç®—åœ†å‘¨ç‡ Ï€\nestimate_pi &lt;- function(n) {\n    x &lt;- runif(n)\n    y &lt;- runif(n)\n    inside &lt;- sum(x^2 + y^2 &lt;= 1)\n    4 * inside / n\n}\n\n# å¹¶è¡Œæ‰§è¡Œå¤šæ¬¡æ¨¡æ‹Ÿ\nplan(multisession, workers = 4)\n\nset.seed(123)\nn_simulations &lt;- 100\npoints_per_sim &lt;- 10000\n\ntic(\"Monte Carlo Pi Estimation\")\npi_estimates &lt;- future_map_dbl(\n    1:n_simulations,\n    ~ estimate_pi(points_per_sim),\n    .options = furrr_options(seed = TRUE) # ç¡®ä¿å¯é‡å¤\n)\ntoc()\n\nMonte Carlo Pi Estimation: 0.35 sec elapsed\n\ncat(\"Ï€ ä¼°è®¡å€¼:\", mean(pi_estimates), \"\\n\")\n\nÏ€ ä¼°è®¡å€¼: 3.141152 \n\ncat(\"æ ‡å‡†è¯¯:\", sd(pi_estimates), \"\\n\")\n\næ ‡å‡†è¯¯: 0.01795233 \n\ncat(\"çœŸå®å€¼:\", pi, \"\\n\")\n\nçœŸå®å€¼: 3.141593 \n\nplan(sequential)\n\n\n\näº¤å‰éªŒè¯\n\nlibrary(caret)\n\n# åˆ›å»ºç¤ºä¾‹æ•°æ®\nset.seed(42)\ndata &lt;- data.frame(\n    x1 = rnorm(200),\n    x2 = rnorm(200),\n    y = factor(sample(c(\"A\", \"B\"), 200, replace = TRUE))\n)\n\n# åˆ›å»º 5 æŠ˜åˆ†å‰²\nfolds &lt;- createFolds(data$y, k = 5, returnTrain = TRUE)\n\n# å®šä¹‰è®­ç»ƒå‡½æ•°\ntrain_fold &lt;- function(fold_idx) {\n    train_data &lt;- data[folds[[fold_idx]], ]\n    test_data &lt;- data[-folds[[fold_idx]], ]\n\n    model &lt;- glm(y ~ x1 + x2, data = train_data, family = binomial)\n\n    pred_probs &lt;- predict(model, test_data, type = \"response\")\n    pred_class &lt;- ifelse(pred_probs &gt; 0.5, \"B\", \"A\")\n\n    accuracy &lt;- mean(pred_class == test_data$y)\n    return(accuracy)\n}\n\n# å¹¶è¡Œäº¤å‰éªŒè¯\nplan(multisession, workers = 4)\n\ntic(\"5-Fold CV\")\ncv_results &lt;- future_map_dbl(1:5, train_fold)\ntoc()\n\n5-Fold CV: 0.4 sec elapsed\n\ncat(\"å„æŠ˜å‡†ç¡®ç‡:\", round(cv_results, 3), \"\\n\")\n\nå„æŠ˜å‡†ç¡®ç‡: 0.5 0.475 0.425 0.475 0.475 \n\ncat(\"å¹³å‡å‡†ç¡®ç‡:\", round(mean(cv_results), 3), \"\\n\")\n\nå¹³å‡å‡†ç¡®ç‡: 0.47 \n\nplan(sequential)\n\n\n\nBootstrap ç½®ä¿¡åŒºé—´\n\n# è®¡ç®— Bootstrap ç½®ä¿¡åŒºé—´\nbootstrap_ci &lt;- function(data, statistic, n_boot = 1000, conf_level = 0.95) {\n    plan(multisession, workers = 4)\n\n    # Bootstrap é‡æŠ½æ ·\n    boot_stats &lt;- future_map_dbl(1:n_boot, function(i) {\n        boot_sample &lt;- sample(data, length(data), replace = TRUE)\n        statistic(boot_sample)\n    }, .options = furrr_options(seed = TRUE))\n\n    # è®¡ç®—ç½®ä¿¡åŒºé—´\n    alpha &lt;- 1 - conf_level\n    ci &lt;- quantile(boot_stats, c(alpha / 2, 1 - alpha / 2))\n\n    plan(sequential)\n\n    return(list(\n        estimate = statistic(data),\n        ci_lower = ci[1],\n        ci_upper = ci[2],\n        bootstrap_se = sd(boot_stats)\n    ))\n}\n\n# ä½¿ç”¨ç¤ºä¾‹\nset.seed(123)\nsample_data &lt;- rnorm(100, mean = 50, sd = 10)\n\nresult &lt;- bootstrap_ci(sample_data, mean, n_boot = 2000)\n\ncat(\"ç‚¹ä¼°è®¡:\", round(result$estimate, 2), \"\\n\")\n\nç‚¹ä¼°è®¡: 50.9 \n\ncat(\"95% CI: [\", round(result$ci_lower, 2), \",\", round(result$ci_upper, 2), \"]\\n\")\n\n95% CI: [ 49.11 , 52.67 ]\n\ncat(\"Bootstrap SE:\", round(result$bootstrap_se, 2), \"\\n\")\n\nBootstrap SE: 0.92",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "future - å¹¶è¡Œè®¡ç®—"
    ]
  },
  {
    "objectID": "1014-future.html#æœ€ä½³å®è·µ",
    "href": "1014-future.html#æœ€ä½³å®è·µ",
    "title": "future åŒ…å¹¶è¡Œè®¡ç®—å®Œå…¨æŒ‡å—",
    "section": "æœ€ä½³å®è·µ",
    "text": "æœ€ä½³å®è·µ\n\nä½•æ—¶ä½¿ç”¨å¹¶è¡Œ\nâœ… é€‚åˆå¹¶è¡Œï¼š - ç‹¬ç«‹ä»»åŠ¡ï¼ˆæ— ä¾èµ–ï¼‰ - CPU å¯†é›†å‹è®¡ç®— - å¤§é‡é‡å¤æ“ä½œ\nâŒ ä¸é€‚åˆå¹¶è¡Œï¼š - ä»»åŠ¡é—´æœ‰ä¾èµ– - I/O å¯†é›†å‹ï¼ˆè¯»å†™æ–‡ä»¶ä¸ºä¸»ï¼‰ - å•æ¬¡å¿«é€Ÿæ“ä½œ - ä»»åŠ¡æ•° &lt; æ ¸å¿ƒæ•°\n\n\næ€§èƒ½ä¼˜åŒ–å»ºè®®\n\n# 1. åˆç†è®¾ç½® workers\nplan(multisession, workers = availableCores() - 1) # ç•™ä¸€ä¸ªæ ¸å¿ƒç»™ç³»ç»Ÿ\n\n# 2. æ‰¹é‡å¤„ç†å°ä»»åŠ¡\n# ä¸å¥½ï¼š1000æ¬¡å¾®å°ä»»åŠ¡\nfuture_map(1:1000, ~ Sys.sleep(0.001))\n\n# å¥½ï¼šå°†å°ä»»åŠ¡æ‰“åŒ…æˆå¤§ä»»åŠ¡\nchunks &lt;- split(1:1000, ceiling(seq_along(1:1000) / 100))\nfuture_map(chunks, ~ lapply(.x, my_function))\n\n# 3. é¿å…ä¼ é€’å¤§å¯¹è±¡\n# ä¸å¥½ï¼šåœ¨æ¯ä¸ªä»»åŠ¡ä¸­å¤åˆ¶å¤§æ•°æ®\nbig_data &lt;- data.frame(...)\nfuture_map(1:100, ~ process(big_data, .x))\n\n# å¥½ï¼šä½¿ç”¨å¼•ç”¨æˆ–åªä¼ å¿…è¦æ•°æ®\nfuture_map(1:100, ~ process(big_data[.x, ]))\n\n\n\nä»£ç æ¨¡æ¿\n\n#' æ ‡å‡†å¹¶è¡Œå¤„ç†æ¨¡æ¿\n#' @param items å¾…å¤„ç†é¡¹ç›®åˆ—è¡¨\n#' @param process_fn å¤„ç†å‡½æ•°\n#' @param n_workers å·¥ä½œè¿›ç¨‹æ•°\nparallel_process &lt;- function(items, process_fn, n_workers = 4) {\n    # è®¾ç½®å¹¶è¡Œ\n    plan(multisession, workers = n_workers)\n    on.exit(plan(sequential)) # ç¡®ä¿é€€å‡ºæ—¶æ¢å¤ä¸²è¡Œ\n\n    # å¸¦è¿›åº¦å’Œé”™è¯¯å¤„ç†çš„å¹¶è¡Œ\n    safe_fn &lt;- purrr::safely(process_fn)\n\n    results &lt;- with_progress({\n        p &lt;- progressr::progressor(along = items)\n\n        future_map(items, function(item) {\n            result &lt;- safe_fn(item)\n            p()\n            result\n        }, .options = furrr_options(seed = TRUE))\n    })\n\n    # æ•´ç†ç»“æœ\n    successes &lt;- map(results, \"result\") %&gt;% compact()\n    errors &lt;- map(results, \"error\") %&gt;% compact()\n\n    return(list(\n        results = successes,\n        errors = errors,\n        success_rate = length(successes) / length(items)\n    ))\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "future - å¹¶è¡Œè®¡ç®—"
    ]
  },
  {
    "objectID": "1014-future.html#å¸¸è§é—®é¢˜è§£ç­”",
    "href": "1014-future.html#å¸¸è§é—®é¢˜è§£ç­”",
    "title": "future åŒ…å¹¶è¡Œè®¡ç®—å®Œå…¨æŒ‡å—",
    "section": "å¸¸è§é—®é¢˜è§£ç­”",
    "text": "å¸¸è§é—®é¢˜è§£ç­”\n\nQ1: Windows ä¸Šä¸ºä»€ä¹ˆä¸èƒ½ç”¨ multicoreï¼Ÿ\nA: multicore ä¾èµ– Unix çš„ fork() ç³»ç»Ÿè°ƒç”¨ï¼ŒWindows ä¸æ”¯æŒã€‚è¯·ä½¿ç”¨ multisessionã€‚\n\n\nQ2: ä¸ºä»€ä¹ˆå¹¶è¡Œåæ›´æ…¢äº†ï¼Ÿ\nA: å¯èƒ½åŸå› ï¼š 1. ä»»åŠ¡å¤ªå°ï¼Œé€šä¿¡å¼€é”€è¶…è¿‡è®¡ç®—æ—¶é—´ 2. workers æ•°é‡è¶…è¿‡å®é™…æ ¸å¿ƒ 3. å†…å­˜ä¸è¶³å¯¼è‡´é¢‘ç¹ swap\n\n\nQ3: å¦‚ä½•åœ¨å‡½æ•°ä¸­ä½¿ç”¨å¤–éƒ¨å˜é‡ï¼Ÿ\n\n# future ä¼šè‡ªåŠ¨æ•è·éœ€è¦çš„å˜é‡\nexternal_data &lt;- 1:100\n\nfuture_map(1:10, ~ {\n    sum(external_data) + .x # external_data è‡ªåŠ¨ä¼ é€’\n})\n\n\n\nQ4: å¦‚ä½•ç¡®ä¿éšæœºæ•°å¯é‡å¤ï¼Ÿ\n\n# æ–¹æ³• 1: furrr é€‰é¡¹\nfuture_map(1:10, my_random_fn,\n    .options = furrr_options(seed = 123)\n)\n\n# æ–¹æ³• 2: æ‰‹åŠ¨è®¾ç½®ç§å­\nfuture_map(1:10, ~ {\n    set.seed(.x) # æ¯ä¸ªä»»åŠ¡ä½¿ç”¨ä¸åŒä½†ç¡®å®šæ€§çš„ç§å­\n    rnorm(10)\n})",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "future - å¹¶è¡Œè®¡ç®—"
    ]
  },
  {
    "objectID": "1014-future.html#æ€»ç»“",
    "href": "1014-future.html#æ€»ç»“",
    "title": "future åŒ…å¹¶è¡Œè®¡ç®—å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nåœºæ™¯\næ¨èå·¥å…·\n\n\n\n\nç®€å• lapply æ›¿æ¢\nfuture_lapply()\n\n\npurrr ç”¨æˆ·\nfurrr::future_map()\n\n\néœ€è¦è¿›åº¦æ˜¾ç¤º\nprogressr\n\n\nå¤æ‚å·¥ä½œæµ\næ˜¾å¼ future() + value()\n\n\n\n\n[!TIP] è®°ä½é»„é‡‘æ³•åˆ™ï¼š 1. å…ˆç”¨ plan(sequential) ç¡®ä¿ä»£ç æ­£ç¡® 2. ç„¶ååªéœ€æ”¹ä¸€è¡Œ plan(multisession) å³å¯å¹¶è¡Œ 3. ä»»åŠ¡æ•°åº”è¯¥è¿œå¤šäºæ ¸å¿ƒæ•°æ‰èƒ½å……åˆ†åˆ©ç”¨å¹¶è¡Œ",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "future - å¹¶è¡Œè®¡ç®—"
    ]
  },
  {
    "objectID": "1014-future.html#å‚è€ƒèµ„æ–™",
    "href": "1014-future.html#å‚è€ƒèµ„æ–™",
    "title": "future åŒ…å¹¶è¡Œè®¡ç®—å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒèµ„æ–™",
    "text": "å‚è€ƒèµ„æ–™\n\nfuture åŒ…å®˜æ–¹æ–‡æ¡£\nfurrr åŒ…å®˜æ–¹æ–‡æ¡£\nprogressr åŒ…å®˜æ–¹æ–‡æ¡£\nBengtsson, H. (2021). A Unifying Framework for Parallel and Distributed Processing in R using Futures. The R Journal.",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "future - å¹¶è¡Œè®¡ç®—"
    ]
  },
  {
    "objectID": "1015-health-economics.html",
    "href": "1015-health-economics.html",
    "title": "Rè¯­è¨€å«ç”Ÿç»æµå­¦åˆ†æ",
    "section": "",
    "text": "å«ç”Ÿç»æµå­¦è¯„ä»·ï¼ˆHealth Economic Evaluationï¼‰æ˜¯ä¸€ç§ç³»ç»Ÿæ€§æ¯”è¾ƒä¸åŒåŒ»ç–—å¹²é¢„æªæ–½çš„æˆæœ¬å’Œå¥åº·ç»“æœçš„åˆ†ææ–¹æ³•ï¼Œå¸®åŠ©å†³ç­–è€…åœ¨æœ‰é™èµ„æºä¸‹åšå‡ºæœ€ä¼˜é€‰æ‹©ã€‚\n\n\n\n\n\næ–¹æ³•\nè‹±æ–‡ç¼©å†™\nç»“æœæŒ‡æ ‡\né€‚ç”¨åœºæ™¯\n\n\n\n\næˆæœ¬æ•ˆæœåˆ†æ\nCEA\nè‡ªç„¶å•ä½ï¼ˆå¦‚ç”Ÿå‘½å¹´ï¼‰\nå•ä¸€ç–¾ç—…æ¯”è¾ƒ\n\n\næˆæœ¬æ•ˆç”¨åˆ†æ\nCUA\nè´¨é‡è°ƒæ•´ç”Ÿå‘½å¹´ï¼ˆQALYï¼‰\nè·¨ç–¾ç—…æ¯”è¾ƒ\n\n\næˆæœ¬æ•ˆç›Šåˆ†æ\nCBA\nè´§å¸å•ä½\nå¥åº·ä¸éå¥åº·é¡¹ç›®æ¯”è¾ƒ\n\n\næˆæœ¬æœ€å°åŒ–åˆ†æ\nCMA\næ— ï¼ˆå‡è®¾æ•ˆæœç›¸åŒï¼‰\næ•ˆæœç›¸åŒçš„å¹²é¢„æ¯”è¾ƒ\n\n\n\n\n\n\n\nICERï¼ˆå¢é‡æˆæœ¬æ•ˆæœæ¯”ï¼‰ï¼šæ¯å¤šè·å¾—ä¸€ä¸ªå¥åº·å•ä½æ‰€éœ€çš„é¢å¤–æˆæœ¬\nQALYï¼ˆè´¨é‡è°ƒæ•´ç”Ÿå‘½å¹´ï¼‰ï¼šç»¼åˆè€ƒè™‘ç”Ÿå­˜æ—¶é—´å’Œç”Ÿæ´»è´¨é‡\nWTPï¼ˆæ”¯ä»˜æ„æ„¿ï¼‰ï¼šç¤¾ä¼šæ„¿æ„ä¸ºä¸€ä¸ª QALY æ”¯ä»˜çš„æœ€é«˜é‡‘é¢\nè´´ç°ç‡ï¼šå°†æœªæ¥æˆæœ¬/æ•ˆæœæŠ˜ç®—ä¸ºç°å€¼çš„æ¯”ç‡ï¼ˆé€šå¸¸ 3-5%ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "å«ç”Ÿç»æµå­¦åˆ†æ"
    ]
  },
  {
    "objectID": "1015-health-economics.html#ä»€ä¹ˆæ˜¯å«ç”Ÿç»æµå­¦è¯„ä»·",
    "href": "1015-health-economics.html#ä»€ä¹ˆæ˜¯å«ç”Ÿç»æµå­¦è¯„ä»·",
    "title": "Rè¯­è¨€å«ç”Ÿç»æµå­¦åˆ†æ",
    "section": "",
    "text": "å«ç”Ÿç»æµå­¦è¯„ä»·ï¼ˆHealth Economic Evaluationï¼‰æ˜¯ä¸€ç§ç³»ç»Ÿæ€§æ¯”è¾ƒä¸åŒåŒ»ç–—å¹²é¢„æªæ–½çš„æˆæœ¬å’Œå¥åº·ç»“æœçš„åˆ†ææ–¹æ³•ï¼Œå¸®åŠ©å†³ç­–è€…åœ¨æœ‰é™èµ„æºä¸‹åšå‡ºæœ€ä¼˜é€‰æ‹©ã€‚\n\n\n\n\n\næ–¹æ³•\nè‹±æ–‡ç¼©å†™\nç»“æœæŒ‡æ ‡\né€‚ç”¨åœºæ™¯\n\n\n\n\næˆæœ¬æ•ˆæœåˆ†æ\nCEA\nè‡ªç„¶å•ä½ï¼ˆå¦‚ç”Ÿå‘½å¹´ï¼‰\nå•ä¸€ç–¾ç—…æ¯”è¾ƒ\n\n\næˆæœ¬æ•ˆç”¨åˆ†æ\nCUA\nè´¨é‡è°ƒæ•´ç”Ÿå‘½å¹´ï¼ˆQALYï¼‰\nè·¨ç–¾ç—…æ¯”è¾ƒ\n\n\næˆæœ¬æ•ˆç›Šåˆ†æ\nCBA\nè´§å¸å•ä½\nå¥åº·ä¸éå¥åº·é¡¹ç›®æ¯”è¾ƒ\n\n\næˆæœ¬æœ€å°åŒ–åˆ†æ\nCMA\næ— ï¼ˆå‡è®¾æ•ˆæœç›¸åŒï¼‰\næ•ˆæœç›¸åŒçš„å¹²é¢„æ¯”è¾ƒ\n\n\n\n\n\n\n\nICERï¼ˆå¢é‡æˆæœ¬æ•ˆæœæ¯”ï¼‰ï¼šæ¯å¤šè·å¾—ä¸€ä¸ªå¥åº·å•ä½æ‰€éœ€çš„é¢å¤–æˆæœ¬\nQALYï¼ˆè´¨é‡è°ƒæ•´ç”Ÿå‘½å¹´ï¼‰ï¼šç»¼åˆè€ƒè™‘ç”Ÿå­˜æ—¶é—´å’Œç”Ÿæ´»è´¨é‡\nWTPï¼ˆæ”¯ä»˜æ„æ„¿ï¼‰ï¼šç¤¾ä¼šæ„¿æ„ä¸ºä¸€ä¸ª QALY æ”¯ä»˜çš„æœ€é«˜é‡‘é¢\nè´´ç°ç‡ï¼šå°†æœªæ¥æˆæœ¬/æ•ˆæœæŠ˜ç®—ä¸ºç°å€¼çš„æ¯”ç‡ï¼ˆé€šå¸¸ 3-5%ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "å«ç”Ÿç»æµå­¦åˆ†æ"
    ]
  },
  {
    "objectID": "1015-health-economics.html#råŒ…ä»‹ç»",
    "href": "1015-health-economics.html#råŒ…ä»‹ç»",
    "title": "Rè¯­è¨€å«ç”Ÿç»æµå­¦åˆ†æ",
    "section": "RåŒ…ä»‹ç»",
    "text": "RåŒ…ä»‹ç»\nå«ç”Ÿç»æµå­¦åˆ†æå¸¸ç”¨çš„ R åŒ…ï¼š\n\n\n\nRåŒ…\nåŠŸèƒ½\né“¾æ¥\n\n\n\n\nhesim\nå¥åº·çŠ¶æ€è½¬æ¢æ¨¡å‹ã€å†³ç­–åˆ†æ\nCRAN\n\n\nheemod\né©¬å°”å¯å¤«æ¨¡å‹æ„å»º\nCRAN\n\n\nBCEA\nè´å¶æ–¯æˆæœ¬æ•ˆæœåˆ†æ\nCRAN\n\n\ndampack\nå†³ç­–åˆ†ææ¨¡å‹å‚æ•°åŒ–\nCRAN\n\n\nsurvHE\nç”Ÿå­˜åˆ†æå¤–æ¨\nCRAN\n\n\n\næœ¬æ•™ç¨‹ä½¿ç”¨åŸºç¡€ R å’Œ ggplot2 ä»é›¶å®ç°å«ç”Ÿç»æµå­¦æ ¸å¿ƒåˆ†æï¼Œæ— éœ€å®‰è£…ä¸“ä¸šåŒ…ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "å«ç”Ÿç»æµå­¦åˆ†æ"
    ]
  },
  {
    "objectID": "1015-health-economics.html#råŒ…å®‰è£…",
    "href": "1015-health-economics.html#råŒ…å®‰è£…",
    "title": "Rè¯­è¨€å«ç”Ÿç»æµå­¦åˆ†æ",
    "section": "RåŒ…å®‰è£…",
    "text": "RåŒ…å®‰è£…\n\n# å®‰è£…æ ¸å¿ƒåŒ…\ninstall.packages(\"ggplot2\")\ninstall.packages(\"dplyr\")\ninstall.packages(\"scales\")\n\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(scales)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "å«ç”Ÿç»æµå­¦åˆ†æ"
    ]
  },
  {
    "objectID": "1015-health-economics.html#æˆæœ¬æ•ˆæœåˆ†æåŸºç¡€",
    "href": "1015-health-economics.html#æˆæœ¬æ•ˆæœåˆ†æåŸºç¡€",
    "title": "Rè¯­è¨€å«ç”Ÿç»æµå­¦åˆ†æ",
    "section": "æˆæœ¬æ•ˆæœåˆ†æåŸºç¡€",
    "text": "æˆæœ¬æ•ˆæœåˆ†æåŸºç¡€\n\næ¨¡æ‹Ÿæ•°æ®å‡†å¤‡\nå‡è®¾æˆ‘ä»¬æ¯”è¾ƒä¸‰ç§æ²»ç–—æ–¹æ¡ˆï¼šæ ‡å‡†æ²»ç–—ã€æ–°è¯ Aã€æ–°è¯ Bã€‚\n\n# åˆ›å»ºç­–ç•¥æ•°æ®\nstrategies &lt;- c(\"æ ‡å‡†æ²»ç–—\", \"æ–°è¯A\", \"æ–°è¯B\")\n\n# æˆæœ¬æ•°æ®ï¼ˆå•ä½ï¼šå…ƒï¼‰\ncosts &lt;- c(50000, 80000, 120000)\n\n# æ•ˆæœæ•°æ®ï¼ˆQALYï¼‰\nqalys &lt;- c(5.2, 6.8, 7.5)\n\n# åˆ›å»ºæ•°æ®æ¡†\ncea_data &lt;- data.frame(\n  Strategy = strategies,\n  Cost = costs,\n  QALY = qalys\n)\n\ncea_data\n\n  Strategy   Cost QALY\n1 æ ‡å‡†æ²»ç–—  50000  5.2\n2    æ–°è¯A  80000  6.8\n3    æ–°è¯B 120000  7.5\n\n\n\n\næˆæœ¬æ•ˆæœå¹³é¢å›¾\næˆæœ¬æ•ˆæœå¹³é¢å›¾æ˜¯å«ç”Ÿç»æµå­¦æœ€åŸºç¡€çš„å¯è§†åŒ–ï¼Œæ¨ªè½´ä¸ºæ•ˆæœï¼ˆQALYï¼‰ï¼Œçºµè½´ä¸ºæˆæœ¬ã€‚\n\n# åŸºç¡€æˆæœ¬æ•ˆæœå¹³é¢å›¾\nggplot(cea_data, aes(x = QALY, y = Cost, color = Strategy)) +\n  geom_point(size = 5) +\n  geom_text(aes(label = Strategy), vjust = -1, size = 4) +\n  scale_y_continuous(labels = comma_format()) +\n  scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n  labs(\n    title = \"æˆæœ¬æ•ˆæœå¹³é¢å›¾\",\n    x = \"è´¨é‡è°ƒæ•´ç”Ÿå‘½å¹´ (QALY)\",\n    y = \"æˆæœ¬ (å…ƒ)\",\n    color = \"æ²»ç–—æ–¹æ¡ˆ\"\n  ) +\n  theme_bw(base_size = 12) +\n  theme(\n    legend.position = \"bottom\",\n    plot.title = element_text(hjust = 0.5, face = \"bold\")\n  ) +\n  expand_limits(y = c(0, 150000))\n\n\n\n\n\n\n\n\n\n\nè®¡ç®—å¢é‡æˆæœ¬æ•ˆæœæ¯” (ICER)\nICER å…¬å¼ï¼š\\[ICER = \\frac{\\Delta Cost}{\\Delta QALY} = \\frac{Cost_B - Cost_A}{QALY_B - QALY_A}\\]\n\n# ä»¥æ ‡å‡†æ²»ç–—ä¸ºå‚ç…§è®¡ç®— ICER\nreference &lt;- cea_data[1, ]\n\nicer_results &lt;- cea_data |&gt;\n  mutate(\n    Delta_Cost = Cost - reference$Cost,\n    Delta_QALY = QALY - reference$QALY,\n    ICER = ifelse(Delta_QALY &gt; 0, Delta_Cost / Delta_QALY, NA)\n  )\n\nicer_results\n\n  Strategy   Cost QALY Delta_Cost Delta_QALY     ICER\n1 æ ‡å‡†æ²»ç–—  50000  5.2          0        0.0       NA\n2    æ–°è¯A  80000  6.8      30000        1.6 18750.00\n3    æ–°è¯B 120000  7.5      70000        2.3 30434.78",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "å«ç”Ÿç»æµå­¦åˆ†æ"
    ]
  },
  {
    "objectID": "1015-health-economics.html#æˆæœ¬æ•ˆæœå¯æ¥å—æ›²çº¿-ceac",
    "href": "1015-health-economics.html#æˆæœ¬æ•ˆæœå¯æ¥å—æ›²çº¿-ceac",
    "title": "Rè¯­è¨€å«ç”Ÿç»æµå­¦åˆ†æ",
    "section": "æˆæœ¬æ•ˆæœå¯æ¥å—æ›²çº¿ (CEAC)",
    "text": "æˆæœ¬æ•ˆæœå¯æ¥å—æ›²çº¿ (CEAC)\n\næ¦‚ç‡æ•æ„Ÿæ€§åˆ†ææ•°æ®\næ¨¡æ‹Ÿ 1000 æ¬¡è’™ç‰¹å¡æ´›æ¨¡æ‹Ÿçš„ç»“æœï¼š\n\nset.seed(42)\nn_sim &lt;- 1000\n\n# æ¨¡æ‹Ÿæˆæœ¬å’Œæ•ˆæœçš„ä¸ç¡®å®šæ€§\nsim_data &lt;- data.frame(\n  simulation = rep(1:n_sim, 3),\n  Strategy = rep(c(\"æ ‡å‡†æ²»ç–—\", \"æ–°è¯A\", \"æ–°è¯B\"), each = n_sim),\n  Cost = c(\n    rnorm(n_sim, 50000, 5000),\n    rnorm(n_sim, 80000, 10000),\n    rnorm(n_sim, 120000, 15000)\n  ),\n  QALY = c(\n    rnorm(n_sim, 5.2, 0.5),\n    rnorm(n_sim, 6.8, 0.6),\n    rnorm(n_sim, 7.5, 0.7)\n  )\n)\n\nhead(sim_data)\n\n  simulation Strategy     Cost     QALY\n1          1 æ ‡å‡†æ²»ç–— 56854.79 4.857169\n2          2 æ ‡å‡†æ²»ç–— 47176.51 4.803643\n3          3 æ ‡å‡†æ²»ç–— 51815.64 4.996498\n4          4 æ ‡å‡†æ²»ç–— 53164.31 4.625665\n5          5 æ ‡å‡†æ²»ç–— 52021.34 5.757880\n6          6 æ ‡å‡†æ²»ç–— 49469.38 4.760272\n\n\n\n\nå¢é‡æˆæœ¬æ•ˆæœæ•£ç‚¹å›¾\n\n# è®¡ç®—ç›¸å¯¹äºæ ‡å‡†æ²»ç–—çš„å¢é‡\nref_data &lt;- sim_data |&gt;\n  filter(Strategy == \"æ ‡å‡†æ²»ç–—\") |&gt;\n  select(simulation, ref_Cost = Cost, ref_QALY = QALY)\n\nincremental_data &lt;- sim_data |&gt;\n  filter(Strategy != \"æ ‡å‡†æ²»ç–—\") |&gt;\n  left_join(ref_data, by = \"simulation\") |&gt;\n  mutate(\n    Delta_Cost = Cost - ref_Cost,\n    Delta_QALY = QALY - ref_QALY\n  )\n\n# ç»˜åˆ¶å¢é‡æˆæœ¬æ•ˆæœæ•£ç‚¹å›¾\nggplot(incremental_data, aes(x = Delta_QALY, y = Delta_Cost, color = Strategy)) +\n  geom_point(alpha = 0.3, size = 1.5) +\n  geom_hline(yintercept = 0, linetype = \"dashed\", color = \"gray50\") +\n  geom_vline(xintercept = 0, linetype = \"dashed\", color = \"gray50\") +\n  # æ·»åŠ  WTP é˜ˆå€¼çº¿ï¼ˆå‡è®¾ 50000 å…ƒ/QALYï¼‰\n  geom_abline(intercept = 0, slope = 50000, linetype = \"solid\", color = \"red\", linewidth = 1) +\n  scale_y_continuous(labels = comma_format()) +\n  scale_color_manual(values = c(\"#10b981\", \"#f59e0b\")) +\n  labs(\n    title = \"å¢é‡æˆæœ¬æ•ˆæœæ•£ç‚¹å›¾\",\n    subtitle = \"çº¢çº¿: WTP é˜ˆå€¼ = 50,000 å…ƒ/QALY\",\n    x = \"å¢é‡ QALY (Î”QALYs)\",\n    y = \"å¢é‡æˆæœ¬ (Î”æˆæœ¬)\",\n    color = \"æ²»ç–—æ–¹æ¡ˆ\"\n  ) +\n  theme_bw(base_size = 12) +\n  theme(\n    legend.position = \"bottom\",\n    plot.title = element_text(hjust = 0.5, face = \"bold\")\n  ) +\n  annotate(\"text\", x = 2.5, y = -20000, label = \"ä¼˜åŠ¿è±¡é™\\n(æ›´æœ‰æ•ˆä¸”æ›´ä¾¿å®œ)\", \n           color = \"darkgreen\", size = 3) +\n  annotate(\"text\", x = -0.5, y = 80000, label = \"åŠ£åŠ¿è±¡é™\\n(æ›´æ— æ•ˆä¸”æ›´è´µ)\", \n           color = \"darkred\", size = 3)\n\n\n\n\n\n\n\n\n\n\næˆæœ¬æ•ˆæœå¯æ¥å—æ›²çº¿\nCEAC å±•ç¤ºåœ¨ä¸åŒ WTP é˜ˆå€¼ä¸‹ï¼Œæ¯ç§ç­–ç•¥å…·æœ‰æˆæœ¬æ•ˆæœçš„æ¦‚ç‡ã€‚\n\n# å®šä¹‰ WTP èŒƒå›´\nwtp_range &lt;- seq(0, 150000, by = 5000)\n\n# è®¡ç®—æ¯ä¸ª WTP ä¸‹å„ç­–ç•¥çš„å¯æ¥å—æ¦‚ç‡\ncalculate_ceac &lt;- function(sim_data, wtp_range) {\n  strategies &lt;- unique(sim_data$Strategy)\n  results &lt;- data.frame()\n  \n  for (wtp in wtp_range) {\n    # è®¡ç®—æ¯æ¬¡æ¨¡æ‹Ÿçš„å‡€è´§å¸æ”¶ç›Š (NMB)\n    nmb_data &lt;- sim_data |&gt;\n      mutate(NMB = wtp * QALY - Cost)\n    \n    # æ‰¾å‡ºæ¯æ¬¡æ¨¡æ‹Ÿä¸­ NMB æœ€é«˜çš„ç­–ç•¥\n    best_strategy &lt;- nmb_data |&gt;\n      group_by(simulation) |&gt;\n      slice_max(NMB, n = 1) |&gt;\n      ungroup()\n    \n    # è®¡ç®—æ¯ç§ç­–ç•¥çš„æœ€ä¼˜æ¦‚ç‡\n    prob_best &lt;- best_strategy |&gt;\n      count(Strategy) |&gt;\n      mutate(Probability = n / n_sim)\n    \n    # è¡¥å……æ²¡æœ‰å‡ºç°çš„ç­–ç•¥\n    for (s in strategies) {\n      if (!s %in% prob_best$Strategy) {\n        prob_best &lt;- bind_rows(prob_best, \n                               data.frame(Strategy = s, n = 0, Probability = 0))\n      }\n    }\n    \n    prob_best$WTP &lt;- wtp\n    results &lt;- bind_rows(results, prob_best)\n  }\n  \n  results\n}\n\nceac_data &lt;- calculate_ceac(sim_data, wtp_range)\n\n# ç»˜åˆ¶ CEAC\nggplot(ceac_data, aes(x = WTP, y = Probability, color = Strategy)) +\n  geom_line(linewidth = 1.2) +\n  geom_vline(xintercept = 50000, linetype = \"dashed\", color = \"gray50\") +\n  scale_x_continuous(labels = comma_format()) +\n  scale_y_continuous(limits = c(0, 1), labels = percent_format()) +\n  scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n  labs(\n    title = \"æˆæœ¬æ•ˆæœå¯æ¥å—æ›²çº¿ (CEAC)\",\n    x = \"æ”¯ä»˜æ„æ„¿ (WTP, å…ƒ/QALY)\",\n    y = \"æˆæœ¬æ•ˆæœçš„æ¦‚ç‡\",\n    color = \"æ²»ç–—æ–¹æ¡ˆ\"\n  ) +\n  theme_bw(base_size = 12) +\n  theme(\n    legend.position = \"bottom\",\n    plot.title = element_text(hjust = 0.5, face = \"bold\")\n  ) +\n  annotate(\"text\", x = 55000, y = 0.95, label = \"WTP = 50,000\", \n           hjust = 0, color = \"gray30\", size = 3.5)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "å«ç”Ÿç»æµå­¦åˆ†æ"
    ]
  },
  {
    "objectID": "1015-health-economics.html#å†³ç­–æ ‘æ¨¡å‹",
    "href": "1015-health-economics.html#å†³ç­–æ ‘æ¨¡å‹",
    "title": "Rè¯­è¨€å«ç”Ÿç»æµå­¦åˆ†æ",
    "section": "å†³ç­–æ ‘æ¨¡å‹",
    "text": "å†³ç­–æ ‘æ¨¡å‹\n\nç®€å•å†³ç­–æ ‘ç¤ºä¾‹\næ¨¡æ‹Ÿä¸€ä¸ªç®€å•çš„æ²»ç–—å†³ç­–åœºæ™¯ï¼š\n\n# å†³ç­–æ ‘å‚æ•°\nparams &lt;- list(\n  # æ²»ç–—æˆåŠŸç‡\n  p_success_standard = 0.60,\n  p_success_new = 0.80,\n  \n  # æˆæœ¬\n  c_standard = 10000,\n  c_new = 25000,\n  c_success = 5000,  # æˆåŠŸåç»´æŠ¤æˆæœ¬\n  c_failure = 50000, # å¤±è´¥åè¡¥æ•‘æˆæœ¬\n  \n  # æ•ˆç”¨\n  u_success = 0.9,\n  u_failure = 0.5,\n  \n  # æ—¶é—´èŒƒå›´ï¼ˆå¹´ï¼‰\n  time_horizon = 5\n)\n\n# è®¡ç®—æœŸæœ›æˆæœ¬å’Œæ•ˆæœ\ncalculate_expected &lt;- function(p_success, c_treatment, params) {\n  # æœŸæœ›æˆæœ¬\n  expected_cost &lt;- c_treatment + \n    p_success * params$c_success + \n    (1 - p_success) * params$c_failure\n  \n  # æœŸæœ› QALY\n  expected_qaly &lt;- params$time_horizon * (\n    p_success * params$u_success + \n    (1 - p_success) * params$u_failure\n  )\n  \n  list(cost = expected_cost, qaly = expected_qaly)\n}\n\n# æ ‡å‡†æ²»ç–—\nstandard &lt;- calculate_expected(params$p_success_standard, params$c_standard, params)\n\n# æ–°æ²»ç–—\nnew_treatment &lt;- calculate_expected(params$p_success_new, params$c_new, params)\n\n# ç»“æœæ±‡æ€»\ndecision_tree_results &lt;- data.frame(\n  Strategy = c(\"æ ‡å‡†æ²»ç–—\", \"æ–°æ²»ç–—\"),\n  Expected_Cost = c(standard$cost, new_treatment$cost),\n  Expected_QALY = c(standard$qaly, new_treatment$qaly)\n) |&gt;\n  mutate(\n    ICER = c(NA, (Expected_Cost[2] - Expected_Cost[1]) / \n               (Expected_QALY[2] - Expected_QALY[1]))\n  )\n\ndecision_tree_results\n\n  Strategy Expected_Cost Expected_QALY  ICER\n1 æ ‡å‡†æ²»ç–—         33000           3.7    NA\n2   æ–°æ²»ç–—         39000           4.1 15000\n\n\n\n\nå†³ç­–æ ‘å¯è§†åŒ–\n\n# åˆ›å»ºå†³ç­–æ ‘æ•°æ®\ntree_data &lt;- data.frame(\n  x = c(0, 1, 1, 2, 2, 2, 2),\n  y = c(3, 4.5, 1.5, 5.5, 3.5, 2.5, 0.5),\n  label = c(\n    \"å†³ç­–èŠ‚ç‚¹\",\n    \"æ ‡å‡†æ²»ç–—\",\n    \"æ–°æ²»ç–—\",\n    paste0(\"æˆåŠŸ (\", params$p_success_standard * 100, \"%)\"),\n    paste0(\"å¤±è´¥ (\", (1 - params$p_success_standard) * 100, \"%)\"),\n    paste0(\"æˆåŠŸ (\", params$p_success_new * 100, \"%)\"),\n    paste0(\"å¤±è´¥ (\", (1 - params$p_success_new) * 100, \"%)\")\n  ),\n  node_type = c(\"decision\", \"chance\", \"chance\", \"outcome\", \"outcome\", \"outcome\", \"outcome\")\n)\n\n# è¿æ¥çº¿æ•°æ®\nedges &lt;- data.frame(\n  x = c(0, 0, 1, 1, 1, 1),\n  xend = c(1, 1, 2, 2, 2, 2),\n  y = c(3, 3, 4.5, 4.5, 1.5, 1.5),\n  yend = c(4.5, 1.5, 5.5, 3.5, 2.5, 0.5)\n)\n\nggplot() +\n  # ç»˜åˆ¶è¿æ¥çº¿\n  geom_segment(data = edges, \n               aes(x = x, y = y, xend = xend, yend = yend),\n               color = \"gray50\", linewidth = 0.8) +\n  # å†³ç­–èŠ‚ç‚¹ï¼ˆæ–¹å½¢ï¼‰\n  geom_point(data = tree_data |&gt; filter(node_type == \"decision\"),\n             aes(x = x, y = y), shape = 15, size = 8, color = \"#4f46e5\") +\n  # æœºä¼šèŠ‚ç‚¹ï¼ˆåœ†å½¢ï¼‰\n  geom_point(data = tree_data |&gt; filter(node_type == \"chance\"),\n             aes(x = x, y = y), shape = 16, size = 6, color = \"#10b981\") +\n  # ç»“æœèŠ‚ç‚¹ï¼ˆä¸‰è§’å½¢ï¼‰\n  geom_point(data = tree_data |&gt; filter(node_type == \"outcome\"),\n             aes(x = x, y = y), shape = 17, size = 5, color = \"#f59e0b\") +\n  # æ ‡ç­¾\n  geom_text(data = tree_data,\n            aes(x = x, y = y, label = label),\n            hjust = -0.1, vjust = 0.5, size = 3.5) +\n  # æ·»åŠ ç»“æœæ•°å€¼\n  annotate(\"text\", x = 2.8, y = 5.5, \n           label = paste0(\"æˆæœ¬: \", comma(params$c_standard + params$c_success), \n                          \"\\nQALY: \", params$time_horizon * params$u_success),\n           hjust = 0, size = 3, color = \"gray30\") +\n  annotate(\"text\", x = 2.8, y = 3.5,\n           label = paste0(\"æˆæœ¬: \", comma(params$c_standard + params$c_failure),\n                          \"\\nQALY: \", params$time_horizon * params$u_failure),\n           hjust = 0, size = 3, color = \"gray30\") +\n  annotate(\"text\", x = 2.8, y = 2.5,\n           label = paste0(\"æˆæœ¬: \", comma(params$c_new + params$c_success),\n                          \"\\nQALY: \", params$time_horizon * params$u_success),\n           hjust = 0, size = 3, color = \"gray30\") +\n  annotate(\"text\", x = 2.8, y = 0.5,\n           label = paste0(\"æˆæœ¬: \", comma(params$c_new + params$c_failure),\n                          \"\\nQALY: \", params$time_horizon * params$u_failure),\n           hjust = 0, size = 3, color = \"gray30\") +\n  labs(title = \"æ²»ç–—å†³ç­–æ ‘æ¨¡å‹\") +\n  theme_void() +\n  theme(plot.title = element_text(hjust = 0.5, face = \"bold\", size = 14)) +\n  xlim(-0.5, 4) +\n  ylim(-0.5, 6.5)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "å«ç”Ÿç»æµå­¦åˆ†æ"
    ]
  },
  {
    "objectID": "1015-health-economics.html#é©¬å°”å¯å¤«æ¨¡å‹",
    "href": "1015-health-economics.html#é©¬å°”å¯å¤«æ¨¡å‹",
    "title": "Rè¯­è¨€å«ç”Ÿç»æµå­¦åˆ†æ",
    "section": "é©¬å°”å¯å¤«æ¨¡å‹",
    "text": "é©¬å°”å¯å¤«æ¨¡å‹\n\næ¨¡å‹æ¦‚è¿°\né©¬å°”å¯å¤«æ¨¡å‹æ˜¯å«ç”Ÿç»æµå­¦ä¸­æœ€å¸¸ç”¨çš„å»ºæ¨¡æ–¹æ³•ï¼Œç”¨äºæ¨¡æ‹Ÿç–¾ç—…è¿›å±•å’Œå¹²é¢„æ•ˆæœã€‚\n\n# å®šä¹‰æ¨¡å‹å‚æ•°\nmarkov_params &lt;- list(\n  # çŠ¶æ€åç§°\n  states = c(\"å¥åº·\", \"ç–¾ç—…\", \"æ­»äº¡\"),\n  n_states = 3,\n  \n  # å‘¨æœŸæ•°ï¼ˆå¹´ï¼‰\n  n_cycles = 20,\n  \n  # è½¬ç§»æ¦‚ç‡ï¼ˆæ ‡å‡†æ²»ç–—ï¼‰\n  p_healthy_disease_std = 0.10,\n  p_disease_death_std = 0.15,\n  \n  # è½¬ç§»æ¦‚ç‡ï¼ˆæ–°æ²»ç–—ï¼‰\n  p_healthy_disease_new = 0.05,\n  p_disease_death_new = 0.10,\n  \n  # æˆæœ¬ï¼ˆæ¯å‘¨æœŸï¼‰\n  c_healthy = 1000,\n  c_disease = 8000,\n  c_death = 0,\n  c_new_treatment = 5000,  # æ–°æ²»ç–—é¢å¤–æˆæœ¬\n  \n  # æ•ˆç”¨\n  u_healthy = 1.0,\n  u_disease = 0.6,\n  u_death = 0,\n  \n  # è´´ç°ç‡\n  discount_rate = 0.03\n)\n\n\n\næ„å»ºè½¬ç§»æ¦‚ç‡çŸ©é˜µ\n\n# æ ‡å‡†æ²»ç–—è½¬ç§»çŸ©é˜µ\ntrans_matrix_std &lt;- matrix(c(\n  0.89, 0.10, 0.01,  # ä»å¥åº·çŠ¶æ€\n  0.00, 0.84, 0.16,  # ä»ç–¾ç—…çŠ¶æ€ï¼ˆå«èƒŒæ™¯æ­»äº¡ï¼‰\n  0.00, 0.00, 1.00   # ä»æ­»äº¡çŠ¶æ€\n), nrow = 3, byrow = TRUE)\n\nrownames(trans_matrix_std) &lt;- colnames(trans_matrix_std) &lt;- markov_params$states\n\n# æ–°æ²»ç–—è½¬ç§»çŸ©é˜µ\ntrans_matrix_new &lt;- matrix(c(\n  0.94, 0.05, 0.01,  # ä»å¥åº·çŠ¶æ€\n  0.00, 0.89, 0.11,  # ä»ç–¾ç—…çŠ¶æ€\n  0.00, 0.00, 1.00   # ä»æ­»äº¡çŠ¶æ€\n), nrow = 3, byrow = TRUE)\n\nrownames(trans_matrix_new) &lt;- colnames(trans_matrix_new) &lt;- markov_params$states\n\ntrans_matrix_std\n\n     å¥åº· ç–¾ç—… æ­»äº¡\nå¥åº· 0.89 0.10 0.01\nç–¾ç—… 0.00 0.84 0.16\næ­»äº¡ 0.00 0.00 1.00\n\n\n\n\nè¿è¡Œé©¬å°”å¯å¤«æ¨¡æ‹Ÿ\n\n# é©¬å°”å¯å¤«æ¨¡æ‹Ÿå‡½æ•°\nrun_markov &lt;- function(trans_matrix, params, treatment_cost = 0) {\n  n_cycles &lt;- params$n_cycles\n  states &lt;- params$states\n  \n  # åˆå§‹çŠ¶æ€åˆ†å¸ƒï¼ˆ100% å¥åº·ï¼‰\n  state_dist &lt;- matrix(0, nrow = n_cycles + 1, ncol = 3)\n  colnames(state_dist) &lt;- states\n  state_dist[1, ] &lt;- c(1, 0, 0)\n  \n  # æˆæœ¬å’Œæ•ˆç”¨å‘é‡\n  costs &lt;- c(params$c_healthy, params$c_disease, params$c_death)\n  utilities &lt;- c(params$u_healthy, params$u_disease, params$u_death)\n  \n  # è´´ç°å› å­\n  discount_factors &lt;- (1 / (1 + params$discount_rate)) ^ (0:n_cycles)\n  \n  # æ¨¡æ‹Ÿå„å‘¨æœŸ\n  for (i in 1:n_cycles) {\n    state_dist[i + 1, ] &lt;- state_dist[i, ] %*% trans_matrix\n  }\n  \n  # è®¡ç®—æˆæœ¬å’Œ QALY\n  cycle_costs &lt;- state_dist %*% costs + treatment_cost\n  cycle_qalys &lt;- state_dist %*% utilities\n  \n  # è´´ç°åæ€»è®¡\n  total_cost &lt;- sum(cycle_costs * discount_factors)\n  total_qaly &lt;- sum(cycle_qalys * discount_factors)\n  \n  list(\n    state_dist = state_dist,\n    total_cost = total_cost,\n    total_qaly = total_qaly,\n    cycle_costs = cycle_costs,\n    cycle_qalys = cycle_qalys\n  )\n}\n\n# è¿è¡Œä¸¤ç§æ²»ç–—æ–¹æ¡ˆ\nresults_std &lt;- run_markov(trans_matrix_std, markov_params, treatment_cost = 0)\nresults_new &lt;- run_markov(trans_matrix_new, markov_params, treatment_cost = markov_params$c_new_treatment)\n\n\n\nçŠ¶æ€åˆ†å¸ƒå¯è§†åŒ–\n\n# æ•´ç†çŠ¶æ€åˆ†å¸ƒæ•°æ®\nprepare_state_data &lt;- function(results, treatment_name) {\n  data.frame(\n    Cycle = rep(0:markov_params$n_cycles, 3),\n    State = rep(markov_params$states, each = markov_params$n_cycles + 1),\n    Proportion = as.vector(results$state_dist),\n    Treatment = treatment_name\n  )\n}\n\nstate_data &lt;- bind_rows(\n  prepare_state_data(results_std, \"æ ‡å‡†æ²»ç–—\"),\n  prepare_state_data(results_new, \"æ–°æ²»ç–—\")\n)\n\n# ç»˜åˆ¶çŠ¶æ€è½¬ç§»å›¾\nggplot(state_data, aes(x = Cycle, y = Proportion, fill = State)) +\n  geom_area(alpha = 0.8) +\n  facet_wrap(~Treatment) +\n  scale_fill_manual(values = c(\"#10b981\", \"#f59e0b\", \"#6b7280\")) +\n  scale_y_continuous(labels = percent_format()) +\n  labs(\n    title = \"é©¬å°”å¯å¤«æ¨¡å‹çŠ¶æ€åˆ†å¸ƒ\",\n    x = \"å‘¨æœŸï¼ˆå¹´ï¼‰\",\n    y = \"äººç¾¤æ¯”ä¾‹\",\n    fill = \"å¥åº·çŠ¶æ€\"\n  ) +\n  theme_bw(base_size = 12) +\n  theme(\n    legend.position = \"bottom\",\n    plot.title = element_text(hjust = 0.5, face = \"bold\"),\n    strip.background = element_rect(fill = \"#4f46e5\"),\n    strip.text = element_text(color = \"white\", face = \"bold\")\n  )\n\n\n\n\n\n\n\n\n\n\né©¬å°”å¯å¤«æ¨¡å‹ç»“æœæ±‡æ€»\n\n# æ±‡æ€»ç»“æœ\nmarkov_summary &lt;- data.frame(\n  Strategy = c(\"æ ‡å‡†æ²»ç–—\", \"æ–°æ²»ç–—\"),\n  Total_Cost = c(results_std$total_cost, results_new$total_cost),\n  Total_QALY = c(results_std$total_qaly, results_new$total_qaly)\n) |&gt;\n  mutate(\n    Delta_Cost = Total_Cost - Total_Cost[1],\n    Delta_QALY = Total_QALY - Total_QALY[1],\n    ICER = ifelse(Delta_QALY &gt; 0, Delta_Cost / Delta_QALY, NA)\n  )\n\nmarkov_summary\n\n  Strategy Total_Cost Total_QALY Delta_Cost Delta_QALY     ICER\n1 æ ‡å‡†æ²»ç–—   33714.77   9.017402       0.00   0.000000       NA\n2   æ–°æ²»ç–—  111169.34  11.417944   77454.57   2.400542 32265.45",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "å«ç”Ÿç»æµå­¦åˆ†æ"
    ]
  },
  {
    "objectID": "1015-health-economics.html#å•å› ç´ æ•æ„Ÿæ€§åˆ†æ",
    "href": "1015-health-economics.html#å•å› ç´ æ•æ„Ÿæ€§åˆ†æ",
    "title": "Rè¯­è¨€å«ç”Ÿç»æµå­¦åˆ†æ",
    "section": "å•å› ç´ æ•æ„Ÿæ€§åˆ†æ",
    "text": "å•å› ç´ æ•æ„Ÿæ€§åˆ†æ\n\né¾™å·é£å›¾\né¾™å·é£å›¾å±•ç¤ºå„å‚æ•°å¯¹ç»“æœçš„å½±å“ç¨‹åº¦ã€‚\n\n# å®šä¹‰å‚æ•°èŒƒå›´\nsensitivity_params &lt;- data.frame(\n  Parameter = c(\n    \"ç–¾ç—…è½¬ç§»æ¦‚ç‡ (æ ‡å‡†)\",\n    \"æ­»äº¡è½¬ç§»æ¦‚ç‡ (æ ‡å‡†)\",\n    \"ç–¾ç—…è½¬ç§»æ¦‚ç‡ (æ–°)\",\n    \"æ­»äº¡è½¬ç§»æ¦‚ç‡ (æ–°)\",\n    \"ç–¾ç—…çŠ¶æ€æˆæœ¬\",\n    \"æ–°æ²»ç–—æˆæœ¬\",\n    \"è´´ç°ç‡\"\n  ),\n  Base = c(0.10, 0.15, 0.05, 0.10, 8000, 5000, 0.03),\n  Low = c(0.05, 0.10, 0.03, 0.05, 5000, 3000, 0.00),\n  High = c(0.15, 0.20, 0.08, 0.15, 12000, 8000, 0.05)\n)\n\n# æ¨¡æ‹Ÿæ•æ„Ÿæ€§åˆ†æç»“æœï¼ˆç®€åŒ–æ¼”ç¤ºï¼‰\nset.seed(123)\ntornado_data &lt;- sensitivity_params |&gt;\n  mutate(\n    ICER_low = runif(n(), 15000, 35000),\n    ICER_high = runif(n(), 35000, 55000),\n    ICER_base = 32000\n  ) |&gt;\n  arrange(desc(abs(ICER_high - ICER_low)))\n\n# ç»˜åˆ¶é¾™å·é£å›¾\nggplot(tornado_data) +\n  geom_segment(aes(y = reorder(Parameter, abs(ICER_high - ICER_low)),\n                   yend = reorder(Parameter, abs(ICER_high - ICER_low)),\n                   x = ICER_low, xend = ICER_high),\n               linewidth = 8, color = \"#4f46e5\", alpha = 0.7) +\n  geom_vline(xintercept = tornado_data$ICER_base[1], \n             linetype = \"dashed\", color = \"red\", linewidth = 1) +\n  scale_x_continuous(labels = comma_format()) +\n  labs(\n    title = \"é¾™å·é£å›¾ - å•å› ç´ æ•æ„Ÿæ€§åˆ†æ\",\n    subtitle = \"çº¢è‰²è™šçº¿: åŸºå‡† ICER\",\n    x = \"ICER (å…ƒ/QALY)\",\n    y = \"å‚æ•°\"\n  ) +\n  theme_bw(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, face = \"bold\"),\n    panel.grid.major.y = element_blank()\n  )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "å«ç”Ÿç»æµå­¦åˆ†æ"
    ]
  },
  {
    "objectID": "1015-health-economics.html#æˆæœ¬æ•ˆæœå‰æ²¿",
    "href": "1015-health-economics.html#æˆæœ¬æ•ˆæœå‰æ²¿",
    "title": "Rè¯­è¨€å«ç”Ÿç»æµå­¦åˆ†æ",
    "section": "æˆæœ¬æ•ˆæœå‰æ²¿",
    "text": "æˆæœ¬æ•ˆæœå‰æ²¿\n\næ•ˆç‡å‰æ²¿çº¿\næ•ˆç‡å‰æ²¿å±•ç¤ºåœ¨ç»™å®šæˆæœ¬ä¸‹å¯è¾¾åˆ°çš„æœ€å¤§æ•ˆæœã€‚\n\n# åˆ›å»ºå¤šç­–ç•¥æ•°æ®\nfrontier_data &lt;- data.frame(\n  Strategy = c(\"æ— å¹²é¢„\", \"æ–¹æ¡ˆA\", \"æ–¹æ¡ˆB\", \"æ–¹æ¡ˆC\", \"æ–¹æ¡ˆD\", \"æ–¹æ¡ˆE\"),\n  Cost = c(10000, 30000, 45000, 60000, 90000, 100000),\n  QALY = c(4.0, 5.5, 6.2, 6.8, 7.8, 7.9)\n)\n\n# è¯†åˆ«æ•ˆç‡å‰æ²¿ä¸Šçš„ç­–ç•¥ï¼ˆç®€åŒ–ç®—æ³•ï¼‰\nfrontier_data &lt;- frontier_data |&gt;\n  arrange(Cost) |&gt;\n  mutate(\n    on_frontier = c(TRUE, TRUE, TRUE, FALSE, TRUE, FALSE)  # æ‰‹åŠ¨æ ‡è®°\n  )\n\nggplot(frontier_data, aes(x = QALY, y = Cost)) +\n  # ç»˜åˆ¶æ•ˆç‡å‰æ²¿çº¿\n  geom_line(data = frontier_data |&gt; filter(on_frontier),\n            color = \"#4f46e5\", linewidth = 1.2) +\n  # æ‰€æœ‰ç‚¹\n  geom_point(aes(color = on_frontier), size = 5) +\n  # æ ‡ç­¾\n  geom_text(aes(label = Strategy), vjust = -1, size = 3.5) +\n  scale_color_manual(values = c(\"TRUE\" = \"#10b981\", \"FALSE\" = \"#ef4444\"),\n                     labels = c(\"TRUE\" = \"æ•ˆç‡å‰æ²¿\", \"FALSE\" = \"è¢«æ”¯é…\")) +\n  scale_y_continuous(labels = comma_format()) +\n  labs(\n    title = \"æˆæœ¬æ•ˆæœæ•ˆç‡å‰æ²¿\",\n    x = \"è´¨é‡è°ƒæ•´ç”Ÿå‘½å¹´ (QALY)\",\n    y = \"æˆæœ¬ (å…ƒ)\",\n    color = \"ç­–ç•¥çŠ¶æ€\"\n  ) +\n  theme_bw(base_size = 12) +\n  theme(\n    legend.position = \"bottom\",\n    plot.title = element_text(hjust = 0.5, face = \"bold\")\n  )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "å«ç”Ÿç»æµå­¦åˆ†æ"
    ]
  },
  {
    "objectID": "1015-health-economics.html#å‡€è´§å¸æ”¶ç›Šåˆ†æ",
    "href": "1015-health-economics.html#å‡€è´§å¸æ”¶ç›Šåˆ†æ",
    "title": "Rè¯­è¨€å«ç”Ÿç»æµå­¦åˆ†æ",
    "section": "å‡€è´§å¸æ”¶ç›Šåˆ†æ",
    "text": "å‡€è´§å¸æ”¶ç›Šåˆ†æ\n\nNMB è®¡ç®—ä¸å¯è§†åŒ–\nå‡€è´§å¸æ”¶ç›Šï¼ˆNet Monetary Benefitï¼‰ï¼š\\[NMB = WTP \\times \\Delta QALY - \\Delta Cost\\]\n\n# è®¡ç®—ä¸åŒ WTP ä¸‹çš„ NMB\nwtp_values &lt;- seq(0, 100000, by = 10000)\n\nnmb_data &lt;- expand.grid(\n  WTP = wtp_values,\n  Strategy = c(\"æ ‡å‡†æ²»ç–—\", \"æ–°è¯A\", \"æ–°è¯B\")\n) |&gt;\n  left_join(cea_data, by = \"Strategy\") |&gt;\n  mutate(\n    NMB = WTP * QALY - Cost\n  )\n\nggplot(nmb_data, aes(x = WTP, y = NMB, color = Strategy)) +\n  geom_line(linewidth = 1.2) +\n  geom_hline(yintercept = 0, linetype = \"dashed\", color = \"gray50\") +\n  scale_x_continuous(labels = comma_format()) +\n  scale_y_continuous(labels = comma_format()) +\n  scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n  labs(\n    title = \"å‡€è´§å¸æ”¶ç›Š (NMB) åˆ†æ\",\n    x = \"æ”¯ä»˜æ„æ„¿ (WTP, å…ƒ/QALY)\",\n    y = \"å‡€è´§å¸æ”¶ç›Š (å…ƒ)\",\n    color = \"æ²»ç–—æ–¹æ¡ˆ\"\n  ) +\n  theme_bw(base_size = 12) +\n  theme(\n    legend.position = \"bottom\",\n    plot.title = element_text(hjust = 0.5, face = \"bold\")\n  )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "å«ç”Ÿç»æµå­¦åˆ†æ"
    ]
  },
  {
    "objectID": "1015-health-economics.html#å®ç”¨å‡½æ•°å°è£…",
    "href": "1015-health-economics.html#å®ç”¨å‡½æ•°å°è£…",
    "title": "Rè¯­è¨€å«ç”Ÿç»æµå­¦åˆ†æ",
    "section": "å®ç”¨å‡½æ•°å°è£…",
    "text": "å®ç”¨å‡½æ•°å°è£…\n\nICER è®¡ç®—å‡½æ•°\n\n#' è®¡ç®— ICER\n#' @param cost_new æ–°æ²»ç–—æˆæœ¬\n#' @param cost_ref å‚ç…§æ²»ç–—æˆæœ¬\n#' @param effect_new æ–°æ²»ç–—æ•ˆæœ\n#' @param effect_ref å‚ç…§æ²»ç–—æ•ˆæœ\n#' @return ICER å€¼\ncalculate_icer &lt;- function(cost_new, cost_ref, effect_new, effect_ref) {\n  delta_cost &lt;- cost_new - cost_ref\n  delta_effect &lt;- effect_new - effect_ref\n  \n  if (delta_effect &lt;= 0) {\n    warning(\"å¢é‡æ•ˆæœ &lt;= 0ï¼Œæ–°æ²»ç–—å¯èƒ½è¢«æ”¯é…\")\n    return(NA)\n  }\n  \n  icer &lt;- delta_cost / delta_effect\n  \n  cat(\"å¢é‡æˆæœ¬:\", comma(delta_cost), \"å…ƒ\\n\")\n  cat(\"å¢é‡æ•ˆæœ:\", round(delta_effect, 3), \"QALY\\n\")\n  cat(\"ICER:\", comma(round(icer, 0)), \"å…ƒ/QALY\\n\")\n  \n  invisible(icer)\n}\n\n# ç¤ºä¾‹\ncalculate_icer(\n  cost_new = 80000, cost_ref = 50000,\n  effect_new = 6.8, effect_ref = 5.2\n)\n\nå¢é‡æˆæœ¬: 30,000 å…ƒ\nå¢é‡æ•ˆæœ: 1.6 QALY\nICER: 18,750 å…ƒ/QALY",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "å«ç”Ÿç»æµå­¦åˆ†æ"
    ]
  },
  {
    "objectID": "1015-health-economics.html#æ€»ç»“",
    "href": "1015-health-economics.html#æ€»ç»“",
    "title": "Rè¯­è¨€å«ç”Ÿç»æµå­¦åˆ†æ",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nå«ç”Ÿç»æµå­¦è¯„ä»·æ˜¯åŒ»ç–—å†³ç­–çš„é‡è¦å·¥å…·ï¼ŒR è¯­è¨€æä¾›äº†å¼ºå¤§çš„åˆ†æèƒ½åŠ›ï¼š\n\n\n\nåˆ†æç±»å‹\nå…³é”®æŒ‡æ ‡\næ¨èæ–¹æ³•\n\n\n\n\næˆæœ¬æ•ˆæœåˆ†æ\nICER\nå¢é‡åˆ†æã€æ•ˆç‡å‰æ²¿\n\n\nä¸ç¡®å®šæ€§åˆ†æ\nCEACã€é¾™å·é£å›¾\næ¦‚ç‡æ•æ„Ÿæ€§åˆ†æ\n\n\nç–¾ç—…å»ºæ¨¡\nçŠ¶æ€åˆ†å¸ƒã€ç”Ÿå­˜æ›²çº¿\né©¬å°”å¯å¤«æ¨¡å‹ã€å†³ç­–æ ‘\n\n\nå†³ç­–æ”¯æŒ\nNMB\nå‡€è´§å¸æ”¶ç›Šåˆ†æ\n\n\n\n\næ¨èå­¦ä¹ èµ„æº\n\nDARTH å·¥ä½œç»„ - å†³ç­–åˆ†æå»ºæ¨¡æ•™ç¨‹\nISPOR æŒ‡å— - å«ç”Ÿç»æµå­¦æ–¹æ³•å­¦æ ‡å‡†\nR for Health Technology Assessment - R è¯­è¨€ HTA èµ„æº\n\n\n\nå¸¸ç”¨ WTP é˜ˆå€¼å‚è€ƒ\n\n\n\nå›½å®¶/åœ°åŒº\nWTP é˜ˆå€¼ï¼ˆæ¯ QALYï¼‰\n\n\n\n\nä¸­å›½\n1-3 å€äººå‡ GDPï¼ˆçº¦ 7-21 ä¸‡å…ƒï¼‰\n\n\nè‹±å›½ (NICE)\nÂ£20,000-30,000\n\n\nç¾å›½\n$50,000-150,000\n\n\nWHO æ¨è\n1-3 å€äººå‡ GDP",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ’° å«ç”Ÿç»æµå­¦",
      "å«ç”Ÿç»æµå­¦åˆ†æ"
    ]
  },
  {
    "objectID": "1017-timeseries.html",
    "href": "1017-timeseries.html",
    "title": "æ—¶é—´åºåˆ—åˆ†æ",
    "section": "",
    "text": "æ—¶é—´åºåˆ—åˆ†ææ˜¯ç ”ç©¶æŒ‰æ—¶é—´é¡ºåºæ’åˆ—çš„æ•°æ®è§„å¾‹çš„æ–¹æ³•ï¼Œå¹¿æ³›åº”ç”¨äºç»æµé¢„æµ‹ã€æ°”è±¡åˆ†æã€é”€å”®é¢„ä¼°ç­‰é¢†åŸŸã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "æ—¶é—´åºåˆ—åˆ†æ"
    ]
  },
  {
    "objectID": "1017-timeseries.html#åŸºç¡€æ¦‚å¿µ",
    "href": "1017-timeseries.html#åŸºç¡€æ¦‚å¿µ",
    "title": "æ—¶é—´åºåˆ—åˆ†æ",
    "section": "åŸºç¡€æ¦‚å¿µ",
    "text": "åŸºç¡€æ¦‚å¿µ\n\nlibrary(forecast) # æ—¶é—´åºåˆ—é¢„æµ‹æ ¸å¿ƒåŒ…\nlibrary(ggplot2)\nlibrary(patchwork)\n\n# ä½¿ç”¨ç»å…¸èˆªç©ºä¹˜å®¢æ•°æ®\ndata &lt;- AirPassengers # 1949-1960å¹´æœˆåº¦ä¹˜å®¢æ•°ï¼ˆåƒäººï¼‰\ndata\n\n     Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec\n1949 112 118 132 129 121 135 148 148 136 119 104 118\n1950 115 126 141 135 125 149 170 170 158 133 114 140\n1951 145 150 178 163 172 178 199 199 184 162 146 166\n1952 171 180 193 181 183 218 230 242 209 191 172 194\n1953 196 196 236 235 229 243 264 272 237 211 180 201\n1954 204 188 235 227 234 264 302 293 259 229 203 229\n1955 242 233 267 269 270 315 364 347 312 274 237 278\n1956 284 277 317 313 318 374 413 405 355 306 271 306\n1957 315 301 356 348 355 422 465 467 404 347 305 336\n1958 340 318 362 348 363 435 491 505 404 359 310 337\n1959 360 342 406 396 420 472 548 559 463 407 362 405\n1960 417 391 419 461 472 535 622 606 508 461 390 432\n\n\næ—¶é—´åºåˆ—çš„ä¸‰ä¸ªæ ¸å¿ƒæˆåˆ†ï¼š\n\nè¶‹åŠ¿ (Trend)ï¼šé•¿æœŸä¸Šå‡æˆ–ä¸‹é™çš„æ¨¡å¼\nå­£èŠ‚æ€§ (Seasonality)ï¼šå›ºå®šå‘¨æœŸçš„é‡å¤æ³¢åŠ¨\næ®‹å·® (Residual)ï¼šå»é™¤è¶‹åŠ¿å’Œå­£èŠ‚æ€§åçš„éšæœºæˆåˆ†",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "æ—¶é—´åºåˆ—åˆ†æ"
    ]
  },
  {
    "objectID": "1017-timeseries.html#æ—¶åºåˆ†è§£",
    "href": "1017-timeseries.html#æ—¶åºåˆ†è§£",
    "title": "æ—¶é—´åºåˆ—åˆ†æ",
    "section": "æ—¶åºåˆ†è§£",
    "text": "æ—¶åºåˆ†è§£\nå°†æ—¶é—´åºåˆ—åˆ†è§£ä¸ºè¶‹åŠ¿ã€å­£èŠ‚å’Œæ®‹å·®ä¸‰éƒ¨åˆ†ï¼š\n\n# STLåˆ†è§£ï¼šæ›´çµæ´»çš„ç°ä»£æ–¹æ³•\nstl(data, s.window = \"periodic\") |&gt;\n  autoplot() +\n  theme_minimal() +\n  labs(title = \"èˆªç©ºä¹˜å®¢æ•°æ®çš„STLåˆ†è§£\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTip\n\n\n\nåˆ†è§£ç±»å‹é€‰æ‹©ï¼š\n\nåŠ æ³•æ¨¡å‹ï¼š\\(Y = T + S + R\\)ï¼ˆæ³¢åŠ¨å¹…åº¦ç¨³å®šï¼‰\nä¹˜æ³•æ¨¡å‹ï¼š\\(Y = T \\times S \\times R\\)ï¼ˆæ³¢åŠ¨éšè¶‹åŠ¿å¢å¤§ï¼Œå¦‚æœ¬ä¾‹ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "æ—¶é—´åºåˆ—åˆ†æ"
    ]
  },
  {
    "objectID": "1017-timeseries.html#å¹³ç¨³æ€§æ£€éªŒ",
    "href": "1017-timeseries.html#å¹³ç¨³æ€§æ£€éªŒ",
    "title": "æ—¶é—´åºåˆ—åˆ†æ",
    "section": "å¹³ç¨³æ€§æ£€éªŒ",
    "text": "å¹³ç¨³æ€§æ£€éªŒ\nARIMAæ¨¡å‹è¦æ±‚åºåˆ—å¹³ç¨³ã€‚ä½¿ç”¨ADFæ£€éªŒåˆ¤æ–­ï¼š\n\nlibrary(tseries)\n\n# åŸå§‹åºåˆ—ï¼šéå¹³ç¨³\nadf.test(data) # p &gt; 0.05 â†’ éå¹³ç¨³\n\n\n    Augmented Dickey-Fuller Test\n\ndata:  data\nDickey-Fuller = -7.3186, Lag order = 5, p-value = 0.01\nalternative hypothesis: stationary\n\n# ä¸€é˜¶å·®åˆ†åï¼šå¹³ç¨³\nadf.test(diff(data)) # p &lt; 0.05 â†’ å¹³ç¨³\n\n\n    Augmented Dickey-Fuller Test\n\ndata:  diff(data)\nDickey-Fuller = -7.0177, Lag order = 5, p-value = 0.01\nalternative hypothesis: stationary\n\n\nå·®åˆ†å¯æ¶ˆé™¤è¶‹åŠ¿ï¼Œä½¿åºåˆ—å¹³ç¨³ï¼š\n\n# å¯¹æ¯”åŸå§‹ä¸å·®åˆ†åçš„åºåˆ—\np1 &lt;- autoplot(data) + labs(title = \"åŸå§‹åºåˆ—\", y = \"ä¹˜å®¢æ•°\")\np2 &lt;- autoplot(diff(data)) + labs(title = \"ä¸€é˜¶å·®åˆ†å\", y = \"å·®åˆ†å€¼\")\np1 / p2 & theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "æ—¶é—´åºåˆ—åˆ†æ"
    ]
  },
  {
    "objectID": "1017-timeseries.html#arimaæ¨¡å‹",
    "href": "1017-timeseries.html#arimaæ¨¡å‹",
    "title": "æ—¶é—´åºåˆ—åˆ†æ",
    "section": "ARIMAæ¨¡å‹",
    "text": "ARIMAæ¨¡å‹\nARIMA(p,d,q) æ˜¯æœ€å¸¸ç”¨çš„æ—¶é—´åºåˆ—æ¨¡å‹ï¼š\n\npï¼šè‡ªå›å½’é˜¶æ•°ï¼ˆARï¼‰\ndï¼šå·®åˆ†æ¬¡æ•°\nqï¼šç§»åŠ¨å¹³å‡é˜¶æ•°ï¼ˆMAï¼‰\n\n\n# è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜å‚æ•°ï¼ˆåŸºäºAICå‡†åˆ™ï¼‰\nfit &lt;- auto.arima(data)\nfit\n\nSeries: data \nARIMA(2,1,1)(0,1,0)[12] \n\nCoefficients:\n         ar1     ar2      ma1\n      0.5960  0.2143  -0.9819\ns.e.  0.0888  0.0880   0.0292\n\nsigma^2 = 132.3:  log likelihood = -504.92\nAIC=1017.85   AICc=1018.17   BIC=1029.35\n\n\n\næ¨¡å‹è¯Šæ–­\næ£€æŸ¥æ®‹å·®æ˜¯å¦ä¸ºç™½å™ªå£°ï¼š\n\ncheckresiduals(fit) # æ®‹å·®åº”æ— è‡ªç›¸å…³ã€è¿‘ä¼¼æ­£æ€\n\n\n\n\n\n\n\n\n\n    Ljung-Box test\n\ndata:  Residuals from ARIMA(2,1,1)(0,1,0)[12]\nQ* = 37.784, df = 21, p-value = 0.01366\n\nModel df: 3.   Total lags used: 24",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "æ—¶é—´åºåˆ—åˆ†æ"
    ]
  },
  {
    "objectID": "1017-timeseries.html#é¢„æµ‹",
    "href": "1017-timeseries.html#é¢„æµ‹",
    "title": "æ—¶é—´åºåˆ—åˆ†æ",
    "section": "é¢„æµ‹",
    "text": "é¢„æµ‹\nä½¿ç”¨æ‹Ÿåˆæ¨¡å‹è¿›è¡Œæœªæ¥é¢„æµ‹ï¼š\n\n# é¢„æµ‹æœªæ¥2å¹´ï¼ˆ24ä¸ªæœˆï¼‰\nfc &lt;- forecast(fit, h = 24)\n\n# å¯è§†åŒ–ï¼šè“è‰²åŒºåŸŸä¸ºç½®ä¿¡åŒºé—´\nautoplot(fc) +\n  theme_minimal() +\n  labs(\n    title = \"èˆªç©ºä¹˜å®¢æ•°é¢„æµ‹\",\n    subtitle = \"ARIMAæ¨¡å‹ + 80%/95%ç½®ä¿¡åŒºé—´\",\n    x = \"å¹´ä»½\", y = \"ä¹˜å®¢æ•°ï¼ˆåƒäººï¼‰\"\n  )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "æ—¶é—´åºåˆ—åˆ†æ"
    ]
  },
  {
    "objectID": "1017-timeseries.html#å­£èŠ‚æ€§arima",
    "href": "1017-timeseries.html#å­£èŠ‚æ€§arima",
    "title": "æ—¶é—´åºåˆ—åˆ†æ",
    "section": "å­£èŠ‚æ€§ARIMA",
    "text": "å­£èŠ‚æ€§ARIMA\nå¯¹äºæœ‰æ˜æ˜¾å­£èŠ‚æ¨¡å¼çš„æ•°æ®ï¼Œä½¿ç”¨SARIMAï¼š\n\n# å¼ºåˆ¶ä½¿ç”¨å­£èŠ‚æ€§æ¨¡å‹\nfit_seasonal &lt;- auto.arima(data, seasonal = TRUE, D = 1)\nfit_seasonal\n\nSeries: data \nARIMA(2,1,1)(0,1,0)[12] \n\nCoefficients:\n         ar1     ar2      ma1\n      0.5960  0.2143  -0.9819\ns.e.  0.0888  0.0880   0.0292\n\nsigma^2 = 132.3:  log likelihood = -504.92\nAIC=1017.85   AICc=1018.17   BIC=1029.35\n\n# é¢„æµ‹å¹¶å¯¹æ¯”\nforecast(fit_seasonal, h = 24) |&gt;\n  autoplot() +\n  theme_minimal() +\n  labs(title = \"å­£èŠ‚æ€§ARIMAé¢„æµ‹\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "æ—¶é—´åºåˆ—åˆ†æ"
    ]
  },
  {
    "objectID": "1017-timeseries.html#æŒ‡æ•°å¹³æ»‘æ³•",
    "href": "1017-timeseries.html#æŒ‡æ•°å¹³æ»‘æ³•",
    "title": "æ—¶é—´åºåˆ—åˆ†æ",
    "section": "æŒ‡æ•°å¹³æ»‘æ³•",
    "text": "æŒ‡æ•°å¹³æ»‘æ³•\nå¦ä¸€ç±»å¸¸ç”¨æ–¹æ³•ï¼Œé€‚åˆçŸ­æœŸé¢„æµ‹ï¼š\n\n# ETSè‡ªåŠ¨é€‰æ‹©æœ€ä¼˜å¹³æ»‘å‚æ•°\nets_fit &lt;- ets(data)\nets_fit # M,A,M = ä¹˜æ³•è¯¯å·®ã€åŠ æ³•è¶‹åŠ¿ã€ä¹˜æ³•å­£èŠ‚\n\nETS(M,Ad,M) \n\nCall:\nets(y = data)\n\n  Smoothing parameters:\n    alpha = 0.7096 \n    beta  = 0.0204 \n    gamma = 1e-04 \n    phi   = 0.98 \n\n  Initial states:\n    l = 120.9939 \n    b = 1.7705 \n    s = 0.8944 0.7993 0.9217 1.0592 1.2203 1.2318\n           1.1105 0.9786 0.9804 1.011 0.8869 0.9059\n\n  sigma:  0.0392\n\n     AIC     AICc      BIC \n1395.166 1400.638 1448.623 \n\n# é¢„æµ‹\nforecast(ets_fit, h = 24) |&gt;\n  autoplot() +\n  theme_minimal() +\n  labs(title = \"æŒ‡æ•°å¹³æ»‘é¢„æµ‹ (ETS)\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "æ—¶é—´åºåˆ—åˆ†æ"
    ]
  },
  {
    "objectID": "1017-timeseries.html#æ¨¡å‹å¯¹æ¯”",
    "href": "1017-timeseries.html#æ¨¡å‹å¯¹æ¯”",
    "title": "æ—¶é—´åºåˆ—åˆ†æ",
    "section": "æ¨¡å‹å¯¹æ¯”",
    "text": "æ¨¡å‹å¯¹æ¯”\nä½¿ç”¨äº¤å‰éªŒè¯æ¯”è¾ƒé¢„æµ‹å‡†ç¡®æ€§ï¼š\n\n# å–æœ€å2å¹´ä½œä¸ºæµ‹è¯•é›†\ntrain &lt;- window(data, end = c(1958, 12))\ntest &lt;- window(data, start = c(1959, 1))\n\n# è®­ç»ƒä¸¤ä¸ªæ¨¡å‹\nm1 &lt;- auto.arima(train)\nm2 &lt;- ets(train)\n\n# é¢„æµ‹å¹¶è®¡ç®—è¯¯å·®\nfc1 &lt;- forecast(m1, h = 24)\nfc2 &lt;- forecast(m2, h = 24)\n\n# å‡†ç¡®ç‡æŒ‡æ ‡\naccuracy(fc1, test)[2, c(\"RMSE\", \"MAE\", \"MAPE\")]\n\n    RMSE      MAE     MAPE \n74.25224 68.57729 14.92756 \n\naccuracy(fc2, test)[2, c(\"RMSE\", \"MAE\", \"MAPE\")]\n\n    RMSE      MAE     MAPE \n72.54791 63.21297 13.30345 \n\n\n\n\n\n\n\n\nNote\n\n\n\nå¸¸ç”¨è¯„ä¼°æŒ‡æ ‡ï¼š\n\nRMSEï¼šå‡æ–¹æ ¹è¯¯å·®ï¼ˆå¯¹å¤§è¯¯å·®æ•æ„Ÿï¼‰\nMAEï¼šå¹³å‡ç»å¯¹è¯¯å·®\nMAPEï¼šå¹³å‡ç»å¯¹ç™¾åˆ†æ¯”è¯¯å·®ï¼ˆå¯è§£é‡Šæ€§å¥½ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "æ—¶é—´åºåˆ—åˆ†æ"
    ]
  },
  {
    "objectID": "1017-timeseries.html#å®æˆ˜é¢„æµ‹æœˆåº¦é”€å”®",
    "href": "1017-timeseries.html#å®æˆ˜é¢„æµ‹æœˆåº¦é”€å”®",
    "title": "æ—¶é—´åºåˆ—åˆ†æ",
    "section": "å®æˆ˜ï¼šé¢„æµ‹æœˆåº¦é”€å”®",
    "text": "å®æˆ˜ï¼šé¢„æµ‹æœˆåº¦é”€å”®\n\n# æ¨¡æ‹Ÿé›¶å”®æ•°æ®\nset.seed(42)\nsales &lt;- ts(\n  100 + 1:60 * 2 + # ä¸Šå‡è¶‹åŠ¿\n    30 * sin(2 * pi * 1:60 / 12) + # å­£èŠ‚æ€§\n    rnorm(60, sd = 10), # å™ªå£°\n  start = c(2020, 1), frequency = 12\n)\n\n# ä¸€è¡Œå®Œæˆï¼šå»ºæ¨¡ + é¢„æµ‹ + å¯è§†åŒ–\nsales |&gt;\n  auto.arima() |&gt;\n  forecast(h = 12) |&gt;\n  autoplot() +\n  theme_minimal() +\n  labs(title = \"æœˆåº¦é”€å”®é¢é¢„æµ‹\", x = \"å¹´ä»½\", y = \"é”€å”®é¢\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "æ—¶é—´åºåˆ—åˆ†æ"
    ]
  },
  {
    "objectID": "1017-timeseries.html#æ€»ç»“",
    "href": "1017-timeseries.html#æ€»ç»“",
    "title": "æ—¶é—´åºåˆ—åˆ†æ",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\næ–¹æ³•\né€‚ç”¨åœºæ™¯\nå‡½æ•°\n\n\n\n\nSTLåˆ†è§£\nç†è§£æ•°æ®ç»“æ„\nstl()\n\n\nARIMA\né€šç”¨é¢„æµ‹\nauto.arima()\n\n\nSARIMA\nå¼ºå­£èŠ‚æ€§æ•°æ®\nauto.arima(seasonal=TRUE)\n\n\nETS\nçŸ­æœŸé¢„æµ‹ã€å¹³æ»‘\nets()\n\n\n\n\n\n\n\n\n\nTip\n\n\n\nå®è·µå»ºè®®ï¼š\n\nå…ˆå¯è§†åŒ–ï¼Œç†è§£æ•°æ®ç‰¹å¾\næ£€éªŒå¹³ç¨³æ€§ï¼Œå¿…è¦æ—¶å·®åˆ†\nå¯¹æ¯”å¤šä¸ªæ¨¡å‹ï¼Œé€‰æ‹©æœ€ä¼˜\nå…³æ³¨ç½®ä¿¡åŒºé—´ï¼Œé¢„æµ‹æœ‰ä¸ç¡®å®šæ€§",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "æ—¶é—´åºåˆ—åˆ†æ"
    ]
  },
  {
    "objectID": "1019-logistic.html",
    "href": "1019-logistic.html",
    "title": "Logistic å›å½’å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "Logistic å›å½’æ˜¯ä¸€ç§ç”¨äºåˆ†æäºŒåˆ†ç±»ç»“å±€å˜é‡çš„å¹¿ä¹‰çº¿æ€§æ¨¡å‹ã€‚å®ƒé€šè¿‡ logit å˜æ¢å°†çº¿æ€§é¢„æµ‹å€¼æ˜ å°„åˆ° (0, 1) åŒºé—´ï¼Œä¼°è®¡äº‹ä»¶å‘ç”Ÿçš„æ¦‚ç‡ã€‚\n\n\n\n\n\nåœºæ™¯\nç¤ºä¾‹\n\n\n\n\nç–¾ç—…è¯Šæ–­\næ˜¯å¦æ‚£ç—… (æ˜¯/å¦)\n\n\né£é™©é¢„æµ‹\næ˜¯å¦å‘ç”Ÿä¸è‰¯äº‹ä»¶\n\n\nåˆ†ç±»é—®é¢˜\nå®¢æˆ·æ˜¯å¦æµå¤±\n\n\nç—…ä¾‹å¯¹ç…§ç ”ç©¶\næš´éœ²ä¸ç–¾ç—…å…³è”\n\n\n\n\n\n\nLogit å˜æ¢ï¼š \\[\\text{logit}(p) = \\ln\\left(\\frac{p}{1-p}\\right) = \\beta_0 + \\beta_1 X_1 + \\beta_2 X_2 + \\cdots\\]\næ¦‚ç‡å½¢å¼ï¼š \\[P(Y=1|X) = \\frac{e^{\\beta_0 + \\beta_1 X_1 + \\cdots}}{1 + e^{\\beta_0 + \\beta_1 X_1 + \\cdots}}\\]\næ¯”å€¼æ¯” (OR)ï¼š \\[OR = e^{\\beta_i}\\]\n\n\n\n\nç»“å±€æ˜¯äºŒåˆ†ç±»æˆ–äº‹ä»¶æ˜¯å¦å‘ç”Ÿï¼ˆç—…ä¾‹/å¯¹ç…§ã€æˆåŠŸ/å¤±è´¥ï¼‰ã€‚\néœ€è¦åŒæ—¶æ§åˆ¶å¤šç§æ··æ‚å› ç´ å¹¶ç»™å‡ºæ•ˆåº”é‡è§£é‡Šã€‚\nå…³æ³¨ OR ä¸ç½®ä¿¡åŒºé—´ï¼Œå¼ºè°ƒå¯è§£é‡Šæ€§è€Œéé»‘ç®±é¢„æµ‹ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Logistic å›å½’"
    ]
  },
  {
    "objectID": "1019-logistic.html#ä»€ä¹ˆæ˜¯-logistic-å›å½’",
    "href": "1019-logistic.html#ä»€ä¹ˆæ˜¯-logistic-å›å½’",
    "title": "Logistic å›å½’å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "Logistic å›å½’æ˜¯ä¸€ç§ç”¨äºåˆ†æäºŒåˆ†ç±»ç»“å±€å˜é‡çš„å¹¿ä¹‰çº¿æ€§æ¨¡å‹ã€‚å®ƒé€šè¿‡ logit å˜æ¢å°†çº¿æ€§é¢„æµ‹å€¼æ˜ å°„åˆ° (0, 1) åŒºé—´ï¼Œä¼°è®¡äº‹ä»¶å‘ç”Ÿçš„æ¦‚ç‡ã€‚\n\n\n\n\n\nåœºæ™¯\nç¤ºä¾‹\n\n\n\n\nç–¾ç—…è¯Šæ–­\næ˜¯å¦æ‚£ç—… (æ˜¯/å¦)\n\n\né£é™©é¢„æµ‹\næ˜¯å¦å‘ç”Ÿä¸è‰¯äº‹ä»¶\n\n\nåˆ†ç±»é—®é¢˜\nå®¢æˆ·æ˜¯å¦æµå¤±\n\n\nç—…ä¾‹å¯¹ç…§ç ”ç©¶\næš´éœ²ä¸ç–¾ç—…å…³è”\n\n\n\n\n\n\nLogit å˜æ¢ï¼š \\[\\text{logit}(p) = \\ln\\left(\\frac{p}{1-p}\\right) = \\beta_0 + \\beta_1 X_1 + \\beta_2 X_2 + \\cdots\\]\næ¦‚ç‡å½¢å¼ï¼š \\[P(Y=1|X) = \\frac{e^{\\beta_0 + \\beta_1 X_1 + \\cdots}}{1 + e^{\\beta_0 + \\beta_1 X_1 + \\cdots}}\\]\næ¯”å€¼æ¯” (OR)ï¼š \\[OR = e^{\\beta_i}\\]\n\n\n\n\nç»“å±€æ˜¯äºŒåˆ†ç±»æˆ–äº‹ä»¶æ˜¯å¦å‘ç”Ÿï¼ˆç—…ä¾‹/å¯¹ç…§ã€æˆåŠŸ/å¤±è´¥ï¼‰ã€‚\néœ€è¦åŒæ—¶æ§åˆ¶å¤šç§æ··æ‚å› ç´ å¹¶ç»™å‡ºæ•ˆåº”é‡è§£é‡Šã€‚\nå…³æ³¨ OR ä¸ç½®ä¿¡åŒºé—´ï¼Œå¼ºè°ƒå¯è§£é‡Šæ€§è€Œéé»‘ç®±é¢„æµ‹ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Logistic å›å½’"
    ]
  },
  {
    "objectID": "1019-logistic.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "href": "1019-logistic.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "title": "Logistic å›å½’å®Œå…¨æŒ‡å—",
    "section": "R åŒ…å®‰è£…ä¸åŠ è½½",
    "text": "R åŒ…å®‰è£…ä¸åŠ è½½\n\n# æ ¸å¿ƒåŒ…\nlibrary(tidyverse)     # æ•°æ®å¤„ç†\nlibrary(broom)         # æ¨¡å‹æ•´ç†\nlibrary(gtsummary)     # ç»“æœè¡¨æ ¼\nlibrary(performance)   # æ¨¡å‹è¯Šæ–­\nlibrary(see)           # å¯è§†åŒ–æ”¯æŒ\nlibrary(pROC)          # ROC æ›²çº¿\nlibrary(ResourceSelection)  # Hosmer-Lemeshow æ£€éªŒ\nlibrary(car)           # VIF æ£€éªŒ",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Logistic å›å½’"
    ]
  },
  {
    "objectID": "1019-logistic.html#æ•°æ®å‡†å¤‡",
    "href": "1019-logistic.html#æ•°æ®å‡†å¤‡",
    "title": "Logistic å›å½’å®Œå…¨æŒ‡å—",
    "section": "æ•°æ®å‡†å¤‡",
    "text": "æ•°æ®å‡†å¤‡\n\nå˜é‡å®šä¹‰ä¸ç¼–ç \n\nç»“å±€å˜é‡ cvd ä¸º 0/1 äºŒåˆ†ç±»ã€‚\nåˆ†ç±»å˜é‡é‡‡ç”¨å› å­ç¼–ç ï¼Œé»˜è®¤å‚ç…§ç»„ä¸ºç¬¬ä¸€ä¸ªæ°´å¹³ã€‚\nè¿ç»­å˜é‡ä¿ç•™åŸå°ºåº¦ï¼Œåç»­å°†è¯„ä¼°çº¿æ€§å‡è®¾ã€‚\n\næˆ‘ä»¬ä½¿ç”¨æ¨¡æ‹Ÿçš„å¿ƒè¡€ç®¡ç–¾ç—…æ•°æ®é›†ï¼š\n\n# æ¨¡æ‹Ÿæ•°æ®ï¼šå¿ƒè¡€ç®¡ç–¾ç—…é£é™©\nset.seed(2024)\nn &lt;- 800\n\ncvd_data &lt;- tibble(\n  id = 1:n,\n  age = round(rnorm(n, 55, 12)),\n  sex = factor(sample(c(\"ç”·\", \"å¥³\"), n, replace = TRUE, prob = c(0.55, 0.45))),\n  bmi = round(rnorm(n, 25, 4), 1),\n  smoking = factor(sample(c(\"ä»ä¸\", \"æ›¾ç»\", \"ç°åœ¨\"), n, replace = TRUE, \n                          prob = c(0.4, 0.3, 0.3))),\n  hypertension = rbinom(n, 1, 0.35),\n  diabetes = rbinom(n, 1, 0.20),\n  cholesterol = round(rnorm(n, 200, 40))\n) |&gt;\n  mutate(\n    # ç”Ÿæˆ CVD äº‹ä»¶ï¼ˆå—å¤šä¸ªå› ç´ å½±å“ï¼‰\n    logit_p = -6 + \n      0.05 * age + \n      0.4 * (sex == \"ç”·\") +\n      0.08 * bmi + \n      0.6 * (smoking == \"æ›¾ç»\") + \n      1.0 * (smoking == \"ç°åœ¨\") +\n      0.8 * hypertension + \n      0.7 * diabetes +\n      0.01 * cholesterol,\n    prob = plogis(logit_p),\n    cvd = rbinom(n, 1, prob)\n  ) |&gt;\n  select(-logit_p, -prob)\n\n# æŸ¥çœ‹æ•°æ®ç»“æ„\nglimpse(cvd_data)\n\nRows: 800\nColumns: 9\n$ id           &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17â€¦\n$ age          &lt;dbl&gt; 67, 61, 54, 52, 69, 71, 61, 53, 40, 42, 35, 61, 65, 59, 1â€¦\n$ sex          &lt;fct&gt; ç”·, å¥³, ç”·, å¥³, å¥³, å¥³, ç”·, ç”·, ç”·, å¥³, å¥³, å¥³, ç”·, å¥³, ç”·, å¥³, å¥³, ç”·, å¥³, â€¦\n$ bmi          &lt;dbl&gt; 20.5, 28.1, 18.5, 29.2, 21.2, 23.2, 21.0, 25.4, 27.6, 27.â€¦\n$ smoking      &lt;fct&gt; æ›¾ç», ä»ä¸, ä»ä¸, ä»ä¸, ä»ä¸, ä»ä¸, ä»ä¸, æ›¾ç», ä»ä¸, ç°åœ¨, ä»ä¸, æ›¾ç», æ›¾ç», ç°åœ¨, æ›¾â€¦\n$ hypertension &lt;int&gt; 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, â€¦\n$ diabetes     &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, â€¦\n$ cholesterol  &lt;dbl&gt; 216, 225, 187, 169, 219, 246, 212, 143, 246, 228, 185, 26â€¦\n$ cvd          &lt;int&gt; 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 1, â€¦\n\n# äº‹ä»¶ç‡\nmean(cvd_data$cvd)\n\n[1] 0.83875\n\n\n\n\næ¢ç´¢æ€§åˆ†æ\n\n# åŸºçº¿ç‰¹å¾æŒ‰ CVD åˆ†ç»„\ncvd_data |&gt;\n  tbl_summary(\n    by = cvd,\n    include = c(age, sex, bmi, smoking, hypertension, diabetes, cholesterol),\n    label = list(\n      age ~ \"å¹´é¾„\",\n      sex ~ \"æ€§åˆ«\",\n      bmi ~ \"BMI\",\n      smoking ~ \"å¸çƒŸçŠ¶æ€\",\n      hypertension ~ \"é«˜è¡€å‹\",\n      diabetes ~ \"ç³–å°¿ç—…\",\n      cholesterol ~ \"æ€»èƒ†å›ºé†‡\"\n    ),\n    statistic = list(\n      all_continuous() ~ \"{mean} ({sd})\",\n      all_categorical() ~ \"{n} ({p}%)\"\n    )\n  ) |&gt;\n  add_p() |&gt;\n  add_overall() |&gt;\n  modify_header(label = \"**å˜é‡**\") |&gt;\n  modify_spanning_header(c(\"stat_1\", \"stat_2\") ~ \"**CVD äº‹ä»¶**\")\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nå˜é‡\nOverall\nN = 8001\n\nCVD äº‹ä»¶\n\np-value2\n\n\n0\nN = 1291\n1\nN = 6711\n\n\n\n\nå¹´é¾„\n55 (12)\n49 (11)\n56 (12)\n&lt;0.001\n\n\næ€§åˆ«\n\n\n\n\n\n\n0.14\n\n\nÂ Â Â Â ç”·\n457 (57%)\n66 (51%)\n391 (58%)\n\n\n\n\nÂ Â Â Â å¥³\n343 (43%)\n63 (49%)\n280 (42%)\n\n\n\n\nBMI\n25.1 (3.9)\n24.5 (3.8)\n25.3 (3.9)\n0.077\n\n\nå¸çƒŸçŠ¶æ€\n\n\n\n\n\n\n&lt;0.001\n\n\nÂ Â Â Â æ›¾ç»\n236 (30%)\n35 (27%)\n201 (30%)\n\n\n\n\nÂ Â Â Â ä»ä¸\n333 (42%)\n80 (62%)\n253 (38%)\n\n\n\n\nÂ Â Â Â ç°åœ¨\n231 (29%)\n14 (11%)\n217 (32%)\n\n\n\n\né«˜è¡€å‹\n288 (36%)\n32 (25%)\n256 (38%)\n0.004\n\n\nç³–å°¿ç—…\n159 (20%)\n20 (16%)\n139 (21%)\n0.2\n\n\næ€»èƒ†å›ºé†‡\n200 (41)\n192 (37)\n202 (41)\n0.003\n\n\n\n1 Mean (SD); n (%)\n\n\n2 Wilcoxon rank sum test; Pearsonâ€™s Chi-squared test",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Logistic å›å½’"
    ]
  },
  {
    "objectID": "1019-logistic.html#æ¨¡å‹æ„å»º",
    "href": "1019-logistic.html#æ¨¡å‹æ„å»º",
    "title": "Logistic å›å½’å®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹æ„å»º",
    "text": "æ¨¡å‹æ„å»º\n\nå•å› ç´ åˆ†æ\nå…ˆè¿›è¡Œå•å› ç´  Logistic å›å½’ç­›é€‰å˜é‡ï¼š\n\n# å•å› ç´ åˆ†æå‡½æ•°\nunivariate_logistic &lt;- function(data, outcome, predictors) {\n  results &lt;- map_dfr(predictors, function(var) {\n    formula &lt;- as.formula(paste(outcome, \"~\", var))\n    model &lt;- glm(formula, data = data, family = binomial)\n    \n    tidy(model, conf.int = TRUE, exponentiate = TRUE) |&gt;\n      filter(term != \"(Intercept)\") |&gt;\n      mutate(variable = var) |&gt;\n      select(variable, term, estimate, conf.low, conf.high, p.value)\n  })\n  \n  results |&gt;\n    mutate(\n      OR_CI = paste0(\n        round(estimate, 2), \" (\",\n        round(conf.low, 2), \"-\",\n        round(conf.high, 2), \")\"\n      )\n    )\n}\n\n# æ‰§è¡Œå•å› ç´ åˆ†æ\npredictors &lt;- c(\"age\", \"sex\", \"bmi\", \"smoking\", \"hypertension\", \"diabetes\", \"cholesterol\")\n\nunivar_results &lt;- univariate_logistic(cvd_data, \"cvd\", predictors)\nunivar_results |&gt;\n  select(variable, term, OR_CI, p.value) |&gt;\n  mutate(p.value = format.pval(p.value, digits = 3))\n\n# A tibble: 8 Ã— 4\n  variable     term         OR_CI            p.value\n  &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;            &lt;chr&gt;  \n1 age          age          1.05 (1.03-1.07) 5.7e-09\n2 sex          sexå¥³        0.75 (0.51-1.1)  0.13596\n3 bmi          bmi          1.05 (1-1.1)     0.04979\n4 smoking      smokingä»ä¸  0.55 (0.35-0.85) 0.00763\n5 smoking      smokingç°åœ¨  2.7 (1.44-5.32)  0.00271\n6 hypertension hypertension 1.87 (1.23-2.91) 0.00423\n7 diabetes     diabetes     1.42 (0.87-2.44) 0.17607\n8 cholesterol  cholesterol  1.01 (1-1.01)    0.00973\n\n\n\n\nå¤šå› ç´ æ¨¡å‹\nå°†æ˜¾è‘—å˜é‡çº³å…¥å¤šå› ç´ æ¨¡å‹ï¼š\n\n# å¤šå› ç´  Logistic å›å½’\nmodel_full &lt;- glm(\n  cvd ~ age + sex + bmi + smoking + hypertension + diabetes + cholesterol,\n  data = cvd_data,\n  family = binomial(link = \"logit\")\n)\n\n# æ¨¡å‹æ‘˜è¦\nsummary(model_full)\n\n\nCall:\nglm(formula = cvd ~ age + sex + bmi + smoking + hypertension + \n    diabetes + cholesterol, family = binomial(link = \"logit\"), \n    data = cvd_data)\n\nCoefficients:\n              Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept)  -4.123882   1.009434  -4.085 4.40e-05 ***\nage           0.053883   0.009152   5.888 3.92e-09 ***\nsexå¥³        -0.344342   0.208234  -1.654  0.09820 .  \nbmi           0.060093   0.026355   2.280  0.02260 *  \nsmokingä»ä¸  -0.722106   0.236969  -3.047  0.00231 ** \nsmokingç°åœ¨   1.010488   0.341058   2.963  0.00305 ** \nhypertension  0.655604   0.232868   2.815  0.00487 ** \ndiabetes      0.362925   0.278044   1.305  0.19180    \ncholesterol   0.007497   0.002632   2.848  0.00439 ** \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 706.78  on 799  degrees of freedom\nResidual deviance: 607.19  on 791  degrees of freedom\nAIC: 625.19\n\nNumber of Fisher Scoring iterations: 5\n\n\n\n\næ•´æ´è¾“å‡º\n\n# ä½¿ç”¨ gtsummary ç”Ÿæˆä¸“ä¸šè¡¨æ ¼\nmodel_full |&gt;\n  tbl_regression(\n    exponentiate = TRUE,\n    label = list(\n      age ~ \"å¹´é¾„\",\n      sex ~ \"æ€§åˆ«\",\n      bmi ~ \"BMI\",\n      smoking ~ \"å¸çƒŸçŠ¶æ€\",\n      hypertension ~ \"é«˜è¡€å‹\",\n      diabetes ~ \"ç³–å°¿ç—…\",\n      cholesterol ~ \"æ€»èƒ†å›ºé†‡\"\n    )\n  ) |&gt;\n  add_global_p() |&gt;\n  bold_p() |&gt;\n  modify_header(label = \"**å˜é‡**\")\n\n\n\n\n\n\n\n\n\n\n\n\n\nå˜é‡\nOR\n95% CI\np-value\n\n\n\n\nå¹´é¾„\n1.06\n1.04, 1.07\n&lt;0.001\n\n\næ€§åˆ«\n\n\n\n\n0.10\n\n\nÂ Â Â Â ç”·\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â å¥³\n0.71\n0.47, 1.07\n\n\n\n\nBMI\n1.06\n1.01, 1.12\n0.022\n\n\nå¸çƒŸçŠ¶æ€\n\n\n\n\n&lt;0.001\n\n\nÂ Â Â Â æ›¾ç»\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â ä»ä¸\n0.49\n0.30, 0.77\n\n\n\n\nÂ Â Â Â ç°åœ¨\n2.75\n1.44, 5.52\n\n\n\n\né«˜è¡€å‹\n1.93\n1.23, 3.08\n0.004\n\n\nç³–å°¿ç—…\n1.44\n0.85, 2.54\n0.2\n\n\næ€»èƒ†å›ºé†‡\n1.01\n1.00, 1.01\n0.004\n\n\n\nAbbreviations: CI = Confidence Interval, OR = Odds Ratio",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Logistic å›å½’"
    ]
  },
  {
    "objectID": "1019-logistic.html#æ¨¡å‹è¯Šæ–­",
    "href": "1019-logistic.html#æ¨¡å‹è¯Šæ–­",
    "title": "Logistic å›å½’å®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹è¯Šæ–­",
    "text": "æ¨¡å‹è¯Šæ–­\n\nå¤šé‡å…±çº¿æ€§æ£€éªŒ\n\n# è®¡ç®— VIFï¼ˆæ–¹å·®è†¨èƒ€å› å­ï¼‰\nvif_values &lt;- vif(model_full)\nvif_values\n\n                 GVIF Df GVIF^(1/(2*Df))\nage          1.020294  1        1.010096\nsex          1.013159  1        1.006558\nbmi          1.011781  1        1.005873\nsmoking      1.030028  2        1.007424\nhypertension 1.010345  1        1.005159\ndiabetes     1.011066  1        1.005518\ncholesterol  1.010944  1        1.005457\n\n# VIF &gt; 5 æç¤ºå­˜åœ¨å…±çº¿æ€§é—®é¢˜\n\n\n\nçº¿æ€§å‡è®¾æ£€æŸ¥ï¼ˆè¿ç»­å˜é‡ï¼‰\nå¯¹äºè¿ç»­å˜é‡ï¼Œå¯ç”¨é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡æˆ–åˆ†æ®µæ–¹æ³•æ£€æŸ¥çº¿æ€§å‡è®¾ã€‚ è‹¥å‘ç°æ˜æ˜¾éçº¿æ€§ï¼Œå¯è€ƒè™‘åˆ†æ®µæˆ–ä½¿ç”¨æ ·æ¡é¡¹ã€‚\n\n\næ¨¡å‹æ‹Ÿåˆä¼˜åº¦\n\n# Hosmer-Lemeshow æ£€éªŒ\nhl_test &lt;- hoslem.test(cvd_data$cvd, fitted(model_full), g = 10)\nhl_test\n\n\n    Hosmer and Lemeshow goodness of fit (GOF) test\n\ndata:  cvd_data$cvd, fitted(model_full)\nX-squared = 3.4288, df = 8, p-value = 0.9046\n\n# p &gt; 0.05 è¡¨ç¤ºæ¨¡å‹æ‹Ÿåˆè‰¯å¥½\n\n\n# ä½¿ç”¨ performance åŒ…è¿›è¡Œå…¨é¢è¯Šæ–­\nmodel_performance(model_full)\n\n# Indices of model performance\n\nAIC   |  AICc |   BIC | Tjur's R2 |  RMSE | Sigma | Log_loss | Score_log\n------------------------------------------------------------------------\n625.2 | 625.4 | 667.4 |     0.126 | 0.345 |     1 |    0.379 |      -Inf\n\nAIC   | Score_spherical |   PCP\n-------------------------------\n625.2 |           0.001 | 0.764\n\n\n\n\næ®‹å·®è¯Šæ–­\n\n# æ£€æŸ¥å¼‚å¸¸å€¼å’Œå½±å“ç‚¹\ncheck_model(model_full, check = c(\"binned_residuals\", \"outliers\"))\n\n\n\n\n\n\n\n\n\n\né¢„æµ‹æ•ˆæœ\n\n# æ·»åŠ é¢„æµ‹æ¦‚ç‡\ncvd_data &lt;- cvd_data |&gt;\n  mutate(\n    pred_prob = predict(model_full, type = \"response\"),\n    pred_class = ifelse(pred_prob &gt; 0.5, 1, 0)\n  )\n\n# æ··æ·†çŸ©é˜µ\ntable(é¢„æµ‹ = cvd_data$pred_class, å®é™… = cvd_data$cvd)\n\n    å®é™…\né¢„æµ‹   0   1\n   0  12  14\n   1 117 657\n\n# å‡†ç¡®ç‡\nmean(cvd_data$pred_class == cvd_data$cvd)\n\n[1] 0.83625",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Logistic å›å½’"
    ]
  },
  {
    "objectID": "1019-logistic.html#roc-æ›²çº¿ä¸-auc",
    "href": "1019-logistic.html#roc-æ›²çº¿ä¸-auc",
    "title": "Logistic å›å½’å®Œå…¨æŒ‡å—",
    "section": "ROC æ›²çº¿ä¸ AUC",
    "text": "ROC æ›²çº¿ä¸ AUC\nROC æ›²çº¿æ˜¯è¯„ä¼°åˆ†ç±»æ¨¡å‹æ€§èƒ½çš„æ ‡å‡†å·¥å…·ã€‚\n\n# è®¡ç®— ROC æ›²çº¿\nroc_obj &lt;- roc(cvd_data$cvd, cvd_data$pred_prob)\n\n# AUC å€¼\nauc(roc_obj)\n\nArea under the curve: 0.7652\n\n# æœ€ä¼˜é˜ˆå€¼ï¼ˆYouden æŒ‡æ•°ï¼‰\ncoords(roc_obj, \"best\", ret = c(\"threshold\", \"sensitivity\", \"specificity\"))\n\n  threshold sensitivity specificity\n1 0.8916241   0.5201192   0.8914729\n\n\n\n# ç»‘åˆ¶ ROC æ›²çº¿\nggroc(roc_obj, color = \"#4f46e5\", size = 1.2) +\n  geom_abline(slope = 1, intercept = 1, linetype = \"dashed\", color = \"gray50\") +\n  annotate(\"text\", x = 0.3, y = 0.3, \n           label = paste0(\"AUC = \", round(auc(roc_obj), 3)),\n           size = 5, color = \"#4f46e5\", fontface = \"bold\") +\n  labs(\n    title = \"ROC æ›²çº¿\",\n    subtitle = \"Logistic å›å½’æ¨¡å‹é¢„æµ‹ CVD äº‹ä»¶\",\n    x = \"ç‰¹å¼‚åº¦ (Specificity)\",\n    y = \"æ•æ„Ÿåº¦ (Sensitivity)\"\n  ) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, face = \"bold\"),\n    panel.grid.minor = element_blank()\n  )\n\n\n\n\n\n\n\n\n\nå¤šæ¨¡å‹ ROC æ¯”è¾ƒ\n\n# æ„å»ºç®€åŒ–æ¨¡å‹è¿›è¡Œæ¯”è¾ƒ\nmodel_simple &lt;- glm(cvd ~ age + sex + smoking, data = cvd_data, family = binomial)\n\n# è®¡ç®—ä¸¤ä¸ªæ¨¡å‹çš„ ROC\nroc_full &lt;- roc(cvd_data$cvd, predict(model_full, type = \"response\"))\nroc_simple &lt;- roc(cvd_data$cvd, predict(model_simple, type = \"response\"))\n\n# æ¯”è¾ƒ AUC\nroc.test(roc_full, roc_simple)\n\n\n    DeLong's test for two correlated ROC curves\n\ndata:  roc_full and roc_simple\nZ = 3.019, p-value = 0.002536\nalternative hypothesis: true difference in AUC is not equal to 0\n95 percent confidence interval:\n 0.01292389 0.06075996\nsample estimates:\nAUC of roc1 AUC of roc2 \n  0.7652468   0.7284049 \n\n# å¯è§†åŒ–æ¯”è¾ƒ\nggroc(list(å®Œæ•´æ¨¡å‹ = roc_full, ç®€åŒ–æ¨¡å‹ = roc_simple), size = 1) +\n  scale_color_manual(values = c(\"#4f46e5\", \"#f59e0b\")) +\n  geom_abline(slope = 1, intercept = 1, linetype = \"dashed\", color = \"gray50\") +\n  labs(\n    title = \"ROC æ›²çº¿æ¯”è¾ƒ\",\n    x = \"ç‰¹å¼‚åº¦\",\n    y = \"æ•æ„Ÿåº¦\",\n    color = \"æ¨¡å‹\"\n  ) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, face = \"bold\"),\n    legend.position = \"bottom\"\n  )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Logistic å›å½’"
    ]
  },
  {
    "objectID": "1019-logistic.html#ç»“æœè§£è¯»",
    "href": "1019-logistic.html#ç»“æœè§£è¯»",
    "title": "Logistic å›å½’å®Œå…¨æŒ‡å—",
    "section": "ç»“æœè§£è¯»",
    "text": "ç»“æœè§£è¯»\n\nOR çš„ä¸´åºŠæ„ä¹‰\n\n# æå– OR åŠç½®ä¿¡åŒºé—´\nor_table &lt;- tidy(model_full, conf.int = TRUE, exponentiate = TRUE) |&gt;\n  filter(term != \"(Intercept)\") |&gt;\n  select(term, estimate, conf.low, conf.high, p.value) |&gt;\n  mutate(\n    interpretation = case_when(\n      estimate &gt; 1 & p.value &lt; 0.05 ~ \"é£é™©å› ç´ \",\n      estimate &lt; 1 & p.value &lt; 0.05 ~ \"ä¿æŠ¤å› ç´ \",\n      TRUE ~ \"æ— æ˜¾è‘—å…³è”\"\n    )\n  )\n\nor_table\n\n# A tibble: 8 Ã— 6\n  term         estimate conf.low conf.high       p.value interpretation\n  &lt;chr&gt;           &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;         &lt;dbl&gt; &lt;chr&gt;         \n1 age             1.06     1.04      1.07  0.00000000392 é£é™©å› ç´       \n2 sexå¥³           0.709    0.471     1.07  0.0982        æ— æ˜¾è‘—å…³è”    \n3 bmi             1.06     1.01      1.12  0.0226        é£é™©å› ç´       \n4 smokingä»ä¸     0.486    0.302     0.767 0.00231       ä¿æŠ¤å› ç´       \n5 smokingç°åœ¨     2.75     1.44      5.52  0.00305       é£é™©å› ç´       \n6 hypertension    1.93     1.23      3.08  0.00487       é£é™©å› ç´       \n7 diabetes        1.44     0.849     2.54  0.192         æ— æ˜¾è‘—å…³è”    \n8 cholesterol     1.01     1.00      1.01  0.00439       é£é™©å› ç´       \n\n\n\n\næ£®æ—å›¾å¯è§†åŒ–\n\n# ç»‘åˆ¶æ£®æ—å›¾\nor_plot_data &lt;- tidy(model_full, conf.int = TRUE, exponentiate = TRUE) |&gt;\n  filter(term != \"(Intercept)\") |&gt;\n  mutate(\n    term = factor(term, levels = rev(term)),\n    significant = p.value &lt; 0.05\n  )\n\nggplot(or_plot_data, aes(x = estimate, y = term)) +\n  geom_vline(xintercept = 1, linetype = \"dashed\", color = \"gray50\") +\n  geom_errorbarh(aes(xmin = conf.low, xmax = conf.high, color = significant),\n                 height = 0.2, linewidth = 0.8) +\n  geom_point(aes(color = significant), size = 3) +\n  scale_color_manual(values = c(\"TRUE\" = \"#4f46e5\", \"FALSE\" = \"#9ca3af\"),\n                     labels = c(\"TRUE\" = \"æ˜¾è‘—\", \"FALSE\" = \"ä¸æ˜¾è‘—\")) +\n  scale_x_log10() +\n  labs(\n    title = \"å¤šå› ç´  Logistic å›å½’æ£®æ—å›¾\",\n    x = \"æ¯”å€¼æ¯” (OR)\",\n    y = \"å˜é‡\",\n    color = \"ç»Ÿè®¡æ˜¾è‘—æ€§\"\n  ) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, face = \"bold\"),\n    legend.position = \"bottom\"\n  )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Logistic å›å½’"
    ]
  },
  {
    "objectID": "1019-logistic.html#äº¤äº’ä½œç”¨åˆ†æ",
    "href": "1019-logistic.html#äº¤äº’ä½œç”¨åˆ†æ",
    "title": "Logistic å›å½’å®Œå…¨æŒ‡å—",
    "section": "äº¤äº’ä½œç”¨åˆ†æ",
    "text": "äº¤äº’ä½œç”¨åˆ†æ\næ£€éªŒå˜é‡é—´çš„äº¤äº’æ•ˆåº”ï¼š\n\n# æ·»åŠ äº¤äº’é¡¹ï¼šå¹´é¾„ Ã— å¸çƒŸ\nmodel_interact &lt;- glm(\n  cvd ~ age * smoking + sex + bmi + hypertension + diabetes + cholesterol,\n  data = cvd_data,\n  family = binomial\n)\n\n# æ£€éªŒäº¤äº’æ•ˆåº”\nanova(model_full, model_interact, test = \"LRT\")\n\nAnalysis of Deviance Table\n\nModel 1: cvd ~ age + sex + bmi + smoking + hypertension + diabetes + cholesterol\nModel 2: cvd ~ age * smoking + sex + bmi + hypertension + diabetes + cholesterol\n  Resid. Df Resid. Dev Df  Deviance Pr(&gt;Chi)\n1       791     607.19                      \n2       789     607.19  2 0.0058042   0.9971\n\n\n\n# å¯è§†åŒ–äº¤äº’æ•ˆåº”\ninteract_data &lt;- expand.grid(\n  age = seq(30, 80, by = 5),\n  smoking = c(\"ä»ä¸\", \"æ›¾ç»\", \"ç°åœ¨\"),\n  sex = \"ç”·\",\n  bmi = mean(cvd_data$bmi),\n  hypertension = 0,\n  diabetes = 0,\n  cholesterol = mean(cvd_data$cholesterol)\n)\n\ninteract_data$pred_prob &lt;- predict(model_interact, newdata = interact_data, type = \"response\")\n\nggplot(interact_data, aes(x = age, y = pred_prob, color = smoking)) +\n  geom_line(linewidth = 1.2) +\n  scale_color_manual(values = c(\"#22c55e\", \"#f59e0b\", \"#ef4444\")) +\n  scale_y_continuous(labels = scales::percent_format()) +\n  labs(\n    title = \"å¹´é¾„ä¸å¸çƒŸçŠ¶æ€çš„äº¤äº’æ•ˆåº”\",\n    subtitle = \"é¢„æµ‹ CVD å‘ç”Ÿæ¦‚ç‡ï¼ˆå…¶ä»–å˜é‡å–å‡å€¼/å‚ç…§å€¼ï¼‰\",\n    x = \"å¹´é¾„\",\n    y = \"é¢„æµ‹æ¦‚ç‡\",\n    color = \"å¸çƒŸçŠ¶æ€\"\n  ) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, face = \"bold\"),\n    legend.position = \"bottom\"\n  )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Logistic å›å½’"
    ]
  },
  {
    "objectID": "1019-logistic.html#æ¨¡å‹é€‰æ‹©",
    "href": "1019-logistic.html#æ¨¡å‹é€‰æ‹©",
    "title": "Logistic å›å½’å®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹é€‰æ‹©",
    "text": "æ¨¡å‹é€‰æ‹©\n\né€æ­¥å›å½’\n\n# å‘åé€æ­¥å›å½’ï¼ˆåŸºäº AICï¼‰\nmodel_step &lt;- step(model_full, direction = \"backward\", trace = 0)\nsummary(model_step)\n\n\nCall:\nglm(formula = cvd ~ age + sex + bmi + smoking + hypertension + \n    cholesterol, family = binomial(link = \"logit\"), data = cvd_data)\n\nCoefficients:\n              Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept)  -3.989602   1.004762  -3.971 7.17e-05 ***\nage           0.053618   0.009130   5.873 4.28e-09 ***\nsexå¥³        -0.358191   0.207747  -1.724  0.08468 .  \nbmi           0.058063   0.026435   2.196  0.02806 *  \nsmokingä»ä¸  -0.721974   0.236705  -3.050  0.00229 ** \nsmokingç°åœ¨   1.020456   0.341169   2.991  0.00278 ** \nhypertension  0.677067   0.232170   2.916  0.00354 ** \ncholesterol   0.007470   0.002624   2.846  0.00442 ** \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 706.78  on 799  degrees of freedom\nResidual deviance: 608.98  on 792  degrees of freedom\nAIC: 624.98\n\nNumber of Fisher Scoring iterations: 5\n\n# æ¯”è¾ƒæ¨¡å‹\nAIC(model_full, model_step)\n\n           df      AIC\nmodel_full  9 625.1909\nmodel_step  8 624.9772\n\nBIC(model_full, model_step)\n\n           df      BIC\nmodel_full  9 667.3524\nmodel_step  8 662.4541\n\n\n\n\næ¯”è¾ƒæ¨¡å‹æ€§èƒ½\n\ncompare_performance(model_full, model_step, model_simple, rank = TRUE)\n\n# Comparison of Model Performance Indices\n\nName         | Model | Tjur's R2 |  RMSE | Sigma | Log_loss | Score_log\n-----------------------------------------------------------------------\nmodel_full   |   glm |     0.126 | 0.345 |     1 |    0.379 |      -Inf\nmodel_step   |   glm |     0.123 | 0.346 |     1 |    0.381 |      -Inf\nmodel_simple |   glm |     0.097 | 0.350 |     1 |    0.395 |      -Inf\n\nName         | Score_spherical |   PCP | AIC weights | AICc weights\n-------------------------------------------------------------------\nmodel_full   |           0.001 | 0.764 |       0.473 |        0.468\nmodel_step   |           0.001 | 0.763 |       0.527 |        0.532\nmodel_simple |           0.001 | 0.756 |    1.57e-04 |     1.68e-04\n\nName         | BIC weights | Performance-Score\n----------------------------------------------\nmodel_full   |       0.061 |             -Inf%\nmodel_step   |       0.703 |             -Inf%\nmodel_simple |       0.237 |             -Inf%",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Logistic å›å½’"
    ]
  },
  {
    "objectID": "1019-logistic.html#é¢„æµ‹åº”ç”¨",
    "href": "1019-logistic.html#é¢„æµ‹åº”ç”¨",
    "title": "Logistic å›å½’å®Œå…¨æŒ‡å—",
    "section": "é¢„æµ‹åº”ç”¨",
    "text": "é¢„æµ‹åº”ç”¨\n\nä¸ªä½“é£é™©é¢„æµ‹\n\n# ä¸ºæ–°ä¸ªä½“é¢„æµ‹é£é™©\nnew_patient &lt;- tibble(\n  age = 60,\n  sex = factor(\"ç”·\", levels = levels(cvd_data$sex)),\n  bmi = 28,\n  smoking = factor(\"ç°åœ¨\", levels = levels(cvd_data$smoking)),\n  hypertension = 1,\n  diabetes = 0,\n  cholesterol = 220\n)\n\n# é¢„æµ‹æ¦‚ç‡\npred &lt;- predict(model_full, newdata = new_patient, type = \"response\", se.fit = TRUE)\n\ncat(\"é¢„æµ‹ CVD æ¦‚ç‡:\", round(pred$fit * 100, 1), \"%\\n\")\n\né¢„æµ‹ CVD æ¦‚ç‡: 98.4 %\n\ncat(\"95% CI:\", \n    round(plogis(qlogis(pred$fit) - 1.96 * pred$se.fit) * 100, 1), \"-\",\n    round(plogis(qlogis(pred$fit) + 1.96 * pred$se.fit) * 100, 1), \"%\\n\")\n\n95% CI: 98.4 - 98.4 %\n\n\n\n\né£é™©åˆ†å±‚\n\n# æ ¹æ®é¢„æµ‹æ¦‚ç‡è¿›è¡Œé£é™©åˆ†å±‚\ncvd_data &lt;- cvd_data |&gt;\n  mutate(\n    risk_group = case_when(\n      pred_prob &lt; 0.1 ~ \"ä½é£é™©\",\n      pred_prob &lt; 0.3 ~ \"ä¸­é£é™©\",\n      TRUE ~ \"é«˜é£é™©\"\n    ),\n    risk_group = factor(risk_group, levels = c(\"ä½é£é™©\", \"ä¸­é£é™©\", \"é«˜é£é™©\"))\n  )\n\n# å„é£é™©ç»„çš„å®é™…äº‹ä»¶ç‡\ncvd_data |&gt;\n  group_by(risk_group) |&gt;\n  summarise(\n    n = n(),\n    events = sum(cvd),\n    event_rate = mean(cvd),\n    mean_pred = mean(pred_prob)\n  )\n\n# A tibble: 1 Ã— 5\n  risk_group     n events event_rate mean_pred\n  &lt;fct&gt;      &lt;int&gt;  &lt;int&gt;      &lt;dbl&gt;     &lt;dbl&gt;\n1 é«˜é£é™©       800    671      0.839     0.839\n\n\n\n# æ ¡å‡†æ›²çº¿\nggplot(cvd_data, aes(x = pred_prob, y = cvd)) +\n  geom_smooth(method = \"loess\", color = \"#4f46e5\", fill = \"#4f46e5\", alpha = 0.2) +\n  geom_abline(slope = 1, intercept = 0, linetype = \"dashed\", color = \"gray50\") +\n  scale_x_continuous(limits = c(0, 1), labels = scales::percent_format()) +\n  scale_y_continuous(limits = c(0, 1), labels = scales::percent_format()) +\n  labs(\n    title = \"æ ¡å‡†æ›²çº¿\",\n    subtitle = \"é¢„æµ‹æ¦‚ç‡ vs å®é™…äº‹ä»¶ç‡\",\n    x = \"é¢„æµ‹æ¦‚ç‡\",\n    y = \"å®é™…äº‹ä»¶ç‡\"\n  ) +\n  theme_minimal(base_size = 12) +\n  theme(plot.title = element_text(hjust = 0.5, face = \"bold\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Logistic å›å½’"
    ]
  },
  {
    "objectID": "1019-logistic.html#å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "href": "1019-logistic.html#å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "title": "Logistic å›å½’å®Œå…¨æŒ‡å—",
    "section": "å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "text": "å¸¸è§é—®é¢˜ä¸é™·é˜±\n\n0. å˜é‡ç¼ºå¤±ä¸åå€š\nç¼ºå¤±å€¼è‹¥ä¸æ˜¯éšæœºç¼ºå¤±ï¼Œä¼šå¼•å…¥ç³»ç»Ÿæ€§åå€šã€‚ å»ºè®®åœ¨å»ºæ¨¡å‰è¯„ä¼°ç¼ºå¤±æ¨¡å¼ï¼Œå¿…è¦æ—¶ä½¿ç”¨å¤šé‡æ’è¡¥ã€‚\n\n\n1. å®Œå…¨åˆ†ç¦»é—®é¢˜\nå½“æŸä¸ªé¢„æµ‹å˜é‡å®Œç¾é¢„æµ‹ç»“å±€æ—¶ï¼Œä¼šå‡ºç°ç³»æ•°æ— é™å¤§çš„é—®é¢˜ã€‚\n\n# è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ Firth æƒ©ç½š Logistic å›å½’\nlibrary(logistf)\nlogistf(cvd ~ perfect_predictor + ..., data = data)\n\n\n\n2. æ ·æœ¬é‡è¦æ±‚\n\n\n\næƒ…å†µ\nå»ºè®®æ ·æœ¬é‡\n\n\n\n\næ¯ä¸ªé¢„æµ‹å˜é‡\nè‡³å°‘ 10-20 ä¸ªäº‹ä»¶\n\n\nç¨€æœ‰äº‹ä»¶\nè€ƒè™‘ç²¾ç¡® Logistic å›å½’\n\n\n\n\n\n3. ç±»åˆ«ä¸å¹³è¡¡\n\n# è§£å†³æ–¹æ¡ˆ\n# 1. è°ƒæ•´åˆ†ç±»é˜ˆå€¼\n# 2. è¿‡é‡‡æ ·/æ¬ é‡‡æ ·\n# 3. ä½¿ç”¨ AUC è€Œéå‡†ç¡®ç‡è¯„ä¼°\n\n\n\n4. æ¨¡å‹è¿‡æ‹Ÿåˆ\n\n# ä½¿ç”¨äº¤å‰éªŒè¯è¯„ä¼°\nlibrary(caret)\ntrain_control &lt;- trainControl(method = \"cv\", number = 10)\ncv_model &lt;- train(cvd ~ ., data = cvd_data, method = \"glm\", \n                  family = \"binomial\", trControl = train_control)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Logistic å›å½’"
    ]
  },
  {
    "objectID": "1019-logistic.html#æŠ¥å‘Šæ¨¡æ¿",
    "href": "1019-logistic.html#æŠ¥å‘Šæ¨¡æ¿",
    "title": "Logistic å›å½’å®Œå…¨æŒ‡å—",
    "section": "æŠ¥å‘Šæ¨¡æ¿",
    "text": "æŠ¥å‘Šæ¨¡æ¿\n\n# å®Œæ•´ç»“æœè¡¨æ ¼\nmodel_full |&gt;\n  tbl_regression(\n    exponentiate = TRUE,\n    label = list(\n      age ~ \"å¹´é¾„ (æ¯å¢åŠ 1å²)\",\n      sex ~ \"æ€§åˆ«\",\n      bmi ~ \"BMI (æ¯å¢åŠ 1)\",\n      smoking ~ \"å¸çƒŸçŠ¶æ€\",\n      hypertension ~ \"é«˜è¡€å‹\",\n      diabetes ~ \"ç³–å°¿ç—…\",\n      cholesterol ~ \"æ€»èƒ†å›ºé†‡ (æ¯å¢åŠ 1)\"\n    ),\n    pvalue_fun = ~style_pvalue(.x, digits = 3)\n  ) |&gt;\n  add_global_p() |&gt;\n  add_glance_table(\n    include = c(AIC, BIC, nobs)\n  ) |&gt;\n  modify_header(label = \"**å˜é‡**\") |&gt;\n  modify_caption(\"**è¡¨1. å¤šå› ç´  Logistic å›å½’åˆ†æç»“æœ**\")\n\n\n\n\n\nè¡¨1. å¤šå› ç´  Logistic å›å½’åˆ†æç»“æœ\n\n\n\n\n\n\n\n\nå˜é‡\nOR\n95% CI\np-value\n\n\n\n\nå¹´é¾„ (æ¯å¢åŠ 1å²)\n1.06\n1.04, 1.07\n&lt;0.001\n\n\næ€§åˆ«\n\n\n\n\n0.098\n\n\nÂ Â Â Â ç”·\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â å¥³\n0.71\n0.47, 1.07\n\n\n\n\nBMI (æ¯å¢åŠ 1)\n1.06\n1.01, 1.12\n0.022\n\n\nå¸çƒŸçŠ¶æ€\n\n\n\n\n&lt;0.001\n\n\nÂ Â Â Â æ›¾ç»\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â ä»ä¸\n0.49\n0.30, 0.77\n\n\n\n\nÂ Â Â Â ç°åœ¨\n2.75\n1.44, 5.52\n\n\n\n\né«˜è¡€å‹\n1.93\n1.23, 3.08\n0.004\n\n\nç³–å°¿ç—…\n1.44\n0.85, 2.54\n0.181\n\n\næ€»èƒ†å›ºé†‡ (æ¯å¢åŠ 1)\n1.01\n1.00, 1.01\n0.004\n\n\nAIC\n625\n\n\n\n\n\n\nBIC\n667\n\n\n\n\n\n\nNo. Obs.\n800\n\n\n\n\n\n\n\nAbbreviations: CI = Confidence Interval, OR = Odds Ratio",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Logistic å›å½’"
    ]
  },
  {
    "objectID": "1019-logistic.html#æ€»ç»“",
    "href": "1019-logistic.html#æ€»ç»“",
    "title": "Logistic å›å½’å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\næ­¥éª¤\nå…³é”®æ“ä½œ\nR å‡½æ•°\n\n\n\n\næ¨¡å‹æ„å»º\nä¼°è®¡ç³»æ•°\nglm(..., family = binomial)\n\n\nç»“æœæå–\nOR åŠ CI\ntidy(..., exponentiate = TRUE)\n\n\næ¨¡å‹è¯Šæ–­\nVIFã€H-L æ£€éªŒ\nvif(), hoslem.test()\n\n\né¢„æµ‹è¯„ä¼°\nROC/AUC\npROC::roc(), pROC::auc()\n\n\nç»“æœå±•ç¤º\nä¸“ä¸šè¡¨æ ¼\ngtsummary::tbl_regression()\n\n\n\n\næŠ¥å‘Š Logistic å›å½’çš„ Checklist\n\næŠ¥å‘Šæ ·æœ¬é‡å’Œäº‹ä»¶æ•°\næŠ¥å‘Š OR åŠ 95% CI\nè¯´æ˜å‚ç…§ç»„è®¾ç½®\næŠ¥å‘Šæ¨¡å‹æ‹Ÿåˆåº¦ï¼ˆH-L æ£€éªŒï¼‰\næŠ¥å‘Šåˆ¤åˆ«èƒ½åŠ›ï¼ˆAUCï¼‰\næ£€æŸ¥å¤šé‡å…±çº¿æ€§\nè¿›è¡Œæ•æ„Ÿæ€§åˆ†æ",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Logistic å›å½’"
    ]
  },
  {
    "objectID": "1021-linear-regression.html",
    "href": "1021-linear-regression.html",
    "title": "å¤šå…ƒçº¿æ€§å›å½’å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "å¤šå…ƒçº¿æ€§å›å½’ï¼ˆMultiple Linear Regressionï¼‰ æ˜¯ä¸€ç§ç”¨äºåˆ†æè¿ç»­å‹ç»“å±€å˜é‡ä¸å¤šä¸ªè§£é‡Šå˜é‡ä¹‹é—´å…³ç³»çš„ç»Ÿè®¡æ–¹æ³•ã€‚å®ƒæ˜¯æœ€åŸºç¡€ä¹Ÿæ˜¯æœ€é‡è¦çš„å›å½’åˆ†ææ–¹æ³•ä¹‹ä¸€ã€‚\n\n\n\n\n\nåœºæ™¯\nç¤ºä¾‹\n\n\n\n\né¢„æµ‹å»ºæ¨¡\né¢„æµ‹æˆ¿ä»·ã€é”€å”®é¢\n\n\næ•ˆåº”ä¼°è®¡\næ§åˆ¶æ··æ‚åä¼°è®¡æš´éœ²æ•ˆåº”\n\n\nå˜é‡ç­›é€‰\nè¯†åˆ«é‡è¦é¢„æµ‹å› å­\n\n\nè¶‹åŠ¿åˆ†æ\nå®šé‡è¯„ä¼°å‰‚é‡-æ•ˆåº”å…³ç³»\n\n\n\n\n\n\n\\[Y = \\beta_0 + \\beta_1 X_1 + \\beta_2 X_2 + \\cdots + \\beta_p X_p + \\epsilon\\]\nå…¶ä¸­ï¼š - \\(\\beta_0\\)ï¼šæˆªè· - \\(\\beta_i\\)ï¼šç¬¬ i ä¸ªé¢„æµ‹å˜é‡çš„å›å½’ç³»æ•° - \\(\\epsilon \\sim N(0, \\sigma^2)\\)ï¼šéšæœºè¯¯å·®\n\n\n\n\\(\\beta_i\\) è¡¨ç¤ºï¼šåœ¨æ§åˆ¶å…¶ä»–å˜é‡ä¸å˜çš„æƒ…å†µä¸‹ï¼Œ\\(X_i\\) æ¯å¢åŠ  1 ä¸ªå•ä½ï¼ŒY çš„å¹³å‡å˜åŒ–é‡ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "å¤šå…ƒçº¿æ€§å›å½’"
    ]
  },
  {
    "objectID": "1021-linear-regression.html#ä»€ä¹ˆæ˜¯å¤šå…ƒçº¿æ€§å›å½’",
    "href": "1021-linear-regression.html#ä»€ä¹ˆæ˜¯å¤šå…ƒçº¿æ€§å›å½’",
    "title": "å¤šå…ƒçº¿æ€§å›å½’å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "å¤šå…ƒçº¿æ€§å›å½’ï¼ˆMultiple Linear Regressionï¼‰ æ˜¯ä¸€ç§ç”¨äºåˆ†æè¿ç»­å‹ç»“å±€å˜é‡ä¸å¤šä¸ªè§£é‡Šå˜é‡ä¹‹é—´å…³ç³»çš„ç»Ÿè®¡æ–¹æ³•ã€‚å®ƒæ˜¯æœ€åŸºç¡€ä¹Ÿæ˜¯æœ€é‡è¦çš„å›å½’åˆ†ææ–¹æ³•ä¹‹ä¸€ã€‚\n\n\n\n\n\nåœºæ™¯\nç¤ºä¾‹\n\n\n\n\né¢„æµ‹å»ºæ¨¡\né¢„æµ‹æˆ¿ä»·ã€é”€å”®é¢\n\n\næ•ˆåº”ä¼°è®¡\næ§åˆ¶æ··æ‚åä¼°è®¡æš´éœ²æ•ˆåº”\n\n\nå˜é‡ç­›é€‰\nè¯†åˆ«é‡è¦é¢„æµ‹å› å­\n\n\nè¶‹åŠ¿åˆ†æ\nå®šé‡è¯„ä¼°å‰‚é‡-æ•ˆåº”å…³ç³»\n\n\n\n\n\n\n\\[Y = \\beta_0 + \\beta_1 X_1 + \\beta_2 X_2 + \\cdots + \\beta_p X_p + \\epsilon\\]\nå…¶ä¸­ï¼š - \\(\\beta_0\\)ï¼šæˆªè· - \\(\\beta_i\\)ï¼šç¬¬ i ä¸ªé¢„æµ‹å˜é‡çš„å›å½’ç³»æ•° - \\(\\epsilon \\sim N(0, \\sigma^2)\\)ï¼šéšæœºè¯¯å·®\n\n\n\n\\(\\beta_i\\) è¡¨ç¤ºï¼šåœ¨æ§åˆ¶å…¶ä»–å˜é‡ä¸å˜çš„æƒ…å†µä¸‹ï¼Œ\\(X_i\\) æ¯å¢åŠ  1 ä¸ªå•ä½ï¼ŒY çš„å¹³å‡å˜åŒ–é‡ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "å¤šå…ƒçº¿æ€§å›å½’"
    ]
  },
  {
    "objectID": "1021-linear-regression.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "href": "1021-linear-regression.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "title": "å¤šå…ƒçº¿æ€§å›å½’å®Œå…¨æŒ‡å—",
    "section": "R åŒ…å®‰è£…ä¸åŠ è½½",
    "text": "R åŒ…å®‰è£…ä¸åŠ è½½\n\n# æ ¸å¿ƒåŒ…\nlibrary(tidyverse) # æ•°æ®å¤„ç†\nlibrary(broom) # æ¨¡å‹æ•´ç†\nlibrary(gtsummary) # ç»“æœè¡¨æ ¼\nlibrary(performance) # æ¨¡å‹è¯Šæ–­\nlibrary(see) # å¯è§†åŒ–æ”¯æŒ\nlibrary(car) # VIF æ£€éªŒ\nlibrary(lmtest) # è¯Šæ–­æ£€éªŒ\nlibrary(sandwich) # ç¨³å¥æ ‡å‡†è¯¯\nlibrary(interactions) # äº¤äº’æ•ˆåº”å¯è§†åŒ–",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "å¤šå…ƒçº¿æ€§å›å½’"
    ]
  },
  {
    "objectID": "1021-linear-regression.html#æ•°æ®å‡†å¤‡",
    "href": "1021-linear-regression.html#æ•°æ®å‡†å¤‡",
    "title": "å¤šå…ƒçº¿æ€§å›å½’å®Œå…¨æŒ‡å—",
    "section": "æ•°æ®å‡†å¤‡",
    "text": "æ•°æ®å‡†å¤‡\nä½¿ç”¨æ¨¡æ‹Ÿçš„å¥åº·æ•°æ®é›†ï¼š\n\n# æ¨¡æ‹Ÿæ•°æ®ï¼šæ”¶ç¼©å‹å½±å“å› ç´ \nset.seed(2024)\nn &lt;- 500\n\nbp_data &lt;- tibble(\n  id = 1:n,\n  age = round(runif(n, 25, 75)),\n  sex = factor(sample(c(\"ç”·\", \"å¥³\"), n, replace = TRUE, prob = c(0.48, 0.52))),\n  bmi = round(rnorm(n, 25, 4), 1),\n  smoking = factor(sample(c(\"ä»ä¸\", \"æ›¾ç»\", \"ç°åœ¨\"), n,\n    replace = TRUE,\n    prob = c(0.45, 0.30, 0.25)\n  )),\n  exercise = round(pmax(0, rnorm(n, 150, 60))), # æ¯å‘¨è¿åŠ¨åˆ†é’Ÿæ•°\n  sodium_intake = round(rnorm(n, 2300, 500)), # æ¯æ—¥é’ æ‘„å…¥ (mg)\n  alcohol = round(pmax(0, rnorm(n, 10, 8))) # æ¯å‘¨é…’ç²¾æ‘„å…¥ (g)\n) |&gt;\n  mutate(\n    # ç”Ÿæˆæ”¶ç¼©å‹ï¼ˆå—å¤šå› ç´ å½±å“ï¼‰\n    sbp = 90 +\n      0.5 * age +\n      3 * (sex == \"ç”·\") +\n      1.2 * bmi +\n      3 * (smoking == \"æ›¾ç»\") +\n      8 * (smoking == \"ç°åœ¨\") +\n      -0.03 * exercise +\n      0.005 * sodium_intake +\n      0.2 * alcohol +\n      rnorm(n, 0, 10)\n  ) |&gt;\n  mutate(sbp = round(sbp))\n\n# æŸ¥çœ‹æ•°æ®\nglimpse(bp_data)\n\nRows: 500\nColumns: 9\n$ id            &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 1â€¦\n$ age           &lt;dbl&gt; 67, 41, 59, 60, 48, 60, 46, 40, 69, 31, 70, 73, 60, 51, â€¦\n$ sex           &lt;fct&gt; ç”·, å¥³, ç”·, å¥³, ç”·, å¥³, å¥³, å¥³, ç”·, ç”·, å¥³, å¥³, ç”·, ç”·, å¥³, å¥³, ç”·, å¥³, å¥³,â€¦\n$ bmi           &lt;dbl&gt; 28.1, 22.1, 28.2, 25.1, 33.9, 21.7, 16.6, 32.1, 24.7, 20â€¦\n$ smoking       &lt;fct&gt; æ›¾ç», ç°åœ¨, ä»ä¸, æ›¾ç», ä»ä¸, æ›¾ç», ä»ä¸, ä»ä¸, ä»ä¸, æ›¾ç», ä»ä¸, ä»ä¸, ä»ä¸, ç°åœ¨, â€¦\n$ exercise      &lt;dbl&gt; 178, 214, 17, 145, 91, 144, 223, 137, 161, 132, 80, 109,â€¦\n$ sodium_intake &lt;dbl&gt; 2436, 2216, 1862, 2072, 2261, 2612, 1845, 2057, 2088, 24â€¦\n$ alcohol       &lt;dbl&gt; 15, 23, 11, 19, 3, 9, 4, 17, 4, 10, 13, 16, 10, 5, 0, 5,â€¦\n$ sbp           &lt;dbl&gt; 164, 143, 165, 167, 136, 159, 130, 166, 151, 156, 179, 1â€¦\n\n# ç»“å±€å˜é‡åˆ†å¸ƒ\nsummary(bp_data$sbp)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n    119     148     157     158     167     200 \n\n\n\næ¢ç´¢æ€§åˆ†æ\n\n# è¿ç»­å˜é‡ä¸ç»“å±€çš„æ•£ç‚¹å›¾\nbp_data |&gt;\n  select(sbp, age, bmi, exercise, sodium_intake, alcohol) |&gt;\n  pivot_longer(-sbp, names_to = \"variable\", values_to = \"value\") |&gt;\n  ggplot(aes(x = value, y = sbp)) +\n  geom_point(alpha = 0.3, color = \"#4f46e5\") +\n  geom_smooth(method = \"lm\", color = \"#ef4444\") +\n  facet_wrap(~variable, scales = \"free_x\", ncol = 3) +\n  labs(\n    title = \"æ”¶ç¼©å‹ä¸å„é¢„æµ‹å˜é‡çš„å…³ç³»\",\n    x = \"é¢„æµ‹å˜é‡å€¼\",\n    y = \"æ”¶ç¼©å‹ (mmHg)\"\n  ) +\n  theme_minimal(base_size = 11)\n\n\n\n\n\n\n\n\n\n# ç›¸å…³çŸ©é˜µ\nbp_data |&gt;\n  select(sbp, age, bmi, exercise, sodium_intake, alcohol) |&gt;\n  cor() |&gt;\n  round(2)\n\n                sbp   age   bmi exercise sodium_intake alcohol\nsbp            1.00  0.52  0.34    -0.11          0.12    0.08\nage            0.52  1.00  0.03    -0.07         -0.01   -0.02\nbmi            0.34  0.03  1.00     0.03         -0.05   -0.04\nexercise      -0.11 -0.07  0.03     1.00         -0.02    0.03\nsodium_intake  0.12 -0.01 -0.05    -0.02          1.00    0.03\nalcohol        0.08 -0.02 -0.04     0.03          0.03    1.00",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "å¤šå…ƒçº¿æ€§å›å½’"
    ]
  },
  {
    "objectID": "1021-linear-regression.html#æ¨¡å‹æ„å»º",
    "href": "1021-linear-regression.html#æ¨¡å‹æ„å»º",
    "title": "å¤šå…ƒçº¿æ€§å›å½’å®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹æ„å»º",
    "text": "æ¨¡å‹æ„å»º\n\nç®€å•çº¿æ€§å›å½’\n\n# å•å˜é‡ï¼šå¹´é¾„ vs æ”¶ç¼©å‹\nmodel_simple &lt;- lm(sbp ~ age, data = bp_data)\nsummary(model_simple)\n\n\nCall:\nlm(formula = sbp ~ age, data = bp_data)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-32.926  -7.967  -0.219   8.557  32.628 \n\nCoefficients:\n             Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 133.58448    1.88853   70.73   &lt;2e-16 ***\nage           0.48267    0.03579   13.49   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 11.86 on 498 degrees of freedom\nMultiple R-squared:  0.2675,    Adjusted R-squared:  0.2661 \nF-statistic: 181.9 on 1 and 498 DF,  p-value: &lt; 2.2e-16\n\n\n\n# å¯è§†åŒ–ç®€å•å›å½’\nggplot(bp_data, aes(x = age, y = sbp)) +\n  geom_point(alpha = 0.4, color = \"#4f46e5\") +\n  geom_smooth(method = \"lm\", color = \"#ef4444\", fill = \"#ef4444\", alpha = 0.2) +\n  labs(\n    title = \"å¹´é¾„ä¸æ”¶ç¼©å‹çš„çº¿æ€§å…³ç³»\",\n    x = \"å¹´é¾„ (å²)\",\n    y = \"æ”¶ç¼©å‹ (mmHg)\"\n  ) +\n  theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\n\n\nå¤šå…ƒçº¿æ€§å›å½’\n\n# å¤šå…ƒæ¨¡å‹\nmodel_full &lt;- lm(\n  sbp ~ age + sex + bmi + smoking + exercise + sodium_intake + alcohol,\n  data = bp_data\n)\n\nsummary(model_full)\n\n\nCall:\nlm(formula = sbp ~ age + sex + bmi + smoking + exercise + sodium_intake + \n    alcohol, data = bp_data)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-32.920  -7.322   0.298   7.201  30.571 \n\nCoefficients:\n                Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)    1.016e+02  4.389e+00  23.136  &lt; 2e-16 ***\nage            4.592e-01  3.115e-02  14.744  &lt; 2e-16 ***\nsexå¥³         -2.908e+00  9.187e-01  -3.165 0.001646 ** \nbmi            1.140e+00  1.161e-01   9.822  &lt; 2e-16 ***\nsmokingä»ä¸   -3.040e+00  1.073e+00  -2.833 0.004795 ** \nsmokingç°åœ¨    4.189e+00  1.256e+00   3.336 0.000915 ***\nexercise      -2.348e-02  7.794e-03  -3.013 0.002723 ** \nsodium_intake  3.614e-03  9.488e-04   3.809 0.000157 ***\nalcohol        1.899e-01  6.473e-02   2.933 0.003509 ** \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 10.24 on 491 degrees of freedom\nMultiple R-squared:  0.4613,    Adjusted R-squared:  0.4526 \nF-statistic: 52.56 on 8 and 491 DF,  p-value: &lt; 2.2e-16\n\n\n\n\næ•´æ´è¾“å‡º\n\n# ä½¿ç”¨ gtsummary ç”Ÿæˆä¸“ä¸šè¡¨æ ¼\nmodel_full |&gt;\n  tbl_regression(\n    label = list(\n      age ~ \"å¹´é¾„ (æ¯å¢åŠ 1å²)\",\n      sex ~ \"æ€§åˆ«\",\n      bmi ~ \"BMI (æ¯å¢åŠ 1)\",\n      smoking ~ \"å¸çƒŸçŠ¶æ€\",\n      exercise ~ \"æ¯å‘¨è¿åŠ¨ (æ¯å¢åŠ 1åˆ†é’Ÿ)\",\n      sodium_intake ~ \"é’ æ‘„å…¥ (æ¯å¢åŠ 1mg/å¤©)\",\n      alcohol ~ \"é…’ç²¾æ‘„å…¥ (æ¯å¢åŠ 1g/å‘¨)\"\n    )\n  ) |&gt;\n  add_global_p() |&gt;\n  add_glance_table(include = c(r.squared, adj.r.squared, AIC, nobs)) |&gt;\n  bold_p() |&gt;\n  modify_header(label = \"**å˜é‡**\") |&gt;\n  modify_caption(\"**è¡¨. å¤šå…ƒçº¿æ€§å›å½’åˆ†æç»“æœ**\")\n\n\n\n\n\nè¡¨. å¤šå…ƒçº¿æ€§å›å½’åˆ†æç»“æœ\n\n\n\n\n\n\n\n\nå˜é‡\nBeta\n95% CI\np-value\n\n\n\n\nå¹´é¾„ (æ¯å¢åŠ 1å²)\n0.46\n0.40, 0.52\n&lt;0.001\n\n\næ€§åˆ«\n\n\n\n\n0.002\n\n\nÂ Â Â Â ç”·\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â å¥³\n-2.9\n-4.7, -1.1\n\n\n\n\nBMI (æ¯å¢åŠ 1)\n1.1\n0.91, 1.4\n&lt;0.001\n\n\nå¸çƒŸçŠ¶æ€\n\n\n\n\n&lt;0.001\n\n\nÂ Â Â Â æ›¾ç»\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â ä»ä¸\n-3.0\n-5.1, -0.93\n\n\n\n\nÂ Â Â Â ç°åœ¨\n4.2\n1.7, 6.7\n\n\n\n\næ¯å‘¨è¿åŠ¨ (æ¯å¢åŠ 1åˆ†é’Ÿ)\n-0.02\n-0.04, -0.01\n0.003\n\n\né’ æ‘„å…¥ (æ¯å¢åŠ 1mg/å¤©)\n0.00\n0.00, 0.01\n&lt;0.001\n\n\né…’ç²¾æ‘„å…¥ (æ¯å¢åŠ 1g/å‘¨)\n0.19\n0.06, 0.32\n0.004\n\n\nRÂ²\n0.461\n\n\n\n\n\n\nAdjusted RÂ²\n0.453\n\n\n\n\n\n\nAIC\n3,756\n\n\n\n\n\n\nNo. Obs.\n500\n\n\n\n\n\n\n\nAbbreviation: CI = Confidence Interval",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "å¤šå…ƒçº¿æ€§å›å½’"
    ]
  },
  {
    "objectID": "1021-linear-regression.html#æ¨¡å‹å‡è®¾æ£€éªŒ",
    "href": "1021-linear-regression.html#æ¨¡å‹å‡è®¾æ£€éªŒ",
    "title": "å¤šå…ƒçº¿æ€§å›å½’å®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹å‡è®¾æ£€éªŒ",
    "text": "æ¨¡å‹å‡è®¾æ£€éªŒ\nçº¿æ€§å›å½’æœ‰å››ä¸ªæ ¸å¿ƒå‡è®¾ï¼ˆLINEï¼‰ï¼š\n\n\n\nå‡è®¾\næ£€éªŒæ–¹æ³•\n\n\n\n\nLinearityï¼ˆçº¿æ€§ï¼‰\næ®‹å·® vs æ‹Ÿåˆå€¼å›¾\n\n\nIndependenceï¼ˆç‹¬ç«‹ï¼‰\nDurbin-Watson æ£€éªŒ\n\n\nNormalityï¼ˆæ­£æ€æ€§ï¼‰\nQ-Q å›¾ã€Shapiro æ£€éªŒ\n\n\nEqual varianceï¼ˆæ–¹å·®é½æ€§ï¼‰\næ®‹å·®å›¾ã€Breusch-Pagan æ£€éªŒ\n\n\n\n\nç»¼åˆè¯Šæ–­\n\n# ä½¿ç”¨ performance åŒ…ä¸€é”®è¯Šæ–­\ncheck_model(model_full)\n\n\n\n\n\n\n\n\n\n\nçº¿æ€§å…³ç³»æ£€éªŒ\n\n# æ®‹å·® vs æ‹Ÿåˆå€¼\nbp_data$fitted &lt;- fitted(model_full)\nbp_data$residuals &lt;- residuals(model_full)\n\nggplot(bp_data, aes(x = fitted, y = residuals)) +\n  geom_point(alpha = 0.4, color = \"#4f46e5\") +\n  geom_hline(yintercept = 0, linetype = \"dashed\", color = \"red\") +\n  geom_smooth(method = \"loess\", color = \"#10b981\", se = FALSE) +\n  labs(\n    title = \"æ®‹å·® vs æ‹Ÿåˆå€¼\",\n    subtitle = \"æ£€éªŒçº¿æ€§å‡è®¾å’Œæ–¹å·®é½æ€§\",\n    x = \"æ‹Ÿåˆå€¼\",\n    y = \"æ®‹å·®\"\n  ) +\n  theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\n\n\næ­£æ€æ€§æ£€éªŒ\n\n# Q-Q å›¾\nggplot(bp_data, aes(sample = residuals)) +\n  stat_qq(color = \"#4f46e5\", alpha = 0.6) +\n  stat_qq_line(color = \"red\") +\n  labs(\n    title = \"æ®‹å·®çš„ Q-Q å›¾\",\n    subtitle = \"æ£€éªŒæ­£æ€æ€§å‡è®¾\",\n    x = \"ç†è®ºåˆ†ä½æ•°\",\n    y = \"æ ·æœ¬åˆ†ä½æ•°\"\n  ) +\n  theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\n\n# Shapiro-Wilk æ£€éªŒï¼ˆæ ·æœ¬é‡ &lt; 5000ï¼‰\nif (nrow(bp_data) &lt;= 5000) {\n  shapiro.test(residuals(model_full))\n}\n\n\n    Shapiro-Wilk normality test\n\ndata:  residuals(model_full)\nW = 0.99774, p-value = 0.7452\n\n\n\n\næ–¹å·®é½æ€§æ£€éªŒ\n\n# Breusch-Pagan æ£€éªŒ\nbptest(model_full)\n\n\n    studentized Breusch-Pagan test\n\ndata:  model_full\nBP = 6.9507, df = 8, p-value = 0.542\n\n# p &lt; 0.05 è¡¨ç¤ºå­˜åœ¨å¼‚æ–¹å·®\n\n\n\nç‹¬ç«‹æ€§æ£€éªŒ\n\n# Durbin-Watson æ£€éªŒï¼ˆé’ˆå¯¹æ—¶åºæ•°æ®ï¼‰\ndwtest(model_full)\n\n\n    Durbin-Watson test\n\ndata:  model_full\nDW = 1.9469, p-value = 0.278\nalternative hypothesis: true autocorrelation is greater than 0\n\n# p &lt; 0.05 è¡¨ç¤ºå­˜åœ¨è‡ªç›¸å…³",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "å¤šå…ƒçº¿æ€§å›å½’"
    ]
  },
  {
    "objectID": "1021-linear-regression.html#å¤šé‡å…±çº¿æ€§æ£€éªŒ",
    "href": "1021-linear-regression.html#å¤šé‡å…±çº¿æ€§æ£€éªŒ",
    "title": "å¤šå…ƒçº¿æ€§å›å½’å®Œå…¨æŒ‡å—",
    "section": "å¤šé‡å…±çº¿æ€§æ£€éªŒ",
    "text": "å¤šé‡å…±çº¿æ€§æ£€éªŒ\nå¤šé‡å…±çº¿æ€§ä¼šå¯¼è‡´ç³»æ•°ä¼°è®¡ä¸ç¨³å®šã€‚\n\n# æ–¹å·®è†¨èƒ€å› å­ (VIF)\nvif_values &lt;- vif(model_full)\nvif_values\n\n                  GVIF Df GVIF^(1/(2*Df))\nage           1.015400  1        1.007671\nsex           1.005199  1        1.002596\nbmi           1.009652  1        1.004814\nsmoking       1.027711  2        1.006857\nexercise      1.013168  1        1.006562\nsodium_intake 1.008192  1        1.004088\nalcohol       1.010320  1        1.005147\n\n# VIF &gt; 5 æç¤ºå­˜åœ¨å…±çº¿æ€§é—®é¢˜\n# VIF &gt; 10 è¡¨ç¤ºä¸¥é‡å…±çº¿æ€§\n\n\n# å¯è§†åŒ– VIFï¼ˆGVIF é’ˆå¯¹åˆ†ç±»å˜é‡ï¼‰\n# vif() å¯¹äºåˆ†ç±»å˜é‡è¿”å› GVIFï¼Œéœ€è¦ç‰¹åˆ«å¤„ç†\nvif_result &lt;- vif(model_full)\n\n# è½¬æ¢ä¸ºæ•°æ®æ¡†æ ¼å¼\nif (is.matrix(vif_result)) {\n  # å¯¹äºå«æœ‰åˆ†ç±»å˜é‡çš„æ¨¡å‹ï¼Œä½¿ç”¨ GVIF^(1/(2*Df))\n  vif_df &lt;- data.frame(\n    variable = rownames(vif_result),\n    vif = vif_result[, \"GVIF^(1/(2*Df))\"]\n  )\n} else {\n  vif_df &lt;- data.frame(\n    variable = names(vif_result),\n    vif = as.numeric(vif_result)\n  )\n}\n\nggplot(vif_df, aes(x = reorder(variable, vif), y = vif)) +\n  geom_col(fill = \"#4f46e5\", alpha = 0.8) +\n  geom_hline(yintercept = sqrt(5), linetype = \"dashed\", color = \"red\") +\n  coord_flip() +\n  labs(\n    title = \"å¹¿ä¹‰æ–¹å·®è†¨èƒ€å› å­ (GVIF)\",\n    subtitle = \"çº¢çº¿: é˜ˆå€¼ â‰ˆ 2.24 (å¯¹åº” VIF=5)\",\n    x = \"å˜é‡\",\n    y = \"GVIF^(1/2Df)\"\n  ) +\n  theme_minimal(base_size = 12)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "å¤šå…ƒçº¿æ€§å›å½’"
    ]
  },
  {
    "objectID": "1021-linear-regression.html#å¼‚å¸¸å€¼ä¸å½±å“ç‚¹æ£€æµ‹",
    "href": "1021-linear-regression.html#å¼‚å¸¸å€¼ä¸å½±å“ç‚¹æ£€æµ‹",
    "title": "å¤šå…ƒçº¿æ€§å›å½’å®Œå…¨æŒ‡å—",
    "section": "å¼‚å¸¸å€¼ä¸å½±å“ç‚¹æ£€æµ‹",
    "text": "å¼‚å¸¸å€¼ä¸å½±å“ç‚¹æ£€æµ‹\n\nCookâ€™s è·ç¦»\n\n# è®¡ç®— Cook's è·ç¦»\nbp_data$cooks_d &lt;- cooks.distance(model_full)\n\n# å¯è§†åŒ–\nggplot(bp_data, aes(x = seq_along(cooks_d), y = cooks_d)) +\n  geom_point(alpha = 0.5, color = \"#4f46e5\") +\n  geom_hline(yintercept = 4 / nrow(bp_data), linetype = \"dashed\", color = \"red\") +\n  labs(\n    title = \"Cook's è·ç¦»\",\n    subtitle = paste0(\"çº¢çº¿: é˜ˆå€¼ = \", round(4 / nrow(bp_data), 4)),\n    x = \"è§‚æµ‹åºå·\",\n    y = \"Cook's D\"\n  ) +\n  theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\n\n\næ æ†å€¼\n\n# æ æ†å€¼\nbp_data$leverage &lt;- hatvalues(model_full)\np &lt;- length(coef(model_full))\n\n# é«˜æ æ†ç‚¹\nhigh_leverage &lt;- bp_data |&gt;\n  filter(leverage &gt; 2 * p / nrow(bp_data))\n\ncat(\"é«˜æ æ†ç‚¹æ•°é‡:\", nrow(high_leverage), \"\\n\")\n\né«˜æ æ†ç‚¹æ•°é‡: 4 \n\n\n\n\næ ‡å‡†åŒ–æ®‹å·®\n\n# æ ‡å‡†åŒ–æ®‹å·®\nbp_data$std_resid &lt;- rstandard(model_full)\n\n# å¼‚å¸¸å€¼ï¼ˆ|æ ‡å‡†åŒ–æ®‹å·®| &gt; 3ï¼‰\noutliers &lt;- bp_data |&gt;\n  filter(abs(std_resid) &gt; 3)\n\ncat(\"å¼‚å¸¸å€¼æ•°é‡:\", nrow(outliers), \"\\n\")\n\nå¼‚å¸¸å€¼æ•°é‡: 2",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "å¤šå…ƒçº¿æ€§å›å½’"
    ]
  },
  {
    "objectID": "1021-linear-regression.html#å¤„ç†å¼‚å¸¸å‡è®¾",
    "href": "1021-linear-regression.html#å¤„ç†å¼‚å¸¸å‡è®¾",
    "title": "å¤šå…ƒçº¿æ€§å›å½’å®Œå…¨æŒ‡å—",
    "section": "å¤„ç†å¼‚å¸¸å‡è®¾",
    "text": "å¤„ç†å¼‚å¸¸å‡è®¾\n\nç¨³å¥æ ‡å‡†è¯¯\nå½“å­˜åœ¨å¼‚æ–¹å·®æ—¶ï¼Œä½¿ç”¨ç¨³å¥æ ‡å‡†è¯¯ï¼š\n\n# HC3 ç¨³å¥æ ‡å‡†è¯¯ï¼ˆæ¨èï¼‰\ncoeftest(model_full, vcov = vcovHC(model_full, type = \"HC3\"))\n\n\nt test of coefficients:\n\n                 Estimate  Std. Error t value  Pr(&gt;|t|)    \n(Intercept)    1.0155e+02  4.6311e+00 21.9283 &lt; 2.2e-16 ***\nage            4.5920e-01  3.1113e-02 14.7589 &lt; 2.2e-16 ***\nsexå¥³         -2.9079e+00  9.2757e-01 -3.1350 0.0018215 ** \nbmi            1.1402e+00  1.1791e-01  9.6699 &lt; 2.2e-16 ***\nsmokingä»ä¸   -3.0402e+00  1.0941e+00 -2.7786 0.0056683 ** \nsmokingç°åœ¨    4.1893e+00  1.2760e+00  3.2830 0.0011003 ** \nexercise      -2.3480e-02  8.5328e-03 -2.7517 0.0061478 ** \nsodium_intake  3.6136e-03  9.4868e-04  3.8091 0.0001571 ***\nalcohol        1.8989e-01  6.7544e-02  2.8113 0.0051315 ** \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\n\n\nå˜é‡å˜æ¢\n\n# Box-Cox å˜æ¢\nlibrary(MASS)\n\n# æ‰¾æœ€ä¼˜ lambda\nboxcox_result &lt;- boxcox(model_full, lambda = seq(-2, 2, by = 0.1))\n\n\n\n\n\n\n\noptimal_lambda &lt;- boxcox_result$x[which.max(boxcox_result$y)]\ncat(\"æœ€ä¼˜ lambda:\", optimal_lambda, \"\\n\")\n\næœ€ä¼˜ lambda: 0.7070707 \n\n# å¸¸è§å˜æ¢\n# lambda = 0: å¯¹æ•°å˜æ¢\n# lambda = 0.5: å¹³æ–¹æ ¹å˜æ¢\n# lambda = -1: å€’æ•°å˜æ¢\n\n\n\nåŠ æƒæœ€å°äºŒä¹˜\n\n# å½“å¼‚æ–¹å·®æ¨¡å¼å·²çŸ¥æ—¶\n# ä¾‹å¦‚ï¼šæ–¹å·®ä¸æŸå˜é‡æˆæ¯”ä¾‹\nweights &lt;- 1 / bp_data$age # ç¤ºä¾‹æƒé‡\nmodel_wls &lt;- lm(sbp ~ age + sex + bmi, data = bp_data, weights = weights)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "å¤šå…ƒçº¿æ€§å›å½’"
    ]
  },
  {
    "objectID": "1021-linear-regression.html#äº¤äº’ä½œç”¨åˆ†æ",
    "href": "1021-linear-regression.html#äº¤äº’ä½œç”¨åˆ†æ",
    "title": "å¤šå…ƒçº¿æ€§å›å½’å®Œå…¨æŒ‡å—",
    "section": "äº¤äº’ä½œç”¨åˆ†æ",
    "text": "äº¤äº’ä½œç”¨åˆ†æ\n\næ£€éªŒäº¤äº’æ•ˆåº”\n\n# æ·»åŠ äº¤äº’é¡¹\nmodel_interact &lt;- lm(\n  sbp ~ age * sex + bmi + smoking + exercise,\n  data = bp_data\n)\n\nsummary(model_interact)\n\n\nCall:\nlm(formula = sbp ~ age * sex + bmi + smoking + exercise, data = bp_data)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-31.609  -7.411   0.084   6.715  34.174 \n\nCoefficients:\n              Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 112.455451   4.104454  27.398  &lt; 2e-16 ***\nage           0.463709   0.046126  10.053  &lt; 2e-16 ***\nsexå¥³        -2.193784   3.354696  -0.654 0.513453    \nbmi           1.101767   0.118479   9.299  &lt; 2e-16 ***\nsmokingä»ä¸  -2.930479   1.095329  -2.675 0.007712 ** \nsmokingç°åœ¨   4.648259   1.280288   3.631 0.000312 ***\nexercise     -0.023534   0.007993  -2.944 0.003388 ** \nage:sexå¥³    -0.012813   0.063579  -0.202 0.840371    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 10.48 on 492 degrees of freedom\nMultiple R-squared:  0.4353,    Adjusted R-squared:  0.4272 \nF-statistic: 54.17 on 7 and 492 DF,  p-value: &lt; 2.2e-16\n\n\n\n# æ¨¡å‹æ¯”è¾ƒ\nanova(model_full, model_interact)\n\nAnalysis of Variance Table\n\nModel 1: sbp ~ age + sex + bmi + smoking + exercise + sodium_intake + \n    alcohol\nModel 2: sbp ~ age * sex + bmi + smoking + exercise\n  Res.Df   RSS Df Sum of Sq      F    Pr(&gt;F)    \n1    491 51517                                  \n2    492 54010 -1   -2493.1 23.761 1.475e-06 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\n\n\nå¯è§†åŒ–äº¤äº’æ•ˆåº”\n\n# ä½¿ç”¨ interactions åŒ…\ninteract_plot(\n  model_interact,\n  pred = age,\n  modx = sex,\n  interval = TRUE,\n  plot.points = TRUE,\n  point.alpha = 0.2\n) +\n  labs(\n    title = \"å¹´é¾„ä¸æ€§åˆ«çš„äº¤äº’æ•ˆåº”\",\n    x = \"å¹´é¾„\",\n    y = \"é¢„æµ‹æ”¶ç¼©å‹ (mmHg)\"\n  ) +\n  theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\n\n# ç®€å•æ–œç‡åˆ†æ\nsim_slopes(model_interact, pred = age, modx = sex)\n\nSIMPLE SLOPES ANALYSIS\n\nSlope of age when sex = ç”·: \n\n  Est.   S.E.   t val.      p\n------ ------ -------- ------\n  0.46   0.05    10.05   0.00\n\nSlope of age when sex = å¥³: \n\n  Est.   S.E.   t val.      p\n------ ------ -------- ------\n  0.45   0.04    10.27   0.00",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "å¤šå…ƒçº¿æ€§å›å½’"
    ]
  },
  {
    "objectID": "1021-linear-regression.html#éçº¿æ€§å…³ç³»å¤„ç†",
    "href": "1021-linear-regression.html#éçº¿æ€§å…³ç³»å¤„ç†",
    "title": "å¤šå…ƒçº¿æ€§å›å½’å®Œå…¨æŒ‡å—",
    "section": "éçº¿æ€§å…³ç³»å¤„ç†",
    "text": "éçº¿æ€§å…³ç³»å¤„ç†\n\nå¤šé¡¹å¼å›å½’\n\n# äºŒæ¬¡é¡¹\nmodel_poly &lt;- lm(sbp ~ age + I(age^2) + sex + bmi + smoking, data = bp_data)\nsummary(model_poly)\n\n\nCall:\nlm(formula = sbp ~ age + I(age^2) + sex + bmi + smoking, data = bp_data)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-30.263  -7.277   0.226   6.874  34.242 \n\nCoefficients:\n              Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 117.626624   6.523483  18.031  &lt; 2e-16 ***\nage           0.080486   0.249815   0.322 0.747452    \nI(age^2)      0.003828   0.002477   1.546 0.122818    \nsexå¥³        -2.884773   0.944827  -3.053 0.002386 ** \nbmi           1.104088   0.119349   9.251  &lt; 2e-16 ***\nsmokingä»ä¸  -2.924807   1.102548  -2.653 0.008241 ** \nsmokingç°åœ¨   4.399016   1.286443   3.420 0.000679 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 10.54 on 493 degrees of freedom\nMultiple R-squared:  0.4279,    Adjusted R-squared:  0.4209 \nF-statistic: 61.45 on 6 and 493 DF,  p-value: &lt; 2.2e-16\n\n# æ£€éªŒéçº¿æ€§é¡¹æ˜¯å¦æ˜¾è‘—\nanova(lm(sbp ~ age + sex + bmi + smoking, data = bp_data), model_poly)\n\nAnalysis of Variance Table\n\nModel 1: sbp ~ age + sex + bmi + smoking\nModel 2: sbp ~ age + I(age^2) + sex + bmi + smoking\n  Res.Df   RSS Df Sum of Sq      F Pr(&gt;F)\n1    494 54983                           \n2    493 54718  1    265.18 2.3892 0.1228\n\n\n\n\nåˆ†æ®µçº¿æ€§å›å½’\n\n# åˆ†æ®µå›å½’ï¼ˆå‡è®¾ 50 å²ä¸ºæ‹ç‚¹ï¼‰\nbp_data &lt;- bp_data |&gt;\n  mutate(\n    age_under50 = pmin(age, 50),\n    age_over50 = pmax(age - 50, 0)\n  )\n\nmodel_piecewise &lt;- lm(sbp ~ age_under50 + age_over50 + sex + bmi, data = bp_data)\nsummary(model_piecewise)\n\n\nCall:\nlm(formula = sbp ~ age_under50 + age_over50 + sex + bmi, data = bp_data)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-31.282  -7.424   0.033   6.847  35.994 \n\nCoefficients:\n             Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 111.28402    4.25153  26.175  &lt; 2e-16 ***\nage_under50   0.37026    0.07490   4.943 1.05e-06 ***\nage_over50    0.56924    0.07447   7.643 1.11e-13 ***\nsexå¥³        -2.65847    0.97658  -2.722  0.00671 ** \nbmi           1.12761    0.12321   9.152  &lt; 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 10.9 on 495 degrees of freedom\nMultiple R-squared:  0.3848,    Adjusted R-squared:  0.3799 \nF-statistic: 77.42 on 4 and 495 DF,  p-value: &lt; 2.2e-16",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "å¤šå…ƒçº¿æ€§å›å½’"
    ]
  },
  {
    "objectID": "1021-linear-regression.html#æ¨¡å‹é€‰æ‹©",
    "href": "1021-linear-regression.html#æ¨¡å‹é€‰æ‹©",
    "title": "å¤šå…ƒçº¿æ€§å›å½’å®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹é€‰æ‹©",
    "text": "æ¨¡å‹é€‰æ‹©\n\né€æ­¥å›å½’\n\n# å‘åé€æ­¥å›å½’ï¼ˆåŸºäº AICï¼‰\nmodel_step &lt;- step(model_full, direction = \"backward\", trace = 0)\nsummary(model_step)\n\n\nCall:\nlm(formula = sbp ~ age + sex + bmi + smoking + exercise + sodium_intake + \n    alcohol, data = bp_data)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-32.920  -7.322   0.298   7.201  30.571 \n\nCoefficients:\n                Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)    1.016e+02  4.389e+00  23.136  &lt; 2e-16 ***\nage            4.592e-01  3.115e-02  14.744  &lt; 2e-16 ***\nsexå¥³         -2.908e+00  9.187e-01  -3.165 0.001646 ** \nbmi            1.140e+00  1.161e-01   9.822  &lt; 2e-16 ***\nsmokingä»ä¸   -3.040e+00  1.073e+00  -2.833 0.004795 ** \nsmokingç°åœ¨    4.189e+00  1.256e+00   3.336 0.000915 ***\nexercise      -2.348e-02  7.794e-03  -3.013 0.002723 ** \nsodium_intake  3.614e-03  9.488e-04   3.809 0.000157 ***\nalcohol        1.899e-01  6.473e-02   2.933 0.003509 ** \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 10.24 on 491 degrees of freedom\nMultiple R-squared:  0.4613,    Adjusted R-squared:  0.4526 \nF-statistic: 52.56 on 8 and 491 DF,  p-value: &lt; 2.2e-16\n\n\n\n# æ¯”è¾ƒæ¨¡å‹\nAIC(model_full, model_step)\n\n           df      AIC\nmodel_full 10 3756.468\nmodel_step 10 3756.468\n\nBIC(model_full, model_step)\n\n           df      BIC\nmodel_full 10 3798.614\nmodel_step 10 3798.614\n\n\n\n\næ¨¡å‹æ¯”è¾ƒ\n\n# ä½¿ç”¨ performance åŒ…\ncompare_performance(model_full, model_step, rank = TRUE)\n\n# Comparison of Model Performance Indices\n\nName       | Model |    R2 | R2 (adj.) |   RMSE |  Sigma | AIC weights\n----------------------------------------------------------------------\nmodel_full |    lm | 0.461 |     0.453 | 10.151 | 10.243 |       0.500\nmodel_step |    lm | 0.461 |     0.453 | 10.151 | 10.243 |       0.500\n\nName       | AICc weights | BIC weights | Performance-Score\n-----------------------------------------------------------\nmodel_full |        0.500 |       0.500 |                  \nmodel_step |        0.500 |       0.500 |                  \n\n\n\n\nå˜é‡é€‰æ‹©æ–¹æ³•æ¯”è¾ƒ\n\n\n\næ–¹æ³•\nä¼˜ç‚¹\nç¼ºç‚¹\n\n\n\n\nå‘å‰é€‰æ‹©\nè®¡ç®—é‡å°\nå¯èƒ½é—æ¼é‡è¦å˜é‡\n\n\nå‘åæ¶ˆé™¤\nè€ƒè™‘æ‰€æœ‰å˜é‡\nåˆå§‹æ¨¡å‹å¯èƒ½ä¸ç¨³å®š\n\n\nåŒå‘é€æ­¥\nç»¼åˆä¸¤è€…ä¼˜ç‚¹\nå¯èƒ½ä¸ç¨³å®š\n\n\nLASSO\nè‡ªåŠ¨é€‰æ‹©+æ­£åˆ™åŒ–\nç³»æ•°æœ‰å\n\n\næœ€ä¼˜å­é›†\næ‰¾å…¨å±€æœ€ä¼˜\nè®¡ç®—é‡å¤§",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "å¤šå…ƒçº¿æ€§å›å½’"
    ]
  },
  {
    "objectID": "1021-linear-regression.html#é¢„æµ‹ä¸æ¨æ–­",
    "href": "1021-linear-regression.html#é¢„æµ‹ä¸æ¨æ–­",
    "title": "å¤šå…ƒçº¿æ€§å›å½’å®Œå…¨æŒ‡å—",
    "section": "é¢„æµ‹ä¸æ¨æ–­",
    "text": "é¢„æµ‹ä¸æ¨æ–­\n\né¢„æµ‹æ–°æ•°æ®\n\n# æ–°è§‚æµ‹å€¼\nnew_patient &lt;- tibble(\n  age = 55,\n  sex = factor(\"ç”·\", levels = levels(bp_data$sex)),\n  bmi = 27,\n  smoking = factor(\"æ›¾ç»\", levels = levels(bp_data$smoking)),\n  exercise = 120,\n  sodium_intake = 2500,\n  alcohol = 15\n)\n\n# ç‚¹é¢„æµ‹\npredict(model_full, newdata = new_patient)\n\n       1 \n166.6559 \n\n# ç½®ä¿¡åŒºé—´ï¼ˆå‡å€¼ï¼‰\npredict(model_full, newdata = new_patient, interval = \"confidence\")\n\n       fit     lwr      upr\n1 166.6559 164.514 168.7978\n\n# é¢„æµ‹åŒºé—´ï¼ˆä¸ªä½“ï¼‰\npredict(model_full, newdata = new_patient, interval = \"prediction\")\n\n       fit      lwr      upr\n1 166.6559 146.4164 186.8954\n\n\n\n\næ ‡å‡†åŒ–å›å½’ç³»æ•°\n\n# æ ‡å‡†åŒ–ç³»æ•°ï¼ˆÎ²ç³»æ•°ï¼‰\n# æ–¹æ³•1ï¼šæ‰‹åŠ¨æ ‡å‡†åŒ–\nbp_scaled &lt;- bp_data |&gt;\n  mutate(across(where(is.numeric) & !id, scale))\n\nmodel_std &lt;- lm(\n  sbp ~ age + bmi + exercise + sodium_intake + alcohol,\n  data = bp_scaled\n)\n\ntidy(model_std) |&gt;\n  dplyr::filter(term != \"(Intercept)\") |&gt;\n  dplyr::select(term, estimate) |&gt;\n  dplyr::arrange(desc(abs(estimate)))\n\n# A tibble: 5 Ã— 2\n  term          estimate\n  &lt;chr&gt;            &lt;dbl&gt;\n1 age             0.504 \n2 bmi             0.339 \n3 sodium_intake   0.135 \n4 alcohol         0.102 \n5 exercise       -0.0846\n\n\n\n\nè¾¹é™…æ•ˆåº”\n\n# ä½¿ç”¨ marginaleffects åŒ…\nlibrary(marginaleffects)\n\n# å¹³å‡è¾¹é™…æ•ˆåº”\navg_slopes(model_full) |&gt;\n  as.data.frame() |&gt;\n  dplyr::select(term, estimate, std.error, p.value)\n\n           term    estimate    std.error      p.value\n1           age  0.45919790 0.0311456744 3.384975e-49\n2       alcohol  0.18988683 0.0646395461 3.307354e-03\n3           bmi  1.14015742 0.1160774188 9.018172e-23\n4      exercise -0.02347969 0.0077944025 2.592091e-03\n5           sex -2.90793412 0.9187397641 1.550117e-03\n6       smoking -3.04016622 1.0729621586 4.605098e-03\n7       smoking  4.18925856 1.2559039473 8.509961e-04\n8 sodium_intake  0.00361362 0.0009488015 1.397469e-04",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "å¤šå…ƒçº¿æ€§å›å½’"
    ]
  },
  {
    "objectID": "1021-linear-regression.html#ç»“æœå¯è§†åŒ–",
    "href": "1021-linear-regression.html#ç»“æœå¯è§†åŒ–",
    "title": "å¤šå…ƒçº¿æ€§å›å½’å®Œå…¨æŒ‡å—",
    "section": "ç»“æœå¯è§†åŒ–",
    "text": "ç»“æœå¯è§†åŒ–\n\nç³»æ•°å›¾\n\n# æ£®æ—å›¾é£æ ¼çš„ç³»æ•°å¯è§†åŒ–\ncoef_data &lt;- tidy(model_full, conf.int = TRUE) |&gt;\n  filter(term != \"(Intercept)\") |&gt;\n  mutate(\n    significant = p.value &lt; 0.05,\n    term = factor(term, levels = rev(term))\n  )\n\nggplot(coef_data, aes(x = estimate, y = term)) +\n  geom_vline(xintercept = 0, linetype = \"dashed\", color = \"gray50\") +\n  geom_errorbarh(aes(xmin = conf.low, xmax = conf.high, color = significant),\n    height = 0.2, linewidth = 0.8\n  ) +\n  geom_point(aes(color = significant), size = 3) +\n  scale_color_manual(\n    values = c(\"TRUE\" = \"#4f46e5\", \"FALSE\" = \"#9ca3af\"),\n    labels = c(\"TRUE\" = \"æ˜¾è‘—\", \"FALSE\" = \"ä¸æ˜¾è‘—\")\n  ) +\n  labs(\n    title = \"å›å½’ç³»æ•°åŠ95%ç½®ä¿¡åŒºé—´\",\n    x = \"å›å½’ç³»æ•° (Î²)\",\n    y = NULL,\n    color = \"ç»Ÿè®¡æ˜¾è‘—æ€§\"\n  ) +\n  theme_minimal(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, face = \"bold\"),\n    legend.position = \"bottom\"\n  )\n\n\n\n\n\n\n\n\n\n\né¢„æµ‹å€¼ vs å®é™…å€¼\n\nggplot(bp_data, aes(x = fitted, y = sbp)) +\n  geom_point(alpha = 0.4, color = \"#4f46e5\") +\n  geom_abline(slope = 1, intercept = 0, color = \"red\", linetype = \"dashed\") +\n  labs(\n    title = \"é¢„æµ‹å€¼ vs å®é™…å€¼\",\n    x = \"é¢„æµ‹æ”¶ç¼©å‹ (mmHg)\",\n    y = \"å®é™…æ”¶ç¼©å‹ (mmHg)\"\n  ) +\n  theme_minimal(base_size = 12) +\n  coord_equal()",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "å¤šå…ƒçº¿æ€§å›å½’"
    ]
  },
  {
    "objectID": "1021-linear-regression.html#å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "href": "1021-linear-regression.html#å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "title": "å¤šå…ƒçº¿æ€§å›å½’å®Œå…¨æŒ‡å—",
    "section": "å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "text": "å¸¸è§é—®é¢˜ä¸é™·é˜±\n\n1. è§£é‡Šç›¸å…³æ€§ vs å› æœæ€§\n# å›å½’ç³»æ•°æè¿°çš„æ˜¯å…³è”ï¼Œä¸æ˜¯å› æœ\n# å› æœæ¨æ–­éœ€è¦ï¼š\n# - éšæœºå¯¹ç…§è¯•éªŒ\n# - æˆ–ä½¿ç”¨å› æœæ¨æ–­æ–¹æ³•ï¼ˆå¦‚ PSMã€IVã€DiDï¼‰\n\n\n2. ç±»åˆ«å˜é‡ç¼–ç \n\n# R é»˜è®¤ä½¿ç”¨ dummy coding\ncontrasts(bp_data$sex)\n\n   å¥³\nç”·  0\nå¥³  1\n\ncontrasts(bp_data$smoking)\n\n     ä»ä¸ ç°åœ¨\næ›¾ç»    0    0\nä»ä¸    1    0\nç°åœ¨    0    1\n\n# ä¿®æ”¹å‚ç…§ç»„\nbp_data$smoking_relevel &lt;- relevel(bp_data$smoking, ref = \"ç°åœ¨\")\n\n\n\n3. ç¼ºå¤±å€¼å¤„ç†\n\n# é»˜è®¤ï¼šå®Œå…¨æ¡ˆä¾‹åˆ†æ\n# æ¨èï¼šå¤šé‡æ’è¡¥\n# library(mice)\n# imputed_data &lt;- mice(bp_data, m = 5)\n# fit &lt;- with(imputed_data, lm(sbp ~ age + sex + bmi))\n# pooled &lt;- pool(fit)\n\n\n\n4. å¤–æ¨é£é™©\n# ä¸è¦å°†æ¨¡å‹å¤–æ¨åˆ°è¶…å‡ºè®­ç»ƒæ•°æ®èŒƒå›´çš„åŒºåŸŸ\n# ä¾‹å¦‚ï¼šæ¨¡å‹åŸºäº 25-75 å²æ•°æ®ï¼Œä¸åº”é¢„æµ‹ 90 å²",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "å¤šå…ƒçº¿æ€§å›å½’"
    ]
  },
  {
    "objectID": "1021-linear-regression.html#å®Œæ•´åˆ†ææ¨¡æ¿",
    "href": "1021-linear-regression.html#å®Œæ•´åˆ†ææ¨¡æ¿",
    "title": "å¤šå…ƒçº¿æ€§å›å½’å®Œå…¨æŒ‡å—",
    "section": "å®Œæ•´åˆ†ææ¨¡æ¿",
    "text": "å®Œæ•´åˆ†ææ¨¡æ¿\n\n# ========== å¤šå…ƒçº¿æ€§å›å½’å®Œæ•´æµç¨‹ ==========\n\nlibrary(tidyverse)\nlibrary(performance)\nlibrary(car)\nlibrary(gtsummary)\n\n# 1. æ‹Ÿåˆæ¨¡å‹\nmodel &lt;- lm(y ~ x1 + x2 + x3, data = data)\n\n# 2. æŸ¥çœ‹ç»“æœ\nsummary(model)\n\n# 3. æ¨¡å‹è¯Šæ–­\ncheck_model(model) # ç»¼åˆè¯Šæ–­\nvif(model) # å¤šé‡å…±çº¿æ€§\nshapiro.test(residuals(model)) # æ­£æ€æ€§\n\n# 4. ç»“æœè¡¨æ ¼\ntbl_regression(model)\n\n# 5. é¢„æµ‹\npredict(model, newdata = new_data, interval = \"confidence\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "å¤šå…ƒçº¿æ€§å›å½’"
    ]
  },
  {
    "objectID": "1021-linear-regression.html#æ€»ç»“",
    "href": "1021-linear-regression.html#æ€»ç»“",
    "title": "å¤šå…ƒçº¿æ€§å›å½’å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\næ­¥éª¤\nå†…å®¹\nR å‡½æ•°\n\n\n\n\næ¨¡å‹æ‹Ÿåˆ\nä¼°è®¡ç³»æ•°\nlm()\n\n\nè¯Šæ–­æ£€éªŒ\nå‡è®¾æ£€éªŒ\ncheck_model(), vif()\n\n\nå¼‚å¸¸å€¼æ£€æµ‹\nCookâ€™s D, æ æ†å€¼\ncooks.distance(), hatvalues()\n\n\næ¨¡å‹é€‰æ‹©\né€æ­¥å›å½’\nstep()\n\n\nç»“æœå±•ç¤º\nä¸“ä¸šè¡¨æ ¼\ntbl_regression()\n\n\né¢„æµ‹\nç½®ä¿¡/é¢„æµ‹åŒºé—´\npredict(..., interval = )\n\n\n\n\næŠ¥å‘Šçº¿æ€§å›å½’çš„ Checklist\n\næŠ¥å‘Šæ ·æœ¬é‡\næŠ¥å‘Š RÂ² å’Œè°ƒæ•´ RÂ²\næŠ¥å‘Š F ç»Ÿè®¡é‡å’Œ p å€¼\næŠ¥å‘Šå„ç³»æ•°ã€SEã€95% CIã€p å€¼\næ˜ç¡®å‚ç…§ç»„\næŠ¥å‘Š VIFï¼ˆå¤šé‡å…±çº¿æ€§ï¼‰\næä¾›æ®‹å·®è¯Šæ–­å›¾\nå¿…è¦æ—¶ä½¿ç”¨ç¨³å¥æ ‡å‡†è¯¯\n\n\n\næ¨èé˜…è¯»\n\nKutner MH et al.Â Applied Linear Statistical Models (5th ed.)\nFox J. Applied Regression Analysis and Generalized Linear Models\nUCLA ç»Ÿè®¡å’¨è¯¢ï¼šå›å½’åˆ†æ",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "å¤šå…ƒçº¿æ€§å›å½’"
    ]
  },
  {
    "objectID": "1023-mediation.html",
    "href": "1023-mediation.html",
    "title": "ä¸­ä»‹æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "",
    "text": "ä¸­ä»‹æ•ˆåº”ï¼ˆMediation Effectï¼‰ åˆ†æç”¨äºæ¢ç´¢è‡ªå˜é‡ X å¦‚ä½•é€šè¿‡ä¸­ä»‹å˜é‡ M å½±å“å› å˜é‡ Y çš„æœºåˆ¶ã€‚å®ƒå›ç­”çš„æ ¸å¿ƒé—®é¢˜æ˜¯ï¼šâ€œæ•ˆåº”æ˜¯å¦‚ä½•ä¼ é€’çš„ï¼Ÿâ€\n\n\n        a           b\n    X ----â†’ M ----â†’ Y\n        \\         â†—\n         \\-------/\n            c'\n\n\n\nè·¯å¾„\nåç§°\nå«ä¹‰\n\n\n\n\na\nX â†’ M è·¯å¾„\nè‡ªå˜é‡å¯¹ä¸­ä»‹å˜é‡çš„æ•ˆåº”\n\n\nb\nM â†’ Y è·¯å¾„\næ§åˆ¶ X åï¼Œä¸­ä»‹å˜é‡å¯¹å› å˜é‡çš„æ•ˆåº”\n\n\nc\næ€»æ•ˆåº”\nX å¯¹ Y çš„æ€»æ•ˆåº”\n\n\ncâ€™\nç›´æ¥æ•ˆåº”\næ§åˆ¶ M åï¼ŒX å¯¹ Y çš„ç›´æ¥æ•ˆåº”\n\n\naÃ—b\né—´æ¥æ•ˆåº”\né€šè¿‡ M ä¼ é€’çš„æ•ˆåº”\n\n\n\n\n\n\n\\[\\text{æ€»æ•ˆåº” (c)} = \\text{ç›´æ¥æ•ˆåº” (c')} + \\text{é—´æ¥æ•ˆåº” (aÃ—b)}\\]\n\n\n\n\n\n\nåœºæ™¯\nç¤ºä¾‹\n\n\n\n\nè¡Œä¸ºæœºåˆ¶ç ”ç©¶\né”»ç‚¼å¦‚ä½•é€šè¿‡è‡ªæˆ‘æ•ˆèƒ½æ„Ÿå½±å“å¥åº·\n\n\nå¹²é¢„æœºåˆ¶\nåŸ¹è®­å¦‚ä½•é€šè¿‡æŠ€èƒ½æå‡å½±å“ç»©æ•ˆ\n\n\næµè¡Œç—…å­¦\nç¤¾ä¼šç»æµåœ°ä½å¦‚ä½•é€šè¿‡ç”Ÿæ´»æ–¹å¼å½±å“ç–¾ç—…\n\n\nå¿ƒç†å­¦ç ”ç©¶\nä¾æ‹é£æ ¼å¦‚ä½•é€šè¿‡æƒ…ç»ªè°ƒèŠ‚å½±å“å¿ƒç†å¥åº·",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ä¸­ä»‹æ•ˆåº”åˆ†æ"
    ]
  },
  {
    "objectID": "1023-mediation.html#ä»€ä¹ˆæ˜¯ä¸­ä»‹æ•ˆåº”",
    "href": "1023-mediation.html#ä»€ä¹ˆæ˜¯ä¸­ä»‹æ•ˆåº”",
    "title": "ä¸­ä»‹æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "",
    "text": "ä¸­ä»‹æ•ˆåº”ï¼ˆMediation Effectï¼‰ åˆ†æç”¨äºæ¢ç´¢è‡ªå˜é‡ X å¦‚ä½•é€šè¿‡ä¸­ä»‹å˜é‡ M å½±å“å› å˜é‡ Y çš„æœºåˆ¶ã€‚å®ƒå›ç­”çš„æ ¸å¿ƒé—®é¢˜æ˜¯ï¼šâ€œæ•ˆåº”æ˜¯å¦‚ä½•ä¼ é€’çš„ï¼Ÿâ€\n\n\n        a           b\n    X ----â†’ M ----â†’ Y\n        \\         â†—\n         \\-------/\n            c'\n\n\n\nè·¯å¾„\nåç§°\nå«ä¹‰\n\n\n\n\na\nX â†’ M è·¯å¾„\nè‡ªå˜é‡å¯¹ä¸­ä»‹å˜é‡çš„æ•ˆåº”\n\n\nb\nM â†’ Y è·¯å¾„\næ§åˆ¶ X åï¼Œä¸­ä»‹å˜é‡å¯¹å› å˜é‡çš„æ•ˆåº”\n\n\nc\næ€»æ•ˆåº”\nX å¯¹ Y çš„æ€»æ•ˆåº”\n\n\ncâ€™\nç›´æ¥æ•ˆåº”\næ§åˆ¶ M åï¼ŒX å¯¹ Y çš„ç›´æ¥æ•ˆåº”\n\n\naÃ—b\né—´æ¥æ•ˆåº”\né€šè¿‡ M ä¼ é€’çš„æ•ˆåº”\n\n\n\n\n\n\n\\[\\text{æ€»æ•ˆåº” (c)} = \\text{ç›´æ¥æ•ˆåº” (c')} + \\text{é—´æ¥æ•ˆåº” (aÃ—b)}\\]\n\n\n\n\n\n\nåœºæ™¯\nç¤ºä¾‹\n\n\n\n\nè¡Œä¸ºæœºåˆ¶ç ”ç©¶\né”»ç‚¼å¦‚ä½•é€šè¿‡è‡ªæˆ‘æ•ˆèƒ½æ„Ÿå½±å“å¥åº·\n\n\nå¹²é¢„æœºåˆ¶\nåŸ¹è®­å¦‚ä½•é€šè¿‡æŠ€èƒ½æå‡å½±å“ç»©æ•ˆ\n\n\næµè¡Œç—…å­¦\nç¤¾ä¼šç»æµåœ°ä½å¦‚ä½•é€šè¿‡ç”Ÿæ´»æ–¹å¼å½±å“ç–¾ç—…\n\n\nå¿ƒç†å­¦ç ”ç©¶\nä¾æ‹é£æ ¼å¦‚ä½•é€šè¿‡æƒ…ç»ªè°ƒèŠ‚å½±å“å¿ƒç†å¥åº·",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ä¸­ä»‹æ•ˆåº”åˆ†æ"
    ]
  },
  {
    "objectID": "1023-mediation.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "href": "1023-mediation.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "title": "ä¸­ä»‹æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "R åŒ…å®‰è£…ä¸åŠ è½½",
    "text": "R åŒ…å®‰è£…ä¸åŠ è½½\n\n# æ ¸å¿ƒåŒ…\nlibrary(mediation) # ç»å…¸ä¸­ä»‹åˆ†æ\nlibrary(lavaan) # ç»“æ„æ–¹ç¨‹æ¨¡å‹\nlibrary(tidyverse) # æ•°æ®å¤„ç†\nlibrary(broom) # æ¨¡å‹æ•´ç†\n\n# å¯é€‰ï¼šbruceR å’Œ processR éœ€è¦é¢å¤–å®‰è£…\n# library(bruceR)       # ä¸­ä»‹åˆ†æè¾…åŠ©\n# library(processR)     # PROCESS å®çš„ R å®ç°",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ä¸­ä»‹æ•ˆåº”åˆ†æ"
    ]
  },
  {
    "objectID": "1023-mediation.html#æ•°æ®å‡†å¤‡",
    "href": "1023-mediation.html#æ•°æ®å‡†å¤‡",
    "title": "ä¸­ä»‹æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æ•°æ®å‡†å¤‡",
    "text": "æ•°æ®å‡†å¤‡\nä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼šå·¥ä½œå‹åŠ› â†’ å·¥ä½œå€¦æ€  â†’ ç¦»èŒæ„å‘\n\n# æ¨¡æ‹Ÿæ•°æ®\nset.seed(2024)\nn &lt;- 400\n\nwork_data &lt;- tibble(\n  id = 1:n,\n  # æ§åˆ¶å˜é‡\n  age = round(rnorm(n, 35, 8)),\n  gender = factor(sample(c(\"ç”·\", \"å¥³\"), n, replace = TRUE)),\n  tenure = round(pmax(1, rnorm(n, 5, 3))),\n\n  # è‡ªå˜é‡ï¼šå·¥ä½œå‹åŠ› (1-7 é‡è¡¨)\n  stress = round(pmin(7, pmax(1, rnorm(n, 4, 1.2))), 1)\n) |&gt;\n  mutate(\n    # ä¸­ä»‹å˜é‡ï¼šå·¥ä½œå€¦æ€  (å—å‹åŠ›å½±å“)\n    burnout = round(pmin(7, pmax(\n      1,\n      1.5 + 0.8 * stress + 0.02 * age + rnorm(n, 0, 0.8)\n    )), 1),\n\n    # å› å˜é‡ï¼šç¦»èŒæ„å‘ (å—å‹åŠ›å’Œå€¦æ€ å½±å“)\n    turnover = round(pmin(7, pmax(\n      1,\n      0.5 + 0.3 * stress + 0.6 * burnout - 0.05 * tenure + rnorm(n, 0, 0.7)\n    )), 1)\n  )\n\n# æŸ¥çœ‹æ•°æ®\nglimpse(work_data)\n\nRows: 400\nColumns: 7\n$ id       &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18â€¦\n$ age      &lt;dbl&gt; 43, 39, 34, 33, 44, 45, 39, 34, 25, 26, 22, 39, 42, 37, 9, 34â€¦\n$ gender   &lt;fct&gt; ç”·, ç”·, ç”·, ç”·, å¥³, å¥³, ç”·, å¥³, å¥³, å¥³, ç”·, ç”·, ç”·, ç”·, å¥³, ç”·, å¥³, å¥³, å¥³, ç”·, ç”·â€¦\n$ tenure   &lt;dbl&gt; 1, 9, 7, 5, 6, 2, 5, 1, 5, 4, 1, 9, 3, 10, 6, 2, 8, 12, 5, 5,â€¦\n$ stress   &lt;dbl&gt; 3.9, 3.4, 2.9, 3.6, 3.8, 3.1, 2.9, 2.3, 4.5, 3.2, 4.6, 4.8, 2â€¦\n$ burnout  &lt;dbl&gt; 5.3, 5.8, 4.0, 3.1, 6.2, 6.2, 3.7, 2.8, 5.3, 4.0, 7.0, 6.3, 4â€¦\n$ turnover &lt;dbl&gt; 4.0, 5.4, 3.3, 3.8, 5.0, 4.7, 3.6, 2.4, 4.0, 4.0, 7.0, 4.3, 3â€¦\n\n# æè¿°ç»Ÿè®¡\nwork_data |&gt;\n  select(stress, burnout, turnover) |&gt;\n  psych::describe() |&gt;\n  select(mean, sd, min, max)\n\n         mean   sd min max\nstress   4.03 1.15 1.0   7\nburnout  5.38 1.10 2.3   7\nturnover 4.71 1.16 1.4   7\n\n\n\nç›¸å…³åˆ†æ\n\n# è®¡ç®—ç›¸å…³çŸ©é˜µ\ncor_matrix &lt;- work_data |&gt;\n  select(stress, burnout, turnover) |&gt;\n  cor()\n\nround(cor_matrix, 3)\n\n         stress burnout turnover\nstress    1.000   0.737    0.678\nburnout   0.737   1.000    0.792\nturnover  0.678   0.792    1.000",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ä¸­ä»‹æ•ˆåº”åˆ†æ"
    ]
  },
  {
    "objectID": "1023-mediation.html#æ–¹æ³•ä¸€baron-kenny-é€æ­¥æ³•",
    "href": "1023-mediation.html#æ–¹æ³•ä¸€baron-kenny-é€æ­¥æ³•",
    "title": "ä¸­ä»‹æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æ–¹æ³•ä¸€ï¼šBaron-Kenny é€æ­¥æ³•",
    "text": "æ–¹æ³•ä¸€ï¼šBaron-Kenny é€æ­¥æ³•\nä¼ ç»Ÿçš„ Baron-Kenny æ–¹æ³•é€šè¿‡ä¸‰æ­¥å›å½’æ£€éªŒä¸­ä»‹æ•ˆåº”ã€‚\n\næ­¥éª¤ 1ï¼šæ£€éªŒæ€»æ•ˆåº” (c è·¯å¾„)\n\n# X â†’ Yï¼ˆä¸æ§åˆ¶ Mï¼‰\nstep1 &lt;- lm(turnover ~ stress, data = work_data)\nsummary(step1)\n\n\nCall:\nlm(formula = turnover ~ stress, data = work_data)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-2.60645 -0.54598  0.05998  0.63239  2.16969 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)  1.94682    0.15649   12.44   &lt;2e-16 ***\nstress       0.68654    0.03736   18.38   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.8561 on 398 degrees of freedom\nMultiple R-squared:  0.4591,    Adjusted R-squared:  0.4577 \nF-statistic: 337.8 on 1 and 398 DF,  p-value: &lt; 2.2e-16\n\n# æå–æ€»æ•ˆåº”\nc_total &lt;- coef(step1)[\"stress\"]\ncat(\"æ€»æ•ˆåº” c =\", round(c_total, 4), \"\\n\")\n\næ€»æ•ˆåº” c = 0.6865 \n\n\n\n\næ­¥éª¤ 2ï¼šæ£€éªŒ a è·¯å¾„\n\n# X â†’ M\nstep2 &lt;- lm(burnout ~ stress, data = work_data)\nsummary(step2)\n\n\nCall:\nlm(formula = burnout ~ stress, data = work_data)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-2.13847 -0.49068  0.00519  0.46937  1.84885 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)   2.5280     0.1366   18.51   &lt;2e-16 ***\nstress        0.7089     0.0326   21.75   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.7472 on 398 degrees of freedom\nMultiple R-squared:  0.543, Adjusted R-squared:  0.5418 \nF-statistic: 472.8 on 1 and 398 DF,  p-value: &lt; 2.2e-16\n\n# æå– a è·¯å¾„\na_path &lt;- coef(step2)[\"stress\"]\ncat(\"a è·¯å¾„ =\", round(a_path, 4), \"\\n\")\n\na è·¯å¾„ = 0.7089 \n\n\n\n\næ­¥éª¤ 3ï¼šæ£€éªŒ b è·¯å¾„å’Œç›´æ¥æ•ˆåº” (câ€™)\n\n# X + M â†’ Y\nstep3 &lt;- lm(turnover ~ stress + burnout, data = work_data)\nsummary(step3)\n\n\nCall:\nlm(formula = turnover ~ stress + burnout, data = work_data)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-2.05513 -0.43848 -0.01737  0.50172  1.86216 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)  0.24194    0.17280    1.40    0.162    \nstress       0.20844    0.04473    4.66 4.32e-06 ***\nburnout      0.67439    0.04649   14.51  &lt; 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.693 on 397 degrees of freedom\nMultiple R-squared:  0.6465,    Adjusted R-squared:  0.6447 \nF-statistic:   363 on 2 and 397 DF,  p-value: &lt; 2.2e-16\n\n# æå– b è·¯å¾„å’Œç›´æ¥æ•ˆåº”\nb_path &lt;- coef(step3)[\"burnout\"]\nc_prime &lt;- coef(step3)[\"stress\"]\n\ncat(\"b è·¯å¾„ =\", round(b_path, 4), \"\\n\")\n\nb è·¯å¾„ = 0.6744 \n\ncat(\"ç›´æ¥æ•ˆåº” c' =\", round(c_prime, 4), \"\\n\")\n\nç›´æ¥æ•ˆåº” c' = 0.2084 \n\n\n\n\nè®¡ç®—é—´æ¥æ•ˆåº”\n\n# é—´æ¥æ•ˆåº” = a Ã— b\nindirect_effect &lt;- a_path * b_path\ncat(\"é—´æ¥æ•ˆåº” aÃ—b =\", round(indirect_effect, 4), \"\\n\")\n\né—´æ¥æ•ˆåº” aÃ—b = 0.4781 \n\n# ä¸­ä»‹æ•ˆåº”å æ¯”\nproportion_mediated &lt;- indirect_effect / c_total\ncat(\"ä¸­ä»‹æ•ˆåº”å æ¯” =\", round(proportion_mediated * 100, 1), \"%\\n\")\n\nä¸­ä»‹æ•ˆåº”å æ¯” = 69.6 %\n\n# éªŒè¯ï¼šc = c' + ab\ncat(\n  \"éªŒè¯: c' + ab =\", round(c_prime + indirect_effect, 4),\n  \", c =\", round(c_total, 4), \"\\n\"\n)\n\néªŒè¯: c' + ab = 0.6865 , c = 0.6865 \n\n\n\n\nBaron-Kenny ç»“è®º\n\n# ä¸­ä»‹æ•ˆåº”åˆ¤æ–­\ncat(\"\\n==== Baron-Kenny ä¸­ä»‹æ•ˆåº”æ£€éªŒ ====\\n\")\n\n\n==== Baron-Kenny ä¸­ä»‹æ•ˆåº”æ£€éªŒ ====\n\ncat(\"1. c è·¯å¾„æ˜¾è‘—:\", coef(summary(step1))[\"stress\", \"Pr(&gt;|t|)\"] &lt; 0.05, \"\\n\")\n\n1. c è·¯å¾„æ˜¾è‘—: TRUE \n\ncat(\"2. a è·¯å¾„æ˜¾è‘—:\", coef(summary(step2))[\"stress\", \"Pr(&gt;|t|)\"] &lt; 0.05, \"\\n\")\n\n2. a è·¯å¾„æ˜¾è‘—: TRUE \n\ncat(\"3. b è·¯å¾„æ˜¾è‘—:\", coef(summary(step3))[\"burnout\", \"Pr(&gt;|t|)\"] &lt; 0.05, \"\\n\")\n\n3. b è·¯å¾„æ˜¾è‘—: TRUE \n\ncat(\"4. c' &lt; c:\", abs(c_prime) &lt; abs(c_total), \"\\n\")\n\n4. c' &lt; c: TRUE",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ä¸­ä»‹æ•ˆåº”åˆ†æ"
    ]
  },
  {
    "objectID": "1023-mediation.html#æ–¹æ³•äºŒbootstrap-æ³•æ¨è",
    "href": "1023-mediation.html#æ–¹æ³•äºŒbootstrap-æ³•æ¨è",
    "title": "ä¸­ä»‹æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æ–¹æ³•äºŒï¼šBootstrap æ³•ï¼ˆæ¨èï¼‰",
    "text": "æ–¹æ³•äºŒï¼šBootstrap æ³•ï¼ˆæ¨èï¼‰\nBootstrap æ–¹æ³•ä¸ä¾èµ–æ­£æ€åˆ†å¸ƒå‡è®¾ï¼Œæ˜¯ç›®å‰æœ€æ¨èçš„ä¸­ä»‹æ•ˆåº”æ£€éªŒæ–¹æ³•ã€‚\n\nä½¿ç”¨ mediation åŒ…\n\n# æ‹Ÿåˆä¸¤ä¸ªå›å½’æ¨¡å‹\nmodel_m &lt;- lm(burnout ~ stress + age + tenure, data = work_data)\nmodel_y &lt;- lm(turnover ~ stress + burnout + age + tenure, data = work_data)\n\n# æ‰§è¡Œä¸­ä»‹åˆ†æï¼ˆBootstrapï¼‰\nset.seed(42)\nmed_result &lt;- mediate(\n  model.m = model_m, # ä¸­ä»‹å˜é‡æ¨¡å‹\n  model.y = model_y, # ç»“å±€å˜é‡æ¨¡å‹\n  treat = \"stress\", # è‡ªå˜é‡\n  mediator = \"burnout\", # ä¸­ä»‹å˜é‡\n  boot = TRUE, # ä½¿ç”¨ Bootstrap\n  sims = 1000 # Bootstrap æ¬¡æ•°\n)\n\nsummary(med_result)\n\n\nCausal Mediation Analysis \n\nNonparametric Bootstrap Confidence Intervals with the Percentile Method\n\n               Estimate 95% CI Lower 95% CI Upper   p-value    \nACME            0.47348      0.39655      0.55400 &lt; 2.2e-16 ***\nADE             0.21810      0.13445      0.30020 &lt; 2.2e-16 ***\nTotal Effect    0.69158      0.62254      0.76193 &lt; 2.2e-16 ***\nProp. Mediated  0.68463      0.58235      0.79361 &lt; 2.2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nSample Size Used: 400 \n\n\nSimulations: 1000 \n\n\n\n\nè§£è¯» mediation ç»“æœ\n\n\n\næŒ‡æ ‡\nå«ä¹‰\n\n\n\n\nACME\nAverage Causal Mediation Effectï¼ˆé—´æ¥æ•ˆåº”ï¼‰\n\n\nADE\nAverage Direct Effectï¼ˆç›´æ¥æ•ˆåº”ï¼‰\n\n\nTotal Effect\næ€»æ•ˆåº”\n\n\nProp. Mediated\nä¸­ä»‹æ•ˆåº”å æ¯”\n\n\n\n\n# å¯è§†åŒ–ä¸­ä»‹æ•ˆåº”\nplot(med_result, main = \"ä¸­ä»‹æ•ˆåº” Bootstrap ç»“æœ\")\n\n\n\n\n\n\n\n\n\n\næ•æ„Ÿæ€§åˆ†æ\n\n# ä¸­ä»‹åˆ†æçš„æ•æ„Ÿæ€§åˆ†æï¼ˆæ£€éªŒæœªæµ‹é‡æ··æ‚çš„å½±å“ï¼‰\nsens_result &lt;- medsens(med_result, rho.by = 0.05)\n\nsummary(sens_result)\n\n\nMediation Sensitivity Analysis for Average Causal Mediation Effect\n\nSensitivity Region\n\n      Rho    ACME 95% CI Lower 95% CI Upper R^2_M*R^2_Y* R^2_M~R^2_Y~\n[1,] 0.55  0.0433      -0.0209       0.1075       0.3025       0.0451\n[2,] 0.60 -0.0164      -0.0806       0.0477       0.3600       0.0536\n\nRho at which ACME = 0: 0.6\nR^2_M*R^2_Y* at which ACME = 0: 0.36\nR^2_M~R^2_Y~ at which ACME = 0: 0.0536 \n\n\n\n# ç»˜åˆ¶æ•æ„Ÿæ€§åˆ†æå›¾\nplot(sens_result, main = \"æ•æ„Ÿæ€§åˆ†æ\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ä¸­ä»‹æ•ˆåº”åˆ†æ"
    ]
  },
  {
    "objectID": "1023-mediation.html#æ–¹æ³•ä¸‰ç»“æ„æ–¹ç¨‹æ¨¡å‹-sem",
    "href": "1023-mediation.html#æ–¹æ³•ä¸‰ç»“æ„æ–¹ç¨‹æ¨¡å‹-sem",
    "title": "ä¸­ä»‹æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æ–¹æ³•ä¸‰ï¼šç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM)",
    "text": "æ–¹æ³•ä¸‰ï¼šç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM)\nä½¿ç”¨ lavaan åŒ…è¿›è¡Œ SEM åˆ†æï¼Œå¯ä»¥å¤„ç†æ›´å¤æ‚çš„æ¨¡å‹ã€‚\n\nå•ä¸­ä»‹æ¨¡å‹\n\n# å®šä¹‰æ¨¡å‹\nmodel_sem &lt;- \"\n  # å›å½’è·¯å¾„\n  burnout ~ a * stress    # a è·¯å¾„\n  turnover ~ b * burnout + c * stress  # b å’Œ c è·¯å¾„\n\n  # é—´æ¥æ•ˆåº”å’Œæ€»æ•ˆåº”\n  indirect := a * b\n  total := c + a * b\n\n  # æ§åˆ¶å˜é‡ï¼ˆå¯é€‰ï¼‰\n  burnout ~ age + tenure\n  turnover ~ age + tenure\n\"\n\n# æ‹Ÿåˆæ¨¡å‹ï¼ˆBootstrapï¼‰\nfit_sem &lt;- sem(model_sem,\n  data = work_data,\n  se = \"bootstrap\", bootstrap = 1000\n)\n\nsummary(fit_sem, standardized = TRUE, ci = TRUE)\n\nlavaan 0.6-21 ended normally after 1 iteration\n\n  Estimator                                         ML\n  Optimization method                           NLMINB\n  Number of model parameters                         9\n\n  Number of observations                           400\n\nModel Test User Model:\n                                                      \n  Test statistic                                 0.000\n  Degrees of freedom                                 0\n\nParameter Estimates:\n\n  Standard errors                            Bootstrap\n  Number of requested bootstrap draws             1000\n  Number of successful bootstrap draws            1000\n\nRegressions:\n                   Estimate  Std.Err  z-value  P(&gt;|z|) ci.lower ci.upper\n  burnout ~                                                             \n    stress     (a)    0.705    0.029   24.514    0.000    0.649    0.764\n  turnover ~                                                            \n    burnout    (b)    0.672    0.049   13.589    0.000    0.572    0.765\n    stress     (c)    0.218    0.043    5.016    0.000    0.140    0.309\n  burnout ~                                                             \n    age               0.019    0.005    3.971    0.000    0.010    0.029\n    tenure           -0.012    0.013   -0.940    0.347   -0.038    0.013\n  turnover ~                                                            \n    age              -0.002    0.004   -0.571    0.568   -0.012    0.006\n    tenure           -0.048    0.012   -4.189    0.000   -0.072   -0.026\n   Std.lv  Std.all\n                  \n    0.705    0.733\n                  \n    0.672    0.638\n    0.218    0.215\n                  \n    0.019    0.132\n   -0.012   -0.031\n                  \n   -0.002   -0.017\n   -0.048   -0.117\n\nVariances:\n                   Estimate  Std.Err  z-value  P(&gt;|z|) ci.lower ci.upper\n   .burnout           0.533    0.038   14.077    0.000    0.458    0.605\n   .turnover          0.458    0.033   14.047    0.000    0.392    0.518\n   Std.lv  Std.all\n    0.533    0.439\n    0.458    0.340\n\nDefined Parameters:\n                   Estimate  Std.Err  z-value  P(&gt;|z|) ci.lower ci.upper\n    indirect          0.473    0.040   11.857    0.000    0.396    0.554\n    total             0.692    0.034   20.245    0.000    0.626    0.759\n   Std.lv  Std.all\n    0.473    0.467\n    0.692    0.683\n\n\n\n\næå–æ•ˆåº”\n\n# æå–æ ‡å‡†åŒ–æ•ˆåº”\nstandardizedSolution(fit_sem) |&gt;\n  filter(op == \":=\" | (lhs %in% c(\"burnout\", \"turnover\") & op == \"~\")) |&gt;\n  select(lhs, op, rhs, est.std, ci.lower, ci.upper, pvalue)\n\n       lhs op     rhs est.std ci.lower ci.upper pvalue\n1  burnout  ~  stress   0.733    0.696    0.770  0.000\n2 turnover  ~ burnout   0.638    0.557    0.718  0.000\n3 turnover  ~  stress   0.215    0.131    0.300  0.000\n4  burnout  ~     age   0.132    0.068    0.196  0.000\n5  burnout  ~  tenure  -0.031   -0.097    0.034  0.348\n6 turnover  ~     age  -0.017   -0.075    0.041  0.568\n7 turnover  ~  tenure  -0.117   -0.173   -0.062  0.000\n8 indirect :=     a*b   0.467    0.403    0.531  0.000\n9    total :=   c+a*b   0.683    0.639    0.726  0.000\n\n\n\n\næ¨¡å‹æ‹ŸåˆæŒ‡æ ‡\n\n# æ‹ŸåˆæŒ‡æ ‡\nfitMeasures(fit_sem, c(\"chisq\", \"df\", \"pvalue\", \"cfi\", \"tli\", \"rmsea\", \"srmr\"))\n\n chisq     df pvalue    cfi    tli  rmsea   srmr \n     0      0     NA      1      1      0      0",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ä¸­ä»‹æ•ˆåº”åˆ†æ"
    ]
  },
  {
    "objectID": "1023-mediation.html#å¤šé‡ä¸­ä»‹åˆ†æ",
    "href": "1023-mediation.html#å¤šé‡ä¸­ä»‹åˆ†æ",
    "title": "ä¸­ä»‹æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å¤šé‡ä¸­ä»‹åˆ†æ",
    "text": "å¤šé‡ä¸­ä»‹åˆ†æ\nå½“å­˜åœ¨å¤šä¸ªä¸­ä»‹å˜é‡æ—¶ï¼š\n\n# æ·»åŠ ç¬¬äºŒä¸ªä¸­ä»‹å˜é‡ï¼šå·¥ä½œæ»¡æ„åº¦\nwork_data &lt;- work_data |&gt;\n  mutate(\n    satisfaction = round(pmin(7, pmax(\n      1,\n      6 - 0.5 * stress - 0.3 * burnout + rnorm(n, 0, 0.7)\n    )), 1)\n  )\n\n# å¤šé‡ä¸­ä»‹æ¨¡å‹\nmodel_multi &lt;- \"\n  # a è·¯å¾„\n  burnout ~ a1 * stress\n  satisfaction ~ a2 * stress\n\n  # b è·¯å¾„\n  turnover ~ b1 * burnout + b2 * satisfaction + c * stress\n\n  # é—´æ¥æ•ˆåº”\n  ind1 := a1 * b1          # é€šè¿‡å€¦æ€ \n  ind2 := a2 * b2          # é€šè¿‡æ»¡æ„åº¦\n  total_indirect := ind1 + ind2\n  total := c + ind1 + ind2\n\n  # æ§åˆ¶å˜é‡\n  burnout ~ age\n  satisfaction ~ age\n  turnover ~ age\n\"\n\nfit_multi &lt;- sem(model_multi,\n  data = work_data,\n  se = \"bootstrap\", bootstrap = 1000\n)\n\nsummary(fit_multi, standardized = TRUE, ci = TRUE)\n\nlavaan 0.6-21 ended normally after 2 iterations\n\n  Estimator                                         ML\n  Optimization method                           NLMINB\n  Number of model parameters                        11\n\n  Number of observations                           400\n\nModel Test User Model:\n                                                      \n  Test statistic                                32.178\n  Degrees of freedom                                 1\n  P-value (Chi-square)                           0.000\n\nParameter Estimates:\n\n  Standard errors                            Bootstrap\n  Number of requested bootstrap draws             1000\n  Number of successful bootstrap draws            1000\n\nRegressions:\n                   Estimate  Std.Err  z-value  P(&gt;|z|) ci.lower ci.upper\n  burnout ~                                                             \n    stress    (a1)    0.703    0.028   24.919    0.000    0.649    0.761\n  satisfaction ~                                                        \n    stress    (a2)   -0.646    0.028  -23.190    0.000   -0.699   -0.589\n  turnover ~                                                            \n    burnout   (b1)    0.676    0.049   13.765    0.000    0.584    0.783\n    satisfctn (b2)   -0.016    0.052   -0.304    0.761   -0.113    0.086\n    stress     (c)    0.198    0.051    3.879    0.000    0.096    0.298\n  burnout ~                                                             \n    age               0.018    0.005    4.019    0.000    0.009    0.028\n  satisfaction ~                                                        \n    age              -0.006    0.004   -1.248    0.212   -0.014    0.004\n  turnover ~                                                            \n    age              -0.003    0.005   -0.620    0.535   -0.012    0.006\n   Std.lv  Std.all\n                  \n    0.703    0.731\n                  \n   -0.646   -0.736\n                  \n    0.676    0.643\n   -0.016   -0.014\n    0.198    0.195\n                  \n    0.018    0.132\n                  \n   -0.006   -0.044\n                  \n   -0.003   -0.019\n\nVariances:\n                   Estimate  Std.Err  z-value  P(&gt;|z|) ci.lower ci.upper\n   .burnout           0.534    0.038   14.158    0.000    0.461    0.608\n   .satisfaction      0.458    0.030   15.387    0.000    0.395    0.510\n   .turnover          0.476    0.033   14.511    0.000    0.406    0.538\n   Std.lv  Std.all\n    0.534    0.440\n    0.458    0.453\n    0.476    0.354\n\nDefined Parameters:\n                   Estimate  Std.Err  z-value  P(&gt;|z|) ci.lower ci.upper\n    ind1              0.476    0.040   11.964    0.000    0.402    0.555\n    ind2              0.010    0.034    0.303    0.762   -0.054    0.073\n    total_indirect    0.486    0.045   10.873    0.000    0.397    0.578\n    total             0.684    0.033   20.423    0.000    0.617    0.751\n   Std.lv  Std.all\n    0.476    0.470\n    0.010    0.010\n    0.486    0.480\n    0.684    0.675\n\n\n\n# æ¯”è¾ƒä¸¤ä¸ªé—´æ¥æ•ˆåº”\nparameterEstimates(fit_multi, boot.ci.type = \"bca.simple\") |&gt;\n  filter(op == \":=\") |&gt;\n  select(label, est, ci.lower, ci.upper, pvalue)\n\n           label   est ci.lower ci.upper pvalue\n1           ind1 0.476    0.406    0.561  0.000\n2           ind2 0.010   -0.057    0.071  0.762\n3 total_indirect 0.486    0.394    0.569  0.000\n4          total 0.684    0.614    0.748  0.000",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ä¸­ä»‹æ•ˆåº”åˆ†æ"
    ]
  },
  {
    "objectID": "1023-mediation.html#è°ƒèŠ‚çš„ä¸­ä»‹æ•ˆåº”",
    "href": "1023-mediation.html#è°ƒèŠ‚çš„ä¸­ä»‹æ•ˆåº”",
    "title": "ä¸­ä»‹æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "è°ƒèŠ‚çš„ä¸­ä»‹æ•ˆåº”",
    "text": "è°ƒèŠ‚çš„ä¸­ä»‹æ•ˆåº”\nå½“ä¸­ä»‹è·¯å¾„å—åˆ°è°ƒèŠ‚å˜é‡å½±å“æ—¶ï¼š\n\n# æ·»åŠ è°ƒèŠ‚å˜é‡ï¼šç¤¾ä¼šæ”¯æŒ\nwork_data &lt;- work_data |&gt;\n  mutate(\n    social_support = round(pmin(7, pmax(1, rnorm(n, 4.5, 1.2))), 1),\n    # ä¸­å¿ƒåŒ–\n    stress_c = stress - mean(stress),\n    support_c = social_support - mean(social_support),\n    # äº¤äº’é¡¹\n    stress_support = stress_c * support_c\n  )\n\n# è°ƒèŠ‚çš„ä¸­ä»‹æ¨¡å‹\nmodel_m_mod &lt;- lm(burnout ~ stress_c * support_c + age, data = work_data)\nmodel_y_mod &lt;- lm(turnover ~ stress_c + burnout + age, data = work_data)\n\nsummary(model_m_mod) # æ£€æŸ¥äº¤äº’æ•ˆåº”æ˜¯å¦æ˜¾è‘—\n\n\nCall:\nlm(formula = burnout ~ stress_c * support_c + age, data = work_data)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-2.09399 -0.47584  0.01156  0.50286  1.86016 \n\nCoefficients:\n                    Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)         4.742180   0.169860  27.918  &lt; 2e-16 ***\nstress_c            0.704447   0.032122  21.930  &lt; 2e-16 ***\nsupport_c           0.025767   0.033192   0.776 0.438034    \nage                 0.018158   0.004692   3.870 0.000127 ***\nstress_c:support_c -0.015365   0.027896  -0.551 0.582074    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.7349 on 395 degrees of freedom\nMultiple R-squared:  0.5612,    Adjusted R-squared:  0.5567 \nF-statistic: 126.3 on 4 and 395 DF,  p-value: &lt; 2.2e-16\n\n\n\n# åœ¨ä¸åŒç¤¾ä¼šæ”¯æŒæ°´å¹³ä¸‹çš„ä¸­ä»‹æ•ˆåº”\n# æ³¨æ„ï¼šæ­¤ä»£ç éœ€è¦æ›´ç²¾ç»†çš„æ¨¡å‹è®¾å®š\n# ä½æ”¯æŒ (-1 SD)\nmed_low &lt;- mediate(model_m_mod, model_y_mod,\n  covariates = list(support_c = -sd(work_data$support_c)),\n  treat = \"stress_c\", mediator = \"burnout\",\n  boot = TRUE, sims = 500\n)\n\n# é«˜æ”¯æŒ (+1 SD)\nmed_high &lt;- mediate(model_m_mod, model_y_mod,\n  covariates = list(support_c = sd(work_data$support_c)),\n  treat = \"stress_c\", mediator = \"burnout\",\n  boot = TRUE, sims = 500\n)\n\ncat(\"ä½ç¤¾ä¼šæ”¯æŒä¸‹çš„é—´æ¥æ•ˆåº”:\", round(med_low$d0, 4), \"\\n\")\ncat(\"é«˜ç¤¾ä¼šæ”¯æŒä¸‹çš„é—´æ¥æ•ˆåº”:\", round(med_high$d0, 4), \"\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ä¸­ä»‹æ•ˆåº”åˆ†æ"
    ]
  },
  {
    "objectID": "1023-mediation.html#ä½¿ç”¨-brucer-åŒ…ç®€åŒ–ç‰ˆ",
    "href": "1023-mediation.html#ä½¿ç”¨-brucer-åŒ…ç®€åŒ–ç‰ˆ",
    "title": "ä¸­ä»‹æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ä½¿ç”¨ bruceR åŒ…ï¼ˆç®€åŒ–ç‰ˆï¼‰",
    "text": "ä½¿ç”¨ bruceR åŒ…ï¼ˆç®€åŒ–ç‰ˆï¼‰\n\n# bruceR æä¾›æ›´ç®€æ´çš„ä¸­ä»‹åˆ†æè¯­æ³•\n# éœ€è¦å…ˆå®‰è£… bruceR åŒ…\nlibrary(bruceR)\n\n# ç®€å•ä¸­ä»‹åˆ†æ\nPROCESS(\n  data = work_data,\n  y = \"turnover\",\n  x = \"stress\",\n  meds = \"burnout\",\n  covs = c(\"age\", \"tenure\"),\n  seed = 42,\n  nsim = 1000\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ä¸­ä»‹æ•ˆåº”åˆ†æ"
    ]
  },
  {
    "objectID": "1023-mediation.html#ç»“æœå¯è§†åŒ–",
    "href": "1023-mediation.html#ç»“æœå¯è§†åŒ–",
    "title": "ä¸­ä»‹æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç»“æœå¯è§†åŒ–",
    "text": "ç»“æœå¯è§†åŒ–\n\nè·¯å¾„å›¾\n\n# æ‰‹åŠ¨ç»˜åˆ¶è·¯å¾„å›¾\nlibrary(DiagrammeR)\n\ngrViz(\"\ndigraph mediation {\n  graph [layout = dot, rankdir = LR]\n\n  node [shape = rectangle, style = filled, fillcolor = '#e0e7ff']\n  X [label = 'å·¥ä½œå‹åŠ›\\\\n(X)']\n  M [label = 'å·¥ä½œå€¦æ€ \\\\n(M)']\n  Y [label = 'ç¦»èŒæ„å‘\\\\n(Y)']\n\n  edge [color = '#4f46e5', penwidth = 2]\n  X -&gt; M [label = 'a = 0.80***']\n  M -&gt; Y [label = 'b = 0.59***']\n  X -&gt; Y [label = \\\"c' = 0.31***\\\"]\n}\n\")\n\n\n\n\n\n\n\næ•ˆåº”å¯¹æ¯”å›¾\n\n# æ•ˆåº”å¯¹æ¯”æ¡å½¢å›¾\neffect_data &lt;- tibble(\n  æ•ˆåº” = c(\"æ€»æ•ˆåº” (c)\", \"ç›´æ¥æ•ˆåº” (c')\", \"é—´æ¥æ•ˆåº” (ab)\"),\n  ä¼°è®¡å€¼ = c(c_total, c_prime, indirect_effect),\n  ç±»å‹ = c(\"æ€»æ•ˆåº”\", \"ç›´æ¥æ•ˆåº”\", \"é—´æ¥æ•ˆåº”\")\n)\n\nggplot(effect_data, aes(x = reorder(æ•ˆåº”, ä¼°è®¡å€¼), y = ä¼°è®¡å€¼, fill = ç±»å‹)) +\n  geom_col(alpha = 0.8) +\n  geom_text(aes(label = round(ä¼°è®¡å€¼, 3)), hjust = -0.1) +\n  coord_flip() +\n  scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n  labs(\n    title = \"ä¸­ä»‹æ•ˆåº”åˆ†è§£\",\n    x = NULL,\n    y = \"æ•ˆåº”é‡\"\n  ) +\n  theme_minimal(base_size = 12) +\n  theme(legend.position = \"none\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ä¸­ä»‹æ•ˆåº”åˆ†æ"
    ]
  },
  {
    "objectID": "1023-mediation.html#ä¸­ä»‹æ•ˆåº”ç±»å‹",
    "href": "1023-mediation.html#ä¸­ä»‹æ•ˆåº”ç±»å‹",
    "title": "ä¸­ä»‹æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ä¸­ä»‹æ•ˆåº”ç±»å‹",
    "text": "ä¸­ä»‹æ•ˆåº”ç±»å‹\n\n\n\nç±»å‹\næ¡ä»¶\nè§£é‡Š\n\n\n\n\nå®Œå…¨ä¸­ä»‹\ncâ€™ ä¸æ˜¾è‘—ï¼Œab æ˜¾è‘—\nX å®Œå…¨é€šè¿‡ M å½±å“ Y\n\n\néƒ¨åˆ†ä¸­ä»‹\ncâ€™ å’Œ ab éƒ½æ˜¾è‘—\nX éƒ¨åˆ†é€šè¿‡ M å½±å“ Y\n\n\næ— ä¸­ä»‹\nab ä¸æ˜¾è‘—\nM ä¸æ˜¯ä¸­ä»‹å˜é‡\n\n\né®è”½æ•ˆåº”\ncâ€™ å’Œ ab ç¬¦å·ç›¸å\nç›´æ¥å’Œé—´æ¥æ•ˆåº”éƒ¨åˆ†æŠµæ¶ˆ\n\n\nç«äº‰ä¸­ä»‹\nab æ˜¾è‘—ä½† c ä¸æ˜¾è‘—\nä¸åŒä¸­ä»‹è·¯å¾„ç›¸äº’æŠµæ¶ˆ",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ä¸­ä»‹æ•ˆåº”åˆ†æ"
    ]
  },
  {
    "objectID": "1023-mediation.html#å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "href": "1023-mediation.html#å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "title": "ä¸­ä»‹æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "text": "å¸¸è§é—®é¢˜ä¸é™·é˜±\n\n1. å› æœæ¨æ–­çš„é™åˆ¶\n# ä¸­ä»‹åˆ†æéœ€è¦æ»¡è¶³ä»¥ä¸‹å‡è®¾ï¼š\n# 1. X åœ¨æ—¶é—´ä¸Šå…ˆäº M\n# 2. M åœ¨æ—¶é—´ä¸Šå…ˆäº Y\n# 3. æ²¡æœ‰é—æ¼çš„æ··æ‚å˜é‡\n\n# æ¨ªæ–­é¢æ•°æ®çš„ä¸­ä»‹åˆ†æåªèƒ½è¯´æ˜\"ä¸€è‡´æ€§\"ï¼Œä¸èƒ½è¯æ˜å› æœå…³ç³»\n\n\n2. æ ·æœ¬é‡è¦æ±‚\n# ä¸­ä»‹æ•ˆåº”çš„æ£€éªŒåŠ›è¾ƒä½\n# æ¨èè§„åˆ™ï¼š\n# - å°æ•ˆåº”ï¼šn â‰¥ 500\n# - ä¸­ç­‰æ•ˆåº”ï¼šn â‰¥ 200\n# - å¤§æ•ˆåº”ï¼šn â‰¥ 100\n\n# ä½¿ç”¨ powerMediation åŒ…è®¡ç®—æ ·æœ¬é‡\n# library(powerMediation)\n\n\n3. æµ‹é‡è¯¯å·®\n# æµ‹é‡è¯¯å·®ä¼šå¯¼è‡´ï¼š\n# - a è·¯å¾„è¢«ä½ä¼°\n# - b è·¯å¾„è¢«ä½ä¼°\n# - é—´æ¥æ•ˆåº”è¢«ä½ä¼°\n# - ç›´æ¥æ•ˆåº”è¢«é«˜ä¼°\n\n# è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨æ½œå˜é‡æ¨¡å‹ï¼ˆSEMï¼‰\n\n\n4. å¤šé‡å…±çº¿æ€§\n\n# æ£€æŸ¥ X å’Œ M çš„ç›¸å…³æ€§\ncat(\"X-M ç›¸å…³:\", round(cor(work_data$stress, work_data$burnout), 3), \"\\n\")\n\nX-M ç›¸å…³: 0.737 \n\n# é«˜ç›¸å…³å¯èƒ½å¯¼è‡´ç›´æ¥æ•ˆåº”ä¼°è®¡ä¸ç¨³å®š",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ä¸­ä»‹æ•ˆåº”åˆ†æ"
    ]
  },
  {
    "objectID": "1023-mediation.html#å®Œæ•´åˆ†ææ¨¡æ¿",
    "href": "1023-mediation.html#å®Œæ•´åˆ†ææ¨¡æ¿",
    "title": "ä¸­ä»‹æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å®Œæ•´åˆ†ææ¨¡æ¿",
    "text": "å®Œæ•´åˆ†ææ¨¡æ¿\n\n# ========== ä¸­ä»‹æ•ˆåº”åˆ†æå®Œæ•´æµç¨‹ ==========\n\nlibrary(mediation)\nlibrary(lavaan)\n\n# æ–¹æ³•1ï¼šmediation åŒ…ï¼ˆæ¨èï¼‰\n# 1. æ‹Ÿåˆæ¨¡å‹\nmodel_m &lt;- lm(M ~ X + covariates, data = data)\nmodel_y &lt;- lm(Y ~ X + M + covariates, data = data)\n\n# 2. ä¸­ä»‹åˆ†æ\nmed &lt;- mediate(model_m, model_y,\n  treat = \"X\", mediator = \"M\",\n  boot = TRUE, sims = 5000\n)\nsummary(med)\n\n# 3. æ•æ„Ÿæ€§åˆ†æ\nmedsens(med)\n\n# æ–¹æ³•2ï¼šSEMï¼ˆå¤æ‚æ¨¡å‹ï¼‰\nmodel &lt;- \"\n  M ~ a * X\n  Y ~ b * M + c * X\n  indirect := a * b\n  total := c + a * b\n\"\nfit &lt;- sem(model, data, se = \"bootstrap\", bootstrap = 5000)\nsummary(fit, ci = TRUE)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ä¸­ä»‹æ•ˆåº”åˆ†æ"
    ]
  },
  {
    "objectID": "1023-mediation.html#æ€»ç»“",
    "href": "1023-mediation.html#æ€»ç»“",
    "title": "ä¸­ä»‹æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\næ–¹æ³•\nä¼˜ç‚¹\nç¼ºç‚¹\né€‚ç”¨åœºæ™¯\n\n\n\n\nBaron-Kenny\nç®€å•ç›´è§‚\næ£€éªŒåŠ›ä½ï¼Œéœ€æ­£æ€å‡è®¾\næ•™å­¦æ¼”ç¤º\n\n\nSobel æ£€éªŒ\næœ‰æ˜ç¡®æ£€éªŒç»Ÿè®¡é‡\néœ€æ­£æ€å‡è®¾\nå¤§æ ·æœ¬\n\n\nBootstrap\nä¸éœ€è¦æ­£æ€å‡è®¾\nè®¡ç®—é‡å¤§\næ¨èä½¿ç”¨\n\n\nSEM\nå¯å¤„ç†å¤æ‚æ¨¡å‹\néœ€è¦è¾ƒå¤§æ ·æœ¬\nå¤šä¸­ä»‹ã€æ½œå˜é‡\n\n\n\n\næŠ¥å‘Šä¸­ä»‹æ•ˆåº”çš„ Checklist\n\næŠ¥å‘Šæ€»æ•ˆåº”ã€ç›´æ¥æ•ˆåº”ã€é—´æ¥æ•ˆåº”\næŠ¥å‘Š Bootstrap ç½®ä¿¡åŒºé—´\næŠ¥å‘Šä¸­ä»‹æ•ˆåº”å æ¯”ï¼ˆè°¨æ…è§£è¯»ï¼‰\nè¯´æ˜å˜é‡çš„æµ‹é‡æ–¹å¼\nè®¨è®ºæ—¶é—´é¡ºåºå‡è®¾\nè¿›è¡Œæ•æ„Ÿæ€§åˆ†æ\næŠ¥å‘Šæ ·æœ¬é‡å’Œæ£€éªŒåŠ›\n\n\n\næ¨èé˜…è¯»\n\nHayes AF. Introduction to Mediation, Moderation, and Conditional Process Analysis\nMacKinnon DP. Introduction to Statistical Mediation Analysis\nPreacher KJ, Hayes AF (2008). Asymptotic and resampling strategiesâ€¦\nmediation åŒ…æ–‡æ¡£",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ä¸­ä»‹æ•ˆåº”åˆ†æ"
    ]
  },
  {
    "objectID": "1025-gam.html",
    "href": "1025-gam.html",
    "title": "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ï¼ˆGeneralized Additive Model, GAMï¼‰ æ˜¯ä¸€ç§çµæ´»çš„åŠå‚æ•°å›å½’æ–¹æ³•ï¼Œå…è®¸é¢„æµ‹å˜é‡å¯¹ç»“å±€å˜é‡äº§ç”Ÿéçº¿æ€§å½±å“ã€‚\n\n\n\n\n\næ¨¡å‹\nå…¬å¼\nç‰¹ç‚¹\n\n\n\n\nçº¿æ€§å›å½’\n\\(Y = \\beta_0 + \\beta_1 X\\)\nä¸¥æ ¼çº¿æ€§å…³ç³»\n\n\nå¤šé¡¹å¼å›å½’\n\\(Y = \\beta_0 + \\beta_1 X + \\beta_2 X^2\\)\nå…¨å±€å¤šé¡¹å¼\n\n\nGAM\n\\(Y = \\beta_0 + f(X)\\)\næ•°æ®é©±åŠ¨çš„çµæ´»æ›²çº¿\n\n\n\n\n\n\n\\[g(E[Y]) = \\beta_0 + f_1(X_1) + f_2(X_2) + \\cdots + f_p(X_p)\\]\nå…¶ä¸­ï¼š - \\(g(\\cdot)\\) æ˜¯è¿æ¥å‡½æ•° - \\(f_i(\\cdot)\\) æ˜¯å¹³æ»‘å‡½æ•°ï¼ˆé€šå¸¸æ˜¯æ ·æ¡å‡½æ•°ï¼‰\n\n\n\n\n\n\nåœºæ™¯\nç¤ºä¾‹\n\n\n\n\néçº¿æ€§å…³ç³»\nå¹´é¾„ä¸ç–¾ç—…é£é™©çš„ U å‹å…³ç³»\n\n\nç¯å¢ƒæµè¡Œç—…å­¦\næ°”æ¸©ä¸æ­»äº¡ç‡çš„éçº¿æ€§å…³è”\n\n\næ—¶é—´è¶‹åŠ¿\nå­£èŠ‚æ€§æ³¢åŠ¨çš„é•¿æœŸè¶‹åŠ¿\n\n\nå‰‚é‡-ååº”\nè¯ç‰©å‰‚é‡ä¸ç–—æ•ˆçš„éçº¿æ€§æ›²çº¿",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM)"
    ]
  },
  {
    "objectID": "1025-gam.html#ä»€ä¹ˆæ˜¯å¹¿ä¹‰åŠ æ€§æ¨¡å‹",
    "href": "1025-gam.html#ä»€ä¹ˆæ˜¯å¹¿ä¹‰åŠ æ€§æ¨¡å‹",
    "title": "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ï¼ˆGeneralized Additive Model, GAMï¼‰ æ˜¯ä¸€ç§çµæ´»çš„åŠå‚æ•°å›å½’æ–¹æ³•ï¼Œå…è®¸é¢„æµ‹å˜é‡å¯¹ç»“å±€å˜é‡äº§ç”Ÿéçº¿æ€§å½±å“ã€‚\n\n\n\n\n\næ¨¡å‹\nå…¬å¼\nç‰¹ç‚¹\n\n\n\n\nçº¿æ€§å›å½’\n\\(Y = \\beta_0 + \\beta_1 X\\)\nä¸¥æ ¼çº¿æ€§å…³ç³»\n\n\nå¤šé¡¹å¼å›å½’\n\\(Y = \\beta_0 + \\beta_1 X + \\beta_2 X^2\\)\nå…¨å±€å¤šé¡¹å¼\n\n\nGAM\n\\(Y = \\beta_0 + f(X)\\)\næ•°æ®é©±åŠ¨çš„çµæ´»æ›²çº¿\n\n\n\n\n\n\n\\[g(E[Y]) = \\beta_0 + f_1(X_1) + f_2(X_2) + \\cdots + f_p(X_p)\\]\nå…¶ä¸­ï¼š - \\(g(\\cdot)\\) æ˜¯è¿æ¥å‡½æ•° - \\(f_i(\\cdot)\\) æ˜¯å¹³æ»‘å‡½æ•°ï¼ˆé€šå¸¸æ˜¯æ ·æ¡å‡½æ•°ï¼‰\n\n\n\n\n\n\nåœºæ™¯\nç¤ºä¾‹\n\n\n\n\néçº¿æ€§å…³ç³»\nå¹´é¾„ä¸ç–¾ç—…é£é™©çš„ U å‹å…³ç³»\n\n\nç¯å¢ƒæµè¡Œç—…å­¦\næ°”æ¸©ä¸æ­»äº¡ç‡çš„éçº¿æ€§å…³è”\n\n\næ—¶é—´è¶‹åŠ¿\nå­£èŠ‚æ€§æ³¢åŠ¨çš„é•¿æœŸè¶‹åŠ¿\n\n\nå‰‚é‡-ååº”\nè¯ç‰©å‰‚é‡ä¸ç–—æ•ˆçš„éçº¿æ€§æ›²çº¿",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM)"
    ]
  },
  {
    "objectID": "1025-gam.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "href": "1025-gam.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "title": "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM) å®Œå…¨æŒ‡å—",
    "section": "R åŒ…å®‰è£…ä¸åŠ è½½",
    "text": "R åŒ…å®‰è£…ä¸åŠ è½½\n\n# æ ¸å¿ƒåŒ…\nlibrary(mgcv) # GAM ä¸»åŠ›åŒ…\nlibrary(gratia) # GAM å¯è§†åŒ–\nlibrary(tidyverse) # æ•°æ®å¤„ç†\nlibrary(broom) # æ¨¡å‹æ•´ç†",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM)"
    ]
  },
  {
    "objectID": "1025-gam.html#æ•°æ®å‡†å¤‡",
    "href": "1025-gam.html#æ•°æ®å‡†å¤‡",
    "title": "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM) å®Œå…¨æŒ‡å—",
    "section": "æ•°æ®å‡†å¤‡",
    "text": "æ•°æ®å‡†å¤‡\nä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼šç©ºæ°”æ±¡æŸ“ä¸å¥åº·æ•ˆåº”\n\n# æ¨¡æ‹Ÿæ•°æ®\nset.seed(2024)\nn &lt;- 500\n\nhealth_data &lt;- tibble(\n    date = seq.Date(\n        from = as.Date(\"2020-01-01\"),\n        by = \"day\", length.out = n\n    ),\n    # ç¯å¢ƒå˜é‡\n    temperature = 15 + 12 * sin(2 * pi * (1:n) / 365) + rnorm(n, 0, 3),\n    pm25 = pmax(0, 30 + 20 * sin(2 * pi * (1:n) / 365 + 1) + rnorm(n, 0, 15)),\n    humidity = pmin(100, pmax(20, 60 + 15 * sin(2 * pi * (1:n) / 365 + 0.5) + rnorm(n, 0, 10)))\n) |&gt;\n    mutate(\n        # éçº¿æ€§æ•ˆåº”ï¼šUå‹æ¸©åº¦-æ­»äº¡å…³ç³»\n        temp_effect = 0.5 * (temperature - 20)^2 / 100,\n        # PM2.5 æ•ˆåº”ï¼ˆå¯¹æ•°å½¢å¼ï¼‰\n        pm_effect = 3 * log(pm25 + 1),\n        # æ€»æ­»äº¡æ•°ï¼ˆPoissonï¼‰\n        baseline = 50,\n        deaths = rpois(n, lambda = baseline + temp_effect + pm_effect +\n            0.1 * (humidity - 60))\n    )\n\n# æ·»åŠ æ—¶é—´å˜é‡\nhealth_data &lt;- health_data |&gt;\n    mutate(\n        day_of_year = yday(date),\n        month = month(date),\n        year = year(date),\n        time = row_number()\n    )\n\nglimpse(health_data)\n\nRows: 500\nColumns: 12\n$ date        &lt;date&gt; 2020-01-01, 2020-01-02, 2020-01-03, 2020-01-04, 2020-01-0â€¦\n$ temperature &lt;dbl&gt; 18.152469, 16.819204, 15.295522, 15.186995, 19.505873, 20.â€¦\n$ pm25        &lt;dbl&gt; 58.64173, 36.22359, 59.35035, 47.77105, 81.19869, 35.43337â€¦\n$ humidity    &lt;dbl&gt; 66.89995, 62.64636, 58.83599, 64.36041, 66.41205, 61.14408â€¦\n$ temp_effect &lt;dbl&gt; 1.706686e-02, 5.058730e-02, 1.106606e-01, 1.158251e-01, 1.â€¦\n$ pm_effect   &lt;dbl&gt; 12.265066, 10.850828, 12.300500, 11.661411, 13.227418, 10.â€¦\n$ baseline    &lt;dbl&gt; 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50â€¦\n$ deaths      &lt;int&gt; 83, 59, 78, 64, 62, 48, 56, 64, 49, 71, 62, 58, 56, 77, 56â€¦\n$ day_of_year &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,â€¦\n$ month       &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1â€¦\n$ year        &lt;dbl&gt; 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2020â€¦\n$ time        &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,â€¦\n\n\n\næ¢ç´¢æ€§åˆ†æ\n\n# æŸ¥çœ‹éçº¿æ€§å…³ç³»\nhealth_data |&gt;\n    select(deaths, temperature, pm25, humidity) |&gt;\n    pivot_longer(-deaths, names_to = \"variable\", values_to = \"value\") |&gt;\n    ggplot(aes(x = value, y = deaths)) +\n    geom_point(alpha = 0.3, color = \"#4f46e5\") +\n    geom_smooth(method = \"loess\", color = \"#ef4444\") +\n    facet_wrap(~variable, scales = \"free_x\") +\n    labs(title = \"æ­»äº¡æ•°ä¸å„ç¯å¢ƒå› ç´ çš„å…³ç³»\") +\n    theme_minimal(base_size = 11)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM)"
    ]
  },
  {
    "objectID": "1025-gam.html#åŸºç¡€-gam-æ¨¡å‹",
    "href": "1025-gam.html#åŸºç¡€-gam-æ¨¡å‹",
    "title": "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM) å®Œå…¨æŒ‡å—",
    "section": "åŸºç¡€ GAM æ¨¡å‹",
    "text": "åŸºç¡€ GAM æ¨¡å‹\n\nå•å˜é‡å¹³æ»‘\n\n# åŸºç¡€ GAMï¼šæ¸©åº¦çš„éçº¿æ€§æ•ˆåº”\ngam1 &lt;- gam(deaths ~ s(temperature),\n    data = health_data,\n    family = poisson\n)\n\nsummary(gam1)\n\n\nFamily: poisson \nLink function: log \n\nFormula:\ndeaths ~ s(temperature)\n\nParametric coefficients:\n            Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept) 4.096982   0.005766   710.5   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nApproximate significance of smooth terms:\n                 edf Ref.df Chi.sq p-value   \ns(temperature) 1.156  1.296  12.29 0.00163 **\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nR-sq.(adj) =  0.0167   Deviance explained = 1.89%\nUBRE = 0.23926  Scale est. = 1         n = 500\n\n\n\n\nè§£è¯»è¾“å‡º\n\nedf (æœ‰æ•ˆè‡ªç”±åº¦)ï¼šè¡¡é‡æ›²çº¿çš„å¤æ‚åº¦ï¼Œedf â‰ˆ 1 è¡¨ç¤ºè¿‘ä¼¼çº¿æ€§\np å€¼ï¼šæ£€éªŒå¹³æ»‘é¡¹æ˜¯å¦æ˜¾è‘—\nGCV/UBREï¼šç”¨äºé€‰æ‹©å¹³æ»‘åº¦çš„äº¤å‰éªŒè¯åˆ†æ•°\n\n\n# å¯è§†åŒ–å¹³æ»‘æ•ˆåº”\nplot(gam1,\n    shade = TRUE, shade.col = \"#4f46e565\",\n    main = \"æ¸©åº¦çš„éçº¿æ€§æ•ˆåº”\"\n)\n\n\n\n\n\n\n\n\n\n\nä½¿ç”¨ gratia å¯è§†åŒ–ï¼ˆæ¨èï¼‰\n\n# ä½¿ç”¨ gratia åŒ…ç»‘åˆ¶æ›´ç¾è§‚çš„å›¾\ndraw(gam1) +\n    labs(title = \"æ¸©åº¦çš„å¹³æ»‘æ•ˆåº”\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM)"
    ]
  },
  {
    "objectID": "1025-gam.html#å¤šå˜é‡-gam",
    "href": "1025-gam.html#å¤šå˜é‡-gam",
    "title": "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM) å®Œå…¨æŒ‡å—",
    "section": "å¤šå˜é‡ GAM",
    "text": "å¤šå˜é‡ GAM\n\n# å¤šå˜é‡æ¨¡å‹\ngam_full &lt;- gam(\n    deaths ~ s(temperature) + s(pm25) + s(humidity) + s(time, bs = \"cr\"),\n    data = health_data,\n    family = poisson,\n    method = \"REML\" # æ¨èçš„å¹³æ»‘åº¦é€‰æ‹©æ–¹æ³•\n)\n\nsummary(gam_full)\n\n\nFamily: poisson \nLink function: log \n\nFormula:\ndeaths ~ s(temperature) + s(pm25) + s(humidity) + s(time, bs = \"cr\")\n\nParametric coefficients:\n            Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept) 4.095210   0.005777   708.9   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nApproximate significance of smooth terms:\n                 edf Ref.df Chi.sq  p-value    \ns(temperature) 1.000  1.000  4.853   0.0276 *  \ns(pm25)        4.161  5.143 60.140  &lt; 2e-16 ***\ns(humidity)    1.000  1.001 15.966 6.46e-05 ***\ns(time)        1.001  1.002  0.042   0.8395    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nR-sq.(adj) =  0.182   Deviance explained = 19.5%\n-REML = 1758.9  Scale est. = 1         n = 500\n\n\n\n# æ‰€æœ‰å¹³æ»‘é¡¹çš„å¯è§†åŒ–\ndraw(gam_full, residuals = TRUE)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM)"
    ]
  },
  {
    "objectID": "1025-gam.html#æ ·æ¡ç±»å‹",
    "href": "1025-gam.html#æ ·æ¡ç±»å‹",
    "title": "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM) å®Œå…¨æŒ‡å—",
    "section": "æ ·æ¡ç±»å‹",
    "text": "æ ·æ¡ç±»å‹\nmgcv æä¾›å¤šç§æ ·æ¡åŸºå‡½æ•°ï¼š\n\n\n\nå‚æ•°\nç±»å‹\né€‚ç”¨åœºæ™¯\n\n\n\n\nbs = \"tp\"\nè–„æ¿æ ·æ¡ï¼ˆé»˜è®¤ï¼‰\né€šç”¨ï¼Œè‡ªåŠ¨é€‰æ‹©å¤æ‚åº¦\n\n\nbs = \"cr\"\nä¸‰æ¬¡å›å½’æ ·æ¡\nè®¡ç®—æ•ˆç‡é«˜\n\n\nbs = \"cc\"\nå¾ªç¯æ ·æ¡\nå‘¨æœŸæ€§æ•°æ®ï¼ˆå¦‚å­£èŠ‚ï¼‰\n\n\nbs = \"ps\"\nP æ ·æ¡\næƒ©ç½šæ ·æ¡\n\n\nbs = \"re\"\néšæœºæ•ˆåº”\nåˆ†ç±»å˜é‡çš„éšæœºæ•ˆåº”\n\n\n\n\nå‘¨æœŸæ€§æ ·æ¡\n\n# ä½¿ç”¨å¾ªç¯æ ·æ¡å¤„ç†å­£èŠ‚æ€§\ngam_seasonal &lt;- gam(\n    deaths ~ s(day_of_year, bs = \"cc\", k = 12) + # å­£èŠ‚æ€§ï¼ˆå¾ªç¯ï¼‰\n        s(temperature) +\n        s(pm25),\n    data = health_data,\n    family = poisson,\n    method = \"REML\"\n)\n\nsummary(gam_seasonal)\n\n\nFamily: poisson \nLink function: log \n\nFormula:\ndeaths ~ s(day_of_year, bs = \"cc\", k = 12) + s(temperature) + \n    s(pm25)\n\nParametric coefficients:\n            Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept) 4.095448   0.005775   709.1   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nApproximate significance of smooth terms:\n                 edf Ref.df Chi.sq p-value    \ns(day_of_year) 0.847 10.000  1.551   0.128    \ns(temperature) 1.002  1.003  0.029   0.869    \ns(pm25)        4.555  5.598 62.775  &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nR-sq.(adj) =  0.163   Deviance explained = 17.6%\n-REML = 1759.7  Scale est. = 1         n = 500\n\n\n\n# å¯è§†åŒ–å­£èŠ‚æ•ˆåº”\ndraw(gam_seasonal, select = 1) +\n    labs(title = \"å­£èŠ‚æ•ˆåº”ï¼ˆå¾ªç¯æ ·æ¡ï¼‰\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM)"
    ]
  },
  {
    "objectID": "1025-gam.html#æ§åˆ¶å¹³æ»‘åº¦",
    "href": "1025-gam.html#æ§åˆ¶å¹³æ»‘åº¦",
    "title": "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM) å®Œå…¨æŒ‡å—",
    "section": "æ§åˆ¶å¹³æ»‘åº¦",
    "text": "æ§åˆ¶å¹³æ»‘åº¦\n\nèŠ‚ç‚¹æ•° (k)\n\n# k æ§åˆ¶æœ€å¤§å¤æ‚åº¦\ngam_k5 &lt;- gam(deaths ~ s(temperature, k = 5), data = health_data, family = poisson)\ngam_k20 &lt;- gam(deaths ~ s(temperature, k = 20), data = health_data, family = poisson)\n\n# æ¯”è¾ƒ\npar(mfrow = c(1, 2))\nplot(gam_k5, main = \"k = 5\")\nplot(gam_k20, main = \"k = 20\")\n\n\n\n\n\n\n\npar(mfrow = c(1, 1))\n\n\n\næ£€éªŒ k æ˜¯å¦è¶³å¤Ÿ\n\n# k æ£€éªŒ\nk.check(gam_full)\n\n               k'      edf   k-index p-value\ns(temperature)  9 1.000178 0.9168486  0.0325\ns(pm25)         9 4.160586 0.9495498  0.1325\ns(humidity)     9 1.000394 1.0194301  0.6500\ns(time)         9 1.000861 1.0466397  0.8600\n\n# p å€¼å¾ˆå°è¡¨ç¤º k å¯èƒ½ä¸å¤Ÿ\n\n\n\nå›ºå®šè‡ªç”±åº¦\n\n# ä½¿ç”¨ fx = TRUE å›ºå®šè‡ªç”±åº¦\ngam_fixed &lt;- gam(\n    deaths ~ s(temperature, k = 5, fx = TRUE), # å›ºå®š 4 df\n    data = health_data,\n    family = poisson\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM)"
    ]
  },
  {
    "objectID": "1025-gam.html#äº¤äº’æ•ˆåº”",
    "href": "1025-gam.html#äº¤äº’æ•ˆåº”",
    "title": "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM) å®Œå…¨æŒ‡å—",
    "section": "äº¤äº’æ•ˆåº”",
    "text": "äº¤äº’æ•ˆåº”\n\nå¼ é‡ç§¯å¹³æ»‘\n\n# æ¸©åº¦å’Œ PM2.5 çš„äº¤äº’æ•ˆåº”\ngam_interact &lt;- gam(\n    deaths ~ te(temperature, pm25), # å¼ é‡ç§¯äº¤äº’\n    data = health_data,\n    family = poisson,\n    method = \"REML\"\n)\n\nsummary(gam_interact)\n\n\nFamily: poisson \nLink function: log \n\nFormula:\ndeaths ~ te(temperature, pm25)\n\nParametric coefficients:\n            Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept) 4.095414   0.005775   709.1   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nApproximate significance of smooth terms:\n                       edf Ref.df Chi.sq p-value    \nte(temperature,pm25) 7.438  8.319  106.5  &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nR-sq.(adj) =  0.165   Deviance explained =   18%\n-REML = 1757.2  Scale est. = 1         n = 500\n\n\n\n# 3D å¯è§†åŒ–\nvis.gam(gam_interact,\n    view = c(\"temperature\", \"pm25\"),\n    theta = 45, phi = 20,\n    main = \"æ¸©åº¦ä¸PM2.5çš„äº¤äº’æ•ˆåº”\",\n    color = \"topo\"\n)\n\n\n\n\n\n\n\n\n\n# ç­‰é«˜çº¿å›¾\nvis.gam(gam_interact,\n    view = c(\"temperature\", \"pm25\"),\n    plot.type = \"contour\",\n    main = \"ç­‰é«˜çº¿å›¾ï¼šæ¸©åº¦ Ã— PM2.5\"\n)\n\n\n\n\n\n\n\n\n\n\nä½¿ç”¨ ti() åˆ†ç¦»ä¸»æ•ˆåº”å’Œäº¤äº’\n\n# åˆ†ç¦»ä¸»æ•ˆåº”å’Œçº¯äº¤äº’\ngam_ti &lt;- gam(\n    deaths ~ s(temperature) + s(pm25) + ti(temperature, pm25),\n    data = health_data,\n    family = poisson,\n    method = \"REML\"\n)\n\nsummary(gam_ti)\n\n\nFamily: poisson \nLink function: log \n\nFormula:\ndeaths ~ s(temperature) + s(pm25) + ti(temperature, pm25)\n\nParametric coefficients:\n            Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept) 4.093176   0.006266   653.3   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nApproximate significance of smooth terms:\n                       edf Ref.df Chi.sq p-value    \ns(temperature)       1.002  1.004  0.039   0.847    \ns(pm25)              4.474  5.508 79.823  &lt;2e-16 ***\nti(temperature,pm25) 3.453  4.895  4.600   0.531    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nR-sq.(adj) =  0.166   Deviance explained = 18.3%\n-REML = 1761.1  Scale est. = 1         n = 500",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM)"
    ]
  },
  {
    "objectID": "1025-gam.html#çº¿æ€§é¡¹ä¸å¹³æ»‘é¡¹æ··åˆ",
    "href": "1025-gam.html#çº¿æ€§é¡¹ä¸å¹³æ»‘é¡¹æ··åˆ",
    "title": "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM) å®Œå…¨æŒ‡å—",
    "section": "çº¿æ€§é¡¹ä¸å¹³æ»‘é¡¹æ··åˆ",
    "text": "çº¿æ€§é¡¹ä¸å¹³æ»‘é¡¹æ··åˆ\n\n# éƒ¨åˆ†å˜é‡ä½¿ç”¨çº¿æ€§æ•ˆåº”\ngam_mixed &lt;- gam(\n    deaths ~ humidity + # çº¿æ€§æ•ˆåº”\n        s(temperature) + # å¹³æ»‘æ•ˆåº”\n        s(pm25, k = 8) +\n        s(time, bs = \"cr\"),\n    data = health_data,\n    family = poisson,\n    method = \"REML\"\n)\n\nsummary(gam_mixed)\n\n\nFamily: poisson \nLink function: log \n\nFormula:\ndeaths ~ humidity + s(temperature) + s(pm25, k = 8) + s(time, \n    bs = \"cr\")\n\nParametric coefficients:\n             Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept) 3.9541043  0.0359491 109.992  &lt; 2e-16 ***\nhumidity    0.0022191  0.0005559   3.992 6.55e-05 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nApproximate significance of smooth terms:\n                 edf Ref.df Chi.sq p-value    \ns(temperature) 1.000  1.000  4.842  0.0278 *  \ns(pm25)        4.102  4.990 60.228  &lt;2e-16 ***\ns(time)        1.001  1.002  0.043  0.8382    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nR-sq.(adj) =  0.182   Deviance explained = 19.5%\n-REML = 1761.5  Scale est. = 1         n = 500",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM)"
    ]
  },
  {
    "objectID": "1025-gam.html#æ¨¡å‹è¯Šæ–­",
    "href": "1025-gam.html#æ¨¡å‹è¯Šæ–­",
    "title": "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM) å®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹è¯Šæ–­",
    "text": "æ¨¡å‹è¯Šæ–­\n\næ®‹å·®æ£€æŸ¥\nGAM çš„æ®‹å·®è¯Šæ–­é‡ç‚¹æ˜¯è¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆã€‚è‹¥ gam.check() æç¤º k ä¸è¶³ï¼Œåº”æå‡ k æˆ–è°ƒæ•´å¹³æ»‘ç±»å‹ï¼›è‹¥æ®‹å·®æ˜¾ç¤ºç»“æ„æ€§è¶‹åŠ¿ï¼Œ è¯´æ˜æ¨¡å‹é—æ¼å…³é”®åå˜é‡æˆ–éœ€è¦äº¤äº’é¡¹ã€‚\n\n# ä½¿ç”¨ gam.check\ngam.check(gam_full)\n\n\n\n\n\n\n\n\n\nMethod: REML   Optimizer: outer newton\nfull convergence after 8 iterations.\nGradient range [-0.0003035987,-1.600375e-05]\n(score 1758.905 & scale 1).\nHessian positive definite, eigenvalue range [7.733389e-05,0.8189276].\nModel rank =  37 / 37 \n\nBasis dimension (k) checking results. Low p-value (k-index&lt;1) may\nindicate that k is too low, especially if edf is close to k'.\n\n                 k'  edf k-index p-value  \ns(temperature) 9.00 1.00    0.92   0.035 *\ns(pm25)        9.00 4.16    0.95   0.095 .\ns(humidity)    9.00 1.00    1.02   0.675  \ns(time)        9.00 1.00    1.05   0.815  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\n\n# ä½¿ç”¨ gratia è¿›è¡Œè¯Šæ–­\nappraise(gam_full)\n\n\n\n\n\n\n\n\n\n\nè¿‡æ‹Ÿåˆæ£€éªŒ\n\n# æ¯”è¾ƒ AIC/BIC\nAIC(gam1, gam_full, gam_seasonal)\n\n                   df      AIC\ngam1         2.155981 3583.242\ngam_full     9.145836 3486.659\ngam_seasonal 9.032102 3498.394\n\n\n\n\nå¹³æ»‘é¡¹æ˜¾è‘—æ€§\n\n# å¹³æ»‘é¡¹æ˜¾è‘—æ€§ï¼ˆedf ä¸ p å€¼ï¼‰\nsummary(gam_full)$s.table\n\n                    edf   Ref.df      Chi.sq      p-value\ns(temperature) 1.000178 1.000356  4.85253514 2.762097e-02\ns(pm25)        4.160586 5.142976 60.14005071 0.000000e+00\ns(humidity)    1.000394 1.000787 15.96581684 6.459154e-05\ns(time)        1.000861 1.001717  0.04208602 8.394934e-01\n\n\n\n\nåå·®è§£é‡Š\n\n# è§£é‡Šçš„åå·®ï¼ˆç±»ä¼¼ RÂ²ï¼‰\ncat(\"åå·®è§£é‡Šç‡:\", round(summary(gam_full)$dev.expl * 100, 1), \"%\\n\")\n\nåå·®è§£é‡Šç‡: 19.5 %",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM)"
    ]
  },
  {
    "objectID": "1025-gam.html#æ¨¡å‹é¢„æµ‹",
    "href": "1025-gam.html#æ¨¡å‹é¢„æµ‹",
    "title": "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM) å®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹é¢„æµ‹",
    "text": "æ¨¡å‹é¢„æµ‹\n\nè¾¹é™…æ•ˆåº”\n\n# é¢„æµ‹ç‰¹å®šå€¼\nnew_data &lt;- data.frame(\n    temperature = seq(5, 35, length.out = 100),\n    pm25 = mean(health_data$pm25),\n    humidity = mean(health_data$humidity),\n    time = median(health_data$time)\n)\n\npred &lt;- predict(gam_full, newdata = new_data, type = \"response\", se.fit = TRUE)\n\n# ç»‘åˆ¶é¢„æµ‹æ›²çº¿\npred_df &lt;- new_data |&gt;\n    mutate(\n        fit = pred$fit,\n        lower = pred$fit - 1.96 * pred$se.fit,\n        upper = pred$fit + 1.96 * pred$se.fit\n    )\n\nggplot(pred_df, aes(x = temperature, y = fit)) +\n    geom_ribbon(aes(ymin = lower, ymax = upper), fill = \"#4f46e5\", alpha = 0.3) +\n    geom_line(color = \"#4f46e5\", linewidth = 1.2) +\n    labs(\n        title = \"æ¸©åº¦ä¸é¢„æµ‹æ­»äº¡æ•°çš„å…³ç³»\",\n        subtitle = \"æ§åˆ¶ PM2.5 å’Œæ¹¿åº¦åœ¨å‡å€¼æ°´å¹³\",\n        x = \"æ¸©åº¦ (Â°C)\",\n        y = \"é¢„æµ‹æ­»äº¡æ•°\"\n    ) +\n    theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\n\n\nåæ•ˆåº”å¯è§†åŒ–\n\n# æ‰€æœ‰å˜é‡çš„åæ•ˆåº”å›¾\ndraw(gam_full, ncol = 2) +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM)"
    ]
  },
  {
    "objectID": "1025-gam.html#ä¸-glm-æ¯”è¾ƒ",
    "href": "1025-gam.html#ä¸-glm-æ¯”è¾ƒ",
    "title": "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM) å®Œå…¨æŒ‡å—",
    "section": "ä¸ GLM æ¯”è¾ƒ",
    "text": "ä¸ GLM æ¯”è¾ƒ\n\n# çº¿æ€§æ¨¡å‹\nglm_linear &lt;- glm(\n    deaths ~ temperature + pm25 + humidity,\n    data = health_data,\n    family = poisson\n)\n\n# å¤šé¡¹å¼æ¨¡å‹\nglm_poly &lt;- glm(\n    deaths ~ poly(temperature, 3) + pm25 + humidity,\n    data = health_data,\n    family = poisson\n)\n\n# æ¯”è¾ƒ\nAIC(glm_linear, glm_poly, gam_full)\n\n                 df      AIC\nglm_linear 4.000000 3495.638\nglm_poly   6.000000 3498.900\ngam_full   9.145836 3486.659\n\nBIC(glm_linear, glm_poly, gam_full)\n\n                 df      BIC\nglm_linear 4.000000 3512.496\nglm_poly   6.000000 3524.188\ngam_full   9.145836 3525.206\n\n\n\n# å¯è§†åŒ–æ¯”è¾ƒ\npred_linear &lt;- predict(glm_linear, newdata = new_data, type = \"response\")\npred_poly &lt;- predict(glm_poly, newdata = new_data, type = \"response\")\npred_gam &lt;- predict(gam_full, newdata = new_data, type = \"response\")\n\ncompare_df &lt;- new_data |&gt;\n    mutate(\n        Linear = pred_linear,\n        Polynomial = pred_poly,\n        GAM = pred_gam\n    ) |&gt;\n    pivot_longer(c(Linear, Polynomial, GAM), names_to = \"Model\", values_to = \"Predicted\")\n\nggplot(compare_df, aes(x = temperature, y = Predicted, color = Model)) +\n    geom_line(linewidth = 1.2) +\n    scale_color_manual(values = c(\"#ef4444\", \"#f59e0b\", \"#4f46e5\")) +\n    labs(\n        title = \"ä¸åŒæ¨¡å‹çš„æ‹Ÿåˆæ¯”è¾ƒ\",\n        x = \"æ¸©åº¦\",\n        y = \"é¢„æµ‹æ­»äº¡æ•°\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(legend.position = \"bottom\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM)"
    ]
  },
  {
    "objectID": "1025-gam.html#åˆ†å¸ƒæ»åæ¨¡å‹-dlnm",
    "href": "1025-gam.html#åˆ†å¸ƒæ»åæ¨¡å‹-dlnm",
    "title": "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM) å®Œå…¨æŒ‡å—",
    "section": "åˆ†å¸ƒæ»åæ¨¡å‹ (DLNM)",
    "text": "åˆ†å¸ƒæ»åæ¨¡å‹ (DLNM)\næµè¡Œç—…å­¦ä¸­å¸¸ç”¨ GAM ä¸åˆ†å¸ƒæ»åç»“åˆï¼š\n\nlibrary(dlnm)\n\n# åˆ›å»ºäº¤å‰åŸºï¼ˆtemperature çš„æ»åæ•ˆåº”ï¼‰\ncb_temp &lt;- crossbasis(\n    health_data$temperature,\n    lag = 7, # æ»å 0-7 å¤©\n    argvar = list(fun = \"ns\", df = 4), # æš´éœ²-ååº”ï¼šè‡ªç„¶æ ·æ¡\n    arglag = list(fun = \"ns\", df = 3) # æ»å-ååº”ï¼šè‡ªç„¶æ ·æ¡\n)\n\n# GAM with DLNM\ngam_dlnm &lt;- gam(\n    deaths ~ cb_temp + s(pm25) + s(humidity) + s(time, bs = \"cr\"),\n    data = health_data,\n    family = poisson\n)\n\nsummary(gam_dlnm)\n\n\nFamily: poisson \nLink function: log \n\nFormula:\ndeaths ~ cb_temp + s(pm25) + s(humidity) + s(time, bs = \"cr\")\n\nParametric coefficients:\n              Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept)   4.262170   0.082541  51.637   &lt;2e-16 ***\ncb_tempv1.l1 -0.018929   0.079568  -0.238    0.812    \ncb_tempv1.l2 -0.026225   0.028698  -0.914    0.361    \ncb_tempv1.l3  0.043453   0.068328   0.636    0.525    \ncb_tempv2.l1 -0.036496   0.072062  -0.506    0.613    \ncb_tempv2.l2 -0.042854   0.027504  -1.558    0.119    \ncb_tempv2.l3 -0.016169   0.062282  -0.260    0.795    \ncb_tempv3.l1 -0.053865   0.148862  -0.362    0.717    \ncb_tempv3.l2 -0.099057   0.068386  -1.449    0.147    \ncb_tempv3.l3  0.153740   0.123628   1.244    0.214    \ncb_tempv4.l1  0.037974   0.078706   0.482    0.629    \ncb_tempv4.l2  0.010650   0.032440   0.328    0.743    \ncb_tempv4.l3 -0.005921   0.067222  -0.088    0.930    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nApproximate significance of smooth terms:\n              edf Ref.df Chi.sq  p-value    \ns(pm25)     4.368  5.386 48.641  &lt; 2e-16 ***\ns(humidity) 1.000  1.000 17.681 2.67e-05 ***\ns(time)     1.000  1.000  0.278    0.598    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nR-sq.(adj) =  0.178   Deviance explained =   21%\nUBRE = 0.057787  Scale est. = 1         n = 493\n\n\n\n# 3D æ»åæ•ˆåº”å›¾\npred_dlnm &lt;- crosspred(cb_temp, gam_dlnm, at = seq(0, 35, 2), bylag = 0.5)\n\nplot(pred_dlnm,\n    xlab = \"æ¸©åº¦\", ylab = \"æ»åå¤©æ•°\", zlab = \"log(RR)\",\n    theta = 210, phi = 25, main = \"æ¸©åº¦çš„åˆ†å¸ƒæ»åæ•ˆåº”\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM)"
    ]
  },
  {
    "objectID": "1025-gam.html#å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "href": "1025-gam.html#å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "title": "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM) å®Œå…¨æŒ‡å—",
    "section": "å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "text": "å¸¸è§é—®é¢˜ä¸é™·é˜±\n\n1. k å€¼é€‰æ‹©\n# è§„åˆ™ï¼šk åº”è¶³å¤Ÿå¤§ï¼Œè®©æ•°æ®å†³å®šå¹³æ»‘åº¦\n# é»˜è®¤ k = 10 æ˜¯åˆç†èµ·ç‚¹\n# ä½¿ç”¨ k.check() éªŒè¯\n\n\n2. è¿‡æ‹Ÿåˆ\n# è§£å†³æ–¹æ¡ˆï¼š\n# 1. ä½¿ç”¨ method = \"REML\"ï¼ˆæ¨èï¼‰\n# 2. å‡å° k å€¼\n# 3. æ·»åŠ é¢å¤–æƒ©ç½šï¼šgamma å‚æ•°\ngam(..., gamma = 1.4)  # å¢åŠ æƒ©ç½š\n\n\n3. æ¨æ–­å±€é™\n# p å€¼è§£è¯»éœ€è°¨æ…\n# ç½®ä¿¡åŒºé—´å¯èƒ½è¿‡çª„ï¼ˆæœªè€ƒè™‘å¹³æ»‘åº¦é€‰æ‹©çš„ä¸ç¡®å®šæ€§ï¼‰\n\n\n4. å¤–æ¨é£é™©\n# æ ·æ¡åœ¨æ•°æ®èŒƒå›´å¤–çš„å¤–æ¨ä¸å¯é \n# è¾¹ç•Œæ•ˆåº”å¯èƒ½å¯¼è‡´æç«¯æ³¢åŠ¨",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM)"
    ]
  },
  {
    "objectID": "1025-gam.html#å®Œæ•´åˆ†ææ¨¡æ¿",
    "href": "1025-gam.html#å®Œæ•´åˆ†ææ¨¡æ¿",
    "title": "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM) å®Œå…¨æŒ‡å—",
    "section": "å®Œæ•´åˆ†ææ¨¡æ¿",
    "text": "å®Œæ•´åˆ†ææ¨¡æ¿\n\n# ========== GAM åˆ†æå®Œæ•´æµç¨‹ ==========\n\nlibrary(mgcv)\nlibrary(gratia)\n\n# 1. æ¢ç´¢éçº¿æ€§å…³ç³»\nggplot(data, aes(x = x, y = y)) +\n    geom_smooth()\n\n# 2. æ‹Ÿåˆåˆå§‹æ¨¡å‹\ngam1 &lt;- gam(y ~ s(x1) + s(x2), data = data, method = \"REML\")\n\n# 3. æ£€æŸ¥ k å€¼\nk.check(gam1)\n\n# 4. æ¨¡å‹è¯Šæ–­\nappraise(gam1)\ngam.check(gam1)\n\n# 5. æ¨¡å‹æ¯”è¾ƒ\nAIC(gam1, gam2)\n\n# 6. å¯è§†åŒ–\ndraw(gam1)\n\n# 7. é¢„æµ‹\npredict(gam1, newdata = new_data, type = \"response\", se.fit = TRUE)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM)"
    ]
  },
  {
    "objectID": "1025-gam.html#æ€»ç»“",
    "href": "1025-gam.html#æ€»ç»“",
    "title": "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM) å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nåŠŸèƒ½\nå‡½æ•°/å‚æ•°\nè¯´æ˜\n\n\n\n\nå•å˜é‡å¹³æ»‘\ns(x)\né»˜è®¤è–„æ¿æ ·æ¡\n\n\nå¾ªç¯æ ·æ¡\ns(x, bs = \"cc\")\nå‘¨æœŸæ€§æ•°æ®\n\n\näº¤äº’æ•ˆåº”\nte(x1, x2)\nå¼ é‡ç§¯å¹³æ»‘\n\n\nçº¯äº¤äº’\nti(x1, x2)\nä»…äº¤äº’é¡¹\n\n\nèŠ‚ç‚¹æ•°\nk = 10\næ§åˆ¶æœ€å¤§å¤æ‚åº¦\n\n\nä¼°è®¡æ–¹æ³•\nmethod = \"REML\"\næ¨èä½¿ç”¨\n\n\næ¨¡å‹è¯Šæ–­\ngam.check(), appraise()\næ®‹å·®æ£€éªŒ\n\n\n\n\næŠ¥å‘Š GAM çš„ Checklist\n\nè¯´æ˜ä½¿ç”¨ GAM çš„ç†ç”±ï¼ˆéçº¿æ€§æ¢ç´¢ï¼‰\næŠ¥å‘Šæ ·æ¡ç±»å‹å’Œ k å€¼\næŠ¥å‘Š edf å’Œæ˜¾è‘—æ€§\næä¾›å¹³æ»‘æ•ˆåº”å¯è§†åŒ–\næŠ¥å‘Šåå·®è§£é‡Šç‡\næ£€éªŒ k æ˜¯å¦è¶³å¤Ÿ\nè¿›è¡Œæ¨¡å‹è¯Šæ–­\n\n\n\næ¨èé˜…è¯»\n\nWood SN. Generalized Additive Models: An Introduction with R (2nd ed.)\nmgcv åŒ…æ–‡æ¡£\ngratia å¯è§†åŒ–æŒ‡å—",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM)"
    ]
  },
  {
    "objectID": "1027-rcs.html",
    "href": "1027-rcs.html",
    "title": "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ï¼ˆRestricted Cubic Spline, RCSï¼‰ æ˜¯ä¸€ç§çµæ´»çš„éçº¿æ€§å»ºæ¨¡æ–¹æ³•ï¼Œç”¨äºæ¢ç´¢è¿ç»­å˜é‡ä¸ç»“å±€ä¹‹é—´çš„éçº¿æ€§å…³ç³»ï¼ŒåŒæ—¶ä¿æŒæ›²çº¿åœ¨è¾¹ç•Œå¤„çš„å¹³æ»‘æ€§ã€‚\n\n\n\n\n\næ–¹æ³•\nä¼˜ç‚¹\nç¼ºç‚¹\n\n\n\n\nçº¿æ€§é¡¹\nç®€å•ï¼Œæ˜“è§£é‡Š\nå¯èƒ½é—æ¼éçº¿æ€§\n\n\nå¤šé¡¹å¼\nçµæ´»\nè¾¹ç•Œä¸ç¨³å®šï¼Œéš¾ä»¥è§£é‡Š\n\n\nåˆ†ç±»å˜é‡\nç®€å•\nä¸¢å¤±ä¿¡æ¯ï¼Œåˆ‡ç‚¹ä¸»è§‚\n\n\nRCS\nçµæ´»ï¼Œè¾¹ç•Œå¹³æ»‘\néœ€è¦é€‰æ‹©èŠ‚ç‚¹æ•°\n\n\n\n\n\n\n\nåˆ†æ®µç«‹æ–¹å¤šé¡¹å¼ï¼šåœ¨èŠ‚ç‚¹ä¹‹é—´ä½¿ç”¨ä¸‰æ¬¡å¤šé¡¹å¼æ‹Ÿåˆ\nè¿ç»­æ€§çº¦æŸï¼šå‡½æ•°åŠå…¶ä¸€é˜¶ã€äºŒé˜¶å¯¼æ•°åœ¨èŠ‚ç‚¹å¤„è¿ç»­\nè¾¹ç•Œçº¦æŸï¼šåœ¨æœ€å¤–ä¾§èŠ‚ç‚¹ä¹‹å¤–å¼ºåˆ¶ä¸ºçº¿æ€§ï¼ˆé™åˆ¶æ€§ï¼‰\n\n\n\n\n\n\n\nåœºæ™¯\nç¤ºä¾‹\n\n\n\n\nå‰‚é‡-ååº”å…³ç³»\nè¯ç‰©å‰‚é‡ä¸ç–—æ•ˆ\n\n\néçº¿æ€§é£é™©\nå¹´é¾„ä¸æ­»äº¡ç‡çš„ J å‹å…³ç³»\n\n\né˜ˆå€¼æ•ˆåº”\nBMI ä¸ç–¾ç—…é£é™©\n\n\næ‹ç‚¹è¯†åˆ«\næœ€ä½³å¹²é¢„åˆ‡ç‚¹",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS)"
    ]
  },
  {
    "objectID": "1027-rcs.html#ä»€ä¹ˆæ˜¯é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡",
    "href": "1027-rcs.html#ä»€ä¹ˆæ˜¯é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡",
    "title": "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ï¼ˆRestricted Cubic Spline, RCSï¼‰ æ˜¯ä¸€ç§çµæ´»çš„éçº¿æ€§å»ºæ¨¡æ–¹æ³•ï¼Œç”¨äºæ¢ç´¢è¿ç»­å˜é‡ä¸ç»“å±€ä¹‹é—´çš„éçº¿æ€§å…³ç³»ï¼ŒåŒæ—¶ä¿æŒæ›²çº¿åœ¨è¾¹ç•Œå¤„çš„å¹³æ»‘æ€§ã€‚\n\n\n\n\n\næ–¹æ³•\nä¼˜ç‚¹\nç¼ºç‚¹\n\n\n\n\nçº¿æ€§é¡¹\nç®€å•ï¼Œæ˜“è§£é‡Š\nå¯èƒ½é—æ¼éçº¿æ€§\n\n\nå¤šé¡¹å¼\nçµæ´»\nè¾¹ç•Œä¸ç¨³å®šï¼Œéš¾ä»¥è§£é‡Š\n\n\nåˆ†ç±»å˜é‡\nç®€å•\nä¸¢å¤±ä¿¡æ¯ï¼Œåˆ‡ç‚¹ä¸»è§‚\n\n\nRCS\nçµæ´»ï¼Œè¾¹ç•Œå¹³æ»‘\néœ€è¦é€‰æ‹©èŠ‚ç‚¹æ•°\n\n\n\n\n\n\n\nåˆ†æ®µç«‹æ–¹å¤šé¡¹å¼ï¼šåœ¨èŠ‚ç‚¹ä¹‹é—´ä½¿ç”¨ä¸‰æ¬¡å¤šé¡¹å¼æ‹Ÿåˆ\nè¿ç»­æ€§çº¦æŸï¼šå‡½æ•°åŠå…¶ä¸€é˜¶ã€äºŒé˜¶å¯¼æ•°åœ¨èŠ‚ç‚¹å¤„è¿ç»­\nè¾¹ç•Œçº¦æŸï¼šåœ¨æœ€å¤–ä¾§èŠ‚ç‚¹ä¹‹å¤–å¼ºåˆ¶ä¸ºçº¿æ€§ï¼ˆé™åˆ¶æ€§ï¼‰\n\n\n\n\n\n\n\nåœºæ™¯\nç¤ºä¾‹\n\n\n\n\nå‰‚é‡-ååº”å…³ç³»\nè¯ç‰©å‰‚é‡ä¸ç–—æ•ˆ\n\n\néçº¿æ€§é£é™©\nå¹´é¾„ä¸æ­»äº¡ç‡çš„ J å‹å…³ç³»\n\n\né˜ˆå€¼æ•ˆåº”\nBMI ä¸ç–¾ç—…é£é™©\n\n\næ‹ç‚¹è¯†åˆ«\næœ€ä½³å¹²é¢„åˆ‡ç‚¹",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS)"
    ]
  },
  {
    "objectID": "1027-rcs.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "href": "1027-rcs.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "title": "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS) å®Œå…¨æŒ‡å—",
    "section": "R åŒ…å®‰è£…ä¸åŠ è½½",
    "text": "R åŒ…å®‰è£…ä¸åŠ è½½\n\n# æ ¸å¿ƒåŒ…\nlibrary(rms) # RCS ä¸»åŠ›åŒ…\nlibrary(tidyverse) # æ•°æ®å¤„ç†\nlibrary(ggplot2) # å¯è§†åŒ–\nlibrary(survival) # ç”Ÿå­˜åˆ†æ",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS)"
    ]
  },
  {
    "objectID": "1027-rcs.html#æ•°æ®å‡†å¤‡",
    "href": "1027-rcs.html#æ•°æ®å‡†å¤‡",
    "title": "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS) å®Œå…¨æŒ‡å—",
    "section": "æ•°æ®å‡†å¤‡",
    "text": "æ•°æ®å‡†å¤‡\nä½¿ç”¨æ¨¡æ‹Ÿçš„ BMI ä¸ç³–å°¿ç—…æ•°æ®ï¼š\n\n# æ¨¡æ‹Ÿæ•°æ®\nset.seed(2024)\nn &lt;- 1000\n\ndiabetes_data &lt;- tibble(\n    id = 1:n,\n    age = round(runif(n, 30, 70)),\n    sex = factor(sample(c(\"ç”·\", \"å¥³\"), n, replace = TRUE)),\n    bmi = round(rnorm(n, 26, 5), 1),\n    exercise = round(pmax(0, rnorm(n, 150, 60))),\n    family_history = rbinom(n, 1, 0.25)\n) |&gt;\n    mutate(\n        # éçº¿æ€§ BMI æ•ˆåº”ï¼ˆJ å‹æ›²çº¿ï¼‰\n        bmi_effect = case_when(\n            bmi &lt; 18.5 ~ 0.5, # è¿‡è½»\n            bmi &lt; 24 ~ -0.3, # æ­£å¸¸ï¼ˆå‚ç…§ï¼‰\n            bmi &lt; 28 ~ 0.2, # è¶…é‡\n            bmi &lt; 32 ~ 0.8, # è‚¥èƒ–\n            TRUE ~ 1.5 # é‡åº¦è‚¥èƒ–\n        ) + 0.03 * (bmi - 24)^2 / 10, # é¢å¤–éçº¿æ€§\n\n        # ç³–å°¿ç—…é£é™©\n        logit_p = -3 +\n            bmi_effect +\n            0.04 * (age - 50) -\n            0.003 * pmax(exercise - 150, 0) +\n            0.5 * family_history,\n        p = plogis(logit_p),\n        diabetes = rbinom(n, 1, p)\n    )\n\n# é™åˆ¶ BMI èŒƒå›´\ndiabetes_data &lt;- diabetes_data |&gt;\n    filter(bmi &gt;= 15 & bmi &lt;= 45)\n\nglimpse(diabetes_data)\n\nRows: 988\nColumns: 10\n$ id             &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 16, 17, â€¦\n$ age            &lt;dbl&gt; 63, 43, 57, 58, 48, 58, 47, 42, 65, 35, 66, 68, 58, 51,â€¦\n$ sex            &lt;fct&gt; å¥³, å¥³, ç”·, å¥³, å¥³, ç”·, ç”·, ç”·, å¥³, å¥³, å¥³, å¥³, å¥³, å¥³, ç”·, ç”·, ç”·, å¥³, ç”·â€¦\n$ bmi            &lt;dbl&gt; 25.7, 23.5, 21.5, 24.1, 25.1, 22.3, 21.6, 19.0, 28.0, 2â€¦\n$ exercise       &lt;dbl&gt; 211, 73, 115, 8, 127, 28, 209, 217, 73, 93, 72, 108, 23â€¦\n$ family_history &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0â€¦\n$ bmi_effect     &lt;dbl&gt; 0.20867, -0.29925, -0.28125, 0.20003, 0.20363, -0.29133â€¦\n$ logit_p        &lt;dbl&gt; -2.45433, -3.57925, -3.00125, -2.47997, -2.87637, -2.97â€¦\n$ p              &lt;dbl&gt; 0.07912248, 0.02713951, 0.04736943, 0.07727434, 0.05333â€¦\n$ diabetes       &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0â€¦\n\n# äº‹ä»¶ç‡\nmean(diabetes_data$diabetes)\n\n[1] 0.09109312\n\n\n\næ¢ç´¢æ€§åˆ†æ\n\n# BMI ä¸ç³–å°¿ç—…çš„å…³ç³»ï¼ˆåˆæ­¥æ¢ç´¢ï¼‰\nggplot(diabetes_data, aes(x = bmi, y = diabetes)) +\n    geom_jitter(alpha = 0.2, height = 0.1, color = \"#4f46e5\") +\n    geom_smooth(method = \"loess\", color = \"#ef4444\") +\n    labs(\n        title = \"BMI ä¸ç³–å°¿ç—…é£é™©çš„å…³ç³»\",\n        subtitle = \"LOESS å¹³æ»‘æ›²çº¿æç¤ºéçº¿æ€§å…³ç³»\",\n        x = \"BMI (kg/mÂ²)\",\n        y = \"ç³–å°¿ç—…ï¼ˆ0/1ï¼‰\"\n    ) +\n    theme_minimal(base_size = 12)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS)"
    ]
  },
  {
    "objectID": "1027-rcs.html#è®¾ç½®æ•°æ®åˆ†å¸ƒ",
    "href": "1027-rcs.html#è®¾ç½®æ•°æ®åˆ†å¸ƒ",
    "title": "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS) å®Œå…¨æŒ‡å—",
    "section": "è®¾ç½®æ•°æ®åˆ†å¸ƒ",
    "text": "è®¾ç½®æ•°æ®åˆ†å¸ƒ\nrms åŒ…éœ€è¦å…ˆè®¾ç½®æ•°æ®åˆ†å¸ƒä¿¡æ¯ï¼š\n\n# è®¾ç½®æ•°æ®åˆ†å¸ƒï¼ˆé‡è¦ï¼ï¼‰\ndd &lt;- datadist(diabetes_data)\noptions(datadist = \"dd\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS)"
    ]
  },
  {
    "objectID": "1027-rcs.html#åŸºç¡€-rcs-æ¨¡å‹",
    "href": "1027-rcs.html#åŸºç¡€-rcs-æ¨¡å‹",
    "title": "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS) å®Œå…¨æŒ‡å—",
    "section": "åŸºç¡€ RCS æ¨¡å‹",
    "text": "åŸºç¡€ RCS æ¨¡å‹\n\nèŠ‚ç‚¹æ•°é€‰æ‹©\nèŠ‚ç‚¹æ•°ï¼ˆknotsï¼‰çš„æ¨èï¼š\n\n\n\næ ·æœ¬é‡\næ¨èèŠ‚ç‚¹æ•°\nè‡ªç”±åº¦\n\n\n\n\n&lt; 100\n3\n2\n\n\n100-500\n4\n3\n\n\n&gt; 500\n5\n4\n\n\n\n\n# 4 èŠ‚ç‚¹ RCS Logistic å›å½’\nrcs_model &lt;- lrm(\n    diabetes ~ rcs(bmi, 4) + age + sex + exercise + family_history,\n    data = diabetes_data,\n    x = TRUE, y = TRUE # ä¿ç•™æ•°æ®ç”¨äºåç»­åˆ†æ\n)\n\nprint(rcs_model)\n\nLogistic Regression Model\n\nlrm(formula = diabetes ~ rcs(bmi, 4) + age + sex + exercise + \n    family_history, data = diabetes_data, x = TRUE, y = TRUE)\n\n                       Model Likelihood      Discrimination    Rank Discrim.    \n                             Ratio Test             Indexes          Indexes    \nObs           988    LR chi2      51.03      R2       0.110    C       0.716    \n 0            898    d.f.             7      R2(7,988)0.044    Dxy     0.433    \n 1             90    Pr(&gt; chi2) &lt;0.0001    R2(7,245.4)0.164    gamma   0.433    \nmax |deriv| 2e-10                            Brier    0.078    tau-a   0.072    \n\n               Coef    S.E.   Wald Z Pr(&gt;|Z|)\nIntercept      -1.5828 2.1699 -0.73  0.4657  \nbmi            -0.1417 0.0980 -1.45  0.1483  \nbmi'            0.6742 0.3188  2.11  0.0345  \nbmi''          -2.0604 1.1134 -1.85  0.0642  \nage             0.0412 0.0105  3.92  &lt;0.0001 \nsex=å¥³          0.1248 0.2295  0.54  0.5865  \nexercise       -0.0052 0.0020 -2.61  0.0091  \nfamily_history  0.5879 0.2446  2.40  0.0162  \n\n\n\n\nè§£è¯»è¾“å‡º\n\nWald Ï‡Â² å’Œ Pï¼šæ•´ä½“éçº¿æ€§æ£€éªŒ\nANOVA è¡¨ï¼šåˆ†è§£çº¿æ€§å’Œéçº¿æ€§æ•ˆåº”\n\n\n# ANOVA æ£€éªŒï¼ˆå…³é”®ï¼ï¼‰\nanova(rcs_model)\n\n                Wald Statistics          Response: diabetes \n\n Factor         Chi-Square d.f. P     \n bmi            25.00      3    &lt;.0001\n  Nonlinear      6.44      2    0.0400\n age            15.36      1    0.0001\n sex             0.30      1    0.5865\n exercise        6.80      1    0.0091\n family_history  5.78      1    0.0162\n TOTAL          46.60      7    &lt;.0001\n\n\nè§£è¯»ï¼š - bmi è¡Œçš„ P å€¼ï¼šBMI çš„æ•´ä½“æ•ˆåº” - Nonlinear è¡Œçš„ P å€¼ï¼šéçº¿æ€§æ˜¯å¦æ˜¾è‘— - å¦‚æœ Nonlinear P &lt; 0.05ï¼Œè¯´æ˜éœ€è¦ä½¿ç”¨ RCS è€Œéçº¿æ€§é¡¹",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS)"
    ]
  },
  {
    "objectID": "1027-rcs.html#å¯è§†åŒ–éçº¿æ€§æ•ˆåº”",
    "href": "1027-rcs.html#å¯è§†åŒ–éçº¿æ€§æ•ˆåº”",
    "title": "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS) å®Œå…¨æŒ‡å—",
    "section": "å¯è§†åŒ–éçº¿æ€§æ•ˆåº”",
    "text": "å¯è§†åŒ–éçº¿æ€§æ•ˆåº”\n\nåŸºç¡€å¯è§†åŒ–\n\n# ä½¿ç”¨ rms::Predict å‡½æ•°\npred_bmi &lt;- Predict(rcs_model, bmi, ref.zero = TRUE)\n\n# ç»‘åˆ¶æ•ˆåº”å›¾\nplot(pred_bmi,\n    xlab = \"BMI (kg/mÂ²)\",\n    ylab = \"log(OR)\",\n    main = \"BMI ä¸ç³–å°¿ç—…é£é™©çš„éçº¿æ€§å…³ç³»\"\n)\n\n\n\n\n\n\n\n\n\n\nè‡ªå®šä¹‰ ggplot2 å¯è§†åŒ–\n\n# æå–é¢„æµ‹æ•°æ®\npred_data &lt;- Predict(rcs_model, bmi, ref.zero = TRUE) |&gt;\n    as.data.frame()\n\n# è®¡ç®— OR\npred_data &lt;- pred_data |&gt;\n    mutate(\n        OR = exp(yhat),\n        OR_lower = exp(lower),\n        OR_upper = exp(upper)\n    )\n\n# é«˜è´¨é‡å¯è§†åŒ–\nggplot(pred_data, aes(x = bmi)) +\n    # ç½®ä¿¡åŒºé—´\n    geom_ribbon(aes(ymin = OR_lower, ymax = OR_upper),\n        fill = \"#4f46e5\", alpha = 0.2\n    ) +\n    # ä¸»æ›²çº¿\n    geom_line(aes(y = OR), color = \"#4f46e5\", linewidth = 1.2) +\n    # å‚ç…§çº¿\n    geom_hline(yintercept = 1, linetype = \"dashed\", color = \"gray50\") +\n    # æ·»åŠ åœ°æ¯¯å›¾æ˜¾ç¤ºæ•°æ®åˆ†å¸ƒ\n    geom_rug(\n        data = diabetes_data, aes(x = bmi),\n        inherit.aes = FALSE, alpha = 0.3, sides = \"b\"\n    ) +\n    scale_y_log10(breaks = c(0.5, 1, 2, 4, 8)) +\n    labs(\n        title = \"BMI ä¸ç³–å°¿ç—…é£é™©çš„å‰‚é‡-ååº”å…³ç³»\",\n        subtitle = \"ä½¿ç”¨ 4 èŠ‚ç‚¹é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ï¼Œå‚ç…§ç‚¹: BMI = 24\",\n        x = \"BMI (kg/mÂ²)\",\n        y = \"æ¯”å€¼æ¯” (OR)\",\n        caption = \"é˜´å½±åŒºåŸŸ: 95% ç½®ä¿¡åŒºé—´\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        panel.grid.minor = element_blank()\n    )\n\n\n\n\n\n\n\n\n\n\nè®¾ç½®ä¸åŒå‚ç…§ç‚¹\n\n# ä»¥ BMI = 22ï¼ˆæ­£å¸¸ä¸­å€¼ï¼‰ä¸ºå‚ç…§\npred_22 &lt;- Predict(rcs_model, bmi,\n    ref.zero = TRUE,\n    fun = exp\n) # ç›´æ¥è¾“å‡º OR\n\n# æ›´æ–° datadist çš„å‚ç…§å€¼\ndd$limits$bmi[2] &lt;- 22 # è®¾ç½®å‚ç…§å€¼ä¸º22\noptions(datadist = \"dd\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS)"
    ]
  },
  {
    "objectID": "1027-rcs.html#èŠ‚ç‚¹æ•°é€‰æ‹©-1",
    "href": "1027-rcs.html#èŠ‚ç‚¹æ•°é€‰æ‹©-1",
    "title": "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS) å®Œå…¨æŒ‡å—",
    "section": "èŠ‚ç‚¹æ•°é€‰æ‹©",
    "text": "èŠ‚ç‚¹æ•°é€‰æ‹©\n\næ¯”è¾ƒä¸åŒèŠ‚ç‚¹æ•°\n\n# æ‹Ÿåˆä¸åŒèŠ‚ç‚¹æ•°çš„æ¨¡å‹\nrcs3 &lt;- lrm(diabetes ~ rcs(bmi, 3) + age + sex, data = diabetes_data)\nrcs4 &lt;- lrm(diabetes ~ rcs(bmi, 4) + age + sex, data = diabetes_data)\nrcs5 &lt;- lrm(diabetes ~ rcs(bmi, 5) + age + sex, data = diabetes_data)\n\n# AIC æ¯”è¾ƒ\ndata.frame(\n    èŠ‚ç‚¹æ•° = 3:5,\n    è‡ªç”±åº¦ = c(2, 3, 4),\n    AIC = c(AIC(rcs3), AIC(rcs4), AIC(rcs5))\n)\n\n  èŠ‚ç‚¹æ•° è‡ªç”±åº¦      AIC\n1      3      2 576.3089\n2      4      3 575.6357\n3      5      4 577.0487\n\n\n\n# å¯è§†åŒ–æ¯”è¾ƒ\npred3 &lt;- Predict(rcs3, bmi, ref.zero = TRUE) |&gt;\n    as.data.frame() |&gt;\n    mutate(knots = \"3 èŠ‚ç‚¹\")\npred4 &lt;- Predict(rcs4, bmi, ref.zero = TRUE) |&gt;\n    as.data.frame() |&gt;\n    mutate(knots = \"4 èŠ‚ç‚¹\")\npred5 &lt;- Predict(rcs5, bmi, ref.zero = TRUE) |&gt;\n    as.data.frame() |&gt;\n    mutate(knots = \"5 èŠ‚ç‚¹\")\n\ncompare_data &lt;- bind_rows(pred3, pred4, pred5)\n\nggplot(compare_data, aes(x = bmi, y = exp(yhat), color = knots)) +\n    geom_line(linewidth = 1) +\n    geom_hline(yintercept = 1, linetype = \"dashed\", color = \"gray50\") +\n    scale_color_manual(values = c(\"#22c55e\", \"#4f46e5\", \"#ef4444\")) +\n    scale_y_log10() +\n    labs(\n        title = \"ä¸åŒèŠ‚ç‚¹æ•°çš„ RCS æ›²çº¿æ¯”è¾ƒ\",\n        x = \"BMI\",\n        y = \"OR\",\n        color = \"èŠ‚ç‚¹æ•°\"\n    ) +\n    theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\n\n\nè‡ªå®šä¹‰èŠ‚ç‚¹ä½ç½®\n\n# é»˜è®¤èŠ‚ç‚¹ä½ç½®ï¼ˆåˆ†ä½æ•°ï¼‰\ndefault_knots &lt;- rcspline.eval(diabetes_data$bmi, nk = 4, knots.only = TRUE)\ncat(\"é»˜è®¤èŠ‚ç‚¹ä½ç½®:\", default_knots, \"\\n\")\n\né»˜è®¤èŠ‚ç‚¹ä½ç½®: 18.9 24.3 27.9 34.5 \n\n# è‡ªå®šä¹‰èŠ‚ç‚¹ä½ç½®\ncustom_knots &lt;- c(18.5, 24, 28, 32) # åŸºäº WHO åˆ†ç±»\n\nrcs_custom &lt;- lrm(\n    diabetes ~ rcs(bmi, custom_knots) + age + sex + family_history,\n    data = diabetes_data\n)\n\nanova(rcs_custom)\n\n                Wald Statistics          Response: diabetes \n\n Factor         Chi-Square d.f. P     \n bmi            23.87      3    &lt;.0001\n  Nonlinear      6.30      2    0.0429\n age            15.22      1    0.0001\n sex             0.35      1    0.5536\n family_history  5.13      1    0.0235\n TOTAL          41.75      6    &lt;.0001",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS)"
    ]
  },
  {
    "objectID": "1027-rcs.html#é˜ˆå€¼æ•ˆåº”ä¸æ‹ç‚¹åˆ†æ",
    "href": "1027-rcs.html#é˜ˆå€¼æ•ˆåº”ä¸æ‹ç‚¹åˆ†æ",
    "title": "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS) å®Œå…¨æŒ‡å—",
    "section": "é˜ˆå€¼æ•ˆåº”ä¸æ‹ç‚¹åˆ†æ",
    "text": "é˜ˆå€¼æ•ˆåº”ä¸æ‹ç‚¹åˆ†æ\n\nè§†è§‰è¯†åˆ«æ‹ç‚¹\n\n# ä»æ›²çº¿è¯†åˆ«æ½œåœ¨æ‹ç‚¹\npred_detailed &lt;- Predict(rcs_model, bmi = seq(15, 45, 0.5), ref.zero = TRUE) |&gt;\n    as.data.frame() |&gt;\n    mutate(OR = exp(yhat))\n\n# æ‰¾åˆ° OR = 1 çš„äº¤ç‚¹ï¼ˆå³é£é™©å¼€å§‹å¢åŠ çš„é˜ˆå€¼ï¼‰\nthreshold_idx &lt;- which.min(abs(pred_detailed$OR - 1))\nthreshold_bmi &lt;- pred_detailed$bmi[threshold_idx]\n\ncat(\"é£é™©å¼€å§‹å¢åŠ çš„ BMI é˜ˆå€¼çº¦:\", round(threshold_bmi, 1), \"\\n\")\n\né£é™©å¼€å§‹å¢åŠ çš„ BMI é˜ˆå€¼çº¦: 26 \n\n\n\n\næœ€ä¼˜åˆ‡ç‚¹åˆ†æ\n\n# è®¡ç®—å„ BMI æ°´å¹³ç›¸å¯¹äºä¸åŒå‚ç…§çš„ OR\n# è¿™æœ‰åŠ©äºè¯†åˆ«ä¸´åºŠæœ‰æ„ä¹‰çš„åˆ‡ç‚¹\n\n# åˆ›å»ºé¢„æµ‹æ•°æ®æ¡†\npred_grid &lt;- expand.grid(\n    bmi = seq(18, 40, 2),\n    age = median(diabetes_data$age),\n    sex = \"ç”·\",\n    exercise = median(diabetes_data$exercise),\n    family_history = 0\n)\n\n# é¢„æµ‹é£é™©\npred_grid$prob &lt;- predict(rcs_model, newdata = pred_grid, type = \"fitted\")\n\n# å¯è§†åŒ–é£é™©æ›²çº¿\nggplot(pred_grid, aes(x = bmi, y = prob)) +\n    geom_line(color = \"#4f46e5\", linewidth = 1.2) +\n    geom_point(color = \"#4f46e5\", size = 2) +\n    scale_y_continuous(labels = scales::percent_format()) +\n    labs(\n        title = \"BMI ä¸é¢„æµ‹ç³–å°¿ç—…é£é™©\",\n        subtitle = \"æ§åˆ¶å¹´é¾„ã€æ€§åˆ«ã€è¿åŠ¨é‡å’Œå®¶æ—å²\",\n        x = \"BMI (kg/mÂ²)\",\n        y = \"é¢„æµ‹é£é™©\"\n    ) +\n    theme_minimal(base_size = 12)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS)"
    ]
  },
  {
    "objectID": "1027-rcs.html#ä¸ç”Ÿå­˜åˆ†æç»“åˆ",
    "href": "1027-rcs.html#ä¸ç”Ÿå­˜åˆ†æç»“åˆ",
    "title": "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS) å®Œå…¨æŒ‡å—",
    "section": "ä¸ç”Ÿå­˜åˆ†æç»“åˆ",
    "text": "ä¸ç”Ÿå­˜åˆ†æç»“åˆ\n\nCox å›å½’ä¸­çš„ RCS\n\n# æ¨¡æ‹Ÿç”Ÿå­˜æ•°æ®\nset.seed(42)\nsurvival_data &lt;- diabetes_data |&gt;\n    mutate(\n        # ç”Ÿå­˜æ—¶é—´\n        time = rexp(n(), rate = 0.05 + 0.02 * diabetes),\n        time = pmin(time, 10), # æœ€é•¿éšè®¿10å¹´\n        # åˆ å¤±\n        censor_time = runif(n(), 3, 10),\n        surv_time = pmin(time, censor_time),\n        status = as.integer(time &lt;= censor_time)\n    )\n\n# è®¾ç½® datadist\ndd &lt;- datadist(survival_data)\noptions(datadist = \"dd\")\n\n# Cox å›å½’ with RCS\ncox_rcs &lt;- cph(\n    Surv(surv_time, status) ~ rcs(bmi, 4) + age + sex,\n    data = survival_data,\n    x = TRUE, y = TRUE\n)\n\nprint(cox_rcs)\n\nCox Proportional Hazards Model\n\ncph(formula = Surv(surv_time, status) ~ rcs(bmi, 4) + age + sex, \n    data = survival_data, x = TRUE, y = TRUE)\n\n                        Model Tests    Discrimination    \n                                              Indexes    \nObs        988    LR chi2      4.27    R2       0.004    \nEvents     249    d.f.            5    R2(5,988)0.000    \nCenter -1.3206    Pr(&gt; chi2) 0.5108    R2(5,249)0.000    \n                  Score chi2   4.45    Dxy      0.079    \n                  Pr(&gt; chi2) 0.4861                      \n\n       Coef    S.E.   Wald Z Pr(&gt;|Z|)\nbmi    -0.0807 0.0500 -1.61  0.1066  \nbmi'    0.2451 0.1683  1.46  0.1452  \nbmi''  -0.8160 0.6133 -1.33  0.1834  \nage     0.0071 0.0056  1.27  0.2026  \nsex=å¥³  0.0417 0.1272  0.33  0.7429  \n\nanova(cox_rcs)\n\n                Wald Statistics          Response: Surv(surv_time, status) \n\n Factor     Chi-Square d.f. P     \n bmi        2.61       3    0.4554\n  Nonlinear 2.37       2    0.3063\n age        1.62       1    0.2026\n sex        0.11       1    0.7429\n TOTAL      4.45       5    0.4860\n\n\n\n# å¯è§†åŒ– HR æ›²çº¿\npred_cox &lt;- Predict(cox_rcs, bmi, ref.zero = TRUE, fun = exp)\n\nggplot(as.data.frame(pred_cox), aes(x = bmi)) +\n    geom_ribbon(aes(ymin = lower, ymax = upper), fill = \"#ef4444\", alpha = 0.2) +\n    geom_line(aes(y = yhat), color = \"#ef4444\", linewidth = 1.2) +\n    geom_hline(yintercept = 1, linetype = \"dashed\") +\n    scale_y_log10() +\n    labs(\n        title = \"BMI ä¸æ­»äº¡é£é™©ï¼ˆCox å›å½’ + RCSï¼‰\",\n        x = \"BMI (kg/mÂ²)\",\n        y = \"é£é™©æ¯” (HR)\"\n    ) +\n    theme_minimal(base_size = 12)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS)"
    ]
  },
  {
    "objectID": "1027-rcs.html#å¤šå˜é‡éçº¿æ€§æ¨¡å‹",
    "href": "1027-rcs.html#å¤šå˜é‡éçº¿æ€§æ¨¡å‹",
    "title": "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS) å®Œå…¨æŒ‡å—",
    "section": "å¤šå˜é‡éçº¿æ€§æ¨¡å‹",
    "text": "å¤šå˜é‡éçº¿æ€§æ¨¡å‹\n\n# å¤šä¸ªå˜é‡ä½¿ç”¨ RCS\nmulti_rcs &lt;- lrm(\n    diabetes ~ rcs(bmi, 4) + rcs(age, 3) + rcs(exercise, 3) + sex + family_history,\n    data = diabetes_data\n)\n\nanova(multi_rcs)\n\n                Wald Statistics          Response: diabetes \n\n Factor          Chi-Square d.f. P     \n bmi             24.86      3    &lt;.0001\n  Nonlinear       6.24      2    0.0441\n age             19.78      2    0.0001\n  Nonlinear       2.64      1    0.1042\n exercise        11.93      2    0.0026\n  Nonlinear       3.96      1    0.0466\n sex              0.22      1    0.6376\n family_history   4.97      1    0.0257\n TOTAL NONLINEAR 12.33      4    0.0150\n TOTAL           52.46      9    &lt;.0001\n\n\n\n# å¯è§†åŒ–æ‰€æœ‰éçº¿æ€§æ•ˆåº”\nplot(Predict(multi_rcs), layout = c(2, 3))",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS)"
    ]
  },
  {
    "objectID": "1027-rcs.html#äº¤äº’ä½œç”¨",
    "href": "1027-rcs.html#äº¤äº’ä½œç”¨",
    "title": "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS) å®Œå…¨æŒ‡å—",
    "section": "äº¤äº’ä½œç”¨",
    "text": "äº¤äº’ä½œç”¨\n\nRCS Ã— åˆ†ç±»å˜é‡\n\n# BMI æ•ˆåº”æ˜¯å¦å› æ€§åˆ«è€Œå¼‚\nrcs_interact &lt;- lrm(\n    diabetes ~ rcs(bmi, 4) * sex + age + family_history,\n    data = diabetes_data\n)\n\nanova(rcs_interact)\n\n                Wald Statistics          Response: diabetes \n\n Factor                                   Chi-Square d.f. P     \n bmi  (Factor+Higher Order Factors)       28.20      6    0.0001\n  All Interactions                         4.74      3    0.1918\n  Nonlinear (Factor+Higher Order Factors) 11.50      4    0.0215\n sex  (Factor+Higher Order Factors)        5.10      4    0.2774\n  All Interactions                         4.74      3    0.1918\n age                                      15.49      1    0.0001\n family_history                            5.03      1    0.0249\n bmi * sex  (Factor+Higher Order Factors)  4.74      3    0.1918\n  Nonlinear                                4.61      2    0.0996\n  Nonlinear Interaction : f(A,B) vs. AB    4.61      2    0.0996\n TOTAL NONLINEAR                          11.50      4    0.0215\n TOTAL NONLINEAR + INTERACTION            11.51      5    0.0422\n TOTAL                                    45.38      9    &lt;.0001\n\n\n\n# æŒ‰æ€§åˆ«åˆ†å±‚å¯è§†åŒ–\npred_sex &lt;- Predict(rcs_interact, bmi, sex, ref.zero = TRUE)\n\nggplot(as.data.frame(pred_sex), aes(\n    x = bmi, y = exp(yhat),\n    color = sex, fill = sex\n)) +\n    geom_ribbon(aes(ymin = exp(lower), ymax = exp(upper)), alpha = 0.2, color = NA) +\n    geom_line(linewidth = 1.2) +\n    geom_hline(yintercept = 1, linetype = \"dashed\") +\n    scale_color_manual(values = c(\"#4f46e5\", \"#ef4444\")) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#ef4444\")) +\n    scale_y_log10() +\n    labs(\n        title = \"BMI ä¸ç³–å°¿ç—…é£é™©çš„æ€§åˆ«å·®å¼‚\",\n        x = \"BMI (kg/mÂ²)\",\n        y = \"OR\",\n        color = \"æ€§åˆ«\",\n        fill = \"æ€§åˆ«\"\n    ) +\n    theme_minimal(base_size = 12)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS)"
    ]
  },
  {
    "objectID": "1027-rcs.html#æ¨¡å‹è¯Šæ–­ä¸éªŒè¯",
    "href": "1027-rcs.html#æ¨¡å‹è¯Šæ–­ä¸éªŒè¯",
    "title": "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS) å®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹è¯Šæ–­ä¸éªŒè¯",
    "text": "æ¨¡å‹è¯Šæ–­ä¸éªŒè¯\n\næ ¡å‡†æ›²çº¿\n\n# å†…éƒ¨éªŒè¯\ncal &lt;- calibrate(rcs_model, B = 200) # 200 æ¬¡ Bootstrap\nplot(cal, main = \"æ ¡å‡†æ›²çº¿\")\n\n\n\n\n\n\n\n\n\nn=988   Mean absolute error=0.009   Mean squared error=0.00012\n0.9 Quantile of absolute error=0.017\n\n\n\n\nåŒºåˆ†åº¦\n\n# C ç»Ÿè®¡é‡\ncat(\"C ç»Ÿè®¡é‡ (AUC):\", rcs_model$stats[\"C\"], \"\\n\")\n\nC ç»Ÿè®¡é‡ (AUC): 0.7164192 \n\n\n\n\nBootstrap éªŒè¯\n\n# è¿‡æ‹Ÿåˆæ ¡æ­£\nvalidate(rcs_model, B = 200)\n\n          index.orig training    test optimism index.corrected   Lower  Upper\nDxy           0.4328   0.4517  0.4087   0.0431          0.3898  0.2816 0.5064\nR2            0.1102   0.1244  0.0979   0.0265          0.0838  0.0227 0.1423\nIntercept     0.0000   0.0000 -0.2105   0.2105         -0.2105 -0.8082 0.7148\nSlope         1.0000   1.0000  0.8965   0.1035          0.8965  0.6111 1.2971\nEmax          0.0000   0.0000  0.1001  -0.1001          0.1001 -0.0383 0.2673\nD             0.0506   0.0576  0.0447   0.0129          0.0378  0.0065 0.0665\nU            -0.0020  -0.0020  0.0008  -0.0029          0.0008 -0.0037 0.0098\nQ             0.0527   0.0596  0.0439   0.0157          0.0369 -0.0009 0.0680\nB             0.0777   0.0768  0.0786  -0.0018          0.0795  0.0654 0.0917\ng             0.9112   0.9662  0.8492   0.1170          0.7941  0.5244 1.0690\ngp            0.0712   0.0747  0.0671   0.0076          0.0636  0.0413 0.0845\n            n\nDxy       200\nR2        200\nIntercept 200\nSlope     200\nEmax      200\nD         200\nU         200\nQ         200\nB         200\ng         200\ngp        200",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS)"
    ]
  },
  {
    "objectID": "1027-rcs.html#ç»“æœæŠ¥å‘Š",
    "href": "1027-rcs.html#ç»“æœæŠ¥å‘Š",
    "title": "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS) å®Œå…¨æŒ‡å—",
    "section": "ç»“æœæŠ¥å‘Š",
    "text": "ç»“æœæŠ¥å‘Š\n\næ ‡å‡†æ ¼å¼\n\n# æå–ç‰¹å®š BMI å€¼çš„ OR\nspecific_bmi &lt;- c(18.5, 22, 25, 28, 30, 35)\nref_bmi &lt;- 22 # å‚ç…§å€¼\n\n# é‡æ–°è®¾ç½®å‚ç…§\ndd$limits$bmi[2] &lt;- ref_bmi\noptions(datadist = \"dd\")\n\n# é¢„æµ‹\npred_specific &lt;- Predict(rcs_model, bmi = specific_bmi, ref.zero = TRUE)\npred_table &lt;- as.data.frame(pred_specific) |&gt;\n    mutate(\n        OR = round(exp(yhat), 2),\n        CI_lower = round(exp(lower), 2),\n        CI_upper = round(exp(upper), 2),\n        OR_CI = paste0(OR, \" (\", CI_lower, \"-\", CI_upper, \")\")\n    ) |&gt;\n    select(bmi, OR_CI)\n\npred_table\n\n   bmi            OR_CI\n1 18.5 1.12 (0.54-2.33)\n2 22.0 0.74 (0.53-1.03)\n3 25.0 0.83 (0.72-0.96)\n4 28.0 1.53 (1.15-2.03)\n5 30.0 2.15 (1.43-3.23)\n6 35.0 3.68 (2.07-6.56)\n\n\n\n\næ£®æ—å›¾é£æ ¼å±•ç¤º\n\n# å‡†å¤‡æ•°æ®\nforest_data &lt;- as.data.frame(pred_specific) |&gt;\n    mutate(\n        OR = exp(yhat),\n        lower = exp(lower),\n        upper = exp(upper),\n        label = paste0(\"BMI = \", bmi)\n    )\n\nggplot(forest_data, aes(x = OR, y = reorder(label, bmi))) +\n    geom_vline(xintercept = 1, linetype = \"dashed\", color = \"gray50\") +\n    geom_errorbarh(aes(xmin = lower, xmax = upper), height = 0.2, color = \"#4f46e5\") +\n    geom_point(size = 3, color = \"#4f46e5\") +\n    scale_x_log10(breaks = c(0.5, 1, 2, 4)) +\n    labs(\n        title = \"ä¸åŒ BMI æ°´å¹³çš„ç³–å°¿ç—…é£é™©\",\n        subtitle = \"å‚ç…§: BMI = 22 kg/mÂ²\",\n        x = \"æ¯”å€¼æ¯” (OR)\",\n        y = NULL\n    ) +\n    theme_minimal(base_size = 12)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS)"
    ]
  },
  {
    "objectID": "1027-rcs.html#å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "href": "1027-rcs.html#å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "title": "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS) å®Œå…¨æŒ‡å—",
    "section": "å¸¸è§é—®é¢˜ä¸é™·é˜±",
    "text": "å¸¸è§é—®é¢˜ä¸é™·é˜±\n\n1. èŠ‚ç‚¹æ•°é€‰æ‹©\n# - èŠ‚ç‚¹è¿‡å°‘ï¼šå¯èƒ½é—æ¼çœŸå®éçº¿æ€§\n# - èŠ‚ç‚¹è¿‡å¤šï¼šå¯èƒ½è¿‡æ‹Ÿåˆ\n# - æ¨èï¼šä½¿ç”¨ AIC/BIC é€‰æ‹©ï¼Œæˆ–éµå¾ªæ ·æœ¬é‡è§„åˆ™\n\n\n2. è¾¹ç•Œä¸ç¨³å®š\n# RCS å¼ºåˆ¶è¾¹ç•Œçº¿æ€§ï¼Œä½†æ•°æ®ç¨€ç–åŒºåŸŸä»å¯èƒ½ä¸ç¨³å®š\n# è§£å†³æ–¹æ¡ˆï¼š\n# - æ£€æŸ¥è¾¹ç•Œæ•°æ®é‡\n# - è€ƒè™‘æ’é™¤æç«¯å€¼\n# - å¢åŠ  Bootstrap éªŒè¯\n\n\n3. å› æœæ¨æ–­å±€é™\n# RCS æ¢ç´¢çš„æ˜¯å…³è”ï¼Œä¸æ˜¯å› æœ\n# éçº¿æ€§å…³ç³»å¯èƒ½ç”±æ··æ‚å¯¼è‡´\n# å› æœæ¨æ–­éœ€è¦é¢å¤–æ–¹æ³•ï¼ˆDAG, å·¥å…·å˜é‡ç­‰ï¼‰\n\n\n4. å‚ç…§ç‚¹é€‰æ‹©\n# ä¸åŒå‚ç…§ç‚¹ä¸å½±å“éçº¿æ€§æ£€éªŒï¼Œä½†å½±å“ OR è§£è¯»\n# æ¨èä½¿ç”¨ä¸´åºŠæœ‰æ„ä¹‰çš„å‚ç…§ç‚¹ï¼ˆå¦‚ BMI = 22 æˆ– 24ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS)"
    ]
  },
  {
    "objectID": "1027-rcs.html#å®Œæ•´åˆ†ææ¨¡æ¿",
    "href": "1027-rcs.html#å®Œæ•´åˆ†ææ¨¡æ¿",
    "title": "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS) å®Œå…¨æŒ‡å—",
    "section": "å®Œæ•´åˆ†ææ¨¡æ¿",
    "text": "å®Œæ•´åˆ†ææ¨¡æ¿\n\n# ========== RCS åˆ†æå®Œæ•´æµç¨‹ ==========\n\nlibrary(rms)\n\n# 1. è®¾ç½®æ•°æ®åˆ†å¸ƒ\ndd &lt;- datadist(data)\noptions(datadist = \"dd\")\n\n# 2. æ‹Ÿåˆæ¨¡å‹\nmodel &lt;- lrm(y ~ rcs(x, 4) + covariates, data = data)\n\n# 3. æ£€éªŒéçº¿æ€§\nanova(model)\n\n# 4. å¯è§†åŒ–\nPredict(model, x, ref.zero = TRUE) |&gt; plot()\n\n# 5. æŠ¥å‘Šç‰¹å®šå€¼çš„ OR\nPredict(model, x = c(value1, value2, value3), ref.zero = TRUE)\n\n# 6. æ¨¡å‹éªŒè¯\nvalidate(model, B = 200)\ncalibrate(model, B = 200)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS)"
    ]
  },
  {
    "objectID": "1027-rcs.html#æ€»ç»“",
    "href": "1027-rcs.html#æ€»ç»“",
    "title": "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS) å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\næ­¥éª¤\nå‡½æ•°\nç›®çš„\n\n\n\n\nè®¾ç½®åˆ†å¸ƒ\ndatadist()\nå®šä¹‰å˜é‡çš„å‚ç…§å€¼å’ŒèŒƒå›´\n\n\nå»ºç«‹ RCS\nrcs(x, k)\nç”Ÿæˆæ ·æ¡åŸºå‡½æ•°\n\n\néçº¿æ€§æ£€éªŒ\nanova()\nåˆ¤æ–­æ˜¯å¦éœ€è¦éçº¿æ€§é¡¹\n\n\nå¯è§†åŒ–\nPredict() + plot()\nå±•ç¤ºå‰‚é‡-ååº”å…³ç³»\n\n\néªŒè¯\nvalidate(), calibrate()\nå†…éƒ¨éªŒè¯\n\n\n\n\næŠ¥å‘Š RCS åˆ†æçš„ Checklist\n\nè¯´æ˜ä½¿ç”¨ RCS çš„ç†ç”±ï¼ˆé¢„æœŸéçº¿æ€§ï¼‰\næŠ¥å‘ŠèŠ‚ç‚¹æ•°å’Œä½ç½®\næŠ¥å‘Šéçº¿æ€§æ£€éªŒ P å€¼\næä¾›å‰‚é‡-ååº”æ›²çº¿å›¾\næŠ¥å‘Šç‰¹å®šæ°´å¹³çš„æ•ˆåº”ä¼°è®¡\næ˜ç¡®å‚ç…§ç‚¹\nè¿›è¡Œæ¨¡å‹éªŒè¯\n\n\n\næ¨èé˜…è¯»\n\nHarrell FE. Regression Modeling Strategies\nDesquilbet L, Mariotti F (2010). Dose-response analyses using restricted cubic spline functions. Stata Journal\nrms åŒ…æ–‡æ¡£",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS)"
    ]
  },
  {
    "objectID": "1029-umbrella-review.html",
    "href": "1029-umbrella-review.html",
    "title": "ä¼çŠ¶ç»¼è¿° (Umbrella Review) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "ä¼çŠ¶ç»¼è¿° (Umbrella Review)ï¼Œä¹Ÿç§°ä¸ºç³»ç»Ÿè¯„ä»·çš„ç³»ç»Ÿè¯„ä»· (Review of Reviews)ï¼Œå¤„äºå¾ªè¯åŒ»å­¦è¯æ®é‡‘å­—å¡”çš„é¡¶ç«¯ã€‚\nä¼ ç»Ÿçš„ Meta åˆ†æ æ•´åˆäº†å¤šä¸ªç‹¬ç«‹ç ”ç©¶çš„ç»“æœï¼Œè€Œ ä¼çŠ¶ç»¼è¿° åˆ™æ•´åˆäº†é’ˆå¯¹åŒä¸€ä¸»é¢˜ï¼ˆæˆ–å¹¿æ³›ä¸»é¢˜ï¼‰çš„å¤šä¸ª Meta åˆ†æç»“æœã€‚\n\n\n\nè§£å†³çŸ›ç›¾ï¼šå½“ä¸åŒçš„ Meta åˆ†æå¾—å‡ºä¸ä¸€è‡´çš„ç»“è®ºæ—¶ã€‚\nå…¨é¢æ¦‚è§ˆï¼šæä¾›æ¯”å•ä¸€ Meta åˆ†ææ›´å¹¿é˜”çš„è§†é‡ï¼ˆä¾‹å¦‚ï¼Œâ€œä½“è‚²é”»ç‚¼å¯¹æ‰€æœ‰å¥åº·ç»“å±€çš„å½±å“â€ï¼‰ã€‚\nè¯æ®åˆ†çº§ï¼šä¸ä»…å…³æ³¨æ˜¯å¦æ˜¾è‘—ï¼Œæ›´å…³æ³¨è¯æ®çš„å¯ä¿¡åº¦å’Œå¼ºåº¦ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "ä¼çŠ¶ç»¼è¿°"
    ]
  },
  {
    "objectID": "1029-umbrella-review.html#ä»€ä¹ˆæ˜¯ä¼çŠ¶ç»¼è¿°",
    "href": "1029-umbrella-review.html#ä»€ä¹ˆæ˜¯ä¼çŠ¶ç»¼è¿°",
    "title": "ä¼çŠ¶ç»¼è¿° (Umbrella Review) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "ä¼çŠ¶ç»¼è¿° (Umbrella Review)ï¼Œä¹Ÿç§°ä¸ºç³»ç»Ÿè¯„ä»·çš„ç³»ç»Ÿè¯„ä»· (Review of Reviews)ï¼Œå¤„äºå¾ªè¯åŒ»å­¦è¯æ®é‡‘å­—å¡”çš„é¡¶ç«¯ã€‚\nä¼ ç»Ÿçš„ Meta åˆ†æ æ•´åˆäº†å¤šä¸ªç‹¬ç«‹ç ”ç©¶çš„ç»“æœï¼Œè€Œ ä¼çŠ¶ç»¼è¿° åˆ™æ•´åˆäº†é’ˆå¯¹åŒä¸€ä¸»é¢˜ï¼ˆæˆ–å¹¿æ³›ä¸»é¢˜ï¼‰çš„å¤šä¸ª Meta åˆ†æç»“æœã€‚\n\n\n\nè§£å†³çŸ›ç›¾ï¼šå½“ä¸åŒçš„ Meta åˆ†æå¾—å‡ºä¸ä¸€è‡´çš„ç»“è®ºæ—¶ã€‚\nå…¨é¢æ¦‚è§ˆï¼šæä¾›æ¯”å•ä¸€ Meta åˆ†ææ›´å¹¿é˜”çš„è§†é‡ï¼ˆä¾‹å¦‚ï¼Œâ€œä½“è‚²é”»ç‚¼å¯¹æ‰€æœ‰å¥åº·ç»“å±€çš„å½±å“â€ï¼‰ã€‚\nè¯æ®åˆ†çº§ï¼šä¸ä»…å…³æ³¨æ˜¯å¦æ˜¾è‘—ï¼Œæ›´å…³æ³¨è¯æ®çš„å¯ä¿¡åº¦å’Œå¼ºåº¦ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "ä¼çŠ¶ç»¼è¿°"
    ]
  },
  {
    "objectID": "1029-umbrella-review.html#å·¥å…·ä»‹ç»metaumbrella",
    "href": "1029-umbrella-review.html#å·¥å…·ä»‹ç»metaumbrella",
    "title": "ä¼çŠ¶ç»¼è¿° (Umbrella Review) å®Œå…¨æŒ‡å—",
    "section": "å·¥å…·ä»‹ç»ï¼šmetaumbrella",
    "text": "å·¥å…·ä»‹ç»ï¼šmetaumbrella\nåœ¨ R è¯­è¨€ä¸­ï¼Œmetaumbrella æ˜¯ç›®å‰æœ€å…¨é¢çš„ä¼çŠ¶ç»¼è¿°è‡ªåŠ¨åŒ–å·¥å…·ã€‚å®ƒèƒ½å¤Ÿï¼š - è‡ªåŠ¨è®¡ç®—æ•ˆåº”é‡ï¼ˆOR, RR, HR, Mean Difference ç­‰ï¼‰ã€‚ - è¿›è¡Œå¼‚è´¨æ€§æ£€éªŒ (I2)ã€‚ - æ£€æµ‹å°æ ·æœ¬æ•ˆåº” (Eggerâ€™s test)ã€‚ - è®¡ç®—è¶…é¢æ˜¾è‘—æ€§åå·® (Excess Significance Bias)ã€‚ - åŸºäº Ioannidis ç­‰æ ‡å‡†è‡ªåŠ¨è¿›è¡Œè¯æ®åˆ†çº§ã€‚\n\nå®‰è£…\n\ninstall.packages(\"metaumbrella\")\ninstall.packages(\"ggplot2\")\n\n\nlibrary(metaumbrella)\nlibrary(ggplot2)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "ä¼çŠ¶ç»¼è¿°"
    ]
  },
  {
    "objectID": "1029-umbrella-review.html#æ•°æ®å‡†å¤‡",
    "href": "1029-umbrella-review.html#æ•°æ®å‡†å¤‡",
    "title": "ä¼çŠ¶ç»¼è¿° (Umbrella Review) å®Œå…¨æŒ‡å—",
    "section": "3. æ•°æ®å‡†å¤‡",
    "text": "3. æ•°æ®å‡†å¤‡\nè¿›è¡Œä¼çŠ¶ç»¼è¿°ï¼Œæ•°æ®é€šå¸¸æ¥æºäºå·²å‘è¡¨çš„ Meta åˆ†ææ–‡ç« ã€‚æˆ‘ä»¬éœ€è¦æ•´ç†å‡ºä¸€ä¸ªæ ‡å‡†çš„æ•°æ®æ¡†ã€‚\næˆ‘ä»¬ä½¿ç”¨åŒ…ä¸­è‡ªå¸¦çš„æ•°æ®é›† df.OR ä½œä¸ºç¤ºä¾‹ã€‚è¿™æ˜¯ä¸€ä¸ªå…³äºåŸºå› å¤šæ€æ€§ä¸ç–¾ç—…é£é™©çš„ Meta åˆ†æé›†åˆã€‚\n\ndata(\"df.OR\")\n# æŸ¥çœ‹æ•°æ®ç»“æ„çš„å‰å‡ è¡Œ\nhead(df.OR)\n\n  meta_review factor   author year measure    value     ci_lo    ci_up n_cases\n1     Dalager   ADHD   Burris 1995      OR 2.647059 1.3884096 5.046724     117\n2     Dalager   ADHD  Talbott 2016      OR 1.127907 0.6032607 2.108830     111\n3     Dalager   ADHD al-Mussa 1989      OR 2.229465 1.2235551 4.062356      95\n4     Dalager   ADHD  al-Rauf 2011      OR 1.102941 0.5622246 2.163689      93\n5     Dalager   ADHD     Rand 2015      OR 0.937500 0.5154349 1.705174     100\n6     Dalager   ADHD    Prawl 1999      OR 1.177885 0.6400561 2.167641      90\n  n_controls n_exp n_nexp n_cases_exp n_cases_nexp n_controls_exp\n1        107    56    168          39           78             17\n2        122    50    183          25           86             25\n3        121    62    154          36           59             26\n4         84    46    131          25           68             21\n5        102    62    140          30           70             32\n6        130    57    163          25           65             32\n  n_controls_nexp\n1              90\n2              97\n3              95\n4              63\n5              70\n6              98\n\n\n\næ•°æ®å­—æ®µè¯´æ˜\né€šå¸¸éœ€è¦ä»¥ä¸‹å…³é”®åˆ—ï¼š - meta_review: æ‰€å±çš„ Meta åˆ†ææˆ–å› ç´ åç§°ï¼ˆå¦‚ â€œGene A vs Diseaseâ€ï¼‰ã€‚ - author: çº³å…¥çš„åŸå§‹ç ”ç©¶ç¬¬ä¸€ä½œè€…ã€‚ - year: å‘è¡¨å¹´ä»½ã€‚ - n_cases_exp, n_cases_nexp: ç—…ä¾‹ç»„çš„æš´éœ²/éæš´éœ²äººæ•°ã€‚ - n_controls_exp, n_controls_nexp: å¯¹ç…§ç»„çš„æš´éœ²/éæš´éœ²äººæ•°ã€‚\n\n[!TIP] å¦‚æœä½ çš„æ•°æ®æ˜¯è¿ç»­å˜é‡ï¼ˆå‡å€¼å·®ï¼‰ï¼Œåˆ™éœ€è¦ n_group1, mean_group1, sd_group1 ç­‰åˆ—ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "ä¼çŠ¶ç»¼è¿°"
    ]
  },
  {
    "objectID": "1029-umbrella-review.html#æ ¸å¿ƒåˆ†æumbrella",
    "href": "1029-umbrella-review.html#æ ¸å¿ƒåˆ†æumbrella",
    "title": "ä¼çŠ¶ç»¼è¿° (Umbrella Review) å®Œå…¨æŒ‡å—",
    "section": "æ ¸å¿ƒåˆ†æï¼šumbrella()",
    "text": "æ ¸å¿ƒåˆ†æï¼šumbrella()\numbrella() å‡½æ•°æ˜¯è¯¥åŒ…çš„æ ¸å¿ƒï¼Œå®ƒä¸€æ¬¡æ€§å®Œæˆæ‰€æœ‰ç»Ÿè®¡å·¥ä½œã€‚\n\n# æ‰§è¡Œä¼çŠ¶ç»¼è¿°åˆ†æ\n# method.var = \"REML\" æ¨èä½¿ç”¨é™åˆ¶æ€§æå¤§ä¼¼ç„¶æ³•ä¼°è®¡å¼‚è´¨æ€§\numb.results &lt;- umbrella(df.OR, method.var = \"REML\")\n\nAnalyzing factor: ADHD \nAnalyzing factor: ASD \nAnalyzing factor: dyslexia \nAnalyzing factor: ID \n\n\nè¿™ä¸ªå¯¹è±¡åŒ…å«äº†å¤§é‡ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ¯ä¸ªå› ç´ çš„æ±‡æ€»æ•ˆåº”é‡ã€95% ç½®ä¿¡åŒºé—´ã€p å€¼ã€I2 ç»Ÿè®¡é‡ã€Egger æ£€éªŒç»“æœç­‰ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "ä¼çŠ¶ç»¼è¿°"
    ]
  },
  {
    "objectID": "1029-umbrella-review.html#è¯æ®åˆ†çº§-evidence-stratification",
    "href": "1029-umbrella-review.html#è¯æ®åˆ†çº§-evidence-stratification",
    "title": "ä¼çŠ¶ç»¼è¿° (Umbrella Review) å®Œå…¨æŒ‡å—",
    "section": "è¯æ®åˆ†çº§ (Evidence Stratification)",
    "text": "è¯æ®åˆ†çº§ (Evidence Stratification)\nè¿™æ˜¯ä¼çŠ¶ç»¼è¿°æœ€å…³é”®çš„ä¸€æ­¥ã€‚æˆ‘ä»¬ä¸ä»…ä»…çœ‹ P å€¼æ˜¯å¦å°äº 0.05ï¼Œè¿˜è¦çœ‹è¯æ®æ˜¯å¦â€œç¨³å¥â€ã€‚é€šå¸¸ä½¿ç”¨ Ioannidis (2011) çš„æ ‡å‡†ã€‚\nIoannidis åˆ†çº§æ ‡å‡†é€šå¸¸åŒ…æ‹¬ï¼š - Class I (Convincing): P &lt; 10-6, I2 &lt; 50%, æ— å°æ ·æœ¬æ•ˆåº”, æ ·æœ¬é‡å……è¶³ (&gt;1000ä¾‹æˆ–&gt;10%ç ”ç©¶), 95%é¢„æµ‹åŒºé—´ä¸åŒ…å«æ— æ•ˆå€¼ã€‚ - Class II (Highly Suggestive): P &lt; 10-6, æœ€å¤§ç ”ç©¶æ˜¾è‘—, ä½†å¯èƒ½å­˜åœ¨ä¸€å®šå¼‚è´¨æ€§ã€‚ - Class III (Suggestive): P &lt; 10-3. - Class IV (Weak): P &lt; 0.05. - ns: P &gt; 0.05.\n\n# ä¾æ® \"Ioannidis\" æ ‡å‡†è¿›è¡Œåˆ†çº§\nevid.res &lt;- add.evidence(umb.results, criteria = \"Ioannidis\")\n\n# æŸ¥çœ‹é’ˆå¯¹æ¯ä¸ªå› ç´ çš„åˆ†çº§ç»“æœ\nsummary(evid.res)\n\n    Factor  Criteria Class measure value       value_CI    eG           eG_CI\n1     ADHD Ioannidis    IV      OR 1.526 [1.043, 2.231] 0.233  [0.023, 0.443]\n3 dyslexia Ioannidis    IV      OR 1.498 [1.004, 2.236] 0.223  [0.002, 0.444]\n4       ID Ioannidis    IV      OR 1.355 [1.078, 1.703] 0.167  [0.041, 0.293]\n2      ASD Ioannidis    ns      OR 1.020 [0.778, 1.339] 0.011 [-0.139, 0.161]\n    eOR         eOR_CI  p_value n_studies n_cases n_controls           PI_eG\n1 1.526 [1.043, 2.231] 2.94e-02        10     987       1120 [-0.456, 0.922]\n3 1.498 [1.004, 2.236] 4.80e-02         7     626        656 [-0.409, 0.855]\n4 1.355 [1.078, 1.703] 9.21e-03        25    2586       2653 [-0.393, 0.727]\n2 1.020 [0.778, 1.339] 8.84e-01        18    1967       1872 [-0.572, 0.594]\n          PI_eOR PI_sign     I2  egger_p egger_sign    ESB_p ESB_sign\n1 [0.437, 5.327]    null 70.886 4.84e-01         ns 3.75e-01       ns\n3 [0.476, 4.714]    null 60.556 2.29e-01         ns 5.47e-01       ns\n4 [0.491, 3.741]    null 67.231 6.00e-01         ns 4.61e-01       ns\n2 [0.354, 2.939]    null 67.742 5.06e-01         ns 1.68e-01       ns\n    largest_CI_eG largest_CI_eOR largest_sign\n1 [-0.354, 0.376] [0.527, 1.978]         null\n3   [0.026, 0.72] [1.048, 3.692]      notnull\n4  [-0.06, 0.597] [0.897, 2.952]         null\n2 [-0.569, 0.198] [0.356, 1.433]         null",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "ä¼çŠ¶ç»¼è¿°"
    ]
  },
  {
    "objectID": "1029-umbrella-review.html#ç»“æœå¯è§†åŒ–",
    "href": "1029-umbrella-review.html#ç»“æœå¯è§†åŒ–",
    "title": "ä¼çŠ¶ç»¼è¿° (Umbrella Review) å®Œå…¨æŒ‡å—",
    "section": "ç»“æœå¯è§†åŒ–",
    "text": "ç»“æœå¯è§†åŒ–\nä¸€å¼ æ¸…æ™°çš„æ£®æ—å›¾å¯ä»¥å±•ç¤ºæ‰€æœ‰å› ç´ çš„è¯æ®ç­‰çº§ã€‚\n\n# ç»˜åˆ¶åˆ†å±‚è¯æ®å›¾\n# print_score = TRUE æ˜¾ç¤ºå…·ä½“è¯æ®å¾—åˆ†ï¼ˆå¯é€‰ï¼‰\nchart &lt;- forest(evid.res,\n    print_score = FALSE,\n    layout = \"JAMA\"\n) # ä½¿ç”¨ JAMA é£æ ¼å¸ƒå±€\n\n\n\n\n\n\n\n\nå›¾å½¢è§£è¯»ï¼š - çºµè½´åˆ—å‡ºäº†æ‰€æœ‰åˆ†æçš„å› ç´ ã€‚ - ç‚¹çš„é¢œè‰²æˆ–å½¢çŠ¶ä»£è¡¨äº†è¯æ®ç­‰çº§ï¼ˆClass I - IVï¼‰ã€‚ - æ¨ªè½´é€šå¸¸æ˜¯æ•ˆåº”é‡ï¼ˆå¦‚ OR å€¼ï¼‰ã€‚ - ä½ å¯ä»¥ä¸€çœ¼çœ‹å‡ºå“ªäº›å› ç´ å…·æœ‰ç¡®å‡¿ (Convincing) çš„è¯æ®æ”¯æŒã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "ä¼çŠ¶ç»¼è¿°"
    ]
  },
  {
    "objectID": "1029-umbrella-review.html#å¯¼å‡ºç»“æœ",
    "href": "1029-umbrella-review.html#å¯¼å‡ºç»“æœ",
    "title": "ä¼çŠ¶ç»¼è¿° (Umbrella Review) å®Œå…¨æŒ‡å—",
    "section": "å¯¼å‡ºç»“æœ",
    "text": "å¯¼å‡ºç»“æœ\nåˆ†æå®Œæˆåï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦å°†è¯¦ç»†çš„ç»Ÿè®¡æŒ‡æ ‡å¯¼å‡ºåˆ° Excel æˆ– CSV ä¸­åˆ¶ä½œè¡¨æ ¼ã€‚\n\n# æå–æ±‡æ€»è¡¨\nresults_table &lt;- summary(evid.res)\n\n# ä»…å±•ç¤ºå‰å‡ åˆ—é‡è¦ä¿¡æ¯\nknitr::kable(head(results_table[, c(\"Factor\", \"Class\", \"eOR\", \"p_value\", \"egger_p\", \"I2\")]))\n\n\n\n\n\nFactor\nClass\neOR\np_value\negger_p\nI2\n\n\n\n\n1\nADHD\nIV\n1.526\n2.94e-02\n4.84e-01\n70.886\n\n\n3\ndyslexia\nIV\n1.498\n4.80e-02\n2.29e-01\n60.556\n\n\n4\nID\nIV\n1.355\n9.21e-03\n6.00e-01\n67.231\n\n\n2\nASD\nns\n1.020\n8.84e-01\n5.06e-01\n67.742",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "ä¼çŠ¶ç»¼è¿°"
    ]
  },
  {
    "objectID": "1029-umbrella-review.html#æ€»ç»“",
    "href": "1029-umbrella-review.html#æ€»ç»“",
    "title": "ä¼çŠ¶ç»¼è¿° (Umbrella Review) å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\né€šè¿‡ metaumbrellaï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿå®Œæˆå¤æ‚çš„è¯æ®æ•´åˆå·¥ä½œã€‚ä¸€ä¸ªé«˜è´¨é‡çš„ä¼çŠ¶ç»¼è¿°åº”è¯¥ï¼š 1. å…¨é¢æ£€ç´¢ï¼šç¡®ä¿æ²¡æœ‰é—æ¼é‡è¦çš„ Meta åˆ†æã€‚ 2. ä¸¥æ ¼æ¸…æ´—ï¼šæ•°æ®æå–å¿…é¡»å‡†ç¡®ã€‚ 3. å¤šç»´è¯„ä¼°ï¼šä¸ä»…çœ‹æ•ˆåº”é‡ï¼Œæ›´è¦çœ‹å¼‚è´¨æ€§å’Œå‘è¡¨åå€šã€‚ 4. æ¸…æ™°å‘ˆç°ï¼šä½¿ç”¨åˆ†çº§å›¾å±•ç¤ºè¯æ®å¼ºåº¦ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "ä¼çŠ¶ç»¼è¿°"
    ]
  },
  {
    "objectID": "1029-umbrella-review.html#å‚è€ƒæ–‡çŒ®",
    "href": "1029-umbrella-review.html#å‚è€ƒæ–‡çŒ®",
    "title": "ä¼çŠ¶ç»¼è¿° (Umbrella Review) å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒæ–‡çŒ®",
    "text": "å‚è€ƒæ–‡çŒ®\n\nIoannidis, J. P. (2009). Integration of evidence from multiple meta-analyses: a primer on umbrella reviews, treatment networks and multiple treatments meta-analyses. CMAJ.\nBalduzzi, S., et al.Â (2023). metaumbrella: An R Package for Conducting Umbrella Reviews.",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "ä¼çŠ¶ç»¼è¿°"
    ]
  },
  {
    "objectID": "1031-lca.html",
    "href": "1031-lca.html",
    "title": "æ½œç±»åˆ«åˆ†æ (Latent Class Analysis) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "æ½œç±»åˆ«åˆ†æ (Latent Class Analysis, LCA) æ˜¯ä¸€ç§ç»Ÿè®¡æ–¹æ³•ï¼Œç”¨äºè¯†åˆ«è§‚æµ‹æ•°æ®ä¸­æœªè§‚å¯Ÿåˆ°çš„å­ç¾¤ä½“ï¼ˆæ½œç±»åˆ«ï¼‰ã€‚å®ƒé€šå¸¸ç”¨äºåˆ†ç±»å˜é‡ï¼ˆå¦‚é—®å·è°ƒæŸ¥ä¸­çš„æ˜¯éé¢˜æˆ–æå…‹ç‰¹é‡è¡¨ï¼‰ï¼Œæ—¨åœ¨å°†å…·æœ‰ç›¸ä¼¼å“åº”æ¨¡å¼çš„ä¸ªä½“å½’ä¸ºä¸€ç±»ã€‚\nåœ¨ R ä¸­ï¼ŒpoLCA æ˜¯æœ€å¸¸ç”¨çš„è¿›è¡Œ LCA åˆ†æçš„åŒ…ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "æ½œç±»åˆ«åˆ†æ (LCA)"
    ]
  },
  {
    "objectID": "1031-lca.html#ç®€ä»‹",
    "href": "1031-lca.html#ç®€ä»‹",
    "title": "æ½œç±»åˆ«åˆ†æ (Latent Class Analysis) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "æ½œç±»åˆ«åˆ†æ (Latent Class Analysis, LCA) æ˜¯ä¸€ç§ç»Ÿè®¡æ–¹æ³•ï¼Œç”¨äºè¯†åˆ«è§‚æµ‹æ•°æ®ä¸­æœªè§‚å¯Ÿåˆ°çš„å­ç¾¤ä½“ï¼ˆæ½œç±»åˆ«ï¼‰ã€‚å®ƒé€šå¸¸ç”¨äºåˆ†ç±»å˜é‡ï¼ˆå¦‚é—®å·è°ƒæŸ¥ä¸­çš„æ˜¯éé¢˜æˆ–æå…‹ç‰¹é‡è¡¨ï¼‰ï¼Œæ—¨åœ¨å°†å…·æœ‰ç›¸ä¼¼å“åº”æ¨¡å¼çš„ä¸ªä½“å½’ä¸ºä¸€ç±»ã€‚\nåœ¨ R ä¸­ï¼ŒpoLCA æ˜¯æœ€å¸¸ç”¨çš„è¿›è¡Œ LCA åˆ†æçš„åŒ…ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "æ½œç±»åˆ«åˆ†æ (LCA)"
    ]
  },
  {
    "objectID": "1031-lca.html#åº”ç”¨åœºæ™¯",
    "href": "1031-lca.html#åº”ç”¨åœºæ™¯",
    "title": "æ½œç±»åˆ«åˆ†æ (Latent Class Analysis) å®Œå…¨æŒ‡å—",
    "section": "åº”ç”¨åœºæ™¯",
    "text": "åº”ç”¨åœºæ™¯\nLCA åœ¨å¤šä¸ªé¢†åŸŸéƒ½æœ‰å¹¿æ³›åº”ç”¨ï¼š\n\n1. åŒ»å­¦ä¸å…¬å…±å«ç”Ÿ\n\nç–¾ç—…äºšå‹è¯†åˆ«ï¼šæ ¹æ®ç—‡çŠ¶ç»„åˆè¯†åˆ«ä¸åŒçš„ç–¾ç—…è¡¨å‹ï¼ˆå¦‚æŠ‘éƒç—‡äºšå‹ï¼‰\nå¥åº·è¡Œä¸ºåˆ†ç±»ï¼šå°†äººç¾¤æŒ‰å¥åº·è¡Œä¸ºæ¨¡å¼åˆ†ç±»ï¼ˆå¦‚å¸çƒŸ+é¥®é…’+è¿åŠ¨çš„ç»„åˆï¼‰\næ‚£è€…åˆ†å±‚ï¼šè¯†åˆ«å…·æœ‰ä¸åŒæ²»ç–—ååº”çš„æ‚£è€…ç¾¤ä½“\n\n\n\n2. å¿ƒç†å­¦ä¸æ•™è‚²\n\nå­¦ä¹ é£æ ¼åˆ†å‹ï¼šè¯†åˆ«ä¸åŒçš„å­¦ä¹ è€…ç±»å‹\näººæ ¼ç±»å‹ç ”ç©¶ï¼šåŸºäºé—®å·å›ç­”è¯†åˆ«äººæ ¼ç±»å‹\n\n\n\n3. å¸‚åœºè¥é”€\n\næ¶ˆè´¹è€…ç»†åˆ†ï¼šæ ¹æ®è´­ä¹°è¡Œä¸ºå’Œåå¥½ç»†åˆ†å¸‚åœº\nç”¨æˆ·ç”»åƒï¼šè¯†åˆ«å…·æœ‰ç›¸ä¼¼ç‰¹å¾çš„ç”¨æˆ·ç¾¤ä½“\n\n\n[!NOTE] LCA ä¸èšç±»åˆ†æçš„åŒºåˆ«ï¼šLCA åŸºäºæ¦‚ç‡æ¨¡å‹ï¼ˆå‡è®¾æ•°æ®æ¥è‡ªæ··åˆåˆ†å¸ƒï¼‰ï¼Œè€Œ K-means ç­‰èšç±»æ–¹æ³•åŸºäºè·ç¦»åº¦é‡ã€‚LCA æ›´é€‚åˆåˆ†ç±»å˜é‡ï¼Œä¸”èƒ½æä¾›å½’ç±»çš„æ¦‚ç‡ä¼°è®¡ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "æ½œç±»åˆ«åˆ†æ (LCA)"
    ]
  },
  {
    "objectID": "1031-lca.html#å®‰è£…",
    "href": "1031-lca.html#å®‰è£…",
    "title": "æ½œç±»åˆ«åˆ†æ (Latent Class Analysis) å®Œå…¨æŒ‡å—",
    "section": "å®‰è£…",
    "text": "å®‰è£…\n\ninstall.packages(\"poLCA\")\n\n\nlibrary(poLCA)\nlibrary(dplyr)\nlibrary(ggplot2)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "æ½œç±»åˆ«åˆ†æ (LCA)"
    ]
  },
  {
    "objectID": "1031-lca.html#å®ä¾‹æ•°æ®",
    "href": "1031-lca.html#å®ä¾‹æ•°æ®",
    "title": "æ½œç±»åˆ«åˆ†æ (Latent Class Analysis) å®Œå…¨æŒ‡å—",
    "section": "å®ä¾‹æ•°æ®",
    "text": "å®ä¾‹æ•°æ®\næˆ‘ä»¬å°†ä½¿ç”¨ poLCA åŒ…è‡ªå¸¦çš„ values æ•°æ®é›†ã€‚è¯¥æ•°æ®é›†åŒ…å«äº† 216 åå—è®¿è€…å¯¹ 4 ä¸ªäºŒåˆ†å˜é‡ï¼ˆè¶‹å‘æ™®ä¸–ä¸»ä¹‰æˆ–ç‰¹å®šä¸»ä¹‰ï¼‰çš„å›ç­”ã€‚\n\ndata(values)\nhead(values)\n\n  A B C D\n1 2 2 2 2\n2 2 2 2 2\n3 2 2 2 2\n4 2 2 2 2\n5 2 2 2 2\n6 2 2 2 2\n\n# å˜é‡è¯´æ˜ï¼š\n# A, B, C, D éƒ½æ˜¯äºŒåˆ†ç±»å˜é‡ (1, 2)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "æ½œç±»åˆ«åˆ†æ (LCA)"
    ]
  },
  {
    "objectID": "1031-lca.html#æ¨¡å‹æ„å»º",
    "href": "1031-lca.html#æ¨¡å‹æ„å»º",
    "title": "æ½œç±»åˆ«åˆ†æ (Latent Class Analysis) å®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹æ„å»º",
    "text": "æ¨¡å‹æ„å»º\nLCA çš„å…³é”®æ­¥éª¤æ˜¯ç¡®å®šæœ€ä½³çš„æ½œç±»åˆ«æ•°é‡ (k)ã€‚é€šå¸¸æˆ‘ä»¬éœ€è¦æ¯”è¾ƒä¸åŒ k å€¼æ¨¡å‹çš„æ‹Ÿåˆä¼˜åº¦æŒ‡æ ‡ã€‚\n\næ¨¡å‹é€‰æ‹©æ ‡å‡†è¯¦è§£\n\n\n\næŒ‡æ ‡\nè¯´æ˜\né€‰æ‹©æ ‡å‡†\n\n\n\n\nBIC\nè´å¶æ–¯ä¿¡æ¯å‡†åˆ™\nè¶Šå°è¶Šå¥½ï¼Œå¯¹æ¨¡å‹å¤æ‚åº¦æƒ©ç½šè¾ƒå¤§\n\n\nAIC\nèµ¤æ± ä¿¡æ¯å‡†åˆ™\nè¶Šå°è¶Šå¥½ï¼Œæ¯”BICå€¾å‘äºé€‰æ‹©æ›´å¤šç±»åˆ«\n\n\nç†µ (Entropy)\nåˆ†ç±»å‡†ç¡®æ€§\nè¶Šæ¥è¿‘1è¶Šå¥½ï¼Œ&gt;0.8è¡¨ç¤ºåˆ†ç±»æ¸…æ™°\n\n\nBLRT\nBootstrapä¼¼ç„¶æ¯”æ£€éªŒ\np&lt;0.05è¡¨ç¤ºkç±»ä¼˜äºk-1ç±»\n\n\nLo-Mendell-Rubin\nLRTå˜ä½“\np&lt;0.05è¡¨ç¤ºkç±»ä¼˜äºk-1ç±»\n\n\n\n\n[!TIP] å®è·µå»ºè®®ï¼šé¦–é€‰ BIC æœ€å°çš„æ¨¡å‹ï¼Œä½†åŒæ—¶è€ƒè™‘ç†µå€¼ï¼ˆ&gt;0.7ï¼‰å’Œå„ç±»åˆ«æ ·æœ¬é‡æ˜¯å¦è¶³å¤Ÿï¼ˆé€šå¸¸è¦æ±‚æ¯ä¸ªç±»åˆ« &gt;5%ï¼‰ã€‚\n\n\n\n1. å¯»æ‰¾æœ€ä½³ç±»åˆ«æ•°\næˆ‘ä»¬å¾ªç¯è¿è¡Œ k=2 åˆ° k=5 çš„æ¨¡å‹ï¼Œå¹¶æ¯”è¾ƒå…¶ BIC å€¼ã€‚BIC è¶Šå°ï¼Œæ¨¡å‹æ‹Ÿåˆè¶Šå¥½ä¸”è¶Šç®€æ´ã€‚\n\n# å®šä¹‰å…¬å¼\nf &lt;- cbind(A, B, C, D) ~ 1\n\n# å­˜å‚¨ç»“æœ\nresults &lt;- list()\nbic_values &lt;- c()\n\nset.seed(123)\nfor (k in 2:5) {\n    res &lt;- poLCA(f, values, nclass = k, verbose = FALSE, nrep = 5)\n    results[[k]] &lt;- res\n    bic_values[k] &lt;- res$bic\n    cat(\"k =\", k, \": BIC =\", res$bic, \"\\n\")\n}\n\nk = 2 : BIC = 1057.313 \nk = 3 : BIC = 1081.856 \nk = 4 : BIC = 1108.346 \nk = 5 : BIC = 1135.222 \n\n# ç»˜åˆ¶ BIC å˜åŒ–å›¾\nplot(2:5, bic_values[2:5], type = \"b\", xlab = \"Number of Classes (k)\", ylab = \"BIC\", main = \"BIC Plot\")\n\n\n\n\n\n\n\n\nå‡è®¾æ ¹æ® BICï¼Œk=2 æˆ– k=3 æ˜¯è¾ƒå¥½çš„é€‰æ‹©ï¼ˆè¿™é‡Œå‡è®¾é€‰æ‹© k=2 è¿›è¡Œæ¼”ç¤ºï¼‰ã€‚\n\n\n2. æ‹Ÿåˆæœ€ç»ˆæ¨¡å‹\n\n# è¿è¡Œ k=2 çš„æ¨¡å‹\nbest_model &lt;- poLCA(f, values, nclass = 2, verbose = FALSE, graphs = TRUE)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "æ½œç±»åˆ«åˆ†æ (LCA)"
    ]
  },
  {
    "objectID": "1031-lca.html#ç»“æœè§£è¯»",
    "href": "1031-lca.html#ç»“æœè§£è¯»",
    "title": "æ½œç±»åˆ«åˆ†æ (Latent Class Analysis) å®Œå…¨æŒ‡å—",
    "section": "ç»“æœè§£è¯»",
    "text": "ç»“æœè§£è¯»\n\nç±»åˆ«æ¦‚ç‡ (Class Proportions)\næŸ¥çœ‹æ¯ä¸ªæ½œç±»åˆ«åœ¨æ€»æ ·æœ¬ä¸­çš„å æ¯”ã€‚\n\nbest_model$P\n\n[1] 0.2792475 0.7207525\n\n\n\n\næ¡ä»¶æ¦‚ç‡ (Item Response Probabilities)\næŸ¥çœ‹æ¯ä¸ªç±»åˆ«åœ¨å„ä¸ªè§‚æµ‹å˜é‡ä¸Šçš„å›ç­”æ¦‚ç‡ã€‚è¿™æ˜¯å®šä¹‰æ¯ä¸ªç±»åˆ«ç‰¹å¾çš„å…³é”®ã€‚\n\nbest_model$probs\n\n$A\n                Pr(1)     Pr(2)\nclass 1:  0.006807065 0.9931929\nclass 2:  0.286412439 0.7135876\n\n$B\n               Pr(1)     Pr(2)\nclass 1:  0.06023677 0.9397632\nclass 2:  0.67038136 0.3296186\n\n$C\n               Pr(1)     Pr(2)\nclass 1:  0.07347022 0.9265298\nclass 2:  0.64598422 0.3540158\n\n$D\n              Pr(1)     Pr(2)\nclass 1:  0.2308695 0.7691305\nclass 2:  0.8676281 0.1323719\n\n\nä¾‹å¦‚ï¼Œå¦‚æœåœ¨å˜é‡ A ä¸Šï¼ŒClass 1 é€‰æ‹© â€œ1â€ çš„æ¦‚ç‡å¾ˆé«˜ï¼Œè€Œ Class 2 é€‰æ‹© â€œ2â€ çš„æ¦‚ç‡å¾ˆé«˜ï¼Œè¿™å°±æ˜¯è¿™ä¸¤ä¸ªç±»åˆ«çš„åŒºåˆ†ç‰¹å¾ã€‚\n\n\nç†µå€¼è®¡ç®—\nç†µå€¼æ˜¯è¯„ä¼°åˆ†ç±»è´¨é‡çš„é‡è¦æŒ‡æ ‡ï¼š\n\n# è®¡ç®—ç†µ\nentropy &lt;- function(p) sum(-p * log(p + 1e-10), na.rm = TRUE)\nclass_entropy &lt;- apply(best_model$posterior, 1, entropy)\nrelative_entropy &lt;- 1 - mean(class_entropy) / log(ncol(best_model$posterior))\ncat(\"Relative Entropy:\", round(relative_entropy, 3), \"\\n\")\n\nRelative Entropy: 0.719 \n\n\n\n[!IMPORTANT] ç†µå€¼ &gt; 0.8 è¡¨ç¤ºåˆ†ç±»éå¸¸æ¸…æ™°ï¼›0.6-0.8 ä¸ºå¯æ¥å—ï¼›&lt; 0.6 è¡¨ç¤ºç±»åˆ«ä¹‹é—´ç•Œé™æ¨¡ç³Šï¼Œéœ€è¦é‡æ–°è€ƒè™‘æ¨¡å‹ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "æ½œç±»åˆ«åˆ†æ (LCA)"
    ]
  },
  {
    "objectID": "1031-lca.html#å¯è§†åŒ–",
    "href": "1031-lca.html#å¯è§†åŒ–",
    "title": "æ½œç±»åˆ«åˆ†æ (Latent Class Analysis) å®Œå…¨æŒ‡å—",
    "section": "å¯è§†åŒ–",
    "text": "å¯è§†åŒ–\né™¤äº† poLCA è‡ªå¸¦çš„å›¾ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ ggplot2 è‡ªå®šä¹‰æ¡ä»¶æ¦‚ç‡å›¾ï¼Œæ›´æ¸…æ™°åœ°å±•ç¤ºç±»åˆ«ç‰¹å¾ã€‚\n\n# æ•°æ®æ•´ç†\nprobs_df &lt;- data.frame()\nfor (var in names(best_model$probs)) {\n    tmp &lt;- as.data.frame(best_model$probs[[var]])\n    tmp$class &lt;- 1:nrow(tmp)\n    tmp$variable &lt;- var\n    # å–å‡ºå›ç­”ä¸º 1 (æˆ–æŸä¸ªç‰¹å®šé€‰é¡¹) çš„æ¦‚ç‡\n    tmp$prob &lt;- tmp[, 1]\n    probs_df &lt;- rbind(probs_df, tmp[, c(\"class\", \"variable\", \"prob\")])\n}\n\n# ç»˜å›¾\nggplot(probs_df, aes(x = variable, y = prob, group = class, color = factor(class))) +\n    geom_line(size = 1) +\n    geom_point(size = 3) +\n    labs(\n        title = \"æ½œç±»åˆ«ç‰¹å¾å›¾ (Profile Plot)\",\n        y = \"Probability of Response Category 1\",\n        color = \"Latent Class\"\n    ) +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "æ½œç±»åˆ«åˆ†æ (LCA)"
    ]
  },
  {
    "objectID": "1031-lca.html#åˆ†é…ç±»åˆ«",
    "href": "1031-lca.html#åˆ†é…ç±»åˆ«",
    "title": "æ½œç±»åˆ«åˆ†æ (Latent Class Analysis) å®Œå…¨æŒ‡å—",
    "section": "åˆ†é…ç±»åˆ«",
    "text": "åˆ†é…ç±»åˆ«\næˆ‘ä»¬å¯ä»¥æå–æ¯ä¸ªæ ·æœ¬å±äºå„ä¸ªç±»åˆ«çš„åéªŒæ¦‚ç‡ï¼Œå¹¶è¿›è¡Œåˆ†ç±»ã€‚\n\n# åéªŒæ¦‚ç‡\nhead(best_model$posterior)\n\n          [,1]       [,2]\n[1,] 0.9589821 0.04101786\n[2,] 0.9589821 0.04101786\n[3,] 0.9589821 0.04101786\n[4,] 0.9589821 0.04101786\n[5,] 0.9589821 0.04101786\n[6,] 0.9589821 0.04101786\n\n# é¢„æµ‹çš„ç±»åˆ«\nhead(best_model$predclass)\n\n[1] 1 1 1 1 1 1\n\n# å°†é¢„æµ‹ç±»åˆ«åˆå¹¶å›åŸæ•°æ®\nvalues$class &lt;- best_model$predclass\nhead(values)\n\n  A B C D class\n1 2 2 2 2     1\n2 2 2 2 2     1\n3 2 2 2 2     1\n4 2 2 2 2     1\n5 2 2 2 2     1\n6 2 2 2 2     1",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "æ½œç±»åˆ«åˆ†æ (LCA)"
    ]
  },
  {
    "objectID": "1031-lca.html#ç±»åˆ«å‘½åä¸è§£è¯»æŒ‡å—",
    "href": "1031-lca.html#ç±»åˆ«å‘½åä¸è§£è¯»æŒ‡å—",
    "title": "æ½œç±»åˆ«åˆ†æ (Latent Class Analysis) å®Œå…¨æŒ‡å—",
    "section": "ç±»åˆ«å‘½åä¸è§£è¯»æŒ‡å—",
    "text": "ç±»åˆ«å‘½åä¸è§£è¯»æŒ‡å—\nè¯†åˆ«å‡ºæ½œç±»åˆ«åï¼Œå¦‚ä½•ç»™å®ƒä»¬å‘½åæ˜¯ç ”ç©¶çš„å…³é”®ï¼š\n\nå‘½ååŸåˆ™\n\nåŸºäºæœ€æ˜¾è‘—ç‰¹å¾ï¼šæ‰¾å‡ºæ¯ä¸ªç±»åˆ«åœ¨å“ªäº›å˜é‡ä¸Šæœ‰æç«¯æ¦‚ç‡ï¼ˆ&gt;0.8 æˆ– &lt;0.2ï¼‰\nä½¿ç”¨æè¿°æ€§æ ‡ç­¾ï¼šå¦‚â€é«˜é£é™©è¡Œä¸ºç»„â€ã€â€œå¥åº·ç”Ÿæ´»æ–¹å¼ç»„â€\né¿å…ä»·å€¼åˆ¤æ–­ï¼šä½¿ç”¨ä¸­æ€§è¯æ±‡ï¼Œå¦‚â€ç±»å‹Aâ€è€Œéâ€é—®é¢˜ç»„â€\n\n\n\næŠ¥å‘Šç¤ºä¾‹\n\næœ¬ç ”ç©¶è¯†åˆ«å‡ºä¸¤ä¸ªæ½œç±»åˆ«ï¼š - ç±»åˆ« 1 (æ™®ä¸–ä¸»ä¹‰å‹, n=XX, XX%)ï¼šåœ¨æ‰€æœ‰ä»·å€¼è§‚é—®é¢˜ä¸Šå€¾å‘äºé€‰æ‹©æ™®ä¸–ä¸»ä¹‰ç«‹åœºï¼ˆæ¦‚ç‡ &gt; 0.7ï¼‰ - ç±»åˆ« 2 (ç‰¹æ®Šä¸»ä¹‰å‹, n=XX, XX%)ï¼šåœ¨å…³ç³»å¯¼å‘é—®é¢˜ä¸Šå€¾å‘äºç‰¹æ®Šä¸»ä¹‰ç«‹åœºï¼ˆæ¦‚ç‡ &gt; 0.8ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "æ½œç±»åˆ«åˆ†æ (LCA)"
    ]
  },
  {
    "objectID": "1031-lca.html#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ",
    "href": "1031-lca.html#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ",
    "title": "æ½œç±»åˆ«åˆ†æ (Latent Class Analysis) å®Œå…¨æŒ‡å—",
    "section": "å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ",
    "text": "å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ\n\n\n\né—®é¢˜\nå¯èƒ½åŸå› \nè§£å†³æ–¹æ¡ˆ\n\n\n\n\næ¨¡å‹ä¸æ”¶æ•›\nèµ·å§‹å€¼ä¸ä½³\nå¢åŠ  nrep å‚æ•°ï¼ˆå¦‚è®¾ä¸º10-20ï¼‰\n\n\næŸç±»åˆ«æ ·æœ¬è¿‡å°‘\nç±»åˆ«æ•°è¿‡å¤š\nå‡å°‘ k å€¼æˆ–æ£€æŸ¥æ•°æ®è´¨é‡\n\n\nç†µå€¼è¿‡ä½\nç±»åˆ«ç•Œé™ä¸æ¸…\nè€ƒè™‘å‡å°‘ç±»åˆ«æ•°æˆ–é‡æ–°é€‰æ‹©å˜é‡\n\n\nå±€éƒ¨æœ€ä¼˜\nå•æ¬¡è¿è¡Œé™·å…¥å±€éƒ¨è§£\nå¢åŠ  nrep å¹¶æ¯”è¾ƒå¤šæ¬¡è¿è¡Œç»“æœ",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "æ½œç±»åˆ«åˆ†æ (LCA)"
    ]
  },
  {
    "objectID": "1031-lca.html#å‚è€ƒæ–‡çŒ®",
    "href": "1031-lca.html#å‚è€ƒæ–‡çŒ®",
    "title": "æ½œç±»åˆ«åˆ†æ (Latent Class Analysis) å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒæ–‡çŒ®",
    "text": "å‚è€ƒæ–‡çŒ®\n\nLinzer, D. A., & Lewis, J. B. (2011). poLCA: An R Package for Polytomous Variable Latent Class Analysis. Journal of Statistical Software, 42(10), 1-29.\nNylund, K. L., et al.Â (2007). Deciding on the number of classes in latent class analysis and growth mixture modeling. Structural Equation Modeling, 14(4), 535-569.",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "æ½œç±»åˆ«åˆ†æ (LCA)"
    ]
  },
  {
    "objectID": "1033-dlnm.html",
    "href": "1033-dlnm.html",
    "title": "åˆ†å¸ƒæ»åéçº¿æ€§æ¨¡å‹ (DLNM) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "åœ¨ç¯å¢ƒå¥åº·ç ”ç©¶ä¸­ï¼Œæš´éœ²ï¼ˆå¦‚é«˜æ¸©ï¼‰å¯¹å¥åº·ï¼ˆå¦‚æ­»äº¡ï¼‰çš„å½±å“å¾€å¾€å…·æœ‰ä¸¤ä¸ªç‰¹å¾ï¼š 1. éçº¿æ€§ (Non-linear)ï¼šé«˜æ¸©æœ‰å®³ï¼Œä½æ¸©ä¹Ÿæœ‰å®³ï¼ˆUå‹æˆ–Jå‹æ›²çº¿ï¼‰ã€‚ 2. æ»åæ€§ (Lagged)ï¼šä»Šå¤©çš„é«˜æ¸©å¯èƒ½å¯¼è‡´3å¤©åçš„æ­»äº¡ã€‚\nDLNM (Distributed Lag Non-linear Models) æ­£æ˜¯ä¸ºè§£å†³è¿™ä¸¤ä¸ªé—®é¢˜è€Œç”Ÿã€‚å®ƒå¼•å…¥äº†â€œäº¤å‰åŸº (Cross-Basis)â€çš„æ¦‚å¿µï¼Œæ„å»ºäº†ä¸€ä¸ªæš´éœ²-æ»å-ååº”çš„ä¸‰ç»´è¡¨é¢ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "åˆ†å¸ƒæ»åéçº¿æ€§æ¨¡å‹ (DLNM)"
    ]
  },
  {
    "objectID": "1033-dlnm.html#ä¸ºä»€ä¹ˆéœ€è¦-dlnm",
    "href": "1033-dlnm.html#ä¸ºä»€ä¹ˆéœ€è¦-dlnm",
    "title": "åˆ†å¸ƒæ»åéçº¿æ€§æ¨¡å‹ (DLNM) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "åœ¨ç¯å¢ƒå¥åº·ç ”ç©¶ä¸­ï¼Œæš´éœ²ï¼ˆå¦‚é«˜æ¸©ï¼‰å¯¹å¥åº·ï¼ˆå¦‚æ­»äº¡ï¼‰çš„å½±å“å¾€å¾€å…·æœ‰ä¸¤ä¸ªç‰¹å¾ï¼š 1. éçº¿æ€§ (Non-linear)ï¼šé«˜æ¸©æœ‰å®³ï¼Œä½æ¸©ä¹Ÿæœ‰å®³ï¼ˆUå‹æˆ–Jå‹æ›²çº¿ï¼‰ã€‚ 2. æ»åæ€§ (Lagged)ï¼šä»Šå¤©çš„é«˜æ¸©å¯èƒ½å¯¼è‡´3å¤©åçš„æ­»äº¡ã€‚\nDLNM (Distributed Lag Non-linear Models) æ­£æ˜¯ä¸ºè§£å†³è¿™ä¸¤ä¸ªé—®é¢˜è€Œç”Ÿã€‚å®ƒå¼•å…¥äº†â€œäº¤å‰åŸº (Cross-Basis)â€çš„æ¦‚å¿µï¼Œæ„å»ºäº†ä¸€ä¸ªæš´éœ²-æ»å-ååº”çš„ä¸‰ç»´è¡¨é¢ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "åˆ†å¸ƒæ»åéçº¿æ€§æ¨¡å‹ (DLNM)"
    ]
  },
  {
    "objectID": "1033-dlnm.html#å®‰è£…ä¸åŠ è½½",
    "href": "1033-dlnm.html#å®‰è£…ä¸åŠ è½½",
    "title": "åˆ†å¸ƒæ»åéçº¿æ€§æ¨¡å‹ (DLNM) å®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\ninstall.packages(\"dlnm\")\ninstall.packages(\"splines\")\n\n\nlibrary(dlnm)\nlibrary(splines) # å¿…é¡»åŠ è½½ï¼Œç”¨äºæ ·æ¡å‡½æ•° ns()\nlibrary(ggplot2)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "åˆ†å¸ƒæ»åéçº¿æ€§æ¨¡å‹ (DLNM)"
    ]
  },
  {
    "objectID": "1033-dlnm.html#æ•°æ®æ¢ç´¢",
    "href": "1033-dlnm.html#æ•°æ®æ¢ç´¢",
    "title": "åˆ†å¸ƒæ»åéçº¿æ€§æ¨¡å‹ (DLNM) å®Œå…¨æŒ‡å—",
    "section": "æ•°æ®æ¢ç´¢",
    "text": "æ•°æ®æ¢ç´¢\næˆ‘ä»¬ä½¿ç”¨ç»å…¸çš„èŠåŠ å“¥ NMMAPS æ•°æ®é›† (chicagoNMMAPS)ã€‚\n\ndata(chicagoNMMAPS)\nhead(chicagoNMMAPS[, c(\"date\", \"death\", \"temp\", \"pm10\")])\n\n        date death       temp     pm10\n1 1987-01-01   130 -0.2777778 26.95607\n2 1987-01-02   150  0.5555556       NA\n3 1987-01-03   101  0.5555556 32.83869\n4 1987-01-04   135 -1.6666667 39.95607\n5 1987-01-05   126  0.0000000       NA\n6 1987-01-06   130  4.4444444 40.95607",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "åˆ†å¸ƒæ»åéçº¿æ€§æ¨¡å‹ (DLNM)"
    ]
  },
  {
    "objectID": "1033-dlnm.html#æ„å»ºäº¤å‰åŸº-cross-basis",
    "href": "1033-dlnm.html#æ„å»ºäº¤å‰åŸº-cross-basis",
    "title": "åˆ†å¸ƒæ»åéçº¿æ€§æ¨¡å‹ (DLNM) å®Œå…¨æŒ‡å—",
    "section": "æ„å»ºäº¤å‰åŸº (Cross-Basis)",
    "text": "æ„å»ºäº¤å‰åŸº (Cross-Basis)\nè¿™æ˜¯æœ€éš¾ç†è§£ä½†æœ€æ ¸å¿ƒçš„ä¸€æ­¥ã€‚æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸¤ä¸ªç»´åº¦çš„åŸºå‡½æ•°ï¼š - argvar: æš´éœ²ç»´åº¦çš„å½¢çŠ¶ï¼ˆä¾‹å¦‚ï¼Œæ¸©åº¦å¯¹æ­»äº¡çš„å½±å“å½¢çŠ¶ï¼‰ã€‚æˆ‘ä»¬é€šå¸¸ç”¨â€œè‡ªç„¶æ ·æ¡ (Natural Cubic Spline)â€å…è®¸æ›²çº¿å¼¯æ›²ã€‚ - arglag: æ»åç»´åº¦çš„å½¢çŠ¶ï¼ˆä¾‹å¦‚ï¼Œå½±å“éšæ—¶é—´è¡°å‡çš„å½¢çŠ¶ï¼‰ã€‚\n\n# è®¾å®šäº¤å‰åŸº\n# 1. æš´éœ²ç»´åº¦ï¼šæ¸©åº¦ï¼Œä½¿ç”¨äºŒæ¬¡ B æ ·æ¡ï¼ŒèŠ‚ç‚¹è®¾åœ¨åˆ†ä½æ•°å¤„\n# 2. æ»åç»´åº¦ï¼šæœ€å¤§æ»å 30 å¤©ï¼Œä½¿ç”¨ 4 ä¸ªè‡ªç”±åº¦çš„è‡ªç„¶æ ·æ¡\ncb &lt;- crossbasis(\n    chicagoNMMAPS$temp,\n    lag = 30,\n    argvar = list(fun = \"ns\", knots = quantile(chicagoNMMAPS$temp, c(0.1, 0.75, 0.9))),\n    arglag = list(fun = \"ns\", df = 4)\n)\n\nsummary(cb)\n\nCROSSBASIS FUNCTIONS\nobservations: 5114 \nrange: -26.66667 to 33.33333 \nlag period: 0 30 \ntotal df:  16 \n\nBASIS FOR VAR:\nfun: ns \nknots: -3.888889 19.44444 23.88889 \nintercept: FALSE \nBoundary.knots: -26.66667 33.33333 \n\nBASIS FOR LAG:\nfun: ns \nknots: 10 20 \nintercept: TRUE \nBoundary.knots: 0 30",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "åˆ†å¸ƒæ»åéçº¿æ€§æ¨¡å‹ (DLNM)"
    ]
  },
  {
    "objectID": "1033-dlnm.html#æ‹Ÿåˆ-glm-æ¨¡å‹",
    "href": "1033-dlnm.html#æ‹Ÿåˆ-glm-æ¨¡å‹",
    "title": "åˆ†å¸ƒæ»åéçº¿æ€§æ¨¡å‹ (DLNM) å®Œå…¨æŒ‡å—",
    "section": "æ‹Ÿåˆ GLM æ¨¡å‹",
    "text": "æ‹Ÿåˆ GLM æ¨¡å‹\nå°†äº¤å‰åŸºçŸ©é˜µ cb ä½œä¸ºä¸€ä¸ªé¢„æµ‹é¡¹æ”¾å…¥å‡†æ³Šæ¾å›å½’æ¨¡å‹ä¸­ã€‚åŒæ—¶æˆ‘ä»¬è¦æ§åˆ¶æ··æ‚å› ç´ ï¼š - é•¿æœŸè¶‹åŠ¿ä¸å­£èŠ‚æ€§: ns(time, 7*14) (æ¯å¹´ 7 ä¸ªè‡ªç”±åº¦æ˜¯æƒ¯ä¾‹)ã€‚ - æ˜ŸæœŸå‡ æ•ˆåº”: dowã€‚\n\n# æ‹Ÿåˆæ¨¡å‹\nmodel &lt;- glm(\n    death ~ cb + ns(time, 7 * 14) + dow,\n    family = quasipoisson(),\n    data = chicagoNMMAPS\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "åˆ†å¸ƒæ»åéçº¿æ€§æ¨¡å‹ (DLNM)"
    ]
  },
  {
    "objectID": "1033-dlnm.html#é¢„æµ‹ä¸æ•ˆåº”ä¼°è®¡",
    "href": "1033-dlnm.html#é¢„æµ‹ä¸æ•ˆåº”ä¼°è®¡",
    "title": "åˆ†å¸ƒæ»åéçº¿æ€§æ¨¡å‹ (DLNM) å®Œå…¨æŒ‡å—",
    "section": "é¢„æµ‹ä¸æ•ˆåº”ä¼°è®¡",
    "text": "é¢„æµ‹ä¸æ•ˆåº”ä¼°è®¡\nä½¿ç”¨ crosspred() è¿›è¡Œé¢„æµ‹ã€‚å¿…é¡»é€‰å®šä¸€ä¸ªå‚è€ƒå€¼ (Centering Value)ã€‚å¯¹äºæ¸©åº¦ï¼Œæˆ‘ä»¬é€šå¸¸é€‰æ‹©â€œæœ€é€‚å®œæ¸©åº¦â€æˆ–ä¸­ä½æ•°ã€‚RR å€¼æ˜¯ç›¸å¯¹äºè¿™ä¸ªå‚è€ƒå€¼çš„é£é™©æ¯”ã€‚\n\n# ä»¥ 21 åº¦ (å‡è®¾çš„èˆ’é€‚æ¸©åº¦) ä¸ºå‚è€ƒ\npred &lt;- crosspred(cb, model, cen = 21, by = 1)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "åˆ†å¸ƒæ»åéçº¿æ€§æ¨¡å‹ (DLNM)"
    ]
  },
  {
    "objectID": "1033-dlnm.html#ç»“æœå¯è§†åŒ–",
    "href": "1033-dlnm.html#ç»“æœå¯è§†åŒ–",
    "title": "åˆ†å¸ƒæ»åéçº¿æ€§æ¨¡å‹ (DLNM) å®Œå…¨æŒ‡å—",
    "section": "ç»“æœå¯è§†åŒ–",
    "text": "ç»“æœå¯è§†åŒ–\nå›¾ç¤ºæ˜¯ DLNM çš„çµé­‚ã€‚\n\n(1) 3D æš´éœ²-æ»å-ååº”æ›²é¢\nè¿™å¼ å›¾å±•ç¤ºäº†å…¨è²Œï¼š - Xè½´ï¼šæ¸©åº¦ - Yè½´ï¼šæ»åå¤©æ•° - Zè½´ï¼šç›¸å¯¹é£é™© (RR)\n\nplot(pred, \"3d\",\n    xlab = \"Temperature (C)\", ylab = \"Lag (Days)\", zlab = \"RR\",\n    main = \"3D View of Temperature-Death Association\",\n    theta = 40, phi = 30, ltheta = -120 # è°ƒæ•´è§†è§’\n)\n\n\n\n\n\n\n\n\n\n\n(2) æ€»ä½“ç´¯ç§¯æ•ˆåº” (Overall Cumulative Effect)\nè¿™æ˜¯æœ€å¸¸æ±‡æŠ¥çš„ç»“æœã€‚å®ƒæŠŠæ‰€æœ‰æ»åå¤©æ•°çš„æ•ˆåº”åŠ æ€»ï¼Œå›ç­”â€œæŸå¤©æš´éœ²äºæŸæ¸©åº¦ï¼Œæœªæ¥30å¤©çš„æ€»é£é™©æ˜¯å¤šå°‘ï¼Ÿâ€\n\nplot(pred, \"overall\",\n    xlab = \"Temperature (C)\", ylab = \"RR\",\n    main = \"Overall Cumulative Effect (30 days)\",\n    lwd = 2, col = \"red\"\n)\nabline(v = 21, lty = 2) # å‚è€ƒçº¿\n\n\n\n\n\n\n\n\n\n\n(3) åˆ‡ç‰‡å›¾ (Slices): ç‰¹å®šç»´åº¦æ•ˆåº”\næˆ‘ä»¬å¯ä»¥åˆ‡ç‰‡çœ‹ç‰¹å®šæ¸©åº¦çš„æ»åå½¢æ€ã€‚ä¾‹å¦‚ï¼Œçœ‹ 30Â°C (é«˜æ¸©) å’Œ -10Â°C (ä½æ¸©) çš„é£é™©éšæ—¶é—´çš„å˜åŒ–ã€‚\n\n# ç»˜åˆ¶ç‰¹å®šæ¸©åº¦çš„æ»åæ›²çº¿\nplot(pred, \"slices\",\n    var = c(-10, 30),\n    col = c(\"blue\", \"red\"),\n    type = \"b\", pch = 19,\n    main = \"Lag-Response at Low (-10) vs High (30) Temp\",\n    ylab = \"RR\", xlab = \"Lag Days\"\n)\nlegend(\"topright\", legend = c(\"-10 C\", \"30 C\"), col = c(\"blue\", \"red\"), lty = 1, pch = 19)\n\n\n\n\n\n\n\n\nè§£è¯»ï¼š - é«˜æ¸© (30Â°C, çº¢è‰²)ï¼šæ•ˆåº”å‡ºç°å¾—éå¸¸å¿«ï¼ˆå½“å¤©æˆ–ç¬¬1å¤©ï¼‰ï¼Œä½†ä¹Ÿæ¶ˆå¤±å¾—å¿«ï¼ˆâ€œæ”¶è·æ•ˆåº”â€, Harvesting Effectï¼‰ã€‚ - ä½æ¸© (-10Â°C, è“è‰²)ï¼šæ•ˆåº”å‡ºç°å¾—æ™šï¼Œä½†æŒç»­æ—¶é—´é•¿ï¼ˆå¯èƒ½æŒç»­2-3å‘¨ï¼‰ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "åˆ†å¸ƒæ»åéçº¿æ€§æ¨¡å‹ (DLNM)"
    ]
  },
  {
    "objectID": "1033-dlnm.html#å‚è€ƒæ–‡çŒ®",
    "href": "1033-dlnm.html#å‚è€ƒæ–‡çŒ®",
    "title": "åˆ†å¸ƒæ»åéçº¿æ€§æ¨¡å‹ (DLNM) å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒæ–‡çŒ®",
    "text": "å‚è€ƒæ–‡çŒ®\n\nGasparrini, A. (2011). Distributed Lag Linear and Non-Linear Models in R: The Package dlnm. Journal of Statistical Software.\nGasparrini, A., et al.Â (2010). Time-series analysis on the health effects of temperature: advancements and limitations.",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "åˆ†å¸ƒæ»åéçº¿æ€§æ¨¡å‹ (DLNM)"
    ]
  },
  {
    "objectID": "1035-fft-nvmd-gmm.html",
    "href": "1035-fft-nvmd-gmm.html",
    "title": "ç»„åˆç®—æ³•: FFT + VMD + GMM ä¿¡å·åˆ†æå®Œå…¨æŒ‡å—",
    "section": "",
    "text": "åœ¨å¤æ‚ä¿¡å·åˆ†æä¸­ï¼Œå•ä¸€ç®—æ³•å¾€å¾€éš¾ä»¥å¥æ•ˆã€‚æœ¬æ–‡ä»‹ç»ä¸€ç§ç»å…¸çš„ç»„åˆåˆ†ææ¡†æ¶ï¼š\nåŸå§‹ä¿¡å· â†’ FFTåˆ†æ â†’ ç¡®å®šKå€¼ â†’ VMDåˆ†è§£ â†’ ç‰¹å¾æå– â†’ GMMèšç±» â†’ çŠ¶æ€è¯†åˆ«\nè¿™ä¸ªæ¡†æ¶å°†é¢‘åŸŸåˆ†æã€ä¿¡å·åˆ†è§£ã€æœºå™¨å­¦ä¹ ä¸‰å¤§æŠ€æœ¯æœ‰æœºç»“åˆï¼Œå¯åº”ç”¨äºæ•…éšœè¯Šæ–­ã€ç”Ÿç‰©åŒ»å­¦ä¿¡å·åˆ†æã€é‡‘èçŠ¶æ€è¯†åˆ«ç­‰ä¼—å¤šé¢†åŸŸã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "FFT + VMD + GMM"
    ]
  },
  {
    "objectID": "1035-fft-nvmd-gmm.html#å‰è¨€",
    "href": "1035-fft-nvmd-gmm.html#å‰è¨€",
    "title": "ç»„åˆç®—æ³•: FFT + VMD + GMM ä¿¡å·åˆ†æå®Œå…¨æŒ‡å—",
    "section": "",
    "text": "åœ¨å¤æ‚ä¿¡å·åˆ†æä¸­ï¼Œå•ä¸€ç®—æ³•å¾€å¾€éš¾ä»¥å¥æ•ˆã€‚æœ¬æ–‡ä»‹ç»ä¸€ç§ç»å…¸çš„ç»„åˆåˆ†ææ¡†æ¶ï¼š\nåŸå§‹ä¿¡å· â†’ FFTåˆ†æ â†’ ç¡®å®šKå€¼ â†’ VMDåˆ†è§£ â†’ ç‰¹å¾æå– â†’ GMMèšç±» â†’ çŠ¶æ€è¯†åˆ«\nè¿™ä¸ªæ¡†æ¶å°†é¢‘åŸŸåˆ†æã€ä¿¡å·åˆ†è§£ã€æœºå™¨å­¦ä¹ ä¸‰å¤§æŠ€æœ¯æœ‰æœºç»“åˆï¼Œå¯åº”ç”¨äºæ•…éšœè¯Šæ–­ã€ç”Ÿç‰©åŒ»å­¦ä¿¡å·åˆ†æã€é‡‘èçŠ¶æ€è¯†åˆ«ç­‰ä¼—å¤šé¢†åŸŸã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "FFT + VMD + GMM"
    ]
  },
  {
    "objectID": "1035-fft-nvmd-gmm.html#å‚…é‡Œå¶å˜æ¢-fft-åŸºç¡€",
    "href": "1035-fft-nvmd-gmm.html#å‚…é‡Œå¶å˜æ¢-fft-åŸºç¡€",
    "title": "ç»„åˆç®—æ³•: FFT + VMD + GMM ä¿¡å·åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å‚…é‡Œå¶å˜æ¢ (FFT) åŸºç¡€",
    "text": "å‚…é‡Œå¶å˜æ¢ (FFT) åŸºç¡€\n\nä»€ä¹ˆæ˜¯å‚…é‡Œå¶å˜æ¢ï¼Ÿ\nå‚…é‡Œå¶å˜æ¢æ˜¯å°†æ—¶åŸŸä¿¡å·è½¬æ¢åˆ°é¢‘åŸŸçš„æ•°å­¦å·¥å…·ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š\n\nä»»ä½•å‘¨æœŸä¿¡å·éƒ½å¯ä»¥è¡¨ç¤ºä¸ºä¸åŒé¢‘ç‡æ­£å¼¦æ³¢çš„å åŠ \n\nå¯¹äºè¿ç»­ä¿¡å· \\(f(t)\\)ï¼Œå‚…é‡Œå¶å˜æ¢å®šä¹‰ä¸ºï¼š\n\\[F(\\omega) = \\int_{-\\infty}^{\\infty} f(t) e^{-j\\omega t} dt\\]\nå¯¹äºç¦»æ•£ä¿¡å·ï¼ˆè®¡ç®—æœºä¸­ï¼‰ï¼Œæˆ‘ä»¬ä½¿ç”¨ç¦»æ•£å‚…é‡Œå¶å˜æ¢ (DFT)ï¼š\n\\[X[k] = \\sum_{n=0}^{N-1} x[n] \\cdot e^{-j2\\pi kn/N}\\]\nå¿«é€Ÿå‚…é‡Œå¶å˜æ¢ (FFT) æ˜¯ DFT çš„é«˜æ•ˆç®—æ³•å®ç°ï¼Œå°†è®¡ç®—å¤æ‚åº¦ä» \\(O(N^2)\\) é™åˆ° \\(O(N \\log N)\\)ã€‚\n\n\né¢‘è°±çš„æ„ä¹‰\n\n\n\næ¦‚å¿µ\nè¯´æ˜\nè®¡ç®—æ–¹æ³•\n\n\n\n\nå¹…åº¦è°±\nå„é¢‘ç‡æˆåˆ†çš„å¼ºåº¦\n\\(|X[k]|\\)\n\n\nç›¸ä½è°±\nå„é¢‘ç‡æˆåˆ†çš„ç›¸ä½\n\\(\\arg(X[k])\\)\n\n\nåŠŸç‡è°±\nèƒ½é‡åœ¨é¢‘ç‡ä¸Šçš„åˆ†å¸ƒ\n\\(|X[k]|^2\\)\n\n\nåŠŸç‡è°±å¯†åº¦ (PSD)\nå•ä½é¢‘ç‡çš„åŠŸç‡\n\\(|X[k]|^2 / N\\)\n\n\n\n\n\nR è¯­è¨€ FFT å®ç°\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(VMDecomp)\nlibrary(mclust)\n\n# è®¾ç½®åŸºæœ¬å‚æ•°\nfs &lt;- 1000 # é‡‡æ ·é¢‘ç‡ (Hz)\nt &lt;- seq(0, 2, 1 / fs) # 2ç§’æ—¶é•¿\n\n# ç”Ÿæˆæµ‹è¯•ä¿¡å·ï¼šéå¹³ç¨³ä¿¡å·ï¼ˆé¢‘ç‡åœ¨ t=1s å¤„å˜åŒ–ï¼‰\nset.seed(123)\nsig &lt;- c(\n    sin(2 * pi * 10 * t[t &lt;= 1]) + 0.5 * sin(2 * pi * 30 * t[t &lt;= 1]), # å‰åŠæ®µ: 10Hz + 30Hz\n    sin(2 * pi * 50 * t[t &gt; 1]) + 0.3 * sin(2 * pi * 80 * t[t &gt; 1]) # ååŠæ®µ: 50Hz + 80Hz\n) + rnorm(length(t), 0, 0.2) # æ·»åŠ å™ªå£°\n\n# ç»˜åˆ¶æ—¶åŸŸä¿¡å·\nplot(t, sig,\n    type = \"l\", col = \"gray40\",\n    main = \"éå¹³ç¨³ä¿¡å·ï¼ˆé¢‘ç‡éšæ—¶é—´å˜åŒ–ï¼‰\",\n    xlab = \"Time (s)\", ylab = \"Amplitude\"\n)\nabline(v = 1, col = \"red\", lty = 2)\ntext(0.5, max(sig) * 0.8, \"10Hz + 30Hz\", col = \"blue\")\ntext(1.5, max(sig) * 0.8, \"50Hz + 80Hz\", col = \"blue\")\n\n\n\n\n\n\n\n\n\n\né¢‘è°±åˆ†æå‡½æ•°\n\n# è‡ªå®šä¹‰å•è¾¹é¢‘è°±è®¡ç®—å‡½æ•°\ncompute_spectrum &lt;- function(signal, fs) {\n    N &lt;- length(signal)\n    sig_fft &lt;- fft(signal)\n\n    # è®¡ç®—åŒè¾¹é¢‘è°±\n    P2 &lt;- abs(sig_fft / N)\n\n    # è½¬æ¢ä¸ºå•è¾¹é¢‘è°±\n    P1 &lt;- P2[1:(N / 2 + 1)]\n    P1[2:(length(P1) - 1)] &lt;- 2 * P1[2:(length(P1) - 1)]\n\n    # é¢‘ç‡è½´\n    f &lt;- fs * (0:(N / 2)) / N\n\n    return(data.frame(frequency = f, amplitude = P1))\n}\n\n# è®¡ç®—å¹¶ç»˜åˆ¶é¢‘è°±\nspectrum_df &lt;- compute_spectrum(sig, fs)\n\nggplot(spectrum_df, aes(x = frequency, y = amplitude)) +\n    geom_line(color = \"#4e79a7\", linewidth = 0.8) +\n    xlim(0, 100) +\n    labs(\n        title = \"å…¨å±€ FFT é¢‘è°±ï¼ˆä¿¡æ¯æ··æ‚ï¼‰\",\n        subtitle = \"æ— æ³•åŒºåˆ†å‰åæ—¶æ®µçš„é¢‘ç‡å·®å¼‚\",\n        x = \"Frequency (Hz)\",\n        y = \"Amplitude\"\n    ) +\n    theme_minimal(base_size = 14) +\n    geom_vline(xintercept = c(10, 30, 50, 80), linetype = \"dashed\", color = \"red\", alpha = 0.6)\n\n\n\n\n\n\n\n\n\n\nçŸ­æ—¶å‚…é‡Œå¶å˜æ¢ (STFT)\nå¯¹äºéå¹³ç¨³ä¿¡å·ï¼Œå…¨å±€ FFT ä¼šå°†æ‰€æœ‰æ—¶æ®µçš„é¢‘ç‡ä¿¡æ¯æ··åˆã€‚çŸ­æ—¶å‚…é‡Œå¶å˜æ¢ (STFT) é€šè¿‡æ»‘åŠ¨çª—å£è§£å†³è¿™ä¸ªé—®é¢˜ï¼š\n\n# ç®€æ˜“ STFT å®ç°\ncompute_stft &lt;- function(signal, fs, window_size = 256, hop_size = 128) {\n    N &lt;- length(signal)\n    n_windows &lt;- floor((N - window_size) / hop_size) + 1\n\n    # å­˜å‚¨ç»“æœ\n    stft_matrix &lt;- matrix(0, nrow = window_size / 2 + 1, ncol = n_windows)\n    time_points &lt;- numeric(n_windows)\n\n    for (i in 1:n_windows) {\n        start_idx &lt;- (i - 1) * hop_size + 1\n        end_idx &lt;- start_idx + window_size - 1\n\n        window &lt;- signal[start_idx:end_idx] * hann_window(window_size)\n        spectrum &lt;- compute_spectrum(window, fs)\n        stft_matrix[, i] &lt;- spectrum$amplitude\n        time_points[i] &lt;- t[start_idx + window_size / 2]\n    }\n\n    freq_axis &lt;- compute_spectrum(rep(0, window_size), fs)$frequency\n\n    return(list(\n        matrix = stft_matrix,\n        time = time_points,\n        freq = freq_axis\n    ))\n}\n\n# æ±‰å®çª—å‡½æ•°\nhann_window &lt;- function(N) {\n    0.5 * (1 - cos(2 * pi * (0:(N - 1)) / (N - 1)))\n}\n\n# è®¡ç®— STFT\nstft_result &lt;- compute_stft(sig, fs, window_size = 256, hop_size = 64)\n\n# ç»˜åˆ¶æ—¶é¢‘å›¾ (Spectrogram)\nstft_df &lt;- expand.grid(\n    Time = stft_result$time,\n    Frequency = stft_result$freq\n)\nstft_df$Amplitude &lt;- as.vector(t(stft_result$matrix))\n\nggplot(stft_df %&gt;% filter(Frequency &lt; 100), aes(x = Time, y = Frequency, fill = Amplitude)) +\n    geom_tile() +\n    scale_fill_viridis_c(option = \"magma\") +\n    labs(\n        title = \"çŸ­æ—¶å‚…é‡Œå¶å˜æ¢ (STFT) æ—¶é¢‘å›¾\",\n        subtitle = \"å¯ä»¥çœ‹åˆ° t=1s å¤„é¢‘ç‡å‘ç”Ÿå˜åŒ–\",\n        x = \"Time (s)\",\n        y = \"Frequency (Hz)\"\n    ) +\n    theme_minimal(base_size = 14)\n\n\n\n\n\n\n\n\n\n[!TIP] FFT åœ¨ VMD å·¥ä½œæµä¸­çš„ä½œç”¨ï¼š 1. è¯†åˆ«ä¿¡å·ä¸­æœ‰å¤šå°‘ä¸ªæ˜æ˜¾çš„é¢‘ç‡æˆåˆ† 2. æ®æ­¤ç¡®å®š VMD çš„æ¨¡æ€æ•° K 3. éªŒè¯ VMD åˆ†è§£ç»“æœçš„æ­£ç¡®æ€§",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "FFT + VMD + GMM"
    ]
  },
  {
    "objectID": "1035-fft-nvmd-gmm.html#vmd-åˆ†è§£",
    "href": "1035-fft-nvmd-gmm.html#vmd-åˆ†è§£",
    "title": "ç»„åˆç®—æ³•: FFT + VMD + GMM ä¿¡å·åˆ†æå®Œå…¨æŒ‡å—",
    "section": "VMD åˆ†è§£",
    "text": "VMD åˆ†è§£\n\nä¸ºä»€ä¹ˆç”¨ VMD è€Œä¸æ˜¯ç›´æ¥ç”¨ FFTï¼Ÿ\n\n\n\né—®é¢˜\nFFT çš„å±€é™\nVMD çš„è§£å†³æ–¹æ¡ˆ\n\n\n\n\néå¹³ç¨³ä¿¡å·\nå‡è®¾ä¿¡å·å¹³ç¨³\nè‡ªé€‚åº”åˆ†è§£\n\n\næ¨¡æ€æ··å \næ— æ³•åˆ†ç¦»ç›¸è¿‘é¢‘ç‡\nå¸¦å®½çº¦æŸåˆ†ç¦»\n\n\nå™ªå£°æ•æ„Ÿ\nå™ªå£°æ±¡æŸ“é¢‘è°±\nå†…ç½®å»å™ª\n\n\næ—¶å˜ç‰¹æ€§\næ— æ³•ä½“ç°æ—¶é—´ä¿¡æ¯\nä¿ç•™æ—¶åŸŸç»“æ„\n\n\n\n\n\nä½¿ç”¨ FFT ç¡®å®š K å€¼\n\n# åˆ†æ®µ FFT åˆ†æä»¥ç¡®å®š K å€¼\npar(mfrow = c(1, 2))\n\n# å‰åŠæ®µé¢‘è°±\nspectrum_first &lt;- compute_spectrum(sig[1:(length(sig) / 2)], fs)\nplot(spectrum_first$frequency, spectrum_first$amplitude,\n    type = \"l\", xlim = c(0, 100),\n    main = \"å‰åŠæ®µé¢‘è°± (t &lt; 1s)\",\n    xlab = \"Frequency (Hz)\", ylab = \"Amplitude\"\n)\n\n# ååŠæ®µé¢‘è°±\nspectrum_second &lt;- compute_spectrum(sig[(length(sig) / 2 + 1):length(sig)], fs)\nplot(spectrum_second$frequency, spectrum_second$amplitude,\n    type = \"l\", xlim = c(0, 100),\n    main = \"ååŠæ®µé¢‘è°± (t &gt; 1s)\",\n    xlab = \"Frequency (Hz)\", ylab = \"Amplitude\"\n)\n\n\n\n\n\n\n\n\nè§‚å¯Ÿï¼š - å‰åŠæ®µæœ‰ 2 ä¸ªå³°å€¼ï¼ˆ10Hz, 30Hzï¼‰ - ååŠæ®µæœ‰ 2 ä¸ªå³°å€¼ï¼ˆ50Hz, 80Hzï¼‰ - å…¨ä¿¡å·åˆ†è§£å»ºè®® K = 4\n\n\næ‰§è¡Œ VMD åˆ†è§£\n\n# VMD åˆ†è§£\nK &lt;- 4\nalpha &lt;- 2000\nvmd_result &lt;- VMDecomp::vmd(sig, alpha = alpha, tau = 0, K = K, DC = FALSE, init = 1, tol = 1e-6)\n\n# æå– IMF\nimfs &lt;- vmd_result$u\n\n# ç»˜åˆ¶å„æ¨¡æ€\npar(mfrow = c(K + 1, 1), mar = c(2, 4, 2, 1))\n\nplot(t, sig, type = \"l\", col = \"gray\", main = \"åŸå§‹ä¿¡å·\", ylab = \"Amp\")\n\ncolors &lt;- c(\"#e41a1c\", \"#377eb8\", \"#4daf4a\", \"#984ea3\")\nfor (i in 1:K) {\n    plot(t, imfs[, i],\n        type = \"l\", col = colors[i],\n        main = paste(\"IMF\", i), ylab = \"Amp\"\n    )\n}\n\n\n\n\n\n\n\n\n\n\né¢‘è°±éªŒè¯\n\npar(mfrow = c(2, 2), mar = c(4, 4, 2, 1))\n\nfor (i in 1:K) {\n    imf_spectrum &lt;- compute_spectrum(imfs[, i], fs)\n\n    plot(imf_spectrum$frequency, imf_spectrum$amplitude,\n        type = \"l\", xlim = c(0, 100), col = colors[i], lwd = 2,\n        main = paste(\"IMF\", i, \"é¢‘è°±\"),\n        xlab = \"Frequency (Hz)\", ylab = \"Amplitude\"\n    )\n\n    # æ ‡æ³¨å³°å€¼\n    peak_idx &lt;- which.max(imf_spectrum$amplitude[imf_spectrum$frequency &lt; 100 & imf_spectrum$frequency &gt; 3])\n    peak_freq &lt;- imf_spectrum$frequency[imf_spectrum$frequency &lt; 100 & imf_spectrum$frequency &gt; 3][peak_idx]\n    abline(v = peak_freq, lty = 2, col = \"red\")\n    text(peak_freq + 5, max(imf_spectrum$amplitude) * 0.8, paste0(round(peak_freq, 1), \" Hz\"))\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "FFT + VMD + GMM"
    ]
  },
  {
    "objectID": "1035-fft-nvmd-gmm.html#ç‰¹å¾æå–",
    "href": "1035-fft-nvmd-gmm.html#ç‰¹å¾æå–",
    "title": "ç»„åˆç®—æ³•: FFT + VMD + GMM ä¿¡å·åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç‰¹å¾æå–",
    "text": "ç‰¹å¾æå–\n\nä¸ºä»€ä¹ˆéœ€è¦ç‰¹å¾æå–ï¼Ÿ\næœºå™¨å­¦ä¹ æ¨¡å‹éœ€è¦å›ºå®šé•¿åº¦çš„ç‰¹å¾å‘é‡ä½œä¸ºè¾“å…¥ï¼Œè€ŒåŸå§‹ IMF æ˜¯å˜é•¿æ—¶é—´åºåˆ—ã€‚ç‰¹å¾æå–å°†æ—¶åºæ•°æ®å‹ç¼©ä¸ºæœ‰æ„ä¹‰çš„ç»Ÿè®¡é‡ã€‚\n\n\nå¸¸ç”¨ç‰¹å¾ç±»å‹\n\næ—¶åŸŸç‰¹å¾\n\n\n\n\n\n\n\n\nç‰¹å¾\nå…¬å¼\nç‰©ç†æ„ä¹‰\n\n\n\n\nèƒ½é‡\n\\(E = \\sum x_i^2\\)\nä¿¡å·å¼ºåº¦\n\n\nå‡å€¼\n\\(\\bar{x} = \\frac{1}{N}\\sum x_i\\)\nç›´æµåˆ†é‡\n\n\næ ‡å‡†å·®\n\\(\\sigma = \\sqrt{\\frac{1}{N}\\sum(x_i-\\bar{x})^2}\\)\næ³¢åŠ¨å¹…åº¦\n\n\nå³°åº¦\n\\(Kurt = \\frac{E[(x-\\mu)^4]}{\\sigma^4}\\)\nå°–é”ç¨‹åº¦\n\n\nååº¦\n\\(Skew = \\frac{E[(x-\\mu)^3]}{\\sigma^3}\\)\nå¯¹ç§°æ€§\n\n\nå³°å€¼å› å­\n\\(CF = \\frac{\\max|x|}{RMS}\\)\nå†²å‡»ç¨‹åº¦\n\n\næ³¢å½¢å› å­\n\\(SF = \\frac{RMS}{\\bar{|x|}}\\)\næ³¢å½¢ç‰¹å¾\n\n\n\n\n\né¢‘åŸŸç‰¹å¾\n\n\n\n\n\n\n\n\nç‰¹å¾\nè®¡ç®—æ–¹æ³•\nç‰©ç†æ„ä¹‰\n\n\n\n\nä¸»é¢‘\n\\(f_{peak} = \\arg\\max(FFT)\\)\nä¸»è¦æŒ¯åŠ¨é¢‘ç‡\n\n\nå‡å€¼é¢‘ç‡\n\\(\\bar{f} = \\frac{\\sum f \\cdot P(f)}{\\sum P(f)}\\)\né¢‘ç‡åŠ æƒä¸­å¿ƒ\n\n\nè°±ç†µ\n\\(H = -\\sum p \\log p\\)\né¢‘ç‡åˆ†å¸ƒå¤æ‚åº¦\n\n\né¢‘å¸¦èƒ½é‡æ¯”\nå„é¢‘æ®µèƒ½é‡å æ¯”\nèƒ½é‡åˆ†å¸ƒ\n\n\n\n\n\n\nç‰¹å¾æå–å®ç°\n\n# ç»¼åˆç‰¹å¾æå–å‡½æ•°\nextract_features &lt;- function(signal, fs = 1000) {\n    N &lt;- length(signal)\n\n    # ====== æ—¶åŸŸç‰¹å¾ ======\n    energy &lt;- sum(signal^2)\n    mean_val &lt;- mean(signal)\n    std_val &lt;- sd(signal)\n    rms &lt;- sqrt(mean(signal^2))\n\n    # å³°åº¦ (excess kurtosis)\n    kurtosis &lt;- mean((signal - mean_val)^4) / std_val^4 - 3\n\n    # ååº¦\n    skewness &lt;- mean((signal - mean_val)^3) / std_val^3\n\n    # å³°å€¼å› å­\n    crest_factor &lt;- max(abs(signal)) / rms\n\n    # æ³¢å½¢å› å­\n    shape_factor &lt;- rms / mean(abs(signal))\n\n    # ====== é¢‘åŸŸç‰¹å¾ ======\n    spectrum &lt;- compute_spectrum(signal, fs)\n    freq &lt;- spectrum$frequency\n    amp &lt;- spectrum$amplitude\n\n    # å½’ä¸€åŒ–ä¸ºæ¦‚ç‡åˆ†å¸ƒ\n    p &lt;- amp^2 / sum(amp^2)\n\n    # ä¸»é¢‘\n    peak_freq &lt;- freq[which.max(amp)]\n\n    # å‡å€¼é¢‘ç‡\n    mean_freq &lt;- sum(freq * p)\n\n    # è°±ç†µ\n    p_nonzero &lt;- p[p &gt; 0]\n    spectral_entropy &lt;- -sum(p_nonzero * log(p_nonzero))\n\n    return(c(\n        energy = energy,\n        mean = mean_val,\n        std = std_val,\n        rms = rms,\n        kurtosis = kurtosis,\n        skewness = skewness,\n        crest_factor = crest_factor,\n        shape_factor = shape_factor,\n        peak_freq = peak_freq,\n        mean_freq = mean_freq,\n        spectral_entropy = spectral_entropy\n    ))\n}\n\n# æµ‹è¯•\ntest_features &lt;- extract_features(imfs[, 1], fs)\nprint(round(test_features, 4))\n\n          energy             mean              std              rms \n        511.0578           0.0045           0.5055           0.5054 \n        kurtosis         skewness     crest_factor     shape_factor \n         -0.5073          -0.0254           1.8736           1.4294 \n       peak_freq        mean_freq spectral_entropy \n          9.9950          10.9408           1.6179 \n\n\n\n\næ»‘åŠ¨çª—å£ç‰¹å¾æå–\nå¯¹äºçŠ¶æ€è¯†åˆ«ä»»åŠ¡ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ä¿¡å·è¿›è¡Œåˆ†çª—å¤„ç†ï¼š\n\n# æ»‘åŠ¨çª—å£ç‰¹å¾æå–\nextract_windowed_features &lt;- function(signal, fs, window_size = 200, hop_size = 100) {\n    N &lt;- length(signal)\n    n_windows &lt;- floor((N - window_size) / hop_size) + 1\n\n    # åˆ›å»ºç»“æœçŸ©é˜µ\n    feature_names &lt;- names(extract_features(rep(0, window_size), fs))\n    features_matrix &lt;- matrix(0, nrow = n_windows, ncol = length(feature_names))\n    colnames(features_matrix) &lt;- feature_names\n\n    for (i in 1:n_windows) {\n        start_idx &lt;- (i - 1) * hop_size + 1\n        end_idx &lt;- start_idx + window_size - 1\n\n        window &lt;- signal[start_idx:end_idx]\n        features_matrix[i, ] &lt;- extract_features(window, fs)\n    }\n\n    return(as.data.frame(features_matrix))\n}\n\n# å¯¹å„ IMF æå–ç‰¹å¾\nwindow_size &lt;- 200\nhop_size &lt;- 50\n\n# åˆå¹¶æ‰€æœ‰ IMF çš„ç‰¹å¾\nall_features &lt;- data.frame()\n\nfor (k in 1:K) {\n    imf_features &lt;- extract_windowed_features(imfs[, k], fs, window_size, hop_size)\n    colnames(imf_features) &lt;- paste0(\"IMF\", k, \"_\", colnames(imf_features))\n\n    if (nrow(all_features) == 0) {\n        all_features &lt;- imf_features\n    } else {\n        all_features &lt;- cbind(all_features, imf_features)\n    }\n}\n\n# æ·»åŠ æ—¶é—´æ ‡è®°\nall_features$time_center &lt;- seq(window_size / 2, length(sig) - window_size / 2, by = hop_size)[1:nrow(all_features)] / fs\n\ncat(\"ç‰¹å¾çŸ©é˜µç»´åº¦:\", nrow(all_features), \"çª—å£ Ã—\", ncol(all_features), \"ç‰¹å¾\\n\")\n\nç‰¹å¾çŸ©é˜µç»´åº¦: 37 çª—å£ Ã— 45 ç‰¹å¾\n\nhead(all_features[, 1:8])\n\n  IMF1_energy    IMF1_mean  IMF1_std  IMF1_rms IMF1_kurtosis IMF1_skewness\n1    95.91241 -0.008986550 0.6941835 0.6925042     -1.781182 -0.0496853067\n2    97.78674 -0.008553458 0.7009402 0.6992379     -1.750559 -0.0051914563\n3    95.86975 -0.002196664 0.6940841 0.6923502     -1.751934  0.0005472744\n4    99.64436  0.010403110 0.7075427 0.7058483     -1.751202  0.0105093115\n5   101.46643  0.003455328 0.7140515 0.7122725     -1.753510  0.0104493683\n6   102.84331  0.005958152 0.7188636 0.7170889     -1.746364  0.0250877436\n  IMF1_crest_factor IMF1_shape_factor\n1          1.278486          1.057038\n2          1.266174          1.066611\n3          1.260690          1.066445\n4          1.268955          1.066610\n5          1.264428          1.065135\n6          1.255935          1.067441",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "FFT + VMD + GMM"
    ]
  },
  {
    "objectID": "1035-fft-nvmd-gmm.html#gmm-é«˜æ–¯æ··åˆæ¨¡å‹èšç±»",
    "href": "1035-fft-nvmd-gmm.html#gmm-é«˜æ–¯æ··åˆæ¨¡å‹èšç±»",
    "title": "ç»„åˆç®—æ³•: FFT + VMD + GMM ä¿¡å·åˆ†æå®Œå…¨æŒ‡å—",
    "section": "GMM é«˜æ–¯æ··åˆæ¨¡å‹èšç±»",
    "text": "GMM é«˜æ–¯æ··åˆæ¨¡å‹èšç±»\n\nGMM åŸç†\né«˜æ–¯æ··åˆæ¨¡å‹ (Gaussian Mixture Model) å‡è®¾æ•°æ®ç”± \\(G\\) ä¸ªé«˜æ–¯åˆ†å¸ƒæ··åˆç”Ÿæˆï¼š\n\\[p(x) = \\sum_{g=1}^{G} \\pi_g \\cdot \\mathcal{N}(x | \\mu_g, \\Sigma_g)\\]\nå…¶ä¸­ï¼š - \\(\\pi_g\\)ï¼šç¬¬ \\(g\\) ä¸ªæˆåˆ†çš„æ··åˆæƒé‡ - \\(\\mu_g\\)ï¼šç¬¬ \\(g\\) ä¸ªæˆåˆ†çš„å‡å€¼å‘é‡ - \\(\\Sigma_g\\)ï¼šç¬¬ \\(g\\) ä¸ªæˆåˆ†çš„åæ–¹å·®çŸ©é˜µ\n\n\nGMM vs K-means\n\n\n\nç‰¹æ€§\nGMM\nK-means\n\n\n\n\nèšç±»æ–¹å¼\nè½¯èšç±»ï¼ˆæ¦‚ç‡ï¼‰\nç¡¬èšç±»ï¼ˆç¡®å®šï¼‰\n\n\nç°‡å½¢çŠ¶\næ¤­çƒå½¢ï¼ˆçµæ´»ï¼‰\nçƒå½¢\n\n\nè¾“å‡º\nç±»åˆ«æ¦‚ç‡\nç±»åˆ«æ ‡ç­¾\n\n\næ¨¡å‹é€‰æ‹©\nBIC/AIC è‡ªåŠ¨\néœ€æ‰‹åŠ¨æŒ‡å®š K\n\n\nåæ–¹å·®\nå¤šç§ç±»å‹å¯é€‰\næ— \n\n\n\n\n\nmclust åŒ…ä½¿ç”¨\n\n# é€‰æ‹©å…³é”®ç‰¹å¾è¿›è¡Œèšç±»ï¼ˆé¿å…ç»´åº¦è¿‡é«˜ï¼‰\nkey_features &lt;- all_features %&gt;%\n    select(\n        IMF1_energy, IMF2_energy, IMF3_energy, IMF4_energy,\n        IMF1_peak_freq, IMF2_peak_freq, IMF3_peak_freq, IMF4_peak_freq\n    )\n\n# æ•°æ®æ ‡å‡†åŒ–\nkey_features_scaled &lt;- scale(key_features)\n\n# GMM èšç±»\n# Mclust ä¼šè‡ªåŠ¨å°è¯•ä¸åŒçš„ G å€¼å’Œåæ–¹å·®ç±»å‹\ngmm_fit &lt;- Mclust(key_features_scaled)\n\n# æ¨¡å‹æ‘˜è¦\nsummary(gmm_fit)\n\n---------------------------------------------------- \nGaussian finite mixture model fitted by EM algorithm \n---------------------------------------------------- \n\nMclust VEV (ellipsoidal, equal shape) model with 5 components: \n\n log-likelihood  n  df       BIC       ICL\n       98.11498 37 196 -511.5099 -511.5099\n\nClustering table:\n 1  2  3  4  5 \n16 10  5  3  3 \n\n\n\n\næ¨¡å‹é€‰æ‹©ï¼ˆBIC å‡†åˆ™ï¼‰\n\n# ç»˜åˆ¶ BIC æ›²çº¿\nplot(gmm_fit, what = \"BIC\")\ntitle(\"BIC æ¨¡å‹é€‰æ‹©æ›²çº¿\")\n\n\n\n\n\n\n\n\n\n[!NOTE] BIC (è´å¶æ–¯ä¿¡æ¯å‡†åˆ™)ï¼šå€¼è¶Šå¤§è¡¨ç¤ºæ¨¡å‹è¶Šå¥½ã€‚mclust ä¼šè‡ªåŠ¨åœ¨ä¸åŒçš„æˆåˆ†æ•° G å’Œåæ–¹å·®ç»“æ„ä¸­é€‰æ‹©æœ€ä¼˜æ¨¡å‹ã€‚\n\n\n\nèšç±»ç»“æœå¯è§†åŒ–\n\n# æ·»åŠ èšç±»æ ‡ç­¾\nall_features$cluster &lt;- gmm_fit$classification\n\n# æ—¶é—´-çŠ¶æ€å›¾\npar(mfrow = c(2, 1), mar = c(4, 4, 2, 1))\n\n# åŸå§‹ä¿¡å·ç€è‰²\nplot(t, sig,\n    type = \"l\", col = \"gray\",\n    main = \"åŸå§‹ä¿¡å·ä¸è¯†åˆ«çš„çŠ¶æ€\", xlab = \"Time (s)\", ylab = \"Amplitude\"\n)\n\n# çŠ¶æ€åºåˆ—\nplot(all_features$time_center, all_features$cluster,\n    type = \"s\", col = all_features$cluster, lwd = 2,\n    main = \"è¯†åˆ«çš„çŠ¶æ€åºåˆ—\", xlab = \"Time (s)\", ylab = \"State\",\n    ylim = c(0.5, max(all_features$cluster) + 0.5)\n)\npoints(all_features$time_center, all_features$cluster,\n    col = all_features$cluster, pch = 19, cex = 0.8\n)\nabline(v = 1, lty = 2, col = \"red\")\ntext(1, max(all_features$cluster) + 0.3, \"é¢‘ç‡åˆ‡æ¢ç‚¹\", col = \"red\")\n\n\n\n\n\n\n\n\n\n\nèšç±»æ¦‚ç‡å¯è§†åŒ–\n\n# è·å–å„ç±»åˆ«çš„æ¦‚ç‡\ncluster_probs &lt;- gmm_fit$z\ncolnames(cluster_probs) &lt;- paste0(\"State_\", 1:ncol(cluster_probs))\n\n# è½¬æ¢ä¸ºé•¿æ ¼å¼\nprobs_df &lt;- as.data.frame(cluster_probs)\nprobs_df$time &lt;- all_features$time_center\nprobs_long &lt;- pivot_longer(probs_df,\n    cols = starts_with(\"State\"),\n    names_to = \"State\", values_to = \"Probability\"\n)\n\n# ç»˜åˆ¶æ¦‚ç‡çƒ­å›¾\nggplot(probs_long, aes(x = time, y = State, fill = Probability)) +\n    geom_tile() +\n    scale_fill_viridis_c(option = \"plasma\") +\n    labs(\n        title = \"å„æ—¶åˆ»å±äºä¸åŒçŠ¶æ€çš„æ¦‚ç‡\",\n        subtitle = \"GMM è½¯èšç±»ç»“æœ\",\n        x = \"Time (s)\",\n        y = \"State\"\n    ) +\n    theme_minimal(base_size = 14) +\n    geom_vline(xintercept = 1, linetype = \"dashed\", color = \"white\", linewidth = 1)\n\n\n\n\n\n\n\n\n\n\nç‰¹å¾ç©ºé—´å¯è§†åŒ–\n\n# ä½¿ç”¨ PCA é™ç»´å¯è§†åŒ–\npca_result &lt;- prcomp(key_features_scaled)\n\n# å‡†å¤‡ç»‘å›¾æ•°æ®\npca_df &lt;- data.frame(\n    PC1 = pca_result$x[, 1],\n    PC2 = pca_result$x[, 2],\n    Cluster = factor(all_features$cluster),\n    Time = all_features$time_center\n)\n\n# ç»‘å›¾\nggplot(pca_df, aes(x = PC1, y = PC2, color = Cluster)) +\n    geom_point(aes(size = Time), alpha = 0.7) +\n    scale_color_brewer(palette = \"Set1\") +\n    labs(\n        title = \"ç‰¹å¾ç©ºé—´èšç±»ç»“æœ (PCA é™ç»´)\",\n        subtitle = \"ç‚¹å¤§å°è¡¨ç¤ºæ—¶é—´ï¼Œé¢œè‰²è¡¨ç¤ºèšç±»\",\n        x = paste0(\"PC1 (\", round(summary(pca_result)$importance[2, 1] * 100, 1), \"%)\"),\n        y = paste0(\"PC2 (\", round(summary(pca_result)$importance[2, 2] * 100, 1), \"%)\")\n    ) +\n    theme_minimal(base_size = 14)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "FFT + VMD + GMM"
    ]
  },
  {
    "objectID": "1035-fft-nvmd-gmm.html#å®Œæ•´æµç¨‹å°è£…",
    "href": "1035-fft-nvmd-gmm.html#å®Œæ•´æµç¨‹å°è£…",
    "title": "ç»„åˆç®—æ³•: FFT + VMD + GMM ä¿¡å·åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å®Œæ•´æµç¨‹å°è£…",
    "text": "å®Œæ•´æµç¨‹å°è£…\n\nç«¯åˆ°ç«¯åˆ†æå‡½æ•°\n\n# å°è£…å®Œæ•´çš„ FFT-VMD-GMM æµç¨‹\nanalyze_signal &lt;- function(signal, fs, K = NULL, alpha = 2000, window_size = 200, hop_size = 50) {\n    # Step 1: å¦‚æœ K æœªæŒ‡å®šï¼Œä½¿ç”¨ FFT ä¼°è®¡\n    if (is.null(K)) {\n        spectrum &lt;- compute_spectrum(signal, fs)\n        # ç®€å•çš„å³°å€¼æ£€æµ‹\n        threshold &lt;- max(spectrum$amplitude) * 0.1\n        peaks &lt;- which(\n            spectrum$amplitude &gt; threshold &\n                spectrum$frequency &gt; 5 &\n                spectrum$frequency &lt; fs / 2 - 10\n        )\n        K &lt;- min(length(peaks), 6) # æœ€å¤š 6 ä¸ªæ¨¡æ€\n        K &lt;- max(K, 2) # æœ€å°‘ 2 ä¸ªæ¨¡æ€\n        cat(\"FFT ä¼°è®¡ K =\", K, \"\\n\")\n    }\n\n    # Step 2: VMD åˆ†è§£\n    vmd_result &lt;- VMDecomp::vmd(signal,\n        alpha = alpha, tau = 0, K = K,\n        DC = FALSE, init = 1, tol = 1e-6\n    )\n    imfs &lt;- vmd_result$u\n\n    # Step 3: ç‰¹å¾æå–\n    all_features &lt;- data.frame()\n    for (k in 1:K) {\n        imf_features &lt;- extract_windowed_features(imfs[, k], fs, window_size, hop_size)\n        colnames(imf_features) &lt;- paste0(\"IMF\", k, \"_\", colnames(imf_features))\n\n        if (nrow(all_features) == 0) {\n            all_features &lt;- imf_features\n        } else {\n            all_features &lt;- cbind(all_features, imf_features)\n        }\n    }\n\n    # Step 4: GMM èšç±»\n    # é€‰æ‹©èƒ½é‡å’Œä¸»é¢‘ç‰¹å¾\n    energy_cols &lt;- grep(\"energy\", colnames(all_features), value = TRUE)\n    freq_cols &lt;- grep(\"peak_freq\", colnames(all_features), value = TRUE)\n    key_features &lt;- all_features[, c(energy_cols, freq_cols)]\n\n    key_features_scaled &lt;- scale(key_features)\n    gmm_fit &lt;- Mclust(key_features_scaled, G = 1:5)\n\n    # è¿”å›ç»“æœ\n    return(list(\n        imfs = imfs,\n        features = all_features,\n        gmm = gmm_fit,\n        clusters = gmm_fit$classification,\n        K = K\n    ))\n}\n\n\n\nåº”ç”¨ç¤ºä¾‹\n\n# åˆ†ææˆ‘ä»¬çš„æµ‹è¯•ä¿¡å·\nresult &lt;- analyze_signal(sig, fs, K = 4, window_size = 200, hop_size = 50)\n\ncat(\"åˆ†è§£æ¨¡æ€æ•°:\", result$K, \"\\n\")\n\nåˆ†è§£æ¨¡æ€æ•°: 4 \n\ncat(\"è¯†åˆ«çŠ¶æ€æ•°:\", result$gmm$G, \"\\n\")\n\nè¯†åˆ«çŠ¶æ€æ•°: 5 \n\ncat(\"å„çŠ¶æ€æ ·æœ¬æ•°:\", table(result$clusters), \"\\n\")\n\nå„çŠ¶æ€æ ·æœ¬æ•°: 16 10 5 3 3",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "FFT + VMD + GMM"
    ]
  },
  {
    "objectID": "1035-fft-nvmd-gmm.html#å®é™…åº”ç”¨æ¡ˆä¾‹",
    "href": "1035-fft-nvmd-gmm.html#å®é™…åº”ç”¨æ¡ˆä¾‹",
    "title": "ç»„åˆç®—æ³•: FFT + VMD + GMM ä¿¡å·åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å®é™…åº”ç”¨æ¡ˆä¾‹",
    "text": "å®é™…åº”ç”¨æ¡ˆä¾‹\n\nåº”ç”¨åœºæ™¯ä¸€è§ˆ\n\n\n\n\n\n\n\n\n\n\né¢†åŸŸ\nä¿¡å·æ¥æº\nFFT ä½œç”¨\nVMD ä½œç”¨\nGMM ä½œç”¨\n\n\n\n\næœºæ¢°æ•…éšœè¯Šæ–­\næŒ¯åŠ¨ä¼ æ„Ÿå™¨\nè¯†åˆ«ç‰¹å¾é¢‘ç‡\nåˆ†ç¦»æ•…éšœæ¨¡æ€\næ•…éšœç±»å‹åˆ†ç±»\n\n\nå¿ƒç”µåˆ†æ\nECG ç”µæ\né¢‘å¸¦åˆ†æ\nåˆ†ç¦»å¿ƒç‡æˆåˆ†\nå¿ƒå¾‹å¼‚å¸¸åˆ†ç±»\n\n\nè„‘ç”µåˆ†æ\nEEG ç”µæ\nè¯†åˆ«è„‘æ³¢èŠ‚å¾‹\nåˆ†ç¦» Î±/Î²/Î¸/Î´ æ³¢\nç¡çœ åˆ†æœŸ\n\n\né‡‘èåˆ†æ\nè‚¡ä»·åºåˆ—\nè¯†åˆ«å‘¨æœŸ\nè¶‹åŠ¿åˆ†ç¦»\nå¸‚åœºçŠ¶æ€è¯†åˆ«\n\n\nè¯­éŸ³å¤„ç†\néº¦å…‹é£\né¢‘è°±åˆ†æ\nå…±æŒ¯å³°åˆ†ç¦»\nè¯­éŸ³åˆ†ç±»\n\n\n\n\n\næ•…éšœè¯Šæ–­ç¤ºä¾‹æ¡†æ¶\n\n# æœºæ¢°æ•…éšœè¯Šæ–­æ¡†æ¶ï¼ˆæ¦‚å¿µä»£ç ï¼‰\n\n# 1. æ•°æ®é‡‡é›†\nvibration_data &lt;- read_sensor_data(\"bearing_vibration.csv\")\n\n# 2. é¢„å¤„ç†\nsignal &lt;- vibration_data$amplitude\nfs &lt;- 12800 # å…¸å‹æŒ¯åŠ¨é‡‡æ ·ç‡\n\n# 3. FFT åˆ†æè¯†åˆ«ç‰¹å¾é¢‘ç‡\n#    - æ»šåŠ¨ä½“é€šè¿‡é¢‘ç‡ (BPFO)\n#    - å†…åœˆé€šè¿‡é¢‘ç‡ (BPFI)\n#    - ä¿æŒæ¶é¢‘ç‡ (FTF)\n\n# 4. VMD åˆ†è§£\nresult &lt;- analyze_signal(signal, fs, K = 5)\n\n# 5. GMM èšç±»è¯†åˆ«æ•…éšœæ¨¡å¼\n#    - æ­£å¸¸è¿è¡Œ\n#    - æ—©æœŸæ•…éšœ\n#    - å‘å±•æœŸæ•…éšœ\n#    - ä¸¥é‡æ•…éšœ\n\n# 6. è¾“å‡ºè¯Šæ–­ç»“æœ\ndiagnosis &lt;- classify_fault_state(result$clusters)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "FFT + VMD + GMM"
    ]
  },
  {
    "objectID": "1035-fft-nvmd-gmm.html#è¿›é˜¶æŠ€å·§",
    "href": "1035-fft-nvmd-gmm.html#è¿›é˜¶æŠ€å·§",
    "title": "ç»„åˆç®—æ³•: FFT + VMD + GMM ä¿¡å·åˆ†æå®Œå…¨æŒ‡å—",
    "section": "è¿›é˜¶æŠ€å·§",
    "text": "è¿›é˜¶æŠ€å·§\n\nè‡ªåŠ¨ K å€¼é€‰æ‹©\n\n# åŸºäºæ®‹å·®èƒ½é‡çš„ K å€¼è‡ªåŠ¨é€‰æ‹©\nauto_select_K &lt;- function(signal, alpha = 2000, K_max = 8) {\n    residual_energy &lt;- numeric(K_max)\n\n    for (K in 2:K_max) {\n        vmd_result &lt;- VMDecomp::vmd(signal,\n            alpha = alpha, tau = 0, K = K,\n            DC = FALSE, init = 1, tol = 1e-6\n        )\n        reconstructed &lt;- rowSums(vmd_result$u)\n        residual_energy[K] &lt;- sum((signal - reconstructed)^2) / sum(signal^2)\n    }\n\n    # æ‰¾åˆ°æ‹ç‚¹ï¼ˆæ®‹å·®å˜åŒ–ç‡å°äºé˜ˆå€¼ï¼‰\n    energy_diff &lt;- -diff(residual_energy[2:K_max])\n    optimal_K &lt;- which(energy_diff &lt; 0.01)[1] + 1\n    if (is.na(optimal_K)) optimal_K &lt;- which.min(residual_energy[2:K_max]) + 1\n\n    return(list(\n        optimal_K = optimal_K,\n        residual_energy = residual_energy\n    ))\n}\n\n\n\nç‰¹å¾é‡è¦æ€§åˆ†æ\n\n# ä½¿ç”¨éšæœºæ£®æ—è¯„ä¼°ç‰¹å¾é‡è¦æ€§\n# library(randomForest)\n\n# åˆ›å»ºç›‘ç£å­¦ä¹ åœºæ™¯ï¼ˆå¦‚æœæœ‰æ ‡ç­¾ï¼‰\n# rf_model &lt;- randomForest(cluster ~ ., data = all_features)\n# importance(rf_model)\n\n\n[!IMPORTANT] æµç¨‹ä¼˜åŒ–å»ºè®®ï¼š 1. å…ˆç”¨å°‘é‡æ ·æœ¬è°ƒè¯•å‚æ•° 2. ç‰¹å¾æ ‡å‡†åŒ–éå¸¸é‡è¦ 3. è€ƒè™‘ä½¿ç”¨äº¤å‰éªŒè¯è¯„ä¼°èšç±»ç¨³å®šæ€§ 4. å¯¹äºæ—¶åºæ•°æ®ï¼Œæ³¨æ„ä¿æŒæ—¶é—´é¡ºåº",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "FFT + VMD + GMM"
    ]
  },
  {
    "objectID": "1035-fft-nvmd-gmm.html#æ€»ç»“",
    "href": "1035-fft-nvmd-gmm.html#æ€»ç»“",
    "title": "ç»„åˆç®—æ³•: FFT + VMD + GMM ä¿¡å·åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nFFT â†’ VMD â†’ Feature Engineering â†’ GMM æ˜¯ä¸€ä¸ªé€šç”¨ä¸”å¼ºå¤§çš„ä¿¡å·åˆ†ææ¡†æ¶ï¼š\nflowchart LR\n    A[ä¿¡å·] --&gt; B[FFT]\n    B --&gt;|ç¡®å®š K| C[VMD]\n    C --&gt;|IMFs| D[ç‰¹å¾æå–]\n    D --&gt;|ç‰¹å¾å‘é‡| E[GMM]\n    E --&gt;|æ¦‚ç‡èšç±»| F[çŠ¶æ€è¯†åˆ«]\nå„æ­¥éª¤ä»·å€¼ï¼š 1. FFTï¼šæä¾›å…ˆéªŒçŸ¥è¯†ï¼ŒæŒ‡å¯¼å‚æ•°é€‰æ‹© 2. VMDï¼šé™å™ªä¸æˆåˆ†åˆ†ç¦»ï¼Œæå–æœ‰æ„ä¹‰çš„æ¨¡æ€ 3. ç‰¹å¾å·¥ç¨‹ï¼šå°†æ—¶åºæ•°æ®è½¬æ¢ä¸ºå¯åˆ†æçš„ç‰¹å¾å‘é‡ 4. GMMï¼šå®ç°è‡ªåŠ¨åŒ–çŠ¶æ€è¯†åˆ«ï¼Œæä¾›æ¦‚ç‡æ€§åˆ†ç±»ç»“æœ\n\n[!TIP] æ¡†æ¶æ‰©å±•æ€§ï¼š - å¯ç”¨ EMD/EEMD/CEEMDAN æ›¿ä»£ VMD - å¯ç”¨ K-means/DBSCAN/è°±èšç±»æ›¿ä»£ GMM - å¯åŠ å…¥ç›‘ç£å­¦ä¹ ï¼ˆSVMã€ç¥ç»ç½‘ç»œï¼‰è¿›è¡Œåˆ†ç±»",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "FFT + VMD + GMM"
    ]
  },
  {
    "objectID": "1035-fft-nvmd-gmm.html#å‚è€ƒæ–‡çŒ®",
    "href": "1035-fft-nvmd-gmm.html#å‚è€ƒæ–‡çŒ®",
    "title": "ç»„åˆç®—æ³•: FFT + VMD + GMM ä¿¡å·åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒæ–‡çŒ®",
    "text": "å‚è€ƒæ–‡çŒ®\n\nDragomiretskiy, K., & Zosso, D. (2014). Variational Mode Decomposition. IEEE Transactions on Signal Processing, 62(3), 531-544.\nFraley, C., & Raftery, A. E. (2002). Model-based clustering, discriminant analysis, and density estimation. JASA, 97(458), 611-631.\nCooley, J. W., & Tukey, J. W. (1965). An algorithm for the machine calculation of complex Fourier series. Mathematics of computation, 19(90), 297-301.\nScrucca, L., et al.Â (2016). mclust 5: Clustering, Classification and Density Estimation Using Gaussian Finite Mixture Models. The R Journal, 8(1), 289-317.",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "FFT + VMD + GMM"
    ]
  },
  {
    "objectID": "1037-plspm.html",
    "href": "1037-plspm.html",
    "title": "PLS-PM åæœ€å°äºŒä¹˜è·¯å¾„æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "åæœ€å°äºŒä¹˜è·¯å¾„æ¨¡å‹ (PLS-PM, Partial Least Squares Path Modeling) æ˜¯ä¸€ç§åŸºäºæ–¹å·®çš„ç»“æ„æ–¹ç¨‹å»ºæ¨¡æŠ€æœ¯ï¼Œä¸ä¼ ç»Ÿçš„åŸºäºåæ–¹å·®çš„ SEMï¼ˆå¦‚ lavaanï¼‰ç›¸æ¯”ï¼Œå…·æœ‰ç‹¬ç‰¹ä¼˜åŠ¿ã€‚\n\n\n\n\n\nç‰¹æ€§\nPLS-PM\nCB-SEM (lavaan)\n\n\n\n\næ ·æœ¬é‡è¦æ±‚\nå°æ ·æœ¬å³å¯ (n â‰¥ 30)\néœ€è¦è¾ƒå¤§æ ·æœ¬ (n â‰¥ 200)\n\n\nåˆ†å¸ƒå‡è®¾\næ— éœ€æ­£æ€å‡è®¾\né€šå¸¸å‡è®¾å¤šå…ƒæ­£æ€\n\n\næ¨¡å‹ç›®æ ‡\né¢„æµ‹å¯¼å‘\nç†è®ºéªŒè¯\n\n\nå½¢æˆæ€§æŒ‡æ ‡\nå¤©ç„¶æ”¯æŒ\néœ€è¦ç‰¹æ®Šå¤„ç†\n\n\nå¤æ‚æ¨¡å‹\nå¤„ç†æ›´å¥½\nå¯èƒ½ä¸æ”¶æ•›\n\n\né€‚ç”¨åœºæ™¯\næ¢ç´¢æ€§ç ”ç©¶\néªŒè¯æ€§ç ”ç©¶\n\n\n\n\n\n\n\næ ·æœ¬é‡å°ï¼šä¸´åºŠç ”ç©¶ã€é—®å·è°ƒæŸ¥ç­‰éš¾ä»¥è·å¾—å¤§æ ·æœ¬\næ¢ç´¢æ€§ç ”ç©¶ï¼šç†è®ºå°šæœªæˆç†Ÿï¼Œéœ€è¦æ¢ç´¢å˜é‡å…³ç³»\nå½¢æˆæ€§æŒ‡æ ‡ï¼šæŒ‡æ ‡æ„æˆæ½œå˜é‡è€Œéåæ˜ æ½œå˜é‡\né¢„æµ‹ä¸ºä¸»ï¼šå…³æ³¨é¢„æµ‹èƒ½åŠ›è€Œéæ¨¡å‹æ‹Ÿåˆ\nå¤æ‚æ¨¡å‹ï¼šå¤§é‡æ½œå˜é‡å’ŒæŒ‡æ ‡",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "PLS-PM è·¯å¾„æ¨¡å‹"
    ]
  },
  {
    "objectID": "1037-plspm.html#ç®€ä»‹",
    "href": "1037-plspm.html#ç®€ä»‹",
    "title": "PLS-PM åæœ€å°äºŒä¹˜è·¯å¾„æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "åæœ€å°äºŒä¹˜è·¯å¾„æ¨¡å‹ (PLS-PM, Partial Least Squares Path Modeling) æ˜¯ä¸€ç§åŸºäºæ–¹å·®çš„ç»“æ„æ–¹ç¨‹å»ºæ¨¡æŠ€æœ¯ï¼Œä¸ä¼ ç»Ÿçš„åŸºäºåæ–¹å·®çš„ SEMï¼ˆå¦‚ lavaanï¼‰ç›¸æ¯”ï¼Œå…·æœ‰ç‹¬ç‰¹ä¼˜åŠ¿ã€‚\n\n\n\n\n\nç‰¹æ€§\nPLS-PM\nCB-SEM (lavaan)\n\n\n\n\næ ·æœ¬é‡è¦æ±‚\nå°æ ·æœ¬å³å¯ (n â‰¥ 30)\néœ€è¦è¾ƒå¤§æ ·æœ¬ (n â‰¥ 200)\n\n\nåˆ†å¸ƒå‡è®¾\næ— éœ€æ­£æ€å‡è®¾\né€šå¸¸å‡è®¾å¤šå…ƒæ­£æ€\n\n\næ¨¡å‹ç›®æ ‡\né¢„æµ‹å¯¼å‘\nç†è®ºéªŒè¯\n\n\nå½¢æˆæ€§æŒ‡æ ‡\nå¤©ç„¶æ”¯æŒ\néœ€è¦ç‰¹æ®Šå¤„ç†\n\n\nå¤æ‚æ¨¡å‹\nå¤„ç†æ›´å¥½\nå¯èƒ½ä¸æ”¶æ•›\n\n\né€‚ç”¨åœºæ™¯\næ¢ç´¢æ€§ç ”ç©¶\néªŒè¯æ€§ç ”ç©¶\n\n\n\n\n\n\n\næ ·æœ¬é‡å°ï¼šä¸´åºŠç ”ç©¶ã€é—®å·è°ƒæŸ¥ç­‰éš¾ä»¥è·å¾—å¤§æ ·æœ¬\næ¢ç´¢æ€§ç ”ç©¶ï¼šç†è®ºå°šæœªæˆç†Ÿï¼Œéœ€è¦æ¢ç´¢å˜é‡å…³ç³»\nå½¢æˆæ€§æŒ‡æ ‡ï¼šæŒ‡æ ‡æ„æˆæ½œå˜é‡è€Œéåæ˜ æ½œå˜é‡\né¢„æµ‹ä¸ºä¸»ï¼šå…³æ³¨é¢„æµ‹èƒ½åŠ›è€Œéæ¨¡å‹æ‹Ÿåˆ\nå¤æ‚æ¨¡å‹ï¼šå¤§é‡æ½œå˜é‡å’ŒæŒ‡æ ‡",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "PLS-PM è·¯å¾„æ¨¡å‹"
    ]
  },
  {
    "objectID": "1037-plspm.html#å®‰è£…ä¸åŠ è½½",
    "href": "1037-plspm.html#å®‰è£…ä¸åŠ è½½",
    "title": "PLS-PM åæœ€å°äºŒä¹˜è·¯å¾„æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\n# å®‰è£…ï¼ˆå¦‚æœªå®‰è£…ï¼‰\n# install.packages(\"seminr\")\n\nlibrary(seminr)\nlibrary(dplyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "PLS-PM è·¯å¾„æ¨¡å‹"
    ]
  },
  {
    "objectID": "1037-plspm.html#æ ¸å¿ƒæ¦‚å¿µ",
    "href": "1037-plspm.html#æ ¸å¿ƒæ¦‚å¿µ",
    "title": "PLS-PM åæœ€å°äºŒä¹˜è·¯å¾„æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "æ ¸å¿ƒæ¦‚å¿µ",
    "text": "æ ¸å¿ƒæ¦‚å¿µ\n\næµ‹é‡æ¨¡å‹ç±»å‹\nPLS-PM åŒºåˆ†ä¸¤ç§æµ‹é‡æ¨¡å‹ï¼š\nåæ˜ æ€§æŒ‡æ ‡ (Reflective)ï¼š - æ½œå˜é‡ â†’ æŒ‡æ ‡ï¼ˆæ½œå˜é‡â€åæ˜ â€ä¸ºæŒ‡æ ‡ï¼‰ - æŒ‡æ ‡é—´é«˜ç›¸å…³ï¼Œå¯äº’æ¢ - ä¾‹å¦‚ï¼šæ»¡æ„åº¦é‡è¡¨çš„å„é¢˜ç›®\nå½¢æˆæ€§æŒ‡æ ‡ (Formative)ï¼š - æŒ‡æ ‡ â†’ æ½œå˜é‡ï¼ˆæŒ‡æ ‡â€å½¢æˆâ€æ½œå˜é‡ï¼‰ - æŒ‡æ ‡é—´ä¸ä¸€å®šç›¸å…³ - ä¾‹å¦‚ï¼šç¤¾ä¼šç»æµåœ°ä½ï¼ˆç”±æ”¶å…¥ã€æ•™è‚²ã€èŒä¸šç»„æˆï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "PLS-PM è·¯å¾„æ¨¡å‹"
    ]
  },
  {
    "objectID": "1037-plspm.html#ç¤ºä¾‹æ•°æ®",
    "href": "1037-plspm.html#ç¤ºä¾‹æ•°æ®",
    "title": "PLS-PM åæœ€å°äºŒä¹˜è·¯å¾„æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¤ºä¾‹æ•°æ®",
    "text": "ç¤ºä¾‹æ•°æ®\næˆ‘ä»¬ä½¿ç”¨ seminr è‡ªå¸¦çš„ mobi æ•°æ®é›†ï¼Œè¯¥æ•°æ®åŒ…å«ç§»åŠ¨ç”µè¯æœåŠ¡æ»¡æ„åº¦è°ƒæŸ¥æ•°æ®ã€‚\n\n# åŠ è½½æ•°æ®\ndata(mobi)\nhead(mobi)\n\n  CUEX1 CUEX2 CUEX3 CUSA1 CUSA2 CUSA3 CUSCO CUSL1 CUSL2 CUSL3 IMAG1 IMAG2 IMAG3\n1     7     7     6     6     4     7     7     6     5     6     7     5     5\n2    10    10     9    10    10     8    10    10     2    10    10     9    10\n3     7     7     7     8     7     7     6     6     2     7     8     7     6\n4     7    10     5    10    10    10     5    10     4    10    10    10     5\n5     8     7    10    10     8     8     5    10     3     8    10    10     5\n6    10     9     7     8     7     7     8    10     3    10     8     9    10\n  IMAG4 IMAG5 PERQ1 PERQ2 PERQ3 PERQ4 PERQ5 PERQ6 PERQ7 PERV1 PERV2\n1     5     4     7     6     4     7     6     5     5     2     3\n2    10     9    10     9    10    10     9    10    10    10    10\n3     4     7     7     8     5     7     8     7     7     7     7\n4     5    10     8    10    10     8     4     5     8     5     5\n5     8     9    10     9     8    10     9     9     8     6     6\n6     8     9     9    10     9    10     8     9     9    10    10\n\n\nå˜é‡è¯´æ˜ï¼š\n\n\n\næ½œå˜é‡\næŒ‡æ ‡\næè¿°\n\n\n\n\næœŸæœ› (EXPE)\nCUEX1-3\nå®¢æˆ·æœŸæœ›\n\n\nè´¨é‡ (QUAL)\nPERQ1-7\næ„ŸçŸ¥è´¨é‡\n\n\nä»·å€¼ (VAL)\nPERV1-2\næ„ŸçŸ¥ä»·å€¼\n\n\næ»¡æ„åº¦ (SAT)\nCUSA1-3\nå®¢æˆ·æ»¡æ„åº¦\n\n\næŠ±æ€¨ (COMP)\nCUSCO\nå®¢æˆ·æŠ±æ€¨\n\n\nå¿ è¯š (LOY)\nCUSL1-3\nå®¢æˆ·å¿ è¯šåº¦",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "PLS-PM è·¯å¾„æ¨¡å‹"
    ]
  },
  {
    "objectID": "1037-plspm.html#æ¨¡å‹è®¾å®š",
    "href": "1037-plspm.html#æ¨¡å‹è®¾å®š",
    "title": "PLS-PM åæœ€å°äºŒä¹˜è·¯å¾„æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹è®¾å®š",
    "text": "æ¨¡å‹è®¾å®š\n\n1. å®šä¹‰æµ‹é‡æ¨¡å‹\n\n# å®šä¹‰æµ‹é‡æ¨¡å‹ï¼ˆåæ˜ æ€§æŒ‡æ ‡ï¼‰\nmeasurements &lt;- constructs(\n    # åæ˜ æ€§æ„å¿µï¼šä½¿ç”¨ reflective()\n    reflective(\"æœŸæœ›\", multi_items(\"CUEX\", 1:3)),\n    reflective(\"è´¨é‡\", multi_items(\"PERQ\", 1:7)),\n    reflective(\"ä»·å€¼\", multi_items(\"PERV\", 1:2)),\n    reflective(\"æ»¡æ„åº¦\", multi_items(\"CUSA\", 1:3)),\n    reflective(\"å¿ è¯š\", multi_items(\"CUSL\", 1:3)),\n\n    # å•æŒ‡æ ‡æ„å¿µ\n    reflective(\"æŠ±æ€¨\", single_item(\"CUSCO\"))\n)\n\n\n\n2. å®šä¹‰ç»“æ„æ¨¡å‹\n\n# å®šä¹‰ç»“æ„æ¨¡å‹ï¼ˆè·¯å¾„å…³ç³»ï¼‰\nstructure &lt;- relationships(\n    paths(from = \"æœŸæœ›\", to = c(\"è´¨é‡\", \"ä»·å€¼\", \"æ»¡æ„åº¦\")),\n    paths(from = \"è´¨é‡\", to = c(\"ä»·å€¼\", \"æ»¡æ„åº¦\")),\n    paths(from = \"ä»·å€¼\", to = \"æ»¡æ„åº¦\"),\n    paths(from = \"æ»¡æ„åº¦\", to = c(\"æŠ±æ€¨\", \"å¿ è¯š\")),\n    paths(from = \"æŠ±æ€¨\", to = \"å¿ è¯š\")\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "PLS-PM è·¯å¾„æ¨¡å‹"
    ]
  },
  {
    "objectID": "1037-plspm.html#æ¨¡å‹ä¼°è®¡",
    "href": "1037-plspm.html#æ¨¡å‹ä¼°è®¡",
    "title": "PLS-PM åæœ€å°äºŒä¹˜è·¯å¾„æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹ä¼°è®¡",
    "text": "æ¨¡å‹ä¼°è®¡\n\n# ä¼°è®¡ PLS-PM æ¨¡å‹\npls_model &lt;- estimate_pls(\n    data = mobi,\n    measurement_model = measurements,\n    structural_model = structure,\n    inner_weights = path_weighting # è·¯å¾„åŠ æƒæ–¹æ¡ˆ\n)\n\n# æŸ¥çœ‹æ¨¡å‹æ‘˜è¦\nsummary(pls_model)\n\n\nResults from  package seminr (2.3.7)\n\nPath Coefficients:\n        è´¨é‡   ä»·å€¼ æ»¡æ„åº¦  æŠ±æ€¨   å¿ è¯š\nR^2    0.762  0.455  0.924 0.353  0.722\nAdjR^2 0.762  0.450  0.923 0.351  0.720\næœŸæœ›   0.873 -0.040  0.044     .      .\nè´¨é‡       .  0.709  0.790     .      .\nä»·å€¼       .      .  0.183     .      .\næ»¡æ„åº¦     .      .      . 0.594  0.872\næŠ±æ€¨       .      .      .     . -0.039\n\nReliability:\n       alpha  rhoC   AVE  rhoA\næœŸæœ›   0.452 0.459 0.221 0.462\nè´¨é‡   0.877 0.877 0.507 0.884\nä»·å€¼   0.824 0.835 0.719 0.855\næ»¡æ„åº¦ 0.779 0.780 0.544 0.789\næŠ±æ€¨   1.000 1.000 1.000 1.000\nå¿ è¯š   0.472 0.591 0.386 0.761\n\nAlpha, rhoC, and rhoA should exceed 0.7 while AVE should exceed 0.5",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "PLS-PM è·¯å¾„æ¨¡å‹"
    ]
  },
  {
    "objectID": "1037-plspm.html#bootstrap-æ£€éªŒ",
    "href": "1037-plspm.html#bootstrap-æ£€éªŒ",
    "title": "PLS-PM åæœ€å°äºŒä¹˜è·¯å¾„æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "Bootstrap æ£€éªŒ",
    "text": "Bootstrap æ£€éªŒ\nPLS-PM ä½¿ç”¨ Bootstrap æ–¹æ³•è¿›è¡Œæ˜¾è‘—æ€§æ£€éªŒã€‚\n\n# Bootstrap ä¼°è®¡ï¼ˆé€šå¸¸ 5000 æ¬¡ï¼Œè¿™é‡Œä¸ºæ¼”ç¤ºç”¨ 500 æ¬¡ï¼‰\nset.seed(123)\nboot_model &lt;- bootstrap_model(\n    seminr_model = pls_model,\n    nboot = 500,\n    cores = 1 # å¹¶è¡Œæ ¸å¿ƒæ•°\n)\n\n# æŸ¥çœ‹ Bootstrap ç»“æœ\nsummary(boot_model)\n\n\nResults from Bootstrap resamples:  500\n\nBootstrapped Structural Paths:\n                 Original Est. Bootstrap Mean Bootstrap SD T Stat. 2.5% CI\næœŸæœ›  -&gt;  è´¨é‡           0.873          0.872        0.090   9.682   0.701\næœŸæœ›  -&gt;  ä»·å€¼          -0.040          0.418        6.425  -0.006  -1.925\næœŸæœ›  -&gt;  æ»¡æ„åº¦         0.044         -0.016        1.922   0.023  -2.541\nè´¨é‡  -&gt;  ä»·å€¼           0.709          0.251        6.424   0.110  -1.717\nè´¨é‡  -&gt;  æ»¡æ„åº¦         0.790          0.860        1.837   0.430  -0.767\nä»·å€¼  -&gt;  æ»¡æ„åº¦         0.183          0.169        0.291   0.627  -0.132\næ»¡æ„åº¦  -&gt;  æŠ±æ€¨         0.594          0.598        0.056  10.656   0.489\næ»¡æ„åº¦  -&gt;  å¿ è¯š         0.872          0.881        0.092   9.522   0.688\næŠ±æ€¨  -&gt;  å¿ è¯š          -0.039         -0.041        0.069  -0.558  -0.173\n                 97.5% CI\næœŸæœ›  -&gt;  è´¨é‡      1.071\næœŸæœ›  -&gt;  ä»·å€¼      2.405\næœŸæœ›  -&gt;  æ»¡æ„åº¦    1.431\nè´¨é‡  -&gt;  ä»·å€¼      2.568\nè´¨é‡  -&gt;  æ»¡æ„åº¦    3.523\nä»·å€¼  -&gt;  æ»¡æ„åº¦    0.432\næ»¡æ„åº¦  -&gt;  æŠ±æ€¨    0.703\næ»¡æ„åº¦  -&gt;  å¿ è¯š    1.040\næŠ±æ€¨  -&gt;  å¿ è¯š      0.087\n\nBootstrapped Weights:\n                  Original Est. Bootstrap Mean Bootstrap SD T Stat. 2.5% CI\nCUEX1  -&gt;  æœŸæœ›           0.535          0.527        0.060   8.968   0.418\nCUEX2  -&gt;  æœŸæœ›           0.441          0.448        0.080   5.483   0.290\nCUEX3  -&gt;  æœŸæœ›           0.464          0.450        0.068   6.824   0.320\nPERQ1  -&gt;  è´¨é‡           0.214          0.213        0.014  15.598   0.189\nPERQ2  -&gt;  è´¨é‡           0.145          0.143        0.014  10.397   0.114\nPERQ3  -&gt;  è´¨é‡           0.200          0.200        0.013  15.725   0.177\nPERQ4  -&gt;  è´¨é‡           0.179          0.179        0.011  16.499   0.158\nPERQ5  -&gt;  è´¨é‡           0.179          0.178        0.013  13.814   0.150\nPERQ6  -&gt;  è´¨é‡           0.179          0.179        0.015  11.744   0.150\nPERQ7  -&gt;  è´¨é‡           0.216          0.217        0.015  14.321   0.192\nPERV1  -&gt;  ä»·å€¼           0.479          0.478        0.020  24.395   0.434\nPERV2  -&gt;  ä»·å€¼           0.604          0.606        0.027  22.577   0.557\nCUSA1  -&gt;  æ»¡æ„åº¦         0.363          0.364        0.018  20.410   0.330\nCUSA2  -&gt;  æ»¡æ„åº¦         0.386          0.385        0.016  24.510   0.354\nCUSA3  -&gt;  æ»¡æ„åº¦         0.449          0.449        0.020  22.176   0.412\nCUSL1  -&gt;  å¿ è¯š           0.447          0.444        0.029  15.177   0.381\nCUSL2  -&gt;  å¿ è¯š           0.115          0.112        0.060   1.909   0.005\nCUSL3  -&gt;  å¿ è¯š           0.666          0.665        0.042  16.018   0.596\nCUSCO  -&gt;  æŠ±æ€¨           1.000          1.000        0.000       .   1.000\n                  97.5% CI\nCUEX1  -&gt;  æœŸæœ›      0.642\nCUEX2  -&gt;  æœŸæœ›      0.596\nCUEX3  -&gt;  æœŸæœ›      0.585\nPERQ1  -&gt;  è´¨é‡      0.242\nPERQ2  -&gt;  è´¨é‡      0.170\nPERQ3  -&gt;  è´¨é‡      0.225\nPERQ4  -&gt;  è´¨é‡      0.200\nPERQ5  -&gt;  è´¨é‡      0.202\nPERQ6  -&gt;  è´¨é‡      0.207\nPERQ7  -&gt;  è´¨é‡      0.251\nPERV1  -&gt;  ä»·å€¼      0.515\nPERV2  -&gt;  ä»·å€¼      0.662\nCUSA1  -&gt;  æ»¡æ„åº¦    0.398\nCUSA2  -&gt;  æ»¡æ„åº¦    0.415\nCUSA3  -&gt;  æ»¡æ„åº¦    0.493\nCUSL1  -&gt;  å¿ è¯š      0.499\nCUSL2  -&gt;  å¿ è¯š      0.226\nCUSL3  -&gt;  å¿ è¯š      0.752\nCUSCO  -&gt;  æŠ±æ€¨      1.000\n\nBootstrapped Loadings:\n                  Original Est. Bootstrap Mean Bootstrap SD T Stat. 2.5% CI\nCUEX1  -&gt;  æœŸæœ›           0.522          0.527        0.081   6.423   0.371\nCUEX2  -&gt;  æœŸæœ›           0.431          0.450        0.101   4.248   0.263\nCUEX3  -&gt;  æœŸæœ›           0.453          0.448        0.070   6.512   0.314\nPERQ1  -&gt;  è´¨é‡           0.807          0.802        0.037  21.901   0.731\nPERQ2  -&gt;  è´¨é‡           0.547          0.540        0.060   9.070   0.409\nPERQ3  -&gt;  è´¨é‡           0.755          0.754        0.043  17.489   0.659\nPERQ4  -&gt;  è´¨é‡           0.676          0.677        0.059  11.531   0.552\nPERQ5  -&gt;  è´¨é‡           0.674          0.673        0.061  11.006   0.537\nPERQ6  -&gt;  è´¨é‡           0.676          0.677        0.070   9.608   0.533\nPERQ7  -&gt;  è´¨é‡           0.814          0.818        0.034  23.611   0.745\nPERV1  -&gt;  ä»·å€¼           0.745          0.743        0.048  15.477   0.643\nPERV2  -&gt;  ä»·å€¼           0.939          0.941        0.033  28.298   0.874\nCUSA1  -&gt;  æ»¡æ„åº¦         0.668          0.671        0.043  15.517   0.582\nCUSA2  -&gt;  æ»¡æ„åº¦         0.710          0.710        0.041  17.504   0.628\nCUSA3  -&gt;  æ»¡æ„åº¦         0.826          0.828        0.034  24.610   0.755\nCUSL1  -&gt;  å¿ è¯š           0.594          0.591        0.067   8.930   0.456\nCUSL2  -&gt;  å¿ è¯š           0.153          0.149        0.080   1.911   0.007\nCUSL3  -&gt;  å¿ è¯š           0.884          0.881        0.042  20.851   0.794\nCUSCO  -&gt;  æŠ±æ€¨           1.000          1.000        0.000       .   1.000\n                  97.5% CI\nCUEX1  -&gt;  æœŸæœ›      0.685\nCUEX2  -&gt;  æœŸæœ›      0.658\nCUEX3  -&gt;  æœŸæœ›      0.581\nPERQ1  -&gt;  è´¨é‡      0.872\nPERQ2  -&gt;  è´¨é‡      0.647\nPERQ3  -&gt;  è´¨é‡      0.830\nPERQ4  -&gt;  è´¨é‡      0.780\nPERQ5  -&gt;  è´¨é‡      0.774\nPERQ6  -&gt;  è´¨é‡      0.798\nPERQ7  -&gt;  è´¨é‡      0.883\nPERV1  -&gt;  ä»·å€¼      0.833\nPERV2  -&gt;  ä»·å€¼      1.010\nCUSA1  -&gt;  æ»¡æ„åº¦    0.749\nCUSA2  -&gt;  æ»¡æ„åº¦    0.784\nCUSA3  -&gt;  æ»¡æ„åº¦    0.889\nCUSL1  -&gt;  å¿ è¯š      0.714\nCUSL2  -&gt;  å¿ è¯š      0.302\nCUSL3  -&gt;  å¿ è¯š      0.964\nCUSCO  -&gt;  æŠ±æ€¨      1.000\n\nBootstrapped HTMT:\n                 Original Est. Bootstrap Mean Bootstrap SD 2.5% CI 97.5% CI\næœŸæœ›  -&gt;  è´¨é‡           0.878          0.878        0.090   0.710    1.070\næœŸæœ›  -&gt;  ä»·å€¼           0.589          0.593        0.114   0.371    0.807\næœŸæœ›  -&gt;  æ»¡æ„åº¦         0.865          0.868        0.097   0.698    1.091\næœŸæœ›  -&gt;  æŠ±æ€¨           0.383          0.393        0.096   0.206    0.568\næœŸæœ›  -&gt;  å¿ è¯š           0.770          0.793        0.116   0.595    1.020\nè´¨é‡  -&gt;  ä»·å€¼           0.673          0.669        0.067   0.529    0.789\nè´¨é‡  -&gt;  æ»¡æ„åº¦         0.954          0.955        0.030   0.896    1.012\nè´¨é‡  -&gt;  æŠ±æ€¨           0.564          0.568        0.055   0.459    0.670\nè´¨é‡  -&gt;  å¿ è¯š           0.759          0.772        0.089   0.612    0.955\nä»·å€¼  -&gt;  æ»¡æ„åº¦         0.741          0.741        0.070   0.600    0.869\nä»·å€¼  -&gt;  æŠ±æ€¨           0.387          0.389        0.079   0.233    0.529\nä»·å€¼  -&gt;  å¿ è¯š           0.797          0.797        0.090   0.624    0.963\næ»¡æ„åº¦  -&gt;  æŠ±æ€¨         0.588          0.592        0.057   0.473    0.698\næ»¡æ„åº¦  -&gt;  å¿ è¯š         0.957          0.959        0.092   0.776    1.136\næŠ±æ€¨  -&gt;  å¿ è¯š           0.561          0.560        0.088   0.376    0.721\n\nBootstrapped Total Paths:\n                 Original Est. Bootstrap Mean Bootstrap SD 2.5% CI 97.5% CI\næœŸæœ›  -&gt;  è´¨é‡           0.873          0.872        0.090   0.701    1.071\næœŸæœ›  -&gt;  ä»·å€¼           0.579          0.583        0.113   0.358    0.803\næœŸæœ›  -&gt;  æ»¡æ„åº¦         0.840          0.842        0.095   0.672    1.053\næœŸæœ›  -&gt;  æŠ±æ€¨           0.499          0.503        0.066   0.375    0.635\næœŸæœ›  -&gt;  å¿ è¯š           0.713          0.720        0.102   0.532    0.951\nè´¨é‡  -&gt;  ä»·å€¼           0.709          0.251        6.424  -1.717    2.568\nè´¨é‡  -&gt;  æ»¡æ„åº¦         0.920          0.826        5.174  -0.217    3.005\nè´¨é‡  -&gt;  æŠ±æ€¨           0.547          0.490        3.028  -0.123    1.780\nè´¨é‡  -&gt;  å¿ è¯š           0.781          0.696        4.654  -0.181    2.479\nä»·å€¼  -&gt;  æ»¡æ„åº¦         0.183          0.169        0.291  -0.132    0.432\nä»·å€¼  -&gt;  æŠ±æ€¨           0.109          0.101        0.165  -0.075    0.256\nä»·å€¼  -&gt;  å¿ è¯š           0.155          0.147        0.267  -0.111    0.386\næ»¡æ„åº¦  -&gt;  æŠ±æ€¨         0.594          0.598        0.056   0.489    0.703\næ»¡æ„åº¦  -&gt;  å¿ è¯š         0.849          0.856        0.077   0.691    0.996\næŠ±æ€¨  -&gt;  å¿ è¯š          -0.039         -0.041        0.069  -0.173    0.087",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "PLS-PM è·¯å¾„æ¨¡å‹"
    ]
  },
  {
    "objectID": "1037-plspm.html#ç»“æœè§£è¯»",
    "href": "1037-plspm.html#ç»“æœè§£è¯»",
    "title": "PLS-PM åæœ€å°äºŒä¹˜è·¯å¾„æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç»“æœè§£è¯»",
    "text": "ç»“æœè§£è¯»\n\næµ‹é‡æ¨¡å‹è¯„ä¼°\n\n1. æŒ‡æ ‡è½½è·\n\n# æŸ¥çœ‹æŒ‡æ ‡è½½è·\npls_model$outer_loadings\n\n           æœŸæœ›      è´¨é‡      ä»·å€¼    æ»¡æ„åº¦ æŠ±æ€¨      å¿ è¯š\nCUEX1 0.5223333 0.0000000 0.0000000 0.0000000    0 0.0000000\nCUEX2 0.4308613 0.0000000 0.0000000 0.0000000    0 0.0000000\nCUEX3 0.4533521 0.0000000 0.0000000 0.0000000    0 0.0000000\nPERQ1 0.0000000 0.8065942 0.0000000 0.0000000    0 0.0000000\nPERQ2 0.0000000 0.5468900 0.0000000 0.0000000    0 0.0000000\nPERQ3 0.0000000 0.7552731 0.0000000 0.0000000    0 0.0000000\nPERQ4 0.0000000 0.6761444 0.0000000 0.0000000    0 0.0000000\nPERQ5 0.0000000 0.6740449 0.0000000 0.0000000    0 0.0000000\nPERQ6 0.0000000 0.6756726 0.0000000 0.0000000    0 0.0000000\nPERQ7 0.0000000 0.8140902 0.0000000 0.0000000    0 0.0000000\nPERV1 0.0000000 0.0000000 0.7454342 0.0000000    0 0.0000000\nPERV2 0.0000000 0.0000000 0.9392489 0.0000000    0 0.0000000\nCUSA1 0.0000000 0.0000000 0.0000000 0.6682438    0 0.0000000\nCUSA2 0.0000000 0.0000000 0.0000000 0.7100752    0 0.0000000\nCUSA3 0.0000000 0.0000000 0.0000000 0.8258661    0 0.0000000\nCUSL1 0.0000000 0.0000000 0.0000000 0.0000000    0 0.5939083\nCUSL2 0.0000000 0.0000000 0.0000000 0.0000000    0 0.1530756\nCUSL3 0.0000000 0.0000000 0.0000000 0.0000000    0 0.8843865\nCUSCO 0.0000000 0.0000000 0.0000000 0.0000000    1 0.0000000\n\n\nè¯„ä¼°æ ‡å‡†ï¼š - è½½è· &gt; 0.708ï¼ˆæˆ– &gt; 0.7ï¼‰è¡¨ç¤ºæŒ‡æ ‡å¯é  - è‹¥è½½è·åœ¨ 0.4-0.7 ä¹‹é—´ï¼Œéœ€æ£€æŸ¥åˆ é™¤åå¯¹ AVE çš„å½±å“ - è½½è· &lt; 0.4 åº”è€ƒè™‘åˆ é™¤\n\n\n2. ä¿¡åº¦æ£€éªŒ\n\n# æå–ä¿¡åº¦æŒ‡æ ‡\nsummary(pls_model)$reliability\n\n       alpha  rhoC   AVE  rhoA\næœŸæœ›   0.452 0.459 0.221 0.462\nè´¨é‡   0.877 0.877 0.507 0.884\nä»·å€¼   0.824 0.835 0.719 0.855\næ»¡æ„åº¦ 0.779 0.780 0.544 0.789\næŠ±æ€¨   1.000 1.000 1.000 1.000\nå¿ è¯š   0.472 0.591 0.386 0.761\n\nAlpha, rhoC, and rhoA should exceed 0.7 while AVE should exceed 0.5\n\n\nè¯„ä¼°æ ‡å‡†ï¼š\n\n\n\næŒ‡æ ‡\né˜ˆå€¼\nè¯´æ˜\n\n\n\n\nCronbachâ€™s Î±\n&gt; 0.7\nä¼ ç»Ÿä¿¡åº¦æŒ‡æ ‡\n\n\nrho_A\n&gt; 0.7\næ›´ç¨³å¥çš„ä¿¡åº¦ä¼°è®¡\n\n\nç»„åˆä¿¡åº¦ (CR)\n&gt; 0.7\næ¨èä½¿ç”¨\n\n\nAVE\n&gt; 0.5\næ”¶æ•›æ•ˆåº¦\n\n\n\n\n\n3. åŒºåˆ†æ•ˆåº¦\n\n# Fornell-Larcker å‡†åˆ™\nsummary(pls_model)$validity$fl_criteria\n\n        æœŸæœ›  è´¨é‡  ä»·å€¼ æ»¡æ„åº¦  æŠ±æ€¨  å¿ è¯š\næœŸæœ›   0.470     .     .      .     .     .\nè´¨é‡   0.558 0.712     .      .     .     .\nä»·å€¼   0.364 0.586 0.848      .     .     .\næ»¡æ„åº¦ 0.507 0.795 0.608  0.738     .     .\næŠ±æ€¨   0.255 0.532 0.355  0.528 1.000     .\nå¿ è¯š   0.377 0.539 0.530  0.658 0.419 0.621\n\nFL Criteria table reports square root of AVE on the diagonal and construct correlations on the lower triangle.\n\n\nFornell-Larcker å‡†åˆ™ï¼šæ¯ä¸ªæ„å¿µçš„ AVE å¹³æ–¹æ ¹ï¼ˆå¯¹è§’çº¿ï¼‰åº”å¤§äºå…¶ä¸å…¶ä»–æ„å¿µçš„ç›¸å…³ï¼ˆéå¯¹è§’çº¿ï¼‰ã€‚\n\n# HTMT æ¯”ç‡ï¼ˆæ›´ä¸¥æ ¼çš„åŒºåˆ†æ•ˆåº¦æ£€éªŒï¼‰\nsummary(pls_model)$validity$htmt\n\n        æœŸæœ›  è´¨é‡  ä»·å€¼ æ»¡æ„åº¦  æŠ±æ€¨ å¿ è¯š\næœŸæœ›       .     .     .      .     .    .\nè´¨é‡   0.878     .     .      .     .    .\nä»·å€¼   0.589 0.673     .      .     .    .\næ»¡æ„åº¦ 0.865 0.954 0.741      .     .    .\næŠ±æ€¨   0.383 0.564 0.387  0.588     .    .\nå¿ è¯š   0.770 0.759 0.797  0.957 0.561    .\n\n\nHTMT é˜ˆå€¼ï¼š - ä¿å®ˆå€¼ï¼š&lt; 0.85 - å®½æ¾å€¼ï¼š&lt; 0.90\n\n\n\nç»“æ„æ¨¡å‹è¯„ä¼°\n\n1. è·¯å¾„ç³»æ•°\n\n# æŸ¥çœ‹è·¯å¾„ç³»æ•°\npls_model$path_coef\n\n       æœŸæœ›      è´¨é‡       ä»·å€¼     æ»¡æ„åº¦      æŠ±æ€¨        å¿ è¯š\næœŸæœ›      0 0.8731993 -0.0399274 0.04419321 0.0000000  0.00000000\nè´¨é‡      0 0.0000000  0.7090024 0.79004568 0.0000000  0.00000000\nä»·å€¼      0 0.0000000  0.0000000 0.18259505 0.0000000  0.00000000\næ»¡æ„åº¦    0 0.0000000  0.0000000 0.00000000 0.5944203  0.87228929\næŠ±æ€¨      0 0.0000000  0.0000000 0.00000000 0.0000000 -0.03872188\nå¿ è¯š      0 0.0000000  0.0000000 0.00000000 0.0000000  0.00000000\n\n\n\n\n2. æ˜¾è‘—æ€§æ£€éªŒ\n\n# Bootstrap ç½®ä¿¡åŒºé—´\nsummary(boot_model)$bootstrapped_paths\n\n                 Original Est. Bootstrap Mean Bootstrap SD T Stat. 2.5% CI\næœŸæœ›  -&gt;  è´¨é‡           0.873          0.872        0.090   9.682   0.701\næœŸæœ›  -&gt;  ä»·å€¼          -0.040          0.418        6.425  -0.006  -1.925\næœŸæœ›  -&gt;  æ»¡æ„åº¦         0.044         -0.016        1.922   0.023  -2.541\nè´¨é‡  -&gt;  ä»·å€¼           0.709          0.251        6.424   0.110  -1.717\nè´¨é‡  -&gt;  æ»¡æ„åº¦         0.790          0.860        1.837   0.430  -0.767\nä»·å€¼  -&gt;  æ»¡æ„åº¦         0.183          0.169        0.291   0.627  -0.132\næ»¡æ„åº¦  -&gt;  æŠ±æ€¨         0.594          0.598        0.056  10.656   0.489\næ»¡æ„åº¦  -&gt;  å¿ è¯š         0.872          0.881        0.092   9.522   0.688\næŠ±æ€¨  -&gt;  å¿ è¯š          -0.039         -0.041        0.069  -0.558  -0.173\n                 97.5% CI\næœŸæœ›  -&gt;  è´¨é‡      1.071\næœŸæœ›  -&gt;  ä»·å€¼      2.405\næœŸæœ›  -&gt;  æ»¡æ„åº¦    1.431\nè´¨é‡  -&gt;  ä»·å€¼      2.568\nè´¨é‡  -&gt;  æ»¡æ„åº¦    3.523\nä»·å€¼  -&gt;  æ»¡æ„åº¦    0.432\næ»¡æ„åº¦  -&gt;  æŠ±æ€¨    0.703\næ»¡æ„åº¦  -&gt;  å¿ è¯š    1.040\næŠ±æ€¨  -&gt;  å¿ è¯š      0.087\n\n\nè§£é‡Šï¼š - è‹¥ 95% CI ä¸åŒ…å« 0ï¼Œåˆ™è·¯å¾„æ˜¾è‘— - T å€¼ &gt; 1.96 (p &lt; 0.05) è¡¨ç¤ºæ˜¾è‘—\n\n\n3. RÂ² è§£é‡ŠåŠ›\n\n# æŸ¥çœ‹ RÂ²\npls_model$rSquared\n\n            è´¨é‡      ä»·å€¼    æ»¡æ„åº¦      æŠ±æ€¨      å¿ è¯š\nRsq    0.7624771 0.4548405 0.9242884 0.3533355 0.7222329\nAdjRsq 0.7615193 0.4504262 0.9233651 0.3507280 0.7199838\n\n\nRÂ² æ ‡å‡†ï¼ˆCohen, 1988ï¼‰ï¼š - 0.75ï¼šå¼º - 0.50ï¼šä¸­ç­‰ - 0.25ï¼šå¼±\n\n\n4. æ•ˆåº”é‡ fÂ²\n\n# è®¡ç®— fÂ²\nsummary(pls_model)$fSquare\n\n        æœŸæœ›  è´¨é‡  ä»·å€¼ æ»¡æ„åº¦  æŠ±æ€¨   å¿ è¯š\næœŸæœ›   0.000 3.210 0.001  0.017 0.000  0.000\nè´¨é‡   0.000 0.000 0.215  1.677 0.000  0.000\nä»·å€¼   0.000 0.000 0.000  0.201 0.000  0.000\næ»¡æ„åº¦ 0.000 0.000 0.000  0.000 0.546  1.755\næŠ±æ€¨   0.000 0.000 0.000  0.000 0.000 -0.004\nå¿ è¯š   0.000 0.000 0.000  0.000 0.000  0.000\n\n\nfÂ² æ ‡å‡†ï¼š - 0.02ï¼šå¼±æ•ˆåº” - 0.15ï¼šä¸­ç­‰æ•ˆåº” - 0.35ï¼šå¼ºæ•ˆåº”",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "PLS-PM è·¯å¾„æ¨¡å‹"
    ]
  },
  {
    "objectID": "1037-plspm.html#è·¯å¾„å›¾å¯è§†åŒ–",
    "href": "1037-plspm.html#è·¯å¾„å›¾å¯è§†åŒ–",
    "title": "PLS-PM åæœ€å°äºŒä¹˜è·¯å¾„æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "è·¯å¾„å›¾å¯è§†åŒ–",
    "text": "è·¯å¾„å›¾å¯è§†åŒ–\n\n# ä½¿ç”¨ seminr å†…ç½®ç»‘å›¾\nplot(pls_model)\n\n\n\n\n\n\nè‡ªå®šä¹‰å¯è§†åŒ–\n\n# æå–è·¯å¾„ç³»æ•°ç”¨äºè‡ªå®šä¹‰ç»˜å›¾\npath_coefs &lt;- as.data.frame(pls_model$path_coef)\npath_coefs$from &lt;- rownames(path_coefs)\n\n# è½¬ä¸ºé•¿æ ¼å¼\nlibrary(tidyr)\npaths_long &lt;- path_coefs %&gt;%\n    pivot_longer(-from, names_to = \"to\", values_to = \"coef\") %&gt;%\n    filter(coef != 0)\n\nprint(paths_long)\n\n# A tibble: 9 Ã— 3\n  from   to        coef\n  &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt;\n1 æœŸæœ›   è´¨é‡    0.873 \n2 æœŸæœ›   ä»·å€¼   -0.0399\n3 æœŸæœ›   æ»¡æ„åº¦  0.0442\n4 è´¨é‡   ä»·å€¼    0.709 \n5 è´¨é‡   æ»¡æ„åº¦  0.790 \n6 ä»·å€¼   æ»¡æ„åº¦  0.183 \n7 æ»¡æ„åº¦ æŠ±æ€¨    0.594 \n8 æ»¡æ„åº¦ å¿ è¯š    0.872 \n9 æŠ±æ€¨   å¿ è¯š   -0.0387",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "PLS-PM è·¯å¾„æ¨¡å‹"
    ]
  },
  {
    "objectID": "1037-plspm.html#ä¸­ä»‹æ•ˆåº”åˆ†æ",
    "href": "1037-plspm.html#ä¸­ä»‹æ•ˆåº”åˆ†æ",
    "title": "PLS-PM åæœ€å°äºŒä¹˜è·¯å¾„æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ä¸­ä»‹æ•ˆåº”åˆ†æ",
    "text": "ä¸­ä»‹æ•ˆåº”åˆ†æ\n\nè®¡ç®—é—´æ¥æ•ˆåº”\n\n# å®šä¹‰ç‰¹å®šé—´æ¥æ•ˆåº”\nspecific_effects &lt;- specific_effect_significance(\n    boot_model,\n    from = \"è´¨é‡\",\n    through = \"æ»¡æ„åº¦\",\n    to = \"å¿ è¯š\",\n    alpha = 0.05\n)\nprint(specific_effects)\n\n Original Est. Bootstrap Mean   Bootstrap SD        T Stat.        2.5% CI \n     0.6891484      0.7535812      1.7705532      0.3892277     -0.6057253 \n      97.5% CI \n     2.8793108 \n\n\n\n\næ€»æ•ˆåº”åˆ†æ\n\n# ä» summary ä¸­æå–æ€»æ•ˆåº”ä¿¡æ¯\n# æ€»æ•ˆåº” = ç›´æ¥æ•ˆåº” + é—´æ¥æ•ˆåº”\n# å¯ä»¥é€šè¿‡è·¯å¾„ç³»æ•°çŸ©é˜µè®¡ç®—\npath_coef_mat &lt;- pls_model$path_coef\n\n# ç›´æ¥æŸ¥çœ‹è·¯å¾„ç³»æ•°å³ä¸ºç›´æ¥æ•ˆåº”\nprint(path_coef_mat)\n\n       æœŸæœ›      è´¨é‡       ä»·å€¼     æ»¡æ„åº¦      æŠ±æ€¨        å¿ è¯š\næœŸæœ›      0 0.8731993 -0.0399274 0.04419321 0.0000000  0.00000000\nè´¨é‡      0 0.0000000  0.7090024 0.79004568 0.0000000  0.00000000\nä»·å€¼      0 0.0000000  0.0000000 0.18259505 0.0000000  0.00000000\næ»¡æ„åº¦    0 0.0000000  0.0000000 0.00000000 0.5944203  0.87228929\næŠ±æ€¨      0 0.0000000  0.0000000 0.00000000 0.0000000 -0.03872188\nå¿ è¯š      0 0.0000000  0.0000000 0.00000000 0.0000000  0.00000000",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "PLS-PM è·¯å¾„æ¨¡å‹"
    ]
  },
  {
    "objectID": "1037-plspm.html#é¢„æµ‹èƒ½åŠ›è¯„ä¼°",
    "href": "1037-plspm.html#é¢„æµ‹èƒ½åŠ›è¯„ä¼°",
    "title": "PLS-PM åæœ€å°äºŒä¹˜è·¯å¾„æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "é¢„æµ‹èƒ½åŠ›è¯„ä¼°",
    "text": "é¢„æµ‹èƒ½åŠ›è¯„ä¼°\n\nQÂ² é¢„æµ‹ç›¸å…³æ€§\n\n# ä½¿ç”¨ PLSpredict è¿›è¡Œé¢„æµ‹è¯„ä¼°\npredict_result &lt;- predict_pls(\n    model = pls_model,\n    technique = predict_DA, # ç›´æ¥æ³•\n    noFolds = 10 # 10æŠ˜äº¤å‰éªŒè¯\n)\n\n# æŸ¥çœ‹ QÂ² å€¼\nsummary(predict_result)\n\n\nPLS in-sample metrics:\n     PERQ1 PERQ2 PERQ3 PERQ4 PERQ5 PERQ6 PERQ7 PERV1 PERV2 CUSA1 CUSA2 CUSA3\nRMSE 1.241 1.810 1.684 1.552 1.337 1.475 1.754 1.924 1.483 0.938 1.286 1.238\nMAE  0.919 1.392 1.251 1.093 0.969 1.027 1.249 1.471 1.084 0.731 0.952 0.923\n     CUSCO CUSL1 CUSL2 CUSL3\nRMSE 1.932 2.362 2.816 1.677\nMAE  1.440 1.767 2.385 1.179\n\nPLS out-of-sample metrics:\n     PERQ1 PERQ2 PERQ3 PERQ4 PERQ5 PERQ6 PERQ7 PERV1 PERV2 CUSA1 CUSA2 CUSA3\nRMSE 1.259 1.832 1.717 1.581 1.362 1.487 1.775 1.973 1.530 0.998 1.346 1.324\nMAE  0.925 1.406 1.277 1.117 0.982 1.037 1.257 1.496 1.111 0.767 0.994 0.975\n     CUSCO CUSL1 CUSL2 CUSL3\nRMSE 1.951 2.400 2.845 1.704\nMAE  1.455 1.796 2.403 1.195\n\nLM in-sample metrics:\n     PERQ1 PERQ2 PERQ3 PERQ4 PERQ5 PERQ6 PERQ7 PERV1 PERV2 CUSA1 CUSA2 CUSA3\nRMSE 1.185 1.775 1.630 1.508 1.311 1.449 1.664 1.846 1.435 0.879 1.233 1.133\nMAE  0.896 1.351 1.236 1.097 0.974 1.031 1.211 1.421 1.060 0.690 0.925 0.842\n     CUSCO CUSL1 CUSL2 CUSL3\nRMSE 1.876 2.345 2.797 1.608\nMAE  1.395 1.762 2.378 1.109\n\nLM out-of-sample metrics:\n     PERQ1 PERQ2 PERQ3 PERQ4 PERQ5 PERQ6 PERQ7 PERV1 PERV2 CUSA1 CUSA2 CUSA3\nRMSE 1.208 1.826 1.666 1.555 1.349 1.490 1.695 1.983 1.527 0.952 1.353 1.230\nMAE  0.910 1.396 1.264 1.122 0.993 1.056 1.226 1.525 1.128 0.748 1.013 0.901\n     CUSCO CUSL1 CUSL2 CUSL3\nRMSE 1.919 2.402 2.852 1.647\nMAE  1.423 1.799 2.418 1.132\n\nConstruct Level metrics:\n          è´¨é‡   ä»·å€¼ æ»¡æ„åº¦    æŠ±æ€¨   å¿ è¯š\nIS_MSE  0.7817 0.6678  0.348 0.72240 0.6065\nIS_MAE  0.6535 0.6081  0.439 0.63365 0.5498\nOOS_MSE 0.8159 0.7188  0.441 0.72671 0.6322\nOOS_MAE 0.6642 0.6250  0.482 0.63584 0.5612\noverfit 0.0438 0.0763  0.268 0.00596 0.0424\n\n\nQÂ² è§£é‡Šï¼š - QÂ² &gt; 0ï¼šæ¨¡å‹æœ‰é¢„æµ‹ç›¸å…³æ€§ - QÂ² &lt; 0ï¼šæ¨¡å‹é¢„æµ‹èƒ½åŠ›ä¸å¦‚å‡å€¼",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "PLS-PM è·¯å¾„æ¨¡å‹"
    ]
  },
  {
    "objectID": "1037-plspm.html#å½¢æˆæ€§æŒ‡æ ‡æ¨¡å‹",
    "href": "1037-plspm.html#å½¢æˆæ€§æŒ‡æ ‡æ¨¡å‹",
    "title": "PLS-PM åæœ€å°äºŒä¹˜è·¯å¾„æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å½¢æˆæ€§æŒ‡æ ‡æ¨¡å‹",
    "text": "å½¢æˆæ€§æŒ‡æ ‡æ¨¡å‹\n\nå®šä¹‰å½¢æˆæ€§æµ‹é‡\n\n# å‡è®¾ \"ä»·å€¼\" ç”±å½¢æˆæ€§æŒ‡æ ‡ç»„æˆ\nmeasurements_formative &lt;- constructs(\n    reflective(\"æœŸæœ›\", multi_items(\"CUEX\", 1:3)),\n    reflective(\"è´¨é‡\", multi_items(\"PERQ\", 1:7)),\n\n    # å½¢æˆæ€§æ„å¿µï¼šä½¿ç”¨ composite()\n    composite(\"ä»·å€¼\", multi_items(\"PERV\", 1:2), weights = mode_B),\n    reflective(\"æ»¡æ„åº¦\", multi_items(\"CUSA\", 1:3)),\n    reflective(\"å¿ è¯š\", multi_items(\"CUSL\", 1:3)),\n    reflective(\"æŠ±æ€¨\", single_item(\"CUSCO\"))\n)\n\n# ä¼°è®¡æ¨¡å‹\npls_formative &lt;- estimate_pls(\n    data = mobi,\n    measurement_model = measurements_formative,\n    structural_model = structure\n)\n\n\n\nå½¢æˆæ€§æŒ‡æ ‡è¯„ä¼°\n\n# æŸ¥çœ‹æƒé‡ï¼ˆè€Œéè½½è·ï¼‰\npls_formative$outer_weights\n\n           æœŸæœ›      è´¨é‡      ä»·å€¼    æ»¡æ„åº¦ æŠ±æ€¨      å¿ è¯š\nCUEX1 0.5328296 0.0000000 0.0000000 0.0000000    0 0.0000000\nCUEX2 0.4447268 0.0000000 0.0000000 0.0000000    0 0.0000000\nCUEX3 0.4629400 0.0000000 0.0000000 0.0000000    0 0.0000000\nPERQ1 0.0000000 0.2154190 0.0000000 0.0000000    0 0.0000000\nPERQ2 0.0000000 0.1469019 0.0000000 0.0000000    0 0.0000000\nPERQ3 0.0000000 0.1991590 0.0000000 0.0000000    0 0.0000000\nPERQ4 0.0000000 0.1780498 0.0000000 0.0000000    0 0.0000000\nPERQ5 0.0000000 0.1789501 0.0000000 0.0000000    0 0.0000000\nPERQ6 0.0000000 0.1779952 0.0000000 0.0000000    0 0.0000000\nPERQ7 0.0000000 0.2143895 0.0000000 0.0000000    0 0.0000000\nPERV1 0.0000000 0.0000000 0.1799806 0.0000000    0 0.0000000\nPERV2 0.0000000 0.0000000 0.8656957 0.0000000    0 0.0000000\nCUSA1 0.0000000 0.0000000 0.0000000 0.3631324    0 0.0000000\nCUSA2 0.0000000 0.0000000 0.0000000 0.3863694    0 0.0000000\nCUSA3 0.0000000 0.0000000 0.0000000 0.4493828    0 0.0000000\nCUSL1 0.0000000 0.0000000 0.0000000 0.0000000    0 0.4472679\nCUSL2 0.0000000 0.0000000 0.0000000 0.0000000    0 0.1152926\nCUSL3 0.0000000 0.0000000 0.0000000 0.0000000    0 0.6660098\nCUSCO 0.0000000 0.0000000 0.0000000 0.0000000    1 0.0000000\n\n# æ£€æŸ¥ VIFï¼ˆå…±çº¿æ€§ï¼‰\nsummary(pls_formative)$validity$vif_items\n\næœŸæœ› :\nCUEX1 CUEX2 CUEX3 \n1.161 1.121 1.050 \n\nè´¨é‡ :\nPERQ1 PERQ2 PERQ3 PERQ4 PERQ5 PERQ6 PERQ7 \n2.027 1.491 2.105 2.013 1.823 2.003 2.006 \n\nä»·å€¼ :\nPERV1 PERV2 \n1.962 1.962 \n\næ»¡æ„åº¦ :\nCUSA1 CUSA2 CUSA3 \n1.505 1.762 1.644 \n\næŠ±æ€¨ :\nCUSCO \n    1 \n\nå¿ è¯š :\nCUSL1 CUSL2 CUSL3 \n1.415 1.010 1.427 \n\n\nVIF æ ‡å‡†ï¼š - VIF &lt; 3ï¼šå¯æ¥å— - VIF &lt; 5ï¼šéœ€å…³æ³¨ - VIF &gt; 5ï¼šå­˜åœ¨ä¸¥é‡å…±çº¿æ€§é—®é¢˜",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "PLS-PM è·¯å¾„æ¨¡å‹"
    ]
  },
  {
    "objectID": "1037-plspm.html#å¤šç»„åˆ†æ",
    "href": "1037-plspm.html#å¤šç»„åˆ†æ",
    "title": "PLS-PM åæœ€å°äºŒä¹˜è·¯å¾„æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å¤šç»„åˆ†æ",
    "text": "å¤šç»„åˆ†æ\n\n# å‡è®¾æŒ‰æŸå˜é‡åˆ†ç»„ï¼ˆæ­¤å¤„åˆ›å»ºæ¨¡æ‹Ÿåˆ†ç»„ï¼‰\nmobi_grouped &lt;- mobi %&gt;%\n    mutate(group = ifelse(row_number() &lt;= 125, \"Group_A\", \"Group_B\"))\n\n# åˆ†åˆ«ä¼°è®¡ä¸¤ç»„\npls_a &lt;- estimate_pls(\n    data = mobi_grouped %&gt;% filter(group == \"Group_A\"),\n    measurement_model = measurements,\n    structural_model = structure\n)\n\npls_b &lt;- estimate_pls(\n    data = mobi_grouped %&gt;% filter(group == \"Group_B\"),\n    measurement_model = measurements,\n    structural_model = structure\n)\n\n# æ¯”è¾ƒè·¯å¾„ç³»æ•°\ncat(\"Group A è·¯å¾„ç³»æ•°:\\n\")\n\nGroup A è·¯å¾„ç³»æ•°:\n\nprint(pls_a$path_coef)\n\n       æœŸæœ›      è´¨é‡      ä»·å€¼     æ»¡æ„åº¦      æŠ±æ€¨        å¿ è¯š\næœŸæœ›      0 0.7598999 0.1773740 -0.1580355 0.0000000  0.00000000\nè´¨é‡      0 0.0000000 0.4443922  0.8995486 0.0000000  0.00000000\nä»·å€¼      0 0.0000000 0.0000000  0.2781417 0.0000000  0.00000000\næ»¡æ„åº¦    0 0.0000000 0.0000000  0.0000000 0.7122758  0.94622912\næŠ±æ€¨      0 0.0000000 0.0000000  0.0000000 0.0000000 -0.09360398\nå¿ è¯š      0 0.0000000 0.0000000  0.0000000 0.0000000  0.00000000\n\ncat(\"\\nGroup B è·¯å¾„ç³»æ•°:\\n\")\n\n\nGroup B è·¯å¾„ç³»æ•°:\n\nprint(pls_b$path_coef)\n\n       æœŸæœ›     è´¨é‡       ä»·å€¼    æ»¡æ„åº¦     æŠ±æ€¨         å¿ è¯š\næœŸæœ›      0 0.934697 -0.6023185 0.7794344 0.000000  0.000000000\nè´¨é‡      0 0.000000  1.3209437 0.1019837 0.000000  0.000000000\nä»·å€¼      0 0.000000  0.0000000 0.1923303 0.000000  0.000000000\næ»¡æ„åº¦    0 0.000000  0.0000000 0.0000000 0.486464  0.798338431\næŠ±æ€¨      0 0.000000  0.0000000 0.0000000 0.000000 -0.001896912\nå¿ è¯š      0 0.000000  0.0000000 0.0000000 0.000000  0.000000000",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "PLS-PM è·¯å¾„æ¨¡å‹"
    ]
  },
  {
    "objectID": "1037-plspm.html#æŠ¥å‘Šæ¨¡æ¿",
    "href": "1037-plspm.html#æŠ¥å‘Šæ¨¡æ¿",
    "title": "PLS-PM åæœ€å°äºŒä¹˜è·¯å¾„æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "æŠ¥å‘Šæ¨¡æ¿",
    "text": "æŠ¥å‘Šæ¨¡æ¿\n\nå­¦æœ¯è®ºæ–‡æŠ¥å‘Šæ ¼å¼\n\n\n\n## æµ‹é‡æ¨¡å‹è¯„ä¼°\n\næ‰€æœ‰æ„å¿µçš„ç»„åˆä¿¡åº¦ (CR) å‡å¤§äº 0.7ï¼Œå¹³å‡æ–¹å·®èƒå–é‡ (AVE) å‡å¤§äº 0.5ï¼Œ\nè¡¨æ˜æµ‹é‡æ¨¡å‹å…·æœ‰è‰¯å¥½çš„ä¿¡åº¦å’Œæ”¶æ•›æ•ˆåº¦ã€‚\n\n## ç»“æ„æ¨¡å‹è¯„ä¼°\n\næ¨¡å‹è§£é‡ŠåŠ›ï¼š\n- æ»¡æ„åº¦ RÂ² =  NA \n- å¿ è¯š RÂ² =  NA \n\nBootstrap æ£€éªŒï¼ˆn = 500ï¼‰æ˜¾ç¤ºå…³é”®è·¯å¾„å‡è¾¾åˆ°ç»Ÿè®¡æ˜¾è‘—ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "PLS-PM è·¯å¾„æ¨¡å‹"
    ]
  },
  {
    "objectID": "1037-plspm.html#å¸¸è§é—®é¢˜",
    "href": "1037-plspm.html#å¸¸è§é—®é¢˜",
    "title": "PLS-PM åæœ€å°äºŒä¹˜è·¯å¾„æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å¸¸è§é—®é¢˜",
    "text": "å¸¸è§é—®é¢˜\n\n\n\né—®é¢˜\nè§£å†³æ–¹æ¡ˆ\n\n\n\n\nè½½è·è¿‡ä½\næ£€æŸ¥æŒ‡æ ‡æ˜¯å¦å±äºè¯¥æ„å¿µï¼Œè€ƒè™‘åˆ é™¤\n\n\nAVE &lt; 0.5\nåˆ é™¤è½½è·æœ€ä½çš„æŒ‡æ ‡\n\n\nHTMT &gt; 0.9\nè€ƒè™‘åˆå¹¶æ„å¿µæˆ–é‡æ–°å®šä¹‰\n\n\nRÂ² è¿‡ä½\næ£€æŸ¥æ˜¯å¦é—æ¼é‡è¦å‰å› å˜é‡\n\n\nVIF è¿‡é«˜\nåˆ é™¤å…±çº¿æ€§æŒ‡æ ‡æˆ–ä½¿ç”¨é™ç»´",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "PLS-PM è·¯å¾„æ¨¡å‹"
    ]
  },
  {
    "objectID": "1037-plspm.html#å‚è€ƒæ–‡çŒ®",
    "href": "1037-plspm.html#å‚è€ƒæ–‡çŒ®",
    "title": "PLS-PM åæœ€å°äºŒä¹˜è·¯å¾„æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒæ–‡çŒ®",
    "text": "å‚è€ƒæ–‡çŒ®\n\nHair, J. F., Hult, G. T. M., Ringle, C. M., & Sarstedt, M. (2022). A Primer on Partial Least Squares Structural Equation Modeling (PLS-SEM) (3rd ed.). Sage.\nHenseler, J., Ringle, C. M., & Sarstedt, M. (2015). A new criterion for assessing discriminant validity in variance-based structural equation modeling. Journal of the Academy of Marketing Science, 43(1), 115-135.\nRay, S., Danks, N., & Calero Valdez, A. (2022). SEMinR: Domain-Specific Language for Building and Estimating Structural Equation Models. R package.",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "PLS-PM è·¯å¾„æ¨¡å‹"
    ]
  },
  {
    "objectID": "1037-plspm.html#é™„å½•å®Œæ•´ä»£ç ",
    "href": "1037-plspm.html#é™„å½•å®Œæ•´ä»£ç ",
    "title": "PLS-PM åæœ€å°äºŒä¹˜è·¯å¾„æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "é™„å½•ï¼šå®Œæ•´ä»£ç ",
    "text": "é™„å½•ï¼šå®Œæ•´ä»£ç \n\n# å®Œæ•´åˆ†ææµç¨‹\nlibrary(seminr)\n\n# 1. åŠ è½½æ•°æ®\ndata(mobi)\n\n# 2. å®šä¹‰æµ‹é‡æ¨¡å‹\nmeasurements &lt;- constructs(\n    reflective(\"æœŸæœ›\", multi_items(\"CUEX\", 1:3)),\n    reflective(\"è´¨é‡\", multi_items(\"PERQ\", 1:7)),\n    reflective(\"ä»·å€¼\", multi_items(\"PERV\", 1:2)),\n    reflective(\"æ»¡æ„åº¦\", multi_items(\"CUSA\", 1:3)),\n    reflective(\"å¿ è¯š\", multi_items(\"CUSL\", 1:3)),\n    reflective(\"æŠ±æ€¨\", single_item(\"CUSCO\"))\n)\n\n# 3. å®šä¹‰ç»“æ„æ¨¡å‹\nstructure &lt;- relationships(\n    paths(from = \"æœŸæœ›\", to = c(\"è´¨é‡\", \"ä»·å€¼\", \"æ»¡æ„åº¦\")),\n    paths(from = \"è´¨é‡\", to = c(\"ä»·å€¼\", \"æ»¡æ„åº¦\")),\n    paths(from = \"ä»·å€¼\", to = \"æ»¡æ„åº¦\"),\n    paths(from = \"æ»¡æ„åº¦\", to = c(\"æŠ±æ€¨\", \"å¿ è¯š\")),\n    paths(from = \"æŠ±æ€¨\", to = \"å¿ è¯š\")\n)\n\n# 4. ä¼°è®¡æ¨¡å‹\npls_model &lt;- estimate_pls(data = mobi, measurements, structure)\n\n# 5. Bootstrap æ£€éªŒ\nboot_model &lt;- bootstrap_model(pls_model, nboot = 5000)\n\n# 6. æŸ¥çœ‹ç»“æœ\nsummary(pls_model)\nsummary(boot_model)\n\n# 7. å¯è§†åŒ–\nplot(pls_model)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "PLS-PM è·¯å¾„æ¨¡å‹"
    ]
  },
  {
    "objectID": "1039-pca.html",
    "href": "1039-pca.html",
    "title": "ä¸»æˆåˆ†åˆ†æ (PCA) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "ä¸»æˆåˆ†åˆ†æ (Principal Component Analysis, PCA) æ˜¯ä¸€ç§å¸¸ç”¨çš„é™ç»´å’Œæ•°æ®æ¢ç´¢æŠ€æœ¯ï¼Œé€šè¿‡çº¿æ€§å˜æ¢å°†åŸå§‹å˜é‡è½¬æ¢ä¸ºä¸€ç»„ä¸ç›¸å…³çš„æ–°å˜é‡ï¼ˆä¸»æˆåˆ†ï¼‰ï¼ŒæŒ‰æ–¹å·®è§£é‡Šé‡æ’åºã€‚\n\n\n\né™ç»´ï¼šå‡å°‘å˜é‡æ•°é‡ï¼Œä¿ç•™ä¸»è¦ä¿¡æ¯\nå¯è§†åŒ–ï¼šé«˜ç»´æ•°æ®çš„äºŒç»´/ä¸‰ç»´å¯è§†åŒ–\nå»é™¤å¤šé‡å…±çº¿æ€§ï¼šå°†ç›¸å…³å˜é‡è½¬æ¢ä¸ºæ­£äº¤æˆåˆ†\nç‰¹å¾æå–ï¼šè¯†åˆ«æ•°æ®çš„ä¸»è¦å˜å¼‚æ¨¡å¼\né¢„å¤„ç†ï¼šæœºå™¨å­¦ä¹ æ¨¡å‹çš„è¾“å…¥ç‰¹å¾é™ç»´\n\n\n\n\n\n\n\nç‰¹æ€§\nPCA\nå› å­åˆ†æ\n\n\n\n\nç›®æ ‡\nè§£é‡Šæ–¹å·®\nè§£é‡Šç›¸å…³\n\n\nå‡è®¾\næ— æ½œå˜é‡å‡è®¾\nå‡è®¾å­˜åœ¨æ½œå˜é‡\n\n\næˆåˆ†/å› å­\nè§‚æµ‹å˜é‡çš„çº¿æ€§ç»„åˆ\næ½œå˜é‡\n\n\né€‚ç”¨\né™ç»´ã€æ¢ç´¢\né‡è¡¨å¼€å‘ã€ç»“æ„å‘ç°",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ä¸»æˆåˆ†åˆ†æ (PCA)"
    ]
  },
  {
    "objectID": "1039-pca.html#ç®€ä»‹",
    "href": "1039-pca.html#ç®€ä»‹",
    "title": "ä¸»æˆåˆ†åˆ†æ (PCA) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "ä¸»æˆåˆ†åˆ†æ (Principal Component Analysis, PCA) æ˜¯ä¸€ç§å¸¸ç”¨çš„é™ç»´å’Œæ•°æ®æ¢ç´¢æŠ€æœ¯ï¼Œé€šè¿‡çº¿æ€§å˜æ¢å°†åŸå§‹å˜é‡è½¬æ¢ä¸ºä¸€ç»„ä¸ç›¸å…³çš„æ–°å˜é‡ï¼ˆä¸»æˆåˆ†ï¼‰ï¼ŒæŒ‰æ–¹å·®è§£é‡Šé‡æ’åºã€‚\n\n\n\né™ç»´ï¼šå‡å°‘å˜é‡æ•°é‡ï¼Œä¿ç•™ä¸»è¦ä¿¡æ¯\nå¯è§†åŒ–ï¼šé«˜ç»´æ•°æ®çš„äºŒç»´/ä¸‰ç»´å¯è§†åŒ–\nå»é™¤å¤šé‡å…±çº¿æ€§ï¼šå°†ç›¸å…³å˜é‡è½¬æ¢ä¸ºæ­£äº¤æˆåˆ†\nç‰¹å¾æå–ï¼šè¯†åˆ«æ•°æ®çš„ä¸»è¦å˜å¼‚æ¨¡å¼\né¢„å¤„ç†ï¼šæœºå™¨å­¦ä¹ æ¨¡å‹çš„è¾“å…¥ç‰¹å¾é™ç»´\n\n\n\n\n\n\n\nç‰¹æ€§\nPCA\nå› å­åˆ†æ\n\n\n\n\nç›®æ ‡\nè§£é‡Šæ–¹å·®\nè§£é‡Šç›¸å…³\n\n\nå‡è®¾\næ— æ½œå˜é‡å‡è®¾\nå‡è®¾å­˜åœ¨æ½œå˜é‡\n\n\næˆåˆ†/å› å­\nè§‚æµ‹å˜é‡çš„çº¿æ€§ç»„åˆ\næ½œå˜é‡\n\n\né€‚ç”¨\né™ç»´ã€æ¢ç´¢\né‡è¡¨å¼€å‘ã€ç»“æ„å‘ç°",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ä¸»æˆåˆ†åˆ†æ (PCA)"
    ]
  },
  {
    "objectID": "1039-pca.html#å®‰è£…ä¸åŠ è½½",
    "href": "1039-pca.html#å®‰è£…ä¸åŠ è½½",
    "title": "ä¸»æˆåˆ†åˆ†æ (PCA) å®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\n# install.packages(\"FactoMineR\")   # é«˜çº§PCA\n# install.packages(\"factoextra\")   # PCAå¯è§†åŒ–\n# install.packages(\"ggfortify\")    # ggplot2 æ‰©å±•\n\nlibrary(FactoMineR)\nlibrary(factoextra)\nlibrary(ggplot2)\nlibrary(dplyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ä¸»æˆåˆ†åˆ†æ (PCA)"
    ]
  },
  {
    "objectID": "1039-pca.html#ç¤ºä¾‹æ•°æ®",
    "href": "1039-pca.html#ç¤ºä¾‹æ•°æ®",
    "title": "ä¸»æˆåˆ†åˆ†æ (PCA) å®Œå…¨æŒ‡å—",
    "section": "ç¤ºä¾‹æ•°æ®",
    "text": "ç¤ºä¾‹æ•°æ®\nä½¿ç”¨ decathlon2 æ•°æ®é›†ï¼ˆåé¡¹å…¨èƒ½è¿åŠ¨å‘˜æˆç»©ï¼‰ã€‚\n\ndata(\"decathlon2\")\nhead(decathlon2)\n\n          X100m Long.jump Shot.put High.jump X400m X110m.hurdle Discus\nSEBRLE    11.04      7.58    14.83      2.07 49.81        14.69  43.75\nCLAY      10.76      7.40    14.26      1.86 49.37        14.05  50.72\nBERNARD   11.02      7.23    14.25      1.92 48.93        14.99  40.87\nYURKOV    11.34      7.09    15.19      2.10 50.42        15.31  46.26\nZSIVOCZKY 11.13      7.30    13.48      2.01 48.62        14.17  45.67\nMcMULLEN  10.83      7.31    13.76      2.13 49.91        14.38  44.41\n          Pole.vault Javeline X1500m Rank Points Competition\nSEBRLE          5.02    63.19  291.7    1   8217    Decastar\nCLAY            4.92    60.15  301.5    2   8122    Decastar\nBERNARD         5.32    62.77  280.1    4   8067    Decastar\nYURKOV          4.72    63.44  276.4    5   8036    Decastar\nZSIVOCZKY       4.42    55.37  268.0    7   8004    Decastar\nMcMULLEN        4.42    56.37  285.1    8   7995    Decastar\n\n\nå˜é‡è¯´æ˜ï¼š - 10ä¸ªè¿åŠ¨é¡¹ç›®æˆç»© + æ€»åˆ†æ’å + æ¯”èµ›ç±»å‹\n\n# æå–æ´»åŠ¨å˜é‡ï¼ˆ10ä¸ªè¿åŠ¨é¡¹ç›®ï¼‰\nactive_vars &lt;- decathlon2[, 1:10]\nhead(active_vars)\n\n          X100m Long.jump Shot.put High.jump X400m X110m.hurdle Discus\nSEBRLE    11.04      7.58    14.83      2.07 49.81        14.69  43.75\nCLAY      10.76      7.40    14.26      1.86 49.37        14.05  50.72\nBERNARD   11.02      7.23    14.25      1.92 48.93        14.99  40.87\nYURKOV    11.34      7.09    15.19      2.10 50.42        15.31  46.26\nZSIVOCZKY 11.13      7.30    13.48      2.01 48.62        14.17  45.67\nMcMULLEN  10.83      7.31    13.76      2.13 49.91        14.38  44.41\n          Pole.vault Javeline X1500m\nSEBRLE          5.02    63.19  291.7\nCLAY            4.92    60.15  301.5\nBERNARD         5.32    62.77  280.1\nYURKOV          4.72    63.44  276.4\nZSIVOCZKY       4.42    55.37  268.0\nMcMULLEN        4.42    56.37  285.1",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ä¸»æˆåˆ†åˆ†æ (PCA)"
    ]
  },
  {
    "objectID": "1039-pca.html#æ•°æ®é¢„å¤„ç†",
    "href": "1039-pca.html#æ•°æ®é¢„å¤„ç†",
    "title": "ä¸»æˆåˆ†åˆ†æ (PCA) å®Œå…¨æŒ‡å—",
    "section": "æ•°æ®é¢„å¤„ç†",
    "text": "æ•°æ®é¢„å¤„ç†\n\næ£€æŸ¥æ•°æ®\n\n# æè¿°ç»Ÿè®¡\nsummary(active_vars)\n\n     X100m         Long.jump        Shot.put       High.jump    \n Min.   :10.44   Min.   :6.800   Min.   :12.68   Min.   :1.860  \n 1st Qu.:10.84   1st Qu.:7.210   1st Qu.:14.17   1st Qu.:1.930  \n Median :10.97   Median :7.310   Median :14.57   Median :1.980  \n Mean   :10.99   Mean   :7.365   Mean   :14.54   Mean   :1.998  \n 3rd Qu.:11.13   3rd Qu.:7.545   3rd Qu.:15.01   3rd Qu.:2.080  \n Max.   :11.64   Max.   :7.960   Max.   :16.36   Max.   :2.150  \n     X400m        X110m.hurdle       Discus        Pole.vault   \n Min.   :46.81   Min.   :13.97   Min.   :37.92   Min.   :4.400  \n 1st Qu.:48.70   1st Qu.:14.15   1st Qu.:42.27   1st Qu.:4.660  \n Median :49.20   Median :14.34   Median :44.72   Median :4.900  \n Mean   :49.31   Mean   :14.50   Mean   :44.85   Mean   :4.836  \n 3rd Qu.:49.86   3rd Qu.:14.87   3rd Qu.:46.93   3rd Qu.:5.000  \n Max.   :51.16   Max.   :15.67   Max.   :51.65   Max.   :5.400  \n    Javeline         X1500m     \n Min.   :50.31   Min.   :262.1  \n 1st Qu.:55.32   1st Qu.:271.6  \n Median :57.19   Median :278.1  \n Mean   :58.32   Mean   :278.5  \n 3rd Qu.:62.05   3rd Qu.:283.6  \n Max.   :70.52   Max.   :301.5  \n\n# æ£€æŸ¥ç¼ºå¤±å€¼\nsum(is.na(active_vars))\n\n[1] 0\n\n\n\n\næ ‡å‡†åŒ–\nPCA å¯¹æ•°æ®å°ºåº¦æ•æ„Ÿï¼Œä¸åŒé‡çº²çš„å˜é‡éœ€è¦æ ‡å‡†åŒ–ã€‚\n\n# æ‰‹åŠ¨æ ‡å‡†åŒ–\nscaled_data &lt;- scale(active_vars)\n\n# æˆ–åœ¨ PCA å‡½æ•°ä¸­è®¾ç½® scale = TRUE",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ä¸»æˆåˆ†åˆ†æ (PCA)"
    ]
  },
  {
    "objectID": "1039-pca.html#åŸºç¡€-pca-prcomp",
    "href": "1039-pca.html#åŸºç¡€-pca-prcomp",
    "title": "ä¸»æˆåˆ†åˆ†æ (PCA) å®Œå…¨æŒ‡å—",
    "section": "åŸºç¡€ PCA (prcomp)",
    "text": "åŸºç¡€ PCA (prcomp)\n\næ‰§è¡Œ PCA\n\n# ä½¿ç”¨ prcomp è¿›è¡Œ PCA\npca_result &lt;- prcomp(active_vars, scale. = TRUE)\n\n# æŸ¥çœ‹ç»“æœç»“æ„\nnames(pca_result)\n\n[1] \"sdev\"     \"rotation\" \"center\"   \"scale\"    \"x\"       \n\n\nè¾“å‡ºè§£é‡Šï¼š - sdev: å„ä¸»æˆåˆ†çš„æ ‡å‡†å·® - rotation: è½½è·çŸ©é˜µï¼ˆå˜é‡ä¸ä¸»æˆåˆ†çš„å…³ç³»ï¼‰ - x: ä¸»æˆåˆ†å¾—åˆ†ï¼ˆä¸ªä½“åœ¨å„ä¸»æˆåˆ†ä¸Šçš„å€¼ï¼‰ - center: ä¸­å¿ƒåŒ–å€¼ - scale: æ ‡å‡†åŒ–å€¼\n\n\næ–¹å·®è§£é‡Š\n\n# æ–¹å·®å’Œæ–¹å·®æ¯”ä¾‹\nsummary(pca_result)\n\nImportance of components:\n                         PC1    PC2    PC3    PC4     PC5     PC6     PC7\nStandard deviation     1.936 1.3210 1.2320 1.0160 0.78603 0.65444 0.57089\nProportion of Variance 0.375 0.1745 0.1518 0.1032 0.06178 0.04283 0.03259\nCumulative Proportion  0.375 0.5495 0.7013 0.8045 0.86630 0.90913 0.94172\n                           PC8     PC9    PC10\nStandard deviation     0.52857 0.43716 0.33511\nProportion of Variance 0.02794 0.01911 0.01123\nCumulative Proportion  0.96966 0.98877 1.00000\n\n\n\n\næå–æ–¹å·®ä¿¡æ¯\n\n# è®¡ç®—æ–¹å·®è§£é‡Š\nvar_explained &lt;- pca_result$sdev^2\nvar_percent &lt;- var_explained / sum(var_explained) * 100\ncumsum_percent &lt;- cumsum(var_percent)\n\ndata.frame(\n    PC = paste0(\"PC\", 1:length(var_explained)),\n    Variance = round(var_explained, 3),\n    Percent = round(var_percent, 2),\n    Cumulative = round(cumsum_percent, 2)\n)\n\n     PC Variance Percent Cumulative\n1   PC1    3.750   37.50      37.50\n2   PC2    1.745   17.45      54.95\n3   PC3    1.518   15.18      70.13\n4   PC4    1.032   10.32      80.45\n5   PC5    0.618    6.18      86.63\n6   PC6    0.428    4.28      90.91\n7   PC7    0.326    3.26      94.17\n8   PC8    0.279    2.79      96.97\n9   PC9    0.191    1.91      98.88\n10 PC10    0.112    1.12     100.00",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ä¸»æˆåˆ†åˆ†æ (PCA)"
    ]
  },
  {
    "objectID": "1039-pca.html#ç¡®å®šä¸»æˆåˆ†æ•°é‡",
    "href": "1039-pca.html#ç¡®å®šä¸»æˆåˆ†æ•°é‡",
    "title": "ä¸»æˆåˆ†åˆ†æ (PCA) å®Œå…¨æŒ‡å—",
    "section": "ç¡®å®šä¸»æˆåˆ†æ•°é‡",
    "text": "ç¡®å®šä¸»æˆåˆ†æ•°é‡\n\næ–¹æ³•1ï¼šç¢çŸ³å›¾ (Scree Plot)\n\n# ä½¿ç”¨ factoextra ç»‘åˆ¶\nfviz_screeplot(pca_result, addlabels = TRUE) +\n    labs(title = \"ç¢çŸ³å›¾\", x = \"ä¸»æˆåˆ†\", y = \"æ–¹å·®è§£é‡Šç™¾åˆ†æ¯”\") +\n    theme_minimal()\n\n\n\n\n\n\n\n\nè§£é‡Šï¼šæ‰¾åˆ°æ›²çº¿çš„â€æ‹ç‚¹â€ï¼Œé€šå¸¸é€‰æ‹©æ‹ç‚¹ä¹‹å‰çš„æˆåˆ†ã€‚\n\n\næ–¹æ³•2ï¼šç´¯ç§¯è§£é‡Š &gt; 80%\n\n# ç´¯ç§¯æ–¹å·®è¾¾åˆ° 80% çš„æˆåˆ†æ•°\nwhich(cumsum_percent &gt;= 80)[1]\n\n[1] 4\n\n\n\n\næ–¹æ³•3ï¼šç‰¹å¾å€¼ &gt; 1 (Kaiser å‡†åˆ™)\n\n# ç‰¹å¾å€¼ &gt; 1\nsum(var_explained &gt; 1)\n\n[1] 4\n\n\n\n\næ–¹æ³•4ï¼šå¹³è¡Œåˆ†æ\n\nlibrary(psych)\nfa.parallel(active_vars, fa = \"pc\", n.iter = 100)\n\n\n\n\n\n\n\n\nParallel analysis suggests that the number of factors =  NA  and the number of components =  1",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ä¸»æˆåˆ†åˆ†æ (PCA)"
    ]
  },
  {
    "objectID": "1039-pca.html#è½½è·è§£è¯»",
    "href": "1039-pca.html#è½½è·è§£è¯»",
    "title": "ä¸»æˆåˆ†åˆ†æ (PCA) å®Œå…¨æŒ‡å—",
    "section": "è½½è·è§£è¯»",
    "text": "è½½è·è§£è¯»\n\nè½½è·çŸ©é˜µ\n\n# æŸ¥çœ‹è½½è·\nloadings &lt;- pca_result$rotation\nprint(round(loadings[, 1:4], 3))\n\n                PC1    PC2    PC3    PC4\nX100m        -0.423 -0.259  0.082  0.100\nLong.jump     0.392  0.289 -0.005 -0.183\nShot.put      0.369 -0.214  0.385  0.036\nHigh.jump     0.314 -0.463  0.004  0.070\nX400m        -0.332 -0.112  0.419  0.266\nX110m.hurdle -0.370 -0.225  0.338 -0.157\nDiscus        0.370 -0.155  0.219  0.391\nPole.vault   -0.114  0.558  0.327 -0.248\nJaveline      0.183 -0.075  0.564 -0.478\nX1500m        0.036  0.430  0.286  0.642\n\n\nè§£é‡Šï¼š - è½½è·è¡¨ç¤ºåŸå§‹å˜é‡ä¸ä¸»æˆåˆ†çš„ç›¸å…³ç¨‹åº¦ - è½½è·çš„ç¬¦å·è¡¨ç¤ºæ–¹å‘ - è½½è·çš„ç»å¯¹å€¼è¶Šå¤§ï¼Œå˜é‡å¯¹è¯¥æˆåˆ†çš„è´¡çŒ®è¶Šå¤§\n\n\nè½½è·å¯è§†åŒ–\n\n# ä½¿ç”¨ factoextra\nfviz_pca_var(pca_result,\n    col.var = \"contrib\", # æŒ‰è´¡çŒ®åº¦ç€è‰²\n    gradient.cols = c(\"#00AFBB\", \"#E7B800\", \"#FC4E07\"),\n    repel = TRUE\n) +\n    labs(title = \"å˜é‡è½½è·å›¾ (PC1 vs PC2)\") +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nå˜é‡è´¡çŒ®åº¦\n\n# å„å˜é‡å¯¹ PC1 å’Œ PC2 çš„è´¡çŒ®\nfviz_contrib(pca_result, choice = \"var\", axes = 1, top = 10) +\n    labs(title = \"å¯¹ PC1 çš„è´¡çŒ®åº¦\") +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\nfviz_contrib(pca_result, choice = \"var\", axes = 2, top = 10) +\n    labs(title = \"å¯¹ PC2 çš„è´¡çŒ®åº¦\") +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ä¸»æˆåˆ†åˆ†æ (PCA)"
    ]
  },
  {
    "objectID": "1039-pca.html#å¾—åˆ†è§£è¯»",
    "href": "1039-pca.html#å¾—åˆ†è§£è¯»",
    "title": "ä¸»æˆåˆ†åˆ†æ (PCA) å®Œå…¨æŒ‡å—",
    "section": "å¾—åˆ†è§£è¯»",
    "text": "å¾—åˆ†è§£è¯»\n\nä¸ªä½“å¾—åˆ†\n\n# æŸ¥çœ‹ä¸»æˆåˆ†å¾—åˆ†\nscores &lt;- pca_result$x\nhead(scores[, 1:4])\n\n                 PC1        PC2        PC3         PC4\nSEBRLE     0.2727622  0.5264068  1.5556058  0.10384438\nCLAY       0.8879389  2.0551314  0.8249697  1.81612193\nBERNARD   -1.3466138  1.3229149  0.9439501 -1.46516144\nYURKOV    -0.9108536 -2.2390912  1.9063730  0.09501304\nZSIVOCZKY -0.1018764 -1.0694498 -2.0596722  0.07056229\nMcMULLEN   0.2353742 -0.9215376 -0.8028425  1.17942532\n\n\n\n\nå¾—åˆ†å¯è§†åŒ–\n\n# ä½¿ç”¨ factoextra\nfviz_pca_ind(pca_result,\n    col.ind = \"cos2\", # æŒ‰è¡¨ç¤ºè´¨é‡ç€è‰²\n    gradient.cols = c(\"#00AFBB\", \"#E7B800\", \"#FC4E07\"),\n    repel = TRUE\n) +\n    labs(title = \"ä¸ªä½“å¾—åˆ†å›¾ (PC1 vs PC2)\") +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\næŒ‰ç»„åˆ«ç€è‰²\n\n# æ·»åŠ æ¯”èµ›ç±»å‹ä½œä¸ºåˆ†ç»„\nfviz_pca_ind(pca_result,\n    geom.ind = \"point\",\n    col.ind = decathlon2$Competition,\n    palette = c(\"#00AFBB\", \"#FC4E07\"),\n    addEllipses = TRUE,\n    ellipse.type = \"confidence\",\n    legend.title = \"æ¯”èµ›\"\n) +\n    labs(title = \"æŒ‰æ¯”èµ›ç±»å‹åˆ†ç»„\") +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ä¸»æˆåˆ†åˆ†æ (PCA)"
    ]
  },
  {
    "objectID": "1039-pca.html#åŒæ ‡å›¾-biplot",
    "href": "1039-pca.html#åŒæ ‡å›¾-biplot",
    "title": "ä¸»æˆåˆ†åˆ†æ (PCA) å®Œå…¨æŒ‡å—",
    "section": "åŒæ ‡å›¾ (Biplot)",
    "text": "åŒæ ‡å›¾ (Biplot)\nåŒæ ‡å›¾åŒæ—¶å±•ç¤ºå˜é‡å’Œä¸ªä½“ã€‚\n\nfviz_pca_biplot(pca_result,\n    col.var = \"#2E9FDF\", # å˜é‡é¢œè‰²\n    col.ind = \"#696969\", # ä¸ªä½“é¢œè‰²\n    repel = TRUE\n) +\n    labs(title = \"PCA åŒæ ‡å›¾\") +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\nåˆ†ç»„åŒæ ‡å›¾\n\nfviz_pca_biplot(pca_result,\n    col.ind = decathlon2$Competition,\n    palette = c(\"#00AFBB\", \"#FC4E07\"),\n    addEllipses = TRUE,\n    label = \"var\",\n    col.var = \"black\",\n    repel = TRUE,\n    legend.title = \"æ¯”èµ›\"\n) +\n    labs(title = \"åˆ†ç»„åŒæ ‡å›¾\") +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ä¸»æˆåˆ†åˆ†æ (PCA)"
    ]
  },
  {
    "objectID": "1039-pca.html#é«˜çº§-pca-factominer",
    "href": "1039-pca.html#é«˜çº§-pca-factominer",
    "title": "ä¸»æˆåˆ†åˆ†æ (PCA) å®Œå…¨æŒ‡å—",
    "section": "é«˜çº§ PCA (FactoMineR)",
    "text": "é«˜çº§ PCA (FactoMineR)\nFactoMineR æä¾›æ›´ä¸°å¯Œçš„ PCA åŠŸèƒ½ã€‚\n\n# ä½¿ç”¨ PCA å‡½æ•°\npca_fm &lt;- PCA(decathlon2,\n    quanti.sup = 11:12, # è¡¥å……å®šé‡å˜é‡\n    quali.sup = 13, # è¡¥å……å®šæ€§å˜é‡\n    graph = FALSE\n)\n\n# æŸ¥çœ‹ç»“æœ\nsummary(pca_fm)\n\n\nCall:\nPCA(X = decathlon2, quanti.sup = 11:12, quali.sup = 13, graph = FALSE) \n\n\nEigenvalues\n                       Dim.1   Dim.2   Dim.3   Dim.4   Dim.5   Dim.6   Dim.7\nVariance               3.750   1.745   1.518   1.032   0.618   0.428   0.326\n% of var.             37.500  17.452  15.178  10.322   6.178   4.283   3.259\nCumulative % of var.  37.500  54.951  70.130  80.452  86.630  90.913  94.172\n                       Dim.8   Dim.9  Dim.10\nVariance               0.279   0.191   0.112\n% of var.              2.794   1.911   1.123\nCumulative % of var.  96.966  98.877 100.000\n\nIndividuals (the 10 first)\n                 Dist    Dim.1    ctr   cos2    Dim.2    ctr   cos2    Dim.3\nSEBRLE       |  2.236 |  0.278  0.076  0.015 | -0.536  0.611  0.058 |  1.585\nCLAY         |  3.534 |  0.905  0.809  0.066 | -2.094  9.308  0.351 |  0.841\nBERNARD      |  2.848 | -1.372  1.860  0.232 | -1.348  3.857  0.224 |  0.962\nYURKOV       |  3.187 | -0.928  0.851  0.085 |  2.282 11.049  0.513 |  1.943\nZSIVOCZKY    |  2.673 | -0.104  0.011  0.002 |  1.090  2.521  0.166 | -2.099\nMcMULLEN     |  2.638 |  0.240  0.057  0.008 |  0.939  1.872  0.127 | -0.818\nMARTINEAU    |  3.988 | -2.537  6.358  0.405 |  1.801  6.884  0.204 |  0.052\nHERNU        |  3.160 | -1.903  3.576  0.363 | -0.330  0.232  0.011 |  1.289\nBARRAS       |  2.297 | -1.806  3.220  0.618 |  0.303  0.194  0.017 | -0.593\nNOOL         |  4.018 | -2.882  8.202  0.514 |  0.864  1.584  0.046 | -1.402\n                ctr   cos2  \nSEBRLE        6.132  0.502 |\nCLAY          1.725  0.057 |\nBERNARD       2.258  0.114 |\nYURKOV        9.209  0.372 |\nZSIVOCZKY    10.750  0.617 |\nMcMULLEN      1.633  0.096 |\nMARTINEAU     0.007  0.000 |\nHERNU         4.052  0.166 |\nBARRAS        0.858  0.067 |\nNOOL          4.799  0.122 |\n\nVariables\n                Dim.1    ctr   cos2    Dim.2    ctr   cos2    Dim.3    ctr\nX100m        | -0.819 17.885  0.671 |  0.343  6.733  0.117 |  0.101  0.670\nLong.jump    |  0.759 15.358  0.576 | -0.381  8.339  0.146 | -0.006  0.003\nShot.put     |  0.715 13.636  0.511 |  0.282  4.561  0.080 |  0.474 14.793\nHigh.jump    |  0.608  9.874  0.370 |  0.611 21.417  0.374 |  0.005  0.001\nX400m        | -0.644 11.054  0.415 |  0.148  1.262  0.022 |  0.516 17.526\nX110m.hurdle | -0.716 13.687  0.513 |  0.298  5.073  0.089 |  0.416 11.426\nDiscus       |  0.717 13.705  0.514 |  0.204  2.394  0.042 |  0.270  4.814\nPole.vault   | -0.221  1.307  0.049 | -0.738 31.170  0.544 |  0.403 10.705\nJaveline     |  0.355  3.364  0.126 |  0.099  0.556  0.010 |  0.695 31.863\nX1500m       |  0.070  0.130  0.005 | -0.568 18.494  0.323 |  0.353  8.198\n               cos2  \nX100m         0.010 |\nLong.jump     0.000 |\nShot.put      0.225 |\nHigh.jump     0.000 |\nX400m         0.266 |\nX110m.hurdle  0.173 |\nDiscus        0.073 |\nPole.vault    0.162 |\nJaveline      0.484 |\nX1500m        0.124 |\n\nSupplementary continuous variables\n                Dim.1   cos2    Dim.2   cos2    Dim.3   cos2  \nRank         | -0.646  0.417 | -0.024  0.001 | -0.364  0.132 |\nPoints       |  0.947  0.897 | -0.014  0.000 |  0.156  0.024 |\n\nSupplementary categories\n                 Dist    Dim.1   cos2 v.test    Dim.2   cos2 v.test    Dim.3\nDecastar     |  1.207 | -1.071  0.788 -2.718 |  0.044  0.001  0.165 |  0.082\nOlympicG     |  1.120 |  0.995  0.788  2.718 | -0.041  0.001 -0.165 | -0.076\n               cos2 v.test  \nDecastar      0.005  0.328 |\nOlympicG      0.005 -0.328 |\n\n\n\nå˜é‡ç»“æœ\n\n# å˜é‡åæ ‡ã€è´¡çŒ®ã€è¡¨ç¤ºè´¨é‡\nvar_result &lt;- get_pca_var(pca_fm)\nprint(var_result$coord[, 1:3]) # åæ ‡\n\n                   Dim.1      Dim.2        Dim.3\nX100m        -0.81895206  0.3427787  0.100864539\nLong.jump     0.75889854 -0.3814931 -0.006261254\nShot.put      0.71507829  0.2821167  0.473854591\nHigh.jump     0.60849326  0.6113542  0.004605966\nX400m        -0.64384815  0.1484225  0.515759382\nX110m.hurdle -0.71642027  0.2975519  0.416451017\nDiscus        0.71688812  0.2043979  0.270322202\nPole.vault   -0.22141731 -0.7375479  0.403083623\nJaveline      0.35517566  0.0985309  0.695433666\nX1500m        0.06971223 -0.5681197  0.352757755\n\n\n\n# è¡¨ç¤ºè´¨é‡ (cos2)\nprint(round(var_result$cos2[, 1:3], 3))\n\n             Dim.1 Dim.2 Dim.3\nX100m        0.671 0.117 0.010\nLong.jump    0.576 0.146 0.000\nShot.put     0.511 0.080 0.225\nHigh.jump    0.370 0.374 0.000\nX400m        0.415 0.022 0.266\nX110m.hurdle 0.513 0.089 0.173\nDiscus       0.514 0.042 0.073\nPole.vault   0.049 0.544 0.162\nJaveline     0.126 0.010 0.484\nX1500m       0.005 0.323 0.124\n\n\n\n\nä¸ªä½“ç»“æœ\n\n# ä¸ªä½“åæ ‡å’Œè´¡çŒ®\nind_result &lt;- get_pca_ind(pca_fm)\nhead(ind_result$coord[, 1:3])\n\n               Dim.1      Dim.2      Dim.3\nSEBRLE     0.2779582 -0.5364345  1.5852390\nCLAY       0.9048536 -2.0942803  0.8406848\nBERNARD   -1.3722659 -1.3481155  0.9619317\nYURKOV    -0.9282048  2.2817444  1.9426881\nZSIVOCZKY -0.1038171  1.0898221 -2.0989076\nMcMULLEN   0.2398580  0.9390923 -0.8181362",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ä¸»æˆåˆ†åˆ†æ (PCA)"
    ]
  },
  {
    "objectID": "1039-pca.html#d-pca-å¯è§†åŒ–",
    "href": "1039-pca.html#d-pca-å¯è§†åŒ–",
    "title": "ä¸»æˆåˆ†åˆ†æ (PCA) å®Œå…¨æŒ‡å—",
    "section": "3D PCA å¯è§†åŒ–",
    "text": "3D PCA å¯è§†åŒ–\n\n# ä½¿ç”¨ plotly è¿›è¡Œ 3D å¯è§†åŒ–\n# install.packages(\"plotly\")\nlibrary(plotly)\n\n# å‡†å¤‡æ•°æ®\nplot_data &lt;- data.frame(\n    PC1 = pca_result$x[, 1],\n    PC2 = pca_result$x[, 2],\n    PC3 = pca_result$x[, 3],\n    Name = rownames(pca_result$x),\n    Competition = decathlon2$Competition\n)\n\n# 3D æ•£ç‚¹å›¾\nplot_ly(plot_data,\n    x = ~PC1, y = ~PC2, z = ~PC3,\n    color = ~Competition,\n    text = ~Name,\n    type = \"scatter3d\",\n    mode = \"markers\"\n) %&gt;%\n    layout(title = \"3D PCA å¯è§†åŒ–\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ä¸»æˆåˆ†åˆ†æ (PCA)"
    ]
  },
  {
    "objectID": "1039-pca.html#pca-ç”¨äºé™ç»´",
    "href": "1039-pca.html#pca-ç”¨äºé™ç»´",
    "title": "ä¸»æˆåˆ†åˆ†æ (PCA) å®Œå…¨æŒ‡å—",
    "section": "PCA ç”¨äºé™ç»´",
    "text": "PCA ç”¨äºé™ç»´\n\nç”¨äºå›å½’\n\n# ä½¿ç”¨å‰å‡ ä¸ªä¸»æˆåˆ†ä½œä¸ºé¢„æµ‹å˜é‡\n# ç¤ºä¾‹ï¼šé¢„æµ‹æ€»åˆ†\ndecathlon2$Points &lt;- as.numeric(decathlon2$Points)\n\n# æ·»åŠ  PC å¾—åˆ†\npca_scores &lt;- as.data.frame(pca_result$x)\ndata_with_pc &lt;- cbind(pca_scores, Points = decathlon2$Points)\n\n# ä½¿ç”¨å‰ 4 ä¸ª PC è¿›è¡Œå›å½’\nmodel_pc &lt;- lm(Points ~ PC1 + PC2 + PC3 + PC4, data = data_with_pc)\nsummary(model_pc)\n\n\nCall:\nlm(formula = Points ~ PC1 + PC2 + PC3 + PC4, data = data_with_pc)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-66.026 -29.952  -0.934  20.908 135.163 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 8118.963      9.208 881.764  &lt; 2e-16 ***\nPC1          167.444      4.845  34.557  &lt; 2e-16 ***\nPC2            3.705      7.103   0.522    0.607    \nPC3           43.293      7.616   5.684 1.02e-05 ***\nPC4          -84.054      9.236  -9.101 6.51e-09 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 47.84 on 22 degrees of freedom\nMultiple R-squared:  0.9835,    Adjusted R-squared:  0.9805 \nF-statistic: 327.4 on 4 and 22 DF,  p-value: &lt; 2.2e-16\n\n\n\n\nç”¨äºèšç±»\n\n# ä½¿ç”¨ PC å¾—åˆ†è¿›è¡Œèšç±»\nset.seed(42)\nclusters &lt;- kmeans(pca_result$x[, 1:2], centers = 3)\n\n# å¯è§†åŒ–\nfviz_cluster(list(data = pca_result$x[, 1:2], cluster = clusters$cluster),\n    geom = \"point\",\n    ellipse.type = \"convex\",\n    palette = \"jco\"\n) +\n    labs(title = \"åŸºäº PCA çš„èšç±»ç»“æœ\") +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ä¸»æˆåˆ†åˆ†æ (PCA)"
    ]
  },
  {
    "objectID": "1039-pca.html#ç‰¹æ®Šæƒ…å†µå¤„ç†",
    "href": "1039-pca.html#ç‰¹æ®Šæƒ…å†µå¤„ç†",
    "title": "ä¸»æˆåˆ†åˆ†æ (PCA) å®Œå…¨æŒ‡å—",
    "section": "ç‰¹æ®Šæƒ…å†µå¤„ç†",
    "text": "ç‰¹æ®Šæƒ…å†µå¤„ç†\n\nç¼ºå¤±å€¼å¤„ç†\n\n# ä½¿ç”¨ missMDA åŒ…å¤„ç†ç¼ºå¤±å€¼\n# install.packages(\"missMDA\")\n# library(missMDA)\n\n# ä¼°è®¡ç¼ºå¤±å€¼\n# completed_data &lt;- imputePCA(data_with_na, ncp = 2)$completeObs\n\n\n\nç¨€ç– PCA\nå¯¹äºé«˜ç»´æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ç¨€ç– PCAã€‚\n\n# install.packages(\"elasticnet\")\n# library(elasticnet)\n#\n# sparse_pca &lt;- spca(scale(active_vars), K = 4, type = \"predictor\",\n#                    sparse = \"varnum\", para = c(5, 5, 5, 5))",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ä¸»æˆåˆ†åˆ†æ (PCA)"
    ]
  },
  {
    "objectID": "1039-pca.html#ç»“æœæŠ¥å‘Š",
    "href": "1039-pca.html#ç»“æœæŠ¥å‘Š",
    "title": "ä¸»æˆåˆ†åˆ†æ (PCA) å®Œå…¨æŒ‡å—",
    "section": "ç»“æœæŠ¥å‘Š",
    "text": "ç»“æœæŠ¥å‘Š\n\nå­¦æœ¯æŠ¥å‘Šæ¨¡æ¿\n\n\n\n## PCA ç»“æœ\n\nå¯¹ 10 ä¸ªè¿åŠ¨é¡¹ç›®æˆç»©è¿›è¡Œä¸»æˆåˆ†åˆ†æã€‚ç»“æœæ˜¾ç¤ºï¼Œ\nå‰ 4 ä¸ªä¸»æˆåˆ†è§£é‡Šäº†æ€»æ–¹å·®çš„  80.5 %ã€‚\n\n### ä¸»æˆåˆ†è§£é‡Š\n\n- PC1 ( 37.5 %): ä¸»è¦åæ˜ æ•´ä½“è¿åŠ¨èƒ½åŠ›\n- PC2 ( 17.5 %): åŒºåˆ†é€Ÿåº¦å‹å’ŒåŠ›é‡å‹è¿åŠ¨å‘˜\n- PC3 ( 15.2 %): ...\n- PC4 ( 10.3 %): ...\n\n### å˜é‡è½½è·\n\nå„å˜é‡åœ¨ä¸»æˆåˆ†ä¸Šçš„è½½è·è§è¡¨ Xã€‚\n\n\n\n\nå¯¼å‡ºç»“æœ\n\n# å¯¼å‡ºè½½è·çŸ©é˜µ\nwrite.csv(pca_result$rotation, \"pca_loadings.csv\")\n\n# å¯¼å‡ºå¾—åˆ†\nwrite.csv(pca_result$x, \"pca_scores.csv\")\n\n# ä¿å­˜å›¾ç‰‡\np &lt;- fviz_pca_biplot(pca_result, repel = TRUE)\nggsave(\"pca_biplot.pdf\", p, width = 10, height = 8)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ä¸»æˆåˆ†åˆ†æ (PCA)"
    ]
  },
  {
    "objectID": "1039-pca.html#æœ€ä½³å®è·µ",
    "href": "1039-pca.html#æœ€ä½³å®è·µ",
    "title": "ä¸»æˆåˆ†åˆ†æ (PCA) å®Œå…¨æŒ‡å—",
    "section": "æœ€ä½³å®è·µ",
    "text": "æœ€ä½³å®è·µ\n\næ£€æŸ¥æ¸…å•\n\næ•°æ®æ˜¯å¦æ ‡å‡†åŒ–ï¼ˆä¸åŒé‡çº²æ—¶å¿…é¡»ï¼‰\næ ·æœ¬é‡æ˜¯å¦è¶³å¤Ÿï¼ˆn &gt; p æˆ–è‡³å°‘ n &gt; 5pï¼‰\nKMO æ£€éªŒ &gt; 0.6\nç»¼åˆå¤šç§æ–¹æ³•ç¡®å®šæˆåˆ†æ•°\næ£€æŸ¥è½½è·çš„å¯è§£é‡Šæ€§\néªŒè¯ç»“æœçš„ç¨³å®šæ€§\n\n\n\nå¸¸è§é”™è¯¯\n\n\n\né”™è¯¯\nè§£å†³æ–¹æ¡ˆ\n\n\n\n\næœªæ ‡å‡†åŒ–\nè®¾ç½® scale = TRUE\n\n\næˆåˆ†æ•°é€‰æ‹©ä¸å½“\nä½¿ç”¨å¤šç§å‡†åˆ™ç»¼åˆåˆ¤æ–­\n\n\nè¿‡åº¦è§£é‡Š\nåªè§£é‡Šè½½è· &gt; 0.4 çš„å˜é‡\n\n\nå¿½ç•¥è¡¨ç¤ºè´¨é‡\næ£€æŸ¥ cos2 å€¼",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ä¸»æˆåˆ†åˆ†æ (PCA)"
    ]
  },
  {
    "objectID": "1039-pca.html#æ€»ç»“",
    "href": "1039-pca.html#æ€»ç»“",
    "title": "ä¸»æˆåˆ†åˆ†æ (PCA) å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nä»»åŠ¡\næ¨èå·¥å…·\n\n\n\n\nå¿«é€Ÿ PCA\nprcomp()\n\n\nä¸°å¯Œè¾“å‡º\nFactoMineR::PCA()\n\n\nå¯è§†åŒ–\nfactoextra\n\n\n3D å±•ç¤º\nplotly\n\n\n\n\n[!TIP] æœ€ä½³å®è·µï¼š 1. æ ‡å‡†åŒ–æ•°æ®åå†è¿›è¡Œ PCA 2. ç»¼åˆå¤šç§æ–¹æ³•ç¡®å®šä¸»æˆåˆ†æ•° 3. è§£é‡Šä¸»æˆåˆ†æ—¶å…³æ³¨é«˜è½½è·å˜é‡ 4. ä½¿ç”¨åŒæ ‡å›¾å±•ç¤ºå˜é‡å’Œä¸ªä½“å…³ç³»",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ä¸»æˆåˆ†åˆ†æ (PCA)"
    ]
  },
  {
    "objectID": "1039-pca.html#å‚è€ƒæ–‡çŒ®",
    "href": "1039-pca.html#å‚è€ƒæ–‡çŒ®",
    "title": "ä¸»æˆåˆ†åˆ†æ (PCA) å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒæ–‡çŒ®",
    "text": "å‚è€ƒæ–‡çŒ®\n\nJolliffe, I. T. (2002). Principal Component Analysis (2nd ed.). Springer.\nHusson, F., LÃª, S., & PagÃ¨s, J. (2017). Exploratory Multivariate Analysis by Example Using R. CRC Press.\nKassambara, A. (2017). Practical Guide to Principal Component Methods in R. STHDA.",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ä¸»æˆåˆ†åˆ†æ (PCA)"
    ]
  },
  {
    "objectID": "1041-network-meta.html",
    "href": "1041-network-meta.html",
    "title": "ç½‘çŠ¶ Meta åˆ†æ (Network Meta-Analysis) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "ä¼ ç»Ÿ Meta åˆ†æåªèƒ½ä¸¤ä¸¤æ¯”è¾ƒå¹²é¢„æªæ–½ï¼ˆå¦‚ A vs Bï¼‰ã€‚ä½†ä¸´åºŠå†³ç­–ä¸­ï¼Œæˆ‘ä»¬å¸¸éœ€è¦åŒæ—¶æ¯”è¾ƒå¤šç§å¹²é¢„æªæ–½ã€‚\nç½‘çŠ¶ Meta åˆ†æ (Network Meta-Analysis, NMA) é€šè¿‡æ•´åˆç›´æ¥å’Œé—´æ¥è¯æ®ï¼Œå®ç°å¤šç§å¹²é¢„çš„åŒæ—¶æ¯”è¾ƒå’Œæ’åºã€‚\næœ¬æ•™ç¨‹å°†ä»‹ç» NMA çš„åŸºæœ¬åŸç†å’Œ R è¯­è¨€ netmeta åŒ…çš„å®Œæ•´ä½¿ç”¨æµç¨‹ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "ç½‘çŠ¶ Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1041-network-meta.html#å‰è¨€",
    "href": "1041-network-meta.html#å‰è¨€",
    "title": "ç½‘çŠ¶ Meta åˆ†æ (Network Meta-Analysis) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "ä¼ ç»Ÿ Meta åˆ†æåªèƒ½ä¸¤ä¸¤æ¯”è¾ƒå¹²é¢„æªæ–½ï¼ˆå¦‚ A vs Bï¼‰ã€‚ä½†ä¸´åºŠå†³ç­–ä¸­ï¼Œæˆ‘ä»¬å¸¸éœ€è¦åŒæ—¶æ¯”è¾ƒå¤šç§å¹²é¢„æªæ–½ã€‚\nç½‘çŠ¶ Meta åˆ†æ (Network Meta-Analysis, NMA) é€šè¿‡æ•´åˆç›´æ¥å’Œé—´æ¥è¯æ®ï¼Œå®ç°å¤šç§å¹²é¢„çš„åŒæ—¶æ¯”è¾ƒå’Œæ’åºã€‚\næœ¬æ•™ç¨‹å°†ä»‹ç» NMA çš„åŸºæœ¬åŸç†å’Œ R è¯­è¨€ netmeta åŒ…çš„å®Œæ•´ä½¿ç”¨æµç¨‹ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "ç½‘çŠ¶ Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1041-network-meta.html#ç½‘çŠ¶-meta-åˆ†æåŸºç¡€",
    "href": "1041-network-meta.html#ç½‘çŠ¶-meta-åˆ†æåŸºç¡€",
    "title": "ç½‘çŠ¶ Meta åˆ†æ (Network Meta-Analysis) å®Œå…¨æŒ‡å—",
    "section": "1. ç½‘çŠ¶ Meta åˆ†æåŸºç¡€",
    "text": "1. ç½‘çŠ¶ Meta åˆ†æåŸºç¡€\n\nä»€ä¹ˆæ˜¯ç½‘çŠ¶ Metaï¼Ÿ\nè€ƒè™‘ 3 ç§é™å‹è¯çš„æ¯”è¾ƒï¼š\n\nç ”ç©¶ 1ï¼šè¯ç‰© A vs å®‰æ…°å‰‚\nç ”ç©¶ 2ï¼šè¯ç‰© B vs å®‰æ…°å‰‚\n\nç ”ç©¶ 3ï¼šè¯ç‰© A vs è¯ç‰© B\n\nä¼ ç»Ÿ Meta åˆ†æåªèƒ½åˆ†åˆ«åˆæˆæ¯å¯¹æ¯”è¾ƒã€‚è€Œ NMA å¯ä»¥ï¼š\n\nåŒæ—¶æ¯”è¾ƒæ‰€æœ‰å¹²é¢„ï¼šA vs B vs C vs å®‰æ…°å‰‚\nåˆ©ç”¨é—´æ¥è¯æ®ï¼šå³ä½¿æ²¡æœ‰ A vs C çš„ç›´æ¥ç ”ç©¶ï¼Œä¹Ÿèƒ½é€šè¿‡ A-B-C é“¾æ¡æ¨æ–­\nå¯¹å¹²é¢„è¿›è¡Œæ’åºï¼šç»™å‡ºâ€æœ€ä½³â€å¹²é¢„çš„æ¦‚ç‡\n\n\n\næ ¸å¿ƒæ¦‚å¿µ\n\n\n\næ¦‚å¿µ\nè¯´æ˜\n\n\n\n\nèŠ‚ç‚¹ (Node)\nç½‘ç»œä¸­çš„å¹²é¢„æªæ–½\n\n\nè¾¹ (Edge)\nä¸¤ç§å¹²é¢„ä¹‹é—´çš„æ¯”è¾ƒ\n\n\nç›´æ¥è¯æ®\næ¥è‡ªå¤´å¯¹å¤´æ¯”è¾ƒç ”ç©¶\n\n\né—´æ¥è¯æ®\né€šè¿‡å…±åŒæ¯”è¾ƒè€…æ¨æ–­\n\n\næ··åˆè¯æ®\nç›´æ¥ + é—´æ¥çš„åŠ æƒç»„åˆ\n\n\nä¸€è‡´æ€§\nç›´æ¥ä¸é—´æ¥è¯æ®æ˜¯å¦å»åˆ\n\n\n\n\n\nåŸºæœ¬å‡è®¾\nNMA çš„æ ¸å¿ƒå‡è®¾æ˜¯ä¸€è‡´æ€§ (Transitivity)ï¼š\n\nå¦‚æœ A vs B çš„æ•ˆåº”æ˜¯ Î´_ABï¼ŒB vs C æ˜¯ Î´_BCï¼Œ é‚£ä¹ˆ A vs C åº”è¯¥ç­‰äº Î´_AB + Î´_BC\n\nè¿™è¦æ±‚ï¼š - ç ”ç©¶é—´å…·æœ‰å¯æ¯”æ€§ï¼ˆç›¸ä¼¼çš„äººç¾¤ã€ç»“å±€å®šä¹‰ï¼‰ - ä¸å­˜åœ¨æ•ˆåº”ä¿®é¥°å› å­å¯¼è‡´çš„å¼‚è´¨æ€§",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "ç½‘çŠ¶ Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1041-network-meta.html#netmeta-åŒ…å…¥é—¨",
    "href": "1041-network-meta.html#netmeta-åŒ…å…¥é—¨",
    "title": "ç½‘çŠ¶ Meta åˆ†æ (Network Meta-Analysis) å®Œå…¨æŒ‡å—",
    "section": "2. netmeta åŒ…å…¥é—¨",
    "text": "2. netmeta åŒ…å…¥é—¨\n\nå®‰è£…ä¸åŠ è½½\n\n# install.packages(\"netmeta\")\nlibrary(netmeta)\nlibrary(ggplot2)\nlibrary(dplyr)\n\n\n\næ•°æ®æ ¼å¼\nnetmeta æ”¯æŒä¸¤ç§æ•°æ®æ ¼å¼ï¼š\nå¯¹æ¯”æ ¼å¼ (Pairwise)ï¼šæ¯è¡Œæ˜¯ä¸€å¯¹æ¯”è¾ƒ\n\n# ç¤ºä¾‹æ•°æ®ï¼šæŠ—æŠ‘éƒè¯æ¯”è¾ƒ\ndata(Senn2013)\nhead(Senn2013)\n\n     TE   seTE   treat1.long treat2.long treat1 treat2           studlab\n1 -1.90 0.1414     Metformin     Placebo   metf   plac      DeFronzo1995\n2 -0.82 0.0992     Metformin     Placebo   metf   plac         Lewin2007\n3 -0.20 0.3579     Metformin    Acarbose   metf   acar        Willms1999\n4 -1.34 0.1435 Rosiglitazone     Placebo   rosi   plac      Davidson2007\n5 -1.10 0.1141 Rosiglitazone     Placebo   rosi   plac Wolffenbuttel1999\n6 -1.30 0.1268  Pioglitazone     Placebo   piog   plac        Kipnes2001\n\n\nè‡‚æ ¼å¼ (Arm-based)ï¼šæ¯è¡Œæ˜¯ä¸€ä¸ªç ”ç©¶è‡‚\n\n# è½¬æ¢ç¤ºä¾‹ï¼ˆå¦‚æœæ•°æ®æ˜¯è‡‚æ ¼å¼ï¼‰\n# pairwise() å‡½æ•°å¯ä»¥è½¬æ¢\n\n\n\nåŸºç¡€ NMA æ¨¡å‹\n\n# è¿è¡Œç½‘çŠ¶ Meta åˆ†æ\nnma_result &lt;- netmeta(\n    TE = TE, # æ•ˆåº”é‡ï¼ˆlog OR, log RR, MD ç­‰ï¼‰\n    seTE = seTE, # æ•ˆåº”é‡æ ‡å‡†è¯¯\n    treat1 = treat1, # å¹²é¢„ 1\n    treat2 = treat2, # å¹²é¢„ 2\n    studlab = studlab, # ç ”ç©¶æ ‡è¯†\n    data = Senn2013,\n    sm = \"MD\", # æ•ˆåº”é‡ç±»å‹ï¼šMean Difference\n    reference.group = \"plac\", # å‚ç…§ç»„\n    common = FALSE, # ä½¿ç”¨éšæœºæ•ˆåº”æ¨¡å‹\n    random = TRUE\n)\n\n# æŸ¥çœ‹ç»“æœæ‘˜è¦\nsummary(nma_result)\n\nOriginal data (with adjusted standard errors for multi-arm studies):\n\n                   treat1 treat2      TE   seTE seTE.adj narms multiarm\nDeFronzo1995         metf   plac -1.9000 0.1414   0.3588     2         \nLewin2007            metf   plac -0.8200 0.0992   0.3443     2         \nWillms1999           acar   metf  0.2000 0.3579   0.5574     3        *\nDavidson2007         plac   rosi  1.3400 0.1435   0.3596     2         \nWolffenbuttel1999    plac   rosi  1.1000 0.1141   0.3489     2         \nKipnes2001           piog   plac -1.3000 0.1268   0.3533     2         \nKerenyi2004          plac   rosi  0.7700 0.1078   0.3469     2         \nHanefeld2004         metf   piog -0.1600 0.0849   0.3405     2         \nDerosa2004           piog   rosi  0.1000 0.1831   0.3772     2         \nBaksi2004            plac   rosi  1.3000 0.1014   0.3450     2         \nRosenstock2008       plac   rosi  1.0900 0.2263   0.3999     2         \nZhu2003              plac   rosi  1.5000 0.1624   0.3675     2         \nYang2003             metf   rosi  0.1400 0.2239   0.3986     2         \nVongthavaravat2002   rosi   sulf -1.2000 0.1436   0.3596     2         \nOyama2008            acar   sulf -0.4000 0.1549   0.3643     2         \nCosta1997            acar   plac -0.8000 0.1432   0.3595     2         \nHermansen2007        plac   sita  0.5700 0.1291   0.3541     2         \nGarber2008           plac   vild  0.7000 0.1273   0.3534     2         \nAlex1998             metf   sulf -0.3700 0.1184   0.3503     2         \nJohnston1994         migl   plac -0.7400 0.1839   0.3775     2         \nJohnston1998a        migl   plac -1.4100 0.2235   0.3983     2         \nKim2007              metf   rosi -0.0000 0.2339   0.4043     2         \nJohnston1998b        migl   plac -0.6800 0.2828   0.4344     2         \nGonzalez-Ortiz2004   metf   plac -0.4000 0.4356   0.5463     2         \nStucci1996           benf   plac -0.2300 0.3467   0.4785     2         \nMoulin2006           benf   plac -1.0100 0.1366   0.3569     2         \nWillms1999           metf   plac -1.2000 0.3758   0.5802     3        *\nWillms1999           acar   plac -1.0000 0.4669   0.8122     3        *\n\nNumber of treatment arms (by study):\n                   narms\nDeFronzo1995           2\nLewin2007              2\nWillms1999             3\nDavidson2007           2\nWolffenbuttel1999      2\nKipnes2001             2\nKerenyi2004            2\nHanefeld2004           2\nDerosa2004             2\nBaksi2004              2\nRosenstock2008         2\nZhu2003                2\nYang2003               2\nVongthavaravat2002     2\nOyama2008              2\nCosta1997              2\nHermansen2007          2\nGarber2008             2\nAlex1998               2\nJohnston1994           2\nJohnston1998a          2\nKim2007                2\nJohnston1998b          2\nGonzalez-Ortiz2004     2\nStucci1996             2\nMoulin2006             2\n\nResults (random effects model):\n\n                   treat1 treat2      MD             95%-CI\nDeFronzo1995         metf   plac -1.1268 [-1.4291; -0.8244]\nLewin2007            metf   plac -1.1268 [-1.4291; -0.8244]\nWillms1999           acar   metf  0.2850 [-0.2208;  0.7908]\nDavidson2007         plac   rosi  1.2335 [ 0.9830;  1.4839]\nWolffenbuttel1999    plac   rosi  1.2335 [ 0.9830;  1.4839]\nKipnes2001           piog   plac -1.1291 [-1.5596; -0.6986]\nKerenyi2004          plac   rosi  1.2335 [ 0.9830;  1.4839]\nHanefeld2004         metf   piog  0.0023 [-0.4398;  0.4444]\nDerosa2004           piog   rosi  0.1044 [-0.3347;  0.5435]\nBaksi2004            plac   rosi  1.2335 [ 0.9830;  1.4839]\nRosenstock2008       plac   rosi  1.2335 [ 0.9830;  1.4839]\nZhu2003              plac   rosi  1.2335 [ 0.9830;  1.4839]\nYang2003             metf   rosi  0.1067 [-0.2170;  0.4304]\nVongthavaravat2002   rosi   sulf -0.8169 [-1.2817; -0.3521]\nOyama2008            acar   sulf -0.4252 [-0.9456;  0.0951]\nCosta1997            acar   plac -0.8418 [-1.3236; -0.3600]\nHermansen2007        plac   sita  0.5700 [-0.1240;  1.2640]\nGarber2008           plac   vild  0.7000 [ 0.0073;  1.3927]\nAlex1998             metf   sulf -0.7102 [-1.1713; -0.2491]\nJohnston1994         migl   plac -0.9497 [-1.4040; -0.4955]\nJohnston1998a        migl   plac -0.9497 [-1.4040; -0.4955]\nKim2007              metf   rosi  0.1067 [-0.2170;  0.4304]\nJohnston1998b        migl   plac -0.9497 [-1.4040; -0.4955]\nGonzalez-Ortiz2004   metf   plac -1.1268 [-1.4291; -0.8244]\nStucci1996           benf   plac -0.7311 [-1.2918; -0.1705]\nMoulin2006           benf   plac -0.7311 [-1.2918; -0.1705]\nWillms1999           metf   plac -1.1268 [-1.4291; -0.8244]\nWillms1999           acar   plac -0.8418 [-1.3236; -0.3600]\n\nNumber of studies: k = 26\nNumber of pairwise comparisons: m = 28\nNumber of treatments: n = 10\nNumber of designs: d = 15\n\nRandom effects model\n\nTreatment estimate (sm = 'MD', comparison: other treatments vs 'plac'):\n          MD             95%-CI     z  p-value\nacar -0.8418 [-1.3236; -0.3600] -3.42   0.0006\nbenf -0.7311 [-1.2918; -0.1705] -2.56   0.0106\nmetf -1.1268 [-1.4291; -0.8244] -7.30 &lt; 0.0001\nmigl -0.9497 [-1.4040; -0.4955] -4.10 &lt; 0.0001\npiog -1.1291 [-1.5596; -0.6986] -5.14 &lt; 0.0001\nplac       .                  .     .        .\nrosi -1.2335 [-1.4839; -0.9830] -9.65 &lt; 0.0001\nsita -0.5700 [-1.2640;  0.1240] -1.61   0.1075\nsulf -0.4166 [-0.8887;  0.0556] -1.73   0.0838\nvild -0.7000 [-1.3927; -0.0073] -1.98   0.0476\n\nQuantifying heterogeneity / inconsistency:\ntau^2 = 0.1087; tau = 0.3297; I^2 = 81.4% [72.0%; 87.7%]\n\nTests of heterogeneity (within designs) and inconsistency (between designs):\n                    Q d.f.  p-value\nTotal           96.99   18 &lt; 0.0001\nWithin designs  74.46   11 &lt; 0.0001\nBetween designs 22.53    7   0.0021\n\nDetails of network meta-analysis methods:\n- Frequentist graph-theoretical approach\n- DerSimonian-Laird estimator for tau^2\n- Calculation of I^2 based on Q",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "ç½‘çŠ¶ Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1041-network-meta.html#ç½‘ç»œå›¾å¯è§†åŒ–",
    "href": "1041-network-meta.html#ç½‘ç»œå›¾å¯è§†åŒ–",
    "title": "ç½‘çŠ¶ Meta åˆ†æ (Network Meta-Analysis) å®Œå…¨æŒ‡å—",
    "section": "3. ç½‘ç»œå›¾å¯è§†åŒ–",
    "text": "3. ç½‘ç»œå›¾å¯è§†åŒ–\n\nåŸºç¡€ç½‘ç»œå›¾\n\n# ç»˜åˆ¶ç½‘ç»œç»“æ„å›¾\nnetgraph(nma_result,\n    cex = 1.2, # èŠ‚ç‚¹æ–‡å­—å¤§å°\n    cex.points = 3, # èŠ‚ç‚¹å¤§å°\n    col = \"#4e79a7\", # èŠ‚ç‚¹é¢œè‰²\n    thickness = \"number.of.studies\", # è¾¹çš„ç²—ç»†\n    plastic = FALSE,\n    multiarm = TRUE\n)\ntitle(\"ç½‘çŠ¶ Meta åˆ†æç½‘ç»œå›¾\")\n\n\n\n\n\n\n\n\n\n\nç¾åŒ–ç½‘ç»œå›¾\n\n# æ›´ç²¾ç»†çš„ç½‘ç»œå›¾\nnetgraph(nma_result,\n    cex = 1.5,\n    cex.points = 4,\n    col = \"gray30\",\n    col.points = \"#4e79a7\",\n    thickness = \"number.of.studies\",\n    plastic = TRUE,\n    points = TRUE,\n    multiarm = TRUE,\n    number.of.studies = TRUE # æ˜¾ç¤ºç ”ç©¶æ•°é‡\n)\n\n\n\n\n\n\n\n\n\n\nggplot é£æ ¼ç½‘ç»œå›¾\n\n# æå–ç½‘ç»œä¿¡æ¯ç”¨äº ggplot\nnetwork_info &lt;- netconnection(nma_result)\n\n# è·å–èŠ‚ç‚¹å’Œè¾¹æ•°æ®\nnodes &lt;- data.frame(\n    treatment = nma_result$trts,\n    n_studies = rowSums(nma_result$A.matrix)\n)\n\n# ä½¿ç”¨ ggraph ç»‘åˆ¶ï¼ˆéœ€å®‰è£… ggraphï¼‰\n# library(ggraph)\n# library(igraph)\n\n# ç®€å•å¯è§†åŒ–\ncat(\n    \"ç½‘ç»œåŒ…å«\", nma_result$n, \"é¡¹ç ”ç©¶ï¼Œ\",\n    length(nma_result$trts), \"ç§å¹²é¢„æªæ–½\\n\"\n)\n\nç½‘ç»œåŒ…å« 10 é¡¹ç ”ç©¶ï¼Œ 10 ç§å¹²é¢„æªæ–½",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "ç½‘çŠ¶ Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1041-network-meta.html#æ•ˆåº”é‡ä¸æ’åº",
    "href": "1041-network-meta.html#æ•ˆåº”é‡ä¸æ’åº",
    "title": "ç½‘çŠ¶ Meta åˆ†æ (Network Meta-Analysis) å®Œå…¨æŒ‡å—",
    "section": "4. æ•ˆåº”é‡ä¸æ’åº",
    "text": "4. æ•ˆåº”é‡ä¸æ’åº\n\næˆå¯¹æ¯”è¾ƒæ£®æ—å›¾\n\n# ç›¸å¯¹äºå‚ç…§ç»„çš„æ£®æ—å›¾\nforest(nma_result,\n    reference.group = \"plac\",\n    sortvar = TE,\n    smlab = \"Mean Difference vs Placebo\",\n    label.left = \"Favors Treatment\",\n    label.right = \"Favors Placebo\"\n)\n\n\n\n\n\n\n\n\n\n\nè”èµ›è¡¨ (League Table)\n\n# ç”Ÿæˆè”èµ›è¡¨\nleague_table &lt;- netleague(nma_result,\n    bracket = \"(\",\n    digits = 2\n)\n\n# æ˜¾ç¤ºæ•ˆåº”é‡çŸ©é˜µ\nprint(league_table$common, row.names = TRUE)\n\n                     acar                 benf                 metf\nacar                 acar                    .  0.20 (-0.50;  0.90)\nbenf  0.08 (-0.25;  0.41)                 benf                    .\nmetf  0.29 ( 0.06;  0.51)  0.21 (-0.07;  0.48)                 metf\nmigl  0.12 (-0.21;  0.44)  0.04 (-0.31;  0.39) -0.17 (-0.44;  0.10)\npiog  0.24 (-0.01;  0.49)  0.16 (-0.13;  0.45) -0.05 (-0.18;  0.09)\nplac -0.83 (-1.04; -0.61) -0.91 (-1.15; -0.66) -1.11 (-1.23; -1.00)\nrosi  0.37 ( 0.15;  0.60)  0.30 ( 0.03;  0.56)  0.09 (-0.04;  0.22)\nsita -0.26 (-0.59;  0.07) -0.34 (-0.69;  0.02) -0.54 (-0.82; -0.27)\nsulf -0.39 (-0.61; -0.17) -0.47 (-0.77; -0.16) -0.67 (-0.85; -0.50)\nvild -0.13 (-0.46;  0.20) -0.21 (-0.56;  0.15) -0.41 (-0.69; -0.14)\n                     migl                 piog                 plac\nacar                    .                    . -0.82 (-1.09; -0.55)\nbenf                    .                    . -0.91 (-1.15; -0.66)\nmetf                    . -0.16 (-0.33;  0.01) -1.15 (-1.31; -1.00)\nmigl                 migl                    . -0.94 (-1.19; -0.70)\npiog  0.12 (-0.17;  0.41)                 piog -1.30 (-1.55; -1.05)\nplac -0.94 (-1.19; -0.70) -1.07 (-1.22; -0.92)                 plac\nrosi  0.26 (-0.01;  0.52)  0.14 (-0.02;  0.30)  1.20 ( 1.11;  1.30)\nsita -0.37 (-0.73; -0.02) -0.50 (-0.79; -0.20)  0.57 ( 0.32;  0.82)\nsulf -0.50 (-0.81; -0.20) -0.63 (-0.84; -0.42)  0.44 ( 0.26;  0.62)\nvild -0.24 (-0.60;  0.11) -0.37 (-0.66; -0.08)  0.70 ( 0.45;  0.95)\n                     rosi                 sita                 sulf\nacar                    .                    . -0.40 (-0.70; -0.10)\nbenf                    .                    .                    .\nmetf  0.07 (-0.24;  0.39)                    . -0.37 (-0.60; -0.14)\nmigl                    .                    .                    .\npiog  0.10 (-0.26;  0.46)                    .                    .\nplac  1.15 ( 1.05;  1.25)  0.57 ( 0.32;  0.82)                    .\nrosi                 rosi                    . -1.20 (-1.48; -0.92)\nsita -0.63 (-0.90; -0.36)                 sita                    .\nsulf -0.76 (-0.94; -0.58) -0.13 (-0.44;  0.18)                 sulf\nvild -0.50 (-0.77; -0.24)  0.13 (-0.23;  0.49)  0.26 (-0.05;  0.57)\n                    vild\nacar                   .\nbenf                   .\nmetf                   .\nmigl                   .\npiog                   .\nplac 0.70 ( 0.45;  0.95)\nrosi                   .\nsita                   .\nsulf                   .\nvild                vild\n\n\n\n\næ’åºåˆ†æ\n\n# è®¡ç®— P-scoresï¼ˆé¢‘ç‡å­¦æ´¾æ’åºï¼‰\nnetrank_result &lt;- netrank(nma_result, small.values = \"good\")\n\n# æŸ¥çœ‹æ’åºç»“æœ\nprint(netrank_result)\n\n     P-score\nrosi  0.8934\nmetf  0.7818\npiog  0.7746\nmigl  0.6137\nacar  0.5203\nbenf  0.4358\nvild  0.4232\nsita  0.3331\nsulf  0.2103\nplac  0.0139\n\n# ç»˜åˆ¶æ’åºå›¾\nplot(netrank_result)\n\n\n\n\n\n\n\n\n\n\nSUCRA æ›²çº¿\n\n# è®¡ç®—ç´¯ç§¯æ’åºæ¦‚ç‡ï¼ˆSUCRAï¼‰\n# netmeta ä½¿ç”¨ P-scoreï¼Œä¸è´å¶æ–¯çš„ SUCRA ç±»ä¼¼\n\n# å¯è§†åŒ–æ’åº\nranking_df &lt;- data.frame(\n    Treatment = names(netrank_result$Pscore.random),\n    P_score = netrank_result$Pscore.random\n) %&gt;%\n    arrange(desc(P_score))\n\nggplot(ranking_df, aes(x = reorder(Treatment, P_score), y = P_score)) +\n    geom_col(fill = \"#4e79a7\", alpha = 0.8) +\n    geom_text(aes(label = round(P_score, 3)), hjust = -0.1, size = 3.5) +\n    coord_flip() +\n    ylim(0, 1.1) +\n    labs(\n        title = \"å¹²é¢„æªæ–½ P-score æ’åº\",\n        subtitle = \"P-score è¶Šé«˜è¡¨ç¤ºæ•ˆæœè¶Šå¥½\",\n        x = NULL,\n        y = \"P-score\"\n    ) +\n    theme_minimal(base_size = 12)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "ç½‘çŠ¶ Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1041-network-meta.html#ä¸€è‡´æ€§æ£€éªŒ",
    "href": "1041-network-meta.html#ä¸€è‡´æ€§æ£€éªŒ",
    "title": "ç½‘çŠ¶ Meta åˆ†æ (Network Meta-Analysis) å®Œå…¨æŒ‡å—",
    "section": "5. ä¸€è‡´æ€§æ£€éªŒ",
    "text": "5. ä¸€è‡´æ€§æ£€éªŒ\n\nå…¨å±€ä¸€è‡´æ€§æ£€éªŒ\n\n# æ•´ä½“ä¸€è‡´æ€§æ£€éªŒï¼ˆè®¾è®¡ Ã— å¹²é¢„äº¤äº’ï¼‰\ndecomp &lt;- decomp.design(nma_result)\nprint(decomp)\n\nQ statistics to assess homogeneity / consistency\n\n                    Q df  p-value\nTotal           96.99 18 &lt; 0.0001\nWithin designs  74.46 11 &lt; 0.0001\nBetween designs 22.53  7   0.0021\n\nDesign-specific decomposition of within-designs Q statistic\n\n    Design     Q df  p-value\n plac:metf 42.16  2 &lt; 0.0001\n plac:rosi 21.27  5   0.0007\n plac:benf  4.38  1   0.0363\n plac:migl  6.45  2   0.0398\n metf:rosi  0.19  1   0.6655\n\nBetween-designs Q statistic after detaching of single designs\n(influential designs have p-value markedly different from 0.0021)\n\n Detached design     Q df p-value\n       rosi:sulf  6.77  6  0.3425\n       metf:sulf  7.51  6  0.2760\n       plac:rosi 16.29  6  0.0123\n       metf:piog 17.13  6  0.0088\n       plac:piog 17.25  6  0.0084\n       plac:metf 22.07  6  0.0012\n       plac:acar 22.44  6  0.0010\n       piog:rosi 22.48  6  0.0010\n       acar:sulf 22.52  6  0.0010\n       metf:rosi 22.52  6  0.0010\n  plac:acar:metf 22.38  5  0.0004\n\nQ statistic to assess consistency under the assumption of\na full design-by-treatment interaction random effects model\n\n                   Q df p-value tau.within tau2.within\nBetween designs 2.19  7  0.9483     0.3797      0.1442\n\n\nç»“æœè§£è¯»ï¼š - Between-designs å¼‚è´¨æ€§ï¼šä¸åŒç ”ç©¶è®¾è®¡ä¹‹é—´çš„å·®å¼‚ - p å€¼æ˜¾è‘—è¡¨ç¤ºå­˜åœ¨ä¸ä¸€è‡´æ€§\n\n\nå±€éƒ¨ä¸ä¸€è‡´æ€§ï¼šèŠ‚ç‚¹åˆ†å‰²æ³•\n\n# èŠ‚ç‚¹åˆ†å‰²æ¯”è¾ƒç›´æ¥å’Œé—´æ¥è¯æ®\nnetsplit_result &lt;- netsplit(nma_result)\n\n# æŸ¥çœ‹ç»“æœ\nprint(netsplit_result)\n\nSeparate indirect from direct evidence (SIDE) using back-calculation method\n\nRandom effects model: \n\n comparison k prop     nma  direct  indir.    Diff     z p-value\n  acar:metf 1 0.28  0.2850  0.2000  0.3182 -0.1182 -0.21  0.8368\n  acar:plac 2 0.65 -0.8418 -0.8567 -0.8138 -0.0429 -0.08  0.9338\n  acar:sulf 1 0.53 -0.4252 -0.4000 -0.4538  0.0538  0.10  0.9194\n  metf:piog 1 0.44  0.0023 -0.1600  0.1293 -0.2893 -0.64  0.5245\n  metf:plac 4 0.56 -1.1268 -1.1810 -1.0576 -0.1234 -0.40  0.6912\n  metf:rosi 2 0.34  0.1067  0.0710  0.1250 -0.0540 -0.15  0.8771\n  metf:sulf 1 0.45 -0.7102 -0.3700 -0.9896  0.6196  1.31  0.1900\n  piog:plac 1 0.39 -1.1291 -1.3000 -1.0214 -0.2786 -0.62  0.5368\n  piog:rosi 1 0.35  0.1044  0.1000  0.1067 -0.0067 -0.01  0.9885\n  rosi:plac 6 0.76 -1.2335 -1.1797 -1.4004  0.2206  0.74  0.4587\n  rosi:sulf 1 0.43 -0.8169 -1.2000 -0.5222 -0.6778 -1.42  0.1565\n\nLegend:\n comparison - Treatment comparison\n k          - Number of studies providing direct evidence\n prop       - Direct evidence proportion\n nma        - Estimated treatment effect (MD) in network meta-analysis\n direct     - Estimated treatment effect (MD) derived from direct evidence\n indir.     - Estimated treatment effect (MD) derived from indirect evidence\n Diff       - Difference between direct and indirect treatment estimates\n z          - z-value of test for disagreement (direct versus indirect)\n p-value    - p-value of test for disagreement (direct versus indirect)\n\n# å¯è§†åŒ–\nforest(netsplit_result)\n\n\n\n\n\n\n\n\n\n\nå‡€çƒ­å›¾ (Net Heat Plot)\n\n# çƒ­å›¾å±•ç¤ºä¸ä¸€è‡´æ€§\nnetheat(nma_result, random = TRUE)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "ç½‘çŠ¶ Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1041-network-meta.html#äºšç»„ä¸æ•æ„Ÿæ€§åˆ†æ",
    "href": "1041-network-meta.html#äºšç»„ä¸æ•æ„Ÿæ€§åˆ†æ",
    "title": "ç½‘çŠ¶ Meta åˆ†æ (Network Meta-Analysis) å®Œå…¨æŒ‡å—",
    "section": "6. äºšç»„ä¸æ•æ„Ÿæ€§åˆ†æ",
    "text": "6. äºšç»„ä¸æ•æ„Ÿæ€§åˆ†æ\n\näºšç»„åˆ†æ\n\n# æŒ‰ç ”ç©¶ç‰¹å¾åˆ†å±‚çš„äºšç»„åˆ†æ\n# éœ€è¦åœ¨æ•°æ®ä¸­æ·»åŠ äºšç»„å˜é‡\n\nnma_subgroup &lt;- netmeta(\n    TE, seTE, treat1, treat2, studlab,\n    data = subset(Senn2013, year &gt;= 2000), # åªç”¨ 2000 å¹´åçš„ç ”ç©¶\n    sm = \"MD\",\n    reference.group = \"plac\",\n    random = TRUE\n)\n\n\n\næ•æ„Ÿæ€§åˆ†æï¼šæ’é™¤é«˜é£é™©ç ”ç©¶\n\n# æ’é™¤æŸäº›ç ”ç©¶çš„æ•æ„Ÿæ€§åˆ†æ\nnma_sensitivity &lt;- netmeta(\n    TE, seTE, treat1, treat2, studlab,\n    data = subset(Senn2013, !studlab %in% c(\"Study1\", \"Study2\")),\n    sm = \"MD\",\n    reference.group = \"plac\",\n    random = TRUE\n)\n\n# æ¯”è¾ƒæ’åºå˜åŒ–\ncompare_rankings &lt;- data.frame(\n    Original = netrank(nma_result)$Pscore.random,\n    Sensitivity = netrank(nma_sensitivity)$Pscore.random\n)\n\n\n\nç•™ä¸€æ³•æ•æ„Ÿæ€§åˆ†æ\n\n# ç•™ä¸€æ³•åˆ†æ\nloo_result &lt;- nma_result # éœ€è¦æ‰‹åŠ¨å¾ªç¯å®ç°\n\n# æˆ–ä½¿ç”¨è´¡çŒ®çŸ©é˜µ\n# netcontrib(nma_result)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "ç½‘çŠ¶ Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1041-network-meta.html#å‘è¡¨åå€šè¯„ä¼°",
    "href": "1041-network-meta.html#å‘è¡¨åå€šè¯„ä¼°",
    "title": "ç½‘çŠ¶ Meta åˆ†æ (Network Meta-Analysis) å®Œå…¨æŒ‡å—",
    "section": "7. å‘è¡¨åå€šè¯„ä¼°",
    "text": "7. å‘è¡¨åå€šè¯„ä¼°\n\næ¯”è¾ƒè°ƒæ•´æ¼æ–—å›¾\n\n# æ¼æ–—å›¾\nfunnel(nma_result,\n    order = nma_result$trts,\n    pch = 16,\n    col = \"#4e79a7\",\n    linreg = TRUE\n)\n\n\n\n\n\n\n\n\n\n\nEgger æ£€éªŒ\n\n# metabias éœ€è¦æˆå¯¹æ•°æ®\n# å¯ä»¥ä½¿ç”¨ netmeta çš„æ¼æ–—å›¾è¿›è¡Œè§†è§‰è¯„ä¼°",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "ç½‘çŠ¶ Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1041-network-meta.html#å®Œæ•´æ¡ˆä¾‹åˆ†æ",
    "href": "1041-network-meta.html#å®Œæ•´æ¡ˆä¾‹åˆ†æ",
    "title": "ç½‘çŠ¶ Meta åˆ†æ (Network Meta-Analysis) å®Œå…¨æŒ‡å—",
    "section": "8. å®Œæ•´æ¡ˆä¾‹åˆ†æ",
    "text": "8. å®Œæ•´æ¡ˆä¾‹åˆ†æ\n\næ•°æ®å‡†å¤‡\n\n# ä½¿ç”¨å†…ç½®æŠ‘éƒç—‡æ²»ç–—æ•°æ®\ndata(\"Linde2016\")\nhead(Linde2016)\n\n   id    author year           treat1             treat2\n1   1 Lecrubier 1997             SNRI            Placebo\n2   1 Lecrubier 1997              TCA            Placebo\n3   1 Lecrubier 1997              TCA               SNRI\n40  2      Smit 2006 Face-to-face CBT                 UC\n62  4   Blashki 1971              TCA            Placebo\n72  5      Bedi 2000         Ind drug Other face-to-face\n                     treat1.long                               treat2.long\n1                           SNRI                                   Placebo\n2                            TCA                                   Placebo\n3                            TCA                                      SNRI\n40              Face-to-face CBT                                        UC\n62                           TCA                                   Placebo\n72 Individualized antidepressant Other face-to-face psychosocial therapies\n        lnOR   selnOR resp1 n1 resp2 n2\n1   0.664976 0.358845    60 78    48 76\n2   0.094727 0.339731    49 75    48 76\n3  -0.570249 0.362066    49 75    60 78\n40  0.466237 0.411963    16 44    19 72\n62  0.916291 0.555278    20 35     8 23\n72  0.283880 0.411890    20 51    17 52\n\n\n\n\nè¿è¡Œåˆ†æ\n\n# å®Œæ•´çš„ NMA æµç¨‹\nnma_depression &lt;- netmeta(\n    lnOR, # log Odds Ratio\n    selnOR, # æ ‡å‡†è¯¯\n    treat1.long, treat2.long, # å¹²é¢„åç§°\n    id, # ç ”ç©¶ ID\n    data = Linde2016,\n    sm = \"OR\", # Odds Ratio\n    reference.group = \"Placebo\",\n    common = FALSE,\n    random = TRUE\n)\n\n\n\nç»“æœæ±‡æ€»\n\n# 1. ç½‘ç»œå›¾\nnetgraph(nma_depression,\n    plastic = TRUE,\n    thickness = \"number.of.studies\",\n    cex.points = 3\n)\ntitle(\"æŠ‘éƒç—‡æ²»ç–—ç½‘ç»œå›¾\")\n\n\n\n\n\n\n\n# 2. æ£®æ—å›¾\nforest(nma_depression,\n    reference.group = \"Placebo\",\n    sortvar = TE,\n    digits = 2\n)\n\n\n\n\n\n\n\n# 3. æ’åº\nrank_depression &lt;- netrank(nma_depression, small.values = \"bad\")\nprint(rank_depression)\n\n                                                P-score\nFace-to-face CBT + SSRI                          0.9983\nIndividualized antidepressant                    0.7623\nRemote therapist-lead CBT                        0.7424\nHypericum                                        0.7164\nFace-to-face CBT                                 0.7071\nSNRI                                             0.6719\nGuided self-help CBT                             0.6455\nOther face-to-face psychosocial therapies        0.6344\nLow-dose SARI                                    0.6067\nFace-to-face interpersonal psychotherapy + SSRI  0.5571\nNo/minimal contact CBT                           0.5518\nTCA                                              0.5481\nSSRI                                             0.5198\nFace-to-face psychodynamic therapy               0.4529\nFace-to-face PST + SSRI                          0.4465\nNRI                                              0.3704\nFace-to-face PST                                 0.3211\nNaSSA                                            0.2158\nUC                                               0.1728\nFace-to-face interpersonal psychotherapy         0.1475\nrMAO-A                                           0.1367\nPlacebo                                          0.0744\n\n\n\n\nä¸€è‡´æ€§æ£€éªŒ\n\n# è®¾è®¡åˆ†è§£\ndecomp_depression &lt;- decomp.design(nma_depression)\n\n# èŠ‚ç‚¹åˆ†å‰²\nsplit_depression &lt;- netsplit(nma_depression)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "ç½‘çŠ¶ Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1041-network-meta.html#æŠ¥å‘Šä¸å›¾è¡¨å¯¼å‡º",
    "href": "1041-network-meta.html#æŠ¥å‘Šä¸å›¾è¡¨å¯¼å‡º",
    "title": "ç½‘çŠ¶ Meta åˆ†æ (Network Meta-Analysis) å®Œå…¨æŒ‡å—",
    "section": "9. æŠ¥å‘Šä¸å›¾è¡¨å¯¼å‡º",
    "text": "9. æŠ¥å‘Šä¸å›¾è¡¨å¯¼å‡º\n\nç»“æœè¡¨æ ¼\n\n# ç”Ÿæˆå¯å‘è¡¨çš„ç»“æœè¡¨æ ¼\nresults_table &lt;- data.frame(\n    Treatment = names(netrank(nma_result)$Pscore.random),\n    `P-score` = round(netrank(nma_result)$Pscore.random, 3),\n    `Rank` = rank(-netrank(nma_result)$Pscore.random)\n) %&gt;%\n    arrange(Rank)\n\nknitr::kable(results_table,\n    caption = \"å¹²é¢„æªæ–½æ•ˆæœæ’åº\",\n    row.names = FALSE\n)\n\n\nå¹²é¢„æªæ–½æ•ˆæœæ’åº\n\n\nTreatment\nP.score\nRank\n\n\n\n\nrosi\n0.893\n1\n\n\nmetf\n0.782\n2\n\n\npiog\n0.775\n3\n\n\nmigl\n0.614\n4\n\n\nacar\n0.520\n5\n\n\nbenf\n0.436\n6\n\n\nvild\n0.423\n7\n\n\nsita\n0.333\n8\n\n\nsulf\n0.210\n9\n\n\nplac\n0.014\n10\n\n\n\n\n\n\n\nå¯¼å‡ºé«˜è´¨é‡å›¾è¡¨\n\n# å¯¼å‡ºç½‘ç»œå›¾\npdf(\"network_graph.pdf\", width = 8, height = 8)\nnetgraph(nma_result, plastic = TRUE, thickness = \"number.of.studies\")\ndev.off()\n\n# å¯¼å‡ºæ£®æ—å›¾\npdf(\"forest_plot.pdf\", width = 10, height = 12)\nforest(nma_result, reference.group = \"plac\")\ndev.off()",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "ç½‘çŠ¶ Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1041-network-meta.html#é«˜çº§ä¸»é¢˜",
    "href": "1041-network-meta.html#é«˜çº§ä¸»é¢˜",
    "title": "ç½‘çŠ¶ Meta åˆ†æ (Network Meta-Analysis) å®Œå…¨æŒ‡å—",
    "section": "10. é«˜çº§ä¸»é¢˜",
    "text": "10. é«˜çº§ä¸»é¢˜\n\nè´å¶æ–¯ NMA (gemtc)\n\n# è´å¶æ–¯æ–¹æ³•ä½¿ç”¨ gemtc åŒ…\n# install.packages(\"gemtc\")\nlibrary(gemtc)\n\n# éœ€è¦ JAGS è½¯ä»¶\n# æä¾›æ›´çµæ´»çš„å»ºæ¨¡å’Œå®Œæ•´çš„åéªŒåˆ†å¸ƒ\n\n\n\nå¤šæˆåˆ†å¹²é¢„ NMA\n\n# å¯¹äºç»„åˆå¹²é¢„ï¼ˆå¦‚ A+B vs A vs Bï¼‰\n# ä½¿ç”¨ netmeta çš„å¤šæˆåˆ†åˆ†æåŠŸèƒ½\n# nma_additive &lt;- netmeta(..., , additive = TRUE)\n\n\n\nè´¨é‡è¯„ä¼° CINeMA\n\n# ä½¿ç”¨ CINeMA æ¡†æ¶è¯„ä¼° NMA è¯æ®è´¨é‡\n# è€ƒè™‘ï¼šç ”ç©¶å†…åå€šã€æŠ¥å‘Šåå€šã€é—´æ¥æ€§ã€ä¸ç²¾ç¡®æ€§ã€å¼‚è´¨æ€§ã€ä¸ä¸€è‡´æ€§\n\nquality_table &lt;- data.frame(\n    Domain = c(\n        \"Within-study bias\", \"Reporting bias\", \"Indirectness\",\n        \"Imprecision\", \"Heterogeneity\", \"Incoherence\"\n    ),\n    Assessment = c(\n        \"Some concerns\", \"Low\", \"Low\",\n        \"Some concerns\", \"Low\", \"Low\"\n    ),\n    Notes = c(\n        \"éƒ¨åˆ†ç ”ç©¶è´¨é‡ä¸­ç­‰\", \"æ¼æ–—å›¾å¯¹ç§°\",\n        \"äººç¾¤å’Œå¹²é¢„ç›¸ä¼¼\", \"æ ·æœ¬é‡æœ‰é™\",\n        \"IÂ²ä¸­ç­‰\", \"ä¸€è‡´æ€§æ£€éªŒä¸æ˜¾è‘—\"\n    )\n)\n\nknitr::kable(quality_table, caption = \"CINeMA è¯æ®è´¨é‡è¯„ä¼°\")\n\n\nCINeMA è¯æ®è´¨é‡è¯„ä¼°\n\n\nDomain\nAssessment\nNotes\n\n\n\n\nWithin-study bias\nSome concerns\néƒ¨åˆ†ç ”ç©¶è´¨é‡ä¸­ç­‰\n\n\nReporting bias\nLow\næ¼æ–—å›¾å¯¹ç§°\n\n\nIndirectness\nLow\näººç¾¤å’Œå¹²é¢„ç›¸ä¼¼\n\n\nImprecision\nSome concerns\næ ·æœ¬é‡æœ‰é™\n\n\nHeterogeneity\nLow\nIÂ²ä¸­ç­‰\n\n\nIncoherence\nLow\nä¸€è‡´æ€§æ£€éªŒä¸æ˜¾è‘—",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "ç½‘çŠ¶ Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1041-network-meta.html#æ³¨æ„äº‹é¡¹ä¸å»ºè®®",
    "href": "1041-network-meta.html#æ³¨æ„äº‹é¡¹ä¸å»ºè®®",
    "title": "ç½‘çŠ¶ Meta åˆ†æ (Network Meta-Analysis) å®Œå…¨æŒ‡å—",
    "section": "æ³¨æ„äº‹é¡¹ä¸å»ºè®®",
    "text": "æ³¨æ„äº‹é¡¹ä¸å»ºè®®\n\n[!WARNING] NMA çš„å…³é”®å‡è®¾æ£€éªŒï¼š 1. ä¸€è‡´æ€§å‡è®¾å¿…é¡»é€šè¿‡æ£€éªŒéªŒè¯ 2. ç½‘ç»œå¿…é¡»æ˜¯è¿é€šçš„ï¼ˆæ‰€æœ‰å¹²é¢„éœ€ç›¸è¿ï¼‰ 3. ç ”ç©¶é—´å¼‚è´¨æ€§éœ€è¦æ§åˆ¶åœ¨åˆç†èŒƒå›´\n\n\n[!TIP] å®è·µå»ºè®®ï¼š - å…ˆç»˜åˆ¶ç½‘ç»œå›¾ï¼Œäº†è§£è¯æ®ç»“æ„ - ä½¿ç”¨éšæœºæ•ˆåº”æ¨¡å‹å¤„ç†å¼‚è´¨æ€§ - åŒæ—¶æŠ¥å‘Š P-score å’Œ 95% CI - è¿›è¡Œæ•æ„Ÿæ€§åˆ†æéªŒè¯ç»“æœç¨³å¥æ€§",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "ç½‘çŠ¶ Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1041-network-meta.html#å‚è€ƒæ–‡çŒ®",
    "href": "1041-network-meta.html#å‚è€ƒæ–‡çŒ®",
    "title": "ç½‘çŠ¶ Meta åˆ†æ (Network Meta-Analysis) å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒæ–‡çŒ®",
    "text": "å‚è€ƒæ–‡çŒ®\n\nRÃ¼cker, G., & Schwarzer, G. (2015). Ranking treatments in frequentist network meta-analysis works without resampling methods. BMC Medical Research Methodology, 15(1), 58.\nSalanti, G. (2012). Indirect and mixed-treatment comparison, network, or multiple-treatments meta-analysis: many names, many benefits, many concerns for the next generation evidence synthesis tool. Research Synthesis Methods, 3(2), 80-97.\nChaimani, A., et al.Â (2013). Graphical tools for network meta-analysis in STATA. PLoS ONE, 8(10), e76654.\nNikolakopoulou, A., et al.Â (2020). CINeMA: An approach for assessing confidence in the results of a network meta-analysis. PLoS Medicine, 17(4), e1003082.",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“š ç»¼è¿°æ–¹æ³•",
      "ç½‘çŠ¶ Meta åˆ†æ"
    ]
  },
  {
    "objectID": "1043-broom.html",
    "href": "1043-broom.html",
    "title": "broom æ¨¡å‹ç»“æœæ•´ç†æŒ‡å—",
    "section": "",
    "text": "broom åŒ…å°† R ä¸­å„ç§ç»Ÿè®¡æ¨¡å‹çš„è¾“å‡ºè½¬æ¢ä¸ºæ•´æ´ï¼ˆtidyï¼‰çš„æ•°æ®æ¡†æ ¼å¼ï¼Œä¾¿äºåç»­åˆ†æã€å¯è§†åŒ–å’ŒæŠ¥å‘Šã€‚å®ƒè§£å†³äº† R ä¸­ä¸åŒæ¨¡å‹è¾“å‡ºæ ¼å¼ä¸ç»Ÿä¸€çš„é—®é¢˜ã€‚\n\n\nä¼ ç»Ÿ R æ¨¡å‹è¾“å‡ºçš„é—®é¢˜ï¼š\n\n# ä¼ ç»Ÿçº¿æ€§å›å½’è¾“å‡º\nfit &lt;- lm(mpg ~ wt + hp, data = mtcars)\nsummary(fit) # è¾“å‡ºæ ¼å¼å¤æ‚ï¼Œéš¾ä»¥ç¼–ç¨‹å¤„ç†\n\n\nCall:\nlm(formula = mpg ~ wt + hp, data = mtcars)\n\nResiduals:\n   Min     1Q Median     3Q    Max \n-3.941 -1.600 -0.182  1.050  5.854 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 37.22727    1.59879  23.285  &lt; 2e-16 ***\nwt          -3.87783    0.63273  -6.129 1.12e-06 ***\nhp          -0.03177    0.00903  -3.519  0.00145 ** \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 2.593 on 29 degrees of freedom\nMultiple R-squared:  0.8268,    Adjusted R-squared:  0.8148 \nF-statistic: 69.21 on 2 and 29 DF,  p-value: 9.109e-12\n\n\nbroom çš„è§£å†³æ–¹æ¡ˆï¼šå°†æ··ä¹±çš„è¾“å‡ºè½¬ä¸ºæ ‡å‡†æ•°æ®æ¡†ã€‚\n\n\n\n\n\n\nå‡½æ•°\nä½œç”¨\nè¾“å‡ºå†…å®¹\n\n\n\n\ntidy()\næ¨¡å‹ç³»æ•°\nç³»æ•°ã€æ ‡å‡†è¯¯ã€på€¼ç­‰\n\n\nglance()\næ¨¡å‹æ‘˜è¦\nRÂ²ã€AICã€BICç­‰\n\n\naugment()\nè§‚æµ‹çº§ä¿¡æ¯\né¢„æµ‹å€¼ã€æ®‹å·®ç­‰",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "broom - æ¨¡å‹æ•´ç†"
    ]
  },
  {
    "objectID": "1043-broom.html#broom-ç®€ä»‹",
    "href": "1043-broom.html#broom-ç®€ä»‹",
    "title": "broom æ¨¡å‹ç»“æœæ•´ç†æŒ‡å—",
    "section": "",
    "text": "broom åŒ…å°† R ä¸­å„ç§ç»Ÿè®¡æ¨¡å‹çš„è¾“å‡ºè½¬æ¢ä¸ºæ•´æ´ï¼ˆtidyï¼‰çš„æ•°æ®æ¡†æ ¼å¼ï¼Œä¾¿äºåç»­åˆ†æã€å¯è§†åŒ–å’ŒæŠ¥å‘Šã€‚å®ƒè§£å†³äº† R ä¸­ä¸åŒæ¨¡å‹è¾“å‡ºæ ¼å¼ä¸ç»Ÿä¸€çš„é—®é¢˜ã€‚\n\n\nä¼ ç»Ÿ R æ¨¡å‹è¾“å‡ºçš„é—®é¢˜ï¼š\n\n# ä¼ ç»Ÿçº¿æ€§å›å½’è¾“å‡º\nfit &lt;- lm(mpg ~ wt + hp, data = mtcars)\nsummary(fit) # è¾“å‡ºæ ¼å¼å¤æ‚ï¼Œéš¾ä»¥ç¼–ç¨‹å¤„ç†\n\n\nCall:\nlm(formula = mpg ~ wt + hp, data = mtcars)\n\nResiduals:\n   Min     1Q Median     3Q    Max \n-3.941 -1.600 -0.182  1.050  5.854 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 37.22727    1.59879  23.285  &lt; 2e-16 ***\nwt          -3.87783    0.63273  -6.129 1.12e-06 ***\nhp          -0.03177    0.00903  -3.519  0.00145 ** \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 2.593 on 29 degrees of freedom\nMultiple R-squared:  0.8268,    Adjusted R-squared:  0.8148 \nF-statistic: 69.21 on 2 and 29 DF,  p-value: 9.109e-12\n\n\nbroom çš„è§£å†³æ–¹æ¡ˆï¼šå°†æ··ä¹±çš„è¾“å‡ºè½¬ä¸ºæ ‡å‡†æ•°æ®æ¡†ã€‚\n\n\n\n\n\n\nå‡½æ•°\nä½œç”¨\nè¾“å‡ºå†…å®¹\n\n\n\n\ntidy()\næ¨¡å‹ç³»æ•°\nç³»æ•°ã€æ ‡å‡†è¯¯ã€på€¼ç­‰\n\n\nglance()\næ¨¡å‹æ‘˜è¦\nRÂ²ã€AICã€BICç­‰\n\n\naugment()\nè§‚æµ‹çº§ä¿¡æ¯\né¢„æµ‹å€¼ã€æ®‹å·®ç­‰",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "broom - æ¨¡å‹æ•´ç†"
    ]
  },
  {
    "objectID": "1043-broom.html#å®‰è£…ä¸åŠ è½½",
    "href": "1043-broom.html#å®‰è£…ä¸åŠ è½½",
    "title": "broom æ¨¡å‹ç»“æœæ•´ç†æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\n# å®‰è£…\ninstall.packages(\"broom\")\n\n# æ‰©å±•åŒ…ï¼ˆæ”¯æŒæ›´å¤šæ¨¡å‹ï¼‰\ninstall.packages(\"broom.mixed\") # æ··åˆæ•ˆåº”æ¨¡å‹\n\n\nlibrary(broom)\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(ggplot2)\nlibrary(purrr)\n\n# è®¾ç½®ä¸»é¢˜\ntheme_set(theme_bw(base_size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "broom - æ¨¡å‹æ•´ç†"
    ]
  },
  {
    "objectID": "1043-broom.html#ç¬¬ä¸€éƒ¨åˆ†tidy---æå–æ¨¡å‹ç³»æ•°",
    "href": "1043-broom.html#ç¬¬ä¸€éƒ¨åˆ†tidy---æå–æ¨¡å‹ç³»æ•°",
    "title": "broom æ¨¡å‹ç»“æœæ•´ç†æŒ‡å—",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼štidy() - æå–æ¨¡å‹ç³»æ•°",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼štidy() - æå–æ¨¡å‹ç³»æ•°\n\nçº¿æ€§å›å½’\n\n# æ‹Ÿåˆçº¿æ€§æ¨¡å‹\nlm_fit &lt;- lm(mpg ~ wt + hp + cyl, data = mtcars)\n\n# ä¼ ç»Ÿè¾“å‡º\ncoef(summary(lm_fit))\n\n              Estimate Std. Error   t value     Pr(&gt;|t|)\n(Intercept) 38.7517874 1.78686403 21.687038 4.799399e-19\nwt          -3.1669731 0.74057588 -4.276365 1.994765e-04\nhp          -0.0180381 0.01187625 -1.518838 1.400152e-01\ncyl         -0.9416168 0.55091638 -1.709183 9.848010e-02\n\n\n\n# ä½¿ç”¨ tidy() æ•´ç†\ntidy(lm_fit)\n\n# A tibble: 4 Ã— 5\n  term        estimate std.error statistic  p.value\n  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;\n1 (Intercept)  38.8       1.79       21.7  4.80e-19\n2 wt           -3.17      0.741      -4.28 1.99e- 4\n3 hp           -0.0180    0.0119     -1.52 1.40e- 1\n4 cyl          -0.942     0.551      -1.71 9.85e- 2\n\n\n\n# æ·»åŠ ç½®ä¿¡åŒºé—´\ntidy(lm_fit, conf.int = TRUE, conf.level = 0.95)\n\n# A tibble: 4 Ã— 7\n  term        estimate std.error statistic  p.value conf.low conf.high\n  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n1 (Intercept)  38.8       1.79       21.7  4.80e-19  35.1     42.4    \n2 wt           -3.17      0.741      -4.28 1.99e- 4  -4.68    -1.65   \n3 hp           -0.0180    0.0119     -1.52 1.40e- 1  -0.0424   0.00629\n4 cyl          -0.942     0.551      -1.71 9.85e- 2  -2.07     0.187  \n\n\n\n\nLogistic å›å½’\n\n# æ‹Ÿåˆlogisticå›å½’\nglm_fit &lt;- glm(am ~ wt + hp, data = mtcars, family = binomial)\n\n# æ•´ç†è¾“å‡º\ntidy(glm_fit)\n\n# A tibble: 3 Ã— 5\n  term        estimate std.error statistic p.value\n  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;\n1 (Intercept)  18.9       7.44        2.53 0.0113 \n2 wt           -8.08      3.07       -2.63 0.00843\n3 hp            0.0363    0.0177      2.04 0.0409 \n\n\n\n# è¾“å‡º OR å€¼ï¼ˆæŒ‡æ•°åŒ–ç³»æ•°ï¼‰\ntidy(glm_fit, exponentiate = TRUE, conf.int = TRUE)\n\n# A tibble: 3 Ã— 7\n  term        estimate std.error statistic p.value conf.low conf.high\n  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n1 (Intercept)  1.56e+8    7.44        2.53 0.0113   4.34e+3  4.08e+17\n2 wt           3.09e-4    3.07       -2.63 0.00843  3.36e-8  2.30e- 2\n3 hp           1.04e+0    0.0177      2.04 0.0409   1.01e+0  1.09e+ 0\n\n\n\n\nç”Ÿå­˜åˆ†æ\n\nlibrary(survival)\n\n# æ‹Ÿåˆ Cox æ¨¡å‹\ncox_fit &lt;- coxph(Surv(time, status) ~ age + sex, data = lung)\n\n# æ•´ç†\ntidy(cox_fit, exponentiate = TRUE, conf.int = TRUE)\n\n# A tibble: 2 Ã— 7\n  term  estimate std.error statistic p.value conf.low conf.high\n  &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n1 age      1.02    0.00922      1.85 0.0646     0.999     1.04 \n2 sex      0.599   0.167       -3.06 0.00218    0.431     0.831\n\n\n\n\nt æ£€éªŒ\n\n# t æ£€éªŒ\nt_result &lt;- t.test(mpg ~ am, data = mtcars)\n\n# æ•´ç†\ntidy(t_result)\n\n# A tibble: 1 Ã— 10\n  estimate estimate1 estimate2 statistic p.value parameter conf.low conf.high\n     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n1    -7.24      17.1      24.4     -3.77 0.00137      18.3    -11.3     -3.21\n# â„¹ 2 more variables: method &lt;chr&gt;, alternative &lt;chr&gt;\n\n\n\n\nç›¸å…³æ£€éªŒ\n\n# ç›¸å…³æ£€éªŒ\ncor_result &lt;- cor.test(mtcars$mpg, mtcars$wt)\n\n# æ•´ç†\ntidy(cor_result)\n\n# A tibble: 1 Ã— 8\n  estimate statistic  p.value parameter conf.low conf.high method    alternative\n     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;int&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;      \n1   -0.868     -9.56 1.29e-10        30   -0.934    -0.744 Pearson'â€¦ two.sided",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "broom - æ¨¡å‹æ•´ç†"
    ]
  },
  {
    "objectID": "1043-broom.html#ç¬¬äºŒéƒ¨åˆ†glance---æ¨¡å‹æ‘˜è¦ç»Ÿè®¡",
    "href": "1043-broom.html#ç¬¬äºŒéƒ¨åˆ†glance---æ¨¡å‹æ‘˜è¦ç»Ÿè®¡",
    "title": "broom æ¨¡å‹ç»“æœæ•´ç†æŒ‡å—",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šglance() - æ¨¡å‹æ‘˜è¦ç»Ÿè®¡",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šglance() - æ¨¡å‹æ‘˜è¦ç»Ÿè®¡\n\nè·å–æ¨¡å‹æ‹Ÿåˆä¼˜åº¦\n\n# çº¿æ€§æ¨¡å‹æ‘˜è¦\nglance(lm_fit)\n\n# A tibble: 1 Ã— 12\n  r.squared adj.r.squared sigma statistic  p.value    df logLik   AIC   BIC\n      &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1     0.843         0.826  2.51      50.2 2.18e-11     3  -72.7  155.  163.\n# â„¹ 3 more variables: deviance &lt;dbl&gt;, df.residual &lt;int&gt;, nobs &lt;int&gt;\n\n\n\n\nå¸¸è§è¾“å‡ºæŒ‡æ ‡\n\n\n\næŒ‡æ ‡\nå«ä¹‰\n\n\n\n\nr.squared\nRÂ² å†³å®šç³»æ•°\n\n\nadj.r.squared\nè°ƒæ•´ RÂ²\n\n\nsigma\næ®‹å·®æ ‡å‡†è¯¯\n\n\nstatistic\nF ç»Ÿè®¡é‡\n\n\np.value\nF æ£€éªŒ p å€¼\n\n\nAIC\nèµ¤æ± ä¿¡æ¯å‡†åˆ™\n\n\nBIC\nè´å¶æ–¯ä¿¡æ¯å‡†åˆ™\n\n\nnobs\nè§‚æµ‹æ•°\n\n\n\n\n\næ¯”è¾ƒå¤šä¸ªæ¨¡å‹\n\n# å®šä¹‰å¤šä¸ªæ¨¡å‹\nmodel1 &lt;- lm(mpg ~ wt, data = mtcars)\nmodel2 &lt;- lm(mpg ~ wt + hp, data = mtcars)\nmodel3 &lt;- lm(mpg ~ wt + hp + cyl, data = mtcars)\n\n# æ¯”è¾ƒæ‹Ÿåˆä¼˜åº¦\nmodels &lt;- list(\n    \"Model 1\" = model1,\n    \"Model 2\" = model2,\n    \"Model 3\" = model3\n)\n\n# æ±‡æ€»æ‰€æœ‰æ¨¡å‹\nmodel_comparison &lt;- map_df(models, glance, .id = \"model\")\nmodel_comparison %&gt;%\n    select(model, r.squared, adj.r.squared, AIC, BIC)\n\n# A tibble: 3 Ã— 5\n  model   r.squared adj.r.squared   AIC   BIC\n  &lt;chr&gt;       &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 Model 1     0.753         0.745  166.  170.\n2 Model 2     0.827         0.815  157.  163.\n3 Model 3     0.843         0.826  155.  163.\n\n\n\n# å¯è§†åŒ–æ¯”è¾ƒ\nmodel_comparison %&gt;%\n    tidyr::pivot_longer(cols = c(AIC, BIC), names_to = \"metric\", values_to = \"value\") %&gt;%\n    ggplot(aes(x = model, y = value, fill = metric)) +\n    geom_col(position = \"dodge\", alpha = 0.8) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\")) +\n    labs(title = \"æ¨¡å‹æ¯”è¾ƒï¼šAIC ä¸ BIC\", x = \"æ¨¡å‹\", y = \"å€¼\") +\n    theme(plot.title = element_text(hjust = 0.5, face = \"bold\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "broom - æ¨¡å‹æ•´ç†"
    ]
  },
  {
    "objectID": "1043-broom.html#ç¬¬ä¸‰éƒ¨åˆ†augment---è§‚æµ‹çº§æ•°æ®",
    "href": "1043-broom.html#ç¬¬ä¸‰éƒ¨åˆ†augment---è§‚æµ‹çº§æ•°æ®",
    "title": "broom æ¨¡å‹ç»“æœæ•´ç†æŒ‡å—",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šaugment() - è§‚æµ‹çº§æ•°æ®",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šaugment() - è§‚æµ‹çº§æ•°æ®\n\næå–é¢„æµ‹å€¼å’Œæ®‹å·®\n\n# æ·»åŠ é¢„æµ‹å€¼å’Œæ®‹å·®\naugmented &lt;- augment(lm_fit)\nhead(augmented)\n\n# A tibble: 6 Ã— 11\n  .rownames           mpg    wt    hp   cyl .fitted .resid   .hat .sigma .cooksd\n  &lt;chr&gt;             &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;\n1 Mazda RX4          21    2.62   110     6    22.8 -1.82  0.0750   2.53 1.15e-2\n2 Mazda RX4 Wag      21    2.88   110     6    22.0 -1.01  0.0582   2.55 2.67e-3\n3 Datsun 710         22.8  2.32    93     4    26.0 -3.16  0.0856   2.48 4.05e-2\n4 Hornet 4 Drive     21.4  3.22   110     6    20.9  0.464 0.0533   2.56 5.08e-4\n5 Hornet Sportabout  18.7  3.44   175     8    17.2  1.53  0.110    2.54 1.29e-2\n6 Valiant            18.1  3.46   105     6    20.3 -2.15  0.0699   2.52 1.48e-2\n# â„¹ 1 more variable: .std.resid &lt;dbl&gt;\n\n\n\n\naugment è¾“å‡ºçš„å¸¸è§åˆ—\n\n\n\nåˆ—å\nå«ä¹‰\n\n\n\n\n.fitted\né¢„æµ‹å€¼\n\n\n.resid\næ®‹å·®\n\n\n.std.resid\næ ‡å‡†åŒ–æ®‹å·®\n\n\n.hat\næ æ†å€¼\n\n\n.cooksd\nCookâ€™s è·ç¦»\n\n\n.sigma\nåˆ é™¤è¯¥è§‚æµ‹åçš„æ®‹å·®æ ‡å‡†å·®\n\n\n\n\n\næ®‹å·®è¯Šæ–­å¯è§†åŒ–\n\n# æ®‹å·® vs æ‹Ÿåˆå€¼\nggplot(augmented, aes(x = .fitted, y = .resid)) +\n    geom_point(color = \"#4f46e5\", alpha = 0.7) +\n    geom_hline(yintercept = 0, linetype = \"dashed\", color = \"red\") +\n    geom_smooth(se = FALSE, color = \"#10b981\") +\n    labs(title = \"æ®‹å·® vs æ‹Ÿåˆå€¼\", x = \"æ‹Ÿåˆå€¼\", y = \"æ®‹å·®\")\n\n\n\n\n\n\n\n\n\n# QQ å›¾\nggplot(augmented, aes(sample = .std.resid)) +\n    stat_qq(color = \"#4f46e5\") +\n    stat_qq_line(color = \"red\") +\n    labs(title = \"æ ‡å‡†åŒ–æ®‹å·® Q-Q å›¾\", x = \"ç†è®ºåˆ†ä½æ•°\", y = \"æ ·æœ¬åˆ†ä½æ•°\")\n\n\n\n\n\n\n\n\n\n# Cook's è·ç¦»\nggplot(augmented, aes(x = seq_len(nrow(augmented)), y = .cooksd)) +\n    geom_col(fill = \"#4f46e5\", alpha = 0.7) +\n    geom_hline(yintercept = 4 / nrow(augmented), linetype = \"dashed\", color = \"red\") +\n    labs(title = \"Cook's è·ç¦»\", x = \"è§‚æµ‹ç¼–å·\", y = \"Cook's D\")\n\n\n\n\n\n\n\n\n\n\nåœ¨æ–°æ•°æ®ä¸Šé¢„æµ‹\n\n# æ–°æ•°æ®\nnew_data &lt;- data.frame(\n    wt = c(2.5, 3.0, 3.5),\n    hp = c(100, 150, 200),\n    cyl = c(4, 6, 8)\n)\n\n# é¢„æµ‹ï¼ˆå«åŒºé—´ï¼‰\naugment(lm_fit, newdata = new_data, interval = \"confidence\")\n\n# A tibble: 3 Ã— 6\n     wt    hp   cyl .fitted .lower .upper\n  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n1   2.5   100     4    25.3   23.7   26.9\n2   3     150     6    20.9   19.9   21.9\n3   3.5   200     8    16.5   15.0   18.0",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "broom - æ¨¡å‹æ•´ç†"
    ]
  },
  {
    "objectID": "1043-broom.html#ç¬¬å››éƒ¨åˆ†æ‰¹é‡å»ºæ¨¡",
    "href": "1043-broom.html#ç¬¬å››éƒ¨åˆ†æ‰¹é‡å»ºæ¨¡",
    "title": "broom æ¨¡å‹ç»“æœæ•´ç†æŒ‡å—",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šæ‰¹é‡å»ºæ¨¡",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šæ‰¹é‡å»ºæ¨¡\nbroom ä¸ purrr ç»“åˆï¼Œå¯ä»¥é«˜æ•ˆè¿›è¡Œåˆ†ç»„å»ºæ¨¡ã€‚\n\nåˆ†ç»„å›å½’\n\n# æŒ‰æ±½ç¼¸æ•°åˆ†ç»„å»ºæ¨¡\nby_cyl &lt;- mtcars %&gt;%\n    group_by(cyl) %&gt;%\n    nest()\n\nby_cyl\n\n# A tibble: 3 Ã— 2\n# Groups:   cyl [3]\n    cyl data              \n  &lt;dbl&gt; &lt;list&gt;            \n1     6 &lt;tibble [7 Ã— 10]&gt; \n2     4 &lt;tibble [11 Ã— 10]&gt;\n3     8 &lt;tibble [14 Ã— 10]&gt;\n\n\n\n# å¯¹æ¯ç»„æ‹Ÿåˆæ¨¡å‹\nby_cyl &lt;- by_cyl %&gt;%\n    mutate(\n        model = map(data, ~ lm(mpg ~ wt + hp, data = .x)),\n        tidied = map(model, tidy),\n        glanced = map(model, glance),\n        augmented = map(model, augment)\n    )\n\nby_cyl\n\n# A tibble: 3 Ã— 6\n# Groups:   cyl [3]\n    cyl data               model  tidied           glanced           augmented\n  &lt;dbl&gt; &lt;list&gt;             &lt;list&gt; &lt;list&gt;           &lt;list&gt;            &lt;list&gt;   \n1     6 &lt;tibble [7 Ã— 10]&gt;  &lt;lm&gt;   &lt;tibble [3 Ã— 5]&gt; &lt;tibble [1 Ã— 12]&gt; &lt;tibble&gt; \n2     4 &lt;tibble [11 Ã— 10]&gt; &lt;lm&gt;   &lt;tibble [3 Ã— 5]&gt; &lt;tibble [1 Ã— 12]&gt; &lt;tibble&gt; \n3     8 &lt;tibble [14 Ã— 10]&gt; &lt;lm&gt;   &lt;tibble [3 Ã— 5]&gt; &lt;tibble [1 Ã— 12]&gt; &lt;tibble&gt; \n\n\n\n\næå–åˆ†ç»„ç³»æ•°\n\n# å±•å¼€ç³»æ•°\nby_cyl %&gt;%\n    select(cyl, tidied) %&gt;%\n    unnest(tidied)\n\n# A tibble: 9 Ã— 6\n# Groups:   cyl [3]\n    cyl term        estimate std.error statistic   p.value\n  &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;\n1     6 (Intercept)  32.6       5.57        5.84 0.00428  \n2     6 wt           -3.24      1.37       -2.36 0.0776   \n3     6 hp           -0.0222    0.0202     -1.10 0.333    \n4     4 (Intercept)  45.8       4.79        9.58 0.0000117\n5     4 wt           -5.12      1.60       -3.19 0.0128   \n6     4 hp           -0.0905    0.0436     -2.08 0.0715   \n7     8 (Intercept)  26.7       3.66        7.28 0.0000158\n8     8 wt           -2.18      0.721      -3.02 0.0117   \n9     8 hp           -0.0137    0.0107     -1.27 0.229    \n\n\n\n# å¯è§†åŒ–åˆ†ç»„ç³»æ•°\nby_cyl %&gt;%\n    select(cyl, tidied) %&gt;%\n    unnest(tidied) %&gt;%\n    filter(term != \"(Intercept)\") %&gt;%\n    ggplot(aes(x = factor(cyl), y = estimate, fill = term)) +\n    geom_col(position = \"dodge\", alpha = 0.8) +\n    geom_errorbar(\n        aes(ymin = estimate - std.error, ymax = estimate + std.error),\n        position = position_dodge(width = 0.9),\n        width = 0.2\n    ) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\")) +\n    labs(\n        title = \"ä¸åŒæ±½ç¼¸æ•°çš„å›å½’ç³»æ•°\",\n        x = \"æ±½ç¼¸æ•°\",\n        y = \"ç³»æ•°ä¼°è®¡å€¼\"\n    ) +\n    theme(plot.title = element_text(hjust = 0.5, face = \"bold\"))\n\n\n\n\n\n\n\n\n\n\næå–åˆ†ç»„æ‹Ÿåˆä¼˜åº¦\n\nby_cyl %&gt;%\n    select(cyl, glanced) %&gt;%\n    unnest(glanced) %&gt;%\n    select(cyl, r.squared, adj.r.squared, AIC, p.value)\n\n# A tibble: 3 Ã— 5\n# Groups:   cyl [3]\n    cyl r.squared adj.r.squared   AIC p.value\n  &lt;dbl&gt;     &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;\n1     6     0.589         0.383  25.8  0.169 \n2     4     0.681         0.601  58.7  0.0104\n3     8     0.497         0.406  63.4  0.0228",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "broom - æ¨¡å‹æ•´ç†"
    ]
  },
  {
    "objectID": "1043-broom.html#ç¬¬äº”éƒ¨åˆ†æ”¯æŒçš„æ¨¡å‹ç±»å‹",
    "href": "1043-broom.html#ç¬¬äº”éƒ¨åˆ†æ”¯æŒçš„æ¨¡å‹ç±»å‹",
    "title": "broom æ¨¡å‹ç»“æœæ•´ç†æŒ‡å—",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šæ”¯æŒçš„æ¨¡å‹ç±»å‹",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šæ”¯æŒçš„æ¨¡å‹ç±»å‹\nbroom æ”¯æŒ 100+ ç§æ¨¡å‹ç±»å‹ã€‚\n\nç»Ÿè®¡æ¨¡å‹\n\n\n\n\n\nç±»å‹\nå‡½æ•°ç¤ºä¾‹\n\n\n\n\nçº¿æ€§å›å½’\nlm(), aov()\n\n\nå¹¿ä¹‰çº¿æ€§æ¨¡å‹\nglm(), betareg()\n\n\næ··åˆæ•ˆåº”æ¨¡å‹\nlme4::lmer(), nlme::lme()\n\n\nç”Ÿå­˜åˆ†æ\nsurvival::coxph(), survfit()\n\n\næ—¶é—´åºåˆ—\nforecast::Arima()\n\n\nèšç±»\nstats::kmeans(), cluster::pam()\n\n\n\n\n\n\n\næ£€æŸ¥æ˜¯å¦æ”¯æŒ\n\n# æŸ¥çœ‹æ”¯æŒçš„æ–¹æ³•\nmethods(\"tidy\")\nmethods(\"glance\")\nmethods(\"augment\")",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "broom - æ¨¡å‹æ•´ç†"
    ]
  },
  {
    "objectID": "1043-broom.html#ç¬¬å…­éƒ¨åˆ†ä¸-ggplot2-ç»“åˆ",
    "href": "1043-broom.html#ç¬¬å…­éƒ¨åˆ†ä¸-ggplot2-ç»“åˆ",
    "title": "broom æ¨¡å‹ç»“æœæ•´ç†æŒ‡å—",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šä¸ ggplot2 ç»“åˆ",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šä¸ ggplot2 ç»“åˆ\n\nå¯è§†åŒ–å›å½’ç³»æ•°ï¼ˆæ£®æ—å›¾ï¼‰\n\n# æå–ç³»æ•°\ncoef_df &lt;- tidy(lm_fit, conf.int = TRUE) %&gt;%\n    filter(term != \"(Intercept)\")\n\n# æ£®æ—å›¾\nggplot(coef_df, aes(x = estimate, y = term)) +\n    geom_vline(xintercept = 0, linetype = \"dashed\", color = \"gray50\") +\n    geom_point(color = \"#4f46e5\", size = 3) +\n    geom_errorbarh(\n        aes(xmin = conf.low, xmax = conf.high),\n        height = 0.2,\n        color = \"#4f46e5\"\n    ) +\n    labs(\n        title = \"å›å½’ç³»æ•°åŠ95%ç½®ä¿¡åŒºé—´\",\n        x = \"ç³»æ•°ä¼°è®¡å€¼\",\n        y = \"å˜é‡\"\n    ) +\n    theme(plot.title = element_text(hjust = 0.5, face = \"bold\"))\n\n\n\n\n\n\n\n\n\n\nLogistic å›å½’ OR å€¼å¯è§†åŒ–\n\n# OR å€¼\nor_df &lt;- tidy(glm_fit, exponentiate = TRUE, conf.int = TRUE) %&gt;%\n    filter(term != \"(Intercept)\")\n\nggplot(or_df, aes(x = estimate, y = term)) +\n    geom_vline(xintercept = 1, linetype = \"dashed\", color = \"gray50\") +\n    geom_point(color = \"#ef4444\", size = 3) +\n    geom_errorbarh(\n        aes(xmin = conf.low, xmax = conf.high),\n        height = 0.2,\n        color = \"#ef4444\"\n    ) +\n    scale_x_log10() +\n    labs(\n        title = \"Logistic å›å½’ OR å€¼\",\n        x = \"OR (95% CI)\",\n        y = \"å˜é‡\"\n    ) +\n    theme(plot.title = element_text(hjust = 0.5, face = \"bold\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "broom - æ¨¡å‹æ•´ç†"
    ]
  },
  {
    "objectID": "1043-broom.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "href": "1043-broom.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "title": "broom æ¨¡å‹ç»“æœæ•´ç†æŒ‡å—",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹\n\næ¡ˆä¾‹ï¼šå¤šå…ƒå›å½’åˆ†ææŠ¥å‘Š\n\n# å®Œæ•´åˆ†ææµç¨‹\nlibrary(knitr)\n\n# 1. æ‹Ÿåˆæ¨¡å‹\nmodel &lt;- lm(mpg ~ wt + hp + cyl + am, data = mtcars)\n\n# 2. ç³»æ•°è¡¨\ncat(\"### å›å½’ç³»æ•°\\n\")\n\n### å›å½’ç³»æ•°\n\ntidy(model, conf.int = TRUE) %&gt;%\n    mutate(across(where(is.numeric), ~ round(.x, 3))) %&gt;%\n    kable()\n\n\n\n\n\n\n\n\n\n\n\n\n\nterm\nestimate\nstd.error\nstatistic\np.value\nconf.low\nconf.high\n\n\n\n\n(Intercept)\n36.147\n3.105\n11.642\n0.000\n29.776\n42.517\n\n\nwt\n-2.606\n0.920\n-2.834\n0.009\n-4.494\n-0.719\n\n\nhp\n-0.025\n0.014\n-1.828\n0.079\n-0.053\n0.003\n\n\ncyl\n-0.745\n0.583\n-1.279\n0.212\n-1.941\n0.451\n\n\nam\n1.478\n1.441\n1.026\n0.314\n-1.479\n4.435\n\n\n\n\n\n\n# 3. æ¨¡å‹æ‘˜è¦\ncat(\"\\n### æ¨¡å‹æ‹Ÿåˆä¼˜åº¦\\n\")\n\n\n### æ¨¡å‹æ‹Ÿåˆä¼˜åº¦\n\nglance(model) %&gt;%\n    select(r.squared, adj.r.squared, sigma, statistic, p.value, AIC, BIC) %&gt;%\n    mutate(across(where(is.numeric), ~ round(.x, 3))) %&gt;%\n    kable()\n\n\n\n\nr.squared\nadj.r.squared\nsigma\nstatistic\np.value\nAIC\nBIC\n\n\n\n\n0.849\n0.827\n2.509\n37.961\n0\n156.254\n165.048\n\n\n\n\n\n\n# 4. æ®‹å·®è¯Šæ–­\naugmented_data &lt;- augment(model)\n\n# ç»„åˆè¯Šæ–­å›¾\np1 &lt;- ggplot(augmented_data, aes(x = .fitted, y = .resid)) +\n    geom_point(alpha = 0.6) +\n    geom_hline(yintercept = 0, linetype = 2, color = \"red\") +\n    labs(title = \"æ®‹å·® vs æ‹Ÿåˆå€¼\", x = \"æ‹Ÿåˆå€¼\", y = \"æ®‹å·®\")\n\np2 &lt;- ggplot(augmented_data, aes(sample = .std.resid)) +\n    stat_qq() +\n    stat_qq_line(color = \"red\") +\n    labs(title = \"Q-Q å›¾\")\n\nlibrary(patchwork)\np1 + p2",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "broom - æ¨¡å‹æ•´ç†"
    ]
  },
  {
    "objectID": "1043-broom.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "1043-broom.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "broom æ¨¡å‹ç»“æœæ•´ç†æŒ‡å—",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# åŸºæœ¬ç”¨æ³•\ntidy(model) # ç³»æ•°è¡¨\ntidy(model, conf.int = TRUE) # å«ç½®ä¿¡åŒºé—´\ntidy(model, exponentiate = TRUE) # OR/HR å€¼\n\nglance(model) # æ¨¡å‹æ‘˜è¦\n\naugment(model) # æ·»åŠ é¢„æµ‹å€¼/æ®‹å·®\naugment(model, newdata = new_data) # æ–°æ•°æ®é¢„æµ‹\n\n# æ‰¹é‡å»ºæ¨¡\ndata %&gt;%\n    group_by(group) %&gt;%\n    nest() %&gt;%\n    mutate(model = map(data, ~ lm(y ~ x, data = .x))) %&gt;%\n    mutate(tidied = map(model, tidy)) %&gt;%\n    unnest(tidied)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "broom - æ¨¡å‹æ•´ç†"
    ]
  },
  {
    "objectID": "1043-broom.html#å°ç»“",
    "href": "1043-broom.html#å°ç»“",
    "title": "broom æ¨¡å‹ç»“æœæ•´ç†æŒ‡å—",
    "section": "å°ç»“",
    "text": "å°ç»“\nbroom çš„æ ¸å¿ƒä»·å€¼ï¼š\n\næ ‡å‡†åŒ–è¾“å‡ºï¼šç»Ÿä¸€çš„æ•°æ®æ¡†æ ¼å¼\nä¾¿äºç¼–ç¨‹ï¼šè½»æ¾è¿›è¡Œæ‰¹é‡æ“ä½œ\nå¯è§†åŒ–å‹å¥½ï¼šç›´æ¥ç”¨äº ggplot2\nè¦†ç›–å¹¿æ³›ï¼šæ”¯æŒ 100+ ç§æ¨¡å‹\nä¸ tidyverse æ— ç¼é›†æˆ\n\n\næœ€ä½³å®è·µï¼šå§‹ç»ˆä½¿ç”¨ broom æ•´ç†æ¨¡å‹è¾“å‡ºï¼Œè€Œéæ‰‹åŠ¨æå– summary() ä¸­çš„æ•°å€¼ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "broom - æ¨¡å‹æ•´ç†"
    ]
  },
  {
    "objectID": "1043-broom.html#å‚è€ƒèµ„æº",
    "href": "1043-broom.html#å‚è€ƒèµ„æº",
    "title": "broom æ¨¡å‹ç»“æœæ•´ç†æŒ‡å—",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nbroom å®˜æ–¹æ–‡æ¡£\nbroom GitHub\nbroom.mixed - æ··åˆæ•ˆåº”æ¨¡å‹æ”¯æŒ",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "broom - æ¨¡å‹æ•´ç†"
    ]
  },
  {
    "objectID": "1045-rstatix.html",
    "href": "1045-rstatix.html",
    "title": "rstatix ç®¡é“å¼ç»Ÿè®¡åˆ†æ",
    "section": "",
    "text": "rstatix æ˜¯ä¸€ä¸ªä¸ tidyverse æ— ç¼é›†æˆçš„ç»Ÿè®¡åˆ†æåŒ…ï¼Œæä¾›ç®¡é“å‹å¥½ï¼ˆpipe-friendlyï¼‰çš„ç»Ÿè®¡æ£€éªŒå‡½æ•°ã€‚å®ƒçš„æœ€å¤§ç‰¹ç‚¹æ˜¯å°†ç»Ÿè®¡æ£€éªŒç»“æœè‡ªåŠ¨è½¬æ¢ä¸ºæ•´æ´çš„æ•°æ®æ¡†æ ¼å¼ï¼Œä¾¿äºåç»­åˆ†æå’Œå¯è§†åŒ–ã€‚\n\n\n\n\n\nç‰¹ç‚¹\nè¯´æ˜\n\n\n\n\nç®¡é“å‹å¥½\nå®Œç¾å…¼å®¹ %&gt;% æ“ä½œç¬¦\n\n\næ•´æ´è¾“å‡º\nç»“æœè‡ªåŠ¨è½¬ä¸º tidy data frame\n\n\næ•ˆåº”é‡\nå†…ç½®æ•ˆåº”é‡è®¡ç®—å‡½æ•°\n\n\nå‡è®¾æ£€éªŒ\næ­£æ€æ€§ã€æ–¹å·®é½æ€§ç­‰æ£€éªŒä¸€ç«™å¼å®Œæˆ\n\n\nå¯è§†åŒ–å‹å¥½\nç»“æœå¯ç›´æ¥ç”¨äº ggplot2 æ ‡æ³¨\n\n\n\n\n\n\n\n\n\n\n\nç±»åˆ«\nå‡½æ•°\n\n\n\n\næè¿°ç»Ÿè®¡\nget_summary_stats()\n\n\ntæ£€éªŒ\nt_test(), pairwise_t_test()\n\n\næ–¹å·®åˆ†æ\nanova_test(), welch_anova_test()\n\n\néå‚æ•°æ£€éªŒ\nwilcox_test(), kruskal_test()\n\n\nç›¸å…³åˆ†æ\ncor_test(), cor_mat()\n\n\næ•ˆåº”é‡\ncohens_d(), eta_squared()\n\n\nå‡è®¾æ£€éªŒ\nshapiro_test(), levene_test()",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "rstatix - ç®¡é“å¼ç»Ÿè®¡"
    ]
  },
  {
    "objectID": "1045-rstatix.html#rstatix-ç®€ä»‹",
    "href": "1045-rstatix.html#rstatix-ç®€ä»‹",
    "title": "rstatix ç®¡é“å¼ç»Ÿè®¡åˆ†æ",
    "section": "",
    "text": "rstatix æ˜¯ä¸€ä¸ªä¸ tidyverse æ— ç¼é›†æˆçš„ç»Ÿè®¡åˆ†æåŒ…ï¼Œæä¾›ç®¡é“å‹å¥½ï¼ˆpipe-friendlyï¼‰çš„ç»Ÿè®¡æ£€éªŒå‡½æ•°ã€‚å®ƒçš„æœ€å¤§ç‰¹ç‚¹æ˜¯å°†ç»Ÿè®¡æ£€éªŒç»“æœè‡ªåŠ¨è½¬æ¢ä¸ºæ•´æ´çš„æ•°æ®æ¡†æ ¼å¼ï¼Œä¾¿äºåç»­åˆ†æå’Œå¯è§†åŒ–ã€‚\n\n\n\n\n\nç‰¹ç‚¹\nè¯´æ˜\n\n\n\n\nç®¡é“å‹å¥½\nå®Œç¾å…¼å®¹ %&gt;% æ“ä½œç¬¦\n\n\næ•´æ´è¾“å‡º\nç»“æœè‡ªåŠ¨è½¬ä¸º tidy data frame\n\n\næ•ˆåº”é‡\nå†…ç½®æ•ˆåº”é‡è®¡ç®—å‡½æ•°\n\n\nå‡è®¾æ£€éªŒ\næ­£æ€æ€§ã€æ–¹å·®é½æ€§ç­‰æ£€éªŒä¸€ç«™å¼å®Œæˆ\n\n\nå¯è§†åŒ–å‹å¥½\nç»“æœå¯ç›´æ¥ç”¨äº ggplot2 æ ‡æ³¨\n\n\n\n\n\n\n\n\n\n\n\nç±»åˆ«\nå‡½æ•°\n\n\n\n\næè¿°ç»Ÿè®¡\nget_summary_stats()\n\n\ntæ£€éªŒ\nt_test(), pairwise_t_test()\n\n\næ–¹å·®åˆ†æ\nanova_test(), welch_anova_test()\n\n\néå‚æ•°æ£€éªŒ\nwilcox_test(), kruskal_test()\n\n\nç›¸å…³åˆ†æ\ncor_test(), cor_mat()\n\n\næ•ˆåº”é‡\ncohens_d(), eta_squared()\n\n\nå‡è®¾æ£€éªŒ\nshapiro_test(), levene_test()",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "rstatix - ç®¡é“å¼ç»Ÿè®¡"
    ]
  },
  {
    "objectID": "1045-rstatix.html#å®‰è£…ä¸åŠ è½½",
    "href": "1045-rstatix.html#å®‰è£…ä¸åŠ è½½",
    "title": "rstatix ç®¡é“å¼ç»Ÿè®¡åˆ†æ",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\n# å®‰è£…\ninstall.packages(\"rstatix\")\n\n\nlibrary(rstatix)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(ggpubr) # é…åˆå¯è§†åŒ–\n\n# è®¾ç½®ä¸»é¢˜\ntheme_set(theme_bw(base_size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "rstatix - ç®¡é“å¼ç»Ÿè®¡"
    ]
  },
  {
    "objectID": "1045-rstatix.html#ç¬¬ä¸€éƒ¨åˆ†æè¿°ç»Ÿè®¡",
    "href": "1045-rstatix.html#ç¬¬ä¸€éƒ¨åˆ†æè¿°ç»Ÿè®¡",
    "title": "rstatix ç®¡é“å¼ç»Ÿè®¡åˆ†æ",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæè¿°ç»Ÿè®¡",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæè¿°ç»Ÿè®¡\n\nget_summary_stats() - æ±‡æ€»ç»Ÿè®¡\n\n# ä½¿ç”¨ ToothGrowth æ•°æ®é›†\ndata(\"ToothGrowth\")\ndf &lt;- ToothGrowth\ndf$dose &lt;- as.factor(df$dose)\n\n# æ•´ä½“æ±‡æ€»\ndf %&gt;%\n    get_summary_stats(len, type = \"mean_sd\")\n\n# A tibble: 1 Ã— 4\n  variable     n  mean    sd\n  &lt;fct&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 len         60  18.8  7.65\n\n\n\n# æŒ‰ç»„æ±‡æ€»\ndf %&gt;%\n    group_by(supp, dose) %&gt;%\n    get_summary_stats(len, type = \"mean_sd\")\n\n# A tibble: 6 Ã— 6\n  supp  dose  variable     n  mean    sd\n  &lt;fct&gt; &lt;fct&gt; &lt;fct&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 OJ    0.5   len         10 13.2   4.46\n2 OJ    1     len         10 22.7   3.91\n3 OJ    2     len         10 26.1   2.66\n4 VC    0.5   len         10  7.98  2.75\n5 VC    1     len         10 16.8   2.52\n6 VC    2     len         10 26.1   4.80\n\n\n\n\næ±‡æ€»ç±»å‹é€‰é¡¹\n\n\n\ntype\nè¾“å‡ºå†…å®¹\n\n\n\n\n\"full\"\nå®Œæ•´ç»Ÿè®¡ï¼ˆn, min, max, mean, sd, se, ciâ€¦ï¼‰\n\n\n\"mean_sd\"\nå‡å€¼å’Œæ ‡å‡†å·®\n\n\n\"mean_se\"\nå‡å€¼å’Œæ ‡å‡†è¯¯\n\n\n\"mean_ci\"\nå‡å€¼å’Œ95%ç½®ä¿¡åŒºé—´\n\n\n\"median_iqr\"\nä¸­ä½æ•°å’Œå››åˆ†ä½è·\n\n\n\"five_number\"\näº”æ•°æ¦‚æ‹¬\n\n\n\n\n# å®Œæ•´ç»Ÿè®¡\ndf %&gt;%\n    group_by(dose) %&gt;%\n    get_summary_stats(len, type = \"full\")\n\n# A tibble: 3 Ã— 14\n  dose  variable     n   min   max median    q1    q3   iqr   mad  mean    sd\n  &lt;fct&gt; &lt;fct&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 0.5   len         20   4.2  21.5   9.85  7.22  12.2  5.03  4.00  10.6  4.5 \n2 1     len         20  13.6  27.3  19.2  16.2   23.4  7.12  5.78  19.7  4.42\n3 2     len         20  18.5  33.9  26.0  23.5   27.8  4.3   3.71  26.1  3.77\n# â„¹ 2 more variables: se &lt;dbl&gt;, ci &lt;dbl&gt;",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "rstatix - ç®¡é“å¼ç»Ÿè®¡"
    ]
  },
  {
    "objectID": "1045-rstatix.html#ç¬¬äºŒéƒ¨åˆ†æ­£æ€æ€§å’Œæ–¹å·®é½æ£€éªŒ",
    "href": "1045-rstatix.html#ç¬¬äºŒéƒ¨åˆ†æ­£æ€æ€§å’Œæ–¹å·®é½æ£€éªŒ",
    "title": "rstatix ç®¡é“å¼ç»Ÿè®¡åˆ†æ",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šæ­£æ€æ€§å’Œæ–¹å·®é½æ£€éªŒ",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šæ­£æ€æ€§å’Œæ–¹å·®é½æ£€éªŒ\n\nshapiro_test() - æ­£æ€æ€§æ£€éªŒ\n\n# æ•´ä½“æ­£æ€æ€§æ£€éªŒ\ndf %&gt;%\n    shapiro_test(len)\n\n# A tibble: 1 Ã— 3\n  variable statistic     p\n  &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;\n1 len          0.967 0.109\n\n\n\n# åˆ†ç»„æ­£æ€æ€§æ£€éªŒ\ndf %&gt;%\n    group_by(dose) %&gt;%\n    shapiro_test(len)\n\n# A tibble: 3 Ã— 4\n  dose  variable statistic     p\n  &lt;fct&gt; &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;\n1 0.5   len          0.941 0.247\n2 1     len          0.931 0.164\n3 2     len          0.978 0.902\n\n\n\n\nlevene_test() - æ–¹å·®é½æ€§æ£€éªŒ\n\n# Levene æ£€éªŒ\ndf %&gt;%\n    levene_test(len ~ dose)\n\n# A tibble: 1 Ã— 4\n    df1   df2 statistic     p\n  &lt;int&gt; &lt;int&gt;     &lt;dbl&gt; &lt;dbl&gt;\n1     2    57     0.646 0.528\n\n\n\n\nidentify_outliers() - å¼‚å¸¸å€¼æ£€æµ‹\n\n# åŸºäº IQR çš„å¼‚å¸¸å€¼æ£€æµ‹\ndf %&gt;%\n    group_by(dose) %&gt;%\n    identify_outliers(len)\n\n# A tibble: 1 Ã— 5\n  dose    len supp  is.outlier is.extreme\n  &lt;fct&gt; &lt;dbl&gt; &lt;fct&gt; &lt;lgl&gt;      &lt;lgl&gt;     \n1 0.5    21.5 OJ    TRUE       FALSE",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "rstatix - ç®¡é“å¼ç»Ÿè®¡"
    ]
  },
  {
    "objectID": "1045-rstatix.html#ç¬¬ä¸‰éƒ¨åˆ†t-æ£€éªŒ",
    "href": "1045-rstatix.html#ç¬¬ä¸‰éƒ¨åˆ†t-æ£€éªŒ",
    "title": "rstatix ç®¡é“å¼ç»Ÿè®¡åˆ†æ",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼št æ£€éªŒ",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼št æ£€éªŒ\n\nå•æ ·æœ¬ t æ£€éªŒ\n\n# æ£€éªŒå‡å€¼æ˜¯å¦ç­‰äº 20\ndf %&gt;%\n    t_test(len ~ 1, mu = 20)\n\n# A tibble: 1 Ã— 7\n  .y.   group1 group2         n statistic    df     p\n* &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;      &lt;int&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 len   1      null model    60     -1.20    59 0.234\n\n\n\n\nç‹¬ç«‹æ ·æœ¬ t æ£€éªŒ\n\n# æ¯”è¾ƒä¸¤ç»„\ndf %&gt;%\n    t_test(len ~ supp)\n\n# A tibble: 1 Ã— 8\n  .y.   group1 group2    n1    n2 statistic    df      p\n* &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;  &lt;int&gt; &lt;int&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;\n1 len   OJ     VC        30    30      1.92  55.3 0.0606\n\n\n\n# æ·»åŠ æ•ˆåº”é‡\ndf %&gt;%\n    t_test(len ~ supp) %&gt;%\n    add_significance()\n\n# A tibble: 1 Ã— 9\n  .y.   group1 group2    n1    n2 statistic    df      p p.signif\n  &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;  &lt;int&gt; &lt;int&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;   \n1 len   OJ     VC        30    30      1.92  55.3 0.0606 ns      \n\n\n\n\né…å¯¹æ ·æœ¬ t æ£€éªŒ\n\n# æ¨¡æ‹Ÿé…å¯¹æ•°æ®\npaired_data &lt;- data.frame(\n    id = rep(1:10, 2),\n    time = rep(c(\"before\", \"after\"), each = 10),\n    score = c(rnorm(10, 50, 10), rnorm(10, 55, 10))\n)\n\npaired_data %&gt;%\n    t_test(score ~ time, paired = TRUE)\n\n# A tibble: 1 Ã— 8\n  .y.   group1 group2    n1    n2 statistic    df     p\n* &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;  &lt;int&gt; &lt;int&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 score after  before    10    10      1.08     9  0.31\n\n\n\n\npairwise_t_test() - å¤šç»„ä¸¤ä¸¤æ¯”è¾ƒ\n\n# å¤šç»„ä¸¤ä¸¤æ¯”è¾ƒ\ndf %&gt;%\n    pairwise_t_test(len ~ dose, p.adjust.method = \"bonferroni\")\n\n# A tibble: 3 Ã— 9\n  .y.   group1 group2    n1    n2        p p.signif    p.adj p.adj.signif\n* &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;  &lt;int&gt; &lt;int&gt;    &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;       \n1 len   0.5    1         20    20 6.70e- 9 ****     2.01e- 8 ****        \n2 len   0.5    2         20    20 1.47e-16 ****     4.41e-16 ****        \n3 len   1      2         20    20 1.44e- 5 ****     4.33e- 5 ****",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "rstatix - ç®¡é“å¼ç»Ÿè®¡"
    ]
  },
  {
    "objectID": "1045-rstatix.html#ç¬¬å››éƒ¨åˆ†æ–¹å·®åˆ†æanova",
    "href": "1045-rstatix.html#ç¬¬å››éƒ¨åˆ†æ–¹å·®åˆ†æanova",
    "title": "rstatix ç®¡é“å¼ç»Ÿè®¡åˆ†æ",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šæ–¹å·®åˆ†æï¼ˆANOVAï¼‰",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šæ–¹å·®åˆ†æï¼ˆANOVAï¼‰\n\nå•å› ç´  ANOVA\n\n# å•å› ç´ æ–¹å·®åˆ†æ\ndf %&gt;%\n    anova_test(len ~ dose)\n\nANOVA Table (type II tests)\n\n  Effect DFn DFd      F        p p&lt;.05   ges\n1   dose   2  57 67.416 9.53e-16     * 0.703\n\n\n\n# è·å–è¯¦ç»†ä¿¡æ¯ï¼ˆå«æ•ˆåº”é‡ï¼‰\nres_aov &lt;- df %&gt;%\n    anova_test(len ~ dose, detailed = TRUE)\nres_aov\n\nANOVA Table (type II tests)\n\n  Effect      SSn      SSd DFn DFd      F        p p&lt;.05   ges\n1   dose 2426.434 1025.775   2  57 67.416 9.53e-16     * 0.703\n\n\n\n\näº‹åå¤šé‡æ¯”è¾ƒ\n\n# Tukey HSD äº‹åæ£€éªŒ\ndf %&gt;%\n    tukey_hsd(len ~ dose)\n\n# A tibble: 3 Ã— 9\n  term  group1 group2 null.value estimate conf.low conf.high    p.adj\n* &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;\n1 dose  0.5    1               0     9.13     5.90     12.4  2   e- 8\n2 dose  0.5    2               0    15.5     12.3      18.7  1.12e-11\n3 dose  1      2               0     6.36     3.14      9.59 4.25e- 5\n# â„¹ 1 more variable: p.adj.signif &lt;chr&gt;\n\n\n\n\nåŒå› ç´  ANOVA\n\n# åŒå› ç´ æ–¹å·®åˆ†æ\ndf %&gt;%\n    anova_test(len ~ supp * dose)\n\nANOVA Table (type II tests)\n\n     Effect DFn DFd      F        p p&lt;.05   ges\n1      supp   1  54 15.572 2.31e-04     * 0.224\n2      dose   2  54 92.000 4.05e-18     * 0.773\n3 supp:dose   2  54  4.107 2.20e-02     * 0.132\n\n\n\n# ç®€å•æ•ˆåº”åˆ†æï¼ˆæŒ‰ supp åˆ†ç»„æ¯”è¾ƒ doseï¼‰\ndf %&gt;%\n    group_by(supp) %&gt;%\n    anova_test(len ~ dose)\n\n# A tibble: 2 Ã— 8\n  supp  Effect   DFn   DFd     F        p `p&lt;.05`   ges\n* &lt;fct&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;\n1 OJ    dose       2    27  31.4 8.89e- 8 *       0.7  \n2 VC    dose       2    27  67.1 3.36e-11 *       0.832\n\n\n\n\nWelch ANOVAï¼ˆæ–¹å·®ä¸é½æ—¶ï¼‰\n\n# Welch ANOVA\ndf %&gt;%\n    welch_anova_test(len ~ dose)\n\n# A tibble: 1 Ã— 7\n  .y.       n statistic   DFn   DFd        p method     \n* &lt;chr&gt; &lt;int&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;      \n1 len      60      68.4     2  37.7 2.81e-13 Welch ANOVA\n\n# Games-Howell äº‹åæ£€éªŒ\ndf %&gt;%\n    games_howell_test(len ~ dose)\n\n# A tibble: 3 Ã— 8\n  .y.   group1 group2 estimate conf.low conf.high       p.adj p.adj.signif\n* &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;       \n1 len   0.5    1          9.13     5.69     12.6  0.000000376 ****        \n2 len   0.5    2         15.5     12.3      18.7  0           ****        \n3 len   1      2          6.37     3.19      9.54 0.0000557   ****",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "rstatix - ç®¡é“å¼ç»Ÿè®¡"
    ]
  },
  {
    "objectID": "1045-rstatix.html#ç¬¬äº”éƒ¨åˆ†éå‚æ•°æ£€éªŒ",
    "href": "1045-rstatix.html#ç¬¬äº”éƒ¨åˆ†éå‚æ•°æ£€éªŒ",
    "title": "rstatix ç®¡é“å¼ç»Ÿè®¡åˆ†æ",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šéå‚æ•°æ£€éªŒ",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šéå‚æ•°æ£€éªŒ\n\nWilcoxon æ£€éªŒ\n\n# ä¸¤ç»„æ¯”è¾ƒï¼ˆMann-Whitney Uï¼‰\ndf %&gt;%\n    wilcox_test(len ~ supp)\n\n# A tibble: 1 Ã— 7\n  .y.   group1 group2    n1    n2 statistic      p\n* &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;  &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;  &lt;dbl&gt;\n1 len   OJ     VC        30    30      576. 0.0645\n\n\n\n# æ·»åŠ æ•ˆåº”é‡\ndf %&gt;%\n    wilcox_effsize(len ~ supp)\n\n# A tibble: 1 Ã— 7\n  .y.   group1 group2 effsize    n1    n2 magnitude\n* &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;ord&gt;    \n1 len   OJ     VC       0.240    30    30 small    \n\n\n\n\nKruskal-Wallis æ£€éªŒ\n\n# å¤šç»„æ¯”è¾ƒ\ndf %&gt;%\n    kruskal_test(len ~ dose)\n\n# A tibble: 1 Ã— 6\n  .y.       n statistic    df             p method        \n* &lt;chr&gt; &lt;int&gt;     &lt;dbl&gt; &lt;int&gt;         &lt;dbl&gt; &lt;chr&gt;         \n1 len      60      40.7     2 0.00000000148 Kruskal-Wallis\n\n\n\n# Dunn äº‹åæ£€éªŒ\ndf %&gt;%\n    dunn_test(len ~ dose, p.adjust.method = \"bonferroni\")\n\n# A tibble: 3 Ã— 9\n  .y.   group1 group2    n1    n2 statistic        p    p.adj p.adj.signif\n* &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;  &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;       \n1 len   0.5    1         20    20      3.55 3.78e- 4 1.13e- 3 **          \n2 len   0.5    2         20    20      6.36 1.98e-10 5.95e-10 ****        \n3 len   1      2         20    20      2.81 4.99e- 3 1.50e- 2 *           \n\n\n\n\nFriedman æ£€éªŒï¼ˆé…å¯¹éå‚æ•°ï¼‰\n\n# æ¨¡æ‹Ÿé‡å¤æµ‹é‡æ•°æ®\nrm_data &lt;- data.frame(\n    id = rep(1:10, 3),\n    time = rep(c(\"T1\", \"T2\", \"T3\"), each = 10),\n    score = c(rnorm(10, 50, 5), rnorm(10, 55, 5), rnorm(10, 60, 5))\n)\n\n# Friedman æ£€éªŒ\nrm_data %&gt;%\n    friedman_test(score ~ time | id)\n\n# A tibble: 1 Ã— 6\n  .y.       n statistic    df      p method       \n* &lt;chr&gt; &lt;int&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;        \n1 score    10       7.4     2 0.0247 Friedman test\n\n# äº‹åæ£€éªŒ\nrm_data %&gt;%\n    wilcox_test(score ~ time, paired = TRUE, p.adjust.method = \"bonferroni\")\n\n# A tibble: 3 Ã— 9\n  .y.   group1 group2    n1    n2 statistic     p p.adj p.adj.signif\n* &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;  &lt;int&gt; &lt;int&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       \n1 score T1     T2        10    10        23 0.695 1     ns          \n2 score T1     T3        10    10         1 0.004 0.012 *           \n3 score T2     T3        10    10         6 0.027 0.082 ns",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "rstatix - ç®¡é“å¼ç»Ÿè®¡"
    ]
  },
  {
    "objectID": "1045-rstatix.html#ç¬¬å…­éƒ¨åˆ†ç›¸å…³åˆ†æ",
    "href": "1045-rstatix.html#ç¬¬å…­éƒ¨åˆ†ç›¸å…³åˆ†æ",
    "title": "rstatix ç®¡é“å¼ç»Ÿè®¡åˆ†æ",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šç›¸å…³åˆ†æ",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šç›¸å…³åˆ†æ\n\ncor_test() - ç›¸å…³æ£€éªŒ\n\n# Pearson ç›¸å…³\nmtcars %&gt;%\n    cor_test(mpg, wt, method = \"pearson\")\n\n# A tibble: 1 Ã— 8\n  var1  var2    cor statistic        p conf.low conf.high method \n  &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;  \n1 mpg   wt    -0.87     -9.56 1.29e-10   -0.934    -0.744 Pearson\n\n\n\n# å¤šå˜é‡ç›¸å…³\nmtcars %&gt;%\n    cor_test(mpg, disp, hp, wt, method = \"pearson\")\n\n# A tibble: 16 Ã— 8\n   var1  var2    cor    statistic         p conf.low conf.high method \n   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;  \n 1 mpg   mpg    1          Inf    0            1         1     Pearson\n 2 mpg   disp  -0.85        -8.75 9.38e- 10   -0.923    -0.708 Pearson\n 3 mpg   hp    -0.78        -6.74 1.79e-  7   -0.885    -0.586 Pearson\n 4 mpg   wt    -0.87        -9.56 1.29e- 10   -0.934    -0.744 Pearson\n 5 disp  mpg   -0.85        -8.75 9.38e- 10   -0.923    -0.708 Pearson\n 6 disp  disp   1          Inf    0            1         1     Pearson\n 7 disp  hp     0.79         7.08 7.14e-  8    0.611     0.893 Pearson\n 8 disp  wt     0.89        10.6  1.22e- 11    0.781     0.944 Pearson\n 9 hp    mpg   -0.78        -6.74 1.79e-  7   -0.885    -0.586 Pearson\n10 hp    disp   0.79         7.08 7.14e-  8    0.611     0.893 Pearson\n11 hp    hp     1          Inf    0            1         1     Pearson\n12 hp    wt     0.66         4.80 4.15e-  5    0.403     0.819 Pearson\n13 wt    mpg   -0.87        -9.56 1.29e- 10   -0.934    -0.744 Pearson\n14 wt    disp   0.89        10.6  1.22e- 11    0.781     0.944 Pearson\n15 wt    hp     0.66         4.80 4.15e-  5    0.403     0.819 Pearson\n16 wt    wt     1    367570386.   2.27e-236    1         1     Pearson\n\n\n\n\ncor_mat() - ç›¸å…³çŸ©é˜µ\n\n# ç›¸å…³çŸ©é˜µ\ncor_matrix &lt;- mtcars %&gt;%\n    select(mpg, disp, hp, wt, qsec) %&gt;%\n    cor_mat()\n\ncor_matrix\n\n# A tibble: 5 Ã— 6\n  rowname   mpg  disp    hp    wt  qsec\n* &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 mpg      1    -0.85 -0.78 -0.87  0.42\n2 disp    -0.85  1     0.79  0.89 -0.43\n3 hp      -0.78  0.79  1     0.66 -0.71\n4 wt      -0.87  0.89  0.66  1    -0.17\n5 qsec     0.42 -0.43 -0.71 -0.17  1   \n\n\n\n# æ·»åŠ æ˜¾è‘—æ€§æ ‡è®°\ncor_matrix %&gt;%\n    cor_mark_significant()\n\n  rowname       mpg     disp        hp    wt qsec\n1     mpg                                        \n2    disp -0.85****                              \n3      hp -0.78**** 0.79****                     \n4      wt -0.87**** 0.89****  0.66****           \n5    qsec     0.42*   -0.43* -0.71**** -0.17     \n\n\n\n# è·å– p å€¼çŸ©é˜µ\npval_matrix &lt;- cor_matrix %&gt;%\n    cor_get_pval()\n\n# è½¬ä¸ºæ™®é€šæ•°æ®æ¡†æ˜¾ç¤º\nas.data.frame(pval_matrix)\n\n  rowname      mpg     disp       hp        wt     qsec\n1     mpg 0.00e+00 9.38e-10 1.79e-07  1.29e-10 1.71e-02\n2    disp 9.38e-10 0.00e+00 7.14e-08  1.22e-11 1.31e-02\n3      hp 1.79e-07 7.14e-08 0.00e+00  4.15e-05 5.77e-06\n4      wt 1.29e-10 1.22e-11 4.15e-05 2.27e-236 3.39e-01\n5    qsec 1.71e-02 1.31e-02 5.77e-06  3.39e-01 0.00e+00",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "rstatix - ç®¡é“å¼ç»Ÿè®¡"
    ]
  },
  {
    "objectID": "1045-rstatix.html#ç¬¬ä¸ƒéƒ¨åˆ†æ•ˆåº”é‡è®¡ç®—",
    "href": "1045-rstatix.html#ç¬¬ä¸ƒéƒ¨åˆ†æ•ˆåº”é‡è®¡ç®—",
    "title": "rstatix ç®¡é“å¼ç»Ÿè®¡åˆ†æ",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæ•ˆåº”é‡è®¡ç®—",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæ•ˆåº”é‡è®¡ç®—\n\nCohenâ€™s dï¼ˆtæ£€éªŒæ•ˆåº”é‡ï¼‰\n\n# è®¡ç®— Cohen's d\ndf %&gt;%\n    cohens_d(len ~ supp)\n\n# A tibble: 1 Ã— 7\n  .y.   group1 group2 effsize    n1    n2 magnitude\n* &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;ord&gt;    \n1 len   OJ     VC       0.495    30    30 small    \n\n\n\n\næ•ˆåº”é‡è§£é‡Š\n\n\n\næ•ˆåº”é‡\nå°\nä¸­\nå¤§\n\n\n\n\nCohenâ€™s d\n0.2\n0.5\n0.8\n\n\nÎ·Â² (eta squared)\n0.01\n0.06\n0.14\n\n\nr (Wilcoxon)\n0.1\n0.3\n0.5\n\n\n\n\n# ANOVA æ•ˆåº”é‡ï¼ˆè‡ªåŠ¨åŒ…å«åœ¨ anova_test ä¸­ï¼‰\ndf %&gt;%\n    anova_test(len ~ dose, effect.size = \"pes\") # partial eta squared\n\nANOVA Table (type II tests)\n\n  Effect DFn DFd      F        p p&lt;.05   pes\n1   dose   2  57 67.416 9.53e-16     * 0.703",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "rstatix - ç®¡é“å¼ç»Ÿè®¡"
    ]
  },
  {
    "objectID": "1045-rstatix.html#ç¬¬å…«éƒ¨åˆ†ä¸-ggpubr-å¯è§†åŒ–é›†æˆ",
    "href": "1045-rstatix.html#ç¬¬å…«éƒ¨åˆ†ä¸-ggpubr-å¯è§†åŒ–é›†æˆ",
    "title": "rstatix ç®¡é“å¼ç»Ÿè®¡åˆ†æ",
    "section": "ç¬¬å…«éƒ¨åˆ†ï¼šä¸ ggpubr å¯è§†åŒ–é›†æˆ",
    "text": "ç¬¬å…«éƒ¨åˆ†ï¼šä¸ ggpubr å¯è§†åŒ–é›†æˆ\n\næ·»åŠ ç»Ÿè®¡æ¯”è¾ƒåˆ°å›¾è¡¨\n\n# åŸºç¡€ç®±çº¿å›¾\np &lt;- ggboxplot(df,\n    x = \"dose\", y = \"len\", fill = \"dose\",\n    palette = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")\n)\n\n# è·å–ç»Ÿè®¡ç»“æœï¼ˆä¸¤ä¸¤æ¯”è¾ƒï¼‰\nstat_result &lt;- df %&gt;%\n    pairwise_t_test(len ~ dose) %&gt;%\n    add_significance()\n\n# æ‰‹åŠ¨è®¾ç½® y ä½ç½®\nstat_result$y.position &lt;- c(35, 38, 41)\n\n# æ·»åŠ  p å€¼æ ‡æ³¨\np + stat_pvalue_manual(stat_result, label = \"p.signif\", tip.length = 0.01)\n\n\n\n\n\n\n\n\n\n\nå¤šç»„æ¯”è¾ƒå¯è§†åŒ–\n\n# ä½¿ç”¨ compare_means ä½œä¸ºæ›¿ä»£\ncompare_result &lt;- compare_means(len ~ dose, data = df, method = \"t.test\")\ncompare_result\n\n# A tibble: 3 Ã— 8\n  .y.   group1 group2        p   p.adj p.format p.signif method\n  &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt; \n1 len   0.5    1      1.27e- 7 2.5e- 7 1.3e-07  ****     T-test\n2 len   0.5    2      4.40e-14 1.3e-13 4.4e-14  ****     T-test\n3 len   1      2      1.91e- 5 1.9e- 5 1.9e-05  ****     T-test\n\n\n\n# ä½¿ç”¨ ggpubr å†…ç½®çš„ç»Ÿè®¡æ ‡æ³¨\nggboxplot(df,\n    x = \"dose\", y = \"len\", fill = \"dose\",\n    palette = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")\n) +\n    stat_compare_means(method = \"anova\", label.y = 40) +\n    labs(title = \"å‰‚é‡å¯¹ç‰™é½¿ç”Ÿé•¿çš„å½±å“\", y = \"ç‰™é½¿é•¿åº¦\", x = \"å‰‚é‡\")\n\n\n\n\n\n\n\n\n\n\nåˆ†é¢æ¯”è¾ƒ\n\n# æŒ‰ supp åˆ†é¢æ˜¾ç¤º\nggboxplot(df,\n    x = \"dose\", y = \"len\", fill = \"dose\",\n    facet.by = \"supp\",\n    palette = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")\n) +\n    stat_compare_means(method = \"anova\", label.y = 38)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "rstatix - ç®¡é“å¼ç»Ÿè®¡"
    ]
  },
  {
    "objectID": "1045-rstatix.html#ç¬¬ä¹éƒ¨åˆ†å®Œæ•´åˆ†ææµç¨‹",
    "href": "1045-rstatix.html#ç¬¬ä¹éƒ¨åˆ†å®Œæ•´åˆ†ææµç¨‹",
    "title": "rstatix ç®¡é“å¼ç»Ÿè®¡åˆ†æ",
    "section": "ç¬¬ä¹éƒ¨åˆ†ï¼šå®Œæ•´åˆ†ææµç¨‹",
    "text": "ç¬¬ä¹éƒ¨åˆ†ï¼šå®Œæ•´åˆ†ææµç¨‹\n\næ¡ˆä¾‹ï¼šç»„é—´å·®å¼‚åˆ†æ\n\n# 1. æè¿°ç»Ÿè®¡\ndesc_stats &lt;- df %&gt;%\n    group_by(dose) %&gt;%\n    get_summary_stats(len, type = \"mean_sd\")\n\ndesc_stats\n\n# A tibble: 3 Ã— 5\n  dose  variable     n  mean    sd\n  &lt;fct&gt; &lt;fct&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 0.5   len         20  10.6  4.5 \n2 1     len         20  19.7  4.42\n3 2     len         20  26.1  3.77\n\n\n\n# 2. æ­£æ€æ€§æ£€éªŒ\nnormality &lt;- df %&gt;%\n    group_by(dose) %&gt;%\n    shapiro_test(len)\n\nnormality\n\n# A tibble: 3 Ã— 4\n  dose  variable statistic     p\n  &lt;fct&gt; &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;\n1 0.5   len          0.941 0.247\n2 1     len          0.931 0.164\n3 2     len          0.978 0.902\n\n\n\n# 3. æ–¹å·®é½æ€§æ£€éªŒ\nhomogeneity &lt;- df %&gt;%\n    levene_test(len ~ dose)\n\nhomogeneity\n\n# A tibble: 1 Ã— 4\n    df1   df2 statistic     p\n  &lt;int&gt; &lt;int&gt;     &lt;dbl&gt; &lt;dbl&gt;\n1     2    57     0.646 0.528\n\n\n\n# 4. é€‰æ‹©åˆé€‚çš„æ£€éªŒæ–¹æ³•\n# æ­£æ€ + æ–¹å·®é½ï¼šANOVA\n# æ­£æ€ + æ–¹å·®ä¸é½ï¼šWelch ANOVA\n# éæ­£æ€ï¼šKruskal-Wallis\n\n# è¿™é‡Œå‡è®¾æ­£æ€ä¸”æ–¹å·®é½\nanova_result &lt;- df %&gt;%\n    anova_test(len ~ dose)\n\nanova_result\n\nANOVA Table (type II tests)\n\n  Effect DFn DFd      F        p p&lt;.05   ges\n1   dose   2  57 67.416 9.53e-16     * 0.703\n\n\n\n# 5. äº‹åæ¯”è¾ƒ\nposthoc &lt;- df %&gt;%\n    tukey_hsd(len ~ dose)\n\nposthoc\n\n# A tibble: 3 Ã— 9\n  term  group1 group2 null.value estimate conf.low conf.high    p.adj\n* &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;\n1 dose  0.5    1               0     9.13     5.90     12.4  2   e- 8\n2 dose  0.5    2               0    15.5     12.3      18.7  1.12e-11\n3 dose  1      2               0     6.36     3.14      9.59 4.25e- 5\n# â„¹ 1 more variable: p.adj.signif &lt;chr&gt;\n\n\n\n# 6. æ•ˆåº”é‡\neffect_size &lt;- df %&gt;%\n    cohens_d(len ~ dose, ref.group = \"0.5\")\n\neffect_size\n\n# A tibble: 2 Ã— 7\n  .y.   group1 group2 effsize    n1    n2 magnitude\n* &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;ord&gt;    \n1 len   0.5    1        -2.05    20    20 large    \n2 len   0.5    2        -3.73    20    20 large",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "rstatix - ç®¡é“å¼ç»Ÿè®¡"
    ]
  },
  {
    "objectID": "1045-rstatix.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "1045-rstatix.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "rstatix ç®¡é“å¼ç»Ÿè®¡åˆ†æ",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# æè¿°ç»Ÿè®¡\ndf %&gt;% get_summary_stats(var, type = \"mean_sd\")\ndf %&gt;%\n    group_by(group) %&gt;%\n    get_summary_stats(var, type = \"full\")\n\n# å‡è®¾æ£€éªŒ\ndf %&gt;% shapiro_test(var) # æ­£æ€æ€§\ndf %&gt;% levene_test(var ~ group) # æ–¹å·®é½æ€§\n\n# t æ£€éªŒ\ndf %&gt;% t_test(var ~ group) # ç‹¬ç«‹æ ·æœ¬\ndf %&gt;% t_test(var ~ time, paired = TRUE) # é…å¯¹æ ·æœ¬\ndf %&gt;% pairwise_t_test(var ~ group) # å¤šç»„ä¸¤ä¸¤\n\n# ANOVA\ndf %&gt;% anova_test(var ~ group) # å•å› ç´ \ndf %&gt;% anova_test(var ~ A * B) # åŒå› ç´ \ndf %&gt;% tukey_hsd(var ~ group) # Tukey äº‹å\n\n# éå‚æ•°\ndf %&gt;% wilcox_test(var ~ group) # ä¸¤ç»„\ndf %&gt;% kruskal_test(var ~ group) # å¤šç»„\ndf %&gt;% dunn_test(var ~ group) # Dunn äº‹å\n\n# ç›¸å…³\ndf %&gt;% cor_test(x, y) # ä¸¤å˜é‡\ndf %&gt;% cor_mat() # ç›¸å…³çŸ©é˜µ\n\n# æ•ˆåº”é‡\ndf %&gt;% cohens_d(var ~ group) # Cohen's d\ndf %&gt;% wilcox_effsize(var ~ group) # Wilcoxon r",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "rstatix - ç®¡é“å¼ç»Ÿè®¡"
    ]
  },
  {
    "objectID": "1045-rstatix.html#å°ç»“",
    "href": "1045-rstatix.html#å°ç»“",
    "title": "rstatix ç®¡é“å¼ç»Ÿè®¡åˆ†æ",
    "section": "å°ç»“",
    "text": "å°ç»“\nrstatix çš„æ ¸å¿ƒä»·å€¼ï¼š\n\nç®¡é“è¯­æ³•ï¼šä¸ tidyverse æ— ç¼è¡”æ¥\næ•´æ´è¾“å‡ºï¼šç»“æœå³ data frameï¼Œä¾¿äºåç»­å¤„ç†\nä¸€ç«™å¼æ£€éªŒï¼šæ­£æ€æ€§ã€æ–¹å·®é½æ€§ã€ç»Ÿè®¡æ£€éªŒä¸€æ°”å‘µæˆ\næ•ˆåº”é‡å†…ç½®ï¼šä¸éœ€è¦é¢å¤–åŒ…è®¡ç®—æ•ˆåº”é‡\nå¯è§†åŒ–å‹å¥½ï¼šä¸ ggpubr é…åˆè¿›è¡Œç»Ÿè®¡æ ‡æ³¨\n\n\né€‚ç”¨åœºæ™¯ï¼šå½“ä½ éœ€è¦è¿›è¡Œå¸¸è§„ç»Ÿè®¡æ£€éªŒï¼Œå¹¶å¸Œæœ›ç»“æœèƒ½ç›´æ¥ç”¨äºæŠ¥å‘Šæˆ–å¯è§†åŒ–æ—¶ï¼Œrstatix æ˜¯æœ€ä½³é€‰æ‹©ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "rstatix - ç®¡é“å¼ç»Ÿè®¡"
    ]
  },
  {
    "objectID": "1045-rstatix.html#å‚è€ƒèµ„æº",
    "href": "1045-rstatix.html#å‚è€ƒèµ„æº",
    "title": "rstatix ç®¡é“å¼ç»Ÿè®¡åˆ†æ",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nrstatix å®˜æ–¹æ–‡æ¡£\nrstatix GitHub\nDatanovia ç»Ÿè®¡æ•™ç¨‹",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "rstatix - ç®¡é“å¼ç»Ÿè®¡"
    ]
  },
  {
    "objectID": "1047-roc-analysis.html",
    "href": "1047-roc-analysis.html",
    "title": "ROC åˆ†æä¸æ¨¡å‹è¯„ä¼°",
    "section": "",
    "text": "ROCï¼ˆReceiver Operating Characteristicï¼‰æ›²çº¿æ˜¯è¯„ä¼°äºŒåˆ†ç±»æ¨¡å‹æ€§èƒ½çš„é‡è¦å·¥å…·ï¼Œå±•ç¤ºäº†ä¸åŒé˜ˆå€¼ä¸‹çµæ•åº¦ä¸ç‰¹å¼‚åº¦çš„æƒè¡¡å…³ç³»ã€‚\n\n\n\n\n\næŒ‡æ ‡\nå…¬å¼\nå«ä¹‰\n\n\n\n\nçµæ•åº¦ (Sensitivity)\nTP/(TP+FN)\nçœŸé˜³æ€§ç‡ï¼Œæ£€å‡ºç‡\n\n\nç‰¹å¼‚åº¦ (Specificity)\nTN/(TN+FP)\nçœŸé˜´æ€§ç‡\n\n\nAUC\næ›²çº¿ä¸‹é¢ç§¯\næ¨¡å‹åŒºåˆ†èƒ½åŠ›ï¼Œ0.5-1",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "ROC åˆ†æ"
    ]
  },
  {
    "objectID": "1047-roc-analysis.html#roc-åˆ†æç®€ä»‹",
    "href": "1047-roc-analysis.html#roc-åˆ†æç®€ä»‹",
    "title": "ROC åˆ†æä¸æ¨¡å‹è¯„ä¼°",
    "section": "",
    "text": "ROCï¼ˆReceiver Operating Characteristicï¼‰æ›²çº¿æ˜¯è¯„ä¼°äºŒåˆ†ç±»æ¨¡å‹æ€§èƒ½çš„é‡è¦å·¥å…·ï¼Œå±•ç¤ºäº†ä¸åŒé˜ˆå€¼ä¸‹çµæ•åº¦ä¸ç‰¹å¼‚åº¦çš„æƒè¡¡å…³ç³»ã€‚\n\n\n\n\n\næŒ‡æ ‡\nå…¬å¼\nå«ä¹‰\n\n\n\n\nçµæ•åº¦ (Sensitivity)\nTP/(TP+FN)\nçœŸé˜³æ€§ç‡ï¼Œæ£€å‡ºç‡\n\n\nç‰¹å¼‚åº¦ (Specificity)\nTN/(TN+FP)\nçœŸé˜´æ€§ç‡\n\n\nAUC\næ›²çº¿ä¸‹é¢ç§¯\næ¨¡å‹åŒºåˆ†èƒ½åŠ›ï¼Œ0.5-1",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "ROC åˆ†æ"
    ]
  },
  {
    "objectID": "1047-roc-analysis.html#å®‰è£…ä¸åŠ è½½",
    "href": "1047-roc-analysis.html#å®‰è£…ä¸åŠ è½½",
    "title": "ROC åˆ†æä¸æ¨¡å‹è¯„ä¼°",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\nlibrary(pROC)\nlibrary(ggplot2)\nlibrary(dplyr)\n\ntheme_set(theme_bw(base_size = 12))\nset.seed(42)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "ROC åˆ†æ"
    ]
  },
  {
    "objectID": "1047-roc-analysis.html#ç¬¬ä¸€éƒ¨åˆ†roc-æ›²çº¿ç»‘åˆ¶",
    "href": "1047-roc-analysis.html#ç¬¬ä¸€éƒ¨åˆ†roc-æ›²çº¿ç»‘åˆ¶",
    "title": "ROC åˆ†æä¸æ¨¡å‹è¯„ä¼°",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šROC æ›²çº¿ç»‘åˆ¶",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šROC æ›²çº¿ç»‘åˆ¶\n\nåˆ›å»ºç¤ºä¾‹æ•°æ®\n\n# æ¨¡æ‹ŸäºŒåˆ†ç±»æ•°æ®\nn &lt;- 200\ndf &lt;- data.frame(\n    outcome = rbinom(n, 1, 0.4),\n    predictor1 = rnorm(n),\n    predictor2 = rnorm(n)\n)\ndf$predictor1 &lt;- df$predictor1 + df$outcome * 1.2\ndf$predictor2 &lt;- df$predictor2 + df$outcome * 0.8\n\n# æ‹Ÿåˆ logistic å›å½’\nmodel &lt;- glm(outcome ~ predictor1 + predictor2, data = df, family = binomial)\ndf$prob &lt;- predict(model, type = \"response\")\n\n\n\nè®¡ç®— ROC æ›²çº¿\n\n# ä½¿ç”¨ pROC åŒ…\nroc_obj &lt;- roc(df$outcome, df$prob)\nroc_obj\n\n\nCall:\nroc.default(response = df$outcome, predictor = df$prob)\n\nData: df$prob in 108 controls (df$outcome 0) &lt; 92 cases (df$outcome 1).\nArea under the curve: 0.8393\n\n\n\n\nç»‘åˆ¶ ROC æ›²çº¿\n\n# åŸºç¡€ç»‘å›¾\nplot(roc_obj,\n    col = \"#4f46e5\",\n    lwd = 2,\n    main = \"ROC æ›²çº¿\"\n)\n\n\n\n\n\n\n\n\n\n# ggplot2 é£æ ¼\nggroc(roc_obj, color = \"#4f46e5\", size = 1.2) +\n    geom_abline(slope = 1, intercept = 1, linetype = \"dashed\", color = \"gray50\") +\n    labs(title = \"ROC æ›²çº¿\", x = \"ç‰¹å¼‚åº¦\", y = \"çµæ•åº¦\") +\n    theme(plot.title = element_text(hjust = 0.5, face = \"bold\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "ROC åˆ†æ"
    ]
  },
  {
    "objectID": "1047-roc-analysis.html#ç¬¬äºŒéƒ¨åˆ†auc-è®¡ç®—ä¸ç½®ä¿¡åŒºé—´",
    "href": "1047-roc-analysis.html#ç¬¬äºŒéƒ¨åˆ†auc-è®¡ç®—ä¸ç½®ä¿¡åŒºé—´",
    "title": "ROC åˆ†æä¸æ¨¡å‹è¯„ä¼°",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šAUC è®¡ç®—ä¸ç½®ä¿¡åŒºé—´",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šAUC è®¡ç®—ä¸ç½®ä¿¡åŒºé—´\n\nAUC å€¼\n\n# AUC\nauc(roc_obj)\n\nArea under the curve: 0.8393\n\n\n\n\nç½®ä¿¡åŒºé—´ï¼ˆBootstrapï¼‰\n\n# 95% CI\nci.auc(roc_obj, conf.level = 0.95, method = \"bootstrap\", boot.n = 1000)\n\n95% CI: 0.786-0.8891 (1000 stratified bootstrap replicates)\n\n\n\n\nAUC è§£é‡Š\n\n\n\nAUC èŒƒå›´\næ¨¡å‹è¡¨ç°\n\n\n\n\n0.9-1.0\nä¼˜ç§€\n\n\n0.8-0.9\nè‰¯å¥½\n\n\n0.7-0.8\nä¸€èˆ¬\n\n\n0.6-0.7\nè¾ƒå·®\n\n\n0.5-0.6\næ— æ„ä¹‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "ROC åˆ†æ"
    ]
  },
  {
    "objectID": "1047-roc-analysis.html#ç¬¬ä¸‰éƒ¨åˆ†æœ€ä½³æˆªæ–­å€¼",
    "href": "1047-roc-analysis.html#ç¬¬ä¸‰éƒ¨åˆ†æœ€ä½³æˆªæ–­å€¼",
    "title": "ROC åˆ†æä¸æ¨¡å‹è¯„ä¼°",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šæœ€ä½³æˆªæ–­å€¼",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šæœ€ä½³æˆªæ–­å€¼\n\nçº¦ç™»æŒ‡æ•°æ³•\n\n# çº¦ç™»æŒ‡æ•° = çµæ•åº¦ + ç‰¹å¼‚åº¦ - 1\ncoords_youden &lt;- coords(roc_obj, \"best\", ret = \"all\", best.method = \"youden\")\ncoords_youden\n\n          threshold specificity sensitivity accuracy tn tp fn fp       npv\nthreshold    0.4445   0.7685185   0.7717391     0.77 83 71 21 25 0.7980769\n                ppv       fdr       fpr       tpr       tnr       fnr\nthreshold 0.7395833 0.2604167 0.2314815 0.7717391 0.7685185 0.2282609\n          1-specificity 1-sensitivity 1-accuracy     1-npv     1-ppv precision\nthreshold     0.2314815     0.2282609       0.23 0.2019231 0.2604167 0.7395833\n             recall   lr_pos    lr_neg   youden closest.topleft\nthreshold 0.7717391 3.333913 0.2970141 1.540258       0.1056867\n\n\n\n\nå…¶ä»–æ–¹æ³•\n\n# æœ€æ¥è¿‘å·¦ä¸Šè§’\ncoords_closest &lt;- coords(roc_obj, \"best\", ret = \"all\", best.method = \"closest.topleft\")\n\n# æŒ‡å®šçµæ•åº¦\ncoords_sens &lt;- coords(roc_obj, x = 0.9, input = \"sensitivity\", ret = \"all\")\ncoords_sens\n\n          threshold specificity sensitivity accuracy tn   tp  fn fp       npv\nthreshold        NA    0.537037         0.9    0.704 58 82.8 9.2 50 0.8630952\n               ppv      fdr      fpr tpr      tnr fnr 1-specificity\nthreshold 0.623494 0.376506 0.462963 0.9 0.537037 0.1      0.462963\n          1-sensitivity 1-accuracy     1-npv    1-ppv precision recall lr_pos\nthreshold           0.1      0.296 0.1369048 0.376506  0.623494    0.9  1.944\n             lr_neg   youden closest.topleft\nthreshold 0.1862069 1.437037       0.2243347\n\n\n\n\nå¯è§†åŒ–æœ€ä½³ç‚¹\n\nbest_threshold &lt;- coords_youden$threshold\n\nggroc(roc_obj, color = \"#4f46e5\", size = 1.2) +\n    geom_point(\n        aes(x = coords_youden$specificity, y = coords_youden$sensitivity),\n        color = \"red\", size = 4\n    ) +\n    annotate(\"text\",\n        x = coords_youden$specificity - 0.1,\n        y = coords_youden$sensitivity + 0.05,\n        label = paste0(\"æœ€ä½³é˜ˆå€¼ = \", round(best_threshold, 3)),\n        color = \"red\"\n    ) +\n    labs(title = \"ROC æ›²çº¿ä¸æœ€ä½³æˆªæ–­ç‚¹\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "ROC åˆ†æ"
    ]
  },
  {
    "objectID": "1047-roc-analysis.html#ç¬¬å››éƒ¨åˆ†æ¯”è¾ƒå¤šæ¡-roc-æ›²çº¿",
    "href": "1047-roc-analysis.html#ç¬¬å››éƒ¨åˆ†æ¯”è¾ƒå¤šæ¡-roc-æ›²çº¿",
    "title": "ROC åˆ†æä¸æ¨¡å‹è¯„ä¼°",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šæ¯”è¾ƒå¤šæ¡ ROC æ›²çº¿",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šæ¯”è¾ƒå¤šæ¡ ROC æ›²çº¿\n\nDeLong æ£€éªŒ\n\n# ä¸¤ä¸ªé¢„æµ‹æ¨¡å‹\nroc1 &lt;- roc(df$outcome, df$predictor1)\nroc2 &lt;- roc(df$outcome, df$prob)\n\n# DeLong æ£€éªŒæ¯”è¾ƒ AUC\ntest_result &lt;- roc.test(roc1, roc2, method = \"delong\")\ntest_result\n\n\n    DeLong's test for two correlated ROC curves\n\ndata:  roc1 and roc2\nZ = -1.7223, p-value = 0.08502\nalternative hypothesis: true difference in AUC is not equal to 0\n95 percent confidence interval:\n -0.055085139  0.003555348\nsample estimates:\nAUC of roc1 AUC of roc2 \n  0.8135064   0.8392713 \n\n\n\n\nç»‘åˆ¶å¤šæ¡æ›²çº¿\n\n# ç»„åˆç»‘å›¾\nroc_list &lt;- list(\n    \"å•å˜é‡\" = roc1,\n    \"å¤šå˜é‡æ¨¡å‹\" = roc2\n)\n\nggroc(roc_list, size = 1) +\n    scale_color_manual(values = c(\"#4f46e5\", \"#10b981\")) +\n    geom_abline(slope = 1, intercept = 1, linetype = \"dashed\", color = \"gray50\") +\n    labs(\n        title = \"ROC æ›²çº¿æ¯”è¾ƒ\",\n        color = \"æ¨¡å‹\",\n        x = \"ç‰¹å¼‚åº¦\",\n        y = \"çµæ•åº¦\"\n    ) +\n    theme(legend.position = \"bottom\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "ROC åˆ†æ"
    ]
  },
  {
    "objectID": "1047-roc-analysis.html#ç¬¬äº”éƒ¨åˆ†æ ¡å‡†æ›²çº¿",
    "href": "1047-roc-analysis.html#ç¬¬äº”éƒ¨åˆ†æ ¡å‡†æ›²çº¿",
    "title": "ROC åˆ†æä¸æ¨¡å‹è¯„ä¼°",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šæ ¡å‡†æ›²çº¿",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šæ ¡å‡†æ›²çº¿\næ ¡å‡†æ›²çº¿è¯„ä¼°é¢„æµ‹æ¦‚ç‡ä¸å®é™…æ¦‚ç‡çš„ä¸€è‡´æ€§ã€‚\n\n# åˆ›å»ºæ ¡å‡†æ•°æ®\ndf$prob_group &lt;- cut(df$prob, breaks = seq(0, 1, 0.1), include.lowest = TRUE)\n\ncalibration_data &lt;- df %&gt;%\n    group_by(prob_group) %&gt;%\n    summarise(\n        mean_pred = mean(prob),\n        mean_obs = mean(outcome),\n        n = n()\n    ) %&gt;%\n    filter(n &gt;= 5)\n\n# ç»‘åˆ¶æ ¡å‡†æ›²çº¿\nggplot(calibration_data, aes(x = mean_pred, y = mean_obs)) +\n    geom_point(aes(size = n), color = \"#4f46e5\") +\n    geom_abline(slope = 1, intercept = 0, linetype = \"dashed\") +\n    geom_smooth(method = \"loess\", se = FALSE, color = \"#ef4444\") +\n    labs(\n        title = \"æ ¡å‡†æ›²çº¿\",\n        x = \"é¢„æµ‹æ¦‚ç‡\",\n        y = \"è§‚å¯Ÿæ¦‚ç‡\"\n    ) +\n    coord_equal(xlim = c(0, 1), ylim = c(0, 1))",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "ROC åˆ†æ"
    ]
  },
  {
    "objectID": "1047-roc-analysis.html#ç¬¬å…­éƒ¨åˆ†å®Œæ•´æ¡ˆä¾‹",
    "href": "1047-roc-analysis.html#ç¬¬å…­éƒ¨åˆ†å®Œæ•´æ¡ˆä¾‹",
    "title": "ROC åˆ†æä¸æ¨¡å‹è¯„ä¼°",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šå®Œæ•´æ¡ˆä¾‹",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šå®Œæ•´æ¡ˆä¾‹\n\n# 1. æ•°æ®å‡†å¤‡\ndata(PimaIndiansDiabetes2, package = \"mlbench\")\npima &lt;- na.omit(PimaIndiansDiabetes2)\npima$diabetes &lt;- ifelse(pima$diabetes == \"pos\", 1, 0)\n\n# 2. æ‹Ÿåˆæ¨¡å‹\nfit &lt;- glm(diabetes ~ glucose + mass + age, data = pima, family = binomial)\npima$pred_prob &lt;- predict(fit, type = \"response\")\n\n# 3. ROC åˆ†æ\nroc_pima &lt;- roc(pima$diabetes, pima$pred_prob)\n\n# 4. è¾“å‡ºç»“æœ\ncat(\"AUC:\", round(auc(roc_pima), 3), \"\\n\")\n\nAUC: 0.849 \n\ncat(\"95% CI:\", paste(round(ci.auc(roc_pima), 3), collapse = \" - \"), \"\\n\")\n\n95% CI: 0.809 - 0.849 - 0.888 \n\n# 5. æœ€ä½³é˜ˆå€¼\nbest &lt;- coords(roc_pima, \"best\", ret = c(\"threshold\", \"sensitivity\", \"specificity\"))\ncat(\"\\næœ€ä½³é˜ˆå€¼:\", round(best$threshold, 3), \"\\n\")\n\n\næœ€ä½³é˜ˆå€¼: 0.269 \n\ncat(\"çµæ•åº¦:\", round(best$sensitivity, 3), \"\\n\")\n\nçµæ•åº¦: 0.815 \n\ncat(\"ç‰¹å¼‚åº¦:\", round(best$specificity, 3), \"\\n\")\n\nç‰¹å¼‚åº¦: 0.74",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "ROC åˆ†æ"
    ]
  },
  {
    "objectID": "1047-roc-analysis.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "1047-roc-analysis.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "ROC åˆ†æä¸æ¨¡å‹è¯„ä¼°",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# åŸºç¡€ ROC\nroc_obj &lt;- roc(outcome, predictor)\nplot(roc_obj)\nggroc(roc_obj)\n\n# AUC\nauc(roc_obj)\nci.auc(roc_obj)\n\n# æœ€ä½³é˜ˆå€¼\ncoords(roc_obj, \"best\", best.method = \"youden\")\ncoords(roc_obj, x = 0.9, input = \"sensitivity\")\n\n# æ¯”è¾ƒ ROC\nroc.test(roc1, roc2)\n\n# æŒ‡å®šé˜ˆå€¼çš„æ€§èƒ½\ncoords(roc_obj, x = 0.5, input = \"threshold\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "ROC åˆ†æ"
    ]
  },
  {
    "objectID": "1047-roc-analysis.html#å°ç»“",
    "href": "1047-roc-analysis.html#å°ç»“",
    "title": "ROC åˆ†æä¸æ¨¡å‹è¯„ä¼°",
    "section": "å°ç»“",
    "text": "å°ç»“\nROC åˆ†ææ ¸å¿ƒè¦ç‚¹ï¼š\n\nAUC è¡¡é‡æ•´ä½“åŒºåˆ†èƒ½åŠ›\næœ€ä½³é˜ˆå€¼ å¹³è¡¡çµæ•åº¦ä¸ç‰¹å¼‚åº¦\nDeLongæ£€éªŒ æ¯”è¾ƒæ¨¡å‹ä¼˜åŠ£\næ ¡å‡†æ›²çº¿ è¯„ä¼°é¢„æµ‹å¯é æ€§\n\n\næ³¨æ„ï¼šé«˜ AUC ä¸ç­‰äºå¥½çš„æ ¡å‡†ï¼Œä¸¤è€…åº”åŒæ—¶è¯„ä¼°ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "ROC åˆ†æ"
    ]
  },
  {
    "objectID": "1047-roc-analysis.html#å‚è€ƒèµ„æº",
    "href": "1047-roc-analysis.html#å‚è€ƒèµ„æº",
    "title": "ROC åˆ†æä¸æ¨¡å‹è¯„ä¼°",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\npROC åŒ…æ–‡æ¡£\nROCæ›²çº¿è§£è¯»æŒ‡å—",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "ROC åˆ†æ"
    ]
  },
  {
    "objectID": "1049-eda.html",
    "href": "1049-eda.html",
    "title": "æ¢ç´¢æ€§æ•°æ®åˆ†æ (EDA)",
    "section": "",
    "text": "æ¢ç´¢æ€§æ•°æ®åˆ†æï¼ˆExploratory Data Analysis, EDAï¼‰æ˜¯ç†è§£æ•°æ®ç‰¹å¾ã€å‘ç°æ¨¡å¼å’Œå¼‚å¸¸çš„å…³é”®æ­¥éª¤ï¼Œä¸ºåç»­åˆ†æå¥ å®šåŸºç¡€ã€‚\n\n\n\n\n\nç›®æ ‡\nå…³æ³¨ç‚¹\n\n\n\n\näº†è§£æ•°æ®ç»“æ„\nå˜é‡ç±»å‹ã€ç»´åº¦ã€å®Œæ•´æ€§\n\n\næè¿°åˆ†å¸ƒç‰¹å¾\né›†ä¸­è¶‹åŠ¿ã€ç¦»æ•£ç¨‹åº¦ã€åæ€\n\n\nå‘ç°å˜é‡å…³ç³»\nç›¸å…³æ€§ã€åˆ†ç»„å·®å¼‚\n\n\nè¯†åˆ«å¼‚å¸¸å€¼\nç¦»ç¾¤ç‚¹ã€æ•°æ®é”™è¯¯",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ¢ç´¢æ€§æ•°æ®åˆ†æ"
    ]
  },
  {
    "objectID": "1049-eda.html#eda-ç®€ä»‹",
    "href": "1049-eda.html#eda-ç®€ä»‹",
    "title": "æ¢ç´¢æ€§æ•°æ®åˆ†æ (EDA)",
    "section": "",
    "text": "æ¢ç´¢æ€§æ•°æ®åˆ†æï¼ˆExploratory Data Analysis, EDAï¼‰æ˜¯ç†è§£æ•°æ®ç‰¹å¾ã€å‘ç°æ¨¡å¼å’Œå¼‚å¸¸çš„å…³é”®æ­¥éª¤ï¼Œä¸ºåç»­åˆ†æå¥ å®šåŸºç¡€ã€‚\n\n\n\n\n\nç›®æ ‡\nå…³æ³¨ç‚¹\n\n\n\n\näº†è§£æ•°æ®ç»“æ„\nå˜é‡ç±»å‹ã€ç»´åº¦ã€å®Œæ•´æ€§\n\n\næè¿°åˆ†å¸ƒç‰¹å¾\né›†ä¸­è¶‹åŠ¿ã€ç¦»æ•£ç¨‹åº¦ã€åæ€\n\n\nå‘ç°å˜é‡å…³ç³»\nç›¸å…³æ€§ã€åˆ†ç»„å·®å¼‚\n\n\nè¯†åˆ«å¼‚å¸¸å€¼\nç¦»ç¾¤ç‚¹ã€æ•°æ®é”™è¯¯",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ¢ç´¢æ€§æ•°æ®åˆ†æ"
    ]
  },
  {
    "objectID": "1049-eda.html#å®‰è£…ä¸åŠ è½½",
    "href": "1049-eda.html#å®‰è£…ä¸åŠ è½½",
    "title": "æ¢ç´¢æ€§æ•°æ®åˆ†æ (EDA)",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(skimr) # å¿«é€Ÿæ•°æ®æ‘˜è¦\nlibrary(DataExplorer) # è‡ªåŠ¨åŒ–EDAæŠ¥å‘Š\nlibrary(corrplot) # ç›¸å…³çŸ©é˜µå¯è§†åŒ–\n\ntheme_set(theme_bw(base_size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ¢ç´¢æ€§æ•°æ®åˆ†æ"
    ]
  },
  {
    "objectID": "1049-eda.html#ç¬¬ä¸€éƒ¨åˆ†æ•°æ®æ¦‚è§ˆ",
    "href": "1049-eda.html#ç¬¬ä¸€éƒ¨åˆ†æ•°æ®æ¦‚è§ˆ",
    "title": "æ¢ç´¢æ€§æ•°æ®åˆ†æ (EDA)",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ•°æ®æ¦‚è§ˆ",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ•°æ®æ¦‚è§ˆ\n\nåŸºç¡€æ£€æŸ¥\n\n# ä½¿ç”¨å†…ç½®æ•°æ®é›†\ndata(mtcars)\ndf &lt;- mtcars\n\n# ç»´åº¦\ndim(df)\n\n[1] 32 11\n\n# ç»“æ„\nstr(df)\n\n'data.frame':   32 obs. of  11 variables:\n $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...\n $ cyl : num  6 6 4 6 8 6 8 4 4 6 ...\n $ disp: num  160 160 108 258 360 ...\n $ hp  : num  110 110 93 110 175 105 245 62 95 123 ...\n $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...\n $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...\n $ qsec: num  16.5 17 18.6 19.4 17 ...\n $ vs  : num  0 0 1 1 0 1 0 1 1 1 ...\n $ am  : num  1 1 1 0 0 0 0 0 0 0 ...\n $ gear: num  4 4 4 3 3 3 3 4 4 4 ...\n $ carb: num  4 4 1 1 2 1 4 2 2 4 ...\n\n# å‰å‡ è¡Œ\nhead(df)\n\n                   mpg cyl disp  hp drat    wt  qsec vs am gear carb\nMazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4\nMazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4\nDatsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1\nHornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1\nHornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2\nValiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1\n\n\n\n\nä½¿ç”¨ skimr\n\n# å¿«é€Ÿå…¨é¢æ‘˜è¦\nskim(df)\n\n\nData summary\n\n\nName\ndf\n\n\nNumber of rows\n32\n\n\nNumber of columns\n11\n\n\n_______________________\n\n\n\nColumn type frequency:\n\n\n\nnumeric\n11\n\n\n________________________\n\n\n\nGroup variables\nNone\n\n\n\nVariable type: numeric\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmean\nsd\np0\np25\np50\np75\np100\nhist\n\n\n\n\nmpg\n0\n1\n20.09\n6.03\n10.40\n15.43\n19.20\n22.80\n33.90\nâ–ƒâ–‡â–…â–â–‚\n\n\ncyl\n0\n1\n6.19\n1.79\n4.00\n4.00\n6.00\n8.00\n8.00\nâ–†â–â–ƒâ–â–‡\n\n\ndisp\n0\n1\n230.72\n123.94\n71.10\n120.83\n196.30\n326.00\n472.00\nâ–‡â–ƒâ–ƒâ–ƒâ–‚\n\n\nhp\n0\n1\n146.69\n68.56\n52.00\n96.50\n123.00\n180.00\n335.00\nâ–‡â–‡â–†â–ƒâ–\n\n\ndrat\n0\n1\n3.60\n0.53\n2.76\n3.08\n3.70\n3.92\n4.93\nâ–‡â–ƒâ–‡â–…â–\n\n\nwt\n0\n1\n3.22\n0.98\n1.51\n2.58\n3.33\n3.61\n5.42\nâ–ƒâ–ƒâ–‡â–â–‚\n\n\nqsec\n0\n1\n17.85\n1.79\n14.50\n16.89\n17.71\n18.90\n22.90\nâ–ƒâ–‡â–‡â–‚â–\n\n\nvs\n0\n1\n0.44\n0.50\n0.00\n0.00\n0.00\n1.00\n1.00\nâ–‡â–â–â–â–†\n\n\nam\n0\n1\n0.41\n0.50\n0.00\n0.00\n0.00\n1.00\n1.00\nâ–‡â–â–â–â–†\n\n\ngear\n0\n1\n3.69\n0.74\n3.00\n3.00\n4.00\n4.00\n5.00\nâ–‡â–â–†â–â–‚\n\n\ncarb\n0\n1\n2.81\n1.62\n1.00\n2.00\n2.00\n4.00\n8.00\nâ–‡â–‚â–…â–â–\n\n\n\n\n\n\n\nä½¿ç”¨ DataExplorer\n\n# æ•°æ®æ¦‚è§ˆ\nintroduce(df)\n\n  rows columns discrete_columns continuous_columns all_missing_columns\n1   32      11                0                 11                   0\n  total_missing_values complete_rows total_observations memory_usage\n1                    0            32                352         5928\n\n\n\n# å¯è§†åŒ–æ•°æ®ç±»å‹\nplot_intro(df)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ¢ç´¢æ€§æ•°æ®åˆ†æ"
    ]
  },
  {
    "objectID": "1049-eda.html#ç¬¬äºŒéƒ¨åˆ†å•å˜é‡åˆ†æ",
    "href": "1049-eda.html#ç¬¬äºŒéƒ¨åˆ†å•å˜é‡åˆ†æ",
    "title": "æ¢ç´¢æ€§æ•°æ®åˆ†æ (EDA)",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šå•å˜é‡åˆ†æ",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šå•å˜é‡åˆ†æ\n\næ•°å€¼å˜é‡åˆ†å¸ƒ\n\n# ç›´æ–¹å›¾\nggplot(df, aes(x = mpg)) +\n    geom_histogram(bins = 15, fill = \"#4f46e5\", color = \"white\") +\n    labs(title = \"MPG åˆ†å¸ƒ\", x = \"æ²¹è€— (MPG)\", y = \"é¢‘æ•°\")\n\n\n\n\n\n\n\n\n\n# å¯†åº¦å›¾\nggplot(df, aes(x = mpg)) +\n    geom_density(fill = \"#4f46e5\", alpha = 0.5) +\n    geom_rug()\n\n\n\n\n\n\n\n\n\n# æ‰¹é‡ç›´æ–¹å›¾\nplot_histogram(df)\n\n\n\n\n\n\n\n\n\n\nåˆ†ç±»å˜é‡åˆ†å¸ƒ\n\n# æŸ±çŠ¶å›¾\ndf$cyl &lt;- as.factor(df$cyl)\ndf$am &lt;- factor(df$am, labels = c(\"è‡ªåŠ¨\", \"æ‰‹åŠ¨\"))\n\nggplot(df, aes(x = cyl)) +\n    geom_bar(fill = \"#10b981\") +\n    labs(title = \"æ°”ç¼¸æ•°åˆ†å¸ƒ\", x = \"æ°”ç¼¸æ•°\", y = \"æ•°é‡\")\n\n\n\n\n\n\n\n\n\n\næè¿°æ€§ç»Ÿè®¡\n\n# æ±‡æ€»ç»Ÿè®¡\ndf %&gt;%\n    select(mpg, hp, wt, qsec) %&gt;%\n    summary()\n\n      mpg              hp              wt             qsec      \n Min.   :10.40   Min.   : 52.0   Min.   :1.513   Min.   :14.50  \n 1st Qu.:15.43   1st Qu.: 96.5   1st Qu.:2.581   1st Qu.:16.89  \n Median :19.20   Median :123.0   Median :3.325   Median :17.71  \n Mean   :20.09   Mean   :146.7   Mean   :3.217   Mean   :17.85  \n 3rd Qu.:22.80   3rd Qu.:180.0   3rd Qu.:3.610   3rd Qu.:18.90  \n Max.   :33.90   Max.   :335.0   Max.   :5.424   Max.   :22.90",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ¢ç´¢æ€§æ•°æ®åˆ†æ"
    ]
  },
  {
    "objectID": "1049-eda.html#ç¬¬ä¸‰éƒ¨åˆ†åŒå˜é‡åˆ†æ",
    "href": "1049-eda.html#ç¬¬ä¸‰éƒ¨åˆ†åŒå˜é‡åˆ†æ",
    "title": "æ¢ç´¢æ€§æ•°æ®åˆ†æ (EDA)",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šåŒå˜é‡åˆ†æ",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šåŒå˜é‡åˆ†æ\n\næ•°å€¼ vs æ•°å€¼\n\n# æ•£ç‚¹å›¾\nggplot(df, aes(x = wt, y = mpg)) +\n    geom_point(color = \"#4f46e5\", size = 3, alpha = 0.7) +\n    geom_smooth(method = \"lm\", color = \"#ef4444\") +\n    labs(title = \"é‡é‡ä¸æ²¹è€—çš„å…³ç³»\")\n\n\n\n\n\n\n\n\n\n# æ•£ç‚¹å›¾çŸ©é˜µ\npairs(df[, c(\"mpg\", \"hp\", \"wt\", \"qsec\")],\n    pch = 19,\n    col = \"#4f46e5\"\n)\n\n\n\n\n\n\n\n\n\n\næ•°å€¼ vs åˆ†ç±»\n\n# åˆ†ç»„ç®±çº¿å›¾\nggplot(df, aes(x = cyl, y = mpg, fill = cyl)) +\n    geom_boxplot() +\n    scale_fill_brewer(palette = \"Set2\") +\n    labs(title = \"ä¸åŒæ°”ç¼¸æ•°çš„æ²¹è€—åˆ†å¸ƒ\")\n\n\n\n\n\n\n\n\n\n# å°æç´å›¾ + ç‚¹å›¾\nggplot(df, aes(x = cyl, y = mpg)) +\n    geom_violin(fill = \"#4f46e5\", alpha = 0.3) +\n    geom_jitter(width = 0.1, alpha = 0.7)\n\n\n\n\n\n\n\n\n\n\nåˆ†ç±» vs åˆ†ç±»\n\n# äº¤å‰è¡¨\ntable(df$cyl, df$am)\n\n   \n    è‡ªåŠ¨ æ‰‹åŠ¨\n  4    3    8\n  6    4    3\n  8   12    2\n\n\n\n# å †å æŸ±çŠ¶å›¾\nggplot(df, aes(x = cyl, fill = am)) +\n    geom_bar(position = \"dodge\") +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\")) +\n    labs(title = \"å˜é€Ÿç®±ç±»å‹æŒ‰æ°”ç¼¸æ•°åˆ†å¸ƒ\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ¢ç´¢æ€§æ•°æ®åˆ†æ"
    ]
  },
  {
    "objectID": "1049-eda.html#ç¬¬å››éƒ¨åˆ†ç›¸å…³åˆ†æ",
    "href": "1049-eda.html#ç¬¬å››éƒ¨åˆ†ç›¸å…³åˆ†æ",
    "title": "æ¢ç´¢æ€§æ•°æ®åˆ†æ (EDA)",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šç›¸å…³åˆ†æ",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šç›¸å…³åˆ†æ\n\nç›¸å…³ç³»æ•°çŸ©é˜µ\n\n# æ•°å€¼å˜é‡ç›¸å…³\nnumeric_vars &lt;- df %&gt;% select(where(is.numeric))\ncor_matrix &lt;- cor(numeric_vars)\nround(cor_matrix, 2)\n\n       mpg  disp    hp  drat    wt  qsec    vs  gear  carb\nmpg   1.00 -0.85 -0.78  0.68 -0.87  0.42  0.66  0.48 -0.55\ndisp -0.85  1.00  0.79 -0.71  0.89 -0.43 -0.71 -0.56  0.39\nhp   -0.78  0.79  1.00 -0.45  0.66 -0.71 -0.72 -0.13  0.75\ndrat  0.68 -0.71 -0.45  1.00 -0.71  0.09  0.44  0.70 -0.09\nwt   -0.87  0.89  0.66 -0.71  1.00 -0.17 -0.55 -0.58  0.43\nqsec  0.42 -0.43 -0.71  0.09 -0.17  1.00  0.74 -0.21 -0.66\nvs    0.66 -0.71 -0.72  0.44 -0.55  0.74  1.00  0.21 -0.57\ngear  0.48 -0.56 -0.13  0.70 -0.58 -0.21  0.21  1.00  0.27\ncarb -0.55  0.39  0.75 -0.09  0.43 -0.66 -0.57  0.27  1.00\n\n\n\n\nç›¸å…³çŸ©é˜µå¯è§†åŒ–\n\ncorrplot(cor_matrix,\n    method = \"color\",\n    type = \"upper\",\n    addCoef.col = \"black\",\n    tl.col = \"black\",\n    tl.srt = 45,\n    diag = FALSE\n)\n\n\n\n\n\n\n\n\n\n# DataExplorer æ–¹å¼\nplot_correlation(numeric_vars)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ¢ç´¢æ€§æ•°æ®åˆ†æ"
    ]
  },
  {
    "objectID": "1049-eda.html#ç¬¬äº”éƒ¨åˆ†å¼‚å¸¸å€¼æ£€æµ‹",
    "href": "1049-eda.html#ç¬¬äº”éƒ¨åˆ†å¼‚å¸¸å€¼æ£€æµ‹",
    "title": "æ¢ç´¢æ€§æ•°æ®åˆ†æ (EDA)",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šå¼‚å¸¸å€¼æ£€æµ‹",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šå¼‚å¸¸å€¼æ£€æµ‹\n\nç®±çº¿å›¾æ³•\n\n# è¯†åˆ«å¼‚å¸¸å€¼\nggplot(df, aes(y = hp)) +\n    geom_boxplot(fill = \"#4f46e5\", alpha = 0.7) +\n    labs(title = \"é©¬åŠ›åˆ†å¸ƒä¸å¼‚å¸¸å€¼\")\n\n\n\n\n\n\n\n\n\n# ç»Ÿè®¡å¼‚å¸¸å€¼\nidentify_outliers &lt;- function(x) {\n    Q1 &lt;- quantile(x, 0.25)\n    Q3 &lt;- quantile(x, 0.75)\n    IQR &lt;- Q3 - Q1\n    lower &lt;- Q1 - 1.5 * IQR\n    upper &lt;- Q3 + 1.5 * IQR\n    which(x &lt; lower | x &gt; upper)\n}\n\noutlier_idx &lt;- identify_outliers(df$hp)\ncat(\"å¼‚å¸¸å€¼ç´¢å¼•:\", outlier_idx, \"\\n\")\n\nå¼‚å¸¸å€¼ç´¢å¼•: 31 \n\ncat(\"å¼‚å¸¸å€¼:\", df$hp[outlier_idx])\n\nå¼‚å¸¸å€¼: 335\n\n\n\n\nZ-score æ³•\n\ndf$hp_zscore &lt;- scale(df$hp)\nsum(abs(df$hp_zscore) &gt; 3) # |z| &gt; 3 çš„å¼‚å¸¸å€¼\n\n[1] 0",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ¢ç´¢æ€§æ•°æ®åˆ†æ"
    ]
  },
  {
    "objectID": "1049-eda.html#ç¬¬å…­éƒ¨åˆ†è‡ªåŠ¨åŒ–-eda-æŠ¥å‘Š",
    "href": "1049-eda.html#ç¬¬å…­éƒ¨åˆ†è‡ªåŠ¨åŒ–-eda-æŠ¥å‘Š",
    "title": "æ¢ç´¢æ€§æ•°æ®åˆ†æ (EDA)",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šè‡ªåŠ¨åŒ– EDA æŠ¥å‘Š",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šè‡ªåŠ¨åŒ– EDA æŠ¥å‘Š\n\nDataExplorer æŠ¥å‘Š\n\n# ç”Ÿæˆå®Œæ•´HTMLæŠ¥å‘Š\ncreate_report(df, output_file = \"eda_report.html\")\n\n\n\nè‡ªå®šä¹‰æŠ¥å‘Š\n\n# åˆ†æ­¥ç”Ÿæˆ\nplot_intro(df) # æ•°æ®æ¦‚è§ˆ\nplot_missing(df) # ç¼ºå¤±å€¼\nplot_histogram(df) # ç›´æ–¹å›¾\nplot_correlation(df) # ç›¸å…³çŸ©é˜µ\nplot_bar(df) # æŸ±çŠ¶å›¾ï¼ˆåˆ†ç±»å˜é‡ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ¢ç´¢æ€§æ•°æ®åˆ†æ"
    ]
  },
  {
    "objectID": "1049-eda.html#ç¬¬ä¸ƒéƒ¨åˆ†å®Œæ•´-eda-æµç¨‹",
    "href": "1049-eda.html#ç¬¬ä¸ƒéƒ¨åˆ†å®Œæ•´-eda-æµç¨‹",
    "title": "æ¢ç´¢æ€§æ•°æ®åˆ†æ (EDA)",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®Œæ•´ EDA æµç¨‹",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®Œæ•´ EDA æµç¨‹\n\n# 1. åŠ è½½æ•°æ®\ndata(iris)\niris_df &lt;- iris\n\n# 2. æ•°æ®æ¦‚è§ˆ\ncat(\"ç»´åº¦:\", dim(iris_df), \"\\n\")\n\nç»´åº¦: 150 5 \n\ncat(\"å˜é‡:\\n\")\n\nå˜é‡:\n\nnames(iris_df)\n\n[1] \"Sepal.Length\" \"Sepal.Width\"  \"Petal.Length\" \"Petal.Width\"  \"Species\"     \n\n\n\n# 3. ç¼ºå¤±å€¼æ£€æŸ¥\ncolSums(is.na(iris_df))\n\nSepal.Length  Sepal.Width Petal.Length  Petal.Width      Species \n           0            0            0            0            0 \n\n\n\n# 4. æè¿°ç»Ÿè®¡\nskim(iris_df)\n\n\nData summary\n\n\nName\niris_df\n\n\nNumber of rows\n150\n\n\nNumber of columns\n5\n\n\n_______________________\n\n\n\nColumn type frequency:\n\n\n\nfactor\n1\n\n\nnumeric\n4\n\n\n________________________\n\n\n\nGroup variables\nNone\n\n\n\nVariable type: factor\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nordered\nn_unique\ntop_counts\n\n\n\n\nSpecies\n0\n1\nFALSE\n3\nset: 50, ver: 50, vir: 50\n\n\n\nVariable type: numeric\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmean\nsd\np0\np25\np50\np75\np100\nhist\n\n\n\n\nSepal.Length\n0\n1\n5.84\n0.83\n4.3\n5.1\n5.80\n6.4\n7.9\nâ–†â–‡â–‡â–…â–‚\n\n\nSepal.Width\n0\n1\n3.06\n0.44\n2.0\n2.8\n3.00\n3.3\n4.4\nâ–â–†â–‡â–‚â–\n\n\nPetal.Length\n0\n1\n3.76\n1.77\n1.0\n1.6\n4.35\n5.1\n6.9\nâ–‡â–â–†â–‡â–‚\n\n\nPetal.Width\n0\n1\n1.20\n0.76\n0.1\n0.3\n1.30\n1.8\n2.5\nâ–‡â–â–‡â–…â–ƒ\n\n\n\n\n\n\n# 5. åˆ†å¸ƒå¯è§†åŒ–\nggplot(iris_df, aes(x = Sepal.Length, fill = Species)) +\n    geom_density(alpha = 0.5) +\n    labs(title = \"è¼ç‰‡é•¿åº¦æŒ‰ç‰©ç§åˆ†å¸ƒ\")\n\n\n\n\n\n\n\n\n\n# 6. å…³ç³»æ¢ç´¢\nggplot(iris_df, aes(x = Sepal.Length, y = Petal.Length, color = Species)) +\n    geom_point(size = 2) +\n    labs(title = \"è¼ç‰‡ä¸èŠ±ç“£é•¿åº¦çš„å…³ç³»\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ¢ç´¢æ€§æ•°æ®åˆ†æ"
    ]
  },
  {
    "objectID": "1049-eda.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "1049-eda.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "æ¢ç´¢æ€§æ•°æ®åˆ†æ (EDA)",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# åŸºç¡€æ£€æŸ¥\ndim(df)\nstr(df)\nhead(df)\nsummary(df)\n\n# skimr\nskim(df)\n\n# DataExplorer\nintroduce(df)\nplot_intro(df)\nplot_missing(df)\nplot_histogram(df)\nplot_bar(df)\nplot_correlation(df)\ncreate_report(df)\n\n# ç›¸å…³çŸ©é˜µ\ncor(df_numeric)\ncorrplot(cor_matrix, method = \"color\")\n\n# å¼‚å¸¸å€¼\nboxplot.stats(x)$out",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ¢ç´¢æ€§æ•°æ®åˆ†æ"
    ]
  },
  {
    "objectID": "1049-eda.html#å°ç»“",
    "href": "1049-eda.html#å°ç»“",
    "title": "æ¢ç´¢æ€§æ•°æ®åˆ†æ (EDA)",
    "section": "å°ç»“",
    "text": "å°ç»“\nEDA æœ€ä½³å®è·µï¼š\n\nå…ˆæ¦‚è§ˆåç»†èŠ‚ï¼šä»æ•´ä½“åˆ°å±€éƒ¨\næ•°å€¼åˆ†ç±»åˆ†å¼€ï¼šä¸åŒç±»å‹ä¸åŒæ–¹æ³•\nå¯è§†åŒ–ä¼˜å…ˆï¼šå›¾æ¯”æ•°å­—æ›´ç›´è§‚\nè®°å½•å‘ç°ï¼šä¸ºåç»­åˆ†æåšå‡†å¤‡\n\n\næç¤ºï¼šEDA æ˜¯è¿­ä»£è¿‡ç¨‹ï¼Œå‘ç°é—®é¢˜åå›å¤´æ¸…æ´—æ•°æ®ï¼Œå†ç»§ç»­æ¢ç´¢ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ¢ç´¢æ€§æ•°æ®åˆ†æ"
    ]
  },
  {
    "objectID": "1049-eda.html#å‚è€ƒèµ„æº",
    "href": "1049-eda.html#å‚è€ƒèµ„æº",
    "title": "æ¢ç´¢æ€§æ•°æ®åˆ†æ (EDA)",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nskimr åŒ…æ–‡æ¡£\nDataExplorer åŒ…æ–‡æ¡£\nR for Data Science - EDAç« èŠ‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "æ¢ç´¢æ€§æ•°æ®åˆ†æ"
    ]
  },
  {
    "objectID": "1051-bayesian.html",
    "href": "1051-bayesian.html",
    "title": "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨ (Bayesian Statistics)",
    "section": "",
    "text": "è´å¶æ–¯ç»Ÿè®¡æ˜¯ä¸€ç§åŸºäºè´å¶æ–¯å®šç†çš„ç»Ÿè®¡æ¨æ–­æ–¹æ³•ã€‚ä¸ä¼ ç»Ÿé¢‘ç‡å­¦æ´¾ä¸åŒï¼Œè´å¶æ–¯æ–¹æ³•å…è®¸æˆ‘ä»¬ç»“åˆå…ˆéªŒçŸ¥è¯†å’Œè§‚æµ‹æ•°æ®æ¥æ›´æ–°å¯¹å‚æ•°çš„ä¿¡å¿µï¼Œåœ¨å°æ ·æœ¬ã€å¤æ‚æ¨¡å‹å’Œä¸ç¡®å®šæ€§é‡åŒ–æ–¹é¢å…·æœ‰ç‹¬ç‰¹ä¼˜åŠ¿ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨"
    ]
  },
  {
    "objectID": "1051-bayesian.html#ä¸ºä»€ä¹ˆå­¦ä¹ è´å¶æ–¯ç»Ÿè®¡",
    "href": "1051-bayesian.html#ä¸ºä»€ä¹ˆå­¦ä¹ è´å¶æ–¯ç»Ÿè®¡",
    "title": "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨ (Bayesian Statistics)",
    "section": "ä¸ºä»€ä¹ˆå­¦ä¹ è´å¶æ–¯ç»Ÿè®¡ï¼Ÿ",
    "text": "ä¸ºä»€ä¹ˆå­¦ä¹ è´å¶æ–¯ç»Ÿè®¡ï¼Ÿ\n\nè´å¶æ–¯ vs é¢‘ç‡å­¦æ´¾\n\n\n\n\n\n\n\n\nç‰¹å¾\né¢‘ç‡å­¦æ´¾\nè´å¶æ–¯å­¦æ´¾\n\n\n\n\nå‚æ•°æœ¬è´¨\nå›ºå®šæœªçŸ¥å¸¸æ•°\nå…·æœ‰æ¦‚ç‡åˆ†å¸ƒçš„éšæœºå˜é‡\n\n\næ¦‚ç‡å«ä¹‰\né•¿æœŸé¢‘ç‡\nä¸»è§‚ä¿¡å¿µç¨‹åº¦\n\n\nä¸ç¡®å®šæ€§\nç½®ä¿¡åŒºé—´\nå¯ä¿¡åŒºé—´(ç›´æ¥æ¦‚ç‡)\n\n\nå…ˆéªŒä¿¡æ¯\nä¸ä½¿ç”¨\nå¯ä»¥çº³å…¥\n\n\nå°æ ·æœ¬\nå¯èƒ½ä¸å¯é \næ›´ç¨³å¥\n\n\nç»“æœè§£é‡Š\nâ€œ95%CIåŒ…å«çœŸå®å€¼çš„æ¦‚ç‡æ˜¯95%â€\nâ€œå‚æ•°æœ‰95%æ¦‚ç‡åœ¨æ­¤åŒºé—´å†…â€\n\n\n\n\n\nè´å¶æ–¯æ–¹æ³•çš„ä¼˜åŠ¿\n\nç›´è§‚çš„æ¦‚ç‡è§£é‡Šï¼šP(å‚æ•°|æ•°æ®) è€Œé P(æ•°æ®|å‚æ•°)\nçº³å…¥å…ˆéªŒçŸ¥è¯†ï¼šåˆ©ç”¨å†å²ç ”ç©¶æˆ–ä¸“å®¶æ„è§\nå°æ ·æœ¬è¡¨ç°å¥½ï¼šå€ŸåŠ©å…ˆéªŒç¨³å®šä¼°è®¡\nå¤æ‚æ¨¡å‹çµæ´»ï¼šå±‚æ¬¡æ¨¡å‹ã€æ··åˆæ¨¡å‹ç­‰\nä¸ç¡®å®šæ€§å®Œæ•´é‡åŒ–ï¼šæä¾›å®Œæ•´åéªŒåˆ†å¸ƒ",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨"
    ]
  },
  {
    "objectID": "1051-bayesian.html#è´å¶æ–¯å®šç†åŸºç¡€",
    "href": "1051-bayesian.html#è´å¶æ–¯å®šç†åŸºç¡€",
    "title": "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨ (Bayesian Statistics)",
    "section": "è´å¶æ–¯å®šç†åŸºç¡€",
    "text": "è´å¶æ–¯å®šç†åŸºç¡€\n\næ ¸å¿ƒå…¬å¼\n\\[P(\\theta|D) = \\frac{P(D|\\theta) \\cdot P(\\theta)}{P(D)}\\]\nå…¶ä¸­ï¼š - \\(P(\\theta|D)\\)ï¼šåéªŒæ¦‚ç‡ï¼ˆæ›´æ–°åçš„ä¿¡å¿µï¼‰ - \\(P(D|\\theta)\\)ï¼šä¼¼ç„¶å‡½æ•°ï¼ˆæ•°æ®çš„å¯èƒ½æ€§ï¼‰ - \\(P(\\theta)\\)ï¼šå…ˆéªŒæ¦‚ç‡ï¼ˆåˆå§‹ä¿¡å¿µï¼‰ - \\(P(D)\\)ï¼šè¾¹é™…ä¼¼ç„¶ï¼ˆå½’ä¸€åŒ–å¸¸æ•°ï¼‰\nç®€åŒ–è®°å¿†ï¼šåéªŒ âˆ ä¼¼ç„¶ Ã— å…ˆéªŒ\n\n\nç›´è§‚ç†è§£ - æ·ç¡¬å¸ä¾‹å­\n\nlibrary(tidyverse)\n\n# æ¨¡æ‹Ÿæ·ç¡¬å¸çš„è´å¶æ–¯æ›´æ–°\n# è®¾ç½®å…ˆéªŒï¼šå‡è®¾ç¡¬å¸å…¬å¹³ Beta(2,2)\nalpha_prior &lt;- 2\nbeta_prior &lt;- 2\n\n# è§‚æµ‹æ•°æ®ï¼š10æ¬¡ä¸­7æ¬¡æ­£é¢\nn_trials &lt;- 10\nn_heads &lt;- 7\n\n# åéªŒåˆ†å¸ƒ Beta(alpha + heads, beta + tails)\nalpha_post &lt;- alpha_prior + n_heads\nbeta_post &lt;- beta_prior + (n_trials - n_heads)\n\n# å¯è§†åŒ–\ntheta &lt;- seq(0, 1, length.out = 100)\n\ndf &lt;- data.frame(\n  theta = theta,\n  prior = dbeta(theta, alpha_prior, beta_prior),\n  likelihood = dbeta(theta, n_heads + 1, n_trials - n_heads + 1),\n  posterior = dbeta(theta, alpha_post, beta_post)\n) %&gt;%\n  pivot_longer(-theta, names_to = \"distribution\", values_to = \"density\")\n\nggplot(df, aes(x = theta, y = density, color = distribution)) +\n  geom_line(linewidth = 1.2) +\n  scale_color_manual(\n    values = c(\"prior\" = \"#2563eb\", \"likelihood\" = \"#dc2626\", \"posterior\" = \"#7c3aed\"),\n    labels = c(\"å…ˆéªŒ\", \"ä¼¼ç„¶\", \"åéªŒ\")\n  ) +\n  labs(\n    title = \"è´å¶æ–¯æ›´æ–°ç¤ºæ„å›¾\",\n    subtitle = \"è§‚æµ‹10æ¬¡æ·ç¡¬å¸ï¼Œ7æ¬¡æ­£é¢\",\n    x = \"ç¡¬å¸æ­£é¢æ¦‚ç‡ (Î¸)\",\n    y = \"æ¦‚ç‡å¯†åº¦\",\n    color = \"åˆ†å¸ƒç±»å‹\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(face = \"bold\", size = 14),\n    legend.position = \"bottom\"\n  )\n\n\n\n\n\n\n\n\n\n\nåéªŒä¼°è®¡\n\n# åéªŒå‡å€¼\npost_mean &lt;- alpha_post / (alpha_post + beta_post)\ncat(\"åéªŒå‡å€¼:\", round(post_mean, 3), \"\\n\")\n\nåéªŒå‡å€¼: 0.643 \n\n# 95%å¯ä¿¡åŒºé—´\nci_lower &lt;- qbeta(0.025, alpha_post, beta_post)\nci_upper &lt;- qbeta(0.975, alpha_post, beta_post)\ncat(\"95%å¯ä¿¡åŒºé—´: [\", round(ci_lower, 3), \",\", round(ci_upper, 3), \"]\\n\")\n\n95%å¯ä¿¡åŒºé—´: [ 0.386 , 0.861 ]\n\n# P(theta &gt; 0.5) - ç¡¬å¸åå‘æ­£é¢çš„æ¦‚ç‡\np_biased &lt;- 1 - pbeta(0.5, alpha_post, beta_post)\ncat(\"P(theta &gt; 0.5):\", round(p_biased, 3), \"\\n\")\n\nP(theta &gt; 0.5): 0.867",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨"
    ]
  },
  {
    "objectID": "1051-bayesian.html#è´å¶æ–¯çº¿æ€§å›å½’æ‰‹åŠ¨å®ç°",
    "href": "1051-bayesian.html#è´å¶æ–¯çº¿æ€§å›å½’æ‰‹åŠ¨å®ç°",
    "title": "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨ (Bayesian Statistics)",
    "section": "è´å¶æ–¯çº¿æ€§å›å½’ï¼ˆæ‰‹åŠ¨å®ç°ï¼‰",
    "text": "è´å¶æ–¯çº¿æ€§å›å½’ï¼ˆæ‰‹åŠ¨å®ç°ï¼‰\n\nç®€å•ç¤ºä¾‹\n\n# ä½¿ç”¨mtcarsæ•°æ®\ndata(mtcars)\n\n# æ ‡å‡†çº¿æ€§å›å½’\nlm_fit &lt;- lm(mpg ~ wt, data = mtcars)\nsummary(lm_fit)\n\n\nCall:\nlm(formula = mpg ~ wt, data = mtcars)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-4.5432 -2.3647 -0.1252  1.4096  6.8727 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)  37.2851     1.8776  19.858  &lt; 2e-16 ***\nwt           -5.3445     0.5591  -9.559 1.29e-10 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 3.046 on 30 degrees of freedom\nMultiple R-squared:  0.7528,    Adjusted R-squared:  0.7446 \nF-statistic: 91.38 on 1 and 30 DF,  p-value: 1.294e-10\n\n# é¢‘ç‡å­¦æ´¾ç½®ä¿¡åŒºé—´\nconfint(lm_fit)\n\n                2.5 %    97.5 %\n(Intercept) 33.450500 41.119753\nwt          -6.486308 -4.202635\n\n\n\n\nè´å¶æ–¯æ–¹æ³•ï¼ˆä½¿ç”¨MCMCpackï¼‰\n\n# å®‰è£…MCMCpackï¼ˆè½»é‡çº§è´å¶æ–¯åŒ…ï¼‰\nif (!require(\"MCMCpack\", quietly = TRUE)) {\n  install.packages(\"MCMCpack\")\n  library(MCMCpack)\n}\n\n# è´å¶æ–¯çº¿æ€§å›å½’\nbayes_lm &lt;- MCMCregress(\n  mpg ~ wt + hp,\n  data = mtcars,\n  burnin = 1000,\n  mcmc = 5000,\n  thin = 1,\n  seed = 42\n)\n\n# æŸ¥çœ‹åéªŒæ‘˜è¦\nsummary(bayes_lm)\n\n\nIterations = 1001:6000\nThinning interval = 1 \nNumber of chains = 1 \nSample size per chain = 5000 \n\n1. Empirical mean and standard deviation for each variable,\n   plus standard error of the mean:\n\n                Mean       SD  Naive SE Time-series SE\n(Intercept) 37.19318 1.648867 0.0233185      0.0233185\nwt          -3.86052 0.648023 0.0091644      0.0091644\nhp          -0.03186 0.009325 0.0001319      0.0001274\nsigma2       7.21854 2.024071 0.0286247      0.0315857\n\n2. Quantiles for each variable:\n\n                2.5%      25%      50%      75%   97.5%\n(Intercept) 33.89694 36.10498 37.25434 38.27975 40.3652\nwt          -5.13034 -4.29962 -3.86842 -3.43442 -2.6078\nhp          -0.05023 -0.03789 -0.03193 -0.02581 -0.0132\nsigma2       4.29829  5.77132  6.85594  8.27615 12.1007\n\n\n\n\nåéªŒåˆ†å¸ƒå¯è§†åŒ–\n\n# æå–åéªŒæ ·æœ¬\npost_samples &lt;- as.data.frame(bayes_lm)\n\n# ç»‘åˆ¶wtç³»æ•°çš„åéªŒåˆ†å¸ƒ\nggplot(post_samples, aes(x = wt)) +\n  geom_histogram(aes(y = after_stat(density)),\n    bins = 30,\n    fill = \"#4f46e5\", alpha = 0.7\n  ) +\n  geom_density(color = \"#dc2626\", linewidth = 1) +\n  geom_vline(xintercept = 0, linetype = \"dashed\", color = \"gray50\") +\n  labs(\n    title = \"wtç³»æ•°çš„åéªŒåˆ†å¸ƒ\",\n    subtitle = \"è´å¶æ–¯çº¿æ€§å›å½’\",\n    x = \"å›å½’ç³»æ•°\",\n    y = \"å¯†åº¦\"\n  ) +\n  theme_minimal() +\n  theme(plot.title = element_text(face = \"bold\"))\n\n\n\n\n\n\n\n\n\n\n95%å¯ä¿¡åŒºé—´\n\n# è®¡ç®—HPDåŒºé—´ï¼ˆæœ€é«˜åéªŒå¯†åº¦åŒºé—´ï¼‰\nlibrary(coda)\nHPDinterval(bayes_lm, prob = 0.95)\n\n                  lower      upper\n(Intercept) 33.89712524 40.3669471\nwt          -5.07499559 -2.5583910\nhp          -0.04970027 -0.0127128\nsigma2       3.99310743 11.3124685\nattr(,\"Probability\")\n[1] 0.95",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨"
    ]
  },
  {
    "objectID": "1051-bayesian.html#è´å¶æ–¯é€»è¾‘å›å½’",
    "href": "1051-bayesian.html#è´å¶æ–¯é€»è¾‘å›å½’",
    "title": "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨ (Bayesian Statistics)",
    "section": "è´å¶æ–¯é€»è¾‘å›å½’",
    "text": "è´å¶æ–¯é€»è¾‘å›å½’\n\n# åˆ›å»ºäºŒåˆ†ç±»å˜é‡\nmtcars$high_mpg &lt;- ifelse(mtcars$mpg &gt; median(mtcars$mpg), 1, 0)\n\n# è´å¶æ–¯é€»è¾‘å›å½’\nbayes_logit &lt;- MCMClogit(\n  high_mpg ~ wt + hp,\n  data = mtcars,\n  burnin = 1000,\n  mcmc = 5000,\n  seed = 42\n)\n\nsummary(bayes_logit)\n\n\nIterations = 1001:6000\nThinning interval = 1 \nNumber of chains = 1 \nSample size per chain = 5000 \n\n1. Empirical mean and standard deviation for each variable,\n   plus standard error of the mean:\n\n                 Mean SD Naive SE Time-series SE\n(Intercept)  621.3209  0        0              0\nwt          -175.4753  0        0              0\nhp            -0.3336  0        0              0\n\n2. Quantiles for each variable:\n\n                 2.5%       25%       50%       75%     97.5%\n(Intercept)  621.3209  621.3209  621.3209  621.3209  621.3209\nwt          -175.4753 -175.4753 -175.4753 -175.4753 -175.4753\nhp            -0.3336   -0.3336   -0.3336   -0.3336   -0.3336\n\n# è½¬æ¢ä¸ºOR\npost_logit &lt;- as.data.frame(bayes_logit)\nor_summary &lt;- data.frame(\n  Variable = colnames(post_logit)[-1],\n  OR = round(exp(colMeans(post_logit[, -1])), 3),\n  CI_Lower = round(exp(apply(post_logit[, -1], 2, quantile, 0.025)), 3),\n  CI_Upper = round(exp(apply(post_logit[, -1], 2, quantile, 0.975)), 3)\n)\nprint(or_summary)\n\n   Variable    OR CI_Lower CI_Upper\nwt       wt 0.000    0.000    0.000\nhp       hp 0.716    0.716    0.716",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨"
    ]
  },
  {
    "objectID": "1051-bayesian.html#å…ˆéªŒé€‰æ‹©æŒ‡å—",
    "href": "1051-bayesian.html#å…ˆéªŒé€‰æ‹©æŒ‡å—",
    "title": "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨ (Bayesian Statistics)",
    "section": "å…ˆéªŒé€‰æ‹©æŒ‡å—",
    "text": "å…ˆéªŒé€‰æ‹©æŒ‡å—\n\nå¸¸ç”¨å…ˆéªŒç±»å‹\n\n\n\nå…ˆéªŒç±»å‹\né€‚ç”¨åœºæ™¯\næè¿°\n\n\n\n\næ— ä¿¡æ¯å…ˆéªŒ\næ•°æ®å……è¶³ï¼Œä¸æƒ³å½±å“ç»“æœ\nå‡åŒ€åˆ†å¸ƒæˆ–å¾ˆå¹³çš„æ­£æ€\n\n\nå¼±ä¿¡æ¯å…ˆéªŒ\næ¨èä½¿ç”¨ï¼Œé˜²æ­¢æç«¯å€¼\nNormal(0, 10)ä¹‹ç±»\n\n\nä¿¡æ¯å…ˆéªŒ\næœ‰å†å²ç ”ç©¶æˆ–ä¸“å®¶çŸ¥è¯†\nåŸºäºå·²æœ‰æ•°æ®çš„åˆ†å¸ƒ\n\n\næ­£åˆ™åŒ–å…ˆéªŒ\nå˜é‡é€‰æ‹©/é˜²è¿‡æ‹Ÿåˆ\nHorseshoeã€LASSOå…ˆéªŒ\n\n\n\n\n\nå…ˆéªŒæ•æ„Ÿæ€§åˆ†æ\n\n# æ¯”è¾ƒä¸åŒå…ˆéªŒçš„å½±å“\n# å¼ºå…ˆéªŒ vs å¼±å…ˆéªŒ\ncat(\"å…ˆéªŒæ•æ„Ÿæ€§ï¼šæ¯”è¾ƒä¸åŒå…ˆéªŒè®¾ç½®ä¸‹çš„ç»“æœ\\n\")\n\nå…ˆéªŒæ•æ„Ÿæ€§ï¼šæ¯”è¾ƒä¸åŒå…ˆéªŒè®¾ç½®ä¸‹çš„ç»“æœ\n\ncat(\"å»ºè®®ï¼šæ€»æ˜¯è¿›è¡Œæ•æ„Ÿæ€§åˆ†æï¼Œç¡®ä¿ç»“è®ºç¨³å¥\\n\")\n\nå»ºè®®ï¼šæ€»æ˜¯è¿›è¡Œæ•æ„Ÿæ€§åˆ†æï¼Œç¡®ä¿ç»“è®ºç¨³å¥",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨"
    ]
  },
  {
    "objectID": "1051-bayesian.html#æ¨¡å‹è¯Šæ–­",
    "href": "1051-bayesian.html#æ¨¡å‹è¯Šæ–­",
    "title": "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨ (Bayesian Statistics)",
    "section": "æ¨¡å‹è¯Šæ–­",
    "text": "æ¨¡å‹è¯Šæ–­\n\nMCMCæ”¶æ•›è¯Šæ–­\n\n# è½¨è¿¹å›¾\nplot(bayes_lm, trace = TRUE, density = FALSE)\n\n\n\n\n\n\n\n\n\n# æœ‰æ•ˆæ ·æœ¬é‡\neffectiveSize(bayes_lm)\n\n(Intercept)          wt          hp      sigma2 \n   5000.000    5000.000    5357.314    4106.500 \n\n\n\n\nGewekeè¯Šæ–­\n\n# Gewekeè¯Šæ–­æ£€éªŒæ”¶æ•›æ€§\ngeweke.diag(bayes_lm)\n\n\nFraction in 1st window = 0.1\nFraction in 2nd window = 0.5 \n\n(Intercept)          wt          hp      sigma2 \n    -0.5374      0.5132     -0.6530     -1.2216",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨"
    ]
  },
  {
    "objectID": "1051-bayesian.html#ç»“æœæŠ¥å‘Šä¸è§£é‡Š",
    "href": "1051-bayesian.html#ç»“æœæŠ¥å‘Šä¸è§£é‡Š",
    "title": "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨ (Bayesian Statistics)",
    "section": "ç»“æœæŠ¥å‘Šä¸è§£é‡Š",
    "text": "ç»“æœæŠ¥å‘Šä¸è§£é‡Š\n\næ–¹æ³•éƒ¨åˆ†æ¨¡æ¿\n\næœ¬ç ”ç©¶é‡‡ç”¨è´å¶æ–¯ç»Ÿè®¡æ–¹æ³•è¿›è¡Œæ•°æ®åˆ†æã€‚çº¿æ€§å›å½’æ¨¡å‹ä½¿ç”¨MCMCpackåŒ…å®ç°ã€‚æˆ‘ä»¬é‡‡ç”¨å¼±ä¿¡æ¯å…ˆéªŒä»¥å‡å°‘å¯¹åéªŒä¼°è®¡çš„å½±å“ã€‚æ¨¡å‹è¿è¡Œ5000æ¬¡é©¬å°”å¯å¤«é“¾è’™ç‰¹å¡æ´›è¿­ä»£ï¼ˆå‰1000æ¬¡ä½œä¸ºé¢„çƒ­æœŸä¸¢å¼ƒï¼‰ã€‚æ”¶æ•›æ€§é€šè¿‡è½¨è¿¹å›¾å’ŒGewekeè¯Šæ–­è¯„ä¼°ã€‚ä½¿ç”¨95%å¯ä¿¡åŒºé—´ï¼ˆCrIï¼‰æŠ¥å‘Šå‚æ•°ä¼°è®¡çš„ä¸ç¡®å®šæ€§ã€‚\n\n\n\nç»“æœéƒ¨åˆ†æ¨¡æ¿\n\nè´å¶æ–¯å›å½’åˆ†ææ˜¾ç¤ºï¼Œä½“é‡æ¯å¢åŠ 1000ç£…ï¼Œæ²¹è€—å¹³å‡é™ä½X.X mpgï¼ˆ95% CrI: X.Xè‡³X.Xï¼‰ã€‚åéªŒæ¦‚ç‡åˆ†æè¡¨æ˜ï¼Œä½“é‡å¯¹æ²¹è€—æœ‰è´Ÿå‘å½±å“çš„æ¦‚ç‡ä¸ºXX%ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨"
    ]
  },
  {
    "objectID": "1051-bayesian.html#è´å¶æ–¯-vs-é¢‘ç‡å­¦æ´¾å¯¹æ¯”",
    "href": "1051-bayesian.html#è´å¶æ–¯-vs-é¢‘ç‡å­¦æ´¾å¯¹æ¯”",
    "title": "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨ (Bayesian Statistics)",
    "section": "è´å¶æ–¯ vs é¢‘ç‡å­¦æ´¾å¯¹æ¯”",
    "text": "è´å¶æ–¯ vs é¢‘ç‡å­¦æ´¾å¯¹æ¯”\n\n# å¯¹æ¯”ç»“æœ\ncat(\"=== é¢‘ç‡å­¦æ´¾ç»“æœ ===\\n\")\n\n=== é¢‘ç‡å­¦æ´¾ç»“æœ ===\n\nprint(summary(lm(mpg ~ wt + hp, data = mtcars))$coefficients)\n\n               Estimate Std. Error   t value     Pr(&gt;|t|)\n(Intercept) 37.22727012 1.59878754 23.284689 2.565459e-20\nwt          -3.87783074 0.63273349 -6.128695 1.119647e-06\nhp          -0.03177295 0.00902971 -3.518712 1.451229e-03\n\ncat(\"\\n=== è´å¶æ–¯ç»“æœ ===\\n\")\n\n\n=== è´å¶æ–¯ç»“æœ ===\n\nprint(summary(bayes_lm)$statistics)\n\n                   Mean         SD    Naive SE Time-series SE\n(Intercept) 37.19317646 1.64886724 0.023318504   0.0233185042\nwt          -3.86051841 0.64802323 0.009164432   0.0091644325\nhp          -0.03186464 0.00932476 0.000131872   0.0001273984\nsigma2       7.21854355 2.02407131 0.028624691   0.0315856559",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨"
    ]
  },
  {
    "objectID": "1051-bayesian.html#å®ç”¨æ¡ˆä¾‹ä¸´åºŠè¯•éªŒåˆ†æ",
    "href": "1051-bayesian.html#å®ç”¨æ¡ˆä¾‹ä¸´åºŠè¯•éªŒåˆ†æ",
    "title": "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨ (Bayesian Statistics)",
    "section": "å®ç”¨æ¡ˆä¾‹ï¼šä¸´åºŠè¯•éªŒåˆ†æ",
    "text": "å®ç”¨æ¡ˆä¾‹ï¼šä¸´åºŠè¯•éªŒåˆ†æ\n\n# æ¨¡æ‹Ÿä¸´åºŠè¯•éªŒæ•°æ®\nset.seed(123)\nn &lt;- 100\ntrial_data &lt;- data.frame(\n  treatment = rep(c(0, 1), each = n / 2),\n  age = rnorm(n, 50, 10),\n  response = c(\n    rbinom(n / 2, 1, 0.3), # å®‰æ…°å‰‚ç»„\n    rbinom(n / 2, 1, 0.5) # æ²»ç–—ç»„\n  )\n)\n\n# è´å¶æ–¯é€»è¾‘å›å½’\nbayes_trial &lt;- MCMClogit(\n  response ~ treatment + age,\n  data = trial_data,\n  burnin = 1000,\n  mcmc = 5000,\n  seed = 42\n)\n\n# æå–æ²»ç–—æ•ˆæœ\npost_trial &lt;- as.data.frame(bayes_trial)\n\n# P(æ²»ç–—æœ‰æ•ˆ) = P(OR &gt; 1) = P(beta_treatment &gt; 0)\nprob_effective &lt;- mean(post_trial$treatment &gt; 0)\ncat(\"æ²»ç–—æœ‰æ•ˆçš„åéªŒæ¦‚ç‡:\", round(prob_effective, 3), \"\\n\")\n\næ²»ç–—æœ‰æ•ˆçš„åéªŒæ¦‚ç‡: 0.965 \n\n# ORçš„åéªŒä¼°è®¡\nor_treatment &lt;- exp(post_trial$treatment)\ncat(\"ORä¸­ä½æ•°:\", round(median(or_treatment), 2), \"\\n\")\n\nORä¸­ä½æ•°: 2.21 \n\ncat(\"OR 95%å¯ä¿¡åŒºé—´:\", round(quantile(or_treatment, c(0.025, 0.975)), 2), \"\\n\")\n\nOR 95%å¯ä¿¡åŒºé—´: 0.94 4.99",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨"
    ]
  },
  {
    "objectID": "1051-bayesian.html#å¸¸è§é—®é¢˜è§£ç­”",
    "href": "1051-bayesian.html#å¸¸è§é—®é¢˜è§£ç­”",
    "title": "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨ (Bayesian Statistics)",
    "section": "å¸¸è§é—®é¢˜è§£ç­”",
    "text": "å¸¸è§é—®é¢˜è§£ç­”\n\nQ1: å¦‚ä½•é€‰æ‹©å…ˆéªŒï¼Ÿ\næ¨èçš„é€šç”¨ç­–ç•¥ï¼š 1. ä»å¼±ä¿¡æ¯å…ˆéªŒå¼€å§‹ 2. è¿›è¡Œå…ˆéªŒæ•æ„Ÿæ€§åˆ†æ 3. å¦‚æœ‰å†å²æ•°æ®ï¼Œå¯ä½¿ç”¨ä¿¡æ¯å…ˆéªŒ\n\n\nQ2: æ ·æœ¬é‡å¤šå°‘æ‰å¤Ÿï¼Ÿ\nè´å¶æ–¯æ–¹æ³•åœ¨å°æ ·æœ¬ä¸­ä¹Ÿèƒ½å·¥ä½œï¼Œä½†ä»å»ºè®®ï¼š - ç®€å•æ¨¡å‹ï¼šæ¯ä¸ªå‚æ•°è‡³å°‘20-30ä¸ªè§‚æµ‹ - å¤æ‚æ¨¡å‹ï¼šè¿›è¡Œæ¨¡æ‹Ÿç ”ç©¶ç¡®å®š - å§‹ç»ˆæ£€æŸ¥æœ‰æ•ˆæ ·æœ¬é‡\n\n\nQ3: å¦‚ä½•å¤„ç†ä¸æ”¶æ•›ï¼Ÿ\n\nå¢åŠ MCMCè¿­ä»£æ¬¡æ•°\nå¢åŠ é¢„çƒ­æœŸ\nä½¿ç”¨æ›´å¼ºçš„å…ˆéªŒ\næ£€æŸ¥æ¨¡å‹è®¾å®šæ˜¯å¦åˆç†",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨"
    ]
  },
  {
    "objectID": "1051-bayesian.html#å­¦ä¹ èµ„æº",
    "href": "1051-bayesian.html#å­¦ä¹ èµ„æº",
    "title": "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨ (Bayesian Statistics)",
    "section": "å­¦ä¹ èµ„æº",
    "text": "å­¦ä¹ èµ„æº\n\nä¹¦ç±\n\nStatistical Rethinking (Richard McElreath)\nBayesian Data Analysis (Gelman et al.)\nDoing Bayesian Data Analysis (Kruschke)\n\nRåŒ…æ¨è\n\nMCMCpack: è½»é‡çº§ï¼Œé€‚åˆå…¥é—¨\nrstanarm: ä¸lm/glmè¯­æ³•å…¼å®¹\nbrms: æœ€çµæ´»ï¼Œæ”¯æŒå¤æ‚æ¨¡å‹",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨"
    ]
  },
  {
    "objectID": "1051-bayesian.html#æ€»ç»“",
    "href": "1051-bayesian.html#æ€»ç»“",
    "title": "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨ (Bayesian Statistics)",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå…³é”®ç‚¹\nè¯´æ˜\n\n\n\n\næ ¸å¿ƒæ€æƒ³\nåéªŒ âˆ ä¼¼ç„¶ Ã— å…ˆéªŒ\n\n\nå¸¸ç”¨RåŒ…\nMCMCpackï¼ˆç®€å•ï¼‰, rstanarm/brmsï¼ˆé«˜çº§ï¼‰\n\n\nå…ˆéªŒé€‰æ‹©\nä»å¼±ä¿¡æ¯å…ˆéªŒå¼€å§‹\n\n\næ”¶æ•›æ£€æŸ¥\nè½¨è¿¹å›¾ + Gewekeè¯Šæ–­\n\n\nç»“æœæŠ¥å‘Š\nä½¿ç”¨å¯ä¿¡åŒºé—´(CrI)å’ŒåéªŒæ¦‚ç‡",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "è´å¶æ–¯ç»Ÿè®¡å…¥é—¨"
    ]
  },
  {
    "objectID": "1053-gtsummary.html",
    "href": "1053-gtsummary.html",
    "title": "gtsummary - å‘è¡¨çº§ç»Ÿè®¡è¡¨æ ¼",
    "section": "",
    "text": "gtsummaryæ˜¯åˆ¶ä½œå‘è¡¨çº§ç»Ÿè®¡è¡¨æ ¼çš„RåŒ…ç¥å™¨ã€‚å®ƒèƒ½å¤Ÿå¿«é€Ÿç”Ÿæˆæè¿°æ€§ç»Ÿè®¡è¡¨ã€å›å½’ç»“æœè¡¨ã€ç”Ÿå­˜åˆ†æè¡¨ç­‰ï¼Œæ ¼å¼è§„èŒƒã€ç¾è§‚ï¼Œå¯ç›´æ¥å¯¼å‡ºåˆ°Wordã€PDFæˆ–HTMLï¼Œæå¤§æé«˜ç§‘ç ”è®ºæ–‡å†™ä½œæ•ˆç‡ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gtsummary - å‘è¡¨çº§è¡¨æ ¼"
    ]
  },
  {
    "objectID": "1053-gtsummary.html#ä¸ºä»€ä¹ˆé€‰æ‹©gtsummary",
    "href": "1053-gtsummary.html#ä¸ºä»€ä¹ˆé€‰æ‹©gtsummary",
    "title": "gtsummary - å‘è¡¨çº§ç»Ÿè®¡è¡¨æ ¼",
    "section": "ä¸ºä»€ä¹ˆé€‰æ‹©gtsummaryï¼Ÿ",
    "text": "ä¸ºä»€ä¹ˆé€‰æ‹©gtsummaryï¼Ÿ\n\nä¸å…¶ä»–è¡¨æ ¼åŒ…å¯¹æ¯”\n\n\n\nç‰¹æ€§\ngtsummary\ntableone\ncompareGroups\n\n\n\n\nè¯­æ³•ç®€æ´\nâ­â­â­â­â­\nâ­â­â­\nâ­â­â­\n\n\nè‡ªåŠ¨é€‰æ‹©ç»Ÿè®¡æ–¹æ³•\nâœ…\nâœ…\nâœ…\n\n\nå›å½’æ¨¡å‹æ”¯æŒ\nâ­â­â­â­â­\nâœ… (æœ‰é™)\nâ­â­â­\n\n\nç”Ÿå­˜åˆ†ææ”¯æŒ\nâ­â­â­â­â­\nâŒ\nâ­â­â­\n\n\nè¡¨æ ¼åˆå¹¶\nâ­â­â­â­â­\nâ­â­\nâ­â­â­\n\n\nè¾“å‡ºæ ¼å¼\nWord/PDF/HTML/LaTeX\nWord/CSV\nWord/PDF\n\n\nä¸tidyverseé›†æˆ\nâ­â­â­â­â­\nâ­â­\nâ­â­",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gtsummary - å‘è¡¨çº§è¡¨æ ¼"
    ]
  },
  {
    "objectID": "1053-gtsummary.html#råŒ…å®‰è£…",
    "href": "1053-gtsummary.html#råŒ…å®‰è£…",
    "title": "gtsummary - å‘è¡¨çº§ç»Ÿè®¡è¡¨æ ¼",
    "section": "RåŒ…å®‰è£…",
    "text": "RåŒ…å®‰è£…\n\n# å®‰è£…gtsummaryåŠç›¸å…³åŒ…\npackages &lt;- c(\n    \"gtsummary\", \"gt\", \"flextable\", \"survival\",\n    \"tidyverse\", \"labelled\"\n)\n\nfor (pkg in packages) {\n    if (!require(pkg, character.only = TRUE, quietly = TRUE)) {\n        install.packages(pkg)\n        library(pkg, character.only = TRUE)\n    }\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gtsummary - å‘è¡¨çº§è¡¨æ ¼"
    ]
  },
  {
    "objectID": "1053-gtsummary.html#æè¿°æ€§ç»Ÿè®¡è¡¨table-1",
    "href": "1053-gtsummary.html#æè¿°æ€§ç»Ÿè®¡è¡¨table-1",
    "title": "gtsummary - å‘è¡¨çº§ç»Ÿè®¡è¡¨æ ¼",
    "section": "æè¿°æ€§ç»Ÿè®¡è¡¨ï¼ˆTable 1ï¼‰",
    "text": "æè¿°æ€§ç»Ÿè®¡è¡¨ï¼ˆTable 1ï¼‰\n\nåŸºæœ¬ç”¨æ³•\n\nlibrary(gtsummary)\n\n# ä½¿ç”¨å†…ç½®trialæ•°æ®é›†\ndata(trial)\n\n# å¿«é€Ÿç”Ÿæˆè¡¨1\ntbl1 &lt;- trial %&gt;%\n    select(age, grade, stage, trt) %&gt;%\n    tbl_summary()\n\ntbl1\n\n\n\n\n\n\n\n\n\n\n\nCharacteristic\nN = 2001\n\n\n\n\nAge\n47 (38, 57)\n\n\nÂ Â Â Â Unknown\n11\n\n\nGrade\n\n\n\n\nÂ Â Â Â I\n68 (34%)\n\n\nÂ Â Â Â II\n68 (34%)\n\n\nÂ Â Â Â III\n64 (32%)\n\n\nT Stage\n\n\n\n\nÂ Â Â Â T1\n53 (27%)\n\n\nÂ Â Â Â T2\n54 (27%)\n\n\nÂ Â Â Â T3\n43 (22%)\n\n\nÂ Â Â Â T4\n50 (25%)\n\n\nChemotherapy Treatment\n\n\n\n\nÂ Â Â Â Drug A\n98 (49%)\n\n\nÂ Â Â Â Drug B\n102 (51%)\n\n\n\n1 Median (Q1, Q3); n (%)\n\n\n\n\n\n\n\n\n\n\næŒ‰ç»„åˆ†å±‚\n\n# æŒ‰æ²»ç–—ç»„åˆ†å±‚\ntbl1_by &lt;- trial %&gt;%\n    select(age, grade, stage, marker, trt) %&gt;%\n    tbl_summary(\n        by = trt,\n        statistic = list(\n            all_continuous() ~ \"{mean} Â± {sd}\",\n            all_categorical() ~ \"{n} ({p}%)\"\n        ),\n        digits = all_continuous() ~ 1,\n        missing = \"ifany\",\n        missing_text = \"ç¼ºå¤±\"\n    ) %&gt;%\n    add_p() %&gt;%\n    add_overall() %&gt;%\n    add_n() %&gt;%\n    modify_header(label = \"**å˜é‡**\") %&gt;%\n    modify_spanning_header(c(\"stat_1\", \"stat_2\") ~ \"**æ²»ç–—ç»„**\") %&gt;%\n    bold_labels() %&gt;%\n    italicize_levels()\n\ntbl1_by\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nå˜é‡\nN\nOverall\nN = 2001\n\næ²»ç–—ç»„\n\np-value2\n\n\nDrug A\nN = 981\nDrug B\nN = 1021\n\n\n\n\nAge\n189\n47.2 Â± 14.3\n47.0 Â± 14.7\n47.4 Â± 14.0\n0.7\n\n\nÂ Â Â Â ç¼ºå¤±\n\n\n11\n7\n4\n\n\n\n\nGrade\n200\n\n\n\n\n\n\n0.9\n\n\nÂ Â Â Â I\n\n\n68 (34%)\n35 (36%)\n33 (32%)\n\n\n\n\nÂ Â Â Â II\n\n\n68 (34%)\n32 (33%)\n36 (35%)\n\n\n\n\nÂ Â Â Â III\n\n\n64 (32%)\n31 (32%)\n33 (32%)\n\n\n\n\nT Stage\n200\n\n\n\n\n\n\n0.9\n\n\nÂ Â Â Â T1\n\n\n53 (27%)\n28 (29%)\n25 (25%)\n\n\n\n\nÂ Â Â Â T2\n\n\n54 (27%)\n25 (26%)\n29 (28%)\n\n\n\n\nÂ Â Â Â T3\n\n\n43 (22%)\n22 (22%)\n21 (21%)\n\n\n\n\nÂ Â Â Â T4\n\n\n50 (25%)\n23 (23%)\n27 (26%)\n\n\n\n\nMarker Level (ng/mL)\n190\n0.9 Â± 0.9\n1.0 Â± 0.9\n0.8 Â± 0.8\n0.085\n\n\nÂ Â Â Â ç¼ºå¤±\n\n\n10\n6\n4\n\n\n\n\n\n1 Mean Â± SD; n (%)\n\n\n2 Wilcoxon rank sum test; Pearsonâ€™s Chi-squared test\n\n\n\n\n\n\n\n\n\n\nè‡ªå®šä¹‰ç»Ÿè®¡é‡\n\n# ä½¿ç”¨ä¸­ä½æ•°å’Œå››åˆ†ä½æ•°\ntbl1_custom &lt;- trial %&gt;%\n    select(age, marker, grade, stage, trt) %&gt;%\n    tbl_summary(\n        by = trt,\n        statistic = list(\n            all_continuous() ~ \"{median} ({p25}, {p75})\",\n            all_categorical() ~ \"{n} ({p}%)\"\n        ),\n        label = list(\n            age ~ \"å¹´é¾„ (å²)\",\n            marker ~ \"è‚¿ç˜¤æ ‡å¿—ç‰©\",\n            grade ~ \"è‚¿ç˜¤åˆ†çº§\",\n            stage ~ \"ä¸´åºŠåˆ†æœŸ\"\n        )\n    ) %&gt;%\n    add_p(\n        test = list(\n            all_continuous() ~ \"wilcox.test\",\n            all_categorical() ~ \"chisq.test\"\n        )\n    ) %&gt;%\n    add_overall(col_label = \"**æ€»è®¡ (N={N})**\")\n\ntbl1_custom\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCharacteristic\næ€»è®¡ (N=200)1\nDrug A\nN = 981\nDrug B\nN = 1021\np-value2\n\n\n\n\nå¹´é¾„ (å²)\n47 (38, 57)\n46 (37, 60)\n48 (39, 56)\n0.7\n\n\nÂ Â Â Â Unknown\n11\n7\n4\n\n\n\n\nè‚¿ç˜¤æ ‡å¿—ç‰©\n0.64 (0.22, 1.41)\n0.84 (0.23, 1.60)\n0.52 (0.18, 1.21)\n0.085\n\n\nÂ Â Â Â Unknown\n10\n6\n4\n\n\n\n\nè‚¿ç˜¤åˆ†çº§\n\n\n\n\n\n\n0.9\n\n\nÂ Â Â Â I\n68 (34%)\n35 (36%)\n33 (32%)\n\n\n\n\nÂ Â Â Â II\n68 (34%)\n32 (33%)\n36 (35%)\n\n\n\n\nÂ Â Â Â III\n64 (32%)\n31 (32%)\n33 (32%)\n\n\n\n\nä¸´åºŠåˆ†æœŸ\n\n\n\n\n\n\n0.9\n\n\nÂ Â Â Â T1\n53 (27%)\n28 (29%)\n25 (25%)\n\n\n\n\nÂ Â Â Â T2\n54 (27%)\n25 (26%)\n29 (28%)\n\n\n\n\nÂ Â Â Â T3\n43 (22%)\n22 (22%)\n21 (21%)\n\n\n\n\nÂ Â Â Â T4\n50 (25%)\n23 (23%)\n27 (26%)\n\n\n\n\n\n1 Median (Q1, Q3); n (%)\n\n\n2 Wilcoxon rank sum test; Pearsonâ€™s Chi-squared test",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gtsummary - å‘è¡¨çº§è¡¨æ ¼"
    ]
  },
  {
    "objectID": "1053-gtsummary.html#å›å½’åˆ†æè¡¨æ ¼",
    "href": "1053-gtsummary.html#å›å½’åˆ†æè¡¨æ ¼",
    "title": "gtsummary - å‘è¡¨çº§ç»Ÿè®¡è¡¨æ ¼",
    "section": "å›å½’åˆ†æè¡¨æ ¼",
    "text": "å›å½’åˆ†æè¡¨æ ¼\n\nå•å˜é‡å›å½’\n\n# å•å˜é‡é€»è¾‘å›å½’\ntbl_uv &lt;- trial %&gt;%\n    select(response, age, grade, stage, marker) %&gt;%\n    tbl_uvregression(\n        method = glm,\n        y = response,\n        method.args = list(family = binomial),\n        exponentiate = TRUE,\n        pvalue_fun = ~ style_pvalue(.x, digits = 3)\n    ) %&gt;%\n    add_global_p() %&gt;%\n    modify_header(\n        estimate = \"**OR**\",\n        ci = \"**95% CI**\"\n    ) %&gt;%\n    bold_p() %&gt;%\n    bold_labels()\n\ntbl_uv\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCharacteristic\nN\nOR\n95% CI\n95% CI\np-value\n\n\n\n\nAge\n183\n1.02\n1.00, 1.04\n1.00, 1.04\n0.091\n\n\nGrade\n193\n\n\n\n\n\n\n0.928\n\n\nÂ Â Â Â I\n\n\nâ€”\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â II\n\n\n0.95\n0.45, 2.00\n0.45, 2.00\n\n\n\n\nÂ Â Â Â III\n\n\n1.10\n0.52, 2.29\n0.52, 2.29\n\n\n\n\nT Stage\n193\n\n\n\n\n\n\n0.582\n\n\nÂ Â Â Â T1\n\n\nâ€”\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â T2\n\n\n0.63\n0.27, 1.46\n0.27, 1.46\n\n\n\n\nÂ Â Â Â T3\n\n\n1.13\n0.48, 2.68\n0.48, 2.68\n\n\n\n\nÂ Â Â Â T4\n\n\n0.83\n0.36, 1.92\n0.36, 1.92\n\n\n\n\nMarker Level (ng/mL)\n183\n1.35\n0.94, 1.93\n0.94, 1.93\n0.101\n\n\n\nAbbreviations: CI = Confidence Interval, OR = Odds Ratio\n\n\n\n\n\n\n\n\n\n\nå¤šå˜é‡å›å½’\n\n# æ„å»ºå¤šå˜é‡é€»è¾‘å›å½’æ¨¡å‹\nmv_model &lt;- glm(\n    response ~ age + grade + stage + marker,\n    data = trial,\n    family = binomial\n)\n\n# åˆ¶ä½œè¡¨æ ¼\ntbl_mv &lt;- tbl_regression(\n    mv_model,\n    exponentiate = TRUE,\n    label = list(\n        age ~ \"å¹´é¾„\",\n        grade ~ \"è‚¿ç˜¤åˆ†çº§\",\n        stage ~ \"ä¸´åºŠåˆ†æœŸ\",\n        marker ~ \"è‚¿ç˜¤æ ‡å¿—ç‰©\"\n    ),\n    pvalue_fun = ~ style_pvalue(.x, digits = 3)\n) %&gt;%\n    add_global_p() %&gt;%\n    bold_p() %&gt;%\n    bold_labels() %&gt;%\n    modify_header(\n        estimate = \"**aOR**\",\n        ci = \"**95% CI**\"\n    ) %&gt;%\n    modify_caption(\"**å¤šå› ç´ Logisticå›å½’åˆ†æ**\")\n\ntbl_mv\n\n\n\n\n\nå¤šå› ç´ Logisticå›å½’åˆ†æ\n\n\n\n\n\n\n\n\n\nCharacteristic\naOR\n95% CI\n95% CI\np-value\n\n\n\n\nå¹´é¾„\n1.02\n1.00, 1.04\n1.00, 1.04\n0.104\n\n\nè‚¿ç˜¤åˆ†çº§\n\n\n\n\n\n\n0.991\n\n\nÂ Â Â Â I\nâ€”\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â II\n1.04\n0.45, 2.42\n0.45, 2.42\n\n\n\n\nÂ Â Â Â III\n1.05\n0.47, 2.35\n0.47, 2.35\n\n\n\n\nä¸´åºŠåˆ†æœŸ\n\n\n\n\n\n\n0.346\n\n\nÂ Â Â Â T1\nâ€”\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â T2\n0.46\n0.18, 1.13\n0.18, 1.13\n\n\n\n\nÂ Â Â Â T3\n0.87\n0.34, 2.25\n0.34, 2.25\n\n\n\n\nÂ Â Â Â T4\n0.65\n0.25, 1.63\n0.25, 1.63\n\n\n\n\nè‚¿ç˜¤æ ‡å¿—ç‰©\n1.39\n0.94, 2.05\n0.94, 2.05\n0.094\n\n\n\nAbbreviations: CI = Confidence Interval, OR = Odds Ratio\n\n\n\n\n\n\n\n\n\n\nåˆå¹¶å•å˜é‡å’Œå¤šå˜é‡\n\n# åˆå¹¶è¡¨æ ¼ï¼ˆå¸¸è§äºè®ºæ–‡ï¼‰\ntbl_merge(\n    list(tbl_uv, tbl_mv),\n    tab_spanner = c(\"**å•å› ç´ åˆ†æ**\", \"**å¤šå› ç´ åˆ†æ**\")\n)\n\n\n\n\n\nå¤šå› ç´ Logisticå›å½’åˆ†æ\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCharacteristic\n\nå•å› ç´ åˆ†æ\n\n\nå¤šå› ç´ åˆ†æ\n\n\n\nN\nOR\n95% CI\n95% CI\np-value\naOR\n95% CI\n95% CI\np-value\n\n\n\n\nAge\n183\n1.02\n1.00, 1.04\n1.00, 1.04\n0.091\n\n\n\n\n\n\n\n\n\n\nGrade\n193\n\n\n\n\n\n\n0.928\n\n\n\n\n\n\n\n\n\n\nÂ Â Â Â I\n\n\nâ€”\nâ€”\nâ€”\n\n\n\n\n\n\n\n\n\n\n\n\nÂ Â Â Â II\n\n\n0.95\n0.45, 2.00\n0.45, 2.00\n\n\n\n\n\n\n\n\n\n\n\n\nÂ Â Â Â III\n\n\n1.10\n0.52, 2.29\n0.52, 2.29\n\n\n\n\n\n\n\n\n\n\n\n\nT Stage\n193\n\n\n\n\n\n\n0.582\n\n\n\n\n\n\n\n\n\n\nÂ Â Â Â T1\n\n\nâ€”\nâ€”\nâ€”\n\n\n\n\n\n\n\n\n\n\n\n\nÂ Â Â Â T2\n\n\n0.63\n0.27, 1.46\n0.27, 1.46\n\n\n\n\n\n\n\n\n\n\n\n\nÂ Â Â Â T3\n\n\n1.13\n0.48, 2.68\n0.48, 2.68\n\n\n\n\n\n\n\n\n\n\n\n\nÂ Â Â Â T4\n\n\n0.83\n0.36, 1.92\n0.36, 1.92\n\n\n\n\n\n\n\n\n\n\n\n\nMarker Level (ng/mL)\n183\n1.35\n0.94, 1.93\n0.94, 1.93\n0.101\n\n\n\n\n\n\n\n\n\n\nå¹´é¾„\n\n\n\n\n\n\n\n\n\n\n1.02\n1.00, 1.04\n1.00, 1.04\n0.104\n\n\nè‚¿ç˜¤åˆ†çº§\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n0.991\n\n\nÂ Â Â Â I\n\n\n\n\n\n\n\n\n\n\nâ€”\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â II\n\n\n\n\n\n\n\n\n\n\n1.04\n0.45, 2.42\n0.45, 2.42\n\n\n\n\nÂ Â Â Â III\n\n\n\n\n\n\n\n\n\n\n1.05\n0.47, 2.35\n0.47, 2.35\n\n\n\n\nä¸´åºŠåˆ†æœŸ\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n0.346\n\n\nÂ Â Â Â T1\n\n\n\n\n\n\n\n\n\n\nâ€”\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â T2\n\n\n\n\n\n\n\n\n\n\n0.46\n0.18, 1.13\n0.18, 1.13\n\n\n\n\nÂ Â Â Â T3\n\n\n\n\n\n\n\n\n\n\n0.87\n0.34, 2.25\n0.34, 2.25\n\n\n\n\nÂ Â Â Â T4\n\n\n\n\n\n\n\n\n\n\n0.65\n0.25, 1.63\n0.25, 1.63\n\n\n\n\nè‚¿ç˜¤æ ‡å¿—ç‰©\n\n\n\n\n\n\n\n\n\n\n1.39\n0.94, 2.05\n0.94, 2.05\n0.094\n\n\n\nAbbreviations: CI = Confidence Interval, OR = Odds Ratio",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gtsummary - å‘è¡¨çº§è¡¨æ ¼"
    ]
  },
  {
    "objectID": "1053-gtsummary.html#ç”Ÿå­˜åˆ†æè¡¨æ ¼",
    "href": "1053-gtsummary.html#ç”Ÿå­˜åˆ†æè¡¨æ ¼",
    "title": "gtsummary - å‘è¡¨çº§ç»Ÿè®¡è¡¨æ ¼",
    "section": "ç”Ÿå­˜åˆ†æè¡¨æ ¼",
    "text": "ç”Ÿå­˜åˆ†æè¡¨æ ¼\n\nCoxå›å½’\n\n# Coxæ¯”ä¾‹é£é™©æ¨¡å‹\ncox_model &lt;- coxph(\n    Surv(ttdeath, death) ~ age + grade + stage + trt,\n    data = trial\n)\n\n# åˆ¶ä½œè¡¨æ ¼\ntbl_cox &lt;- tbl_regression(\n    cox_model,\n    exponentiate = TRUE,\n    label = list(\n        age ~ \"å¹´é¾„\",\n        grade ~ \"è‚¿ç˜¤åˆ†çº§\",\n        stage ~ \"ä¸´åºŠåˆ†æœŸ\",\n        trt ~ \"æ²»ç–—ç»„\"\n    )\n) %&gt;%\n    add_global_p() %&gt;%\n    bold_p() %&gt;%\n    bold_labels() %&gt;%\n    modify_header(\n        estimate = \"**HR**\",\n        ci = \"**95% CI**\"\n    ) %&gt;%\n    modify_caption(\"**Coxå›å½’åˆ†æç»“æœ**\")\n\ntbl_cox\n\n\n\n\n\nCoxå›å½’åˆ†æç»“æœ\n\n\n\n\n\n\n\n\n\nCharacteristic\nHR\n95% CI\n95% CI\np-value\n\n\n\n\nå¹´é¾„\n1.01\n1.00, 1.02\n1.00, 1.02\n0.2\n\n\nè‚¿ç˜¤åˆ†çº§\n\n\n\n\n\n\n0.058\n\n\nÂ Â Â Â I\nâ€”\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â II\n1.23\n0.74, 2.03\n0.74, 2.03\n\n\n\n\nÂ Â Â Â III\n1.75\n1.10, 2.80\n1.10, 2.80\n\n\n\n\nä¸´åºŠåˆ†æœŸ\n\n\n\n\n\n\n0.002\n\n\nÂ Â Â Â T1\nâ€”\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â T2\n1.27\n0.72, 2.23\n0.72, 2.23\n\n\n\n\nÂ Â Â Â T3\n1.21\n0.65, 2.22\n0.65, 2.22\n\n\n\n\nÂ Â Â Â T4\n2.66\n1.55, 4.59\n1.55, 4.59\n\n\n\n\næ²»ç–—ç»„\n\n\n\n\n\n\n0.12\n\n\nÂ Â Â Â Drug A\nâ€”\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â Drug B\n1.36\n0.92, 2.01\n0.92, 2.01\n\n\n\n\n\nAbbreviations: CI = Confidence Interval, HR = Hazard Ratio\n\n\n\n\n\n\n\n\n\n\nç´¯ç§¯å‘ç”Ÿç‡è¡¨\n\n# ä½¿ç”¨survfitç”Ÿæˆç”Ÿå­˜ç‡è¡¨\nsurv_fit &lt;- survfit(Surv(ttdeath, death) ~ trt, data = trial)\n\ntbl_survfit(\n    surv_fit,\n    times = c(6, 12, 18, 24),\n    label_header = \"**{time}ä¸ªæœˆç”Ÿå­˜ç‡**\"\n) %&gt;%\n    add_p() %&gt;%\n    modify_caption(\"**Kaplan-Meierç”Ÿå­˜ç‡ä¼°è®¡**\")\n\n\n\n\n\nKaplan-Meierç”Ÿå­˜ç‡ä¼°è®¡\n\n\n\n\n\n\n\n\n\n\nCharacteristic\n6ä¸ªæœˆç”Ÿå­˜ç‡\n12ä¸ªæœˆç”Ÿå­˜ç‡\n18ä¸ªæœˆç”Ÿå­˜ç‡\n24ä¸ªæœˆç”Ÿå­˜ç‡\np-value1\n\n\n\n\nChemotherapy Treatment\n\n\n\n\n\n\n\n\n0.2\n\n\nÂ Â Â Â Drug A\n99% (97%, 100%)\n91% (85%, 97%)\n70% (62%, 80%)\n47% (38%, 58%)\n\n\n\n\nÂ Â Â Â Drug B\n99% (97%, 100%)\n86% (80%, 93%)\n60% (51%, 70%)\n41% (33%, 52%)\n\n\n\n\n\n1 Log-rank test",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gtsummary - å‘è¡¨çº§è¡¨æ ¼"
    ]
  },
  {
    "objectID": "1053-gtsummary.html#è¡¨æ ¼åˆå¹¶ä¸å †å ",
    "href": "1053-gtsummary.html#è¡¨æ ¼åˆå¹¶ä¸å †å ",
    "title": "gtsummary - å‘è¡¨çº§ç»Ÿè®¡è¡¨æ ¼",
    "section": "è¡¨æ ¼åˆå¹¶ä¸å †å ",
    "text": "è¡¨æ ¼åˆå¹¶ä¸å †å \n\næ¨ªå‘åˆå¹¶\n\n# ä¸åŒç»“å±€çš„åˆ†æ\nmodel_death &lt;- coxph(Surv(ttdeath, death) ~ age + grade, data = trial)\nmodel_response &lt;- glm(response ~ age + grade, data = trial, family = binomial)\n\ntbl_death &lt;- tbl_regression(model_death, exponentiate = TRUE) %&gt;%\n    modify_header(estimate = \"**HR**\")\n\ntbl_response &lt;- tbl_regression(model_response, exponentiate = TRUE) %&gt;%\n    modify_header(estimate = \"**OR**\")\n\n# åˆå¹¶\ntbl_merge(\n    list(tbl_death, tbl_response),\n    tab_spanner = c(\"**æ­»äº¡é£é™©**\", \"**æ²»ç–—ååº”**\")\n)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCharacteristic\n\næ­»äº¡é£é™©\n\n\næ²»ç–—ååº”\n\n\n\nHR\n95% CI\np-value\nOR\n95% CI\np-value\n\n\n\n\nAge\n1.01\n0.99, 1.02\n0.3\n1.02\n1.00, 1.04\n0.10\n\n\nGrade\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ Â Â Â I\nâ€”\nâ€”\n\n\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â II\n1.20\n0.73, 1.97\n0.5\n0.85\n0.39, 1.85\n0.7\n\n\nÂ Â Â Â III\n1.80\n1.13, 2.87\n0.014\n1.01\n0.47, 2.16\n&gt;0.9\n\n\n\nAbbreviations: CI = Confidence Interval, HR = Hazard Ratio, OR = Odds Ratio\n\n\n\n\n\n\n\n\n\n\nçºµå‘å †å \n\n# ä¸åŒäºšç»„çš„åˆ†æ\ntbl_male &lt;- trial %&gt;%\n    filter(!is.na(response)) %&gt;%\n    tbl_summary(\n        include = c(age, grade, response),\n        by = response\n    ) %&gt;%\n    modify_header(label = \"**å˜é‡**\")\n\ntbl_stacked &lt;- tbl_stack(\n    list(tbl1, tbl_male),\n    group_header = c(\"**å…¨éƒ¨æ‚£è€…**\", \"**æœ‰ååº”æ•°æ®çš„æ‚£è€…**\")\n)\n\nTable 1 Column Name   Header                  \nlabel                 \"**Characteristic**\"    \nstat_0                \"**N = 200**\"           \nTable 2 Column Name   Header                \nlabel                 \"**å˜é‡**\"              \nstat_1                \"**0**  \\nN = 132\"    \nstat_2                \"**1**  \\nN = 61\"     \n\ntbl_stacked\n\n\n\n\n\n\n\n\n\n\n\n\n\nCharacteristic\nN = 2001\n0\nN = 1321\n1\nN = 611\n\n\n\n\n**å…¨éƒ¨æ‚£è€…**\n\n\nAge\n47 (38, 57)\n\n\n\n\n\n\nÂ Â Â Â Unknown\n11\n\n\n\n\n\n\nGrade\n\n\n\n\n\n\n\n\nÂ Â Â Â I\n68 (34%)\n\n\n\n\n\n\nÂ Â Â Â II\n68 (34%)\n\n\n\n\n\n\nÂ Â Â Â III\n64 (32%)\n\n\n\n\n\n\nT Stage\n\n\n\n\n\n\n\n\nÂ Â Â Â T1\n53 (27%)\n\n\n\n\n\n\nÂ Â Â Â T2\n54 (27%)\n\n\n\n\n\n\nÂ Â Â Â T3\n43 (22%)\n\n\n\n\n\n\nÂ Â Â Â T4\n50 (25%)\n\n\n\n\n\n\nChemotherapy Treatment\n\n\n\n\n\n\n\n\nÂ Â Â Â Drug A\n98 (49%)\n\n\n\n\n\n\nÂ Â Â Â Drug B\n102 (51%)\n\n\n\n\n\n\n**æœ‰ååº”æ•°æ®çš„æ‚£è€…**\n\n\nAge\n\n\n46 (36, 55)\n49 (43, 59)\n\n\nÂ Â Â Â Unknown\n\n\n7\n3\n\n\nGrade\n\n\n\n\n\n\n\n\nÂ Â Â Â I\n\n\n46 (35%)\n21 (34%)\n\n\nÂ Â Â Â II\n\n\n44 (33%)\n19 (31%)\n\n\nÂ Â Â Â III\n\n\n42 (32%)\n21 (34%)\n\n\n\n1 Median (Q1, Q3); n (%)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gtsummary - å‘è¡¨çº§è¡¨æ ¼"
    ]
  },
  {
    "objectID": "1053-gtsummary.html#äºšç»„åˆ†æè¡¨æ ¼",
    "href": "1053-gtsummary.html#äºšç»„åˆ†æè¡¨æ ¼",
    "title": "gtsummary - å‘è¡¨çº§ç»Ÿè®¡è¡¨æ ¼",
    "section": "äºšç»„åˆ†æè¡¨æ ¼",
    "text": "äºšç»„åˆ†æè¡¨æ ¼\n\n# åˆ›å»ºäºšç»„åˆ†æè¡¨æ ¼\ntbl_forest &lt;- trial %&gt;%\n    mutate(\n        age_group = ifelse(age &gt; 60, \"&gt;60å²\", \"â‰¤60å²\")\n    ) %&gt;%\n    select(response, trt, age_group, grade, stage) %&gt;%\n    filter(!is.na(response)) %&gt;%\n    tbl_strata(\n        strata = c(age_group, grade),\n        .tbl_fun = ~ .x %&gt;%\n            tbl_summary(by = trt, include = response) %&gt;%\n            add_p()\n    )\n\ntbl_forest\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCharacteristic\n\n&gt;60å², I\n\n\n&gt;60å², II\n\n\n&gt;60å², III\n\n\nâ‰¤60å², I\n\n\nâ‰¤60å², II\n\n\nâ‰¤60å², III\n\n\nNA, I\n\n\nNA, II\n\n\nNA, III\n\n\n\nDrug A\nN = 71\nDrug B\nN = 51\np-value2\nDrug A\nN = 61\nDrug B\nN = 51\np-value2\nDrug A\nN = 71\nDrug B\nN = 61\np-value2\nDrug A\nN = 261\nDrug B\nN = 271\np-value3\nDrug A\nN = 231\nDrug B\nN = 241\np-value3\nDrug A\nN = 201\nDrug B\nN = 271\np-value3\nDrug A\nN = 21\np-value4\nDrug A\nN = 11\nDrug B\nN = 41\np-value2\nDrug A\nN = 31\np-value4\n\n\n\n\nTumor Response\n2 (29%)\n5 (100%)\n0.028\n2 (33%)\n1 (20%)\n&gt;0.9\n3 (43%)\n1 (17%)\n0.6\n6 (23%)\n8 (30%)\n0.6\n5 (22%)\n9 (38%)\n0.2\n9 (45%)\n7 (26%)\n0.2\n\n\n\n\n0 (0%)\n2 (50%)\n&gt;0.9\n1 (33%)\n\n\n\n\nÂ Â Â Â 0\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n2 (100%)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n1 n (%)\n\n\n2 Fisherâ€™s exact test\n\n\n3 Pearsonâ€™s Chi-squared test\n\n\n4 NA",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gtsummary - å‘è¡¨çº§è¡¨æ ¼"
    ]
  },
  {
    "objectID": "1053-gtsummary.html#è‡ªå®šä¹‰è¡¨æ ¼å¤–è§‚",
    "href": "1053-gtsummary.html#è‡ªå®šä¹‰è¡¨æ ¼å¤–è§‚",
    "title": "gtsummary - å‘è¡¨çº§ç»Ÿè®¡è¡¨æ ¼",
    "section": "è‡ªå®šä¹‰è¡¨æ ¼å¤–è§‚",
    "text": "è‡ªå®šä¹‰è¡¨æ ¼å¤–è§‚\n\nä½¿ç”¨modifyç³»åˆ—å‡½æ•°\n\n# é«˜åº¦è‡ªå®šä¹‰çš„è¡¨æ ¼\ntbl_custom_style &lt;- trial %&gt;%\n    select(age, grade, stage, trt) %&gt;%\n    tbl_summary(by = trt) %&gt;%\n    add_p() %&gt;%\n    add_overall() %&gt;%\n    # ä¿®æ”¹è¡¨å¤´\n    modify_header(\n        label = \"**ç‰¹å¾**\",\n        all_stat_cols() ~ \"**{level}**&lt;br&gt;N = {n}\",\n        p.value = \"**På€¼**\"\n    ) %&gt;%\n    # æ·»åŠ è„šæ³¨\n    modify_footnote(\n        all_stat_cols() ~ \"è¿ç»­å˜é‡: å‡å€¼ (æ ‡å‡†å·®); åˆ†ç±»å˜é‡: n (%)\",\n        p.value ~ \"è¿ç»­å˜é‡: Wilcoxonæ£€éªŒ; åˆ†ç±»å˜é‡: å¡æ–¹æ£€éªŒ\"\n    ) %&gt;%\n    # æ·»åŠ æ ‡é¢˜\n    modify_caption(\"**è¡¨1. åŸºçº¿ç‰¹å¾æ¯”è¾ƒ**\") %&gt;%\n    # ç²—ä½“æ ‡ç­¾\n    bold_labels()\n\ntbl_custom_style\n\n\n\n\n\nè¡¨1. åŸºçº¿ç‰¹å¾æ¯”è¾ƒ\n\n\n\n\n\n\n\n\n\nç‰¹å¾\nOverallN = 2001\nDrug AN = 981\nDrug BN = 1021\nPå€¼2\n\n\n\n\nAge\n47 (38, 57)\n46 (37, 60)\n48 (39, 56)\n0.7\n\n\nÂ Â Â Â Unknown\n11\n7\n4\n\n\n\n\nGrade\n\n\n\n\n\n\n0.9\n\n\nÂ Â Â Â I\n68 (34%)\n35 (36%)\n33 (32%)\n\n\n\n\nÂ Â Â Â II\n68 (34%)\n32 (33%)\n36 (35%)\n\n\n\n\nÂ Â Â Â III\n64 (32%)\n31 (32%)\n33 (32%)\n\n\n\n\nT Stage\n\n\n\n\n\n\n0.9\n\n\nÂ Â Â Â T1\n53 (27%)\n28 (29%)\n25 (25%)\n\n\n\n\nÂ Â Â Â T2\n54 (27%)\n25 (26%)\n29 (28%)\n\n\n\n\nÂ Â Â Â T3\n43 (22%)\n22 (22%)\n21 (21%)\n\n\n\n\nÂ Â Â Â T4\n50 (25%)\n23 (23%)\n27 (26%)\n\n\n\n\n\n1 è¿ç»­å˜é‡: å‡å€¼ (æ ‡å‡†å·®); åˆ†ç±»å˜é‡: n (%)\n\n\n2 è¿ç»­å˜é‡: Wilcoxonæ£€éªŒ; åˆ†ç±»å˜é‡: å¡æ–¹æ£€éªŒ\n\n\n\n\n\n\n\n\n\n\nä½¿ç”¨ä¸»é¢˜\n\n# è®¾ç½®ä¸­æ–‡ä¸»é¢˜\ntheme_gtsummary_language(\"zh-cn\", decimal.mark = \".\", big.mark = \",\")\n\n# æœŸåˆŠé£æ ¼ä¸»é¢˜\ntheme_gtsummary_journal(\"jama\")\n\n# æˆ–è€…ç´§å‡‘ä¸»é¢˜\ntheme_gtsummary_compact()\n\n# é‡æ–°ç”Ÿæˆè¡¨æ ¼\ntrial %&gt;%\n    select(age, grade, trt) %&gt;%\n    tbl_summary(by = trt) %&gt;%\n    add_p()\n\n\n\n\n\n\n\n\n\n\n\n\n\nç‰¹å¾\nDrug A\nN = 98\nDrug B\nN = 102\npå€¼1\n\n\n\n\nAge, ä¸­ä½æ•° (IQR)\n46 (37 â€“ 60)\n48 (39 â€“ 56)\n0.72\n\n\nÂ Â Â Â æœªçŸ¥æ•°\n7\n4\n\n\n\n\nGrade, n (%)\n\n\n\n\n0.87\n\n\nÂ Â Â Â I\n35 (36)\n33 (32)\n\n\n\n\nÂ Â Â Â II\n32 (33)\n36 (35)\n\n\n\n\nÂ Â Â Â III\n31 (32)\n33 (32)\n\n\n\n\n\n1 Wilcoxonç§©å’Œæ£€éªŒ; å¡æ–¹ç‹¬ç«‹æ€§æ£€å®š\n\n\n\n\n\n\n\n\n\n# é‡ç½®ä¸ºé»˜è®¤ä¸»é¢˜\nreset_gtsummary_theme()",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gtsummary - å‘è¡¨çº§è¡¨æ ¼"
    ]
  },
  {
    "objectID": "1053-gtsummary.html#å¯¼å‡ºè¡¨æ ¼",
    "href": "1053-gtsummary.html#å¯¼å‡ºè¡¨æ ¼",
    "title": "gtsummary - å‘è¡¨çº§ç»Ÿè®¡è¡¨æ ¼",
    "section": "å¯¼å‡ºè¡¨æ ¼",
    "text": "å¯¼å‡ºè¡¨æ ¼\n\nå¯¼å‡ºåˆ°Word\n\n# æ–¹æ³•1ï¼šä½¿ç”¨flextable\nlibrary(flextable)\n\ntbl1_by %&gt;%\n    as_flex_table() %&gt;%\n    save_as_docx(path = \"table1.docx\")\n\n# æ–¹æ³•2ï¼šä½¿ç”¨gtï¼ˆæ›´å¤šæ ¼å¼é€‰é¡¹ï¼‰\nlibrary(gt)\n\ntbl1_by %&gt;%\n    as_gt() %&gt;%\n    gtsave(\"table1.docx\")\n\n\n\nå¯¼å‡ºåˆ°PDF/HTML\n\n# å¯¼å‡ºä¸ºHTML\ntbl1_by %&gt;%\n    as_gt() %&gt;%\n    gtsave(\"table1.html\")\n\n# å¯¼å‡ºä¸ºPDFï¼ˆéœ€è¦LaTeXï¼‰\ntbl1_by %&gt;%\n    as_gt() %&gt;%\n    gtsave(\"table1.pdf\")\n\n\n\nåœ¨RMarkdownä¸­ä½¿ç”¨\n\n# ç›´æ¥åœ¨RMarkdownä¸­æ‰“å°å³å¯\n# ä¼šè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„è¾“å‡ºæ ¼å¼\ntbl1_by",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gtsummary - å‘è¡¨çº§è¡¨æ ¼"
    ]
  },
  {
    "objectID": "1053-gtsummary.html#é«˜çº§æŠ€å·§",
    "href": "1053-gtsummary.html#é«˜çº§æŠ€å·§",
    "title": "gtsummary - å‘è¡¨çº§ç»Ÿè®¡è¡¨æ ¼",
    "section": "é«˜çº§æŠ€å·§",
    "text": "é«˜çº§æŠ€å·§\n\n1. æ·»åŠ æ•ˆåº”å€¼\n\n# è®¡ç®—å¹¶æ·»åŠ Cohen's dç­‰æ•ˆåº”å€¼\ntrial %&gt;%\n    select(age, marker, trt) %&gt;%\n    tbl_summary(by = trt) %&gt;%\n    add_difference(\n        test = list(all_continuous() ~ \"t.test\")\n    )\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCharacteristic\nDrug A\nN = 981\nDrug B\nN = 1021\nDifference2\n95% CI2\np-value2\n\n\n\n\nAge\n46 (37, 60)\n48 (39, 56)\n-0.44\n-4.6, 3.7\n0.8\n\n\nÂ Â Â Â Unknown\n7\n4\n\n\n\n\n\n\n\n\nMarker Level (ng/mL)\n0.84 (0.23, 1.60)\n0.52 (0.18, 1.21)\n0.20\n-0.05, 0.44\n0.12\n\n\nÂ Â Â Â Unknown\n6\n4\n\n\n\n\n\n\n\n\n\n1 Median (Q1, Q3)\n\n\n2 Welch Two Sample t-test\n\n\nAbbreviation: CI = Confidence Interval\n\n\n\n\n\n\n\n\n\n\n2. åˆ†å±‚è¡¨æ ¼\n\n# æŒ‰æ€§åˆ«åˆ†å±‚çš„è¡¨æ ¼\ntrial %&gt;%\n    mutate(\n        gender = sample(c(\"ç”·\", \"å¥³\"), n(), replace = TRUE)\n    ) %&gt;%\n    select(age, grade, trt, gender) %&gt;%\n    tbl_strata(\n        strata = gender,\n        .tbl_fun = ~ .x %&gt;%\n            tbl_summary(by = trt) %&gt;%\n            add_p()\n    )\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCharacteristic\n\nå¥³\n\n\nç”·\n\n\n\nDrug A\nN = 551\nDrug B\nN = 671\np-value2\nDrug A\nN = 431\nDrug B\nN = 351\np-value2\n\n\n\n\nAge\n42 (34, 57)\n47 (38, 57)\n0.3\n51 (43, 61)\n52 (41, 56)\n0.7\n\n\nÂ Â Â Â Unknown\n1\n3\n\n\n6\n1\n\n\n\n\nGrade\n\n\n\n\n&gt;0.9\n\n\n\n\n&gt;0.9\n\n\nÂ Â Â Â I\n19 (35%)\n21 (31%)\n\n\n16 (37%)\n12 (34%)\n\n\n\n\nÂ Â Â Â II\n19 (35%)\n24 (36%)\n\n\n13 (30%)\n12 (34%)\n\n\n\n\nÂ Â Â Â III\n17 (31%)\n22 (33%)\n\n\n14 (33%)\n11 (31%)\n\n\n\n\n\n1 Median (Q1, Q3); n (%)\n\n\n2 Wilcoxon rank sum test; Pearsonâ€™s Chi-squared test\n\n\n\n\n\n\n\n\n\n\n3. è‡ªå®šä¹‰æ£€éªŒæ–¹æ³•\n\n# ä½¿ç”¨è‡ªå®šä¹‰æ£€éªŒ\ntrial %&gt;%\n    select(age, grade, trt) %&gt;%\n    tbl_summary(by = trt) %&gt;%\n    add_p(\n        test = list(\n            age ~ \"t.test\", # tæ£€éªŒ\n            grade ~ \"fisher.test\" # Fisherç²¾ç¡®æ£€éªŒ\n        ),\n        pvalue_fun = ~ style_pvalue(.x, digits = 3)\n    )\n\n\n\n\n\n\n\n\n\n\n\n\n\nCharacteristic\nDrug A\nN = 981\nDrug B\nN = 1021\np-value2\n\n\n\n\nAge\n46 (37, 60)\n48 (39, 56)\n0.834\n\n\nÂ Â Â Â Unknown\n7\n4\n\n\n\n\nGrade\n\n\n\n\n0.906\n\n\nÂ Â Â Â I\n35 (36%)\n33 (32%)\n\n\n\n\nÂ Â Â Â II\n32 (33%)\n36 (35%)\n\n\n\n\nÂ Â Â Â III\n31 (32%)\n33 (32%)\n\n\n\n\n\n1 Median (Q1, Q3); n (%)\n\n\n2 Welch Two Sample t-test; Fisherâ€™s exact test\n\n\n\n\n\n\n\n\n\n\n4. å†…è”ç»Ÿè®¡é‡\n\n# åœ¨æ–‡ç« æ­£æ–‡ä¸­å¼•ç”¨ç»Ÿè®¡é‡\ntbl &lt;- trial %&gt;%\n    select(age, trt) %&gt;%\n    tbl_summary(by = trt)\n\n# è·å–ç»Ÿè®¡é‡ç”¨äºè¡Œå†…å¼•ç”¨\ninline_text(tbl, variable = age, column = \"Drug A\")\n\n[1] \"46 (37, 60)\"",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gtsummary - å‘è¡¨çº§è¡¨æ ¼"
    ]
  },
  {
    "objectID": "1053-gtsummary.html#å®Œæ•´å·¥ä½œæµç¤ºä¾‹",
    "href": "1053-gtsummary.html#å®Œæ•´å·¥ä½œæµç¤ºä¾‹",
    "title": "gtsummary - å‘è¡¨çº§ç»Ÿè®¡è¡¨æ ¼",
    "section": "å®Œæ•´å·¥ä½œæµç¤ºä¾‹",
    "text": "å®Œæ•´å·¥ä½œæµç¤ºä¾‹\n\n# ä¸´åºŠç ”ç©¶å®Œæ•´è¡¨æ ¼åˆ¶ä½œæµç¨‹\n\n# 1. æ•°æ®å‡†å¤‡\nanalysis_data &lt;- trial %&gt;%\n    select(\n        age, grade, stage, marker,\n        response, death, ttdeath, trt\n    ) %&gt;%\n    mutate(\n        age_group = cut(age,\n            breaks = c(0, 50, 65, Inf),\n            labels = c(\"&lt;50å²\", \"50-65å²\", \"&gt;65å²\")\n        )\n    )\n\n# 2. è¡¨1ï¼šåŸºçº¿ç‰¹å¾\ntable1 &lt;- analysis_data %&gt;%\n    select(age, age_group, grade, stage, marker, trt) %&gt;%\n    tbl_summary(\n        by = trt,\n        statistic = list(\n            all_continuous() ~ \"{mean} Â± {sd}\",\n            all_categorical() ~ \"{n} ({p}%)\"\n        ),\n        label = list(\n            age ~ \"å¹´é¾„ (å²)\",\n            age_group ~ \"å¹´é¾„åˆ†ç»„\",\n            grade ~ \"è‚¿ç˜¤åˆ†çº§\",\n            stage ~ \"ä¸´åºŠåˆ†æœŸ\",\n            marker ~ \"è‚¿ç˜¤æ ‡å¿—ç‰©\"\n        ),\n        missing_text = \"ç¼ºå¤±\"\n    ) %&gt;%\n    add_overall() %&gt;%\n    add_p() %&gt;%\n    bold_labels() %&gt;%\n    modify_caption(\"**è¡¨1. æ‚£è€…åŸºçº¿ç‰¹å¾**\")\n\n# 3. è¡¨2ï¼šCoxå›å½’\ncox_full &lt;- coxph(\n    Surv(ttdeath, death) ~ age + grade + stage + marker + trt,\n    data = analysis_data\n)\n\ntable2 &lt;- tbl_regression(\n    cox_full,\n    exponentiate = TRUE,\n    label = list(\n        age ~ \"å¹´é¾„\",\n        grade ~ \"è‚¿ç˜¤åˆ†çº§\",\n        stage ~ \"ä¸´åºŠåˆ†æœŸ\",\n        marker ~ \"è‚¿ç˜¤æ ‡å¿—ç‰©\",\n        trt ~ \"æ²»ç–—ç»„\"\n    )\n) %&gt;%\n    add_global_p() %&gt;%\n    bold_p() %&gt;%\n    bold_labels() %&gt;%\n    modify_caption(\"**è¡¨2. Coxå›å½’åˆ†æ - æ­»äº¡é£é™©å› ç´ **\")\n\n# 4. è¾“å‡º\ntable1\n\n\n\n\n\nè¡¨1. æ‚£è€…åŸºçº¿ç‰¹å¾\n\n\n\n\n\n\n\n\n\nCharacteristic\nOverall\nN = 2001\nDrug A\nN = 981\nDrug B\nN = 1021\np-value2\n\n\n\n\nå¹´é¾„ (å²)\n47 Â± 14\n47 Â± 15\n47 Â± 14\n0.7\n\n\nÂ Â Â Â ç¼ºå¤±\n11\n7\n4\n\n\n\n\nå¹´é¾„åˆ†ç»„\n\n\n\n\n\n\n&gt;0.9\n\n\nÂ Â Â Â &lt;50å²\n113 (60%)\n54 (59%)\n59 (60%)\n\n\n\n\nÂ Â Â Â 50-65å²\n53 (28%)\n26 (29%)\n27 (28%)\n\n\n\n\nÂ Â Â Â &gt;65å²\n23 (12%)\n11 (12%)\n12 (12%)\n\n\n\n\nÂ Â Â Â ç¼ºå¤±\n11\n7\n4\n\n\n\n\nè‚¿ç˜¤åˆ†çº§\n\n\n\n\n\n\n0.9\n\n\nÂ Â Â Â I\n68 (34%)\n35 (36%)\n33 (32%)\n\n\n\n\nÂ Â Â Â II\n68 (34%)\n32 (33%)\n36 (35%)\n\n\n\n\nÂ Â Â Â III\n64 (32%)\n31 (32%)\n33 (32%)\n\n\n\n\nä¸´åºŠåˆ†æœŸ\n\n\n\n\n\n\n0.9\n\n\nÂ Â Â Â T1\n53 (27%)\n28 (29%)\n25 (25%)\n\n\n\n\nÂ Â Â Â T2\n54 (27%)\n25 (26%)\n29 (28%)\n\n\n\n\nÂ Â Â Â T3\n43 (22%)\n22 (22%)\n21 (21%)\n\n\n\n\nÂ Â Â Â T4\n50 (25%)\n23 (23%)\n27 (26%)\n\n\n\n\nè‚¿ç˜¤æ ‡å¿—ç‰©\n0.92 Â± 0.86\n1.02 Â± 0.89\n0.82 Â± 0.83\n0.085\n\n\nÂ Â Â Â ç¼ºå¤±\n10\n6\n4\n\n\n\n\n\n1 Mean Â± SD; n (%)\n\n\n2 Wilcoxon rank sum test; Pearsonâ€™s Chi-squared test\n\n\n\n\n\n\n\ntable2\n\n\n\n\n\nè¡¨2. Coxå›å½’åˆ†æ - æ­»äº¡é£é™©å› ç´ \n\n\n\n\n\n\n\n\nCharacteristic\nHR\n95% CI\np-value\n\n\n\n\nå¹´é¾„\n1.01\n1.00, 1.03\n0.2\n\n\nè‚¿ç˜¤åˆ†çº§\n\n\n\n\n0.086\n\n\nÂ Â Â Â I\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â II\n1.15\n0.68, 1.95\n\n\n\n\nÂ Â Â Â III\n1.69\n1.05, 2.74\n\n\n\n\nä¸´åºŠåˆ†æœŸ\n\n\n\n\n&lt;0.001\n\n\nÂ Â Â Â T1\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â T2\n1.52\n0.82, 2.81\n\n\n\n\nÂ Â Â Â T3\n1.42\n0.73, 2.77\n\n\n\n\nÂ Â Â Â T4\n3.23\n1.79, 5.86\n\n\n\n\nè‚¿ç˜¤æ ‡å¿—ç‰©\n0.89\n0.69, 1.14\n0.3\n\n\næ²»ç–—ç»„\n\n\n\n\n0.11\n\n\nÂ Â Â Â Drug A\nâ€”\nâ€”\n\n\n\n\nÂ Â Â Â Drug B\n1.39\n0.93, 2.10\n\n\n\n\n\nAbbreviations: CI = Confidence Interval, HR = Hazard Ratio",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gtsummary - å‘è¡¨çº§è¡¨æ ¼"
    ]
  },
  {
    "objectID": "1053-gtsummary.html#å¸¸ç”¨å‡½æ•°é€ŸæŸ¥",
    "href": "1053-gtsummary.html#å¸¸ç”¨å‡½æ•°é€ŸæŸ¥",
    "title": "gtsummary - å‘è¡¨çº§ç»Ÿè®¡è¡¨æ ¼",
    "section": "å¸¸ç”¨å‡½æ•°é€ŸæŸ¥",
    "text": "å¸¸ç”¨å‡½æ•°é€ŸæŸ¥\n\n\n\nå‡½æ•°\nç”¨é€”\n\n\n\n\ntbl_summary()\næè¿°æ€§ç»Ÿè®¡è¡¨\n\n\ntbl_regression()\nå›å½’æ¨¡å‹è¡¨æ ¼\n\n\ntbl_uvregression()\nå•å˜é‡å›å½’\n\n\ntbl_survfit()\nç”Ÿå­˜ç‡è¡¨\n\n\ntbl_cross()\näº¤å‰è¡¨\n\n\ntbl_merge()\næ¨ªå‘åˆå¹¶è¡¨æ ¼\n\n\ntbl_stack()\nçºµå‘å †å è¡¨æ ¼\n\n\ntbl_strata()\nåˆ†å±‚è¡¨æ ¼\n\n\nadd_p()\næ·»åŠ på€¼\n\n\nadd_overall()\næ·»åŠ æ€»è®¡åˆ—\n\n\nadd_n()\næ·»åŠ æ ·æœ¬é‡\n\n\nadd_global_p()\næ·»åŠ æ•´ä½“på€¼\n\n\nbold_p()\nåŠ ç²—æ˜¾è‘—på€¼\n\n\nbold_labels()\nåŠ ç²—å˜é‡æ ‡ç­¾",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gtsummary - å‘è¡¨çº§è¡¨æ ¼"
    ]
  },
  {
    "objectID": "1053-gtsummary.html#æ€»ç»“",
    "href": "1053-gtsummary.html#æ€»ç»“",
    "title": "gtsummary - å‘è¡¨çº§ç»Ÿè®¡è¡¨æ ¼",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nè¦ç‚¹\nè¯´æ˜\n\n\n\n\næ ¸å¿ƒä¼˜åŠ¿\nè‡ªåŠ¨åŒ–ã€è§„èŒƒåŒ–ã€å¯é‡å¤\n\n\nTable 1\ntbl_summary() + add_p()\n\n\nå›å½’è¡¨æ ¼\ntbl_regression()\n\n\nåˆå¹¶è¡¨æ ¼\ntbl_merge() / tbl_stack()\n\n\nå¯¼å‡º\næ”¯æŒWord/PDF/HTML\n\n\nè‡ªå®šä¹‰\nä½¿ç”¨modify_*ç³»åˆ—å‡½æ•°",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gtsummary - å‘è¡¨çº§è¡¨æ ¼"
    ]
  },
  {
    "objectID": "1055-tx-effects-survival.html",
    "href": "1055-tx-effects-survival.html",
    "title": "TxEffectsSurvival: ç«äº‰é£é™©ä¸‹çš„æ²»ç–—æ•ˆæœåˆ†æ",
    "section": "",
    "text": "TxEffectsSurvival æ˜¯ä¸€ä¸ªç”¨äºåœ¨ç«äº‰é£é™©æ¡†æ¶ä¸‹è¯„ä¼°æ²»ç–—æ•ˆæœçš„ R åŒ…ã€‚å®ƒæä¾›äº†å¤šç§ç½®ä¿¡åŒºé—´å’Œæ£€éªŒæ–¹æ³•ï¼Œé€‚ç”¨äºåŒæ—¶å­˜åœ¨ç»ˆæœ«äº‹ä»¶ï¼ˆå¦‚æ­»äº¡ï¼‰å’Œéç»ˆæœ«äº‹ä»¶ï¼ˆå¦‚ç–¾ç—…å¤å‘ï¼‰çš„ç”Ÿå­˜æ•°æ®åˆ†æã€‚\n\n\n\n\n\n\n\n\n\n\næ–¹æ³•\nå…¨ç§°\nè¯´æ˜\n\n\n\n\nWin Ratio\nèƒœç‡\nåŸºäºæˆå¯¹æ¯”è¾ƒçš„åŠå‚æ•°æ–¹æ³•\n\n\nRICH\nRatio of Integrated Cumulative Hazard\nç´¯ç§¯é£é™©æ¯”çš„ç§¯åˆ†æ¯”\n\n\nRITCH\nRatio of Integrated Transformed Cumulative Hazard\nå˜æ¢ç´¯ç§¯é£é™©çš„ç§¯åˆ†æ¯”\n\n\n\n\n\n\n\nä¸´åºŠè¯•éªŒï¼šè¯„ä¼°æ–°æ²»ç–—å¯¹å¤šä¸ªç»ˆç‚¹çš„æ•ˆæœ\nå¿ƒè¡€ç®¡ç ”ç©¶ï¼šå¿ƒè¡°è¯•éªŒä¸­çš„æ­»äº¡å’Œä½é™¢äº‹ä»¶\nè‚¿ç˜¤å­¦ï¼šæ— è¿›å±•ç”Ÿå­˜å’Œæ€»ç”Ÿå­˜çš„è”åˆåˆ†æ\nç«äº‰é£é™©åˆ†æï¼šå­˜åœ¨å¤šç§ç»“å±€ç±»å‹çš„ç”Ÿå­˜æ•°æ®",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "æ²»ç–—æ•ˆæœåˆ†æ"
    ]
  },
  {
    "objectID": "1055-tx-effects-survival.html#ä»€ä¹ˆæ˜¯-txeffectssurvival",
    "href": "1055-tx-effects-survival.html#ä»€ä¹ˆæ˜¯-txeffectssurvival",
    "title": "TxEffectsSurvival: ç«äº‰é£é™©ä¸‹çš„æ²»ç–—æ•ˆæœåˆ†æ",
    "section": "",
    "text": "TxEffectsSurvival æ˜¯ä¸€ä¸ªç”¨äºåœ¨ç«äº‰é£é™©æ¡†æ¶ä¸‹è¯„ä¼°æ²»ç–—æ•ˆæœçš„ R åŒ…ã€‚å®ƒæä¾›äº†å¤šç§ç½®ä¿¡åŒºé—´å’Œæ£€éªŒæ–¹æ³•ï¼Œé€‚ç”¨äºåŒæ—¶å­˜åœ¨ç»ˆæœ«äº‹ä»¶ï¼ˆå¦‚æ­»äº¡ï¼‰å’Œéç»ˆæœ«äº‹ä»¶ï¼ˆå¦‚ç–¾ç—…å¤å‘ï¼‰çš„ç”Ÿå­˜æ•°æ®åˆ†æã€‚\n\n\n\n\n\n\n\n\n\n\næ–¹æ³•\nå…¨ç§°\nè¯´æ˜\n\n\n\n\nWin Ratio\nèƒœç‡\nåŸºäºæˆå¯¹æ¯”è¾ƒçš„åŠå‚æ•°æ–¹æ³•\n\n\nRICH\nRatio of Integrated Cumulative Hazard\nç´¯ç§¯é£é™©æ¯”çš„ç§¯åˆ†æ¯”\n\n\nRITCH\nRatio of Integrated Transformed Cumulative Hazard\nå˜æ¢ç´¯ç§¯é£é™©çš„ç§¯åˆ†æ¯”\n\n\n\n\n\n\n\nä¸´åºŠè¯•éªŒï¼šè¯„ä¼°æ–°æ²»ç–—å¯¹å¤šä¸ªç»ˆç‚¹çš„æ•ˆæœ\nå¿ƒè¡€ç®¡ç ”ç©¶ï¼šå¿ƒè¡°è¯•éªŒä¸­çš„æ­»äº¡å’Œä½é™¢äº‹ä»¶\nè‚¿ç˜¤å­¦ï¼šæ— è¿›å±•ç”Ÿå­˜å’Œæ€»ç”Ÿå­˜çš„è”åˆåˆ†æ\nç«äº‰é£é™©åˆ†æï¼šå­˜åœ¨å¤šç§ç»“å±€ç±»å‹çš„ç”Ÿå­˜æ•°æ®",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "æ²»ç–—æ•ˆæœåˆ†æ"
    ]
  },
  {
    "objectID": "1055-tx-effects-survival.html#å®‰è£…ä¸åŠ è½½",
    "href": "1055-tx-effects-survival.html#å®‰è£…ä¸åŠ è½½",
    "title": "TxEffectsSurvival: ç«äº‰é£é™©ä¸‹çš„æ²»ç–—æ•ˆæœåˆ†æ",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\n# å®‰è£… TxEffectsSurvival\n# install.packages(\"TxEffectsSurvival\")\n\n# åŠ è½½åŒ…\nlibrary(TxEffectsSurvival)\nlibrary(tidyverse)\nlibrary(survival)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "æ²»ç–—æ•ˆæœåˆ†æ"
    ]
  },
  {
    "objectID": "1055-tx-effects-survival.html#åŸºæœ¬æ¦‚å¿µ",
    "href": "1055-tx-effects-survival.html#åŸºæœ¬æ¦‚å¿µ",
    "title": "TxEffectsSurvival: ç«äº‰é£é™©ä¸‹çš„æ²»ç–—æ•ˆæœåˆ†æ",
    "section": "åŸºæœ¬æ¦‚å¿µ",
    "text": "åŸºæœ¬æ¦‚å¿µ\n\nç«äº‰é£é™©\nåœ¨ç”Ÿå­˜åˆ†æä¸­ï¼Œç«äº‰é£é™©æ˜¯æŒ‡å¤šç§äº‹ä»¶ç±»å‹ç›¸äº’ç«äº‰ï¼Œä¸€ç§äº‹ä»¶çš„å‘ç”Ÿä¼šé˜»æ­¢å…¶ä»–äº‹ä»¶çš„è§‚å¯Ÿï¼š\n\n\n\n\n\n\n\n\n\n\n\nWin Ratio (èƒœç‡)\nWin Ratio æ˜¯ä¸€ç§éå‚æ•°æ–¹æ³•ï¼Œé€šè¿‡æˆå¯¹æ¯”è¾ƒæ²»ç–—ç»„å’Œå¯¹ç…§ç»„çš„æ‚£è€…ï¼š\n\nèµ¢ (Win)ï¼šæ²»ç–—ç»„æ‚£è€…ç»“å±€æ›´å¥½\nè¾“ (Loss)ï¼šå¯¹ç…§ç»„æ‚£è€…ç»“å±€æ›´å¥½\nå¹³å±€ (Tie)ï¼šæ— æ³•åˆ¤æ–­\n\n\\[\\text{Win Ratio} = \\frac{\\text{æ²»ç–—ç»„èµ¢çš„æ¬¡æ•°}}{\\text{å¯¹ç…§ç»„èµ¢çš„æ¬¡æ•°}}\\]\n\n\nRICH å’Œ RITCH\n\nRICHï¼šç´¯ç§¯é£é™©å‡½æ•°ç§¯åˆ†çš„æ¯”å€¼ï¼ˆéå‚æ•°ï¼‰\nRITCHï¼šå˜æ¢åç´¯ç§¯é£é™©ç§¯åˆ†çš„æ¯”å€¼ï¼ˆæ›´ç¨³å¥ï¼‰\n\nè¿™äº›æ–¹æ³•åœ¨éæ¯”ä¾‹é£é™©æƒ…å†µä¸‹ä»ç„¶æœ‰æ•ˆã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "æ²»ç–—æ•ˆæœåˆ†æ"
    ]
  },
  {
    "objectID": "1055-tx-effects-survival.html#æ•°æ®æ ¼å¼",
    "href": "1055-tx-effects-survival.html#æ•°æ®æ ¼å¼",
    "title": "TxEffectsSurvival: ç«äº‰é£é™©ä¸‹çš„æ²»ç–—æ•ˆæœåˆ†æ",
    "section": "æ•°æ®æ ¼å¼",
    "text": "æ•°æ®æ ¼å¼\nTxEffectsSurvival éœ€è¦ä»¥ä¸‹æ ¼å¼çš„æ•°æ®ï¼š\n\n# æ¨¡æ‹Ÿç«äº‰é£é™©æ•°æ®\nset.seed(2024)\nn &lt;- 300\n\n# åˆ›å»ºæ¨¡æ‹Ÿæ•°æ®\nsim_data &lt;- tibble(\n    id = 1:n,\n    # æ²»ç–—ç»„ (1) æˆ–å¯¹ç…§ç»„ (0)\n    treatment = sample(c(0, 1), n, replace = TRUE),\n    # äº‹ä»¶æ—¶é—´\n    time = rexp(n, rate = 0.1) * (1 + 0.3 * treatment),\n    # äº‹ä»¶ç±»å‹: 0=åˆ å¤±, 1=ç»ˆæœ«äº‹ä»¶(æ­»äº¡), 2=éç»ˆæœ«äº‹ä»¶(ä½é™¢)\n    event_type = sample(c(0, 1, 2), n, replace = TRUE, prob = c(0.4, 0.3, 0.3))\n) |&gt;\n    mutate(\n        # é™åˆ¶éšè®¿æ—¶é—´\n        time = pmin(time, 24),\n        event_type = ifelse(time &gt;= 24, 0, event_type)\n    )\n\n# æŸ¥çœ‹æ•°æ®ç»“æ„\nhead(sim_data, 10)\n\n# A tibble: 10 Ã— 4\n      id treatment  time event_type\n   &lt;int&gt;     &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;\n 1     1         1 18.3           2\n 2     2         0  2.62          2\n 3     3         0 11.8           0\n 4     4         1 24             0\n 5     5         0  1.54          1\n 6     6         0  6.75          0\n 7     7         0 24             0\n 8     8         1 10.2           0\n 9     9         0  2.58          2\n10    10         1 14.4           2\n\n# äº‹ä»¶åˆ†å¸ƒ\ntable(sim_data$event_type, sim_data$treatment)\n\n   \n     0  1\n  0 66 66\n  1 51 34\n  2 40 43\n\n\n\nå˜é‡è¯´æ˜\n\n\n\nå˜é‡\nè¯´æ˜\n\n\n\n\nid\næ‚£è€…æ ‡è¯†\n\n\ntreatment\næ²»ç–—ç»„ (1) æˆ–å¯¹ç…§ç»„ (0)\n\n\ntime\näº‹ä»¶æ—¶é—´æˆ–åˆ å¤±æ—¶é—´\n\n\nevent_type\näº‹ä»¶ç±»å‹ï¼š0=åˆ å¤±, 1=ç»ˆæœ«äº‹ä»¶, 2=éç»ˆæœ«äº‹ä»¶",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "æ²»ç–—æ•ˆæœåˆ†æ"
    ]
  },
  {
    "objectID": "1055-tx-effects-survival.html#åŸºæœ¬åˆ†æ",
    "href": "1055-tx-effects-survival.html#åŸºæœ¬åˆ†æ",
    "title": "TxEffectsSurvival: ç«äº‰é£é™©ä¸‹çš„æ²»ç–—æ•ˆæœåˆ†æ",
    "section": "åŸºæœ¬åˆ†æ",
    "text": "åŸºæœ¬åˆ†æ\n\nWin Ratio åˆ†æ\n\n# ä½¿ç”¨ TxEffectsSurvival è¿›è¡Œ Win Ratio åˆ†æ\n# æ³¨æ„ï¼šéœ€è¦æŒ‰ç…§åŒ…çš„å…·ä½“æ¥å£è°ƒç”¨\n\n# é¦–å…ˆè¿›è¡Œä¼ ç»Ÿç”Ÿå­˜åˆ†æä½œä¸ºå‚è€ƒ\nlibrary(survival)\n\n# ç»ˆæœ«äº‹ä»¶çš„ Kaplan-Meier æ›²çº¿\nkm_terminal &lt;- survfit(\n    Surv(time, event_type == 1) ~ treatment,\n    data = sim_data\n)\n\n# ç»˜åˆ¶ç”Ÿå­˜æ›²çº¿\nplot(km_terminal,\n    col = c(\"#4f46e5\", \"#10b981\"), lwd = 2,\n    xlab = \"æ—¶é—´ (æœˆ)\", ylab = \"æ— ç»ˆæœ«äº‹ä»¶ç”Ÿå­˜æ¦‚ç‡\",\n    main = \"ç»ˆæœ«äº‹ä»¶ï¼šæ²»ç–—ç»„ vs å¯¹ç…§ç»„\"\n)\nlegend(\"topright\", c(\"å¯¹ç…§ç»„\", \"æ²»ç–—ç»„\"),\n    col = c(\"#4f46e5\", \"#10b981\"), lwd = 2\n)\n\n\n\n\n\n\n\n\n\n\nç«äº‰é£é™©ç´¯ç§¯å‘ç”Ÿç‡\n\n# ä½¿ç”¨ cmprsk æˆ–ç›¸å…³æ–¹æ³•è®¡ç®—ç´¯ç§¯å‘ç”Ÿç‡\nlibrary(survival)\n\n# åˆ›å»ºå¤šçŠ¶æ€ç”Ÿå­˜å¯¹è±¡\nms_surv &lt;- Surv(sim_data$time, factor(sim_data$event_type))\n\n# æŒ‰æ²»ç–—ç»„åˆ†å±‚çš„ç”Ÿå­˜æ›²çº¿\nkm_fit &lt;- survfit(ms_surv ~ treatment, data = sim_data)\n\n# æŸ¥çœ‹ç»“æœæ‘˜è¦\nsummary(km_fit)\n\nCall: survfit(formula = ms_surv ~ treatment, data = sim_data)\n\n                treatment=0 \n    time n.risk n.event Pr((s0))   Pr(1)   Pr(2)\n  0.0175    157       1    0.994 0.00637 0.00000\n  0.0211    156       1    0.987 0.00637 0.00637\n  0.1023    154       1    0.981 0.00637 0.01278\n  0.2096    153       1    0.974 0.01278 0.01278\n  0.2121    152       1    0.968 0.01278 0.01919\n  0.3461    150       1    0.962 0.01923 0.01919\n  0.4555    148       1    0.955 0.02573 0.01919\n  0.5035    147       1    0.949 0.02573 0.02569\n  0.5507    146       1    0.942 0.03223 0.02569\n  0.6870    145       1    0.936 0.03223 0.03219\n  0.7619    143       1    0.929 0.03877 0.03219\n  0.8519    142       1    0.923 0.04531 0.03219\n  0.9365    141       1    0.916 0.04531 0.03873\n  1.0691    140       1    0.909 0.04531 0.04527\n  1.2570    138       1    0.903 0.05190 0.04527\n  1.3604    136       1    0.896 0.05190 0.05191\n  1.5352    134       1    0.890 0.05859 0.05191\n  1.5670    133       1    0.883 0.06528 0.05191\n  1.7215    130       1    0.876 0.07207 0.05191\n  1.7826    129       1    0.869 0.07207 0.05870\n  1.8726    128       1    0.862 0.07207 0.06549\n  1.8949    126       1    0.856 0.07891 0.06549\n  1.9090    125       1    0.849 0.08576 0.06549\n  1.9135    124       1    0.842 0.08576 0.07234\n  2.0347    123       1    0.835 0.09260 0.07234\n  2.0752    122       1    0.828 0.09945 0.07234\n  2.3451    121       1    0.821 0.09945 0.07918\n  2.5147    119       1    0.814 0.10635 0.07918\n  2.5803    118       1    0.808 0.10635 0.08608\n  2.6174    115       1    0.801 0.10635 0.09310\n  2.6485    113       1    0.793 0.10635 0.10019\n  2.7319    111       1    0.786 0.10635 0.10734\n  3.0151    109       1    0.779 0.11357 0.10734\n  3.0320    108       1    0.772 0.12078 0.10734\n  3.0946    107       1    0.765 0.12078 0.11455\n  3.1765    105       1    0.757 0.12806 0.11455\n  3.2775    104       1    0.750 0.13534 0.11455\n  3.4426    102       1    0.743 0.14270 0.11455\n  3.4586    101       1    0.735 0.14270 0.12191\n  3.8220     97       1    0.728 0.15028 0.12191\n  3.8724     96       1    0.720 0.15786 0.12191\n  3.9865     95       1    0.713 0.16544 0.12191\n  4.2134     94       1    0.705 0.17302 0.12191\n  4.3832     93       1    0.697 0.18061 0.12191\n  4.4043     92       1    0.690 0.18819 0.12191\n  4.4517     91       1    0.682 0.19577 0.12191\n  4.4540     90       1    0.675 0.19577 0.12949\n  4.6207     89       1    0.667 0.19577 0.13707\n  4.8642     88       1    0.660 0.20335 0.13707\n  4.9169     87       1    0.652 0.21093 0.13707\n  4.9717     86       1    0.644 0.21851 0.13707\n  5.2304     84       1    0.637 0.21851 0.14474\n  5.2963     83       1    0.629 0.21851 0.15241\n  5.3684     80       1    0.621 0.22638 0.15241\n  5.4810     79       1    0.613 0.23424 0.15241\n  5.5173     77       1    0.605 0.23424 0.16038\n  5.5993     76       1    0.597 0.24220 0.16038\n  5.7808     74       1    0.589 0.25028 0.16038\n  5.8223     73       1    0.581 0.25028 0.16845\n  5.8508     72       1    0.573 0.25835 0.16845\n  5.9459     71       1    0.565 0.25835 0.17652\n  6.2026     69       1    0.557 0.25835 0.18471\n  6.2144     68       1    0.549 0.25835 0.19290\n  6.9049     64       1    0.540 0.26693 0.19290\n  6.9796     63       1    0.532 0.26693 0.20148\n  7.4768     59       1    0.523 0.27594 0.20148\n  7.7972     56       1    0.513 0.27594 0.21081\n  7.9762     55       1    0.504 0.28527 0.21081\n  8.0530     54       1    0.495 0.29460 0.21081\n  8.0637     53       1    0.485 0.29460 0.22014\n  8.3772     52       1    0.476 0.30393 0.22014\n  8.8462     50       1    0.466 0.30393 0.22966\n  8.8659     49       1    0.457 0.31345 0.22966\n  9.0286     48       1    0.447 0.32297 0.22966\n  9.7061     46       1    0.438 0.33269 0.22966\n 10.0322     44       1    0.428 0.34264 0.22966\n 10.5045     43       1    0.418 0.34264 0.23961\n 10.8279     41       1    0.408 0.34264 0.24980\n 11.0571     40       1    0.397 0.34264 0.25999\n 11.0830     38       1    0.387 0.35310 0.25999\n 12.8922     32       1    0.375 0.35310 0.27208\n 13.2323     30       1    0.362 0.35310 0.28457\n 13.8934     29       1    0.350 0.35310 0.29706\n 13.9879     26       1    0.336 0.36655 0.29706\n 15.2754     22       1    0.321 0.38184 0.29706\n 15.7918     21       1    0.306 0.38184 0.31235\n 18.2352     17       1    0.288 0.38184 0.33034\n 18.7762     16       1    0.270 0.39983 0.33034\n 18.7984     15       1    0.252 0.41782 0.33034\n 22.1936     12       1    0.231 0.43881 0.33034\n 22.4589     11       1    0.210 0.43881 0.35133\n\n                treatment=1 \n   time n.risk n.event Pr((s0))   Pr(1)   Pr(2)\n  0.231    142       1    0.993 0.00000 0.00704\n  0.381    140       1    0.986 0.00000 0.01413\n  0.395    139       1    0.979 0.00709 0.01413\n  0.407    138       1    0.972 0.00709 0.02123\n  0.509    136       1    0.965 0.01424 0.02123\n  0.809    134       1    0.957 0.01424 0.02843\n  0.867    132       1    0.950 0.01424 0.03568\n  0.894    131       1    0.943 0.02149 0.03568\n  0.913    130       1    0.936 0.02149 0.04293\n  0.913    129       1    0.928 0.02874 0.04293\n  0.987    127       1    0.921 0.02874 0.05024\n  1.412    123       1    0.914 0.02874 0.05773\n  1.582    121       1    0.906 0.03629 0.05773\n  1.585    120       1    0.898 0.04384 0.05773\n  1.594    119       1    0.891 0.04384 0.06528\n  2.062    117       1    0.883 0.04384 0.07289\n  2.137    116       1    0.876 0.05146 0.07289\n  2.188    115       1    0.868 0.05146 0.08051\n  2.418    114       1    0.860 0.05146 0.08812\n  2.732    111       1    0.853 0.05146 0.09587\n  2.925    109       1    0.845 0.05928 0.09587\n  3.560    104       1    0.837 0.06740 0.09587\n  3.908    101       1    0.828 0.06740 0.10416\n  3.927    100       1    0.820 0.06740 0.11244\n  4.438     96       1    0.812 0.06740 0.12098\n  4.557     95       1    0.803 0.07595 0.12098\n  5.236     91       1    0.794 0.07595 0.12981\n  5.391     88       1    0.785 0.08497 0.12981\n  5.718     86       1    0.776 0.09410 0.12981\n  5.942     85       1    0.767 0.09410 0.13894\n  5.959     84       1    0.758 0.09410 0.14807\n  6.152     83       1    0.749 0.10323 0.14807\n  6.594     82       1    0.740 0.10323 0.15720\n  6.672     80       1    0.730 0.11248 0.15720\n  6.750     79       1    0.721 0.12172 0.15720\n  6.894     78       1    0.712 0.13097 0.15720\n  7.324     76       1    0.702 0.13097 0.16657\n  7.644     75       1    0.693 0.14033 0.16657\n  7.852     74       1    0.684 0.14970 0.16657\n  7.885     73       1    0.674 0.14970 0.17593\n  8.114     72       1    0.665 0.15906 0.17593\n  8.137     71       1    0.656 0.16843 0.17593\n  8.171     70       1    0.646 0.16843 0.18530\n  8.226     69       1    0.637 0.17780 0.18530\n  8.326     68       1    0.628 0.18716 0.18530\n  8.392     67       1    0.618 0.19653 0.18530\n  9.084     64       1    0.609 0.20619 0.18530\n  9.171     63       1    0.599 0.20619 0.19496\n  9.186     62       1    0.589 0.21585 0.19496\n  9.289     61       1    0.580 0.22551 0.19496\n  9.708     59       1    0.570 0.22551 0.20478\n  9.717     58       1    0.560 0.22551 0.21460\n  9.807     57       1    0.550 0.23533 0.21460\n  9.922     55       1    0.540 0.23533 0.22461\n 10.906     53       1    0.530 0.23533 0.23479\n 11.083     52       1    0.520 0.24552 0.23479\n 11.305     51       1    0.509 0.25571 0.23479\n 11.893     48       1    0.499 0.26632 0.23479\n 12.103     46       1    0.488 0.26632 0.24564\n 12.740     45       1    0.477 0.27717 0.24564\n 14.086     42       1    0.466 0.27717 0.25700\n 14.360     40       1    0.454 0.27717 0.26865\n 14.452     39       1    0.443 0.27717 0.28029\n 14.482     38       1    0.431 0.27717 0.29194\n 14.611     37       1    0.419 0.27717 0.30358\n 15.058     35       1    0.407 0.27717 0.31556\n 15.742     32       1    0.395 0.27717 0.32829\n 15.765     31       1    0.382 0.27717 0.34102\n 16.859     30       1    0.369 0.27717 0.35374\n 16.985     29       1    0.356 0.27717 0.36647\n 17.489     27       1    0.343 0.27717 0.37967\n 17.913     25       1    0.329 0.29090 0.37967\n 18.269     21       1    0.314 0.30658 0.37967\n 18.300     20       1    0.298 0.30658 0.39536\n 19.855     18       1    0.282 0.30658 0.41192\n 20.409     17       1    0.265 0.32314 0.41192\n 23.270     13       1    0.245 0.32314 0.43230",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "æ²»ç–—æ•ˆæœåˆ†æ"
    ]
  },
  {
    "objectID": "1055-tx-effects-survival.html#txeffectssurvival-æ ¸å¿ƒå‡½æ•°",
    "href": "1055-tx-effects-survival.html#txeffectssurvival-æ ¸å¿ƒå‡½æ•°",
    "title": "TxEffectsSurvival: ç«äº‰é£é™©ä¸‹çš„æ²»ç–—æ•ˆæœåˆ†æ",
    "section": "TxEffectsSurvival æ ¸å¿ƒå‡½æ•°",
    "text": "TxEffectsSurvival æ ¸å¿ƒå‡½æ•°\n\nä¸»è¦åˆ†æå‡½æ•°\n\n# Win Ratio åˆ†æ\n# æ³¨æ„ï¼šä»¥ä¸‹ä¸ºç¤ºä¾‹ä»£ç ï¼Œå…·ä½“å‡½æ•°åç§°è¯·å‚è€ƒåŒ…æ–‡æ¡£\n\n# è®¡ç®—äº‹ä»¶ç‰¹å®šçš„ Win Ratio\nwr_result &lt;- win_ratio(\n    time = sim_data$time,\n    event = sim_data$event_type,\n    treatment = sim_data$treatment,\n    terminal_event = 1, # ç»ˆæœ«äº‹ä»¶ä»£ç \n    nonterminal_event = 2 # éç»ˆæœ«äº‹ä»¶ä»£ç \n)\n\n# æŸ¥çœ‹ç»“æœ\nprint(wr_result)\n\n\n\nRICH/RITCH åˆ†æ\n\n# RICH æ–¹æ³•\nrich_result &lt;- rich_test(\n    time = sim_data$time,\n    event = sim_data$event_type,\n    treatment = sim_data$treatment\n)\n\n# RITCH æ–¹æ³•\nritch_result &lt;- ritch_test(\n    time = sim_data$time,\n    event = sim_data$event_type,\n    treatment = sim_data$treatment\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "æ²»ç–—æ•ˆæœåˆ†æ"
    ]
  },
  {
    "objectID": "1055-tx-effects-survival.html#ç»Ÿè®¡æ£€éªŒ",
    "href": "1055-tx-effects-survival.html#ç»Ÿè®¡æ£€éªŒ",
    "title": "TxEffectsSurvival: ç«äº‰é£é™©ä¸‹çš„æ²»ç–—æ•ˆæœåˆ†æ",
    "section": "ç»Ÿè®¡æ£€éªŒ",
    "text": "ç»Ÿè®¡æ£€éªŒ\n\næ¯”ä¾‹é£é™©å‡è®¾æ£€éªŒ\n\n# æ£€éªŒæ¯”ä¾‹é£é™©å‡è®¾\n# åœ¨ PH å‡è®¾ä¸‹ï¼ŒWin Ratio æ”¶æ•›åˆ°é£é™©æ¯” (HR)\n\nph_test &lt;- test_proportional_hazards(\n    time = sim_data$time,\n    event = sim_data$event_type,\n    treatment = sim_data$treatment\n)\n\nprint(ph_test)\n\n\n\nå…¨å±€é›¶å‡è®¾æ£€éªŒ\n\n# æ£€éªŒæ— æ²»ç–—æ•ˆæœçš„å…¨å±€é›¶å‡è®¾\nglobal_test &lt;- global_null_test(\n    time = sim_data$time,\n    event = sim_data$event_type,\n    treatment = sim_data$treatment\n)\n\nprint(global_test)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "æ²»ç–—æ•ˆæœåˆ†æ"
    ]
  },
  {
    "objectID": "1055-tx-effects-survival.html#å®æˆ˜æ¡ˆä¾‹å¿ƒè¡°ä¸´åºŠè¯•éªŒ",
    "href": "1055-tx-effects-survival.html#å®æˆ˜æ¡ˆä¾‹å¿ƒè¡°ä¸´åºŠè¯•éªŒ",
    "title": "TxEffectsSurvival: ç«äº‰é£é™©ä¸‹çš„æ²»ç–—æ•ˆæœåˆ†æ",
    "section": "å®æˆ˜æ¡ˆä¾‹ï¼šå¿ƒè¡°ä¸´åºŠè¯•éªŒ",
    "text": "å®æˆ˜æ¡ˆä¾‹ï¼šå¿ƒè¡°ä¸´åºŠè¯•éªŒ\næ¨¡æ‹Ÿä¸€ä¸ªå…¸å‹çš„å¿ƒè¡€ç®¡ä¸´åºŠè¯•éªŒåœºæ™¯ï¼š\n\n# æ¨¡æ‹Ÿå¿ƒè¡°ä¸´åºŠè¯•éªŒæ•°æ®\nset.seed(42)\nn_patients &lt;- 500\n\nhf_trial &lt;- tibble(\n    patient_id = 1:n_patients,\n    # éšæœºåŒ–åˆ°æ²»ç–—ç»„æˆ–å®‰æ…°å‰‚ç»„\n    arm = sample(c(\"Treatment\", \"Placebo\"), n_patients, replace = TRUE),\n    treatment = as.numeric(arm == \"Treatment\"),\n    # åŸºçº¿ç‰¹å¾\n    age = round(rnorm(n_patients, 65, 10)),\n    ef = round(rnorm(n_patients, 30, 8)), # å°„è¡€åˆ†æ•°\n    nyha = sample(2:4, n_patients, replace = TRUE, prob = c(0.3, 0.5, 0.2))\n) |&gt;\n    mutate(\n        # ç”Ÿæˆäº‹ä»¶æ—¶é—´ï¼ˆæ²»ç–—ç»„æœ‰æ›´å¥½çš„é¢„åï¼‰\n        baseline_hazard = 0.1 * (1 + 0.02 * (age - 65) + 0.5 * (nyha == 4)),\n        hazard = baseline_hazard * ifelse(treatment == 1, 0.75, 1),\n        time_to_event = rexp(n_patients, rate = hazard),\n        # äº‹ä»¶ç±»å‹\n        event_prob = runif(n_patients),\n        event_type = case_when(\n            event_prob &lt; 0.25 ~ 1, # å¿ƒè¡€ç®¡æ­»äº¡\n            event_prob &lt; 0.50 ~ 2, # å¿ƒè¡°ä½é™¢\n            TRUE ~ 0 # åˆ å¤±\n        ),\n        # é™åˆ¶éšè®¿æ—¶é—´\n        follow_up = pmin(time_to_event, 36),\n        event_type = ifelse(time_to_event &gt; 36, 0, event_type)\n    ) |&gt;\n    select(patient_id, arm, treatment, age, ef, nyha, follow_up, event_type)\n\n# æŸ¥çœ‹æ•°æ®\nhead(hf_trial, 10)\n\n# A tibble: 10 Ã— 8\n   patient_id arm       treatment   age    ef  nyha follow_up event_type\n        &lt;int&gt; &lt;chr&gt;         &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;     &lt;dbl&gt;      &lt;dbl&gt;\n 1          1 Treatment         1    54    17     3     13.5           0\n 2          2 Treatment         1    65    14     4      2.75          0\n 3          3 Treatment         1    53    27     3     29.5           1\n 4          4 Treatment         1    67    31     3      4.95          0\n 5          5 Placebo           0    78    12     4      3.38          1\n 6          6 Placebo           0    55    32     2      6.84          0\n 7          7 Placebo           0    58    33     3     17.8           2\n 8          8 Placebo           0    65    40     2      5.22          2\n 9          9 Treatment         1    55    31     3     10.3           2\n10         10 Placebo           0    61    32     4      4.63          0\n\n\n\næè¿°æ€§åˆ†æ\n\n# åŸºçº¿ç‰¹å¾æ¯”è¾ƒ\nhf_trial |&gt;\n    group_by(arm) |&gt;\n    summarise(\n        n = n(),\n        age_mean = mean(age),\n        ef_mean = mean(ef),\n        `NYHA III-IV (%)` = mean(nyha &gt;= 3) * 100,\n        `CV Death (%)` = mean(event_type == 1) * 100,\n        `HF Hosp (%)` = mean(event_type == 2) * 100,\n        .groups = \"drop\"\n    )\n\n# A tibble: 2 Ã— 7\n  arm          n age_mean ef_mean `NYHA III-IV (%)` `CV Death (%)` `HF Hosp (%)`\n  &lt;chr&gt;    &lt;int&gt;    &lt;dbl&gt;   &lt;dbl&gt;             &lt;dbl&gt;          &lt;dbl&gt;         &lt;dbl&gt;\n1 Placebo    259     64.4    30.8              71.8           20.1          25.1\n2 Treatmeâ€¦   241     64.6    29.1              72.6           20.7          25.3\n\n\n\n\nç”Ÿå­˜æ›²çº¿\n\n# æŒ‰æ²»ç–—ç»„ç»˜åˆ¶ Kaplan-Meier æ›²çº¿\nlibrary(survminer)\n\n# å¤åˆç»ˆç‚¹ï¼ˆæ­»äº¡æˆ–ä½é™¢ï¼‰\nkm_composite &lt;- survfit(\n    Surv(follow_up, event_type &gt; 0) ~ arm,\n    data = hf_trial\n)\n\n# ä½¿ç”¨ ggsurvplot\nggsurvplot(\n    km_composite,\n    data = hf_trial,\n    palette = c(\"#4f46e5\", \"#10b981\"),\n    risk.table = TRUE,\n    pval = TRUE,\n    conf.int = TRUE,\n    xlab = \"éšè®¿æ—¶é—´ (æœˆ)\",\n    ylab = \"æ— äº‹ä»¶ç”Ÿå­˜æ¦‚ç‡\",\n    title = \"å¤åˆç»ˆç‚¹ï¼šå¿ƒè¡€ç®¡æ­»äº¡æˆ–å¿ƒè¡°ä½é™¢\",\n    legend.labs = c(\"å®‰æ…°å‰‚\", \"æ²»ç–—ç»„\"),\n    legend.title = \"æ²»ç–—ç»„\",\n    ggtheme = theme_minimal()\n)\n\n\n\n\n\n\n\n\n\n\nCox å›å½’åˆ†æ\n\n# Cox å›å½’\ncox_model &lt;- coxph(\n    Surv(follow_up, event_type &gt; 0) ~ treatment + age + ef + nyha,\n    data = hf_trial\n)\n\n# æ¨¡å‹æ‘˜è¦\nsummary(cox_model)\n\nCall:\ncoxph(formula = Surv(follow_up, event_type &gt; 0) ~ treatment + \n    age + ef + nyha, data = hf_trial)\n\n  n= 500, number of events= 228 \n\n               coef exp(coef)  se(coef)      z Pr(&gt;|z|)  \ntreatment -0.164161  0.848606  0.133508 -1.230   0.2188  \nage        0.008667  1.008705  0.006336  1.368   0.1714  \nef         0.001495  1.001496  0.008285  0.180   0.8568  \nnyha       0.269384  1.309158  0.105448  2.555   0.0106 *\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n          exp(coef) exp(-coef) lower .95 upper .95\ntreatment    0.8486     1.1784    0.6532     1.102\nage          1.0087     0.9914    0.9963     1.021\nef           1.0015     0.9985    0.9854     1.018\nnyha         1.3092     0.7638    1.0647     1.610\n\nConcordance= 0.562  (se = 0.021 )\nLikelihood ratio test= 9.61  on 4 df,   p=0.05\nWald test            = 9.61  on 4 df,   p=0.05\nScore (logrank) test = 9.64  on 4 df,   p=0.05\n\n\n\n\nç»“æœå¯è§†åŒ–\n\n# æ£®æ—å›¾\nlibrary(broom)\n\ncox_results &lt;- tidy(cox_model, conf.int = TRUE, exponentiate = TRUE) |&gt;\n    mutate(\n        term = case_when(\n            term == \"treatment\" ~ \"æ²»ç–— vs å®‰æ…°å‰‚\",\n            term == \"age\" ~ \"å¹´é¾„ (æ¯å¢åŠ 1å²)\",\n            term == \"ef\" ~ \"å°„è¡€åˆ†æ•° (æ¯å¢åŠ 1%)\",\n            term == \"nyha\" ~ \"NYHA åˆ†çº§ (æ¯å¢åŠ 1çº§)\"\n        )\n    )\n\nggplot(cox_results, aes(x = estimate, y = reorder(term, estimate))) +\n    geom_vline(xintercept = 1, linetype = \"dashed\", color = \"grey50\") +\n    geom_errorbarh(aes(xmin = conf.low, xmax = conf.high), height = 0.2, linewidth = 0.8) +\n    geom_point(size = 3, color = \"#4f46e5\") +\n    scale_x_log10() +\n    labs(\n        title = \"Cox å›å½’ï¼šé£é™©æ¯” (HR) åŠ 95% CI\",\n        x = \"é£é™©æ¯” (HR)\",\n        y = \"\"\n    ) +\n    theme_minimal(base_size = 12)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "æ²»ç–—æ•ˆæœåˆ†æ"
    ]
  },
  {
    "objectID": "1055-tx-effects-survival.html#ç»“æœè§£è¯»",
    "href": "1055-tx-effects-survival.html#ç»“æœè§£è¯»",
    "title": "TxEffectsSurvival: ç«äº‰é£é™©ä¸‹çš„æ²»ç–—æ•ˆæœåˆ†æ",
    "section": "ç»“æœè§£è¯»",
    "text": "ç»“æœè§£è¯»\n\nWin Ratio è§£è¯»\n\n\n\nWin Ratio\nè§£è¯»\n\n\n\n\nWR &gt; 1\næ²»ç–—ç»„ä¼˜äºå¯¹ç…§ç»„\n\n\nWR = 1\næ— å·®å¼‚\n\n\nWR &lt; 1\nå¯¹ç…§ç»„ä¼˜äºæ²»ç–—ç»„\n\n\n\n\n\nRICH/RITCH è§£è¯»\n\nRICH/RITCH &gt; 1ï¼šæ²»ç–—ç»„ç´¯ç§¯é£é™©æ›´é«˜\nRICH/RITCH &lt; 1ï¼šæ²»ç–—ç»„ç´¯ç§¯é£é™©æ›´ä½\næä¾›çš„æ˜¯äº‹ä»¶è´Ÿæ‹…çš„æ•´ä½“æ¯”è¾ƒ",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "æ²»ç–—æ•ˆæœåˆ†æ"
    ]
  },
  {
    "objectID": "1055-tx-effects-survival.html#æŠ¥å‘Šæ¨¡æ¿",
    "href": "1055-tx-effects-survival.html#æŠ¥å‘Šæ¨¡æ¿",
    "title": "TxEffectsSurvival: ç«äº‰é£é™©ä¸‹çš„æ²»ç–—æ•ˆæœåˆ†æ",
    "section": "æŠ¥å‘Šæ¨¡æ¿",
    "text": "æŠ¥å‘Šæ¨¡æ¿\n\n# ç”Ÿæˆåˆ†ææŠ¥å‘Šè¡¨æ ¼\nreport_table &lt;- tibble(\n    ç»ˆç‚¹ = c(\"å¿ƒè¡€ç®¡æ­»äº¡\", \"å¿ƒè¡°ä½é™¢\", \"å¤åˆç»ˆç‚¹\"),\n    `æ²»ç–—ç»„ n (%)` = c(\n        sprintf(\n            \"%d (%.1f%%)\", sum(hf_trial$event_type == 1 & hf_trial$treatment == 1),\n            mean(hf_trial$event_type == 1 & hf_trial$treatment == 1) * 100\n        ),\n        sprintf(\n            \"%d (%.1f%%)\", sum(hf_trial$event_type == 2 & hf_trial$treatment == 1),\n            mean(hf_trial$event_type == 2 & hf_trial$treatment == 1) * 100\n        ),\n        sprintf(\n            \"%d (%.1f%%)\", sum(hf_trial$event_type &gt; 0 & hf_trial$treatment == 1),\n            mean(hf_trial$event_type &gt; 0 & hf_trial$treatment == 1) * 100\n        )\n    ),\n    `å®‰æ…°å‰‚ç»„ n (%)` = c(\n        sprintf(\n            \"%d (%.1f%%)\", sum(hf_trial$event_type == 1 & hf_trial$treatment == 0),\n            mean(hf_trial$event_type == 1 & hf_trial$treatment == 0) * 100\n        ),\n        sprintf(\n            \"%d (%.1f%%)\", sum(hf_trial$event_type == 2 & hf_trial$treatment == 0),\n            mean(hf_trial$event_type == 2 & hf_trial$treatment == 0) * 100\n        ),\n        sprintf(\n            \"%d (%.1f%%)\", sum(hf_trial$event_type &gt; 0 & hf_trial$treatment == 0),\n            mean(hf_trial$event_type &gt; 0 & hf_trial$treatment == 0) * 100\n        )\n    )\n)\n\nknitr::kable(report_table, caption = \"ä¸»è¦ç»ˆç‚¹äº‹ä»¶å‘ç”Ÿç‡\")\n\n\nä¸»è¦ç»ˆç‚¹äº‹ä»¶å‘ç”Ÿç‡\n\n\nç»ˆç‚¹\næ²»ç–—ç»„ n (%)\nå®‰æ…°å‰‚ç»„ n (%)\n\n\n\n\nå¿ƒè¡€ç®¡æ­»äº¡\n50 (10.0%)\n52 (10.4%)\n\n\nå¿ƒè¡°ä½é™¢\n61 (12.2%)\n65 (13.0%)\n\n\nå¤åˆç»ˆç‚¹\n111 (22.2%)\n117 (23.4%)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "æ²»ç–—æ•ˆæœåˆ†æ"
    ]
  },
  {
    "objectID": "1055-tx-effects-survival.html#æ€»ç»“",
    "href": "1055-tx-effects-survival.html#æ€»ç»“",
    "title": "TxEffectsSurvival: ç«äº‰é£é™©ä¸‹çš„æ²»ç–—æ•ˆæœåˆ†æ",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\næ–¹æ³•\nç‰¹ç‚¹\né€‚ç”¨æƒ…å†µ\n\n\n\n\nWin Ratio\nç›´è§‚æ˜“è§£é‡Š\nå¤åˆç»ˆç‚¹ã€æœ‰ä¼˜å…ˆçº§\n\n\nRICH\néå‚æ•°ã€ç¨³å¥\néæ¯”ä¾‹é£é™©\n\n\nRITCH\nå˜æ¢åæ›´ç¨³å¥\næç«¯å€¼å½±å“å¤§æ—¶\n\n\nCox å›å½’\nå¯è°ƒæ•´åå˜é‡\næ¯”ä¾‹é£é™©æˆç«‹æ—¶\n\n\n\n\næ¨èèµ„æº\n\nCRAN åŒ…ä¸»é¡µ\nYang et al.Â (2022) Statistics in Medicine - åŠå‚æ•°æ–¹æ³•\nYang (2025) Statistics in Medicine - éå‚æ•°æ–¹æ³•\nWin Ratio æ–¹æ³•ç»¼è¿°",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "æ²»ç–—æ•ˆæœåˆ†æ"
    ]
  },
  {
    "objectID": "1057-target-trial.html",
    "href": "1057-target-trial.html",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ (Target Trial Emulation)",
    "section": "",
    "text": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿï¼ˆTarget Trial Emulation, TTEï¼‰ æ˜¯ä¸€ç§åˆ©ç”¨è§‚å¯Ÿæ€§æ•°æ®æ¥æ¨¡æ‹Ÿå‡æƒ³çš„éšæœºå¯¹ç…§è¯•éªŒï¼ˆRCTï¼‰çš„æ–¹æ³•æ¡†æ¶ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š\n\nåœ¨åˆ†æè§‚å¯Ÿæ€§æ•°æ®ä¹‹å‰ï¼Œé¦–å…ˆæ˜ç¡®æè¿°ä¸€ä¸ªç†æƒ³çš„RCTï¼ˆç›®æ ‡è¯•éªŒï¼‰ï¼Œç„¶åä½¿ç”¨è§‚å¯Ÿæ•°æ®å°½å¯èƒ½åœ°æ¨¡æ‹Ÿè¿™ä¸ªè¯•éªŒã€‚\n\n\n\n\n\n\nä¼ ç»Ÿè§‚å¯Ÿæ€§ç ”ç©¶\nç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ\n\n\n\n\nå®¹æ˜“äº§ç”Ÿæ—¶é—´ç›¸å…³åå€š\næ˜ç¡®å®šä¹‰æ—¶é—´é›¶ç‚¹\n\n\né€‰æ‹©åå€šéš¾ä»¥è¯†åˆ«\næ¸…æ™°çš„å…¥ç»„æ ‡å‡†\n\n\nå› æœè§£é‡Šæ¨¡ç³Š\næ˜ç¡®çš„å› æœé—®é¢˜\n\n\næŠ¥å‘Šä¸è§„èŒƒ\néµå¾ªTARGETæŒ‡å—\n\n\n\n\n2025å¹´JAMAå‘å¸ƒäº†TARGETæŠ¥å‘ŠæŒ‡å—ï¼ŒåŒ…å«21æ¡æŠ¥å‘Šæ¸…å•ï¼Œæ¨åŠ¨äº†ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿçš„æ ‡å‡†åŒ–ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ"
    ]
  },
  {
    "objectID": "1057-target-trial.html#ä»€ä¹ˆæ˜¯ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ",
    "href": "1057-target-trial.html#ä»€ä¹ˆæ˜¯ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ (Target Trial Emulation)",
    "section": "",
    "text": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿï¼ˆTarget Trial Emulation, TTEï¼‰ æ˜¯ä¸€ç§åˆ©ç”¨è§‚å¯Ÿæ€§æ•°æ®æ¥æ¨¡æ‹Ÿå‡æƒ³çš„éšæœºå¯¹ç…§è¯•éªŒï¼ˆRCTï¼‰çš„æ–¹æ³•æ¡†æ¶ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š\n\nåœ¨åˆ†æè§‚å¯Ÿæ€§æ•°æ®ä¹‹å‰ï¼Œé¦–å…ˆæ˜ç¡®æè¿°ä¸€ä¸ªç†æƒ³çš„RCTï¼ˆç›®æ ‡è¯•éªŒï¼‰ï¼Œç„¶åä½¿ç”¨è§‚å¯Ÿæ•°æ®å°½å¯èƒ½åœ°æ¨¡æ‹Ÿè¿™ä¸ªè¯•éªŒã€‚\n\n\n\n\n\n\nä¼ ç»Ÿè§‚å¯Ÿæ€§ç ”ç©¶\nç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ\n\n\n\n\nå®¹æ˜“äº§ç”Ÿæ—¶é—´ç›¸å…³åå€š\næ˜ç¡®å®šä¹‰æ—¶é—´é›¶ç‚¹\n\n\né€‰æ‹©åå€šéš¾ä»¥è¯†åˆ«\næ¸…æ™°çš„å…¥ç»„æ ‡å‡†\n\n\nå› æœè§£é‡Šæ¨¡ç³Š\næ˜ç¡®çš„å› æœé—®é¢˜\n\n\næŠ¥å‘Šä¸è§„èŒƒ\néµå¾ªTARGETæŒ‡å—\n\n\n\n\n2025å¹´JAMAå‘å¸ƒäº†TARGETæŠ¥å‘ŠæŒ‡å—ï¼ŒåŒ…å«21æ¡æŠ¥å‘Šæ¸…å•ï¼Œæ¨åŠ¨äº†ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿçš„æ ‡å‡†åŒ–ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ"
    ]
  },
  {
    "objectID": "1057-target-trial.html#å®‰è£…ä¸åŠ è½½",
    "href": "1057-target-trial.html#å®‰è£…ä¸åŠ è½½",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ (Target Trial Emulation)",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\n# åŠ è½½å¿…è¦çš„åŒ…\nlibrary(tidyverse)\nlibrary(survival)\nlibrary(survminer)\nlibrary(broom)\nlibrary(tableone)\nlibrary(WeightIt)\nlibrary(cobalt)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ"
    ]
  },
  {
    "objectID": "1057-target-trial.html#ç›®æ ‡è¯•éªŒåè®®çš„7ä¸ªç»„æˆéƒ¨åˆ†",
    "href": "1057-target-trial.html#ç›®æ ‡è¯•éªŒåè®®çš„7ä¸ªç»„æˆéƒ¨åˆ†",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ (Target Trial Emulation)",
    "section": "ç›®æ ‡è¯•éªŒåè®®çš„7ä¸ªç»„æˆéƒ¨åˆ†",
    "text": "ç›®æ ‡è¯•éªŒåè®®çš„7ä¸ªç»„æˆéƒ¨åˆ†\nä¸€ä¸ªå®Œæ•´çš„ç›®æ ‡è¯•éªŒåè®®åŒ…å«ä»¥ä¸‹7ä¸ªéƒ¨åˆ†ï¼š\n\n\n\nç›®æ ‡è¯•éªŒåè®®ç»„æˆ\n\n\n\n\n\n\n\nç»„æˆéƒ¨åˆ†\nè¯´æ˜\næ¨¡æ‹Ÿç­–ç•¥\n\n\n\n\n1. å…¥ç»„æ ‡å‡† (Eligibility)\nè°å¯ä»¥å…¥ç»„è¯•éªŒï¼Ÿ\nä½¿ç”¨è§‚å¯Ÿæ•°æ®ä¸­ç¬¦åˆæ¡ä»¶çš„æ‚£è€…\n\n\n2. æ²»ç–—ç­–ç•¥ (Treatment)\næ¯”è¾ƒå“ªäº›æ²»ç–—æ–¹æ¡ˆï¼Ÿ\nåŸºäºå®é™…æ²»ç–—è®°å½•å®šä¹‰\n\n\n3. åˆ†é…ç­–ç•¥ (Assignment)\nå¦‚ä½•åˆ†é…åˆ°æ²»ç–—ç»„ï¼Ÿ\nä½¿ç”¨ç»Ÿè®¡æ–¹æ³•è°ƒæ•´æ··æ‚\n\n\n4. éšè®¿èµ·ç‚¹ (Time zero)\nä½•æ—¶å¼€å§‹éšè®¿ï¼ˆåŸºçº¿ï¼‰ï¼Ÿ\næ²»ç–—å¼€å§‹æ—¶ä½œä¸ºæ—¶é—´é›¶ç‚¹\n\n\n5. ç»“å±€ (Outcome)\nä¸»è¦å’Œæ¬¡è¦ç»“å±€æ˜¯ä»€ä¹ˆï¼Ÿ\nä»ç”µå­å¥åº·è®°å½•æå–\n\n\n6. å› æœå¯¹æ¯” (Causal contrast)\nITTè¿˜æ˜¯Per-protocolæ•ˆåº”ï¼Ÿ\nè°ƒæ•´ä¾ä»æ€§åç¦»\n\n\n7. åˆ†æè®¡åˆ’ (Analysis)\nç»Ÿè®¡åˆ†ææ–¹æ³•\nIPWã€å…‹éš†-å®¡æŸ¥-åŠ æƒç­‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ"
    ]
  },
  {
    "objectID": "1057-target-trial.html#æ¡ˆä¾‹ç ”ç©¶ä»–æ±€ç±»è¯ç‰©ä¸å¿ƒè¡€ç®¡äº‹ä»¶",
    "href": "1057-target-trial.html#æ¡ˆä¾‹ç ”ç©¶ä»–æ±€ç±»è¯ç‰©ä¸å¿ƒè¡€ç®¡äº‹ä»¶",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ (Target Trial Emulation)",
    "section": "æ¡ˆä¾‹ç ”ç©¶ï¼šä»–æ±€ç±»è¯ç‰©ä¸å¿ƒè¡€ç®¡äº‹ä»¶",
    "text": "æ¡ˆä¾‹ç ”ç©¶ï¼šä»–æ±€ç±»è¯ç‰©ä¸å¿ƒè¡€ç®¡äº‹ä»¶\n\nç ”ç©¶é—®é¢˜\nåœ¨æœ‰é«˜è¡€å‹çš„æˆå¹´äººä¸­ï¼Œå¯åŠ¨ä»–æ±€æ²»ç–—ä¸ä¸ä½¿ç”¨ä»–æ±€ç›¸æ¯”ï¼Œæ˜¯å¦é™ä½5å¹´å†…å¿ƒè¡€ç®¡äº‹ä»¶é£é™©ï¼Ÿ\n\n\næ­¥éª¤1ï¼šå®šä¹‰ç›®æ ‡è¯•éªŒåè®®\n\n\n\nä»–æ±€ç ”ç©¶çš„ç›®æ ‡è¯•éªŒåè®®\n\n\n\n\n\n\n\nç»„æˆéƒ¨åˆ†\nç›®æ ‡è¯•éªŒ\næ¨¡æ‹Ÿæ–¹æ¡ˆ\n\n\n\n\nå…¥ç»„æ ‡å‡†\n40-75å²ï¼›æœ‰é«˜è¡€å‹ï¼›æ— CVDå²ï¼›æœªä½¿ç”¨ä»–æ±€\né€‰æ‹©ç¬¦åˆæ¡ä»¶çš„ç”µå­å¥åº·è®°å½•\n\n\næ²»ç–—ç­–ç•¥\nç­–ç•¥Aï¼šå¯åŠ¨ä»–æ±€å¹¶æŒç»­ä½¿ç”¨\n\n\n\nç­–ç•¥Bï¼šä¸ä½¿ç”¨ä»–æ±€\nåŸºäºå¤„æ–¹è®°å½•å®šä¹‰\n\n\n\nåˆ†é…ç­–ç•¥\néšæœºåˆ†é…\nIPWè°ƒæ•´æ··æ‚\n\n\néšè®¿èµ·ç‚¹\néšæœºåŒ–å½“å¤©\né¦–æ¬¡æ»¡è¶³å…¥ç»„æ ‡å‡†çš„æ—¥æœŸ\n\n\nç»“å±€\né¦–æ¬¡CVDäº‹ä»¶æˆ–å¿ƒè¡€ç®¡æ­»äº¡\nè¯Šæ–­ä»£ç è¯†åˆ«CVDäº‹ä»¶\n\n\nå› æœå¯¹æ¯”\nITTæ•ˆåº”\nä½¿ç”¨IPWä¼°è®¡ITTæ•ˆåº”\n\n\nåˆ†æè®¡åˆ’\nKaplan-Meier + Coxå›å½’\nåŠ æƒCoxå›å½’",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ"
    ]
  },
  {
    "objectID": "1057-target-trial.html#æ¨¡æ‹Ÿæ•°æ®å‡†å¤‡",
    "href": "1057-target-trial.html#æ¨¡æ‹Ÿæ•°æ®å‡†å¤‡",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ (Target Trial Emulation)",
    "section": "æ¨¡æ‹Ÿæ•°æ®å‡†å¤‡",
    "text": "æ¨¡æ‹Ÿæ•°æ®å‡†å¤‡\n\n# æ¨¡æ‹Ÿè§‚å¯Ÿæ€§é˜Ÿåˆ—æ•°æ®\nset.seed(2024)\nn &lt;- 2000\n\n# åŸºçº¿åå˜é‡\ndata_obs &lt;- tibble(\n    id = 1:n,\n    age = round(rnorm(n, 55, 10)),\n    male = rbinom(n, 1, 0.45),\n    diabetes = rbinom(n, 1, 0.25),\n    smoking = rbinom(n, 1, 0.30),\n    sbp = round(rnorm(n, 145, 15)),\n    ldl = round(rnorm(n, 140, 30)),\n    bmi = round(rnorm(n, 27, 5), 1)\n) %&gt;%\n    # é™åˆ¶å¹´é¾„èŒƒå›´\n    filter(age &gt;= 40, age &lt;= 75)\n\n# æ²»ç–—åˆ†é…ï¼ˆåŸºäºåå˜é‡çš„é€‰æ‹©åå€šï¼‰\ndata_obs &lt;- data_obs %&gt;%\n    mutate(\n        # æ²»ç–—å€¾å‘ï¼ˆé«˜é£é™©æ›´å¯èƒ½ä½¿ç”¨ä»–æ±€ï¼‰\n        ps_logit = -3 + 0.05 * age + 0.3 * diabetes + 0.2 * smoking +\n            0.02 * ldl + 0.5 * male,\n        ps = plogis(ps_logit),\n        statin = rbinom(n(), 1, ps)\n    )\n\n# ç”Ÿæˆç»“å±€\ndata_obs &lt;- data_obs %&gt;%\n    mutate(\n        # äº‹ä»¶é£é™©\n        risk_logit = -5 + 0.05 * age + 0.8 * diabetes + 0.6 * smoking +\n            0.02 * sbp + 0.01 * ldl - 0.4 * statin,\n        event_prob = plogis(risk_logit),\n        event = rbinom(n(), 1, event_prob),\n        # éšè®¿æ—¶é—´\n        time = ifelse(event == 1,\n            rexp(n(), rate = 0.3) * 12, # äº‹ä»¶æ—¶é—´\n            runif(n(), 36, 60)\n        ), # åˆ å¤±æ—¶é—´\n        time = pmin(time, 60) # æœ€é•¿5å¹´\n    ) %&gt;%\n    select(-ps_logit, -risk_logit, -event_prob, -ps)\n\nhead(data_obs)\n\n# A tibble: 6 Ã— 11\n     id   age  male diabetes smoking   sbp   ldl   bmi statin event   time\n  &lt;int&gt; &lt;dbl&gt; &lt;int&gt;    &lt;int&gt;   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;\n1     1    65     1        0       1   155   137  23.8      1     0 43.2  \n2     2    60     0        0       1   146   116  30.9      1     1  0.911\n3     3    54     0        0       0   126   170  32        1     1 16.5  \n4     4    53     0        0       0   150   163  26.7      1     1 37.9  \n5     5    67     0        0       0   150   122  27.3      1     1 37.2  \n6     6    68     0        0       1   152   120  17.8      1     1 24.4",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ"
    ]
  },
  {
    "objectID": "1057-target-trial.html#æ­¥éª¤2æ£€æŸ¥å…¥ç»„æ ‡å‡†",
    "href": "1057-target-trial.html#æ­¥éª¤2æ£€æŸ¥å…¥ç»„æ ‡å‡†",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ (Target Trial Emulation)",
    "section": "æ­¥éª¤2ï¼šæ£€æŸ¥å…¥ç»„æ ‡å‡†",
    "text": "æ­¥éª¤2ï¼šæ£€æŸ¥å…¥ç»„æ ‡å‡†\n\n# åŸºçº¿ç‰¹å¾è¡¨\nbaseline_vars &lt;- c(\"age\", \"male\", \"diabetes\", \"smoking\", \"sbp\", \"ldl\", \"bmi\")\n\ntable1 &lt;- CreateTableOne(\n    vars = baseline_vars,\n    strata = \"statin\",\n    data = data_obs,\n    test = TRUE\n)\n\nprint(table1, smd = TRUE)\n\n                      Stratified by statin\n                       0              1              p      test SMD   \n  n                       126           1713                           \n  age (mean (SD))       52.29 (7.00)   56.04 (8.08)  &lt;0.001       0.496\n  male (mean (SD))       0.34 (0.48)    0.46 (0.50)   0.013       0.234\n  diabetes (mean (SD))   0.22 (0.42)    0.24 (0.43)   0.643       0.043\n  smoking (mean (SD))    0.31 (0.46)    0.30 (0.46)   0.780       0.026\n  sbp (mean (SD))      146.66 (16.15) 144.62 (14.76)  0.137       0.132\n  ldl (mean (SD))      125.55 (30.05) 140.48 (30.34) &lt;0.001       0.495\n  bmi (mean (SD))       27.08 (5.24)   26.98 (5.03)   0.822       0.020\n\n\nè§‚å¯Ÿï¼šæ²»ç–—ç»„å’Œå¯¹ç…§ç»„å­˜åœ¨åŸºçº¿å·®å¼‚ï¼ˆSMD &gt; 0.1ï¼‰ï¼Œè¯´æ˜å­˜åœ¨é€‰æ‹©åå€šï¼Œéœ€è¦è°ƒæ•´ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ"
    ]
  },
  {
    "objectID": "1057-target-trial.html#æ­¥éª¤3å€¾å‘è¯„åˆ†åŠ æƒ",
    "href": "1057-target-trial.html#æ­¥éª¤3å€¾å‘è¯„åˆ†åŠ æƒ",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ (Target Trial Emulation)",
    "section": "æ­¥éª¤3ï¼šå€¾å‘è¯„åˆ†åŠ æƒ",
    "text": "æ­¥éª¤3ï¼šå€¾å‘è¯„åˆ†åŠ æƒ\n\nä¼°è®¡å€¾å‘è¯„åˆ†\n\n# æ‹Ÿåˆå€¾å‘è¯„åˆ†æ¨¡å‹\nps_model &lt;- glm(\n    statin ~ age + male + diabetes + smoking + sbp + ldl + bmi,\n    data = data_obs,\n    family = binomial\n)\n\n# è®¡ç®—å€¾å‘è¯„åˆ†å’Œæƒé‡\ndata_obs &lt;- data_obs %&gt;%\n    mutate(\n        ps = predict(ps_model, type = \"response\"),\n        # ATEæƒé‡\n        ipw = ifelse(statin == 1, 1 / ps, 1 / (1 - ps)),\n        # æˆªæ–­æç«¯æƒé‡\n        ipw_truncated = pmin(pmax(ipw, quantile(ipw, 0.01)), quantile(ipw, 0.99))\n    )\n\n\n\næ£€éªŒåå˜é‡å¹³è¡¡\n\n# ä½¿ç”¨WeightItæ£€éªŒå¹³è¡¡\nbal_tab &lt;- bal.tab(\n    statin ~ age + male + diabetes + smoking + sbp + ldl + bmi,\n    data = data_obs,\n    weights = data_obs$ipw_truncated,\n    method = \"weighting\"\n)\nprint(bal_tab)\n\nBalance Measures\n            Type Diff.Adj\nage      Contin.   0.1881\nmale      Binary   0.0230\ndiabetes  Binary   0.0132\nsmoking   Binary  -0.0089\nsbp      Contin.  -0.0893\nldl      Contin.   0.1068\nbmi      Contin.  -0.0589\n\nEffective sample sizes\n           Control Treated\nUnadjusted  126.   1713.  \nAdjusted    101.25 1707.42\n\n\n\n# å¯è§†åŒ–å¹³è¡¡\nlove.plot(\n    statin ~ age + male + diabetes + smoking + sbp + ldl + bmi,\n    data = data_obs,\n    weights = data_obs$ipw_truncated,\n    threshold = 0.1\n) +\n    labs(title = \"åŠ æƒå‰ååå˜é‡å¹³è¡¡ï¼ˆLoveå›¾ï¼‰\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ"
    ]
  },
  {
    "objectID": "1057-target-trial.html#æ­¥éª¤4åŠ æƒç”Ÿå­˜åˆ†æ",
    "href": "1057-target-trial.html#æ­¥éª¤4åŠ æƒç”Ÿå­˜åˆ†æ",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ (Target Trial Emulation)",
    "section": "æ­¥éª¤4ï¼šåŠ æƒç”Ÿå­˜åˆ†æ",
    "text": "æ­¥éª¤4ï¼šåŠ æƒç”Ÿå­˜åˆ†æ\n\nKaplan-Meieræ›²çº¿\n\n# åˆ›å»ºç”Ÿå­˜å¯¹è±¡\ndata_obs$surv_obj &lt;- Surv(data_obs$time, data_obs$event)\n\n# åŠ æƒKMæ›²çº¿ï¼ˆä½¿ç”¨surveyåŒ…æ›´å‡†ç¡®ï¼Œè¿™é‡Œç®€åŒ–æ¼”ç¤ºï¼‰\nkm_fit &lt;- survfit(\n    surv_obj ~ statin,\n    data = data_obs,\n    weights = ipw_truncated\n)\n\n# ç»˜åˆ¶ç”Ÿå­˜æ›²çº¿\nggsurvplot(\n    km_fit,\n    data = data_obs,\n    palette = c(\"#4f46e5\", \"#10b981\"),\n    risk.table = TRUE,\n    xlab = \"éšè®¿æ—¶é—´ï¼ˆæœˆï¼‰\",\n    ylab = \"æ— äº‹ä»¶ç”Ÿå­˜æ¦‚ç‡\",\n    legend.labs = c(\"æœªä½¿ç”¨ä»–æ±€\", \"ä½¿ç”¨ä»–æ±€\"),\n    legend.title = \"æ²»ç–—ç»„\",\n    title = \"åŠ æƒKaplan-Meierç”Ÿå­˜æ›²çº¿\",\n    ggtheme = theme_minimal()\n)\n\n\n\n\n\n\n\n\n\n\nåŠ æƒCoxå›å½’\n\n# åŠ æƒCoxå›å½’\ncox_weighted &lt;- coxph(\n    surv_obj ~ statin,\n    data = data_obs,\n    weights = ipw_truncated,\n    robust = TRUE # ç¨³å¥æ ‡å‡†è¯¯\n)\n\n# ç»“æœæ‘˜è¦\ntidy(cox_weighted, conf.int = TRUE, exponentiate = TRUE)\n\n# A tibble: 1 Ã— 8\n  term   estimate std.error robust.se statistic p.value conf.low conf.high\n  &lt;chr&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n1 statin    0.871    0.0366    0.0950     -1.45   0.147    0.723      1.05\n\n\n\n\nç»“æœè§£è¯»\n\nhr &lt;- exp(coef(cox_weighted))\nci &lt;- exp(confint(cox_weighted))\n\ncat(sprintf(\n    \"ä½¿ç”¨ä»–æ±€ä¸ä¸ä½¿ç”¨ç›¸æ¯”ï¼Œå¿ƒè¡€ç®¡äº‹ä»¶çš„é£é™©æ¯”ä¸º %.2f (95%% CI: %.2f-%.2f)\\n\",\n    hr, ci[1], ci[2]\n))\n\nä½¿ç”¨ä»–æ±€ä¸ä¸ä½¿ç”¨ç›¸æ¯”ï¼Œå¿ƒè¡€ç®¡äº‹ä»¶çš„é£é™©æ¯”ä¸º 0.87 (95% CI: 0.72-1.05)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ"
    ]
  },
  {
    "objectID": "1057-target-trial.html#å¤„ç†æ—¶é—´ç›¸å…³åå€š",
    "href": "1057-target-trial.html#å¤„ç†æ—¶é—´ç›¸å…³åå€š",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ (Target Trial Emulation)",
    "section": "å¤„ç†æ—¶é—´ç›¸å…³åå€š",
    "text": "å¤„ç†æ—¶é—´ç›¸å…³åå€š\n\nä¸æœ½æ—¶é—´åå€š\nä¸æœ½æ—¶é—´åå€šï¼ˆImmortal Time Biasï¼‰ æ˜¯ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿä¸­æœ€å¸¸è§çš„åå€šï¼š\n\n\n\n\n\n\n\n\n\n\n\nä½¿ç”¨å…‹éš†-å®¡æŸ¥-åŠ æƒæ³•\n\n# å…‹éš†-å®¡æŸ¥-åŠ æƒæ³•ä¼ªä»£ç \n\n# 1. å…‹éš†ï¼šæ¯ä¸ªç¬¦åˆæ¡ä»¶çš„æ‚£è€…å¤åˆ¶ä¸¤ä»½\ncloned_data &lt;- bind_rows(\n    data_obs %&gt;% mutate(assigned = 0), # åˆ†é…åˆ°æœªæ²»ç–—ç»„\n    data_obs %&gt;% mutate(assigned = 1) # åˆ†é…åˆ°æ²»ç–—ç»„\n)\n\n# 2. å®¡æŸ¥ï¼šå½“å®é™…æ²»ç–—ä¸åˆ†é…ä¸ç¬¦æ—¶å®¡æŸ¥\ncloned_data &lt;- cloned_data %&gt;%\n    mutate(\n        # å¦‚æœåˆ†é…åˆ°æ²»ç–—ç»„ä½†å®é™…æœªæ²»ç–—ï¼Œåœ¨æ²»ç–—æ—¶é—´å®¡æŸ¥\n        # å¦‚æœåˆ†é…åˆ°æœªæ²»ç–—ç»„ä½†å®é™…æ¥å—æ²»ç–—ï¼Œåœ¨æ²»ç–—æ—¶é—´å®¡æŸ¥\n        artificial_censoring = case_when(\n            assigned == 1 & statin == 0 ~ TRUE,\n            assigned == 0 & statin == 1 ~ TRUE,\n            TRUE ~ FALSE\n        )\n    )\n\n# 3. åŠ æƒï¼šä½¿ç”¨IPCWæ ¡æ­£äººä¸ºå®¡æŸ¥",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ"
    ]
  },
  {
    "objectID": "1057-target-trial.html#targetæŠ¥å‘Šæ¸…å•",
    "href": "1057-target-trial.html#targetæŠ¥å‘Šæ¸…å•",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ (Target Trial Emulation)",
    "section": "TARGETæŠ¥å‘Šæ¸…å•",
    "text": "TARGETæŠ¥å‘Šæ¸…å•\n2025å¹´JAMAå‘å¸ƒçš„TARGETæŒ‡å—åŒ…å«21æ¡æŠ¥å‘Šé¡¹ç›®ï¼š\n\n\n\nTARGETæŠ¥å‘Šæ¸…å•ï¼ˆç®€åŒ–ç‰ˆï¼‰\n\n\nç±»åˆ«\næ¡ç›®\n\n\n\n\næ ‡é¢˜ä¸æ‘˜è¦\n1. æ ‡é¢˜è¡¨æ˜ä½¿ç”¨ç›®æ ‡è¯•éªŒæ¡†æ¶\n\n\næ ‡é¢˜ä¸æ‘˜è¦\n2. æ‘˜è¦æè¿°ç›®æ ‡è¯•éªŒå’Œæ¨¡æ‹Ÿæ–¹æ³•\n\n\nå¼•è¨€\n3. è¯´æ˜ç ”ç©¶é—®é¢˜å’Œç†ç”±\n\n\nå¼•è¨€\n4. è¯´æ˜ä¸ºä½•ä½¿ç”¨è§‚å¯Ÿæ•°æ®\n\n\næ–¹æ³•\n5. æè¿°ç›®æ ‡è¯•éªŒåè®®\n\n\næ–¹æ³•\n6. æè¿°æ•°æ®æ¥æº\n\n\næ–¹æ³•\n7. æè¿°å…¥ç»„æ ‡å‡†çš„æ“ä½œåŒ–å®šä¹‰\n\n\næ–¹æ³•\n8. æè¿°æ²»ç–—ç­–ç•¥çš„å®šä¹‰\n\n\næ–¹æ³•\n9. æè¿°æ—¶é—´é›¶ç‚¹çš„ç¡®å®š\n\n\næ–¹æ³•\n10. æè¿°ç»“å±€çš„æµ‹é‡\n\n\næ–¹æ³•\n11. æè¿°éšè®¿æ–¹å¼\n\n\næ–¹æ³•\n12. æè¿°å› æœå¯¹æ¯”\n\n\næ–¹æ³•\n13. æè¿°ç»Ÿè®¡åˆ†ææ–¹æ³•\n\n\næ–¹æ³•\n14. æè¿°æ•æ„Ÿæ€§åˆ†æ\n\n\nç»“æœ\n15. æŠ¥å‘Šç¬¦åˆå…¥ç»„æ ‡å‡†çš„äººæ•°\n\n\nç»“æœ\n16. æŠ¥å‘ŠåŸºçº¿ç‰¹å¾\n\n\nç»“æœ\n17. æŠ¥å‘Šä¸»è¦åˆ†æç»“æœ\n\n\nç»“æœ\n18. æŠ¥å‘Šæ•æ„Ÿæ€§åˆ†æç»“æœ\n\n\nè®¨è®º\n19. è®¨è®ºç›®æ ‡è¯•éªŒä¸æ¨¡æ‹Ÿçš„å·®å¼‚\n\n\nè®¨è®º\n20. è®¨è®ºç»“æœçš„å› æœè§£é‡Š\n\n\nè®¨è®º\n21. è®¨è®ºå±€é™æ€§å’Œæœªæ¥æ–¹å‘",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ"
    ]
  },
  {
    "objectID": "1057-target-trial.html#å®Œæ•´åˆ†ææµç¨‹",
    "href": "1057-target-trial.html#å®Œæ•´åˆ†ææµç¨‹",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ (Target Trial Emulation)",
    "section": "å®Œæ•´åˆ†ææµç¨‹",
    "text": "å®Œæ•´åˆ†ææµç¨‹\n\nç¬¬1æ­¥ï¼šå®šä¹‰å¹¶è®°å½•ç›®æ ‡è¯•éªŒ\n\n# è®°å½•ç›®æ ‡è¯•éªŒåè®®\nprotocol_doc &lt;- \"\n## ç›®æ ‡è¯•éªŒåè®®\n\n### å…¥ç»„æ ‡å‡†\n- å¹´é¾„40-75å²\n- è¯Šæ–­é«˜è¡€å‹\n- æ— å¿ƒè¡€ç®¡ç–¾ç—…å²\n- è¿‡å»12ä¸ªæœˆæœªä½¿ç”¨ä»–æ±€\n\n### æ²»ç–—ç­–ç•¥\n- ç­–ç•¥Aï¼šå¯åŠ¨ä»–æ±€æ²»ç–—\n- ç­–ç•¥Bï¼šä¸å¯åŠ¨ä»–æ±€æ²»ç–—\n\n### åˆ†é…ç­–ç•¥\n- éšæœºåˆ†é…ï¼ˆ1:1ï¼‰\n\n### éšè®¿èµ·ç‚¹\n- éšæœºåŒ–æ—¥æœŸ\n\n### ç»“å±€\n- ä¸»è¦ç»“å±€ï¼šé¦–æ¬¡ä¸»è¦ä¸è‰¯å¿ƒè¡€ç®¡äº‹ä»¶ï¼ˆMACEï¼‰\n- éšè®¿æ—¶é—´ï¼š5å¹´\n\n### å› æœå¯¹æ¯”\n- æ„å‘æ€§æ²»ç–—ï¼ˆITTï¼‰æ•ˆåº”\n\n### åˆ†æè®¡åˆ’\n- IPWè°ƒæ•´æ··æ‚\n- Coxæ¯”ä¾‹é£é™©å›å½’\n- æ•æ„Ÿæ€§åˆ†æï¼šEå€¼ã€ä¸åŒæƒé‡æˆªæ–­ç‚¹\n\"\ncat(protocol_doc)\n\n\n## ç›®æ ‡è¯•éªŒåè®®\n\n### å…¥ç»„æ ‡å‡†\n- å¹´é¾„40-75å²\n- è¯Šæ–­é«˜è¡€å‹\n- æ— å¿ƒè¡€ç®¡ç–¾ç—…å²\n- è¿‡å»12ä¸ªæœˆæœªä½¿ç”¨ä»–æ±€\n\n### æ²»ç–—ç­–ç•¥\n- ç­–ç•¥Aï¼šå¯åŠ¨ä»–æ±€æ²»ç–—\n- ç­–ç•¥Bï¼šä¸å¯åŠ¨ä»–æ±€æ²»ç–—\n\n### åˆ†é…ç­–ç•¥\n- éšæœºåˆ†é…ï¼ˆ1:1ï¼‰\n\n### éšè®¿èµ·ç‚¹\n- éšæœºåŒ–æ—¥æœŸ\n\n### ç»“å±€\n- ä¸»è¦ç»“å±€ï¼šé¦–æ¬¡ä¸»è¦ä¸è‰¯å¿ƒè¡€ç®¡äº‹ä»¶ï¼ˆMACEï¼‰\n- éšè®¿æ—¶é—´ï¼š5å¹´\n\n### å› æœå¯¹æ¯”\n- æ„å‘æ€§æ²»ç–—ï¼ˆITTï¼‰æ•ˆåº”\n\n### åˆ†æè®¡åˆ’\n- IPWè°ƒæ•´æ··æ‚\n- Coxæ¯”ä¾‹é£é™©å›å½’\n- æ•æ„Ÿæ€§åˆ†æï¼šEå€¼ã€ä¸åŒæƒé‡æˆªæ–­ç‚¹\n\n\n\n\nç¬¬2æ­¥ï¼šé€‰æ‹©ç¬¦åˆæ¡ä»¶çš„è§‚å¯Ÿæ•°æ®\n\n\nç¬¬3æ­¥ï¼šå€¾å‘è¯„åˆ†åŠ æƒ\n\n\nç¬¬4æ­¥ï¼šåŠ æƒCoxå›å½’\n\n\nç¬¬5æ­¥ï¼šæ•æ„Ÿæ€§åˆ†æ\n\n# Eå€¼æ•æ„Ÿæ€§åˆ†æ\nlibrary(EValue)\nhr_result &lt;- exp(coef(cox_weighted))\nevalue(est = HR(hr_result, rare = TRUE))\n\n             point lower upper\nRR       0.8714156    NA    NA\nE-values 1.5590572    NA    NA",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ"
    ]
  },
  {
    "objectID": "1057-target-trial.html#æ€»ç»“",
    "href": "1057-target-trial.html#æ€»ç»“",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ (Target Trial Emulation)",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\næ­¥éª¤\nå…³é”®ç‚¹\n\n\n\n\n1. å®šä¹‰ç›®æ ‡è¯•éªŒ\næ˜ç¡®7ä¸ªåè®®ç»„æˆéƒ¨åˆ†\n\n\n2. è¯†åˆ«æ•°æ®æº\nè¯„ä¼°æ•°æ®èƒ½å¦æ¨¡æ‹Ÿç›®æ ‡è¯•éªŒ\n\n\n3. æ“ä½œåŒ–å®šä¹‰\nå°†åè®®è½¬åŒ–ä¸ºå¯æµ‹é‡çš„å˜é‡\n\n\n4. å¤„ç†åå€š\nä½¿ç”¨IPWã€å…‹éš†-å®¡æŸ¥-åŠ æƒç­‰æ–¹æ³•\n\n\n5. åˆ†æä¸æŠ¥å‘Š\néµå¾ªTARGETæŒ‡å—\n\n\n\n\næ¨èèµ„æº\n\nHernÃ¡n MA, Robins JM. Using Big Data to Emulate a Target Trial\nTARGET Reporting Guideline (2025)\nCAUSALab Harvard\nHernÃ¡n & Robinsã€ŠCausal Inference: What Ifã€‹",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ"
    ]
  },
  {
    "objectID": "1059-evalue.html",
    "href": "1059-evalue.html",
    "title": "Eå€¼ä¸æœªæµ‹é‡æ··æ‚æ•æ„Ÿæ€§åˆ†æ",
    "section": "",
    "text": "åœ¨è§‚å¯Ÿæ€§ç ”ç©¶ä¸­ï¼Œå³ä½¿è°ƒæ•´äº†æ‰€æœ‰å·²çŸ¥çš„æ··æ‚å› ç´ ï¼Œæˆ‘ä»¬ä»ç„¶æ— æ³•æ’é™¤æœªæµ‹é‡æ··æ‚ï¼ˆunmeasured confoundingï¼‰çš„å½±å“ã€‚å®¡ç¨¿äººç»å¸¸ä¼šé—®ï¼š\n\nâ€œä½ çš„ç»“æœä¼šä¸ä¼šæ˜¯å› ä¸ºæœªæµ‹é‡çš„æ··æ‚å› ç´ å¯¼è‡´çš„ï¼Ÿâ€\n\nEå€¼ï¼ˆE-valueï¼‰ æ­£æ˜¯å›ç­”è¿™ä¸ªé—®é¢˜çš„é‡åŒ–å·¥å…·ã€‚\n\n\nEå€¼æ˜¯æŒ‡ï¼šä¸ºäº†å®Œå…¨è§£é‡Šè§‚å¯Ÿåˆ°çš„å…³è”ï¼Œæœªæµ‹é‡æ··æ‚å› ç´ éœ€è¦ä¸æš´éœ²å’Œç»“å±€ä¹‹é—´å…·æœ‰çš„æœ€å°å…³è”å¼ºåº¦ï¼ˆä»¥ç›¸å¯¹å±é™©åº¦è¡¨ç¤ºï¼‰ã€‚\n\\[E\\text{-value} = RR + \\sqrt{RR \\times (RR - 1)}\\]\nå…¶ä¸­ RR æ˜¯è§‚å¯Ÿåˆ°çš„ç›¸å¯¹å±é™©åº¦ï¼ˆæˆ–è½¬æ¢åçš„å€¼ï¼‰ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "Eå€¼æ•æ„Ÿæ€§åˆ†æ"
    ]
  },
  {
    "objectID": "1059-evalue.html#ä¸ºä»€ä¹ˆéœ€è¦æ•æ„Ÿæ€§åˆ†æ",
    "href": "1059-evalue.html#ä¸ºä»€ä¹ˆéœ€è¦æ•æ„Ÿæ€§åˆ†æ",
    "title": "Eå€¼ä¸æœªæµ‹é‡æ··æ‚æ•æ„Ÿæ€§åˆ†æ",
    "section": "",
    "text": "åœ¨è§‚å¯Ÿæ€§ç ”ç©¶ä¸­ï¼Œå³ä½¿è°ƒæ•´äº†æ‰€æœ‰å·²çŸ¥çš„æ··æ‚å› ç´ ï¼Œæˆ‘ä»¬ä»ç„¶æ— æ³•æ’é™¤æœªæµ‹é‡æ··æ‚ï¼ˆunmeasured confoundingï¼‰çš„å½±å“ã€‚å®¡ç¨¿äººç»å¸¸ä¼šé—®ï¼š\n\nâ€œä½ çš„ç»“æœä¼šä¸ä¼šæ˜¯å› ä¸ºæœªæµ‹é‡çš„æ··æ‚å› ç´ å¯¼è‡´çš„ï¼Ÿâ€\n\nEå€¼ï¼ˆE-valueï¼‰ æ­£æ˜¯å›ç­”è¿™ä¸ªé—®é¢˜çš„é‡åŒ–å·¥å…·ã€‚\n\n\nEå€¼æ˜¯æŒ‡ï¼šä¸ºäº†å®Œå…¨è§£é‡Šè§‚å¯Ÿåˆ°çš„å…³è”ï¼Œæœªæµ‹é‡æ··æ‚å› ç´ éœ€è¦ä¸æš´éœ²å’Œç»“å±€ä¹‹é—´å…·æœ‰çš„æœ€å°å…³è”å¼ºåº¦ï¼ˆä»¥ç›¸å¯¹å±é™©åº¦è¡¨ç¤ºï¼‰ã€‚\n\\[E\\text{-value} = RR + \\sqrt{RR \\times (RR - 1)}\\]\nå…¶ä¸­ RR æ˜¯è§‚å¯Ÿåˆ°çš„ç›¸å¯¹å±é™©åº¦ï¼ˆæˆ–è½¬æ¢åçš„å€¼ï¼‰ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "Eå€¼æ•æ„Ÿæ€§åˆ†æ"
    ]
  },
  {
    "objectID": "1059-evalue.html#å®‰è£…ä¸åŠ è½½",
    "href": "1059-evalue.html#å®‰è£…ä¸åŠ è½½",
    "title": "Eå€¼ä¸æœªæµ‹é‡æ··æ‚æ•æ„Ÿæ€§åˆ†æ",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\n# å®‰è£… EValue åŒ…\n# install.packages(\"EValue\")\n\nlibrary(EValue)\nlibrary(tidyverse)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "Eå€¼æ•æ„Ÿæ€§åˆ†æ"
    ]
  },
  {
    "objectID": "1059-evalue.html#åŸºç¡€eå€¼è®¡ç®—",
    "href": "1059-evalue.html#åŸºç¡€eå€¼è®¡ç®—",
    "title": "Eå€¼ä¸æœªæµ‹é‡æ··æ‚æ•æ„Ÿæ€§åˆ†æ",
    "section": "åŸºç¡€Eå€¼è®¡ç®—",
    "text": "åŸºç¡€Eå€¼è®¡ç®—\n\nç›¸å¯¹å±é™©åº¦çš„Eå€¼\n\n# å‡è®¾è§‚å¯Ÿåˆ°çš„ç›¸å¯¹å±é™©åº¦ RR = 2.5ï¼Œ95% CI = (1.8, 3.5)\nevalue(est = RR(2.5), lo = 1.8, hi = 3.5)\n\n            point lower upper\nRR       2.500000   1.8   3.5\nE-values 4.436492   3.0    NA\n\n\nè§£è¯»ï¼š - E-value for point estimateï¼šæœªæµ‹é‡æ··æ‚éœ€è¦è¾¾åˆ°çš„æœ€å°RR - E-value for confidence limitï¼šå¦‚æœEå€¼ &gt; 2ï¼Œè¯´æ˜éœ€è¦ç›¸å½“å¼ºçš„æœªæµ‹é‡æ··æ‚æ‰èƒ½å®Œå…¨è§£é‡Šå…³è”\n\n\næ¯”å€¼æ¯”çš„Eå€¼\n\n# Logisticå›å½’å¾—åˆ°çš„ OR = 1.8, 95% CI = (1.2, 2.7)\n# ç¨€æœ‰ç»“å±€å‡è®¾ä¸‹ä½¿ç”¨ORï¼ˆrare=TRUEï¼‰\nevalue(est = OR(1.8, rare = TRUE), lo = 1.2, hi = 2.7)\n\n         point    lower upper\nRR         1.8 1.200000   2.7\nE-values   3.0 1.689898    NA\n\n\n\n\né£é™©å·®çš„Eå€¼\n\n# å‡è®¾é£é™©å·® RD = 0.15\n# æ³¨æ„ï¼šRDçš„Eå€¼è®¡ç®—éœ€è¦å…ˆè½¬æ¢ä¸ºRR\n# è¿™é‡Œç®€åŒ–ä¸ºä½¿ç”¨RRå‡½æ•°\n# å¦‚æœçŸ¥é“åŸºçº¿é£é™©p0=0.2ï¼Œå¯ä»¥è®¡ç®— RR = (p0+RD)/p0 = (0.2+0.15)/0.2 = 1.75\nevalue(est = RR(1.75), lo = 1.2, hi = 2.5)\n\n            point    lower upper\nRR       1.750000 1.200000   2.5\nE-values 2.895644 1.689898    NA",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "Eå€¼æ•æ„Ÿæ€§åˆ†æ"
    ]
  },
  {
    "objectID": "1059-evalue.html#å¸¸è§æŒ‡æ ‡è½¬æ¢",
    "href": "1059-evalue.html#å¸¸è§æŒ‡æ ‡è½¬æ¢",
    "title": "Eå€¼ä¸æœªæµ‹é‡æ··æ‚æ•æ„Ÿæ€§åˆ†æ",
    "section": "å¸¸è§æŒ‡æ ‡è½¬æ¢",
    "text": "å¸¸è§æŒ‡æ ‡è½¬æ¢\nä¸åŒçš„æ•ˆåº”æŒ‡æ ‡éœ€è¦ä¸åŒçš„è½¬æ¢æ–¹å¼ï¼š\n\n\n\n\n\næ•ˆåº”æŒ‡æ ‡\nå‡½æ•°\nè¯´æ˜\n\n\n\n\nç›¸å¯¹å±é™©åº¦ (RR)\nRR()\nç›´æ¥ä½¿ç”¨\n\n\næ¯”å€¼æ¯” (OR)\nOR()\nç¨€æœ‰ç»“å±€å¯è¿‘ä¼¼RRï¼Œå¸¸è§ç»“å±€éœ€è½¬æ¢\n\n\né£é™©æ¯” (HR)\nHR()\nè¿‘ä¼¼å¤„ç†ä¸ºRR\n\n\né£é™©å·® (RD)\nRD()\néœ€è¦åŸºçº¿é£é™©\n\n\næ ‡å‡†åŒ–å‡å€¼å·® (SMD)\nOLS()\nè¿ç»­ç»“å±€çš„çº¿æ€§å›å½’ç³»æ•°\n\n\n\n\n\n\né£é™©æ¯”ï¼ˆCoxå›å½’ï¼‰\n\n# Coxå›å½’å¾—åˆ°çš„ HR = 1.65, 95% CI = (1.25, 2.18)\n# ç¨€æœ‰ç»“å±€ä½¿ç”¨ rare=TRUE\nevalue(est = HR(1.65, rare = TRUE), lo = 1.25, hi = 2.18)\n\n            point    lower upper\nRR       1.650000 1.250000  2.18\nE-values 2.685616 1.809017    NA\n\n\n\n\nçº¿æ€§å›å½’ç³»æ•°\n\n# çº¿æ€§å›å½’ï¼šÎ² = 0.5 SDï¼Œ95% CI = (0.2, 0.8)\n# æš´éœ²ä¸ºäºŒåˆ†ç±»ï¼Œç»“å±€ä¸ºè¿ç»­å˜é‡\n# OLSéœ€è¦æ•ˆåº”å€¼å’Œæ ‡å‡†å·®\nevalue(est = OLS(0.5, sd = 1), lo = 0.2, hi = 0.8)\n\n            point lower upper\nRR       1.576173    NA    NA\nE-values 2.529142    NA    NA",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "Eå€¼æ•æ„Ÿæ€§åˆ†æ"
    ]
  },
  {
    "objectID": "1059-evalue.html#å¯è§†åŒ–eå€¼",
    "href": "1059-evalue.html#å¯è§†åŒ–eå€¼",
    "title": "Eå€¼ä¸æœªæµ‹é‡æ··æ‚æ•æ„Ÿæ€§åˆ†æ",
    "section": "å¯è§†åŒ–Eå€¼",
    "text": "å¯è§†åŒ–Eå€¼\n\nåå€šæ›²çº¿å›¾\n\n# åˆ›å»ºåå€šæ›²çº¿ï¼ˆéœ€è¦RRå€¼å’Œxè½´æœ€å¤§å€¼ï¼‰\nbias_plot(2.5, xmax = 5)\n\n\n\n\n\n\n\n\nå›¾å½¢è§£è¯»ï¼š - æ›²çº¿ä¸Šçš„ä»»æ„ç‚¹ä»£è¡¨ä¸€ç»„æ··æ‚å‚æ•°ï¼ˆRR_EU å’Œ RR_UDï¼‰ - åªæœ‰æ›²çº¿ä¸Šæ–¹çš„æ··æ‚å¼ºåº¦æ‰èƒ½å®Œå…¨è§£é‡Šè§‚å¯Ÿåˆ°çš„å…³è” - Eå€¼æ˜¯æ›²çº¿ä¸å¯¹è§’çº¿çš„äº¤ç‚¹\n\n\nè‡ªå®šä¹‰å¯è§†åŒ–\n\n# æå–Eå€¼ç”¨äºè‡ªå®šä¹‰å¯è§†åŒ–\ne_result &lt;- evalue(est = RR(2.5), lo = 1.8, hi = 3.5)\n\n# evalueè¿”å›çŸ©é˜µï¼Œç¬¬äºŒè¡Œæ˜¯Eå€¼\n# åˆ›å»ºæ•°æ®æ¡†\ne_df &lt;- tibble(\n    æŒ‡æ ‡ = c(\"ç‚¹ä¼°è®¡\", \"ç½®ä¿¡ä¸‹é™\"),\n    Eå€¼ = c(e_result[2, 1], e_result[2, 2]) # E-valuesè¡Œçš„ç‚¹ä¼°è®¡å’Œç½®ä¿¡ä¸‹é™\n)\n\nggplot(e_df, aes(x = æŒ‡æ ‡, y = Eå€¼, fill = æŒ‡æ ‡)) +\n    geom_col(width = 0.6, alpha = 0.8) +\n    geom_hline(yintercept = 2, linetype = \"dashed\", color = \"#ef4444\") +\n    annotate(\"text\", x = 2.3, y = 2.1, label = \"å¼ºå…³è”é˜ˆå€¼\", size = 3) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\")) +\n    labs(\n        title = \"Eå€¼åˆ†æç»“æœ\",\n        subtitle = \"è§‚å¯Ÿåˆ°çš„ RR = 2.5 (1.8, 3.5)\",\n        y = \"Eå€¼\",\n        x = \"\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(legend.position = \"none\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "Eå€¼æ•æ„Ÿæ€§åˆ†æ"
    ]
  },
  {
    "objectID": "1059-evalue.html#è§£è¯»eå€¼çš„å®è·µæŒ‡å—",
    "href": "1059-evalue.html#è§£è¯»eå€¼çš„å®è·µæŒ‡å—",
    "title": "Eå€¼ä¸æœªæµ‹é‡æ··æ‚æ•æ„Ÿæ€§åˆ†æ",
    "section": "è§£è¯»Eå€¼çš„å®è·µæŒ‡å—",
    "text": "è§£è¯»Eå€¼çš„å®è·µæŒ‡å—\n\nEå€¼å¤§å°çš„å‚è€ƒæ ‡å‡†\n\n\n\nEå€¼èŒƒå›´\nè§£è¯»\n\n\n\n\nE &lt; 1.5\nè¾ƒå¼±çš„å…³è”ï¼Œæ˜“å—æœªæµ‹é‡æ··æ‚å½±å“\n\n\n1.5 â‰¤ E &lt; 2.0\nä¸­ç­‰å…³è”ï¼Œéœ€è¦è°¨æ…è§£è¯»\n\n\n2.0 â‰¤ E &lt; 3.0\nè¾ƒå¼ºå…³è”ï¼Œéœ€è¦ç›¸å½“å¼ºçš„æ··æ‚æ‰èƒ½è§£é‡Š\n\n\nE â‰¥ 3.0\nå¼ºå…³è”ï¼Œæœªæµ‹é‡æ··æ‚è§£é‡Šå¯èƒ½æ€§è¾ƒå°\n\n\n\n\n\nä¸å·²çŸ¥æ··æ‚å› ç´ æ¯”è¾ƒ\næ›´æœ‰æ„ä¹‰çš„è§£è¯»æ˜¯å°†Eå€¼ä¸å·²çŸ¥æ··æ‚å› ç´ çš„æ•ˆåº”å¼ºåº¦æ¯”è¾ƒï¼š\n\n# å‡è®¾ç ”ç©¶ä¸­å·²è°ƒæ•´çš„æœ€å¼ºæ··æ‚å› ç´ \n# å¸çƒŸä¸ç–¾ç—…çš„å…³è” RR = 2.0\n# å¸çƒŸä¸æš´éœ²çš„å…³è” RR = 1.5\n\n# å¸çƒŸä½œä¸ºæ··æ‚çš„è”åˆå¼ºåº¦\njoint_rr &lt;- sqrt(2.0 * 1.5)\ncat(\"å·²çŸ¥æœ€å¼ºæ··æ‚å› ç´ çš„è”åˆRR:\", round(joint_rr, 2), \"\\n\")\n\nå·²çŸ¥æœ€å¼ºæ··æ‚å› ç´ çš„è”åˆRR: 1.73 \n\n# å¦‚æœEå€¼ &gt; joint_rrï¼Œè¯´æ˜æœªæµ‹é‡æ··æ‚éœ€è¦æ¯”å·²çŸ¥æœ€å¼ºæ··æ‚æ›´å¼º\ne_result &lt;- evalue(est = RR(2.5))\ne_val &lt;- e_result[2, 1] # E-valueè¡Œçš„ç‚¹ä¼°è®¡\ncat(\"è§‚å¯Ÿå…³è”çš„Eå€¼:\", round(e_val, 2), \"\\n\")\n\nè§‚å¯Ÿå…³è”çš„Eå€¼: 4.44 \n\nif (e_val &gt; joint_rr) {\n    cat(\"ç»“è®º: æœªæµ‹é‡æ··æ‚éœ€è¦æ¯”å·²çŸ¥æœ€å¼ºæ··æ‚æ›´å¼ºæ‰èƒ½è§£é‡Šè§‚å¯Ÿåˆ°çš„å…³è”\\n\")\n}\n\nç»“è®º: æœªæµ‹é‡æ··æ‚éœ€è¦æ¯”å·²çŸ¥æœ€å¼ºæ··æ‚æ›´å¼ºæ‰èƒ½è§£é‡Šè§‚å¯Ÿåˆ°çš„å…³è”",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "Eå€¼æ•æ„Ÿæ€§åˆ†æ"
    ]
  },
  {
    "objectID": "1059-evalue.html#å®æˆ˜æ¡ˆä¾‹é˜Ÿåˆ—ç ”ç©¶",
    "href": "1059-evalue.html#å®æˆ˜æ¡ˆä¾‹é˜Ÿåˆ—ç ”ç©¶",
    "title": "Eå€¼ä¸æœªæµ‹é‡æ··æ‚æ•æ„Ÿæ€§åˆ†æ",
    "section": "å®æˆ˜æ¡ˆä¾‹ï¼šé˜Ÿåˆ—ç ”ç©¶",
    "text": "å®æˆ˜æ¡ˆä¾‹ï¼šé˜Ÿåˆ—ç ”ç©¶\næ¨¡æ‹Ÿä¸€ä¸ªè¯„ä¼°æŸæš´éœ²ä¸ç–¾ç—…å…³è”çš„é˜Ÿåˆ—ç ”ç©¶ï¼š\n\n# æ¨¡æ‹ŸCoxå›å½’ç»“æœ\nset.seed(2024)\n\n# ä¸»åˆ†æç»“æœ\nmain_hr &lt;- 1.85\nmain_ci_lo &lt;- 1.42\nmain_ci_hi &lt;- 2.41\n\n# è®¡ç®—Eå€¼\ne_main &lt;- evalue(est = HR(main_hr, rare = TRUE), lo = main_ci_lo, hi = main_ci_hi)\n\n# åˆ›å»ºç»“æœè¡¨\nresult_table &lt;- tibble(\n    åˆ†æ = \"ä¸»åˆ†æ\",\n    `HR (95% CI)` = sprintf(\"%.2f (%.2f, %.2f)\", main_hr, main_ci_lo, main_ci_hi),\n    `Eå€¼ (ç‚¹ä¼°è®¡)` = round(e_main[2, 1], 2), # E-valuesè¡Œçš„ç‚¹ä¼°è®¡\n    `Eå€¼ (CIä¸‹é™)` = round(e_main[2, 2], 2) # E-valuesè¡Œçš„ç½®ä¿¡ä¸‹é™\n)\n\nknitr::kable(result_table, caption = \"æ•æ„Ÿæ€§åˆ†æç»“æœ\")\n\n\næ•æ„Ÿæ€§åˆ†æç»“æœ\n\n\nåˆ†æ\nHR (95% CI)\nEå€¼ (ç‚¹ä¼°è®¡)\nEå€¼ (CIä¸‹é™)\n\n\n\n\nä¸»åˆ†æ\n1.85 (1.42, 2.41)\n3.1\n2.19\n\n\n\n\n\n\nå­ç»„åˆ†æçš„Eå€¼\n\n# å¤šä¸ªå­ç»„åˆ†æ\nsubgroups &lt;- tibble(\n    å­ç»„ = c(\"ç”·æ€§\", \"å¥³æ€§\", \"å¹´é¾„&lt;60\", \"å¹´é¾„â‰¥60\"),\n    HR = c(2.10, 1.65, 1.90, 1.78),\n    CI_lo = c(1.45, 1.18, 1.35, 1.28),\n    CI_hi = c(3.04, 2.31, 2.67, 2.48)\n)\n\n# ä½¿ç”¨å¾ªç¯è®¡ç®—Eå€¼ï¼ˆæ›´ç›´è§‚ï¼‰\ne_point &lt;- numeric(nrow(subgroups))\ne_lower &lt;- numeric(nrow(subgroups))\n\nfor (i in 1:nrow(subgroups)) {\n    e_res &lt;- evalue(\n        est = HR(subgroups$HR[i], rare = TRUE),\n        lo = subgroups$CI_lo[i],\n        hi = subgroups$CI_hi[i]\n    )\n    e_point[i] &lt;- e_res[2, 1] # E-valueç‚¹ä¼°è®¡\n    e_lower[i] &lt;- e_res[2, 2] # E-valueç½®ä¿¡ä¸‹é™\n}\n\nsubgroups$Eå€¼_ç‚¹ä¼°è®¡ &lt;- round(e_point, 2)\nsubgroups$Eå€¼_CIä¸‹é™ &lt;- round(e_lower, 2)\n\nknitr::kable(subgroups, digits = 2, caption = \"å­ç»„åˆ†æEå€¼\")\n\n\nå­ç»„åˆ†æEå€¼\n\n\nå­ç»„\nHR\nCI_lo\nCI_hi\nEå€¼_ç‚¹ä¼°è®¡\nEå€¼_CIä¸‹é™\n\n\n\n\nç”·æ€§\n2.10\n1.45\n3.04\n3.62\n2.26\n\n\nå¥³æ€§\n1.65\n1.18\n2.31\n2.69\n1.64\n\n\nå¹´é¾„&lt;60\n1.90\n1.35\n2.67\n3.21\n2.04\n\n\nå¹´é¾„â‰¥60\n1.78\n1.28\n2.48\n2.96\n1.88",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "Eå€¼æ•æ„Ÿæ€§åˆ†æ"
    ]
  },
  {
    "objectID": "1059-evalue.html#æ¦‚ç‡æ•æ„Ÿæ€§åˆ†æ",
    "href": "1059-evalue.html#æ¦‚ç‡æ•æ„Ÿæ€§åˆ†æ",
    "title": "Eå€¼ä¸æœªæµ‹é‡æ··æ‚æ•æ„Ÿæ€§åˆ†æ",
    "section": "æ¦‚ç‡æ•æ„Ÿæ€§åˆ†æ",
    "text": "æ¦‚ç‡æ•æ„Ÿæ€§åˆ†æ\né™¤äº†Eå€¼ï¼Œè¿˜å¯ä»¥è¿›è¡Œæ¦‚ç‡æ•æ„Ÿæ€§åˆ†æï¼ˆProbabilistic Sensitivity Analysisï¼‰ï¼š\n\n# å‡è®¾æœªæµ‹é‡æ··æ‚çš„åˆ†å¸ƒ\n# æ··æ‚ä¸æš´éœ²çš„å…³è”ï¼šRR_EU ~ Uniform(1.2, 2.0)\n# æ··æ‚ä¸ç»“å±€çš„å…³è”ï¼šRR_UD ~ Uniform(1.5, 2.5)\n\nset.seed(42)\nn_sims &lt;- 1000\n\n# æ¨¡æ‹Ÿåå€šå› å­\nsim_rr_eu &lt;- runif(n_sims, 1.2, 2.0)\nsim_rr_ud &lt;- runif(n_sims, 1.5, 2.5)\n\n# åå€šå› å­å…¬å¼\nbias_factor &lt;- (sim_rr_eu * sim_rr_ud) / (sim_rr_eu + sim_rr_ud - 1)\n\n# è§‚å¯Ÿåˆ°çš„RR\nobserved_rr &lt;- 2.5\n\n# æ ¡æ­£åçš„RR\ncorrected_rr &lt;- observed_rr / bias_factor\n\n# ç»“æœåˆ†å¸ƒ\ncat(\"æ ¡æ­£åRRçš„åˆ†å¸ƒ:\\n\")\n\næ ¡æ­£åRRçš„åˆ†å¸ƒ:\n\ncat(\"  ä¸­ä½æ•°:\", round(median(corrected_rr), 2), \"\\n\")\n\n  ä¸­ä½æ•°: 2.07 \n\ncat(\"  2.5%åˆ†ä½æ•°:\", round(quantile(corrected_rr, 0.025), 2), \"\\n\")\n\n  2.5%åˆ†ä½æ•°: 1.81 \n\ncat(\"  97.5%åˆ†ä½æ•°:\", round(quantile(corrected_rr, 0.975), 2), \"\\n\")\n\n  97.5%åˆ†ä½æ•°: 2.3 \n\n# å› æœæ•ˆåº”ä¸ºé›¶çš„æ¦‚ç‡\nprob_null &lt;- mean(corrected_rr &lt;= 1)\ncat(\"  RRâ‰¤1çš„æ¦‚ç‡:\", round(prob_null * 100, 1), \"%\\n\")\n\n  RRâ‰¤1çš„æ¦‚ç‡: 0 %\n\n\n\n# å¯è§†åŒ–æ ¡æ­£åçš„åˆ†å¸ƒ\nggplot(data.frame(RR = corrected_rr), aes(x = RR)) +\n    geom_histogram(aes(y = after_stat(density)),\n        bins = 30,\n        fill = \"#4f46e5\", alpha = 0.7\n    ) +\n    geom_density(color = \"#1e293b\", linewidth = 1) +\n    geom_vline(xintercept = 1, linetype = \"dashed\", color = \"#ef4444\", linewidth = 1) +\n    geom_vline(xintercept = observed_rr, linetype = \"solid\", color = \"#10b981\", linewidth = 1) +\n    annotate(\"text\", x = observed_rr + 0.1, y = 1, label = \"è§‚å¯Ÿå€¼\", hjust = 0) +\n    annotate(\"text\", x = 1.1, y = 1.2, label = \"æ— æ•ˆå€¼\", hjust = 0) +\n    labs(\n        title = \"æ¦‚ç‡æ•æ„Ÿæ€§åˆ†æï¼šæ ¡æ­£åRRçš„åˆ†å¸ƒ\",\n        x = \"æ ¡æ­£åçš„ç›¸å¯¹å±é™©åº¦\",\n        y = \"å¯†åº¦\"\n    ) +\n    theme_minimal(base_size = 12)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "Eå€¼æ•æ„Ÿæ€§åˆ†æ"
    ]
  },
  {
    "objectID": "1059-evalue.html#è®ºæ–‡æŠ¥å‘Šæ¨¡æ¿",
    "href": "1059-evalue.html#è®ºæ–‡æŠ¥å‘Šæ¨¡æ¿",
    "title": "Eå€¼ä¸æœªæµ‹é‡æ··æ‚æ•æ„Ÿæ€§åˆ†æ",
    "section": "è®ºæ–‡æŠ¥å‘Šæ¨¡æ¿",
    "text": "è®ºæ–‡æŠ¥å‘Šæ¨¡æ¿\nåœ¨è®ºæ–‡ä¸­æŠ¥å‘ŠEå€¼çš„æ ‡å‡†æ ¼å¼ï¼š\n\n\n\n**æ•æ„Ÿæ€§åˆ†æ**\n\nä¸ºè¯„ä¼°æœªæµ‹é‡æ··æ‚å¯¹ç ”ç©¶ç»“æœçš„æ½œåœ¨å½±å“ï¼Œæˆ‘ä»¬è®¡ç®—äº†Eå€¼ã€‚ä¸»åˆ†æä¸­è§‚å¯Ÿåˆ°çš„\né£é™©æ¯”ä¸º1.85 (95% CI: 1.42-2.41)ï¼Œå¯¹åº”çš„Eå€¼ä¸º3.12ï¼ˆç‚¹ä¼°è®¡ï¼‰å’Œ2.22ï¼ˆç½®ä¿¡\nåŒºé—´ä¸‹é™ï¼‰ã€‚è¿™æ„å‘³ç€ï¼Œä¸ºäº†å°†è§‚å¯Ÿåˆ°çš„å…³è”å®Œå…¨è§£é‡Šä¸ºæœªæµ‹é‡æ··æ‚çš„ç»“æœï¼Œè¯¥\næ··æ‚å› ç´ éœ€è¦ä¸æš´éœ²å’Œç»“å±€å‡å…·æœ‰è‡³å°‘3.12å€çš„ç›¸å¯¹å±é™©åº¦å…³è”ï¼ˆåœ¨ä¸Šè¿°å…³è”\nå¼ºåº¦åŸºç¡€ä¸Šæ§åˆ¶å·²è°ƒæ•´çš„åå˜é‡ï¼‰ã€‚è€ƒè™‘åˆ°æœ¬ç ”ç©¶å·²è°ƒæ•´çš„æ··æ‚å› ç´ ä¸­æœ€å¼ºçš„\nå…³è”çº¦ä¸ºRR=2.0ï¼Œæˆ‘ä»¬è®¤ä¸ºå­˜åœ¨è¶³å¤Ÿå¼ºçš„æœªæµ‹é‡æ··æ‚æ¥å®Œå…¨è§£é‡Šæœ¬ç ”ç©¶ç»“æœçš„\nå¯èƒ½æ€§è¾ƒå°ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "Eå€¼æ•æ„Ÿæ€§åˆ†æ"
    ]
  },
  {
    "objectID": "1059-evalue.html#å¸¸è§é—®é¢˜",
    "href": "1059-evalue.html#å¸¸è§é—®é¢˜",
    "title": "Eå€¼ä¸æœªæµ‹é‡æ··æ‚æ•æ„Ÿæ€§åˆ†æ",
    "section": "å¸¸è§é—®é¢˜",
    "text": "å¸¸è§é—®é¢˜\n\n1. Eå€¼å¯ä»¥ç”¨äºä¿æŠ¤æ€§å› ç´ å—ï¼Ÿ\nå¯ä»¥ã€‚å¯¹äº RR &lt; 1 çš„ä¿æŠ¤æ€§å› ç´ ï¼Œä½¿ç”¨ 1/RR è®¡ç®—Eå€¼ï¼š\n\n# ä¿æŠ¤æ€§å› ç´  RR = 0.6\nprotective_rr &lt;- 0.6\nevalue(est = RR(1 / protective_rr))\n\n            point lower upper\nRR       1.666667    NA    NA\nE-values 2.720759    NA    NA\n\n\n\n\n2. ORå¯ä»¥ç›´æ¥ç”¨äºè®¡ç®—Eå€¼å—ï¼Ÿ\nå¯¹äºç¨€æœ‰ç»“å±€ï¼ˆå‘ç—…ç‡&lt;15%ï¼‰ï¼ŒORå¯è¿‘ä¼¼RRã€‚å¯¹äºå¸¸è§ç»“å±€ï¼Œéœ€è¦è½¬æ¢ï¼š\n\n# å¸¸è§ç»“å±€ï¼šè½¬æ¢ORä¸ºRR\n# éœ€è¦çŸ¥é“å¯¹ç…§ç»„çš„é£é™©\nOR_to_RR &lt;- function(or, p0) {\n    or / (1 - p0 + p0 * or)\n}\n\n# ä¾‹å¦‚ï¼šOR = 2.0ï¼Œå¯¹ç…§ç»„é£é™© = 0.3\nrr &lt;- OR_to_RR(2.0, 0.3)\ncat(\"è½¬æ¢åçš„RR:\", round(rr, 2), \"\\n\")\n\nè½¬æ¢åçš„RR: 1.54 \n\nevalue(est = RR(rr))\n\n            point lower upper\nRR       1.538462    NA    NA\nE-values 2.448628    NA    NA\n\n\n\n\n3. å¦‚ä½•è§£é‡ŠEå€¼ä¸º1ï¼Ÿ\nEå€¼ä¸º1æ„å‘³ç€ä»»ä½•æœªæµ‹é‡æ··æ‚éƒ½å¯ä»¥è§£é‡Šè§‚å¯Ÿåˆ°çš„å…³è”ï¼Œè¿™é€šå¸¸å‘ç”Ÿåœ¨ç‚¹ä¼°è®¡æ¥è¿‘1ï¼ˆæ— å…³è”ï¼‰æ—¶ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "Eå€¼æ•æ„Ÿæ€§åˆ†æ"
    ]
  },
  {
    "objectID": "1059-evalue.html#æ€»ç»“",
    "href": "1059-evalue.html#æ€»ç»“",
    "title": "Eå€¼ä¸æœªæµ‹é‡æ··æ‚æ•æ„Ÿæ€§åˆ†æ",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\næ­¥éª¤\næ“ä½œ\n\n\n\n\n1. ç¡®å®šæ•ˆåº”æŒ‡æ ‡\nRRã€ORã€HRã€RDç­‰\n\n\n2. é€‰æ‹©è½¬æ¢å‡½æ•°\nRR(), OR(), HR(), RD()\n\n\n3. è®¡ç®—Eå€¼\nevalue(est = ...)\n\n\n4. è§£è¯»ç»“æœ\nä¸å·²çŸ¥æ··æ‚æ¯”è¾ƒï¼Œè¯„ä¼°åˆç†æ€§\n\n\n5. è®ºæ–‡æŠ¥å‘Š\nä½¿ç”¨æ ‡å‡†åŒ–è¯­è¨€æè¿°\n\n\n\n\næ¨èèµ„æº\n\nEValueå®˜æ–¹æ–‡æ¡£\nVanderWeele & Ding (2017) Annals of Internal Medicine\nMathur et al.Â (2018) Epidemiology",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "Eå€¼æ•æ„Ÿæ€§åˆ†æ"
    ]
  },
  {
    "objectID": "1061-random-survival-forest.html",
    "href": "1061-random-survival-forest.html",
    "title": "éšæœºç”Ÿå­˜æ£®æ—å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "éšæœºç”Ÿå­˜æ£®æ—ï¼ˆRandom Survival Forest, RSFï¼‰ æ˜¯å°†éšæœºæ£®æ—ç®—æ³•æ‰©å±•åˆ°ç”Ÿå­˜åˆ†æé¢†åŸŸçš„æœºå™¨å­¦ä¹ æ–¹æ³•ã€‚å®ƒç»“åˆäº†éšæœºæ£®æ—çš„ä¼˜åŠ¿ä¸ç”Ÿå­˜åˆ†æå¤„ç†åˆ å¤±æ•°æ®çš„èƒ½åŠ›ã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\né«˜ç»´æ•°æ®\nå˜é‡æ•°é‡è¿œå¤šäºæ ·æœ¬é‡\n\n\néçº¿æ€§å…³ç³»\nåå˜é‡ä¸é£é™©ä¹‹é—´å­˜åœ¨å¤æ‚éçº¿æ€§å…³ç³»\n\n\nå˜é‡äº¤äº’\nå­˜åœ¨é«˜é˜¶äº¤äº’ä½œç”¨\n\n\nå˜é‡é€‰æ‹©\nè‡ªåŠ¨ç­›é€‰é‡è¦å˜é‡\n\n\né¢„æµ‹å»ºæ¨¡\nå…³æ³¨é¢„æµ‹ç²¾åº¦è€Œéæ¨æ–­\n\n\n\n\n\n\n\n\n\nç‰¹æ€§\nCox æ¯”ä¾‹é£é™©æ¨¡å‹\néšæœºç”Ÿå­˜æ£®æ—\n\n\n\n\nçº¿æ€§å‡è®¾\néœ€è¦ï¼ˆlog-çº¿æ€§ï¼‰\nä¸éœ€è¦\n\n\næ¯”ä¾‹é£é™©å‡è®¾\néœ€è¦\nä¸éœ€è¦\n\n\nå˜é‡æ•°é‡\nå—é™äºæ ·æœ¬é‡\nå¯å¤„ç†é«˜ç»´\n\n\näº¤äº’ä½œç”¨\néœ€æ‰‹åŠ¨æŒ‡å®š\nè‡ªåŠ¨æ•è·\n\n\nå¯è§£é‡Šæ€§\né«˜ï¼ˆHR è§£é‡Šï¼‰\nä¸­ç­‰ï¼ˆéœ€è¦å¯è§†åŒ–ï¼‰\n\n\næ¨æ–­\nå¯åšå‡è®¾æ£€éªŒ\nä¸»è¦ç”¨äºé¢„æµ‹\n\n\nè¿‡æ‹Ÿåˆé£é™©\nä½\nä¸­ç­‰ï¼ˆéœ€è°ƒå‚ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "éšæœºç”Ÿå­˜æ£®æ— (RSF)"
    ]
  },
  {
    "objectID": "1061-random-survival-forest.html#ä»€ä¹ˆæ˜¯éšæœºç”Ÿå­˜æ£®æ—",
    "href": "1061-random-survival-forest.html#ä»€ä¹ˆæ˜¯éšæœºç”Ÿå­˜æ£®æ—",
    "title": "éšæœºç”Ÿå­˜æ£®æ—å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "éšæœºç”Ÿå­˜æ£®æ—ï¼ˆRandom Survival Forest, RSFï¼‰ æ˜¯å°†éšæœºæ£®æ—ç®—æ³•æ‰©å±•åˆ°ç”Ÿå­˜åˆ†æé¢†åŸŸçš„æœºå™¨å­¦ä¹ æ–¹æ³•ã€‚å®ƒç»“åˆäº†éšæœºæ£®æ—çš„ä¼˜åŠ¿ä¸ç”Ÿå­˜åˆ†æå¤„ç†åˆ å¤±æ•°æ®çš„èƒ½åŠ›ã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\né«˜ç»´æ•°æ®\nå˜é‡æ•°é‡è¿œå¤šäºæ ·æœ¬é‡\n\n\néçº¿æ€§å…³ç³»\nåå˜é‡ä¸é£é™©ä¹‹é—´å­˜åœ¨å¤æ‚éçº¿æ€§å…³ç³»\n\n\nå˜é‡äº¤äº’\nå­˜åœ¨é«˜é˜¶äº¤äº’ä½œç”¨\n\n\nå˜é‡é€‰æ‹©\nè‡ªåŠ¨ç­›é€‰é‡è¦å˜é‡\n\n\né¢„æµ‹å»ºæ¨¡\nå…³æ³¨é¢„æµ‹ç²¾åº¦è€Œéæ¨æ–­\n\n\n\n\n\n\n\n\n\nç‰¹æ€§\nCox æ¯”ä¾‹é£é™©æ¨¡å‹\néšæœºç”Ÿå­˜æ£®æ—\n\n\n\n\nçº¿æ€§å‡è®¾\néœ€è¦ï¼ˆlog-çº¿æ€§ï¼‰\nä¸éœ€è¦\n\n\næ¯”ä¾‹é£é™©å‡è®¾\néœ€è¦\nä¸éœ€è¦\n\n\nå˜é‡æ•°é‡\nå—é™äºæ ·æœ¬é‡\nå¯å¤„ç†é«˜ç»´\n\n\näº¤äº’ä½œç”¨\néœ€æ‰‹åŠ¨æŒ‡å®š\nè‡ªåŠ¨æ•è·\n\n\nå¯è§£é‡Šæ€§\né«˜ï¼ˆHR è§£é‡Šï¼‰\nä¸­ç­‰ï¼ˆéœ€è¦å¯è§†åŒ–ï¼‰\n\n\næ¨æ–­\nå¯åšå‡è®¾æ£€éªŒ\nä¸»è¦ç”¨äºé¢„æµ‹\n\n\nè¿‡æ‹Ÿåˆé£é™©\nä½\nä¸­ç­‰ï¼ˆéœ€è°ƒå‚ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "éšæœºç”Ÿå­˜æ£®æ— (RSF)"
    ]
  },
  {
    "objectID": "1061-random-survival-forest.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "href": "1061-random-survival-forest.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "title": "éšæœºç”Ÿå­˜æ£®æ—å®Œå…¨æŒ‡å—",
    "section": "R åŒ…å®‰è£…ä¸åŠ è½½",
    "text": "R åŒ…å®‰è£…ä¸åŠ è½½\n\n# æ ¸å¿ƒåŒ…\nlibrary(randomForestSRC) # RSF ä¸»åŠ›åŒ…\nlibrary(ranger) # æ›´å¿«çš„å®ç°\nlibrary(survival) # ç”Ÿå­˜åˆ†æåŸºç¡€\nlibrary(pec) # é¢„æµ‹è¯¯å·®æ›²çº¿\n\n# å¯è§†åŒ–\nlibrary(ggplot2)\nlibrary(tidyverse)\n\ntheme_set(theme_minimal(base_size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "éšæœºç”Ÿå­˜æ£®æ— (RSF)"
    ]
  },
  {
    "objectID": "1061-random-survival-forest.html#ç†è®ºåŸºç¡€",
    "href": "1061-random-survival-forest.html#ç†è®ºåŸºç¡€",
    "title": "éšæœºç”Ÿå­˜æ£®æ—å®Œå…¨æŒ‡å—",
    "section": "ç†è®ºåŸºç¡€",
    "text": "ç†è®ºåŸºç¡€\n\nç”Ÿå­˜æ ‘çš„æ„å»º\nRSF ä¸­æ¯æ£µç”Ÿå­˜æ ‘çš„æ„å»ºéµå¾ªä»¥ä¸‹åŸåˆ™ï¼š\n\nèŠ‚ç‚¹åˆ†è£‚å‡†åˆ™ï¼šä½¿ç”¨ log-rank ç»Ÿè®¡é‡æˆ–å¯¹æ•°ç§©åˆ†è£‚è§„åˆ™\nç»ˆæ­¢æ¡ä»¶ï¼šè¾¾åˆ°æœ€å°èŠ‚ç‚¹å¤§å°æˆ–æœ€å¤§æ·±åº¦\nç»ˆç«¯èŠ‚ç‚¹ï¼šä¼°è®¡è¯¥èŠ‚ç‚¹æ ·æœ¬çš„ç´¯ç§¯é£é™©å‡½æ•°\n\n\n\nåˆ†è£‚è§„åˆ™\næœ€å¸¸ç”¨çš„åˆ†è£‚è§„åˆ™æ˜¯ log-rank splittingï¼š\n\\[\\text{Log-rank statistic} = \\frac{(O_1 - E_1)^2}{\\text{Var}(O_1 - E_1)}\\]\nå…¶ä¸­ \\(O_1\\) æ˜¯å­èŠ‚ç‚¹1ä¸­çš„è§‚å¯Ÿäº‹ä»¶æ•°ï¼Œ\\(E_1\\) æ˜¯æœŸæœ›äº‹ä»¶æ•°ã€‚\n\n\né›†æˆé¢„æµ‹\nå¯¹äºæ–°æ ·æœ¬ï¼ŒRSF çš„é¢„æµ‹æ˜¯æ‰€æœ‰æ ‘é¢„æµ‹çš„å¹³å‡ç´¯ç§¯é£é™©å‡½æ•°ï¼š\n\\[\\hat{H}(t|x) = \\frac{1}{B}\\sum_{b=1}^{B} \\hat{H}_b(t|x)\\]",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "éšæœºç”Ÿå­˜æ£®æ— (RSF)"
    ]
  },
  {
    "objectID": "1061-random-survival-forest.html#å®æˆ˜æ¡ˆä¾‹è‚¿ç˜¤æ‚£è€…é¢„åé¢„æµ‹",
    "href": "1061-random-survival-forest.html#å®æˆ˜æ¡ˆä¾‹è‚¿ç˜¤æ‚£è€…é¢„åé¢„æµ‹",
    "title": "éšæœºç”Ÿå­˜æ£®æ—å®Œå…¨æŒ‡å—",
    "section": "å®æˆ˜æ¡ˆä¾‹ï¼šè‚¿ç˜¤æ‚£è€…é¢„åé¢„æµ‹",
    "text": "å®æˆ˜æ¡ˆä¾‹ï¼šè‚¿ç˜¤æ‚£è€…é¢„åé¢„æµ‹\n\næ¨¡æ‹Ÿæ•°æ®\n\n# æ¨¡æ‹Ÿè‚¿ç˜¤æ‚£è€…ç”Ÿå­˜æ•°æ®\nset.seed(2024)\nn &lt;- 800\n\n# ç”Ÿæˆåå˜é‡\ncancer_rsf &lt;- tibble(\n    id = 1:n,\n    age = round(rnorm(n, 60, 12)),\n    sex = factor(sample(c(\"ç”·\", \"å¥³\"), n, replace = TRUE)),\n    stage = factor(sample(1:4, n, replace = TRUE, prob = c(0.15, 0.30, 0.35, 0.20))),\n    grade = factor(sample(1:3, n, replace = TRUE)),\n    tumor_size = abs(rnorm(n, 40, 20)),\n    nodes_positive = rpois(n, 2),\n    biomarker_a = rnorm(n, 100, 30),\n    biomarker_b = rnorm(n, 50, 15),\n    biomarker_c = rnorm(n, 200, 50),\n    treatment = factor(sample(c(\"æ ‡å‡†\", \"æ–°æ–¹æ¡ˆ\"), n, replace = TRUE)),\n    ecog = sample(0:3, n, replace = TRUE, prob = c(0.3, 0.4, 0.2, 0.1))\n)\n\n# ç”Ÿæˆç”Ÿå­˜æ—¶é—´ï¼ˆåŒ…å«éçº¿æ€§æ•ˆåº”å’Œäº¤äº’ä½œç”¨ï¼‰\ncancer_rsf &lt;- cancer_rsf %&gt;%\n    mutate(\n        # å¤æ‚çš„é£é™©å‡½æ•°ï¼ˆåŒ…å«éçº¿æ€§å’Œäº¤äº’ï¼‰\n        log_hr = 0.03 * (age - 60) +\n            0.5 * (as.numeric(stage) - 1) +\n            0.3 * (as.numeric(grade) - 1) +\n            0.02 * tumor_size +\n            0.15 * nodes_positive +\n            0.005 * (biomarker_a - 100) +\n            0.01 * (biomarker_b - 50)^2 / 100 + # éçº¿æ€§æ•ˆåº”\n            -0.3 * (treatment == \"æ–°æ–¹æ¡ˆ\") +\n            0.2 * ecog +\n            0.02 * (age - 60) * (as.numeric(stage) - 1), # äº¤äº’ä½œç”¨\n\n        # ç”Ÿå­˜æ—¶é—´ï¼ˆWeibullï¼‰\n        survival_time = rweibull(n, shape = 1.5, scale = 48 * exp(-log_hr / 1.5)),\n        censor_time = runif(n, 12, 72),\n        time = pmin(survival_time, censor_time),\n        status = as.integer(survival_time &lt;= censor_time)\n    ) %&gt;%\n    select(-log_hr, -survival_time, -censor_time)\n\n# æŸ¥çœ‹æ•°æ®\nglimpse(cancer_rsf)\n\nRows: 800\nColumns: 14\n$ id             &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, â€¦\n$ age            &lt;dbl&gt; 72, 66, 59, 57, 74, 76, 66, 58, 45, 47, 40, 66, 70, 64,â€¦\n$ sex            &lt;fct&gt; ç”·, ç”·, å¥³, å¥³, ç”·, å¥³, å¥³, å¥³, ç”·, ç”·, å¥³, å¥³, å¥³, å¥³, å¥³, ç”·, ç”·, å¥³, ç”·â€¦\n$ stage          &lt;fct&gt; 3, 3, 4, 3, 3, 2, 1, 3, 3, 2, 3, 4, 3, 1, 2, 4, 4, 4, 4â€¦\n$ grade          &lt;fct&gt; 3, 3, 3, 1, 1, 1, 1, 2, 1, 1, 3, 3, 1, 1, 1, 3, 2, 2, 1â€¦\n$ tumor_size     &lt;dbl&gt; 66.2282330, 36.9110376, 44.4105912, 37.0697422, 92.3079â€¦\n$ nodes_positive &lt;int&gt; 5, 3, 2, 1, 2, 1, 2, 2, 4, 1, 0, 1, 1, 1, 2, 3, 2, 4, 0â€¦\n$ biomarker_a    &lt;dbl&gt; 94.07990, 83.73132, 61.33038, 110.21122, 135.22067, 82.â€¦\n$ biomarker_b    &lt;dbl&gt; 65.53666, 41.21167, 45.87980, 61.85733, 68.81587, 34.00â€¦\n$ biomarker_c    &lt;dbl&gt; 290.0940, 162.1802, 191.3112, 149.5812, 260.1559, 189.7â€¦\n$ treatment      &lt;fct&gt; æ ‡å‡†, æ ‡å‡†, æ–°æ–¹æ¡ˆ, æ ‡å‡†, æ ‡å‡†, æ ‡å‡†, æ–°æ–¹æ¡ˆ, æ ‡å‡†, æ–°æ–¹æ¡ˆ, æ ‡å‡†, æ ‡å‡†, æ–°æ–¹æ¡ˆ, æ ‡å‡†,â€¦\n$ ecog           &lt;int&gt; 3, 2, 1, 1, 3, 3, 2, 3, 3, 1, 1, 2, 2, 2, 2, 1, 2, 1, 3â€¦\n$ time           &lt;dbl&gt; 0.7356448, 0.9830922, 6.7372882, 16.2752356, 0.2784047,â€¦\n$ status         &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1â€¦\n\ncat(\"\\näº‹ä»¶ç‡:\", mean(cancer_rsf$status), \"\\n\")\n\n\näº‹ä»¶ç‡: 0.9075 \n\n\n\n\nä½¿ç”¨ randomForestSRC æ„å»º RSF\n\n# å‡†å¤‡æ•°æ®\nrsf_data &lt;- cancer_rsf %&gt;%\n    select(-id) %&gt;%\n    mutate(across(where(is.character), as.factor))\n\n# æ„å»º RSF æ¨¡å‹\nrsf_model &lt;- rfsrc(\n    Surv(time, status) ~ .,\n    data = rsf_data,\n    ntree = 500, # æ ‘çš„æ•°é‡\n    nodesize = 15, # ç»ˆç«¯èŠ‚ç‚¹æœ€å°æ ·æœ¬æ•°\n    nsplit = 10, # æ¯æ¬¡åˆ†è£‚è€ƒè™‘çš„å€™é€‰ç‚¹æ•°\n    importance = TRUE, # è®¡ç®—å˜é‡é‡è¦æ€§\n    seed = 42\n)\n\nprint(rsf_model)\n\n                         Sample size: 800\n                    Number of deaths: 726\n                     Number of trees: 500\n           Forest terminal node size: 15\n       Average no. of terminal nodes: 37.764\nNo. of variables tried at each split: 4\n              Total no. of variables: 11\n       Resampling used to grow trees: swor\n    Resample size used to grow trees: 506\n                            Analysis: RSF\n                              Family: surv\n                      Splitting rule: logrank *random*\n       Number of random split points: 10\n                          (OOB) CRPS: 4.59504653\n             (OOB) standardized CRPS: 0.08172861\n   (OOB) Requested performance error: 0.28127997\n\n\n\n\nä½¿ç”¨ ranger æ„å»º RSFï¼ˆæ›´å¿«ï¼‰\n\n# ranger å®ç°ï¼ˆé€Ÿåº¦æ›´å¿«ï¼Œé€‚åˆå¤§æ•°æ®ï¼‰\nrsf_ranger &lt;- ranger(\n    Surv(time, status) ~ .,\n    data = rsf_data,\n    num.trees = 500,\n    min.node.size = 15,\n    importance = \"permutation\",\n    seed = 42\n)\n\nprint(rsf_ranger)\n\nRanger result\n\nCall:\n ranger(Surv(time, status) ~ ., data = rsf_data, num.trees = 500,      min.node.size = 15, importance = \"permutation\", seed = 42) \n\nType:                             Survival \nNumber of trees:                  500 \nSample size:                      800 \nNumber of independent variables:  11 \nMtry:                             4 \nTarget node size:                 15 \nVariable importance mode:         permutation \nSplitrule:                        logrank \nNumber of unique death times:     726 \nOOB prediction error (1-C):       0.2882467",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "éšæœºç”Ÿå­˜æ£®æ— (RSF)"
    ]
  },
  {
    "objectID": "1061-random-survival-forest.html#å˜é‡é‡è¦æ€§åˆ†æ",
    "href": "1061-random-survival-forest.html#å˜é‡é‡è¦æ€§åˆ†æ",
    "title": "éšæœºç”Ÿå­˜æ£®æ—å®Œå…¨æŒ‡å—",
    "section": "å˜é‡é‡è¦æ€§åˆ†æ",
    "text": "å˜é‡é‡è¦æ€§åˆ†æ\n\nVIMP (Variable Importance)\nVIMP é€šè¿‡ç½®æ¢å˜é‡å€¼å¹¶è§‚å¯Ÿé¢„æµ‹è¯¯å·®å˜åŒ–æ¥è¡¡é‡å˜é‡é‡è¦æ€§ã€‚\n\n# æå–å˜é‡é‡è¦æ€§\nvimp &lt;- rsf_model$importance\n\n# åˆ›å»ºå¯è§†åŒ–æ•°æ®\nvimp_df &lt;- tibble(\n    variable = names(vimp),\n    importance = vimp\n) %&gt;%\n    arrange(desc(importance)) %&gt;%\n    mutate(variable = fct_reorder(variable, importance))\n\n# å¯è§†åŒ–\nggplot(vimp_df, aes(x = importance, y = variable)) +\n    geom_col(fill = \"#059669\", alpha = 0.8) +\n    geom_vline(xintercept = 0, linetype = \"dashed\", color = \"gray50\") +\n    labs(\n        title = \"éšæœºç”Ÿå­˜æ£®æ—å˜é‡é‡è¦æ€§ (VIMP)\",\n        subtitle = \"æ­£å€¼è¡¨ç¤ºè¯¥å˜é‡å¯¹é¢„æµ‹æœ‰è´¡çŒ®\",\n        x = \"å˜é‡é‡è¦æ€§\",\n        y = NULL\n    ) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        panel.grid.major.y = element_blank()\n    )\n\n\n\n\n\n\n\n\n\n\nMinimal Depth\nMinimal Depth è¡¡é‡å˜é‡é¦–æ¬¡ç”¨äºåˆ†è£‚çš„æ·±åº¦ï¼Œæ·±åº¦è¶Šå°è¶Šé‡è¦ã€‚\n\n# è®¡ç®— minimal depth\nmd &lt;- max.subtree(rsf_model)\n\n# æå–å¹³å‡ minimal depth\nmd_df &lt;- tibble(\n    variable = names(md$order[, 1]),\n    min_depth = md$order[, 1]\n) %&gt;%\n    arrange(min_depth)\n\n# å¯è§†åŒ–\nggplot(md_df, aes(x = min_depth, y = fct_reorder(variable, -min_depth))) +\n    geom_col(fill = \"#0891b2\", alpha = 0.8) +\n    labs(\n        title = \"å˜é‡æœ€å°æ·±åº¦ (Minimal Depth)\",\n        subtitle = \"æ·±åº¦è¶Šå°ï¼Œå˜é‡è¶Šé‡è¦\",\n        x = \"å¹³å‡æœ€å°æ·±åº¦\",\n        y = NULL\n    ) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        panel.grid.major.y = element_blank()\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "éšæœºç”Ÿå­˜æ£®æ— (RSF)"
    ]
  },
  {
    "objectID": "1061-random-survival-forest.html#é¢„æµ‹ä¸è¯„ä¼°",
    "href": "1061-random-survival-forest.html#é¢„æµ‹ä¸è¯„ä¼°",
    "title": "éšæœºç”Ÿå­˜æ£®æ—å®Œå…¨æŒ‡å—",
    "section": "é¢„æµ‹ä¸è¯„ä¼°",
    "text": "é¢„æµ‹ä¸è¯„ä¼°\n\né¢„æµ‹ç”Ÿå­˜æ¦‚ç‡\n\n# é¢„æµ‹\npred &lt;- predict(rsf_model)\n\n# æŸ¥çœ‹é¢„æµ‹ç»“æ„\nnames(pred)\n\n [1] \"call\"           \"family\"         \"n\"              \"ntree\"         \n [5] \"yvar\"           \"yvar.names\"     \"xvar\"           \"xvar.names\"    \n [9] \"leaf.count\"     \"proximity\"      \"forest\"         \"forest.wt\"     \n[13] \"case.depth\"     \"distance\"       \"ptn.membership\" \"membership\"    \n[17] \"splitrule\"      \"inbag\"          \"var.used\"       \"uno.weights\"   \n[21] \"imputed.indv\"   \"imputed.data\"   \"split.depth\"    \"block.size\"    \n[25] \"perf.type\"      \"ctime.internal\" \"ctime.external\" \"chf\"           \n[29] \"chf.oob\"        \"predicted\"      \"predicted.oob\"  \"survival\"      \n[33] \"survival.oob\"   \"cif\"            \"cif.oob\"        \"err.rate\"      \n[37] \"time.interest\"  \"ndead\"         \n\n# é¢„æµ‹çš„ç”Ÿå­˜æ›²çº¿ï¼ˆå‰5ä¸ªæ ·æœ¬ï¼‰\nsurv_curves &lt;- pred$survival[1:5, ]\ntime_points &lt;- pred$time.interest\n\n# è½¬æ¢ä¸ºé•¿æ ¼å¼ç»‘å›¾\nsurv_long &lt;- as_tibble(t(surv_curves)) %&gt;%\n    mutate(time = time_points) %&gt;%\n    pivot_longer(-time, names_to = \"sample\", values_to = \"survival\")\n\nggplot(surv_long, aes(x = time, y = survival, color = sample)) +\n    geom_step(linewidth = 1) +\n    scale_y_continuous(limits = c(0, 1), labels = scales::percent) +\n    labs(\n        title = \"ä¸ªä½“é¢„æµ‹ç”Ÿå­˜æ›²çº¿\",\n        x = \"æ—¶é—´ (æœˆ)\",\n        y = \"ç”Ÿå­˜æ¦‚ç‡\",\n        color = \"æ ·æœ¬\"\n    ) +\n    theme(legend.position = \"right\")\n\n\n\n\n\n\n\n\n\n\nç´¯ç§¯é£é™©å‡½æ•°\n\n# é¢„æµ‹ç´¯ç§¯é£é™©\nchf_curves &lt;- pred$chf[1:5, ]\n\nchf_long &lt;- as_tibble(t(chf_curves)) %&gt;%\n    mutate(time = time_points) %&gt;%\n    pivot_longer(-time, names_to = \"sample\", values_to = \"chf\")\n\nggplot(chf_long, aes(x = time, y = chf, color = sample)) +\n    geom_step(linewidth = 1) +\n    labs(\n        title = \"ä¸ªä½“ç´¯ç§¯é£é™©å‡½æ•°\",\n        x = \"æ—¶é—´ (æœˆ)\",\n        y = \"ç´¯ç§¯é£é™© H(t)\",\n        color = \"æ ·æœ¬\"\n    ) +\n    theme(legend.position = \"right\")\n\n\n\n\n\n\n\n\n\n\næ¨¡å‹è¯„ä¼°ï¼šC-index\n\n# OOB C-indexï¼ˆè¢‹å¤–æ ·æœ¬ï¼‰\ncat(\"OOB C-index:\", 1 - rsf_model$err.rate[rsf_model$ntree], \"\\n\")\n\nOOB C-index: 0.71872 \n\n# ä¸ Cox æ¨¡å‹æ¯”è¾ƒ\ncox_model &lt;- coxph(Surv(time, status) ~ ., data = rsf_data)\n\n# Cox æ¨¡å‹ C-index\ncox_cindex &lt;- summary(cox_model)$concordance[1]\ncat(\"Cox C-index:\", cox_cindex, \"\\n\")\n\nCox C-index: 0.7360626 \n\n\n\n\nBrier Score å’Œ IBS\n\n# Brier Score è®¡ç®—è¯´æ˜\n# pec åŒ…å¯ç”¨äºæ›´è¯¦ç»†çš„é¢„æµ‹è¯¯å·®æ›²çº¿åˆ†æ\n# è¿™é‡Œå±•ç¤ºåŸºæœ¬çš„ C-index æ¯”è¾ƒ\n\n# æ¨¡å‹æ€§èƒ½æ¯”è¾ƒè¡¨\nperformance_table &lt;- tibble(\n    æ¨¡å‹ = c(\"Cox æ¯”ä¾‹é£é™©æ¨¡å‹\", \"éšæœºç”Ÿå­˜æ£®æ— (RSF)\"),\n    `C-index` = c(\n        round(summary(cox_model)$concordance[1], 4),\n        round(1 - rsf_model$err.rate[rsf_model$ntree], 4)\n    ),\n    è¯´æ˜ = c(\"åŸºäºè®­ç»ƒæ•°æ®\", \"åŸºäº OOB æ ·æœ¬\")\n)\n\nperformance_table %&gt;% knitr::kable(caption = \"æ¨¡å‹é¢„æµ‹æ€§èƒ½æ¯”è¾ƒ\")\n\n\næ¨¡å‹é¢„æµ‹æ€§èƒ½æ¯”è¾ƒ\n\n\næ¨¡å‹\nC-index\nè¯´æ˜\n\n\n\n\nCox æ¯”ä¾‹é£é™©æ¨¡å‹\n0.7361\nåŸºäºè®­ç»ƒæ•°æ®\n\n\néšæœºç”Ÿå­˜æ£®æ— (RSF)\n0.7187\nåŸºäº OOB æ ·æœ¬",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "éšæœºç”Ÿå­˜æ£®æ— (RSF)"
    ]
  },
  {
    "objectID": "1061-random-survival-forest.html#éƒ¨åˆ†ä¾èµ–å›¾",
    "href": "1061-random-survival-forest.html#éƒ¨åˆ†ä¾èµ–å›¾",
    "title": "éšæœºç”Ÿå­˜æ£®æ—å®Œå…¨æŒ‡å—",
    "section": "éƒ¨åˆ†ä¾èµ–å›¾",
    "text": "éƒ¨åˆ†ä¾èµ–å›¾\néƒ¨åˆ†ä¾èµ–å›¾ï¼ˆPartial Dependence Plotï¼‰å±•ç¤ºå•ä¸ªå˜é‡å¯¹é¢„æµ‹çš„è¾¹é™…æ•ˆåº”ã€‚\n\n# å¯¹é‡è¦å˜é‡ç»‘åˆ¶éƒ¨åˆ†ä¾èµ–å›¾\n# å¹´é¾„\nplot.variable(rsf_model,\n    xvar.names = \"age\",\n    partial = TRUE,\n    surv.type = \"mort\", # æ­»äº¡ç‡\n    time = 36, # 36ä¸ªæœˆæ—¶çš„é¢„æµ‹\n    npts = 50\n)\n\n\n\n\n\n\n\n\n\n# åˆ†æœŸ\nplot.variable(rsf_model,\n    xvar.names = \"stage\",\n    partial = TRUE,\n    surv.type = \"mort\",\n    time = 36\n)\n\n\n\n\n\n\n\n\n\n# è‚¿ç˜¤å¤§å°ï¼ˆè¿ç»­å˜é‡ï¼‰\nplot.variable(rsf_model,\n    xvar.names = \"tumor_size\",\n    partial = TRUE,\n    surv.type = \"mort\",\n    time = 36,\n    npts = 50\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "éšæœºç”Ÿå­˜æ£®æ— (RSF)"
    ]
  },
  {
    "objectID": "1061-random-survival-forest.html#é£é™©åˆ†å±‚",
    "href": "1061-random-survival-forest.html#é£é™©åˆ†å±‚",
    "title": "éšæœºç”Ÿå­˜æ£®æ—å®Œå…¨æŒ‡å—",
    "section": "é£é™©åˆ†å±‚",
    "text": "é£é™©åˆ†å±‚\nä½¿ç”¨ RSF é¢„æµ‹è¿›è¡Œæ‚£è€…é£é™©åˆ†å±‚ã€‚\n\n# è·å–é¢„æµ‹çš„æ­»äº¡ç‡\nrsf_data$predicted_mortality &lt;- pred$predicted\n\n# æŒ‰é¢„æµ‹é£é™©åˆ†ç»„\nrsf_data &lt;- rsf_data %&gt;%\n    mutate(\n        risk_group = cut(\n            predicted_mortality,\n            breaks = quantile(predicted_mortality, c(0, 1 / 3, 2 / 3, 1)),\n            labels = c(\"ä½é£é™©\", \"ä¸­é£é™©\", \"é«˜é£é™©\"),\n            include.lowest = TRUE\n        )\n    )\n\n# ç»‘åˆ¶åˆ†å±‚ç”Ÿå­˜æ›²çº¿\nlibrary(survminer)\n\nkm_risk &lt;- survfit(Surv(time, status) ~ risk_group, data = rsf_data)\n\nggsurvplot(\n    km_risk,\n    data = rsf_data,\n    pval = TRUE,\n    conf.int = TRUE,\n    risk.table = TRUE,\n    palette = c(\"#22c55e\", \"#f59e0b\", \"#ef4444\"),\n    legend.title = \"é£é™©åˆ†ç»„\",\n    legend.labs = c(\"ä½é£é™©\", \"ä¸­é£é™©\", \"é«˜é£é™©\"),\n    xlab = \"æ—¶é—´ (æœˆ)\",\n    ylab = \"ç”Ÿå­˜æ¦‚ç‡\",\n    title = \"åŸºäº RSF çš„é£é™©åˆ†å±‚\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "éšæœºç”Ÿå­˜æ£®æ— (RSF)"
    ]
  },
  {
    "objectID": "1061-random-survival-forest.html#æ¨¡å‹è°ƒå‚",
    "href": "1061-random-survival-forest.html#æ¨¡å‹è°ƒå‚",
    "title": "éšæœºç”Ÿå­˜æ£®æ—å®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹è°ƒå‚",
    "text": "æ¨¡å‹è°ƒå‚\n\nå…³é”®è¶…å‚æ•°\n\n\n\nå‚æ•°\nè¯´æ˜\né»˜è®¤å€¼\nå»ºè®®èŒƒå›´\n\n\n\n\nntree\næ ‘çš„æ•°é‡\n500\n500-2000\n\n\nnodesize\nç»ˆç«¯èŠ‚ç‚¹æœ€å°æ ·æœ¬\n15\n5-50\n\n\nmtry\næ¯æ¬¡åˆ†è£‚è€ƒè™‘çš„å˜é‡æ•°\nsqrt(p)\n1-p\n\n\nnsplit\nå€™é€‰åˆ†è£‚ç‚¹æ•°\n10\n5-20\n\n\n\n\n\näº¤å‰éªŒè¯è°ƒå‚\n\n# ä½¿ç”¨ OOB è¯¯å·®è¿›è¡Œè°ƒå‚\ntune_results &lt;- tune(\n    Surv(time, status) ~ .,\n    data = rsf_data %&gt;% select(-risk_group, -predicted_mortality),\n    mtryStart = 3,\n    nodesizeTry = c(5, 10, 15, 20, 30),\n    ntreeTry = 100, # ä¸ºèŠ‚çœæ—¶é—´ä½¿ç”¨è¾ƒå°‘çš„æ ‘\n    trace = FALSE\n)\n\nprint(tune_results)\n\n$results\n    nodesize mtry       err\n1          1    1 0.2827721\n2          1    2 0.2642194\n3          1    3 0.2360929\n4          1    4 0.2354971\n5          1    5 0.2336204\n6          1    6 0.2406122\n7          1    7 0.2333812\n8          1    8 0.2324165\n9          1   10 0.2353296\n10         1   11 0.2375617\n11         2    1 0.2656922\n12         2    2 0.2365745\n13         2    3 0.2396229\n14         2    4 0.2351591\n15         2    5 0.2272608\n16         2    6 0.2385539\n17         2    7 0.2349682\n18         2    8 0.2374023\n19         2   10 0.2396155\n20         2   11 0.2311715\n21         3    5 0.2412911\n22         3    6 0.2413938\n23         3    7 0.2392190\n24         3    8 0.2376283\n25         3   10 0.2341939\n26         3   11 0.2360355\n27         4    1 0.2582293\n28         4    2 0.2527714\n29         4    3 0.2431804\n30         4    4 0.2434538\n31         4    5 0.2407928\n32         4    6 0.2480829\n33         4    7 0.2432127\n34         4    8 0.2399116\n35         4   10 0.2411783\n36         4   11 0.2518509\n37         5    2 0.2447931\n38         5    3 0.2491638\n39         5    4 0.2490778\n40         5    5 0.2460059\n41         5    6 0.2439531\n42         5    7 0.2493372\n43         5    8 0.2481403\n44         5   10 0.2416365\n45         5   11 0.2464937\n46         6    2 0.2473914\n47         6    3 0.2483640\n48         6    4 0.2436139\n49         6    5 0.2464310\n50         6    6 0.2415390\n51         6    7 0.2454932\n52         6    8 0.2398432\n53         6   10 0.2400792\n54         6   11 0.2473279\n55         7    1 0.2580068\n56         7    2 0.2594381\n57         7    3 0.2447986\n58         7    4 0.2389293\n59         7    5 0.2539654\n60         7    6 0.2494183\n61         7    7 0.2523568\n62         7    8 0.2450465\n63         7   10 0.2448832\n64         7   11 0.2521946\n65         8    1 0.2588282\n66         8    2 0.2421868\n67         8    3 0.2509016\n68         8    4 0.2494548\n69         8    5 0.2520794\n70         8    6 0.2597458\n71         8    7 0.2495366\n72         8    8 0.2526777\n73         8   10 0.2476163\n74         8   11 0.2436289\n75         9    1 0.2628113\n76         9    2 0.2423123\n77         9    3 0.2427209\n78         9    4 0.2457105\n79         9    5 0.2509298\n80         9    6 0.2556831\n81         9    7 0.2598417\n82         9    8 0.2556358\n83         9   10 0.2504823\n84         9   11 0.2600252\n85        10    1 0.2500646\n86        10    2 0.2561012\n87        10    3 0.2454078\n88        10    4 0.2597989\n89        10    5 0.2523327\n90        10    6 0.2476344\n91        10    7 0.2508244\n92        10    8 0.2519883\n93        10   10 0.2561152\n94        10   11 0.2617980\n95        15    1 0.2572460\n96        15    2 0.2486126\n97        15    3 0.2547127\n98        15    4 0.2502420\n99        15    5 0.2556851\n100       15    6 0.2603723\n101       15    7 0.2649463\n102       15    8 0.2566118\n103       15   10 0.2651051\n104       15   11 0.2604026\n105       20    1 0.2692092\n106       20    2 0.2532727\n107       20    3 0.2471912\n108       20    4 0.2571599\n109       20    5 0.2554456\n110       20    6 0.2530569\n111       20    7 0.2566748\n112       20    8 0.2717421\n113       20   10 0.2652263\n114       20   11 0.2600085\n115       25    1 0.2556569\n116       25    2 0.2484263\n117       25    3 0.2409270\n118       25    4 0.2546554\n119       25    5 0.2533387\n120       25    6 0.2619256\n121       25    7 0.2621066\n122       25    8 0.2634231\n123       25   10 0.2692344\n124       25   11 0.2658276\n125       30    2 0.2501348\n126       30    3 0.2504704\n127       30    4 0.2661120\n128       30    5 0.2634777\n129       30    6 0.2502773\n130       30    7 0.2655621\n131       30    8 0.2678063\n132       30   10 0.2715209\n133       30   11 0.2661183\n134       35    1 0.2716262\n135       35    2 0.2619691\n136       35    3 0.2540763\n137       35    4 0.2655195\n138       35    5 0.2711938\n139       35    6 0.2569606\n140       35    7 0.2519792\n141       35    8 0.2603400\n142       35   10 0.2713566\n143       35   11 0.2722150\n144       40    1 0.2580888\n145       40    2 0.2400857\n146       40    3 0.2545749\n147       40    4 0.2449717\n148       40    5 0.2629255\n149       40    6 0.2650811\n150       40    7 0.2691369\n151       40    8 0.2707893\n152       40   10 0.2794769\n153       40   11 0.2684459\n154       45    1 0.2665541\n155       45    2 0.2480705\n156       45    3 0.2592148\n157       45    4 0.2669770\n158       45    5 0.2615534\n159       45    6 0.2641801\n160       45    7 0.2619618\n161       45    8 0.2722804\n162       45   10 0.2806446\n163       45   11 0.2785385\n164       50    1 0.2893573\n165       50    2 0.2712932\n166       50    3 0.2540870\n167       50    4 0.2486869\n168       50    5 0.2575259\n169       50    6 0.2634572\n170       50    7 0.2609249\n171       50    8 0.2723958\n172       50   10 0.2758422\n173       50   11 0.2857538\n174       55    1 0.2818712\n175       55    2 0.2666999\n176       55    3 0.2620450\n177       55    4 0.2661726\n178       55    5 0.2675285\n179       55    6 0.2734376\n180       55    7 0.2636916\n181       55    8 0.2730504\n182       55   10 0.2836532\n183       55   11 0.2814793\n184       60    1 0.2649418\n185       60    2 0.2718601\n186       60    3 0.2654658\n187       60    4 0.2468010\n188       60    5 0.2611066\n189       60    6 0.2549070\n190       60    7 0.2724218\n191       60    8 0.2689993\n192       60   10 0.2757928\n193       60   11 0.2884324\n194       65    1 0.2703898\n195       65    2 0.2635150\n196       65    3 0.2577917\n197       65    4 0.2558241\n198       65    5 0.2614264\n199       65    6 0.2745757\n200       65    7 0.2738662\n201       65    8 0.2806727\n202       65   10 0.2790477\n203       65   11 0.2804652\n204       70    1 0.2619584\n205       70    2 0.2885051\n206       70    3 0.2549460\n207       70    4 0.2644772\n208       70    5 0.2562147\n209       70    6 0.2672690\n210       70    7 0.2694930\n211       70    8 0.2747997\n212       70   10 0.2778553\n213       70   11 0.2870730\n\n$optimal\nnodesize     mtry \n       2        5 \n\n$rf\n                         Sample size: 800\n                    Number of deaths: 726\n                     Number of trees: 500\n           Forest terminal node size: 2\n       Average no. of terminal nodes: 74.664\nNo. of variables tried at each split: 5\n              Total no. of variables: 11\n       Resampling used to grow trees: swor\n    Resample size used to grow trees: 150\n                            Analysis: RSF\n                              Family: surv\n                      Splitting rule: logrank *random*\n       Number of random split points: 1\n                          (OOB) CRPS: 4.75535628\n             (OOB) standardized CRPS: 0.08457992\n   (OOB) Requested performance error: 0.27186845\n\n\n\n# ä½¿ç”¨æœ€ä¼˜å‚æ•°é‡æ–°è®­ç»ƒ\noptimal_nodesize &lt;- tune_results$optimal[1]\n\nrsf_tuned &lt;- rfsrc(\n    Surv(time, status) ~ .,\n    data = rsf_data %&gt;% select(-risk_group, -predicted_mortality),\n    ntree = 500,\n    nodesize = optimal_nodesize,\n    importance = TRUE,\n    seed = 42\n)\n\ncat(\"ä¼˜åŒ–å OOB C-index:\", 1 - rsf_tuned$err.rate[rsf_tuned$ntree], \"\\n\")\n\nä¼˜åŒ–å OOB C-index: 0.7209579",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "éšæœºç”Ÿå­˜æ£®æ— (RSF)"
    ]
  },
  {
    "objectID": "1061-random-survival-forest.html#rsf-vs-coxå®Œæ•´å¯¹æ¯”",
    "href": "1061-random-survival-forest.html#rsf-vs-coxå®Œæ•´å¯¹æ¯”",
    "title": "éšæœºç”Ÿå­˜æ£®æ—å®Œå…¨æŒ‡å—",
    "section": "RSF vs Coxï¼šå®Œæ•´å¯¹æ¯”",
    "text": "RSF vs Coxï¼šå®Œæ•´å¯¹æ¯”\n\n# å‡†å¤‡å¹²å‡€æ•°æ®\nmodel_data &lt;- rsf_data %&gt;%\n    select(-risk_group, -predicted_mortality)\n\n# Cox æ¨¡å‹\ncox_full &lt;- coxph(Surv(time, status) ~ ., data = model_data)\n\n# RSF æ¨¡å‹\nrsf_full &lt;- rfsrc(Surv(time, status) ~ .,\n    data = model_data,\n    ntree = 500, importance = TRUE, seed = 42\n)\n\n# æ¯”è¾ƒ C-index\ntibble(\n    æ¨¡å‹ = c(\"Cox æ¯”ä¾‹é£é™©æ¨¡å‹\", \"éšæœºç”Ÿå­˜æ£®æ—\"),\n    `C-index` = c(\n        summary(cox_full)$concordance[1],\n        1 - rsf_full$err.rate[rsf_full$ntree]\n    )\n) %&gt;%\n    mutate(`C-index` = round(`C-index`, 4)) %&gt;%\n    knitr::kable()\n\n\n\n\næ¨¡å‹\nC-index\n\n\n\n\nCox æ¯”ä¾‹é£é™©æ¨¡å‹\n0.7361\n\n\néšæœºç”Ÿå­˜æ£®æ—\n0.7187",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "éšæœºç”Ÿå­˜æ£®æ— (RSF)"
    ]
  },
  {
    "objectID": "1061-random-survival-forest.html#å®ç”¨æŠ€å·§",
    "href": "1061-random-survival-forest.html#å®ç”¨æŠ€å·§",
    "title": "éšæœºç”Ÿå­˜æ£®æ—å®Œå…¨æŒ‡å—",
    "section": "å®ç”¨æŠ€å·§",
    "text": "å®ç”¨æŠ€å·§\n\nå¤„ç†ç¼ºå¤±å€¼\nRSF å¯ä»¥è‡ªåŠ¨å¤„ç†ç¼ºå¤±å€¼ï¼Œä½¿ç”¨æœ€ä¼˜åˆ†è£‚æ–¹å‘è¿›è¡Œæ’è¡¥ã€‚\n\n# RSF è‡ªåŠ¨å¤„ç†ç¼ºå¤±å€¼\nmodel_data_missing &lt;- model_data\nmodel_data_missing$biomarker_a[sample(1:nrow(model_data), 50)] &lt;- NA\n\nrsf_missing &lt;- rfsrc(\n    Surv(time, status) ~ .,\n    data = model_data_missing,\n    ntree = 500,\n    na.action = \"na.impute\", # ç¼ºå¤±å€¼æ’è¡¥\n    seed = 42\n)\n\ncat(\"å«ç¼ºå¤±å€¼çš„ OOB C-index:\", 1 - rsf_missing$err.rate[rsf_missing$ntree], \"\\n\")\n\nå«ç¼ºå¤±å€¼çš„ OOB C-index: 0.7203593 \n\n\n\n\nå˜é‡é€‰æ‹©\nä½¿ç”¨ VIMP è¿›è¡Œå˜é‡é€‰æ‹©ï¼š\n\n# åŸºäº VIMP çš„å˜é‡é€‰æ‹©\nvimp_values &lt;- rsf_model$importance\n\n# é€‰æ‹©é‡è¦æ€§ &gt; 0 çš„å˜é‡\nselected_vars &lt;- names(vimp_values[vimp_values &gt; 0])\ncat(\"é€‰æ‹©çš„å˜é‡:\", paste(selected_vars, collapse = \", \"), \"\\n\")\n\né€‰æ‹©çš„å˜é‡: age, stage, grade, tumor_size, nodes_positive, biomarker_a, biomarker_b, biomarker_c, treatment, ecog \n\n# ä½¿ç”¨é€‰æ‹©çš„å˜é‡é‡æ–°è®­ç»ƒ\nformula_selected &lt;- as.formula(\n    paste(\"Surv(time, status) ~\", paste(selected_vars, collapse = \" + \"))\n)\n\nrsf_selected &lt;- rfsrc(\n    formula_selected,\n    data = model_data,\n    ntree = 500,\n    importance = TRUE,\n    seed = 42\n)\n\ncat(\"å˜é‡é€‰æ‹©å OOB C-index:\", 1 - rsf_selected$err.rate[rsf_selected$ntree], \"\\n\")\n\nå˜é‡é€‰æ‹©å OOB C-index: 0.718447",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "éšæœºç”Ÿå­˜æ£®æ— (RSF)"
    ]
  },
  {
    "objectID": "1061-random-survival-forest.html#ä»£ç é€ŸæŸ¥è¡¨",
    "href": "1061-random-survival-forest.html#ä»£ç é€ŸæŸ¥è¡¨",
    "title": "éšæœºç”Ÿå­˜æ£®æ—å®Œå…¨æŒ‡å—",
    "section": "ä»£ç é€ŸæŸ¥è¡¨",
    "text": "ä»£ç é€ŸæŸ¥è¡¨\n\n# ========== RSF åˆ†ææ¨¡æ¿ ==========\n\nlibrary(randomForestSRC)\nlibrary(ranger)\n\n# 1. æ„å»ºæ¨¡å‹\nrsf &lt;- rfsrc(\n    Surv(time, status) ~ .,\n    data = data,\n    ntree = 500,\n    nodesize = 15,\n    importance = TRUE\n)\n\n# 2. å˜é‡é‡è¦æ€§\nvimp &lt;- rsf$importance\nplot.variable(rsf, xvar.names = \"var_name\", partial = TRUE)\n\n# 3. é¢„æµ‹\npred &lt;- predict(rsf, newdata = test_data)\nsurvival_probs &lt;- pred$survival # ç”Ÿå­˜æ¦‚ç‡çŸ©é˜µ\n\n# 4. è¯„ä¼°\nc_index &lt;- 1 - rsf$err.rate[rsf$ntree]\n\n# 5. è°ƒå‚\ntune_result &lt;- tune(Surv(time, status) ~ ., data = data)\n\n# 6. é£é™©åˆ†å±‚\nrisk_score &lt;- predict(rsf)$predicted\nrisk_group &lt;- cut(risk_score, breaks = quantile(risk_score, c(0, 0.33, 0.67, 1)))\n\n# 7. ä½¿ç”¨ rangerï¼ˆæ›´å¿«ï¼‰\nrsf_ranger &lt;- ranger(\n    Surv(time, status) ~ .,\n    data = data,\n    num.trees = 500,\n    importance = \"permutation\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "éšæœºç”Ÿå­˜æ£®æ— (RSF)"
    ]
  },
  {
    "objectID": "1061-random-survival-forest.html#æ€»ç»“",
    "href": "1061-random-survival-forest.html#æ€»ç»“",
    "title": "éšæœºç”Ÿå­˜æ£®æ—å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nè¦ç‚¹\nè¯´æ˜\n\n\n\n\nä½•æ—¶ä½¿ç”¨\né«˜ç»´æ•°æ®ã€éçº¿æ€§å…³ç³»ã€å˜é‡é€‰æ‹©ã€é¢„æµ‹å»ºæ¨¡\n\n\næ ¸å¿ƒä¼˜åŠ¿\næ— éœ€å‡è®¾ã€è‡ªåŠ¨å¤„ç†äº¤äº’ã€å¤„ç†ç¼ºå¤±å€¼\n\n\nä¸»è¦æŒ‡æ ‡\nC-index, Brier Score, IBS\n\n\nå˜é‡é‡è¦æ€§\nVIMP, Minimal Depth\n\n\nå¯è§†åŒ–\néƒ¨åˆ†ä¾èµ–å›¾ã€é£é™©åˆ†å±‚æ›²çº¿\n\n\nä¸ Cox äº’è¡¥\nRSF ç”¨äºé¢„æµ‹ï¼ŒCox ç”¨äºæ¨æ–­",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "éšæœºç”Ÿå­˜æ£®æ— (RSF)"
    ]
  },
  {
    "objectID": "1061-random-survival-forest.html#å‚è€ƒèµ„æº",
    "href": "1061-random-survival-forest.html#å‚è€ƒèµ„æº",
    "title": "éšæœºç”Ÿå­˜æ£®æ—å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nIshwaran H, Kogalur UB (2007). Random Survival Forests for R. R News\nrandomForestSRC å®˜æ–¹æ–‡æ¡£\nranger åŒ…æ–‡æ¡£\nBreiman L (2001). Random Forests. Machine Learning\nIshwaran H et al.Â (2008). Random Survival Forests. Annals of Applied Statistics",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "éšæœºç”Ÿå­˜æ£®æ— (RSF)"
    ]
  },
  {
    "objectID": "2011-viscolor.html",
    "href": "2011-viscolor.html",
    "title": "Rè¯­è¨€é…è‰²æ•™ç¨‹",
    "section": "",
    "text": "ç¬¬98æœŸ Rè¯­è¨€æ•™ç¨‹ ç§‘ç ”ç»˜å›¾é…è‰²å¸¸ç”¨RåŒ…\nåœ¨rè¯­è¨€ï¼Œggplot2ç»˜å›¾è¿‡ç¨‹ä¸­æœ€é‡è¦çš„ä¸€éƒ¨åˆ†å°±æ˜¯é…è‰²çš„é€‰æ‹©ã€‚ä¼˜ç§€çš„é…è‰²è¦å……åˆ†è€ƒè™‘åˆ°é¢œè‰²çš„åŒºåˆ†åº¦ï¼ŒæœŸåˆŠè¦æ±‚ï¼Œå†·æš–ç‰¹ç‚¹ç­‰\næœ¬æœŸä»‹ç»å¦‚ä½•è°ƒæ•´rè¯­è¨€ä¸­çš„é…è‰²ï¼Œä½¿æ•´ä¸ªå›¾ç‰‡ç¾è§‚ä¼˜é›…",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "é…è‰²æ–¹æ¡ˆ"
    ]
  },
  {
    "objectID": "2011-viscolor.html#åŸºç¡€å·¥ä½œ",
    "href": "2011-viscolor.html#åŸºç¡€å·¥ä½œ",
    "title": "Rè¯­è¨€é…è‰²æ•™ç¨‹",
    "section": "åŸºç¡€å·¥ä½œ",
    "text": "åŸºç¡€å·¥ä½œ\n\nåŠ è½½æ•°æ®\n\nlibrary(bruceR)\nlibrary(ggplot2)\ndata(iris)\nhead(iris, 10)\n\n   Sepal.Length Sepal.Width Petal.Length Petal.Width Species\n1           5.1         3.5          1.4         0.2  setosa\n2           4.9         3.0          1.4         0.2  setosa\n3           4.7         3.2          1.3         0.2  setosa\n4           4.6         3.1          1.5         0.2  setosa\n5           5.0         3.6          1.4         0.2  setosa\n6           5.4         3.9          1.7         0.4  setosa\n7           4.6         3.4          1.4         0.3  setosa\n8           5.0         3.4          1.5         0.2  setosa\n9           4.4         2.9          1.4         0.2  setosa\n10          4.9         3.1          1.5         0.1  setosa\n\n\n\n\nä½¿ç”¨ré»˜è®¤é…è‰²æ–¹æ¡ˆ\n\nggplot(iris, aes(x = Species, y = Sepal.Length, fill = Species)) +\n  geom_bar(stat = \"identity\") +\n  labs(title = \"Sepal Length by Species\", x = \"Species\", y = \"Sepal Length\") +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\n\nggplot2æ‰‹åŠ¨è°ƒè‰²\n\nggplot(iris, aes(x = Species, y = Sepal.Length, fill = Species)) +\n  geom_bar(stat = \"identity\") +\n  labs(title = \"Sepal Length by Species\", x = \"Species\", y = \"Sepal Length\") +\n  theme_minimal()+\n  scale_fill_manual(values = c(\"black\", \"grey\", \"brown\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "é…è‰²æ–¹æ¡ˆ"
    ]
  },
  {
    "objectID": "2011-viscolor.html#ä½¿ç”¨rcolorbreweråŒ…è®¾ç½®é¢œè‰²",
    "href": "2011-viscolor.html#ä½¿ç”¨rcolorbreweråŒ…è®¾ç½®é¢œè‰²",
    "title": "Rè¯­è¨€é…è‰²æ•™ç¨‹",
    "section": "ä½¿ç”¨RColorBreweråŒ…è®¾ç½®é¢œè‰²",
    "text": "ä½¿ç”¨RColorBreweråŒ…è®¾ç½®é¢œè‰²\n\nRcolorbrewä»‹ç»\nCRANåº“:CRAN: Package RColorBrewer (r-project.org)\nè°ƒç”¨ç½‘ç«™https://colorbrewer2.org/ä¸Šçš„é…è‰²æ–¹æ¡ˆ,ä½¿ç”¨äººæ•°ä¼—å¤š,æ•´ä½“æ¯”è¾ƒä¸­è§„ä¸­çŸ©\n\nlibrary(RColorBrewer)\n\n\n\næŸ¥çœ‹é…è‰²ç›˜ï¼Œé€‰æ‹©3é¢œè‰²ï¼ŒåŒºåˆ†è‰²\n\nå…ˆdisplayé…è‰²,æŸ¥çœ‹ç›®æ ‡è‰²æ•°å’Œè‰²å‹\né€‰æ‹©åˆé€‚çš„è°ƒè‰²ç›˜,åœ¨ggplotä¸­ä½¿ç”¨ scale_*_brewerè°ƒç”¨\n\n\ndisplay.brewer.all(3, type = 'div')\n\n\n\n\n\n\n\n\n\n\nggplot2å»ºç«‹æŸ±çŠ¶å›¾å¯è§†åŒ–\n\nggplot(iris, aes(x = Species, y = Sepal.Length, fill = Species)) +\n  geom_bar(stat = \"identity\") +\n  labs(title = \"Sepal Length by Species\", x = \"Species\", y = \"Sepal Length\") +\n  theme_minimal()+\n  scale_fill_brewer(palette = \"Spectral\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "é…è‰²æ–¹æ¡ˆ"
    ]
  },
  {
    "objectID": "2011-viscolor.html#ä½¿ç”¨ggsciåŒ…è®¾ç½®é¢œè‰²",
    "href": "2011-viscolor.html#ä½¿ç”¨ggsciåŒ…è®¾ç½®é¢œè‰²",
    "title": "Rè¯­è¨€é…è‰²æ•™ç¨‹",
    "section": "ä½¿ç”¨ggsciåŒ…è®¾ç½®é¢œè‰²",
    "text": "ä½¿ç”¨ggsciåŒ…è®¾ç½®é¢œè‰²\n\nRåŒ…ä»‹ç»\nggsciåŒ…å«æœŸåˆŠæˆ–è½¯ä»¶çš„ç»å…¸é…è‰²,æŠ•ç¨¿æ—¶è°ƒç”¨å¿«,æ•ˆæœå¥½,é¡ºæ‰‹å°±ç”¨ä¸Šäº†æˆ‘ç”¨è¯¥åŒ…é…è‰²æœ€å¤š\nCRANåº“:CRAN: Package ggsci (r-project.org)\næ•™ç¨‹:Scientific Journal and Sci-Fi Themed Color Palettes for ggplot2 (r-project.org)\n\nlibrary(ggsci)\n\n\n\né…è‰²æ–¹æ¡ˆ\n\n\n\n\n\n\n\n\n\nName\nScales\nPalette Types\nPalette Generator\n\n\n\n\nNPG\nscale_color_npg() scale_fill_npg()\n\"nrc\"\npal_npg()\n\n\nAAAS\nscale_color_aaas() scale_fill_aaas()\n\"default\"\npal_aaas()\n\n\nNEJM\nscale_color_nejm() scale_fill_nejm()\n\"default\"\npal_nejm()\n\n\nLancet\nscale_color_lancet() scale_fill_lancet()\n\"lanonc\"\npal_lancet()\n\n\nJAMA\nscale_color_jama() scale_fill_jama()\n\"default\"\npal_jama()\n\n\nBMJ\nscale_color_bmj() scale_fill_bmj()\n\"default\"\npal_bmj()\n\n\nJCO\nscale_color_jco() scale_fill_jco()\n\"default\"\npal_jco()\n\n\nUCSCGB\nscale_color_ucscgb() scale_fill_ucscgb()\n\"default\"\npal_ucscgb()\n\n\nD3\nscale_color_d3()``scale_fill_d3()\n\"category10\" \"category20\" \"category20b\" \"category20c\"\npal_d3()\n\n\nObservable\nscale_color_observable() scale_fill_observable()\n\"observable10\"\npal_observable()\n\n\nLocusZoom\nscale_color_locuszoom() scale_fill_locuszoom()\n\"default\"\npal_locuszoom()\n\n\nIGV\nscale_color_igv() scale_fill_igv()\n\"default\"``\"alternating\"\npal_igv()\n\n\nCOSMIC\nscale_color_cosmic() scale_fill_cosmic()\n\"hallmarks_light\"``\"hallmarks_dark\"``\"signature_substitutions\"\npal_cosmic()\n\n\nUChicago\nscale_color_uchicago() scale_fill_uchicago()\n\"default\"``\"light\"``\"dark\"\npal_uchicago()\n\n\nStar Trek\nscale_color_startrek() scale_fill_startrek()\n\"uniform\"\npal_startrek()\n\n\nTron Legacy\nscale_color_tron() scale_fill_tron()\n\"legacy\"\npal_tron()\n\n\nFuturama\nscale_color_futurama() scale_fill_futurama()\n\"planetexpress\"\npal_futurama()\n\n\nRick and Morty\nscale_color_rickandmorty() scale_fill_rickandmorty()\n\"schwifty\"\npal_rickandmorty()\n\n\nThe Simpsons\nscale_color_simpsons() scale_fill_simpsons()\n\"springfield\"\npal_simpsons()\n\n\nFlat UI\nscale_color_flatui() scale_fill_flatui()\n\"default\" \"flattastic\" \"aussie\"\npal_flatui()\n\n\nFrontiers\nscale_color_frontiers() scale_fill_frontiers()\n\"default\"\npal_frontiers()\n\n\nGSEA\nscale_color_gsea() scale_fill_gsea()\n\"default\"\npal_gsea()\n\n\nBootstrap 5\nscale_color_bs5() scale_fill_bs5()\n\"blue\" \"indigo\"``\"purple\" \"pink\"``\"red\" \"orange\"``\"yellow\" \"green\"``\"teal\" \"cyan\"``\"gray\"\npal_bs5()\n\n\nMaterial Design\nscale_color_material() scale_fill_material()\n\"red\" \"pink\"``\"purple\" \"deep-purple\"``\"indigo\" \"blue\"``\"light-blue\" \"cyan\"``\"teal\" \"green\"``\"light-green\" \"lime\"``\"yellow\" \"amber\"``\"orange\" \"deep-orange\"``\"brown\" \"grey\"``\"blue-grey\"\npal_material()\n\n\nTailwind CSS\nscale_color_tw3() scale_fill_tw3()\n\"slate\" \"gray\"``\"zinc\" \"neutral\"``\"stone\" \"red\"``\"orange\" \"amber\"``\"yellow\" \"lime\"``\"green\" \"emerald\"``\"teal\" \"cyan\"``\"sky\" \"blue\"``\"indigo\" \"violet\"``\"purple\" \"fuchsia\"``\"pink\" \"rose\"\npal_tw3()\n\n\n\n\n\n\næŸ³å¶åˆ€é…è‰²\n\nggplot(iris, aes(x = Species, y = Sepal.Length, fill = Species)) +\n  geom_bar(stat = \"identity\") +\n  labs(title = \"Sepal Length by Species\", x = \"Species\", y = \"Sepal Length\") +\n  theme_minimal()+\n  scale_fill_lancet()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "é…è‰²æ–¹æ¡ˆ"
    ]
  },
  {
    "objectID": "2011-viscolor.html#å…¶å®ƒå®ç”¨råŒ…",
    "href": "2011-viscolor.html#å…¶å®ƒå®ç”¨råŒ…",
    "title": "Rè¯­è¨€é…è‰²æ•™ç¨‹",
    "section": "å…¶å®ƒå®ç”¨råŒ…",
    "text": "å…¶å®ƒå®ç”¨råŒ…\n\nviridis: Colorblind-Friendly Color Maps for R\n\nä»‹ç»\nå®˜æ–¹ä»“åº“:CRAN: Package viridis (r-project.org)\næ•™ç¨‹:Introduction to the viridis color maps (r-project.org)\nå¤šç”¨äºè¿ç»­æ¸å˜è‰²\n\n\nä½¿ç”¨æ•ˆæœ\nè‰²ç›˜\n\nä½¿ç”¨æ–¹æ¡ˆå‚è€ƒ\n\n\n\n\nä½¿ç”¨MetBreweråŒ…è®¾ç½®é¢œè‰²\n\nråŒ…ä»‹ç»\nå®˜æ–¹CRANåº“:CRAN: Package MetBrewer (r-project.org)\né…è‰²æ–¹æ¡ˆå‚è€ƒçº½çº¦å¤§éƒ½ä¼šè‰ºæœ¯åšç‰©é¦†,è‰ºæœ¯æ„Ÿçˆ†è¡¨ä¸€èµ·æ¥çœ‹çœ‹\n\nlibrary(MetBrewer)\n\n\n\næŸ¥çœ‹é…è‰²ç›˜ï¼Œé€‰æ‹©3é¢œè‰²ï¼ŒåŒºåˆ†è‰²\n\nggplot(iris, aes(x = Species, y = Sepal.Length, fill = Species)) +\n  geom_bar(stat = \"identity\") +\n  labs(title = \"Sepal Length by Species\", x = \"Species\", y = \"Sepal Length\") +\n  theme_minimal()+\n  scale_fill_manual(values = met.brewer(\"Austria\"))\n\n\n\n\n\n\n\n\n\nggplot(iris, aes(x = Species, y = Sepal.Length, fill = Species)) +\n  geom_bar(stat = \"identity\") +\n  labs(title = \"Sepal Length by Species\", x = \"Species\", y = \"Sepal Length\") +\n  theme_minimal()+\n  scale_fill_manual(values = met.brewer(\"Degas\"))\n\n\n\n\n\n\n\n\næœ€åçœ‹çœ‹å¥½çœ‹",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "é…è‰²æ–¹æ¡ˆ"
    ]
  },
  {
    "objectID": "2013-legend.html",
    "href": "2013-legend.html",
    "title": "Rè¯­è¨€å›¾ä¾‹ä¿®æ”¹è‡ªå®šä¹‰æ•™ç¨‹",
    "section": "",
    "text": "ggplot2ä¸­çš„å›¾ä¾‹æ ·å¼ä¿®æ”¹ï¼ˆå›¾ä¾‹é—´è·ï¼Œä½ç½®ä¿®æ”¹ç­‰ï¼‰ä¸€ç›´æ˜¯å¤§éƒ¨åˆ†ç”¨æˆ·çš„å¿ƒå¤´ç—›ï¼Œå› ä¸ºå®ƒçš„ä¿®æ”¹æ–¹æ³•å®åœ¨å¤ªå¤šäº†ï¼Œè€Œä¸”å¾ˆéš¾è®°ä½ã€‚å¤šç§å‚æ•°æ–¹æ³•çœ‹èµ·æ¥æ‚ä¹±æ— ç« ï¼Œä½†æ˜¯åœ¨24å¹´2æœˆæ›´æ–°çš„ggplot2 2.3.5ä¹‹åï¼Œggplot2çš„å›¾ä¾‹ä¿®æ”¹æ–¹æ³•ç»ˆäºæœ‰äº†ä¸€ä¸ªç»Ÿä¸€çš„æ ‡å‡†ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·å­¦ä¹ ä¸€ä¸‹å§\nåœ¨ggplot2æ›´æ–°åæœ‰ä¸”ä»…æœ‰ä¸€ç§æ–¹å¼ä¿®æ”¹å›¾ä¾‹æ ·å¼ï¼Œé‚£å°±æ˜¯ä½¿ç”¨theme()å‚æ•° ã€‚theme()å‡½æ•°æœ‰æ–°çš„å‚æ•°æ¥æ§åˆ¶å›¾ä¾‹çš„å¤–è§‚ï¼Œè¿™ä½¿å¾—å…¨å±€æ§åˆ¶å›¾ä¾‹çš„å¤–è§‚å˜å¾—æ›´å®¹æ˜“ã€‚ä¾‹å¦‚ï¼š theme(legend.frame)æ›¿æ¢ guide_colourbar(frame.colour, frame.linewidth, frame.linetype) å’Œ theme(legend.axis.line)æ›¿æ¢ guide_bins(axis, axis.colour, axis.linewidth, axis.arrow) ã€‚ï¼ˆå¦‚æœæœ‰å…¶å®ƒæ–¹æ³•å°±æ˜¯è¿˜æ²¡å¼ƒç½®ï¼Œå»ºè®®ä¸è¦ç”¨äº†ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "å›¾ä¾‹è‡ªå®šä¹‰"
    ]
  },
  {
    "objectID": "2013-legend.html#å›¾ä¾‹æ ·å¼ä¿®æ”¹ä»‹ç»",
    "href": "2013-legend.html#å›¾ä¾‹æ ·å¼ä¿®æ”¹ä»‹ç»",
    "title": "Rè¯­è¨€å›¾ä¾‹ä¿®æ”¹è‡ªå®šä¹‰æ•™ç¨‹",
    "section": "",
    "text": "ggplot2ä¸­çš„å›¾ä¾‹æ ·å¼ä¿®æ”¹ï¼ˆå›¾ä¾‹é—´è·ï¼Œä½ç½®ä¿®æ”¹ç­‰ï¼‰ä¸€ç›´æ˜¯å¤§éƒ¨åˆ†ç”¨æˆ·çš„å¿ƒå¤´ç—›ï¼Œå› ä¸ºå®ƒçš„ä¿®æ”¹æ–¹æ³•å®åœ¨å¤ªå¤šäº†ï¼Œè€Œä¸”å¾ˆéš¾è®°ä½ã€‚å¤šç§å‚æ•°æ–¹æ³•çœ‹èµ·æ¥æ‚ä¹±æ— ç« ï¼Œä½†æ˜¯åœ¨24å¹´2æœˆæ›´æ–°çš„ggplot2 2.3.5ä¹‹åï¼Œggplot2çš„å›¾ä¾‹ä¿®æ”¹æ–¹æ³•ç»ˆäºæœ‰äº†ä¸€ä¸ªç»Ÿä¸€çš„æ ‡å‡†ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·å­¦ä¹ ä¸€ä¸‹å§\nåœ¨ggplot2æ›´æ–°åæœ‰ä¸”ä»…æœ‰ä¸€ç§æ–¹å¼ä¿®æ”¹å›¾ä¾‹æ ·å¼ï¼Œé‚£å°±æ˜¯ä½¿ç”¨theme()å‚æ•° ã€‚theme()å‡½æ•°æœ‰æ–°çš„å‚æ•°æ¥æ§åˆ¶å›¾ä¾‹çš„å¤–è§‚ï¼Œè¿™ä½¿å¾—å…¨å±€æ§åˆ¶å›¾ä¾‹çš„å¤–è§‚å˜å¾—æ›´å®¹æ˜“ã€‚ä¾‹å¦‚ï¼š theme(legend.frame)æ›¿æ¢ guide_colourbar(frame.colour, frame.linewidth, frame.linetype) å’Œ theme(legend.axis.line)æ›¿æ¢ guide_bins(axis, axis.colour, axis.linewidth, axis.arrow) ã€‚ï¼ˆå¦‚æœæœ‰å…¶å®ƒæ–¹æ³•å°±æ˜¯è¿˜æ²¡å¼ƒç½®ï¼Œå»ºè®®ä¸è¦ç”¨äº†ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "å›¾ä¾‹è‡ªå®šä¹‰"
    ]
  },
  {
    "objectID": "2013-legend.html#æœ¬æœŸä¸»è¦å†…å®¹æ¥æº",
    "href": "2013-legend.html#æœ¬æœŸä¸»è¦å†…å®¹æ¥æº",
    "title": "Rè¯­è¨€å›¾ä¾‹ä¿®æ”¹è‡ªå®šä¹‰æ•™ç¨‹",
    "section": "æœ¬æœŸä¸»è¦å†…å®¹æ¥æº",
    "text": "æœ¬æœŸä¸»è¦å†…å®¹æ¥æº\næ›´æ–°è¯´æ˜\nguide_legendæ•™ç¨‹",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "å›¾ä¾‹è‡ªå®šä¹‰"
    ]
  },
  {
    "objectID": "2013-legend.html#åŠ è½½åŒ…",
    "href": "2013-legend.html#åŠ è½½åŒ…",
    "title": "Rè¯­è¨€å›¾ä¾‹ä¿®æ”¹è‡ªå®šä¹‰æ•™ç¨‹",
    "section": "åŠ è½½åŒ…",
    "text": "åŠ è½½åŒ…\n\nlibrary(ggplot2)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "å›¾ä¾‹è‡ªå®šä¹‰"
    ]
  },
  {
    "objectID": "2013-legend.html#å›¾ä¾‹è¡Œä¸º",
    "href": "2013-legend.html#å›¾ä¾‹è¡Œä¸º",
    "title": "Rè¯­è¨€å›¾ä¾‹ä¿®æ”¹è‡ªå®šä¹‰æ•™ç¨‹",
    "section": "å›¾ä¾‹è¡Œä¸º",
    "text": "å›¾ä¾‹è¡Œä¸º\n\nguide_legendç³»åˆ—\nggplot2 ä¸­çš„å›¾ä¾‹åŒ…å«åä¸ºguide_legend()ï¼Œè¿˜åŒ…æ‹¬guide_colourbar() ã€ guide_coloursteps()å’Œguide_bins()åŸºæœ¬å‚æ•°éƒ½ä¸€è‡´ï¼Œè®¾ç½®å›¾ä¾‹çš„ç±»å‹ ã€‚\n\nguide_legend(\n  title = waiver(),\n  theme = NULL,\n  position = NULL,\n  direction = NULL,\n  override.aes = list(),\n  nrow = NULL,\n  ncol = NULL,\n  reverse = FALSE,\n  order = 0,\n  ...\n)\n\n\n\næ›´æ–°ååŠ äº†ä»€ä¹ˆ\nä¸‹æ–¹ä»£ç å±•ç¤ºäº†å¦‚ä½•è®¾ç½®æŸå•ç‹¬æ˜ å°„çš„å›¾ä¾‹æ ·å¼å’Œå…¨å±€æ ·å¼çš„åŒºåˆ«ã€‚å¦‚æœè¦å•ç‹¬è®¾ç½®æŸæ˜ å°„çš„å›¾ä¾‹æ ·å¼ï¼Œåªéœ€å°†å…¶æ·»åŠ åˆ°guides() ã€‚å¦‚æœè¦è®¾ç½®å…¨å±€æ ·å¼ï¼Œåªéœ€å°†å…¶æ·»åŠ åˆ°theme() ã€‚æœ€ç»ˆçš„å‚æ•°å½¢å¼å°±æ˜¯theme(legend.XXX = element_XXX()) ã€‚\n\nggplot(mpg, aes(displ, hwy, shape = factor(cyl), colour = cty)) +\n  geom_point() +\n  # è®¾ç½®å•ç‹¬æ˜ å°„çš„å›¾ä¾‹\n  guides(\n    shape  = guide_legend(theme = theme(legend.text = element_text(colour = \"red\"))),\n    colour = guide_colorbar(theme = theme(legend.frame = element_rect(colour = \"red\")))\n  ) +\n  # è®¾ç½®å…¨å±€å›¾ä¾‹çš„æ ·å¼\n  theme(\n    legend.title.position = \"left\",\n    # Title justification is controlled by hjust/vjust in the element\n    legend.title = element_text(angle = 90, hjust = 0.5)\n  )\n\n\n\n\n\n\n\n\n\n\nå›¾ä¾‹æ˜¯å¦æ˜¾ç¤º\nå”¯ä¸€ä¸æ”¾åœ¨themeé‡Œçš„å‚æ•°å°±æ˜¯legend.show ã€‚æ‚¨å¯ä»¥åœ¨å›¾å±‚ä¸­è®¾ç½®show.legend = TRUEé€‰é¡¹ã€‚å’Œä»¥å‰ä¸€æ ·ï¼Œ show.legendå‚æ•°ä»ç„¶å¯ä»¥ä»¥ç‰¹å®šäºç¾å­¦çš„æ–¹å¼è®¾ç½®ã€‚å°†å…¶è®¾ç½®ä¸ºTRUEè¡¨ç¤ºâ€œå§‹ç»ˆæ˜¾ç¤ºâ€ï¼Œ FALSEè¡¨ç¤ºâ€œä»ä¸æ˜¾ç¤ºâ€ï¼Œ NAè¡¨ç¤ºâ€œå¦‚æœæ‰¾åˆ°åˆ™æ˜¾ç¤ºâ€ã€‚æŸ¥çœ‹ä¸‹æ–¹ç¤ºä¾‹ï¼Œåœ¨è®¾ç½®äº†plotçš„showlegendé‡Œåœ¨å›¾ä¾‹ä¸­å¼ºåˆ¶æ˜¾ç¤ºäº†ç‚¹å’Œçº¿ã€‚\n::: {.cell}\np &lt;- ggplot(mpg, aes(displ, hwy)) +\n scale_alpha_manual(values = c(0.5, 1))\n\np +\n geom_point(aes(colour = \"points\", alpha = \"points\")) +\n geom_line(\n   aes(colour = \"line\", alpha = \"line\"),\n   stat = \"smooth\", formula = y ~ x, method = \"lm\"\n )\n::: {.cell-output-display}  :::\np +\n geom_point(\n   aes(colour = \"points\", alpha = \"points\"),\n   show.legend = TRUE # always show\n ) +\n geom_line(\n   aes(colour = \"line\", alpha = \"line\"),\n   stat = \"smooth\", formula = y ~ x, method = \"lm\",\n   show.legend = c(colour = NA, alpha = TRUE) # always show in alpha\n )\n::: {.cell-output-display}  ::: :::\n\n\nå›¾ä¾‹ä½ç½®\nå›¾ä¾‹ä½ç½®ä¸å†ä»…é™äºå›¾çš„ä¸€ä¾§ã€‚é€šè¿‡è®¾ç½®guidesçš„positionå‚æ•°ï¼Œä½ å¯ä»¥å®šåˆ¶å“ªäº›å‚è€ƒçº¿å‡ºç°åœ¨ç»˜å›¾ä¸­çš„ä½ç½®ã€‚æ²¡æœ‰è®¾ç½®ä½ç½®çš„å‚è€ƒçº¿ï¼ˆä¾‹å¦‚ä¸‹é¢çš„â€œdrvâ€å½¢çŠ¶å›¾ä¾‹ï¼‰éµå¾ªå…¨å±€ä¸»é¢˜çš„legend.positionè®¾ç½®ã€‚\n\np &lt;- ggplot(mpg, \n    aes(displ, hwy, shape = drv, colour = cty, size = year)) +\n  geom_point(aes(alpha = cyl))+\n  theme(legend.position = \"left\") +\n  guides(\n    colour = guide_colourbar(position = \"right\"),\n    size   = guide_legend(position = \"top\"),\n    alpha  = guide_legend(position = \"inside\")\n  ) \np\n\n\n\n\n\n\n\n\n\nå›¾ä¾‹çš„å¯¹é½\nå›¾ä¾‹çš„å¯¹é½å¯ä»¥é€šè¿‡ä½¿ç”¨themeçš„legend.justification.{position}å‚æ•°æ¥æ§åˆ¶ã€‚æ­¤å¤–ï¼Œé€šè¿‡è®¾ç½®legend.locationå‚æ•°ï¼Œå¯ä»¥å°†é¡¶éƒ¨å’Œåº•éƒ¨å‚è€ƒçº¿ä¸ç»˜å›¾è€Œä¸æ˜¯é¢æ¿å¯¹é½ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“plot.title.position = \"plot\"æ—¶ï¼Œå·¦ä¾§å›¾ä¾‹å·²ç»å¯¹é½ã€‚å› æ­¤ï¼Œå¯¹äºlegend.locationè®¾ç½®ï¼Œé¡¶éƒ¨å’Œåº•éƒ¨å‚è€ƒçº¿ä¼˜å…ˆã€‚\n\np + \n  labs(title = \"Plot-aligned title\") +\n  theme(\n    legend.margin = margin(0, 0, 0, 0), # turned off for alignment\n    legend.justification.top = \"left\",\n    legend.justification.left = \"top\",\n    legend.justification.bottom = \"right\",\n    legend.justification.inside = c(1, 1),\n    legend.location = \"plot\",\n    plot.title.position = \"plot\"\n  )\n\n\n\n\n\n\n\n\n\n\n\nå›¾ä¾‹çš„é—´è·\næˆ‘ä»¬å…ˆè§‚çœ‹ä¸€ä¸‹ä¸‹æ–¹çš„å›¾ï¼Œè¡¨ç¤ºå›¾ä¾‹çš„ç»„æˆå’Œé—´è·çš„å«ä¹‰\n\n\n\nå›¾ä¾‹å›¾ç¤º\n\n\nå½“æ ‡é¢˜å’Œé”®æ²¡æœ‰æ˜ç¡®çš„è¾¹è·æ—¶ï¼Œä¼šæ ¹æ®æ–‡æœ¬æˆ–æ ‡é¢˜ä½ç½®è‡ªåŠ¨æ·»åŠ é€‚å½“çš„è¾¹è·ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨è¦†ç›–è¾¹è·ï¼Œå®ƒä»¬å°†æŒ‰ä½ çš„è®¾ç½®æ¥èµ°ã€‚\n\nggplot(mpg, aes(displ, hwy, colour = class)) +\n  geom_point() +\n  guides(colour = guide_legend(ncol = 2)) +\n  theme(\n    legend.key.spacing.x = unit(10, \"pt\"),\n    legend.key.spacing.y = unit(20, \"pt\"),\n    legend.text = element_text(margin = margin(l = 0)),\n    legend.title = element_text(margin = margin(b = 20))\n  )\n\n\n\n\n\n\n\n\n\n\næ·»åŠ ç‰¹æ®Šå›¾ä¾‹\nguide_custom() ã€‚å®ƒå¯ç”¨äºå°†ä»»ä½•å›¾å½¢å¯¹è±¡ï¼ˆgrobï¼‰æ·»åŠ åˆ°ç»˜å›¾ä¸­ï¼Œä¾‹å¦‚annotation_custom() ã€‚ä½†æœ‰ä¸€äº›åŒºåˆ«ï¼šå®ƒçš„ä½ç½®å°±åƒå›¾ä¾‹ä¸€æ ·ï¼Œå¹¶æ·»åŠ äº†æ ‡é¢˜å’Œé¡µè¾¹è·ã€‚ä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œæœ¬å›¾ä¾‹æ˜¯â€œç‰¹æ®Šçš„â€ï¼Œå› ä¸ºå®ƒæ˜¯å”¯ä¸€ä¸ç›´æ¥åæ˜ æ¯”ä¾‹çš„æŒ‡å—ã€‚ç¼ºç‚¹æ˜¯å®ƒæ— æ³•ä»å›¾ä¸­è¯»å–å±æ€§ï¼Œä½†ä¼˜ç‚¹æ˜¯å®ƒéå¸¸çµæ´»ã€‚\n\nx &lt;- c(0.5, 1, 1.5, 1.2, 1.5, 1, 0.5, 0.8, 1, 1.15, 2, 1.15, 1, 0.85, 0, 0.85)\ny &lt;- c(1.5, 1.2, 1.5, 1, 0.5, 0.8, 0.5, 1, 2, 1.15, 1, 0.85, 0, 0.85, 1, 1.15)\n\ncompass_rose &lt;- grid::polygonGrob(\n  x = unit(x, \"cm\"), y = unit(y, \"cm\"), id.lengths = c(8, 8),\n  gp = grid::gpar(fill = c(\"grey50\", \"grey25\"), col = NA)\n)\n\nnc &lt;- sf::st_read(system.file(\"shape/nc.shp\", package = \"sf\"), quiet = TRUE)\nggplot(nc) +\n  geom_sf(aes(fill = AREA)) +\n  guides(custom = guide_custom(compass_rose, title = \"compass\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "å›¾ä¾‹è‡ªå®šä¹‰"
    ]
  },
  {
    "objectID": "2015-map.html",
    "href": "2015-map.html",
    "title": "Rè¯­è¨€é‡‡æ ·åœ°å›¾ç»˜åˆ¶è¯¦ç»†æ•™ç¨‹",
    "section": "",
    "text": "æœ¬æœŸä¸»è¦ä»‹ç»å¦‚ä½•ç»˜åˆ¶é‡‡æ ·åœ°å›¾å’Œå›½å†…åŒºåŸŸåœ°å›¾ï¼Œå¹¶è‡ªå®šä¹‰ç›¸å…³å†…å®¹",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "åœ°å›¾ç»‘åˆ¶"
    ]
  },
  {
    "objectID": "2015-map.html#råŒ…ä»‹ç»",
    "href": "2015-map.html#råŒ…ä»‹ç»",
    "title": "Rè¯­è¨€é‡‡æ ·åœ°å›¾ç»˜åˆ¶è¯¦ç»†æ•™ç¨‹",
    "section": "RåŒ…ä»‹ç»",
    "text": "RåŒ…ä»‹ç»\nggspatialæ•™ç¨‹",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "åœ°å›¾ç»‘åˆ¶"
    ]
  },
  {
    "objectID": "2015-map.html#råŒ…å®‰è£…",
    "href": "2015-map.html#råŒ…å®‰è£…",
    "title": "Rè¯­è¨€é‡‡æ ·åœ°å›¾ç»˜åˆ¶è¯¦ç»†æ•™ç¨‹",
    "section": "RåŒ…å®‰è£…",
    "text": "RåŒ…å®‰è£…\n\ninstall.packages(\"ggspatial\")\ninstall.packages(\"sf\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "åœ°å›¾ç»‘åˆ¶"
    ]
  },
  {
    "objectID": "2015-map.html#åŸºç¡€ç»˜å›¾ä»£ç ",
    "href": "2015-map.html#åŸºç¡€ç»˜å›¾ä»£ç ",
    "title": "Rè¯­è¨€é‡‡æ ·åœ°å›¾ç»˜åˆ¶è¯¦ç»†æ•™ç¨‹",
    "section": "åŸºç¡€ç»˜å›¾ä»£ç ",
    "text": "åŸºç¡€ç»˜å›¾ä»£ç \n\nå¯¼å…¥åœ°å›¾jsonæ•°æ®\nè¿›å…¥ä»é˜¿é‡Œäº‘DataVå¯è§†åŒ–ç½‘ç«™ï¼ˆå¯é€‰æ‹©å…¶ä»–å¹³å°ï¼‰ä¸‹è½½æ ¼å¼ä¸º.jsonçš„åœ°å›¾æ•°æ®ï¼š\n\n\n\næ•°æ®å¯¼å…¥\n\nlibrary(ggspatial)\nlibrary(sf)\n\nLinking to GEOS 3.13.1, GDAL 3.11.4, PROJ 9.7.0; sf_use_s2() is TRUE\n\nlibrary(ggplot2)\n\n# å¯¼å…¥åœ°å›¾jsonæ•°æ®\nmap &lt;- st_read(\"01-attch\\\\10\\\\å¹¿å·å¸‚.json\")\n\nReading layer `å¹¿å·å¸‚' from data source \n  `E:\\99 Project\\05 Rè¯­è¨€\\doc\\01-attch\\10\\å¹¿å·å¸‚.json' using driver `GeoJSON'\nSimple feature collection with 11 features and 9 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 112.9585 ymin: 22.51436 xmax: 114.06 ymax: 23.93292\nGeodetic CRS:  WGS 84\n\n\n\n\nå¼€å§‹ç»˜åˆ¶\n\næ·»åŠ çœä»½åŒºè¾¹æ¡†\n\nggplot() +\n  labs(title = \"Guangzhou\", x = NULL, y = NULL) +\n  geom_sf(data = map, fill = c(\"#f0eedf\"), size = 0.8, color = \"black\")\n\n\n\n\n\n\n\n\n\n\næ·»åŠ æŒ‡å—é’ˆannotation\n\np &lt;- ggplot() +\n  labs(title = \"Guangzhou\", x = NULL, y = NULL) +\n  geom_sf(data = map, fill = c(\"#f0eedf\"), size = 0.8, color = \"black\") + # è®¾ç½®æ¯”ä¾‹å°º\n  annotation_north_arrow(\n    location = \"tl\",\n    style = north_arrow_nautical(\n      fill = c(\"black\", \"white\"),\n      line_col = \"black\"\n    )\n  )\np",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "åœ°å›¾ç»‘åˆ¶"
    ]
  },
  {
    "objectID": "2015-map.html#æˆ‘ä»¬æ¥è‡ªå®šä¹‰ç»˜å›¾å†…å®¹",
    "href": "2015-map.html#æˆ‘ä»¬æ¥è‡ªå®šä¹‰ç»˜å›¾å†…å®¹",
    "title": "Rè¯­è¨€é‡‡æ ·åœ°å›¾ç»˜åˆ¶è¯¦ç»†æ•™ç¨‹",
    "section": "æˆ‘ä»¬æ¥è‡ªå®šä¹‰ç»˜å›¾å†…å®¹",
    "text": "æˆ‘ä»¬æ¥è‡ªå®šä¹‰ç»˜å›¾å†…å®¹\n\nè®¾ç½®ç™½äº‘åŒºå¤©æ²³åŒºçªå‡ºæ˜¾ç¤º\næˆ‘ä»¬æ–°åŠ ä¸€ä¸ªå›¾å±‚å°±å¯ä»¥ï¼Œç„¶åfillå¡«å……äº®è‰²\n\np + geom_sf(\n  data = map |&gt; dplyr::filter(name %in% c(\"å¤©æ²³åŒº\", \"ç™½äº‘åŒº\", \"ç•ªç¦ºåŒº\")),\n  fill = c(\"#c98c50\"),\n  size = 0.8,\n  color = \"black\"\n)\n\n\n\n\n\n\n\n\n\n\nè®¾ç½®text\næ¥ä¸‹æ¥æˆ‘ä»¬è¦åœ¨å›¾é‡Œæ ‡æ³¨éƒ¨åˆ†åŒºå\n\nlibrary(showtext)\nshowtext::showtext_auto()\n\n\np + geom_sf(\n  data = map |&gt; dplyr::filter(name %in% c(\"å¤©æ²³åŒº\", \"ç™½äº‘åŒº\", \"ç•ªç¦ºåŒº\")),\n  fill = c(\"#c98c50\"),\n  size = 0.8,\n  color = \"black\"\n) +\n  geom_sf_text(\n    data = map |&gt; dplyr::filter(name %in% c(\"å¤©æ²³åŒº\", \"ç™½äº‘åŒº\", \"ç•ªç¦ºåŒº\")),\n    aes(label = name),\n    size = 3,\n    color = \"black\",\n    fontface = \"bold\"\n  )\n\n\n\n\n\n\n\n\n\n\nè®¾ç½®ä¸€ä¸ªåˆé€‚çš„ä¸»é¢˜\n\np2 &lt;-\n  p + geom_sf(\n    data = map |&gt; dplyr::filter(name %in% c(\"å¤©æ²³åŒº\", \"ç™½äº‘åŒº\", \"ç•ªç¦ºåŒº\")),\n    fill = c(\"#c98c50\"),\n    size = 0.8,\n    color = \"black\"\n  ) +\n  geom_sf_text(\n    data = map |&gt; dplyr::filter(name %in% c(\"å¤©æ²³åŒº\", \"ç™½äº‘åŒº\", \"ç•ªç¦ºåŒº\")),\n    aes(label = name),\n    size = 3,\n    color = \"black\",\n    fontface = \"bold\"\n  ) +\n  theme_minimal()\n\np2\n\n\n\n\n\n\n\n\n\n\nè®¾ç½®æ ¹æ®æ•°å€¼å˜é‡å¯¹å„åŒºçš„fillè¿›è¡Œæ˜ å°„\n\n# å…ˆç”Ÿæˆä¸€ä¸ªéšæœºå˜é‡\nmap_neat_1 &lt;-\n  map |&gt;\n  dplyr::mutate(\n    value = sample(1:100, nrow(map), replace = TRUE)\n  )\n\n\nggplot() +\n  labs(title = \"map_neat_1\", x = NULL, y = NULL) +\n  geom_sf(data = map_neat_1, aes(fill = value), size = 0.8, color = \"black\") + # è®¾ç½®æ¯”ä¾‹å°º\n  annotation_north_arrow(\n    location = \"tl\",\n    style = north_arrow_nautical(\n      fill = c(\"black\", \"white\"),\n      line_col = \"black\"\n    )\n  ) +\n  geom_sf_text(\n    data = map,\n    aes(label = name),\n    size = 3,\n    color = \"black\",\n    fontface = \"bold\"\n  ) +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\n\næ ¹æ®åˆ†ç±»å˜é‡å¯¹åŒºè¿›è¡Œfillæ˜ å°„\n\nlibrary(MetBrewer)\n\nmap_neat_2 &lt;-\n  map |&gt;\n  dplyr::mutate(\n    group = sample(c(\"A\", \"B\", \"C\"), nrow(map), replace = TRUE)\n  )\n\nggplot() +\n  labs(title = \"map_neat_2\", x = NULL, y = NULL) +\n  geom_sf(data = map_neat_2, aes(fill = group), size = 0.8, color = \"black\") + # è®¾ç½®æ¯”ä¾‹å°º\n  annotation_north_arrow(\n    location = \"tl\",\n    style = north_arrow_nautical(\n      fill = c(\"black\", \"white\"),\n      line_col = \"black\"\n    )\n  ) +\n  geom_sf_text(\n    data = map,\n    aes(label = name),\n    size = 3,\n    color = \"black\",\n    fontface = \"bold\"\n  ) +\n  theme_minimal() +\n  scale_fill_met_d(\"Cassatt1\")\n\n\n\n\n\n\n\n\n\n\næ·»åŠ é‡‡æ ·ç‚¹\n\ndata_sample &lt;-\n  tibble::tibble(\n    lon = c(113.292333, 113.412333, 113.532333),\n    lat = c(23.191944, 23.331944, 22.931944),\n    point = c(\"A\", \"B\", \"C\"),\n  )\n\np2 +\n  geom_point(\n    data = data_sample,\n    aes(x = lon, y = lat),\n    size = 2,\n    color = \"#1647a3\"\n  ) +\n  geom_text(\n    data = data_sample,\n    aes(x = lon, y = lat, label = point),\n    size = 4,\n    color = \"#000000\",\n    fontface = \"bold\",\n    nudge_y = 0.05\n  )+\n  labs(title = \"å¹¿å·å¸‚\")+\n  theme(plot.title = element_text(hjust = 0.5))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "åœ°å›¾ç»‘åˆ¶"
    ]
  },
  {
    "objectID": "2017-ggtext.html",
    "href": "2017-ggtext.html",
    "title": "ggtextï¼šä¸­è‹±æ–‡æ··åˆå­—ä½“çš„å®Œç¾è§£å†³æ–¹æ¡ˆ",
    "section": "",
    "text": "ggtext åŒ…æ‰©å±•äº† ggplot2 çš„æ–‡æœ¬æ¸²æŸ“èƒ½åŠ›ï¼Œæ”¯æŒ Markdown å’Œ HTML è¯­æ³•ï¼Œæ˜¯è§£å†³ä¸­è‹±æ–‡å­—ä½“æ··åˆæ˜¾ç¤ºçš„ç»ˆææ–¹æ¡ˆã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "ggtext - ä¸­è‹±æ–‡å­—ä½“æ··åˆ"
    ]
  },
  {
    "objectID": "2017-ggtext.html#råŒ…ä»‹ç»",
    "href": "2017-ggtext.html#råŒ…ä»‹ç»",
    "title": "ggtextï¼šä¸­è‹±æ–‡æ··åˆå­—ä½“çš„å®Œç¾è§£å†³æ–¹æ¡ˆ",
    "section": "RåŒ…ä»‹ç»",
    "text": "RåŒ…ä»‹ç»\n\nä¸ºä»€ä¹ˆéœ€è¦ ggtextï¼Ÿ\nåœ¨ç§‘ç ”ç»‘å›¾ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°ä»¥ä¸‹é—®é¢˜ï¼š\n\nä¸­è‹±æ–‡æ··åˆï¼šæ ‡é¢˜éœ€è¦åŒæ—¶æ˜¾ç¤ºä¸­æ–‡å’Œè‹±æ–‡ï¼Œä½†å­—ä½“ä¸ç»Ÿä¸€\nå¯Œæ–‡æœ¬æ ¼å¼ï¼šéœ€è¦åœ¨æ ‡ç­¾ä¸­ä½¿ç”¨ç²—ä½“ã€æ–œä½“ã€é¢œè‰²ç­‰æ ¼å¼\nä¸Šä¸‹æ ‡ï¼šåŒ–å­¦å¼ Hâ‚‚Oã€æ•°å­¦å…¬å¼ RÂ² ç­‰éœ€è¦ç‰¹æ®Šæ ¼å¼\nå›¾ä¾‹ç¾åŒ–ï¼šå¸Œæœ›å›¾ä¾‹æ–‡å­—å¸¦é¢œè‰²ã€æ ¼å¼\n\nggtext å®Œç¾è§£å†³äº†è¿™äº›é—®é¢˜ï¼\n\n\nå®‰è£…ä¸åŠ è½½\n\ninstall.packages(\"ggtext\")\n\n\nlibrary(ggplot2)\nlibrary(ggtext)\nlibrary(dplyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "ggtext - ä¸­è‹±æ–‡å­—ä½“æ··åˆ"
    ]
  },
  {
    "objectID": "2017-ggtext.html#åŸºç¡€ç”¨æ³•markdown-æ–‡æœ¬",
    "href": "2017-ggtext.html#åŸºç¡€ç”¨æ³•markdown-æ–‡æœ¬",
    "title": "ggtextï¼šä¸­è‹±æ–‡æ··åˆå­—ä½“çš„å®Œç¾è§£å†³æ–¹æ¡ˆ",
    "section": "åŸºç¡€ç”¨æ³•ï¼šMarkdown æ–‡æœ¬",
    "text": "åŸºç¡€ç”¨æ³•ï¼šMarkdown æ–‡æœ¬\n\nelement_markdown() åŸºç¡€\nggtext çš„æ ¸å¿ƒå‡½æ•°æ˜¯ element_markdown()ï¼Œå®ƒæ›¿ä»£ element_text() æ¥æ¸²æŸ“å¯Œæ–‡æœ¬ã€‚\n\n# åˆ›å»ºç¤ºä¾‹æ•°æ®\ndata &lt;- data.frame(\n  category = c(\"Control\", \"Treatment A\", \"Treatment B\"),\n  value = c(25, 45, 35)\n)\n\n# ä½¿ç”¨ Markdown è¯­æ³•çš„æ ‡é¢˜\nggplot(data, aes(x = category, y = value, fill = category)) +\n  geom_col() +\n  labs(\n    title = \"**å®éªŒç»“æœ** (*Experimental Results*)\",\n    x = \"åˆ†ç»„\",\n    y = \"æ•°å€¼\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_markdown(size = 16, hjust = 0.5)\n  ) +\n  scale_fill_brewer(palette = \"Set2\")\n\n\n\n\n\n\n\n\n\n\næ”¯æŒçš„ Markdown è¯­æ³•\n\n\n\nè¯­æ³•\næ•ˆæœ\nç¤ºä¾‹\n\n\n\n\n**text**\nç²—ä½“\nç²—ä½“æ–‡å­—\n\n\n*text*\næ–œä½“\næ–œä½“æ–‡å­—\n\n\n&lt;sup&gt;text&lt;/sup&gt;\nä¸Šæ ‡\nR2\n\n\n&lt;sub&gt;text&lt;/sub&gt;\nä¸‹æ ‡\nH2O\n\n\n&lt;span style='color:red'&gt;\né¢œè‰²\nçº¢è‰²æ–‡å­—\n\n\n&lt;br&gt;\næ¢è¡Œ\nå¤šè¡Œæ–‡æœ¬\n\n\n\n\nggplot(data, aes(x = category, y = value, fill = category)) +\n  geom_col() +\n  labs(\n    title = \"H&lt;sub&gt;2&lt;/sub&gt;O å«é‡ä¸ CO&lt;sub&gt;2&lt;/sub&gt; æµ“åº¦\",\n    subtitle = \"ç›¸å…³ç³»æ•° R&lt;sup&gt;2&lt;/sup&gt; = 0.95\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_markdown(size = 14, hjust = 0.5),\n    plot.subtitle = element_markdown(size = 11, hjust = 0.5, color = \"gray50\")\n  ) +\n  scale_fill_brewer(palette = \"Pastel1\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "ggtext - ä¸­è‹±æ–‡å­—ä½“æ··åˆ"
    ]
  },
  {
    "objectID": "2017-ggtext.html#ä¸­è‹±æ–‡æ··åˆå­—ä½“è®¾ç½®",
    "href": "2017-ggtext.html#ä¸­è‹±æ–‡æ··åˆå­—ä½“è®¾ç½®",
    "title": "ggtextï¼šä¸­è‹±æ–‡æ··åˆå­—ä½“çš„å®Œç¾è§£å†³æ–¹æ¡ˆ",
    "section": "ä¸­è‹±æ–‡æ··åˆå­—ä½“è®¾ç½®",
    "text": "ä¸­è‹±æ–‡æ··åˆå­—ä½“è®¾ç½®\n\næ ¸å¿ƒåŸç†\nggtext ä½¿ç”¨ CSS è¯­æ³•æ¥æŒ‡å®šå­—ä½“ï¼Œé€šè¿‡ &lt;span style='font-family:...'&gt; å¯ä»¥ä¸ºä¸åŒæ–‡å­—æŒ‡å®šä¸åŒå­—ä½“ã€‚\n\n\nåŸºç¡€ç¤ºä¾‹ï¼šä¸­è‹±æ–‡åˆ†åˆ«è®¾ç½®å­—ä½“\n\n# åˆ›å»ºå¸¦ä¸­è‹±æ–‡æ ‡ç­¾çš„æ•°æ®\ndf &lt;- data.frame(\n  group = c(\"å¯¹ç…§ç»„\\nControl\", \"æ²»ç–—ç»„A\\nTreatment A\", \"æ²»ç–—ç»„B\\nTreatment B\"),\n  mean_value = c(23.5, 45.2, 38.7)\n)\n\nggplot(df, aes(x = group, y = mean_value, fill = group)) +\n  geom_col(width = 0.7) +\n  labs(\n    title = \"&lt;span style='font-family:SimHei'&gt;ä¸´åºŠè¯•éªŒç»“æœ&lt;/span&gt; &lt;span style='font-family:Arial'&gt;Clinical Trial Results&lt;/span&gt;\",\n    x = NULL,\n    y = \"&lt;span style='font-family:SimSun'&gt;æ•°å€¼&lt;/span&gt; (Value)\"\n  ) +\n  theme_bw(base_size = 12) +\n  theme(\n    plot.title = element_markdown(size = 16, hjust = 0.5),\n    axis.title.y = element_markdown(),\n    legend.position = \"none\"\n  ) +\n  scale_fill_brewer(palette = \"Blues\")\n\n\n\n\n\n\n\n\n\n\næ¨èçš„ä¸­è‹±æ–‡å­—ä½“æ­é…\n\n\n\nç”¨é€”\nä¸­æ–‡å­—ä½“\nè‹±æ–‡å­—ä½“\næ•ˆæœ\n\n\n\n\næ­£æ–‡\nSimSun (å®‹ä½“)\nTimes New Roman\nå­¦æœ¯è§„èŒƒ\n\n\næ ‡é¢˜\nSimHei (é»‘ä½“)\nArial\né†’ç›®æ¸…æ™°\n\n\nå¼ºè°ƒ\nMicrosoft YaHei (å¾®è½¯é›…é»‘)\nHelvetica\nç°ä»£ç®€æ´\n\n\nä»£ç \nSimSun\nConsolas\nç­‰å®½æ•´é½\n\n\n\n\n\nåˆ›å»ºä¾¿æ·å‡½æ•°\nä¸ºäº†ç®€åŒ–ä¸­è‹±æ–‡æ··åˆå­—ä½“çš„è®¾ç½®ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºè¾…åŠ©å‡½æ•°ï¼š\n\n# ä¸­è‹±æ–‡æ··åˆæ–‡æœ¬æ ¼å¼åŒ–å‡½æ•°\nformat_cn_en &lt;- function(cn_text, en_text, \n                         cn_font = \"SimHei\", \n                         en_font = \"Arial\",\n                         cn_color = \"black\",\n                         en_color = \"gray30\") {\n  glue::glue(\n    \"&lt;span style='font-family:{cn_font}; color:{cn_color}'&gt;{cn_text}&lt;/span&gt; \",\n    \"&lt;span style='font-family:{en_font}; color:{en_color}; font-style:italic'&gt;{en_text}&lt;/span&gt;\"\n  )\n}\n\n# ä½¿ç”¨ç¤ºä¾‹\ntitle_text &lt;- format_cn_en(\"ç”Ÿå­˜åˆ†æç»“æœ\", \"Survival Analysis\")\n\nggplot(mtcars, aes(x = factor(cyl), y = mpg, fill = factor(cyl))) +\n  geom_boxplot() +\n  labs(title = title_text) +\n  theme_bw() +\n  theme(\n    plot.title = element_markdown(size = 14, hjust = 0.5),\n    legend.position = \"none\"\n  ) +\n  scale_fill_brewer(palette = \"Set2\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "ggtext - ä¸­è‹±æ–‡å­—ä½“æ··åˆ"
    ]
  },
  {
    "objectID": "2017-ggtext.html#é«˜çº§åº”ç”¨å½©è‰²åæ ‡è½´æ ‡ç­¾",
    "href": "2017-ggtext.html#é«˜çº§åº”ç”¨å½©è‰²åæ ‡è½´æ ‡ç­¾",
    "title": "ggtextï¼šä¸­è‹±æ–‡æ··åˆå­—ä½“çš„å®Œç¾è§£å†³æ–¹æ¡ˆ",
    "section": "é«˜çº§åº”ç”¨ï¼šå½©è‰²åæ ‡è½´æ ‡ç­¾",
    "text": "é«˜çº§åº”ç”¨ï¼šå½©è‰²åæ ‡è½´æ ‡ç­¾\n\næŒ‰åˆ†ç»„ç€è‰²çš„ X è½´æ ‡ç­¾\n\n# åˆ›å»ºæ•°æ®ï¼Œæ ‡ç­¾åŒ…å«é¢œè‰²ä¿¡æ¯\niris_summary &lt;- iris |&gt;\n  group_by(Species) |&gt;\n  summarise(mean_length = mean(Sepal.Length), .groups = \"drop\") |&gt;\n  mutate(\n    # ä¸ºæ¯ä¸ªç‰©ç§åˆ›å»ºå¸¦é¢œè‰²çš„æ ‡ç­¾\n    colored_label = case_when(\n      Species == \"setosa\" ~ \"&lt;span style='color:#E41A1C'&gt;**Setosa** å±±é¸¢å°¾&lt;/span&gt;\",\n      Species == \"versicolor\" ~ \"&lt;span style='color:#377EB8'&gt;**Versicolor** å˜è‰²é¸¢å°¾&lt;/span&gt;\",\n      Species == \"virginica\" ~ \"&lt;span style='color:#4DAF4A'&gt;**Virginica** ç»´å‰å°¼äºšé¸¢å°¾&lt;/span&gt;\"\n    )\n  )\n\nggplot(iris_summary, aes(x = colored_label, y = mean_length, fill = Species)) +\n  geom_col(width = 0.6) +\n  labs(\n    title = \"é¸¢å°¾èŠ±è¼ç‰‡é•¿åº¦æ¯”è¾ƒ\",\n    x = NULL,\n    y = \"å¹³å‡è¼ç‰‡é•¿åº¦ (cm)\"\n  ) +\n  theme_bw(base_size = 12) +\n  theme(\n    plot.title = element_text(hjust = 0.5, face = \"bold\"),\n    axis.text.x = element_markdown(size = 11),\n    legend.position = \"none\"\n  ) +\n  scale_fill_manual(values = c(\"#E41A1C\", \"#377EB8\", \"#4DAF4A\"))\n\n\n\n\n\n\n\n\n\n\nå½©è‰²å›¾ä¾‹æ–‡å­—\n\n# ä½¿ç”¨ ggtext ç¾åŒ–å›¾ä¾‹\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width, color = Species)) +\n  geom_point(size = 2, alpha = 0.7) +\n  scale_color_manual(\n    values = c(\"setosa\" = \"#E41A1C\", \"versicolor\" = \"#377EB8\", \"virginica\" = \"#4DAF4A\"),\n    labels = c(\n      \"setosa\" = \"&lt;span style='color:#E41A1C'&gt;**Setosa** å±±é¸¢å°¾&lt;/span&gt;\",\n      \"versicolor\" = \"&lt;span style='color:#377EB8'&gt;**Versicolor** å˜è‰²é¸¢å°¾&lt;/span&gt;\",\n      \"virginica\" = \"&lt;span style='color:#4DAF4A'&gt;**Virginica** ç»´å‰å°¼äºšé¸¢å°¾&lt;/span&gt;\"\n    )\n  ) +\n  labs(\n    title = \"é¸¢å°¾èŠ±å½¢æ€ç‰¹å¾æ•£ç‚¹å›¾\",\n    x = \"è¼ç‰‡é•¿åº¦ Sepal Length (cm)\",\n    y = \"è¼ç‰‡å®½åº¦ Sepal Width (cm)\",\n    color = \"ç‰©ç§ Species\"\n  ) +\n  theme_bw() +\n  theme(\n    plot.title = element_text(hjust = 0.5, face = \"bold\"),\n    legend.text = element_markdown(size = 10)\n  )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "ggtext - ä¸­è‹±æ–‡å­—ä½“æ··åˆ"
    ]
  },
  {
    "objectID": "2017-ggtext.html#æ–‡æœ¬æ¡†geom_richtext-å’Œ-geom_textbox",
    "href": "2017-ggtext.html#æ–‡æœ¬æ¡†geom_richtext-å’Œ-geom_textbox",
    "title": "ggtextï¼šä¸­è‹±æ–‡æ··åˆå­—ä½“çš„å®Œç¾è§£å†³æ–¹æ¡ˆ",
    "section": "æ–‡æœ¬æ¡†ï¼šgeom_richtext() å’Œ geom_textbox()",
    "text": "æ–‡æœ¬æ¡†ï¼šgeom_richtext() å’Œ geom_textbox()\n\ngeom_richtext()ï¼šå¯Œæ–‡æœ¬æ ‡æ³¨\n\n# åœ¨å›¾ä¸­æ·»åŠ å¯Œæ–‡æœ¬æ ‡æ³¨\ndf_annotation &lt;- data.frame(\n  x = 6.5,\n  y = 4.2,\n  label = \"**æœ€å¤§å€¼ç‚¹**&lt;br&gt;&lt;span style='color:red; font-size:10pt'&gt;*Sepal.Length* = 7.9&lt;/span&gt;\"\n)\n\nggplot(iris, aes(x = Sepal.Length, y = Sepal.Width)) +\n  geom_point(aes(color = Species), alpha = 0.6) +\n  geom_richtext(\n    data = df_annotation,\n    aes(x = x, y = y, label = label),\n    fill = \"white\",\n    label.color = \"gray50\",\n    hjust = 0\n  ) +\n  labs(title = \"ä½¿ç”¨ geom_richtext æ·»åŠ æ ‡æ³¨\") +\n  theme_bw() +\n  theme(plot.title = element_text(hjust = 0.5)) +\n  scale_color_brewer(palette = \"Set1\")\n\n\n\n\n\n\n\n\n\n\ngeom_textbox()ï¼šæ–‡æœ¬æ¡†\n\n# æ·»åŠ å¯æ¢è¡Œçš„æ–‡æœ¬æ¡†\nlong_text &lt;- \"è¿™æ˜¯ä¸€æ®µè¾ƒé•¿çš„è¯´æ˜æ–‡å­—ï¼Œä½¿ç”¨ **geom_textbox** å¯ä»¥å®ç°è‡ªåŠ¨æ¢è¡Œã€‚æ”¯æŒ *Markdown* è¯­æ³•å’Œ &lt;span style='color:blue'&gt;HTML æ ·å¼&lt;/span&gt;ã€‚\"\n\nggplot(mtcars, aes(x = wt, y = mpg)) +\n  geom_point(aes(color = factor(cyl))) +\n  geom_textbox(\n    aes(x = 4.5, y = 30, label = long_text),\n    width = unit(5, \"cm\"),\n    fill = \"lightyellow\",\n    box.color = \"orange\",\n    hjust = 0.5\n  ) +\n  labs(title = \"ä½¿ç”¨ geom_textbox æ·»åŠ è¯´æ˜\") +\n  theme_bw() +\n  theme(plot.title = element_text(hjust = 0.5)) +\n  scale_color_brewer(palette = \"Dark2\", name = \"æ°”ç¼¸æ•°\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "ggtext - ä¸­è‹±æ–‡å­—ä½“æ··åˆ"
    ]
  },
  {
    "objectID": "2017-ggtext.html#å®æˆ˜æ¡ˆä¾‹å®Œæ•´çš„ä¸­è‹±æ–‡æ··åˆå›¾è¡¨",
    "href": "2017-ggtext.html#å®æˆ˜æ¡ˆä¾‹å®Œæ•´çš„ä¸­è‹±æ–‡æ··åˆå›¾è¡¨",
    "title": "ggtextï¼šä¸­è‹±æ–‡æ··åˆå­—ä½“çš„å®Œç¾è§£å†³æ–¹æ¡ˆ",
    "section": "å®æˆ˜æ¡ˆä¾‹ï¼šå®Œæ•´çš„ä¸­è‹±æ–‡æ··åˆå›¾è¡¨",
    "text": "å®æˆ˜æ¡ˆä¾‹ï¼šå®Œæ•´çš„ä¸­è‹±æ–‡æ··åˆå›¾è¡¨\n\næ¡ˆä¾‹1ï¼šä¸´åºŠè¯•éªŒç»“æœå›¾\n\n# æ¨¡æ‹Ÿä¸´åºŠæ•°æ®\nset.seed(42)\nclinical_data &lt;- data.frame(\n  group = rep(c(\"å®‰æ…°å‰‚ç»„\\nPlacebo\", \"ä½å‰‚é‡ç»„\\nLow Dose\", \"é«˜å‰‚é‡ç»„\\nHigh Dose\"), each = 30),\n  response = c(\n    rnorm(30, 50, 10),\n    rnorm(30, 60, 12),\n    rnorm(30, 75, 8)\n  )\n)\n\n# è®¡ç®—æ±‡æ€»ç»Ÿè®¡\nsummary_data &lt;- clinical_data |&gt;\n  group_by(group) |&gt;\n  summarise(\n    mean_val = mean(response),\n    se = sd(response) / sqrt(n()),\n    .groups = \"drop\"\n  )\n\n# åˆ›å»ºå›¾è¡¨\np_clinical &lt;- ggplot(summary_data, aes(x = group, y = mean_val, fill = group)) +\n  geom_col(width = 0.6, color = \"black\", linewidth = 0.3) +\n  geom_errorbar(\n    aes(ymin = mean_val - se, ymax = mean_val + se),\n    width = 0.2\n  ) +\n  labs(\n    title = \"&lt;span style='font-family:SimHei; font-size:16pt'&gt;**è¯ç‰©ç–—æ•ˆè¯„ä¼°**&lt;/span&gt;&lt;br&gt;&lt;span style='font-family:Arial; color:gray40; font-size:12pt'&gt;*Drug Efficacy Assessment*&lt;/span&gt;\",\n    x = NULL,\n    y = \"&lt;span style='font-family:SimSun'&gt;åº”ç­”ç‡ (%)&lt;/span&gt; &lt;span style='font-family:Arial; color:gray50'&gt;Response Rate&lt;/span&gt;\"\n  ) +\n  theme_bw(base_size = 11) +\n  theme(\n    plot.title = element_markdown(hjust = 0.5, lineheight = 1.2),\n    axis.title.y = element_markdown(),\n    axis.text.x = element_text(size = 10),\n    legend.position = \"none\"\n  ) +\n  scale_fill_brewer(palette = \"Blues\") +\n  scale_y_continuous(expand = expansion(mult = c(0, 0.1)))\n\np_clinical\n\n\n\n\n\n\n\n\n\n\næ¡ˆä¾‹2ï¼šå¸¦å›¾ç‰‡çš„å›¾ä¾‹\n\n# åˆ›å»ºè‡ªå®šä¹‰å›¾ä¾‹æ ‡ç­¾ï¼ˆæ¨¡æ‹Ÿå¸¦å›¾æ ‡æ•ˆæœï¼‰\nlegend_labels &lt;- c(\n  \"setosa\" = \"&lt;span style='color:#E41A1C'&gt;â—&lt;/span&gt; **Setosa** &lt;span style='color:gray50'&gt;å±±é¸¢å°¾&lt;/span&gt;\",\n  \"versicolor\" = \"&lt;span style='color:#377EB8'&gt;â—&lt;/span&gt; **Versicolor** &lt;span style='color:gray50'&gt;å˜è‰²é¸¢å°¾&lt;/span&gt;\",\n  \"virginica\" = \"&lt;span style='color:#4DAF4A'&gt;â—&lt;/span&gt; **Virginica** &lt;span style='color:gray50'&gt;ç»´å‰å°¼äºšé¸¢å°¾&lt;/span&gt;\"\n)\n\nggplot(iris, aes(x = Sepal.Length, y = Petal.Length, color = Species)) +\n  geom_point(size = 2.5, alpha = 0.7) +\n  scale_color_manual(\n    values = c(\"setosa\" = \"#E41A1C\", \"versicolor\" = \"#377EB8\", \"virginica\" = \"#4DAF4A\"),\n    labels = legend_labels\n  ) +\n  labs(\n    title = \"é¸¢å°¾èŠ± **è¼ç‰‡** ä¸ **èŠ±ç“£** é•¿åº¦å…³ç³»\",\n    subtitle = \"*Relationship between Sepal and Petal Length*\",\n    x = \"è¼ç‰‡é•¿åº¦ (cm)\",\n    y = \"èŠ±ç“£é•¿åº¦ (cm)\",\n    color = \"ç‰©ç§ Species\"\n  ) +\n  theme_bw() +\n  theme(\n    plot.title = element_markdown(size = 14, hjust = 0.5),\n    plot.subtitle = element_markdown(size = 11, hjust = 0.5, color = \"gray50\"),\n    legend.text = element_markdown(size = 10),\n    legend.title = element_text(face = \"bold\")\n  )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "ggtext - ä¸­è‹±æ–‡å­—ä½“æ··åˆ"
    ]
  },
  {
    "objectID": "2017-ggtext.html#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ",
    "href": "2017-ggtext.html#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ",
    "title": "ggtextï¼šä¸­è‹±æ–‡æ··åˆå­—ä½“çš„å®Œç¾è§£å†³æ–¹æ¡ˆ",
    "section": "å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ",
    "text": "å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ\n\n1. å­—ä½“ä¸æ˜¾ç¤º\n\n# æ£€æŸ¥ç³»ç»Ÿå¯ç”¨å­—ä½“\nwindowsFonts()\n\n# æŸ¥çœ‹ç‰¹å®šå­—ä½“æ˜¯å¦å¯ç”¨\nlibrary(systemfonts)\nsystem_fonts() |&gt; \n  filter(grepl(\"Sim|Microsoft\", family, ignore.case = TRUE))\n\n\n\n2. PDF å¯¼å‡ºä¸­æ–‡ä¹±ç \n\n# ä½¿ç”¨ ragg åŒ…å¯¼å‡º PNGï¼ˆæ¨èï¼‰\nggsave(\"figure.png\", plot = p, device = ragg::agg_png, dpi = 300)\n\n# PDF ä½¿ç”¨ cairo_pdf\nggsave(\"figure.pdf\", plot = p, device = cairo_pdf)\n\n\n\n3. element_markdown ä¸ element_text çš„åŒºåˆ«\n\n\n\nç‰¹æ€§\nelement_text()\nelement_markdown()\n\n\n\n\nçº¯æ–‡æœ¬\nâœ“\nâœ“\n\n\nç²—ä½“/æ–œä½“\nface å‚æ•°\nMarkdown è¯­æ³•\n\n\né¢œè‰²\ncolor å‚æ•°\nHTML span æ ‡ç­¾\n\n\nå¤šå­—ä½“\nâœ—\nâœ“\n\n\nä¸Šä¸‹æ ‡\nâœ—\nâœ“",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "ggtext - ä¸­è‹±æ–‡å­—ä½“æ··åˆ"
    ]
  },
  {
    "objectID": "2017-ggtext.html#æ€»ç»“",
    "href": "2017-ggtext.html#æ€»ç»“",
    "title": "ggtextï¼šä¸­è‹±æ–‡æ··åˆå­—ä½“çš„å®Œç¾è§£å†³æ–¹æ¡ˆ",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nggtext åŒ…çš„æ ¸å¿ƒåŠŸèƒ½ï¼š\n\nelement_markdown()ï¼šåœ¨ä¸»é¢˜å…ƒç´ ä¸­ä½¿ç”¨ Markdown/HTML\ngeom_richtext()ï¼šåœ¨å›¾ä¸­æ·»åŠ å¯Œæ–‡æœ¬æ ‡æ³¨\ngeom_textbox()ï¼šæ·»åŠ å¯æ¢è¡Œçš„æ–‡æœ¬æ¡†\nä¸­è‹±æ–‡æ··åˆï¼šé€šè¿‡ CSS font-family å±æ€§å®ç°\n\næ¨èçš„å·¥ä½œæµç¨‹ï¼š\n\nä½¿ç”¨ glue åŒ…æ„å»ºå¤æ‚çš„ HTML å­—ç¬¦ä¸²\nåˆ›å»ºè¾…åŠ©å‡½æ•°ç®€åŒ–é‡å¤æ“ä½œ\nä½¿ç”¨ ragg åŒ…å¯¼å‡ºç¡®ä¿ä¸­æ–‡æ­£å¸¸æ˜¾ç¤º\n\nå‚è€ƒèµ„æºï¼š\n\nggtext å®˜æ–¹æ–‡æ¡£\nCRAN é¡µé¢\nggtext GitHub",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "ggtext - ä¸­è‹±æ–‡å­—ä½“æ··åˆ"
    ]
  },
  {
    "objectID": "2019-dualaxis.html",
    "href": "2019-dualaxis.html",
    "title": "åŒåæ ‡è½´ï¼šå·¦å³ä¸¤ä¸ª Y è½´çš„ç»˜å›¾æŠ€å·§",
    "section": "",
    "text": "åŒåæ ‡è½´ï¼ˆDual Y-Axisï¼‰å›¾è¡¨å¯ä»¥åœ¨åŒä¸€å¼ å›¾ä¸­å±•ç¤ºä¸¤ä¸ªé‡çº²ä¸åŒçš„å˜é‡ï¼Œå¸¸ç”¨äºå±•ç¤ºè¶‹åŠ¿å¯¹æ¯”ã€æŸ±çº¿æ··åˆå›¾ç­‰åœºæ™¯ã€‚æœ¬æ•™ç¨‹ä»‹ç»å¦‚ä½•åœ¨ ggplot2 ä¸­å®ç°åŒåæ ‡è½´ç»‘å›¾ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "åŒåæ ‡è½´"
    ]
  },
  {
    "objectID": "2019-dualaxis.html#ä»€ä¹ˆæ˜¯åŒåæ ‡è½´",
    "href": "2019-dualaxis.html#ä»€ä¹ˆæ˜¯åŒåæ ‡è½´",
    "title": "åŒåæ ‡è½´ï¼šå·¦å³ä¸¤ä¸ª Y è½´çš„ç»˜å›¾æŠ€å·§",
    "section": "ä»€ä¹ˆæ˜¯åŒåæ ‡è½´ï¼Ÿ",
    "text": "ä»€ä¹ˆæ˜¯åŒåæ ‡è½´ï¼Ÿ\nåŒåæ ‡è½´å›¾è¡¨æ˜¯æŒ‡åœ¨åŒä¸€å¼ å›¾ä¸­ä½¿ç”¨ä¸¤ä¸ª Y è½´ï¼š\n\nå·¦ Y è½´ï¼ˆä¸»è½´ï¼‰ï¼šé€šå¸¸å±•ç¤ºä¸»è¦å˜é‡\nå³ Y è½´ï¼ˆæ¬¡è½´ï¼‰ï¼šå±•ç¤ºæ¬¡è¦å˜é‡ï¼Œé‡çº²å¯èƒ½ä¸åŒ\n\n\né€‚ç”¨åœºæ™¯\n\n\n\nåœºæ™¯\nç¤ºä¾‹\n\n\n\n\næŸ±çº¿æ··åˆå›¾\næŸ±çŠ¶å›¾æ˜¾ç¤ºé”€é‡ï¼ŒæŠ˜çº¿å›¾æ˜¾ç¤ºå¢é•¿ç‡\n\n\nè¶‹åŠ¿å¯¹æ¯”\næ¸©åº¦ä¸é™é›¨é‡çš„æ—¶é—´å˜åŒ–\n\n\nå› æœå…³ç³»\nå¹¿å‘ŠæŠ•å…¥ä¸é”€å”®é¢çš„å…³ç³»\n\n\n\n\n\näº‰è®®ä¸æ³¨æ„äº‹é¡¹\nåŒåæ ‡è½´å›¾è¡¨å­˜åœ¨ä¸€äº›äº‰è®®ï¼š\n\nè¯¯å¯¼æ€§ï¼šä¸¤ä¸ª Y è½´çš„åˆ»åº¦æ¯”ä¾‹ä¼šå½±å“è¯»è€…å¯¹æ•°æ®å…³ç³»çš„ç†è§£\nå¯è¯»æ€§ï¼šå¢åŠ äº†å›¾è¡¨çš„å¤æ‚åº¦\næ›¿ä»£æ–¹æ¡ˆï¼šåˆ†é¢å›¾ï¼ˆfacetï¼‰é€šå¸¸æ˜¯æ›´å¥½çš„é€‰æ‹©\n\nä½¿ç”¨å»ºè®®ï¼š\n\nâœ… ä¸¤ä¸ªå˜é‡ç¡®å®æœ‰å…³è”æ—¶ä½¿ç”¨\nâœ… æ˜ç¡®æ ‡æ³¨ä¸¤ä¸ªè½´çš„å•ä½\nâŒ é¿å…åˆ»æ„è°ƒæ•´åˆ»åº¦æ¥åˆ¶é€ ç›¸å…³æ€§å‡è±¡",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "åŒåæ ‡è½´"
    ]
  },
  {
    "objectID": "2019-dualaxis.html#åŸºç¡€ç”¨æ³•",
    "href": "2019-dualaxis.html#åŸºç¡€ç”¨æ³•",
    "title": "åŒåæ ‡è½´ï¼šå·¦å³ä¸¤ä¸ª Y è½´çš„ç»˜å›¾æŠ€å·§",
    "section": "åŸºç¡€ç”¨æ³•",
    "text": "åŸºç¡€ç”¨æ³•\n\nggplot2 ä¸­çš„ sec_axis()\nggplot2 é€šè¿‡ sec_axis() å‡½æ•°å®ç°åŒåæ ‡è½´ã€‚æ ¸å¿ƒåŸç†æ˜¯ æ¬¡è½´å¿…é¡»æ˜¯ä¸»è½´çš„çº¿æ€§å˜æ¢ã€‚\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(tidyr)\n\n\n\næœ€ç®€ç¤ºä¾‹\n\n# åˆ›å»ºç¤ºä¾‹æ•°æ®\ndf &lt;- data.frame(\n  month = 1:12,\n  sales = c(120, 135, 150, 180, 200, 220, 250, 240, 210, 180, 150, 160),\n  growth_rate = c(5, 8, 12, 15, 18, 20, 22, 18, 12, 8, 5, 6)\n)\n\n# å®šä¹‰è½¬æ¢ç³»æ•°ï¼ˆè®©ä¸¤ä¸ªå˜é‡åœ¨å›¾ä¸Šæœ‰ç›¸ä¼¼çš„èŒƒå›´ï¼‰\ncoef &lt;- max(df$sales) / max(df$growth_rate)\n\nggplot(df, aes(x = month)) +\n  geom_col(aes(y = sales), fill = \"#4f46e5\", alpha = 0.7) +\n  geom_line(aes(y = growth_rate * coef), color = \"#ef4444\", linewidth = 1.2) +\n  geom_point(aes(y = growth_rate * coef), color = \"#ef4444\", size = 3) +\n  scale_y_continuous(\n    name = \"é”€å”®é¢\",\n    sec.axis = sec_axis(~ . / coef, name = \"å¢é•¿ç‡ (%)\")\n  ) +\n  scale_x_continuous(breaks = 1:12, labels = paste0(1:12, \"æœˆ\")) +\n  labs(title = \"æœˆåº¦é”€å”®é¢ä¸å¢é•¿ç‡\", x = NULL) +\n  theme_bw(base_size = 12)\n\n\n\n\n\n\n\n\n\n\nå…³é”®æ­¥éª¤è§£æ\n\nè®¡ç®—è½¬æ¢ç³»æ•°ï¼šcoef &lt;- max(ä¸»è½´å˜é‡) / max(æ¬¡è½´å˜é‡)\nç»‘åˆ¶æ¬¡è½´æ•°æ®æ—¶ä¹˜ä»¥ç³»æ•°ï¼šaes(y = growth_rate * coef)\nè®¾ç½® sec_axis æ—¶é™¤ä»¥ç³»æ•°ï¼šsec_axis(~ . / coef, name = \"æ¬¡è½´æ ‡ç­¾\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "åŒåæ ‡è½´"
    ]
  },
  {
    "objectID": "2019-dualaxis.html#æŸ±çº¿æ··åˆå›¾",
    "href": "2019-dualaxis.html#æŸ±çº¿æ··åˆå›¾",
    "title": "åŒåæ ‡è½´ï¼šå·¦å³ä¸¤ä¸ª Y è½´çš„ç»˜å›¾æŠ€å·§",
    "section": "æŸ±çº¿æ··åˆå›¾",
    "text": "æŸ±çº¿æ··åˆå›¾\næŸ±çº¿æ··åˆå›¾æ˜¯åŒåæ ‡è½´æœ€å¸¸è§çš„åº”ç”¨åœºæ™¯ã€‚\n\nåŸºç¡€ç‰ˆæœ¬\n\n# æ¨¡æ‹Ÿå­£åº¦æ•°æ®\nquarterly &lt;- data.frame(\n  quarter = c(\"Q1\", \"Q2\", \"Q3\", \"Q4\"),\n  revenue = c(450, 520, 680, 720),\n  profit_margin = c(12, 15, 18, 20)\n)\n\ncoef &lt;- max(quarterly$revenue) / max(quarterly$profit_margin)\n\nggplot(quarterly, aes(x = quarter)) +\n  geom_col(aes(y = revenue), fill = \"#0ea5e9\", width = 0.6) +\n  geom_line(aes(y = profit_margin * coef, group = 1), \n            color = \"#f97316\", linewidth = 1.5) +\n  geom_point(aes(y = profit_margin * coef), \n             color = \"#f97316\", size = 4) +\n  scale_y_continuous(\n    name = \"è¥æ”¶ (ä¸‡å…ƒ)\",\n    sec.axis = sec_axis(~ . / coef, name = \"åˆ©æ¶¦ç‡ (%)\")\n  ) +\n  labs(title = \"å­£åº¦è¥æ”¶ä¸åˆ©æ¶¦ç‡\", x = NULL) +\n  theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\n\n\næ·»åŠ æ•°æ®æ ‡ç­¾\n\nggplot(quarterly, aes(x = quarter)) +\n  geom_col(aes(y = revenue), fill = \"#0ea5e9\", width = 0.6) +\n  geom_text(aes(y = revenue, label = revenue), vjust = -0.5, size = 4) +\n  geom_line(aes(y = profit_margin * coef, group = 1), \n            color = \"#f97316\", linewidth = 1.5) +\n  geom_point(aes(y = profit_margin * coef), \n             color = \"#f97316\", size = 4) +\n  geom_text(aes(y = profit_margin * coef, label = paste0(profit_margin, \"%\")), \n            vjust = -1, color = \"#f97316\", size = 4) +\n  scale_y_continuous(\n    name = \"è¥æ”¶ (ä¸‡å…ƒ)\",\n    limits = c(0, max(quarterly$revenue) * 1.15),\n    sec.axis = sec_axis(~ . / coef, name = \"åˆ©æ¶¦ç‡ (%)\")\n  ) +\n  labs(title = \"å­£åº¦è¥æ”¶ä¸åˆ©æ¶¦ç‡\", x = NULL) +\n  theme_minimal(base_size = 12)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "åŒåæ ‡è½´"
    ]
  },
  {
    "objectID": "2019-dualaxis.html#åŒæŠ˜çº¿å›¾",
    "href": "2019-dualaxis.html#åŒæŠ˜çº¿å›¾",
    "title": "åŒåæ ‡è½´ï¼šå·¦å³ä¸¤ä¸ª Y è½´çš„ç»˜å›¾æŠ€å·§",
    "section": "åŒæŠ˜çº¿å›¾",
    "text": "åŒæŠ˜çº¿å›¾\nå½“ä¸¤ä¸ªå˜é‡éƒ½æ˜¯è¿ç»­æ—¶é—´åºåˆ—æ—¶ï¼Œå¯ä»¥ç”¨åŒæŠ˜çº¿å›¾ã€‚\n\n# æ¨¡æ‹Ÿæ°”è±¡æ•°æ®\nweather &lt;- data.frame(\n  date = seq(as.Date(\"2025-01-01\"), as.Date(\"2025-12-01\"), by = \"month\"),\n  temperature = c(8, 10, 15, 20, 25, 30, 33, 32, 28, 22, 15, 10),\n  rainfall = c(45, 60, 80, 120, 180, 220, 150, 100, 70, 50, 40, 35)\n)\n\ncoef &lt;- max(weather$rainfall) / max(weather$temperature)\n\nggplot(weather, aes(x = date)) +\n  geom_line(aes(y = temperature), color = \"#ef4444\", linewidth = 1.2) +\n  geom_point(aes(y = temperature), color = \"#ef4444\", size = 2.5) +\n  geom_area(aes(y = rainfall / coef), fill = \"#3b82f6\", alpha = 0.3) +\n  geom_line(aes(y = rainfall / coef), color = \"#3b82f6\", linewidth = 1.2) +\n  scale_y_continuous(\n    name = \"æ¸©åº¦ (Â°C)\",\n    sec.axis = sec_axis(~ . * coef, name = \"é™é›¨é‡ (mm)\")\n  ) +\n  scale_x_date(date_labels = \"%mæœˆ\", date_breaks = \"1 month\") +\n  labs(title = \"2025 å¹´æœˆåº¦æ¸©åº¦ä¸é™é›¨é‡\", x = NULL) +\n  theme_bw(base_size = 12) +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "åŒåæ ‡è½´"
    ]
  },
  {
    "objectID": "2019-dualaxis.html#è‡ªå®šä¹‰åæ ‡è½´æ ·å¼",
    "href": "2019-dualaxis.html#è‡ªå®šä¹‰åæ ‡è½´æ ·å¼",
    "title": "åŒåæ ‡è½´ï¼šå·¦å³ä¸¤ä¸ª Y è½´çš„ç»˜å›¾æŠ€å·§",
    "section": "è‡ªå®šä¹‰åæ ‡è½´æ ·å¼",
    "text": "è‡ªå®šä¹‰åæ ‡è½´æ ·å¼\n\nåŒ¹é…é¢œè‰²\nè®©åæ ‡è½´é¢œè‰²ä¸å¯¹åº”çš„æ•°æ®ç³»åˆ—é¢œè‰²ä¸€è‡´ï¼Œæé«˜å¯è¯»æ€§ï¼š\n\nggplot(df, aes(x = month)) +\n  geom_col(aes(y = sales), fill = \"#4f46e5\", alpha = 0.8) +\n  geom_line(aes(y = growth_rate * coef), color = \"#ef4444\", linewidth = 1.2) +\n  geom_point(aes(y = growth_rate * coef), color = \"#ef4444\", size = 3) +\n  scale_y_continuous(\n    name = \"é”€å”®é¢\",\n    sec.axis = sec_axis(~ . / coef, name = \"å¢é•¿ç‡ (%)\")\n  ) +\n  scale_x_continuous(breaks = 1:12, labels = paste0(1:12, \"æœˆ\")) +\n  labs(title = \"æœˆåº¦é”€å”®é¢ä¸å¢é•¿ç‡\", x = NULL) +\n  theme_bw(base_size = 12) +\n  theme(\n    axis.title.y.left = element_text(color = \"#4f46e5\", face = \"bold\"),\n    axis.text.y.left = element_text(color = \"#4f46e5\"),\n    axis.title.y.right = element_text(color = \"#ef4444\", face = \"bold\"),\n    axis.text.y.right = element_text(color = \"#ef4444\")\n  )\n\n\n\n\n\n\n\n\n\n\næ·»åŠ å›¾ä¾‹\nåŒåæ ‡è½´å›¾è¡¨é»˜è®¤æ²¡æœ‰å›¾ä¾‹ï¼Œéœ€è¦æ‰‹åŠ¨åˆ›å»ºï¼š\n\nggplot(df, aes(x = month)) +\n  geom_col(aes(y = sales, fill = \"é”€å”®é¢\"), alpha = 0.8) +\n  geom_line(aes(y = growth_rate * coef, color = \"å¢é•¿ç‡\"), linewidth = 1.2) +\n  geom_point(aes(y = growth_rate * coef, color = \"å¢é•¿ç‡\"), size = 3) +\n  scale_fill_manual(values = c(\"é”€å”®é¢\" = \"#4f46e5\")) +\n  scale_color_manual(values = c(\"å¢é•¿ç‡\" = \"#ef4444\")) +\n  scale_y_continuous(\n    name = \"é”€å”®é¢\",\n    sec.axis = sec_axis(~ . / coef, name = \"å¢é•¿ç‡ (%)\")\n  ) +\n  scale_x_continuous(breaks = 1:12, labels = paste0(1:12, \"æœˆ\")) +\n  labs(\n    title = \"æœˆåº¦é”€å”®é¢ä¸å¢é•¿ç‡\",\n    x = NULL,\n    fill = NULL,\n    color = NULL\n  ) +\n  theme_bw(base_size = 12) +\n  theme(\n    legend.position = \"top\",\n    legend.box = \"horizontal\"\n  ) +\n  guides(\n    fill = guide_legend(order = 1),\n    color = guide_legend(order = 2)\n  )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "åŒåæ ‡è½´"
    ]
  },
  {
    "objectID": "2019-dualaxis.html#åˆ†ç»„åŒåæ ‡è½´",
    "href": "2019-dualaxis.html#åˆ†ç»„åŒåæ ‡è½´",
    "title": "åŒåæ ‡è½´ï¼šå·¦å³ä¸¤ä¸ª Y è½´çš„ç»˜å›¾æŠ€å·§",
    "section": "åˆ†ç»„åŒåæ ‡è½´",
    "text": "åˆ†ç»„åŒåæ ‡è½´\nå½“æœ‰åˆ†ç»„å˜é‡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å †å æˆ–åˆ†ç»„æŸ±çŠ¶å›¾ã€‚\n\n# åˆ†ç»„æ•°æ®\ngrouped_data &lt;- data.frame(\n  quarter = rep(c(\"Q1\", \"Q2\", \"Q3\", \"Q4\"), each = 2),\n  category = rep(c(\"äº§å“A\", \"äº§å“B\"), 4),\n  sales = c(200, 150, 250, 180, 300, 220, 280, 250),\n  total_growth = rep(c(8, 12, 15, 10), each = 2)\n)\n\n# è®¡ç®—æ¯å­£åº¦æ€»é”€å”®é¢ç”¨äºç»‘å›¾\ngrouped_summary &lt;- grouped_data |&gt;\n  group_by(quarter) |&gt;\n  summarise(total_sales = sum(sales), growth = first(total_growth))\n\ncoef &lt;- max(grouped_summary$total_sales) / max(grouped_summary$growth)\n\nggplot() +\n  geom_col(data = grouped_data, \n           aes(x = quarter, y = sales, fill = category),\n           position = \"dodge\", width = 0.7) +\n  geom_line(data = grouped_summary,\n            aes(x = quarter, y = growth * coef, group = 1),\n            color = \"#f97316\", linewidth = 1.5) +\n  geom_point(data = grouped_summary,\n             aes(x = quarter, y = growth * coef),\n             color = \"#f97316\", size = 4) +\n  scale_fill_manual(values = c(\"äº§å“A\" = \"#4f46e5\", \"äº§å“B\" = \"#06b6d4\")) +\n  scale_y_continuous(\n    name = \"é”€å”®é¢ (ä¸‡å…ƒ)\",\n    sec.axis = sec_axis(~ . / coef, name = \"å¢é•¿ç‡ (%)\")\n  ) +\n  labs(title = \"åˆ†äº§å“é”€å”®é¢ä¸æ€»ä½“å¢é•¿ç‡\", x = NULL, fill = NULL) +\n  theme_minimal(base_size = 12) +\n  theme(legend.position = \"top\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "åŒåæ ‡è½´"
    ]
  },
  {
    "objectID": "2019-dualaxis.html#ä½¿ç”¨-ggnewscale-å®ç°åŒå›¾ä¾‹",
    "href": "2019-dualaxis.html#ä½¿ç”¨-ggnewscale-å®ç°åŒå›¾ä¾‹",
    "title": "åŒåæ ‡è½´ï¼šå·¦å³ä¸¤ä¸ª Y è½´çš„ç»˜å›¾æŠ€å·§",
    "section": "ä½¿ç”¨ ggnewscale å®ç°åŒå›¾ä¾‹",
    "text": "ä½¿ç”¨ ggnewscale å®ç°åŒå›¾ä¾‹\nå½“éœ€è¦ä¸ºä¸¤ä¸ªè½´åˆ†åˆ«è®¾ç½®å®Œæ•´çš„å›¾ä¾‹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ ggnewscale åŒ…ï¼š\n\nlibrary(ggnewscale)\n\nggplot(df, aes(x = month)) +\n  # ç¬¬ä¸€ä¸ªå›¾å±‚ï¼šæŸ±çŠ¶å›¾\n  geom_col(aes(y = sales, fill = sales), alpha = 0.8) +\n  scale_fill_gradient(low = \"#c7d2fe\", high = \"#4f46e5\", name = \"é”€å”®é¢\") +\n  # å¼€å¯æ–°çš„å¡«å……/é¢œè‰²æ ‡åº¦\n\n  new_scale_color() +\n  # ç¬¬äºŒä¸ªå›¾å±‚ï¼šæŠ˜çº¿å›¾\n  geom_line(aes(y = growth_rate * coef, color = growth_rate), linewidth = 1.5) +\n  geom_point(aes(y = growth_rate * coef, color = growth_rate), size = 3) +\n  scale_color_gradient(low = \"#fca5a5\", high = \"#dc2626\", name = \"å¢é•¿ç‡ (%)\") +\n  scale_y_continuous(\n    name = \"é”€å”®é¢\",\n    sec.axis = sec_axis(~ . / coef, name = \"å¢é•¿ç‡ (%)\")\n  ) +\n  scale_x_continuous(breaks = 1:12, labels = paste0(1:12, \"æœˆ\")) +\n  labs(title = \"æœˆåº¦é”€å”®é¢ä¸å¢é•¿ç‡\", x = NULL) +\n  theme_bw(base_size = 12)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "åŒåæ ‡è½´"
    ]
  },
  {
    "objectID": "2019-dualaxis.html#å®æˆ˜æ¡ˆä¾‹",
    "href": "2019-dualaxis.html#å®æˆ˜æ¡ˆä¾‹",
    "title": "åŒåæ ‡è½´ï¼šå·¦å³ä¸¤ä¸ª Y è½´çš„ç»˜å›¾æŠ€å·§",
    "section": "å®æˆ˜æ¡ˆä¾‹",
    "text": "å®æˆ˜æ¡ˆä¾‹\n\næ¡ˆä¾‹1ï¼šç»æµæŒ‡æ ‡å¯¹æ¯”\n\n# æ¨¡æ‹Ÿç»æµæ•°æ®\neconomy &lt;- data.frame(\n  year = 2015:2024,\n  gdp = c(68.9, 74.6, 83.2, 91.9, 99.1, 101.4, 114.4, 121.0, 126.1, 134.8),\n  gdp_growth = c(6.9, 6.7, 6.8, 6.6, 6.0, 2.3, 8.1, 3.0, 5.2, 5.0)\n)\n\ncoef &lt;- max(economy$gdp) / max(economy$gdp_growth)\n\nggplot(economy, aes(x = year)) +\n  geom_area(aes(y = gdp), fill = \"#4f46e5\", alpha = 0.3) +\n  geom_line(aes(y = gdp), color = \"#4f46e5\", linewidth = 1.2) +\n  geom_point(aes(y = gdp), color = \"#4f46e5\", size = 2.5) +\n  geom_line(aes(y = gdp_growth * coef), color = \"#ef4444\", linewidth = 1.2) +\n  geom_point(aes(y = gdp_growth * coef), color = \"#ef4444\", size = 2.5) +\n  scale_y_continuous(\n    name = \"GDP (ä¸‡äº¿å…ƒ)\",\n    sec.axis = sec_axis(~ . / coef, name = \"GDPå¢é€Ÿ (%)\")\n  ) +\n  scale_x_continuous(breaks = 2015:2024) +\n  labs(title = \"ä¸­å›½ GDP æ€»é‡ä¸å¢é€Ÿ (2015-2024)\", x = NULL) +\n  theme_bw(base_size = 12) +\n  theme(\n    axis.title.y.left = element_text(color = \"#4f46e5\"),\n    axis.text.y.left = element_text(color = \"#4f46e5\"),\n    axis.title.y.right = element_text(color = \"#ef4444\"),\n    axis.text.y.right = element_text(color = \"#ef4444\"),\n    axis.text.x = element_text(angle = 45, hjust = 1)\n  )\n\n\n\n\n\n\n\n\n\n\næ¡ˆä¾‹2ï¼šè¥é”€æ•ˆæœåˆ†æ\n\n# æ¨¡æ‹Ÿè¥é”€æ•°æ®\nmarketing &lt;- data.frame(\n  week = 1:12,\n  ad_spend = c(5, 8, 12, 15, 20, 25, 22, 18, 15, 12, 10, 8),\n  conversions = c(120, 180, 280, 350, 480, 600, 550, 420, 350, 280, 220, 180)\n)\n\ncoef &lt;- max(marketing$conversions) / max(marketing$ad_spend)\n\nggplot(marketing, aes(x = week)) +\n  geom_col(aes(y = conversions, fill = \"è½¬åŒ–æ•°\"), alpha = 0.7, width = 0.7) +\n  geom_line(aes(y = ad_spend * coef, color = \"å¹¿å‘Šæ”¯å‡º\"), linewidth = 1.5) +\n  geom_point(aes(y = ad_spend * coef, color = \"å¹¿å‘Šæ”¯å‡º\"), size = 3) +\n  scale_fill_manual(values = c(\"è½¬åŒ–æ•°\" = \"#10b981\")) +\n  scale_color_manual(values = c(\"å¹¿å‘Šæ”¯å‡º\" = \"#f59e0b\")) +\n  scale_y_continuous(\n    name = \"è½¬åŒ–æ•°\",\n    sec.axis = sec_axis(~ . / coef, name = \"å¹¿å‘Šæ”¯å‡º (ä¸‡å…ƒ)\")\n  ) +\n  scale_x_continuous(breaks = 1:12, labels = paste0(\"ç¬¬\", 1:12, \"å‘¨\")) +\n  labs(\n    title = \"å¹¿å‘ŠæŠ•å…¥ä¸è½¬åŒ–æ•ˆæœ\",\n    subtitle = \"12 å‘¨è¥é”€æ´»åŠ¨è¿½è¸ª\",\n    x = NULL, fill = NULL, color = NULL\n  ) +\n  theme_minimal(base_size = 12) +\n  theme(\n    legend.position = \"top\",\n    axis.text.x = element_text(angle = 45, hjust = 1)\n  )\n\n\n\n\n\n\n\n\n\n\næ¡ˆä¾‹3ï¼šåº“å­˜ç®¡ç†\n\n# æ¨¡æ‹Ÿåº“å­˜æ•°æ®\ninventory &lt;- data.frame(\n  month = factor(month.abb, levels = month.abb),\n  stock = c(1000, 850, 920, 780, 650, 500, 600, 750, 900, 1100, 1200, 1050),\n  turnover = c(2.5, 2.8, 2.6, 3.0, 3.5, 4.0, 3.8, 3.2, 2.8, 2.4, 2.2, 2.5)\n)\n\ncoef &lt;- max(inventory$stock) / max(inventory$turnover)\n\nggplot(inventory, aes(x = month)) +\n  geom_col(aes(y = stock), fill = \"#6366f1\", alpha = 0.7, width = 0.6) +\n  geom_line(aes(y = turnover * coef, group = 1), \n            color = \"#ec4899\", linewidth = 1.5) +\n  geom_point(aes(y = turnover * coef), color = \"#ec4899\", size = 3.5) +\n  geom_hline(yintercept = 800, linetype = \"dashed\", color = \"#6366f1\", alpha = 0.5) +\n  annotate(\"text\", x = 11.5, y = 850, label = \"å®‰å…¨åº“å­˜çº¿\", \n           color = \"#6366f1\", size = 3.5) +\n  scale_y_continuous(\n    name = \"åº“å­˜é‡ (ä»¶)\",\n    sec.axis = sec_axis(~ . / coef, name = \"å‘¨è½¬ç‡\")\n  ) +\n  labs(\n    title = \"åº“å­˜é‡ä¸å‘¨è½¬ç‡æœˆåº¦å˜åŒ–\",\n    x = NULL\n  ) +\n  theme_bw(base_size = 12) +\n  theme(\n    axis.title.y.left = element_text(color = \"#6366f1\", face = \"bold\"),\n    axis.text.y.left = element_text(color = \"#6366f1\"),\n    axis.title.y.right = element_text(color = \"#ec4899\", face = \"bold\"),\n    axis.text.y.right = element_text(color = \"#ec4899\")\n  )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "åŒåæ ‡è½´"
    ]
  },
  {
    "objectID": "2019-dualaxis.html#å°è£…å‡½æ•°",
    "href": "2019-dualaxis.html#å°è£…å‡½æ•°",
    "title": "åŒåæ ‡è½´ï¼šå·¦å³ä¸¤ä¸ª Y è½´çš„ç»˜å›¾æŠ€å·§",
    "section": "å°è£…å‡½æ•°",
    "text": "å°è£…å‡½æ•°\nä¸ºäº†æ–¹ä¾¿å¤ç”¨ï¼Œå¯ä»¥å°†åŒåæ ‡è½´ç»‘å›¾å°è£…æˆå‡½æ•°ï¼š\n\n#' åˆ›å»ºæŸ±çº¿æ··åˆåŒåæ ‡è½´å›¾\n#' \n#' @param data æ•°æ®æ¡†\n#' @param x xè½´å˜é‡åï¼ˆå­—ç¬¦ä¸²ï¼‰\n#' @param y1 ä¸»è½´å˜é‡åï¼ˆæŸ±çŠ¶å›¾ï¼‰\n#' @param y2 æ¬¡è½´å˜é‡åï¼ˆæŠ˜çº¿å›¾ï¼‰\n#' @param y1_name ä¸»è½´æ ‡ç­¾\n#' @param y2_name æ¬¡è½´æ ‡ç­¾\n#' @param title å›¾è¡¨æ ‡é¢˜\n#' @param bar_color æŸ±çŠ¶å›¾é¢œè‰²\n#' @param line_color æŠ˜çº¿å›¾é¢œè‰²\ncreate_dual_axis_plot &lt;- function(\n    data, x, y1, y2,\n    y1_name = y1, y2_name = y2,\n    title = NULL,\n    bar_color = \"#4f46e5\",\n    line_color = \"#ef4444\"\n) {\n  \n  # æå–æ•°æ®\n  x_val &lt;- data[[x]]\n  y1_val &lt;- data[[y1]]\n  y2_val &lt;- data[[y2]]\n  \n  # è®¡ç®—è½¬æ¢ç³»æ•°\n  coef &lt;- max(y1_val, na.rm = TRUE) / max(y2_val, na.rm = TRUE)\n  \n  # åˆ›å»ºç»‘å›¾æ•°æ®\n  plot_data &lt;- data.frame(\n    x = x_val,\n    y1 = y1_val,\n    y2 = y2_val,\n    y2_scaled = y2_val * coef\n  )\n  \n  # ç»˜å›¾\n  ggplot(plot_data, aes(x = x)) +\n    geom_col(aes(y = y1), fill = bar_color, alpha = 0.7, width = 0.6) +\n    geom_line(aes(y = y2_scaled, group = 1), color = line_color, linewidth = 1.2) +\n    geom_point(aes(y = y2_scaled), color = line_color, size = 3) +\n    scale_y_continuous(\n      name = y1_name,\n      sec.axis = sec_axis(~ . / coef, name = y2_name)\n    ) +\n    labs(title = title, x = NULL) +\n    theme_bw(base_size = 12) +\n    theme(\n      axis.title.y.left = element_text(color = bar_color, face = \"bold\"),\n      axis.text.y.left = element_text(color = bar_color),\n      axis.title.y.right = element_text(color = line_color, face = \"bold\"),\n      axis.text.y.right = element_text(color = line_color)\n    )\n}\n\n# ä½¿ç”¨ç¤ºä¾‹\ncreate_dual_axis_plot(\n  data = df,\n  x = \"month\",\n  y1 = \"sales\",\n  y2 = \"growth_rate\",\n  y1_name = \"é”€å”®é¢\",\n  y2_name = \"å¢é•¿ç‡ (%)\",\n  title = \"æœˆåº¦é”€å”®æ•°æ®\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "åŒåæ ‡è½´"
    ]
  },
  {
    "objectID": "2019-dualaxis.html#å¸¸è§é—®é¢˜",
    "href": "2019-dualaxis.html#å¸¸è§é—®é¢˜",
    "title": "åŒåæ ‡è½´ï¼šå·¦å³ä¸¤ä¸ª Y è½´çš„ç»˜å›¾æŠ€å·§",
    "section": "å¸¸è§é—®é¢˜",
    "text": "å¸¸è§é—®é¢˜\n\n1. å¦‚ä½•ç¡®å®šåˆé€‚çš„è½¬æ¢ç³»æ•°ï¼Ÿ\næœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯è®©ä¸¤ä¸ªå˜é‡çš„æœ€å¤§å€¼å¯¹é½ï¼š\ncoef &lt;- max(ä¸»è½´å˜é‡) / max(æ¬¡è½´å˜é‡)\nä¹Ÿå¯ä»¥æ ¹æ®æ•°æ®èŒƒå›´è°ƒæ•´ï¼š\n# è®©ä¸¤ä¸ªå˜é‡çš„èŒƒå›´å¯¹é½\ncoef &lt;- diff(range(ä¸»è½´å˜é‡)) / diff(range(æ¬¡è½´å˜é‡))\n\n\n2. æ¬¡è½´æ•°æ®æ˜¾ç¤ºä¸å®Œæ•´æ€ä¹ˆåŠï¼Ÿ\nè°ƒæ•´ä¸»è½´çš„ limitsï¼š\nscale_y_continuous(\n  limits = c(0, max(ä¸»è½´å˜é‡) * 1.1),  # ç•™å‡º10%ç©ºé—´\n  sec.axis = sec_axis(...)\n)\n\n\n3. å¦‚ä½•è®©æ¬¡è½´ä» 0 å¼€å§‹ï¼Ÿ\néœ€è¦å¯¹æ•°æ®è¿›è¡Œåç§»å˜æ¢ï¼š\n\n# ç¤ºä¾‹ï¼šæ¬¡è½´æ•°æ®èŒƒå›´æ˜¯ 10-30ï¼Œæƒ³è®©å®ƒä» 0 å¼€å§‹æ˜¾ç¤º\ndf_offset &lt;- data.frame(\n  x = 1:5,\n  y1 = c(100, 150, 200, 180, 220),\n  y2 = c(10, 15, 20, 25, 30)\n)\n\n# è®¡ç®—åç§»å’Œç¼©æ”¾\ny2_min &lt;- min(df_offset$y2)\ny2_max &lt;- max(df_offset$y2)\ny1_max &lt;- max(df_offset$y1)\n\n# å˜æ¢å…¬å¼: y2_transformed = (y2 - y2_min) * y1_max / (y2_max - y2_min)\ncoef &lt;- y1_max / (y2_max - y2_min)\noffset &lt;- y2_min\n\nggplot(df_offset, aes(x = x)) +\n  geom_col(aes(y = y1), fill = \"#4f46e5\", alpha = 0.7) +\n  geom_line(aes(y = (y2 - offset) * coef), color = \"#ef4444\", linewidth = 1.2) +\n  scale_y_continuous(\n    name = \"ä¸»è½´\",\n    sec.axis = sec_axis(~ . / coef + offset, name = \"æ¬¡è½´\")\n  ) +\n  theme_bw()\n\n\n\n\n\n\n\n\n\n\n4. åŒåæ ‡è½´ vs åˆ†é¢å›¾\nå½“ä¸ç¡®å®šæ˜¯å¦ä½¿ç”¨åŒåæ ‡è½´æ—¶ï¼Œè€ƒè™‘ç”¨åˆ†é¢å›¾æ›¿ä»£ï¼š\n\n# æ•°æ®è½¬æ¢ä¸ºé•¿æ ¼å¼\ndf_long &lt;- df |&gt;\n  pivot_longer(cols = c(sales, growth_rate), \n               names_to = \"metric\", \n               values_to = \"value\") |&gt;\n  mutate(metric = ifelse(metric == \"sales\", \"é”€å”®é¢\", \"å¢é•¿ç‡ (%)\"))\n\n# åˆ†é¢å›¾\nggplot(df_long, aes(x = month, y = value, color = metric)) +\n  geom_line(linewidth = 1.2) +\n  geom_point(size = 2.5) +\n  facet_wrap(~ metric, ncol = 1, scales = \"free_y\") +\n  scale_x_continuous(breaks = 1:12, labels = paste0(1:12, \"æœˆ\")) +\n  labs(title = \"æœˆåº¦é”€å”®æ•°æ®\", x = NULL, y = NULL, color = NULL) +\n  theme_bw(base_size = 12) +\n  theme(legend.position = \"none\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "åŒåæ ‡è½´"
    ]
  },
  {
    "objectID": "2019-dualaxis.html#æ€»ç»“",
    "href": "2019-dualaxis.html#æ€»ç»“",
    "title": "åŒåæ ‡è½´ï¼šå·¦å³ä¸¤ä¸ª Y è½´çš„ç»˜å›¾æŠ€å·§",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nåŒåæ ‡è½´çš„æ ¸å¿ƒè¦ç‚¹ï¼š\n\nåŸç†ï¼šæ¬¡è½´æ˜¯ä¸»è½´çš„çº¿æ€§å˜æ¢ï¼Œé€šè¿‡ sec_axis() å®ç°\nè½¬æ¢ç³»æ•°ï¼šcoef = max(ä¸»è½´) / max(æ¬¡è½´)\nç»˜åˆ¶æ¬¡è½´æ•°æ®ï¼šä¹˜ä»¥ç³»æ•° y2 * coef\nè®¾ç½®æ¬¡è½´åˆ»åº¦ï¼šé™¤ä»¥ç³»æ•° ~ . / coef\nç¾åŒ–ï¼šåŒ¹é…åæ ‡è½´é¢œè‰²ï¼Œæ·»åŠ å›¾ä¾‹\n\nä½¿ç”¨å»ºè®®ï¼š\n\nâœ… ä¸¤ä¸ªå˜é‡æœ‰æ˜ç¡®å…³è”æ—¶ä½¿ç”¨\nâœ… ç”¨é¢œè‰²åŒºåˆ†ä¸¤ä¸ªè½´\nâœ… æ¸…æ™°æ ‡æ³¨å•ä½\nâŒ é¿å…åˆ»æ„è°ƒæ•´æ¯”ä¾‹è¯¯å¯¼è¯»è€…\nâŒ å½“æ•°æ®å¤æ‚æ—¶ï¼Œè€ƒè™‘åˆ†é¢å›¾æ›¿ä»£",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "åŒåæ ‡è½´"
    ]
  },
  {
    "objectID": "2019-dualaxis.html#å‚è€ƒèµ„æº",
    "href": "2019-dualaxis.html#å‚è€ƒèµ„æº",
    "title": "åŒåæ ‡è½´ï¼šå·¦å³ä¸¤ä¸ª Y è½´çš„ç»˜å›¾æŠ€å·§",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nggplot2 å®˜æ–¹æ–‡æ¡£ - sec_axis\nggnewscale åŒ…\nWhy not to use two Y axes - å…³äºåŒåæ ‡è½´äº‰è®®çš„è®¨è®º",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "âœ¨ è¿›é˜¶ç¾åŒ–",
      "åŒåæ ‡è½´"
    ]
  },
  {
    "objectID": "2021-cowplot.html",
    "href": "2021-cowplot.html",
    "title": "cowplot: ä¸“ä¸šå›¾å½¢ç»„åˆä¸ç¾åŒ–",
    "section": "",
    "text": "cowplot æ˜¯ ggplot2 çš„æ‰©å±•åŒ…ï¼Œä¸“æ³¨äºï¼š\n\nä¸“ä¸šä¸»é¢˜ï¼šå‡ºç‰ˆçº§ç®€æ´ä¸»é¢˜\nå›¾å½¢ç»„åˆï¼šçµæ´»çš„å¤šå›¾æ’åˆ—\nå›¾å½¢åµŒå…¥ï¼šåœ¨å›¾ä¸­æ·»åŠ å­å›¾\næ ‡ç­¾æ³¨é‡Šï¼šè‡ªåŠ¨æ·»åŠ  A/B/C é¢æ¿æ ‡ç­¾\nå¯¹é½æ§åˆ¶ï¼šç²¾ç¡®å¯¹é½å¤šå›¾åæ ‡è½´\n\n\nlibrary(ggplot2)\nlibrary(cowplot)\nlibrary(dplyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "cowplot - å›¾å½¢ç»„åˆ"
    ]
  },
  {
    "objectID": "2021-cowplot.html#ç®€ä»‹",
    "href": "2021-cowplot.html#ç®€ä»‹",
    "title": "cowplot: ä¸“ä¸šå›¾å½¢ç»„åˆä¸ç¾åŒ–",
    "section": "",
    "text": "cowplot æ˜¯ ggplot2 çš„æ‰©å±•åŒ…ï¼Œä¸“æ³¨äºï¼š\n\nä¸“ä¸šä¸»é¢˜ï¼šå‡ºç‰ˆçº§ç®€æ´ä¸»é¢˜\nå›¾å½¢ç»„åˆï¼šçµæ´»çš„å¤šå›¾æ’åˆ—\nå›¾å½¢åµŒå…¥ï¼šåœ¨å›¾ä¸­æ·»åŠ å­å›¾\næ ‡ç­¾æ³¨é‡Šï¼šè‡ªåŠ¨æ·»åŠ  A/B/C é¢æ¿æ ‡ç­¾\nå¯¹é½æ§åˆ¶ï¼šç²¾ç¡®å¯¹é½å¤šå›¾åæ ‡è½´\n\n\nlibrary(ggplot2)\nlibrary(cowplot)\nlibrary(dplyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "cowplot - å›¾å½¢ç»„åˆ"
    ]
  },
  {
    "objectID": "2021-cowplot.html#ä¸»é¢˜ç³»ç»Ÿ",
    "href": "2021-cowplot.html#ä¸»é¢˜ç³»ç»Ÿ",
    "title": "cowplot: ä¸“ä¸šå›¾å½¢ç»„åˆä¸ç¾åŒ–",
    "section": "ä¸»é¢˜ç³»ç»Ÿ",
    "text": "ä¸»é¢˜ç³»ç»Ÿ\n\ntheme_cowplot - ç»å…¸ä¸»é¢˜\n\np &lt;- ggplot(mtcars, aes(wt, mpg)) + \n  geom_point(aes(color = factor(cyl)), size = 3)\n\n# cowplot ç»å…¸ä¸»é¢˜ï¼šæ— ç½‘æ ¼çº¿ï¼Œç²—åæ ‡è½´\np + theme_cowplot(font_size = 12)\n\n\n\n\n\n\n\n\n\n\ntheme_minimal_grid - æç®€ç½‘æ ¼\n\np + theme_minimal_grid(font_size = 12)\n\n\n\n\n\n\n\n\n\n\ntheme_minimal_hgrid / vgrid\n\np1 &lt;- p + theme_minimal_hgrid() + ggtitle(\"æ°´å¹³ç½‘æ ¼\")\np2 &lt;- p + theme_minimal_vgrid() + ggtitle(\"å‚ç›´ç½‘æ ¼\")\nplot_grid(p1, p2, ncol = 2)\n\n\n\n\n\n\n\n\n\n\ntheme_half_open - åŠå¼€æ”¾åæ ‡è½´\n\n# åªæ˜¾ç¤ºå·¦ä¸‹åæ ‡è½´ï¼Œé€‚åˆç§‘ç ”å›¾\np + theme_half_open(font_size = 12)\n\n\n\n\n\n\n\n\n\n\nä¸»é¢˜å‚æ•°è¯¦è§£\n\np + theme_cowplot(\n  font_size = 14,       # åŸºç¡€å­—å·\n  font_family = \"\",     # å­—ä½“\n  line_size = 0.5,      # çº¿æ¡ç²—ç»†\n  rel_small = 12/14,    # å°å­—å·æ¯”ä¾‹\n  rel_tiny = 10/14,     # æ›´å°å­—å·æ¯”ä¾‹\n  rel_large = 16/14     # å¤§å­—å·æ¯”ä¾‹\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "cowplot - å›¾å½¢ç»„åˆ"
    ]
  },
  {
    "objectID": "2021-cowplot.html#å›¾å½¢ç»„åˆplot_grid",
    "href": "2021-cowplot.html#å›¾å½¢ç»„åˆplot_grid",
    "title": "cowplot: ä¸“ä¸šå›¾å½¢ç»„åˆä¸ç¾åŒ–",
    "section": "å›¾å½¢ç»„åˆï¼šplot_grid()",
    "text": "å›¾å½¢ç»„åˆï¼šplot_grid()\n\nåŸºç¡€ç»„åˆ\n\np1 &lt;- ggplot(mtcars, aes(wt, mpg)) + geom_point() + theme_cowplot()\np2 &lt;- ggplot(mtcars, aes(disp, mpg)) + geom_point() + theme_cowplot()\np3 &lt;- ggplot(mtcars, aes(factor(cyl))) + geom_bar(fill = \"steelblue\") + theme_cowplot()\np4 &lt;- ggplot(mtcars, aes(hp, mpg)) + geom_point() + theme_cowplot()\n\n# 2x2 ç½‘æ ¼\nplot_grid(p1, p2, p3, p4, ncol = 2)\n\n\n\n\n\n\n\n\n\n\næ·»åŠ æ ‡ç­¾\n\n# A/B/C/D æ ‡ç­¾\nplot_grid(\n  p1, p2, p3, p4,\n  ncol = 2,\n  labels = \"AUTO\",          # è‡ªåŠ¨ A/B/C/D\n  label_size = 14,          # æ ‡ç­¾å­—å·\n  label_fontface = \"bold\"   # ç²—ä½“\n)\n\n\n\n\n\n\n\n\n\n# è‡ªå®šä¹‰æ ‡ç­¾\nplot_grid(\n  p1, p2,\n  labels = c(\"å›¾ 1\", \"å›¾ 2\"),\n  label_size = 12,\n  label_x = 0.1,   # æ ‡ç­¾ x ä½ç½® (0-1)\n  label_y = 0.95   # æ ‡ç­¾ y ä½ç½® (0-1)\n)\n\n\n\n\n\n\n\n\n\n\næ§åˆ¶ç›¸å¯¹å¤§å°\n\n# rel_widths æ§åˆ¶åˆ—å®½æ¯”ä¾‹\nplot_grid(p1, p3, ncol = 2, rel_widths = c(2, 1))  # å·¦:å³ = 2:1\n\n\n\n\n\n\n\n\n\n# rel_heights æ§åˆ¶è¡Œé«˜æ¯”ä¾‹\nplot_grid(p1, p3, nrow = 2, rel_heights = c(2, 1))  # ä¸Š:ä¸‹ = 2:1\n\n\n\n\n\n\n\n\n\n\nå¯¹é½åæ ‡è½´\n\n# ä¸åŒ y è½´èŒƒå›´çš„å›¾\npa &lt;- ggplot(mtcars, aes(wt, mpg)) + geom_point() + theme_cowplot()\npb &lt;- ggplot(mtcars, aes(wt, disp)) + geom_point() + theme_cowplot()\n\n# align å‚æ•°å¯¹é½åæ ‡è½´\nplot_grid(\n  pa, pb,\n  ncol = 2,\n  align = \"h\",   # æ°´å¹³å¯¹é½ (h/v/hv/none)\n  axis = \"bt\"    # å¯¹é½å“ªäº›è½´ (t/b/l/r/tb/lr/tblr)\n)\n\n\n\n\n\n\n\n\n\n\nåµŒå¥—ç»„åˆ\n\n# å¤æ‚å¸ƒå±€ï¼šå·¦è¾¹ä¸€ä¸ªå¤§å›¾ï¼Œå³è¾¹ä¸¤ä¸ªå°å›¾\nright_col &lt;- plot_grid(p2, p3, ncol = 1, labels = c(\"B\", \"C\"))\nplot_grid(p1, right_col, ncol = 2, labels = c(\"A\", \"\"), rel_widths = c(1.5, 1))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "cowplot - å›¾å½¢ç»„åˆ"
    ]
  },
  {
    "objectID": "2021-cowplot.html#å›¾å½¢åµŒå…¥draw_plot",
    "href": "2021-cowplot.html#å›¾å½¢åµŒå…¥draw_plot",
    "title": "cowplot: ä¸“ä¸šå›¾å½¢ç»„åˆä¸ç¾åŒ–",
    "section": "å›¾å½¢åµŒå…¥ï¼šdraw_plot()",
    "text": "å›¾å½¢åµŒå…¥ï¼šdraw_plot()\n\nåœ¨å›¾ä¸­åµŒå…¥å­å›¾\n\n# ä¸»å›¾\nmain_plot &lt;- ggplot(mtcars, aes(wt, mpg)) +\n  geom_point(size = 3) +\n  theme_cowplot()\n\n# å­å›¾ï¼ˆç¼©ç•¥å›¾ï¼‰\ninset_plot &lt;- ggplot(mtcars, aes(factor(cyl))) +\n  geom_bar(fill = \"steelblue\") +\n  theme_cowplot(font_size = 10) +\n  theme(plot.background = element_rect(fill = \"white\", color = \"grey50\"))\n\n# å°†å­å›¾åµŒå…¥ä¸»å›¾\nggdraw(main_plot) +\n  draw_plot(\n    inset_plot,\n    x = 0.6, y = 0.6,           # å­å›¾å·¦ä¸‹è§’ä½ç½®\n    width = 0.35, height = 0.35  # å­å›¾å°ºå¯¸\n  )\n\n\n\n\n\n\n\n\n\n\nå¤šä¸ªåµŒå…¥å›¾\n\n# å¯åµŒå…¥å¤šä¸ªå­å›¾\ninset2 &lt;- ggplot(mtcars, aes(hp)) +\n  geom_histogram(fill = \"coral\", bins = 15) +\n  theme_cowplot(font_size = 9) +\n  labs(title = \"HPåˆ†å¸ƒ\")\n\nggdraw(main_plot) +\n  draw_plot(inset_plot, x = 0.05, y = 0.6, width = 0.3, height = 0.35) +\n  draw_plot(inset2, x = 0.65, y = 0.1, width = 0.3, height = 0.3)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "cowplot - å›¾å½¢ç»„åˆ"
    ]
  },
  {
    "objectID": "2021-cowplot.html#æ·»åŠ æ³¨é‡Š",
    "href": "2021-cowplot.html#æ·»åŠ æ³¨é‡Š",
    "title": "cowplot: ä¸“ä¸šå›¾å½¢ç»„åˆä¸ç¾åŒ–",
    "section": "æ·»åŠ æ³¨é‡Š",
    "text": "æ·»åŠ æ³¨é‡Š\n\ndraw_label()\n\n# æ·»åŠ æ–‡å­—æ ‡ç­¾\nggdraw(main_plot) +\n  draw_label(\n    \"R2 = 0.75\",\n    x = 0.8, y = 0.9,\n    size = 14,\n    fontface = \"bold\",\n    color = \"red\"\n  )\n\n\n\n\n\n\n\n\n\n\ndraw_image() - åµŒå…¥å›¾ç‰‡\n\n# åµŒå…¥å¤–éƒ¨å›¾ç‰‡ï¼ˆå¦‚ logoï¼‰\nggdraw() +\n  draw_image(\"path/to/logo.png\", x = 0.4, y = 0.4, width = 0.2) +\n  draw_plot(p1)\n\n\n\ndraw_line() - æ·»åŠ çº¿æ¡\n\n# æ·»åŠ å‚è€ƒçº¿æˆ–ç®­å¤´\nggdraw(main_plot) +\n  draw_line(x = c(0.2, 0.5), y = c(0.2, 0.8), color = \"red\", size = 1)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "cowplot - å›¾å½¢ç»„åˆ"
    ]
  },
  {
    "objectID": "2021-cowplot.html#åæ ‡è½´å¯¹é½align_plots",
    "href": "2021-cowplot.html#åæ ‡è½´å¯¹é½align_plots",
    "title": "cowplot: ä¸“ä¸šå›¾å½¢ç»„åˆä¸ç¾åŒ–",
    "section": "åæ ‡è½´å¯¹é½ï¼šalign_plots()",
    "text": "åæ ‡è½´å¯¹é½ï¼šalign_plots()\nå½“å›¾å½¢æœ‰ä¸åŒçš„åæ ‡è½´èŒƒå›´æ—¶ï¼Œplot_grid() çš„ align å‚æ•°å¯èƒ½ä¸å¤Ÿç”¨ï¼Œæ­¤æ—¶ä½¿ç”¨ align_plots() æ›´ç²¾ç¡®ã€‚\n\n# ä¸¤ä¸ª y è½´èŒƒå›´å·®å¼‚å¤§çš„å›¾\nplot_a &lt;- ggplot(mtcars, aes(wt, mpg)) + geom_point() + theme_cowplot()\nplot_b &lt;- ggplot(mtcars, aes(wt, hp)) + geom_point() + theme_cowplot()\n\n# ç²¾ç¡®å¯¹é½\naligned &lt;- align_plots(plot_a, plot_b, align = \"hv\", axis = \"tblr\")\nplot_grid(aligned[[1]], aligned[[2]], ncol = 2)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "cowplot - å›¾å½¢ç»„åˆ"
    ]
  },
  {
    "objectID": "2021-cowplot.html#ä¿å­˜ç»„åˆå›¾",
    "href": "2021-cowplot.html#ä¿å­˜ç»„åˆå›¾",
    "title": "cowplot: ä¸“ä¸šå›¾å½¢ç»„åˆä¸ç¾åŒ–",
    "section": "ä¿å­˜ç»„åˆå›¾",
    "text": "ä¿å­˜ç»„åˆå›¾\n\nsave_plot()\n\n# cowplot æä¾›çš„ä¿å­˜å‡½æ•°\ncombined &lt;- plot_grid(p1, p2, p3, p4, ncol = 2, labels = \"AUTO\")\n\n# ä¿å­˜ä¸º PNG\nsave_plot(\n  \"combined_plot.png\",\n  combined,\n  ncol = 2,          # åˆ—æ•°ï¼ˆç”¨äºè®¡ç®—å°ºå¯¸ï¼‰\n  nrow = 2,          # è¡Œæ•°\n  base_width = 4,    # æ¯ä¸ªå­å›¾å®½åº¦ï¼ˆè‹±å¯¸ï¼‰\n  base_height = 3    # æ¯ä¸ªå­å›¾é«˜åº¦\n)\n\n# ä¿å­˜ä¸º PDFï¼ˆçŸ¢é‡å›¾ï¼‰\nsave_plot(\"combined_plot.pdf\", combined, ncol = 2, nrow = 2)\n\n\n\nggsave2() - å¢å¼ºç‰ˆ ggsave\n\n# ggsave2 è‡ªåŠ¨å¤„ç†ç»„åˆå›¾å°ºå¯¸\nggsave2(\"output.png\", combined, width = 10, height = 8, dpi = 300)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "cowplot - å›¾å½¢ç»„åˆ"
    ]
  },
  {
    "objectID": "2021-cowplot.html#ä¸-ggplot2-facet-å¯¹æ¯”",
    "href": "2021-cowplot.html#ä¸-ggplot2-facet-å¯¹æ¯”",
    "title": "cowplot: ä¸“ä¸šå›¾å½¢ç»„åˆä¸ç¾åŒ–",
    "section": "ä¸ ggplot2 facet å¯¹æ¯”",
    "text": "ä¸ ggplot2 facet å¯¹æ¯”\n\n\n\nåœºæ™¯\næ¨èæ–¹æ³•\n\n\n\n\nåŒä¸€æ•°æ®çš„åˆ†é¢\nggplot + facet_wrap()\n\n\nä¸åŒæ•°æ®/ä¸åŒå›¾\ncowplot::plot_grid()\n\n\néœ€è¦ä¸åŒåæ ‡è½´\ncowplot::plot_grid(align = â€œhâ€)\n\n\néœ€è¦åµŒå…¥å­å›¾\nggdraw() + draw_plot()\n\n\nå¤æ‚åµŒå¥—å¸ƒå±€\ncowplot åµŒå¥— plot_grid()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "cowplot - å›¾å½¢ç»„åˆ"
    ]
  },
  {
    "objectID": "2021-cowplot.html#å®æˆ˜å®Œæ•´ç§‘ç ”å›¾",
    "href": "2021-cowplot.html#å®æˆ˜å®Œæ•´ç§‘ç ”å›¾",
    "title": "cowplot: ä¸“ä¸šå›¾å½¢ç»„åˆä¸ç¾åŒ–",
    "section": "å®æˆ˜ï¼šå®Œæ•´ç§‘ç ”å›¾",
    "text": "å®æˆ˜ï¼šå®Œæ•´ç§‘ç ”å›¾\n\nset.seed(42)\ndf &lt;- mtcars |&gt; mutate(group = ifelse(mpg &gt; 20, \"High\", \"Low\"))\n\n# å›¾ A: æ•£ç‚¹å›¾ + å›å½’\nfig_a &lt;- ggplot(df, aes(wt, mpg)) +\n  geom_point(aes(color = group), size = 3) +\n  geom_smooth(method = \"lm\", se = TRUE, color = \"grey40\") +\n  scale_color_manual(values = c(\"High\" = \"#E64B35\", \"Low\" = \"#4DAF4A\")) +\n  labs(x = \"Weight (1000 lbs)\", y = \"Miles per Gallon\", color = \"MPG Group\") +\n  theme_half_open() +\n  theme(legend.position = c(0.8, 0.8))\n\n# å›¾ B: ç®±çº¿å›¾\nfig_b &lt;- ggplot(df, aes(factor(cyl), mpg, fill = group)) +\n  geom_boxplot() +\n  scale_fill_manual(values = c(\"High\" = \"#E64B35\", \"Low\" = \"#4DAF4A\")) +\n  labs(x = \"Cylinders\", y = \"MPG\", fill = \"Group\") +\n  theme_half_open() +\n  theme(legend.position = \"none\")\n\n# å›¾ C: å¯†åº¦å›¾\nfig_c &lt;- ggplot(df, aes(mpg, fill = group)) +\n  geom_density(alpha = 0.6) +\n  scale_fill_manual(values = c(\"High\" = \"#E64B35\", \"Low\" = \"#4DAF4A\")) +\n  labs(x = \"MPG\", y = \"Density\") +\n  theme_minimal_hgrid() +\n  theme(legend.position = \"none\")\n\n# å›¾ D: æŸ±çŠ¶å›¾\nfig_d &lt;- df |&gt;\n  count(cyl, group) |&gt;\n  ggplot(aes(factor(cyl), n, fill = group)) +\n  geom_col(position = \"dodge\") +\n  scale_fill_manual(values = c(\"High\" = \"#E64B35\", \"Low\" = \"#4DAF4A\")) +\n  labs(x = \"Cylinders\", y = \"Count\") +\n  theme_half_open() +\n  theme(legend.position = \"none\")\n\n# ç»„åˆï¼šä¸Šæ–¹å¤§å›¾ï¼Œä¸‹æ–¹ä¸‰ä¸ªå°å›¾\ntop_row &lt;- fig_a\nbottom_row &lt;- plot_grid(fig_b, fig_c, fig_d, ncol = 3, labels = c(\"B\", \"C\", \"D\"), label_size = 14)\n\n# æœ€ç»ˆç»„åˆ\nfinal_plot &lt;- plot_grid(\n  top_row, bottom_row,\n  nrow = 2,\n  labels = c(\"A\", \"\"),\n  label_size = 14,\n  rel_heights = c(1.2, 1)\n)\n\nfinal_plot",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "cowplot - å›¾å½¢ç»„åˆ"
    ]
  },
  {
    "objectID": "2021-cowplot.html#ä¸-patchwork-å¯¹æ¯”",
    "href": "2021-cowplot.html#ä¸-patchwork-å¯¹æ¯”",
    "title": "cowplot: ä¸“ä¸šå›¾å½¢ç»„åˆä¸ç¾åŒ–",
    "section": "ä¸ patchwork å¯¹æ¯”",
    "text": "ä¸ patchwork å¯¹æ¯”\n\n\n\nç‰¹æ€§\ncowplot\npatchwork\n\n\n\n\nè¯­æ³•\nplot_grid(p1, p2)\np1 + p2 / p1 | p2\n\n\nå›¾å½¢åµŒå…¥\ndraw_plot()\ninset_element()\n\n\nåæ ‡è½´å¯¹é½\néœ€æ‰‹åŠ¨ align\nè‡ªåŠ¨å¯¹é½\n\n\næ ‡ç­¾æ·»åŠ \nlabels = â€œAUTOâ€\nplot_annotation(tag_levels)\n\n\nä¸»é¢˜ç³»ç»Ÿ\nä¸°å¯Œçš„ä¸“ä¸šä¸»é¢˜\næ— \n\n\nå­¦ä¹ æ›²çº¿\nä¸­ç­‰\nç®€å•\n\n\n\né€‰æ‹©å»ºè®®ï¼š\n\néœ€è¦ä¸“ä¸šä¸»é¢˜ â†’ cowplot\nå¿«é€Ÿç»„åˆ â†’ patchwork\nå›¾å½¢åµŒå…¥ â†’ ä¸¤è€…å‡å¯\nå¤æ‚å¸ƒå±€æ§åˆ¶ â†’ cowplot",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "cowplot - å›¾å½¢ç»„åˆ"
    ]
  },
  {
    "objectID": "2021-cowplot.html#æå–ä¸å…±äº«å›¾ä¾‹",
    "href": "2021-cowplot.html#æå–ä¸å…±äº«å›¾ä¾‹",
    "title": "cowplot: ä¸“ä¸šå›¾å½¢ç»„åˆä¸ç¾åŒ–",
    "section": "æå–ä¸å…±äº«å›¾ä¾‹",
    "text": "æå–ä¸å…±äº«å›¾ä¾‹\n\n# åˆ›å»ºå¸¦å›¾ä¾‹çš„å›¾\np_legend &lt;- ggplot(mtcars, aes(wt, mpg, color = factor(cyl))) +\n  geom_point(size = 3) +\n  scale_color_brewer(palette = \"Set1\", name = \"Cylinders\") +\n  theme_cowplot()\n\n# æå–å›¾ä¾‹\nlegend &lt;- get_legend(p_legend)\n\n# åˆ›å»ºæ— å›¾ä¾‹çš„å›¾\np_no_leg1 &lt;- p_legend + theme(legend.position = \"none\")\np_no_leg2 &lt;- ggplot(mtcars, aes(disp, mpg, color = factor(cyl))) +\n  geom_point(size = 3) +\n  scale_color_brewer(palette = \"Set1\") +\n  theme_cowplot() +\n  theme(legend.position = \"none\")\n\n# ç»„åˆï¼šä¸¤å›¾å…±äº«ä¸€ä¸ªå›¾ä¾‹\nplot_grid(\n  plot_grid(p_no_leg1, p_no_leg2, ncol = 2),\n  legend,\n  ncol = 2,\n  rel_widths = c(1, 0.15)\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "cowplot - å›¾å½¢ç»„åˆ"
    ]
  },
  {
    "objectID": "2021-cowplot.html#å¸¸ç”¨å‡½æ•°é€ŸæŸ¥",
    "href": "2021-cowplot.html#å¸¸ç”¨å‡½æ•°é€ŸæŸ¥",
    "title": "cowplot: ä¸“ä¸šå›¾å½¢ç»„åˆä¸ç¾åŒ–",
    "section": "å¸¸ç”¨å‡½æ•°é€ŸæŸ¥",
    "text": "å¸¸ç”¨å‡½æ•°é€ŸæŸ¥\n\n\n\nå‡½æ•°\nç”¨é€”\n\n\n\n\ntheme_cowplot()\nç»å…¸æ— ç½‘æ ¼ä¸»é¢˜\n\n\ntheme_half_open()\nåŠå¼€æ”¾åæ ‡è½´\n\n\ntheme_minimal_grid()\næç®€ç½‘æ ¼\n\n\nplot_grid()\nç»„åˆå¤šå›¾\n\n\nalign_plots()\nç²¾ç¡®å¯¹é½åæ ‡è½´\n\n\nggdraw()\nåˆ›å»ºç»‘å›¾ç”»å¸ƒ\n\n\ndraw_plot()\nåµŒå…¥å­å›¾\n\n\ndraw_label()\næ·»åŠ æ–‡å­—\n\n\ndraw_image()\nåµŒå…¥å›¾ç‰‡\n\n\nsave_plot()\nä¿å­˜ç»„åˆå›¾\n\n\nget_legend()\næå–å›¾ä¾‹\n\n\nget_title()\næå–æ ‡é¢˜",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "cowplot - å›¾å½¢ç»„åˆ"
    ]
  },
  {
    "objectID": "2021-cowplot.html#æ€»ç»“",
    "href": "2021-cowplot.html#æ€»ç»“",
    "title": "cowplot: ä¸“ä¸šå›¾å½¢ç»„åˆä¸ç¾åŒ–",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\ncowplot æ ¸å¿ƒä¼˜åŠ¿ï¼š\n\nä¸“ä¸šä¸»é¢˜ - theme_cowplot(), theme_half_open() ç›´æ¥ç”¨äºç§‘ç ”å›¾\nçµæ´»ç»„åˆ - plot_grid() æ”¯æŒå¤æ‚åµŒå¥—å¸ƒå±€\nç²¾ç¡®æ§åˆ¶ - rel_widths, rel_heights, align å‚æ•°\nå›¾å½¢åµŒå…¥ - draw_plot() è½»æ¾æ·»åŠ å­å›¾\nè‡ªåŠ¨æ ‡ç­¾ - labels = â€œAUTOâ€ ä¸€é”®æ·»åŠ é¢æ¿æ ‡ç­¾\n\næ¨èå·¥ä½œæµï¼š\n\n# 1. åˆ›å»ºå•å›¾ï¼Œåº”ç”¨ cowplot ä¸»é¢˜\np1 &lt;- ggplot(...) + theme_half_open()\np2 &lt;- ggplot(...) + theme_half_open()\n\n# 2. ç»„åˆå¹¶æ·»åŠ æ ‡ç­¾\ncombined &lt;- plot_grid(p1, p2, labels = \"AUTO\", align = \"hv\")\n\n# 3. ä¿å­˜\nsave_plot(\"output.pdf\", combined, ncol = 2)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "cowplot - å›¾å½¢ç»„åˆ"
    ]
  },
  {
    "objectID": "2023-radar.html",
    "href": "2023-radar.html",
    "title": "é›·è¾¾å›¾ (Radar Chart) ç»˜åˆ¶æŒ‡å—",
    "section": "",
    "text": "é›·è¾¾å›¾ (Radar Chart)ï¼Œåˆç§°èœ˜è››å›¾ (Spider Chart) æˆ–æ˜Ÿå½¢å›¾ (Star Plot)ï¼Œæ˜¯ä¸€ç§ç”¨äºå±•ç¤ºå¤šç»´æ•°æ®çš„å¯è§†åŒ–æ–¹æ³•ã€‚å®ƒå°†å¤šä¸ªå˜é‡çš„å€¼ç»‘åˆ¶åœ¨ä»ä¸­å¿ƒå‘å¤–è¾å°„çš„è½´ä¸Šï¼Œå½¢æˆä¸€ä¸ªå¤šè¾¹å½¢åŒºåŸŸã€‚\n\n\n\n\n\nåœºæ™¯\nç¤ºä¾‹\n\n\n\n\nèƒ½åŠ›è¯„ä¼°\nå‘˜å·¥æŠ€èƒ½ç”»åƒã€å­¦ç”Ÿç»¼åˆç´ è´¨\n\n\näº§å“å¯¹æ¯”\næ‰‹æœºæ€§èƒ½å¯¹æ¯”ã€æŠ¤è‚¤å“æˆåˆ†åˆ†æ\n\n\né—®å·åˆ†æ\næ»¡æ„åº¦å¤šç»´è¯„åˆ†ã€æœåŠ¡è´¨é‡è¯„ä¼°\n\n\nè¿åŠ¨æ•°æ®\nçƒå‘˜èƒ½åŠ›å…­è¾¹å½¢ã€å¥èº«æŒ‡æ ‡è¿½è¸ª\n\n\n\n\n[!NOTE] é›·è¾¾å›¾æœ€é€‚åˆå±•ç¤º 5-10 ä¸ªç»´åº¦çš„æ•°æ®ã€‚ç»´åº¦è¿‡å¤šä¼šä½¿å›¾å½¢æ‚ä¹±ï¼Œè¿‡å°‘åˆ™ä¸å¦‚æŸ±çŠ¶å›¾ç›´è§‚ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "é›·è¾¾å›¾"
    ]
  },
  {
    "objectID": "2023-radar.html#ä»€ä¹ˆæ˜¯é›·è¾¾å›¾",
    "href": "2023-radar.html#ä»€ä¹ˆæ˜¯é›·è¾¾å›¾",
    "title": "é›·è¾¾å›¾ (Radar Chart) ç»˜åˆ¶æŒ‡å—",
    "section": "",
    "text": "é›·è¾¾å›¾ (Radar Chart)ï¼Œåˆç§°èœ˜è››å›¾ (Spider Chart) æˆ–æ˜Ÿå½¢å›¾ (Star Plot)ï¼Œæ˜¯ä¸€ç§ç”¨äºå±•ç¤ºå¤šç»´æ•°æ®çš„å¯è§†åŒ–æ–¹æ³•ã€‚å®ƒå°†å¤šä¸ªå˜é‡çš„å€¼ç»‘åˆ¶åœ¨ä»ä¸­å¿ƒå‘å¤–è¾å°„çš„è½´ä¸Šï¼Œå½¢æˆä¸€ä¸ªå¤šè¾¹å½¢åŒºåŸŸã€‚\n\n\n\n\n\nåœºæ™¯\nç¤ºä¾‹\n\n\n\n\nèƒ½åŠ›è¯„ä¼°\nå‘˜å·¥æŠ€èƒ½ç”»åƒã€å­¦ç”Ÿç»¼åˆç´ è´¨\n\n\näº§å“å¯¹æ¯”\næ‰‹æœºæ€§èƒ½å¯¹æ¯”ã€æŠ¤è‚¤å“æˆåˆ†åˆ†æ\n\n\né—®å·åˆ†æ\næ»¡æ„åº¦å¤šç»´è¯„åˆ†ã€æœåŠ¡è´¨é‡è¯„ä¼°\n\n\nè¿åŠ¨æ•°æ®\nçƒå‘˜èƒ½åŠ›å…­è¾¹å½¢ã€å¥èº«æŒ‡æ ‡è¿½è¸ª\n\n\n\n\n[!NOTE] é›·è¾¾å›¾æœ€é€‚åˆå±•ç¤º 5-10 ä¸ªç»´åº¦çš„æ•°æ®ã€‚ç»´åº¦è¿‡å¤šä¼šä½¿å›¾å½¢æ‚ä¹±ï¼Œè¿‡å°‘åˆ™ä¸å¦‚æŸ±çŠ¶å›¾ç›´è§‚ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "é›·è¾¾å›¾"
    ]
  },
  {
    "objectID": "2023-radar.html#æ–¹æ³•ä¸€fmsb-åŒ…åŸºç¡€-r",
    "href": "2023-radar.html#æ–¹æ³•ä¸€fmsb-åŒ…åŸºç¡€-r",
    "title": "é›·è¾¾å›¾ (Radar Chart) ç»˜åˆ¶æŒ‡å—",
    "section": "2. æ–¹æ³•ä¸€ï¼šfmsb åŒ…ï¼ˆåŸºç¡€ Rï¼‰",
    "text": "2. æ–¹æ³•ä¸€ï¼šfmsb åŒ…ï¼ˆåŸºç¡€ Rï¼‰\nfmsb åŒ…æä¾›äº†æœ€ç»å…¸çš„é›·è¾¾å›¾ç»‘åˆ¶å‡½æ•°ï¼Œè¯­æ³•ç®€æ´ä½†è‡ªå®šä¹‰èƒ½åŠ›æœ‰é™ã€‚\n\nå®‰è£…ä¸åŠ è½½\n\ninstall.packages(\"fmsb\")\n\n\nlibrary(fmsb)\n\n\n\næ•°æ®å‡†å¤‡\nfmsb::radarchart() è¦æ±‚æ•°æ®æ ¼å¼ç‰¹æ®Šï¼šå‰ä¸¤è¡Œå¿…é¡»æ˜¯æœ€å¤§å€¼å’Œæœ€å°å€¼ã€‚\n\n# åˆ›å»ºç¤ºä¾‹æ•°æ®ï¼šä¸‰åå‘˜å·¥çš„èƒ½åŠ›è¯„åˆ† (1-10)\ndata &lt;- data.frame(\n    æ²Ÿé€šèƒ½åŠ› = c(10, 0, 8, 6, 9),\n    æŠ€æœ¯èƒ½åŠ› = c(10, 0, 9, 7, 5),\n    å›¢é˜Ÿåä½œ = c(10, 0, 7, 8, 8),\n    åˆ›æ–°æ€ç»´ = c(10, 0, 6, 9, 7),\n    æ‰§è¡ŒåŠ› = c(10, 0, 9, 5, 6),\n    å­¦ä¹ èƒ½åŠ› = c(10, 0, 8, 8, 9)\n)\nrownames(data) &lt;- c(\"Max\", \"Min\", \"å¼ ä¸‰\", \"æå››\", \"ç‹äº”\")\n\n# æŸ¥çœ‹æ•°æ®ç»“æ„\ndata\n\n     æ²Ÿé€šèƒ½åŠ› æŠ€æœ¯èƒ½åŠ› å›¢é˜Ÿåä½œ åˆ›æ–°æ€ç»´ æ‰§è¡ŒåŠ› å­¦ä¹ èƒ½åŠ›\nMax        10       10       10       10     10       10\nMin         0        0        0        0      0        0\nå¼ ä¸‰        8        9        7        6      9        8\næå››        6        7        8        9      5        8\nç‹äº”        9        5        8        7      6        9\n\n\n\n\nç»‘åˆ¶å•äººé›·è¾¾å›¾\n\n# ç»‘åˆ¶å¼ ä¸‰çš„èƒ½åŠ›ç”»åƒ\nradarchart(\n    data[c(1, 2, 3), ], # Max, Min, å¼ ä¸‰\n    axistype = 1, # æ˜¾ç¤ºæ•°å€¼è½´\n    pcol = \"#4f46e5\", # çº¿æ¡é¢œè‰²\n    pfcol = rgb(0.31, 0.27, 0.9, 0.3), # å¡«å……é¢œè‰²ï¼ˆå¸¦é€æ˜åº¦ï¼‰\n    plwd = 3, # çº¿æ¡å®½åº¦\n    cglcol = \"grey\", # ç½‘æ ¼çº¿é¢œè‰²\n    cglty = 1, # ç½‘æ ¼çº¿ç±»å‹\n    cglwd = 0.8, # ç½‘æ ¼çº¿å®½åº¦\n    axislabcol = \"grey30\", # è½´æ ‡ç­¾é¢œè‰²\n    vlcex = 1.2, # å˜é‡æ ‡ç­¾å¤§å°\n    title = \"å¼ ä¸‰èƒ½åŠ›ç”»åƒ\"\n)\n\n\n\n\n\n\n\n\n\n\nç»‘åˆ¶å¤šäººå¯¹æ¯”é›·è¾¾å›¾\n\n# å®šä¹‰é¢œè‰²\ncolors &lt;- c(\"#4f46e5\", \"#22c55e\", \"#f97316\")\nfills &lt;- c(\n    rgb(0.31, 0.27, 0.9, 0.2),\n    rgb(0.13, 0.77, 0.37, 0.2),\n    rgb(0.98, 0.45, 0.09, 0.2)\n)\n\n# ç»‘åˆ¶ä¸‰äººå¯¹æ¯”\nradarchart(\n    data,\n    axistype = 1,\n    pcol = colors,\n    pfcol = fills,\n    plwd = 2,\n    plty = 1,\n    cglcol = \"grey80\",\n    cglty = 1,\n    cglwd = 0.8,\n    axislabcol = \"grey30\",\n    vlcex = 1.1,\n    title = \"å‘˜å·¥èƒ½åŠ›å¯¹æ¯”\"\n)\n\n# æ·»åŠ å›¾ä¾‹\nlegend(\n    \"topright\",\n    legend = c(\"å¼ ä¸‰\", \"æå››\", \"ç‹äº”\"),\n    col = colors,\n    lwd = 2,\n    bty = \"n\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "é›·è¾¾å›¾"
    ]
  },
  {
    "objectID": "2023-radar.html#æ–¹æ³•äºŒggradar-åŒ…ggplot2-é£æ ¼",
    "href": "2023-radar.html#æ–¹æ³•äºŒggradar-åŒ…ggplot2-é£æ ¼",
    "title": "é›·è¾¾å›¾ (Radar Chart) ç»˜åˆ¶æŒ‡å—",
    "section": "3. æ–¹æ³•äºŒï¼šggradar åŒ…ï¼ˆggplot2 é£æ ¼ï¼‰",
    "text": "3. æ–¹æ³•äºŒï¼šggradar åŒ…ï¼ˆggplot2 é£æ ¼ï¼‰\nggradar åŒ…å°†é›·è¾¾å›¾æ•´åˆåˆ° ggplot2 ç”Ÿæ€ç³»ç»Ÿä¸­ï¼Œæ›´å®¹æ˜“è‡ªå®šä¹‰å’Œç¾åŒ–ã€‚\n\nå®‰è£…\n\n# ä» GitHub å®‰è£…\ndevtools::install_github(\"ricardo-bion/ggradar\")\n\n\nlibrary(ggradar)\nlibrary(dplyr)\nlibrary(scales)\n\n\n\næ•°æ®å‡†å¤‡\nggradar è¦æ±‚æ•°æ®ä¸º 0-1 åŒºé—´ï¼Œç¬¬ä¸€åˆ—ä¸ºåˆ†ç»„å˜é‡ã€‚\n\n# å‡†å¤‡æ•°æ®ï¼ˆæ•°å€¼æ ‡å‡†åŒ–åˆ° 0-1ï¼‰\nradar_data &lt;- data.frame(\n    group = c(\"å¼ ä¸‰\", \"æå››\", \"ç‹äº”\"),\n    æ²Ÿé€šèƒ½åŠ› = c(0.8, 0.6, 0.9),\n    æŠ€æœ¯èƒ½åŠ› = c(0.9, 0.7, 0.5),\n    å›¢é˜Ÿåä½œ = c(0.7, 0.8, 0.8),\n    åˆ›æ–°æ€ç»´ = c(0.6, 0.9, 0.7),\n    æ‰§è¡ŒåŠ› = c(0.9, 0.5, 0.6),\n    å­¦ä¹ èƒ½åŠ› = c(0.8, 0.8, 0.9)\n)\n\nradar_data\n\n\n\nç»‘åˆ¶ ggradar å›¾\n\nggradar(\n    radar_data,\n    font.radar = \"sans\",\n    grid.min = 0,\n    grid.mid = 0.5,\n    grid.max = 1,\n    grid.label.size = 4,\n    axis.label.size = 4,\n    group.line.width = 1,\n    group.point.size = 3,\n    group.colours = c(\"#4f46e5\", \"#22c55e\", \"#f97316\"),\n    background.circle.colour = \"white\",\n    gridline.mid.colour = \"grey70\",\n    legend.position = \"bottom\",\n    legend.text.size = 12,\n    plot.title = \"å‘˜å·¥èƒ½åŠ›é›·è¾¾å›¾\"\n) +\n    theme(\n        plot.title = element_text(hjust = 0.5, size = 16, face = \"bold\"),\n        legend.title = element_blank()\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "é›·è¾¾å›¾"
    ]
  },
  {
    "objectID": "2023-radar.html#æ–¹æ³•ä¸‰ggplot2-æ‰‹åŠ¨å®ç°",
    "href": "2023-radar.html#æ–¹æ³•ä¸‰ggplot2-æ‰‹åŠ¨å®ç°",
    "title": "é›·è¾¾å›¾ (Radar Chart) ç»˜åˆ¶æŒ‡å—",
    "section": "4. æ–¹æ³•ä¸‰ï¼šggplot2 æ‰‹åŠ¨å®ç°",
    "text": "4. æ–¹æ³•ä¸‰ï¼šggplot2 æ‰‹åŠ¨å®ç°\nå¦‚æœéœ€è¦æ›´é«˜çš„å®šåˆ¶è‡ªç”±åº¦ï¼Œå¯ä»¥ä½¿ç”¨ coord_polar() æ‰‹åŠ¨ç»‘åˆ¶ã€‚\n\nlibrary(ggplot2)\nlibrary(tidyr)\nlibrary(dplyr)\n\n# å‡†å¤‡æ•°æ®ï¼ˆæ•°å€¼æ ‡å‡†åŒ–åˆ° 0-1ï¼‰\nradar_data &lt;- data.frame(\n    group = c(\"å¼ ä¸‰\", \"æå››\", \"ç‹äº”\"),\n    æ²Ÿé€šèƒ½åŠ› = c(0.8, 0.6, 0.9),\n    æŠ€æœ¯èƒ½åŠ› = c(0.9, 0.7, 0.5),\n    å›¢é˜Ÿåä½œ = c(0.7, 0.8, 0.8),\n    åˆ›æ–°æ€ç»´ = c(0.6, 0.9, 0.7),\n    æ‰§è¡ŒåŠ› = c(0.9, 0.5, 0.6),\n    å­¦ä¹ èƒ½åŠ› = c(0.8, 0.8, 0.9)\n)\n\n# æ•°æ®è½¬æ¢ä¸ºé•¿æ ¼å¼\nradar_long &lt;- radar_data %&gt;%\n    pivot_longer(cols = -group, names_to = \"variable\", values_to = \"value\")\n\n# åˆ›å»ºé›·è¾¾å›¾\nggplot(radar_long, aes(x = variable, y = value, group = group, color = group, fill = group)) +\n    geom_polygon(alpha = 0.2, linewidth = 1) +\n    geom_point(size = 3) +\n    coord_polar() +\n    scale_y_continuous(limits = c(0, 1)) +\n    scale_color_manual(values = c(\"#4f46e5\", \"#22c55e\", \"#f97316\")) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#22c55e\", \"#f97316\")) +\n    labs(title = \"è‡ªå®šä¹‰é›·è¾¾å›¾\", x = NULL, y = NULL) +\n    theme_minimal(base_size = 14) +\n    theme(\n        axis.text.y = element_blank(),\n        axis.ticks.y = element_blank(),\n        panel.grid.major = element_line(color = \"grey80\"),\n        legend.position = \"bottom\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "é›·è¾¾å›¾"
    ]
  },
  {
    "objectID": "2023-radar.html#å®æˆ˜æ¡ˆä¾‹äº§å“å¯¹æ¯”",
    "href": "2023-radar.html#å®æˆ˜æ¡ˆä¾‹äº§å“å¯¹æ¯”",
    "title": "é›·è¾¾å›¾ (Radar Chart) ç»˜åˆ¶æŒ‡å—",
    "section": "5. å®æˆ˜æ¡ˆä¾‹ï¼šäº§å“å¯¹æ¯”",
    "text": "5. å®æˆ˜æ¡ˆä¾‹ï¼šäº§å“å¯¹æ¯”\n\n# æ‰‹æœºæ€§èƒ½å¯¹æ¯”æ•°æ®\nphones &lt;- data.frame(\n    äº§å“ = c(\"iPhone 15 Pro\", \"Galaxy S24\", \"Pixel 8\"),\n    æ€§èƒ½ = c(0.95, 0.90, 0.85),\n    ç»­èˆª = c(0.80, 0.85, 0.90),\n    æ‹ç…§ = c(0.92, 0.88, 0.95),\n    å±å¹• = c(0.90, 0.95, 0.85),\n    æ€§ä»·æ¯” = c(0.60, 0.75, 0.85)\n)\n\nggradar(\n    phones,\n    grid.min = 0,\n    grid.mid = 0.5,\n    grid.max = 1,\n    group.colours = c(\"#1d4ed8\", \"#16a34a\", \"#ea580c\"),\n    legend.position = \"bottom\"\n) +\n    labs(title = \"2024 æ——èˆ°æ‰‹æœºå¯¹æ¯”\") +\n    theme(plot.title = element_text(hjust = 0.5, face = \"bold\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "é›·è¾¾å›¾"
    ]
  },
  {
    "objectID": "2023-radar.html#æ³¨æ„äº‹é¡¹",
    "href": "2023-radar.html#æ³¨æ„äº‹é¡¹",
    "title": "é›·è¾¾å›¾ (Radar Chart) ç»˜åˆ¶æŒ‡å—",
    "section": "6. æ³¨æ„äº‹é¡¹",
    "text": "6. æ³¨æ„äº‹é¡¹\n\n[!WARNING] é›·è¾¾å›¾çš„å±€é™æ€§ï¼š 1. ä¸é€‚åˆå˜é‡ä¹‹é—´å­˜åœ¨å¾ˆå¤§æ•°é‡çº§å·®å¼‚çš„æƒ…å†µ 2. äººçœ¼éš¾ä»¥å‡†ç¡®æ¯”è¾ƒé¢ç§¯å¤§å° 3. å˜é‡é¡ºåºä¼šå½±å“å›¾å½¢å½¢çŠ¶å’Œè§†è§‰å°è±¡\n\n\næœ€ä½³å®è·µ\n\n\n\nâœ… æ¨è\nâŒ é¿å…\n\n\n\n\n5-8 ä¸ªå˜é‡\nè¶…è¿‡ 12 ä¸ªå˜é‡\n\n\næ ‡å‡†åŒ–åˆ°ç»Ÿä¸€é‡ç¨‹\næ··ç”¨ä¸åŒå•ä½\n\n\næœ‰æ„ä¹‰çš„å˜é‡æ’åº\néšæœºæ’åˆ—\n\n\n2-4 ç»„å¯¹æ¯”\nè¶…è¿‡ 5 ç»„å åŠ ",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "é›·è¾¾å›¾"
    ]
  },
  {
    "objectID": "2023-radar.html#å‚è€ƒæ–‡çŒ®",
    "href": "2023-radar.html#å‚è€ƒæ–‡çŒ®",
    "title": "é›·è¾¾å›¾ (Radar Chart) ç»˜åˆ¶æŒ‡å—",
    "section": "å‚è€ƒæ–‡çŒ®",
    "text": "å‚è€ƒæ–‡çŒ®\n\nWickham, H. (2016). ggplot2: Elegant Graphics for Data Analysis. Springer.\nNakazawa, M. (2023). fmsb: Functions for Medical Statistics Book with some Demographic Data. R package.",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ºï¸ ä¸“é¢˜å›¾",
      "é›·è¾¾å›¾"
    ]
  },
  {
    "objectID": "2025-bindboxplot.html",
    "href": "2025-bindboxplot.html",
    "title": "ç®±çº¿å›¾ä¸å°æç´å›¾å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "ç®±çº¿å›¾ï¼ˆBox Plotï¼‰å’Œå°æç´å›¾ï¼ˆViolin Plotï¼‰æ˜¯å±•ç¤ºæ•°æ®åˆ†å¸ƒç‰¹å¾çš„é‡è¦å¯è§†åŒ–å·¥å…·ï¼š\n\n\n\n\n\n\n\n\n\nå›¾è¡¨ç±»å‹\nå±•ç¤ºä¿¡æ¯\nä¼˜ç‚¹\nç¼ºç‚¹\n\n\n\n\nç®±çº¿å›¾\nä¸­ä½æ•°ã€å››åˆ†ä½æ•°ã€å¼‚å¸¸å€¼\nç®€æ´ã€æ˜“è§£è¯»\næ— æ³•çœ‹åˆ°åˆ†å¸ƒå½¢æ€\n\n\nå°æç´å›¾\nå®Œæ•´çš„å¯†åº¦åˆ†å¸ƒ\nåˆ†å¸ƒå½¢æ€æ¸…æ™°\nä¸ç›´è§‚ã€éœ€è¦è§£é‡Š\n\n\næŠ–åŠ¨ç‚¹å›¾\næ¯ä¸ªæ•°æ®ç‚¹\nå¯è§æ ·æœ¬é‡å’Œåˆ†å¸ƒ\næ•°æ®é‡å¤§æ—¶æ··ä¹±\n\n\n\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(ggsci) # ç§‘å­¦æœŸåˆŠé…è‰²\n\n# ä½¿ç”¨ iris æ•°æ®é›†\ndata(iris)\nhead(iris)\n\n  Sepal.Length Sepal.Width Petal.Length Petal.Width Species\n1          5.1         3.5          1.4         0.2  setosa\n2          4.9         3.0          1.4         0.2  setosa\n3          4.7         3.2          1.3         0.2  setosa\n4          4.6         3.1          1.5         0.2  setosa\n5          5.0         3.6          1.4         0.2  setosa\n6          5.4         3.9          1.7         0.4  setosa",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç®±çº¿å›¾ä¸å°æç´å›¾"
    ]
  },
  {
    "objectID": "2025-bindboxplot.html#ç®€ä»‹",
    "href": "2025-bindboxplot.html#ç®€ä»‹",
    "title": "ç®±çº¿å›¾ä¸å°æç´å›¾å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "ç®±çº¿å›¾ï¼ˆBox Plotï¼‰å’Œå°æç´å›¾ï¼ˆViolin Plotï¼‰æ˜¯å±•ç¤ºæ•°æ®åˆ†å¸ƒç‰¹å¾çš„é‡è¦å¯è§†åŒ–å·¥å…·ï¼š\n\n\n\n\n\n\n\n\n\nå›¾è¡¨ç±»å‹\nå±•ç¤ºä¿¡æ¯\nä¼˜ç‚¹\nç¼ºç‚¹\n\n\n\n\nç®±çº¿å›¾\nä¸­ä½æ•°ã€å››åˆ†ä½æ•°ã€å¼‚å¸¸å€¼\nç®€æ´ã€æ˜“è§£è¯»\næ— æ³•çœ‹åˆ°åˆ†å¸ƒå½¢æ€\n\n\nå°æç´å›¾\nå®Œæ•´çš„å¯†åº¦åˆ†å¸ƒ\nåˆ†å¸ƒå½¢æ€æ¸…æ™°\nä¸ç›´è§‚ã€éœ€è¦è§£é‡Š\n\n\næŠ–åŠ¨ç‚¹å›¾\næ¯ä¸ªæ•°æ®ç‚¹\nå¯è§æ ·æœ¬é‡å’Œåˆ†å¸ƒ\næ•°æ®é‡å¤§æ—¶æ··ä¹±\n\n\n\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(ggsci) # ç§‘å­¦æœŸåˆŠé…è‰²\n\n# ä½¿ç”¨ iris æ•°æ®é›†\ndata(iris)\nhead(iris)\n\n  Sepal.Length Sepal.Width Petal.Length Petal.Width Species\n1          5.1         3.5          1.4         0.2  setosa\n2          4.9         3.0          1.4         0.2  setosa\n3          4.7         3.2          1.3         0.2  setosa\n4          4.6         3.1          1.5         0.2  setosa\n5          5.0         3.6          1.4         0.2  setosa\n6          5.4         3.9          1.7         0.4  setosa",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç®±çº¿å›¾ä¸å°æç´å›¾"
    ]
  },
  {
    "objectID": "2025-bindboxplot.html#åŸºç¡€ç®±çº¿å›¾",
    "href": "2025-bindboxplot.html#åŸºç¡€ç®±çº¿å›¾",
    "title": "ç®±çº¿å›¾ä¸å°æç´å›¾å®Œå…¨æŒ‡å—",
    "section": "åŸºç¡€ç®±çº¿å›¾",
    "text": "åŸºç¡€ç®±çº¿å›¾\n\næœ€ç®€å•çš„ç®±çº¿å›¾\n\nggplot(iris, aes(x = Species, y = Sepal.Length)) +\n    geom_boxplot() +\n    labs(\n        title = \"ä¸åŒé¸¢å°¾èŠ±å“ç§çš„èŠ±è¼é•¿åº¦åˆ†å¸ƒ\",\n        x = \"å“ç§\",\n        y = \"èŠ±è¼é•¿åº¦ (cm)\"\n    )\n\n\n\n\n\n\n\n\n\n\nç®±çº¿å›¾ç»“æ„è§£è¯»\nç®±çº¿å›¾çš„å„ä¸ªéƒ¨åˆ†å«ä¹‰ï¼š\n\nç®±ä½“ï¼šä» Q1ï¼ˆä¸‹å››åˆ†ä½æ•°ï¼‰åˆ° Q3ï¼ˆä¸Šå››åˆ†ä½æ•°ï¼‰\nä¸­çº¿ï¼šä¸­ä½æ•°\né¡»ï¼ˆwhiskerï¼‰ï¼šå»¶ä¼¸åˆ° 1.5 Ã— IQR èŒƒå›´å†…çš„æœ€è¿œæ•°æ®ç‚¹\nç‚¹ï¼šå¼‚å¸¸å€¼ï¼ˆè¶…å‡ºé¡»èŒƒå›´çš„æ•°æ®ç‚¹ï¼‰\n\n\n# å±•ç¤ºç®±çº¿å›¾å„éƒ¨åˆ†\nggplot(iris, aes(x = Species, y = Sepal.Length)) +\n    geom_boxplot(\n        fill = \"#4f46e5\",\n        color = \"#1e1b4b\",\n        alpha = 0.7,\n        outlier.color = \"#ef4444\",\n        outlier.shape = 16,\n        outlier.size = 2\n    ) +\n    labs(title = \"è‡ªå®šä¹‰ç®±çº¿å›¾æ ·å¼\") +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\næ°´å¹³ç®±çº¿å›¾\n\nggplot(iris, aes(x = Species, y = Sepal.Length)) +\n    geom_boxplot(fill = \"#06b6d4\") +\n    coord_flip() + # ç¿»è½¬åæ ‡è½´\n    labs(title = \"æ°´å¹³ç®±çº¿å›¾\") +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç®±çº¿å›¾ä¸å°æç´å›¾"
    ]
  },
  {
    "objectID": "2025-bindboxplot.html#å¡«å……é¢œè‰²",
    "href": "2025-bindboxplot.html#å¡«å……é¢œè‰²",
    "title": "ç®±çº¿å›¾ä¸å°æç´å›¾å®Œå…¨æŒ‡å—",
    "section": "å¡«å……é¢œè‰²",
    "text": "å¡«å……é¢œè‰²\n\næŒ‰ç»„å¡«è‰²\n\nggplot(iris, aes(x = Species, y = Sepal.Length, fill = Species)) +\n    geom_boxplot() +\n    scale_fill_brewer(palette = \"Set2\") +\n    labs(title = \"æŒ‰å“ç§å¡«å……é¢œè‰²\") +\n    theme_minimal() +\n    theme(legend.position = \"none\") # éšè—å›¾ä¾‹ï¼ˆå› ä¸ºxè½´å·²æ˜¾ç¤ºï¼‰\n\n\n\n\n\n\n\n\n\n\nä½¿ç”¨ ggsci ç§‘å­¦æœŸåˆŠé…è‰²\n\nggplot(iris, aes(x = Species, y = Sepal.Length, fill = Species)) +\n    geom_boxplot() +\n    scale_fill_lancet() + # æŸ³å¶åˆ€é…è‰²\n    labs(title = \"Lancet æœŸåˆŠé…è‰²é£æ ¼\") +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\nggplot(iris, aes(x = Species, y = Sepal.Length, fill = Species)) +\n    geom_boxplot() +\n    scale_fill_nejm() + # NEJM é…è‰²\n    labs(title = \"NEJM æœŸåˆŠé…è‰²é£æ ¼\") +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç®±çº¿å›¾ä¸å°æç´å›¾"
    ]
  },
  {
    "objectID": "2025-bindboxplot.html#æ·»åŠ ç»Ÿè®¡ä¿¡æ¯",
    "href": "2025-bindboxplot.html#æ·»åŠ ç»Ÿè®¡ä¿¡æ¯",
    "title": "ç®±çº¿å›¾ä¸å°æç´å›¾å®Œå…¨æŒ‡å—",
    "section": "æ·»åŠ ç»Ÿè®¡ä¿¡æ¯",
    "text": "æ·»åŠ ç»Ÿè®¡ä¿¡æ¯\n\næ·»åŠ å‡å€¼ç‚¹\n\nggplot(iris, aes(x = Species, y = Sepal.Length, fill = Species)) +\n    geom_boxplot() +\n    stat_summary(\n        fun = mean,\n        geom = \"point\",\n        shape = 18, # è±å½¢\n        size = 3,\n        color = \"#ef4444\"\n    ) +\n    scale_fill_brewer(palette = \"Pastel1\") +\n    labs(title = \"ç®±çº¿å›¾ + å‡å€¼ç‚¹ï¼ˆçº¢è‰²è±å½¢ï¼‰\") +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\næ˜¾ç¤ºæ ·æœ¬é‡\n\n# è®¡ç®—æ¯ç»„æ ·æœ¬é‡\nsample_sizes &lt;- iris %&gt;%\n    group_by(Species) %&gt;%\n    summarise(n = n(), y_pos = max(Sepal.Length) + 0.2)\n\nggplot(iris, aes(x = Species, y = Sepal.Length, fill = Species)) +\n    geom_boxplot() +\n    geom_text(\n        data = sample_sizes,\n        aes(x = Species, y = y_pos, label = paste0(\"n=\", n)),\n        inherit.aes = FALSE,\n        size = 4\n    ) +\n    scale_fill_brewer(palette = \"Set3\") +\n    labs(title = \"ç®±çº¿å›¾ + æ ·æœ¬é‡æ ‡æ³¨\") +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç®±çº¿å›¾ä¸å°æç´å›¾"
    ]
  },
  {
    "objectID": "2025-bindboxplot.html#ç®±çº¿å›¾-æŠ–åŠ¨ç‚¹",
    "href": "2025-bindboxplot.html#ç®±çº¿å›¾-æŠ–åŠ¨ç‚¹",
    "title": "ç®±çº¿å›¾ä¸å°æç´å›¾å®Œå…¨æŒ‡å—",
    "section": "ç®±çº¿å›¾ + æŠ–åŠ¨ç‚¹",
    "text": "ç®±çº¿å›¾ + æŠ–åŠ¨ç‚¹\n\njitter æŠ–åŠ¨ç‚¹\n\nggplot(iris, aes(x = Species, y = Sepal.Length, fill = Species)) +\n    geom_boxplot(outlier.shape = NA, alpha = 0.7) + # éšè—å¼‚å¸¸å€¼ï¼ˆå› ä¸ºè¦æ˜¾ç¤ºæ‰€æœ‰ç‚¹ï¼‰\n    geom_jitter(\n        width = 0.2, # æ°´å¹³æŠ–åŠ¨èŒƒå›´\n        alpha = 0.5,\n        size = 1.5\n    ) +\n    scale_fill_brewer(palette = \"Set2\") +\n    labs(title = \"ç®±çº¿å›¾ + æŠ–åŠ¨ç‚¹\") +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nè‡ªå®šä¹‰ç‚¹æ ·å¼\n\nggplot(iris, aes(x = Species, y = Sepal.Length, fill = Species)) +\n    geom_boxplot(outlier.shape = NA, alpha = 0.6, width = 0.5) +\n    geom_jitter(\n        aes(color = Species),\n        width = 0.15,\n        alpha = 0.8,\n        size = 2\n    ) +\n    scale_fill_manual(values = c(\"#fee2e2\", \"#dbeafe\", \"#dcfce7\")) +\n    scale_color_manual(values = c(\"#ef4444\", \"#3b82f6\", \"#22c55e\")) +\n    labs(title = \"ç®±çº¿å›¾ + å½©è‰²æŠ–åŠ¨ç‚¹\") +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç®±çº¿å›¾ä¸å°æç´å›¾"
    ]
  },
  {
    "objectID": "2025-bindboxplot.html#åˆ†ç»„ç®±çº¿å›¾",
    "href": "2025-bindboxplot.html#åˆ†ç»„ç®±çº¿å›¾",
    "title": "ç®±çº¿å›¾ä¸å°æç´å›¾å®Œå…¨æŒ‡å—",
    "section": "åˆ†ç»„ç®±çº¿å›¾",
    "text": "åˆ†ç»„ç®±çº¿å›¾\n\nåŒåˆ†ç»„\n\n# åˆ›å»ºåˆ†ç»„æ•°æ®\nset.seed(42)\ngrouped_data &lt;- data.frame(\n    treatment = rep(c(\"å¯¹ç…§ç»„\", \"å®éªŒç»„\"), each = 150),\n    time = rep(rep(c(\"åŸºçº¿\", \"4å‘¨\", \"8å‘¨\"), each = 50), 2),\n    value = c(\n        rnorm(50, 50, 10), rnorm(50, 52, 10), rnorm(50, 51, 10), # å¯¹ç…§ç»„\n        rnorm(50, 50, 10), rnorm(50, 60, 10), rnorm(50, 70, 10) # å®éªŒç»„\n    )\n)\ngrouped_data$time &lt;- factor(grouped_data$time, levels = c(\"åŸºçº¿\", \"4å‘¨\", \"8å‘¨\"))\n\nggplot(grouped_data, aes(x = time, y = value, fill = treatment)) +\n    geom_boxplot(position = position_dodge(0.8), width = 0.6) +\n    scale_fill_manual(values = c(\"#94a3b8\", \"#4f46e5\")) +\n    labs(\n        title = \"ä¸¤ç»„æ‚£è€…åœ¨ä¸åŒæ—¶é—´ç‚¹çš„æŒ‡æ ‡å˜åŒ–\",\n        x = \"æ—¶é—´ç‚¹\",\n        y = \"æŒ‡æ ‡å€¼\",\n        fill = \"åˆ†ç»„\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nåˆ†é¢å±•ç¤º\n\nggplot(grouped_data, aes(x = treatment, y = value, fill = treatment)) +\n    geom_boxplot() +\n    facet_wrap(~time, nrow = 1) +\n    scale_fill_brewer(palette = \"Set1\") +\n    labs(title = \"æŒ‰æ—¶é—´ç‚¹åˆ†é¢å±•ç¤º\") +\n    theme_minimal() +\n    theme(legend.position = \"none\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç®±çº¿å›¾ä¸å°æç´å›¾"
    ]
  },
  {
    "objectID": "2025-bindboxplot.html#ç¼ºå£ç®±çº¿å›¾",
    "href": "2025-bindboxplot.html#ç¼ºå£ç®±çº¿å›¾",
    "title": "ç®±çº¿å›¾ä¸å°æç´å›¾å®Œå…¨æŒ‡å—",
    "section": "ç¼ºå£ç®±çº¿å›¾",
    "text": "ç¼ºå£ç®±çº¿å›¾\nç¼ºå£ï¼ˆnotchï¼‰ç”¨äºæ¯”è¾ƒä¸­ä½æ•°å·®å¼‚ï¼šå¦‚æœä¸¤ç»„çš„ç¼ºå£ä¸é‡å ï¼Œåˆ™ä¸­ä½æ•°å­˜åœ¨æ˜¾è‘—å·®å¼‚ï¼ˆçº¦ 95% ç½®ä¿¡åº¦ï¼‰ã€‚\n\nggplot(iris, aes(x = Species, y = Sepal.Length, fill = Species)) +\n    geom_boxplot(notch = TRUE) + # æ·»åŠ ç¼ºå£\n    scale_fill_brewer(palette = \"Pastel2\") +\n    labs(\n        title = \"ç¼ºå£ç®±çº¿å›¾\",\n        subtitle = \"ç¼ºå£ä¸é‡å è¡¨ç¤ºä¸­ä½æ•°å·®å¼‚æ˜¾è‘—\"\n    ) +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç®±çº¿å›¾ä¸å°æç´å›¾"
    ]
  },
  {
    "objectID": "2025-bindboxplot.html#å°æç´å›¾",
    "href": "2025-bindboxplot.html#å°æç´å›¾",
    "title": "ç®±çº¿å›¾ä¸å°æç´å›¾å®Œå…¨æŒ‡å—",
    "section": "å°æç´å›¾",
    "text": "å°æç´å›¾\n\nåŸºç¡€å°æç´å›¾\n\nggplot(iris, aes(x = Species, y = Sepal.Length, fill = Species)) +\n    geom_violin() +\n    scale_fill_brewer(palette = \"Set2\") +\n    labs(title = \"åŸºç¡€å°æç´å›¾\") +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nå°æç´å›¾ + ç®±çº¿å›¾\næœ€å¸¸ç”¨çš„ç»„åˆï¼Œå…¼å…·ä¸¤è€…ä¼˜ç‚¹ã€‚\n\nggplot(iris, aes(x = Species, y = Sepal.Length, fill = Species)) +\n    geom_violin(trim = FALSE, alpha = 0.7) + # trim=FALSE ä¿ç•™å®Œæ•´å½¢çŠ¶\n    geom_boxplot(width = 0.1, fill = \"white\", outlier.shape = NA) +\n    scale_fill_lancet() +\n    labs(title = \"å°æç´å›¾ + å†…åµŒç®±çº¿å›¾\") +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nå°æç´å›¾ + å‡å€¼/ä¸­ä½æ•°\n\nggplot(iris, aes(x = Species, y = Sepal.Length, fill = Species)) +\n    geom_violin(trim = FALSE, alpha = 0.7) +\n    stat_summary(\n        fun = median,\n        geom = \"crossbar\",\n        width = 0.2,\n        color = \"black\"\n    ) +\n    stat_summary(\n        fun = mean,\n        geom = \"point\",\n        shape = 18,\n        size = 3,\n        color = \"#ef4444\"\n    ) +\n    scale_fill_brewer(palette = \"Pastel1\") +\n    labs(\n        title = \"å°æç´å›¾ + ä¸­ä½æ•°ï¼ˆæ¨ªçº¿ï¼‰+ å‡å€¼ï¼ˆçº¢ç‚¹ï¼‰\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nåˆ†åŠå°æç´å›¾\nå±•ç¤ºä¸¤ç»„å¯¹æ¯”æ—¶éå¸¸æœ‰æ•ˆã€‚\n\n# éœ€è¦ see åŒ…\n# install.packages(\"see\")\nlibrary(see)\n\ntwo_groups &lt;- iris %&gt;%\n    filter(Species != \"virginica\") %&gt;%\n    mutate(Species = droplevels(Species))\n\nggplot(two_groups, aes(x = 1, y = Sepal.Length, fill = Species)) +\n    geom_violinhalf(flip = c(1, 2), position = position_identity()) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#ef4444\")) +\n    labs(title = \"åˆ†åŠå°æç´å›¾ï¼šä¸¤ç»„å¯¹æ¯”\") +\n    theme_minimal() +\n    theme(\n        axis.text.x = element_blank(),\n        axis.title.x = element_blank()\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç®±çº¿å›¾ä¸å°æç´å›¾"
    ]
  },
  {
    "objectID": "2025-bindboxplot.html#é›¨äº‘å›¾-raincloud-plot",
    "href": "2025-bindboxplot.html#é›¨äº‘å›¾-raincloud-plot",
    "title": "ç®±çº¿å›¾ä¸å°æç´å›¾å®Œå…¨æŒ‡å—",
    "section": "é›¨äº‘å›¾ (Raincloud Plot)",
    "text": "é›¨äº‘å›¾ (Raincloud Plot)\né›¨äº‘å›¾ç»“åˆäº†å°æç´å›¾ã€ç®±çº¿å›¾å’ŒæŠ–åŠ¨ç‚¹çš„ä¼˜ç‚¹ã€‚\n\n# ä½¿ç”¨ ggdist åŒ…åˆ›å»ºé›¨äº‘å›¾\n# install.packages(\"ggdist\")\nlibrary(ggdist)\n\nggplot(iris, aes(x = Species, y = Sepal.Length, fill = Species)) +\n    # åŠå°æç´ï¼ˆäº‘ï¼‰\n    stat_halfeye(\n        adjust = 0.5,\n        width = 0.6,\n        .width = 0,\n        justification = -0.2,\n        point_colour = NA\n    ) +\n    # ç®±çº¿å›¾\n    geom_boxplot(\n        width = 0.15,\n        outlier.shape = NA,\n        alpha = 0.5\n    ) +\n    # æŠ–åŠ¨ç‚¹ï¼ˆé›¨ï¼‰\n    stat_dots(\n        side = \"left\",\n        justification = 1.1,\n        binwidth = 0.1\n    ) +\n    scale_fill_brewer(palette = \"Set2\") +\n    labs(\n        title = \"é›¨äº‘å›¾ (Raincloud Plot)\",\n        subtitle = \"ç»“åˆå¯†åº¦åˆ†å¸ƒã€ç®±çº¿å›¾å’Œæ•°æ®ç‚¹\"\n    ) +\n    coord_flip() +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç®±çº¿å›¾ä¸å°æç´å›¾"
    ]
  },
  {
    "objectID": "2025-bindboxplot.html#æ˜¾è‘—æ€§æ ‡æ³¨",
    "href": "2025-bindboxplot.html#æ˜¾è‘—æ€§æ ‡æ³¨",
    "title": "ç®±çº¿å›¾ä¸å°æç´å›¾å®Œå…¨æŒ‡å—",
    "section": "æ˜¾è‘—æ€§æ ‡æ³¨",
    "text": "æ˜¾è‘—æ€§æ ‡æ³¨\n\nä½¿ç”¨ ggpubr æ·»åŠ ç»Ÿè®¡æ£€éªŒ\n\n# install.packages(\"ggpubr\")\nlibrary(ggpubr)\n\nggboxplot(iris,\n    x = \"Species\", y = \"Sepal.Length\",\n    fill = \"Species\", palette = \"Set2\"\n) +\n    stat_compare_means(method = \"anova\", label.y = 8.5) + # æ€»ä½“æ£€éªŒ\n    stat_compare_means(\n        comparisons = list(\n            c(\"setosa\", \"versicolor\"),\n            c(\"versicolor\", \"virginica\"),\n            c(\"setosa\", \"virginica\")\n        ),\n        method = \"t.test\",\n        label = \"p.signif\" # æ˜¾ç¤ºæ˜Ÿå·\n    ) +\n    labs(title = \"å¸¦æ˜¾è‘—æ€§æ ‡æ³¨çš„ç®±çº¿å›¾\")\n\n\n\n\n\n\n\n\n\n\næ‰‹åŠ¨æ·»åŠ æ˜¾è‘—æ€§æ ‡æ³¨\n\n# ä½¿ç”¨ ggsignif åŒ…\n# install.packages(\"ggsignif\")\nlibrary(ggsignif)\n\nggplot(iris, aes(x = Species, y = Sepal.Length, fill = Species)) +\n    geom_boxplot() +\n    geom_signif(\n        comparisons = list(c(\"setosa\", \"versicolor\")),\n        annotations = \"***\",\n        y_position = 7.8\n    ) +\n    geom_signif(\n        comparisons = list(c(\"versicolor\", \"virginica\")),\n        annotations = \"**\",\n        y_position = 8.2\n    ) +\n    geom_signif(\n        comparisons = list(c(\"setosa\", \"virginica\")),\n        annotations = \"****\",\n        y_position = 8.8\n    ) +\n    scale_fill_brewer(palette = \"Pastel1\") +\n    labs(title = \"æ‰‹åŠ¨æ·»åŠ æ˜¾è‘—æ€§æ ‡æ³¨\") +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç®±çº¿å›¾ä¸å°æç´å›¾"
    ]
  },
  {
    "objectID": "2025-bindboxplot.html#ä¸»é¢˜ä¸ç¾åŒ–",
    "href": "2025-bindboxplot.html#ä¸»é¢˜ä¸ç¾åŒ–",
    "title": "ç®±çº¿å›¾ä¸å°æç´å›¾å®Œå…¨æŒ‡å—",
    "section": "ä¸»é¢˜ä¸ç¾åŒ–",
    "text": "ä¸»é¢˜ä¸ç¾åŒ–\n\nä¸“ä¸šå›¾è¡¨æ ·å¼\n\nggplot(iris, aes(x = Species, y = Sepal.Length, fill = Species)) +\n    geom_boxplot(\n        width = 0.5,\n        outlier.shape = 21,\n        outlier.fill = \"white\",\n        outlier.size = 2\n    ) +\n    scale_fill_manual(values = c(\"#1e40af\", \"#047857\", \"#b91c1c\")) +\n    labs(\n        title = \"èŠ±è¼é•¿åº¦åˆ†å¸ƒæ¯”è¾ƒ\",\n        subtitle = \"ä¸‰ç§é¸¢å°¾èŠ±çš„å·®å¼‚åˆ†æ\",\n        x = NULL,\n        y = \"èŠ±è¼é•¿åº¦ (cm)\",\n        caption = \"æ•°æ®æ¥æºï¼šFisher's Iris Dataset\"\n    ) +\n    theme_minimal(base_size = 14) +\n    theme(\n        plot.title = element_text(face = \"bold\", size = 16),\n        plot.subtitle = element_text(color = \"gray50\"),\n        legend.position = \"none\",\n        panel.grid.major.x = element_blank(),\n        axis.text = element_text(size = 12)\n    )\n\n\n\n\n\n\n\n\n\n\næç®€é£æ ¼\n\nggplot(iris, aes(x = Species, y = Sepal.Length)) +\n    geom_boxplot(\n        fill = \"#f8fafc\",\n        color = \"#334155\",\n        width = 0.4\n    ) +\n    geom_jitter(\n        color = \"#4f46e5\",\n        alpha = 0.4,\n        width = 0.1,\n        size = 1\n    ) +\n    labs(\n        title = \"æç®€é£æ ¼ç®±çº¿å›¾\",\n        x = NULL,\n        y = \"èŠ±è¼é•¿åº¦\"\n    ) +\n    theme_classic() +\n    theme(\n        plot.title = element_text(hjust = 0.5),\n        axis.line = element_line(color = \"#94a3b8\")\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç®±çº¿å›¾ä¸å°æç´å›¾"
    ]
  },
  {
    "objectID": "2025-bindboxplot.html#ä¿å­˜å›¾ç‰‡",
    "href": "2025-bindboxplot.html#ä¿å­˜å›¾ç‰‡",
    "title": "ç®±çº¿å›¾ä¸å°æç´å›¾å®Œå…¨æŒ‡å—",
    "section": "ä¿å­˜å›¾ç‰‡",
    "text": "ä¿å­˜å›¾ç‰‡\n\n# åˆ›å»ºå›¾è¡¨\np &lt;- ggplot(iris, aes(x = Species, y = Sepal.Length, fill = Species)) +\n    geom_violin(alpha = 0.7) +\n    geom_boxplot(width = 0.1, fill = \"white\") +\n    scale_fill_lancet() +\n    theme_minimal()\n\n# ä¿å­˜ä¸º PNGï¼ˆé€‚åˆç½‘é¡µï¼‰\nggsave(\"boxplot.png\", p, width = 8, height = 6, dpi = 300)\n\n# ä¿å­˜ä¸º PDFï¼ˆé€‚åˆè®ºæ–‡ï¼‰\nggsave(\"boxplot.pdf\", p, width = 8, height = 6)\n\n# ä¿å­˜ä¸º SVGï¼ˆçŸ¢é‡å›¾ï¼‰\nggsave(\"boxplot.svg\", p, width = 8, height = 6)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç®±çº¿å›¾ä¸å°æç´å›¾"
    ]
  },
  {
    "objectID": "2025-bindboxplot.html#å®æˆ˜æ¡ˆä¾‹",
    "href": "2025-bindboxplot.html#å®æˆ˜æ¡ˆä¾‹",
    "title": "ç®±çº¿å›¾ä¸å°æç´å›¾å®Œå…¨æŒ‡å—",
    "section": "å®æˆ˜æ¡ˆä¾‹",
    "text": "å®æˆ˜æ¡ˆä¾‹\n\nä¸´åºŠè¯•éªŒæ•°æ®å¯è§†åŒ–\n\n# æ¨¡æ‹Ÿä¸´åºŠè¯•éªŒæ•°æ®\nset.seed(123)\nclinical_data &lt;- data.frame(\n    patient_id = 1:200,\n    group = rep(c(\"å®‰æ…°å‰‚\", \"ä½å‰‚é‡\", \"ä¸­å‰‚é‡\", \"é«˜å‰‚é‡\"), each = 50),\n    baseline = rnorm(200, 100, 15),\n    week4 = c(\n        rnorm(50, 100, 15), # å®‰æ…°å‰‚\n        rnorm(50, 95, 14), # ä½å‰‚é‡\n        rnorm(50, 88, 13), # ä¸­å‰‚é‡\n        rnorm(50, 80, 12) # é«˜å‰‚é‡\n    )\n)\nclinical_data$change &lt;- clinical_data$week4 - clinical_data$baseline\nclinical_data$group &lt;- factor(clinical_data$group,\n    levels = c(\"å®‰æ…°å‰‚\", \"ä½å‰‚é‡\", \"ä¸­å‰‚é‡\", \"é«˜å‰‚é‡\")\n)\n\n# ç»‘åˆ¶ä¸“ä¸šå›¾è¡¨\nggplot(clinical_data, aes(x = group, y = change, fill = group)) +\n    geom_hline(yintercept = 0, linetype = \"dashed\", color = \"gray50\") +\n    geom_violin(alpha = 0.6, trim = FALSE) +\n    geom_boxplot(width = 0.15, fill = \"white\", outlier.shape = NA) +\n    stat_summary(\n        fun = mean,\n        geom = \"point\",\n        shape = 18,\n        size = 3,\n        color = \"#ef4444\"\n    ) +\n    scale_fill_manual(values = c(\"#94a3b8\", \"#86efac\", \"#4ade80\", \"#22c55e\")) +\n    labs(\n        title = \"ä¸åŒå‰‚é‡ç»„çš„æŒ‡æ ‡å˜åŒ–\",\n        subtitle = \"4å‘¨æ²»ç–—åä¸åŸºçº¿çš„å·®å€¼æ¯”è¾ƒ\",\n        x = \"æ²»ç–—ç»„\",\n        y = \"æŒ‡æ ‡å˜åŒ–å€¼ (ç¬¬4å‘¨ - åŸºçº¿)\",\n        caption = \"çº¢è‰²è±å½¢è¡¨ç¤ºå‡å€¼\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        legend.position = \"none\",\n        plot.title = element_text(face = \"bold\", size = 14),\n        panel.grid.major.x = element_blank()\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç®±çº¿å›¾ä¸å°æç´å›¾"
    ]
  },
  {
    "objectID": "2025-bindboxplot.html#æ€»ç»“",
    "href": "2025-bindboxplot.html#æ€»ç»“",
    "title": "ç®±çº¿å›¾ä¸å°æç´å›¾å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nåœºæ™¯\næ¨èå›¾è¡¨\n\n\n\n\nå¿«é€ŸæŸ¥çœ‹åˆ†å¸ƒ\nåŸºç¡€ç®±çº¿å›¾\n\n\nå±•ç¤ºåˆ†å¸ƒå½¢æ€\nå°æç´å›¾\n\n\nå°æ ·æœ¬æ•°æ®\nç®±çº¿å›¾ + æŠ–åŠ¨ç‚¹\n\n\nä¸¤ç»„å¯¹æ¯”\nåˆ†åŠå°æç´å›¾\n\n\nç»¼åˆå±•ç¤º\né›¨äº‘å›¾\n\n\nè®ºæ–‡å‘è¡¨\nå°æç´å›¾ + å†…åµŒç®±çº¿å›¾\n\n\n\n\n[!TIP] æœ€ä½³å®è·µï¼š 1. æ ·æœ¬é‡å°ï¼ˆn &lt; 30ï¼‰æ—¶ï¼ŒåŠ¡å¿…æ·»åŠ æŠ–åŠ¨ç‚¹ 2. æ¯”è¾ƒç»„é—´å·®å¼‚æ—¶ï¼Œæ·»åŠ æ˜¾è‘—æ€§æ ‡æ³¨ 3. ä½¿ç”¨ç§‘å­¦æœŸåˆŠé…è‰²ï¼ˆggsciåŒ…ï¼‰æå‡ä¸“ä¸šåº¦ 4. æ ‡æ³¨å‡å€¼å’Œæ ·æœ¬é‡å¢åŠ ä¿¡æ¯é‡",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç®±çº¿å›¾ä¸å°æç´å›¾"
    ]
  },
  {
    "objectID": "2027-bindhistogram.html",
    "href": "2027-bindhistogram.html",
    "title": "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "ç›´æ–¹å›¾å’Œå¯†åº¦å›¾æ˜¯æ¢ç´¢è¿ç»­å˜é‡åˆ†å¸ƒç‰¹å¾çš„æ ¸å¿ƒå·¥å…·ï¼š\n\n\n\nå›¾è¡¨ç±»å‹\nç‰¹ç‚¹\né€‚ç”¨åœºæ™¯\n\n\n\n\nç›´æ–¹å›¾\nç¦»æ•£åˆ†ç®±ï¼Œç›´è§‚æ˜“æ‡‚\næ•°æ®æ¢ç´¢ã€åˆ†å¸ƒå½¢æ€\n\n\nå¯†åº¦å›¾\nå¹³æ»‘æ›²çº¿ï¼Œä¾¿äºæ¯”è¾ƒ\nå¤šç»„æ¯”è¾ƒã€åˆ†å¸ƒå åŠ \n\n\nå²­çº¿å›¾\nå¤šåˆ†å¸ƒå †å å±•ç¤º\nå¤šç±»åˆ«åˆ†å¸ƒæ¯”è¾ƒ\n\n\né¢‘ç‡å¤šè¾¹å½¢\næŠ˜çº¿è¿æ¥é¢‘ç‡\nå¤šç»„åˆ†å¸ƒå åŠ \n\n\n\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(ggsci)\n\n# ä½¿ç”¨é’»çŸ³æ•°æ®é›†\ndata(diamonds)\n# å–å­é›†åŠ å¿«è¿è¡Œ\nset.seed(42)\ndiamonds_sample &lt;- diamonds[sample(nrow(diamonds), 5000), ]",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾"
    ]
  },
  {
    "objectID": "2027-bindhistogram.html#ç®€ä»‹",
    "href": "2027-bindhistogram.html#ç®€ä»‹",
    "title": "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "ç›´æ–¹å›¾å’Œå¯†åº¦å›¾æ˜¯æ¢ç´¢è¿ç»­å˜é‡åˆ†å¸ƒç‰¹å¾çš„æ ¸å¿ƒå·¥å…·ï¼š\n\n\n\nå›¾è¡¨ç±»å‹\nç‰¹ç‚¹\né€‚ç”¨åœºæ™¯\n\n\n\n\nç›´æ–¹å›¾\nç¦»æ•£åˆ†ç®±ï¼Œç›´è§‚æ˜“æ‡‚\næ•°æ®æ¢ç´¢ã€åˆ†å¸ƒå½¢æ€\n\n\nå¯†åº¦å›¾\nå¹³æ»‘æ›²çº¿ï¼Œä¾¿äºæ¯”è¾ƒ\nå¤šç»„æ¯”è¾ƒã€åˆ†å¸ƒå åŠ \n\n\nå²­çº¿å›¾\nå¤šåˆ†å¸ƒå †å å±•ç¤º\nå¤šç±»åˆ«åˆ†å¸ƒæ¯”è¾ƒ\n\n\né¢‘ç‡å¤šè¾¹å½¢\næŠ˜çº¿è¿æ¥é¢‘ç‡\nå¤šç»„åˆ†å¸ƒå åŠ \n\n\n\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(ggsci)\n\n# ä½¿ç”¨é’»çŸ³æ•°æ®é›†\ndata(diamonds)\n# å–å­é›†åŠ å¿«è¿è¡Œ\nset.seed(42)\ndiamonds_sample &lt;- diamonds[sample(nrow(diamonds), 5000), ]",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾"
    ]
  },
  {
    "objectID": "2027-bindhistogram.html#åŸºç¡€ç›´æ–¹å›¾",
    "href": "2027-bindhistogram.html#åŸºç¡€ç›´æ–¹å›¾",
    "title": "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾å®Œå…¨æŒ‡å—",
    "section": "åŸºç¡€ç›´æ–¹å›¾",
    "text": "åŸºç¡€ç›´æ–¹å›¾\n\næœ€ç®€å•çš„ç›´æ–¹å›¾\n\nggplot(diamonds_sample, aes(x = price)) +\n    geom_histogram() +\n    labs(\n        title = \"é’»çŸ³ä»·æ ¼åˆ†å¸ƒ\",\n        x = \"ä»·æ ¼ (ç¾å…ƒ)\",\n        y = \"é¢‘æ•°\"\n    )\n\n\n\n\n\n\n\n\n\n\nè°ƒæ•´åˆ†ç®±æ•°\nåˆ†ç®±æ•°ï¼ˆbinsï¼‰æˆ–åˆ†ç®±å®½åº¦ï¼ˆbinwidthï¼‰æ˜¯ç›´æ–¹å›¾æœ€é‡è¦çš„å‚æ•°ã€‚\n\n# æŒ‡å®šåˆ†ç®±æ•°\nggplot(diamonds_sample, aes(x = price)) +\n    geom_histogram(bins = 50, fill = \"#4f46e5\", color = \"white\") +\n    labs(title = \"50 ä¸ªåˆ†ç®±\") +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n# æŒ‡å®šåˆ†ç®±å®½åº¦\nggplot(diamonds_sample, aes(x = price)) +\n    geom_histogram(binwidth = 500, fill = \"#22c55e\", color = \"white\") +\n    labs(title = \"åˆ†ç®±å®½åº¦ = $500\") +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\né€‰æ‹©åˆé€‚çš„åˆ†ç®±æ•°\n\n# å¯¹æ¯”ä¸åŒåˆ†ç®±æ•°çš„æ•ˆæœ\nlibrary(patchwork)\n\np1 &lt;- ggplot(diamonds_sample, aes(x = price)) +\n    geom_histogram(bins = 10, fill = \"#f59e0b\") +\n    labs(title = \"bins = 10\") +\n    theme_minimal()\n\np2 &lt;- ggplot(diamonds_sample, aes(x = price)) +\n    geom_histogram(bins = 30, fill = \"#3b82f6\") +\n    labs(title = \"bins = 30\") +\n    theme_minimal()\n\np3 &lt;- ggplot(diamonds_sample, aes(x = price)) +\n    geom_histogram(bins = 100, fill = \"#22c55e\") +\n    labs(title = \"bins = 100\") +\n    theme_minimal()\n\np1 + p2 + p3\n\n\n\n\n\n\n\n\n\n[!TIP] åˆ†ç®±é€‰æ‹©å»ºè®®ï¼š - å¤ªå°‘ï¼šä¸¢å¤±åˆ†å¸ƒç»†èŠ‚ - å¤ªå¤šï¼šå™ªå£°è¿‡å¤§ - ç»éªŒæ³•åˆ™ï¼šâˆšn æˆ– Sturges å…¬å¼",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾"
    ]
  },
  {
    "objectID": "2027-bindhistogram.html#åˆ†ç»„ç›´æ–¹å›¾",
    "href": "2027-bindhistogram.html#åˆ†ç»„ç›´æ–¹å›¾",
    "title": "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾å®Œå…¨æŒ‡å—",
    "section": "åˆ†ç»„ç›´æ–¹å›¾",
    "text": "åˆ†ç»„ç›´æ–¹å›¾\n\næŒ‰ç»„å¡«å……é¢œè‰²\n\nggplot(diamonds_sample, aes(x = price, fill = cut)) +\n    geom_histogram(bins = 30, position = \"stack\") +\n    scale_fill_brewer(palette = \"Set2\") +\n    labs(\n        title = \"æŒ‰åˆ‡å·¥åˆ†ç»„çš„ä»·æ ¼åˆ†å¸ƒ\",\n        fill = \"åˆ‡å·¥ç­‰çº§\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nåˆ†ç»„ä½ç½®é€‰é¡¹\n\n# å †å  (stack) - é»˜è®¤\np1 &lt;- ggplot(diamonds_sample, aes(x = price, fill = cut)) +\n    geom_histogram(bins = 30, position = \"stack\") +\n    scale_fill_brewer(palette = \"Set2\") +\n    labs(title = \"å †å  (stack)\") +\n    theme_minimal() +\n    theme(legend.position = \"none\")\n\n# é‡å é€æ˜ (identity)\np2 &lt;- ggplot(diamonds_sample, aes(x = price, fill = cut)) +\n    geom_histogram(bins = 30, position = \"identity\", alpha = 0.5) +\n    scale_fill_brewer(palette = \"Set2\") +\n    labs(title = \"é‡å é€æ˜ (identity)\") +\n    theme_minimal() +\n    theme(legend.position = \"none\")\n\n# å¹¶åˆ— (dodge)\np3 &lt;- ggplot(diamonds_sample, aes(x = price, fill = cut)) +\n    geom_histogram(bins = 20, position = \"dodge\") +\n    scale_fill_brewer(palette = \"Set2\") +\n    labs(title = \"å¹¶åˆ— (dodge)\") +\n    theme_minimal() +\n    theme(legend.position = \"none\")\n\np1 + p2 + p3\n\n\n\n\n\n\n\n\n\n\nåˆ†é¢ç›´æ–¹å›¾\n\nggplot(diamonds_sample, aes(x = price, fill = cut)) +\n    geom_histogram(bins = 30, color = \"white\") +\n    facet_wrap(~cut, ncol = 1, scales = \"free_y\") +\n    scale_fill_brewer(palette = \"Set2\") +\n    labs(title = \"åˆ†é¢ç›´æ–¹å›¾\") +\n    theme_minimal() +\n    theme(legend.position = \"none\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾"
    ]
  },
  {
    "objectID": "2027-bindhistogram.html#å¯†åº¦å›¾",
    "href": "2027-bindhistogram.html#å¯†åº¦å›¾",
    "title": "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾å®Œå…¨æŒ‡å—",
    "section": "å¯†åº¦å›¾",
    "text": "å¯†åº¦å›¾\n\nåŸºç¡€å¯†åº¦å›¾\n\nggplot(diamonds_sample, aes(x = price)) +\n    geom_density(fill = \"#4f46e5\", alpha = 0.5) +\n    labs(\n        title = \"é’»çŸ³ä»·æ ¼å¯†åº¦åˆ†å¸ƒ\",\n        x = \"ä»·æ ¼\",\n        y = \"å¯†åº¦\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nè°ƒæ•´å¸¦å®½ (bandwidth)\nå¸¦å®½æ§åˆ¶å¯†åº¦æ›²çº¿çš„å¹³æ»‘ç¨‹åº¦ã€‚\n\np1 &lt;- ggplot(diamonds_sample, aes(x = price)) +\n    geom_density(fill = \"#ef4444\", alpha = 0.5, bw = 100) +\n    labs(title = \"bw = 100 (æ¬ å¹³æ»‘)\") +\n    theme_minimal()\n\np2 &lt;- ggplot(diamonds_sample, aes(x = price)) +\n    geom_density(fill = \"#22c55e\", alpha = 0.5, bw = 500) +\n    labs(title = \"bw = 500 (é€‚ä¸­)\") +\n    theme_minimal()\n\np3 &lt;- ggplot(diamonds_sample, aes(x = price)) +\n    geom_density(fill = \"#3b82f6\", alpha = 0.5, bw = 2000) +\n    labs(title = \"bw = 2000 (è¿‡å¹³æ»‘)\") +\n    theme_minimal()\n\np1 + p2 + p3\n\n\n\n\n\n\n\n\n\n\nåˆ†ç»„å¯†åº¦å›¾\n\nggplot(diamonds_sample, aes(x = price, fill = cut)) +\n    geom_density(alpha = 0.5) +\n    scale_fill_brewer(palette = \"Set2\") +\n    labs(\n        title = \"æŒ‰åˆ‡å·¥åˆ†ç»„çš„ä»·æ ¼å¯†åº¦åˆ†å¸ƒ\",\n        fill = \"åˆ‡å·¥ç­‰çº§\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nä»…æ˜¾ç¤ºè½®å»“çº¿\n\nggplot(diamonds_sample, aes(x = price, color = cut)) +\n    geom_density(linewidth = 1) +\n    scale_color_lancet() +\n    labs(\n        title = \"å¯†åº¦æ›²çº¿æ¯”è¾ƒ\",\n        color = \"åˆ‡å·¥ç­‰çº§\"\n    ) +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾"
    ]
  },
  {
    "objectID": "2027-bindhistogram.html#ç›´æ–¹å›¾-å¯†åº¦æ›²çº¿",
    "href": "2027-bindhistogram.html#ç›´æ–¹å›¾-å¯†åº¦æ›²çº¿",
    "title": "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾å®Œå…¨æŒ‡å—",
    "section": "ç›´æ–¹å›¾ + å¯†åº¦æ›²çº¿",
    "text": "ç›´æ–¹å›¾ + å¯†åº¦æ›²çº¿\n\nå åŠ æ˜¾ç¤º\n\nggplot(diamonds_sample, aes(x = price)) +\n    geom_histogram(\n        aes(y = after_stat(density)), # è½¬æ¢ä¸ºå¯†åº¦\n        bins = 50,\n        fill = \"#94a3b8\",\n        color = \"white\"\n    ) +\n    geom_density(color = \"#ef4444\", linewidth = 1.2) +\n    labs(\n        title = \"ç›´æ–¹å›¾ + å¯†åº¦æ›²çº¿\",\n        x = \"ä»·æ ¼\",\n        y = \"å¯†åº¦\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nåˆ†ç»„å åŠ \n\ndiamonds_subset &lt;- diamonds_sample %&gt;%\n    filter(cut %in% c(\"Fair\", \"Ideal\"))\n\nggplot(diamonds_subset, aes(x = price, fill = cut)) +\n    geom_histogram(\n        aes(y = after_stat(density)),\n        bins = 30,\n        position = \"identity\",\n        alpha = 0.4\n    ) +\n    geom_density(aes(color = cut), linewidth = 1) +\n    scale_fill_manual(values = c(\"#ef4444\", \"#3b82f6\")) +\n    scale_color_manual(values = c(\"#b91c1c\", \"#1d4ed8\")) +\n    labs(\n        title = \"ä¸¤ç»„åˆ†å¸ƒå¯¹æ¯”\",\n        fill = \"åˆ‡å·¥\",\n        color = \"åˆ‡å·¥\"\n    ) +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾"
    ]
  },
  {
    "objectID": "2027-bindhistogram.html#é¢‘ç‡å¤šè¾¹å½¢",
    "href": "2027-bindhistogram.html#é¢‘ç‡å¤šè¾¹å½¢",
    "title": "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾å®Œå…¨æŒ‡å—",
    "section": "é¢‘ç‡å¤šè¾¹å½¢",
    "text": "é¢‘ç‡å¤šè¾¹å½¢\né¢‘ç‡å¤šè¾¹å½¢ä½¿ç”¨æŠ˜çº¿è¿æ¥å„åˆ†ç®±çš„é¢‘ç‡ï¼Œé€‚åˆå¤šç»„æ¯”è¾ƒã€‚\n\nggplot(diamonds_sample, aes(x = price, color = cut)) +\n    geom_freqpoly(bins = 30, linewidth = 1) +\n    scale_color_brewer(palette = \"Set1\") +\n    labs(\n        title = \"é¢‘ç‡å¤šè¾¹å½¢\",\n        color = \"åˆ‡å·¥ç­‰çº§\"\n    ) +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾"
    ]
  },
  {
    "objectID": "2027-bindhistogram.html#å²­çº¿å›¾-ridgeline-plot",
    "href": "2027-bindhistogram.html#å²­çº¿å›¾-ridgeline-plot",
    "title": "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾å®Œå…¨æŒ‡å—",
    "section": "å²­çº¿å›¾ (Ridgeline Plot)",
    "text": "å²­çº¿å›¾ (Ridgeline Plot)\nå²­çº¿å›¾æ˜¯å±•ç¤ºå¤šç»„åˆ†å¸ƒçš„ä¼˜é›…æ–¹å¼ã€‚\n\n# install.packages(\"ggridges\")\nlibrary(ggridges)\n\nggplot(diamonds_sample, aes(x = price, y = cut, fill = cut)) +\n    geom_density_ridges(alpha = 0.7) +\n    scale_fill_brewer(palette = \"Set2\") +\n    labs(\n        title = \"å²­çº¿å›¾ï¼šå„åˆ‡å·¥ç­‰çº§çš„ä»·æ ¼åˆ†å¸ƒ\",\n        x = \"ä»·æ ¼\",\n        y = \"åˆ‡å·¥ç­‰çº§\"\n    ) +\n    theme_minimal() +\n    theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\n\næ¸å˜å¡«å……å²­çº¿å›¾\n\nggplot(diamonds_sample, aes(x = price, y = cut, fill = after_stat(x))) +\n    geom_density_ridges_gradient(scale = 2) +\n    scale_fill_viridis_c(option = \"plasma\") +\n    labs(\n        title = \"æ¸å˜å¡«å……å²­çº¿å›¾\",\n        x = \"ä»·æ ¼\",\n        y = \"åˆ‡å·¥ç­‰çº§\"\n    ) +\n    theme_minimal() +\n    theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\n\n\nåˆ†ä½æ•°å²­çº¿å›¾\n\nggplot(diamonds_sample, aes(x = price, y = cut, fill = factor(after_stat(quantile)))) +\n    stat_density_ridges(\n        geom = \"density_ridges_gradient\",\n        calc_ecdf = TRUE,\n        quantiles = 4,\n        quantile_lines = TRUE\n    ) +\n    scale_fill_viridis_d(name = \"å››åˆ†ä½\", option = \"plasma\") +\n    labs(\n        title = \"åˆ†ä½æ•°å²­çº¿å›¾\",\n        subtitle = \"å±•ç¤ºå„ç»„çš„å››åˆ†ä½åˆ†å¸ƒ\"\n    ) +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾"
    ]
  },
  {
    "objectID": "2027-bindhistogram.html#ç´¯ç§¯åˆ†å¸ƒå‡½æ•°-ecdf",
    "href": "2027-bindhistogram.html#ç´¯ç§¯åˆ†å¸ƒå‡½æ•°-ecdf",
    "title": "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾å®Œå…¨æŒ‡å—",
    "section": "ç´¯ç§¯åˆ†å¸ƒå‡½æ•° (ECDF)",
    "text": "ç´¯ç§¯åˆ†å¸ƒå‡½æ•° (ECDF)\n\nggplot(diamonds_sample, aes(x = price, color = cut)) +\n    stat_ecdf(linewidth = 1) +\n    scale_color_brewer(palette = \"Set1\") +\n    labs(\n        title = \"ç»éªŒç´¯ç§¯åˆ†å¸ƒå‡½æ•° (ECDF)\",\n        x = \"ä»·æ ¼\",\n        y = \"ç´¯ç§¯æ¦‚ç‡\",\n        color = \"åˆ‡å·¥\"\n    ) +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾"
    ]
  },
  {
    "objectID": "2027-bindhistogram.html#qq-å›¾",
    "href": "2027-bindhistogram.html#qq-å›¾",
    "title": "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾å®Œå…¨æŒ‡å—",
    "section": "QQ å›¾",
    "text": "QQ å›¾\nç”¨äºæ£€éªŒæ•°æ®æ˜¯å¦ç¬¦åˆæ­£æ€åˆ†å¸ƒã€‚\n\n# å–å•ä¸€ç»„æ•°æ®\nideal_prices &lt;- diamonds_sample$price[diamonds_sample$cut == \"Ideal\"]\n\nggplot(data.frame(x = ideal_prices), aes(sample = x)) +\n    stat_qq(color = \"#4f46e5\") +\n    stat_qq_line(color = \"#ef4444\") +\n    labs(\n        title = \"QQ å›¾ï¼šæ£€éªŒæ­£æ€æ€§\",\n        subtitle = \"ç‚¹åç¦»çº¿è¡¨ç¤ºéæ­£æ€\",\n        x = \"ç†è®ºåˆ†ä½æ•°\",\n        y = \"æ ·æœ¬åˆ†ä½æ•°\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\nåˆ†ç»„ QQ å›¾\n\nggplot(diamonds_sample, aes(sample = price, color = cut)) +\n    stat_qq(alpha = 0.5) +\n    stat_qq_line() +\n    scale_color_brewer(palette = \"Set1\") +\n    facet_wrap(~cut) +\n    labs(title = \"åˆ†ç»„ QQ å›¾\") +\n    theme_minimal() +\n    theme(legend.position = \"none\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾"
    ]
  },
  {
    "objectID": "2027-bindhistogram.html#æ·»åŠ ç»Ÿè®¡ä¿¡æ¯",
    "href": "2027-bindhistogram.html#æ·»åŠ ç»Ÿè®¡ä¿¡æ¯",
    "title": "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾å®Œå…¨æŒ‡å—",
    "section": "æ·»åŠ ç»Ÿè®¡ä¿¡æ¯",
    "text": "æ·»åŠ ç»Ÿè®¡ä¿¡æ¯\n\næ·»åŠ å‡å€¼çº¿\n\nmean_price &lt;- mean(diamonds_sample$price)\nmedian_price &lt;- median(diamonds_sample$price)\n\nggplot(diamonds_sample, aes(x = price)) +\n    geom_histogram(bins = 50, fill = \"#94a3b8\", color = \"white\") +\n    geom_vline(xintercept = mean_price, color = \"#ef4444\", linetype = \"dashed\", linewidth = 1) +\n    geom_vline(xintercept = median_price, color = \"#3b82f6\", linetype = \"dashed\", linewidth = 1) +\n    annotate(\"text\", x = mean_price + 500, y = 300, label = paste0(\"å‡å€¼: $\", round(mean_price)), color = \"#ef4444\") +\n    annotate(\"text\", x = median_price - 500, y = 280, label = paste0(\"ä¸­ä½æ•°: $\", round(median_price)), color = \"#3b82f6\") +\n    labs(title = \"æ·»åŠ å‡å€¼å’Œä¸­ä½æ•°æ ‡æ³¨\") +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\næ·»åŠ æ­£æ€æ›²çº¿å‚è€ƒ\n\nggplot(diamonds_sample, aes(x = price)) +\n    geom_histogram(\n        aes(y = after_stat(density)),\n        bins = 50,\n        fill = \"#94a3b8\",\n        color = \"white\"\n    ) +\n    stat_function(\n        fun = dnorm,\n        args = list(mean = mean(diamonds_sample$price), sd = sd(diamonds_sample$price)),\n        color = \"#ef4444\",\n        linewidth = 1.2\n    ) +\n    labs(\n        title = \"ä¸æ­£æ€åˆ†å¸ƒæ¯”è¾ƒ\",\n        subtitle = \"çº¢çº¿ä¸ºåŒå‡å€¼æ ‡å‡†å·®çš„æ­£æ€åˆ†å¸ƒ\"\n    ) +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾"
    ]
  },
  {
    "objectID": "2027-bindhistogram.html#ç¾åŒ–ä¸ä¸“ä¸šå›¾è¡¨",
    "href": "2027-bindhistogram.html#ç¾åŒ–ä¸ä¸“ä¸šå›¾è¡¨",
    "title": "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾å®Œå…¨æŒ‡å—",
    "section": "ç¾åŒ–ä¸ä¸“ä¸šå›¾è¡¨",
    "text": "ç¾åŒ–ä¸ä¸“ä¸šå›¾è¡¨\n\nä¸“ä¸šæ ·å¼ç›´æ–¹å›¾\n\nggplot(diamonds_sample, aes(x = price)) +\n    geom_histogram(\n        bins = 40,\n        fill = \"#4f46e5\",\n        color = \"white\",\n        alpha = 0.8\n    ) +\n    geom_density(\n        aes(y = after_stat(count) * 500), # ç¼©æ”¾å¯†åº¦æ›²çº¿\n        color = \"#f59e0b\",\n        linewidth = 1.2\n    ) +\n    scale_x_continuous(labels = scales::dollar_format()) +\n    labs(\n        title = \"é’»çŸ³ä»·æ ¼åˆ†å¸ƒåˆ†æ\",\n        subtitle = \"åŸºäº 5,000 é¢—é’»çŸ³æ ·æœ¬\",\n        x = \"ä»·æ ¼\",\n        y = \"é¢‘æ•°\",\n        caption = \"æ•°æ®æ¥æºï¼šggplot2 diamonds æ•°æ®é›†\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\", size = 14),\n        plot.subtitle = element_text(color = \"gray50\"),\n        panel.grid.minor = element_blank()\n    )\n\n\n\n\n\n\n\n\n\n\né•œåƒç›´æ–¹å›¾ï¼ˆå¯¹æ¯”ä¸¤ç»„ï¼‰\n\n# å‡†å¤‡æ•°æ®\nfair_diamonds &lt;- diamonds_sample %&gt;%\n    filter(cut == \"Fair\") %&gt;%\n    mutate(y = 1)\nideal_diamonds &lt;- diamonds_sample %&gt;%\n    filter(cut == \"Ideal\") %&gt;%\n    mutate(y = -1)\n\nggplot() +\n    geom_histogram(\n        data = fair_diamonds,\n        aes(x = price, y = after_stat(count)),\n        bins = 30,\n        fill = \"#ef4444\",\n        alpha = 0.7\n    ) +\n    geom_histogram(\n        data = ideal_diamonds,\n        aes(x = price, y = -after_stat(count)),\n        bins = 30,\n        fill = \"#3b82f6\",\n        alpha = 0.7\n    ) +\n    geom_hline(yintercept = 0, color = \"black\") +\n    scale_y_continuous(labels = abs) +\n    annotate(\"text\", x = 15000, y = 100, label = \"Fair\", color = \"#ef4444\", size = 5, fontface = \"bold\") +\n    annotate(\"text\", x = 15000, y = -100, label = \"Ideal\", color = \"#3b82f6\", size = 5, fontface = \"bold\") +\n    labs(\n        title = \"é•œåƒç›´æ–¹å›¾ï¼šFair vs Ideal åˆ‡å·¥æ¯”è¾ƒ\",\n        x = \"ä»·æ ¼\",\n        y = \"é¢‘æ•°\"\n    ) +\n    theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾"
    ]
  },
  {
    "objectID": "2027-bindhistogram.html#ä¿å­˜å›¾ç‰‡",
    "href": "2027-bindhistogram.html#ä¿å­˜å›¾ç‰‡",
    "title": "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾å®Œå…¨æŒ‡å—",
    "section": "ä¿å­˜å›¾ç‰‡",
    "text": "ä¿å­˜å›¾ç‰‡\n\np &lt;- ggplot(diamonds_sample, aes(x = price, fill = cut)) +\n    geom_density(alpha = 0.5) +\n    scale_fill_brewer(palette = \"Set2\") +\n    theme_minimal()\n\n# PNG\nggsave(\"density_plot.png\", p, width = 10, height = 6, dpi = 300)\n\n# PDF\nggsave(\"density_plot.pdf\", p, width = 10, height = 6)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾"
    ]
  },
  {
    "objectID": "2027-bindhistogram.html#æ€»ç»“",
    "href": "2027-bindhistogram.html#æ€»ç»“",
    "title": "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nåœºæ™¯\næ¨èå›¾è¡¨\n\n\n\n\nå•å˜é‡åˆ†å¸ƒæ¢ç´¢\nç›´æ–¹å›¾\n\n\nå¤šç»„åˆ†å¸ƒæ¯”è¾ƒ\nå¯†åº¦å›¾/é¢‘ç‡å¤šè¾¹å½¢\n\n\nå¤šç±»åˆ«åˆ†å¸ƒå±•ç¤º\nå²­çº¿å›¾\n\n\næ­£æ€æ€§æ£€éªŒ\nQQ å›¾\n\n\nåˆ†å¸ƒå½¢æ€è¯¦è§£\nç›´æ–¹å›¾ + å¯†åº¦æ›²çº¿\n\n\n\n\n[!TIP] æœ€ä½³å®è·µï¼š 1. åˆç†é€‰æ‹©åˆ†ç®±æ•°/å¸¦å®½ 2. å¤šç»„æ¯”è¾ƒæ—¶ä½¿ç”¨é€æ˜åº¦ 3. æ·»åŠ å‡å€¼/ä¸­ä½æ•°å‚è€ƒçº¿ 4. è€ƒè™‘ä½¿ç”¨å²­çº¿å›¾å±•ç¤ºå¤šç»„åˆ†å¸ƒ",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "ç›´æ–¹å›¾ä¸å¯†åº¦å›¾"
    ]
  },
  {
    "objectID": "2029-bindlineplot.html",
    "href": "2029-bindlineplot.html",
    "title": "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "æŠ˜çº¿å›¾æ˜¯æ•°æ®å¯è§†åŒ–ä¸­æœ€åŸºç¡€ä¹Ÿæ˜¯æœ€é‡è¦çš„å›¾è¡¨ç±»å‹ä¹‹ä¸€ã€‚å®ƒç‰¹åˆ«é€‚åˆå±•ç¤ºï¼š\n\næ—¶é—´åºåˆ—æ•°æ®ï¼šè‚¡ä»·ã€æ¸©åº¦å˜åŒ–ã€ç–¾ç—…å‘ç—…ç‡\nè¶‹åŠ¿å˜åŒ–ï¼šå®éªŒç»“æœéšæ¡ä»¶å˜åŒ–\nå¤šç»„å¯¹æ¯”ï¼šä¸åŒç»„åˆ«åœ¨æ—¶é—´ç»´åº¦ä¸Šçš„å·®å¼‚\n\næœ¬æ•™ç¨‹å°†ä»åŸºç¡€åˆ°é«˜çº§ï¼Œå…¨é¢ä»‹ç» R è¯­è¨€ä¸­æŠ˜çº¿å›¾çš„ç»‘åˆ¶æŠ€å·§ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—"
    ]
  },
  {
    "objectID": "2029-bindlineplot.html#å‰è¨€",
    "href": "2029-bindlineplot.html#å‰è¨€",
    "title": "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "æŠ˜çº¿å›¾æ˜¯æ•°æ®å¯è§†åŒ–ä¸­æœ€åŸºç¡€ä¹Ÿæ˜¯æœ€é‡è¦çš„å›¾è¡¨ç±»å‹ä¹‹ä¸€ã€‚å®ƒç‰¹åˆ«é€‚åˆå±•ç¤ºï¼š\n\næ—¶é—´åºåˆ—æ•°æ®ï¼šè‚¡ä»·ã€æ¸©åº¦å˜åŒ–ã€ç–¾ç—…å‘ç—…ç‡\nè¶‹åŠ¿å˜åŒ–ï¼šå®éªŒç»“æœéšæ¡ä»¶å˜åŒ–\nå¤šç»„å¯¹æ¯”ï¼šä¸åŒç»„åˆ«åœ¨æ—¶é—´ç»´åº¦ä¸Šçš„å·®å¼‚\n\næœ¬æ•™ç¨‹å°†ä»åŸºç¡€åˆ°é«˜çº§ï¼Œå…¨é¢ä»‹ç» R è¯­è¨€ä¸­æŠ˜çº¿å›¾çš„ç»‘åˆ¶æŠ€å·§ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—"
    ]
  },
  {
    "objectID": "2029-bindlineplot.html#ggplot2-åŸºç¡€æŠ˜çº¿å›¾",
    "href": "2029-bindlineplot.html#ggplot2-åŸºç¡€æŠ˜çº¿å›¾",
    "title": "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "ggplot2 åŸºç¡€æŠ˜çº¿å›¾",
    "text": "ggplot2 åŸºç¡€æŠ˜çº¿å›¾\n\nå‡†å¤‡å·¥ä½œ\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(scales)\nlibrary(lubridate)\n\n# è®¾ç½®ä¸»é¢˜\ntheme_set(theme_minimal(base_size = 14))\n\n\n\nåˆ›å»ºç¤ºä¾‹æ•°æ®\n\n# æ¨¡æ‹Ÿæœˆåº¦é”€å”®æ•°æ®\nset.seed(42)\nmonths &lt;- seq(as.Date(\"2024-01-01\"), as.Date(\"2025-12-31\"), by = \"month\")\nsales_data &lt;- data.frame(\n    date = months,\n    product_A = 100 + cumsum(rnorm(length(months), 5, 10)),\n    product_B = 80 + cumsum(rnorm(length(months), 3, 8)),\n    product_C = 60 + cumsum(rnorm(length(months), 4, 12))\n)\n\nhead(sales_data)\n\n        date product_A product_B product_C\n1 2024-01-01  118.7096  98.16155  58.82265\n2 2024-02-01  118.0626  97.71779  70.69042\n3 2024-03-01  126.6939  98.65964  78.55352\n4 2024-04-01  138.0225  87.55433  73.14746\n5 2024-05-01  147.0652  94.23511  96.05619\n6 2024-06-01  151.0040  92.11515 107.77098\n\n\n\n\nåŸºç¡€æŠ˜çº¿å›¾\n\n# æœ€ç®€å•çš„æŠ˜çº¿å›¾\nggplot(sales_data, aes(x = date, y = product_A)) +\n    geom_line(color = \"#4e79a7\", linewidth = 1) +\n    labs(\n        title = \"äº§å“ A æœˆåº¦é”€å”®è¶‹åŠ¿\",\n        x = \"æ—¥æœŸ\",\n        y = \"é”€å”®é¢ï¼ˆä¸‡å…ƒï¼‰\"\n    )\n\n\n\n\n\n\n\n\n\n\næ·»åŠ æ•°æ®ç‚¹\n\nggplot(sales_data, aes(x = date, y = product_A)) +\n    geom_line(color = \"#4e79a7\", linewidth = 1) +\n    geom_point(color = \"#4e79a7\", size = 2.5, shape = 21, fill = \"white\", stroke = 1.5) +\n    labs(\n        title = \"äº§å“ A æœˆåº¦é”€å”®è¶‹åŠ¿\",\n        subtitle = \"æ·»åŠ æ•°æ®ç‚¹ä½¿è¶‹åŠ¿æ›´æ¸…æ™°\",\n        x = \"æ—¥æœŸ\",\n        y = \"é”€å”®é¢ï¼ˆä¸‡å…ƒï¼‰\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—"
    ]
  },
  {
    "objectID": "2029-bindlineplot.html#å¤šç»„æŠ˜çº¿å¯¹æ¯”",
    "href": "2029-bindlineplot.html#å¤šç»„æŠ˜çº¿å¯¹æ¯”",
    "title": "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "å¤šç»„æŠ˜çº¿å¯¹æ¯”",
    "text": "å¤šç»„æŠ˜çº¿å¯¹æ¯”\n\næ•°æ®æ•´ç†ï¼ˆå®½æ ¼å¼è½¬é•¿æ ¼å¼ï¼‰\n\n# è½¬æ¢ä¸ºé•¿æ ¼å¼\nsales_long &lt;- sales_data %&gt;%\n    pivot_longer(\n        cols = starts_with(\"product\"),\n        names_to = \"product\",\n        values_to = \"sales\"\n    ) %&gt;%\n    mutate(product = case_when(\n        product == \"product_A\" ~ \"äº§å“ A\",\n        product == \"product_B\" ~ \"äº§å“ B\",\n        product == \"product_C\" ~ \"äº§å“ C\"\n    ))\n\nhead(sales_long)\n\n# A tibble: 6 Ã— 3\n  date       product sales\n  &lt;date&gt;     &lt;chr&gt;   &lt;dbl&gt;\n1 2024-01-01 äº§å“ A  119. \n2 2024-01-01 äº§å“ B   98.2\n3 2024-01-01 äº§å“ C   58.8\n4 2024-02-01 äº§å“ A  118. \n5 2024-02-01 äº§å“ B   97.7\n6 2024-02-01 äº§å“ C   70.7\n\n\n\n\nå¤šç»„æŠ˜çº¿å›¾\n\nggplot(sales_long, aes(x = date, y = sales, color = product)) +\n    geom_line(linewidth = 1) +\n    scale_color_manual(values = c(\"#4e79a7\", \"#f28e2b\", \"#59a14f\")) +\n    labs(\n        title = \"ä¸‰æ¬¾äº§å“é”€å”®è¶‹åŠ¿å¯¹æ¯”\",\n        x = \"æ—¥æœŸ\",\n        y = \"é”€å”®é¢ï¼ˆä¸‡å…ƒï¼‰\",\n        color = \"äº§å“\"\n    ) +\n    theme(legend.position = \"top\")\n\n\n\n\n\n\n\n\n\n\næ·»åŠ åŒºåˆ†ç‚¹å½¢çŠ¶\n\nggplot(sales_long, aes(x = date, y = sales, color = product, shape = product)) +\n    geom_line(linewidth = 1) +\n    geom_point(size = 2.5) +\n    scale_color_manual(values = c(\"#4e79a7\", \"#f28e2b\", \"#59a14f\")) +\n    scale_shape_manual(values = c(16, 17, 15)) + # åœ†å½¢ã€ä¸‰è§’ã€æ–¹å½¢\n    labs(\n        title = \"ä¸‰æ¬¾äº§å“é”€å”®è¶‹åŠ¿å¯¹æ¯”\",\n        subtitle = \"ä½¿ç”¨ä¸åŒå½¢çŠ¶åŒºåˆ†äº§å“\",\n        x = \"æ—¥æœŸ\",\n        y = \"é”€å”®é¢ï¼ˆä¸‡å…ƒï¼‰\",\n        color = \"äº§å“\",\n        shape = \"äº§å“\"\n    ) +\n    theme(legend.position = \"top\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—"
    ]
  },
  {
    "objectID": "2029-bindlineplot.html#è¯¯å·®å¸¦ä¸ç½®ä¿¡åŒºé—´",
    "href": "2029-bindlineplot.html#è¯¯å·®å¸¦ä¸ç½®ä¿¡åŒºé—´",
    "title": "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "è¯¯å·®å¸¦ä¸ç½®ä¿¡åŒºé—´",
    "text": "è¯¯å·®å¸¦ä¸ç½®ä¿¡åŒºé—´\n\nåˆ›å»ºå¸¦è¯¯å·®çš„æ•°æ®\n\n# æ¨¡æ‹Ÿå¸¦è¯¯å·®çš„å®éªŒæ•°æ®\ntime_points &lt;- 1:10\nexperiment_data &lt;- data.frame(\n    time = time_points,\n    mean_treatment = 10 + log(time_points) * 5,\n    se_treatment = runif(length(time_points), 0.5, 1.5),\n    mean_control = 10 + log(time_points) * 2,\n    se_control = runif(length(time_points), 0.3, 1)\n)\n\nexperiment_data &lt;- experiment_data %&gt;%\n    mutate(\n        lower_treatment = mean_treatment - 1.96 * se_treatment,\n        upper_treatment = mean_treatment + 1.96 * se_treatment,\n        lower_control = mean_control - 1.96 * se_control,\n        upper_control = mean_control + 1.96 * se_control\n    )\n\n\n\nè¯¯å·®å¸¦ï¼ˆribbonï¼‰\n\nggplot(experiment_data, aes(x = time)) +\n    # è¯¯å·®å¸¦\n    geom_ribbon(aes(ymin = lower_treatment, ymax = upper_treatment),\n        fill = \"#4e79a7\", alpha = 0.2\n    ) +\n    geom_ribbon(aes(ymin = lower_control, ymax = upper_control),\n        fill = \"#e15759\", alpha = 0.2\n    ) +\n    # æŠ˜çº¿\n    geom_line(aes(y = mean_treatment, color = \"å¹²é¢„ç»„\"), linewidth = 1) +\n    geom_line(aes(y = mean_control, color = \"å¯¹ç…§ç»„\"), linewidth = 1) +\n    scale_color_manual(values = c(\"å¹²é¢„ç»„\" = \"#4e79a7\", \"å¯¹ç…§ç»„\" = \"#e15759\")) +\n    labs(\n        title = \"å¹²é¢„æ•ˆæœæ—¶é—´æ›²çº¿\",\n        subtitle = \"é˜´å½±åŒºåŸŸè¡¨ç¤º 95% ç½®ä¿¡åŒºé—´\",\n        x = \"æ—¶é—´ï¼ˆå‘¨ï¼‰\",\n        y = \"æŒ‡æ ‡å€¼\",\n        color = \"ç»„åˆ«\"\n    ) +\n    theme(legend.position = c(0.85, 0.2))\n\n\n\n\n\n\n\n\n\n\nè¯¯å·®çº¿ï¼ˆerrorbarï¼‰\n\n# è½¬æ¢ä¸ºé•¿æ ¼å¼æ›´æ–¹ä¾¿\nexp_long &lt;- experiment_data %&gt;%\n    select(time, mean_treatment, mean_control, se_treatment, se_control) %&gt;%\n    pivot_longer(\n        cols = c(mean_treatment, mean_control),\n        names_to = \"group\",\n        names_prefix = \"mean_\",\n        values_to = \"mean\"\n    ) %&gt;%\n    mutate(\n        se = ifelse(group == \"treatment\", experiment_data$se_treatment, experiment_data$se_control),\n        group = ifelse(group == \"treatment\", \"å¹²é¢„ç»„\", \"å¯¹ç…§ç»„\")\n    )\n\nggplot(exp_long, aes(x = time, y = mean, color = group)) +\n    geom_line(linewidth = 1) +\n    geom_point(size = 3) +\n    geom_errorbar(aes(ymin = mean - 1.96 * se, ymax = mean + 1.96 * se),\n        width = 0.2, linewidth = 0.8\n    ) +\n    scale_color_manual(values = c(\"å¹²é¢„ç»„\" = \"#4e79a7\", \"å¯¹ç…§ç»„\" = \"#e15759\")) +\n    labs(\n        title = \"å¹²é¢„æ•ˆæœæ—¶é—´æ›²çº¿\",\n        subtitle = \"è¯¯å·®çº¿è¡¨ç¤º 95% ç½®ä¿¡åŒºé—´\",\n        x = \"æ—¶é—´ï¼ˆå‘¨ï¼‰\",\n        y = \"æŒ‡æ ‡å€¼\",\n        color = \"ç»„åˆ«\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—"
    ]
  },
  {
    "objectID": "2029-bindlineplot.html#æ³¨é‡Šä¸æ ‡è®°æŠ€å·§",
    "href": "2029-bindlineplot.html#æ³¨é‡Šä¸æ ‡è®°æŠ€å·§",
    "title": "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "4. æ³¨é‡Šä¸æ ‡è®°æŠ€å·§",
    "text": "4. æ³¨é‡Šä¸æ ‡è®°æŠ€å·§\n\næ·»åŠ æ–‡æœ¬æ³¨é‡Š\n\nggplot(sales_data, aes(x = date, y = product_A)) +\n    geom_line(color = \"#4e79a7\", linewidth = 1) +\n    # æ ‡æ³¨æœ€é«˜ç‚¹\n    annotate(\"point\",\n        x = sales_data$date[which.max(sales_data$product_A)],\n        y = max(sales_data$product_A), color = \"red\", size = 4\n    ) +\n    annotate(\"text\",\n        x = sales_data$date[which.max(sales_data$product_A)],\n        y = max(sales_data$product_A) + 10,\n        label = paste0(\"å³°å€¼: \", round(max(sales_data$product_A), 1)),\n        color = \"red\", fontface = \"bold\"\n    ) +\n    # æ ‡æ³¨åŒºåŸŸ\n    annotate(\"rect\",\n        xmin = as.Date(\"2024-11-01\"), xmax = as.Date(\"2025-02-01\"),\n        ymin = -Inf, ymax = Inf, fill = \"yellow\", alpha = 0.2\n    ) +\n    annotate(\"text\",\n        x = as.Date(\"2024-12-15\"), y = min(sales_data$product_A),\n        label = \"ä¿ƒé”€å­£\", fontface = \"italic\"\n    ) +\n    labs(\n        title = \"äº§å“ A é”€å”®è¶‹åŠ¿ä¸å…³é”®èŠ‚ç‚¹\",\n        x = \"æ—¥æœŸ\",\n        y = \"é”€å”®é¢ï¼ˆä¸‡å…ƒï¼‰\"\n    )\n\n\n\n\n\n\n\n\n\n\næ·»åŠ å‚ç›´å‚è€ƒçº¿\n\n# æ ‡è®°é‡è¦äº‹ä»¶\nevents &lt;- data.frame(\n    date = as.Date(c(\"2024-06-01\", \"2025-01-01\", \"2025-06-01\")),\n    event = c(\"äº§å“å‡çº§\", \"ä»·æ ¼è°ƒæ•´\", \"è¥é”€æ´»åŠ¨\")\n)\n\nggplot(sales_data, aes(x = date, y = product_A)) +\n    geom_line(color = \"#4e79a7\", linewidth = 1) +\n    geom_vline(\n        data = events, aes(xintercept = date),\n        linetype = \"dashed\", color = \"gray50\"\n    ) +\n    geom_label(\n        data = events, aes(x = date, y = max(sales_data$product_A) * 0.95, label = event),\n        size = 3, fill = \"white\", label.size = 0.5\n    ) +\n    labs(\n        title = \"äº§å“ A é”€å”®è¶‹åŠ¿ä¸å…³é”®äº‹ä»¶\",\n        x = \"æ—¥æœŸ\",\n        y = \"é”€å”®é¢ï¼ˆä¸‡å…ƒï¼‰\"\n    )\n\n\n\n\n\n\n\n\n\n\nç›´æ¥æ ‡æ³¨çº¿æ¡ç»ˆç‚¹\n\n# è·å–æœ€æ–°æ•°æ®ç‚¹\nlast_points &lt;- sales_long %&gt;%\n    group_by(product) %&gt;%\n    filter(date == max(date))\n\nggplot(sales_long, aes(x = date, y = sales, color = product)) +\n    geom_line(linewidth = 1) +\n    geom_text(\n        data = last_points, aes(label = product),\n        hjust = -0.1, fontface = \"bold\", size = 4\n    ) +\n    scale_color_manual(values = c(\"#4e79a7\", \"#f28e2b\", \"#59a14f\")) +\n    scale_x_date(expand = expansion(mult = c(0.02, 0.15))) + # å³ä¾§ç•™ç©ºé—´\n    labs(\n        title = \"ä¸‰æ¬¾äº§å“é”€å”®è¶‹åŠ¿\",\n        subtitle = \"ç›´æ¥æ ‡æ³¨æ›¿ä»£å›¾ä¾‹\",\n        x = \"æ—¥æœŸ\",\n        y = \"é”€å”®é¢ï¼ˆä¸‡å…ƒï¼‰\"\n    ) +\n    theme(legend.position = \"none\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—"
    ]
  },
  {
    "objectID": "2029-bindlineplot.html#æ—¶é—´è½´æ ¼å¼åŒ–",
    "href": "2029-bindlineplot.html#æ—¶é—´è½´æ ¼å¼åŒ–",
    "title": "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "æ—¶é—´è½´æ ¼å¼åŒ–",
    "text": "æ—¶é—´è½´æ ¼å¼åŒ–\n\næ—¥æœŸæ ¼å¼æ§åˆ¶\n\nggplot(sales_data, aes(x = date, y = product_A)) +\n    geom_line(color = \"#4e79a7\", linewidth = 1) +\n    scale_x_date(\n        date_breaks = \"3 months\", # æ¯3ä¸ªæœˆä¸€ä¸ªåˆ»åº¦\n        date_labels = \"%Yå¹´%mæœˆ\", # ä¸­æ–‡æ—¥æœŸæ ¼å¼\n        expand = c(0.02, 0.02)\n    ) +\n    labs(\n        title = \"äº§å“ A é”€å”®è¶‹åŠ¿\",\n        x = NULL,\n        y = \"é”€å”®é¢ï¼ˆä¸‡å…ƒï¼‰\"\n    ) +\n    theme(axis.text.x = element_text(angle = 45, hjust = 1))\n\n\n\n\n\n\n\n\n\n\nå¸¸ç”¨æ—¥æœŸæ ¼å¼\n\n\n\næ ¼å¼ä»£ç \nå«ä¹‰\nç¤ºä¾‹\n\n\n\n\n%Y\n4ä½å¹´ä»½\n2024\n\n\n%y\n2ä½å¹´ä»½\n24\n\n\n%m\næœˆä»½ï¼ˆæ•°å­—ï¼‰\n01-12\n\n\n%b\næœˆä»½ï¼ˆç¼©å†™ï¼‰\nJan\n\n\n%B\næœˆä»½ï¼ˆå…¨ç§°ï¼‰\nJanuary\n\n\n%d\næ—¥æœŸ\n01-31\n\n\n%H\nå°æ—¶ï¼ˆ24hï¼‰\n00-23\n\n\n%M\nåˆ†é’Ÿ\n00-59\n\n\n%w\næ˜ŸæœŸï¼ˆæ•°å­—ï¼‰\n0-6\n\n\n%A\næ˜ŸæœŸï¼ˆå…¨ç§°ï¼‰\nMonday",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—"
    ]
  },
  {
    "objectID": "2029-bindlineplot.html#åˆ†é¢ä¸å°å¤šå›¾",
    "href": "2029-bindlineplot.html#åˆ†é¢ä¸å°å¤šå›¾",
    "title": "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "åˆ†é¢ä¸å°å¤šå›¾",
    "text": "åˆ†é¢ä¸å°å¤šå›¾\n\nfacet_wrap æŒ‰äº§å“åˆ†é¢\n\nggplot(sales_long, aes(x = date, y = sales)) +\n    geom_line(aes(color = product), linewidth = 1) +\n    facet_wrap(~product, ncol = 1, scales = \"free_y\") +\n    scale_color_manual(values = c(\"#4e79a7\", \"#f28e2b\", \"#59a14f\")) +\n    labs(\n        title = \"å„äº§å“é”€å”®è¶‹åŠ¿ï¼ˆç‹¬ç«‹çºµè½´ï¼‰\",\n        x = \"æ—¥æœŸ\",\n        y = \"é”€å”®é¢ï¼ˆä¸‡å…ƒï¼‰\"\n    ) +\n    theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\n\n\næ·»åŠ è¶‹åŠ¿èƒŒæ™¯\n\n# æ·»åŠ æ•´ä½“è¶‹åŠ¿ä½œä¸ºèƒŒæ™¯\nggplot() +\n    # èƒŒæ™¯ï¼šæ‰€æœ‰æ•°æ®ï¼ˆæµ…è‰²ï¼‰\n    geom_line(\n        data = sales_long, aes(x = date, y = sales, group = product),\n        color = \"gray80\", linewidth = 0.5\n    ) +\n    # å‰æ™¯ï¼šå½“å‰åˆ†é¢æ•°æ®ï¼ˆæ·±è‰²ï¼‰\n    geom_line(\n        data = sales_long, aes(x = date, y = sales, color = product),\n        linewidth = 1\n    ) +\n    facet_wrap(~product, ncol = 1) +\n    scale_color_manual(values = c(\"#4e79a7\", \"#f28e2b\", \"#59a14f\")) +\n    labs(\n        title = \"å„äº§å“é”€å”®è¶‹åŠ¿å¯¹æ¯”\",\n        subtitle = \"ç°è‰²çº¿æ¡ä¸ºå…¶ä»–äº§å“è¶‹åŠ¿\",\n        x = \"æ—¥æœŸ\",\n        y = \"é”€å”®é¢ï¼ˆä¸‡å…ƒï¼‰\"\n    ) +\n    theme(\n        legend.position = \"none\",\n        panel.grid.minor = element_blank()\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—"
    ]
  },
  {
    "objectID": "2029-bindlineplot.html#å¹³æ»‘æ›²çº¿ä¸è¶‹åŠ¿æ‹Ÿåˆ",
    "href": "2029-bindlineplot.html#å¹³æ»‘æ›²çº¿ä¸è¶‹åŠ¿æ‹Ÿåˆ",
    "title": "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "å¹³æ»‘æ›²çº¿ä¸è¶‹åŠ¿æ‹Ÿåˆ",
    "text": "å¹³æ»‘æ›²çº¿ä¸è¶‹åŠ¿æ‹Ÿåˆ\n\nå±€éƒ¨å›å½’å¹³æ»‘ (LOESS)\n\n# æ·»åŠ å™ªå£°æ•°æ®\nset.seed(123)\nnoisy_data &lt;- data.frame(\n    x = 1:100,\n    y = sin(1:100 / 10) * 10 + rnorm(100, 0, 2)\n)\n\nggplot(noisy_data, aes(x = x, y = y)) +\n    geom_point(color = \"gray60\", alpha = 0.6) +\n    geom_smooth(\n        method = \"loess\", span = 0.3, color = \"#4e79a7\",\n        fill = \"#4e79a7\", alpha = 0.2\n    ) +\n    labs(\n        title = \"LOESS å¹³æ»‘æ›²çº¿\",\n        subtitle = \"span = 0.3ï¼Œé˜´å½±ä¸ºç½®ä¿¡åŒºé—´\",\n        x = \"X\",\n        y = \"Y\"\n    )\n\n\n\n\n\n\n\n\n\n\nçº¿æ€§è¶‹åŠ¿æ‹Ÿåˆ\n\nggplot(sales_data, aes(x = date, y = product_A)) +\n    geom_point(color = \"#4e79a7\", alpha = 0.6) +\n    geom_line(color = \"#4e79a7\", alpha = 0.3) +\n    geom_smooth(method = \"lm\", color = \"#e15759\", fill = \"#e15759\", alpha = 0.2) +\n    labs(\n        title = \"é”€å”®é¢çº¿æ€§è¶‹åŠ¿\",\n        subtitle = \"çº¢è‰²ä¸ºçº¿æ€§æ‹ŸåˆåŠ 95% ç½®ä¿¡åŒºé—´\",\n        x = \"æ—¥æœŸ\",\n        y = \"é”€å”®é¢ï¼ˆä¸‡å…ƒï¼‰\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—"
    ]
  },
  {
    "objectID": "2029-bindlineplot.html#é˜¶æ¢¯å›¾ä¸å˜åŒ–å¼ºè°ƒ",
    "href": "2029-bindlineplot.html#é˜¶æ¢¯å›¾ä¸å˜åŒ–å¼ºè°ƒ",
    "title": "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "é˜¶æ¢¯å›¾ä¸å˜åŒ–å¼ºè°ƒ",
    "text": "é˜¶æ¢¯å›¾ä¸å˜åŒ–å¼ºè°ƒ\n\né˜¶æ¢¯æŠ˜çº¿å›¾\n\n# é˜¶æ¢¯å›¾é€‚åˆå±•ç¤ºç¦»æ•£å˜åŒ–\nggplot(sales_data, aes(x = date, y = product_A)) +\n    geom_step(color = \"#4e79a7\", linewidth = 1) +\n    geom_point(color = \"#4e79a7\", size = 2) +\n    labs(\n        title = \"äº§å“ A ä»·æ ¼å˜åŠ¨ï¼ˆé˜¶æ¢¯å›¾ï¼‰\",\n        subtitle = \"é˜¶æ¢¯å›¾å¼ºè°ƒç¦»æ•£æ—¶é—´ç‚¹çš„å€¼å˜åŒ–\",\n        x = \"æ—¥æœŸ\",\n        y = \"ä»·æ ¼ï¼ˆå…ƒï¼‰\"\n    )\n\n\n\n\n\n\n\n\n\n\né«˜äº®å…³é”®åŒºé—´\n\n# è¯†åˆ«å¢é•¿å’Œä¸‹é™åŒºé—´\nsales_data &lt;- sales_data %&gt;%\n    mutate(\n        change = product_A - lag(product_A),\n        direction = ifelse(change &gt;= 0, \"å¢é•¿\", \"ä¸‹é™\")\n    )\n\nggplot(sales_data, aes(x = date, y = product_A)) +\n    geom_line(color = \"gray50\", linewidth = 0.5) +\n    geom_point(aes(color = direction), size = 3) +\n    scale_color_manual(values = c(\"å¢é•¿\" = \"#59a14f\", \"ä¸‹é™\" = \"#e15759\"), na.value = \"gray\") +\n    labs(\n        title = \"é”€å”®é¢å¢å‡å˜åŒ–\",\n        x = \"æ—¥æœŸ\",\n        y = \"é”€å”®é¢ï¼ˆä¸‡å…ƒï¼‰\",\n        color = \"å˜åŒ–æ–¹å‘\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—"
    ]
  },
  {
    "objectID": "2029-bindlineplot.html#é«˜çº§ç¾åŒ–æŠ€å·§",
    "href": "2029-bindlineplot.html#é«˜çº§ç¾åŒ–æŠ€å·§",
    "title": "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "é«˜çº§ç¾åŒ–æŠ€å·§",
    "text": "é«˜çº§ç¾åŒ–æŠ€å·§\n\nè‡ªå®šä¹‰èƒŒæ™¯ç½‘æ ¼\n\nggplot(sales_long, aes(x = date, y = sales, color = product)) +\n    geom_line(linewidth = 1) +\n    scale_color_manual(values = c(\"#4e79a7\", \"#f28e2b\", \"#59a14f\")) +\n    labs(\n        title = \"äº§å“é”€å”®è¶‹åŠ¿\",\n        x = NULL,\n        y = \"é”€å”®é¢ï¼ˆä¸‡å…ƒï¼‰\"\n    ) +\n    theme_minimal(base_size = 14) +\n    theme(\n        panel.grid.major.y = element_line(color = \"gray90\", linewidth = 0.5),\n        panel.grid.minor.y = element_blank(),\n        panel.grid.major.x = element_blank(),\n        panel.grid.minor.x = element_blank(),\n        legend.position = \"top\",\n        plot.title = element_text(face = \"bold\", size = 16),\n        axis.line.x = element_line(color = \"gray40\")\n    )\n\n\n\n\n\n\n\n\n\n\næ¸å˜è‰²æŠ˜çº¿\n\n# ä½¿ç”¨é¢œè‰²è¡¨ç¤ºå¦ä¸€ä¸ªå˜é‡\nsales_data$intensity &lt;- sales_data$product_A / max(sales_data$product_A)\n\nggplot(sales_data, aes(x = date, y = product_A, color = intensity)) +\n    geom_line(linewidth = 1.5) +\n    scale_color_gradient2(low = \"#2166ac\", mid = \"#f7f7f7\", high = \"#b2182b\", midpoint = 0.5) +\n    labs(\n        title = \"é”€å”®é¢çƒ­åº¦å›¾\",\n        x = \"æ—¥æœŸ\",\n        y = \"é”€å”®é¢ï¼ˆä¸‡å…ƒï¼‰\",\n        color = \"ç›¸å¯¹å¼ºåº¦\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—"
    ]
  },
  {
    "objectID": "2029-bindlineplot.html#äº¤äº’å¼æŠ˜çº¿å›¾-plotly",
    "href": "2029-bindlineplot.html#äº¤äº’å¼æŠ˜çº¿å›¾-plotly",
    "title": "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "äº¤äº’å¼æŠ˜çº¿å›¾ (plotly)",
    "text": "äº¤äº’å¼æŠ˜çº¿å›¾ (plotly)\n\nåŸºç¡€äº¤äº’å›¾\n\nlibrary(plotly)\n\n# åˆ›å»ºåŸºç¡€ ggplot\np &lt;- ggplot(sales_long, aes(x = date, y = sales, color = product)) +\n    geom_line(linewidth = 0.8) +\n    scale_color_manual(values = c(\"#4e79a7\", \"#f28e2b\", \"#59a14f\")) +\n    labs(\n        title = \"äº§å“é”€å”®è¶‹åŠ¿ï¼ˆäº¤äº’å¼ï¼‰\",\n        x = \"æ—¥æœŸ\",\n        y = \"é”€å”®é¢ï¼ˆä¸‡å…ƒï¼‰\"\n    ) +\n    theme_minimal()\n\n# è½¬æ¢ä¸º plotly\nggplotly(p, tooltip = c(\"x\", \"y\", \"color\"))\n\n\n\n\n\n\n\nè‡ªå®šä¹‰æ‚¬åœä¿¡æ¯\n\n# æ·»åŠ è‡ªå®šä¹‰æ‚¬åœæ–‡æœ¬\nsales_long &lt;- sales_long %&gt;%\n    mutate(\n        hover_text = paste0(\n            \"&lt;b&gt;\", product, \"&lt;/b&gt;&lt;br&gt;\",\n            \"æ—¥æœŸ: \", format(date, \"%Yå¹´%mæœˆ\"), \"&lt;br&gt;\",\n            \"é”€å”®é¢: \", round(sales, 1), \" ä¸‡å…ƒ\"\n        )\n    )\n\np2 &lt;- ggplot(sales_long, aes(x = date, y = sales, color = product, text = hover_text)) +\n    geom_line(linewidth = 0.8) +\n    scale_color_manual(values = c(\"#4e79a7\", \"#f28e2b\", \"#59a14f\")) +\n    labs(title = \"äº§å“é”€å”®è¶‹åŠ¿\", x = \"æ—¥æœŸ\", y = \"é”€å”®é¢ï¼ˆä¸‡å…ƒï¼‰\") +\n    theme_minimal()\n\nggplotly(p2, tooltip = \"text\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—"
    ]
  },
  {
    "objectID": "2029-bindlineplot.html#å®æˆ˜æ¡ˆä¾‹ç–«æƒ…æ›²çº¿",
    "href": "2029-bindlineplot.html#å®æˆ˜æ¡ˆä¾‹ç–«æƒ…æ›²çº¿",
    "title": "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "å®æˆ˜æ¡ˆä¾‹ï¼šç–«æƒ…æ›²çº¿",
    "text": "å®æˆ˜æ¡ˆä¾‹ï¼šç–«æƒ…æ›²çº¿\n\n# æ¨¡æ‹Ÿç–«æƒ…æ•°æ®\nset.seed(2020)\ndates &lt;- seq(as.Date(\"2020-01-20\"), as.Date(\"2020-06-30\"), by = \"day\")\nn_days &lt;- length(dates)\n\ncovid_data &lt;- data.frame(\n    date = dates,\n    new_cases = c(\n        rpois(30, 50), # åˆæœŸ\n        rpois(30, 500), # çˆ†å‘æœŸ\n        rpois(30, 2000), # é«˜å³°\n        rpois(30, 800), # ä¸‹é™\n        rpois(n_days - 120, 100) # å¹³ç¨³ï¼ˆåŠ¨æ€è®¡ç®—å‰©ä½™å¤©æ•°ï¼‰\n    )\n)\n\n# è®¡ç®—7æ—¥ç§»åŠ¨å¹³å‡\ncovid_data &lt;- covid_data %&gt;%\n    mutate(\n        ma7 = zoo::rollmean(new_cases, k = 7, fill = NA, align = \"right\"),\n        cumulative = cumsum(new_cases)\n    )\n\n# ç»‘åˆ¶\np_cases &lt;- ggplot(covid_data, aes(x = date)) +\n    geom_col(aes(y = new_cases), fill = \"steelblue\", alpha = 0.4, width = 1) +\n    geom_line(aes(y = ma7), color = \"darkred\", linewidth = 1.2) +\n    annotate(\"text\",\n        x = as.Date(\"2020-05-01\"), y = max(covid_data$new_cases, na.rm = TRUE) * 0.9,\n        label = \"7æ—¥ç§»åŠ¨å¹³å‡\", color = \"darkred\", fontface = \"bold\"\n    ) +\n    labs(\n        title = \"æ¯æ—¥æ–°å¢ç—…ä¾‹\",\n        x = NULL,\n        y = \"ç—…ä¾‹æ•°\"\n    )\n\np_cum &lt;- ggplot(covid_data, aes(x = date, y = cumulative)) +\n    geom_area(fill = \"steelblue\", alpha = 0.3) +\n    geom_line(color = \"steelblue\", linewidth = 1) +\n    labs(\n        title = \"ç´¯è®¡ç—…ä¾‹æ•°\",\n        x = \"æ—¥æœŸ\",\n        y = \"ç´¯è®¡ç—…ä¾‹\"\n    )\n\n# ç»„åˆ\nlibrary(patchwork)\np_cases / p_cum +\n    plot_annotation(\n        title = \"ç–«æƒ…å‘å±•æ›²çº¿\",\n        subtitle = \"2020å¹´1æœˆè‡³6æœˆæ•°æ®\",\n        theme = theme(\n            plot.title = element_text(size = 18, face = \"bold\"),\n            plot.subtitle = element_text(size = 12, color = \"gray50\")\n        )\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—"
    ]
  },
  {
    "objectID": "2029-bindlineplot.html#æ€»ç»“",
    "href": "2029-bindlineplot.html#æ€»ç»“",
    "title": "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nåœºæ™¯\næ¨èæ–¹æ³•\n\n\n\n\nå•ç»„è¶‹åŠ¿\ngeom_line() + geom_point()\n\n\nå¤šç»„å¯¹æ¯”\né•¿æ ¼å¼ + color æ˜ å°„\n\n\nè¯¯å·®å±•ç¤º\ngeom_ribbon() æˆ– geom_errorbar()\n\n\næ ‡æ³¨äº‹ä»¶\ngeom_vline() + annotate()\n\n\næ—¶é—´æ ¼å¼\nscale_x_date()\n\n\nåˆ†é¢å±•ç¤º\nfacet_wrap()\n\n\nè¶‹åŠ¿æ‹Ÿåˆ\ngeom_smooth()\n\n\näº¤äº’å¼\nplotly::ggplotly()\n\n\n\n\n[!TIP] é…è‰²å»ºè®®ï¼šæŠ˜çº¿å›¾é€šå¸¸ä½¿ç”¨ 5 ç§ä»¥å†…çš„é¢œè‰²ï¼Œè¿‡å¤šä¼šå½±å“å¯è¯»æ€§ã€‚æ¨èä½¿ç”¨ RColorBrewer æˆ– Tableau é…è‰²æ–¹æ¡ˆã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“ˆ è¶‹åŠ¿å›¾",
      "æŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—"
    ]
  },
  {
    "objectID": "2031-bindcomplex.html",
    "href": "2031-bindcomplex.html",
    "title": "å¤æ‚ç»„åˆå›¾ä¸å‘è¡¨çº§å›¾è¡¨å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "ç§‘ç ”è®ºæ–‡å‘è¡¨å¯¹å›¾è¡¨æœ‰ä¸¥æ ¼è¦æ±‚ï¼šæ¸…æ™°ã€ä¸“ä¸šã€ä¿¡æ¯ä¸°å¯Œã€‚æœ¬æ•™ç¨‹å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ R è¯­è¨€åˆ›å»ºå‘è¡¨çº§åˆ«çš„å¤æ‚ç»„åˆå›¾è¡¨ï¼ŒåŒ…æ‹¬ï¼š\n\nå¤šé¢æ¿å¸ƒå±€è®¾è®¡\nåµŒå¥—å›¾å½¢ï¼ˆå›¾ä¸­å›¾ï¼‰\næ³¨é‡Šå±‚è®¾è®¡\né¡¶åˆŠé£æ ¼æ¨¡æ¿",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "å¤æ‚ç»„åˆå›¾"
    ]
  },
  {
    "objectID": "2031-bindcomplex.html#å‰è¨€",
    "href": "2031-bindcomplex.html#å‰è¨€",
    "title": "å¤æ‚ç»„åˆå›¾ä¸å‘è¡¨çº§å›¾è¡¨å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "ç§‘ç ”è®ºæ–‡å‘è¡¨å¯¹å›¾è¡¨æœ‰ä¸¥æ ¼è¦æ±‚ï¼šæ¸…æ™°ã€ä¸“ä¸šã€ä¿¡æ¯ä¸°å¯Œã€‚æœ¬æ•™ç¨‹å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ R è¯­è¨€åˆ›å»ºå‘è¡¨çº§åˆ«çš„å¤æ‚ç»„åˆå›¾è¡¨ï¼ŒåŒ…æ‹¬ï¼š\n\nå¤šé¢æ¿å¸ƒå±€è®¾è®¡\nåµŒå¥—å›¾å½¢ï¼ˆå›¾ä¸­å›¾ï¼‰\næ³¨é‡Šå±‚è®¾è®¡\né¡¶åˆŠé£æ ¼æ¨¡æ¿",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "å¤æ‚ç»„åˆå›¾"
    ]
  },
  {
    "objectID": "2031-bindcomplex.html#å‡†å¤‡å·¥ä½œ",
    "href": "2031-bindcomplex.html#å‡†å¤‡å·¥ä½œ",
    "title": "å¤æ‚ç»„åˆå›¾ä¸å‘è¡¨çº§å›¾è¡¨å®Œå…¨æŒ‡å—",
    "section": "å‡†å¤‡å·¥ä½œ",
    "text": "å‡†å¤‡å·¥ä½œ\n\nlibrary(ggplot2)\nlibrary(patchwork)\nlibrary(cowplot)\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(grid)\nlibrary(gridExtra)\n\n# è®¾ç½®å‘è¡¨çº§ä¸»é¢˜\ntheme_publication &lt;- function(base_size = 12) {\n    theme_minimal(base_size = base_size) +\n        theme(\n            # æ ‡é¢˜\n            plot.title = element_text(face = \"bold\", size = base_size + 2, hjust = 0),\n            plot.subtitle = element_text(size = base_size, color = \"gray40\"),\n\n            # åæ ‡è½´\n            axis.title = element_text(face = \"bold\", size = base_size),\n            axis.text = element_text(size = base_size - 1),\n            axis.line = element_line(color = \"black\", linewidth = 0.5),\n\n            # å›¾ä¾‹\n            legend.title = element_text(face = \"bold\", size = base_size),\n            legend.text = element_text(size = base_size - 1),\n            legend.background = element_rect(fill = \"white\", color = NA),\n\n            # é¢æ¿\n            panel.grid.major = element_line(color = \"gray90\", linewidth = 0.3),\n            panel.grid.minor = element_blank(),\n            panel.border = element_rect(color = \"black\", fill = NA, linewidth = 0.5),\n\n            # åˆ†é¢\n            strip.text = element_text(face = \"bold\", size = base_size),\n            strip.background = element_rect(fill = \"gray95\", color = \"black\")\n        )\n}\n\ntheme_set(theme_publication())",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "å¤æ‚ç»„åˆå›¾"
    ]
  },
  {
    "objectID": "2031-bindcomplex.html#åˆ›å»ºç¤ºä¾‹æ•°æ®",
    "href": "2031-bindcomplex.html#åˆ›å»ºç¤ºä¾‹æ•°æ®",
    "title": "å¤æ‚ç»„åˆå›¾ä¸å‘è¡¨çº§å›¾è¡¨å®Œå…¨æŒ‡å—",
    "section": "åˆ›å»ºç¤ºä¾‹æ•°æ®",
    "text": "åˆ›å»ºç¤ºä¾‹æ•°æ®\n\nset.seed(42)\n\n# å®éªŒæ•°æ®\nn &lt;- 100\nexperiment_data &lt;- data.frame(\n    condition = rep(c(\"Control\", \"Treatment A\", \"Treatment B\"), each = n),\n    response = c(\n        rnorm(n, 50, 10),\n        rnorm(n, 65, 12),\n        rnorm(n, 75, 8)\n    ),\n    biomarker = c(\n        rnorm(n, 100, 20),\n        rnorm(n, 120, 25),\n        rnorm(n, 150, 18)\n    ),\n    time = rep(1:10, each = 10, times = 3)\n)\n\n# æ—¶é—´åºåˆ—æ•°æ®\ntime_data &lt;- experiment_data %&gt;%\n    group_by(condition, time) %&gt;%\n    summarise(\n        mean_response = mean(response),\n        se_response = sd(response) / sqrt(n()),\n        .groups = \"drop\"\n    )\n\n# ç”Ÿå­˜æ•°æ®ï¼ˆæ¨¡æ‹Ÿï¼‰\nsurvival_data &lt;- data.frame(\n    time = c(0, 10, 20, 30, 40, 50, 60),\n    survival_control = c(1, 0.95, 0.85, 0.70, 0.55, 0.40, 0.30),\n    survival_treatment = c(1, 0.98, 0.92, 0.85, 0.75, 0.65, 0.55)\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "å¤æ‚ç»„åˆå›¾"
    ]
  },
  {
    "objectID": "2031-bindcomplex.html#patchwork-å¤šå›¾ç»„åˆ",
    "href": "2031-bindcomplex.html#patchwork-å¤šå›¾ç»„åˆ",
    "title": "å¤æ‚ç»„åˆå›¾ä¸å‘è¡¨çº§å›¾è¡¨å®Œå…¨æŒ‡å—",
    "section": "3. patchwork å¤šå›¾ç»„åˆ",
    "text": "3. patchwork å¤šå›¾ç»„åˆ\n\nåŸºç¡€ç»„åˆ\n\n# åˆ›å»ºå››ä¸ªåŸºç¡€å›¾\np1 &lt;- ggplot(experiment_data, aes(x = condition, y = response, fill = condition)) +\n    geom_boxplot(alpha = 0.8) +\n    scale_fill_manual(values = c(\"#4e79a7\", \"#f28e2b\", \"#59a14f\")) +\n    labs(title = \"A. å„ç»„å“åº”åˆ†å¸ƒ\", x = NULL, y = \"Response\") +\n    theme(legend.position = \"none\")\n\np2 &lt;- ggplot(experiment_data, aes(x = biomarker, y = response, color = condition)) +\n    geom_point(alpha = 0.6) +\n    geom_smooth(method = \"lm\", se = FALSE, linewidth = 1) +\n    scale_color_manual(values = c(\"#4e79a7\", \"#f28e2b\", \"#59a14f\")) +\n    labs(title = \"B. ç”Ÿç‰©æ ‡å¿—ç‰©ç›¸å…³æ€§\", x = \"Biomarker\", y = \"Response\") +\n    theme(legend.position = c(0.85, 0.2))\n\np3 &lt;- ggplot(time_data, aes(x = time, y = mean_response, color = condition)) +\n    geom_line(linewidth = 1) +\n    geom_ribbon(\n        aes(\n            ymin = mean_response - 1.96 * se_response,\n            ymax = mean_response + 1.96 * se_response, fill = condition\n        ),\n        alpha = 0.2, color = NA\n    ) +\n    scale_color_manual(values = c(\"#4e79a7\", \"#f28e2b\", \"#59a14f\")) +\n    scale_fill_manual(values = c(\"#4e79a7\", \"#f28e2b\", \"#59a14f\")) +\n    labs(title = \"C. æ—¶é—´è¶‹åŠ¿\", x = \"Time (days)\", y = \"Mean Response\") +\n    theme(legend.position = \"none\")\n\np4 &lt;- ggplot(survival_data) +\n    geom_step(aes(x = time, y = survival_control, color = \"Control\"), linewidth = 1) +\n    geom_step(aes(x = time, y = survival_treatment, color = \"Treatment\"), linewidth = 1) +\n    scale_color_manual(values = c(\"Control\" = \"#4e79a7\", \"Treatment\" = \"#59a14f\")) +\n    labs(title = \"D. ç”Ÿå­˜æ›²çº¿\", x = \"Time (months)\", y = \"Survival Probability\", color = \"Group\") +\n    ylim(0, 1)\n\n# ç»„åˆ\n(p1 | p2) / (p3 | p4)\n\n\n\n\n\n\n\n\n\n\nå¤æ‚å¸ƒå±€\n\n# ä½¿ç”¨ plot_layout è‡ªå®šä¹‰å°ºå¯¸\ncombined &lt;- (p1 | p2) / (p3 | p4) +\n    plot_layout(heights = c(1, 1.2)) +\n    plot_annotation(\n        title = \"Figure 1. Treatment Effects on Response and Survival\",\n        subtitle = \"A comprehensive analysis of experimental outcomes\",\n        caption = \"Data source: Simulated experiment\",\n        theme = theme(\n            plot.title = element_text(size = 16, face = \"bold\"),\n            plot.subtitle = element_text(size = 12, color = \"gray40\"),\n            plot.caption = element_text(size = 10, color = \"gray60\", hjust = 0)\n        )\n    )\n\ncombined\n\n\n\n\n\n\n\n\n\n\néå¯¹ç§°å¸ƒå±€\n\n# å·¦ä¾§å¤§å›¾ + å³ä¾§å¤šå°å›¾\np_main &lt;- ggplot(experiment_data, aes(x = biomarker, y = response)) +\n    geom_point(aes(color = condition), alpha = 0.6, size = 2) +\n    geom_smooth(aes(color = condition), method = \"lm\", se = TRUE, alpha = 0.2) +\n    scale_color_manual(values = c(\"#4e79a7\", \"#f28e2b\", \"#59a14f\")) +\n    labs(\n        title = \"Main: Biomarker-Response Relationship\",\n        x = \"Biomarker Level\", y = \"Response\"\n    ) +\n    theme(legend.position = \"bottom\")\n\np_hist1 &lt;- ggplot(experiment_data, aes(x = response, fill = condition)) +\n    geom_histogram(alpha = 0.7, bins = 20, position = \"identity\") +\n    scale_fill_manual(values = c(\"#4e79a7\", \"#f28e2b\", \"#59a14f\")) +\n    labs(title = \"Response Distribution\") +\n    theme(legend.position = \"none\", axis.title.y = element_blank())\n\np_hist2 &lt;- ggplot(experiment_data, aes(x = biomarker, fill = condition)) +\n    geom_histogram(alpha = 0.7, bins = 20, position = \"identity\") +\n    scale_fill_manual(values = c(\"#4e79a7\", \"#f28e2b\", \"#59a14f\")) +\n    labs(title = \"Biomarker Distribution\") +\n    theme(legend.position = \"none\", axis.title.y = element_blank())\n\n# ç»„åˆå¸ƒå±€\np_main + (p_hist1 / p_hist2) + plot_layout(widths = c(2, 1))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "å¤æ‚ç»„åˆå›¾"
    ]
  },
  {
    "objectID": "2031-bindcomplex.html#cowplot-é«˜çº§æŠ€å·§",
    "href": "2031-bindcomplex.html#cowplot-é«˜çº§æŠ€å·§",
    "title": "å¤æ‚ç»„åˆå›¾ä¸å‘è¡¨çº§å›¾è¡¨å®Œå…¨æŒ‡å—",
    "section": "cowplot é«˜çº§æŠ€å·§",
    "text": "cowplot é«˜çº§æŠ€å·§\n\nå›¾ä¸­å›¾ (Inset)\n\n# ä¸»å›¾\nmain_plot &lt;- ggplot(experiment_data, aes(x = biomarker, y = response, color = condition)) +\n    geom_point(alpha = 0.6, size = 2) +\n    scale_color_manual(values = c(\"#4e79a7\", \"#f28e2b\", \"#59a14f\")) +\n    labs(x = \"Biomarker\", y = \"Response\") +\n    theme(legend.position = c(0.15, 0.85))\n\n# å†…åµŒå›¾ï¼ˆå±€éƒ¨æ”¾å¤§æˆ–ç»Ÿè®¡ï¼‰\ninset_plot &lt;- ggplot(experiment_data, aes(x = condition, y = response, fill = condition)) +\n    geom_boxplot(alpha = 0.8, width = 0.6) +\n    scale_fill_manual(values = c(\"#4e79a7\", \"#f28e2b\", \"#59a14f\")) +\n    labs(x = NULL, y = NULL) +\n    theme_minimal(base_size = 8) +\n    theme(\n        legend.position = \"none\",\n        axis.text.x = element_text(angle = 45, hjust = 1),\n        panel.background = element_rect(fill = \"white\", color = \"gray40\"),\n        plot.background = element_rect(fill = \"white\", color = \"gray40\", linewidth = 0.5)\n    )\n\n# ç»„åˆ\nggdraw(main_plot) +\n    draw_plot(inset_plot, x = 0.55, y = 0.1, width = 0.4, height = 0.35)\n\n\n\n\n\n\n\n\n\n\nå¤šå±‚æ³¨é‡Š\n\n# åˆ›å»ºå¸¦æ ‡ç­¾çš„ç»„åˆå›¾\nlabeled_combined &lt;- ggdraw() +\n    draw_plot(p1, x = 0, y = 0.5, width = 0.5, height = 0.5) +\n    draw_plot(p2, x = 0.5, y = 0.5, width = 0.5, height = 0.5) +\n    draw_plot(p3, x = 0, y = 0, width = 0.5, height = 0.5) +\n    draw_plot(p4, x = 0.5, y = 0, width = 0.5, height = 0.5) +\n    # æ·»åŠ é¢æ¿æ ‡ç­¾\n    draw_plot_label(\n        label = c(\"A\", \"B\", \"C\", \"D\"),\n        x = c(0, 0.5, 0, 0.5),\n        y = c(1, 1, 0.5, 0.5),\n        size = 16, fontface = \"bold\"\n    )\n\nlabeled_combined\n\n\n\n\n\n\n\n\n\n\næ··åˆå›¾è¡¨ç±»å‹\n\n# åˆ›å»ºè¡¨æ ¼å›¾\nsummary_table &lt;- experiment_data %&gt;%\n    group_by(condition) %&gt;%\n    summarise(\n        N = n(),\n        `Mean Â± SD` = paste0(round(mean(response), 1), \" Â± \", round(sd(response), 1)),\n        Median = round(median(response), 1)\n    )\n\n# è¡¨æ ¼ç»˜åˆ¶\ntable_plot &lt;- tableGrob(summary_table,\n    rows = NULL,\n    theme = ttheme_minimal(\n        core = list(fg_params = list(fontsize = 10)),\n        colhead = list(fg_params = list(fontsize = 10, fontface = \"bold\"))\n    )\n)\n\n# ç»„åˆå›¾è¡¨ + è¡¨æ ¼\ncombined_with_table &lt;- ggdraw() +\n    draw_plot(p1, x = 0, y = 0.35, width = 0.5, height = 0.65) +\n    draw_plot(p2, x = 0.5, y = 0.35, width = 0.5, height = 0.65) +\n    draw_grob(table_plot, x = 0.25, y = 0.02, width = 0.5, height = 0.3)\n\ncombined_with_table",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "å¤æ‚ç»„åˆå›¾"
    ]
  },
  {
    "objectID": "2031-bindcomplex.html#é«˜çº§åˆ†é¢è®¾è®¡",
    "href": "2031-bindcomplex.html#é«˜çº§åˆ†é¢è®¾è®¡",
    "title": "å¤æ‚ç»„åˆå›¾ä¸å‘è¡¨çº§å›¾è¡¨å®Œå…¨æŒ‡å—",
    "section": "é«˜çº§åˆ†é¢è®¾è®¡",
    "text": "é«˜çº§åˆ†é¢è®¾è®¡\n\nè‡ªç”±åæ ‡è½´åˆ†é¢\n\nggplot(experiment_data, aes(x = time, y = response)) +\n    geom_point(alpha = 0.3) +\n    geom_smooth(method = \"loess\", color = \"#4e79a7\", fill = \"#4e79a7\", alpha = 0.2) +\n    facet_wrap(~condition, scales = \"free_y\", ncol = 3) +\n    labs(\n        title = \"Response Trends by Condition\",\n        subtitle = \"Y-axis scales are independent for each panel\",\n        x = \"Time\", y = \"Response\"\n    )\n\n\n\n\n\n\n\n\n\n\nåµŒå¥—åˆ†é¢ (facet_grid)\n\n# æ·»åŠ ç¬¬äºŒä¸ªåˆ†ç±»å˜é‡\nexperiment_data$gender &lt;- rep(c(\"Male\", \"Female\"), length.out = nrow(experiment_data))\n\nggplot(experiment_data, aes(x = response, fill = condition)) +\n    geom_density(alpha = 0.7) +\n    facet_grid(gender ~ condition) +\n    scale_fill_manual(values = c(\"#4e79a7\", \"#f28e2b\", \"#59a14f\")) +\n    labs(\n        title = \"Response Distribution by Condition and Gender\",\n        x = \"Response\", y = \"Density\"\n    ) +\n    theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\n\n\nåˆ†é¢ + æ±‡æ€»è¾¹ç¼˜å›¾\n\nlibrary(ggExtra)\n\n# åˆ›å»ºåŸºç¡€æ•£ç‚¹å›¾\np_scatter &lt;- ggplot(experiment_data, aes(x = biomarker, y = response, color = condition)) +\n    geom_point(alpha = 0.6) +\n    scale_color_manual(values = c(\"#4e79a7\", \"#f28e2b\", \"#59a14f\")) +\n    labs(x = \"Biomarker\", y = \"Response\") +\n    theme(legend.position = \"bottom\")\n\n# æ·»åŠ è¾¹ç¼˜ç›´æ–¹å›¾\nggMarginal(p_scatter, type = \"histogram\", groupColour = TRUE, groupFill = TRUE, alpha = 0.5)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "å¤æ‚ç»„åˆå›¾"
    ]
  },
  {
    "objectID": "2031-bindcomplex.html#æ³¨é‡Šç³»ç»Ÿè®¾è®¡",
    "href": "2031-bindcomplex.html#æ³¨é‡Šç³»ç»Ÿè®¾è®¡",
    "title": "å¤æ‚ç»„åˆå›¾ä¸å‘è¡¨çº§å›¾è¡¨å®Œå…¨æŒ‡å—",
    "section": "æ³¨é‡Šç³»ç»Ÿè®¾è®¡",
    "text": "æ³¨é‡Šç³»ç»Ÿè®¾è®¡\n\nç»Ÿè®¡æ˜¾è‘—æ€§æ ‡æ³¨\n\nlibrary(ggpubr)\n\n# å¸¦æ˜¾è‘—æ€§æ ‡æ³¨çš„ç®±çº¿å›¾\nggplot(experiment_data, aes(x = condition, y = response, fill = condition)) +\n    geom_boxplot(alpha = 0.8) +\n    scale_fill_manual(values = c(\"#4e79a7\", \"#f28e2b\", \"#59a14f\")) +\n    stat_compare_means(\n        comparisons = list(\n            c(\"Control\", \"Treatment A\"),\n            c(\"Control\", \"Treatment B\"),\n            c(\"Treatment A\", \"Treatment B\")\n        ),\n        method = \"t.test\",\n        label = \"p.signif\",\n        tip.length = 0.02\n    ) +\n    labs(\n        title = \"Treatment Effects with Statistical Significance\",\n        x = NULL, y = \"Response\"\n    ) +\n    theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\n\n\nå¤æ‚æ³¨é‡Šå±‚\n\n# åˆ›å»ºå¸¦å¤šå±‚æ³¨é‡Šçš„å›¾\nggplot(\n    experiment_data %&gt;% filter(condition == \"Treatment A\"),\n    aes(x = biomarker, y = response)\n) +\n    # æ•°æ®å±‚\n    geom_point(alpha = 0.6, color = \"#f28e2b\", size = 2) +\n    geom_smooth(method = \"lm\", color = \"#e15759\", fill = \"#e15759\", alpha = 0.2) +\n\n    # æ³¨é‡Šå±‚ - å‚è€ƒåŒºåŸŸ\n    annotate(\"rect\",\n        xmin = 80, xmax = 120, ymin = -Inf, ymax = Inf,\n        fill = \"yellow\", alpha = 0.15\n    ) +\n    annotate(\"text\",\n        x = 100, y = max(experiment_data$response) * 0.95,\n        label = \"Normal Range\", fontface = \"italic\", color = \"gray40\"\n    ) +\n\n    # æ³¨é‡Šå±‚ - å…³é”®ç‚¹æ ‡è®°\n    annotate(\"point\", x = 150, y = 80, color = \"red\", size = 4, shape = 17) +\n    annotate(\"segment\",\n        x = 155, y = 82, xend = 152, yend = 80,\n        arrow = arrow(length = unit(0.1, \"inches\")), color = \"red\"\n    ) +\n    annotate(\"text\", x = 165, y = 84, label = \"Outlier\", color = \"red\", fontface = \"bold\") +\n\n    # æ³¨é‡Šå±‚ - ç»Ÿè®¡ä¿¡æ¯\n    annotate(\"text\",\n        x = 80, y = 40, hjust = 0,\n        label = paste(\n            \"n =\", sum(experiment_data$condition == \"Treatment A\"),\n            \"\\nr =\", round(cor(\n                experiment_data$biomarker[experiment_data$condition == \"Treatment A\"],\n                experiment_data$response[experiment_data$condition == \"Treatment A\"]\n            ), 2)\n        ),\n        size = 4\n    ) +\n    labs(\n        title = \"Treatment A: Biomarker-Response Relationship\",\n        subtitle = \"Annotated with reference range and statistical summary\",\n        x = \"Biomarker Level\", y = \"Response\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "å¤æ‚ç»„åˆå›¾"
    ]
  },
  {
    "objectID": "2031-bindcomplex.html#å‘è¡¨çº§æ¨¡æ¿",
    "href": "2031-bindcomplex.html#å‘è¡¨çº§æ¨¡æ¿",
    "title": "å¤æ‚ç»„åˆå›¾ä¸å‘è¡¨çº§å›¾è¡¨å®Œå…¨æŒ‡å—",
    "section": "å‘è¡¨çº§æ¨¡æ¿",
    "text": "å‘è¡¨çº§æ¨¡æ¿\n\nNature é£æ ¼\n\ntheme_nature &lt;- function(base_size = 10) {\n    theme_minimal(base_size = base_size) +\n        theme(\n            # æ–‡å­—ä½¿ç”¨ Arial\n            text = element_text(family = \"sans\"),\n\n            # ç®€æ´çš„è½´çº¿\n            axis.line = element_line(color = \"black\", linewidth = 0.3),\n            axis.ticks = element_line(color = \"black\", linewidth = 0.3),\n            axis.ticks.length = unit(0.1, \"cm\"),\n\n            # æ— ç½‘æ ¼çº¿\n            panel.grid = element_blank(),\n\n            # å›¾ä¾‹åœ¨åº•éƒ¨\n            legend.position = \"bottom\",\n            legend.box = \"horizontal\",\n\n            # ç´§å‡‘çš„è¾¹è·\n            plot.margin = margin(5, 5, 5, 5)\n        )\n}\n\n# åº”ç”¨\nggplot(experiment_data, aes(x = condition, y = response, fill = condition)) +\n    geom_boxplot(alpha = 0.8, width = 0.6, outlier.size = 1) +\n    scale_fill_manual(values = c(\"#E64B35\", \"#4DBBD5\", \"#00A087\")) + # Nature é…è‰²\n    labs(x = NULL, y = \"Response (arbitrary units)\") +\n    theme_nature() +\n    theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\n\n\nCell é£æ ¼\n\ntheme_cell &lt;- function(base_size = 11) {\n    theme_classic(base_size = base_size) +\n        theme(\n            # ç²—è¾¹æ¡†\n            panel.border = element_rect(color = \"black\", fill = NA, linewidth = 1),\n\n            # è½´çº¿\n            axis.line = element_blank(),\n            axis.ticks = element_line(color = \"black\", linewidth = 0.5),\n\n            # æ ‡é¢˜\n            plot.title = element_text(size = base_size + 2, face = \"bold\", hjust = 0.5),\n\n            # å›¾ä¾‹\n            legend.position = \"right\",\n            legend.key.size = unit(0.4, \"cm\")\n        )\n}\n\nggplot(time_data, aes(x = time, y = mean_response, color = condition)) +\n    geom_line(linewidth = 1) +\n    geom_point(size = 2.5) +\n    geom_errorbar(\n        aes(\n            ymin = mean_response - se_response,\n            ymax = mean_response + se_response\n        ),\n        width = 0.3\n    ) +\n    scale_color_manual(values = c(\"#374E55\", \"#DF8F44\", \"#00A1D5\")) + # Cell é…è‰²\n    labs(\n        title = \"Time Course of Response\",\n        x = \"Time (days)\",\n        y = \"Mean Response Â± SE\",\n        color = \"Condition\"\n    ) +\n    theme_cell()\n\n\n\n\n\n\n\n\n\n\nJAMA é£æ ¼\n\ntheme_jama &lt;- function(base_size = 11) {\n    theme_minimal(base_size = base_size) +\n        theme(\n            # ç°è‰²ç½‘æ ¼\n            panel.grid.major = element_line(color = \"gray85\", linewidth = 0.3),\n            panel.grid.minor = element_blank(),\n\n            # è½´çº¿\n            axis.line = element_line(color = \"black\", linewidth = 0.4),\n\n            # æ ‡é¢˜å±…ä¸­\n            plot.title = element_text(hjust = 0.5, face = \"bold\"),\n            plot.subtitle = element_text(hjust = 0.5),\n\n            # å›¾ä¾‹\n            legend.position = \"bottom\"\n        )\n}\n\nggplot(experiment_data, aes(x = biomarker, y = response, color = condition)) +\n    geom_point(alpha = 0.5) +\n    geom_smooth(method = \"lm\", se = TRUE, alpha = 0.15) +\n    scale_color_manual(values = c(\"#0072B5\", \"#BC3C29\", \"#20854E\")) + # JAMA é…è‰²\n    labs(\n        title = \"Association Between Biomarker and Response\",\n        subtitle = \"By treatment condition\",\n        x = \"Biomarker Level\",\n        y = \"Response\",\n        color = \"Condition\"\n    ) +\n    theme_jama()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "å¤æ‚ç»„åˆå›¾"
    ]
  },
  {
    "objectID": "2031-bindcomplex.html#å¯¼å‡ºé«˜è´¨é‡å›¾ç‰‡",
    "href": "2031-bindcomplex.html#å¯¼å‡ºé«˜è´¨é‡å›¾ç‰‡",
    "title": "å¤æ‚ç»„åˆå›¾ä¸å‘è¡¨çº§å›¾è¡¨å®Œå…¨æŒ‡å—",
    "section": "å¯¼å‡ºé«˜è´¨é‡å›¾ç‰‡",
    "text": "å¯¼å‡ºé«˜è´¨é‡å›¾ç‰‡\n\nggsave å‚æ•°\n\n# åˆ›å»ºæœ€ç»ˆå›¾\nfinal_plot &lt;- (p1 | p2) / (p3 | p4) +\n    plot_annotation(title = \"Figure 1\")\n\n# å¯¼å‡ºä¸º PDFï¼ˆçŸ¢é‡æ ¼å¼ï¼Œå‘è¡¨é¦–é€‰ï¼‰\nggsave(\"figure1.pdf\", final_plot, width = 10, height = 8, dpi = 300)\n\n# å¯¼å‡ºä¸º TIFFï¼ˆæŸäº›æœŸåˆŠè¦æ±‚ï¼‰\nggsave(\"figure1.tiff\", final_plot, width = 10, height = 8, dpi = 300, compression = \"lzw\")\n\n# å¯¼å‡ºä¸º PNGï¼ˆç½‘é¡µ/PPT ä½¿ç”¨ï¼‰\nggsave(\"figure1.png\", final_plot, width = 10, height = 8, dpi = 300)\n\n# å¯¼å‡ºä¸º SVGï¼ˆå¯ç¼–è¾‘çŸ¢é‡ï¼‰\nggsave(\"figure1.svg\", final_plot, width = 10, height = 8)\n\n\n\næ‰¹é‡å¯¼å‡º\n\n# æ‰¹é‡å¯¼å‡ºå¤šä¸ªå›¾\nplots_list &lt;- list(\n    \"fig1_boxplot\" = p1,\n    \"fig2_scatter\" = p2,\n    \"fig3_timecourse\" = p3,\n    \"fig4_survival\" = p4\n)\n\n# å¾ªç¯å¯¼å‡º\nfor (name in names(plots_list)) {\n    ggsave(\n        paste0(name, \".pdf\"),\n        plots_list[[name]],\n        width = 6,\n        height = 5,\n        dpi = 300\n    )\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "å¤æ‚ç»„åˆå›¾"
    ]
  },
  {
    "objectID": "2031-bindcomplex.html#å®æˆ˜æ¡ˆä¾‹å®Œæ•´è®ºæ–‡å›¾",
    "href": "2031-bindcomplex.html#å®æˆ˜æ¡ˆä¾‹å®Œæ•´è®ºæ–‡å›¾",
    "title": "å¤æ‚ç»„åˆå›¾ä¸å‘è¡¨çº§å›¾è¡¨å®Œå…¨æŒ‡å—",
    "section": "å®æˆ˜æ¡ˆä¾‹ï¼šå®Œæ•´è®ºæ–‡å›¾",
    "text": "å®æˆ˜æ¡ˆä¾‹ï¼šå®Œæ•´è®ºæ–‡å›¾\n\n# åˆ›å»ºå®Œæ•´çš„è®ºæ–‡å›¾\n# Panel A: ä¸»æ•ˆåº”ç®±çº¿å›¾\npanelA &lt;- ggplot(experiment_data, aes(x = condition, y = response, fill = condition)) +\n    geom_violin(alpha = 0.3, color = NA) +\n    geom_boxplot(width = 0.3, alpha = 0.8, outlier.size = 1) +\n    scale_fill_manual(values = c(\"#4e79a7\", \"#f28e2b\", \"#59a14f\")) +\n    labs(x = NULL, y = \"Response\") +\n    theme(legend.position = \"none\")\n\n# Panel B: ç›¸å…³æ€§æ•£ç‚¹å›¾\npanelB &lt;- ggplot(experiment_data, aes(x = biomarker, y = response)) +\n    geom_point(aes(color = condition), alpha = 0.5) +\n    geom_smooth(aes(color = condition), method = \"lm\", se = FALSE, linewidth = 0.8) +\n    scale_color_manual(values = c(\"#4e79a7\", \"#f28e2b\", \"#59a14f\")) +\n    labs(x = \"Biomarker\", y = \"Response\", color = \"Condition\") +\n    theme(\n        legend.position = c(0.85, 0.2),\n        legend.background = element_rect(fill = \"white\", color = \"gray80\")\n    )\n\n# Panel C: æ—¶é—´è¶‹åŠ¿\npanelC &lt;- ggplot(time_data, aes(x = time, y = mean_response, color = condition)) +\n    geom_ribbon(\n        aes(\n            ymin = mean_response - 1.96 * se_response,\n            ymax = mean_response + 1.96 * se_response, fill = condition\n        ),\n        alpha = 0.2, color = NA\n    ) +\n    geom_line(linewidth = 1) +\n    geom_point(size = 2) +\n    scale_color_manual(values = c(\"#4e79a7\", \"#f28e2b\", \"#59a14f\")) +\n    scale_fill_manual(values = c(\"#4e79a7\", \"#f28e2b\", \"#59a14f\")) +\n    labs(x = \"Time (days)\", y = \"Mean Response Â± 95% CI\") +\n    theme(legend.position = \"none\")\n\n# Panel D: ç”Ÿå­˜æ›²çº¿\npanelD &lt;- survival_data %&gt;%\n    pivot_longer(cols = starts_with(\"survival\"), names_to = \"group\", values_to = \"survival\") %&gt;%\n    mutate(group = ifelse(group == \"survival_control\", \"Control\", \"Treatment\")) %&gt;%\n    ggplot(aes(x = time, y = survival, color = group)) +\n    geom_step(linewidth = 1.2) +\n    geom_point(size = 2) +\n    scale_color_manual(values = c(\"Control\" = \"#4e79a7\", \"Treatment\" = \"#59a14f\")) +\n    scale_y_continuous(labels = scales::percent_format(), limits = c(0, 1)) +\n    labs(x = \"Time (months)\", y = \"Survival Probability\", color = \"Group\") +\n    theme(legend.position = c(0.85, 0.85))\n\n# ç»„åˆ\nfinal_figure &lt;- (panelA | panelB) / (panelC | panelD) +\n    plot_annotation(\n        title = \"Figure 1. Comprehensive Analysis of Treatment Effects\",\n        subtitle = \"A) Group comparison, B) Biomarker correlation, C) Time course, D) Survival\",\n        tag_levels = \"A\",\n        theme = theme(\n            plot.title = element_text(size = 16, face = \"bold\"),\n            plot.subtitle = element_text(size = 12, color = \"gray40\")\n        )\n    ) &\n    theme(plot.tag = element_text(size = 14, face = \"bold\"))\n\nfinal_figure",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "å¤æ‚ç»„åˆå›¾"
    ]
  },
  {
    "objectID": "2031-bindcomplex.html#æ€»ç»“",
    "href": "2031-bindcomplex.html#æ€»ç»“",
    "title": "å¤æ‚ç»„åˆå›¾ä¸å‘è¡¨çº§å›¾è¡¨å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå·¥å…·\nä¸»è¦ç”¨é€”\nä¼˜åŠ¿\n\n\n\n\npatchwork\nå¤šå›¾ç»„åˆ\nè¯­æ³•ç®€æ´ï¼Œå¸ƒå±€çµæ´»\n\n\ncowplot\nå›¾ä¸­å›¾ã€å¤æ‚å¸ƒå±€\nç²¾ç¡®å®šä½æ§åˆ¶\n\n\ngridExtra\nè¡¨æ ¼ä¸å›¾ç»„åˆ\næ”¯æŒè¡¨æ ¼å…ƒç´ \n\n\nggpubr\nç»Ÿè®¡æ ‡æ³¨\nè‡ªåŠ¨æ˜¾è‘—æ€§æ ‡è®°\n\n\nggExtra\nè¾¹ç¼˜å›¾\nä¸€è¡Œä»£ç æ·»åŠ \n\n\n\n\n[!TIP] å‘è¡¨å›¾è¡¨æ£€æŸ¥æ¸…å•ï¼š - [ ] å­—ä½“å¤§å°â‰¥8pt - [ ] çº¿æ¡ç²—ç»†â‰¥0.5pt\n- [ ] åˆ†è¾¨ç‡â‰¥300dpi - [ ] é…è‰²å¯¹è‰²ç›²å‹å¥½ - [ ] å›¾ä¾‹æ ‡ç­¾å®Œæ•´ - [ ] åæ ‡è½´æ ‡ç­¾å«å•ä½",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”€ å›¾å½¢ç»„åˆ",
      "å¤æ‚ç»„åˆå›¾"
    ]
  },
  {
    "objectID": "2033-ggplot2-styling.html",
    "href": "2033-ggplot2-styling.html",
    "title": "ggplot2 æ ·å¼è®¾ç½®å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "æœ¬æ•™ç¨‹ä¸“æ³¨äº ggplot2 å›¾å½¢æ ·å¼çš„ç²¾ç»†æ§åˆ¶ï¼Œä¸è®²ç»˜åˆ¶ä»€ä¹ˆå›¾ï¼Œè€Œæ˜¯è®²å¦‚ä½•æŠŠå›¾åšå¾—æ›´ä¸“ä¸šã€æ›´ç¾è§‚ã€‚æ¶µç›–ï¼š\n\nğŸ¯ åæ ‡è½´ï¼šåˆ»åº¦ã€æ ‡ç­¾ã€èŒƒå›´ã€å˜æ¢\nğŸ“Š å›¾ä¾‹ï¼šä½ç½®ã€æ ·å¼ã€æ ‡é¢˜ã€é¡ºåº\nğŸ“ æ ‡é¢˜ä¸æ–‡æœ¬ï¼šæ ‡é¢˜ã€å‰¯æ ‡é¢˜ã€è„šæ³¨ã€æ³¨é‡Š\nğŸ¨ ç¾å­¦æ˜ å°„ï¼šé¢œè‰²ã€å¤§å°ã€å½¢çŠ¶çš„ç²¾ç»†æ§åˆ¶\nğŸ“ åˆ†é¢ï¼šå¤šé¢æ¿å¸ƒå±€ä¸æ ·å¼\nğŸ–¼ï¸ ä¸»é¢˜ï¼šå…¨é¢çš„ä¸»é¢˜å®šåˆ¶\n\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(scales)\n\n# åˆ›å»ºç¤ºä¾‹æ•°æ®\nset.seed(42)\ndemo_data &lt;- data.frame(\n    group = rep(c(\"Aç»„\", \"Bç»„\", \"Cç»„\", \"Dç»„\"), each = 50),\n    x = c(rnorm(50, 10, 2), rnorm(50, 15, 3), rnorm(50, 20, 2.5), rnorm(50, 25, 4)),\n    y = c(rnorm(50, 100, 15), rnorm(50, 150, 20), rnorm(50, 200, 25), rnorm(50, 250, 30)),\n    size = runif(200, 1, 10),\n    category = sample(c(\"ç±»å‹1\", \"ç±»å‹2\", \"ç±»å‹3\"), 200, replace = TRUE)\n)\n\n# åŸºç¡€å›¾å½¢ï¼ˆåç»­ä¼šä¸æ–­å®Œå–„ï¼‰\np_base &lt;- ggplot(demo_data, aes(x = x, y = y, color = group)) +\n    geom_point(size = 3, alpha = 0.7)\np_base",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "ggplot2 æ ·å¼è®¾ç½®è¯¦è§£"
    ]
  },
  {
    "objectID": "2033-ggplot2-styling.html#å‰è¨€",
    "href": "2033-ggplot2-styling.html#å‰è¨€",
    "title": "ggplot2 æ ·å¼è®¾ç½®å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "æœ¬æ•™ç¨‹ä¸“æ³¨äº ggplot2 å›¾å½¢æ ·å¼çš„ç²¾ç»†æ§åˆ¶ï¼Œä¸è®²ç»˜åˆ¶ä»€ä¹ˆå›¾ï¼Œè€Œæ˜¯è®²å¦‚ä½•æŠŠå›¾åšå¾—æ›´ä¸“ä¸šã€æ›´ç¾è§‚ã€‚æ¶µç›–ï¼š\n\nğŸ¯ åæ ‡è½´ï¼šåˆ»åº¦ã€æ ‡ç­¾ã€èŒƒå›´ã€å˜æ¢\nğŸ“Š å›¾ä¾‹ï¼šä½ç½®ã€æ ·å¼ã€æ ‡é¢˜ã€é¡ºåº\nğŸ“ æ ‡é¢˜ä¸æ–‡æœ¬ï¼šæ ‡é¢˜ã€å‰¯æ ‡é¢˜ã€è„šæ³¨ã€æ³¨é‡Š\nğŸ¨ ç¾å­¦æ˜ å°„ï¼šé¢œè‰²ã€å¤§å°ã€å½¢çŠ¶çš„ç²¾ç»†æ§åˆ¶\nğŸ“ åˆ†é¢ï¼šå¤šé¢æ¿å¸ƒå±€ä¸æ ·å¼\nğŸ–¼ï¸ ä¸»é¢˜ï¼šå…¨é¢çš„ä¸»é¢˜å®šåˆ¶\n\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(scales)\n\n# åˆ›å»ºç¤ºä¾‹æ•°æ®\nset.seed(42)\ndemo_data &lt;- data.frame(\n    group = rep(c(\"Aç»„\", \"Bç»„\", \"Cç»„\", \"Dç»„\"), each = 50),\n    x = c(rnorm(50, 10, 2), rnorm(50, 15, 3), rnorm(50, 20, 2.5), rnorm(50, 25, 4)),\n    y = c(rnorm(50, 100, 15), rnorm(50, 150, 20), rnorm(50, 200, 25), rnorm(50, 250, 30)),\n    size = runif(200, 1, 10),\n    category = sample(c(\"ç±»å‹1\", \"ç±»å‹2\", \"ç±»å‹3\"), 200, replace = TRUE)\n)\n\n# åŸºç¡€å›¾å½¢ï¼ˆåç»­ä¼šä¸æ–­å®Œå–„ï¼‰\np_base &lt;- ggplot(demo_data, aes(x = x, y = y, color = group)) +\n    geom_point(size = 3, alpha = 0.7)\np_base",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "ggplot2 æ ·å¼è®¾ç½®è¯¦è§£"
    ]
  },
  {
    "objectID": "2033-ggplot2-styling.html#ç¬¬ä¸€éƒ¨åˆ†åæ ‡è½´è¯¦ç»†è®¾ç½®",
    "href": "2033-ggplot2-styling.html#ç¬¬ä¸€éƒ¨åˆ†åæ ‡è½´è¯¦ç»†è®¾ç½®",
    "title": "ggplot2 æ ·å¼è®¾ç½®å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šåæ ‡è½´è¯¦ç»†è®¾ç½®",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šåæ ‡è½´è¯¦ç»†è®¾ç½®\nåæ ‡è½´æ˜¯å›¾å½¢æœ€é‡è¦çš„ç»„æˆéƒ¨åˆ†ä¹‹ä¸€ï¼ŒåŒ…æ‹¬åˆ»åº¦çº¿ã€åˆ»åº¦æ ‡ç­¾ã€è½´æ ‡ç­¾ã€è½´çº¿ç­‰ã€‚\n\nåæ ‡è½´èŒƒå›´ä¸é™åˆ¶\n\n# æ–¹æ³•1ï¼šxlim/ylimï¼ˆä¼šåˆ é™¤èŒƒå›´å¤–çš„æ•°æ®ï¼‰\np_base +\n    xlim(5, 30) +\n    ylim(50, 300)\n\n\n\n\n\n\n\n\n\n# æ–¹æ³•2ï¼šcoord_cartesianï¼ˆåªæ˜¯\"æ”¾å¤§\"ï¼Œä¸åˆ é™¤æ•°æ®ï¼‰\n# æ¨èç”¨äºæ”¾å¤§å±€éƒ¨åŒºåŸŸ\np_base +\n    coord_cartesian(xlim = c(10, 25), ylim = c(100, 250))\n\n\n\n\n\n\n\n\n\n# æ–¹æ³•3ï¼šscale_*_continuous è®¾ç½®ï¼ˆæœ€ç²¾ç»†çš„æ§åˆ¶ï¼‰\np_base +\n    scale_x_continuous(limits = c(5, 35), expand = c(0, 0)) +\n    scale_y_continuous(limits = c(0, 350), expand = c(0, 0))\n\n\n\n\n\n\n\n\n\n\nåæ ‡è½´åˆ»åº¦æ§åˆ¶\n\n# è®¾ç½®ä¸»åˆ»åº¦å’Œæ¬¡åˆ»åº¦\np_base +\n    scale_x_continuous(\n        breaks = seq(5, 35, by = 5), # ä¸»åˆ»åº¦ä½ç½®\n        minor_breaks = seq(5, 35, by = 1), # æ¬¡åˆ»åº¦ä½ç½®\n        limits = c(5, 35)\n    ) +\n    scale_y_continuous(\n        breaks = seq(0, 350, by = 50),\n        minor_breaks = seq(0, 350, by = 25),\n        limits = c(0, 350)\n    )\n\n\n\n\n\n\n\n\n\n# è‡ªå®šä¹‰åˆ»åº¦æ ‡ç­¾\np_base +\n    scale_x_continuous(\n        breaks = c(10, 15, 20, 25, 30),\n        labels = c(\"ä½\", \"ä¸­ä½\", \"ä¸­\", \"ä¸­é«˜\", \"é«˜\") # è‡ªå®šä¹‰æ ‡ç­¾\n    ) +\n    scale_y_continuous(\n        breaks = seq(100, 300, by = 50),\n        labels = function(x) paste0(x, \" å•ä½\") # ä½¿ç”¨å‡½æ•°\n    )\n\n\n\n\n\n\n\n\n\n# ä½¿ç”¨ scales åŒ…æ ¼å¼åŒ–\np_base +\n    scale_x_continuous(labels = scales::label_number(suffix = \" L\")) +\n    scale_y_continuous(labels = scales::label_comma()) # åƒåˆ†ä½é€—å·\n\n\n\n\n\n\n\n\n\n\nåæ ‡è½´æ ‡ç­¾æ ·å¼\n\np_base +\n    labs(x = \"X å˜é‡ (å•ä½)\", y = \"Y å˜é‡ (å•ä½)\") +\n    theme(\n        # X è½´æ ‡ç­¾\n        axis.title.x = element_text(\n            size = 14, # å­—å·\n            face = \"bold\", # ç²—ä½“\n            color = \"#1f2937\", # é¢œè‰²\n            margin = margin(t = 10) # ä¸Šè¾¹è·\n        ),\n        # Y è½´æ ‡ç­¾\n        axis.title.y = element_text(\n            size = 14,\n            face = \"bold\",\n            color = \"#1f2937\",\n            margin = margin(r = 10),\n            angle = 90 # æ—‹è½¬è§’åº¦ï¼ˆé»˜è®¤90ï¼‰\n        )\n    )\n\n\n\n\n\n\n\n\n\n\nåˆ»åº¦æ ‡ç­¾æ ·å¼\n\np_base +\n    theme(\n        # X è½´åˆ»åº¦æ ‡ç­¾\n        axis.text.x = element_text(\n            size = 11,\n            color = \"#374151\",\n            angle = 45, # æ—‹è½¬è§’åº¦\n            hjust = 1, # æ°´å¹³å¯¹é½\n            vjust = 1 # å‚ç›´å¯¹é½\n        ),\n        # Y è½´åˆ»åº¦æ ‡ç­¾\n        axis.text.y = element_text(\n            size = 11,\n            color = \"#374151\"\n        )\n    )\n\n\n\n\n\n\n\n\n\n\nåæ ‡è½´çº¿ä¸åˆ»åº¦çº¿\n\np_base +\n    theme(\n        # åæ ‡è½´çº¿\n        axis.line = element_line(color = \"#1f2937\", linewidth = 0.8),\n        # åˆ»åº¦çº¿\n        axis.ticks = element_line(color = \"#1f2937\", linewidth = 0.5),\n        # åˆ»åº¦çº¿é•¿åº¦\n        axis.ticks.length = unit(0.25, \"cm\"),\n        # å»æ‰é¢æ¿è¾¹æ¡†ï¼ˆé…åˆè½´çº¿ä½¿ç”¨ï¼‰\n        panel.border = element_blank()\n    )\n\n\n\n\n\n\n\n\n\n\nå¯¹æ•°åæ ‡è½´\n\n# åˆ›å»ºé€‚åˆå¯¹æ•°å˜æ¢çš„æ•°æ®\nlog_data &lt;- data.frame(\n    x = c(1, 10, 100, 1000, 10000),\n    y = c(2, 20, 200, 2000, 20000)\n)\n\nggplot(log_data, aes(x, y)) +\n    geom_point(size = 4, color = \"#4f46e5\") +\n    geom_line(color = \"#4f46e5\") +\n    scale_x_log10(\n        breaks = scales::trans_breaks(\"log10\", function(x) 10^x),\n        labels = scales::trans_format(\"log10\", scales::math_format(10^.x))\n    ) +\n    scale_y_log10(\n        breaks = scales::trans_breaks(\"log10\", function(x) 10^x),\n        labels = scales::trans_format(\"log10\", scales::math_format(10^.x))\n    ) +\n    annotation_logticks(sides = \"bl\") + # åœ¨å·¦ä¸‹æ·»åŠ å¯¹æ•°åˆ»åº¦\n    theme_bw()\n\n\n\n\n\n\n\n\n\n\nç¿»è½¬ä¸æåæ ‡\n\n# ç¿»è½¬åæ ‡è½´ï¼ˆæ¨ªå‘æŸ±çŠ¶å›¾ï¼‰\nggplot(demo_data, aes(x = group, y = y)) +\n    geom_boxplot(fill = \"#4f46e5\", alpha = 0.7) +\n    coord_flip() +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n# æåæ ‡ï¼ˆé¥¼å›¾/é›·è¾¾å›¾åŸºç¡€ï¼‰\npie_data &lt;- data.frame(\n    category = c(\"A\", \"B\", \"C\", \"D\"),\n    value = c(25, 35, 20, 20)\n)\n\nggplot(pie_data, aes(x = \"\", y = value, fill = category)) +\n    geom_bar(stat = \"identity\", width = 1) +\n    coord_polar(\"y\") +\n    theme_void() +\n    scale_fill_brewer(palette = \"Set2\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "ggplot2 æ ·å¼è®¾ç½®è¯¦è§£"
    ]
  },
  {
    "objectID": "2033-ggplot2-styling.html#ç¬¬äºŒéƒ¨åˆ†å›¾ä¾‹è¯¦ç»†è®¾ç½®",
    "href": "2033-ggplot2-styling.html#ç¬¬äºŒéƒ¨åˆ†å›¾ä¾‹è¯¦ç»†è®¾ç½®",
    "title": "ggplot2 æ ·å¼è®¾ç½®å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šå›¾ä¾‹è¯¦ç»†è®¾ç½®",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šå›¾ä¾‹è¯¦ç»†è®¾ç½®\nå›¾ä¾‹æ˜¯è§£è¯»å›¾å½¢çš„å…³é”®ï¼Œéœ€è¦ç²¾å¿ƒè®¾è®¡ã€‚\n\nå›¾ä¾‹ä½ç½®\n\n# é¢„è®¾ä½ç½®\np_base + theme(legend.position = \"top\")\n\n\n\n\n\n\n\n\n\np_base + theme(legend.position = \"bottom\")\n\n\n\n\n\n\n\n\n\np_base + theme(legend.position = \"left\")\n\n\n\n\n\n\n\n\n\n# ç²¾ç¡®ä½ç½®ï¼ˆåæ ‡ 0-1ï¼‰\np_base +\n    theme(\n        legend.position = c(0.85, 0.2), # å³ä¸‹è§’å†…éƒ¨\n        legend.background = element_rect(fill = \"white\", color = \"gray80\")\n    )\n\n\n\n\n\n\n\n\n\n# éšè—å›¾ä¾‹\np_base + theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\n\n\nå›¾ä¾‹æ ‡é¢˜ä¸æ ‡ç­¾\n\np_base +\n    labs(color = \"å®éªŒåˆ†ç»„\") + # ä¿®æ”¹å›¾ä¾‹æ ‡é¢˜\n    scale_color_discrete(\n        labels = c(\"å¯¹ç…§ç»„\", \"ä½å‰‚é‡\", \"ä¸­å‰‚é‡\", \"é«˜å‰‚é‡\") # ä¿®æ”¹æ ‡ç­¾\n    )\n\n\n\n\n\n\n\n\n\n# å»æ‰å›¾ä¾‹æ ‡é¢˜\np_base +\n    theme(legend.title = element_blank())\n\n\n\n\n\n\n\n\n\n\nå›¾ä¾‹æ ·å¼å®šåˆ¶\n\np_base +\n    labs(color = \"åˆ†ç»„\") +\n    theme(\n        # å›¾ä¾‹æ ‡é¢˜\n        legend.title = element_text(\n            size = 12, face = \"bold\", color = \"#1f2937\"\n        ),\n        # å›¾ä¾‹æ ‡ç­¾\n        legend.text = element_text(\n            size = 10, color = \"#374151\"\n        ),\n        # å›¾ä¾‹èƒŒæ™¯\n        legend.background = element_rect(\n            fill = \"#f9fafb\",\n            color = \"#e5e7eb\",\n            linewidth = 0.5\n        ),\n        # å›¾ä¾‹é”®ï¼ˆå›¾æ ‡ï¼‰èƒŒæ™¯\n        legend.key = element_rect(fill = \"white\"),\n        # å›¾ä¾‹é”®å¤§å°\n        legend.key.size = unit(1, \"cm\"),\n        # å›¾ä¾‹å†…è¾¹è·\n        legend.margin = margin(5, 10, 5, 10)\n    )\n\n\n\n\n\n\n\n\n\n\nå›¾ä¾‹å¸ƒå±€\n\n# æ°´å¹³æ’åˆ—\np_base +\n    theme(legend.position = \"bottom\") +\n    guides(color = guide_legend(nrow = 1)) # å•è¡Œ\n\n\n\n\n\n\n\n\n\n# è‡ªå®šä¹‰åˆ—æ•°\np_base +\n    theme(legend.position = \"bottom\") +\n    guides(color = guide_legend(ncol = 2)) # ä¸¤åˆ—\n\n\n\n\n\n\n\n\n\n\nå›¾ä¾‹é¡ºåºä¸åè½¬\n\n# åè½¬å›¾ä¾‹é¡ºåº\np_base +\n    guides(color = guide_legend(reverse = TRUE))\n\n\n\n\n\n\n\n\n\n# è‡ªå®šä¹‰é¡ºåº\np_base +\n    scale_color_discrete(limits = c(\"Dç»„\", \"Cç»„\", \"Bç»„\", \"Aç»„\"))\n\n\n\n\n\n\n\n\n\n\nå¤šä¸ªå›¾ä¾‹çš„æ§åˆ¶\n\n# åˆ›å»ºæœ‰å¤šä¸ªæ˜ å°„çš„å›¾\np_multi &lt;- ggplot(demo_data, aes(x = x, y = y, color = group, size = size, shape = category)) +\n    geom_point(alpha = 0.7)\n\n# å•ç‹¬æ§åˆ¶æ¯ä¸ªå›¾ä¾‹\np_multi +\n    guides(\n        color = guide_legend(order = 1, title = \"åˆ†ç»„\"),\n        size = guide_legend(order = 2, title = \"å¤§å°\"),\n        shape = guide_legend(order = 3, title = \"ç±»å‹\")\n    ) +\n    theme(legend.box = \"vertical\") # å›¾ä¾‹å‚ç›´æ’åˆ—",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "ggplot2 æ ·å¼è®¾ç½®è¯¦è§£"
    ]
  },
  {
    "objectID": "2033-ggplot2-styling.html#ç¬¬ä¸‰éƒ¨åˆ†æ ‡é¢˜ä¸æ³¨é‡Š",
    "href": "2033-ggplot2-styling.html#ç¬¬ä¸‰éƒ¨åˆ†æ ‡é¢˜ä¸æ³¨é‡Š",
    "title": "ggplot2 æ ·å¼è®¾ç½®å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ ‡é¢˜ä¸æ³¨é‡Š",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ ‡é¢˜ä¸æ³¨é‡Š\n\nå®Œæ•´æ ‡é¢˜ç³»ç»Ÿ\n\np_base +\n    labs(\n        title = \"è¿™æ˜¯ä¸»æ ‡é¢˜\",\n        subtitle = \"è¿™æ˜¯å‰¯æ ‡é¢˜ï¼Œæä¾›é¢å¤–è¯´æ˜\",\n        caption = \"æ•°æ®æ¥æºï¼šæ¨¡æ‹Ÿæ•°æ® | ä½œè€…ï¼šXXX\",\n        tag = \"A\", # å›¾å½¢æ ‡ç­¾ï¼ˆå¤šå›¾æ—¶æœ‰ç”¨ï¼‰\n        x = \"X å˜é‡\",\n        y = \"Y å˜é‡\"\n    )\n\n\n\n\n\n\n\n\n\n\næ ‡é¢˜æ ·å¼å®šåˆ¶\n\np_base +\n    labs(\n        title = \"å‘åŠ¨æœºæ€§èƒ½ä¸æ²¹è€—å…³ç³»\",\n        subtitle = \"åŸºäº 200 ä¸ªè§‚æµ‹å€¼çš„åˆ†æ\",\n        caption = \"æ•°æ®æ¥æºï¼šæ¨¡æ‹Ÿæ•°æ®\"\n    ) +\n    theme(\n        # ä¸»æ ‡é¢˜\n        plot.title = element_text(\n            size = 18,\n            face = \"bold\",\n            color = \"#1f2937\",\n            hjust = 0.5, # å±…ä¸­\n            margin = margin(b = 10)\n        ),\n        # å‰¯æ ‡é¢˜\n        plot.subtitle = element_text(\n            size = 12,\n            color = \"#6b7280\",\n            hjust = 0.5,\n            margin = margin(b = 15)\n        ),\n        # è„šæ³¨\n        plot.caption = element_text(\n            size = 9,\n            color = \"#9ca3af\",\n            hjust = 1, # å³å¯¹é½\n            face = \"italic\"\n        ),\n        # å›¾å½¢æ ‡ç­¾\n        plot.tag = element_text(\n            size = 16,\n            face = \"bold\"\n        ),\n        plot.tag.position = c(0.02, 0.98) # æ ‡ç­¾ä½ç½®\n    )\n\n\n\n\n\n\n\n\n\n\næ·»åŠ æ–‡æœ¬æ³¨é‡Š\n\np_base +\n    # annotate æ·»åŠ å•ä¸ªæ³¨é‡Š\n    annotate(\n        \"text\",\n        x = 25, y = 280,\n        label = \"é«˜å€¼åŒºåŸŸ\",\n        size = 5,\n        color = \"#ef4444\",\n        fontface = \"bold\"\n    ) +\n    annotate(\n        \"text\",\n        x = 10, y = 80,\n        label = \"ä½å€¼åŒºåŸŸ\",\n        size = 5,\n        color = \"#10b981\",\n        fontface = \"bold\"\n    )\n\n\n\n\n\n\n\n\n\n\næ·»åŠ æ•°å­¦å…¬å¼\n\np_base +\n    annotate(\n        \"text\",\n        x = 20, y = 300,\n        label = \"y == beta[0] + beta[1]*x + epsilon\",\n        parse = TRUE, # è§£æä¸ºè¡¨è¾¾å¼\n        size = 5\n    )\n\n\n\n\n\n\n\n\n\n\næ·»åŠ çŸ©å½¢/çº¿æ¡æ³¨é‡Š\n\np_base +\n    # çŸ©å½¢é«˜äº®åŒºåŸŸ\n    annotate(\n        \"rect\",\n        xmin = 18, xmax = 28,\n        ymin = 180, ymax = 320,\n        alpha = 0.2,\n        fill = \"#4f46e5\"\n    ) +\n    # å‚ç›´å‚è€ƒçº¿\n    geom_vline(xintercept = 20, linetype = \"dashed\", color = \"#ef4444\", linewidth = 1) +\n    # æ°´å¹³å‚è€ƒçº¿\n    geom_hline(yintercept = 200, linetype = \"dotted\", color = \"#10b981\", linewidth = 1) +\n    # ç®­å¤´æ³¨é‡Š\n    annotate(\n        \"segment\",\n        x = 28, xend = 25,\n        y = 100, yend = 180,\n        arrow = arrow(length = unit(0.3, \"cm\")),\n        color = \"#4f46e5\"\n    ) +\n    annotate(\"text\", x = 28, y = 90, label = \"æ³¨æ„è¿™ä¸ªåŒºåŸŸ\", size = 4)\n\n\n\n\n\n\n\n\n\n\nå¸¦æ ‡ç­¾çš„æ•°æ®ç‚¹\n\n# åªæ ‡æ³¨ç‰¹å®šç‚¹\nhighlight_data &lt;- demo_data %&gt;%\n    filter(y &gt; 280 | y &lt; 70)\n\np_base +\n    geom_text(\n        data = highlight_data,\n        aes(label = round(y, 0)),\n        vjust = -1,\n        size = 3\n    )\n\n\n\n\n\n\n\n\n\n# ä½¿ç”¨ ggrepel é¿å…æ ‡ç­¾é‡å \nlibrary(ggrepel)\n\np_base +\n    geom_text_repel(\n        data = highlight_data,\n        aes(label = paste0(\"y=\", round(y, 0))),\n        size = 3,\n        max.overlaps = 20\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "ggplot2 æ ·å¼è®¾ç½®è¯¦è§£"
    ]
  },
  {
    "objectID": "2033-ggplot2-styling.html#ç¬¬å››éƒ¨åˆ†ç¾å­¦æ˜ å°„æ·±å…¥",
    "href": "2033-ggplot2-styling.html#ç¬¬å››éƒ¨åˆ†ç¾å­¦æ˜ å°„æ·±å…¥",
    "title": "ggplot2 æ ·å¼è®¾ç½®å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šç¾å­¦æ˜ å°„æ·±å…¥",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šç¾å­¦æ˜ å°„æ·±å…¥\n\né¢œè‰²æ˜ å°„\n\nç¦»æ•£é¢œè‰²\n\n# ä½¿ç”¨é¢„è®¾è°ƒè‰²æ¿\np_base + scale_color_brewer(palette = \"Set1\")\n\n\n\n\n\n\n\n\n\np_base + scale_color_brewer(palette = \"Dark2\")\n\n\n\n\n\n\n\n\n\n# æ‰‹åŠ¨æŒ‡å®šé¢œè‰²\np_base +\n    scale_color_manual(\n        values = c(\n            \"Aç»„\" = \"#4f46e5\",\n            \"Bç»„\" = \"#10b981\",\n            \"Cç»„\" = \"#f59e0b\",\n            \"Dç»„\" = \"#ef4444\"\n        )\n    )\n\n\n\n\n\n\n\n\n\n\nè¿ç»­é¢œè‰²\n\nggplot(demo_data, aes(x = x, y = y, color = size)) +\n    geom_point(size = 4) +\n    scale_color_gradient(low = \"#bfdbfe\", high = \"#1e40af\") # ä¸¤è‰²æ¸å˜\n\n\n\n\n\n\n\n\n\nggplot(demo_data, aes(x = x, y = y, color = size)) +\n    geom_point(size = 4) +\n    scale_color_gradient2(low = \"#ef4444\", mid = \"white\", high = \"#4f46e5\", midpoint = 5) # ä¸‰è‰²æ¸å˜\n\n\n\n\n\n\n\n\n\nggplot(demo_data, aes(x = x, y = y, color = size)) +\n    geom_point(size = 4) +\n    scale_color_viridis_c(option = \"D\") # viridis è‰²ç›²å‹å¥½\n\n\n\n\n\n\n\n\n\n\n\n4.2 å¡«å……è‰²æ˜ å°„\n\nggplot(demo_data, aes(x = group, y = y, fill = group)) +\n    geom_boxplot(alpha = 0.8) +\n    scale_fill_manual(\n        values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\", \"#ef4444\")\n    ) +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nå¤§å°æ˜ å°„\n\nggplot(demo_data, aes(x = x, y = y, size = size)) +\n    geom_point(color = \"#4f46e5\", alpha = 0.6) +\n    scale_size_continuous(\n        range = c(1, 10), # å¤§å°èŒƒå›´\n        breaks = c(2, 4, 6, 8),\n        name = \"æ•°å€¼å¤§å°\"\n    )\n\n\n\n\n\n\n\n\n\n\nå½¢çŠ¶æ˜ å°„\n\nggplot(demo_data, aes(x = x, y = y, shape = category, color = group)) +\n    geom_point(size = 3) +\n    scale_shape_manual(\n        values = c(\"ç±»å‹1\" = 16, \"ç±»å‹2\" = 17, \"ç±»å‹3\" = 15) # åœ†ã€ä¸‰è§’ã€æ–¹å—\n    )\n\n\n\n\n\n\n\n\n\nå½¢çŠ¶ç¼–å·å‚è€ƒï¼š0-14 ç©ºå¿ƒï¼Œ15-20 å®å¿ƒï¼Œ21-25 å¯å¡«å……\n\n\n\né€æ˜åº¦æ˜ å°„\n\nggplot(demo_data, aes(x = x, y = y, alpha = size)) +\n    geom_point(size = 4, color = \"#4f46e5\") +\n    scale_alpha_continuous(range = c(0.2, 1))\n\n\n\n\n\n\n\n\n\n\nçº¿å‹æ˜ å°„\n\nline_data &lt;- data.frame(\n    x = rep(1:10, 3),\n    y = c(cumsum(rnorm(10)), cumsum(rnorm(10)) + 10, cumsum(rnorm(10)) + 20),\n    type = rep(c(\"A\", \"B\", \"C\"), each = 10)\n)\n\nggplot(line_data, aes(x = x, y = y, linetype = type, color = type)) +\n    geom_line(linewidth = 1) +\n    scale_linetype_manual(values = c(\"solid\", \"dashed\", \"dotted\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "ggplot2 æ ·å¼è®¾ç½®è¯¦è§£"
    ]
  },
  {
    "objectID": "2033-ggplot2-styling.html#ç¬¬äº”éƒ¨åˆ†åˆ†é¢è¯¦ç»†è®¾ç½®",
    "href": "2033-ggplot2-styling.html#ç¬¬äº”éƒ¨åˆ†åˆ†é¢è¯¦ç»†è®¾ç½®",
    "title": "ggplot2 æ ·å¼è®¾ç½®å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šåˆ†é¢è¯¦ç»†è®¾ç½®",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šåˆ†é¢è¯¦ç»†è®¾ç½®\n\nfacet_wrap å•å˜é‡åˆ†é¢\n\np_base +\n    facet_wrap(~group, ncol = 2) # æŒ‡å®šåˆ—æ•°\n\n\n\n\n\n\n\n\n\np_base +\n    facet_wrap(~group, nrow = 1) # å•è¡Œæ’åˆ—\n\n\n\n\n\n\n\n\n\n# è‡ªç”±åæ ‡è½´\np_base +\n    facet_wrap(~group, scales = \"free\") # æ¯ä¸ªé¢æ¿ç‹¬ç«‹åæ ‡\n\n\n\n\n\n\n\n\n\np_base +\n    facet_wrap(~group, scales = \"free_y\") # åªæœ‰ Y è½´è‡ªç”±\n\n\n\n\n\n\n\n\n\n\nfacet_grid åŒå˜é‡åˆ†é¢\n\nggplot(demo_data, aes(x = x, y = y, color = group)) +\n    geom_point() +\n    facet_grid(category ~ group) # è¡Œ ~ åˆ—\n\n\n\n\n\n\n\n\n\n# è¡Œæ–¹å‘åˆ†é¢\nggplot(demo_data, aes(x = x, y = y)) +\n    geom_point(color = \"#4f46e5\") +\n    facet_grid(group ~ .) # æŒ‰è¡Œåˆ†é¢\n\n\n\n\n\n\n\n\n\n# åˆ—æ–¹å‘åˆ†é¢\nggplot(demo_data, aes(x = x, y = y)) +\n    geom_point(color = \"#4f46e5\") +\n    facet_grid(. ~ group) # æŒ‰åˆ—åˆ†é¢\n\n\n\n\n\n\n\n\n\n\nåˆ†é¢æ ‡ç­¾æ ·å¼\n\np_base +\n    facet_wrap(~group) +\n    theme(\n        # åˆ†é¢æ ‡ç­¾ï¼ˆstripï¼‰\n        strip.text = element_text(\n            size = 12,\n            face = \"bold\",\n            color = \"white\"\n        ),\n        # åˆ†é¢æ ‡ç­¾èƒŒæ™¯\n        strip.background = element_rect(\n            fill = \"#4f46e5\",\n            color = \"#4f46e5\"\n        )\n    )\n\n\n\n\n\n\n\n\n\n\nè‡ªå®šä¹‰åˆ†é¢æ ‡ç­¾\n\n# ä½¿ç”¨ labeller å‡½æ•°\ncustom_labels &lt;- c(\n    \"Aç»„\" = \"å¯¹ç…§ç»„ (Control)\",\n    \"Bç»„\" = \"ä½å‰‚é‡ (Low)\",\n    \"Cç»„\" = \"ä¸­å‰‚é‡ (Medium)\",\n    \"Dç»„\" = \"é«˜å‰‚é‡ (High)\"\n)\n\np_base +\n    facet_wrap(~group, labeller = labeller(group = custom_labels))\n\n\n\n\n\n\n\n\n\n\nåˆ†é¢é—´è·\n\np_base +\n    facet_wrap(~group) +\n    theme(\n        panel.spacing.x = unit(1.5, \"cm\"), # æ°´å¹³é—´è·\n        panel.spacing.y = unit(1, \"cm\") # å‚ç›´é—´è·\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "ggplot2 æ ·å¼è®¾ç½®è¯¦è§£"
    ]
  },
  {
    "objectID": "2033-ggplot2-styling.html#ç¬¬å…­éƒ¨åˆ†ä¸»é¢˜ç³»ç»Ÿå…¨é¢å®šåˆ¶",
    "href": "2033-ggplot2-styling.html#ç¬¬å…­éƒ¨åˆ†ä¸»é¢˜ç³»ç»Ÿå…¨é¢å®šåˆ¶",
    "title": "ggplot2 æ ·å¼è®¾ç½®å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šä¸»é¢˜ç³»ç»Ÿå…¨é¢å®šåˆ¶",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šä¸»é¢˜ç³»ç»Ÿå…¨é¢å®šåˆ¶\n\né¢„è®¾ä¸»é¢˜ä¸€è§ˆ\n\np &lt;- ggplot(demo_data, aes(x = x, y = y, color = group)) +\n    geom_point()\n\np + theme_gray() + labs(title = \"theme_gray() - é»˜è®¤\")\n\n\n\n\n\n\n\n\n\np + theme_bw() + labs(title = \"theme_bw() - é»‘ç™½\")\n\n\n\n\n\n\n\n\n\np + theme_minimal() + labs(title = \"theme_minimal() - æç®€\")\n\n\n\n\n\n\n\n\n\np + theme_classic() + labs(title = \"theme_classic() - ç»å…¸\")\n\n\n\n\n\n\n\n\n\np + theme_void() + labs(title = \"theme_void() - ç©ºç™½\")\n\n\n\n\n\n\n\n\n\n\ntheme() å®Œæ•´å‚æ•°\n\np_base +\n    labs(\n        title = \"å®Œå…¨è‡ªå®šä¹‰ä¸»é¢˜ç¤ºä¾‹\",\n        subtitle = \"æ‰€æœ‰å…ƒç´ éƒ½å¯ä»¥å®šåˆ¶\"\n    ) +\n    theme(\n        # ========== å›¾å½¢æ•´ä½“ ==========\n        plot.background = element_rect(fill = \"#fafafa\", color = NA),\n        plot.margin = margin(20, 20, 20, 20),\n\n        # ========== é¢æ¿ ==========\n        panel.background = element_rect(fill = \"white\"),\n        panel.border = element_rect(color = \"#e5e7eb\", fill = NA),\n        panel.grid.major = element_line(color = \"#f3f4f6\", linewidth = 0.5),\n        panel.grid.minor = element_blank(),\n\n        # ========== åæ ‡è½´ ==========\n        axis.title = element_text(size = 12, face = \"bold\"),\n        axis.text = element_text(size = 10, color = \"#374151\"),\n        axis.line = element_blank(),\n        axis.ticks = element_line(color = \"#e5e7eb\"),\n\n        # ========== å›¾ä¾‹ ==========\n        legend.position = \"bottom\",\n        legend.background = element_rect(fill = \"white\", color = \"#e5e7eb\"),\n        legend.title = element_text(face = \"bold\"),\n        legend.key = element_rect(fill = \"white\"),\n\n        # ========== æ ‡é¢˜ ==========\n        plot.title = element_text(size = 16, face = \"bold\", hjust = 0.5),\n        plot.subtitle = element_text(size = 11, color = \"gray50\", hjust = 0.5),\n\n        # ========== åˆ†é¢ ==========\n        strip.background = element_rect(fill = \"#4f46e5\"),\n        strip.text = element_text(color = \"white\", face = \"bold\")\n    )\n\n\n\n\n\n\n\n\n\n\nåˆ›å»ºå¯å¤ç”¨ä¸»é¢˜\n\n# å®šä¹‰è‡ªå·±çš„ä¸»é¢˜å‡½æ•°\ntheme_my_style &lt;- function(base_size = 12) {\n    theme_minimal(base_size = base_size) +\n        theme(\n            # æ ‡é¢˜\n            plot.title = element_text(face = \"bold\", hjust = 0.5),\n            plot.subtitle = element_text(color = \"gray50\", hjust = 0.5),\n            # é¢æ¿\n            panel.grid.minor = element_blank(),\n            panel.grid.major = element_line(color = \"#f0f0f0\"),\n            # åæ ‡è½´\n            axis.title = element_text(face = \"bold\"),\n            axis.text = element_text(color = \"#333333\"),\n            # å›¾ä¾‹\n            legend.position = \"bottom\",\n            legend.background = element_rect(fill = \"white\", color = \"gray90\"),\n            # åˆ†é¢\n            strip.background = element_rect(fill = \"#4f46e5\"),\n            strip.text = element_text(color = \"white\", face = \"bold\")\n        )\n}\n\n# ä½¿ç”¨è‡ªå®šä¹‰ä¸»é¢˜\np_base +\n    labs(title = \"ä½¿ç”¨è‡ªå®šä¹‰ä¸»é¢˜\", subtitle = \"å¯å¤ç”¨äºæ‰€æœ‰å›¾å½¢\") +\n    theme_my_style()\n\n\n\n\n\n\n\n\n\n\nè®¾ç½®å…¨å±€ä¸»é¢˜\n\n# è®¾ç½®åç»­æ‰€æœ‰å›¾å½¢çš„é»˜è®¤ä¸»é¢˜\ntheme_set(theme_minimal())\n\n# å‘é»˜è®¤ä¸»é¢˜æ·»åŠ å…ƒç´ \ntheme_update(\n    plot.title = element_text(face = \"bold\", hjust = 0.5),\n    legend.position = \"bottom\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "ggplot2 æ ·å¼è®¾ç½®è¯¦è§£"
    ]
  },
  {
    "objectID": "2033-ggplot2-styling.html#ç¬¬ä¸ƒéƒ¨åˆ†å®ç”¨æŠ€å·§æ±‡æ€»",
    "href": "2033-ggplot2-styling.html#ç¬¬ä¸ƒéƒ¨åˆ†å®ç”¨æŠ€å·§æ±‡æ€»",
    "title": "ggplot2 æ ·å¼è®¾ç½®å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®ç”¨æŠ€å·§æ±‡æ€»",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®ç”¨æŠ€å·§æ±‡æ€»\n\néšè—ç‰¹å®šå…ƒç´ \n\np_base +\n    theme(\n        axis.title.x = element_blank(), # éšè— X è½´æ ‡é¢˜\n        axis.text.x = element_blank(), # éšè— X è½´åˆ»åº¦æ ‡ç­¾\n        axis.ticks.x = element_blank(), # éšè— X è½´åˆ»åº¦çº¿\n        panel.grid.major.x = element_blank() # éšè—å‚ç›´ç½‘æ ¼çº¿\n    )\n\n\n\n\n\n\n\n\n\n\nåæ ‡è½´æ¯”ä¾‹\n\n# å›ºå®š XY æ¯”ä¾‹ï¼ˆ1:1ï¼‰\nggplot(demo_data, aes(x, y)) +\n    geom_point() +\n    coord_fixed(ratio = 1) # X:Y = 1:1\n\n\n\n\n\n\n\n\n\n\nç™¾åˆ†æ¯”åæ ‡\n\npercent_data &lt;- data.frame(\n    group = c(\"A\", \"B\", \"C\"),\n    pct = c(0.35, 0.45, 0.20)\n)\n\nggplot(percent_data, aes(x = group, y = pct, fill = group)) +\n    geom_col() +\n    scale_y_continuous(labels = scales::percent_format()) +\n    scale_fill_brewer(palette = \"Set2\") +\n    theme_minimal()\n\n\n\n\n\n\n\n\n\n\nç§‘å­¦è®¡æ•°æ³•\n\nsci_data &lt;- data.frame(\n    x = 1:5,\n    y = c(1e3, 1e4, 1e5, 1e6, 1e7)\n)\n\nggplot(sci_data, aes(x, y)) +\n    geom_point(size = 4) +\n    geom_line() +\n    scale_y_continuous(labels = scales::scientific_format())\n\n\n\n\n\n\n\n\n\n\næ—¥æœŸåæ ‡\n\ndate_data &lt;- data.frame(\n    date = seq(as.Date(\"2024-01-01\"), as.Date(\"2024-12-31\"), by = \"month\"),\n    value = cumsum(rnorm(12, 10, 5))\n)\n\nggplot(date_data, aes(date, value)) +\n    geom_line(color = \"#4f46e5\", linewidth = 1) +\n    geom_point(color = \"#4f46e5\", size = 3) +\n    scale_x_date(\n        date_breaks = \"2 months\",\n        date_labels = \"%Y-%m\"\n    ) +\n    theme_minimal() +\n    theme(axis.text.x = element_text(angle = 45, hjust = 1))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "ggplot2 æ ·å¼è®¾ç½®è¯¦è§£"
    ]
  },
  {
    "objectID": "2033-ggplot2-styling.html#é€ŸæŸ¥è¡¨",
    "href": "2033-ggplot2-styling.html#é€ŸæŸ¥è¡¨",
    "title": "ggplot2 æ ·å¼è®¾ç½®å®Œå…¨æŒ‡å—",
    "section": "é€ŸæŸ¥è¡¨",
    "text": "é€ŸæŸ¥è¡¨\n\n\n\n\n\n\n\n\nç±»åˆ«\nå‡½æ•°/å‚æ•°\nåŠŸèƒ½\n\n\n\n\nåæ ‡è½´èŒƒå›´\nxlim(), ylim()\nè®¾ç½®èŒƒå›´ï¼ˆåˆ é™¤è¶…èŒƒå›´æ•°æ®ï¼‰\n\n\n\ncoord_cartesian(xlim, ylim)\næ”¾å¤§è§†å›¾ï¼ˆä¸åˆ é™¤æ•°æ®ï¼‰\n\n\n\nscale_*_continuous(limits)\nç²¾ç»†æ§åˆ¶\n\n\nåˆ»åº¦\nbreaks\nä¸»åˆ»åº¦ä½ç½®\n\n\n\nlabels\nåˆ»åº¦æ ‡ç­¾\n\n\n\nminor_breaks\næ¬¡åˆ»åº¦ä½ç½®\n\n\nå›¾ä¾‹ä½ç½®\nlegend.position\nâ€œtopâ€, â€œbottomâ€, â€œleftâ€, â€œrightâ€, â€œnoneâ€\n\n\n\nlegend.position = c(x, y)\nç²¾ç¡®ä½ç½® (0-1)\n\n\nå›¾ä¾‹æ ·å¼\nguides()\næ§åˆ¶å›¾ä¾‹ç»†èŠ‚\n\n\n\nguide_legend()\nç¦»æ•£å›¾ä¾‹å‚æ•°\n\n\næ ‡é¢˜\nlabs(title, subtitle, caption, tag)\næ·»åŠ æ ‡é¢˜\n\n\n\nplot.title, plot.subtitle\nthemeä¸­çš„æ ·å¼\n\n\næ³¨é‡Š\nannotate()\næ·»åŠ æ–‡å­—/å‡ ä½•æ³¨é‡Š\n\n\n\ngeom_text(), geom_label()\næ•°æ®ç‚¹æ ‡ç­¾\n\n\nåˆ†é¢\nfacet_wrap(~ var)\nå•å˜é‡åˆ†é¢\n\n\n\nfacet_grid(row ~ col)\nåŒå˜é‡åˆ†é¢\n\n\n\nscales = \"free\"\nè‡ªç”±åæ ‡è½´\n\n\né¢œè‰²\nscale_color_manual(values)\næ‰‹åŠ¨é¢œè‰²\n\n\n\nscale_color_brewer(palette)\né¢„è®¾è°ƒè‰²æ¿\n\n\n\nscale_color_gradient()\nè¿ç»­æ¸å˜\n\n\nä¸»é¢˜\ntheme_minimal(), theme_bw()\né¢„è®¾ä¸»é¢˜\n\n\n\ntheme()\nè‡ªå®šä¹‰æ‰€æœ‰å…ƒç´ ",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "ggplot2 æ ·å¼è®¾ç½®è¯¦è§£"
    ]
  },
  {
    "objectID": "2033-ggplot2-styling.html#å°ç»“",
    "href": "2033-ggplot2-styling.html#å°ç»“",
    "title": "ggplot2 æ ·å¼è®¾ç½®å®Œå…¨æŒ‡å—",
    "section": "å°ç»“",
    "text": "å°ç»“\næœ¬æ•™ç¨‹æ¶µç›–äº† ggplot2 æ ·å¼è®¾ç½®çš„æ‰€æœ‰é‡è¦æ–¹é¢ï¼š\n\nåæ ‡è½´ï¼šèŒƒå›´ã€åˆ»åº¦ã€æ ‡ç­¾ã€è½´çº¿ã€å˜æ¢\nå›¾ä¾‹ï¼šä½ç½®ã€æ ‡é¢˜ã€æ ‡ç­¾ã€å¸ƒå±€ã€å¤šå›¾ä¾‹æ§åˆ¶\næ ‡é¢˜æ³¨é‡Šï¼šæ ‡é¢˜ç³»ç»Ÿã€æ–‡æœ¬æ³¨é‡Šã€å‡ ä½•æ³¨é‡Š\nç¾å­¦æ˜ å°„ï¼šé¢œè‰²ã€å¤§å°ã€å½¢çŠ¶ã€é€æ˜åº¦ã€çº¿å‹\nåˆ†é¢ï¼šwrap/gridã€æ ‡ç­¾æ ·å¼ã€é—´è·æ§åˆ¶\nä¸»é¢˜ç³»ç»Ÿï¼šé¢„è®¾ä¸»é¢˜ã€å®Œæ•´å®šåˆ¶ã€å¯å¤ç”¨ä¸»é¢˜\n\n\nå»ºè®®ï¼šä¿å­˜å¸¸ç”¨çš„ theme() è®¾ç½®ä¸ºå‡½æ•°ï¼Œåœ¨æ‰€æœ‰å›¾å½¢ä¸­å¤ç”¨ï¼Œä¿æŒé£æ ¼ç»Ÿä¸€ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "ggplot2 æ ·å¼è®¾ç½®è¯¦è§£"
    ]
  },
  {
    "objectID": "2033-ggplot2-styling.html#å‚è€ƒèµ„æº",
    "href": "2033-ggplot2-styling.html#å‚è€ƒèµ„æº",
    "title": "ggplot2 æ ·å¼è®¾ç½®å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nggplot2 å®˜æ–¹å‚è€ƒ\nggplot2 ä¸»é¢˜ç³»ç»Ÿæ–‡æ¡£\nscales åŒ…\nggplot2 Cheatsheet",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "ggplot2 æ ·å¼è®¾ç½®è¯¦è§£"
    ]
  },
  {
    "objectID": "2035-bindlollipop.html",
    "href": "2035-bindlollipop.html",
    "title": "Rè¯­è¨€æ£’æ£’ç³–å›¾ä¸æ’åºå›¾ç»˜åˆ¶",
    "section": "",
    "text": "æ£’æ£’ç³–å›¾ï¼ˆLollipop Chartï¼‰æ˜¯ä¸€ç§ç»“åˆäº†æ¡å½¢å›¾å’Œæ•£ç‚¹å›¾ç‰¹ç‚¹çš„å¯è§†åŒ–æ–¹å¼ã€‚å®ƒç”¨ä¸€æ¡ç»†çº¿ï¼ˆâ€œæ£’â€ï¼‰è¿æ¥æ•°æ®ç‚¹ï¼ˆâ€œç³–â€ï¼‰ï¼Œç›¸æ¯”ä¼ ç»ŸæŸ±çŠ¶å›¾ï¼Œè§†è§‰æ›´è½»ç›ˆï¼Œæ›´é€‚åˆå±•ç¤ºæ’åºæ•°æ®å’Œæ’åä¿¡æ¯ã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\næ’åå±•ç¤º\né”€å”®æ’è¡Œã€ç»©æ•ˆæ’åã€TOP N åˆ†æ\n\n\næœ‰åºåˆ†ç±»æ¯”è¾ƒ\nå„éƒ¨é—¨ä¸šç»©ã€å„åœ°åŒºæ•°æ®å¯¹æ¯”\n\n\nçªå‡ºæœ«ç«¯æ•°å€¼\nå¼ºè°ƒå…·ä½“æ•°å€¼è€Œéé¢ç§¯\n\n\nå‡å°‘è§†è§‰å™ªéŸ³\nå½“åˆ†ç±»è¾ƒå¤šæ—¶æ¯”æŸ±çŠ¶å›¾æ›´æ¸…çˆ½\n\n\n\n\n\n\n\n\n\nå›¾è¡¨ç±»å‹\nç‰¹ç‚¹\n\n\n\n\næ£’æ£’ç³–å›¾\nç‚¹+çº¿ï¼Œè½»ç›ˆç¾è§‚\n\n\nå…‹åˆ©å¤«å…°ç‚¹å›¾\nä»…ç”¨ç‚¹ï¼Œæç®€é£æ ¼\n\n\næœ‰åºæ¡å½¢å›¾\næŒ‰æ•°å€¼æ’åºçš„æ¡å½¢å›¾\n\n\nåˆ†ç»„æ£’æ£’ç³–\nå¤šç»„æ¯”è¾ƒ",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æ£’æ£’ç³–å›¾ä¸æ’åºå›¾"
    ]
  },
  {
    "objectID": "2035-bindlollipop.html#ä»€ä¹ˆæ˜¯æ£’æ£’ç³–å›¾",
    "href": "2035-bindlollipop.html#ä»€ä¹ˆæ˜¯æ£’æ£’ç³–å›¾",
    "title": "Rè¯­è¨€æ£’æ£’ç³–å›¾ä¸æ’åºå›¾ç»˜åˆ¶",
    "section": "",
    "text": "æ£’æ£’ç³–å›¾ï¼ˆLollipop Chartï¼‰æ˜¯ä¸€ç§ç»“åˆäº†æ¡å½¢å›¾å’Œæ•£ç‚¹å›¾ç‰¹ç‚¹çš„å¯è§†åŒ–æ–¹å¼ã€‚å®ƒç”¨ä¸€æ¡ç»†çº¿ï¼ˆâ€œæ£’â€ï¼‰è¿æ¥æ•°æ®ç‚¹ï¼ˆâ€œç³–â€ï¼‰ï¼Œç›¸æ¯”ä¼ ç»ŸæŸ±çŠ¶å›¾ï¼Œè§†è§‰æ›´è½»ç›ˆï¼Œæ›´é€‚åˆå±•ç¤ºæ’åºæ•°æ®å’Œæ’åä¿¡æ¯ã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\næ’åå±•ç¤º\né”€å”®æ’è¡Œã€ç»©æ•ˆæ’åã€TOP N åˆ†æ\n\n\næœ‰åºåˆ†ç±»æ¯”è¾ƒ\nå„éƒ¨é—¨ä¸šç»©ã€å„åœ°åŒºæ•°æ®å¯¹æ¯”\n\n\nçªå‡ºæœ«ç«¯æ•°å€¼\nå¼ºè°ƒå…·ä½“æ•°å€¼è€Œéé¢ç§¯\n\n\nå‡å°‘è§†è§‰å™ªéŸ³\nå½“åˆ†ç±»è¾ƒå¤šæ—¶æ¯”æŸ±çŠ¶å›¾æ›´æ¸…çˆ½\n\n\n\n\n\n\n\n\n\nå›¾è¡¨ç±»å‹\nç‰¹ç‚¹\n\n\n\n\næ£’æ£’ç³–å›¾\nç‚¹+çº¿ï¼Œè½»ç›ˆç¾è§‚\n\n\nå…‹åˆ©å¤«å…°ç‚¹å›¾\nä»…ç”¨ç‚¹ï¼Œæç®€é£æ ¼\n\n\næœ‰åºæ¡å½¢å›¾\næŒ‰æ•°å€¼æ’åºçš„æ¡å½¢å›¾\n\n\nåˆ†ç»„æ£’æ£’ç³–\nå¤šç»„æ¯”è¾ƒ",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æ£’æ£’ç³–å›¾ä¸æ’åºå›¾"
    ]
  },
  {
    "objectID": "2035-bindlollipop.html#råŒ…å®‰è£…ä¸åŠ è½½",
    "href": "2035-bindlollipop.html#råŒ…å®‰è£…ä¸åŠ è½½",
    "title": "Rè¯­è¨€æ£’æ£’ç³–å›¾ä¸æ’åºå›¾ç»˜åˆ¶",
    "section": "RåŒ…å®‰è£…ä¸åŠ è½½",
    "text": "RåŒ…å®‰è£…ä¸åŠ è½½\n\n# åŠ è½½æ ¸å¿ƒåŒ…\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(scales)\nlibrary(forcats)\n\nå¯¹äºè¿›é˜¶æ•ˆæœï¼Œå¯ä½¿ç”¨ ggalt åŒ…ï¼š\n\n# å¯é€‰å®‰è£…ï¼ˆæä¾›é¢å¤–geomï¼‰\ninstall.packages(\"ggalt\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æ£’æ£’ç³–å›¾ä¸æ’åºå›¾"
    ]
  },
  {
    "objectID": "2035-bindlollipop.html#åŸºç¡€æ£’æ£’ç³–å›¾",
    "href": "2035-bindlollipop.html#åŸºç¡€æ£’æ£’ç³–å›¾",
    "title": "Rè¯­è¨€æ£’æ£’ç³–å›¾ä¸æ’åºå›¾ç»˜åˆ¶",
    "section": "åŸºç¡€æ£’æ£’ç³–å›¾",
    "text": "åŸºç¡€æ£’æ£’ç³–å›¾\n\nå‡†å¤‡ç¤ºä¾‹æ•°æ®\n\n# åˆ›å»ºç¤ºä¾‹æ•°æ®ï¼šå„å›½2023å¹´äººå‡GDPï¼ˆç®€åŒ–ç‰ˆï¼‰\ngdp_data &lt;- data.frame(\n    country = c(\n        \"å¢æ£®å ¡\", \"æ–°åŠ å¡\", \"çˆ±å°”å…°\", \"ç‘å£«\", \"æŒªå¨\",\n        \"ç¾å›½\", \"ä¸¹éº¦\", \"è·å…°\", \"å¥¥åœ°åˆ©\", \"å¾·å›½\",\n        \"æ¾³å¤§åˆ©äºš\", \"ç‘å…¸\", \"æ¯”åˆ©æ—¶\", \"åŠ æ‹¿å¤§\", \"èŠ¬å…°\"\n    ),\n    gdp = c(\n        128, 84, 103, 92, 82, 76, 68, 64, 62, 57,\n        65, 60, 58, 53, 55\n    )\n)\n\nhead(gdp_data)\n\n  country gdp\n1  å¢æ£®å ¡ 128\n2  æ–°åŠ å¡  84\n3  çˆ±å°”å…° 103\n4    ç‘å£«  92\n5    æŒªå¨  82\n6    ç¾å›½  76\n\n\n\n\nç»˜åˆ¶åŸºç¡€æ£’æ£’ç³–å›¾\næ£’æ£’ç³–å›¾çš„æ ¸å¿ƒæ˜¯ geom_segment() + geom_point() çš„ç»„åˆï¼š\n\n# å…ˆæŒ‰GDPæ’åº\ngdp_data &lt;- gdp_data %&gt;%\n    mutate(country = fct_reorder(country, gdp))\n\n# åŸºç¡€æ£’æ£’ç³–å›¾\nggplot(gdp_data, aes(x = gdp, y = country)) +\n    # ç»˜åˆ¶\"æ£’\"ï¼ˆçº¿æ®µï¼‰\n    geom_segment(\n        aes(x = 0, xend = gdp, y = country, yend = country),\n        color = \"gray70\",\n        linewidth = 0.8\n    ) +\n    # ç»˜åˆ¶\"ç³–\"ï¼ˆåœ†ç‚¹ï¼‰\n    geom_point(\n        size = 4,\n        color = \"#4f46e5\"\n    ) +\n    labs(\n        title = \"2023å¹´äººå‡GDPæ’åï¼ˆåƒç¾å…ƒï¼‰\",\n        x = \"äººå‡GDPï¼ˆåƒç¾å…ƒï¼‰\",\n        y = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        panel.grid.major.y = element_blank(),\n        panel.grid.minor = element_blank()\n    )\n\n\n\n\n\n\n\n\n\n\nä»£ç è§£æ\n\n\n\nç»„ä»¶\nä½œç”¨\n\n\n\n\ngeom_segment()\nç»˜åˆ¶ä»åŸç‚¹åˆ°æ•°æ®ç‚¹çš„çº¿æ®µ\n\n\ngeom_point()\nç»˜åˆ¶æœ«ç«¯çš„åœ†ç‚¹\n\n\nfct_reorder()\næŒ‰æ•°å€¼é‡æ–°æ’åˆ—å› å­é¡ºåº\n\n\npanel.grid.major.y = element_blank()\nç§»é™¤æ°´å¹³ç½‘æ ¼çº¿ä½¿å›¾è¡¨æ›´æ¸…çˆ½",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æ£’æ£’ç³–å›¾ä¸æ’åºå›¾"
    ]
  },
  {
    "objectID": "2035-bindlollipop.html#ç¾åŒ–æ£’æ£’ç³–å›¾",
    "href": "2035-bindlollipop.html#ç¾åŒ–æ£’æ£’ç³–å›¾",
    "title": "Rè¯­è¨€æ£’æ£’ç³–å›¾ä¸æ’åºå›¾ç»˜åˆ¶",
    "section": "ç¾åŒ–æ£’æ£’ç³–å›¾",
    "text": "ç¾åŒ–æ£’æ£’ç³–å›¾\n\næ·»åŠ æ•°å€¼æ ‡ç­¾\n\nggplot(gdp_data, aes(x = gdp, y = country)) +\n    geom_segment(\n        aes(x = 0, xend = gdp, y = country, yend = country),\n        color = \"#e2e8f0\",\n        linewidth = 1.2\n    ) +\n    geom_point(\n        size = 5,\n        color = \"#4f46e5\"\n    ) +\n    # æ·»åŠ æ•°å€¼æ ‡ç­¾\n    geom_text(\n        aes(label = gdp),\n        hjust = -0.5, # æ ‡ç­¾åœ¨ç‚¹å³ä¾§\n        size = 3.5,\n        color = \"#374151\"\n    ) +\n    # æ‰©å±•xè½´ç•™å‡ºæ ‡ç­¾ç©ºé—´\n    scale_x_continuous(expand = expansion(mult = c(0, 0.15))) +\n    labs(\n        title = \"2023å¹´äººå‡GDPæ’å\",\n        subtitle = \"å•ä½ï¼šåƒç¾å…ƒ\",\n        x = NULL,\n        y = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        panel.grid.major.y = element_blank(),\n        panel.grid.minor = element_blank(),\n        plot.title = element_text(face = \"bold\", size = 14),\n        plot.subtitle = element_text(color = \"gray50\")\n    )\n\n\n\n\n\n\n\n\n\n\næ¡ä»¶ç€è‰²\næ ¹æ®æ•°å€¼å¤§å°ä½¿ç”¨ä¸åŒé¢œè‰²ï¼š\n\n# æ·»åŠ åˆ†ç»„æ ‡ç­¾\ngdp_data &lt;- gdp_data %&gt;%\n    mutate(\n        gdp_group = case_when(\n            gdp &gt;= 80 ~ \"è¶…é«˜\",\n            gdp &gt;= 60 ~ \"é«˜\",\n            TRUE ~ \"ä¸­é«˜\"\n        )\n    )\n\nggplot(gdp_data, aes(x = gdp, y = country)) +\n    geom_segment(\n        aes(x = 0, xend = gdp, y = country, yend = country),\n        color = \"#f1f5f9\",\n        linewidth = 1.2\n    ) +\n    geom_point(\n        aes(color = gdp_group),\n        size = 5\n    ) +\n    geom_text(\n        aes(label = gdp),\n        hjust = -0.5,\n        size = 3.5,\n        color = \"#374151\"\n    ) +\n    scale_color_manual(\n        values = c(\"è¶…é«˜\" = \"#7c3aed\", \"é«˜\" = \"#4f46e5\", \"ä¸­é«˜\" = \"#818cf8\")\n    ) +\n    scale_x_continuous(expand = expansion(mult = c(0, 0.15))) +\n    labs(\n        title = \"2023å¹´äººå‡GDPæ’å\",\n        subtitle = \"æŒ‰æ”¶å…¥æ°´å¹³åˆ†ç±»ç€è‰²\",\n        x = NULL,\n        y = NULL,\n        color = \"æ”¶å…¥æ°´å¹³\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        panel.grid.major.y = element_blank(),\n        panel.grid.minor = element_blank(),\n        legend.position = \"top\",\n        plot.title = element_text(face = \"bold\")\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æ£’æ£’ç³–å›¾ä¸æ’åºå›¾"
    ]
  },
  {
    "objectID": "2035-bindlollipop.html#å…‹åˆ©å¤«å…°ç‚¹å›¾-cleveland-dot-plot",
    "href": "2035-bindlollipop.html#å…‹åˆ©å¤«å…°ç‚¹å›¾-cleveland-dot-plot",
    "title": "Rè¯­è¨€æ£’æ£’ç³–å›¾ä¸æ’åºå›¾ç»˜åˆ¶",
    "section": "å…‹åˆ©å¤«å…°ç‚¹å›¾ (Cleveland Dot Plot)",
    "text": "å…‹åˆ©å¤«å…°ç‚¹å›¾ (Cleveland Dot Plot)\nå…‹åˆ©å¤«å…°ç‚¹å›¾æ˜¯æ£’æ£’ç³–å›¾çš„æç®€ç‰ˆæœ¬ï¼Œåªä¿ç•™ç‚¹ï¼Œå»æ‰çº¿æ®µï¼š\n\nggplot(gdp_data, aes(x = gdp, y = country)) +\n    # æ·»åŠ ç«–å‘ç½‘æ ¼è¾…åŠ©é˜…è¯»\n    geom_vline(\n        xintercept = seq(0, 120, by = 20),\n        color = \"#f1f5f9\",\n        linewidth = 0.5\n    ) +\n    # åªç”¨ç‚¹\n    geom_point(\n        aes(color = gdp_group),\n        size = 4\n    ) +\n    geom_text(\n        aes(label = gdp),\n        hjust = -0.6,\n        size = 3,\n        color = \"#6b7280\"\n    ) +\n    scale_color_manual(\n        values = c(\"è¶…é«˜\" = \"#10b981\", \"é«˜\" = \"#4f46e5\", \"ä¸­é«˜\" = \"#f59e0b\")\n    ) +\n    scale_x_continuous(expand = expansion(mult = c(0.01, 0.15))) +\n    labs(\n        title = \"å…‹åˆ©å¤«å…°ç‚¹å›¾ï¼šäººå‡GDPå¯¹æ¯”\",\n        x = \"äººå‡GDPï¼ˆåƒç¾å…ƒï¼‰\",\n        y = NULL,\n        color = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        panel.grid = element_blank(),\n        legend.position = \"top\",\n        plot.title = element_text(face = \"bold\")\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æ£’æ£’ç³–å›¾ä¸æ’åºå›¾"
    ]
  },
  {
    "objectID": "2035-bindlollipop.html#æ°´å¹³æ’åºæ¡å½¢å›¾",
    "href": "2035-bindlollipop.html#æ°´å¹³æ’åºæ¡å½¢å›¾",
    "title": "Rè¯­è¨€æ£’æ£’ç³–å›¾ä¸æ’åºå›¾ç»˜åˆ¶",
    "section": "æ°´å¹³æ’åºæ¡å½¢å›¾",
    "text": "æ°´å¹³æ’åºæ¡å½¢å›¾\nå½“éœ€è¦æ›´å¼ºè°ƒæ•°å€¼å·®å¼‚æ—¶ï¼Œä½¿ç”¨ä¼ ç»Ÿçš„æ’åºæ¡å½¢å›¾ï¼š\n\nggplot(gdp_data, aes(x = gdp, y = country, fill = gdp_group)) +\n    geom_col(width = 0.7) +\n    geom_text(\n        aes(label = gdp),\n        hjust = -0.2,\n        size = 3.5,\n        color = \"#374151\"\n    ) +\n    scale_fill_manual(\n        values = c(\"è¶…é«˜\" = \"#7c3aed\", \"é«˜\" = \"#4f46e5\", \"ä¸­é«˜\" = \"#a5b4fc\")\n    ) +\n    scale_x_continuous(expand = expansion(mult = c(0, 0.12))) +\n    labs(\n        title = \"æŒ‰GDPæ’åºçš„æ¡å½¢å›¾\",\n        x = \"äººå‡GDPï¼ˆåƒç¾å…ƒï¼‰\",\n        y = NULL,\n        fill = \"æ”¶å…¥æ°´å¹³\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        panel.grid.major.y = element_blank(),\n        legend.position = \"top\",\n        plot.title = element_text(face = \"bold\")\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æ£’æ£’ç³–å›¾ä¸æ’åºå›¾"
    ]
  },
  {
    "objectID": "2035-bindlollipop.html#åˆ†ç»„æ£’æ£’ç³–å›¾",
    "href": "2035-bindlollipop.html#åˆ†ç»„æ£’æ£’ç³–å›¾",
    "title": "Rè¯­è¨€æ£’æ£’ç³–å›¾ä¸æ’åºå›¾ç»˜åˆ¶",
    "section": "åˆ†ç»„æ£’æ£’ç³–å›¾",
    "text": "åˆ†ç»„æ£’æ£’ç³–å›¾\næ¯”è¾ƒå¤šä¸ªç±»åˆ«çš„æ•°æ®ï¼š\n\n# åˆ›å»ºåˆ†ç»„æ•°æ®\ncompare_data &lt;- data.frame(\n    country = rep(c(\"ä¸­å›½\", \"ç¾å›½\", \"æ—¥æœ¬\", \"å¾·å›½\", \"è‹±å›½\"), each = 2),\n    year = rep(c(\"2020\", \"2023\"), 5),\n    value = c(10.5, 12.7, 63.5, 76.0, 40.1, 34.2, 46.2, 57.0, 41.1, 48.0)\n)\n\ncompare_data &lt;- compare_data %&gt;%\n    mutate(country = fct_reorder(country, value, .fun = max, .desc = TRUE))\n\nggplot(compare_data, aes(x = value, y = country, color = year)) +\n    geom_segment(\n        aes(x = 0, xend = value, y = country, yend = country),\n        linewidth = 1,\n        alpha = 0.6\n    ) +\n    geom_point(\n        size = 5,\n        position = position_dodge(width = 0.5)\n    ) +\n    scale_color_manual(values = c(\"2020\" = \"#94a3b8\", \"2023\" = \"#4f46e5\")) +\n    labs(\n        title = \"ä¸»è¦ç»æµä½“äººå‡GDPå˜åŒ–\",\n        subtitle = \"2020 vs 2023ï¼ˆåƒç¾å…ƒï¼‰\",\n        x = \"äººå‡GDP\",\n        y = NULL,\n        color = \"å¹´ä»½\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        panel.grid.major.y = element_blank(),\n        legend.position = \"top\",\n        plot.title = element_text(face = \"bold\")\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æ£’æ£’ç³–å›¾ä¸æ’åºå›¾"
    ]
  },
  {
    "objectID": "2035-bindlollipop.html#top-n-ç­›é€‰å±•ç¤º",
    "href": "2035-bindlollipop.html#top-n-ç­›é€‰å±•ç¤º",
    "title": "Rè¯­è¨€æ£’æ£’ç³–å›¾ä¸æ’åºå›¾ç»˜åˆ¶",
    "section": "TOP N ç­›é€‰å±•ç¤º",
    "text": "TOP N ç­›é€‰å±•ç¤º\nå½“æ•°æ®é‡è¾ƒå¤§æ—¶ï¼Œåªå±•ç¤ºæ’åé å‰çš„é¡¹ç›®ï¼š\n\n# åˆ›å»ºè¾ƒå¤§æ•°æ®é›†\nset.seed(42)\nlarge_data &lt;- data.frame(\n    item = paste0(\"äº§å“\", LETTERS[1:20]),\n    sales = round(runif(20, 50, 200), 0)\n)\n\n# åªå±•ç¤º TOP 10\ntop_10 &lt;- large_data %&gt;%\n    slice_max(sales, n = 10) %&gt;%\n    mutate(item = fct_reorder(item, sales))\n\nggplot(top_10, aes(x = sales, y = item)) +\n    geom_segment(\n        aes(x = 0, xend = sales, y = item, yend = item),\n        color = \"#e0e7ff\",\n        linewidth = 1.5\n    ) +\n    geom_point(\n        size = 6,\n        color = \"#4f46e5\"\n    ) +\n    geom_text(\n        aes(label = sales),\n        hjust = -0.5,\n        fontface = \"bold\",\n        color = \"#374151\"\n    ) +\n    scale_x_continuous(expand = expansion(mult = c(0, 0.15))) +\n    labs(\n        title = \"é”€å”®é¢ TOP 10 äº§å“\",\n        subtitle = \"ä¸‡å…ƒ\",\n        x = NULL,\n        y = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        panel.grid = element_blank(),\n        plot.title = element_text(face = \"bold\", size = 16),\n        axis.text.y = element_text(face = \"bold\")\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æ£’æ£’ç³–å›¾ä¸æ’åºå›¾"
    ]
  },
  {
    "objectID": "2035-bindlollipop.html#æ°´å¹³å‚ç›´æ–¹å‘åˆ‡æ¢",
    "href": "2035-bindlollipop.html#æ°´å¹³å‚ç›´æ–¹å‘åˆ‡æ¢",
    "title": "Rè¯­è¨€æ£’æ£’ç³–å›¾ä¸æ’åºå›¾ç»˜åˆ¶",
    "section": "æ°´å¹³/å‚ç›´æ–¹å‘åˆ‡æ¢",
    "text": "æ°´å¹³/å‚ç›´æ–¹å‘åˆ‡æ¢\næ£’æ£’ç³–å›¾å¯ä»¥æ˜¯æ°´å¹³æˆ–å‚ç›´æ–¹å‘ï¼Œæ ¹æ®éœ€è¦é€‰æ‹©ï¼š\n\nå‚ç›´æ£’æ£’ç³–å›¾\n\n# ä½¿ç”¨TOP 8æ•°æ®\ntop_8 &lt;- large_data %&gt;%\n    slice_max(sales, n = 8) %&gt;%\n    mutate(item = fct_reorder(item, sales))\n\nggplot(top_8, aes(x = item, y = sales)) +\n    geom_segment(\n        aes(x = item, xend = item, y = 0, yend = sales),\n        color = \"#c7d2fe\",\n        linewidth = 1.5\n    ) +\n    geom_point(\n        size = 6,\n        color = \"#4f46e5\"\n    ) +\n    geom_text(\n        aes(label = sales),\n        vjust = -1,\n        fontface = \"bold\",\n        color = \"#374151\"\n    ) +\n    scale_y_continuous(expand = expansion(mult = c(0, 0.12))) +\n    labs(\n        title = \"å‚ç›´æ–¹å‘æ£’æ£’ç³–å›¾\",\n        x = NULL,\n        y = \"é”€å”®é¢ï¼ˆä¸‡å…ƒï¼‰\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        panel.grid.major.x = element_blank(),\n        plot.title = element_text(face = \"bold\")\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æ£’æ£’ç³–å›¾ä¸æ’åºå›¾"
    ]
  },
  {
    "objectID": "2035-bindlollipop.html#å®ç”¨å‡½æ•°å°è£…",
    "href": "2035-bindlollipop.html#å®ç”¨å‡½æ•°å°è£…",
    "title": "Rè¯­è¨€æ£’æ£’ç³–å›¾ä¸æ’åºå›¾ç»˜åˆ¶",
    "section": "å®ç”¨å‡½æ•°å°è£…",
    "text": "å®ç”¨å‡½æ•°å°è£…\nåˆ›å»ºä¸€ä¸ªå¿«é€Ÿç»˜åˆ¶æ£’æ£’ç³–å›¾çš„å‡½æ•°ï¼š\n\n#' å¿«é€Ÿç»˜åˆ¶æ£’æ£’ç³–å›¾\n#' @param data æ•°æ®æ¡†\n#' @param x æ•°å€¼å˜é‡åï¼ˆå­—ç¬¦ä¸²ï¼‰\n#' @param y åˆ†ç±»å˜é‡åï¼ˆå­—ç¬¦ä¸²ï¼‰\n#' @param color ç‚¹çš„é¢œè‰²\n#' @param show_value æ˜¯å¦æ˜¾ç¤ºæ•°å€¼æ ‡ç­¾\n#' @param title å›¾è¡¨æ ‡é¢˜\nplot_lollipop &lt;- function(data, x, y,\n                          color = \"#4f46e5\",\n                          show_value = TRUE,\n                          title = NULL) {\n    # æŒ‰æ•°å€¼æ’åº\n    data &lt;- data %&gt;%\n        mutate(!!sym(y) := fct_reorder(!!sym(y), !!sym(x)))\n\n    p &lt;- ggplot(data, aes(x = .data[[x]], y = .data[[y]])) +\n        geom_segment(\n            aes(\n                x = 0, xend = .data[[x]],\n                y = .data[[y]], yend = .data[[y]]\n            ),\n            color = \"#e5e7eb\",\n            linewidth = 1.2\n        ) +\n        geom_point(size = 5, color = color)\n\n    if (show_value) {\n        p &lt;- p + geom_text(\n            aes(label = round(.data[[x]], 1)),\n            hjust = -0.5,\n            size = 3.5,\n            color = \"#374151\"\n        ) +\n            scale_x_continuous(expand = expansion(mult = c(0, 0.15)))\n    }\n\n    p + labs(title = title, x = NULL, y = NULL) +\n        theme_minimal(base_size = 12) +\n        theme(\n            panel.grid.major.y = element_blank(),\n            panel.grid.minor = element_blank(),\n            plot.title = element_text(face = \"bold\")\n        )\n}\n\n# ä½¿ç”¨ç¤ºä¾‹\nplot_lollipop(gdp_data, \"gdp\", \"country\",\n    color = \"#10b981\",\n    title = \"ä½¿ç”¨å°è£…å‡½æ•°ç»˜åˆ¶æ£’æ£’ç³–å›¾\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æ£’æ£’ç³–å›¾ä¸æ’åºå›¾"
    ]
  },
  {
    "objectID": "2035-bindlollipop.html#æ€»ç»“",
    "href": "2035-bindlollipop.html#æ€»ç»“",
    "title": "Rè¯­è¨€æ£’æ£’ç³–å›¾ä¸æ’åºå›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå›¾è¡¨ç±»å‹\né€‚ç”¨åœºæ™¯\næ ¸å¿ƒä»£ç \n\n\n\n\næ£’æ£’ç³–å›¾\næ’åå±•ç¤ºã€æœ‰åºæ¯”è¾ƒ\ngeom_segment() + geom_point()\n\n\nå…‹åˆ©å¤«å…°ç‚¹å›¾\næç®€é£æ ¼ã€å‡å°‘è§†è§‰å™ªéŸ³\nä»… geom_point()\n\n\næ’åºæ¡å½¢å›¾\nå¼ºè°ƒæ•°å€¼å·®å¼‚é¢ç§¯\ngeom_col() + fct_reorder()\n\n\nåˆ†ç»„æ£’æ£’ç³–\nå¤šç»„æ—¶é—´ç‚¹å¯¹æ¯”\næ·»åŠ  color æ˜ å°„\n\n\n\n\nè®¾è®¡å»ºè®®\n\nä¿æŒæ’åºï¼šå§‹ç»ˆæŒ‰æ•°å€¼æ’åºä½¿å›¾è¡¨æ›´æ˜“è¯»\næ§åˆ¶æ•°é‡ï¼šè¶…è¿‡15ä¸ªåˆ†ç±»æ—¶è€ƒè™‘åªå±•ç¤º TOP N\nç®€åŒ–ç½‘æ ¼ï¼šç§»é™¤ y è½´ç½‘æ ¼çº¿ä½¿å›¾è¡¨æ›´æ¸…çˆ½\næ·»åŠ æ•°å€¼ï¼šåœ¨ç‚¹æ—æ·»åŠ å…·ä½“æ•°å€¼æå‡å¯è¯»æ€§\nåŒºåˆ†é¢œè‰²ï¼šä½¿ç”¨é¢œè‰²ç¼–ç åŒºåˆ†ç›¸å…³é‡è¦ç±»åˆ«\n\n\n\nç›¸å…³æ•™ç¨‹\n\næŸ±çŠ¶å›¾ä¸é¥¼å›¾ - ä¼ ç»Ÿåˆ†ç±»æ¯”è¾ƒå›¾è¡¨\næ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿ - è¿ç»­å˜é‡å¯è§†åŒ–\nå“‘é“ƒå›¾ä¸å¡åº¦å›¾ - é…å¯¹æ•°æ®å¯¹æ¯”",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "æ£’æ£’ç³–å›¾ä¸æ’åºå›¾"
    ]
  },
  {
    "objectID": "2037-bindwaffle.html",
    "href": "2037-bindwaffle.html",
    "title": "Rè¯­è¨€åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾ç»˜åˆ¶",
    "section": "",
    "text": "åå¤«é¥¼å›¾ï¼ˆWaffle Chartï¼‰å’Œæ ‘å½¢å›¾ï¼ˆTreemapï¼‰éƒ½æ˜¯ç”¨äºå±•ç¤ºéƒ¨åˆ†ä¸æ•´ä½“å…³ç³»çš„å¯è§†åŒ–æ–¹å¼ï¼Œæ˜¯é¥¼å›¾çš„ä¼˜ç§€æ›¿ä»£æ–¹æ¡ˆã€‚\n\n\nåå¤«é¥¼å›¾å°†æ•°æ®è¡¨ç¤ºä¸ºæ ¼å­ç½‘æ ¼ï¼Œæ¯ä¸ªæ ¼å­ä»£è¡¨ç›¸åŒçš„å•ä½é‡ï¼Œé€šè¿‡å¡«å……ä¸åŒé¢œè‰²çš„æ ¼å­æ•°é‡æ¥å±•ç¤ºæ¯”ä¾‹å…³ç³»ã€‚\nä¼˜ç‚¹ï¼š - æ¯”é¥¼å›¾æ›´æ˜“äºç²¾ç¡®æ¯”è¾ƒæ¯”ä¾‹ - äººçœ¼æ›´æ“…é•¿è®¡æ•°çŸ©å½¢è€Œéæ‰‡å½¢è§’åº¦ - è§†è§‰å¸å¼•åŠ›å¼ºï¼Œé€‚åˆä¿¡æ¯å›¾\n\n\n\næ ‘å½¢å›¾ä½¿ç”¨åµŒå¥—çŸ©å½¢æ¥è¡¨ç¤ºå±‚çº§ç»“æ„æ•°æ®ï¼ŒçŸ©å½¢é¢ç§¯è¡¨ç¤ºæ•°å€¼å¤§å°ã€‚\nä¼˜ç‚¹ï¼š - é«˜æ•ˆåˆ©ç”¨ç©ºé—´ - é€‚åˆå±•ç¤ºå±‚çº§ç»“æ„ - å¯åŒæ—¶æ˜¾ç¤ºå¤§é‡ç±»åˆ«",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾"
    ]
  },
  {
    "objectID": "2037-bindwaffle.html#ä»€ä¹ˆæ˜¯åå¤«é¥¼å›¾å’Œæ ‘å½¢å›¾",
    "href": "2037-bindwaffle.html#ä»€ä¹ˆæ˜¯åå¤«é¥¼å›¾å’Œæ ‘å½¢å›¾",
    "title": "Rè¯­è¨€åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾ç»˜åˆ¶",
    "section": "",
    "text": "åå¤«é¥¼å›¾ï¼ˆWaffle Chartï¼‰å’Œæ ‘å½¢å›¾ï¼ˆTreemapï¼‰éƒ½æ˜¯ç”¨äºå±•ç¤ºéƒ¨åˆ†ä¸æ•´ä½“å…³ç³»çš„å¯è§†åŒ–æ–¹å¼ï¼Œæ˜¯é¥¼å›¾çš„ä¼˜ç§€æ›¿ä»£æ–¹æ¡ˆã€‚\n\n\nåå¤«é¥¼å›¾å°†æ•°æ®è¡¨ç¤ºä¸ºæ ¼å­ç½‘æ ¼ï¼Œæ¯ä¸ªæ ¼å­ä»£è¡¨ç›¸åŒçš„å•ä½é‡ï¼Œé€šè¿‡å¡«å……ä¸åŒé¢œè‰²çš„æ ¼å­æ•°é‡æ¥å±•ç¤ºæ¯”ä¾‹å…³ç³»ã€‚\nä¼˜ç‚¹ï¼š - æ¯”é¥¼å›¾æ›´æ˜“äºç²¾ç¡®æ¯”è¾ƒæ¯”ä¾‹ - äººçœ¼æ›´æ“…é•¿è®¡æ•°çŸ©å½¢è€Œéæ‰‡å½¢è§’åº¦ - è§†è§‰å¸å¼•åŠ›å¼ºï¼Œé€‚åˆä¿¡æ¯å›¾\n\n\n\næ ‘å½¢å›¾ä½¿ç”¨åµŒå¥—çŸ©å½¢æ¥è¡¨ç¤ºå±‚çº§ç»“æ„æ•°æ®ï¼ŒçŸ©å½¢é¢ç§¯è¡¨ç¤ºæ•°å€¼å¤§å°ã€‚\nä¼˜ç‚¹ï¼š - é«˜æ•ˆåˆ©ç”¨ç©ºé—´ - é€‚åˆå±•ç¤ºå±‚çº§ç»“æ„ - å¯åŒæ—¶æ˜¾ç¤ºå¤§é‡ç±»åˆ«",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾"
    ]
  },
  {
    "objectID": "2037-bindwaffle.html#råŒ…å®‰è£…ä¸åŠ è½½",
    "href": "2037-bindwaffle.html#råŒ…å®‰è£…ä¸åŠ è½½",
    "title": "Rè¯­è¨€åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾ç»˜åˆ¶",
    "section": "RåŒ…å®‰è£…ä¸åŠ è½½",
    "text": "RåŒ…å®‰è£…ä¸åŠ è½½\n\n# æ ¸å¿ƒç»‘å›¾åŒ…\nlibrary(ggplot2)\nlibrary(dplyr)\n\n# æ ‘å½¢å›¾åŒ…\n# install.packages(\"treemapify\")\nlibrary(treemapify)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾"
    ]
  },
  {
    "objectID": "2037-bindwaffle.html#åå¤«é¥¼å›¾æ•°æ®å‡†å¤‡å‡½æ•°",
    "href": "2037-bindwaffle.html#åå¤«é¥¼å›¾æ•°æ®å‡†å¤‡å‡½æ•°",
    "title": "Rè¯­è¨€åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾ç»˜åˆ¶",
    "section": "åå¤«é¥¼å›¾æ•°æ®å‡†å¤‡å‡½æ•°",
    "text": "åå¤«é¥¼å›¾æ•°æ®å‡†å¤‡å‡½æ•°\nä½¿ç”¨çº¯ ggplot2 æ‰‹åŠ¨ç»˜åˆ¶åå¤«é¥¼å›¾ï¼š\n\n#' åˆ›å»ºåå¤«é¥¼å›¾æ•°æ®\n#' @param values å‘½åå‘é‡ï¼Œè¡¨ç¤ºå„ç±»åˆ«çš„æ•°å€¼\n#' @param rows ç½‘æ ¼è¡Œæ•°\ncreate_waffle_data &lt;- function(values, rows = 10) {\n    total &lt;- sum(values)\n    cols &lt;- ceiling(total / rows)\n\n    # åˆ›å»ºç½‘æ ¼åæ ‡\n    all_cells &lt;- expand.grid(\n        x = 1:cols,\n        y = 1:rows\n    )\n\n    # åªä¿ç•™éœ€è¦çš„æ ¼å­æ•°\n    cells &lt;- all_cells[1:total, ]\n\n    # åˆ†é…ç±»åˆ«\n    category &lt;- rep(names(values), times = values)\n    cells$category &lt;- factor(category, levels = names(values))\n\n    cells\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾"
    ]
  },
  {
    "objectID": "2037-bindwaffle.html#åŸºç¡€åå¤«é¥¼å›¾",
    "href": "2037-bindwaffle.html#åŸºç¡€åå¤«é¥¼å›¾",
    "title": "Rè¯­è¨€åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€åå¤«é¥¼å›¾",
    "text": "åŸºç¡€åå¤«é¥¼å›¾\n\n# å¸‚åœºä»½é¢æ•°æ®\nmarket_share &lt;- c(\n    \"å“ç‰ŒA\" = 35,\n    \"å“ç‰ŒB\" = 28,\n    \"å“ç‰ŒC\" = 22,\n    \"å…¶ä»–\" = 15\n)\n\n# åˆ›å»ºåå¤«é¥¼æ•°æ®\nwaffle_data &lt;- create_waffle_data(market_share, rows = 10)\n\n# ç»˜åˆ¶åå¤«é¥¼å›¾\nggplot(waffle_data, aes(x = x, y = y, fill = category)) +\n    geom_tile(color = \"white\", linewidth = 0.8) +\n    scale_fill_manual(\n        values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\", \"#94a3b8\")\n    ) +\n    coord_equal() +\n    labs(\n        title = \"å¸‚åœºä»½é¢åˆ†å¸ƒ\",\n        subtitle = \"æ¯ä¸ªæ ¼å­ä»£è¡¨ 1%\",\n        fill = NULL\n    ) +\n    theme_void() +\n    theme(\n        legend.position = \"bottom\",\n        plot.title = element_text(face = \"bold\", size = 14, hjust = 0.5),\n        plot.subtitle = element_text(hjust = 0.5, color = \"gray50\")\n    )\n\n\n\n\n\n\n\n\n\nä»£ç è§£æ\n\n\n\nå‚æ•°\nè¯´æ˜\n\n\n\n\nrows\nç½‘æ ¼è¡Œæ•°ï¼Œæ•°å€¼è¶Šå¤§æ ¼å­è¶Šå°\n\n\ngeom_tile()\nç»˜åˆ¶æ ¼å­\n\n\ncoord_equal()\nä¿æŒæ ¼å­ä¸ºæ­£æ–¹å½¢\n\n\ntheme_void()\nç§»é™¤èƒŒæ™¯å’Œåæ ‡è½´",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾"
    ]
  },
  {
    "objectID": "2037-bindwaffle.html#åœ†è§’åå¤«é¥¼å›¾",
    "href": "2037-bindwaffle.html#åœ†è§’åå¤«é¥¼å›¾",
    "title": "Rè¯­è¨€åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾ç»˜åˆ¶",
    "section": "åœ†è§’åå¤«é¥¼å›¾",
    "text": "åœ†è§’åå¤«é¥¼å›¾\nä½¿ç”¨ geom_point() åˆ¶ä½œåœ†å½¢æ ¼å­ï¼š\n\nggplot(waffle_data, aes(x = x, y = y, color = category)) +\n    geom_point(size = 8, shape = 15) + # shape=15 æ˜¯å®å¿ƒæ–¹å—\n    scale_color_manual(\n        values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\", \"#94a3b8\")\n    ) +\n    coord_equal() +\n    labs(\n        title = \"åœ†è§’åå¤«é¥¼å›¾\",\n        color = NULL\n    ) +\n    theme_void() +\n    theme(\n        legend.position = \"bottom\",\n        plot.title = element_text(face = \"bold\", hjust = 0.5)\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾"
    ]
  },
  {
    "objectID": "2037-bindwaffle.html#å¤šç»„åå¤«é¥¼å›¾å¯¹æ¯”",
    "href": "2037-bindwaffle.html#å¤šç»„åå¤«é¥¼å›¾å¯¹æ¯”",
    "title": "Rè¯­è¨€åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾ç»˜åˆ¶",
    "section": "å¤šç»„åå¤«é¥¼å›¾å¯¹æ¯”",
    "text": "å¤šç»„åå¤«é¥¼å›¾å¯¹æ¯”\n\n# åˆ›å»ºå¤šå¹´æ•°æ®\nwaffle_2022 &lt;- create_waffle_data(c(\"å“ç‰ŒA\" = 30, \"å“ç‰ŒB\" = 32, \"å“ç‰ŒC\" = 25, \"å…¶ä»–\" = 13), rows = 10)\nwaffle_2022$year &lt;- \"2022å¹´\"\n\nwaffle_2023 &lt;- create_waffle_data(c(\"å“ç‰ŒA\" = 35, \"å“ç‰ŒB\" = 28, \"å“ç‰ŒC\" = 22, \"å…¶ä»–\" = 15), rows = 10)\nwaffle_2023$year &lt;- \"2023å¹´\"\n\nmulti_year &lt;- rbind(waffle_2022, waffle_2023)\n\nggplot(multi_year, aes(x = x, y = y, fill = category)) +\n    geom_tile(color = \"white\", linewidth = 0.5) +\n    facet_wrap(~year, ncol = 2) +\n    scale_fill_manual(\n        values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\", \"#94a3b8\")\n    ) +\n    coord_equal() +\n    labs(\n        title = \"å¸‚åœºä»½é¢å˜åŒ–å¯¹æ¯”\",\n        fill = NULL\n    ) +\n    theme_void() +\n    theme(\n        legend.position = \"bottom\",\n        plot.title = element_text(face = \"bold\", hjust = 0.5, size = 14),\n        strip.text = element_text(face = \"bold\", size = 12)\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾"
    ]
  },
  {
    "objectID": "2037-bindwaffle.html#åŸºç¡€æ ‘å½¢å›¾",
    "href": "2037-bindwaffle.html#åŸºç¡€æ ‘å½¢å›¾",
    "title": "Rè¯­è¨€åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€æ ‘å½¢å›¾",
    "text": "åŸºç¡€æ ‘å½¢å›¾\n\nå‡†å¤‡å±‚çº§æ•°æ®\n\n# åˆ›å»ºå±‚çº§æ•°æ®\nsales_data &lt;- data.frame(\n    category = c(\n        \"ç”µå­äº§å“\", \"ç”µå­äº§å“\", \"ç”µå­äº§å“\",\n        \"æœè£…\", \"æœè£…\", \"æœè£…\",\n        \"é£Ÿå“\", \"é£Ÿå“\"\n    ),\n    subcategory = c(\n        \"æ‰‹æœº\", \"ç”µè„‘\", \"é…ä»¶\",\n        \"ç”·è£…\", \"å¥³è£…\", \"ç«¥è£…\",\n        \"é›¶é£Ÿ\", \"é¥®æ–™\"\n    ),\n    sales = c(450, 380, 120, 280, 350, 150, 200, 180)\n)\n\nsales_data\n\n  category subcategory sales\n1 ç”µå­äº§å“        æ‰‹æœº   450\n2 ç”µå­äº§å“        ç”µè„‘   380\n3 ç”µå­äº§å“        é…ä»¶   120\n4     æœè£…        ç”·è£…   280\n5     æœè£…        å¥³è£…   350\n6     æœè£…        ç«¥è£…   150\n7     é£Ÿå“        é›¶é£Ÿ   200\n8     é£Ÿå“        é¥®æ–™   180\n\n\n\n\nç»˜åˆ¶åŸºç¡€æ ‘å½¢å›¾\n\nggplot(sales_data, aes(area = sales, fill = category, label = subcategory)) +\n    geom_treemap() +\n    geom_treemap_text(\n        color = \"white\",\n        place = \"centre\",\n        size = 12\n    ) +\n    scale_fill_manual(\n        values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")\n    ) +\n    labs(\n        title = \"å„å“ç±»é”€å”®é¢å æ¯”\",\n        fill = \"å¤§ç±»\"\n    ) +\n    theme(\n        plot.title = element_text(face = \"bold\", size = 14),\n        legend.position = \"bottom\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾"
    ]
  },
  {
    "objectID": "2037-bindwaffle.html#åµŒå¥—æ ‘å½¢å›¾",
    "href": "2037-bindwaffle.html#åµŒå¥—æ ‘å½¢å›¾",
    "title": "Rè¯­è¨€åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾ç»˜åˆ¶",
    "section": "åµŒå¥—æ ‘å½¢å›¾",
    "text": "åµŒå¥—æ ‘å½¢å›¾\nå±•ç¤ºå±‚çº§å…³ç³»æ›´æ¸…æ™°ï¼š\n\nggplot(sales_data, aes(\n    area = sales,\n    fill = category,\n    label = subcategory,\n    subgroup = category\n)) +\n    # ç»˜åˆ¶å­ç±»çŸ©å½¢\n    geom_treemap() +\n    # å­ç±»æ ‡ç­¾\n    geom_treemap_text(\n        color = \"white\",\n        place = \"centre\",\n        size = 11,\n        reflow = TRUE\n    ) +\n    # å¤§ç±»è¾¹æ¡†\n    geom_treemap_subgroup_border(color = \"white\", size = 3) +\n    # å¤§ç±»æ ‡ç­¾\n    geom_treemap_subgroup_text(\n        place = \"centre\",\n        grow = TRUE,\n        alpha = 0.3,\n        color = \"white\",\n        fontface = \"bold\",\n        min.size = 0\n    ) +\n    scale_fill_manual(\n        values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")\n    ) +\n    labs(\n        title = \"é”€å”®é¢å±‚çº§ç»“æ„\",\n        subtitle = \"åµŒå¥—æ ‘å½¢å›¾å±•ç¤ºå¤§ç±»å’Œå­ç±»å…³ç³»\",\n        fill = \"å¤§ç±»\"\n    ) +\n    theme(\n        plot.title = element_text(face = \"bold\", size = 14),\n        legend.position = \"none\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾"
    ]
  },
  {
    "objectID": "2037-bindwaffle.html#æ·»åŠ æ•°å€¼æ ‡ç­¾çš„æ ‘å½¢å›¾",
    "href": "2037-bindwaffle.html#æ·»åŠ æ•°å€¼æ ‡ç­¾çš„æ ‘å½¢å›¾",
    "title": "Rè¯­è¨€åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾ç»˜åˆ¶",
    "section": "æ·»åŠ æ•°å€¼æ ‡ç­¾çš„æ ‘å½¢å›¾",
    "text": "æ·»åŠ æ•°å€¼æ ‡ç­¾çš„æ ‘å½¢å›¾\n\n# æ·»åŠ æ ‡ç­¾æ–‡æœ¬\nsales_data &lt;- sales_data %&gt;%\n    mutate(\n        label = paste0(subcategory, \"\\nÂ¥\", sales, \"ä¸‡\")\n    )\n\nggplot(sales_data, aes(\n    area = sales,\n    fill = category,\n    label = label\n)) +\n    geom_treemap() +\n    geom_treemap_text(\n        color = \"white\",\n        place = \"centre\",\n        size = 10,\n        grow = FALSE,\n        reflow = TRUE\n    ) +\n    scale_fill_manual(\n        values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")\n    ) +\n    labs(\n        title = \"å„å­å“ç±»é”€å”®é¢\",\n        fill = \"å¤§ç±»\"\n    ) +\n    theme(\n        plot.title = element_text(face = \"bold\", size = 14),\n        legend.position = \"bottom\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾"
    ]
  },
  {
    "objectID": "2037-bindwaffle.html#æ¸å˜è‰²æ ‘å½¢å›¾",
    "href": "2037-bindwaffle.html#æ¸å˜è‰²æ ‘å½¢å›¾",
    "title": "Rè¯­è¨€åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾ç»˜åˆ¶",
    "section": "æ¸å˜è‰²æ ‘å½¢å›¾",
    "text": "æ¸å˜è‰²æ ‘å½¢å›¾\nä½¿ç”¨è¿ç»­è‰²é˜¶è¡¨ç¤ºæ•°å€¼å¤§å°ï¼š\n\nggplot(sales_data, aes(\n    area = sales,\n    fill = sales,\n    label = subcategory\n)) +\n    geom_treemap() +\n    geom_treemap_text(\n        color = \"white\",\n        place = \"centre\",\n        size = 12,\n        fontface = \"bold\"\n    ) +\n    scale_fill_gradient(\n        low = \"#a5b4fc\",\n        high = \"#312e81\",\n        name = \"é”€å”®é¢(ä¸‡)\"\n    ) +\n    labs(\n        title = \"é”€å”®é¢çƒ­åŠ›æ ‘å½¢å›¾\",\n        subtitle = \"é¢œè‰²æ·±æµ…è¡¨ç¤ºé”€å”®é¢é«˜ä½\"\n    ) +\n    theme(\n        plot.title = element_text(face = \"bold\", size = 14),\n        legend.position = \"right\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾"
    ]
  },
  {
    "objectID": "2037-bindwaffle.html#åå¤«é¥¼å›¾-vs-é¥¼å›¾å¯¹æ¯”",
    "href": "2037-bindwaffle.html#åå¤«é¥¼å›¾-vs-é¥¼å›¾å¯¹æ¯”",
    "title": "Rè¯­è¨€åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾ç»˜åˆ¶",
    "section": "åå¤«é¥¼å›¾ vs é¥¼å›¾å¯¹æ¯”",
    "text": "åå¤«é¥¼å›¾ vs é¥¼å›¾å¯¹æ¯”\nè®©æˆ‘ä»¬å¯¹æ¯”ä¸¤ç§å±•ç¤ºæ–¹å¼ï¼š\n\nlibrary(patchwork)\n\n# å‡†å¤‡æ•°æ®\nicon_data &lt;- data.frame(\n    category = names(market_share),\n    value = as.numeric(market_share)\n)\n\n# åå¤«é¥¼å›¾\np1 &lt;- ggplot(waffle_data, aes(x = x, y = y, fill = category)) +\n    geom_tile(color = \"white\", linewidth = 0.5) +\n    scale_fill_manual(\n        values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\", \"#94a3b8\")\n    ) +\n    coord_equal() +\n    labs(title = \"åå¤«é¥¼å›¾\", fill = NULL) +\n    theme_void() +\n    theme(\n        legend.position = \"bottom\",\n        plot.title = element_text(face = \"bold\", hjust = 0.5)\n    )\n\n# é¥¼å›¾\np2 &lt;- ggplot(icon_data, aes(x = \"\", y = value, fill = category)) +\n    geom_col(width = 1) +\n    coord_polar(theta = \"y\") +\n    scale_fill_manual(\n        values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\", \"#94a3b8\")\n    ) +\n    labs(title = \"é¥¼å›¾\", fill = NULL) +\n    theme_void() +\n    theme(\n        legend.position = \"bottom\",\n        plot.title = element_text(face = \"bold\", hjust = 0.5)\n    )\n\np1 + p2 + plot_annotation(\n    title = \"åå¤«é¥¼å›¾ vs é¥¼å›¾\",\n    subtitle = \"åå¤«é¥¼å›¾æ›´å®¹æ˜“ç²¾ç¡®æ¯”è¾ƒæ¯”ä¾‹\",\n    theme = theme(\n        plot.title = element_text(face = \"bold\", size = 16),\n        plot.subtitle = element_text(color = \"gray50\")\n    )\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾"
    ]
  },
  {
    "objectID": "2037-bindwaffle.html#å®ç”¨å‡½æ•°å°è£…",
    "href": "2037-bindwaffle.html#å®ç”¨å‡½æ•°å°è£…",
    "title": "Rè¯­è¨€åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾ç»˜åˆ¶",
    "section": "å®ç”¨å‡½æ•°å°è£…",
    "text": "å®ç”¨å‡½æ•°å°è£…\n\nå¿«é€Ÿåå¤«é¥¼å›¾\n\n#' å¿«é€Ÿç»˜åˆ¶åå¤«é¥¼å›¾\n#' @param values å‘½åå‘é‡ï¼Œè¡¨ç¤ºå„ç±»åˆ«çš„æ•°å€¼\n#' @param rows è¡Œæ•°\n#' @param colors é¢œè‰²å‘é‡\n#' @param title æ ‡é¢˜\nquick_waffle &lt;- function(values, rows = 10, colors = NULL, title = NULL) {\n    if (is.null(colors)) {\n        colors &lt;- c(\n            \"#4f46e5\", \"#10b981\", \"#f59e0b\", \"#ef4444\",\n            \"#8b5cf6\", \"#06b6d4\", \"#84cc16\", \"#94a3b8\"\n        )\n    }\n\n    # åˆ›å»ºæ•°æ®\n    total &lt;- sum(values)\n    cols &lt;- ceiling(total / rows)\n    cells &lt;- expand.grid(x = 1:cols, y = 1:rows)[1:total, ]\n    cells$category &lt;- factor(rep(names(values), times = values), levels = names(values))\n\n    ggplot(cells, aes(x = x, y = y, fill = category)) +\n        geom_tile(color = \"white\", linewidth = 0.5) +\n        scale_fill_manual(values = colors[1:length(values)]) +\n        coord_equal() +\n        labs(title = title, fill = NULL) +\n        theme_void() +\n        theme(\n            legend.position = \"bottom\",\n            plot.title = element_text(face = \"bold\", hjust = 0.5)\n        )\n}\n\n# ä½¿ç”¨ç¤ºä¾‹\nquick_waffle(market_share, title = \"ä½¿ç”¨å°è£…å‡½æ•°\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾"
    ]
  },
  {
    "objectID": "2037-bindwaffle.html#æ€»ç»“",
    "href": "2037-bindwaffle.html#æ€»ç»“",
    "title": "Rè¯­è¨€åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå›¾è¡¨ç±»å‹\né€‚ç”¨åœºæ™¯\næ ¸å¿ƒå‡½æ•°\n\n\n\n\nåå¤«é¥¼å›¾\næ¯”ä¾‹å±•ç¤ºã€ä¿¡æ¯å›¾\ngeom_tile() + è‡ªå®šä¹‰æ•°æ®\n\n\næ ‘å½¢å›¾\nå±‚çº§ç»“æ„ã€ç©ºé—´é«˜æ•ˆ\ngeom_treemap() + treemapify\n\n\nåµŒå¥—æ ‘å½¢å›¾\nå¤šçº§å±‚æ¬¡ç»“æ„\ngeom_treemap_subgroup_*()\n\n\n\n\né€‰æ‹©å»ºè®®\n\n\n\néœ€æ±‚\næ¨èå›¾è¡¨\n\n\n\n\nç®€å•æ¯”ä¾‹æ¯”è¾ƒ\nåå¤«é¥¼å›¾\n\n\nå±‚çº§ç»“æ„å±•ç¤º\nåµŒå¥—æ ‘å½¢å›¾\n\n\nå¤§é‡ç±»åˆ«\næ ‘å½¢å›¾\n\n\nç²¾ç¡®æ•°å€¼å¯¹æ¯”\nåå¤«é¥¼å›¾ + æ•°å€¼æ ‡ç­¾\n\n\nè§†è§‰å†²å‡»åŠ›å¼º\nåœ†è§’åå¤«é¥¼å›¾\n\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\næŸ±çŠ¶å›¾ä¸é¥¼å›¾ - ä¼ ç»Ÿæ¯”ä¾‹å›¾è¡¨\nçƒ­å›¾ç»˜åˆ¶å®Œå…¨æŒ‡å— - çŸ©é˜µæ•°æ®å¯è§†åŒ–\næ¡‘åŸºå›¾ - æµé‡å¯è§†åŒ–",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾"
    ]
  },
  {
    "objectID": "2039-binddumbbell.html",
    "href": "2039-binddumbbell.html",
    "title": "Rè¯­è¨€å“‘é“ƒå›¾ä¸å¡åº¦å›¾ç»˜åˆ¶",
    "section": "",
    "text": "å“‘é“ƒå›¾ï¼ˆDumbbell Chartï¼‰å’Œå¡åº¦å›¾ï¼ˆSlope Chartï¼‰éƒ½æ˜¯å±•ç¤ºä¸¤ä¸ªæ—¶é—´ç‚¹æˆ–ä¸¤ä¸ªæ¡ä»¶ä¹‹é—´å˜åŒ–çš„å¯è§†åŒ–æ–¹å¼ï¼Œéå¸¸é€‚åˆé…å¯¹æ•°æ®å¯¹æ¯”ã€‚\n\n\nå“‘é“ƒå›¾ç”¨ä¸¤ä¸ªç‚¹è¡¨ç¤ºä¸¤ä¸ªæ•°å€¼ï¼Œä¸­é—´ç”¨çº¿è¿æ¥ï¼Œå½¢çŠ¶ç±»ä¼¼å“‘é“ƒã€‚é€‚åˆå±•ç¤ºèµ·ç‚¹å’Œç»ˆç‚¹çš„å·®å¼‚ã€‚\n\n\n\nå¡åº¦å›¾å°†ä¸¤ç»„æ•°å€¼åˆ†åˆ«æ”¾åœ¨å·¦å³ä¸¤åˆ—ï¼Œç”¨æ–œçº¿è¿æ¥ï¼Œçº¿çš„å€¾æ–œæ–¹å‘è¡¨ç¤ºå˜åŒ–è¶‹åŠ¿ã€‚\n\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\nå‰åå¯¹æ¯”\nå¹²é¢„å‰åã€æ”¿ç­–å‰å\n\n\næ—¶é—´æ¯”è¾ƒ\nå¹´åº¦å¯¹æ¯”ã€å­£åº¦å˜åŒ–\n\n\né…å¯¹æµ‹é‡\nåŒä¸€å¯¹è±¡çš„ä¸¤æ¬¡æµ‹é‡\n\n\nA/B æµ‹è¯•\nå®éªŒç»„ä¸å¯¹ç…§ç»„å¯¹æ¯”",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å“‘é“ƒå›¾ä¸å¡åº¦å›¾"
    ]
  },
  {
    "objectID": "2039-binddumbbell.html#ä»€ä¹ˆæ˜¯å“‘é“ƒå›¾å’Œå¡åº¦å›¾",
    "href": "2039-binddumbbell.html#ä»€ä¹ˆæ˜¯å“‘é“ƒå›¾å’Œå¡åº¦å›¾",
    "title": "Rè¯­è¨€å“‘é“ƒå›¾ä¸å¡åº¦å›¾ç»˜åˆ¶",
    "section": "",
    "text": "å“‘é“ƒå›¾ï¼ˆDumbbell Chartï¼‰å’Œå¡åº¦å›¾ï¼ˆSlope Chartï¼‰éƒ½æ˜¯å±•ç¤ºä¸¤ä¸ªæ—¶é—´ç‚¹æˆ–ä¸¤ä¸ªæ¡ä»¶ä¹‹é—´å˜åŒ–çš„å¯è§†åŒ–æ–¹å¼ï¼Œéå¸¸é€‚åˆé…å¯¹æ•°æ®å¯¹æ¯”ã€‚\n\n\nå“‘é“ƒå›¾ç”¨ä¸¤ä¸ªç‚¹è¡¨ç¤ºä¸¤ä¸ªæ•°å€¼ï¼Œä¸­é—´ç”¨çº¿è¿æ¥ï¼Œå½¢çŠ¶ç±»ä¼¼å“‘é“ƒã€‚é€‚åˆå±•ç¤ºèµ·ç‚¹å’Œç»ˆç‚¹çš„å·®å¼‚ã€‚\n\n\n\nå¡åº¦å›¾å°†ä¸¤ç»„æ•°å€¼åˆ†åˆ«æ”¾åœ¨å·¦å³ä¸¤åˆ—ï¼Œç”¨æ–œçº¿è¿æ¥ï¼Œçº¿çš„å€¾æ–œæ–¹å‘è¡¨ç¤ºå˜åŒ–è¶‹åŠ¿ã€‚\n\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\nå‰åå¯¹æ¯”\nå¹²é¢„å‰åã€æ”¿ç­–å‰å\n\n\næ—¶é—´æ¯”è¾ƒ\nå¹´åº¦å¯¹æ¯”ã€å­£åº¦å˜åŒ–\n\n\né…å¯¹æµ‹é‡\nåŒä¸€å¯¹è±¡çš„ä¸¤æ¬¡æµ‹é‡\n\n\nA/B æµ‹è¯•\nå®éªŒç»„ä¸å¯¹ç…§ç»„å¯¹æ¯”",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å“‘é“ƒå›¾ä¸å¡åº¦å›¾"
    ]
  },
  {
    "objectID": "2039-binddumbbell.html#råŒ…åŠ è½½",
    "href": "2039-binddumbbell.html#råŒ…åŠ è½½",
    "title": "Rè¯­è¨€å“‘é“ƒå›¾ä¸å¡åº¦å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(forcats)\nlibrary(scales)\n\nå¯é€‰ä½¿ç”¨ ggalt åŒ…è·å¾—æ›´å¤š geomï¼š\n\n# install.packages(\"ggalt\")\nlibrary(ggalt) # æä¾› geom_dumbbell()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å“‘é“ƒå›¾ä¸å¡åº¦å›¾"
    ]
  },
  {
    "objectID": "2039-binddumbbell.html#å‡†å¤‡ç¤ºä¾‹æ•°æ®",
    "href": "2039-binddumbbell.html#å‡†å¤‡ç¤ºä¾‹æ•°æ®",
    "title": "Rè¯­è¨€å“‘é“ƒå›¾ä¸å¡åº¦å›¾ç»˜åˆ¶",
    "section": "å‡†å¤‡ç¤ºä¾‹æ•°æ®",
    "text": "å‡†å¤‡ç¤ºä¾‹æ•°æ®\n\n# åˆ›å»ºå„åŸå¸‚æˆ¿ä»·å˜åŒ–æ•°æ®\nhousing_data &lt;- data.frame(\n    city = c(\n        \"åŒ—äº¬\", \"ä¸Šæµ·\", \"æ·±åœ³\", \"å¹¿å·\", \"æ­å·\",\n        \"å—äº¬\", \"æˆéƒ½\", \"æ­¦æ±‰\", \"è¥¿å®‰\", \"è‹å·\"\n    ),\n    price_2020 = c(62, 58, 55, 32, 35, 28, 18, 20, 15, 25),\n    price_2023 = c(68, 65, 48, 38, 42, 32, 25, 23, 22, 30)\n)\n\n# è®¡ç®—å˜åŒ–é‡\nhousing_data &lt;- housing_data %&gt;%\n    mutate(\n        change = price_2023 - price_2020,\n        change_pct = round((price_2023 - price_2020) / price_2020 * 100, 1),\n        direction = ifelse(change &gt; 0, \"ä¸Šæ¶¨\", \"ä¸‹è·Œ\"),\n        city = fct_reorder(city, price_2023) # æŒ‰2023å¹´ä»·æ ¼æ’åº\n    )\n\nhousing_data\n\n   city price_2020 price_2023 change change_pct direction\n1  åŒ—äº¬         62         68      6        9.7      ä¸Šæ¶¨\n2  ä¸Šæµ·         58         65      7       12.1      ä¸Šæ¶¨\n3  æ·±åœ³         55         48     -7      -12.7      ä¸‹è·Œ\n4  å¹¿å·         32         38      6       18.8      ä¸Šæ¶¨\n5  æ­å·         35         42      7       20.0      ä¸Šæ¶¨\n6  å—äº¬         28         32      4       14.3      ä¸Šæ¶¨\n7  æˆéƒ½         18         25      7       38.9      ä¸Šæ¶¨\n8  æ­¦æ±‰         20         23      3       15.0      ä¸Šæ¶¨\n9  è¥¿å®‰         15         22      7       46.7      ä¸Šæ¶¨\n10 è‹å·         25         30      5       20.0      ä¸Šæ¶¨",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å“‘é“ƒå›¾ä¸å¡åº¦å›¾"
    ]
  },
  {
    "objectID": "2039-binddumbbell.html#åŸºç¡€å“‘é“ƒå›¾",
    "href": "2039-binddumbbell.html#åŸºç¡€å“‘é“ƒå›¾",
    "title": "Rè¯­è¨€å“‘é“ƒå›¾ä¸å¡åº¦å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€å“‘é“ƒå›¾",
    "text": "åŸºç¡€å“‘é“ƒå›¾\nä½¿ç”¨ geom_segment() + geom_point() æ„å»ºå“‘é“ƒå›¾ï¼š\n\nggplot(housing_data) +\n    # è¿æ¥çº¿\n    geom_segment(\n        aes(\n            x = price_2020, xend = price_2023,\n            y = city, yend = city\n        ),\n        color = \"#94a3b8\",\n        linewidth = 1.5\n    ) +\n    # 2020å¹´çš„ç‚¹\n    geom_point(\n        aes(x = price_2020, y = city),\n        size = 4,\n        color = \"#94a3b8\"\n    ) +\n    # 2023å¹´çš„ç‚¹\n    geom_point(\n        aes(x = price_2023, y = city),\n        size = 4,\n        color = \"#4f46e5\"\n    ) +\n    labs(\n        title = \"ä¸»è¦åŸå¸‚æˆ¿ä»·å˜åŒ–ï¼ˆ2020 vs 2023ï¼‰\",\n        subtitle = \"å•ä½ï¼šä¸‡å…ƒ/å¹³ç±³\",\n        x = \"æˆ¿ä»·ï¼ˆä¸‡å…ƒ/å¹³ç±³ï¼‰\",\n        y = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        panel.grid.major.y = element_blank(),\n        plot.title = element_text(face = \"bold\", size = 14)\n    )\n\n\n\n\n\n\n\n\n\næ·»åŠ å›¾ä¾‹è¯´æ˜\n\nggplot(housing_data) +\n    geom_segment(\n        aes(\n            x = price_2020, xend = price_2023,\n            y = city, yend = city\n        ),\n        color = \"#e2e8f0\",\n        linewidth = 2\n    ) +\n    geom_point(\n        aes(x = price_2020, y = city, color = \"2020å¹´\"),\n        size = 5\n    ) +\n    geom_point(\n        aes(x = price_2023, y = city, color = \"2023å¹´\"),\n        size = 5\n    ) +\n    scale_color_manual(\n        values = c(\"2020å¹´\" = \"#94a3b8\", \"2023å¹´\" = \"#4f46e5\")\n    ) +\n    labs(\n        title = \"ä¸»è¦åŸå¸‚æˆ¿ä»·å˜åŒ–\",\n        subtitle = \"ä¸‡å…ƒ/å¹³ç±³\",\n        x = NULL,\n        y = NULL,\n        color = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        panel.grid.major.y = element_blank(),\n        legend.position = \"top\",\n        plot.title = element_text(face = \"bold\")\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å“‘é“ƒå›¾ä¸å¡åº¦å›¾"
    ]
  },
  {
    "objectID": "2039-binddumbbell.html#ç¾åŒ–å“‘é“ƒå›¾",
    "href": "2039-binddumbbell.html#ç¾åŒ–å“‘é“ƒå›¾",
    "title": "Rè¯­è¨€å“‘é“ƒå›¾ä¸å¡åº¦å›¾ç»˜åˆ¶",
    "section": "ç¾åŒ–å“‘é“ƒå›¾",
    "text": "ç¾åŒ–å“‘é“ƒå›¾\n\næŒ‰å˜åŒ–æ–¹å‘ç€è‰²\n\nggplot(housing_data) +\n    geom_segment(\n        aes(\n            x = price_2020, xend = price_2023,\n            y = city, yend = city,\n            color = direction\n        ),\n        linewidth = 2.5\n    ) +\n    geom_point(\n        aes(x = price_2020, y = city),\n        size = 5,\n        color = \"#64748b\"\n    ) +\n    geom_point(\n        aes(x = price_2023, y = city, color = direction),\n        size = 5\n    ) +\n    # æ·»åŠ å˜åŒ–ç™¾åˆ†æ¯”æ ‡ç­¾\n    geom_text(\n        aes(\n            x = price_2023 + 3, y = city,\n            label = paste0(ifelse(change &gt; 0, \"+\", \"\"), change_pct, \"%\"),\n            color = direction\n        ),\n        size = 3.5,\n        fontface = \"bold\",\n        hjust = 0\n    ) +\n    scale_color_manual(\n        values = c(\"ä¸Šæ¶¨\" = \"#10b981\", \"ä¸‹è·Œ\" = \"#ef4444\")\n    ) +\n    scale_x_continuous(limits = c(0, 85)) +\n    labs(\n        title = \"æˆ¿ä»·æ¶¨è·Œä¸€è§ˆ\",\n        subtitle = \"2020 â†’ 2023\",\n        x = \"æˆ¿ä»·ï¼ˆä¸‡å…ƒ/å¹³ç±³ï¼‰\",\n        y = NULL,\n        color = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        panel.grid.major.y = element_blank(),\n        legend.position = \"top\",\n        plot.title = element_text(face = \"bold\", size = 14)\n    )\n\n\n\n\n\n\n\n\n\n\næ·»åŠ æ•°å€¼æ ‡ç­¾\n\nggplot(housing_data) +\n    geom_segment(\n        aes(\n            x = price_2020, xend = price_2023,\n            y = city, yend = city\n        ),\n        color = \"#cbd5e1\",\n        linewidth = 2\n    ) +\n    geom_point(aes(x = price_2020, y = city), size = 5, color = \"#64748b\") +\n    geom_point(aes(x = price_2023, y = city, color = direction), size = 5) +\n    # èµ·ç‚¹æ•°å€¼\n    geom_text(\n        aes(x = price_2020, y = city, label = price_2020),\n        vjust = -1.5,\n        size = 3,\n        color = \"#64748b\"\n    ) +\n    # ç»ˆç‚¹æ•°å€¼\n    geom_text(\n        aes(x = price_2023, y = city, label = price_2023, color = direction),\n        vjust = -1.5,\n        size = 3,\n        fontface = \"bold\"\n    ) +\n    scale_color_manual(\n        values = c(\"ä¸Šæ¶¨\" = \"#10b981\", \"ä¸‹è·Œ\" = \"#ef4444\")\n    ) +\n    labs(\n        title = \"åŸå¸‚æˆ¿ä»·å˜åŒ–è¯¦æƒ…\",\n        x = NULL,\n        y = NULL,\n        color = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        panel.grid = element_blank(),\n        legend.position = \"none\",\n        plot.title = element_text(face = \"bold\")\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å“‘é“ƒå›¾ä¸å¡åº¦å›¾"
    ]
  },
  {
    "objectID": "2039-binddumbbell.html#å¡åº¦å›¾-slope-chart",
    "href": "2039-binddumbbell.html#å¡åº¦å›¾-slope-chart",
    "title": "Rè¯­è¨€å“‘é“ƒå›¾ä¸å¡åº¦å›¾ç»˜åˆ¶",
    "section": "å¡åº¦å›¾ (Slope Chart)",
    "text": "å¡åº¦å›¾ (Slope Chart)\nå¡åº¦å›¾å°†ä¸¤ä¸ªæ—¶é—´ç‚¹åˆ†æˆå·¦å³ä¸¤åˆ—ï¼š\n\n# è½¬æ¢ä¸ºé•¿æ ¼å¼\nlibrary(tidyr)\n\nslope_data &lt;- housing_data %&gt;%\n    select(city, price_2020, price_2023, direction) %&gt;%\n    pivot_longer(\n        cols = c(price_2020, price_2023),\n        names_to = \"year\",\n        values_to = \"price\"\n    ) %&gt;%\n    mutate(\n        year = ifelse(year == \"price_2020\", \"2020\", \"2023\"),\n        year_num = ifelse(year == \"2020\", 1, 2)\n    )\n\nggplot(slope_data, aes(x = year_num, y = price, group = city)) +\n    # è¿æ¥çº¿\n    geom_line(aes(color = direction), linewidth = 1.2, alpha = 0.7) +\n    # ç«¯ç‚¹\n    geom_point(aes(color = direction), size = 4) +\n    # å·¦ä¾§åŸå¸‚æ ‡ç­¾\n    geom_text(\n        data = slope_data %&gt;% filter(year == \"2020\"),\n        aes(label = paste(city, price)),\n        hjust = 1.1,\n        size = 3.5,\n        color = \"#374151\"\n    ) +\n    # å³ä¾§ä»·æ ¼æ ‡ç­¾\n    geom_text(\n        data = slope_data %&gt;% filter(year == \"2023\"),\n        aes(label = price, color = direction),\n        hjust = -0.3,\n        size = 3.5,\n        fontface = \"bold\"\n    ) +\n    scale_color_manual(\n        values = c(\"ä¸Šæ¶¨\" = \"#10b981\", \"ä¸‹è·Œ\" = \"#ef4444\")\n    ) +\n    scale_x_continuous(\n        breaks = c(1, 2),\n        labels = c(\"2020å¹´\", \"2023å¹´\"),\n        limits = c(0.3, 2.5)\n    ) +\n    labs(\n        title = \"åŸå¸‚æˆ¿ä»·å˜åŒ–è¶‹åŠ¿\",\n        subtitle = \"å¡åº¦å›¾å±•ç¤ºå˜åŒ–æ–¹å‘\",\n        x = NULL,\n        y = \"æˆ¿ä»·ï¼ˆä¸‡å…ƒ/å¹³ç±³ï¼‰\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        panel.grid.major.x = element_blank(),\n        panel.grid.minor = element_blank(),\n        legend.position = \"none\",\n        plot.title = element_text(face = \"bold\", size = 14),\n        axis.text.x = element_text(face = \"bold\", size = 12)\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å“‘é“ƒå›¾ä¸å¡åº¦å›¾"
    ]
  },
  {
    "objectID": "2039-binddumbbell.html#çªå‡ºç‰¹å®šåŸå¸‚",
    "href": "2039-binddumbbell.html#çªå‡ºç‰¹å®šåŸå¸‚",
    "title": "Rè¯­è¨€å“‘é“ƒå›¾ä¸å¡åº¦å›¾ç»˜åˆ¶",
    "section": "çªå‡ºç‰¹å®šåŸå¸‚",
    "text": "çªå‡ºç‰¹å®šåŸå¸‚\n\n# æ ‡è®°é‡ç‚¹åŸå¸‚\nhighlight_cities &lt;- c(\"æ·±åœ³\", \"æ­å·\", \"è¥¿å®‰\")\n\nslope_data &lt;- slope_data %&gt;%\n    mutate(\n        highlight = city %in% highlight_cities,\n        alpha_val = ifelse(highlight, 1, 0.3)\n    )\n\nggplot(slope_data, aes(x = year_num, y = price, group = city)) +\n    # èƒŒæ™¯çº¿ï¼ˆéé‡ç‚¹åŸå¸‚ï¼‰\n    geom_line(\n        data = slope_data %&gt;% filter(!highlight),\n        color = \"#cbd5e1\",\n        linewidth = 0.8,\n        alpha = 0.5\n    ) +\n    # é‡ç‚¹åŸå¸‚çº¿\n    geom_line(\n        data = slope_data %&gt;% filter(highlight),\n        aes(color = city),\n        linewidth = 1.5\n    ) +\n    geom_point(\n        data = slope_data %&gt;% filter(highlight),\n        aes(color = city),\n        size = 4\n    ) +\n    # é‡ç‚¹åŸå¸‚æ ‡ç­¾\n    geom_text(\n        data = slope_data %&gt;% filter(year == \"2023\" & highlight),\n        aes(label = paste(city, price), color = city),\n        hjust = -0.1,\n        size = 3.5,\n        fontface = \"bold\"\n    ) +\n    scale_color_manual(\n        values = c(\"æ·±åœ³\" = \"#ef4444\", \"æ­å·\" = \"#10b981\", \"è¥¿å®‰\" = \"#4f46e5\")\n    ) +\n    scale_x_continuous(\n        breaks = c(1, 2),\n        labels = c(\"2020å¹´\", \"2023å¹´\"),\n        limits = c(0.8, 2.6)\n    ) +\n    labs(\n        title = \"é‡ç‚¹åŸå¸‚æˆ¿ä»·èµ°åŠ¿\",\n        subtitle = \"æ·±åœ³ä¸‹è·Œ vs æ­å·ã€è¥¿å®‰ä¸Šæ¶¨\",\n        x = NULL,\n        y = \"æˆ¿ä»·ï¼ˆä¸‡å…ƒ/å¹³ç±³ï¼‰\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        panel.grid.major.x = element_blank(),\n        legend.position = \"none\",\n        plot.title = element_text(face = \"bold\", size = 14)\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å“‘é“ƒå›¾ä¸å¡åº¦å›¾"
    ]
  },
  {
    "objectID": "2039-binddumbbell.html#å¤šæœŸå¡åº¦å›¾",
    "href": "2039-binddumbbell.html#å¤šæœŸå¡åº¦å›¾",
    "title": "Rè¯­è¨€å“‘é“ƒå›¾ä¸å¡åº¦å›¾ç»˜åˆ¶",
    "section": "å¤šæœŸå¡åº¦å›¾",
    "text": "å¤šæœŸå¡åº¦å›¾\næ¯”è¾ƒè¶…è¿‡ä¸¤ä¸ªæ—¶é—´ç‚¹ï¼š\n\n# åˆ›å»ºå¤šæœŸæ•°æ®\nmulti_period &lt;- data.frame(\n    city = rep(c(\"åŒ—äº¬\", \"ä¸Šæµ·\", \"æ·±åœ³\", \"æ­å·\"), each = 4),\n    year = rep(c(2020, 2021, 2022, 2023), 4),\n    price = c(\n        62, 65, 66, 68, # åŒ—äº¬\n        58, 62, 64, 65, # ä¸Šæµ·\n        55, 58, 52, 48, # æ·±åœ³\n        35, 38, 40, 42 # æ­å·\n    )\n)\n\nggplot(multi_period, aes(x = year, y = price, color = city, group = city)) +\n    geom_line(linewidth = 1.2) +\n    geom_point(size = 3) +\n    geom_text(\n        data = multi_period %&gt;% filter(year == 2023),\n        aes(label = city),\n        hjust = -0.2,\n        fontface = \"bold\",\n        size = 3.5\n    ) +\n    scale_color_manual(\n        values = c(\n            \"åŒ—äº¬\" = \"#4f46e5\", \"ä¸Šæµ·\" = \"#8b5cf6\",\n            \"æ·±åœ³\" = \"#ef4444\", \"æ­å·\" = \"#10b981\"\n        )\n    ) +\n    scale_x_continuous(\n        breaks = 2020:2023,\n        limits = c(2020, 2024)\n    ) +\n    labs(\n        title = \"ä¸€çº¿åŸå¸‚æˆ¿ä»·è¶‹åŠ¿ï¼ˆ2020-2023ï¼‰\",\n        x = NULL,\n        y = \"æˆ¿ä»·ï¼ˆä¸‡å…ƒ/å¹³ç±³ï¼‰\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        legend.position = \"none\",\n        plot.title = element_text(face = \"bold\")\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å“‘é“ƒå›¾ä¸å¡åº¦å›¾"
    ]
  },
  {
    "objectID": "2039-binddumbbell.html#ä½¿ç”¨-ggalt-åŒ…çš„-geom_dumbbell",
    "href": "2039-binddumbbell.html#ä½¿ç”¨-ggalt-åŒ…çš„-geom_dumbbell",
    "title": "Rè¯­è¨€å“‘é“ƒå›¾ä¸å¡åº¦å›¾ç»˜åˆ¶",
    "section": "ä½¿ç”¨ ggalt åŒ…çš„ geom_dumbbell",
    "text": "ä½¿ç”¨ ggalt åŒ…çš„ geom_dumbbell\nggalt åŒ…æä¾›äº†ä¸“é—¨çš„ geom_dumbbell() å‡½æ•°ï¼š\n\n# ç¡®ä¿å®‰è£…äº† ggalt\nif (requireNamespace(\"ggalt\", quietly = TRUE)) {\n    library(ggalt)\n\n    ggplot(housing_data, aes(x = price_2020, xend = price_2023, y = city)) +\n        geom_dumbbell(\n            size = 3,\n            color = \"#e5e7eb\",\n            colour_x = \"#94a3b8\",\n            colour_xend = \"#4f46e5\",\n            size_x = 4,\n            size_xend = 4\n        ) +\n        labs(\n            title = \"ä½¿ç”¨ geom_dumbbell()\",\n            subtitle = \"æ¥è‡ª ggalt åŒ…\",\n            x = \"æˆ¿ä»·ï¼ˆä¸‡å…ƒ/å¹³ç±³ï¼‰\",\n            y = NULL\n        ) +\n        theme_minimal(base_size = 12) +\n        theme(\n            panel.grid.major.y = element_blank(),\n            plot.title = element_text(face = \"bold\")\n        )\n} else {\n    message(\"è¯·å®‰è£… ggalt åŒ…: install.packages('ggalt')\")\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å“‘é“ƒå›¾ä¸å¡åº¦å›¾"
    ]
  },
  {
    "objectID": "2039-binddumbbell.html#å®ç”¨å‡½æ•°å°è£…",
    "href": "2039-binddumbbell.html#å®ç”¨å‡½æ•°å°è£…",
    "title": "Rè¯­è¨€å“‘é“ƒå›¾ä¸å¡åº¦å›¾ç»˜åˆ¶",
    "section": "å®ç”¨å‡½æ•°å°è£…",
    "text": "å®ç”¨å‡½æ•°å°è£…\n\n#' å¿«é€Ÿç»˜åˆ¶å“‘é“ƒå›¾\n#' @param data æ•°æ®æ¡†\n#' @param y_var åˆ†ç±»å˜é‡\n#' @param start_var èµ·ç‚¹æ•°å€¼å˜é‡\n#' @param end_var ç»ˆç‚¹æ•°å€¼å˜é‡\n#' @param start_label èµ·ç‚¹æ ‡ç­¾\n#' @param end_label ç»ˆç‚¹æ ‡ç­¾\nplot_dumbbell &lt;- function(data, y_var, start_var, end_var,\n                          start_label = \"èµ·ç‚¹\", end_label = \"ç»ˆç‚¹\",\n                          start_color = \"#94a3b8\", end_color = \"#4f46e5\",\n                          title = NULL) {\n    data &lt;- data %&gt;%\n        mutate(!!sym(y_var) := fct_reorder(.data[[y_var]], .data[[end_var]]))\n\n    ggplot(data) +\n        geom_segment(\n            aes(\n                x = .data[[start_var]], xend = .data[[end_var]],\n                y = .data[[y_var]], yend = .data[[y_var]]\n            ),\n            color = \"#e5e7eb\",\n            linewidth = 2\n        ) +\n        geom_point(\n            aes(\n                x = .data[[start_var]], y = .data[[y_var]],\n                color = start_label\n            ),\n            size = 5\n        ) +\n        geom_point(\n            aes(\n                x = .data[[end_var]], y = .data[[y_var]],\n                color = end_label\n            ),\n            size = 5\n        ) +\n        scale_color_manual(\n            values = setNames(c(start_color, end_color), c(start_label, end_label))\n        ) +\n        labs(title = title, x = NULL, y = NULL, color = NULL) +\n        theme_minimal(base_size = 12) +\n        theme(\n            panel.grid.major.y = element_blank(),\n            legend.position = \"top\",\n            plot.title = element_text(face = \"bold\")\n        )\n}\n\n# ä½¿ç”¨ç¤ºä¾‹\nplot_dumbbell(\n    housing_data, \"city\", \"price_2020\", \"price_2023\",\n    start_label = \"2020\", end_label = \"2023\",\n    title = \"ä½¿ç”¨å°è£…å‡½æ•°ç»˜åˆ¶å“‘é“ƒå›¾\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å“‘é“ƒå›¾ä¸å¡åº¦å›¾"
    ]
  },
  {
    "objectID": "2039-binddumbbell.html#æ€»ç»“",
    "href": "2039-binddumbbell.html#æ€»ç»“",
    "title": "Rè¯­è¨€å“‘é“ƒå›¾ä¸å¡åº¦å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå›¾è¡¨ç±»å‹\nç‰¹ç‚¹\né€‚ç”¨åœºæ™¯\n\n\n\n\nå“‘é“ƒå›¾\næ°´å¹³å±•ç¤ºä¸¤ç‚¹å·®å¼‚\næ’åæ¯”è¾ƒã€å˜åŒ–å¹…åº¦\n\n\nå¡åº¦å›¾\næ–œçº¿å±•ç¤ºè¶‹åŠ¿æ–¹å‘\nè¶‹åŠ¿åˆ¤æ–­ã€ä¸Šå‡/ä¸‹é™\n\n\nå¤šæœŸå¡åº¦å›¾\nè¿ç»­å¤šç‚¹è¶‹åŠ¿\næ—¶é—´åºåˆ—å¯¹æ¯”\n\n\n\n\næ ¸å¿ƒæŠ€å·§\n\næ’åºï¼šæŒ‰ç»ˆç‚¹å€¼æ’åºä¾¿äºæ¯”è¾ƒ\né¢œè‰²ç¼–ç ï¼šç”¨é¢œè‰²åŒºåˆ†ä¸Šå‡/ä¸‹é™\næ ‡ç­¾ï¼šæ·»åŠ æ•°å€¼æ ‡ç­¾å¢å¼ºå¯è¯»æ€§\næ·¡åŒ–èƒŒæ™¯ï¼šçªå‡ºé‡ç‚¹æ•°æ®\n\n\n\né€‰æ‹©å»ºè®®\n\n\n\néœ€æ±‚\næ¨èå›¾è¡¨\n\n\n\n\nå¼ºè°ƒå˜åŒ–å¤§å°\nå“‘é“ƒå›¾\n\n\nå¼ºè°ƒå˜åŒ–æ–¹å‘\nå¡åº¦å›¾\n\n\nå¤šä¸ªæ—¶é—´ç‚¹\nå¤šæœŸå¡åº¦å›¾/æŠ˜çº¿å›¾\n\n\nå¤§é‡ç±»åˆ«\nå“‘é“ƒå›¾ï¼ˆå¯æ’åºï¼‰\n\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\næ£’æ£’ç³–å›¾ä¸æ’åºå›¾ - ç±»ä¼¼çš„ç‚¹çº¿ç»“æ„\nå‘æ•£å‹å›¾è¡¨ - æ­£è´Ÿå¯¹æ¯”\næŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ— - æ—¶é—´è¶‹åŠ¿",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å“‘é“ƒå›¾ä¸å¡åº¦å›¾"
    ]
  },
  {
    "objectID": "2041-bindjitter.html",
    "href": "2041-bindjitter.html",
    "title": "Rè¯­è¨€æŠ–åŠ¨å›¾ä¸èœ‚ç¾¤å›¾ç»˜åˆ¶",
    "section": "",
    "text": "æŠ–åŠ¨å›¾ï¼ˆJitter Plotï¼‰å’Œèœ‚ç¾¤å›¾ï¼ˆBeeswarm Plotï¼‰æ˜¯å±•ç¤ºç¦»æ•£åˆ†ç±»å˜é‡ä¸è¿ç»­å˜é‡å…³ç³»çš„å¯è§†åŒ–æ–¹å¼ï¼Œé€šè¿‡éšæœºæˆ–è§„åˆ™åç§»é¿å…æ•°æ®ç‚¹é‡å ã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\nå°æ ·æœ¬å±•ç¤º\næ¯ç»„10-100ä¸ªæ•°æ®ç‚¹\n\n\næŸ¥çœ‹åŸå§‹æ•°æ®\næ­é…ç®±çº¿å›¾ä½¿ç”¨\n\n\nç»„é—´æ¯”è¾ƒ\nå„ç»„æ•°æ®åˆ†å¸ƒå·®å¼‚\n\n\nå‘ç°æ¨¡å¼\nè¯†åˆ«èšç±»ã€ç¦»ç¾¤å€¼",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "æŠ–åŠ¨å›¾ä¸èœ‚ç¾¤å›¾"
    ]
  },
  {
    "objectID": "2041-bindjitter.html#ä»€ä¹ˆæ˜¯æŠ–åŠ¨å›¾å’Œèœ‚ç¾¤å›¾",
    "href": "2041-bindjitter.html#ä»€ä¹ˆæ˜¯æŠ–åŠ¨å›¾å’Œèœ‚ç¾¤å›¾",
    "title": "Rè¯­è¨€æŠ–åŠ¨å›¾ä¸èœ‚ç¾¤å›¾ç»˜åˆ¶",
    "section": "",
    "text": "æŠ–åŠ¨å›¾ï¼ˆJitter Plotï¼‰å’Œèœ‚ç¾¤å›¾ï¼ˆBeeswarm Plotï¼‰æ˜¯å±•ç¤ºç¦»æ•£åˆ†ç±»å˜é‡ä¸è¿ç»­å˜é‡å…³ç³»çš„å¯è§†åŒ–æ–¹å¼ï¼Œé€šè¿‡éšæœºæˆ–è§„åˆ™åç§»é¿å…æ•°æ®ç‚¹é‡å ã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\nå°æ ·æœ¬å±•ç¤º\næ¯ç»„10-100ä¸ªæ•°æ®ç‚¹\n\n\næŸ¥çœ‹åŸå§‹æ•°æ®\næ­é…ç®±çº¿å›¾ä½¿ç”¨\n\n\nç»„é—´æ¯”è¾ƒ\nå„ç»„æ•°æ®åˆ†å¸ƒå·®å¼‚\n\n\nå‘ç°æ¨¡å¼\nè¯†åˆ«èšç±»ã€ç¦»ç¾¤å€¼",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "æŠ–åŠ¨å›¾ä¸èœ‚ç¾¤å›¾"
    ]
  },
  {
    "objectID": "2041-bindjitter.html#råŒ…åŠ è½½",
    "href": "2041-bindjitter.html#råŒ…åŠ è½½",
    "title": "Rè¯­è¨€æŠ–åŠ¨å›¾ä¸èœ‚ç¾¤å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\n\nlibrary(ggplot2)\nlibrary(dplyr)\n\nå¯é€‰èœ‚ç¾¤å›¾åŒ…ï¼š\n\n# install.packages(\"ggbeeswarm\")\nlibrary(ggbeeswarm)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "æŠ–åŠ¨å›¾ä¸èœ‚ç¾¤å›¾"
    ]
  },
  {
    "objectID": "2041-bindjitter.html#åŸºç¡€æŠ–åŠ¨å›¾",
    "href": "2041-bindjitter.html#åŸºç¡€æŠ–åŠ¨å›¾",
    "title": "Rè¯­è¨€æŠ–åŠ¨å›¾ä¸èœ‚ç¾¤å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€æŠ–åŠ¨å›¾",
    "text": "åŸºç¡€æŠ–åŠ¨å›¾\n\n# ä½¿ç”¨å†…ç½®æ•°æ®\ndata(iris)\n\nggplot(iris, aes(x = Species, y = Sepal.Length)) +\n    geom_jitter(width = 0.2, height = 0, alpha = 0.6, color = \"#4f46e5\") +\n    labs(\n        title = \"é¸¢å°¾èŠ±è¼ç‰‡é•¿åº¦åˆ†å¸ƒ\",\n        subtitle = \"æŠ–åŠ¨å›¾å±•ç¤ºå„ç‰©ç§åˆ†å¸ƒ\",\n        x = \"ç‰©ç§\",\n        y = \"è¼ç‰‡é•¿åº¦ (cm)\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(plot.title = element_text(face = \"bold\"))\n\n\n\n\n\n\n\n\n\nå‚æ•°è§£æ\n\n\n\nå‚æ•°\nè¯´æ˜\n\n\n\n\nwidth\næ°´å¹³æŠ–åŠ¨å¹…åº¦ï¼ˆ0-0.5ï¼‰\n\n\nheight\nå‚ç›´æŠ–åŠ¨å¹…åº¦ï¼ˆé€šå¸¸è®¾ä¸º0ï¼‰\n\n\nalpha\né€æ˜åº¦ï¼ˆå¤„ç†é‡å ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "æŠ–åŠ¨å›¾ä¸èœ‚ç¾¤å›¾"
    ]
  },
  {
    "objectID": "2041-bindjitter.html#æŠ–åŠ¨å›¾-ç®±çº¿å›¾",
    "href": "2041-bindjitter.html#æŠ–åŠ¨å›¾-ç®±çº¿å›¾",
    "title": "Rè¯­è¨€æŠ–åŠ¨å›¾ä¸èœ‚ç¾¤å›¾ç»˜åˆ¶",
    "section": "æŠ–åŠ¨å›¾ + ç®±çº¿å›¾",
    "text": "æŠ–åŠ¨å›¾ + ç®±çº¿å›¾\n\nggplot(iris, aes(x = Species, y = Sepal.Length, color = Species)) +\n    geom_boxplot(outlier.shape = NA, alpha = 0.3, width = 0.5) +\n    geom_jitter(width = 0.15, alpha = 0.7, size = 2) +\n    scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    labs(\n        title = \"ç®±çº¿å›¾ + æŠ–åŠ¨å›¾ç»„åˆ\",\n        x = \"ç‰©ç§\",\n        y = \"è¼ç‰‡é•¿åº¦ (cm)\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"none\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "æŠ–åŠ¨å›¾ä¸èœ‚ç¾¤å›¾"
    ]
  },
  {
    "objectID": "2041-bindjitter.html#èœ‚ç¾¤å›¾-beeswarm",
    "href": "2041-bindjitter.html#èœ‚ç¾¤å›¾-beeswarm",
    "title": "Rè¯­è¨€æŠ–åŠ¨å›¾ä¸èœ‚ç¾¤å›¾ç»˜åˆ¶",
    "section": "èœ‚ç¾¤å›¾ (Beeswarm)",
    "text": "èœ‚ç¾¤å›¾ (Beeswarm)\nèœ‚ç¾¤å›¾ä½¿ç”¨ç®—æ³•é¿å…é‡å ï¼Œæ¯”éšæœºæŠ–åŠ¨æ›´æ•´é½ï¼š\n\nlibrary(ggbeeswarm)\n\nggplot(iris, aes(x = Species, y = Sepal.Length, color = Species)) +\n    geom_beeswarm(cex = 2.5, size = 2.5) +\n    scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    labs(\n        title = \"èœ‚ç¾¤å›¾ (Beeswarm Plot)\",\n        subtitle = \"æœ‰åºæ’åˆ—é¿å…é‡å \",\n        x = \"ç‰©ç§\",\n        y = \"è¼ç‰‡é•¿åº¦ (cm)\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"none\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "æŠ–åŠ¨å›¾ä¸èœ‚ç¾¤å›¾"
    ]
  },
  {
    "objectID": "2041-bindjitter.html#quasirandom-å›¾",
    "href": "2041-bindjitter.html#quasirandom-å›¾",
    "title": "Rè¯­è¨€æŠ–åŠ¨å›¾ä¸èœ‚ç¾¤å›¾ç»˜åˆ¶",
    "section": "Quasirandom å›¾",
    "text": "Quasirandom å›¾\n\nggplot(iris, aes(x = Species, y = Sepal.Length, color = Species)) +\n    geom_quasirandom(size = 2.5, bandwidth = 0.4) +\n    scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    labs(\n        title = \"Quasirandom åˆ†å¸ƒå›¾\",\n        x = \"ç‰©ç§\",\n        y = \"è¼ç‰‡é•¿åº¦ (cm)\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"none\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "æŠ–åŠ¨å›¾ä¸èœ‚ç¾¤å›¾"
    ]
  },
  {
    "objectID": "2041-bindjitter.html#å¸¦å‡å€¼æ ‡è®°çš„æŠ–åŠ¨å›¾",
    "href": "2041-bindjitter.html#å¸¦å‡å€¼æ ‡è®°çš„æŠ–åŠ¨å›¾",
    "title": "Rè¯­è¨€æŠ–åŠ¨å›¾ä¸èœ‚ç¾¤å›¾ç»˜åˆ¶",
    "section": "å¸¦å‡å€¼æ ‡è®°çš„æŠ–åŠ¨å›¾",
    "text": "å¸¦å‡å€¼æ ‡è®°çš„æŠ–åŠ¨å›¾\n\n# è®¡ç®—å‡å€¼\nmeans &lt;- iris %&gt;%\n    group_by(Species) %&gt;%\n    summarise(mean_val = mean(Sepal.Length))\n\nggplot(iris, aes(x = Species, y = Sepal.Length, color = Species)) +\n    geom_jitter(width = 0.2, alpha = 0.5, size = 2) +\n    # æ·»åŠ å‡å€¼ç‚¹\n    geom_point(\n        data = means, aes(y = mean_val),\n        size = 5, shape = 18, color = \"#1f2937\"\n    ) +\n    # æ·»åŠ å‡å€¼æ¨ªçº¿\n    geom_errorbar(\n        data = means, aes(y = mean_val, ymin = mean_val, ymax = mean_val),\n        width = 0.4, linewidth = 1, color = \"#1f2937\"\n    ) +\n    scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    labs(\n        title = \"æŠ–åŠ¨å›¾ + å‡å€¼æ ‡è®°\",\n        x = \"ç‰©ç§\",\n        y = \"è¼ç‰‡é•¿åº¦ (cm)\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"none\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "æŠ–åŠ¨å›¾ä¸èœ‚ç¾¤å›¾"
    ]
  },
  {
    "objectID": "2041-bindjitter.html#åˆ†ç»„æŠ–åŠ¨å›¾",
    "href": "2041-bindjitter.html#åˆ†ç»„æŠ–åŠ¨å›¾",
    "title": "Rè¯­è¨€æŠ–åŠ¨å›¾ä¸èœ‚ç¾¤å›¾ç»˜åˆ¶",
    "section": "åˆ†ç»„æŠ–åŠ¨å›¾",
    "text": "åˆ†ç»„æŠ–åŠ¨å›¾\n\n# æ¨¡æ‹Ÿåˆ†ç»„æ•°æ®\nset.seed(42)\ngroup_data &lt;- data.frame(\n    treatment = rep(c(\"å¯¹ç…§ç»„\", \"å¤„ç†ç»„\"), each = 60),\n    timepoint = rep(rep(c(\"åŸºçº¿\", \"4å‘¨\", \"8å‘¨\"), each = 20), 2),\n    value = c(\n        rnorm(20, 50, 8), rnorm(20, 52, 8), rnorm(20, 55, 8),\n        rnorm(20, 50, 8), rnorm(20, 62, 8), rnorm(20, 70, 8)\n    )\n)\n\nggplot(group_data, aes(x = timepoint, y = value, color = treatment)) +\n    geom_jitter(\n        position = position_jitterdodge(jitter.width = 0.15, dodge.width = 0.7),\n        alpha = 0.6, size = 2\n    ) +\n    stat_summary(\n        fun = mean, geom = \"point\", shape = 18, size = 4,\n        position = position_dodge(width = 0.7)\n    ) +\n    scale_color_manual(values = c(\"å¯¹ç…§ç»„\" = \"#94a3b8\", \"å¤„ç†ç»„\" = \"#4f46e5\")) +\n    labs(\n        title = \"åˆ†ç»„æŠ–åŠ¨å›¾\",\n        subtitle = \"å¯¹ç…§ç»„ vs å¤„ç†ç»„\",\n        x = \"æ—¶é—´ç‚¹\",\n        y = \"æŒ‡æ ‡å€¼\",\n        color = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"top\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "æŠ–åŠ¨å›¾ä¸èœ‚ç¾¤å›¾"
    ]
  },
  {
    "objectID": "2041-bindjitter.html#æ€»ç»“",
    "href": "2041-bindjitter.html#æ€»ç»“",
    "title": "Rè¯­è¨€æŠ–åŠ¨å›¾ä¸èœ‚ç¾¤å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå›¾è¡¨ç±»å‹\næ ¸å¿ƒå‡½æ•°\nç‰¹ç‚¹\n\n\n\n\næŠ–åŠ¨å›¾\ngeom_jitter()\néšæœºåç§»ï¼Œç®€å•å¿«æ·\n\n\nèœ‚ç¾¤å›¾\ngeom_beeswarm()\næœ‰åºæ’åˆ—ï¼Œæ›´æ•´é½\n\n\nQuasirandom\ngeom_quasirandom()\nä»‹äºä¸¤è€…ä¹‹é—´\n\n\n\n\nè®¾è®¡å»ºè®®\n\næ•°æ®é‡ &lt; 50 æ—¶ç”¨èœ‚ç¾¤å›¾\næ•°æ®é‡ &gt; 100 æ—¶å¢åŠ é€æ˜åº¦\næ­é…ç®±çº¿å›¾/å°æç´å›¾ä½¿ç”¨\n\n\n\nç›¸å…³æ•™ç¨‹\n\nç®±çº¿å›¾ä¸å°æç´å›¾\nç›´æ–¹å›¾ä¸å¯†åº¦å›¾",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "æŠ–åŠ¨å›¾ä¸èœ‚ç¾¤å›¾"
    ]
  },
  {
    "objectID": "2043-bindjoyplot.html",
    "href": "2043-bindjoyplot.html",
    "title": "Rè¯­è¨€Joy Plotå±±è„Šå›¾ç»˜åˆ¶",
    "section": "",
    "text": "Joy Plotï¼ˆåˆç§°å±±è„Šå›¾/Ridgeline Plotï¼‰å±•ç¤ºå¤šç»„æ•°æ®çš„å¯†åº¦åˆ†å¸ƒï¼Œå„ç»„åˆ†å¸ƒéƒ¨åˆ†é‡å ï¼Œå½¢æˆç±»ä¼¼å±±è„Šçš„è§†è§‰æ•ˆæœã€‚åç§°æ¥æºäº Joy Division ä¸“è¾‘å°é¢ã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\næ—¶é—´åºåˆ—åˆ†å¸ƒ\nå„æœˆä»½/å¹´ä»½çš„åˆ†å¸ƒå˜åŒ–\n\n\nå¤šç»„æ¯”è¾ƒ\n5-20ç»„æ•°æ®åˆ†å¸ƒå¯¹æ¯”\n\n\nè¶‹åŠ¿å±•ç¤º\nåˆ†å¸ƒéšæ—¶é—´çš„æ¼”å˜",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "Joy Plot å±±è„Šå›¾"
    ]
  },
  {
    "objectID": "2043-bindjoyplot.html#ä»€ä¹ˆæ˜¯joy-plotå±±è„Šå›¾",
    "href": "2043-bindjoyplot.html#ä»€ä¹ˆæ˜¯joy-plotå±±è„Šå›¾",
    "title": "Rè¯­è¨€Joy Plotå±±è„Šå›¾ç»˜åˆ¶",
    "section": "",
    "text": "Joy Plotï¼ˆåˆç§°å±±è„Šå›¾/Ridgeline Plotï¼‰å±•ç¤ºå¤šç»„æ•°æ®çš„å¯†åº¦åˆ†å¸ƒï¼Œå„ç»„åˆ†å¸ƒéƒ¨åˆ†é‡å ï¼Œå½¢æˆç±»ä¼¼å±±è„Šçš„è§†è§‰æ•ˆæœã€‚åç§°æ¥æºäº Joy Division ä¸“è¾‘å°é¢ã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\næ—¶é—´åºåˆ—åˆ†å¸ƒ\nå„æœˆä»½/å¹´ä»½çš„åˆ†å¸ƒå˜åŒ–\n\n\nå¤šç»„æ¯”è¾ƒ\n5-20ç»„æ•°æ®åˆ†å¸ƒå¯¹æ¯”\n\n\nè¶‹åŠ¿å±•ç¤º\nåˆ†å¸ƒéšæ—¶é—´çš„æ¼”å˜",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "Joy Plot å±±è„Šå›¾"
    ]
  },
  {
    "objectID": "2043-bindjoyplot.html#råŒ…åŠ è½½",
    "href": "2043-bindjoyplot.html#råŒ…åŠ è½½",
    "title": "Rè¯­è¨€Joy Plotå±±è„Šå›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\n\nlibrary(ggplot2)\nlibrary(dplyr)\n\n# Joy Plot ä¸“ç”¨åŒ…\n# install.packages(\"ggridges\")\nlibrary(ggridges)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "Joy Plot å±±è„Šå›¾"
    ]
  },
  {
    "objectID": "2043-bindjoyplot.html#å‡†å¤‡ç¤ºä¾‹æ•°æ®",
    "href": "2043-bindjoyplot.html#å‡†å¤‡ç¤ºä¾‹æ•°æ®",
    "title": "Rè¯­è¨€Joy Plotå±±è„Šå›¾ç»˜åˆ¶",
    "section": "å‡†å¤‡ç¤ºä¾‹æ•°æ®",
    "text": "å‡†å¤‡ç¤ºä¾‹æ•°æ®\n\n# åˆ›å»ºæœˆåº¦æ°”æ¸©æ•°æ®\nset.seed(42)\nmonths &lt;- c(\n    \"1æœˆ\", \"2æœˆ\", \"3æœˆ\", \"4æœˆ\", \"5æœˆ\", \"6æœˆ\",\n    \"7æœˆ\", \"8æœˆ\", \"9æœˆ\", \"10æœˆ\", \"11æœˆ\", \"12æœˆ\"\n)\n\nweather_data &lt;- do.call(rbind, lapply(1:12, function(m) {\n    # æ¨¡æ‹Ÿå„æœˆæ°”æ¸©æ•°æ®\n    base_temp &lt;- 10 + 15 * sin((m - 4) * pi / 6) # å­£èŠ‚æ€§å˜åŒ–\n    data.frame(\n        month = factor(months[m], levels = months),\n        temperature = rnorm(100, mean = base_temp, sd = 5)\n    )\n}))\n\nhead(weather_data)\n\n  month temperature\n1   1æœˆ    1.854792\n2   1æœˆ   -7.823491\n3   1æœˆ   -3.184358\n4   1æœˆ   -1.835687\n5   1æœˆ   -2.978658\n6   1æœˆ   -5.530623",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "Joy Plot å±±è„Šå›¾"
    ]
  },
  {
    "objectID": "2043-bindjoyplot.html#åŸºç¡€å±±è„Šå›¾",
    "href": "2043-bindjoyplot.html#åŸºç¡€å±±è„Šå›¾",
    "title": "Rè¯­è¨€Joy Plotå±±è„Šå›¾ç»˜åˆ¶",
    "section": "åŸºç¡€å±±è„Šå›¾",
    "text": "åŸºç¡€å±±è„Šå›¾\n\nggplot(weather_data, aes(x = temperature, y = month, fill = month)) +\n    geom_density_ridges(alpha = 0.7) +\n    scale_fill_viridis_d(option = \"plasma\") +\n    labs(\n        title = \"æœˆå‡æ°”æ¸©åˆ†å¸ƒ\",\n        subtitle = \"Joy Plot / å±±è„Šå›¾\",\n        x = \"æ°”æ¸© (Â°C)\",\n        y = NULL\n    ) +\n    theme_ridges() +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"none\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "Joy Plot å±±è„Šå›¾"
    ]
  },
  {
    "objectID": "2043-bindjoyplot.html#å¸¦å¡«å……æ¸å˜çš„å±±è„Šå›¾",
    "href": "2043-bindjoyplot.html#å¸¦å¡«å……æ¸å˜çš„å±±è„Šå›¾",
    "title": "Rè¯­è¨€Joy Plotå±±è„Šå›¾ç»˜åˆ¶",
    "section": "å¸¦å¡«å……æ¸å˜çš„å±±è„Šå›¾",
    "text": "å¸¦å¡«å……æ¸å˜çš„å±±è„Šå›¾\n\nggplot(weather_data, aes(x = temperature, y = month, fill = after_stat(x))) +\n    geom_density_ridges_gradient(scale = 3, rel_min_height = 0.01) +\n    scale_fill_viridis_c(option = \"plasma\", name = \"æ¸©åº¦\") +\n    labs(\n        title = \"æ¸©åº¦åˆ†å¸ƒçƒ­åŠ›å±±è„Šå›¾\",\n        x = \"æ°”æ¸© (Â°C)\",\n        y = NULL\n    ) +\n    theme_ridges() +\n    theme(plot.title = element_text(face = \"bold\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "Joy Plot å±±è„Šå›¾"
    ]
  },
  {
    "objectID": "2043-bindjoyplot.html#å¸¦åˆ†ä½æ•°æ ‡è®°",
    "href": "2043-bindjoyplot.html#å¸¦åˆ†ä½æ•°æ ‡è®°",
    "title": "Rè¯­è¨€Joy Plotå±±è„Šå›¾ç»˜åˆ¶",
    "section": "å¸¦åˆ†ä½æ•°æ ‡è®°",
    "text": "å¸¦åˆ†ä½æ•°æ ‡è®°\n\nggplot(weather_data, aes(x = temperature, y = month, fill = month)) +\n    geom_density_ridges(\n        alpha = 0.7,\n        quantile_lines = TRUE,\n        quantiles = 2 # æ˜¾ç¤ºä¸­ä½æ•°\n    ) +\n    scale_fill_viridis_d(option = \"mako\") +\n    labs(\n        title = \"å¸¦ä¸­ä½æ•°çº¿çš„å±±è„Šå›¾\",\n        x = \"æ°”æ¸© (Â°C)\",\n        y = NULL\n    ) +\n    theme_ridges() +\n    theme(legend.position = \"none\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "Joy Plot å±±è„Šå›¾"
    ]
  },
  {
    "objectID": "2043-bindjoyplot.html#è‡ªå®šä¹‰é¢œè‰²å’Œæ ·å¼",
    "href": "2043-bindjoyplot.html#è‡ªå®šä¹‰é¢œè‰²å’Œæ ·å¼",
    "title": "Rè¯­è¨€Joy Plotå±±è„Šå›¾ç»˜åˆ¶",
    "section": "è‡ªå®šä¹‰é¢œè‰²å’Œæ ·å¼",
    "text": "è‡ªå®šä¹‰é¢œè‰²å’Œæ ·å¼\n\n# åˆ›å»ºè€ƒè¯•æˆç»©æ•°æ®\nset.seed(42)\nexam_data &lt;- data.frame(\n    subject = rep(c(\"æ•°å­¦\", \"è¯­æ–‡\", \"è‹±è¯­\", \"ç‰©ç†\", \"åŒ–å­¦\"), each = 100),\n    score = c(\n        rnorm(100, 75, 12),\n        rnorm(100, 78, 10),\n        rnorm(100, 72, 15),\n        rnorm(100, 68, 14),\n        rnorm(100, 70, 13)\n    )\n)\n\nggplot(exam_data, aes(x = score, y = subject, fill = subject)) +\n    geom_density_ridges(\n        alpha = 0.8,\n        scale = 1.2,\n        rel_min_height = 0.01\n    ) +\n    scale_fill_manual(values = c(\n        \"æ•°å­¦\" = \"#4f46e5\", \"è¯­æ–‡\" = \"#10b981\", \"è‹±è¯­\" = \"#f59e0b\",\n        \"ç‰©ç†\" = \"#ec4899\", \"åŒ–å­¦\" = \"#8b5cf6\"\n    )) +\n    scale_x_continuous(limits = c(30, 110)) +\n    labs(\n        title = \"å„ç§‘æˆç»©åˆ†å¸ƒ\",\n        x = \"åˆ†æ•°\",\n        y = NULL\n    ) +\n    theme_ridges() +\n    theme(\n        plot.title = element_text(face = \"bold\", size = 14),\n        legend.position = \"none\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "Joy Plot å±±è„Šå›¾"
    ]
  },
  {
    "objectID": "2043-bindjoyplot.html#å¸¦æ•°æ®ç‚¹çš„å±±è„Šå›¾",
    "href": "2043-bindjoyplot.html#å¸¦æ•°æ®ç‚¹çš„å±±è„Šå›¾",
    "title": "Rè¯­è¨€Joy Plotå±±è„Šå›¾ç»˜åˆ¶",
    "section": "å¸¦æ•°æ®ç‚¹çš„å±±è„Šå›¾",
    "text": "å¸¦æ•°æ®ç‚¹çš„å±±è„Šå›¾\n\nggplot(exam_data, aes(x = score, y = subject, fill = subject)) +\n    geom_density_ridges(\n        alpha = 0.6,\n        jittered_points = TRUE,\n        point_size = 0.8,\n        point_alpha = 0.3,\n        position = position_points_jitter(height = 0)\n    ) +\n    scale_fill_manual(values = c(\n        \"æ•°å­¦\" = \"#4f46e5\", \"è¯­æ–‡\" = \"#10b981\", \"è‹±è¯­\" = \"#f59e0b\",\n        \"ç‰©ç†\" = \"#ec4899\", \"åŒ–å­¦\" = \"#8b5cf6\"\n    )) +\n    labs(\n        title = \"å¸¦æ•°æ®ç‚¹çš„å±±è„Šå›¾\",\n        x = \"åˆ†æ•°\",\n        y = NULL\n    ) +\n    theme_ridges() +\n    theme(legend.position = \"none\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "Joy Plot å±±è„Šå›¾"
    ]
  },
  {
    "objectID": "2043-bindjoyplot.html#æ€»ç»“",
    "href": "2043-bindjoyplot.html#æ€»ç»“",
    "title": "Rè¯­è¨€Joy Plotå±±è„Šå›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå›¾è¡¨ç±»å‹\nå‡½æ•°\nç‰¹ç‚¹\n\n\n\n\nåŸºç¡€å±±è„Šå›¾\ngeom_density_ridges()\nç®€æ´ï¼Œå¤šç»„åˆ†å¸ƒ\n\n\næ¸å˜å±±è„Šå›¾\ngeom_density_ridges_gradient()\nçƒ­åŠ›æ•ˆæœ\n\n\nå¸¦ç‚¹å±±è„Šå›¾\njittered_points = TRUE\næ˜¾ç¤ºåŸå§‹æ•°æ®\n\n\n\n\nè®¾è®¡å»ºè®®\n\nç»„æ•°æ§åˆ¶åœ¨ 5-15 ä¸ª\nä½¿ç”¨ scale å‚æ•°è°ƒæ•´é‡å ç¨‹åº¦\næŒ‰ä¸­ä½æ•°æˆ–å‡å€¼æ’åº\n\n\n\nç›¸å…³æ•™ç¨‹\n\nç®±çº¿å›¾ä¸å°æç´å›¾\nç›´æ–¹å›¾ä¸å¯†åº¦å›¾",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š åˆ†å¸ƒå›¾",
      "Joy Plot å±±è„Šå›¾"
    ]
  },
  {
    "objectID": "2045-binddonut.html",
    "href": "2045-binddonut.html",
    "title": "Rè¯­è¨€ç¯å½¢å›¾ä¸ç”œç”œåœˆå›¾ç»˜åˆ¶",
    "section": "",
    "text": "ç¯å½¢å›¾ï¼ˆDonut Chartï¼‰æ˜¯é¥¼å›¾çš„å˜ä½“ï¼Œä¸­å¿ƒæŒ–ç©ºï¼Œå¯åœ¨ä¸­é—´æ·»åŠ ç»Ÿè®¡ä¿¡æ¯æˆ–å›¾æ ‡ï¼Œè§†è§‰æ›´ç°ä»£ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "ç¯å½¢å›¾ä¸ç”œç”œåœˆå›¾"
    ]
  },
  {
    "objectID": "2045-binddonut.html#ä»€ä¹ˆæ˜¯ç¯å½¢å›¾",
    "href": "2045-binddonut.html#ä»€ä¹ˆæ˜¯ç¯å½¢å›¾",
    "title": "Rè¯­è¨€ç¯å½¢å›¾ä¸ç”œç”œåœˆå›¾ç»˜åˆ¶",
    "section": "",
    "text": "ç¯å½¢å›¾ï¼ˆDonut Chartï¼‰æ˜¯é¥¼å›¾çš„å˜ä½“ï¼Œä¸­å¿ƒæŒ–ç©ºï¼Œå¯åœ¨ä¸­é—´æ·»åŠ ç»Ÿè®¡ä¿¡æ¯æˆ–å›¾æ ‡ï¼Œè§†è§‰æ›´ç°ä»£ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "ç¯å½¢å›¾ä¸ç”œç”œåœˆå›¾"
    ]
  },
  {
    "objectID": "2045-binddonut.html#råŒ…åŠ è½½",
    "href": "2045-binddonut.html#råŒ…åŠ è½½",
    "title": "Rè¯­è¨€ç¯å½¢å›¾ä¸ç”œç”œåœˆå›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\n\nlibrary(ggplot2)\nlibrary(dplyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "ç¯å½¢å›¾ä¸ç”œç”œåœˆå›¾"
    ]
  },
  {
    "objectID": "2045-binddonut.html#åŸºç¡€ç¯å½¢å›¾",
    "href": "2045-binddonut.html#åŸºç¡€ç¯å½¢å›¾",
    "title": "Rè¯­è¨€ç¯å½¢å›¾ä¸ç”œç”œåœˆå›¾ç»˜åˆ¶",
    "section": "åŸºç¡€ç¯å½¢å›¾",
    "text": "åŸºç¡€ç¯å½¢å›¾\n\n# ç¤ºä¾‹æ•°æ®\ndata &lt;- data.frame(\n    category = c(\"äº§å“A\", \"äº§å“B\", \"äº§å“C\", \"äº§å“D\"),\n    value = c(35, 28, 22, 15)\n)\n\n# è®¡ç®—ä½ç½®\ndata &lt;- data %&gt;%\n    arrange(desc(value)) %&gt;%\n    mutate(\n        fraction = value / sum(value),\n        ymax = cumsum(fraction),\n        ymin = lag(ymax, default = 0),\n        label_pos = (ymax + ymin) / 2,\n        label = paste0(value, \"%\")\n    )\n\nggplot(data, aes(ymax = ymax, ymin = ymin, xmax = 4, xmin = 2.5, fill = category)) +\n    geom_rect() +\n    geom_text(aes(x = 3.25, y = label_pos, label = label), color = \"white\", fontface = \"bold\") +\n    coord_polar(theta = \"y\") +\n    xlim(c(1, 4)) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\", \"#94a3b8\")) +\n    labs(title = \"å¸‚åœºä»½é¢åˆ†å¸ƒ\", fill = NULL) +\n    theme_void() +\n    theme(plot.title = element_text(face = \"bold\", hjust = 0.5))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "ç¯å½¢å›¾ä¸ç”œç”œåœˆå›¾"
    ]
  },
  {
    "objectID": "2045-binddonut.html#ä¸­å¿ƒæ·»åŠ ç»Ÿè®¡ä¿¡æ¯",
    "href": "2045-binddonut.html#ä¸­å¿ƒæ·»åŠ ç»Ÿè®¡ä¿¡æ¯",
    "title": "Rè¯­è¨€ç¯å½¢å›¾ä¸ç”œç”œåœˆå›¾ç»˜åˆ¶",
    "section": "ä¸­å¿ƒæ·»åŠ ç»Ÿè®¡ä¿¡æ¯",
    "text": "ä¸­å¿ƒæ·»åŠ ç»Ÿè®¡ä¿¡æ¯\n\nggplot(data, aes(ymax = ymax, ymin = ymin, xmax = 4, xmin = 2, fill = category)) +\n    geom_rect() +\n    coord_polar(theta = \"y\") +\n    xlim(c(0.5, 4)) +\n    # ä¸­å¿ƒæ–‡å­—\n    annotate(\"text\", x = 0.5, y = 0, label = \"100%\", size = 8, fontface = \"bold\", color = \"#1f2937\") +\n    annotate(\"text\", x = 0.5, y = 0.15, label = \"æ€»è®¡\", size = 4, color = \"#6b7280\") +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\", \"#94a3b8\")) +\n    labs(title = \"å¸¦ä¸­å¿ƒæ ‡æ³¨çš„ç¯å½¢å›¾\", fill = NULL) +\n    theme_void() +\n    theme(\n        plot.title = element_text(face = \"bold\", hjust = 0.5),\n        legend.position = \"bottom\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "ç¯å½¢å›¾ä¸ç”œç”œåœˆå›¾"
    ]
  },
  {
    "objectID": "2045-binddonut.html#å¤šå±‚ç¯å½¢å›¾",
    "href": "2045-binddonut.html#å¤šå±‚ç¯å½¢å›¾",
    "title": "Rè¯­è¨€ç¯å½¢å›¾ä¸ç”œç”œåœˆå›¾ç»˜åˆ¶",
    "section": "å¤šå±‚ç¯å½¢å›¾",
    "text": "å¤šå±‚ç¯å½¢å›¾\n\n# ä¸¤æœŸæ•°æ®å¯¹æ¯”\ninner_data &lt;- data.frame(\n    category = c(\"A\", \"B\", \"C\", \"D\"),\n    value = c(30, 25, 25, 20)\n) %&gt;%\n    mutate(\n        fraction = value / sum(value),\n        ymax = cumsum(fraction),\n        ymin = lag(ymax, default = 0)\n    )\n\nouter_data &lt;- data.frame(\n    category = c(\"A\", \"B\", \"C\", \"D\"),\n    value = c(35, 20, 28, 17)\n) %&gt;%\n    mutate(\n        fraction = value / sum(value),\n        ymax = cumsum(fraction),\n        ymin = lag(ymax, default = 0)\n    )\n\nggplot() +\n    # å†…ç¯ï¼ˆ2022å¹´ï¼‰\n    geom_rect(data = inner_data, aes(ymax = ymax, ymin = ymin, xmax = 2.5, xmin = 1.5, fill = category), alpha = 0.6) +\n    # å¤–ç¯ï¼ˆ2023å¹´ï¼‰\n    geom_rect(data = outer_data, aes(ymax = ymax, ymin = ymin, xmax = 4, xmin = 3, fill = category)) +\n    coord_polar(theta = \"y\") +\n    xlim(c(0.5, 4)) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\", \"#94a3b8\")) +\n    annotate(\"text\", x = 2, y = 0, label = \"2022\", size = 3, color = \"#6b7280\") +\n    annotate(\"text\", x = 3.5, y = 0, label = \"2023\", size = 3, color = \"#1f2937\") +\n    labs(title = \"å¤šå±‚ç¯å½¢å›¾ï¼šå¹´åº¦å¯¹æ¯”\", fill = NULL) +\n    theme_void() +\n    theme(plot.title = element_text(face = \"bold\", hjust = 0.5))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "ç¯å½¢å›¾ä¸ç”œç”œåœˆå›¾"
    ]
  },
  {
    "objectID": "2045-binddonut.html#æ€»ç»“",
    "href": "2045-binddonut.html#æ€»ç»“",
    "title": "Rè¯­è¨€ç¯å½¢å›¾ä¸ç”œç”œåœˆå›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\næ ·å¼\nç‰¹ç‚¹\n\n\n\n\nåŸºç¡€ç¯å½¢å›¾\né¥¼å›¾æŒ–ç©ºç‰ˆ\n\n\nå¸¦ä¸­å¿ƒæ ‡æ³¨\næ˜¾ç¤ºæ€»è®¡æˆ–å…³é”®æŒ‡æ ‡\n\n\nå¤šå±‚ç¯å½¢å›¾\nå¯¹æ¯”å¤šæœŸæ•°æ®\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\nåå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾\næŸ±çŠ¶å›¾ä¸é¥¼å›¾",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "ç¯å½¢å›¾ä¸ç”œç”œåœˆå›¾"
    ]
  },
  {
    "objectID": "2047-bindbullet.html",
    "href": "2047-bindbullet.html",
    "title": "Rè¯­è¨€å­å¼¹å›¾ç»˜åˆ¶",
    "section": "",
    "text": "å­å¼¹å›¾ï¼ˆBullet Chartï¼‰ç”±Stephen Fewè®¾è®¡ï¼Œç”¨äºæ›¿ä»£ä»ªè¡¨ç›˜ï¼Œç´§å‡‘å±•ç¤ºå®é™…å€¼ä¸ç›®æ ‡å€¼çš„æ¯”è¾ƒï¼ŒåŒæ—¶æ˜¾ç¤ºèƒŒæ™¯åŒºé—´ã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\nKPIä»ªè¡¨ç›˜\né”€å”®ç›®æ ‡å®Œæˆç‡\n\n\nç»©æ•ˆå¯¹æ¯”\nå®é™… vs ç›®æ ‡\n\n\nå¤šæŒ‡æ ‡å¯¹æ¯”\nå¤šä¸ªKPIå¹¶æ’å±•ç¤º",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å­å¼¹å›¾"
    ]
  },
  {
    "objectID": "2047-bindbullet.html#ä»€ä¹ˆæ˜¯å­å¼¹å›¾",
    "href": "2047-bindbullet.html#ä»€ä¹ˆæ˜¯å­å¼¹å›¾",
    "title": "Rè¯­è¨€å­å¼¹å›¾ç»˜åˆ¶",
    "section": "",
    "text": "å­å¼¹å›¾ï¼ˆBullet Chartï¼‰ç”±Stephen Fewè®¾è®¡ï¼Œç”¨äºæ›¿ä»£ä»ªè¡¨ç›˜ï¼Œç´§å‡‘å±•ç¤ºå®é™…å€¼ä¸ç›®æ ‡å€¼çš„æ¯”è¾ƒï¼ŒåŒæ—¶æ˜¾ç¤ºèƒŒæ™¯åŒºé—´ã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\nKPIä»ªè¡¨ç›˜\né”€å”®ç›®æ ‡å®Œæˆç‡\n\n\nç»©æ•ˆå¯¹æ¯”\nå®é™… vs ç›®æ ‡\n\n\nå¤šæŒ‡æ ‡å¯¹æ¯”\nå¤šä¸ªKPIå¹¶æ’å±•ç¤º",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å­å¼¹å›¾"
    ]
  },
  {
    "objectID": "2047-bindbullet.html#råŒ…åŠ è½½",
    "href": "2047-bindbullet.html#råŒ…åŠ è½½",
    "title": "Rè¯­è¨€å­å¼¹å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\n\nlibrary(ggplot2)\nlibrary(dplyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å­å¼¹å›¾"
    ]
  },
  {
    "objectID": "2047-bindbullet.html#åŸºç¡€å­å¼¹å›¾",
    "href": "2047-bindbullet.html#åŸºç¡€å­å¼¹å›¾",
    "title": "Rè¯­è¨€å­å¼¹å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€å­å¼¹å›¾",
    "text": "åŸºç¡€å­å¼¹å›¾\n\n# ç¤ºä¾‹æ•°æ®\nkpi_data &lt;- data.frame(\n    metric = c(\"é”€å”®é¢\", \"æ¯›åˆ©ç‡\", \"å®¢æˆ·æ»¡æ„åº¦\", \"æ–°å®¢æˆ·æ•°\"),\n    actual = c(275, 68, 85, 45),\n    target = c(300, 70, 80, 50),\n    max_value = c(350, 100, 100, 60)\n)\n\n# æ·»åŠ åŒºé—´\nkpi_data &lt;- kpi_data %&gt;%\n    mutate(\n        poor = max_value * 0.5,\n        satisfactory = max_value * 0.75,\n        good = max_value\n    )\n\nggplot(kpi_data, aes(y = metric)) +\n    # èƒŒæ™¯åŒºé—´\n    geom_col(aes(x = good), fill = \"#e5e7eb\", width = 0.6) +\n    geom_col(aes(x = satisfactory), fill = \"#d1d5db\", width = 0.6) +\n    geom_col(aes(x = poor), fill = \"#9ca3af\", width = 0.6) +\n    # å®é™…å€¼\n    geom_col(aes(x = actual), fill = \"#4f46e5\", width = 0.25) +\n    # ç›®æ ‡çº¿\n    geom_point(aes(x = target), shape = \"|\", size = 8, color = \"#1f2937\") +\n    labs(\n        title = \"KPIå­å¼¹å›¾\",\n        subtitle = \"è“è‰²=å®é™…å€¼ï¼Œé»‘çº¿=ç›®æ ‡\",\n        x = NULL, y = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        panel.grid.major.y = element_blank()\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å­å¼¹å›¾"
    ]
  },
  {
    "objectID": "2047-bindbullet.html#å¸¦ç™¾åˆ†æ¯”æ ‡ç­¾",
    "href": "2047-bindbullet.html#å¸¦ç™¾åˆ†æ¯”æ ‡ç­¾",
    "title": "Rè¯­è¨€å­å¼¹å›¾ç»˜åˆ¶",
    "section": "å¸¦ç™¾åˆ†æ¯”æ ‡ç­¾",
    "text": "å¸¦ç™¾åˆ†æ¯”æ ‡ç­¾\n\nkpi_data &lt;- kpi_data %&gt;%\n    mutate(pct = round(actual / target * 100))\n\nggplot(kpi_data, aes(y = metric)) +\n    geom_col(aes(x = good), fill = \"#f1f5f9\", width = 0.6) +\n    geom_col(aes(x = satisfactory), fill = \"#e2e8f0\", width = 0.6) +\n    geom_col(aes(x = poor), fill = \"#cbd5e1\", width = 0.6) +\n    geom_col(aes(x = actual, fill = actual &gt;= target), width = 0.25) +\n    geom_point(aes(x = target), shape = \"|\", size = 8, color = \"#1f2937\") +\n    geom_text(aes(x = actual + 10, label = paste0(pct, \"%\")), fontface = \"bold\", size = 3.5) +\n    scale_fill_manual(values = c(\"TRUE\" = \"#10b981\", \"FALSE\" = \"#f59e0b\")) +\n    labs(\n        title = \"KPIå®Œæˆç‡\",\n        x = NULL, y = NULL\n    ) +\n    theme_minimal() +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        panel.grid.major.y = element_blank(),\n        legend.position = \"none\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å­å¼¹å›¾"
    ]
  },
  {
    "objectID": "2047-bindbullet.html#æ€»ç»“",
    "href": "2047-bindbullet.html#æ€»ç»“",
    "title": "Rè¯­è¨€å­å¼¹å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå…ƒç´ \nè¯´æ˜\n\n\n\n\nèƒŒæ™¯åŒºé—´\nå·®/ä¸­/å¥½ä¸‰æ¡£\n\n\nå®é™…å€¼\nçª„æ¡å½¢æŸ±\n\n\nç›®æ ‡çº¿\nç«–çº¿æ ‡è®°\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\næŸ±çŠ¶å›¾ä¸é¥¼å›¾\næ£’æ£’ç³–å›¾",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š æ¯”è¾ƒå›¾",
      "å­å¼¹å›¾"
    ]
  },
  {
    "objectID": "2049-bindcorrplot.html",
    "href": "2049-bindcorrplot.html",
    "title": "Rè¯­è¨€ç›¸å…³å›¾çŸ©é˜µç»˜åˆ¶",
    "section": "",
    "text": "ç›¸å…³å›¾çŸ©é˜µï¼ˆCorrelation Matrix Plotï¼‰ä»¥çƒ­å›¾å½¢å¼å±•ç¤ºå¤šä¸ªå˜é‡ä¹‹é—´çš„ç›¸å…³ç³»æ•°ï¼Œå¿«é€Ÿè¯†åˆ«å˜é‡é—´å…³ç³»å¼ºåº¦å’Œæ–¹å‘ã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\nç‰¹å¾é€‰æ‹©\nè¯†åˆ«é«˜åº¦ç›¸å…³çš„å˜é‡\n\n\nå¤šé‡å…±çº¿æ€§æ£€æµ‹\nå›å½’å‰æ£€æŸ¥\n\n\næ¢ç´¢æ€§åˆ†æ\nå˜é‡å…³ç³»æ€»è§ˆ",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "ç›¸å…³å›¾çŸ©é˜µ"
    ]
  },
  {
    "objectID": "2049-bindcorrplot.html#ä»€ä¹ˆæ˜¯ç›¸å…³å›¾çŸ©é˜µ",
    "href": "2049-bindcorrplot.html#ä»€ä¹ˆæ˜¯ç›¸å…³å›¾çŸ©é˜µ",
    "title": "Rè¯­è¨€ç›¸å…³å›¾çŸ©é˜µç»˜åˆ¶",
    "section": "",
    "text": "ç›¸å…³å›¾çŸ©é˜µï¼ˆCorrelation Matrix Plotï¼‰ä»¥çƒ­å›¾å½¢å¼å±•ç¤ºå¤šä¸ªå˜é‡ä¹‹é—´çš„ç›¸å…³ç³»æ•°ï¼Œå¿«é€Ÿè¯†åˆ«å˜é‡é—´å…³ç³»å¼ºåº¦å’Œæ–¹å‘ã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\nç‰¹å¾é€‰æ‹©\nè¯†åˆ«é«˜åº¦ç›¸å…³çš„å˜é‡\n\n\nå¤šé‡å…±çº¿æ€§æ£€æµ‹\nå›å½’å‰æ£€æŸ¥\n\n\næ¢ç´¢æ€§åˆ†æ\nå˜é‡å…³ç³»æ€»è§ˆ",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "ç›¸å…³å›¾çŸ©é˜µ"
    ]
  },
  {
    "objectID": "2049-bindcorrplot.html#råŒ…åŠ è½½",
    "href": "2049-bindcorrplot.html#råŒ…åŠ è½½",
    "title": "Rè¯­è¨€ç›¸å…³å›¾çŸ©é˜µç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\n\nlibrary(ggplot2)\nlibrary(dplyr)\n\n# ç›¸å…³å›¾ä¸“ç”¨åŒ…\n# install.packages(\"corrplot\")\nlibrary(corrplot)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "ç›¸å…³å›¾çŸ©é˜µ"
    ]
  },
  {
    "objectID": "2049-bindcorrplot.html#åŸºç¡€ç›¸å…³å›¾",
    "href": "2049-bindcorrplot.html#åŸºç¡€ç›¸å…³å›¾",
    "title": "Rè¯­è¨€ç›¸å…³å›¾çŸ©é˜µç»˜åˆ¶",
    "section": "åŸºç¡€ç›¸å…³å›¾",
    "text": "åŸºç¡€ç›¸å…³å›¾\n\n# è®¡ç®—ç›¸å…³çŸ©é˜µ\ncor_matrix &lt;- cor(mtcars[, 1:7])\n\n# åŸºç¡€corrplot\ncorrplot(cor_matrix,\n    method = \"color\", type = \"upper\",\n    tl.col = \"black\", tl.srt = 45,\n    col = colorRampPalette(c(\"#ef4444\", \"white\", \"#4f46e5\"))(100)\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "ç›¸å…³å›¾çŸ©é˜µ"
    ]
  },
  {
    "objectID": "2049-bindcorrplot.html#å¸¦æ•°å€¼çš„ç›¸å…³å›¾",
    "href": "2049-bindcorrplot.html#å¸¦æ•°å€¼çš„ç›¸å…³å›¾",
    "title": "Rè¯­è¨€ç›¸å…³å›¾çŸ©é˜µç»˜åˆ¶",
    "section": "å¸¦æ•°å€¼çš„ç›¸å…³å›¾",
    "text": "å¸¦æ•°å€¼çš„ç›¸å…³å›¾\n\ncorrplot(cor_matrix,\n    method = \"number\", type = \"upper\",\n    tl.col = \"black\", tl.srt = 45,\n    col = colorRampPalette(c(\"#ef4444\", \"white\", \"#4f46e5\"))(100),\n    number.cex = 0.8\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "ç›¸å…³å›¾çŸ©é˜µ"
    ]
  },
  {
    "objectID": "2049-bindcorrplot.html#æ··åˆå‹ç›¸å…³å›¾",
    "href": "2049-bindcorrplot.html#æ··åˆå‹ç›¸å…³å›¾",
    "title": "Rè¯­è¨€ç›¸å…³å›¾çŸ©é˜µç»˜åˆ¶",
    "section": "æ··åˆå‹ç›¸å…³å›¾",
    "text": "æ··åˆå‹ç›¸å…³å›¾\nä¸Šä¸‰è§’æ˜¾ç¤ºåœ†å½¢ï¼Œä¸‹ä¸‰è§’æ˜¾ç¤ºæ•°å€¼ï¼š\n\ncorrplot.mixed(cor_matrix,\n    lower = \"number\", upper = \"circle\",\n    tl.col = \"black\", tl.srt = 45,\n    lower.col = \"black\", number.cex = 0.7\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "ç›¸å…³å›¾çŸ©é˜µ"
    ]
  },
  {
    "objectID": "2049-bindcorrplot.html#ä½¿ç”¨-ggplot2-ç»‘åˆ¶",
    "href": "2049-bindcorrplot.html#ä½¿ç”¨-ggplot2-ç»‘åˆ¶",
    "title": "Rè¯­è¨€ç›¸å…³å›¾çŸ©é˜µç»‘åˆ¶",
    "section": "ä½¿ç”¨ ggplot2 ç»‘åˆ¶",
    "text": "ä½¿ç”¨ ggplot2 ç»‘åˆ¶\n\nlibrary(tidyr)\n\n# è½¬æ¢ä¸ºé•¿æ ¼å¼\ncor_long &lt;- as.data.frame(cor_matrix) %&gt;%\n    mutate(var1 = rownames(.)) %&gt;%\n    pivot_longer(-var1, names_to = \"var2\", values_to = \"correlation\")\n\nggplot(cor_long, aes(x = var1, y = var2, fill = correlation)) +\n    geom_tile(color = \"white\") +\n    geom_text(aes(label = round(correlation, 2)), color = \"black\", size = 3) +\n    scale_fill_gradient2(\n        low = \"#ef4444\", mid = \"white\", high = \"#4f46e5\",\n        midpoint = 0, limit = c(-1, 1)\n    ) +\n    labs(title = \"ç›¸å…³ç³»æ•°çƒ­å›¾\", x = NULL, y = NULL, fill = \"ç›¸å…³ç³»æ•°\") +\n    theme_minimal() +\n    theme(\n        plot.title = element_text(face = \"bold\", hjust = 0.5),\n        axis.text.x = element_text(angle = 45, hjust = 1)\n    ) +\n    coord_fixed()",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "ç›¸å…³å›¾çŸ©é˜µ"
    ]
  },
  {
    "objectID": "2049-bindcorrplot.html#èšç±»æ’åº",
    "href": "2049-bindcorrplot.html#èšç±»æ’åº",
    "title": "Rè¯­è¨€ç›¸å…³å›¾çŸ©é˜µç»˜åˆ¶",
    "section": "èšç±»æ’åº",
    "text": "èšç±»æ’åº\n\ncorrplot(cor_matrix,\n    method = \"color\", type = \"full\",\n    order = \"hclust\", addrect = 3,\n    tl.col = \"black\", tl.srt = 45,\n    col = colorRampPalette(c(\"#ef4444\", \"white\", \"#4f46e5\"))(100)\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "ç›¸å…³å›¾çŸ©é˜µ"
    ]
  },
  {
    "objectID": "2049-bindcorrplot.html#æ€»ç»“",
    "href": "2049-bindcorrplot.html#æ€»ç»“",
    "title": "Rè¯­è¨€ç›¸å…³å›¾çŸ©é˜µç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\næ ·å¼\nå‚æ•°\nç‰¹ç‚¹\n\n\n\n\né¢œè‰²å—\nmethod = \"color\"\nç›´è§‚\n\n\nåœ†å½¢\nmethod = \"circle\"\nå¤§å°+é¢œè‰²ç¼–ç \n\n\næ•°å€¼\nmethod = \"number\"\nç²¾ç¡®\n\n\næ··åˆ\ncorrplot.mixed()\nç»“åˆå¤šç§\n\n\nèšç±»\norder = \"hclust\"\nåˆ†ç»„æ˜¾ç¤º\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\nçƒ­å›¾ç»˜åˆ¶å®Œå…¨æŒ‡å—\nGGallyæ‰©å±•",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "ç›¸å…³å›¾çŸ©é˜µ"
    ]
  },
  {
    "objectID": "3002-datatable.html",
    "href": "3002-datatable.html",
    "title": "data.table å®Œå…¨æŒ‡å—ï¼šé«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "",
    "text": "åœ¨ R è¯­è¨€ä¸­å¤„ç†æ•°æ®æ—¶ï¼Œæˆ‘ä»¬æœ‰ä¸‰ç§ä¸»è¦çš„æ•°æ®æ¡†ç»“æ„å¯ä»¥é€‰æ‹©ï¼š\n\n\n\n\n\n\n\n\n\næ•°æ®ç»“æ„\næ¥æº\nç‰¹ç‚¹\né€‚ç”¨åœºæ™¯\n\n\n\n\ndata.frame\nBase R\nåŸç”Ÿæ”¯æŒï¼Œå…¼å®¹æ€§æœ€å¥½\nå°æ•°æ®ã€å…¼å®¹æ€§è¦æ±‚é«˜\n\n\ntibble\ntidyverse\nè¯­æ³•å‹å¥½ï¼Œæ‰“å°ç¾è§‚\næ—¥å¸¸åˆ†æã€tidyverseç”Ÿæ€\n\n\ndata.table\ndata.tableåŒ…\né€Ÿåº¦æœ€å¿«ï¼Œå†…å­˜æ•ˆç‡é«˜\nå¤§æ•°æ®ã€é«˜æ€§èƒ½éœ€æ±‚\n\n\n\næœ¬æ–‡å°†å…¨é¢ä»‹ç» data.table çš„ä½¿ç”¨æ–¹æ³•ï¼Œå¹¶ä¸å…¶ä»–ä¸¤ç§ç»“æ„è¿›è¡Œå¯¹æ¯”ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "data.table å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "3002-datatable.html#ç®€ä»‹",
    "href": "3002-datatable.html#ç®€ä»‹",
    "title": "data.table å®Œå…¨æŒ‡å—ï¼šé«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "",
    "text": "åœ¨ R è¯­è¨€ä¸­å¤„ç†æ•°æ®æ—¶ï¼Œæˆ‘ä»¬æœ‰ä¸‰ç§ä¸»è¦çš„æ•°æ®æ¡†ç»“æ„å¯ä»¥é€‰æ‹©ï¼š\n\n\n\n\n\n\n\n\n\næ•°æ®ç»“æ„\næ¥æº\nç‰¹ç‚¹\né€‚ç”¨åœºæ™¯\n\n\n\n\ndata.frame\nBase R\nåŸç”Ÿæ”¯æŒï¼Œå…¼å®¹æ€§æœ€å¥½\nå°æ•°æ®ã€å…¼å®¹æ€§è¦æ±‚é«˜\n\n\ntibble\ntidyverse\nè¯­æ³•å‹å¥½ï¼Œæ‰“å°ç¾è§‚\næ—¥å¸¸åˆ†æã€tidyverseç”Ÿæ€\n\n\ndata.table\ndata.tableåŒ…\né€Ÿåº¦æœ€å¿«ï¼Œå†…å­˜æ•ˆç‡é«˜\nå¤§æ•°æ®ã€é«˜æ€§èƒ½éœ€æ±‚\n\n\n\næœ¬æ–‡å°†å…¨é¢ä»‹ç» data.table çš„ä½¿ç”¨æ–¹æ³•ï¼Œå¹¶ä¸å…¶ä»–ä¸¤ç§ç»“æ„è¿›è¡Œå¯¹æ¯”ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "data.table å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "3002-datatable.html#å®‰è£…ä¸åŠ è½½",
    "href": "3002-datatable.html#å®‰è£…ä¸åŠ è½½",
    "title": "data.table å®Œå…¨æŒ‡å—ï¼šé«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\n# å®‰è£…ï¼ˆå¦‚æœªå®‰è£…ï¼‰\n# install.packages(\"data.table\")\n# install.packages(\"tibble\")\n# install.packages(\"dplyr\")\n# install.packages(\"microbenchmark\")\n\nlibrary(data.table)\nlibrary(tibble)\nlibrary(dplyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "data.table å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "3002-datatable.html#åˆ›å»ºæ•°æ®ç»“æ„",
    "href": "3002-datatable.html#åˆ›å»ºæ•°æ®ç»“æ„",
    "title": "data.table å®Œå…¨æŒ‡å—ï¼šé«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "åˆ›å»ºæ•°æ®ç»“æ„",
    "text": "åˆ›å»ºæ•°æ®ç»“æ„\n\nä¸‰ç§æ–¹å¼å¯¹æ¯”\n\n# 1. data.frame (Base R)\ndf &lt;- data.frame(\n    id = 1:5,\n    name = c(\"Alice\", \"Bob\", \"Carol\", \"David\", \"Eve\"),\n    score = c(85, 92, 78, 95, 88)\n)\n\n# 2. tibble (tidyverse)\ntbl &lt;- tibble(\n    id = 1:5,\n    name = c(\"Alice\", \"Bob\", \"Carol\", \"David\", \"Eve\"),\n    score = c(85, 92, 78, 95, 88)\n)\n\n# 3. data.table\ndt &lt;- data.table(\n    id = 1:5,\n    name = c(\"Alice\", \"Bob\", \"Carol\", \"David\", \"Eve\"),\n    score = c(85, 92, 78, 95, 88)\n)\n\n\n\næ‰“å°å·®å¼‚\n\n# data.frame æ‰“å°\nprint(df)\n\n  id  name score\n1  1 Alice    85\n2  2   Bob    92\n3  3 Carol    78\n4  4 David    95\n5  5   Eve    88\n\n\n\n# tibble æ‰“å° - æ›´ç®€æ´ï¼Œæ˜¾ç¤ºç±»å‹\nprint(tbl)\n\n# A tibble: 5 Ã— 3\n     id name  score\n  &lt;int&gt; &lt;chr&gt; &lt;dbl&gt;\n1     1 Alice    85\n2     2 Bob      92\n3     3 Carol    78\n4     4 David    95\n5     5 Eve      88\n\n\n\n# data.table æ‰“å° - æ˜¾ç¤ºè¡Œå·\nprint(dt)\n\n      id   name score\n   &lt;int&gt; &lt;char&gt; &lt;num&gt;\n1:     1  Alice    85\n2:     2    Bob    92\n3:     3  Carol    78\n4:     4  David    95\n5:     5    Eve    88\n\n\n\n\nç›¸äº’è½¬æ¢\n\n# data.frame -&gt; data.table\ndt_from_df &lt;- as.data.table(df)\n\n# data.table -&gt; data.frame\ndf_from_dt &lt;- as.data.frame(dt)\n\n# tibble -&gt; data.table\ndt_from_tbl &lt;- as.data.table(tbl)\n\n# data.table -&gt; tibble\ntbl_from_dt &lt;- as_tibble(dt)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "data.table å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "3002-datatable.html#data.table-æ ¸å¿ƒè¯­æ³•",
    "href": "3002-datatable.html#data.table-æ ¸å¿ƒè¯­æ³•",
    "title": "data.table å®Œå…¨æŒ‡å—ï¼šé«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "data.table æ ¸å¿ƒè¯­æ³•",
    "text": "data.table æ ¸å¿ƒè¯­æ³•\ndata.table çš„æ ¸å¿ƒè¯­æ³•æ˜¯ DT[i, j, by]ï¼š\n\ni: è¡Œç­›é€‰ (WHERE)\nj: åˆ—æ“ä½œ (SELECT)\nby: åˆ†ç»„ (GROUP BY)\n\n\n# åˆ›å»ºç¤ºä¾‹æ•°æ®\nset.seed(42)\ndt &lt;- data.table(\n    id = 1:1000,\n    group = sample(LETTERS[1:5], 1000, replace = TRUE),\n    value1 = rnorm(1000, 100, 15),\n    value2 = rnorm(1000, 50, 10)\n)\nhead(dt)\n\n      id  group    value1   value2\n   &lt;int&gt; &lt;char&gt;     &lt;num&gt;    &lt;num&gt;\n1:     1      A 109.38328 61.91797\n2:     2      E 110.99871 76.73912\n3:     3      A  91.27053 30.86128\n4:     4      A 114.75093 42.31044\n5:     5      B 106.42739 31.52593\n6:     6      D 106.74890 50.33621\n\n\n\nè¡Œç­›é€‰ (i)\n\n# ç­›é€‰ group == \"A\" çš„è¡Œ\ndt[group == \"A\"]\n\n        id  group    value1   value2\n     &lt;int&gt; &lt;char&gt;     &lt;num&gt;    &lt;num&gt;\n  1:     1      A 109.38328 61.91797\n  2:     3      A  91.27053 30.86128\n  3:     4      A 114.75093 42.31044\n  4:     9      A 109.67785 49.72934\n  5:    11      A 102.19782 54.50599\n ---                                \n203:   963      A  75.10807 56.35975\n204:   965      A 122.39199 46.05880\n205:   987      A 128.20561 31.56337\n206:   993      A 101.19565 59.09193\n207:   995      A 105.56527 45.23885\n\n\n\n# ç­›é€‰ value1 &gt; 110 çš„è¡Œ\ndt[value1 &gt; 110]\n\n        id  group   value1   value2\n     &lt;int&gt; &lt;char&gt;    &lt;num&gt;    &lt;num&gt;\n  1:     2      E 110.9987 76.73912\n  2:     4      A 114.7509 42.31044\n  3:     7      B 117.9542 37.42528\n  4:    12      E 143.4633 63.05377\n  5:    15      B 142.7638 61.96405\n ---                               \n288:   987      A 128.2056 31.56337\n289:   988      C 112.5870 57.47904\n290:   997      B 114.9067 43.48176\n291:   999      B 115.2149 69.93133\n292:  1000      C 119.5004 46.73000\n\n\n\n# å¤šæ¡ä»¶ç­›é€‰\ndt[group == \"A\" & value1 &gt; 100]\n\n        id  group   value1   value2\n     &lt;int&gt; &lt;char&gt;    &lt;num&gt;    &lt;num&gt;\n  1:     1      A 109.3833 61.91797\n  2:     4      A 114.7509 42.31044\n  3:     9      A 109.6778 49.72934\n  4:    11      A 102.1978 54.50599\n  5:    17      A 125.7035 64.97103\n ---                               \n 99:   959      A 113.1231 42.22863\n100:   965      A 122.3920 46.05880\n101:   987      A 128.2056 31.56337\n102:   993      A 101.1957 59.09193\n103:   995      A 105.5653 45.23885\n\n\n\n# æŒ‰è¡Œå·ç­›é€‰\ndt[1:5] # å‰5è¡Œ\n\n      id  group    value1   value2\n   &lt;int&gt; &lt;char&gt;     &lt;num&gt;    &lt;num&gt;\n1:     1      A 109.38328 61.91797\n2:     2      E 110.99871 76.73912\n3:     3      A  91.27053 30.86128\n4:     4      A 114.75093 42.31044\n5:     5      B 106.42739 31.52593\n\n\n\n\nåˆ—é€‰æ‹©ä¸è®¡ç®— (j)\n\n# é€‰æ‹©å•åˆ—ï¼ˆè¿”å›å‘é‡ï¼‰\ndt[, value1]\n\n   [1] 109.38328 110.99871  91.27053 114.75093 106.42739 106.74890 117.95417\n   [8]  98.86898 109.67785  96.44790 102.19782 143.46326  86.74560 109.82727\n  [15] 142.76378  96.51668 125.70351  82.38316 106.74516  84.26675  77.77751\n  [22]  87.09858  84.29840  93.38166  86.81959  99.81544 110.27275  86.15260\n  [29] 101.38197  69.47386 102.12535 106.24193  83.98544 108.18135 135.42113\n  [36] 101.85140  95.72102 140.39107 111.57226 106.46332 124.11822 124.75559\n  [43]  79.68854 110.45616  92.34901  93.11815  88.35424  63.88662 112.17044\n  [50]  87.03080 119.50279 108.91205  70.04662  86.12808 120.45319  92.12386\n  [57]  67.17253 147.95749 108.64838  95.86751 134.85392 129.84296 107.20500\n  [64]  75.96179  94.06965 104.69164  86.26084  85.61220  88.46388  59.74742\n  [71] 122.97581 113.82410  82.19058  96.94704  84.11326 109.91952  95.00640\n  [78] 118.96744 114.85532  71.07734  91.02574  80.66489  98.35049 104.42304\n  [85]  78.98847 112.28154 112.56479 116.51946  80.41846  91.64088 113.50932\n  [92] 106.29920  88.83164  99.48643 113.31679  79.12713 103.73702  75.03528\n  [99]  79.66898 115.38096  79.12795  74.20214  86.71865  77.36877 102.00256\n [106]  90.09373 109.09174 103.27693  87.74513  92.51581 100.71258  88.63264\n [113]  87.00285 122.21787  94.59311 116.70631 102.72639 107.88032  85.28409\n [120]  99.97007  98.21077  78.62162  92.69332  95.99700 103.49784  93.91216\n [127] 110.59161 109.59036  69.33732  82.74755  77.24375  94.46252 127.59407\n [134] 104.99612  81.02382 106.57418  94.85850 102.08682 101.87596  77.01179\n [141] 118.99917 114.01540  93.62271  77.73411  75.98551 113.89752 113.49925\n [148]  89.97640 107.16825 106.71345 125.10838 107.84704 128.98803 103.75021\n [155] 111.21479 115.01620  98.82792 131.78703 110.89396 118.83707 104.95149\n [162] 119.37992  99.95993 111.63138 108.50226 118.51790 106.97348 102.68534\n [169]  91.90914  85.63382  81.96860 112.91846  79.90985 109.36727  91.10580\n [176] 115.35644 112.90795  90.05317  93.46773  85.98006  71.28586 114.98335\n [183] 104.42342 121.63164 102.11555 133.99723  90.10309  95.19250  83.55981\n [190] 119.42572 101.20062 122.72318  95.98640 117.88996 123.88256  85.05428\n [197]  84.79106 105.87494  97.08207 104.58409 102.90642  94.82650  82.03828\n [204]  85.57727  76.73607  99.70630 108.91391 117.58191  89.64575 110.48139\n [211]  79.30391  91.85316 105.74409  77.75923 108.31481  93.62757  88.81974\n [218]  86.88924 100.06955 105.26070 107.31495  84.23637  90.36928  90.39282\n [225] 109.41365 109.38831 131.92283 110.89486  90.62142  88.86416 124.93829\n [232]  97.67816 118.32451 109.39361 115.09537  94.77146  82.72978 106.73317\n [239] 112.67374 106.46416 124.99575 100.99251  83.22607 107.27872  96.96964\n [246] 115.53501  91.42900  88.51509  76.78822  80.63048  82.43030  64.89282\n [253] 110.46104 111.45511  85.21087  97.73000 107.46323 112.60541 106.16031\n [260] 106.52720 102.94705  84.50004 102.70194 115.00075  89.67455 115.30077\n [267] 107.75389 102.76352  99.89691 126.03658 101.23642  89.43951 106.20975\n [274]  91.26847  88.69175  71.44941 104.62363  93.92229 110.78380  88.65792\n [281]  99.87589  97.46046 104.74834  92.05071 115.15328 100.17677 129.56645\n [288] 139.13139 110.66724  85.99456  99.23988  93.21054 122.25005 120.73064\n [295]  92.31269  99.34279  83.63439 112.80177 108.44845 118.84436  83.44059\n [302] 105.49996  92.25895 113.71426 119.61683  87.41555 106.03851  83.64101\n [309] 108.22599  79.33986 132.68488 133.96063 113.38722  99.15327 109.93512\n [316]  88.20479  76.38367 104.66311  62.22563  86.83191  96.10454 118.38571\n [323] 114.07000 111.49082  88.77238 118.58344  97.45552 124.04980  79.22420\n [330]  94.68725  99.97552 108.94121  92.79341 106.99338  69.00128  93.27963\n [337]  94.42467 103.21995  90.30144  82.32022 102.72906 102.79929  81.02026\n [344]  81.85371  96.15907  99.45440 114.82841 106.33140 125.23603 103.22085\n [351] 120.28340  77.58618  85.52581  85.58748  73.47948 104.30012  70.07683\n [358] 113.32910 101.11309 106.66595 102.32790 122.48558 104.93743 107.18768\n [365]  72.58287 112.87615  95.98949  69.76769 102.83622 103.52375 110.22314\n [372] 109.15377 108.40174 129.78875 124.28571 102.80341  97.87845  88.79796\n [379] 114.48612  86.81457  98.52952 115.29018  98.17522 106.84674 126.12624\n [386] 130.91672 120.67994 126.87891  87.16320  96.49588 134.52071 112.85713\n [393] 113.60919 118.80718 110.85766 125.18457  89.83797  94.27476  92.73814\n [400]  91.88111  97.00573 124.70397  86.80706 106.73955 127.51701  73.17907\n [407] 113.53746  84.86712 121.48773 112.02518 105.58263  98.44320  72.50697\n [414]  86.73099  87.40958 118.90657  96.63049  97.38152  89.32002  99.65019\n [421]  71.67976 113.99259 110.92357 120.85504  96.99421 112.50147  81.86359\n [428] 111.14041 104.84171 116.65823 115.33550  83.33068 107.12930 128.68684\n [435]  91.81526 111.34812 102.14835  98.68739 110.82405 114.69216  92.58486\n [442] 103.64252 111.25033  81.33944 121.87304  86.18319 129.08043 101.30158\n [449]  91.34103 121.90527 101.59854 125.50111  93.80778  92.17657  96.73165\n [456]  79.08204 106.62372  97.27769  74.79930 108.02749 102.06043 102.73910\n [463]  98.30210  96.51451  88.99265 112.15082 111.46604 115.94375  84.23807\n [470]  85.07524 112.09901 114.96487  93.08427  86.61968 104.66749  81.52312\n [477] 107.53890 125.26202  69.19220  90.55874 110.66194 122.47820  96.65616\n [484] 101.16951 105.00779 119.00889 113.13891  95.40103  94.04697 104.05270\n [491]  87.74380  71.23152  92.23607 104.04363 102.25168  98.39550  76.87663\n [498] 101.75746 103.99272 130.44766  63.84948  84.69350 104.97495  81.27519\n [505] 127.17488 118.94050 106.29068  89.74936 102.73346 101.32028 110.81889\n [512]  92.29378  97.82285 105.85353 108.80561  95.70442  92.56085 113.86299\n [519]  98.91964  84.16007  79.13632 113.63607 104.84517 105.12533 118.31411\n [526] 120.05163 110.50318  72.82528  93.80288  73.30888 117.19790  89.71990\n [533]  64.02263  96.62833  92.94531 113.03401  93.77862 129.64715 106.90379\n [540]  83.00127  73.23828  94.10150  88.50190  94.29928 105.54503  90.62860\n [547]  77.73651 124.29071 126.07611 136.00708 111.68035  95.29125 100.21065\n [554]  83.28374 113.66045  74.29915  80.41735 122.60858 146.99873 101.70656\n [561] 127.86857  84.89869 114.45350  95.55938  76.44246  95.49927  96.85430\n [568]  82.96372 103.65414 101.47305 122.82922 116.94351 107.83604 110.82983\n [575]  82.20202 131.75520  79.55923  97.72255  76.42696  92.66738 132.71838\n [582] 107.62027  94.77914 111.36649  90.36953 108.95091  97.64106  81.41928\n [589] 122.18497  98.24702  96.80096  81.10725 123.21793  84.09927 106.26577\n [596] 114.68927 124.37800 116.38996 117.72074 105.26558  96.55978  83.80193\n [603] 102.45862 108.26523  84.54163 112.26953  92.81047 105.73650 100.08658\n [610]  94.73633  73.94914 100.69829  83.17773  88.27660 112.74856 126.45686\n [617] 112.68462  91.82745 103.82903 104.49059 104.80965  99.41024  82.82660\n [624] 108.40758  91.09994  82.29227 104.61440  97.82369  93.68008  82.34984\n [631]  92.89665 114.03424 113.69089  88.74115  83.98586  79.09270 101.53601\n [638] 117.89881  82.71097 121.72110 117.21259 104.75563 100.88967 116.25447\n [645]  91.71358  92.48668  97.24823  96.46099 102.75178 114.59346 101.63993\n [652]  74.94551 112.77109 128.40862  62.60296 121.57769 107.51045 110.38276\n [659]  91.49584 114.17420 112.28039 100.23119 115.82393 110.53427  99.00436\n [666] 121.11602 108.42650  96.94706  77.33700 108.94734  80.81611  82.55228\n [673]  87.48421  69.68690  99.49345  86.48225  82.23618  93.27374 108.37944\n [680] 101.39623 108.94172  89.73855 105.44062 123.01229  84.18711  99.50137\n [687] 114.18235 103.58888 123.39816 120.19881  91.10636 108.12870  86.08574\n [694]  93.75364 115.11240  99.30110 106.10595 112.52413  83.74550  91.24905\n [701] 111.69473  98.28118  90.95676  98.92392  70.56493  83.78311 102.26759\n [708]  73.71810  99.86804 102.65587  79.10315 111.80750  87.44315 102.52978\n [715]  79.44601  98.11181 116.76191 110.55508  88.47226 112.82799 132.47835\n [722]  97.86167 118.12203 109.77885  96.45568 119.76716  64.07133  98.29380\n [729] 119.17170 110.92902 110.89398 123.86520 101.57406 107.56787 111.26066\n [736]  87.56777 110.64323 114.24873  91.31716  81.48096  96.71845 100.61364\n [743]  90.37350  85.57736 110.12240  86.25883 104.27986 105.36551 116.71117\n [750]  99.83045  69.68808 109.26858  98.30770 123.92673 108.15841  75.14715\n [757] 101.53150  84.18631  69.18975 112.41133  70.87684 124.43458  94.57108\n [764]  90.59394  86.30240  75.01806 106.25217  74.32966 104.80262  84.42360\n [771] 107.83547 111.17710 103.50210  69.19273  77.67352 131.87966 124.39303\n [778]  99.71134 114.07989  82.02954 109.70765  88.06663  86.92569 101.00025\n [785] 109.72055  91.46334  91.03635 115.40219 125.20266 100.85041  80.80230\n [792]  98.11365 109.19726  81.38077  89.41521 117.94839 129.53729  80.44555\n [799]  92.83055 102.11458 105.21140  99.25227  89.32272 113.30807 109.16644\n [806] 100.39028 102.96975  88.00164  99.68645 108.29605  81.63023 101.75512\n [813]  83.03721 117.85502  90.21479  87.82157  87.28386 107.67031  95.44378\n [820]  91.31030  78.19552 120.99442 109.67209 105.15547  93.50785  69.44315\n [827]  92.25390 104.39760  88.23173  82.80917 119.12569  75.46665  84.96220\n [834]  84.80476  86.94096 112.66241  75.03379  97.00045  94.02427 119.87155\n [841] 112.58074  90.95762 113.91406  84.11943  79.58622 114.24921 101.79443\n [848]  72.83765 107.34451  92.80641  94.21833 118.66094  93.32062  95.78391\n [855]  90.81950 104.95741 107.38329 110.59427  99.88285  93.00872  63.65627\n [862] 115.33865 115.02718 109.39795  93.25303 113.22258 116.71212 103.45596\n [869]  99.32984  71.22125 122.80454 103.81553 105.92688 115.06669  98.28784\n [876]  86.40609  96.18029  84.67789 109.78707  96.41688  98.12098  95.14137\n [883] 116.58268  81.31808  97.38615  77.08540  99.58972  99.85223 105.49249\n [890] 100.27234 109.83057  99.82374 101.51323 120.64083 112.62141 122.08658\n [897] 110.78032  92.46869 101.24360  74.73096 103.12978  98.08082 115.25802\n [904] 108.05494 116.78721 134.80761  87.36230  98.43959  99.13370  91.25715\n [911] 126.22437  85.89719  96.99143 105.18443 102.63971  98.57577  96.38390\n [918] 100.31202  91.64349  92.67441 113.50428 122.30517  85.48923  98.91825\n [925] 110.79556 104.71441 122.58189  91.31363  93.46771 107.45740  94.47651\n [932] 130.04906  92.39398 105.34619 114.20043  84.39807 116.69520  78.88787\n [939]  86.32802 132.26509 116.05345  86.73532  70.03217  61.08722 129.27177\n [946] 119.94245  88.12743  79.62306 130.03107 113.30296  89.66437  97.67885\n [953] 123.16834 114.71665  83.08860 104.62574 115.60787 111.91586 113.12314\n [960]  91.32585 108.79203 129.38294  75.10807  81.20990 122.39199 128.30234\n [967] 122.40066 115.81904 105.39263 100.09077 118.45638  78.30009 125.18901\n [974]  97.58703 121.66342  95.22268 128.29722  99.45858  93.60034 110.26235\n [981]  91.51265 102.51188 123.79011  74.89064  87.20218 102.49781 128.20561\n [988] 112.58696  89.64185 104.49778 105.91580  98.45784 101.19565  84.70832\n [995] 105.56527  85.10270 114.90669  82.08889 115.21493 119.50040\n\n\n\n# é€‰æ‹©å•åˆ—ï¼ˆè¿”å› data.tableï¼‰\ndt[, .(value1)]\n\n         value1\n          &lt;num&gt;\n   1: 109.38328\n   2: 110.99871\n   3:  91.27053\n   4: 114.75093\n   5: 106.42739\n  ---          \n 996:  85.10270\n 997: 114.90669\n 998:  82.08889\n 999: 115.21493\n1000: 119.50040\n\n\n\n# é€‰æ‹©å¤šåˆ—\ndt[, .(group, value1)]\n\n       group    value1\n      &lt;char&gt;     &lt;num&gt;\n   1:      A 109.38328\n   2:      E 110.99871\n   3:      A  91.27053\n   4:      A 114.75093\n   5:      B 106.42739\n  ---                 \n 996:      C  85.10270\n 997:      B 114.90669\n 998:      B  82.08889\n 999:      B 115.21493\n1000:      C 119.50040\n\n\n\n# åˆ—è®¡ç®—\ndt[, .(mean_v1 = mean(value1), sd_v1 = sd(value1))]\n\n    mean_v1    sd_v1\n      &lt;num&gt;    &lt;num&gt;\n1: 100.7288 15.49799\n\n\n\n# ä½¿ç”¨ .() æ˜¯ list() çš„ç®€å†™\ndt[, list(total = sum(value1), count = .N)]\n\n      total count\n      &lt;num&gt; &lt;int&gt;\n1: 100728.8  1000\n\n\n\n\nåˆ†ç»„æ“ä½œ (by)\n\n# æŒ‰ group åˆ†ç»„è®¡ç®—å‡å€¼\ndt[, .(mean_v1 = mean(value1)), by = group]\n\n    group   mean_v1\n   &lt;char&gt;     &lt;num&gt;\n1:      A  99.68213\n2:      E 101.12829\n3:      B 101.04071\n4:      D  98.91708\n5:      C 102.75836\n\n\n\n# å¤šä¸ªåˆ†ç»„å˜é‡\ndt[, .(mean_v1 = mean(value1)), by = .(group, high = value2 &gt; 50)]\n\n     group   high   mean_v1\n    &lt;char&gt; &lt;lgcl&gt;     &lt;num&gt;\n 1:      A   TRUE 100.82439\n 2:      E   TRUE 101.65744\n 3:      A  FALSE  98.55085\n 4:      B  FALSE 100.63297\n 5:      D   TRUE 100.54441\n 6:      B   TRUE 101.35607\n 7:      D  FALSE  97.30744\n 8:      C   TRUE 103.66507\n 9:      C  FALSE 101.76574\n10:      E  FALSE 100.40919\n\n\n\n# åˆ†ç»„è®¡æ•°\ndt[, .N, by = group]\n\n    group     N\n   &lt;char&gt; &lt;int&gt;\n1:      A   207\n2:      E   184\n3:      B   227\n4:      D   183\n5:      C   199\n\n\n\n\nç»„åˆä½¿ç”¨\n\n# ç­›é€‰ + è®¡ç®— + åˆ†ç»„\ndt[value1 &gt; 90, .(mean_v2 = mean(value2), count = .N), by = group]\n\n    group  mean_v2 count\n   &lt;char&gt;    &lt;num&gt; &lt;int&gt;\n1:      A 50.56512   159\n2:      E 51.99746   132\n3:      B 50.89273   165\n4:      D 50.36106   127\n5:      C 50.79280   158",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "data.table å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "3002-datatable.html#æ•°æ®ä¿®æ”¹",
    "href": "3002-datatable.html#æ•°æ®ä¿®æ”¹",
    "title": "data.table å®Œå…¨æŒ‡å—ï¼šé«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "æ•°æ®ä¿®æ”¹",
    "text": "æ•°æ®ä¿®æ”¹\n\næ·»åŠ /ä¿®æ”¹åˆ— (:=)\n:= æ“ä½œç¬¦æ˜¯ data.table æœ€å¼ºå¤§çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œå®ƒå¯ä»¥åŸåœ°ä¿®æ”¹æ•°æ®ï¼Œæ— éœ€å¤åˆ¶ã€‚\n\n# æ·»åŠ æ–°åˆ—\ndt[, ratio := value1 / value2]\nhead(dt)\n\n      id  group    value1   value2    ratio\n   &lt;int&gt; &lt;char&gt;     &lt;num&gt;    &lt;num&gt;    &lt;num&gt;\n1:     1      A 109.38328 61.91797 1.766584\n2:     2      E 110.99871 76.73912 1.446442\n3:     3      A  91.27053 30.86128 2.957445\n4:     4      A 114.75093 42.31044 2.712119\n5:     5      B 106.42739 31.52593 3.375869\n6:     6      D 106.74890 50.33621 2.120718\n\n\n\n# åŒæ—¶æ·»åŠ å¤šåˆ—\ndt[, `:=`(\n    v1_centered = value1 - mean(value1),\n    v2_log = log(value2)\n)]\nhead(dt)\n\n      id  group    value1   value2    ratio v1_centered   v2_log\n   &lt;int&gt; &lt;char&gt;     &lt;num&gt;    &lt;num&gt;    &lt;num&gt;       &lt;num&gt;    &lt;num&gt;\n1:     1      A 109.38328 61.91797 1.766584    8.654492 4.125810\n2:     2      E 110.99871 76.73912 1.446442   10.269924 4.340412\n3:     3      A  91.27053 30.86128 2.957445   -9.458260 3.429502\n4:     4      A 114.75093 42.31044 2.712119   14.022141 3.745034\n5:     5      B 106.42739 31.52593 3.375869    5.698605 3.450810\n6:     6      D 106.74890 50.33621 2.120718    6.020111 3.918725\n\n\n\n# æŒ‰æ¡ä»¶ä¿®æ”¹åˆ—\ndt[group == \"A\", flag := \"ç‰¹æ®Šç»„\"]\ndt[is.na(flag), flag := \"æ™®é€šç»„\"]\ntable(dt$flag)\n\n\næ™®é€šç»„ ç‰¹æ®Šç»„ \n   793    207 \n\n\n\n\nåˆ é™¤åˆ—\n\n# åˆ é™¤å•åˆ—\ndt[, ratio := NULL]\n\n# åˆ é™¤å¤šåˆ—\ndt[, c(\"v1_centered\", \"v2_log\", \"flag\") := NULL]\nhead(dt)\n\n      id  group    value1   value2\n   &lt;int&gt; &lt;char&gt;     &lt;num&gt;    &lt;num&gt;\n1:     1      A 109.38328 61.91797\n2:     2      E 110.99871 76.73912\n3:     3      A  91.27053 30.86128\n4:     4      A 114.75093 42.31044\n5:     5      B 106.42739 31.52593\n6:     6      D 106.74890 50.33621",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "data.table å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "3002-datatable.html#é”®-key-ä¸ç´¢å¼•",
    "href": "3002-datatable.html#é”®-key-ä¸ç´¢å¼•",
    "title": "data.table å®Œå…¨æŒ‡å—ï¼šé«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "é”® (Key) ä¸ç´¢å¼•",
    "text": "é”® (Key) ä¸ç´¢å¼•\n\nè®¾ç½®é”®\nè®¾ç½®é”®å¯ä»¥å¤§å¹…æå‡ç­›é€‰å’Œè¿æ¥æ“ä½œçš„é€Ÿåº¦ã€‚\n\n# è®¾ç½®å•ä¸ªé”®\nsetkey(dt, group)\n\n# æŸ¥çœ‹å½“å‰é”®\nkey(dt)\n\n[1] \"group\"\n\n\n\n# ä½¿ç”¨é”®ç­›é€‰ï¼ˆæ›´å¿«ï¼‰\ndt[\"A\"] # ç­‰ä»·äº dt[group == \"A\"]\n\nKey: &lt;group&gt;\n        id  group    value1   value2\n     &lt;int&gt; &lt;char&gt;     &lt;num&gt;    &lt;num&gt;\n  1:     1      A 109.38328 61.91797\n  2:     3      A  91.27053 30.86128\n  3:     4      A 114.75093 42.31044\n  4:     9      A 109.67785 49.72934\n  5:    11      A 102.19782 54.50599\n ---                                \n203:   963      A  75.10807 56.35975\n204:   965      A 122.39199 46.05880\n205:   987      A 128.20561 31.56337\n206:   993      A 101.19565 59.09193\n207:   995      A 105.56527 45.23885\n\n\n\n# è®¾ç½®å¤šä¸ªé”®\nsetkey(dt, group, id)\n\n\n\näºŒçº§ç´¢å¼•\n\n# åˆ›å»ºäºŒçº§ç´¢å¼•ï¼ˆä¸æ”¹å˜ç‰©ç†æ’åºï¼‰\nsetindex(dt, value1)\n\n# æŸ¥çœ‹ç´¢å¼•\nindices(dt)\n\n[1] \"value1\"",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "data.table å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "3002-datatable.html#é“¾å¼æ“ä½œ",
    "href": "3002-datatable.html#é“¾å¼æ“ä½œ",
    "title": "data.table å®Œå…¨æŒ‡å—ï¼šé«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "é“¾å¼æ“ä½œ",
    "text": "é“¾å¼æ“ä½œ\ndata.table æ”¯æŒé“¾å¼æ“ä½œï¼Œç±»ä¼¼äº dplyr çš„ç®¡é“ã€‚\n\n# é“¾å¼æ“ä½œ\nresult &lt;- dt[value1 &gt; 100][, .(mean_v2 = mean(value2)), by = group][order(-mean_v2)]\nresult\n\n    group  mean_v2\n   &lt;char&gt;    &lt;num&gt;\n1:      E 51.10669\n2:      A 51.03236\n3:      B 50.88711\n4:      D 50.41433\n5:      C 50.25193",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "data.table å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "3002-datatable.html#è¿æ¥æ“ä½œ",
    "href": "3002-datatable.html#è¿æ¥æ“ä½œ",
    "title": "data.table å®Œå…¨æŒ‡å—ï¼šé«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "è¿æ¥æ“ä½œ",
    "text": "è¿æ¥æ“ä½œ\n\nå‡†å¤‡æµ‹è¯•æ•°æ®\n\n# ä¸»è¡¨\norders &lt;- data.table(\n    order_id = 1:5,\n    customer_id = c(101, 102, 101, 103, 104),\n    amount = c(100, 200, 150, 300, 250)\n)\n\n# å®¢æˆ·è¡¨\ncustomers &lt;- data.table(\n    customer_id = c(101, 102, 103, 105),\n    name = c(\"Alice\", \"Bob\", \"Carol\", \"Dave\")\n)\n\n\n\nå†…è¿æ¥\n\n# æ–¹æ³•1: merge\nmerge(orders, customers, by = \"customer_id\")\n\nKey: &lt;customer_id&gt;\n   customer_id order_id amount   name\n         &lt;num&gt;    &lt;int&gt;  &lt;num&gt; &lt;char&gt;\n1:         101        1    100  Alice\n2:         101        3    150  Alice\n3:         102        2    200    Bob\n4:         103        4    300  Carol\n\n\n\n# æ–¹æ³•2: è®¾ç½®é”®åä½¿ç”¨ []\nsetkey(orders, customer_id)\nsetkey(customers, customer_id)\ncustomers[orders, nomatch = 0]\n\nKey: &lt;customer_id&gt;\n   customer_id   name order_id amount\n         &lt;num&gt; &lt;char&gt;    &lt;int&gt;  &lt;num&gt;\n1:         101  Alice        1    100\n2:         101  Alice        3    150\n3:         102    Bob        2    200\n4:         103  Carol        4    300\n\n\n\n\nå·¦è¿æ¥\n\n# ä¿ç•™ orders çš„æ‰€æœ‰è¡Œ\nmerge(orders, customers, by = \"customer_id\", all.x = TRUE)\n\nKey: &lt;customer_id&gt;\n   customer_id order_id amount   name\n         &lt;num&gt;    &lt;int&gt;  &lt;num&gt; &lt;char&gt;\n1:         101        1    100  Alice\n2:         101        3    150  Alice\n3:         102        2    200    Bob\n4:         103        4    300  Carol\n5:         104        5    250   &lt;NA&gt;\n\n\n\n# æˆ–è€…\ncustomers[orders]\n\nKey: &lt;customer_id&gt;\n   customer_id   name order_id amount\n         &lt;num&gt; &lt;char&gt;    &lt;int&gt;  &lt;num&gt;\n1:         101  Alice        1    100\n2:         101  Alice        3    150\n3:         102    Bob        2    200\n4:         103  Carol        4    300\n5:         104   &lt;NA&gt;        5    250\n\n\n\n\nå³è¿æ¥ä¸å…¨è¿æ¥\n\n# å³è¿æ¥\nmerge(orders, customers, by = \"customer_id\", all.y = TRUE)\n\nKey: &lt;customer_id&gt;\n   customer_id order_id amount   name\n         &lt;num&gt;    &lt;int&gt;  &lt;num&gt; &lt;char&gt;\n1:         101        1    100  Alice\n2:         101        3    150  Alice\n3:         102        2    200    Bob\n4:         103        4    300  Carol\n5:         105       NA     NA   Dave\n\n# å…¨è¿æ¥\nmerge(orders, customers, by = \"customer_id\", all = TRUE)\n\nKey: &lt;customer_id&gt;\n   customer_id order_id amount   name\n         &lt;num&gt;    &lt;int&gt;  &lt;num&gt; &lt;char&gt;\n1:         101        1    100  Alice\n2:         101        3    150  Alice\n3:         102        2    200    Bob\n4:         103        4    300  Carol\n5:         104        5    250   &lt;NA&gt;\n6:         105       NA     NA   Dave",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "data.table å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "3002-datatable.html#ç‰¹æ®Šç¬¦å·",
    "href": "3002-datatable.html#ç‰¹æ®Šç¬¦å·",
    "title": "data.table å®Œå…¨æŒ‡å—ï¼šé«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "ç‰¹æ®Šç¬¦å·",
    "text": "ç‰¹æ®Šç¬¦å·\ndata.table æä¾›äº†ä¸€äº›ç‰¹æ®Šç¬¦å·æ¥ç®€åŒ–ä»£ç ï¼š\n\n\n\n\n\n\n\n\nç¬¦å·\nå«ä¹‰\nç¤ºä¾‹\n\n\n\n\n.N\nè¡Œæ•°\ndt[, .N]\n\n\n.SD\nå­æ•°æ®è¡¨\ndt[, lapply(.SD, mean), by = group]\n\n\n.SDcols\næŒ‡å®š .SD çš„åˆ—\ndt[, lapply(.SD, mean), .SDcols = c(\"value1\", \"value2\")]\n\n\n.I\nè¡Œç´¢å¼•\ndt[, .I[which.max(value1)], by = group]\n\n\n.GRP\nç»„ç¼–å·\ndt[, .GRP, by = group]\n\n\n.BY\nå½“å‰åˆ†ç»„å€¼\ndt[, print(.BY), by = group]\n\n\n\n\n.SD ä½¿ç”¨ç¤ºä¾‹\n\n# å¯¹æ‰€æœ‰æ•°å€¼åˆ—è®¡ç®—å‡å€¼\ndt[, lapply(.SD, mean), by = group, .SDcols = c(\"value1\", \"value2\")]\n\nKey: &lt;group&gt;\n    group    value1   value2\n   &lt;char&gt;     &lt;num&gt;    &lt;num&gt;\n1:      A  99.68213 50.13846\n2:      B 101.04071 50.90249\n3:      C 102.75836 50.54277\n4:      D  98.91708 50.37764\n5:      E 101.12829 51.34556\n\n\n\n# æ¯ç»„å–å‰2è¡Œ\ndt[, head(.SD, 2), by = group]\n\nKey: &lt;group&gt;\n     group    id    value1   value2\n    &lt;char&gt; &lt;int&gt;     &lt;num&gt;    &lt;num&gt;\n 1:      A     1 109.38328 61.91797\n 2:      A     3  91.27053 30.86128\n 3:      B     5 106.42739 31.52593\n 4:      B     7 117.95417 37.42528\n 5:      C    16  96.51668 52.25394\n 6:      C    19 106.74516 42.14377\n 7:      D     6 106.74890 50.33621\n 8:      D    10  96.44790 28.38104\n 9:      E     2 110.99871 76.73912\n10:      E    12 143.46326 63.05377",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "data.table å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "3002-datatable.html#è¯­æ³•å¯¹æ¯”data.table-vs-dplyr",
    "href": "3002-datatable.html#è¯­æ³•å¯¹æ¯”data.table-vs-dplyr",
    "title": "data.table å®Œå…¨æŒ‡å—ï¼šé«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "è¯­æ³•å¯¹æ¯”ï¼šdata.table vs dplyr",
    "text": "è¯­æ³•å¯¹æ¯”ï¼šdata.table vs dplyr\n\nç­›é€‰è¡Œ\n\n# data.table\ndt[value1 &gt; 100]\n\nKey: &lt;group, id&gt;\n        id  group   value1   value2\n     &lt;int&gt; &lt;char&gt;    &lt;num&gt;    &lt;num&gt;\n  1:     1      A 109.3833 61.91797\n  2:     4      A 114.7509 42.31044\n  3:     9      A 109.6778 49.72934\n  4:    11      A 102.1978 54.50599\n  5:    17      A 125.7035 64.97103\n ---                               \n516:   930      E 107.4574 46.70836\n517:   962      E 129.3829 69.26010\n518:   967      E 122.4007 29.44299\n519:   969      E 105.3926 33.16635\n520:   971      E 118.4564 48.74239\n\n# dplyr\ntbl &lt;- as_tibble(dt)\nfilter(tbl, value1 &gt; 100)\n\n# A tibble: 520 Ã— 4\n      id group value1 value2\n   &lt;int&gt; &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n 1     1 A       109.   61.9\n 2     4 A       115.   42.3\n 3     9 A       110.   49.7\n 4    11 A       102.   54.5\n 5    17 A       126.   65.0\n 6    29 A       101.   36.4\n 7    55 A       120.   65.4\n 8    79 A       115.   46.0\n 9    91 A       114.   65.9\n10    92 A       106.   60.0\n# â„¹ 510 more rows\n\n\n\n\né€‰æ‹©åˆ—\n\n# data.table\ndt[, .(group, value1)]\n\nKey: &lt;group&gt;\n       group    value1\n      &lt;char&gt;     &lt;num&gt;\n   1:      A 109.38328\n   2:      A  91.27053\n   3:      A 114.75093\n   4:      A 109.67785\n   5:      A 102.19782\n  ---                 \n 996:      E 105.39263\n 997:      E 118.45638\n 998:      E  93.60034\n 999:      E  74.89064\n1000:      E  84.70832\n\n# dplyr\nselect(tbl, group, value1)\n\n# A tibble: 1,000 Ã— 2\n   group value1\n   &lt;chr&gt;  &lt;dbl&gt;\n 1 A      109. \n 2 A       91.3\n 3 A      115. \n 4 A      110. \n 5 A      102. \n 6 A      126. \n 7 A       82.4\n 8 A      101. \n 9 A       79.7\n10 A      120. \n# â„¹ 990 more rows\n\n\n\n\næ·»åŠ åˆ—\n\n# data.table (åŸåœ°ä¿®æ”¹)\ndt_copy &lt;- copy(dt)\ndt_copy[, new_col := value1 * 2]\n\n# dplyr (è¿”å›æ–°æ•°æ®)\ntbl &lt;- mutate(tbl, new_col = value1 * 2)\n\n\n\nåˆ†ç»„æ±‡æ€»\n\n# data.table\ndt[, .(mean_v1 = mean(value1)), by = group]\n\nKey: &lt;group&gt;\n    group   mean_v1\n   &lt;char&gt;     &lt;num&gt;\n1:      A  99.68213\n2:      B 101.04071\n3:      C 102.75836\n4:      D  98.91708\n5:      E 101.12829\n\n# dplyr\ntbl |&gt;\n    group_by(group) |&gt;\n    summarise(mean_v1 = mean(value1))\n\n# A tibble: 5 Ã— 2\n  group mean_v1\n  &lt;chr&gt;   &lt;dbl&gt;\n1 A        99.7\n2 B       101. \n3 C       103. \n4 D        98.9\n5 E       101. \n\n\n\n\næ’åº\n\n# data.table\ndt[order(-value1)]\n\n         id  group    value1   value2\n      &lt;int&gt; &lt;char&gt;     &lt;num&gt;    &lt;num&gt;\n   1:    58      E 147.95749 73.55177\n   2:   559      D 146.99873 56.59727\n   3:    12      E 143.46326 63.05377\n   4:    15      B 142.76378 61.96405\n   5:    38      E 140.39107 52.07553\n  ---                                \n 996:   861      E  63.65627 52.86846\n 997:   655      E  62.60296 38.45161\n 998:   319      B  62.22563 52.48867\n 999:   944      A  61.08722 44.87271\n1000:    70      E  59.74742 63.94011\n\n# dplyr\narrange(tbl, desc(value1))\n\n# A tibble: 1,000 Ã— 5\n      id group value1 value2 new_col\n   &lt;int&gt; &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;\n 1    58 E       148.   73.6    296.\n 2   559 D       147.   56.6    294.\n 3    12 E       143.   63.1    287.\n 4    15 B       143.   62.0    286.\n 5    38 E       140.   52.1    281.\n 6   288 A       139.   42.6    278.\n 7   550 C       136.   42.2    272.\n 8    35 B       135.   55.6    271.\n 9    61 E       135.   37.1    270.\n10   906 C       135.   43.5    270.\n# â„¹ 990 more rows",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "data.table å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "3002-datatable.html#æ€§èƒ½å¯¹æ¯”",
    "href": "3002-datatable.html#æ€§èƒ½å¯¹æ¯”",
    "title": "data.table å®Œå…¨æŒ‡å—ï¼šé«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "æ€§èƒ½å¯¹æ¯”",
    "text": "æ€§èƒ½å¯¹æ¯”\n\nå¤§æ•°æ®æµ‹è¯•\n\n# åˆ›å»ºå¤§æ•°æ®é›†\nset.seed(123)\nn &lt;- 1e6\nbig_df &lt;- data.frame(\n    id = 1:n,\n    group = sample(LETTERS, n, replace = TRUE),\n    value = rnorm(n)\n)\nbig_tbl &lt;- as_tibble(big_df)\nbig_dt &lt;- as.data.table(big_df)\n\n\n\nåˆ†ç»„èšåˆæ€§èƒ½\n\nlibrary(microbenchmark)\n\n# æ€§èƒ½å¯¹æ¯”\nbenchmark_result &lt;- microbenchmark(\n    data.frame = aggregate(value ~ group, data = big_df, FUN = mean),\n    dplyr = big_tbl |&gt; group_by(group) |&gt; summarise(mean = mean(value)),\n    data.table = big_dt[, .(mean = mean(value)), by = group],\n    times = 5\n)\nprint(benchmark_result)\n\nUnit: milliseconds\n       expr      min       lq      mean   median       uq      max neval cld\n data.frame 344.9281 346.5265 380.13652 352.5747 419.8401 436.8132     5  a \n      dplyr  25.9726  28.2750  28.58856  28.3169  29.2029  31.1754     5   b\n data.table  15.6374  18.2113  18.68748  18.3039  19.2495  22.0353     5   b\n\n\n\n\nç­›é€‰æ€§èƒ½ (è®¾ç½®é”®å)\n\n# è®¾ç½®é”®\nsetkey(big_dt, group)\n\nbenchmark_filter &lt;- microbenchmark(\n    data.frame = big_df[big_df$group == \"A\", ],\n    dplyr = filter(big_tbl, group == \"A\"),\n    data.table = big_dt[\"A\"],\n    times = 5\n)\nprint(benchmark_filter)\n\nUnit: milliseconds\n       expr     min      lq     mean  median      uq     max neval cld\n data.frame 11.2067 11.5501 11.70038 11.5956 12.0545 12.0950     5 a  \n      dplyr 12.2753 13.5412 14.03212 13.9363 14.3952 16.0126     5  b \n data.table  1.4456  1.5459  1.75416  1.7641  1.9690  2.0462     5   c",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "data.table å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "3002-datatable.html#è¯»å†™æ–‡ä»¶",
    "href": "3002-datatable.html#è¯»å†™æ–‡ä»¶",
    "title": "data.table å®Œå…¨æŒ‡å—ï¼šé«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "è¯»å†™æ–‡ä»¶",
    "text": "è¯»å†™æ–‡ä»¶\nfread å’Œ fwrite æ˜¯ data.table æä¾›çš„é«˜æ€§èƒ½è¯»å†™å‡½æ•°ã€‚\n\nfread - å¿«é€Ÿè¯»å–\n\n# åŸºæœ¬è¯»å–\ndt &lt;- fread(\"data.csv\")\n\n# æŒ‡å®šåˆ—ç±»å‹\ndt &lt;- fread(\"data.csv\", colClasses = c(\"integer\", \"character\", \"numeric\"))\n\n# é€‰æ‹©ç‰¹å®šåˆ—\ndt &lt;- fread(\"data.csv\", select = c(\"col1\", \"col2\"))\n\n# è·³è¿‡è¡Œ\ndt &lt;- fread(\"data.csv\", skip = 5)\n\n# æŒ‡å®šç¼–ç \ndt &lt;- fread(\"data.csv\", encoding = \"UTF-8\")\n\n\n\nfwrite - å¿«é€Ÿå†™å…¥\n\n# åŸºæœ¬å†™å…¥\nfwrite(dt, \"output.csv\")\n\n# å‹ç¼©å†™å…¥\nfwrite(dt, \"output.csv.gz\")\n\n# ä¸å†™å…¥è¡Œå\nfwrite(dt, \"output.csv\", row.names = FALSE)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "data.table å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "3002-datatable.html#å®æˆ˜æ¡ˆä¾‹",
    "href": "3002-datatable.html#å®æˆ˜æ¡ˆä¾‹",
    "title": "data.table å®Œå…¨æŒ‡å—ï¼šé«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "å®æˆ˜æ¡ˆä¾‹",
    "text": "å®æˆ˜æ¡ˆä¾‹\n\næ¡ˆä¾‹ï¼šé”€å”®æ•°æ®åˆ†æ\n\n# åˆ›å»ºé”€å”®æ•°æ®\nset.seed(42)\nsales &lt;- data.table(\n    date = rep(seq(as.Date(\"2024-01-01\"), by = \"day\", length.out = 365), each = 10),\n    product = sample(c(\"A\", \"B\", \"C\", \"D\", \"E\"), 3650, replace = TRUE),\n    region = sample(c(\"ä¸œéƒ¨\", \"è¥¿éƒ¨\", \"å—éƒ¨\", \"åŒ—éƒ¨\"), 3650, replace = TRUE),\n    quantity = sample(1:100, 3650, replace = TRUE),\n    price = round(runif(3650, 10, 100), 2)\n)\nsales[, revenue := quantity * price]\nhead(sales)\n\n         date product region quantity price revenue\n       &lt;Date&gt;  &lt;char&gt; &lt;char&gt;    &lt;int&gt; &lt;num&gt;   &lt;num&gt;\n1: 2024-01-01       A   å—éƒ¨       51 64.49 3288.99\n2: 2024-01-01       E   è¥¿éƒ¨       98 88.43 8666.14\n3: 2024-01-01       A   å—éƒ¨       12 59.22  710.64\n4: 2024-01-01       A   ä¸œéƒ¨       73 13.67  997.91\n5: 2024-01-01       B   ä¸œéƒ¨       32 26.03  832.96\n6: 2024-01-01       D   ä¸œéƒ¨       86 63.29 5442.94\n\n\n\n# 1. æŒ‰äº§å“ç»Ÿè®¡æ€»é”€å”®é¢\nsales[, .(total_revenue = sum(revenue)), by = product][order(-total_revenue)]\n\n   product total_revenue\n    &lt;char&gt;         &lt;num&gt;\n1:       B       2145022\n2:       D       2011244\n3:       E       2000360\n4:       C       1912503\n5:       A       1828960\n\n\n\n# 2. æ¯æœˆæ¯äº§å“é”€å”®è¶‹åŠ¿\nsales[, month := format(date, \"%Y-%m\")]\nmonthly_sales &lt;- sales[, .(\n    total_qty = sum(quantity),\n    total_revenue = sum(revenue),\n    avg_price = mean(price)\n), by = .(month, product)]\nhead(monthly_sales, 10)\n\n      month product total_qty total_revenue avg_price\n     &lt;char&gt;  &lt;char&gt;     &lt;int&gt;         &lt;num&gt;     &lt;num&gt;\n 1: 2024-01       A      3213      167881.0  53.17200\n 2: 2024-01       E      3281      178075.7  55.05397\n 3: 2024-01       B      3626      209151.9  55.12597\n 4: 2024-01       D      3456      188592.2  57.64355\n 5: 2024-01       C      2186      118288.5  54.69896\n 6: 2024-02       B      3786      199309.1  51.50944\n 7: 2024-02       E      3497      178432.6  50.41534\n 8: 2024-02       C      3302      178630.4  55.05194\n 9: 2024-02       D      2435      130665.6  55.44784\n10: 2024-02       A      2588      136104.5  56.20062\n\n\n\n# 3. å„åœ°åŒºé”€å”®æ’å\nregion_rank &lt;- sales[, .(revenue = sum(revenue)), by = region][order(-revenue)]\nregion_rank[, rank := .I]\nregion_rank\n\n   region revenue  rank\n   &lt;char&gt;   &lt;num&gt; &lt;int&gt;\n1:   ä¸œéƒ¨ 2605697     1\n2:   è¥¿éƒ¨ 2484730     2\n3:   åŒ—éƒ¨ 2420134     3\n4:   å—éƒ¨ 2387529     4\n\n\n\n# 4. æ‰¾å‡ºæ¯ä¸ªäº§å“é”€å”®æœ€å¥½çš„ä¸€å¤©\nbest_days &lt;- sales[, .SD[which.max(revenue)], by = product]\nbest_days[, .(product, date, revenue)]\n\n   product       date revenue\n    &lt;char&gt;     &lt;Date&gt;   &lt;num&gt;\n1:       A 2024-05-04 9677.69\n2:       E 2024-12-16 9672.30\n3:       B 2024-08-21 9880.20\n4:       D 2024-12-05 9547.16\n5:       C 2024-06-21 9462.00",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "data.table å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "3002-datatable.html#å¸¸è§é—®é¢˜",
    "href": "3002-datatable.html#å¸¸è§é—®é¢˜",
    "title": "data.table å®Œå…¨æŒ‡å—ï¼šé«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "å¸¸è§é—®é¢˜",
    "text": "å¸¸è§é—®é¢˜\n\n1. é¿å…æ„å¤–ä¿®æ”¹\n\n# é”™è¯¯ï¼šç›´æ¥èµ‹å€¼ä¼šåˆ›å»ºå¼•ç”¨\ndt1 &lt;- data.table(a = 1:3)\ndt2 &lt;- dt1 # dt2 å’Œ dt1 æŒ‡å‘åŒä¸€æ•°æ®ï¼\ndt2[, b := 4:6]\nprint(dt1) # dt1 ä¹Ÿè¢«ä¿®æ”¹äº†ï¼\n\n       a     b\n   &lt;int&gt; &lt;int&gt;\n1:     1     4\n2:     2     5\n3:     3     6\n\n\n\n# æ­£ç¡®ï¼šä½¿ç”¨ copy() åˆ›å»ºå‰¯æœ¬\ndt1 &lt;- data.table(a = 1:3)\ndt2 &lt;- copy(dt1)\ndt2[, b := 4:6]\nprint(dt1) # dt1 æœªè¢«ä¿®æ”¹\n\n       a\n   &lt;int&gt;\n1:     1\n2:     2\n3:     3\n\n\n\n\n2. å˜é‡ä½œä¸ºåˆ—å\n\n# ä½¿ç”¨å˜é‡ä½œä¸ºåˆ—å\ncol_name &lt;- \"value1\"\n\n# æ–¹æ³•1: ä½¿ç”¨ get()\ndt[, mean(get(col_name)), by = group]\n\nKey: &lt;group&gt;\n    group        V1\n   &lt;char&gt;     &lt;num&gt;\n1:      A  99.68213\n2:      B 101.04071\n3:      C 102.75836\n4:      D  98.91708\n5:      E 101.12829\n\n# æ–¹æ³•2: ä½¿ç”¨ env å‚æ•° (data.table &gt;= 1.15.0)\n# dt[, mean(col), by = group, env = list(col = col_name)]\n\n# æ–¹æ³•3: ä½¿ç”¨ .SDcols\ndt[, lapply(.SD, mean), by = group, .SDcols = col_name]\n\nKey: &lt;group&gt;\n    group    value1\n   &lt;char&gt;     &lt;num&gt;\n1:      A  99.68213\n2:      B 101.04071\n3:      C 102.75836\n4:      D  98.91708\n5:      E 101.12829",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "data.table å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "3002-datatable.html#æ€»ç»“",
    "href": "3002-datatable.html#æ€»ç»“",
    "title": "data.table å®Œå…¨æŒ‡å—ï¼šé«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nç‰¹æ€§\ndata.frame\ntibble\ndata.table\n\n\n\n\né€Ÿåº¦\næ…¢\nä¸­ç­‰\næœ€å¿«\n\n\nå†…å­˜\nä¸€èˆ¬\nä¸€èˆ¬\næœ€ä¼˜\n\n\nè¯­æ³•\nåŸºç¡€R\ntidyverse\nç‹¬ç‰¹è¯­æ³•\n\n\nå­¦ä¹ æ›²çº¿\nä½\nä¸­\nè¾ƒé«˜\n\n\né€‚ç”¨åœºæ™¯\nå°æ•°æ®\næ—¥å¸¸åˆ†æ\nå¤§æ•°æ®\n\n\n\n\n[!TIP] é€‰æ‹©å»ºè®®ï¼š - æ•°æ®é‡ &lt; 100ä¸‡è¡Œï¼štibble + dplyr è¯­æ³•æ›´å‹å¥½ - æ•°æ®é‡ &gt; 100ä¸‡è¡Œï¼šdata.table é€Ÿåº¦ä¼˜åŠ¿æ˜æ˜¾ - è¿½æ±‚æè‡´æ€§èƒ½ï¼šdata.table æ˜¯æœ€ä½³é€‰æ‹©",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "data.table å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "3002-datatable.html#å‚è€ƒèµ„æ–™",
    "href": "3002-datatable.html#å‚è€ƒèµ„æ–™",
    "title": "data.table å®Œå…¨æŒ‡å—ï¼šé«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "å‚è€ƒèµ„æ–™",
    "text": "å‚è€ƒèµ„æ–™\n\ndata.table å®˜æ–¹æ–‡æ¡£\ndata.table Cheat Sheet\nDowle, M., & Srinivasan, A. (2021). data.table: Extension of data.frame. R package.",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "data.table å®Œå…¨æŒ‡å—"
    ]
  },
  {
    "objectID": "3004-web-scraping.html",
    "href": "3004-web-scraping.html",
    "title": "R è¯­è¨€ç½‘ç»œçˆ¬è™«å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "ç½‘ç»œçˆ¬è™«ï¼ˆWeb Scrapingï¼‰ æ˜¯ä¸€ç§è‡ªåŠ¨åŒ–ä»ç½‘é¡µæå–æ•°æ®çš„æŠ€æœ¯ã€‚é€šè¿‡ç¼–ç¨‹æ–¹å¼è®¿é—®ç½‘é¡µï¼Œè§£æ HTML å†…å®¹ï¼Œä»ä¸­æå–æ‰€éœ€ä¿¡æ¯ã€‚\n\n\n\n\n\nåœºæ™¯\nç¤ºä¾‹\n\n\n\n\næ•°æ®æ”¶é›†\næ”¶é›†å•†å“ä»·æ ¼ã€æ–°é—»æ–‡ç« ã€è¯„è®ºæ•°æ®\n\n\nå­¦æœ¯ç ”ç©¶\nè·å–å…¬å¼€æ•°æ®é›†ã€æ–‡çŒ®ä¿¡æ¯\n\n\nå¸‚åœºåˆ†æ\nç«å“ç›‘æ§ã€èˆ†æƒ…åˆ†æ\n\n\nä¸ªäººä½¿ç”¨\næ•´ç†æ”¶è—ã€è‡ªåŠ¨åŒ–ä»»åŠ¡\n\n\n\n\n\n\n\nâš ï¸ é‡è¦æé†’ï¼šåœ¨è¿›è¡Œç½‘ç»œçˆ¬è™«æ—¶ï¼Œè¯·åŠ¡å¿…ï¼š\n\néµå®ˆ robots.txtï¼šç½‘ç«™çš„ robots.txt æ–‡ä»¶å®šä¹‰äº†å…è®¸çˆ¬å–çš„èŒƒå›´\nå°Šé‡æœåŠ¡æ¡æ¬¾ï¼šä¸è¦è¿åç½‘ç«™çš„ä½¿ç”¨æ¡æ¬¾\næ§åˆ¶è¯·æ±‚é¢‘ç‡ï¼šé¿å…ç»™æœåŠ¡å™¨é€ æˆè´Ÿæ‹…ï¼ˆå»ºè®®æ¯æ¬¡è¯·æ±‚é—´éš” 1-3 ç§’ï¼‰\nä»…ç”¨äºåˆæ³•ç›®çš„ï¼šå¦‚å­¦æœ¯ç ”ç©¶ã€ä¸ªäººä½¿ç”¨\nä¿æŠ¤éšç§ï¼šä¸æ”¶é›†ä¸ªäººæ•æ„Ÿä¿¡æ¯",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "ç½‘ç»œçˆ¬è™«å…¥é—¨"
    ]
  },
  {
    "objectID": "3004-web-scraping.html#ä»€ä¹ˆæ˜¯ç½‘ç»œçˆ¬è™«",
    "href": "3004-web-scraping.html#ä»€ä¹ˆæ˜¯ç½‘ç»œçˆ¬è™«",
    "title": "R è¯­è¨€ç½‘ç»œçˆ¬è™«å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "ç½‘ç»œçˆ¬è™«ï¼ˆWeb Scrapingï¼‰ æ˜¯ä¸€ç§è‡ªåŠ¨åŒ–ä»ç½‘é¡µæå–æ•°æ®çš„æŠ€æœ¯ã€‚é€šè¿‡ç¼–ç¨‹æ–¹å¼è®¿é—®ç½‘é¡µï¼Œè§£æ HTML å†…å®¹ï¼Œä»ä¸­æå–æ‰€éœ€ä¿¡æ¯ã€‚\n\n\n\n\n\nåœºæ™¯\nç¤ºä¾‹\n\n\n\n\næ•°æ®æ”¶é›†\næ”¶é›†å•†å“ä»·æ ¼ã€æ–°é—»æ–‡ç« ã€è¯„è®ºæ•°æ®\n\n\nå­¦æœ¯ç ”ç©¶\nè·å–å…¬å¼€æ•°æ®é›†ã€æ–‡çŒ®ä¿¡æ¯\n\n\nå¸‚åœºåˆ†æ\nç«å“ç›‘æ§ã€èˆ†æƒ…åˆ†æ\n\n\nä¸ªäººä½¿ç”¨\næ•´ç†æ”¶è—ã€è‡ªåŠ¨åŒ–ä»»åŠ¡\n\n\n\n\n\n\n\nâš ï¸ é‡è¦æé†’ï¼šåœ¨è¿›è¡Œç½‘ç»œçˆ¬è™«æ—¶ï¼Œè¯·åŠ¡å¿…ï¼š\n\néµå®ˆ robots.txtï¼šç½‘ç«™çš„ robots.txt æ–‡ä»¶å®šä¹‰äº†å…è®¸çˆ¬å–çš„èŒƒå›´\nå°Šé‡æœåŠ¡æ¡æ¬¾ï¼šä¸è¦è¿åç½‘ç«™çš„ä½¿ç”¨æ¡æ¬¾\næ§åˆ¶è¯·æ±‚é¢‘ç‡ï¼šé¿å…ç»™æœåŠ¡å™¨é€ æˆè´Ÿæ‹…ï¼ˆå»ºè®®æ¯æ¬¡è¯·æ±‚é—´éš” 1-3 ç§’ï¼‰\nä»…ç”¨äºåˆæ³•ç›®çš„ï¼šå¦‚å­¦æœ¯ç ”ç©¶ã€ä¸ªäººä½¿ç”¨\nä¿æŠ¤éšç§ï¼šä¸æ”¶é›†ä¸ªäººæ•æ„Ÿä¿¡æ¯",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "ç½‘ç»œçˆ¬è™«å…¥é—¨"
    ]
  },
  {
    "objectID": "3004-web-scraping.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "href": "3004-web-scraping.html#r-åŒ…å®‰è£…ä¸åŠ è½½",
    "title": "R è¯­è¨€ç½‘ç»œçˆ¬è™«å®Œå…¨æŒ‡å—",
    "section": "R åŒ…å®‰è£…ä¸åŠ è½½",
    "text": "R åŒ…å®‰è£…ä¸åŠ è½½\nR è¯­è¨€æœ‰å¤šä¸ªä¼˜ç§€çš„ç½‘ç»œçˆ¬è™«ç›¸å…³åŒ…ï¼š\n\n# æ ¸å¿ƒåŒ…\nlibrary(rvest) # ç½‘é¡µè§£æï¼ŒåŸºäº httr å’Œ xml2\nlibrary(httr) # HTTP è¯·æ±‚å¤„ç†\nlibrary(xml2) # XML/HTML è§£æ\n\n# è¾…åŠ©åŒ…\nlibrary(tidyverse) # æ•°æ®å¤„ç†\nlibrary(jsonlite) # JSON æ•°æ®å¤„ç†\n\n\nåŒ…åŠŸèƒ½å¯¹æ¯”\n\n\n\nR åŒ…\nä¸»è¦åŠŸèƒ½\né€‚ç”¨åœºæ™¯\n\n\n\n\nrvest\nç½‘é¡µè§£æã€CSSé€‰æ‹©å™¨\nå¤§å¤šæ•°é™æ€ç½‘é¡µ\n\n\nhttr\nHTTP è¯·æ±‚ã€headersã€cookies\néœ€è¦è®¤è¯æˆ–è‡ªå®šä¹‰è¯·æ±‚\n\n\nxml2\nXML/HTML åº•å±‚è§£æ\nå¤æ‚æ–‡æ¡£ç»“æ„\n\n\njsonlite\nJSON æ•°æ®è§£æ\nAPI è¿”å›çš„ JSON æ•°æ®\n\n\nRSelenium\næµè§ˆå™¨è‡ªåŠ¨åŒ–\nJavaScript åŠ¨æ€æ¸²æŸ“é¡µé¢",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "ç½‘ç»œçˆ¬è™«å…¥é—¨"
    ]
  },
  {
    "objectID": "3004-web-scraping.html#html-åŸºç¡€çŸ¥è¯†",
    "href": "3004-web-scraping.html#html-åŸºç¡€çŸ¥è¯†",
    "title": "R è¯­è¨€ç½‘ç»œçˆ¬è™«å®Œå…¨æŒ‡å—",
    "section": "HTML åŸºç¡€çŸ¥è¯†",
    "text": "HTML åŸºç¡€çŸ¥è¯†\nè¦è¿›è¡Œç½‘é¡µçˆ¬å–ï¼Œéœ€è¦ç†è§£ HTML çš„åŸºæœ¬ç»“æ„ï¼š\n\nHTML æ–‡æ¡£ç»“æ„\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;é¡µé¢æ ‡é¢˜&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div class=\"container\"&gt;\n      &lt;h1 id=\"main-title\"&gt;ä¸»æ ‡é¢˜&lt;/h1&gt;\n      &lt;p class=\"description\"&gt;è¿™æ˜¯ä¸€æ®µæè¿°æ–‡å­—&lt;/p&gt;\n      &lt;ul class=\"list\"&gt;\n        &lt;li&gt;åˆ—è¡¨é¡¹ 1&lt;/li&gt;\n        &lt;li&gt;åˆ—è¡¨é¡¹ 2&lt;/li&gt;\n      &lt;/ul&gt;\n      &lt;a href=\"https://example.com\"&gt;é“¾æ¥æ–‡å­—&lt;/a&gt;\n    &lt;/div&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n\n\nCSS é€‰æ‹©å™¨\nCSS é€‰æ‹©å™¨æ˜¯å®šä½ HTML å…ƒç´ çš„ä¸»è¦æ–¹å¼ï¼š\n\n\n\n\n\n\n\n\n\né€‰æ‹©å™¨ç±»å‹\nè¯­æ³•\nç¤ºä¾‹\nè¯´æ˜\n\n\n\n\næ ‡ç­¾é€‰æ‹©å™¨\ntag\nh1\né€‰æ‹©æ‰€æœ‰ h1 æ ‡ç­¾\n\n\nç±»é€‰æ‹©å™¨\n.class\n.description\né€‰æ‹© class=â€œdescriptionâ€ çš„å…ƒç´ \n\n\nID é€‰æ‹©å™¨\n#id\n#main-title\né€‰æ‹© id=â€œmain-titleâ€ çš„å…ƒç´ \n\n\nå±æ€§é€‰æ‹©å™¨\n[attr=value]\n[href]\né€‰æ‹©æœ‰ href å±æ€§çš„å…ƒç´ \n\n\nåä»£é€‰æ‹©å™¨\nA B\ndiv p\né€‰æ‹© div å†…çš„æ‰€æœ‰ p\n\n\nç›´æ¥å­å…ƒç´ \nA &gt; B\nul &gt; li\né€‰æ‹© ul çš„ç›´æ¥å­å…ƒç´  li\n\n\nç»„åˆé€‰æ‹©å™¨\nA, B\nh1, h2\né€‰æ‹© h1 æˆ– h2\n\n\n\n\n\nXPath é€‰æ‹©å™¨\nXPath æ˜¯å¦ä¸€ç§å¼ºå¤§çš„å…ƒç´ å®šä½æ–¹å¼ï¼š\n\n\n\nXPath è¯­æ³•\nè¯´æ˜\nç¤ºä¾‹\n\n\n\n\n//tag\né€‰æ‹©æ‰€æœ‰è¯¥æ ‡ç­¾\n//div\n\n\n//tag[@attr]\næœ‰æŸå±æ€§çš„æ ‡ç­¾\n//a[@href]\n\n\n//tag[@attr='value']\nå±æ€§å€¼åŒ¹é…\n//div[@class='container']\n\n\n//tag/text()\nè·å–æ–‡æœ¬å†…å®¹\n//p/text()\n\n\n//tag[1]\nç¬¬ä¸€ä¸ªåŒ¹é…å…ƒç´ \n//li[1]",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "ç½‘ç»œçˆ¬è™«å…¥é—¨"
    ]
  },
  {
    "objectID": "3004-web-scraping.html#åŸºç¡€çˆ¬å–å®æˆ˜",
    "href": "3004-web-scraping.html#åŸºç¡€çˆ¬å–å®æˆ˜",
    "title": "R è¯­è¨€ç½‘ç»œçˆ¬è™«å®Œå…¨æŒ‡å—",
    "section": "åŸºç¡€çˆ¬å–å®æˆ˜",
    "text": "åŸºç¡€çˆ¬å–å®æˆ˜\nè®©æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„ä¾‹å­å¼€å§‹ï¼Œçˆ¬å– Wikipedia é¡µé¢ï¼š\n\nè¯»å–ç½‘é¡µ\n\n# å®šä¹‰ç›®æ ‡ URL\nurl &lt;- \"https://en.wikipedia.org/wiki/R_(programming_language)\"\n\n# è¯»å–ç½‘é¡µå†…å®¹\npage &lt;- read_html(url)\n\n# æŸ¥çœ‹é¡µé¢ç»“æ„\npage\n\n{html_document}\n&lt;html class=\"client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-1 vector-feature-appearance-pinned-clientpref-1 skin-theme-clientpref-day vector-sticky-header-enabled vector-toc-available\" lang=\"en\" dir=\"ltr\"&gt;\n[1] &lt;head&gt;\\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8 ...\n[2] &lt;body class=\"skin--responsive skin-vector skin-vector-search-vue mediawik ...\n\n\n\n\næå–æ ‡é¢˜\n\n# ä½¿ç”¨ CSS é€‰æ‹©å™¨æå–é¡µé¢æ ‡é¢˜\ntitle &lt;- page |&gt;\n    html_element(\"h1#firstHeading\") |&gt;\n    html_text2()\n\ncat(\"é¡µé¢æ ‡é¢˜:\", title, \"\\n\")\n\né¡µé¢æ ‡é¢˜: R (programming language) \n\n\n\n\næå–æ®µè½æ–‡æœ¬\n\n# æå–ç¬¬ä¸€ä¸ªæ®µè½\nfirst_para &lt;- page |&gt;\n    html_element(\"div.mw-parser-output &gt; p:not(.mw-empty-elt)\") |&gt;\n    html_text2()\n\n# æ˜¾ç¤ºå‰ 200 ä¸ªå­—ç¬¦\ncat(substr(first_para, 1, 200), \"...\\n\")\n\nR is a programming language for statistical computing and data visualization. It has been widely adopted in the fields of data mining, bioinformatics, data analysis, and data science.[9] ...\n\n\n\n\næå–å¤šä¸ªå…ƒç´ \n\n# æå–ç›®å½•ä¸­çš„æ‰€æœ‰é“¾æ¥\ntoc_items &lt;- page |&gt;\n    html_elements(\"div#toc li a\") |&gt;\n    html_text2()\n\n# æ˜¾ç¤ºå‰ 10 ä¸ªç›®å½•é¡¹\nhead(toc_items, 10)\n\ncharacter(0)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "ç½‘ç»œçˆ¬è™«å…¥é—¨"
    ]
  },
  {
    "objectID": "3004-web-scraping.html#æ•°æ®æå–æŠ€å·§",
    "href": "3004-web-scraping.html#æ•°æ®æå–æŠ€å·§",
    "title": "R è¯­è¨€ç½‘ç»œçˆ¬è™«å®Œå…¨æŒ‡å—",
    "section": "æ•°æ®æå–æŠ€å·§",
    "text": "æ•°æ®æå–æŠ€å·§\n\næå–è¡¨æ ¼æ•°æ®\nhtml_table() å‡½æ•°å¯ä»¥ç›´æ¥å°† HTML è¡¨æ ¼è½¬æ¢ä¸ºæ•°æ®æ¡†ï¼š\n\n# è¯»å–ç»´åŸºç™¾ç§‘çš„ R è¯­è¨€ç‰ˆæœ¬å†å²é¡µé¢\nurl_versions &lt;- \"https://en.wikipedia.org/wiki/R_(programming_language)\"\npage_versions &lt;- read_html(url_versions)\n\n# æå–æ‰€æœ‰è¡¨æ ¼\ntables &lt;- page_versions |&gt;\n    html_elements(\"table.wikitable\") |&gt;\n    html_table()\n\n# æŸ¥çœ‹è¡¨æ ¼æ•°é‡\ncat(\"æ‰¾åˆ°\", length(tables), \"ä¸ªè¡¨æ ¼\\n\")\n\næ‰¾åˆ° 1 ä¸ªè¡¨æ ¼\n\n# æŸ¥çœ‹ç¬¬ä¸€ä¸ªè¡¨æ ¼\nif (length(tables) &gt; 0) {\n    tables[[1]] |&gt;\n        head(5)\n}\n\n# A tibble: 5 Ã— 5\n  Version `Release date` Name                   `Peanuts reference` Reference\n  &lt;chr&gt;   &lt;chr&gt;          &lt;chr&gt;                  &lt;chr&gt;               &lt;chr&gt;    \n1 4.5.2   2025-10-31     [Not] Part in a Rumble [44]                [45]     \n2 4.5.1   2025-06-13     Great Square Root      [46]                [47]     \n3 4.5.0   2025-04-11     How About a Twenty-Six [48]                [49]     \n4 4.4.3   2025-02-28     Trophy Case            [50]                [51]     \n5 4.4.2   2024-10-31     Pile of Leaves         [52]                [53]     \n\n\n\n\næå–é“¾æ¥\n\n# æå–æ‰€æœ‰å¤–éƒ¨é“¾æ¥\nexternal_links &lt;- page |&gt;\n    html_elements(\"a.external\") |&gt;\n    html_attr(\"href\")\n\n# æ˜¾ç¤ºå‰ 5 ä¸ª\nhead(external_links, 5)\n\n[1] \"https://www.r-project.org/\"                                                     \n[2] \"https://en.wikipedia.org/w/index.php?title=R_(programming_language)&action=edit\"\n[3] \"https://cran.r-project.org/web/views/\"                                          \n[4] \"https://www.r-project.org/conferences/\"                                         \n[5] \"https://www.r-project.org/conferences/\"                                         \n\n\n\n\næå–å›¾ç‰‡\n\n# æå–æ‰€æœ‰å›¾ç‰‡çš„ src å±æ€§\nimages &lt;- page |&gt;\n    html_elements(\"img\") |&gt;\n    html_attr(\"src\")\n\n# è¿‡æ»¤å¹¶æ˜¾ç¤ºå‰ 5 ä¸ª\nimages[!is.na(images)] |&gt;\n    head(5)\n\n[1] \"/static/images/icons/enwiki-25.svg\"                                                     \n[2] \"/static/images/mobile/copyright/wikipedia-wordmark-en-25.svg\"                           \n[3] \"/static/images/mobile/copyright/wikipedia-tagline-en-25.svg\"                            \n[4] \"//upload.wikimedia.org/wikipedia/commons/thumb/1/1b/R_logo.svg/250px-R_logo.svg.png\"    \n[5] \"//upload.wikimedia.org/wikipedia/commons/thumb/0/01/R_terminal.jpg/250px-R_terminal.jpg\"\n\n\n\n\nå¤„ç†åµŒå¥—ç»“æ„\n\n# å‡è®¾æˆ‘ä»¬è¦æå–ä¿¡æ¯æ¡†ä¸­çš„æ•°æ®\ninfobox &lt;- page |&gt;\n    html_element(\"table.infobox\")\n\nif (!is.na(infobox)) {\n    # æå–æ‰€æœ‰è¡Œ\n    rows &lt;- infobox |&gt;\n        html_elements(\"tr\")\n\n    # åˆ›å»ºæ•°æ®æ¡†\n    infobox_data &lt;- tibble(\n        label = rows |&gt; html_element(\"th\") |&gt; html_text2(),\n        value = rows |&gt; html_element(\"td\") |&gt; html_text2()\n    ) |&gt;\n        filter(!is.na(label), !is.na(value))\n\n    head(infobox_data, 10)\n}\n\n# A tibble: 10 Ã— 2\n   label               value                                                    \n   &lt;chr&gt;               &lt;chr&gt;                                                    \n 1 Paradigms           \"Multi-paradigm: procedural, object-oriented, functionalâ€¦\n 2 Designed by         \"Ross Ihaka and Robert Gentleman\"                        \n 3 Developer           \"R Core Team\"                                            \n 4 First appeared      \"August 1993; 32 years ago (1993-08)\"                    \n 5 Stable release      \"4.5.2[2] / 31 October 2025; 2 months ago (31 October 20â€¦\n 6 Typing discipline   \"Dynamic\"                                                \n 7 Platform            \"arm64 and x86-64\"                                       \n 8 License             \"GPL-2.0-or-later[3]\"                                    \n 9 Filename extensions \".mw-parser-output .plainlist ol,.mw-parser-output .plaiâ€¦\n10 Website             \"r-project.org\"",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "ç½‘ç»œçˆ¬è™«å…¥é—¨"
    ]
  },
  {
    "objectID": "3004-web-scraping.html#http-è¯·æ±‚è¿›é˜¶",
    "href": "3004-web-scraping.html#http-è¯·æ±‚è¿›é˜¶",
    "title": "R è¯­è¨€ç½‘ç»œçˆ¬è™«å®Œå…¨æŒ‡å—",
    "section": "HTTP è¯·æ±‚è¿›é˜¶",
    "text": "HTTP è¯·æ±‚è¿›é˜¶\nå½“ç½‘ç«™æœ‰åçˆ¬è™«æœºåˆ¶æ—¶ï¼Œéœ€è¦ä½¿ç”¨ httr åŒ…æ¥å®šåˆ¶è¯·æ±‚ã€‚\n\nè®¾ç½® User-Agent\n\n# æ¨¡æ‹Ÿæµè§ˆå™¨çš„ User-Agent\nresponse &lt;- GET(\n    url = \"https://httpbin.org/user-agent\",\n    add_headers(\n        `User-Agent` = \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36\"\n    )\n)\n\n# æŸ¥çœ‹æœåŠ¡å™¨çœ‹åˆ°çš„ User-Agent\ncontent(response, \"text\") |&gt;\n    fromJSON()\n\n$`user-agent`\n[1] \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36\"\n\n\n\n\nè®¾ç½®å®Œæ•´çš„è¯·æ±‚å¤´\n\n# åˆ›å»ºå®Œæ•´çš„è¯·æ±‚å¤´\ncustom_headers &lt;- add_headers(\n    `User-Agent` = \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36\",\n    `Accept` = \"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\",\n    `Accept-Language` = \"zh-CN,zh;q=0.9,en;q=0.8\",\n    `Accept-Encoding` = \"gzip, deflate\",\n    `Connection` = \"keep-alive\"\n)\n\n# å‘é€è¯·æ±‚\nresponse &lt;- GET(\n    url = \"https://httpbin.org/headers\",\n    custom_headers\n)\n\n# æŸ¥çœ‹è¯·æ±‚å¤´\ncontent(response, \"text\") |&gt;\n    fromJSON() |&gt;\n    pluck(\"headers\")\n\n$Accept\n[1] \"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\"\n\n$`Accept-Encoding`\n[1] \"gzip, deflate\"\n\n$`Accept-Language`\n[1] \"zh-CN,zh;q=0.9,en;q=0.8\"\n\n$Host\n[1] \"httpbin.org\"\n\n$`User-Agent`\n[1] \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36\"\n\n$`X-Amzn-Trace-Id`\n[1] \"Root=1-6969def1-262fc9b909d8d5d94c93781c\"\n\n\n\n\nå¤„ç† Cookies\n\n# ä½¿ç”¨ session ä¿æŒ cookies\nsession &lt;- session(\"https://httpbin.org/cookies/set?name=test_cookie&value=12345\")\n\n# æŸ¥çœ‹ cookies\nsession$response$cookies\n\n       domain  flag path secure expiration  name       value\n1 httpbin.org FALSE    /  FALSE        Inf  name test_cookie\n2 httpbin.org FALSE    /  FALSE        Inf value       12345\n\n\n\n\nå¤„ç†è¯·æ±‚å»¶è¿Ÿ\n\n# å®šä¹‰å¸¦å»¶è¿Ÿçš„çˆ¬å–å‡½æ•°\nscrape_with_delay &lt;- function(urls, delay = 1) {\n    results &lt;- list()\n\n    for (i in seq_along(urls)) {\n        cat(\"æ­£åœ¨çˆ¬å–ç¬¬\", i, \"ä¸ªé¡µé¢:\", urls[i], \"\\n\")\n\n        # å‘é€è¯·æ±‚\n        tryCatch(\n            {\n                results[[i]] &lt;- read_html(urls[i])\n            },\n            error = function(e) {\n                cat(\"é”™è¯¯:\", e$message, \"\\n\")\n                results[[i]] &lt;- NA\n            }\n        )\n\n        # æ·»åŠ å»¶è¿Ÿï¼ˆæœ€åä¸€ä¸ªä¸éœ€è¦ï¼‰\n        if (i &lt; length(urls)) {\n            Sys.sleep(delay)\n        }\n    }\n\n    return(results)\n}\n\n# ç¤ºä¾‹ä½¿ç”¨ï¼ˆä»…æ¼”ç¤ºï¼Œä¸å®é™…æ‰§è¡Œå¤§é‡è¯·æ±‚ï¼‰\n# pages &lt;- scrape_with_delay(c(\"url1\", \"url2\", \"url3\"), delay = 2)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "ç½‘ç»œçˆ¬è™«å…¥é—¨"
    ]
  },
  {
    "objectID": "3004-web-scraping.html#å¤„ç†åçˆ¬è™«æœºåˆ¶",
    "href": "3004-web-scraping.html#å¤„ç†åçˆ¬è™«æœºåˆ¶",
    "title": "R è¯­è¨€ç½‘ç»œçˆ¬è™«å®Œå…¨æŒ‡å—",
    "section": "å¤„ç†åçˆ¬è™«æœºåˆ¶",
    "text": "å¤„ç†åçˆ¬è™«æœºåˆ¶\nè®¸å¤šç½‘ç«™ä¼šé‡‡ç”¨å„ç§åçˆ¬è™«æªæ–½ã€‚ä»¥ä¸‹æ˜¯å¸¸è§çš„åº”å¯¹ç­–ç•¥ï¼š\n\nå¸¸è§åçˆ¬è™«æªæ–½\n\n\n\næªæ–½\nè¯´æ˜\nåº”å¯¹æ–¹æ³•\n\n\n\n\nUser-Agent æ£€æµ‹\né˜»æ­¢éæµè§ˆå™¨è¯·æ±‚\nè®¾ç½®çœŸå® User-Agent\n\n\nIP é™åˆ¶\né˜»æ­¢é¢‘ç¹è¯·æ±‚çš„ IP\nä½¿ç”¨ä»£ç†ã€é™ä½é¢‘ç‡\n\n\nCookies/Session\néœ€è¦ç™»å½•æˆ–ä¼šè¯\nä½¿ç”¨ session ç®¡ç†\n\n\nJavaScript æ¸²æŸ“\nå†…å®¹ç”± JS åŠ¨æ€ç”Ÿæˆ\nä½¿ç”¨ RSelenium\n\n\néªŒè¯ç \näººæœºéªŒè¯\néœ€è¦æ‰‹åŠ¨å¤„ç†æˆ–ä¸“ä¸šæœåŠ¡\n\n\nåŠ¨æ€ Token\nè¯·æ±‚éœ€è¦ç‰¹å®šå‚æ•°\nåˆ†æè¯·æ±‚ï¼Œæå– token\n\n\n\n\n\nä½¿ç”¨ä»£ç†\n\n# è®¾ç½®ä»£ç†ï¼ˆç¤ºä¾‹ï¼Œéœ€è¦çœŸå®ä»£ç†åœ°å€ï¼‰\nresponse &lt;- GET(\n    url = \"https://example.com\",\n    use_proxy(\n        url = \"http://proxy.example.com\",\n        port = 8080,\n        username = \"user\",\n        password = \"pass\"\n    )\n)\n\n\n\néšæœºå»¶è¿Ÿ\n\n# éšæœºå»¶è¿Ÿå‡½æ•°ï¼Œæ¨¡æ‹Ÿäººç±»è¡Œä¸º\nrandom_delay &lt;- function(min_sec = 1, max_sec = 3) {\n    delay &lt;- runif(1, min_sec, max_sec)\n    cat(\"ç­‰å¾…\", round(delay, 2), \"ç§’...\\n\")\n    Sys.sleep(delay)\n}\n\n# ä½¿ç”¨ç¤ºä¾‹\nrandom_delay(1, 2)\n\nç­‰å¾… 1.56 ç§’...\n\n\n\n\nå¤„ç†è¯·æ±‚å¤±è´¥\n\n# å¸¦é‡è¯•æœºåˆ¶çš„è¯·æ±‚å‡½æ•°\nsafe_request &lt;- function(url, max_retries = 3, delay = 2) {\n    for (attempt in 1:max_retries) {\n        tryCatch(\n            {\n                response &lt;- GET(\n                    url,\n                    add_headers(`User-Agent` = \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36\")\n                )\n\n                if (status_code(response) == 200) {\n                    return(content(response, \"text\", encoding = \"UTF-8\"))\n                } else {\n                    cat(\"HTTP çŠ¶æ€ç :\", status_code(response), \"\\n\")\n                }\n            },\n            error = function(e) {\n                cat(\"è¯·æ±‚å¤±è´¥ (å°è¯•\", attempt, \"/\", max_retries, \"):\", e$message, \"\\n\")\n            }\n        )\n\n        if (attempt &lt; max_retries) {\n            Sys.sleep(delay * attempt) # é€’å¢å»¶è¿Ÿ\n        }\n    }\n\n    return(NULL)\n}\n\n# æµ‹è¯•\nresult &lt;- safe_request(\"https://httpbin.org/status/200\")\ncat(\"è¯·æ±‚ç»“æœ:\", substr(result, 1, 50), \"...\\n\")\n\nè¯·æ±‚ç»“æœ:  ...",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "ç½‘ç»œçˆ¬è™«å…¥é—¨"
    ]
  },
  {
    "objectID": "3004-web-scraping.html#è±†ç“£ç”µå½±çˆ¬å–ç¤ºä¾‹",
    "href": "3004-web-scraping.html#è±†ç“£ç”µå½±çˆ¬å–ç¤ºä¾‹",
    "title": "R è¯­è¨€ç½‘ç»œçˆ¬è™«å®Œå…¨æŒ‡å—",
    "section": "è±†ç“£ç”µå½±çˆ¬å–ç¤ºä¾‹",
    "text": "è±†ç“£ç”µå½±çˆ¬å–ç¤ºä¾‹\n\næ³¨æ„ï¼šè±†ç“£ç½‘ç«™æœ‰ä¸¥æ ¼çš„åçˆ¬è™«æœºåˆ¶ï¼Œä»¥ä¸‹ä»£ç ä»…ä½œä¸ºå­¦ä¹ å‚è€ƒï¼Œå¯èƒ½æ— æ³•ç›´æ¥è¿è¡ŒæˆåŠŸã€‚å®é™…çˆ¬å–æ—¶è¯·éµå®ˆè±†ç“£çš„æœåŠ¡æ¡æ¬¾ã€‚\n\n\n# è±†ç“£ç”µå½±æ’è¡Œæ¦œ URL\ndouban_url &lt;- \"https://movie.douban.com/chart\"\n\n# è®¾ç½®è¯·æ±‚å¤´ï¼Œæ¨¡æ‹Ÿæµè§ˆå™¨\ndouban_headers &lt;- add_headers(\n    `User-Agent` = \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36\",\n    `Accept` = \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\",\n    `Accept-Language` = \"zh-CN,zh;q=0.9\",\n    `Accept-Encoding` = \"gzip, deflate, br\",\n    `Connection` = \"keep-alive\",\n    `Referer` = \"https://movie.douban.com/\",\n    `Cookie` = \"bid=your_bid_cookie_here\" # éœ€è¦çœŸå®çš„ cookie\n)\n\n# å‘é€è¯·æ±‚\nresponse &lt;- GET(douban_url, douban_headers)\n\n# æ£€æŸ¥çŠ¶æ€\nif (status_code(response) == 200) {\n    page &lt;- content(response, encoding = \"UTF-8\")\n\n    # æå–ç”µå½±ä¿¡æ¯\n    movies &lt;- page |&gt;\n        html_elements(\"div.pl2\") |&gt;\n        html_element(\"a\") |&gt;\n        html_text2()\n\n    print(movies)\n} else {\n    cat(\"è¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç :\", status_code(response), \"\\n\")\n}\n\n\nè±†ç“£ API æ›¿ä»£æ–¹æ¡ˆ\nå¯¹äºè±†ç“£æ•°æ®ï¼Œæ›´æ¨èä½¿ç”¨å…¶å®˜æ–¹ API æˆ–ç¬¬ä¸‰æ–¹æ•°æ®æºï¼š\n\n# ä½¿ç”¨è±†ç“£ APIï¼ˆéœ€è¦ API Keyï¼‰\napi_url &lt;- \"https://api.douban.com/v2/movie/top250\"\nresponse &lt;- GET(api_url, query = list(\n    apikey = \"YOUR_API_KEY\",\n    start = 0,\n    count = 20\n))\n\nif (status_code(response) == 200) {\n    data &lt;- content(response, \"text\") |&gt; fromJSON()\n    print(data$subjects)\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "ç½‘ç»œçˆ¬è™«å…¥é—¨"
    ]
  },
  {
    "objectID": "3004-web-scraping.html#å®æˆ˜æ¡ˆä¾‹çˆ¬å–-cran-åŒ…ä¿¡æ¯",
    "href": "3004-web-scraping.html#å®æˆ˜æ¡ˆä¾‹çˆ¬å–-cran-åŒ…ä¿¡æ¯",
    "title": "R è¯­è¨€ç½‘ç»œçˆ¬è™«å®Œå…¨æŒ‡å—",
    "section": "å®æˆ˜æ¡ˆä¾‹ï¼šçˆ¬å– CRAN åŒ…ä¿¡æ¯",
    "text": "å®æˆ˜æ¡ˆä¾‹ï¼šçˆ¬å– CRAN åŒ…ä¿¡æ¯\nè®©æˆ‘ä»¬å®Œæˆä¸€ä¸ªå®Œæ•´çš„çˆ¬è™«é¡¹ç›®ï¼šä» CRAN ç½‘ç«™è·å– R åŒ…ä¿¡æ¯ã€‚\n\nè·å–çƒ­é—¨åŒ…åˆ—è¡¨\n\n# CRAN ä»»åŠ¡è§†å›¾é¡µé¢\ncran_url &lt;- \"https://cran.r-project.org/web/views/\"\n\n# è¯»å–é¡µé¢\ncran_page &lt;- read_html(cran_url)\n\n# æå–ä»»åŠ¡è§†å›¾åˆ—è¡¨\ntask_views &lt;- cran_page |&gt;\n    html_elements(\"table tr td:first-child a\") |&gt;\n    html_text2()\n\n# æ˜¾ç¤ºä»»åŠ¡è§†å›¾\ncat(\"CRAN ä»»åŠ¡è§†å›¾:\\n\")\n\nCRAN ä»»åŠ¡è§†å›¾:\n\nhead(task_views, 10)\n\n [1] \"ActuarialScience\"  \"Agriculture\"       \"AnomalyDetection\" \n [4] \"Bayesian\"          \"CausalInference\"   \"ChemPhys\"         \n [7] \"ClinicalTrials\"    \"Cluster\"           \"CompositionalData\"\n[10] \"Databases\"        \n\n\n\n\nè·å–ç‰¹å®šåŒ…çš„è¯¦ç»†ä¿¡æ¯\n\n# å®šä¹‰è·å–åŒ…ä¿¡æ¯çš„å‡½æ•°\nget_package_info &lt;- function(package_name) {\n    url &lt;- paste0(\"https://cran.r-project.org/web/packages/\", package_name, \"/index.html\")\n\n    tryCatch(\n        {\n            page &lt;- read_html(url)\n\n            # æå–è¡¨æ ¼ä¿¡æ¯\n            info_table &lt;- page |&gt;\n                html_element(\"table\") |&gt;\n                html_table()\n\n            # æ•´ç†æ•°æ®\n            if (!is.null(info_table) && nrow(info_table) &gt; 0) {\n                result &lt;- tibble(\n                    package = package_name,\n                    field = info_table[[1]],\n                    value = info_table[[2]]\n                )\n                return(result)\n            }\n        },\n        error = function(e) {\n            cat(\"è·å–\", package_name, \"å¤±è´¥:\", e$message, \"\\n\")\n            return(NULL)\n        }\n    )\n\n    return(NULL)\n}\n\n# è·å– rvest åŒ…çš„ä¿¡æ¯\nrvest_info &lt;- get_package_info(\"rvest\")\n\nè·å– rvest å¤±è´¥: æ— æ³•æ‰“å¼€é“¾ç»“ \n\nprint(rvest_info)\n\nNULL\n\n\n\n\næ‰¹é‡è·å–å¤šä¸ªåŒ…çš„ä¿¡æ¯\n\n# è¦æŸ¥è¯¢çš„åŒ…åˆ—è¡¨\npackages &lt;- c(\"rvest\", \"httr\", \"dplyr\")\n\n# æ‰¹é‡è·å–ï¼ˆå¸¦å»¶è¿Ÿï¼‰\nall_info &lt;- map(packages, function(pkg) {\n    cat(\"æ­£åœ¨è·å–:\", pkg, \"\\n\")\n    result &lt;- get_package_info(pkg)\n    Sys.sleep(1) # ç¤¼è²Œå»¶è¿Ÿ\n    return(result)\n})\n\næ­£åœ¨è·å–: rvest \næ­£åœ¨è·å–: httr \nè·å– httr å¤±è´¥: æ— æ³•æ‰“å¼€é“¾ç»“ \næ­£åœ¨è·å–: dplyr \n\n# åˆå¹¶ç»“æœ\ncombined_info &lt;- bind_rows(all_info)\n\n# ç­›é€‰å…³é”®ä¿¡æ¯\ncombined_info |&gt;\n    filter(field %in% c(\"Version:\", \"Depends:\", \"Published:\")) |&gt;\n    pivot_wider(names_from = field, values_from = value)\n\n# A tibble: 2 Ã— 4\n  package `Version:` `Depends:`  `Published:`\n  &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;       \n1 rvest   1.0.5      R (â‰¥ 4.1)   2025-08-29  \n2 dplyr   1.1.4      R (â‰¥ 3.5.0) 2023-11-17",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "ç½‘ç»œçˆ¬è™«å…¥é—¨"
    ]
  },
  {
    "objectID": "3004-web-scraping.html#æ•°æ®æ¸…æ´—ä¸å­˜å‚¨",
    "href": "3004-web-scraping.html#æ•°æ®æ¸…æ´—ä¸å­˜å‚¨",
    "title": "R è¯­è¨€ç½‘ç»œçˆ¬è™«å®Œå…¨æŒ‡å—",
    "section": "æ•°æ®æ¸…æ´—ä¸å­˜å‚¨",
    "text": "æ•°æ®æ¸…æ´—ä¸å­˜å‚¨\nçˆ¬å–æ•°æ®åï¼Œé€šå¸¸éœ€è¦è¿›è¡Œæ¸…æ´—å’Œä¿å­˜ï¼š\n\næ–‡æœ¬æ¸…æ´—\n\n# ç¤ºä¾‹ï¼šæ¸…æ´—çˆ¬å–çš„æ–‡æœ¬\nraw_text &lt;- \"\\n\\n  R is a programming language  \\n  for statistical computing.  \\n\\n\"\n\n# æ¸…æ´—å‡½æ•°\nclean_text &lt;- function(text) {\n    text |&gt;\n        str_trim() |&gt; # å»é™¤é¦–å°¾ç©ºç™½\n        str_squish() |&gt; # åˆå¹¶å¤šä¸ªç©ºç™½ä¸ºä¸€ä¸ª\n        str_replace_all(\"\\\\s+\", \" \") # è§„èŒƒåŒ–ç©ºæ ¼\n}\n\nclean_text(raw_text)\n\n[1] \"R is a programming language for statistical computing.\"\n\n\n\n\nä¿å­˜æ•°æ®\n\n# ä¿å­˜ä¸º CSV\nwrite_csv(combined_info, \"cran_packages.csv\")\n\n# ä¿å­˜ä¸º RDSï¼ˆä¿ç•™ R å¯¹è±¡ç»“æ„ï¼‰\nsaveRDS(combined_info, \"cran_packages.rds\")\n\n# ä¿å­˜ä¸º JSON\nwrite_json(combined_info, \"cran_packages.json\")\n\n\n\nå¢é‡çˆ¬å–\n\n# å¢é‡çˆ¬å–ï¼šåªè·å–æ–°æ•°æ®\nincremental_scrape &lt;- function(urls, existing_data, id_column) {\n    # è¿‡æ»¤å·²æœ‰æ•°æ®\n    existing_ids &lt;- existing_data[[id_column]]\n    new_urls &lt;- urls[!urls %in% existing_ids]\n\n    if (length(new_urls) == 0) {\n        cat(\"æ²¡æœ‰æ–°æ•°æ®éœ€è¦çˆ¬å–\\n\")\n        return(existing_data)\n    }\n\n    cat(\"éœ€è¦çˆ¬å–\", length(new_urls), \"ä¸ªæ–°é¡µé¢\\n\")\n\n    # çˆ¬å–æ–°æ•°æ®\n    new_data &lt;- map_dfr(new_urls, function(url) {\n        # çˆ¬å–é€»è¾‘...\n        Sys.sleep(1)\n    })\n\n    # åˆå¹¶æ•°æ®\n    bind_rows(existing_data, new_data)\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "ç½‘ç»œçˆ¬è™«å…¥é—¨"
    ]
  },
  {
    "objectID": "3004-web-scraping.html#åŠ¨æ€ç½‘é¡µå¤„ç†",
    "href": "3004-web-scraping.html#åŠ¨æ€ç½‘é¡µå¤„ç†",
    "title": "R è¯­è¨€ç½‘ç»œçˆ¬è™«å®Œå…¨æŒ‡å—",
    "section": "åŠ¨æ€ç½‘é¡µå¤„ç†",
    "text": "åŠ¨æ€ç½‘é¡µå¤„ç†\nå¯¹äº JavaScript æ¸²æŸ“çš„åŠ¨æ€ç½‘é¡µï¼Œéœ€è¦ä½¿ç”¨ RSeleniumï¼š\n\n# å®‰è£… RSelenium\n# install.packages(\"RSelenium\")\n\nlibrary(RSelenium)\n\n# å¯åŠ¨ Selenium æœåŠ¡å™¨ï¼ˆéœ€è¦å…ˆå®‰è£… Docker æˆ– Javaï¼‰\n# docker run -d -p 4444:4444 selenium/standalone-chrome\n\n# è¿æ¥åˆ° Selenium\nremDr &lt;- remoteDriver(\n    remoteServerAddr = \"localhost\",\n    port = 4444,\n    browserName = \"chrome\"\n)\n\nremDr$open()\n\n# å¯¼èˆªåˆ°é¡µé¢\nremDr$navigate(\"https://example.com\")\n\n# ç­‰å¾…é¡µé¢åŠ è½½\nSys.sleep(3)\n\n# è·å–é¡µé¢æºä»£ç \npage_source &lt;- remDr$getPageSource()[[1]]\n\n# ä½¿ç”¨ rvest è§£æ\npage &lt;- read_html(page_source)\n\n# æå–æ•°æ®...\n\n# å…³é—­æµè§ˆå™¨\nremDr$close()",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "ç½‘ç»œçˆ¬è™«å…¥é—¨"
    ]
  },
  {
    "objectID": "3004-web-scraping.html#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ",
    "href": "3004-web-scraping.html#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ",
    "title": "R è¯­è¨€ç½‘ç»œçˆ¬è™«å®Œå…¨æŒ‡å—",
    "section": "å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ",
    "text": "å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ\n\nç¼–ç é—®é¢˜\n\n# å¤„ç†ä¸­æ–‡ç¼–ç \nhandle_encoding &lt;- function(response) {\n    # å°è¯• UTF-8\n    text &lt;- tryCatch(\n        content(response, \"text\", encoding = \"UTF-8\"),\n        error = function(e) NULL\n    )\n\n    if (is.null(text) || grepl(\"é”Ÿæ–¤æ‹·\", text)) {\n        # å°è¯• GBK\n        text &lt;- content(response, \"text\", encoding = \"GBK\")\n    }\n\n    return(text)\n}\n\n\n\nå¤„ç†åˆ†é¡µ\n\n# åˆ†é¡µçˆ¬å–\nscrape_paginated &lt;- function(base_url, max_pages = 10) {\n    all_data &lt;- list()\n\n    for (page_num in 1:max_pages) {\n        url &lt;- paste0(base_url, \"?page=\", page_num)\n        cat(\"æ­£åœ¨çˆ¬å–ç¬¬\", page_num, \"é¡µ\\n\")\n\n        page &lt;- read_html(url)\n\n        # æå–æ•°æ®\n        data &lt;- page |&gt;\n            html_elements(\".item\") |&gt;\n            html_text2()\n\n        # æ£€æŸ¥æ˜¯å¦æœ‰æ•°æ®\n        if (length(data) == 0) {\n            cat(\"æ²¡æœ‰æ›´å¤šæ•°æ®ï¼Œåœæ­¢çˆ¬å–\\n\")\n            break\n        }\n\n        all_data[[page_num]] &lt;- data\n        Sys.sleep(runif(1, 1, 2)) # éšæœºå»¶è¿Ÿ\n    }\n\n    return(unlist(all_data))\n}\n\n\n\nå¤„ç†å¼‚å¸¸\n\n# å®Œæ•´çš„é”™è¯¯å¤„ç†\nsafe_scrape &lt;- function(url) {\n    result &lt;- list(\n        success = FALSE,\n        data = NULL,\n        error = NULL\n    )\n\n    tryCatch(\n        {\n            response &lt;- GET(url, timeout(30))\n\n            if (http_error(response)) {\n                result$error &lt;- paste(\"HTTP é”™è¯¯:\", status_code(response))\n            } else {\n                result$success &lt;- TRUE\n                result$data &lt;- content(response, encoding = \"UTF-8\")\n            }\n        },\n        error = function(e) {\n            result$error &lt;- e$message\n        }\n    )\n\n    return(result)\n}\n\n# æµ‹è¯•\ntest_result &lt;- safe_scrape(\"https://httpbin.org/status/200\")\ncat(\"æˆåŠŸ:\", test_result$success, \"\\n\")\n\næˆåŠŸ: TRUE",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "ç½‘ç»œçˆ¬è™«å…¥é—¨"
    ]
  },
  {
    "objectID": "3004-web-scraping.html#æ€»ç»“",
    "href": "3004-web-scraping.html#æ€»ç»“",
    "title": "R è¯­è¨€ç½‘ç»œçˆ¬è™«å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\nçˆ¬è™«å·¥ä½œæµç¨‹\n\n\n# A tibble: 6 Ã— 3\n   step action          tool               \n  &lt;int&gt; &lt;chr&gt;           &lt;chr&gt;              \n1     1 åˆ†æç›®æ ‡ç½‘ç«™    æµè§ˆå™¨å¼€å‘è€…å·¥å…·   \n2     2 æ£€æŸ¥ robots.txt /robots.txt        \n3     3 ç¡®å®šæå–å…ƒç´     CSS/XPath é€‰æ‹©å™¨   \n4     4 ç¼–å†™çˆ¬è™«ä»£ç     rvest + httr       \n5     5 å¤„ç†åçˆ¬è™«      headers/delay/proxy\n6     6 æ¸…æ´—å­˜å‚¨æ•°æ®    tidyverse          \n\n\n\n\næ ¸å¿ƒå‡½æ•°é€ŸæŸ¥\n\n\n\nå‡½æ•°\nç”¨é€”\nåŒ…\n\n\n\n\nread_html()\nè¯»å–ç½‘é¡µ\nrvest\n\n\nhtml_elements()\né€‰æ‹©å¤šä¸ªå…ƒç´ \nrvest\n\n\nhtml_element()\né€‰æ‹©å•ä¸ªå…ƒç´ \nrvest\n\n\nhtml_text2()\næå–æ–‡æœ¬\nrvest\n\n\nhtml_attr()\næå–å±æ€§\nrvest\n\n\nhtml_table()\næå–è¡¨æ ¼\nrvest\n\n\nGET()\nå‘é€ GET è¯·æ±‚\nhttr\n\n\nPOST()\nå‘é€ POST è¯·æ±‚\nhttr\n\n\nadd_headers()\næ·»åŠ è¯·æ±‚å¤´\nhttr\n\n\ncontent()\næå–å“åº”å†…å®¹\nhttr\n\n\n\n\n\næœ€ä½³å®è·µ\n\nå…ˆçœ‹ robots.txt - ç¡®è®¤ç½‘ç«™çš„çˆ¬å–è§„åˆ™\nè®¾ç½®åˆç†å»¶è¿Ÿ - æ¯æ¬¡è¯·æ±‚é—´éš” 1-3 ç§’\næ¨¡æ‹Ÿæµè§ˆå™¨ - è®¾ç½®çœŸå®çš„ User-Agent\né”™è¯¯å¤„ç† - ä½¿ç”¨ tryCatch å¤„ç†å¼‚å¸¸\nå¢é‡çˆ¬å– - é¿å…é‡å¤è·å–å·²æœ‰æ•°æ®\næ•°æ®å¤‡ä»½ - å®šæœŸä¿å­˜çˆ¬å–ç»“æœ\n\n\n\næ¨èèµ„æº\n\nrvest å®˜æ–¹æ–‡æ¡£\nhttr å®˜æ–¹æ–‡æ¡£\nSelectorGadget - CSS é€‰æ‹©å™¨å·¥å…·\nWeb Scraping with R - ã€ŠR for Data Scienceã€‹ç›¸å…³ç« èŠ‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ’» å¼€å‘ç¯å¢ƒ",
      "ç½‘ç»œçˆ¬è™«å…¥é—¨"
    ]
  },
  {
    "objectID": "3006-reproducible-research.html",
    "href": "3006-reproducible-research.html",
    "title": "å¯é‡å¤ç ”ç©¶ä¸è®ºæ–‡å†™ä½œå·¥ä½œæµ",
    "section": "",
    "text": "å¯é‡å¤ç ”ç©¶ï¼ˆReproducible Researchï¼‰ æ˜¯æŒ‡å…¶ä»–ç ”ç©¶è€…ï¼ˆåŒ…æ‹¬æœªæ¥çš„ä½ ï¼‰èƒ½å¤Ÿä½¿ç”¨ç›¸åŒçš„æ•°æ®å’Œä»£ç é‡ç°ç ”ç©¶ç»“æœã€‚\n\n\n\n\n\nå¥½å¤„\nè¯´æ˜\n\n\n\n\næé«˜æ•ˆç‡\nä¿®æ”¹åˆ†ææ—¶ä¸å¿…ä»å¤´å¼€å§‹\n\n\nå‡å°‘é”™è¯¯\nè‡ªåŠ¨åŒ–å‡å°‘æ‰‹åŠ¨æ“ä½œå¤±è¯¯\n\n\næ»¡è¶³æœŸåˆŠè¦æ±‚\nNatureã€Lancetç­‰è¦æ±‚å…±äº«ä»£ç \n\n\nå¢å¼ºå¯ä¿¡åº¦\nç»“æœå¯è¢«éªŒè¯\n\n\nä¿ƒè¿›åˆä½œ\nå›¢é˜Ÿæˆå‘˜èƒ½ç†è§£ä½ çš„å·¥ä½œ\n\n\n\n\n\n\nè¶Šæ¥è¶Šå¤šçš„æœŸåˆŠå’ŒåŸºé‡‘æœºæ„è¦æ±‚ï¼š - å…¬å¼€åŸå§‹æ•°æ® - å…±äº«åˆ†æä»£ç  - ä½¿ç”¨é¢„æ³¨å†Œ",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "âš™ï¸ å·¥ä½œæµç¨‹",
      "å¯é‡å¤ç ”ç©¶å·¥ä½œæµ"
    ]
  },
  {
    "objectID": "3006-reproducible-research.html#ä¸ºä»€ä¹ˆéœ€è¦å¯é‡å¤ç ”ç©¶",
    "href": "3006-reproducible-research.html#ä¸ºä»€ä¹ˆéœ€è¦å¯é‡å¤ç ”ç©¶",
    "title": "å¯é‡å¤ç ”ç©¶ä¸è®ºæ–‡å†™ä½œå·¥ä½œæµ",
    "section": "",
    "text": "å¯é‡å¤ç ”ç©¶ï¼ˆReproducible Researchï¼‰ æ˜¯æŒ‡å…¶ä»–ç ”ç©¶è€…ï¼ˆåŒ…æ‹¬æœªæ¥çš„ä½ ï¼‰èƒ½å¤Ÿä½¿ç”¨ç›¸åŒçš„æ•°æ®å’Œä»£ç é‡ç°ç ”ç©¶ç»“æœã€‚\n\n\n\n\n\nå¥½å¤„\nè¯´æ˜\n\n\n\n\næé«˜æ•ˆç‡\nä¿®æ”¹åˆ†ææ—¶ä¸å¿…ä»å¤´å¼€å§‹\n\n\nå‡å°‘é”™è¯¯\nè‡ªåŠ¨åŒ–å‡å°‘æ‰‹åŠ¨æ“ä½œå¤±è¯¯\n\n\næ»¡è¶³æœŸåˆŠè¦æ±‚\nNatureã€Lancetç­‰è¦æ±‚å…±äº«ä»£ç \n\n\nå¢å¼ºå¯ä¿¡åº¦\nç»“æœå¯è¢«éªŒè¯\n\n\nä¿ƒè¿›åˆä½œ\nå›¢é˜Ÿæˆå‘˜èƒ½ç†è§£ä½ çš„å·¥ä½œ\n\n\n\n\n\n\nè¶Šæ¥è¶Šå¤šçš„æœŸåˆŠå’ŒåŸºé‡‘æœºæ„è¦æ±‚ï¼š - å…¬å¼€åŸå§‹æ•°æ® - å…±äº«åˆ†æä»£ç  - ä½¿ç”¨é¢„æ³¨å†Œ",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "âš™ï¸ å·¥ä½œæµç¨‹",
      "å¯é‡å¤ç ”ç©¶å·¥ä½œæµ"
    ]
  },
  {
    "objectID": "3006-reproducible-research.html#é¡¹ç›®ç»“æ„è§„èŒƒ",
    "href": "3006-reproducible-research.html#é¡¹ç›®ç»“æ„è§„èŒƒ",
    "title": "å¯é‡å¤ç ”ç©¶ä¸è®ºæ–‡å†™ä½œå·¥ä½œæµ",
    "section": "é¡¹ç›®ç»“æ„è§„èŒƒ",
    "text": "é¡¹ç›®ç»“æ„è§„èŒƒ\n\næ ‡å‡†é¡¹ç›®ç›®å½•\nmy_research_project/\nâ”œâ”€â”€ README.md              # é¡¹ç›®è¯´æ˜\nâ”œâ”€â”€ renv.lock              # Rç¯å¢ƒé”å®šæ–‡ä»¶\nâ”œâ”€â”€ _targets.R             # å·¥ä½œæµå®šä¹‰\nâ”‚\nâ”œâ”€â”€ data/                  # æ•°æ®ç›®å½•\nâ”‚   â”œâ”€â”€ raw/               # åŸå§‹æ•°æ®ï¼ˆåªè¯»ï¼‰\nâ”‚   â””â”€â”€ processed/         # å¤„ç†åæ•°æ®\nâ”‚\nâ”œâ”€â”€ R/                     # Rå‡½æ•°è„šæœ¬\nâ”‚   â”œâ”€â”€ 01_clean_data.R\nâ”‚   â”œâ”€â”€ 02_analysis.R\nâ”‚   â””â”€â”€ 03_visualization.R\nâ”‚\nâ”œâ”€â”€ docs/                  # æ–‡æ¡£\nâ”‚   â”œâ”€â”€ manuscript.qmd     # è®ºæ–‡ç¨¿ä»¶\nâ”‚   â””â”€â”€ supplementary.qmd  # è¡¥å……ææ–™\nâ”‚\nâ”œâ”€â”€ output/                # è¾“å‡ºç»“æœ\nâ”‚   â”œâ”€â”€ figures/\nâ”‚   â””â”€â”€ tables/\nâ”‚\nâ””â”€â”€ reports/               # åˆ†ææŠ¥å‘Š\n\n\nåˆ›å»ºé¡¹ç›®ç»“æ„\n\n# åˆ›å»ºæ ‡å‡†ç›®å½•ç»“æ„\ncreate_project_structure &lt;- function(path = \".\") {\n    dirs &lt;- c(\n        \"data/raw\",\n        \"data/processed\",\n        \"R\",\n        \"docs\",\n        \"output/figures\",\n        \"output/tables\",\n        \"reports\"\n    )\n\n    for (dir in dirs) {\n        dir.create(file.path(path, dir), recursive = TRUE, showWarnings = FALSE)\n    }\n\n    # åˆ›å»º README\n    readme &lt;- \"# ç ”ç©¶é¡¹ç›®åç§°\n\n## é¡¹ç›®æè¿°\nç®€è¦æè¿°é¡¹ç›®ç›®æ ‡\n\n## ç›®å½•ç»“æ„\n- `data/`: æ•°æ®æ–‡ä»¶\n- `R/`: åˆ†æè„šæœ¬\n- `docs/`: è®ºæ–‡ç¨¿ä»¶\n- `output/`: è¾“å‡ºç»“æœ\n\n## å¦‚ä½•è¿è¡Œ\n1. å®‰è£…renv: `install.packages('renv')`\n2. æ¢å¤ç¯å¢ƒ: `renv::restore()`\n3. è¿è¡Œåˆ†æ: `targets::tar_make()`\n\n## ä½œè€…\nå§“å &lt;email@example.com&gt;\n\"\n    writeLines(readme, file.path(path, \"README.md\"))\n\n    message(\"é¡¹ç›®ç»“æ„åˆ›å»ºå®Œæˆ!\")\n}\n\n# ä½¿ç”¨\ncreate_project_structure(\"my_project\")",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "âš™ï¸ å·¥ä½œæµç¨‹",
      "å¯é‡å¤ç ”ç©¶å·¥ä½œæµ"
    ]
  },
  {
    "objectID": "3006-reproducible-research.html#renvç¯å¢ƒç®¡ç†",
    "href": "3006-reproducible-research.html#renvç¯å¢ƒç®¡ç†",
    "title": "å¯é‡å¤ç ”ç©¶ä¸è®ºæ–‡å†™ä½œå·¥ä½œæµ",
    "section": "renvï¼šç¯å¢ƒç®¡ç†",
    "text": "renvï¼šç¯å¢ƒç®¡ç†\nrenv ç¡®ä¿é¡¹ç›®ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬çš„RåŒ…ï¼Œè§£å†³â€åœ¨æˆ‘ç”µè„‘ä¸Šèƒ½è¿è¡Œâ€çš„é—®é¢˜ã€‚\n\nåˆå§‹åŒ–renv\n\n# å®‰è£…renv\ninstall.packages(\"renv\")\n\n# åœ¨é¡¹ç›®ä¸­åˆå§‹åŒ–\nrenv::init()\n\n\n\nåŸºæœ¬å·¥ä½œæµ\n\n# 1. å®‰è£…éœ€è¦çš„åŒ…\ninstall.packages(\"tidyverse\")\ninstall.packages(\"survival\")\n\n# 2. è®°å½•å½“å‰ç¯å¢ƒçŠ¶æ€\nrenv::snapshot()\n\n# 3. æ¢å¤ç¯å¢ƒï¼ˆåœ¨æ–°ç”µè„‘æˆ–ä»–äººä½¿ç”¨æ—¶ï¼‰\nrenv::restore()\n\n# 4. æ›´æ–°åŒ…\nrenv::update()\n\n\n\nrenv.lockæ–‡ä»¶\n{\n  \"R\": {\n    \"Version\": \"4.3.0\",\n    \"Repositories\": [\n      {\n        \"Name\": \"CRAN\",\n        \"URL\": \"https://cloud.r-project.org\"\n      }\n    ]\n  },\n  \"Packages\": {\n    \"dplyr\": {\n      \"Package\": \"dplyr\",\n      \"Version\": \"1.1.3\",\n      \"Source\": \"Repository\"\n    }\n  }\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "âš™ï¸ å·¥ä½œæµç¨‹",
      "å¯é‡å¤ç ”ç©¶å·¥ä½œæµ"
    ]
  },
  {
    "objectID": "3006-reproducible-research.html#targetsè‡ªåŠ¨åŒ–å·¥ä½œæµ",
    "href": "3006-reproducible-research.html#targetsè‡ªåŠ¨åŒ–å·¥ä½œæµ",
    "title": "å¯é‡å¤ç ”ç©¶ä¸è®ºæ–‡å†™ä½œå·¥ä½œæµ",
    "section": "targetsï¼šè‡ªåŠ¨åŒ–å·¥ä½œæµ",
    "text": "targetsï¼šè‡ªåŠ¨åŒ–å·¥ä½œæµ\ntargets å®šä¹‰åˆ†ææ­¥éª¤ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œè‡ªåŠ¨è·³è¿‡æœªæ”¹å˜çš„æ­¥éª¤ã€‚\n\nåŸºæœ¬æ¦‚å¿µ\n\n\n\n\n\n\n\n\n\n\n\nåˆ›å»º _targets.R\n\n# _targets.R æ–‡ä»¶å†…å®¹\nlibrary(targets)\nlibrary(tarchetypes)\n\n# åŠ è½½å‡½æ•°\ntar_source(\"R/\")\n\n# å®šä¹‰å·¥ä½œæµ\nlist(\n    # è¯»å–åŸå§‹æ•°æ®\n    tar_target(\n        raw_data,\n        read_csv(\"data/raw/study_data.csv\")\n    ),\n\n    # æ•°æ®æ¸…æ´—\n    tar_target(\n        clean_data,\n        clean_study_data(raw_data)\n    ),\n\n    # æè¿°æ€§åˆ†æ\n    tar_target(\n        table1,\n        create_table1(clean_data)\n    ),\n\n    # ä¸»åˆ†æ\n    tar_target(\n        main_model,\n        fit_main_model(clean_data)\n    ),\n\n    # æ•æ„Ÿæ€§åˆ†æ\n    tar_target(\n        sensitivity_models,\n        run_sensitivity(clean_data)\n    ),\n\n    # ç”Ÿæˆå›¾è¡¨\n    tar_target(\n        figure1,\n        plot_main_results(main_model),\n        format = \"file\"\n    ),\n\n    # æ¸²æŸ“è®ºæ–‡\n    tar_quarto(\n        manuscript,\n        path = \"docs/manuscript.qmd\"\n    )\n)\n\n\n\nè¿è¡Œå·¥ä½œæµ\n\n# æŸ¥çœ‹å·¥ä½œæµç»“æ„\ntargets::tar_visnetwork()\n\n# è¿è¡Œæ‰€æœ‰æ­¥éª¤\ntargets::tar_make()\n\n# è¯»å–ç»“æœ\ntargets::tar_read(main_model)\n\n# æŸ¥çœ‹è¿‡æ—¶çš„targets\ntargets::tar_outdated()\n\n\n\nR/å‡½æ•°è„šæœ¬ç¤ºä¾‹\n\n# R/01_clean_data.R\nclean_study_data &lt;- function(data) {\n    data %&gt;%\n        filter(!is.na(outcome)) %&gt;%\n        mutate(\n            age_group = cut(age, breaks = c(0, 40, 60, 100)),\n            exposure_cat = ifelse(exposure &gt; median(exposure), \"High\", \"Low\")\n        )\n}\n\n# R/02_analysis.R\nfit_main_model &lt;- function(data) {\n    coxph(Surv(time, event) ~ exposure + age + sex, data = data)\n}\n\ncreate_table1 &lt;- function(data) {\n    tableone::CreateTableOne(\n        vars = c(\"age\", \"sex\", \"exposure\"),\n        strata = \"outcome\",\n        data = data\n    )\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "âš™ï¸ å·¥ä½œæµç¨‹",
      "å¯é‡å¤ç ”ç©¶å·¥ä½œæµ"
    ]
  },
  {
    "objectID": "3006-reproducible-research.html#gitç‰ˆæœ¬æ§åˆ¶",
    "href": "3006-reproducible-research.html#gitç‰ˆæœ¬æ§åˆ¶",
    "title": "å¯é‡å¤ç ”ç©¶ä¸è®ºæ–‡å†™ä½œå·¥ä½œæµ",
    "section": "Gitç‰ˆæœ¬æ§åˆ¶",
    "text": "Gitç‰ˆæœ¬æ§åˆ¶\n\nåŸºç¡€å‘½ä»¤\n# åˆå§‹åŒ–ä»“åº“\ngit init\n\n# æ·»åŠ æ–‡ä»¶\ngit add .\n\n# æäº¤æ›´æ”¹\ngit commit -m \"åˆå§‹åŒ–é¡¹ç›®ç»“æ„\"\n\n# è¿æ¥è¿œç¨‹ä»“åº“\ngit remote add origin https://github.com/username/repo.git\n\n# æ¨é€åˆ°GitHub\ngit push -u origin main\n\n\n.gitignoreæ–‡ä»¶\n# Ré¡¹ç›®å¿½ç•¥æ–‡ä»¶\n.Rproj.user\n.Rhistory\n.RData\n.Ruserdata\n\n# renv\nrenv/library/\nrenv/local/\nrenv/staging/\n\n# targets\n_targets/\n\n# æ•°æ®ï¼ˆæ•æ„Ÿæ•°æ®ä¸ä¸Šä¼ ï¼‰\ndata/raw/*.csv\ndata/raw/*.xlsx\n\n# è¾“å‡ºæ–‡ä»¶\noutput/\n\n# ç³»ç»Ÿæ–‡ä»¶\n.DS_Store\nThumbs.db",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "âš™ï¸ å·¥ä½œæµç¨‹",
      "å¯é‡å¤ç ”ç©¶å·¥ä½œæµ"
    ]
  },
  {
    "objectID": "3006-reproducible-research.html#quartoè®ºæ–‡æ¨¡æ¿",
    "href": "3006-reproducible-research.html#quartoè®ºæ–‡æ¨¡æ¿",
    "title": "å¯é‡å¤ç ”ç©¶ä¸è®ºæ–‡å†™ä½œå·¥ä½œæµ",
    "section": "Quartoè®ºæ–‡æ¨¡æ¿",
    "text": "Quartoè®ºæ–‡æ¨¡æ¿\n\nè®ºæ–‡ç¨¿ä»¶ç»“æ„\n---\ntitle: \"ç ”ç©¶æ ‡é¢˜\"\nauthor:\n  - name: ä½œè€…å§“å\n    affiliation: å•ä½\n    email: email@example.com\ndate: today\nformat:\n  html:\n    toc: true\n  docx:\n    reference-doc: template.docx\n  pdf:\n    documentclass: article\nbibliography: references.bib\ncsl: vancouver.csl\nexecute:\n  echo: false\n  warning: false\n---\n\n\nè®ºæ–‡æ­£æ–‡\n## æ‘˜è¦\n\n**èƒŒæ™¯**ï¼šç®€è¦æè¿°ç ”ç©¶èƒŒæ™¯ã€‚\n\n**æ–¹æ³•**ï¼šæè¿°ç ”ç©¶è®¾è®¡å’Œåˆ†ææ–¹æ³•ã€‚\n\n**ç»“æœ**ï¼šä¸»è¦å‘ç°ã€‚\n\n**ç»“è®º**ï¼šç ”ç©¶ç»“è®ºã€‚\n\n## å¼•è¨€\n\nå¼•ç”¨æ–‡çŒ®ä½¿ç”¨ [@author2024]ã€‚\n\n## æ–¹æ³•\n\n### ç ”ç©¶è®¾è®¡\n\nè¿™æ˜¯ä¸€é¡¹å›é¡¾æ€§é˜Ÿåˆ—ç ”ç©¶ã€‚\n\n### ç»Ÿè®¡åˆ†æ\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(targets)\nmodel &lt;- tar_read(main_model)\n```\n:::\n\n\nä½¿ç”¨Coxæ¯”ä¾‹é£é™©æ¨¡å‹è¿›è¡Œåˆ†æã€‚\n\n## ç»“æœ\n\n### åŸºçº¿ç‰¹å¾\n\n\n::: {#tbl-baseline .cell tbl-cap='è¡¨1. ç ”ç©¶äººç¾¤åŸºçº¿ç‰¹å¾'}\n\n```{.r .cell-code}\ntar_read(table1) |&gt;\n    print(printToggle = FALSE) |&gt;\n    knitr::kable()\n```\n:::\n\n\n### ä¸»è¦åˆ†æ\n\n\n::: {.cell}\n\n```{.r .cell-code}\nknitr::include_graphics(tar_read(figure1))\n```\n:::\n\n\næ¨¡å‹ç»“æœæ˜¾ç¤º...ï¼ˆ@fig-mainï¼‰ã€‚\n\n## è®¨è®º\n\næœ¬ç ”ç©¶å‘ç°...\n\n## å‚è€ƒæ–‡çŒ®",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "âš™ï¸ å·¥ä½œæµç¨‹",
      "å¯é‡å¤ç ”ç©¶å·¥ä½œæµ"
    ]
  },
  {
    "objectID": "3006-reproducible-research.html#æ•°æ®ä¸ä»£ç å…±äº«",
    "href": "3006-reproducible-research.html#æ•°æ®ä¸ä»£ç å…±äº«",
    "title": "å¯é‡å¤ç ”ç©¶ä¸è®ºæ–‡å†™ä½œå·¥ä½œæµ",
    "section": "æ•°æ®ä¸ä»£ç å…±äº«",
    "text": "æ•°æ®ä¸ä»£ç å…±äº«\n\næ•°æ®å…±äº«è§„èŒƒ\n\n# åˆ›å»ºæ•°æ®å­—å…¸\ncreate_data_dictionary &lt;- function(data) {\n    tibble(\n        å˜é‡å = names(data),\n        ç±»å‹ = sapply(data, class),\n        æè¿° = NA,\n        å–å€¼èŒƒå›´ = sapply(data, function(x) {\n            if (is.numeric(x)) {\n                paste(range(x, na.rm = TRUE), collapse = \" - \")\n            } else {\n                paste(unique(x)[1:5], collapse = \", \")\n            }\n        })\n    )\n}\n\n# ç¤ºä¾‹\ndata_dict &lt;- create_data_dictionary(mtcars)\nwrite_csv(data_dict, \"data/data_dictionary.csv\")\n\n\n\nä»£ç å…±äº«æ¸…å•\n\n# ç”Ÿæˆä¾èµ–æŠ¥å‘Š\nrenv::dependencies()\n\n# ç”Ÿæˆä¼šè¯ä¿¡æ¯\nsessionInfo()\n\n# æˆ–æ›´è¯¦ç»†çš„\ndevtools::session_info()",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "âš™ï¸ å·¥ä½œæµç¨‹",
      "å¯é‡å¤ç ”ç©¶å·¥ä½œæµ"
    ]
  },
  {
    "objectID": "3006-reproducible-research.html#å®æˆ˜å®Œæ•´é¡¹ç›®ç¤ºä¾‹",
    "href": "3006-reproducible-research.html#å®æˆ˜å®Œæ•´é¡¹ç›®ç¤ºä¾‹",
    "title": "å¯é‡å¤ç ”ç©¶ä¸è®ºæ–‡å†™ä½œå·¥ä½œæµ",
    "section": "å®æˆ˜ï¼šå®Œæ•´é¡¹ç›®ç¤ºä¾‹",
    "text": "å®æˆ˜ï¼šå®Œæ•´é¡¹ç›®ç¤ºä¾‹\n\nç¬¬1æ­¥ï¼šåˆ›å»ºé¡¹ç›®\n\n# åˆ›å»ºRStudioé¡¹ç›®\nusethis::create_project(\"my_cohort_study\")\n\n# åˆå§‹åŒ–renv\nrenv::init()\n\n# å®‰è£…å¿…è¦çš„åŒ…\ninstall.packages(c(\"tidyverse\", \"survival\", \"tableone\", \"targets\"))\nrenv::snapshot()\n\n\n\nç¬¬2æ­¥ï¼šå®šä¹‰åˆ†æå‡½æ•°\n\n# R/functions.R\nload_data &lt;- function(path) {\n    readr::read_csv(path) |&gt;\n        janitor::clean_names()\n}\n\nrun_cox &lt;- function(data) {\n    survival::coxph(\n        Surv(time, event) ~ exposure + age + sex,\n        data = data\n    )\n}\n\nsummarize_model &lt;- function(model) {\n    broom::tidy(model, conf.int = TRUE, exponentiate = TRUE)\n}\n\n\n\nç¬¬3æ­¥ï¼šåˆ›å»ºå·¥ä½œæµ\n\n# _targets.R\nlibrary(targets)\ntar_source(\"R/functions.R\")\n\nlist(\n    tar_target(file, \"data/raw/cohort.csv\", format = \"file\"),\n    tar_target(data, load_data(file)),\n    tar_target(model, run_cox(data)),\n    tar_target(results, summarize_model(model))\n)\n\n\n\nç¬¬4æ­¥ï¼šè¿è¡Œå¹¶æ£€æŸ¥\n\n# å¯è§†åŒ–å·¥ä½œæµ\ntar_visnetwork()\n\n# è¿è¡Œ\ntar_make()\n\n# è¯»å–ç»“æœ\ntar_read(results)",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "âš™ï¸ å·¥ä½œæµç¨‹",
      "å¯é‡å¤ç ”ç©¶å·¥ä½œæµ"
    ]
  },
  {
    "objectID": "3006-reproducible-research.html#æ€»ç»“",
    "href": "3006-reproducible-research.html#æ€»ç»“",
    "title": "å¯é‡å¤ç ”ç©¶ä¸è®ºæ–‡å†™ä½œå·¥ä½œæµ",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå·¥å…·\nç”¨é€”\nå…³é”®å‘½ä»¤\n\n\n\n\nç›®å½•ç»“æ„\nç»„ç»‡æ–‡ä»¶\næ ‡å‡†åŒ–å‘½å\n\n\nrenv\nç¯å¢ƒç®¡ç†\nsnapshot(), restore()\n\n\ntargets\nå·¥ä½œæµè‡ªåŠ¨åŒ–\ntar_make()\n\n\nGit\nç‰ˆæœ¬æ§åˆ¶\ncommit, push\n\n\nQuarto\nè®ºæ–‡å†™ä½œ\nquarto render\n\n\n\n\næ¨èèµ„æº\n\nR for Data Science\ntargetsç”¨æˆ·æŒ‡å—\nrenvæ–‡æ¡£\nQuartoè®ºæ–‡æ¨¡æ¿\nGitHubå­¦ä¹ èµ„æº\n\n\n\næœ€ä½³å®è·µ\n\nä»é¡¹ç›®å¼€å§‹å°±è§„èŒƒåŒ–ï¼Œä¸è¦ç­‰åˆ°æŠ•ç¨¿å‰\né¢‘ç¹æäº¤Gitï¼Œå†™æ¸…æ¥šæäº¤ä¿¡æ¯\nåŸå§‹æ•°æ®åªè¯»ï¼Œå¤„ç†åæ•°æ®å¦å­˜\nå‡½æ•°åŒ–ä»£ç ï¼Œé¿å…å¤åˆ¶ç²˜è´´\nå†™å¥½READMEï¼ŒåŒ…æ‹¬è¿è¡Œè¯´æ˜",
    "crumbs": [
      "ä¸»é¡µ",
      "å…¥é—¨æŒ‡å—",
      "âš™ï¸ å·¥ä½œæµç¨‹",
      "å¯é‡å¤ç ”ç©¶å·¥ä½œæµ"
    ]
  },
  {
    "objectID": "3008-regexp.html",
    "href": "3008-regexp.html",
    "title": "æ­£åˆ™è¡¨è¾¾å¼ R è¯­è¨€å®æˆ˜æŒ‡å—",
    "section": "",
    "text": "æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegular Expressionï¼Œç®€ç§° Regexï¼‰æ˜¯ä¸€ç§å¼ºå¤§çš„æ–‡æœ¬å¤„ç†å·¥å…·ï¼Œç”¨äºæœç´¢ã€åŒ¹é…å’Œæ›¿æ¢ç‰¹å®šçš„å­—ç¬¦æ¨¡å¼ã€‚åœ¨ R è¯­è¨€ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼æ˜¯æ•°æ®æ¸…æ´—å’Œæ–‡æœ¬æŒ–æ˜çš„æ ¸å¿ƒæŠ€èƒ½ã€‚\næ­£åˆ™è¡¨è¾¾å¼å¯ä»¥ç”¨æ¥ï¼š\n\néªŒè¯æ ¼å¼ï¼šæ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆæŸç§è§„åˆ™ï¼ˆå¦‚ç”µå­é‚®ç®±ã€ç”µè¯å·ç ï¼‰\næå–ä¿¡æ¯ï¼šä»ä¸€æ®µæ–‡å­—ä¸­æå–ç‰¹å®šçš„ä¿¡æ¯ï¼ˆå¦‚ ICD ç¼–ç ã€è¯ç‰©å‰‚é‡ï¼‰\næ‰¹é‡æ›¿æ¢ï¼šæ›¿æ¢æ–‡æœ¬ä¸­çš„ç‰¹å®šå†…å®¹ï¼ˆå¦‚ç»Ÿä¸€æ—¥æœŸæ ¼å¼ï¼‰\næ–‡æœ¬åˆ†å‰²ï¼šæŒ‰ç…§ç‰¹å®šæ¨¡å¼åˆ†å‰²å­—ç¬¦ä¸²",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "æ­£åˆ™è¡¨è¾¾å¼"
    ]
  },
  {
    "objectID": "3008-regexp.html#ä»€ä¹ˆæ˜¯æ­£åˆ™è¡¨è¾¾å¼",
    "href": "3008-regexp.html#ä»€ä¹ˆæ˜¯æ­£åˆ™è¡¨è¾¾å¼",
    "title": "æ­£åˆ™è¡¨è¾¾å¼ R è¯­è¨€å®æˆ˜æŒ‡å—",
    "section": "",
    "text": "æ­£åˆ™è¡¨è¾¾å¼ï¼ˆRegular Expressionï¼Œç®€ç§° Regexï¼‰æ˜¯ä¸€ç§å¼ºå¤§çš„æ–‡æœ¬å¤„ç†å·¥å…·ï¼Œç”¨äºæœç´¢ã€åŒ¹é…å’Œæ›¿æ¢ç‰¹å®šçš„å­—ç¬¦æ¨¡å¼ã€‚åœ¨ R è¯­è¨€ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼æ˜¯æ•°æ®æ¸…æ´—å’Œæ–‡æœ¬æŒ–æ˜çš„æ ¸å¿ƒæŠ€èƒ½ã€‚\næ­£åˆ™è¡¨è¾¾å¼å¯ä»¥ç”¨æ¥ï¼š\n\néªŒè¯æ ¼å¼ï¼šæ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆæŸç§è§„åˆ™ï¼ˆå¦‚ç”µå­é‚®ç®±ã€ç”µè¯å·ç ï¼‰\næå–ä¿¡æ¯ï¼šä»ä¸€æ®µæ–‡å­—ä¸­æå–ç‰¹å®šçš„ä¿¡æ¯ï¼ˆå¦‚ ICD ç¼–ç ã€è¯ç‰©å‰‚é‡ï¼‰\næ‰¹é‡æ›¿æ¢ï¼šæ›¿æ¢æ–‡æœ¬ä¸­çš„ç‰¹å®šå†…å®¹ï¼ˆå¦‚ç»Ÿä¸€æ—¥æœŸæ ¼å¼ï¼‰\næ–‡æœ¬åˆ†å‰²ï¼šæŒ‰ç…§ç‰¹å®šæ¨¡å¼åˆ†å‰²å­—ç¬¦ä¸²",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "æ­£åˆ™è¡¨è¾¾å¼"
    ]
  },
  {
    "objectID": "3008-regexp.html#r-è¯­è¨€ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼ç¯å¢ƒ",
    "href": "3008-regexp.html#r-è¯­è¨€ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼ç¯å¢ƒ",
    "title": "æ­£åˆ™è¡¨è¾¾å¼ R è¯­è¨€å®æˆ˜æŒ‡å—",
    "section": "R è¯­è¨€ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼ç¯å¢ƒ",
    "text": "R è¯­è¨€ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼ç¯å¢ƒ\nåœ¨ R ä¸­ï¼Œä¸»è¦æœ‰ä¸¤å¥—å¤„ç†æ­£åˆ™è¡¨è¾¾å¼çš„ç³»ç»Ÿï¼š\n\n\n\n\n\n\n\n\nç³»ç»Ÿ\næè¿°\né€‚ç”¨åœºæ™¯\n\n\n\n\nBase R\ngrep(), sub(), gsub(), regexpr() ç­‰\nç®€å•åŒ¹é…ã€å…¼å®¹è€ä»£ç \n\n\nstringr\nstr_detect(), str_extract() ç­‰\nç°ä»£å¼€å‘ã€tidyverse é›†æˆ\n\n\n\n\n[!TIP] æ¨èä½¿ç”¨ stringr åŒ…è¿›è¡Œæ—¥å¸¸å¼€å‘ï¼Œå…¶å‡½æ•°å‘½åç»Ÿä¸€ï¼ˆéƒ½ä»¥ str_ å¼€å¤´ï¼‰ã€å‚æ•°é¡ºåºä¸€è‡´ï¼ˆå­—ç¬¦ä¸²åœ¨å‰ï¼Œæ¨¡å¼åœ¨åï¼‰ï¼Œæ›´æ˜“äºè®°å¿†å’Œä½¿ç”¨ã€‚\n\n\n# å®‰è£…å¹¶åŠ è½½å¿…è¦çš„åŒ…\nif (!require(\"stringr\")) install.packages(\"stringr\")\nif (!require(\"dplyr\")) install.packages(\"dplyr\")\nif (!require(\"tibble\")) install.packages(\"tibble\")\n\nlibrary(stringr)\nlibrary(dplyr)\nlibrary(tibble)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "æ­£åˆ™è¡¨è¾¾å¼"
    ]
  },
  {
    "objectID": "3008-regexp.html#åŸºç¡€è¯­æ³•è¯¦è§£",
    "href": "3008-regexp.html#åŸºç¡€è¯­æ³•è¯¦è§£",
    "title": "æ­£åˆ™è¡¨è¾¾å¼ R è¯­è¨€å®æˆ˜æŒ‡å—",
    "section": "åŸºç¡€è¯­æ³•è¯¦è§£",
    "text": "åŸºç¡€è¯­æ³•è¯¦è§£\n\nå­—ç¬¦åŒ¹é…\næœ€åŸºæœ¬çš„æ­£åˆ™è¡¨è¾¾å¼å°±æ˜¯æ™®é€šå­—ç¬¦ï¼Œå®ƒä»¬åŒ¹é…è‡ªèº«ï¼š\n\n# ç®€å•å­—ç¬¦åŒ¹é…\ntext &lt;- \"Hello World\"\nstr_detect(text, \"World\") # æ£€æµ‹æ˜¯å¦åŒ…å« \"World\"\n\n[1] TRUE\n\nstr_extract(text, \"World\") # æå– \"World\"\n\n[1] \"World\"\n\n\n\n\nå…ƒå­—ç¬¦ï¼ˆç‰¹æ®Šå­—ç¬¦ï¼‰\nä»¥ä¸‹æ˜¯æ­£åˆ™è¡¨è¾¾å¼ä¸­æœ€å¸¸ç”¨çš„å…ƒå­—ç¬¦ï¼š\n\n\n\nå…ƒå­—ç¬¦\nå«ä¹‰\nç¤ºä¾‹\n\n\n\n\n.\nåŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦ï¼ˆé™¤æ¢è¡Œç¬¦ï¼‰\na.c åŒ¹é… â€œabcâ€, â€œa1câ€\n\n\n^\nåŒ¹é…å­—ç¬¦ä¸²å¼€å§‹\n^Hello åŒ¹é…ä»¥ Hello å¼€å¤´\n\n\n$\nåŒ¹é…å­—ç¬¦ä¸²ç»“æŸ\nworld$ åŒ¹é…ä»¥ world ç»“å°¾\n\n\n[]\nå­—ç¬¦é›†ï¼ŒåŒ¹é…å…¶ä¸­ä»»æ„ä¸€ä¸ª\n[aeiou] åŒ¹é…å…ƒéŸ³å­—æ¯\n\n\n[^]\nå¦å®šå­—ç¬¦é›†\n[^0-9] åŒ¹é…éæ•°å­—\n\n\n\\|\næˆ–æ“ä½œ\ncat\\|dog åŒ¹é… cat æˆ– dog\n\n\n\n\nfruits &lt;- c(\"apple\", \"banana\", \"cherry\", \"date\", \"apricot\")\n\n# ä»¥ 'a' å¼€å¤´\nstr_subset(fruits, \"^a\")\n\n[1] \"apple\"   \"apricot\"\n\n# ä»¥ 'e' ç»“å°¾\nstr_subset(fruits, \"e$\")\n\n[1] \"apple\" \"date\" \n\n# åŒ…å« 'an' æˆ– 'er'\nstr_subset(fruits, \"an|er\")\n\n[1] \"banana\" \"cherry\"\n\n\n\n\né‡è¯ï¼ˆæ¬¡æ•°åŒ¹é…ï¼‰\né‡è¯ç”¨äºæŒ‡å®šå‰é¢çš„å…ƒç´ åº”è¯¥åŒ¹é…å¤šå°‘æ¬¡ï¼š\n\n\n\né‡è¯\nå«ä¹‰\nç¤ºä¾‹\n\n\n\n\n*\n0æ¬¡æˆ–å¤šæ¬¡\nab*c åŒ¹é… â€œacâ€, â€œabcâ€, â€œabbcâ€\n\n\n+\n1æ¬¡æˆ–å¤šæ¬¡\nab+c åŒ¹é… â€œabcâ€, â€œabbcâ€ï¼ˆä¸åŒ¹é… â€œacâ€ï¼‰\n\n\n?\n0æ¬¡æˆ–1æ¬¡\ncolou?r åŒ¹é… â€œcolorâ€, â€œcolourâ€\n\n\n{n}\næ°å¥½næ¬¡\na{3} åŒ¹é… â€œaaaâ€\n\n\n{n,}\nè‡³å°‘næ¬¡\na{2,} åŒ¹é… â€œaaâ€, â€œaaaâ€, â€¦\n\n\n{n,m}\nnåˆ°mæ¬¡\na{2,4} åŒ¹é… â€œaaâ€, â€œaaaâ€, â€œaaaaâ€\n\n\n\n\n# é‡è¯ç¤ºä¾‹\ntexts &lt;- c(\"color\", \"colour\", \"colouur\", \"clr\")\n\n# åŒ¹é… color æˆ– colour\nstr_subset(texts, \"colou?r\")\n\n[1] \"color\"  \"colour\"\n\n# åŒ¹é…è‡³å°‘ä¸€ä¸ª u\nstr_subset(texts, \"colo+u*r\")\n\n[1] \"color\"   \"colour\"  \"colouur\"\n\n\n\n\nç‰¹æ®Šè½¬ä¹‰åºåˆ—\n\n[!IMPORTANT] åœ¨ R ä¸­ï¼Œåæ–œæ  \\ æ˜¯è½¬ä¹‰å­—ç¬¦ã€‚è¦è¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼ä¸­çš„ç‰¹æ®Šå«ä¹‰ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨åŒåæ–œæ  \\\\ã€‚\n\n\n\n\nè½¬ä¹‰åºåˆ—\nå«ä¹‰\nç­‰ä»·å†™æ³•\n\n\n\n\n\\\\d\næ•°å­—\n[0-9]\n\n\n\\\\D\néæ•°å­—\n[^0-9]\n\n\n\\\\w\nå•è¯å­—ç¬¦\n[a-zA-Z0-9_]\n\n\n\\\\W\néå•è¯å­—ç¬¦\n[^a-zA-Z0-9_]\n\n\n\\\\s\nç©ºç™½å­—ç¬¦\nç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç­‰\n\n\n\\\\S\néç©ºç™½å­—ç¬¦\n\n\n\n\\\\b\nå•è¯è¾¹ç•Œ\n\n\n\n\n\nmixed_text &lt;- \"ID123 costs $45.99 on 2024-01-15\"\n\n# æå–æ‰€æœ‰æ•°å­—åºåˆ—\nstr_extract_all(mixed_text, \"\\\\d+\")\n\n[[1]]\n[1] \"123\"  \"45\"   \"99\"   \"2024\" \"01\"   \"15\"  \n\n# æå–æ‰€æœ‰å•è¯\nstr_extract_all(mixed_text, \"\\\\w+\")\n\n[[1]]\n[1] \"ID123\" \"costs\" \"45\"    \"99\"    \"on\"    \"2024\"  \"01\"    \"15\"   \n\n# æå–ä»·æ ¼æ ¼å¼\nstr_extract(mixed_text, \"\\\\$\\\\d+\\\\.\\\\d{2}\")\n\n[1] \"$45.99\"",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "æ­£åˆ™è¡¨è¾¾å¼"
    ]
  },
  {
    "objectID": "3008-regexp.html#base-r-å‡½æ•°è¯¦è§£",
    "href": "3008-regexp.html#base-r-å‡½æ•°è¯¦è§£",
    "title": "æ­£åˆ™è¡¨è¾¾å¼ R è¯­è¨€å®æˆ˜æŒ‡å—",
    "section": "Base R å‡½æ•°è¯¦è§£",
    "text": "Base R å‡½æ•°è¯¦è§£\nè™½ç„¶ stringr æ›´ä¸ºæ¨èï¼Œä½†äº†è§£ Base R å‡½æ•°ä»ç„¶å¾ˆé‡è¦ï¼Œå°¤å…¶æ˜¯åœ¨é˜…è¯»å’Œç»´æŠ¤è€ä»£ç æ—¶ã€‚\n\ngrep ä¸ greplï¼šæ¨¡å¼æ£€æµ‹\n\nsamples &lt;- c(\"Sample_001\", \"Control_002\", \"Sample_003\", \"Treated_004\")\n\n# grep è¿”å›åŒ¹é…çš„ç´¢å¼•ä½ç½®\ngrep(\"Sample\", samples)\n\n[1] 1 3\n\n# grepl è¿”å›é€»è¾‘å‘é‡\ngrepl(\"Sample\", samples)\n\n[1]  TRUE FALSE  TRUE FALSE\n\n# ä½¿ç”¨ value = TRUE è¿”å›åŒ¹é…çš„å€¼\ngrep(\"Sample\", samples, value = TRUE)\n\n[1] \"Sample_001\" \"Sample_003\"\n\n\n\n\nsub ä¸ gsubï¼šæ›¿æ¢æ“ä½œ\n\nmessy_ids &lt;- c(\"ID-001-A\", \"ID-002-B\", \"ID-003-C\")\n\n# sub åªæ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…\nsub(\"-\", \"_\", messy_ids)\n\n[1] \"ID_001-A\" \"ID_002-B\" \"ID_003-C\"\n\n# gsub æ›¿æ¢æ‰€æœ‰åŒ¹é…\ngsub(\"-\", \"_\", messy_ids)\n\n[1] \"ID_001_A\" \"ID_002_B\" \"ID_003_C\"\n\n# åˆ é™¤æ‰€æœ‰éæ•°å­—å­—ç¬¦\ngsub(\"[^0-9]\", \"\", messy_ids)\n\n[1] \"001\" \"002\" \"003\"\n\n\n\n\nregexpr ä¸ gregexprï¼šä½ç½®åŒ¹é…\n\ntext &lt;- \"The quick brown fox jumps over the lazy dog\"\n\n# regexpr è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…çš„ä½ç½®å’Œé•¿åº¦\nmatch_info &lt;- regexpr(\"the\", text, ignore.case = TRUE)\nmatch_info\n\n[1] 1\nattr(,\"match.length\")\n[1] 3\nattr(,\"index.type\")\n[1] \"chars\"\nattr(,\"useBytes\")\n[1] TRUE\n\nattr(match_info, \"match.length\")\n\n[1] 3\n\n# gregexpr è¿”å›æ‰€æœ‰åŒ¹é…\nall_matches &lt;- gregexpr(\"the\", text, ignore.case = TRUE)\nall_matches\n\n[[1]]\n[1]  1 32\nattr(,\"match.length\")\n[1] 3 3\nattr(,\"index.type\")\n[1] \"chars\"\nattr(,\"useBytes\")\n[1] TRUE\n\n\n\n\nregmatchesï¼šæå–åŒ¹é…å†…å®¹\n\n# é…åˆ regexpr/gregexpr ä½¿ç”¨\nphone_text &lt;- \"Contact: 123-456-7890 or 098-765-4321\"\n\n# æ‰¾åˆ°æ‰€æœ‰ç”µè¯å·ç çš„ä½ç½®\npositions &lt;- gregexpr(\"\\\\d{3}-\\\\d{3}-\\\\d{4}\", phone_text)\n\n# æå–åŒ¹é…å†…å®¹\nregmatches(phone_text, positions)\n\n[[1]]\n[1] \"123-456-7890\" \"098-765-4321\"",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "æ­£åˆ™è¡¨è¾¾å¼"
    ]
  },
  {
    "objectID": "3008-regexp.html#stringr-æ ¸å¿ƒå‡½æ•°",
    "href": "3008-regexp.html#stringr-æ ¸å¿ƒå‡½æ•°",
    "title": "æ­£åˆ™è¡¨è¾¾å¼ R è¯­è¨€å®æˆ˜æŒ‡å—",
    "section": "stringr æ ¸å¿ƒå‡½æ•°",
    "text": "stringr æ ¸å¿ƒå‡½æ•°\nstringr åŒ…æä¾›äº†ä¸€å¥—ç»Ÿä¸€ã€ç°ä»£çš„å­—ç¬¦ä¸²å¤„ç†å‡½æ•°ã€‚\n\nstr_detectï¼šæ£€æµ‹æ¨¡å¼\nç”¨äºåˆ¤æ–­å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«ç‰¹å®šæ¨¡å¼ï¼Œè¿”å›é€»è¾‘å€¼ã€‚å¸¸ç”¨äº dplyr::filter() ä¸­ã€‚\n\nemails &lt;- c(\"john@example.com\", \"invalid-email\", \"mary@company.org\", \"test@\")\n\n# æ£€æµ‹æ˜¯å¦æ˜¯æœ‰æ•ˆé‚®ç®±æ ¼å¼\nstr_detect(emails, \"^[\\\\w.-]+@[\\\\w.-]+\\\\.[a-z]{2,}$\")\n\n[1]  TRUE FALSE  TRUE FALSE\n\n# åœ¨æ•°æ®æ¡†ä¸­ä½¿ç”¨\ntibble(email = emails) %&gt;%\n  filter(str_detect(email, \"@.*\\\\.\"))\n\n# A tibble: 2 Ã— 1\n  email           \n  &lt;chr&gt;           \n1 john@example.com\n2 mary@company.org\n\n\n\n\nstr_extract ä¸ str_extract_allï¼šæå–å†…å®¹\n\nmedical_notes &lt;- c(\n  \"Patient took 500mg aspirin twice daily\",\n  \"Prescribed 250mg antibiotics for 7 days\",\n  \"Blood pressure: 120/80 mmHg\"\n)\n\n# æå–ç¬¬ä¸€ä¸ªå‰‚é‡ï¼ˆæ•°å­—+mgï¼‰\nstr_extract(medical_notes, \"\\\\d+mg\")\n\n[1] \"500mg\" \"250mg\" NA     \n\n# æå–æ‰€æœ‰æ•°å­—\nstr_extract_all(medical_notes, \"\\\\d+\")\n\n[[1]]\n[1] \"500\"\n\n[[2]]\n[1] \"250\" \"7\"  \n\n[[3]]\n[1] \"120\" \"80\" \n\n\n\n\nstr_replace ä¸ str_replace_allï¼šæ›¿æ¢å†…å®¹\n\ndates &lt;- c(\"2024/01/15\", \"2024/02/28\", \"2024/03/10\")\n\n# å°†æ–œæ æ›¿æ¢ä¸ºç ´æŠ˜å·\nstr_replace_all(dates, \"/\", \"-\")\n\n[1] \"2024-01-15\" \"2024-02-28\" \"2024-03-10\"\n\n# ä½¿ç”¨åˆ†ç»„è¿›è¡Œæ ¼å¼è½¬æ¢ï¼ˆYYYY/MM/DD -&gt; DD-MM-YYYYï¼‰\nstr_replace(dates, \"(\\\\d{4})/(\\\\d{2})/(\\\\d{2})\", \"\\\\3-\\\\2-\\\\1\")\n\n[1] \"15-01-2024\" \"28-02-2024\" \"10-03-2024\"\n\n\n\n\nstr_match ä¸ str_match_allï¼šåˆ†ç»„æ•è·\nè¿™æ˜¯ä»å¤æ‚æ–‡æœ¬ä¸­æå–ç»“æ„åŒ–ä¿¡æ¯çš„åˆ©å™¨ã€‚\n\n# æå–è¯ç‰©ä¿¡æ¯ï¼šè¯åã€å‰‚é‡ã€å•ä½\nprescriptions &lt;- c(\n  \"Aspirin 500mg twice daily\",\n  \"Metformin 1000mg once daily\",\n  \"Lisinopril 10mg once daily\"\n)\n\n# ä½¿ç”¨åˆ†ç»„æ•è·\npattern &lt;- \"(\\\\w+)\\\\s+(\\\\d+)(mg|mcg)\"\nmatches &lt;- str_match(prescriptions, pattern)\nmatches\n\n     [,1]               [,2]         [,3]   [,4]\n[1,] \"Aspirin 500mg\"    \"Aspirin\"    \"500\"  \"mg\"\n[2,] \"Metformin 1000mg\" \"Metformin\"  \"1000\" \"mg\"\n[3,] \"Lisinopril 10mg\"  \"Lisinopril\" \"10\"   \"mg\"\n\n# è½¬æ¢ä¸ºæ•°æ®æ¡†\ntibble(\n  full_match = matches[, 1],\n  drug = matches[, 2],\n  dose = as.numeric(matches[, 3]),\n  unit = matches[, 4]\n)\n\n# A tibble: 3 Ã— 4\n  full_match       drug        dose unit \n  &lt;chr&gt;            &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;\n1 Aspirin 500mg    Aspirin      500 mg   \n2 Metformin 1000mg Metformin   1000 mg   \n3 Lisinopril 10mg  Lisinopril    10 mg   \n\n\n\n\nstr_split ä¸ str_split_fixedï¼šåˆ†å‰²å­—ç¬¦ä¸²\n\n# åˆ†å‰²åœ°å€\naddresses &lt;- c(\"åŒ—äº¬å¸‚|æµ·æ·€åŒº|ä¸­å…³æ‘\", \"ä¸Šæµ·å¸‚|æµ¦ä¸œæ–°åŒº|é™†å®¶å˜´\")\n\n# str_split è¿”å›åˆ—è¡¨\nstr_split(addresses, \"\\\\|\")\n\n[[1]]\n[1] \"åŒ—äº¬å¸‚\" \"æµ·æ·€åŒº\" \"ä¸­å…³æ‘\"\n\n[[2]]\n[1] \"ä¸Šæµ·å¸‚\"   \"æµ¦ä¸œæ–°åŒº\" \"é™†å®¶å˜´\"  \n\n# str_split_fixed è¿”å›çŸ©é˜µï¼ŒæŒ‡å®šåˆ—æ•°\nstr_split_fixed(addresses, \"\\\\|\", n = 3)\n\n     [,1]     [,2]       [,3]    \n[1,] \"åŒ—äº¬å¸‚\" \"æµ·æ·€åŒº\"   \"ä¸­å…³æ‘\"\n[2,] \"ä¸Šæµ·å¸‚\" \"æµ¦ä¸œæ–°åŒº\" \"é™†å®¶å˜´\"\n\n\n\n\nstr_locate ä¸ str_locate_allï¼šå®šä½åŒ¹é…\n\nsentence &lt;- \"The cat sat on the mat\"\n\n# æ‰¾åˆ°ç¬¬ä¸€ä¸ª \"at\" çš„ä½ç½®\nstr_locate(sentence, \"at\")\n\n     start end\n[1,]     6   7\n\n# æ‰¾åˆ°æ‰€æœ‰ \"at\" çš„ä½ç½®\nstr_locate_all(sentence, \"at\")\n\n[[1]]\n     start end\n[1,]     6   7\n[2,]    10  11\n[3,]    21  22\n\n\n\n\nstr_subset ä¸ str_whichï¼šç­›é€‰åŒ¹é…\n\nfiles &lt;- c(\"data_2024.csv\", \"report_2024.pdf\", \"data_2023.csv\", \"notes.txt\")\n\n# è¿”å›åŒ¹é…çš„å…ƒç´ \nstr_subset(files, \"\\\\.csv$\")\n\n[1] \"data_2024.csv\" \"data_2023.csv\"\n\n# è¿”å›åŒ¹é…çš„ç´¢å¼•\nstr_which(files, \"\\\\.csv$\")\n\n[1] 1 3",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "æ­£åˆ™è¡¨è¾¾å¼"
    ]
  },
  {
    "objectID": "3008-regexp.html#é«˜çº§æ­£åˆ™æŠ€å·§",
    "href": "3008-regexp.html#é«˜çº§æ­£åˆ™æŠ€å·§",
    "title": "æ­£åˆ™è¡¨è¾¾å¼ R è¯­è¨€å®æˆ˜æŒ‡å—",
    "section": "é«˜çº§æ­£åˆ™æŠ€å·§",
    "text": "é«˜çº§æ­£åˆ™æŠ€å·§\n\nåˆ†ç»„ä¸åå‘å¼•ç”¨\nåˆ†ç»„ä½¿ç”¨åœ†æ‹¬å· () å®šä¹‰ï¼Œå¯ä»¥åœ¨åŒä¸€è¡¨è¾¾å¼ä¸­å¼•ç”¨ä¹‹å‰çš„åˆ†ç»„ã€‚\n\n# æ£€æµ‹é‡å¤å•è¯\ntext_with_duplicates &lt;- c(\"the the cat\", \"a dog\", \"is is is great\")\n\n# \\\\1 å¼•ç”¨ç¬¬ä¸€ä¸ªåˆ†ç»„\nstr_detect(text_with_duplicates, \"\\\\b(\\\\w+)\\\\s+\\\\1\\\\b\")\n\n[1]  TRUE FALSE  TRUE\n\n# åˆ é™¤é‡å¤å•è¯\nstr_replace_all(text_with_duplicates, \"\\\\b(\\\\w+)(\\\\s+\\\\1)+\\\\b\", \"\\\\1\")\n\n[1] \"the cat\"  \"a dog\"    \"is great\"\n\n\n\n\nç¯è§†æ–­è¨€ï¼ˆLookaroundï¼‰\nç¯è§†æ–­è¨€å¯ä»¥åœ¨ä¸æ¶ˆè€—å­—ç¬¦çš„æƒ…å†µä¸‹åŒ¹é…ä½ç½®ã€‚\n\n\n\nç±»å‹\nè¯­æ³•\nå«ä¹‰\n\n\n\n\næ­£å‘å‰ç»\n(?=...)\nåé¢è·Ÿç€â€¦\n\n\nè´Ÿå‘å‰ç»\n(?!...)\nåé¢ä¸è·Ÿç€â€¦\n\n\næ­£å‘åé¡¾\n(?&lt;=...)\nå‰é¢æ˜¯â€¦\n\n\nè´Ÿå‘åé¡¾\n(?&lt;!...)\nå‰é¢ä¸æ˜¯â€¦\n\n\n\n\nprices &lt;- c(\"$100\", \"â‚¬200\", \"Â¥300\", \"$50\")\n\n# æå–ç¾å…ƒä»·æ ¼ï¼ˆ$ åé¢çš„æ•°å­—ï¼‰- ä½¿ç”¨æ­£å‘åé¡¾\nstr_extract(prices, \"(?&lt;=\\\\$)\\\\d+\")\n\n[1] \"100\" NA    NA    \"50\" \n\n# æå–æ•°å­—åé¢ä¸è·Ÿ $ çš„ä»·æ ¼\nstr_extract(c(\"100$\", \"200\", \"300â‚¬\"), \"\\\\d+(?!\\\\$)\")\n\n[1] \"10\"  \"200\" \"300\"\n\n\n\n\nè´ªå©ªä¸éè´ªå©ªåŒ¹é…\né»˜è®¤æƒ…å†µä¸‹ï¼Œé‡è¯æ˜¯è´ªå©ªçš„ï¼ˆåŒ¹é…å°½å¯èƒ½å¤šçš„å­—ç¬¦ï¼‰ã€‚åœ¨é‡è¯ååŠ  ? å˜æˆéè´ªå©ªæ¨¡å¼ã€‚\n\nhtml &lt;- \"&lt;div&gt;First&lt;/div&gt;&lt;div&gt;Second&lt;/div&gt;\"\n\n# è´ªå©ªåŒ¹é…ï¼šåŒ¹é…åˆ°æœ€åä¸€ä¸ª &lt;/div&gt;\nstr_extract(html, \"&lt;div&gt;.*&lt;/div&gt;\")\n\n[1] \"&lt;div&gt;First&lt;/div&gt;&lt;div&gt;Second&lt;/div&gt;\"\n\n# éè´ªå©ªåŒ¹é…ï¼šåŒ¹é…åˆ°ç¬¬ä¸€ä¸ª &lt;/div&gt;\nstr_extract(html, \"&lt;div&gt;.*?&lt;/div&gt;\")\n\n[1] \"&lt;div&gt;First&lt;/div&gt;\"\n\n# æå–æ‰€æœ‰ div å†…å®¹\nstr_extract_all(html, \"&lt;div&gt;.*?&lt;/div&gt;\")\n\n[[1]]\n[1] \"&lt;div&gt;First&lt;/div&gt;\"  \"&lt;div&gt;Second&lt;/div&gt;\"\n\n\n\n\nå‘½ååˆ†ç»„\nä½¿ç”¨ (?&lt;name&gt;...) å¯ä»¥ç»™åˆ†ç»„å‘½åï¼Œä½¿ä»£ç æ›´æ˜“è¯»ã€‚\n\n# æå–æ—¥æœŸç»„ä»¶\ndate_text &lt;- \"Meeting scheduled for 2024-03-15\"\n\npattern &lt;- \"(?&lt;year&gt;\\\\d{4})-(?&lt;month&gt;\\\\d{2})-(?&lt;day&gt;\\\\d{2})\"\nmatch &lt;- str_match(date_text, pattern)\nmatch\n\n                  year   month day \n[1,] \"2024-03-15\" \"2024\" \"03\"  \"15\"",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "æ­£åˆ™è¡¨è¾¾å¼"
    ]
  },
  {
    "objectID": "3008-regexp.html#å®æˆ˜æ¡ˆä¾‹",
    "href": "3008-regexp.html#å®æˆ˜æ¡ˆä¾‹",
    "title": "æ­£åˆ™è¡¨è¾¾å¼ R è¯­è¨€å®æˆ˜æŒ‡å—",
    "section": "å®æˆ˜æ¡ˆä¾‹",
    "text": "å®æˆ˜æ¡ˆä¾‹\n\næ¡ˆä¾‹ä¸€ï¼šåŒ»å­¦æ•°æ®æ¸…æ´—\næå– ICD-10 ç¼–ç å’Œè¯ç‰©å‰‚é‡ä¿¡æ¯ï¼š\n\n# æ¨¡æ‹Ÿç—…å†æ•°æ®\nrecords &lt;- tibble(\n  patient_id = 1:5,\n  diagnosis = c(\n    \"Primary: I10 (Hypertension), Secondary: E11.9\",\n    \"Diagnosis codes: J45.0, J44.1\",\n    \"ICD: K21.0 - GERD with esophagitis\",\n    \"Main dx: F32.1, comorbid: E78.0\",\n    \"Codes assigned: N18.3, I25.10\"\n  ),\n  medication = c(\n    \"Lisinopril 10mg daily\",\n    \"Salbutamol 100mcg PRN\",\n    \"Omeprazole 20mg BID\",\n    \"Sertraline 50mg QD\",\n    \"Atorvastatin 40mg HS\"\n  )\n)\n\n# æå–æ‰€æœ‰ ICD ç¼–ç \nrecords &lt;- records %&gt;%\n  mutate(\n    icd_codes = str_extract_all(diagnosis, \"[A-Z]\\\\d{2}\\\\.?\\\\d*\"),\n    primary_icd = sapply(icd_codes, `[`, 1)\n  )\n\n# æå–è¯ç‰©å‰‚é‡\nrecords &lt;- records %&gt;%\n  mutate(\n    drug_info = str_match(medication, \"(\\\\w+)\\\\s+(\\\\d+)(mg|mcg)\"),\n    drug_name = drug_info[, 2],\n    dose = as.numeric(drug_info[, 3]),\n    unit = drug_info[, 4]\n  )\n\nrecords %&gt;% select(patient_id, primary_icd, drug_name, dose, unit)\n\n# A tibble: 5 Ã— 5\n  patient_id primary_icd drug_name     dose unit \n       &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;        &lt;dbl&gt; &lt;chr&gt;\n1          1 I10         Lisinopril      10 mg   \n2          2 J45.0       Salbutamol     100 mcg  \n3          3 K21.0       Omeprazole      20 mg   \n4          4 F32.1       Sertraline      50 mg   \n5          5 N18.3       Atorvastatin    40 mg   \n\n\n\n\næ¡ˆä¾‹äºŒï¼šé—®å·æ•°æ®éªŒè¯\néªŒè¯é‚®ç®±ã€ç”µè¯å’Œèº«ä»½è¯æ ¼å¼ï¼š\n\n# æ¨¡æ‹Ÿé—®å·æ•°æ®\nsurvey &lt;- tibble(\n  id = 1:5,\n  email = c(\"alice@example.com\", \"bob@company\", \"carol@uni.edu.cn\", \"invalid\", \"eve@org.net\"),\n  phone = c(\"13812345678\", \"1381234567\", \"138-1234-5678\", \"12345678901\", \"13912345678\"),\n  id_card = c(\"110101199001011234\", \"11010119900101123X\", \"1101011990010112\", \"110101199013011234\", \"320102198512251234\")\n)\n\n# é‚®ç®±éªŒè¯\nemail_pattern &lt;- \"^[\\\\w.-]+@[\\\\w.-]+\\\\.[a-z]{2,}$\"\n\n# æ‰‹æœºå·éªŒè¯ï¼ˆä¸­å›½å¤§é™†ï¼‰\nphone_pattern &lt;- \"^1[3-9]\\\\d{9}$\"\n\n# èº«ä»½è¯éªŒè¯ï¼ˆç®€åŒ–ç‰ˆï¼Œ18ä½ï¼‰\nid_pattern &lt;- \"^\\\\d{6}(19|20)\\\\d{2}(0[1-9]|1[0-2])(0[1-9]|[12]\\\\d|3[01])\\\\d{3}[\\\\dX]$\"\n\nsurvey %&gt;%\n  mutate(\n    # å…ˆæ¸…ç†ç”µè¯å·ç ä¸­çš„ç ´æŠ˜å·\n    phone_clean = str_replace_all(phone, \"-\", \"\"),\n    # éªŒè¯å„å­—æ®µ\n    email_valid = str_detect(email, email_pattern),\n    phone_valid = str_detect(phone_clean, phone_pattern),\n    id_valid = str_detect(id_card, id_pattern)\n  ) %&gt;%\n  select(id, email_valid, phone_valid, id_valid)\n\n# A tibble: 5 Ã— 4\n     id email_valid phone_valid id_valid\n  &lt;int&gt; &lt;lgl&gt;       &lt;lgl&gt;       &lt;lgl&gt;   \n1     1 TRUE        TRUE        TRUE    \n2     2 FALSE       FALSE       TRUE    \n3     3 TRUE        TRUE        FALSE   \n4     4 FALSE       FALSE       FALSE   \n5     5 TRUE        TRUE        TRUE    \n\n\n\n\næ¡ˆä¾‹ä¸‰ï¼šæ‰¹é‡æ–‡ä»¶é‡å‘½å\nä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼é‡å‘½åæ–‡ä»¶ï¼š\n\n# æ¨¡æ‹Ÿæ–‡ä»¶ååˆ—è¡¨\nold_names &lt;- c(\n  \"data_2024_01_15.csv\",\n  \"data_2024_02_28.csv\",\n  \"report_2024_03_10.xlsx\",\n  \"analysis_2024_04_22.R\"\n)\n\n# å°†æ—¥æœŸæ ¼å¼ä» YYYY_MM_DD æ”¹ä¸º YYYYMMDD\nnew_names &lt;- str_replace(old_names, \"(\\\\d{4})_(\\\\d{2})_(\\\\d{2})\", \"\\\\1\\\\2\\\\3\")\nnew_names\n\n[1] \"data_20240115.csv\"    \"data_20240228.csv\"    \"report_20240310.xlsx\"\n[4] \"analysis_20240422.R\" \n\n# æå–æ–‡ä»¶æ‰©å±•å\nextensions &lt;- str_extract(old_names, \"\\\\.[^.]+$\")\nextensions\n\n[1] \".csv\"  \".csv\"  \".xlsx\" \".R\"   \n\n\n\n\næ¡ˆä¾‹å››ï¼šæ¸…æ´—ç§‘ç ”æ•°æ®\nä»æ‚ä¹±çš„æ ·æœ¬ç¼–å·ä¸­æå–æœ‰ç”¨ä¿¡æ¯ï¼š\n\nraw_samples &lt;- c(\n  \"Sample-12 (Control Group A)\",\n  \"Sample-45 (Treated Group B)\",\n  \"Exp_09_v2 - Final\",\n  \"CTRL-001-2024-Jan\",\n  \"TRT-005-2024-Feb\"\n)\n\n# åˆ›å»ºæ¸…æ´—åçš„æ•°æ®æ¡†\ncleaned &lt;- tibble(raw = raw_samples) %&gt;%\n  mutate(\n    # æå–æ ·æœ¬ç¼–å·ï¼ˆæ•°å­—éƒ¨åˆ†ï¼‰\n    sample_id = as.numeric(str_extract(raw, \"\\\\d+\")),\n    # åˆ¤æ–­åˆ†ç»„\n    group = case_when(\n      str_detect(raw, \"(?i)control|ctrl\") ~ \"Control\",\n      str_detect(raw, \"(?i)treat|trt\") ~ \"Treatment\",\n      TRUE ~ \"Unknown\"\n    ),\n    # æå–ç‰ˆæœ¬ä¿¡æ¯ï¼ˆå¦‚æœæœ‰ï¼‰\n    version = str_extract(raw, \"v\\\\d+\"),\n    # æå–æœˆä»½ï¼ˆå¦‚æœæœ‰ï¼‰\n    month = str_extract(raw, \"(?i)jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec\")\n  )\n\ncleaned\n\n# A tibble: 5 Ã— 5\n  raw                         sample_id group     version month\n  &lt;chr&gt;                           &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;\n1 Sample-12 (Control Group A)        12 Control   &lt;NA&gt;    &lt;NA&gt; \n2 Sample-45 (Treated Group B)        45 Treatment &lt;NA&gt;    &lt;NA&gt; \n3 Exp_09_v2 - Final                   9 Unknown   v2      &lt;NA&gt; \n4 CTRL-001-2024-Jan                   1 Control   &lt;NA&gt;    Jan  \n5 TRT-005-2024-Feb                    5 Treatment &lt;NA&gt;    Feb",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "æ­£åˆ™è¡¨è¾¾å¼"
    ]
  },
  {
    "objectID": "3008-regexp.html#è°ƒè¯•ä¸æµ‹è¯•æŠ€å·§",
    "href": "3008-regexp.html#è°ƒè¯•ä¸æµ‹è¯•æŠ€å·§",
    "title": "æ­£åˆ™è¡¨è¾¾å¼ R è¯­è¨€å®æˆ˜æŒ‡å—",
    "section": "è°ƒè¯•ä¸æµ‹è¯•æŠ€å·§",
    "text": "è°ƒè¯•ä¸æµ‹è¯•æŠ€å·§\n\nä½¿ç”¨åœ¨çº¿å·¥å…·\n\n[!TIP] æ¨èä½¿ç”¨ Regex101 è¿›è¡Œæ¨¡å¼æµ‹è¯•ã€‚é€‰æ‹© â€œPCRE2â€ é£æ ¼ï¼ˆä¸ R æœ€æ¥è¿‘ï¼‰ï¼Œå¯ä»¥å®æ—¶æŸ¥çœ‹åŒ¹é…ç»“æœå’Œå„åˆ†ç»„å†…å®¹ã€‚\n\n\n\né€æ­¥æ„å»ºå¤æ‚æ¨¡å¼\n\n# å¤æ‚æ¨¡å¼åˆ†æ­¥æ„å»º\n# ç›®æ ‡ï¼šåŒ¹é…ä¸­å›½æ‰‹æœºå·\n\n# æ­¥éª¤1ï¼šåŒ¹é…ç¬¬ä¸€ä½ï¼ˆ1ï¼‰\npattern_v1 &lt;- \"^1\"\n\n# æ­¥éª¤2ï¼šæ·»åŠ ç¬¬äºŒä½ï¼ˆ3-9ï¼‰\npattern_v2 &lt;- \"^1[3-9]\"\n\n# æ­¥éª¤3ï¼šæ·»åŠ å‰©ä½™9ä½æ•°å­—\npattern_v3 &lt;- \"^1[3-9]\\\\d{9}$\"\n\ntest_phones &lt;- c(\"13812345678\", \"12345678901\", \"138123456789\")\n\n# æµ‹è¯•æœ€ç»ˆæ¨¡å¼\nstr_detect(test_phones, pattern_v3)\n\n[1]  TRUE FALSE FALSE\n\n\n\n\nä½¿ç”¨ str_view å¯è§†åŒ–åŒ¹é…\n\n# str_view åœ¨æ§åˆ¶å°ä¸­é«˜äº®æ˜¾ç¤ºåŒ¹é…\ntext &lt;- \"The quick brown fox jumps over the lazy dog\"\n\n# æŸ¥çœ‹æ‰€æœ‰ 'o' çš„ä½ç½®\nstr_view(text, \"o\")\n\n[1] â”‚ The quick br&lt;o&gt;wn f&lt;o&gt;x jumps &lt;o&gt;ver the lazy d&lt;o&gt;g\n\n# æŸ¥çœ‹æ‰€æœ‰ä»¥ 'o' ç»“å°¾çš„å•è¯\nstr_view(text, \"\\\\w+o\\\\b\")",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "æ­£åˆ™è¡¨è¾¾å¼"
    ]
  },
  {
    "objectID": "3008-regexp.html#æ€§èƒ½ä¼˜åŒ–å»ºè®®",
    "href": "3008-regexp.html#æ€§èƒ½ä¼˜åŒ–å»ºè®®",
    "title": "æ­£åˆ™è¡¨è¾¾å¼ R è¯­è¨€å®æˆ˜æŒ‡å—",
    "section": "æ€§èƒ½ä¼˜åŒ–å»ºè®®",
    "text": "æ€§èƒ½ä¼˜åŒ–å»ºè®®\n\né¢„ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼\nå¯¹äºéœ€è¦é‡å¤ä½¿ç”¨çš„æ¨¡å¼ï¼Œå¯ä»¥è€ƒè™‘é¢„ç¼–è¯‘ï¼š\n\n# ä½¿ç”¨ stringr::regex() è®¾ç½®é€‰é¡¹\npattern &lt;- regex(\"sample\", ignore_case = TRUE)\n\ntexts &lt;- c(\"Sample A\", \"SAMPLE B\", \"sample c\", \"Other\")\nstr_detect(texts, pattern)\n\n[1]  TRUE  TRUE  TRUE FALSE\n\n\n\n\né¿å…è¿‡åº¦å¤æ‚çš„æ¨¡å¼\n\n# ä¸æ¨èï¼šè¿‡äºå¤æ‚çš„å•ä¸€æ¨¡å¼\n# complex_pattern &lt;- \"^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\\\"(?:[\\\\x01-\\\\x08\\\\x0b\\\\x0c\\\\x0e-\\\\x1f\\\\x21\\\\x23-\\\\x5b\\\\x5d-\\\\x7f]|\\\\\\\\[\\\\x01-\\\\x09\\\\x0b\\\\x0c\\\\x0e-\\\\x7f])*\\\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\\\x01-\\\\x08\\\\x0b\\\\x0c\\\\x0e-\\\\x1f\\\\x21-\\\\x5a\\\\x53-\\\\x7f]|\\\\\\\\[\\\\x01-\\\\x09\\\\x0b\\\\x0c\\\\x0e-\\\\x7f])+)\\\\])$\"\n\n# æ¨èï¼šç®€å•å®ç”¨çš„æ¨¡å¼\nsimple_email_pattern &lt;- \"^[\\\\w.-]+@[\\\\w.-]+\\\\.[a-z]{2,}$\"",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "æ­£åˆ™è¡¨è¾¾å¼"
    ]
  },
  {
    "objectID": "3008-regexp.html#å¸¸è§é”™è¯¯ä¸è§£å†³æ–¹æ¡ˆ",
    "href": "3008-regexp.html#å¸¸è§é”™è¯¯ä¸è§£å†³æ–¹æ¡ˆ",
    "title": "æ­£åˆ™è¡¨è¾¾å¼ R è¯­è¨€å®æˆ˜æŒ‡å—",
    "section": "å¸¸è§é”™è¯¯ä¸è§£å†³æ–¹æ¡ˆ",
    "text": "å¸¸è§é”™è¯¯ä¸è§£å†³æ–¹æ¡ˆ\n\n\n\né—®é¢˜\nåŸå› \nè§£å†³æ–¹æ¡ˆ\n\n\n\n\n\\d ä¸å·¥ä½œ\nR éœ€è¦åŒåæ–œæ \nä½¿ç”¨ \\\\d\n\n\nåŒ¹é…ç»“æœä¸ºç©º\næ¨¡å¼ä¸åŒ¹é…\nä½¿ç”¨åœ¨çº¿å·¥å…·è°ƒè¯•\n\n\nè´ªå©ªåŒ¹é…è¿‡å¤š\né»˜è®¤è´ªå©ª\nä½¿ç”¨ *? æˆ– +?\n\n\nä¸­æ–‡åŒ¹é…é—®é¢˜\nç¼–ç é—®é¢˜\nç¡®ä¿æ–‡ä»¶ä¸º UTF-8",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "æ­£åˆ™è¡¨è¾¾å¼"
    ]
  },
  {
    "objectID": "3008-regexp.html#æ€»ç»“",
    "href": "3008-regexp.html#æ€»ç»“",
    "title": "æ­£åˆ™è¡¨è¾¾å¼ R è¯­è¨€å®æˆ˜æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\næ­£åˆ™è¡¨è¾¾å¼æ˜¯ R è¯­è¨€ä¸­ä¸å¯æˆ–ç¼ºçš„åˆ©å™¨ã€‚æœ¬æ•™ç¨‹æ¶µç›–äº†ï¼š\n\n\n\nä¸»é¢˜\nå†…å®¹\n\n\n\n\nåŸºç¡€è¯­æ³•\nå…ƒå­—ç¬¦ã€é‡è¯ã€è½¬ä¹‰åºåˆ—\n\n\nBase R å‡½æ•°\ngrep, sub, gsub, regexpr\n\n\nstringr å‡½æ•°\nstr_detect, str_extract, str_match ç­‰\n\n\né«˜çº§æŠ€å·§\nåˆ†ç»„ã€ç¯è§†æ–­è¨€ã€éè´ªå©ªåŒ¹é…\n\n\nå®æˆ˜æ¡ˆä¾‹\nåŒ»å­¦æ•°æ®ã€é—®å·éªŒè¯ã€æ–‡ä»¶å¤„ç†\n\n\n\næŒæ¡æ­£åˆ™è¡¨è¾¾å¼åï¼Œä½ å°†èƒ½å¤Ÿé«˜æ•ˆå¤„ç†å„ç§æ–‡æœ¬æ¸…æ´—å’Œæ•°æ®æå–ä»»åŠ¡ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "æ­£åˆ™è¡¨è¾¾å¼"
    ]
  },
  {
    "objectID": "3008-regexp.html#å‚è€ƒèµ„æº",
    "href": "3008-regexp.html#å‚è€ƒèµ„æº",
    "title": "æ­£åˆ™è¡¨è¾¾å¼ R è¯­è¨€å®æˆ˜æŒ‡å—",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nstringr å®˜æ–¹æ–‡æ¡£\nR for Data Science - Strings Chapter\nRegex101 åœ¨çº¿æµ‹è¯•\næ­£åˆ™è¡¨è¾¾å¼é€ŸæŸ¥è¡¨",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "æ­£åˆ™è¡¨è¾¾å¼"
    ]
  },
  {
    "objectID": "3010-stringr.html",
    "href": "3010-stringr.html",
    "title": "stringr å­—ç¬¦ä¸²å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "åœ¨ R è¯­è¨€ä¸­å¤„ç†å­—ç¬¦ä¸²ï¼Œä¼ ç»Ÿæ–¹æ³•ä½¿ç”¨ Base R çš„ paste()ã€substr()ã€gsub() ç­‰å‡½æ•°ã€‚è¿™äº›å‡½æ•°åŠŸèƒ½å¼ºå¤§ï¼Œä½†å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š\n\nå‚æ•°é¡ºåºä¸ä¸€è‡´ï¼šæœ‰æ—¶å­—ç¬¦ä¸²åœ¨å‰ï¼Œæœ‰æ—¶æ¨¡å¼åœ¨å‰\nå‘½åä¸ç»Ÿä¸€ï¼šå‡½æ•°åç§°éš¾ä»¥è®°å¿†\nç¼ºå°‘å‘é‡åŒ–æ”¯æŒï¼šéƒ¨åˆ†æ“ä½œéœ€è¦æ‰‹åŠ¨å¾ªç¯\n\nstringr åŒ…å®Œç¾è§£å†³äº†è¿™äº›é—®é¢˜ï¼š\n\n\n\nç‰¹æ€§\nè¯´æ˜\n\n\n\n\nç»Ÿä¸€å‰ç¼€\næ‰€æœ‰å‡½æ•°ä»¥ str_ å¼€å¤´ï¼Œä¾¿äºè‡ªåŠ¨è¡¥å…¨\n\n\nå‚æ•°ä¸€è‡´\nå­—ç¬¦ä¸²æ°¸è¿œæ˜¯ç¬¬ä¸€ä¸ªå‚æ•°\n\n\nå‘é‡åŒ–\nå¤©ç„¶æ”¯æŒå‘é‡æ“ä½œ\n\n\nç®¡é“å‹å¥½\nä¸ %&gt;% å’Œ |&gt; å®Œç¾é…åˆ\n\n\n\n\n# å®‰è£…å¹¶åŠ è½½å¿…è¦çš„åŒ…\nif (!require(\"stringr\")) install.packages(\"stringr\")\nif (!require(\"dplyr\")) install.packages(\"dplyr\")\nif (!require(\"tibble\")) install.packages(\"tibble\")\n\nlibrary(stringr)\nlibrary(dplyr)\nlibrary(tibble)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "stringr - å­—ç¬¦ä¸²å¤„ç†"
    ]
  },
  {
    "objectID": "3010-stringr.html#ä¸ºä»€ä¹ˆé€‰æ‹©-stringr",
    "href": "3010-stringr.html#ä¸ºä»€ä¹ˆé€‰æ‹©-stringr",
    "title": "stringr å­—ç¬¦ä¸²å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "åœ¨ R è¯­è¨€ä¸­å¤„ç†å­—ç¬¦ä¸²ï¼Œä¼ ç»Ÿæ–¹æ³•ä½¿ç”¨ Base R çš„ paste()ã€substr()ã€gsub() ç­‰å‡½æ•°ã€‚è¿™äº›å‡½æ•°åŠŸèƒ½å¼ºå¤§ï¼Œä½†å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š\n\nå‚æ•°é¡ºåºä¸ä¸€è‡´ï¼šæœ‰æ—¶å­—ç¬¦ä¸²åœ¨å‰ï¼Œæœ‰æ—¶æ¨¡å¼åœ¨å‰\nå‘½åä¸ç»Ÿä¸€ï¼šå‡½æ•°åç§°éš¾ä»¥è®°å¿†\nç¼ºå°‘å‘é‡åŒ–æ”¯æŒï¼šéƒ¨åˆ†æ“ä½œéœ€è¦æ‰‹åŠ¨å¾ªç¯\n\nstringr åŒ…å®Œç¾è§£å†³äº†è¿™äº›é—®é¢˜ï¼š\n\n\n\nç‰¹æ€§\nè¯´æ˜\n\n\n\n\nç»Ÿä¸€å‰ç¼€\næ‰€æœ‰å‡½æ•°ä»¥ str_ å¼€å¤´ï¼Œä¾¿äºè‡ªåŠ¨è¡¥å…¨\n\n\nå‚æ•°ä¸€è‡´\nå­—ç¬¦ä¸²æ°¸è¿œæ˜¯ç¬¬ä¸€ä¸ªå‚æ•°\n\n\nå‘é‡åŒ–\nå¤©ç„¶æ”¯æŒå‘é‡æ“ä½œ\n\n\nç®¡é“å‹å¥½\nä¸ %&gt;% å’Œ |&gt; å®Œç¾é…åˆ\n\n\n\n\n# å®‰è£…å¹¶åŠ è½½å¿…è¦çš„åŒ…\nif (!require(\"stringr\")) install.packages(\"stringr\")\nif (!require(\"dplyr\")) install.packages(\"dplyr\")\nif (!require(\"tibble\")) install.packages(\"tibble\")\n\nlibrary(stringr)\nlibrary(dplyr)\nlibrary(tibble)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "stringr - å­—ç¬¦ä¸²å¤„ç†"
    ]
  },
  {
    "objectID": "3010-stringr.html#åŸºç¡€å­—ç¬¦ä¸²æ“ä½œ",
    "href": "3010-stringr.html#åŸºç¡€å­—ç¬¦ä¸²æ“ä½œ",
    "title": "stringr å­—ç¬¦ä¸²å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "åŸºç¡€å­—ç¬¦ä¸²æ“ä½œ",
    "text": "åŸºç¡€å­—ç¬¦ä¸²æ“ä½œ\n\nè·å–å­—ç¬¦ä¸²é•¿åº¦ï¼šstr_length\nstr_length() è¿”å›å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦æ•°é‡ï¼Œæ­£ç¡®å¤„ç† UTF-8 ç¼–ç çš„ä¸­æ–‡å­—ç¬¦ã€‚\n\n# åŸºæœ¬ç”¨æ³•\nstr_length(\"Hello World\")\n\n[1] 11\n\n# ä¸­æ–‡å­—ç¬¦\nstr_length(\"ä½ å¥½ä¸–ç•Œ\")\n\n[1] 4\n\n# å‘é‡æ“ä½œ\nfruits &lt;- c(\"apple\", \"banana\", \"cherry\")\nstr_length(fruits)\n\n[1] 5 6 6\n\n# ä¸ nchar() å¯¹æ¯”\nnchar(\"ä½ å¥½\") # Base R\n\n[1] 2\n\nstr_length(\"ä½ å¥½\") # stringr - ç»“æœç›¸åŒï¼Œä½†å¤„ç† NA æ›´ä¼˜é›…\n\n[1] 2\n\n# NA å¤„ç†\nstr_length(c(\"hello\", NA, \"world\"))\n\n[1]  5 NA  5\n\n\n\n\næå–å­å­—ç¬¦ä¸²ï¼šstr_sub\nstr_sub() ç”¨äºæå–æˆ–æ›¿æ¢å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ï¼Œæ”¯æŒè´Ÿæ•°ç´¢å¼•ï¼ˆä»æœ«å°¾è®¡æ•°ï¼‰ã€‚\n\ntext &lt;- \"Hello World\"\n\n# æå–å‰5ä¸ªå­—ç¬¦\nstr_sub(text, 1, 5)\n\n[1] \"Hello\"\n\n# æå–å5ä¸ªå­—ç¬¦ï¼ˆè´Ÿæ•°ç´¢å¼•ï¼‰\nstr_sub(text, -5, -1)\n\n[1] \"World\"\n\n# ä»ç¬¬7ä¸ªå­—ç¬¦åˆ°æœ«å°¾\nstr_sub(text, 7)\n\n[1] \"World\"\n\n# å‘é‡æ“ä½œ\nwords &lt;- c(\"apple\", \"banana\", \"cherry\")\nstr_sub(words, 1, 3)\n\n[1] \"app\" \"ban\" \"che\"\n\n# æ›¿æ¢å­å­—ç¬¦ä¸²\ntext2 &lt;- \"Hello World\"\nstr_sub(text2, 1, 5) &lt;- \"Hi\"\ntext2\n\n[1] \"Hi World\"\n\n\n\n\nå­—ç¬¦ä¸²æ‹¼æ¥ï¼šstr_c\nstr_c() ç”¨äºæ‹¼æ¥å­—ç¬¦ä¸²ï¼ŒåŠŸèƒ½ç±»ä¼¼ paste0()ï¼Œä½†æ›´çµæ´»ã€‚\n\n# åŸºæœ¬æ‹¼æ¥\nstr_c(\"Hello\", \"World\")\n\n[1] \"HelloWorld\"\n\n# ä½¿ç”¨åˆ†éš”ç¬¦\nstr_c(\"Hello\", \"World\", sep = \" \")\n\n[1] \"Hello World\"\n\n# å‘é‡æ‹¼æ¥\nfirst_names &lt;- c(\"å¼ \", \"æ\", \"ç‹\")\nlast_names &lt;- c(\"ä¸‰\", \"å››\", \"äº”\")\nstr_c(first_names, last_names)\n\n[1] \"å¼ ä¸‰\" \"æå››\" \"ç‹äº”\"\n\n# æŠ˜å ä¸ºå•ä¸ªå­—ç¬¦ä¸²\nstr_c(c(\"a\", \"b\", \"c\"), collapse = \"-\")\n\n[1] \"a-b-c\"\n\n# å¤„ç† NAï¼ˆé»˜è®¤ä¼ æ’­ NAï¼‰\nstr_c(\"Hello\", NA, \"World\")\n\n[1] NA\n\n# ç»„åˆä½¿ç”¨ sep å’Œ collapse\nstr_c(c(\"A\", \"B\"), c(\"1\", \"2\"), sep = \"-\", collapse = \"; \")\n\n[1] \"A-1; B-2\"\n\n\n\n\nå»é™¤ç©ºç™½ï¼šstr_trim å’Œ str_squish\n\n# å¸¦ç©ºç™½çš„å­—ç¬¦ä¸²\nmessy &lt;- \"   Hello   World   \"\n\n# str_trimï¼šå»é™¤ä¸¤ç«¯ç©ºç™½\nstr_trim(messy)\n\n[1] \"Hello   World\"\n\n# åªå»é™¤å·¦ä¾§æˆ–å³ä¾§\nstr_trim(messy, side = \"left\")\n\n[1] \"Hello   World   \"\n\nstr_trim(messy, side = \"right\")\n\n[1] \"   Hello   World\"\n\n# str_squishï¼šå»é™¤ä¸¤ç«¯ç©ºç™½ + å‹ç¼©å†…éƒ¨ç©ºç™½\nstr_squish(messy)\n\n[1] \"Hello World\"\n\n# å®é™…åº”ç”¨ï¼šæ¸…ç†é—®å·æ•°æ®\nresponses &lt;- c(\"  Yes \", \" No\", \"  Maybe  \", \"Yes  \")\nstr_trim(responses)\n\n[1] \"Yes\"   \"No\"    \"Maybe\" \"Yes\"  \n\n\n\n\nå¡«å……ä¸æˆªæ–­ï¼šstr_pad å’Œ str_trunc\n\n# str_padï¼šå¡«å……å­—ç¬¦ä¸²åˆ°æŒ‡å®šé•¿åº¦\nstr_pad(\"42\", width = 5, side = \"left\", pad = \"0\")\n\n[1] \"00042\"\n\n# ä¸åŒå¡«å……æ–¹å‘\nstr_pad(\"hi\", 5, \"left\")\n\n[1] \"   hi\"\n\nstr_pad(\"hi\", 5, \"right\")\n\n[1] \"hi   \"\n\nstr_pad(\"hi\", 5, \"both\")\n\n[1] \" hi  \"\n\n# æ‰¹é‡å¤„ç†ç¼–å·\nids &lt;- c(\"1\", \"12\", \"123\")\nstr_pad(ids, width = 4, pad = \"0\")\n\n[1] \"0001\" \"0012\" \"0123\"\n\n# str_truncï¼šæˆªæ–­è¿‡é•¿å­—ç¬¦ä¸²\nlong_text &lt;- \"è¿™æ˜¯ä¸€æ®µéå¸¸é•¿çš„æ–‡æœ¬ï¼Œéœ€è¦è¢«æˆªæ–­æ˜¾ç¤º\"\nstr_trunc(long_text, 10)\n\n[1] \"è¿™æ˜¯ä¸€æ®µéå¸¸é•¿...\"\n\n# æŒ‡å®šçœç•¥å·ä½ç½®\nstr_trunc(long_text, 15, side = \"left\")\n\n[1] \"...é•¿çš„æ–‡æœ¬ï¼Œéœ€è¦è¢«æˆªæ–­æ˜¾ç¤º\"\n\nstr_trunc(long_text, 15, side = \"center\")\n\n[1] \"è¿™æ˜¯ä¸€æ®µéå¸¸...è¦è¢«æˆªæ–­æ˜¾ç¤º\"",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "stringr - å­—ç¬¦ä¸²å¤„ç†"
    ]
  },
  {
    "objectID": "3010-stringr.html#å¤§å°å†™è½¬æ¢",
    "href": "3010-stringr.html#å¤§å°å†™è½¬æ¢",
    "title": "stringr å­—ç¬¦ä¸²å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å¤§å°å†™è½¬æ¢",
    "text": "å¤§å°å†™è½¬æ¢\n\ntext &lt;- \"Hello World\"\n\n# è½¬æ¢ä¸ºå¤§å†™\nstr_to_upper(text)\n\n[1] \"HELLO WORLD\"\n\n# è½¬æ¢ä¸ºå°å†™\nstr_to_lower(text)\n\n[1] \"hello world\"\n\n# è½¬æ¢ä¸ºæ ‡é¢˜æ ¼å¼ï¼ˆæ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ï¼‰\nstr_to_title(\"hello world from r\")\n\n[1] \"Hello World From R\"\n\n# è½¬æ¢ä¸ºå¥å­æ ¼å¼ï¼ˆåªæœ‰ç¬¬ä¸€ä¸ªå­—æ¯å¤§å†™ï¼‰\nstr_to_sentence(\"hello world from r\")\n\n[1] \"Hello world from r\"\n\n# å®é™…åº”ç”¨ï¼šæ ‡å‡†åŒ–å§“å\nnames &lt;- c(\"john DOE\", \"JANE smith\", \"bob JONES\")\nstr_to_title(names)\n\n[1] \"John Doe\"   \"Jane Smith\" \"Bob Jones\"",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "stringr - å­—ç¬¦ä¸²å¤„ç†"
    ]
  },
  {
    "objectID": "3010-stringr.html#æ¨¡å¼æ£€æµ‹ä¸è®¡æ•°",
    "href": "3010-stringr.html#æ¨¡å¼æ£€æµ‹ä¸è®¡æ•°",
    "title": "stringr å­—ç¬¦ä¸²å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "æ¨¡å¼æ£€æµ‹ä¸è®¡æ•°",
    "text": "æ¨¡å¼æ£€æµ‹ä¸è®¡æ•°\n\næ£€æµ‹æ¨¡å¼ï¼šstr_detect\nstr_detect() æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«ç‰¹å®šæ¨¡å¼ï¼Œè¿”å›é€»è¾‘å€¼ã€‚\n\nfruits &lt;- c(\"apple\", \"banana\", \"apricot\", \"cherry\", \"avocado\")\n\n# æ£€æµ‹æ˜¯å¦åŒ…å« \"a\"\nstr_detect(fruits, \"a\")\n\n[1]  TRUE  TRUE  TRUE FALSE  TRUE\n\n# æ£€æµ‹æ˜¯å¦ä»¥ \"a\" å¼€å¤´\nstr_detect(fruits, \"^a\")\n\n[1]  TRUE FALSE  TRUE FALSE  TRUE\n\n# æ£€æµ‹æ˜¯å¦ä»¥ \"o\" ç»“å°¾\nstr_detect(fruits, \"o$\")\n\n[1] FALSE FALSE FALSE FALSE  TRUE\n\n# åœ¨ dplyr ä¸­ç­›é€‰æ•°æ®\ntibble(fruit = fruits) %&gt;%\n    filter(str_detect(fruit, \"^a\"))\n\n# A tibble: 3 Ã— 1\n  fruit  \n  &lt;chr&gt;  \n1 apple  \n2 apricot\n3 avocado\n\n# å¦å®šæ£€æµ‹\nstr_detect(fruits, \"a\", negate = TRUE)\n\n[1] FALSE FALSE FALSE  TRUE FALSE\n\n\n\n\nè®¡æ•°åŒ¹é…ï¼šstr_count\n\n# ç»Ÿè®¡å­—æ¯å‡ºç°æ¬¡æ•°\nstr_count(\"banana\", \"a\")\n\n[1] 3\n\n# å‘é‡æ“ä½œ\nstr_count(c(\"apple\", \"banana\", \"cherry\"), \"a\")\n\n[1] 1 3 0\n\n# ç»Ÿè®¡å•è¯æ•°é‡ï¼ˆç©ºæ ¼åˆ†éš”ï¼‰\ntext &lt;- \"The quick brown fox jumps over the lazy dog\"\nstr_count(text, \"\\\\w+\")\n\n[1] 9\n\n# ç»Ÿè®¡æ•°å­—å‡ºç°æ¬¡æ•°\nstr_count(\"ID123-456-789\", \"\\\\d\")\n\n[1] 9\n\n\n\n\nå®šä½åŒ¹é…ï¼šstr_locate\n\ntext &lt;- \"The cat sat on the mat\"\n\n# æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…çš„ä½ç½®\nstr_locate(text, \"at\")\n\n     start end\n[1,]     6   7\n\n# æ‰¾åˆ°æ‰€æœ‰åŒ¹é…çš„ä½ç½®\nstr_locate_all(text, \"at\")\n\n[[1]]\n     start end\n[1,]     6   7\n[2,]    10  11\n[3,]    21  22\n\n# å®é™…åº”ç”¨ï¼šæ‰¾åˆ°ç‰¹å®šæ¨¡å¼çš„ä½ç½®\nemail &lt;- \"contact@example.com\"\nstr_locate(email, \"@\")\n\n     start end\n[1,]     8   8",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "stringr - å­—ç¬¦ä¸²å¤„ç†"
    ]
  },
  {
    "objectID": "3010-stringr.html#æå–ä¸æ›¿æ¢",
    "href": "3010-stringr.html#æå–ä¸æ›¿æ¢",
    "title": "stringr å­—ç¬¦ä¸²å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "æå–ä¸æ›¿æ¢",
    "text": "æå–ä¸æ›¿æ¢\n\næå–åŒ¹é…å†…å®¹ï¼šstr_extract\n\n# æå–ç¬¬ä¸€ä¸ªåŒ¹é…\ntexts &lt;- c(\"ID: 12345\", \"Code: ABC123\", \"Ref: XYZ789\")\n\n# æå–æ•°å­—\nstr_extract(texts, \"\\\\d+\")\n\n[1] \"12345\" \"123\"   \"789\"  \n\n# æå–æ‰€æœ‰åŒ¹é…\nstr_extract_all(texts, \"\\\\d+\")\n\n[[1]]\n[1] \"12345\"\n\n[[2]]\n[1] \"123\"\n\n[[3]]\n[1] \"789\"\n\n# æå–å­—æ¯\nstr_extract(texts, \"[A-Z]+\")\n\n[1] \"ID\" \"C\"  \"R\" \n\n# åŒ»å­¦æ•°æ®ç¤ºä¾‹ï¼šæå–å‰‚é‡\nprescriptions &lt;- c(\n    \"Aspirin 100mg daily\",\n    \"Metformin 500mg twice\",\n    \"Vitamin D 1000IU\"\n)\nstr_extract(prescriptions, \"\\\\d+\")\n\n[1] \"100\"  \"500\"  \"1000\"\n\n\n\n\næ›¿æ¢å†…å®¹ï¼šstr_replace\n\n# æ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…\ntext &lt;- \"The cat and the cat\"\nstr_replace(text, \"cat\", \"dog\")\n\n[1] \"The dog and the cat\"\n\n# æ›¿æ¢æ‰€æœ‰åŒ¹é…\nstr_replace_all(text, \"cat\", \"dog\")\n\n[1] \"The dog and the dog\"\n\n# ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢\ndates &lt;- c(\"2024/01/15\", \"2024/02/20\", \"2024/03/25\")\nstr_replace_all(dates, \"/\", \"-\")\n\n[1] \"2024-01-15\" \"2024-02-20\" \"2024-03-25\"\n\n# ä½¿ç”¨åˆ†ç»„è¿›è¡Œå¤æ‚æ›¿æ¢\nstr_replace(dates, \"(\\\\d{4})/(\\\\d{2})/(\\\\d{2})\", \"\\\\3-\\\\2-\\\\1\")\n\n[1] \"15-01-2024\" \"20-02-2024\" \"25-03-2024\"\n\n# æ‰¹é‡æ›¿æ¢å¤šä¸ªæ¨¡å¼\nmessy_text &lt;- \"Hello!!! How are you???\"\nmessy_text %&gt;%\n    str_replace_all(\"!\", \".\") %&gt;%\n    str_replace_all(\"\\\\?\", \".\")\n\n[1] \"Hello... How are you...\"\n\n\n\n\nåˆ é™¤åŒ¹é…å†…å®¹ï¼šstr_remove\n\n# åˆ é™¤ç¬¬ä¸€ä¸ªåŒ¹é…\nstr_remove(\"Hello World World\", \"World\")\n\n[1] \"Hello  World\"\n\n# åˆ é™¤æ‰€æœ‰åŒ¹é…\nstr_remove_all(\"Hello World World\", \"World\")\n\n[1] \"Hello  \"\n\n# åˆ é™¤ç©ºæ ¼\nstr_remove_all(\"H e l l o\", \" \")\n\n[1] \"Hello\"\n\n# åˆ é™¤ç‰¹æ®Šå­—ç¬¦\nstr_remove_all(\"Price: $100.00\", \"[^\\\\d.]\")\n\n[1] \"100.00\"",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "stringr - å­—ç¬¦ä¸²å¤„ç†"
    ]
  },
  {
    "objectID": "3010-stringr.html#åˆ†å‰²ä¸åˆå¹¶",
    "href": "3010-stringr.html#åˆ†å‰²ä¸åˆå¹¶",
    "title": "stringr å­—ç¬¦ä¸²å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "åˆ†å‰²ä¸åˆå¹¶",
    "text": "åˆ†å‰²ä¸åˆå¹¶\n\nåˆ†å‰²å­—ç¬¦ä¸²ï¼šstr_split\n\n# åŸºæœ¬åˆ†å‰²\nstr_split(\"a-b-c\", \"-\")\n\n[[1]]\n[1] \"a\" \"b\" \"c\"\n\n# è¿”å›çŸ©é˜µæ ¼å¼ï¼ˆæŒ‡å®šåˆ—æ•°ï¼‰\nstr_split_fixed(\"a-b-c-d\", \"-\", n = 3)\n\n     [,1] [,2] [,3] \n[1,] \"a\"  \"b\"  \"c-d\"\n\n# åˆ†å‰²å¤šä¸ªå­—ç¬¦ä¸²\naddresses &lt;- c(\"åŒ—äº¬å¸‚|æµ·æ·€åŒº|ä¸­å…³æ‘\", \"ä¸Šæµ·å¸‚|æµ¦ä¸œåŒº|é™†å®¶å˜´\")\nstr_split(addresses, \"\\\\|\")\n\n[[1]]\n[1] \"åŒ—äº¬å¸‚\" \"æµ·æ·€åŒº\" \"ä¸­å…³æ‘\"\n\n[[2]]\n[1] \"ä¸Šæµ·å¸‚\" \"æµ¦ä¸œåŒº\" \"é™†å®¶å˜´\"\n\n# é™åˆ¶åˆ†å‰²æ¬¡æ•°\nstr_split(\"a-b-c-d\", \"-\", n = 2)\n\n[[1]]\n[1] \"a\"     \"b-c-d\"\n\n# è½¬ä¸ºæ•°æ®æ¡†ï¼ˆé…åˆ tidyrï¼‰\ntibble(address = addresses) %&gt;%\n    tidyr::separate(address, into = c(\"çœå¸‚\", \"åŒºå¿\", \"è¡—é“\"), sep = \"\\\\|\")\n\n# A tibble: 2 Ã— 3\n  çœå¸‚   åŒºå¿   è¡—é“  \n  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; \n1 åŒ—äº¬å¸‚ æµ·æ·€åŒº ä¸­å…³æ‘\n2 ä¸Šæµ·å¸‚ æµ¦ä¸œåŒº é™†å®¶å˜´\n\n\n\n\nåˆå¹¶å­—ç¬¦ä¸²ï¼šstr_flatten\n\n# å°†å‘é‡åˆå¹¶ä¸ºå•ä¸ªå­—ç¬¦ä¸²\nwords &lt;- c(\"apple\", \"banana\", \"cherry\")\nstr_flatten(words, collapse = \", \")\n\n[1] \"apple, banana, cherry\"\n\n# æ·»åŠ æœ€åä¸€ä¸ªåˆ†éš”ç¬¦\nstr_flatten(words, collapse = \", \", last = \" and \")\n\n[1] \"apple, banana and cherry\"\n\n# ä¸ str_c(collapse=) çš„åŒºåˆ«\n# str_flatten ä¸“é—¨ç”¨äºæŠ˜å ï¼Œæ›´åŠ è¯­ä¹‰åŒ–",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "stringr - å­—ç¬¦ä¸²å¤„ç†"
    ]
  },
  {
    "objectID": "3010-stringr.html#å­—ç¬¦ä¸²æ’åºä¸å»é‡",
    "href": "3010-stringr.html#å­—ç¬¦ä¸²æ’åºä¸å»é‡",
    "title": "stringr å­—ç¬¦ä¸²å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å­—ç¬¦ä¸²æ’åºä¸å»é‡",
    "text": "å­—ç¬¦ä¸²æ’åºä¸å»é‡\n\n# æ’åº\nfruits &lt;- c(\"cherry\", \"apple\", \"banana\")\nstr_sort(fruits)\n\n[1] \"apple\"  \"banana\" \"cherry\"\n\n# é™åºæ’åº\nstr_sort(fruits, decreasing = TRUE)\n\n[1] \"cherry\" \"banana\" \"apple\" \n\n# æŒ‰æ•°å­—æ’åº\nfiles &lt;- c(\"file2.txt\", \"file10.txt\", \"file1.txt\")\nstr_sort(files) # å­—æ¯é¡ºåº\n\n[1] \"file1.txt\"  \"file10.txt\" \"file2.txt\" \n\nstr_sort(files, numeric = TRUE) # æ•°å­—é¡ºåº\n\n[1] \"file1.txt\"  \"file2.txt\"  \"file10.txt\"\n\n# è·å–æ’åºåçš„ç´¢å¼•\nstr_order(fruits)\n\n[1] 2 3 1\n\n# å»é‡\nstr_unique(c(\"a\", \"b\", \"a\", \"c\", \"b\"))\n\n[1] \"a\" \"b\" \"c\"",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "stringr - å­—ç¬¦ä¸²å¤„ç†"
    ]
  },
  {
    "objectID": "3010-stringr.html#å®æˆ˜æ¡ˆä¾‹",
    "href": "3010-stringr.html#å®æˆ˜æ¡ˆä¾‹",
    "title": "stringr å­—ç¬¦ä¸²å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å®æˆ˜æ¡ˆä¾‹",
    "text": "å®æˆ˜æ¡ˆä¾‹\n\næ¡ˆä¾‹ä¸€ï¼šæ¸…ç†å§“åæ•°æ®\n\n# æ¨¡æ‹Ÿæ‚ä¹±çš„å§“åæ•°æ®\nraw_names &lt;- tibble(\n    id = 1:6,\n    name = c(\n        \"  å¼  ä¸‰  \",\n        \"æå››\",\n        \"WANG WU\",\n        \"èµµå…­  \",\n        \"  é’±ä¸ƒ\",\n        \"sun ba\"\n    )\n)\n\n# æ¸…ç†å§“å\nclean_names &lt;- raw_names %&gt;%\n    mutate(\n        name_clean = name %&gt;%\n            str_squish() %&gt;% # å»é™¤å¤šä½™ç©ºç™½\n            str_to_title() %&gt;% # æ ‡å‡†åŒ–å¤§å°å†™\n            str_replace_all(\" \", \"\") # å»é™¤ä¸­é—´ç©ºæ ¼ï¼ˆä¸­æ–‡å§“åï¼‰\n    )\n\nclean_names\n\n# A tibble: 6 Ã— 3\n     id name        name_clean\n  &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;     \n1     1 \"  å¼  ä¸‰  \" å¼ ä¸‰      \n2     2 \"æå››\"      æå››      \n3     3 \"WANG WU\"   WangWu    \n4     4 \"èµµå…­  \"    èµµå…­      \n5     5 \"  é’±ä¸ƒ\"    é’±ä¸ƒ      \n6     6 \"sun ba\"    SunBa     \n\n\n\n\næ¡ˆä¾‹äºŒï¼šæå–åŒ»å­¦æ•°æ®\n\n# æ¨¡æ‹ŸåŒ»å­¦è®°å½•\nmedical_records &lt;- tibble(\n    patient_id = 1:5,\n    record = c(\n        \"BP: 120/80 mmHg, HR: 72 bpm\",\n        \"Blood Pressure 130/85, Heart Rate 80\",\n        \"æ”¶ç¼©å‹: 125, èˆ’å¼ å‹: 82, å¿ƒç‡: 68\",\n        \"SBP=140, DBP=90, Pulse: 88\",\n        \"Blood pressure reading: 115/75 mmHg\"\n    )\n)\n\n# æå–è¡€å‹å’Œå¿ƒç‡æ•°æ®\nextracted &lt;- medical_records %&gt;%\n    mutate(\n        # æå–æ”¶ç¼©å‹ï¼ˆç¬¬ä¸€ä¸ªæ•°å­—ï¼‰\n        sbp = str_extract(record, \"\\\\d{2,3}(?=/)\") %&gt;% as.numeric(),\n        # æå–èˆ’å¼ å‹ï¼ˆæ–œæ åçš„æ•°å­—ï¼‰\n        dbp = str_extract(record, \"(?&lt;=/)\\\\d{2,3}\") %&gt;% as.numeric(),\n        # æå–å¿ƒç‡ï¼ˆå„ç§æ ¼å¼ï¼‰\n        hr = str_extract(record, \"(?i)(?&lt;=HR:|heart rate |å¿ƒç‡:|Pulse:| )\\\\d{2,3}\") %&gt;%\n            as.numeric()\n    )\n\nextracted %&gt;% select(patient_id, sbp, dbp, hr)\n\n# A tibble: 5 Ã— 4\n  patient_id   sbp   dbp    hr\n       &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1          1   120    80   120\n2          2   130    85   130\n3          3    NA    NA   125\n4          4    NA    NA    88\n5          5   115    75   115\n\n\n\n\næ¡ˆä¾‹ä¸‰ï¼šæ ‡å‡†åŒ–åœ°å€\n\n# æ‚ä¹±åœ°å€æ•°æ®\naddresses &lt;- tibble(\n    id = 1:4,\n    address = c(\n        \"åŒ—äº¬å¸‚ æµ·æ·€åŒº ä¸­å…³æ‘å¤§è¡—1å·\",\n        \"ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºé™†å®¶å˜´ç¯è·¯100å·\",\n        \"å¹¿å·å¸‚  å¤©æ²³åŒº  ä½“è‚²è¥¿è·¯  200å·\",\n        \"æ·±åœ³å¸‚å—å±±åŒºç§‘æŠ€å›­è·¯50å·\"\n    )\n)\n\n# æ ‡å‡†åŒ–åœ°å€\nstandardized &lt;- addresses %&gt;%\n    mutate(\n        address_clean = address %&gt;%\n            str_squish() %&gt;% # å‹ç¼©ç©ºç™½\n            str_replace_all(\"\\\\s+\", \"\"), # å»é™¤æ‰€æœ‰ç©ºæ ¼\n\n        # æå–å„çº§è¡Œæ”¿åŒº\n        province = str_extract(address_clean, \"^.+?(?=å¸‚)\"),\n        city = str_extract(address_clean, \"(?&lt;=çœ|^).+?(?=å¸‚)\"),\n        district = str_extract(address_clean, \"(?&lt;=å¸‚).+?(?=åŒº)\"),\n        street = str_extract(address_clean, \"(?&lt;=åŒº).+\")\n    )\n\nstandardized %&gt;% select(id, province, district, street)\n\n# A tibble: 4 Ã— 4\n     id province district street         \n  &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;          \n1     1 åŒ—äº¬     æµ·æ·€     ä¸­å…³æ‘å¤§è¡—1å·  \n2     2 ä¸Šæµ·     æµ¦ä¸œæ–°   é™†å®¶å˜´ç¯è·¯100å·\n3     3 å¹¿å·     å¤©æ²³     ä½“è‚²è¥¿è·¯200å·  \n4     4 æ·±åœ³     å—å±±     ç§‘æŠ€å›­è·¯50å·   \n\n\n\n\næ¡ˆä¾‹å››ï¼šå¤„ç†é—®å·å¼€æ”¾é¢˜\n\n# æ¨¡æ‹Ÿé—®å·å¼€æ”¾é¢˜å›ç­”\nsurvey_responses &lt;- tibble(\n    respondent = 1:5,\n    feedback = c(\n        \"æœåŠ¡å¾ˆå¥½ï¼ï¼ï¼éå¸¸æ»¡æ„~~~\",\n        \"è¿˜å¯ä»¥å§ï¼Œæ²¡ä»€ä¹ˆç‰¹åˆ«çš„\",\n        \"å¤ªå·®äº†ã€‚ã€‚ã€‚ä¸ä¼šå†æ¥\",\n        \"VERY GOOD, will come again!\",\n        \"ä»·æ ¼ä¾¿å®œï¼Œè´¨é‡ä¹Ÿä¸é”™\"\n    )\n)\n\n# æ¸…ç†å’Œåˆ†æåé¦ˆ\nanalyzed &lt;- survey_responses %&gt;%\n    mutate(\n        # æ¸…ç†ç‰¹æ®Šç¬¦å·\n        feedback_clean = feedback %&gt;%\n            str_replace_all(\"[!ï¼~ã€‚.]+\", \"\") %&gt;%\n            str_replace_all(\"[,ï¼Œ]+\", \"ï¼Œ\"),\n\n        # æƒ…æ„Ÿè¯æ£€æµ‹\n        positive = str_detect(feedback, \"(?i)å¥½|æ»¡æ„|ä¸é”™|good|great\"),\n        negative = str_detect(feedback, \"(?i)å·®|ä¸æ»¡|terrible|bad\"),\n\n        # å­—æ•°ç»Ÿè®¡\n        word_count = str_length(feedback_clean)\n    )\n\nanalyzed\n\n# A tibble: 5 Ã— 6\n  respondent feedback                feedback_clean positive negative word_count\n       &lt;int&gt; &lt;chr&gt;                   &lt;chr&gt;          &lt;lgl&gt;    &lt;lgl&gt;         &lt;int&gt;\n1          1 æœåŠ¡å¾ˆå¥½ï¼ï¼ï¼éå¸¸æ»¡æ„~~~â€¦â€¦ æœåŠ¡å¾ˆå¥½éå¸¸æ»¡æ„â€¦â€¦ TRUE     FALSE             8\n2          2 è¿˜å¯ä»¥å§ï¼Œæ²¡ä»€ä¹ˆç‰¹åˆ«çš„  è¿˜å¯ä»¥å§ï¼Œæ²¡ä»€ä¹ˆç‰¹åˆ«çš„â€¦â€¦ FALSE    FALSE            11\n3          3 å¤ªå·®äº†ã€‚ã€‚ã€‚ä¸ä¼šå†æ¥    å¤ªå·®äº†ä¸ä¼šå†æ¥ FALSE    TRUE              7\n4          4 VERY GOOD, will come aâ€¦ VERY GOODï¼Œ wiâ€¦ TRUE     FALSE            26\n5          5 ä»·æ ¼ä¾¿å®œï¼Œè´¨é‡ä¹Ÿä¸é”™    ä»·æ ¼ä¾¿å®œï¼Œè´¨é‡ä¹Ÿä¸é”™â€¦â€¦ TRUE     FALSE            10",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "stringr - å­—ç¬¦ä¸²å¤„ç†"
    ]
  },
  {
    "objectID": "3010-stringr.html#ä¸æ­£åˆ™è¡¨è¾¾å¼é…åˆ",
    "href": "3010-stringr.html#ä¸æ­£åˆ™è¡¨è¾¾å¼é…åˆ",
    "title": "stringr å­—ç¬¦ä¸²å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ä¸æ­£åˆ™è¡¨è¾¾å¼é…åˆ",
    "text": "ä¸æ­£åˆ™è¡¨è¾¾å¼é…åˆ\nstringr çš„æ‰€æœ‰æ¨¡å¼åŒ¹é…å‡½æ•°éƒ½æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼Œè¯¦ç»†è¯­æ³•è¯·å‚è€ƒ æ­£åˆ™è¡¨è¾¾å¼æ•™ç¨‹ã€‚\n\n# ä½¿ç”¨ regex() æ·»åŠ é€‰é¡¹\ntext &lt;- \"Hello WORLD\"\n\n# å¿½ç•¥å¤§å°å†™\nstr_detect(text, regex(\"world\", ignore_case = TRUE))\n\n[1] TRUE\n\n# å¤šè¡Œæ¨¡å¼\nmultiline &lt;- \"Line 1\\nLine 2\\nLine 3\"\nstr_extract_all(multiline, regex(\"^Line\", multiline = TRUE))\n\n[[1]]\n[1] \"Line\" \"Line\" \"Line\"\n\n# fixed() ç”¨äºç²¾ç¡®åŒ¹é…ï¼ˆä¸ä½¿ç”¨æ­£åˆ™ï¼‰\nstr_detect(\"a.b.c\", fixed(\".\")) # åŒ¹é…å­—é¢ç‚¹å·\n\n[1] TRUE\n\nstr_detect(\"a.b.c\", \".\") # åŒ¹é…ä»»æ„å­—ç¬¦\n\n[1] TRUE",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "stringr - å­—ç¬¦ä¸²å¤„ç†"
    ]
  },
  {
    "objectID": "3010-stringr.html#stringr-ä¸-base-r-å¯¹ç…§è¡¨",
    "href": "3010-stringr.html#stringr-ä¸-base-r-å¯¹ç…§è¡¨",
    "title": "stringr å­—ç¬¦ä¸²å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "stringr ä¸ Base R å¯¹ç…§è¡¨",
    "text": "stringr ä¸ Base R å¯¹ç…§è¡¨\n\n\n\nåŠŸèƒ½\nstringr\nBase R\n\n\n\n\né•¿åº¦\nstr_length()\nnchar()\n\n\nå­ä¸²\nstr_sub()\nsubstr()\n\n\næ‹¼æ¥\nstr_c()\npaste0()\n\n\næ£€æµ‹\nstr_detect()\ngrepl()\n\n\næå–\nstr_extract()\nregmatches()\n\n\næ›¿æ¢\nstr_replace()\nsub()\n\n\nå…¨éƒ¨æ›¿æ¢\nstr_replace_all()\ngsub()\n\n\nåˆ†å‰²\nstr_split()\nstrsplit()\n\n\nå¤§å†™\nstr_to_upper()\ntoupper()\n\n\nå°å†™\nstr_to_lower()\ntolower()",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "stringr - å­—ç¬¦ä¸²å¤„ç†"
    ]
  },
  {
    "objectID": "3010-stringr.html#æ€»ç»“",
    "href": "3010-stringr.html#æ€»ç»“",
    "title": "stringr å­—ç¬¦ä¸²å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nstringr åŒ…æ˜¯ R è¯­è¨€ä¸­å¤„ç†å­—ç¬¦ä¸²çš„é¦–é€‰å·¥å…·ï¼š\n\n\n\nä¼˜åŠ¿\nè¯´æ˜\n\n\n\n\nä¸€è‡´æ€§\næ‰€æœ‰å‡½æ•° str_ å¼€å¤´ï¼Œå­—ç¬¦ä¸²æ€»æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°\n\n\nå‘é‡åŒ–\nå¤©ç„¶æ”¯æŒå‘é‡æ“ä½œï¼Œæ— éœ€å¾ªç¯\n\n\nç®¡é“å‹å¥½\nä¸ tidyverse ç”Ÿæ€å®Œç¾é›†æˆ\n\n\næ­£åˆ™æ”¯æŒ\nå†…ç½®å¼ºå¤§çš„æ­£åˆ™è¡¨è¾¾å¼æ”¯æŒ\n\n\n\næŒæ¡ stringr åï¼Œä½ å°†èƒ½å¤Ÿé«˜æ•ˆå¤„ç†å„ç§å­—ç¬¦ä¸²æ“ä½œä»»åŠ¡ï¼",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "stringr - å­—ç¬¦ä¸²å¤„ç†"
    ]
  },
  {
    "objectID": "3010-stringr.html#å‚è€ƒèµ„æº",
    "href": "3010-stringr.html#å‚è€ƒèµ„æº",
    "title": "stringr å­—ç¬¦ä¸²å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nstringr å®˜æ–¹æ–‡æ¡£\nR for Data Science - Strings\nstringr cheatsheet\næ­£åˆ™è¡¨è¾¾å¼æ•™ç¨‹",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ”„ æ•°æ®è½¬æ¢",
      "stringr - å­—ç¬¦ä¸²å¤„ç†"
    ]
  },
  {
    "objectID": "3012-readr-readxl.html",
    "href": "3012-readr-readxl.html",
    "title": "readr/readxl é«˜æ•ˆæ•°æ®è¯»å–æŒ‡å—",
    "section": "",
    "text": "R è¯­è¨€å†…ç½®çš„ read.csv() ç­‰å‡½æ•°è™½ç„¶å¯ç”¨ï¼Œä½†å­˜åœ¨ä¸€äº›é—®é¢˜ï¼š\n\n\n\né—®é¢˜\nè¯´æ˜\n\n\n\n\né€Ÿåº¦æ…¢\nå¤§æ–‡ä»¶è¯»å–æ•ˆç‡ä½\n\n\nç±»å‹çŒœæµ‹å·®\nå¸¸å°†å­—ç¬¦ä¸²é”™è¯¯è½¬ä¸ºå› å­\n\n\nç¼–ç é—®é¢˜\nä¸­æ–‡ä¹±ç å¸¸è§\n\n\nè¡Œä¸ºä¸ä¸€è‡´\nä¸åŒå‡½æ•°å‚æ•°å·®å¼‚å¤§\n\n\n\nreadr å’Œ readxl å®Œç¾è§£å†³äº†è¿™äº›é—®é¢˜ï¼š\n\n\n\nç‰¹æ€§\nreadr/readxl\nBase R\n\n\n\n\né€Ÿåº¦\nâš¡ å¿« 10 å€ä»¥ä¸Š\næ…¢\n\n\nç±»å‹æ¨æ–­\næ™ºèƒ½å‡†ç¡®\nå¸¸å‡ºé”™\n\n\nç¼–ç \né»˜è®¤ UTF-8\nä¾èµ–ç³»ç»Ÿ\n\n\nè¾“å‡ºæ ¼å¼\ntibble\ndata.frame\n\n\nè¿›åº¦æ¡\næœ‰\næ— \n\n\n\n\n# å®‰è£…å¹¶åŠ è½½å¿…è¦çš„åŒ…\nif (!require(\"readr\")) install.packages(\"readr\")\nif (!require(\"readxl\")) install.packages(\"readxl\")\nif (!require(\"writexl\")) install.packages(\"writexl\")\nif (!require(\"dplyr\")) install.packages(\"dplyr\")\nif (!require(\"purrr\")) install.packages(\"purrr\")\n\nlibrary(readr)\nlibrary(readxl)\nlibrary(writexl)\nlibrary(dplyr)\nlibrary(purrr)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "readr/readxl - é«˜æ•ˆè¯»å–"
    ]
  },
  {
    "objectID": "3012-readr-readxl.html#ä¸ºä»€ä¹ˆé€‰æ‹©-readr-å’Œ-readxl",
    "href": "3012-readr-readxl.html#ä¸ºä»€ä¹ˆé€‰æ‹©-readr-å’Œ-readxl",
    "title": "readr/readxl é«˜æ•ˆæ•°æ®è¯»å–æŒ‡å—",
    "section": "",
    "text": "R è¯­è¨€å†…ç½®çš„ read.csv() ç­‰å‡½æ•°è™½ç„¶å¯ç”¨ï¼Œä½†å­˜åœ¨ä¸€äº›é—®é¢˜ï¼š\n\n\n\né—®é¢˜\nè¯´æ˜\n\n\n\n\né€Ÿåº¦æ…¢\nå¤§æ–‡ä»¶è¯»å–æ•ˆç‡ä½\n\n\nç±»å‹çŒœæµ‹å·®\nå¸¸å°†å­—ç¬¦ä¸²é”™è¯¯è½¬ä¸ºå› å­\n\n\nç¼–ç é—®é¢˜\nä¸­æ–‡ä¹±ç å¸¸è§\n\n\nè¡Œä¸ºä¸ä¸€è‡´\nä¸åŒå‡½æ•°å‚æ•°å·®å¼‚å¤§\n\n\n\nreadr å’Œ readxl å®Œç¾è§£å†³äº†è¿™äº›é—®é¢˜ï¼š\n\n\n\nç‰¹æ€§\nreadr/readxl\nBase R\n\n\n\n\né€Ÿåº¦\nâš¡ å¿« 10 å€ä»¥ä¸Š\næ…¢\n\n\nç±»å‹æ¨æ–­\næ™ºèƒ½å‡†ç¡®\nå¸¸å‡ºé”™\n\n\nç¼–ç \né»˜è®¤ UTF-8\nä¾èµ–ç³»ç»Ÿ\n\n\nè¾“å‡ºæ ¼å¼\ntibble\ndata.frame\n\n\nè¿›åº¦æ¡\næœ‰\næ— \n\n\n\n\n# å®‰è£…å¹¶åŠ è½½å¿…è¦çš„åŒ…\nif (!require(\"readr\")) install.packages(\"readr\")\nif (!require(\"readxl\")) install.packages(\"readxl\")\nif (!require(\"writexl\")) install.packages(\"writexl\")\nif (!require(\"dplyr\")) install.packages(\"dplyr\")\nif (!require(\"purrr\")) install.packages(\"purrr\")\n\nlibrary(readr)\nlibrary(readxl)\nlibrary(writexl)\nlibrary(dplyr)\nlibrary(purrr)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "readr/readxl - é«˜æ•ˆè¯»å–"
    ]
  },
  {
    "objectID": "3012-readr-readxl.html#readr-åŸºç¡€è¯»å–æ–‡æœ¬æ–‡ä»¶",
    "href": "3012-readr-readxl.html#readr-åŸºç¡€è¯»å–æ–‡æœ¬æ–‡ä»¶",
    "title": "readr/readxl é«˜æ•ˆæ•°æ®è¯»å–æŒ‡å—",
    "section": "readr åŸºç¡€ï¼šè¯»å–æ–‡æœ¬æ–‡ä»¶",
    "text": "readr åŸºç¡€ï¼šè¯»å–æ–‡æœ¬æ–‡ä»¶\n\nread_csvï¼šè¯»å– CSV æ–‡ä»¶\nread_csv() æ˜¯æœ€å¸¸ç”¨çš„å‡½æ•°ï¼Œç”¨äºè¯»å–é€—å·åˆ†éš”çš„æ–‡ä»¶ã€‚\n\n# åˆ›å»ºç¤ºä¾‹æ•°æ®ç”¨äºæ¼”ç¤º\ndemo_data &lt;- tibble(\n    id = 1:5,\n    name = c(\"å¼ ä¸‰\", \"æå››\", \"ç‹äº”\", \"èµµå…­\", \"é’±ä¸ƒ\"),\n    age = c(25, 30, 28, 35, 42),\n    score = c(85.5, 92.3, 78.9, 88.1, 95.0),\n    date = as.Date(c(\"2024-01-15\", \"2024-02-20\", \"2024-03-10\", \"2024-04-05\", \"2024-05-18\"))\n)\n\n# å†™å…¥ä¸´æ—¶æ–‡ä»¶\ntemp_csv &lt;- tempfile(fileext = \".csv\")\nwrite_csv(demo_data, temp_csv)\n\n# è¯»å– CSV æ–‡ä»¶\ndf &lt;- read_csv(temp_csv)\ndf\n\n# A tibble: 5 Ã— 5\n     id name    age score date      \n  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;date&gt;    \n1     1 å¼ ä¸‰     25  85.5 2024-01-15\n2     2 æå››     30  92.3 2024-02-20\n3     3 ç‹äº”     28  78.9 2024-03-10\n4     4 èµµå…­     35  88.1 2024-04-05\n5     5 é’±ä¸ƒ     42  95   2024-05-18\n\n# æŸ¥çœ‹åˆ—ç±»å‹æ¨æ–­ç»“æœ\nspec(df)\n\ncols(\n  id = col_double(),\n  name = col_character(),\n  age = col_double(),\n  score = col_double(),\n  date = col_date(format = \"\")\n)\n\n\n\n\nread_tsvï¼šè¯»å–åˆ¶è¡¨ç¬¦åˆ†éš”æ–‡ä»¶\n\n# åˆ›å»º TSV æ–‡ä»¶\ntemp_tsv &lt;- tempfile(fileext = \".tsv\")\nwrite_tsv(demo_data, temp_tsv)\n\n# è¯»å– TSV\ndf_tsv &lt;- read_tsv(temp_tsv)\ndf_tsv\n\n# A tibble: 5 Ã— 5\n     id name    age score date      \n  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;date&gt;    \n1     1 å¼ ä¸‰     25  85.5 2024-01-15\n2     2 æå››     30  92.3 2024-02-20\n3     3 ç‹äº”     28  78.9 2024-03-10\n4     4 èµµå…­     35  88.1 2024-04-05\n5     5 é’±ä¸ƒ     42  95   2024-05-18\n\n\n\n\nread_delimï¼šè¯»å–ä»»æ„åˆ†éš”ç¬¦æ–‡ä»¶\n\n# ä½¿ç”¨åˆ†å·åˆ†éš”ï¼ˆæ¬§æ´²å¸¸ç”¨æ ¼å¼ï¼‰\ntemp_delim &lt;- tempfile(fileext = \".txt\")\nwrite_delim(demo_data, temp_delim, delim = \";\")\n\n# è¯»å–è‡ªå®šä¹‰åˆ†éš”ç¬¦æ–‡ä»¶\ndf_delim &lt;- read_delim(temp_delim, delim = \";\")\ndf_delim\n\n# A tibble: 5 Ã— 5\n     id name    age score date      \n  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;date&gt;    \n1     1 å¼ ä¸‰     25  85.5 2024-01-15\n2     2 æå››     30  92.3 2024-02-20\n3     3 ç‹äº”     28  78.9 2024-03-10\n4     4 èµµå…­     35  88.1 2024-04-05\n5     5 é’±ä¸ƒ     42  95   2024-05-18\n\n\n\n\nread_fwfï¼šè¯»å–å›ºå®šå®½åº¦æ–‡ä»¶\n\n# å›ºå®šå®½åº¦æ ¼å¼ç¤ºä¾‹\nfwf_content &lt;- \"å¼ ä¸‰  25  85.5\næå››  30  92.3\nç‹äº”  28  78.9\"\n\n# å†™å…¥ä¸´æ—¶æ–‡ä»¶\ntemp_fwf &lt;- tempfile(fileext = \".txt\")\nwriteLines(fwf_content, temp_fwf)\n\n# è¯»å–å›ºå®šå®½åº¦æ–‡ä»¶\ndf_fwf &lt;- read_fwf(\n    temp_fwf,\n    col_positions = fwf_widths(\n        widths = c(4, 4, 4),\n        col_names = c(\"name\", \"age\", \"score\")\n    )\n)\ndf_fwf\n\n# A tibble: 3 Ã— 3\n  name               age        score\n  &lt;chr&gt;              &lt;chr&gt;      &lt;dbl&gt;\n1 \"\\xe5\\xbc\\xa0\\xe4\" \"\\xb8\\x89\"    25\n2 \"\\xe6\\x9d\\x8e\\xe5\" \"\\x9b\\x9b\"    30\n3 \"\\xe7\\x8e\\x8b\\xe4\" \"\\xba\\x94\"    28",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "readr/readxl - é«˜æ•ˆè¯»å–"
    ]
  },
  {
    "objectID": "3012-readr-readxl.html#åˆ—ç±»å‹è§„èŒƒ",
    "href": "3012-readr-readxl.html#åˆ—ç±»å‹è§„èŒƒ",
    "title": "readr/readxl é«˜æ•ˆæ•°æ®è¯»å–æŒ‡å—",
    "section": "åˆ—ç±»å‹è§„èŒƒ",
    "text": "åˆ—ç±»å‹è§„èŒƒ\n\nè‡ªåŠ¨ç±»å‹æ¨æ–­\nreadr ä¼šè‡ªåŠ¨æ¨æ–­åˆ—ç±»å‹ï¼Œä½¿ç”¨å‰ 1000 è¡Œæ•°æ®è¿›è¡ŒçŒœæµ‹ï¼š\n\n# æŸ¥çœ‹é»˜è®¤æ¨æ–­\ndf &lt;- read_csv(temp_csv)\nspec(df)\n\ncols(\n  id = col_double(),\n  name = col_character(),\n  age = col_double(),\n  score = col_double(),\n  date = col_date(format = \"\")\n)\n\n\n\n\næ‰‹åŠ¨æŒ‡å®šåˆ—ç±»å‹\nä½¿ç”¨ col_types å‚æ•°ç²¾ç¡®æ§åˆ¶åˆ—ç±»å‹ï¼š\n\n# æ–¹æ³•1ï¼šä½¿ç”¨ç®€å†™å­—ç¬¦ä¸²\ndf &lt;- read_csv(temp_csv, col_types = \"icdnD\")\n# i=integer, c=character, d=double, n=number, D=date\ndf\n\n# A tibble: 5 Ã— 5\n     id name    age score date      \n  &lt;int&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;date&gt;    \n1     1 å¼ ä¸‰     25  85.5 2024-01-15\n2     2 æå››     30  92.3 2024-02-20\n3     3 ç‹äº”     28  78.9 2024-03-10\n4     4 èµµå…­     35  88.1 2024-04-05\n5     5 é’±ä¸ƒ     42  95   2024-05-18\n\n# æ–¹æ³•2ï¼šä½¿ç”¨ cols() å‡½æ•°ï¼ˆæ¨èï¼Œæ›´æ¸…æ™°ï¼‰\ndf &lt;- read_csv(temp_csv, col_types = cols(\n    id = col_integer(),\n    name = col_character(),\n    age = col_integer(),\n    score = col_double(),\n    date = col_date()\n))\ndf\n\n# A tibble: 5 Ã— 5\n     id name    age score date      \n  &lt;int&gt; &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;date&gt;    \n1     1 å¼ ä¸‰     25  85.5 2024-01-15\n2     2 æå››     30  92.3 2024-02-20\n3     3 ç‹äº”     28  78.9 2024-03-10\n4     4 èµµå…­     35  88.1 2024-04-05\n5     5 é’±ä¸ƒ     42  95   2024-05-18\n\n\n\n\nå¸¸ç”¨åˆ—ç±»å‹å‡½æ•°\n\n\n\nå‡½æ•°\nç®€å†™\nè¯´æ˜\n\n\n\n\ncol_logical()\nl\né€»è¾‘å€¼ TRUE/FALSE\n\n\ncol_integer()\ni\næ•´æ•°\n\n\ncol_double()\nd\nåŒç²¾åº¦æµ®ç‚¹æ•°\n\n\ncol_character()\nc\nå­—ç¬¦ä¸²\n\n\ncol_factor()\nf\nå› å­\n\n\ncol_date()\nD\næ—¥æœŸ\n\n\ncol_datetime()\nT\næ—¥æœŸæ—¶é—´\n\n\ncol_time()\nt\næ—¶é—´\n\n\ncol_number()\nn\nçµæ´»æ•°å­—ï¼ˆå¤„ç†åƒåˆ†ä½ã€è´§å¸ç¬¦å·ï¼‰\n\n\ncol_skip()\n_ æˆ– -\nè·³è¿‡è¯¥åˆ—\n\n\ncol_guess()\n?\nè‡ªåŠ¨çŒœæµ‹\n\n\n\n\n# è·³è¿‡ä¸éœ€è¦çš„åˆ—\ndf &lt;- read_csv(temp_csv, col_types = cols(\n    id = col_skip(),\n    name = col_character(),\n    age = col_integer(),\n    score = col_skip(),\n    date = col_date()\n))\ndf\n\n# A tibble: 5 Ã— 3\n  name    age date      \n  &lt;chr&gt; &lt;int&gt; &lt;date&gt;    \n1 å¼ ä¸‰     25 2024-01-15\n2 æå››     30 2024-02-20\n3 ç‹äº”     28 2024-03-10\n4 èµµå…­     35 2024-04-05\n5 é’±ä¸ƒ     42 2024-05-18\n\n\n\n\nå¤„ç†ç‰¹æ®Šæ ¼å¼\n\n# åˆ›å»ºåŒ…å«ç‰¹æ®Šæ ¼å¼çš„æ•°æ®\nspecial_data &lt;- \"ä»·æ ¼,ç™¾åˆ†æ¯”,æ—¥æœŸ\n$1,234.56,45.6%,2024/01/15\n$2,345.67,78.9%,2024/02/20\n$3,456.78,12.3%,2024/03/25\"\n\ntemp_special &lt;- tempfile(fileext = \".csv\")\nwriteLines(special_data, temp_special)\n\n# col_number() å¯ä»¥å¤„ç†è´§å¸ç¬¦å·å’Œåƒåˆ†ä½\ndf_special &lt;- read_csv(temp_special, col_types = cols(\n    ä»·æ ¼ = col_number(),\n    ç™¾åˆ†æ¯” = col_number(),\n    æ—¥æœŸ = col_date(format = \"%Y/%m/%d\")\n))\ndf_special\n\n# A tibble: 3 Ã— 3\n   ä»·æ ¼ ç™¾åˆ†æ¯” æ—¥æœŸ  \n  &lt;dbl&gt;  &lt;dbl&gt; &lt;date&gt;\n1     1   235. NA    \n2     2   346. NA    \n3     3   457. NA",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "readr/readxl - é«˜æ•ˆè¯»å–"
    ]
  },
  {
    "objectID": "3012-readr-readxl.html#è¯»å–é€‰é¡¹",
    "href": "3012-readr-readxl.html#è¯»å–é€‰é¡¹",
    "title": "readr/readxl é«˜æ•ˆæ•°æ®è¯»å–æŒ‡å—",
    "section": "è¯»å–é€‰é¡¹",
    "text": "è¯»å–é€‰é¡¹\n\nè·³è¿‡è¡Œå’Œé™åˆ¶è¡Œæ•°\n\n# è·³è¿‡å‰ n è¡Œï¼ˆå¸¸ç”¨äºè·³è¿‡æ³¨é‡Šæˆ–æ ‡é¢˜ï¼‰\ndf &lt;- read_csv(temp_csv, skip = 1) # è·³è¿‡ç¬¬ä¸€è¡Œ\nhead(df, 3)\n\n# A tibble: 3 Ã— 5\n    `1` å¼ ä¸‰   `25` `85.5` `2024-01-15`\n  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;date&gt;      \n1     2 æå››     30   92.3 2024-02-20  \n2     3 ç‹äº”     28   78.9 2024-03-10  \n3     4 èµµå…­     35   88.1 2024-04-05  \n\n# åªè¯»å–å‰ n è¡Œï¼ˆé¢„è§ˆå¤§æ–‡ä»¶ï¼‰\ndf &lt;- read_csv(temp_csv, n_max = 3)\ndf\n\n# A tibble: 3 Ã— 5\n     id name    age score date      \n  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;date&gt;    \n1     1 å¼ ä¸‰     25  85.5 2024-01-15\n2     2 æå››     30  92.3 2024-02-20\n3     3 ç‹äº”     28  78.9 2024-03-10\n\n\n\n\nå¤„ç†åˆ—å\n\n# åˆ›å»ºæ— è¡¨å¤´æ•°æ®\nno_header &lt;- \"å¼ ä¸‰,25,85.5\næå››,30,92.3\"\ntemp_no_header &lt;- tempfile(fileext = \".csv\")\nwriteLines(no_header, temp_no_header)\n\n# æŒ‡å®šæ— è¡¨å¤´\ndf &lt;- read_csv(temp_no_header, col_names = FALSE)\ndf\n\n# A tibble: 2 Ã— 3\n  X1       X2    X3\n  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 å¼ ä¸‰     25  85.5\n2 æå››     30  92.3\n\n# è‡ªå®šä¹‰åˆ—å\ndf &lt;- read_csv(temp_no_header, col_names = c(\"å§“å\", \"å¹´é¾„\", \"åˆ†æ•°\"))\ndf\n\n# A tibble: 2 Ã— 3\n  å§“å   å¹´é¾„  åˆ†æ•°\n  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 å¼ ä¸‰     25  85.5\n2 æå››     30  92.3\n\n\n\n\nå¤„ç†ç¼ºå¤±å€¼\n\n# åˆ›å»ºåŒ…å«ç¼ºå¤±å€¼çš„æ•°æ®\nmissing_data &lt;- \"id,name,score\n1,å¼ ä¸‰,85\n2,æå››,NA\n3,ç‹äº”,\n4,èµµå…­,N/A\n5,é’±ä¸ƒ,missing\"\n\ntemp_missing &lt;- tempfile(fileext = \".csv\")\nwriteLines(missing_data, temp_missing)\n\n# æŒ‡å®šç¼ºå¤±å€¼æ ‡è®°\ndf &lt;- read_csv(temp_missing, na = c(\"\", \"NA\", \"N/A\", \"missing\"))\ndf\n\n# A tibble: 5 Ã— 3\n     id name  score\n  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;\n1     1 å¼ ä¸‰     85\n2     2 æå››     NA\n3     3 ç‹äº”     NA\n4     4 èµµå…­     NA\n5     5 é’±ä¸ƒ     NA\n\n\n\n\nç¼–ç è®¾ç½®\n\n# æŒ‡å®šæ–‡ä»¶ç¼–ç ï¼ˆä¸­æ–‡æ–‡ä»¶å¸¸ç”¨ï¼‰\n# df &lt;- read_csv(\"data.csv\", locale = locale(encoding = \"GBK\"))\n\n# é»˜è®¤ä½¿ç”¨ UTF-8\n# df &lt;- read_csv(\"data.csv\", locale = locale(encoding = \"UTF-8\"))\n\n# æŸ¥çœ‹å½“å‰ locale è®¾ç½®\ndefault_locale()\n\n&lt;locale&gt;\nNumbers:  123,456.78\nFormats:  %AD / %AT\nTimezone: UTC\nEncoding: UTF-8\n&lt;date_names&gt;\nDays:   Sunday (Sun), Monday (Mon), Tuesday (Tue), Wednesday (Wed), Thursday\n        (Thu), Friday (Fri), Saturday (Sat)\nMonths: January (Jan), February (Feb), March (Mar), April (Apr), May (May),\n        June (Jun), July (Jul), August (Aug), September (Sep), October\n        (Oct), November (Nov), December (Dec)\nAM/PM:  AM/PM",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "readr/readxl - é«˜æ•ˆè¯»å–"
    ]
  },
  {
    "objectID": "3012-readr-readxl.html#readxlè¯»å–-excel-æ–‡ä»¶",
    "href": "3012-readr-readxl.html#readxlè¯»å–-excel-æ–‡ä»¶",
    "title": "readr/readxl é«˜æ•ˆæ•°æ®è¯»å–æŒ‡å—",
    "section": "readxlï¼šè¯»å– Excel æ–‡ä»¶",
    "text": "readxlï¼šè¯»å– Excel æ–‡ä»¶\n\nread_excelï¼šé€šç”¨è¯»å–å‡½æ•°\n\n# åˆ›å»ºç¤ºä¾‹ Excel æ–‡ä»¶\ndemo_excel &lt;- tibble(\n    äº§å“ = c(\"è‹¹æœ\", \"é¦™è•‰\", \"æ©™å­\", \"è‘¡è„\"),\n    æ•°é‡ = c(100, 150, 80, 200),\n    å•ä»· = c(5.5, 3.2, 4.8, 8.0),\n    æ€»ä»· = c(550, 480, 384, 1600)\n)\n\ntemp_xlsx &lt;- tempfile(fileext = \".xlsx\")\nwrite_xlsx(demo_excel, temp_xlsx)\n\n# è¯»å– Excel æ–‡ä»¶\ndf_excel &lt;- read_excel(temp_xlsx)\ndf_excel\n\n# A tibble: 4 Ã— 4\n  äº§å“   æ•°é‡  å•ä»·  æ€»ä»·\n  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 è‹¹æœ    100   5.5   550\n2 é¦™è•‰    150   3.2   480\n3 æ©™å­     80   4.8   384\n4 è‘¡è„    200   8    1600\n\n\n\n\nè¯»å–ç‰¹å®šå·¥ä½œè¡¨\n\n# æŸ¥çœ‹å·¥ä½œè¡¨åç§°\nexcel_sheets(temp_xlsx)\n\n[1] \"Sheet1\"\n\n# æŒ‰åç§°è¯»å–\ndf &lt;- read_excel(temp_xlsx, sheet = \"Sheet1\")\n\n# æŒ‰ç´¢å¼•è¯»å–ï¼ˆä»1å¼€å§‹ï¼‰\ndf &lt;- read_excel(temp_xlsx, sheet = 1)\ndf\n\n# A tibble: 4 Ã— 4\n  äº§å“   æ•°é‡  å•ä»·  æ€»ä»·\n  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 è‹¹æœ    100   5.5   550\n2 é¦™è•‰    150   3.2   480\n3 æ©™å­     80   4.8   384\n4 è‘¡è„    200   8    1600\n\n\n\n\nè¯»å–ç‰¹å®šåŒºåŸŸ\n\n# è¯»å–ç‰¹å®šå•å…ƒæ ¼åŒºåŸŸ\ndf &lt;- read_excel(temp_xlsx, range = \"A1:C3\")\ndf\n\n# A tibble: 2 Ã— 3\n  äº§å“   æ•°é‡  å•ä»·\n  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 è‹¹æœ    100   5.5\n2 é¦™è•‰    150   3.2\n\n# è¯»å–ç‰¹å®šè¡Œåˆ—èŒƒå›´\ndf &lt;- read_excel(temp_xlsx, range = cell_cols(\"A:B\")) # åªè¯»å– Aã€B åˆ—\ndf\n\n# A tibble: 4 Ã— 2\n  äº§å“   æ•°é‡\n  &lt;chr&gt; &lt;dbl&gt;\n1 è‹¹æœ    100\n2 é¦™è•‰    150\n3 æ©™å­     80\n4 è‘¡è„    200\n\n\n\n\næŒ‡å®šåˆ—ç±»å‹\n\n# æ‰‹åŠ¨æŒ‡å®šåˆ—ç±»å‹\ndf &lt;- read_excel(temp_xlsx, col_types = c(\"text\", \"numeric\", \"numeric\", \"numeric\"))\ndf\n\n# A tibble: 4 Ã— 4\n  äº§å“   æ•°é‡  å•ä»·  æ€»ä»·\n  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 è‹¹æœ    100   5.5   550\n2 é¦™è•‰    150   3.2   480\n3 æ©™å­     80   4.8   384\n4 è‘¡è„    200   8    1600\n\n# è·³è¿‡æŸäº›åˆ—\ndf &lt;- read_excel(temp_xlsx, col_types = c(\"text\", \"skip\", \"numeric\", \"numeric\"))\ndf\n\n# A tibble: 4 Ã— 3\n  äº§å“   å•ä»·  æ€»ä»·\n  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 è‹¹æœ    5.5   550\n2 é¦™è•‰    3.2   480\n3 æ©™å­    4.8   384\n4 è‘¡è„    8    1600\n\n\n\n\nå¤„ç†æ—¥æœŸ\nExcel ä¸­çš„æ—¥æœŸå­˜å‚¨ä¸ºæ•°å­—ï¼Œreadxl ä¼šè‡ªåŠ¨è½¬æ¢ï¼š\n\n# åˆ›å»ºåŒ…å«æ—¥æœŸçš„æ•°æ®\ndate_data &lt;- tibble(\n    äº‹ä»¶ = c(\"ä¼šè®®\", \"åŸ¹è®­\", \"è€ƒè¯•\"),\n    æ—¥æœŸ = as.Date(c(\"2024-01-15\", \"2024-02-20\", \"2024-03-10\"))\n)\n\ntemp_date_xlsx &lt;- tempfile(fileext = \".xlsx\")\nwrite_xlsx(date_data, temp_date_xlsx)\n\n# è¯»å–ä¼šè‡ªåŠ¨è¯†åˆ«æ—¥æœŸ\ndf &lt;- read_excel(temp_date_xlsx)\ndf\n\n# A tibble: 3 Ã— 2\n  äº‹ä»¶  æ—¥æœŸ               \n  &lt;chr&gt; &lt;dttm&gt;             \n1 ä¼šè®®  2024-01-15 00:00:00\n2 åŸ¹è®­  2024-02-20 00:00:00\n3 è€ƒè¯•  2024-03-10 00:00:00\n\nclass(df$æ—¥æœŸ)\n\n[1] \"POSIXct\" \"POSIXt\"",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "readr/readxl - é«˜æ•ˆè¯»å–"
    ]
  },
  {
    "objectID": "3012-readr-readxl.html#å†™å‡ºæ•°æ®",
    "href": "3012-readr-readxl.html#å†™å‡ºæ•°æ®",
    "title": "readr/readxl é«˜æ•ˆæ•°æ®è¯»å–æŒ‡å—",
    "section": "å†™å‡ºæ•°æ®",
    "text": "å†™å‡ºæ•°æ®\n\nwrite_csvï¼šå†™å‡º CSV\n\n# åŸºæœ¬å†™å‡º\noutput_csv &lt;- tempfile(fileext = \".csv\")\nwrite_csv(demo_data, output_csv)\n\n# ä¸å†™å…¥åˆ—å\nwrite_csv(demo_data, output_csv, col_names = FALSE)\n\n# è¿½åŠ æ¨¡å¼\nwrite_csv(demo_data[1:2, ], output_csv) # å…ˆå†™å…¥éƒ¨åˆ†æ•°æ®\nwrite_csv(demo_data[3:5, ], output_csv, append = TRUE) # è¿½åŠ \n\n\n\nwrite_excel_csvï¼šExcel å…¼å®¹çš„ CSV\nå½“éœ€è¦åœ¨ Excel ä¸­æ‰“å¼€ CSV æ–‡ä»¶æ—¶ï¼Œä½¿ç”¨æ­¤å‡½æ•°é¿å…ä¸­æ–‡ä¹±ç ï¼š\n\n# æ·»åŠ  BOM å¤´ï¼ŒExcel èƒ½æ­£ç¡®è¯†åˆ« UTF-8\noutput_excel_csv &lt;- tempfile(fileext = \".csv\")\nwrite_excel_csv(demo_data, output_excel_csv)\n\n\n\nwrite_xlsxï¼šå†™å‡º Excel\n\n# å•ä¸ªå·¥ä½œè¡¨\noutput_xlsx &lt;- tempfile(fileext = \".xlsx\")\nwrite_xlsx(demo_data, output_xlsx)\n\n# å¤šä¸ªå·¥ä½œè¡¨\nmulti_sheet_data &lt;- list(\n    \"é”€å”®æ•°æ®\" = demo_data,\n    \"äº§å“æ•°æ®\" = demo_excel\n)\nwrite_xlsx(multi_sheet_data, output_xlsx)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "readr/readxl - é«˜æ•ˆè¯»å–"
    ]
  },
  {
    "objectID": "3012-readr-readxl.html#æ‰¹é‡è¯»å–æ–‡ä»¶",
    "href": "3012-readr-readxl.html#æ‰¹é‡è¯»å–æ–‡ä»¶",
    "title": "readr/readxl é«˜æ•ˆæ•°æ®è¯»å–æŒ‡å—",
    "section": "æ‰¹é‡è¯»å–æ–‡ä»¶",
    "text": "æ‰¹é‡è¯»å–æ–‡ä»¶\n\nä½¿ç”¨ purrr::map æ‰¹é‡è¯»å–\n\n# åˆ›å»ºå¤šä¸ªä¸´æ—¶æ–‡ä»¶ç”¨äºæ¼”ç¤º\ntemp_files &lt;- sapply(1:3, function(i) {\n    temp &lt;- tempfile(fileext = \".csv\")\n    write_csv(demo_data[sample(5, 3), ], temp)\n    temp\n})\n\n# æ‰¹é‡è¯»å–å¹¶åˆå¹¶\nall_data &lt;- temp_files %&gt;%\n    map(read_csv, show_col_types = FALSE) %&gt;% # è¯»å–æ¯ä¸ªæ–‡ä»¶\n    list_rbind() # åˆå¹¶ä¸ºä¸€ä¸ªæ•°æ®æ¡†\n\nall_data\n\n# A tibble: 9 Ã— 5\n     id name    age score date      \n  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;date&gt;    \n1     1 å¼ ä¸‰     25  85.5 2024-01-15\n2     4 èµµå…­     35  88.1 2024-04-05\n3     2 æå››     30  92.3 2024-02-20\n4     5 é’±ä¸ƒ     42  95   2024-05-18\n5     1 å¼ ä¸‰     25  85.5 2024-01-15\n6     2 æå››     30  92.3 2024-02-20\n7     2 æå››     30  92.3 2024-02-20\n8     1 å¼ ä¸‰     25  85.5 2024-01-15\n9     3 ç‹äº”     28  78.9 2024-03-10\n\n# æ·»åŠ æ¥æºä¿¡æ¯\nall_data_with_source &lt;- temp_files %&gt;%\n    set_names(basename) %&gt;% # ç”¨æ–‡ä»¶åä½œä¸ºåˆ—è¡¨å\n    map(read_csv, show_col_types = FALSE) %&gt;%\n    list_rbind(names_to = \"source\") # æ·»åŠ æ¥æºåˆ—\n\nall_data_with_source\n\n# A tibble: 9 Ã— 6\n  source                  id name    age score date      \n  &lt;chr&gt;                &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;date&gt;    \n1 filed58440e24ce0.csv     1 å¼ ä¸‰     25  85.5 2024-01-15\n2 filed58440e24ce0.csv     4 èµµå…­     35  88.1 2024-04-05\n3 filed58440e24ce0.csv     2 æå››     30  92.3 2024-02-20\n4 filed58419b1b8e.csv      5 é’±ä¸ƒ     42  95   2024-05-18\n5 filed58419b1b8e.csv      1 å¼ ä¸‰     25  85.5 2024-01-15\n6 filed58419b1b8e.csv      2 æå››     30  92.3 2024-02-20\n7 filed5846cfb23dc.csv     2 æå››     30  92.3 2024-02-20\n8 filed5846cfb23dc.csv     1 å¼ ä¸‰     25  85.5 2024-01-15\n9 filed5846cfb23dc.csv     3 ç‹äº”     28  78.9 2024-03-10\n\n\n\n\næ‰¹é‡è¯»å– Excel å·¥ä½œè¡¨\n\n# åˆ›å»ºå¤šå·¥ä½œè¡¨ Excel\nmulti_sheets &lt;- list(\n    \"2022\" = demo_data,\n    \"2023\" = demo_data %&gt;% mutate(score = score * 1.1),\n    \"2024\" = demo_data %&gt;% mutate(score = score * 1.2)\n)\n\ntemp_multi &lt;- tempfile(fileext = \".xlsx\")\nwrite_xlsx(multi_sheets, temp_multi)\n\n# è¯»å–æ‰€æœ‰å·¥ä½œè¡¨\nsheet_names &lt;- excel_sheets(temp_multi)\nall_sheets &lt;- sheet_names %&gt;%\n    set_names() %&gt;%\n    map(~ read_excel(temp_multi, sheet = .x)) %&gt;%\n    list_rbind(names_to = \"year\")\n\nall_sheets\n\n# A tibble: 15 Ã— 6\n   year     id name    age score date               \n   &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dttm&gt;             \n 1 2022      1 å¼ ä¸‰     25  85.5 2024-01-15 00:00:00\n 2 2022      2 æå››     30  92.3 2024-02-20 00:00:00\n 3 2022      3 ç‹äº”     28  78.9 2024-03-10 00:00:00\n 4 2022      4 èµµå…­     35  88.1 2024-04-05 00:00:00\n 5 2022      5 é’±ä¸ƒ     42  95   2024-05-18 00:00:00\n 6 2023      1 å¼ ä¸‰     25  94.1 2024-01-15 00:00:00\n 7 2023      2 æå››     30 102.  2024-02-20 00:00:00\n 8 2023      3 ç‹äº”     28  86.8 2024-03-10 00:00:00\n 9 2023      4 èµµå…­     35  96.9 2024-04-05 00:00:00\n10 2023      5 é’±ä¸ƒ     42 104.  2024-05-18 00:00:00\n11 2024      1 å¼ ä¸‰     25 103.  2024-01-15 00:00:00\n12 2024      2 æå››     30 111.  2024-02-20 00:00:00\n13 2024      3 ç‹äº”     28  94.7 2024-03-10 00:00:00\n14 2024      4 èµµå…­     35 106.  2024-04-05 00:00:00\n15 2024      5 é’±ä¸ƒ     42 114   2024-05-18 00:00:00\n\n\n\n\nå®ç”¨æ‰¹é‡è¯»å–å‡½æ•°\n\n# å°è£…ä¸€ä¸ªæ‰¹é‡è¯»å–å‡½æ•°\nread_all_csv &lt;- function(folder, pattern = \"\\\\.csv$\") {\n    # è·å–æ‰€æœ‰åŒ¹é…çš„æ–‡ä»¶\n    files &lt;- list.files(folder, pattern = pattern, full.names = TRUE)\n\n    if (length(files) == 0) {\n        warning(\"æœªæ‰¾åˆ°åŒ¹é…çš„æ–‡ä»¶\")\n        return(tibble())\n    }\n\n    # è¯»å–å¹¶åˆå¹¶\n    files %&gt;%\n        set_names(basename) %&gt;%\n        map(read_csv, show_col_types = FALSE) %&gt;%\n        list_rbind(names_to = \"file\")\n}\n\n# ä½¿ç”¨ç¤ºä¾‹ï¼ˆéœ€è¦å®é™…æ–‡ä»¶å¤¹ï¼‰\n# all_data &lt;- read_all_csv(\"data/\")",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "readr/readxl - é«˜æ•ˆè¯»å–"
    ]
  },
  {
    "objectID": "3012-readr-readxl.html#æ€§èƒ½ä¼˜åŒ–",
    "href": "3012-readr-readxl.html#æ€§èƒ½ä¼˜åŒ–",
    "title": "readr/readxl é«˜æ•ˆæ•°æ®è¯»å–æŒ‡å—",
    "section": "æ€§èƒ½ä¼˜åŒ–",
    "text": "æ€§èƒ½ä¼˜åŒ–\n\nå»¶è¿Ÿè¯»å–ï¼ˆLazy Readingï¼‰\nå¯¹äºè¶…å¤§æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨å»¶è¿Ÿè¯»å–å‡å°‘å†…å­˜å ç”¨ï¼š\n\n# ä½¿ç”¨ vroom åŒ…è¿›è¡Œå»¶è¿Ÿè¯»å–ï¼ˆæ›´é«˜æ•ˆï¼‰\n# install.packages(\"vroom\")\n# library(vroom)\n# df &lt;- vroom(\"large_file.csv\", altrep = TRUE)\n\n\n\nåªè¯»å–éœ€è¦çš„åˆ—\n\n# è·³è¿‡ä¸éœ€è¦çš„åˆ—å¯ä»¥æ˜¾è‘—æå‡é€Ÿåº¦\ndf &lt;- read_csv(temp_csv, col_types = cols_only(\n    name = col_character(),\n    score = col_double()\n))\ndf\n\n# A tibble: 5 Ã— 2\n  name  score\n  &lt;chr&gt; &lt;dbl&gt;\n1 å¼ ä¸‰   85.5\n2 æå››   92.3\n3 ç‹äº”   78.9\n4 èµµå…­   88.1\n5 é’±ä¸ƒ   95  \n\n\n\n\nå¹¶è¡Œè¯»å–\nå¯¹äºå¤šä¸ªæ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨å¹¶è¡Œå¤„ç†ï¼š\n\n# ä½¿ç”¨ furrr åŒ…å¹¶è¡Œè¯»å–\n# install.packages(\"furrr\")\n# library(furrr)\n# plan(multisession, workers = 4)\n# all_data &lt;- files %&gt;%\n#   future_map(read_csv) %&gt;%\n#   list_rbind()",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "readr/readxl - é«˜æ•ˆè¯»å–"
    ]
  },
  {
    "objectID": "3012-readr-readxl.html#æ€§èƒ½å¯¹æ¯”",
    "href": "3012-readr-readxl.html#æ€§èƒ½å¯¹æ¯”",
    "title": "readr/readxl é«˜æ•ˆæ•°æ®è¯»å–æŒ‡å—",
    "section": "æ€§èƒ½å¯¹æ¯”",
    "text": "æ€§èƒ½å¯¹æ¯”\n\n# åˆ›å»ºè¾ƒå¤§çš„æµ‹è¯•æ•°æ®\nlarge_data &lt;- tibble(\n    id = 1:10000,\n    name = paste0(\"Name_\", 1:10000),\n    value1 = rnorm(10000),\n    value2 = rnorm(10000),\n    value3 = rnorm(10000)\n)\n\ntemp_large &lt;- tempfile(fileext = \".csv\")\nwrite_csv(large_data, temp_large)\n\n# æ€§èƒ½å¯¹æ¯”ï¼ˆç®€åŒ–æ¼”ç¤ºï¼‰\nsystem.time({\n    df1 &lt;- read.csv(temp_large) # Base R\n})\n\nç”¨æˆ· ç³»ç»Ÿ æµé€ \n0.03 0.00 0.03 \n\nsystem.time({\n    df2 &lt;- read_csv(temp_large, show_col_types = FALSE) # readr\n})\n\nç”¨æˆ· ç³»ç»Ÿ æµé€ \n0.05 0.01 0.03",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "readr/readxl - é«˜æ•ˆè¯»å–"
    ]
  },
  {
    "objectID": "3012-readr-readxl.html#å®æˆ˜æ¡ˆä¾‹",
    "href": "3012-readr-readxl.html#å®æˆ˜æ¡ˆä¾‹",
    "title": "readr/readxl é«˜æ•ˆæ•°æ®è¯»å–æŒ‡å—",
    "section": "å®æˆ˜æ¡ˆä¾‹",
    "text": "å®æˆ˜æ¡ˆä¾‹\n\næ¡ˆä¾‹ä¸€ï¼šå¤„ç†ä¸­æ–‡ CSV æ–‡ä»¶\n\n# åˆ›å»ºä¸­æ–‡æ•°æ®\nchinese_data &lt;- tibble(\n    å§“å = c(\"å¼ ä¸‰\", \"æå››\", \"ç‹äº”\"),\n    éƒ¨é—¨ = c(\"ç ”å‘éƒ¨\", \"å¸‚åœºéƒ¨\", \"è´¢åŠ¡éƒ¨\"),\n    å·¥èµ„ = c(15000, 12000, 10000)\n)\n\n# å†™å‡ºä¸º Excel å…¼å®¹æ ¼å¼\ntemp_cn &lt;- tempfile(fileext = \".csv\")\nwrite_excel_csv(chinese_data, temp_cn)\n\n# è¯»å–\ndf &lt;- read_csv(temp_cn, show_col_types = FALSE)\ndf\n\n# A tibble: 3 Ã— 3\n  å§“å  éƒ¨é—¨    å·¥èµ„\n  &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;\n1 å¼ ä¸‰  ç ”å‘éƒ¨ 15000\n2 æå››  å¸‚åœºéƒ¨ 12000\n3 ç‹äº”  è´¢åŠ¡éƒ¨ 10000\n\n\n\n\næ¡ˆä¾‹äºŒï¼šè¯»å–ç§‘ç ”æ•°æ®\n\n# æ¨¡æ‹Ÿç§‘ç ”æ•°æ®æ ¼å¼ï¼ˆå¸¦æ³¨é‡Šè¡Œå’Œå•ä½è¡Œï¼‰\nresearch_data &lt;- \"# å®éªŒæ•°æ®æ–‡ä»¶\n# æ—¥æœŸ: 2024-01-15\n# å®éªŒå‘˜: å¼ ä¸‰\næ ·æœ¬ID,æµ“åº¦(Î¼g/mL),å¸å…‰åº¦,æ¸©åº¦(Â°C)\nunit,Î¼g/mL,OD450,Â°C\nS001,10.5,0.245,25.0\nS002,20.3,0.456,25.1\nS003,30.1,0.678,24.9\nS004,40.8,0.891,25.2\"\n\ntemp_research &lt;- tempfile(fileext = \".csv\")\nwriteLines(research_data, temp_research)\n\n# è·³è¿‡æ³¨é‡Šè¡Œå’Œå•ä½è¡Œ\ndf &lt;- read_csv(temp_research,\n    skip = 4, # è·³è¿‡å‰4è¡Œ\n    col_names = c(\"æ ·æœ¬ID\", \"æµ“åº¦\", \"å¸å…‰åº¦\", \"æ¸©åº¦\"),\n    show_col_types = FALSE\n)\ndf\n\n# A tibble: 5 Ã— 4\n  æ ·æœ¬ID æµ“åº¦  å¸å…‰åº¦ æ¸©åº¦ \n  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;\n1 unit   Î¼g/mL OD450  Â°C   \n2 S001   10.5  0.245  25.0 \n3 S002   20.3  0.456  25.1 \n4 S003   30.1  0.678  24.9 \n5 S004   40.8  0.891  25.2 \n\n\n\n\næ¡ˆä¾‹ä¸‰ï¼šåˆå¹¶å¤šä¸ªæœˆåº¦æŠ¥è¡¨\n\n# åˆ›å»ºæ¨¡æ‹Ÿæœˆåº¦æ•°æ®\nmonths &lt;- c(\"2024-01\", \"2024-02\", \"2024-03\")\ntemp_monthly &lt;- sapply(months, function(m) {\n    temp &lt;- tempfile(fileext = \".csv\")\n    data &lt;- tibble(\n        æœˆä»½ = m,\n        äº§å“ = c(\"A\", \"B\", \"C\"),\n        é”€é‡ = sample(100:500, 3)\n    )\n    write_csv(data, temp)\n    temp\n})\n\n# æ‰¹é‡è¯»å–å¹¶åˆå¹¶\nmonthly_report &lt;- temp_monthly %&gt;%\n    map(read_csv, show_col_types = FALSE) %&gt;%\n    list_rbind()\n\nmonthly_report\n\n# A tibble: 9 Ã— 3\n  æœˆä»½    äº§å“   é”€é‡\n  &lt;chr&gt;   &lt;chr&gt; &lt;dbl&gt;\n1 2024-01 A       220\n2 2024-01 B       229\n3 2024-01 C       456\n4 2024-02 A       420\n5 2024-02 B       440\n6 2024-02 C       243\n7 2024-03 A       315\n8 2024-03 B       251\n9 2024-03 C       172\n\n# æŒ‰æœˆä»½æ±‡æ€»\nmonthly_report %&gt;%\n    group_by(æœˆä»½) %&gt;%\n    summarise(æ€»é”€é‡ = sum(é”€é‡))\n\n# A tibble: 3 Ã— 2\n  æœˆä»½    æ€»é”€é‡\n  &lt;chr&gt;    &lt;dbl&gt;\n1 2024-01    905\n2 2024-02   1103\n3 2024-03    738\n\n\n\n\næ¡ˆä¾‹å››ï¼šå¤„ç†å¤§å‹æ—¥å¿—æ–‡ä»¶\n\n# æ¨¡æ‹Ÿæ—¥å¿—æ•°æ®\nlog_data &lt;- tibble(\n    timestamp = seq(as.POSIXct(\"2024-01-01\"),\n        by = \"min\",\n        length.out = 1000\n    ),\n    level = sample(c(\"INFO\", \"WARN\", \"ERROR\"), 1000,\n        replace = TRUE, prob = c(0.8, 0.15, 0.05)\n    ),\n    message = paste(\"Event\", 1:1000)\n)\n\ntemp_log &lt;- tempfile(fileext = \".csv\")\nwrite_csv(log_data, temp_log)\n\n# åªè¯»å– ERROR çº§åˆ«ï¼ˆå…ˆè¯»å–å†è¿‡æ»¤ï¼‰\nerrors &lt;- read_csv(temp_log, show_col_types = FALSE) %&gt;%\n    filter(level == \"ERROR\")\n\nerrors\n\n# A tibble: 55 Ã— 3\n   timestamp           level message  \n   &lt;dttm&gt;              &lt;chr&gt; &lt;chr&gt;    \n 1 2023-12-31 16:32:00 ERROR Event 33 \n 2 2023-12-31 17:00:00 ERROR Event 61 \n 3 2023-12-31 17:06:00 ERROR Event 67 \n 4 2023-12-31 17:29:00 ERROR Event 90 \n 5 2023-12-31 17:49:00 ERROR Event 110\n 6 2023-12-31 17:56:00 ERROR Event 117\n 7 2023-12-31 18:21:00 ERROR Event 142\n 8 2023-12-31 18:39:00 ERROR Event 160\n 9 2023-12-31 18:48:00 ERROR Event 169\n10 2023-12-31 18:58:00 ERROR Event 179\n# â„¹ 45 more rows",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "readr/readxl - é«˜æ•ˆè¯»å–"
    ]
  },
  {
    "objectID": "3012-readr-readxl.html#readr-ä¸-base-r-å¯¹ç…§è¡¨",
    "href": "3012-readr-readxl.html#readr-ä¸-base-r-å¯¹ç…§è¡¨",
    "title": "readr/readxl é«˜æ•ˆæ•°æ®è¯»å–æŒ‡å—",
    "section": "readr ä¸ Base R å¯¹ç…§è¡¨",
    "text": "readr ä¸ Base R å¯¹ç…§è¡¨\n\n\n\nåŠŸèƒ½\nreadr\nBase R\n\n\n\n\nè¯»å– CSV\nread_csv()\nread.csv()\n\n\nè¯»å– TSV\nread_tsv()\nread.delim()\n\n\nè‡ªå®šä¹‰åˆ†éš”ç¬¦\nread_delim()\nread.table()\n\n\nå›ºå®šå®½åº¦\nread_fwf()\nread.fwf()\n\n\nå†™å‡º CSV\nwrite_csv()\nwrite.csv()\n\n\nç±»å‹è§„èŒƒ\ncol_types = cols()\ncolClasses = c()\n\n\né»˜è®¤è¾“å‡º\ntibble\ndata.frame\n\n\né»˜è®¤ç¼–ç \nUTF-8\nç³»ç»Ÿä¾èµ–\n\n\nå­—ç¬¦ä¸²å¤„ç†\nä¿æŒå­—ç¬¦ä¸²\nå¯èƒ½è½¬ä¸ºå› å­",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "readr/readxl - é«˜æ•ˆè¯»å–"
    ]
  },
  {
    "objectID": "3012-readr-readxl.html#å¸¸è§é—®é¢˜è§£å†³",
    "href": "3012-readr-readxl.html#å¸¸è§é—®é¢˜è§£å†³",
    "title": "readr/readxl é«˜æ•ˆæ•°æ®è¯»å–æŒ‡å—",
    "section": "å¸¸è§é—®é¢˜è§£å†³",
    "text": "å¸¸è§é—®é¢˜è§£å†³\n\né—®é¢˜1ï¼šä¸­æ–‡ä¹±ç \n\n# è§£å†³æ–¹æ¡ˆï¼šæŒ‡å®šæ­£ç¡®çš„ç¼–ç \n# df &lt;- read_csv(\"data.csv\", locale = locale(encoding = \"GBK\"))\n# æˆ–ä½¿ç”¨ write_excel_csv å†™å‡º\n\n\n\né—®é¢˜2ï¼šåˆ—ç±»å‹æ¨æ–­é”™è¯¯\n\n# è§£å†³æ–¹æ¡ˆï¼šå¢åŠ çŒœæµ‹è¡Œæ•°æˆ–æ‰‹åŠ¨æŒ‡å®šç±»å‹\n# df &lt;- read_csv(\"data.csv\", guess_max = 5000)\n# æˆ–\n# df &lt;- read_csv(\"data.csv\", col_types = cols(\n#   é—®é¢˜åˆ— = col_character()\n# ))\n\n\n\né—®é¢˜3ï¼šç§‘å­¦è®¡æ•°æ³•é—®é¢˜\n\n# è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ col_character() ä¿æŒåŸæ ·\n# df &lt;- read_csv(\"data.csv\", col_types = cols(\n#   id = col_character()  # é¿å… 1234567890 å˜æˆ 1.23e+09\n# ))",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "readr/readxl - é«˜æ•ˆè¯»å–"
    ]
  },
  {
    "objectID": "3012-readr-readxl.html#æ€»ç»“",
    "href": "3012-readr-readxl.html#æ€»ç»“",
    "title": "readr/readxl é«˜æ•ˆæ•°æ®è¯»å–æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nreadr å’Œ readxl æ˜¯ R è¯­è¨€ä¸­è¯»å–æ•°æ®çš„æœ€ä½³é€‰æ‹©ï¼š\n\n\n\nä¼˜åŠ¿\nè¯´æ˜\n\n\n\n\né€Ÿåº¦å¿«\næ¯” Base R å¿« 10 å€ä»¥ä¸Š\n\n\nç±»å‹æ™ºèƒ½\nè‡ªåŠ¨å‡†ç¡®æ¨æ–­åˆ—ç±»å‹\n\n\nç¼–ç å‹å¥½\né»˜è®¤ UTF-8ï¼Œä¸­æ–‡æ— å¿§\n\n\nè¾“å‡ºä¸€è‡´\nç»Ÿä¸€è¾“å‡º tibble æ ¼å¼\n\n\nåŠŸèƒ½å…¨é¢\nè¦†ç›–å„ç§æ•°æ®æ ¼å¼\n\n\n\næŒæ¡è¿™ä¸¤ä¸ªåŒ…åï¼Œä½ çš„æ•°æ®å¯¼å…¥å·¥ä½œå°†å˜å¾—é«˜æ•ˆä¾¿æ·ï¼",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "readr/readxl - é«˜æ•ˆè¯»å–"
    ]
  },
  {
    "objectID": "3012-readr-readxl.html#å‚è€ƒèµ„æº",
    "href": "3012-readr-readxl.html#å‚è€ƒèµ„æº",
    "title": "readr/readxl é«˜æ•ˆæ•°æ®è¯»å–æŒ‡å—",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nreadr å®˜æ–¹æ–‡æ¡£\nreadxl å®˜æ–¹æ–‡æ¡£\nR for Data Science - Data Import\nvroom åŒ…ï¼ˆè¶…å¤§æ–‡ä»¶ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "readr/readxl - é«˜æ•ˆè¯»å–"
    ]
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "R è¯­è¨€å­¦ä¹ ç¬”è®°",
    "section": "",
    "text": "R è¯­è¨€å­¦ä¹ ç¬”è®°\n\n\nè¦†ç›–ç»Ÿè®¡åˆ†æã€æœºå™¨å­¦ä¹ ä¸å®ç”¨ R åŒ…çš„ç³»ç»Ÿæ•™ç¨‹ä¸å®è·µæŒ‡å—ã€‚\n\n\n  \n    \n    \n      \n    \n  \n  \n\n\n  \n     æœ€è¿‘æ›´æ–°\n  \n  \n     çƒ­é—¨æ•™ç¨‹\n  \n  \n     éšæœºæ¨è\n  \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nå°æ³¢å˜æ¢ï¼šæ—¶é¢‘åˆ†æå®Œå…¨æŒ‡å—\n\n24 min\n\n\nç‰¹æ®Šåº”ç”¨\n\nä¿¡å·å¤„ç†\n\nRåŒ…\n\nç»Ÿè®¡æ–¹æ³•\n\n\n\nä»å‚…é‡Œå¶å˜æ¢åˆ°å°æ³¢å˜æ¢ï¼ŒæŒæ¡æ—¶é¢‘åˆ†æçš„å¼ºå¤§å·¥å…·ã€‚æ¶µç›–è¿ç»­/ç¦»æ•£å°æ³¢å˜æ¢åŸç†ã€R è¯­è¨€å®ç°ã€ä¿¡å·å»å™ªã€ECG åˆ†æç­‰å®é™…åº”ç”¨ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nåŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹ (GBTM) å®Œå…¨æŒ‡å—\n\n3 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\né«˜çº§å»ºæ¨¡\n\nçºµå‘æ•°æ®\n\nè½¨è¿¹åˆ†æ\n\n\n\nä»‹ç» GBTM çš„å»ºæ¨¡é€»è¾‘ã€æ¨¡å‹é€‰æ‹©ä¸ç»“æœè§£è¯»ï¼Œä½¿ç”¨ lcmm åŒ…å®ç°è½¨è¿¹åˆ†ç»„ä¸å¯è§†åŒ–ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nåµŒå¥—äº¤å‰éªŒè¯å®Œæ•´æ•™ç¨‹\n\n7 min\n\n\næœºå™¨å­¦ä¹ ä¸AI\n\næœºå™¨å­¦ä¹ æ¡†æ¶\n\næ¨¡å‹è¯„ä¼°\n\näº¤å‰éªŒè¯\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAUC ä¸ AUPRC å¯¹æ¯”ä¸åº”ç”¨\n\n4 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\næ¨¡å‹è¯„ä¼°\n\nAUC\n\nAUPRC\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\næœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡ä¸ä½¿ç”¨åœºæ™¯\n\n3 min\n\n\næœºå™¨å­¦ä¹ ä¸AI\n\næœºå™¨å­¦ä¹ æ¡†æ¶\n\næ¨¡å‹è¯„ä¼°\n\nè¯„ä¼°æŒ‡æ ‡\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nå†³ç­–æ›²çº¿åˆ†æ (DCA)\n\n6 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\næ¨¡å‹è¯„ä¼°\n\nä¸´åºŠé¢„æµ‹æ¨¡å‹\n\nDCA\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nOpenCode: å¼€æº AI ç¼–ç¨‹ä»£ç†\n\n6 min\n\n\næœºå™¨å­¦ä¹ ä¸AI\n\nAI å·¥å…·\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nOpenCode Skills: æŠ€èƒ½ç³»ç»Ÿè¯¦è§£\n\n6 min\n\n\næœºå™¨å­¦ä¹ ä¸AI\n\nAI å·¥å…·\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\näº¤å‰æ»åé¢æ¿æ¨¡å‹ï¼ˆCLPMï¼‰å®Œå…¨æ•™ç¨‹\n\n3 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\né«˜çº§å»ºæ¨¡\n\nçºµå‘ç ”ç©¶\n\n\n\nè¯¦è§£äº¤å‰æ»åé¢æ¿æ¨¡å‹çš„æ ¸å¿ƒæ€æƒ³ã€å‡è®¾ã€å»ºæ¨¡æµç¨‹ä¸ R è¯­è¨€ lavaan å®ç°ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€å‡¹å‡¸å›¾ï¼ˆæ’åå˜åŒ–å›¾ï¼‰ç»˜åˆ¶\n\n23 min\n\n\næ•°æ®å¯è§†åŒ–\n\næ’åå›¾\n\næ—¶é—´åºåˆ—\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–ï¼ˆgganimateï¼‰\n\n6 min\n\n\næ•°æ®å¯è§†åŒ–\n\nåŠ¨ç”»å›¾\n\næ—¶é—´åºåˆ—\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nå¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE) å®Œæ•´æ•™ç¨‹\n\n2 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\né«˜çº§å»ºæ¨¡\n\nGEE\n\nlongitudinal\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nå¤šé‡æ’è¡¥å®Œæ•´æ•™ç¨‹\n\n2 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\né«˜çº§å»ºæ¨¡\n\nç¼ºå¤±æ•°æ®\n\nmultiple imputation\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nè¾¹é™…ç»“æ„æ¨¡å‹ (MSM) ä¸ IPTW å®Œæ•´æ•™ç¨‹\n\n2 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nå› æœæ¨æ–­\n\nMSM\n\nIPTW\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nFine-Gray ç«äº‰é£é™©æ¨¡å‹å®Œæ•´æ•™ç¨‹\n\n1 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nç”Ÿå­˜åˆ†æ\n\nç«äº‰é£é™©\n\nFine-Gray\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\næ—¶å˜åå˜é‡ Cox æ¨¡å‹å®Œæ•´æ•™ç¨‹\n\n1 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nç”Ÿå­˜åˆ†æ\n\nCox æ¨¡å‹\n\næ—¶é—´å˜åå˜é‡\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nå€¾å‘è¯„åˆ†åŠ æƒè¯Šæ–­ä¸ç¨³å®šæƒé‡å®Œæ•´æ•™ç¨‹\n\n2 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nå› æœæ¨æ–­\n\nIPTW\n\nå€¾å‘è¯„åˆ†\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶å®Œæ•´æ•™ç¨‹\n\n1 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nå› æœæ¨æ–­\n\nè§‚å¯Ÿæ€§ç ”ç©¶\n\nç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nKNN æœ€è¿‘é‚»å®Œæ•´æ•™ç¨‹\n\n2 min\n\n\næœºå™¨å­¦ä¹ ä¸AI\n\næœºå™¨å­¦ä¹ æ¡†æ¶\n\né‚»è¿‘ç®—æ³•\n\nKNN\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\næœ´ç´ è´å¶æ–¯å®Œæ•´æ•™ç¨‹\n\n1 min\n\n\næœºå™¨å­¦ä¹ ä¸AI\n\næœºå™¨å­¦ä¹ æ¡†æ¶\n\næ¦‚ç‡æ¨¡å‹\n\næœ´ç´ è´å¶æ–¯\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nGBDT æ¢¯åº¦æå‡æ ‘å®Œæ•´æ•™ç¨‹\n\n2 min\n\n\næœºå™¨å­¦ä¹ ä¸AI\n\næœºå™¨å­¦ä¹ æ¡†æ¶\n\né›†æˆå­¦ä¹ \n\nGBDT\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ntidytable æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—\n\n3 min\n\n\nå®ç”¨ R åŒ…\n\næ•°æ®å¤„ç†\n\ntidytable\n\ndata.table\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nK-means èšç±»å®Œæ•´æ•™ç¨‹\n\n5 min\n\n\næœºå™¨å­¦ä¹ ä¸AI\n\næœºå™¨å­¦ä¹ æ¡†æ¶\n\nèšç±»åˆ†æ\n\nkmeans\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\néšæœºæ£®æ—ä¸å†³ç­–æ ‘å®Œæ•´æ•™ç¨‹\n\n3 min\n\n\næœºå™¨å­¦ä¹ ä¸AI\n\næœºå™¨å­¦ä¹ æ¡†æ¶\n\næ ‘æ¨¡å‹\n\néšæœºæ£®æ—\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\næ”¯æŒå‘é‡æœº SVM å®Œæ•´æ•™ç¨‹\n\n3 min\n\n\næœºå™¨å­¦ä¹ ä¸AI\n\næœºå™¨å­¦ä¹ æ¡†æ¶\n\næ ¸æ–¹æ³•\n\nSVM\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\né›†æˆå­¦ä¹ å®Œæ•´æ•™ç¨‹\n\n4 min\n\n\næœºå™¨å­¦ä¹ ä¸AI\n\næœºå™¨å­¦ä¹ æ¡†æ¶\n\né›†æˆå­¦ä¹ \n\nbagging\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\né™ç»´æ–¹æ³•å®Œæ•´æ•™ç¨‹\n\n3 min\n\n\næœºå™¨å­¦ä¹ ä¸AI\n\næœºå™¨å­¦ä¹ æ¡†æ¶\n\né™ç»´\n\nPCA\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\næ— ç›‘ç£å¼‚å¸¸æ£€æµ‹å®Œæ•´æ•™ç¨‹\n\n3 min\n\n\næœºå™¨å­¦ä¹ ä¸AI\n\næœºå™¨å­¦ä¹ æ¡†æ¶\n\næ— ç›‘ç£\n\nå¼‚å¸¸æ£€æµ‹\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ntorch æ·±åº¦å­¦ä¹ å®Œå…¨æŒ‡å—\n\n8 min\n\n\næœºå™¨å­¦ä¹ ä¸AI\n\næ·±åº¦å­¦ä¹ \n\næœºå™¨å­¦ä¹ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfairmetrics æœºå™¨å­¦ä¹ å…¬å¹³æ€§è¯„ä¼°\n\n7 min\n\n\næœºå™¨å­¦ä¹ ä¸AI\n\næœºå™¨å­¦ä¹ æ¡†æ¶\n\næœºå™¨å­¦ä¹ \n\nå…¬å¹³æ€§\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ntargets å¯é‡å¤åˆ†æå·¥ä½œæµ\n\n4 min\n\n\nå®ç”¨ R åŒ…\n\næ•°æ®å¤„ç†\n\nå·¥ä½œæµ\n\n\n\ntargets åŒ…å®ç°åˆ†æå·¥ä½œæµç®¡ç†ï¼Œæ”¯æŒä¾èµ–è¿½è¸ªã€å¢é‡æ„å»ºã€å¹¶è¡Œæ‰§è¡Œï¼Œæ˜¯å¯é‡å¤ç ”ç©¶çš„æ ¸å¿ƒå·¥å…·ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\narrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†\n\n6 min\n\n\nå®ç”¨ R åŒ…\n\næ•°æ®å¤„ç†\n\nå¤§æ•°æ®\n\n\n\narrow åŒ…æä¾› Parquet è¯»å†™ã€å†…å­˜å¤–è®¡ç®—ã€dplyr åç«¯é›†æˆï¼Œæ˜¯ R å¤„ç†å¤§è§„æ¨¡æ•°æ®çš„å¿…å¤‡å·¥å…·ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nprophet æ—¶é—´åºåˆ—é¢„æµ‹\n\n5 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nè´å¶æ–¯ç»Ÿè®¡\n\næ—¶é—´åºåˆ—\n\n\n\nMeta å¼€æºçš„ prophet æä¾›è‡ªåŠ¨åŒ–æ—¶é—´åºåˆ—é¢„æµ‹ï¼Œæ”¯æŒè¶‹åŠ¿ã€å­£èŠ‚æ€§ã€èŠ‚å‡æ—¥åˆ†è§£ï¼Œé€‚åˆå•†ä¸šå’Œæµè¡Œç—…æ•°æ®é¢„æµ‹ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nåˆ†ä½æ•°å›å½’å®Œå…¨æŒ‡å—\n\n6 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nåŸºç¡€å›å½’\n\nå›å½’åˆ†æ\n\nåˆ†ä½æ•°å›å½’\n\n\n\nåˆ†ä½æ•°å›å½’åˆ†æå˜é‡å…³ç³»åœ¨ä¸åŒåˆ†ä½ç‚¹çš„å¼‚è´¨æ€§ï¼Œé€‚ç”¨äºéæ­£æ€ã€å¼‚æ–¹å·®æ•°æ®ï¼Œæ˜¯OLSå›å½’çš„é‡è¦è¡¥å……ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\né›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—\n\n4 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nåŸºç¡€å›å½’\n\nå›å½’åˆ†æ\n\nè®¡æ•°æ•°æ®\n\n\n\né›¶è†¨èƒ€Poissonå’Œè´ŸäºŒé¡¹æ¨¡å‹å¤„ç†è®¡æ•°æ•°æ®ä¸­è¿‡å¤šé›¶å€¼é—®é¢˜ï¼Œé€‚ç”¨äºåŒ»ç–—ä½¿ç”¨ã€äº‹æ•…è®¡æ•°ç­‰åœºæ™¯ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nIPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­\n\n4 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nå› æœæ¨æ–­\n\nå€’æ¦‚ç‡åŠ æƒ\n\n\n\nå€’æ¦‚ç‡åŠ æƒï¼ˆIPW/IPTWï¼‰æ˜¯å› æœæ¨æ–­çš„æ ¸å¿ƒæ–¹æ³•ï¼Œé€šè¿‡åŠ æƒåˆ›å»ºä¼ªéšæœºåŒ–ï¼Œä¸PSMäº’è¡¥ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nå¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—\n\n7 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nç”Ÿå­˜åˆ†æ\n\nä¸´åºŠè¯•éªŒ\n\n\n\nå¤åˆç»“å±€åˆ†æå¤„ç†MACEç­‰ä¸´åºŠå¤åˆç»ˆç‚¹ï¼ŒåŒ…æ‹¬ç»å…¸æ–¹æ³•å’ŒWin Ratioç­‰æ–°æ–¹æ³•ï¼Œé€‚ç”¨äºå¿ƒè¡€ç®¡å’Œè‚¿ç˜¤ä¸´åºŠè¯•éªŒã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nrstanarm è´å¶æ–¯å›å½’å®æˆ˜\n\n3 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nè´å¶æ–¯ç»Ÿè®¡\n\nè´å¶æ–¯\n\n\n\nrstanarmæä¾›ç±»ä¼¼lm/glmè¯­æ³•çš„è´å¶æ–¯å›å½’ï¼Œæ— éœ€ç¼–å†™Stanä»£ç ï¼Œå¿«é€Ÿå…¥é—¨è´å¶æ–¯ç»Ÿè®¡ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\näº¤äº’å¼å¯è§†åŒ–è¿›é˜¶ï¼šplotly ä¸ ggiraph\n\n4 min\n\n\næ•°æ®å¯è§†åŒ–\n\nå…¶ä»–å›¾å½¢\n\näº¤äº’å›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\njanitor æ•°æ®æ¸…æ´—å®æˆ˜\n\n2 min\n\n\nå®ç”¨æ“ä½œ\n\næ•°æ®æ¸…æ´—\n\njanitor\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nç¼ºå¤±å€¼æŸ¥çœ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—\n\n13 min\n\n\nå®ç”¨æ“ä½œ\n\næ•°æ®æ¸…æ´—\n\nç¼ºå¤±å€¼\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nå·¥å…·å˜é‡æ³•å®Œå…¨æŒ‡å—\n\n9 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nå› æœæ¨æ–­\n\nè®¡é‡ç»æµå­¦\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\néšæœºç”Ÿå­˜æ£®æ—å®Œå…¨æŒ‡å—\n\n11 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nç”Ÿå­˜åˆ†æ\n\næœºå™¨å­¦ä¹ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTreeAge Proï¼šå«ç”Ÿç»æµå­¦å†³ç­–åˆ†æè½¯ä»¶æŒ‡å—\n\n10 min\n\n\nç‰¹æ®Šåº”ç”¨\n\nå«ç”Ÿç»æµå­¦\n\nTreeAge Pro\n\nè½¯ä»¶æ•™ç¨‹\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nå¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—\n\n11 min\n\n\nå®ç”¨æ“ä½œ\n\næ•°æ®æ¸…æ´—\n\næ•°æ®é¢„å¤„ç†\n\nå¼‚å¸¸å€¼\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nmarginaleffects è¾¹é™…æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—\n\n5 min\n\n\nå®ç”¨ R åŒ…\n\næ¨¡å‹æ•´ç†\n\næ¨¡å‹è§£é‡Š\n\nè¾¹é™…æ•ˆåº”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTMLE åŒé‡ç¨³å¥å› æœæ¨æ–­å®Œå…¨æŒ‡å—\n\n7 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nå› æœæ¨æ–­\n\nTMLE\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ\n\n4 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nå› æœæ¨æ–­\n\næ—¶é—´åºåˆ—\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ngt å‘è¡¨çº§è¡¨æ ¼åˆ¶ä½œå®Œå…¨æŒ‡å—\n\n11 min\n\n\nå®ç”¨ R åŒ…\n\nè¡¨æ ¼åˆ¶ä½œ\n\nå‘è¡¨çº§\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nXGBoost æ¢¯åº¦æå‡ç®—æ³•å®Œå…¨æŒ‡å—\n\n10 min\n\n\næœºå™¨å­¦ä¹ ä¸AI\n\næœºå™¨å­¦ä¹ æ¡†æ¶\n\næœºå™¨å­¦ä¹ \n\nXGBoost\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€æ£’æ£’ç³–å›¾ä¸æ’åºå›¾ç»˜åˆ¶\n\n15 min\n\n\næ•°æ®å¯è§†åŒ–\n\næ¯”è¾ƒå›¾\n\nç»Ÿè®¡å›¾è¡¨\n\næ’åºå›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€å‘æ•£å‹å›¾è¡¨ç»˜åˆ¶\n\n15 min\n\n\næ•°æ®å¯è§†åŒ–\n\næ¯”è¾ƒå›¾\n\nç»Ÿè®¡å›¾è¡¨\n\nå‘æ•£å‹å›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€åå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾ç»˜åˆ¶\n\n11 min\n\n\næ•°æ®å¯è§†åŒ–\n\nç‰¹æ®Šå›¾å½¢\n\nç»Ÿè®¡å›¾è¡¨\n\nç»„æˆå›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€äººå£é‡‘å­—å¡”å›¾ç»˜åˆ¶\n\n14 min\n\n\næ•°æ®å¯è§†åŒ–\n\nç‰¹æ®Šå›¾å½¢\n\nç»Ÿè®¡å›¾è¡¨\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€å“‘é“ƒå›¾ä¸å¡åº¦å›¾ç»˜åˆ¶\n\n19 min\n\n\næ•°æ®å¯è§†åŒ–\n\næ¯”è¾ƒå›¾\n\nç»Ÿè®¡å›¾è¡¨\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€æ°”æ³¡å›¾ç»˜åˆ¶\n\n9 min\n\n\næ•°æ®å¯è§†åŒ–\n\nå…³ç³»å›¾\n\nç»Ÿè®¡å›¾è¡¨\n\nå…³è”å›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€æŠ–åŠ¨å›¾ä¸èœ‚ç¾¤å›¾ç»˜åˆ¶\n\n6 min\n\n\næ•°æ®å¯è§†åŒ–\n\nåˆ†å¸ƒå›¾\n\nç»Ÿè®¡å›¾è¡¨\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€è¾¹ç¼˜åˆ†å¸ƒå›¾ç»˜åˆ¶\n\n3 min\n\n\næ•°æ®å¯è§†åŒ–\n\nå…³ç³»å›¾\n\nç»Ÿè®¡å›¾è¡¨\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€Joy Plotå±±è„Šå›¾ç»˜åˆ¶\n\n5 min\n\n\næ•°æ®å¯è§†åŒ–\n\nåˆ†å¸ƒå›¾\n\nç»Ÿè®¡å›¾è¡¨\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€æ—¥å†çƒ­å›¾ç»˜åˆ¶\n\n5 min\n\n\næ•°æ®å¯è§†åŒ–\n\nç‰¹æ®Šå›¾å½¢\n\nç»Ÿè®¡å›¾è¡¨\n\nçƒ­å›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€ç¯å½¢å›¾ä¸ç”œç”œåœˆå›¾ç»˜åˆ¶\n\n4 min\n\n\næ•°æ®å¯è§†åŒ–\n\nç‰¹æ®Šå›¾å½¢\n\nç»Ÿè®¡å›¾è¡¨\n\nç»„æˆå›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€ç€‘å¸ƒå›¾ç»˜åˆ¶\n\n3 min\n\n\næ•°æ®å¯è§†åŒ–\n\nç‰¹æ®Šå›¾å½¢\n\nç»Ÿè®¡å›¾è¡¨\n\nå˜åŒ–å›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€å­å¼¹å›¾ç»˜åˆ¶\n\n3 min\n\n\næ•°æ®å¯è§†åŒ–\n\næ¯”è¾ƒå›¾\n\nç»Ÿè®¡å›¾è¡¨\n\nKPIå›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€æ—¶åºå³°è°·æ ‡è®°å›¾ç»˜åˆ¶\n\n4 min\n\n\næ•°æ®å¯è§†åŒ–\n\nè¶‹åŠ¿å›¾\n\nç»Ÿè®¡å›¾è¡¨\n\næ—¶åºå›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€ç›¸å…³å›¾çŸ©é˜µç»˜åˆ¶\n\n2 min\n\n\næ•°æ®å¯è§†åŒ–\n\nå…³ç³»å›¾\n\nç»Ÿè®¡å›¾è¡¨\n\nå…³è”å›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€è®¡æ•°å›¾ä¸åˆ†ç±»å›¾ç»˜åˆ¶\n\n4 min\n\n\næ•°æ®å¯è§†åŒ–\n\nå…¶ä»–å›¾å½¢\n\nç»Ÿè®¡å›¾è¡¨\n\nåˆ†ç±»å›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€çŸ©é˜µå›¾ä¸æˆå¯¹å›¾ç»˜åˆ¶\n\n1 min\n\n\næ•°æ®å¯è§†åŒ–\n\nå…³ç³»å›¾\n\nç»Ÿè®¡å›¾è¡¨\n\nå…³è”å›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€è‡ªç›¸å…³å›¾ç»˜åˆ¶\n\n3 min\n\n\næ•°æ®å¯è§†åŒ–\n\nå…¶ä»–å›¾å½¢\n\nç»Ÿè®¡å›¾è¡¨\n\næ—¶åºå›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€è¯äº‘å›¾ç»˜åˆ¶\n\n2 min\n\n\næ•°æ®å¯è§†åŒ–\n\nå…¶ä»–å›¾å½¢\n\nç»Ÿè®¡å›¾è¡¨\n\næ–‡æœ¬å›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€ç½‘ç»œå…³ç³»å›¾ç»˜åˆ¶\n\n2 min\n\n\næ•°æ®å¯è§†åŒ–\n\nå…¶ä»–å›¾å½¢\n\nç»Ÿè®¡å›¾è¡¨\n\nç½‘ç»œå›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€ç”˜ç‰¹å›¾ç»˜åˆ¶\n\n3 min\n\n\næ•°æ®å¯è§†åŒ–\n\nå…¶ä»–å›¾å½¢\n\nç»Ÿè®¡å›¾è¡¨\n\né¡¹ç›®å›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€æ¼æ–—å›¾ç»˜åˆ¶\n\n3 min\n\n\næ•°æ®å¯è§†åŒ–\n\nå…¶ä»–å›¾å½¢\n\nç»Ÿè®¡å›¾è¡¨\n\nè¥é”€å›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€å¹³è¡Œåæ ‡å›¾ç»˜åˆ¶\n\n2 min\n\n\næ•°æ®å¯è§†åŒ–\n\nå…³ç³»å›¾\n\nç»Ÿè®¡å›¾è¡¨\n\nå¤šå˜é‡å›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€é©¬èµ›å…‹å›¾ç»˜åˆ¶\n\n3 min\n\n\næ•°æ®å¯è§†åŒ–\n\nç‰¹æ®Šå›¾å½¢\n\nç»Ÿè®¡å›¾è¡¨\n\nåˆ†ç±»å›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶\n\n3 min\n\n\næ•°æ®å¯è§†åŒ–\n\nå…¶ä»–å›¾å½¢\n\nç»Ÿè®¡å›¾è¡¨\n\nä¸ç¡®å®šæ€§å›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\næœºå™¨å­¦ä¹ å¯è§†åŒ–å®Œå…¨æŒ‡å—\n\n18 min\n\n\næ•°æ®å¯è§†åŒ–\n\nå…¶ä»–å›¾å½¢\n\næœºå™¨å­¦ä¹ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nBase R ç»‘å›¾åŸºç¡€å®Œå…¨æŒ‡å—\n\n11 min\n\n\næ•°æ®å¯è§†åŒ–\n\nå›¾å½¢åŸºç¡€\n\nBase R\n\nå…¥é—¨\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nduckplyr - é«˜æ€§èƒ½æ•°æ®å¤„ç†\n\n7 min\n\n\nå®ç”¨æ“ä½œ\n\næ•°æ®å¯¼å…¥å¯¼å‡º\n\nå¤§æ•°æ®\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTxEffectsSurvival: ç«äº‰é£é™©ä¸‹çš„æ²»ç–—æ•ˆæœåˆ†æ\n\n10 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nç”Ÿå­˜åˆ†æ\n\nç«äº‰é£é™©\n\n\n\nä½¿ç”¨ TxEffectsSurvival åŒ…è¿›è¡Œç»ˆæœ«äº‹ä»¶å’Œéç»ˆæœ«äº‹ä»¶çš„æ²»ç–—æ•ˆæœæ¨æ–­ï¼ŒåŒ…æ‹¬ Win Ratioã€RICH ç­‰æ–¹æ³•ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nDAG å› æœå›¾ä¸æ··æ‚æ§åˆ¶\n\n7 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nå› æœæ¨æ–­\n\nDAG\n\n\n\nä½¿ç”¨DAGï¼ˆæœ‰å‘æ— ç¯å›¾ï¼‰è¯†åˆ«æ··æ‚ã€ä¸­ä»‹ä¸ç¢°æ’åå€šï¼Œç¡®å®šå˜é‡è°ƒæ•´ç­–ç•¥ï¼Œæ»¡è¶³é«˜æ°´å¹³æœŸåˆŠè¦æ±‚ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ (Target Trial Emulation)\n\n10 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nå› æœæ¨æ–­\n\nè§‚å¯Ÿæ€§ç ”ç©¶\n\n\n\nä½¿ç”¨è§‚å¯Ÿæ€§æ•°æ®æ¨¡æ‹Ÿéšæœºå¯¹ç…§è¯•éªŒï¼Œéµå¾ªTARGETæŠ¥å‘ŠæŒ‡å—è¿›è¡Œä¸¥è°¨çš„å› æœæ¨æ–­ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nå­Ÿå¾·å°”éšæœºåŒ– (Mendelian Randomization) æ•™ç¨‹\n\n4 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nå› æœæ¨æ–­\n\né—ä¼ æµè¡Œç—…å­¦\n\n\n\nä¸€ç¯‡è¯¦ç»†çš„å­Ÿå¾·å°”éšæœºåŒ–ï¼ˆMRï¼‰å…¥é—¨æ•™ç¨‹ï¼Œæ·±å…¥æµ…å‡ºåœ°è®²è§£æ ¸å¿ƒæ¦‚å¿µã€åˆ†ææµç¨‹åŠç»“æœè§£è¯»ï¼Œæ— éœ€è¿è¡Œä»£ç å³å¯æŒæ¡ä¸¤æ ·æœ¬MRåˆ†ææ–¹æ³•ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nEå€¼ä¸æœªæµ‹é‡æ··æ‚æ•æ„Ÿæ€§åˆ†æ\n\n6 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nå› æœæ¨æ–­\n\næ•æ„Ÿæ€§åˆ†æ\n\n\n\nä½¿ç”¨Eå€¼è¯„ä¼°æœªæµ‹é‡æ··æ‚å¯¹å› æœæ¨æ–­çš„æ½œåœ¨å½±å“ï¼Œæ»¡è¶³å®¡ç¨¿äººå¯¹æ•æ„Ÿæ€§åˆ†æçš„è¦æ±‚ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nggplot2 æ ·å¼è®¾ç½®å®Œå…¨æŒ‡å—\n\n23 min\n\n\næ•°æ®å¯è§†åŒ–\n\nå›¾å½¢åŸºç¡€\n\nggplot2\n\næ ·å¼\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nggguides: ç®€åŒ– ggplot2 å›¾ä¾‹æ“ä½œ\n\n5 min\n\n\næ•°æ®å¯è§†åŒ–\n\nè¿›é˜¶ç¾åŒ–\n\nggplot2æ‰©å±•\n\nå›¾ä¾‹\n\n\n\nä½¿ç”¨ ggguides åŒ…ç®€åŒ– ggplot2 ä¸­çš„å›¾ä¾‹å®šä½ã€æ ·å¼è°ƒæ•´å’Œå¤šå›¾å›¾ä¾‹åˆå¹¶æ“ä½œã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nR è¯­è¨€ç½‘ç»œçˆ¬è™«å®Œå…¨æŒ‡å—\n\n16 min\n\n\nå®ç”¨æ“ä½œ\n\nå¼€å‘ç¯å¢ƒ\n\næ•°æ®è·å–\n\nç½‘ç»œçˆ¬è™«\n\n\n\nä½¿ç”¨ rvestã€httr ç­‰ R åŒ…è¿›è¡Œç½‘é¡µæ•°æ®æŠ“å–ï¼Œä»åŸºç¡€æ¦‚å¿µåˆ°å®æˆ˜æ¡ˆä¾‹çš„å®Œæ•´æ•™ç¨‹ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€è¯»å–PDFå®Œå…¨æŒ‡å—\n\n5 min\n\n\nå®ç”¨æ“ä½œ\n\næ•°æ®å¯¼å…¥å¯¼å‡º\n\næ•°æ®è·å–\n\nPDF\n\n\n\nä½¿ç”¨ pdftoolsã€tabulizer ç­‰ R åŒ…è¯»å–å’Œè§£æ PDF æ–‡ä»¶ï¼Œæå–æ–‡æœ¬ã€è¡¨æ ¼å’Œå›¾åƒã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nå¯é‡å¤ç ”ç©¶ä¸è®ºæ–‡å†™ä½œå·¥ä½œæµ\n\n8 min\n\n\nå®ç”¨æ“ä½œ\n\nå¼€å‘ç¯å¢ƒ\n\nå¯é‡å¤ç ”ç©¶\n\né¡¹ç›®ç®¡ç†\n\n\n\næ„å»ºè§„èŒƒåŒ–çš„ç ”ç©¶é¡¹ç›®ç»“æ„ï¼Œä½¿ç”¨targetsè‡ªåŠ¨åŒ–å·¥ä½œæµï¼Œrenvç®¡ç†ç¯å¢ƒï¼Œæå‡è®ºæ–‡å‘è¡¨æ•ˆç‡ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nç§‘ç ”æ•°æ®åº“ç™¾ç§‘å…¨ä¹¦å¼æŒ‡å— (æ·±åº¦ç‰ˆ)\n\n3 min\n\n\nå®ç”¨æ“ä½œ\n\nå¼€å‘ç¯å¢ƒ\n\næ•°æ®åº“\n\n\n\næ·±åº¦å‰–æå›½å†…å¤–ä¸»æµç§‘ç ”æ•°æ®åº“ï¼ˆCHARLS, CFPS, NHANESç­‰ï¼‰ï¼Œæ¶µç›–ç”³è¯·æµç¨‹ã€å˜é‡å­—å…¸ã€å¤šæ³¢æ¬¡æ¸…æ´—é€»è¾‘åŠå®æˆ˜ R ä»£ç å±•ç¤ºã€‚\n\n\n\n\n\n\n\n\n\n\n\n\næ­£åˆ™è¡¨è¾¾å¼ R è¯­è¨€å®æˆ˜æŒ‡å—\n\n7 min\n\n\nå®ç”¨æ“ä½œ\n\næ•°æ®è½¬æ¢\n\nå­—ç¬¦ä¸²å¤„ç†\n\n\n\nå…¨é¢ç³»ç»Ÿçš„æ­£åˆ™è¡¨è¾¾å¼æ•™ç¨‹ï¼Œæ¶µç›– Base R å’Œ stringr åŒ…çš„ä½¿ç”¨ï¼Œä»åŸºç¡€è¯­æ³•åˆ°é«˜çº§æŠ€å·§ï¼ŒåŠ©åŠ›æ•°æ®æ¸…æ´—ä¸æ–‡æœ¬æŒ–æ˜ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\næ—¥æœŸä¸æ—¶é—´å˜é‡å¤„ç†å®Œå…¨æŒ‡å—\n\n8 min\n\n\nå®ç”¨æ“ä½œ\n\næ•°æ®è½¬æ¢\n\næ—¥æœŸæ—¶é—´\n\n\n\nç³»ç»Ÿä»‹ç» R è¯­è¨€ä¸­æ—¥æœŸæ—¶é—´çš„å¤„ç†æ–¹æ³•ï¼Œæ¶µç›– lubridateã€hms ç­‰åŒ…çš„ä½¿ç”¨ï¼Œå¸®åŠ©ä½ è½»æ¾å¤„ç†å„ç§æ—¥æœŸæ ¼å¼è½¬æ¢ã€è®¡ç®—å’Œå¯è§†åŒ–éœ€æ±‚ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nstringr å­—ç¬¦ä¸²å¤„ç†å®Œå…¨æŒ‡å—\n\n7 min\n\n\nå®ç”¨æ“ä½œ\n\næ•°æ®è½¬æ¢\n\nå­—ç¬¦ä¸²å¤„ç†\n\n\n\nstringr åŒ…æ˜¯ tidyverse ç”Ÿæ€ä¸­å¤„ç†å­—ç¬¦ä¸²çš„æ ¸å¿ƒå·¥å…·ï¼Œæä¾›ç»Ÿä¸€ã€ç›´è§‚çš„å‡½æ•°æ¥å£ï¼Œè®©å­—ç¬¦ä¸²æ“ä½œå˜å¾—ç®€å•é«˜æ•ˆã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nforcats å› å­å¤„ç†å®Œå…¨æŒ‡å—\n\n10 min\n\n\nå®ç”¨æ“ä½œ\n\næ•°æ®è½¬æ¢\n\nå› å­å¤„ç†\n\n\n\nforcats åŒ…æ˜¯ tidyverse ç”Ÿæ€ä¸­å¤„ç†å› å­ï¼ˆåˆ†ç±»å˜é‡ï¼‰çš„æ ¸å¿ƒå·¥å…·ï¼Œæä¾›ç›´è§‚çš„å‡½æ•°è®©å› å­æ“ä½œå˜å¾—ç®€å•é«˜æ•ˆã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nreadr/readxl é«˜æ•ˆæ•°æ®è¯»å–æŒ‡å—\n\n8 min\n\n\nå®ç”¨æ“ä½œ\n\næ•°æ®å¯¼å…¥å¯¼å‡º\n\n\n\nreadr å’Œ readxl æ˜¯ tidyverse ç”Ÿæ€ä¸­é«˜æ•ˆè¯»å–æ•°æ®çš„æ ¸å¿ƒå·¥å…·ï¼Œæä¾›å¿«é€Ÿã€ä¸€è‡´ã€æ™ºèƒ½çš„æ•°æ®å¯¼å…¥ä½“éªŒã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nShiny Web åº”ç”¨å¼€å‘å®Œå…¨æŒ‡å—\n\n20 min\n\n\nå®ç”¨æ“ä½œ\n\nå¼€å‘ç¯å¢ƒ\n\nWebåº”ç”¨\n\nShiny\n\n\n\nä½¿ç”¨ R Shiny åŒ…æ„å»ºäº¤äº’å¼ Web åº”ç”¨ï¼Œä»åŸºç¡€æ¦‚å¿µåˆ°éƒ¨ç½²çš„å®Œæ•´æ•™ç¨‹ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nfuture åŒ…å¹¶è¡Œè®¡ç®—å®Œå…¨æŒ‡å—\n\n10 min\n\n\nå®ç”¨ R åŒ…\n\næ•°æ®å¤„ç†\n\nRåŒ…\n\nå¹¶è¡Œè®¡ç®—\n\n\n\nR è¯­è¨€ç°ä»£å¹¶è¡Œè®¡ç®—æ¡†æ¶ï¼šfuture åŒ…è®¾è®¡ç†å¿µã€å„ç§æ‰§è¡Œç­–ç•¥è¯¦è§£ã€furrr æ•´åˆä¸å®æˆ˜æ¡ˆä¾‹ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nä¼çŠ¶ç»¼è¿° (Umbrella Review) å®Œå…¨æŒ‡å—\n\n2 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nç»¼è¿°æ–¹æ³•\n\nRåŒ…\n\nMetaåˆ†æ\n\n\n\nä»æ•°æ®å‡†å¤‡åˆ°è¯æ®åˆ†çº§ï¼Œä½¿ç”¨ R è¯­è¨€ metaumbrella åŒ…è¿›è¡Œä¼çŠ¶ç»¼è¿°çš„å…¨æµç¨‹æ•™å­¦ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nè´¨æ€§ç ”ç©¶ä¸æ–‡æœ¬æŒ–æ˜ (Text Mining) å®Œå…¨æŒ‡å—\n\n3 min\n\n\nç‰¹æ®Šåº”ç”¨\n\nè´¨æ€§ç ”ç©¶\n\nRåŒ…\n\næ–‡æœ¬æŒ–æ˜\n\n\n\nå¦‚ä½•ä½¿ç”¨ R è¯­è¨€çš„ tidytext å’Œ LDA ä¸»é¢˜æ¨¡å‹è¾…åŠ©è´¨æ€§ç ”ç©¶ï¼Œå‘ç°æ–‡æœ¬èƒŒåçš„æ¨¡å¼ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\næ½œç±»åˆ«åˆ†æ (Latent Class Analysis) å®Œå…¨æŒ‡å—\n\n3 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\né«˜çº§å»ºæ¨¡\n\nRåŒ…\n\nç»Ÿè®¡æ¨¡å‹\n\n\n\nå¦‚ä½•ä½¿ç”¨ poLCA è¯†åˆ«ä¸å¯è§‚æµ‹çš„äºšç¾¤ï¼Œä»å¸‚åœºç»†åˆ†åˆ°åŒ»å­¦è¯Šæ–­çš„å®æˆ˜åˆ†ç±»æŠ€æœ¯ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM) å®Œå…¨æŒ‡å—\n\n4 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\né«˜çº§å»ºæ¨¡\n\nRåŒ…\n\nç»Ÿè®¡æ¨¡å‹\n\n\n\nä½¿ç”¨ lavaan åŒ…æ„å»ºæµ‹é‡æ¨¡å‹ä¸ç»“æ„æ¨¡å‹ï¼Œè·¯å¾„å›¾å¯è§†åŒ–ä¸æ‹ŸåˆæŒ‡æ•°è§£è¯»ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nåˆ†å¸ƒæ»åéçº¿æ€§æ¨¡å‹ (DLNM) å®Œå…¨æŒ‡å—\n\n3 min\n\n\nç‰¹æ®Šåº”ç”¨\n\nä¿¡å·å¤„ç†\n\nRåŒ…\n\nç¯å¢ƒæµè¡Œç—…å­¦\n\n\n\nç¯å¢ƒæµè¡Œç—…å­¦ç ”ç©¶çš„é»„é‡‘æ ‡å‡†ï¼šå¦‚ä½•é‡åŒ–æ¸©åº¦ã€æ±¡æŸ“çš„æ»åéçº¿æ€§å¥åº·æ•ˆåº”ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nå˜åˆ†æ¨¡æ€åˆ†è§£ (VMD) ä¿¡å·å¤„ç†å®Œå…¨æŒ‡å—\n\n10 min\n\n\nç‰¹æ®Šåº”ç”¨\n\nä¿¡å·å¤„ç†\n\nRåŒ…\n\næ—¶é—´åºåˆ—\n\n\n\nå¤„ç†éçº¿æ€§éå¹³ç¨³ä¿¡å·çš„åˆ©å™¨ï¼šå®Œå…¨éé€’å½’çš„ VMD åˆ†è§£ç®—æ³• R è¯­è¨€å®ç°ï¼Œä»æ•°å­¦åŸç†åˆ°å®æˆ˜åº”ç”¨ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nç»„åˆç®—æ³•: FFT + VMD + GMM ä¿¡å·åˆ†æå®Œå…¨æŒ‡å—\n\n17 min\n\n\nç‰¹æ®Šåº”ç”¨\n\nä¿¡å·å¤„ç†\n\nRåŒ…\n\næœºå™¨å­¦ä¹ \n\n\n\nä¿¡å·å¤„ç†ä¸æ¨¡å¼è¯†åˆ«çš„é€šç”¨æ¡†æ¶ï¼šåˆ©ç”¨ FFT ç¡®å®šåˆ†è§£å‚æ•°ï¼ŒVMD æå–ç‰¹å¾ï¼ŒGMM å®ç°è‡ªåŠ¨åˆ†ç±»ã€‚ä»æ•°å­¦åŸç†åˆ°å®Œæ•´ä»£ç å®ç°ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\næ–¹å·®åˆ†æ (ANOVA) å®Œå…¨æŒ‡å—\n\n4 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nåŸºç¡€å›å½’\n\nRåŒ…\n\nç»Ÿè®¡æ£€éªŒ\n\n\n\nä»å•å› ç´ åˆ°é‡å¤æµ‹é‡ï¼šä½¿ç”¨ rstatix åŒ…è¿›è¡Œæ–¹å·®åˆ†æçš„å…¨æµç¨‹æ•™å­¦ï¼ŒåŒ…å«æ•ˆåº”é‡è®¡ç®—ä¸ç»“æœæŠ¥å‘Šã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nPLS-PM åæœ€å°äºŒä¹˜è·¯å¾„æ¨¡å‹å®Œå…¨æŒ‡å—\n\n6 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\né«˜çº§å»ºæ¨¡\n\nRåŒ…\n\nç»Ÿè®¡æ¨¡å‹\n\n\n\nä½¿ç”¨ seminr åŒ…æ„å»ºåæœ€å°äºŒä¹˜è·¯å¾„æ¨¡å‹ï¼Œé€‚ç”¨äºå°æ ·æœ¬å’Œæ¢ç´¢æ€§ç ”ç©¶çš„ç»“æ„æ–¹ç¨‹å»ºæ¨¡æ›¿ä»£æ–¹æ¡ˆã€‚\n\n\n\n\n\n\n\n\n\n\n\n\næ¢ç´¢æ€§ä¸éªŒè¯æ€§å› å­åˆ†æå®Œå…¨æŒ‡å—\n\n8 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\né«˜çº§å»ºæ¨¡\n\nRåŒ…\n\nç»Ÿè®¡æ¨¡å‹\n\n\n\nä½¿ç”¨ psych å’Œ lavaan åŒ…è¿›è¡Œ EFA å’Œ CFAï¼ŒåŒ…æ‹¬å› å­æ•°ç¡®å®šã€æ¨¡å‹æ‹Ÿåˆä¸ç»“æœè§£è¯»ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nä¸»æˆåˆ†åˆ†æ (PCA) å®Œå…¨æŒ‡å—\n\n6 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\né«˜çº§å»ºæ¨¡\n\nRåŒ…\n\nç»Ÿè®¡æ¨¡å‹\n\n\n\nä½¿ç”¨ prcomp å’Œ FactoMineR è¿›è¡Œä¸»æˆåˆ†åˆ†æï¼Œç¢çŸ³å›¾ã€è½½è·å›¾ã€å¾—åˆ†å›¾å¯è§†åŒ–ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nèŒƒå›´ç»¼è¿° (Scoping Review) å®Œå…¨æŒ‡å—\n\n15 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nç»¼è¿°æ–¹æ³•\n\nRåŒ…\n\nå¾ªè¯åŒ»å­¦\n\n\n\nç³»ç»Ÿæ¢³ç†æ–‡çŒ®åœ°å›¾ï¼šä» PRISMA-ScR æ¡†æ¶åˆ° R è¯­è¨€è¾…åŠ©å·¥å…·ï¼Œå®Œæˆé«˜è´¨é‡èŒƒå›´ç»¼è¿°ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nç½‘çŠ¶ Meta åˆ†æ (Network Meta-Analysis) å®Œå…¨æŒ‡å—\n\n7 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nç»¼è¿°æ–¹æ³•\n\nRåŒ…\n\nMetaåˆ†æ\n\n\n\nå¤šç§å¹²é¢„æªæ–½çš„é—´æ¥æ¯”è¾ƒï¼šnetmeta åŒ…ä½¿ç”¨è¯¦è§£ï¼Œä»ç½‘ç»œå›¾åˆ°æ’åºå›¾çš„å®Œæ•´æµç¨‹ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\ntidymodels ç°ä»£æœºå™¨å­¦ä¹ æ¡†æ¶\n\n8 min\n\n\næœºå™¨å­¦ä¹ ä¸AI\n\næœºå™¨å­¦ä¹ æ¡†æ¶\n\næœºå™¨å­¦ä¹ \n\ntidymodels\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nbroom æ¨¡å‹ç»“æœæ•´ç†æŒ‡å—\n\n8 min\n\n\nå®ç”¨ R åŒ…\n\næ¨¡å‹æ•´ç†\n\nbroom\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nLSTM æ·±åº¦å­¦ä¹ æ—¶é—´åºåˆ—é¢„æµ‹\n\n10 min\n\n\næœºå™¨å­¦ä¹ ä¸AI\n\næ·±åº¦å­¦ä¹ \n\nLSTM\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nrstatix ç®¡é“å¼ç»Ÿè®¡åˆ†æ\n\n6 min\n\n\nå®ç”¨ R åŒ…\n\næ•°æ®å¤„ç†\n\nç»Ÿè®¡åˆ†æ\n\nrstatix\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nROC åˆ†æä¸æ¨¡å‹è¯„ä¼°\n\n5 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\næ¨¡å‹è¯„ä¼°\n\nROC\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\næ ·æœ¬é‡ä¸åŠŸæ•ˆåˆ†æ\n\n5 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\næ¨¡å‹è¯„ä¼°\n\nç»Ÿè®¡è®¾è®¡\n\næ ·æœ¬é‡\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\næ¢ç´¢æ€§æ•°æ®åˆ†æ (EDA)\n\n3 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\næ¨¡å‹è¯„ä¼°\n\næ•°æ®åˆ†æ\n\nEDA\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nç«äº‰é£é™©åˆ†æ (Competing Risks)\n\n4 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nç”Ÿå­˜åˆ†æ\n\nç»Ÿè®¡æ–¹æ³•\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nè´å¶æ–¯ç»Ÿè®¡å…¥é—¨ (Bayesian Statistics)\n\n4 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nè´å¶æ–¯ç»Ÿè®¡\n\nç»Ÿè®¡æ–¹æ³•\n\né«˜çº§åˆ†æ\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nBootstrapä¸ç½®æ¢æ£€éªŒ\n\n5 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\næ¨¡å‹è¯„ä¼°\n\nç»Ÿè®¡æ–¹æ³•\n\néå‚æ•°æ–¹æ³•\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ngtsummary - å‘è¡¨çº§ç»Ÿè®¡è¡¨æ ¼\n\n12 min\n\n\nå®ç”¨ R åŒ…\n\nè¡¨æ ¼åˆ¶ä½œ\n\nRåŒ…\n\nè¡¨æ ¼\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\näºšç»„åˆ†æä¸äº¤äº’ä½œç”¨æ£€éªŒ\n\n6 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nå› æœæ¨æ–­\n\nç»Ÿè®¡æ–¹æ³•\n\nä¸´åºŠç ”ç©¶\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\né›·è¾¾å›¾ (Radar Chart) ç»˜åˆ¶æŒ‡å—\n\n5 min\n\n\næ•°æ®å¯è§†åŒ–\n\nä¸“é¢˜å›¾\n\nå¯è§†åŒ–\n\nggplot2\n\n\n\nä½¿ç”¨ fmsb å’Œ ggradar ç»˜åˆ¶ä¸“ä¸šé›·è¾¾å›¾ï¼Œå±•ç¤ºå¤šç»´æŒ‡æ ‡å¯¹æ¯”å’Œèƒ½åŠ›ç”»åƒã€‚\n\n\n\n\n\n\n\n\n\n\n\n\néŸ¦æ©å›¾ (Venn Diagram) ç»˜åˆ¶æŒ‡å—\n\n6 min\n\n\næ•°æ®å¯è§†åŒ–\n\nä¸“é¢˜å›¾\n\nå¯è§†åŒ–\n\né›†åˆè¿ç®—\n\n\n\nä½¿ç”¨ ggVennDiagram å’Œ VennDiagram å±•ç¤ºé›†åˆå…³ç³»ï¼Œé€‚ç”¨äºåŸºå› ç»„å­¦å’Œæ•°æ®äº¤é›†åˆ†æã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nç®±çº¿å›¾ä¸å°æç´å›¾å®Œå…¨æŒ‡å—\n\n14 min\n\n\næ•°æ®å¯è§†åŒ–\n\nåˆ†å¸ƒå›¾\n\nå¯è§†åŒ–\n\nggplot2\n\n\n\nä½¿ç”¨ ggplot2 ç»‘åˆ¶ä¸“ä¸šçš„ç®±çº¿å›¾ã€å°æç´å›¾ã€æŠ–åŠ¨ç‚¹å›¾ï¼Œå±•ç¤ºæ•°æ®åˆ†å¸ƒç‰¹å¾ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\næ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿å®Œå…¨æŒ‡å—\n\n11 min\n\n\næ•°æ®å¯è§†åŒ–\n\nè¶‹åŠ¿å›¾\n\nå¯è§†åŒ–\n\nggplot2\n\n\n\nä½¿ç”¨ ggplot2 ç»‘åˆ¶æ•£ç‚¹å›¾ã€æ°”æ³¡å›¾ã€æ·»åŠ å›å½’çº¿ä¸ç½®ä¿¡åŒºé—´ï¼Œæ¢ç´¢å˜é‡é—´å…³ç³»ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nç›´æ–¹å›¾ä¸å¯†åº¦å›¾å®Œå…¨æŒ‡å—\n\n13 min\n\n\næ•°æ®å¯è§†åŒ–\n\nåˆ†å¸ƒå›¾\n\nå¯è§†åŒ–\n\nggplot2\n\n\n\nä½¿ç”¨ ggplot2 ç»‘åˆ¶ç›´æ–¹å›¾ã€å¯†åº¦æ›²çº¿ã€å²­çº¿å›¾ï¼Œæ¢ç´¢æ•°æ®åˆ†å¸ƒç‰¹å¾ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\næŸ±çŠ¶å›¾ä¸é¥¼å›¾å®Œå…¨æŒ‡å—\n\n14 min\n\n\næ•°æ®å¯è§†åŒ–\n\næ¯”è¾ƒå›¾\n\nå¯è§†åŒ–\n\nggplot2\n\n\n\nä½¿ç”¨ ggplot2 ç»‘åˆ¶æŸ±çŠ¶å›¾ã€å †å å›¾ã€é¥¼å›¾ã€ç¯å½¢å›¾ã€æ£’æ£’ç³–å›¾ç­‰åˆ†ç±»æ•°æ®å¯è§†åŒ–ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\næŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—å¯è§†åŒ–å®Œå…¨æŒ‡å—\n\n18 min\n\n\næ•°æ®å¯è§†åŒ–\n\nè¶‹åŠ¿å›¾\n\nå¯è§†åŒ–\n\nggplot2\n\n\n\nä»åŸºç¡€æŠ˜çº¿å›¾åˆ°å¤æ‚æ—¶é—´åºåˆ—å±•ç¤ºï¼šè¯¯å·®å¸¦ã€å¤šç»„å¯¹æ¯”ã€æ³¨é‡ŠæŠ€å·§ä¸äº¤äº’å¼å›¾è¡¨å®Œå…¨æ•™ç¨‹ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\né¢ç§¯å›¾ä¸å †å å¯è§†åŒ–å®Œå…¨æŒ‡å—\n\n15 min\n\n\næ•°æ®å¯è§†åŒ–\n\nè¶‹åŠ¿å›¾\n\nå¯è§†åŒ–\n\nggplot2\n\n\n\nä»åŸºç¡€é¢ç§¯å›¾åˆ°æ²³æµå›¾ï¼šå †å é¢ç§¯ã€ç™¾åˆ†æ¯”å †å ã€åˆ†ç»„å¯¹æ¯”ä¸ç¾åŒ–æŠ€å·§å®Œå…¨æ•™ç¨‹ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nå¤æ‚ç»„åˆå›¾ä¸å‘è¡¨çº§å›¾è¡¨å®Œå…¨æŒ‡å—\n\n22 min\n\n\næ•°æ®å¯è§†åŒ–\n\nå›¾å½¢ç»„åˆ\n\nå¯è§†åŒ–\n\nggplot2\n\n\n\nä»å¤šé¢æ¿è®¾è®¡åˆ°åµŒå¥—å›¾å½¢ï¼špatchworkã€cowplot é«˜çº§æŠ€å·§ï¼Œæ‰“é€ é¡¶åˆŠçº§åˆ«å¯è§†åŒ–ä½œå“ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nggplot2 å¯è§†åŒ–å…¥é—¨\n\n4 min\n\n\næ•°æ®å¯è§†åŒ–\n\nå›¾å½¢åŸºç¡€\n\nggplot2\n\nå…¥é—¨\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ndata.table å®Œå…¨æŒ‡å—ï¼šé«˜æ€§èƒ½æ•°æ®å¤„ç†\n\n6 min\n\n\nå®ç”¨æ“ä½œ\n\næ•°æ®å¯¼å…¥å¯¼å‡º\n\nRåŒ…\n\ndata.table\n\n\n\ndata.tableã€tibbleã€data.frame ä¸‰å¤§æ•°æ®ç»“æ„å¯¹æ¯”ï¼Œè¯­æ³•å·®å¼‚ä¸æ€§èƒ½åŸºå‡†æµ‹è¯•ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\ndplyr/tidyr æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—\n\n5 min\n\n\nå®ç”¨æ“ä½œ\n\næ•°æ®å¯¼å…¥å¯¼å‡º\n\ntidyverse\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nPositron IDE å®Œå…¨æŒ‡å—\n\n6 min\n\n\nå®ç”¨æ“ä½œ\n\nå¼€å‘ç¯å¢ƒ\n\nPositron\n\nIDE\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nLogistic å›å½’å®Œå…¨æŒ‡å—\n\n12 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nåŸºç¡€å›å½’\n\nç»Ÿè®¡å»ºæ¨¡\n\nLogisticå›å½’\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nç”Ÿå­˜åˆ†æå®Œå…¨æŒ‡å—\n\n15 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nç”Ÿå­˜åˆ†æ\n\nç»Ÿè®¡å»ºæ¨¡\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nå¤šå…ƒçº¿æ€§å›å½’å®Œå…¨æŒ‡å—\n\n10 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nåŸºç¡€å›å½’\n\nç»Ÿè®¡å»ºæ¨¡\n\nçº¿æ€§å›å½’\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nMeta åˆ†æå®Œå…¨æŒ‡å—\n\n9 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nç»¼è¿°æ–¹æ³•\n\nç»Ÿè®¡å»ºæ¨¡\n\nMetaåˆ†æ\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nä¸­ä»‹æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—\n\n9 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nå› æœæ¨æ–­\n\nç»Ÿè®¡å»ºæ¨¡\n\nä¸­ä»‹æ•ˆåº”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nå¤šæ°´å¹³/æ··åˆæ•ˆåº”æ¨¡å‹å®Œå…¨æŒ‡å—\n\n10 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\né«˜çº§å»ºæ¨¡\n\nç»Ÿè®¡å»ºæ¨¡\n\næ··åˆæ•ˆåº”æ¨¡å‹\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nå¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM) å®Œå…¨æŒ‡å—\n\n9 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\né«˜çº§å»ºæ¨¡\n\nç»Ÿè®¡å»ºæ¨¡\n\nGAM\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nPoisson ä¸è´ŸäºŒé¡¹å›å½’å®Œå…¨æŒ‡å—\n\n11 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nåŸºç¡€å›å½’\n\nç»Ÿè®¡å»ºæ¨¡\n\nè®¡æ•°æ•°æ®\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\né™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ (RCS) å®Œå…¨æŒ‡å—\n\n12 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nç”Ÿå­˜åˆ†æ\n\nç»Ÿè®¡å»ºæ¨¡\n\nRCS\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nåŒé‡å·®åˆ†æ³• (DiD) å®Œå…¨æŒ‡å—\n\n15 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nå› æœæ¨æ–­\n\nDiD\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nå€¾å‘æ€§å¾—åˆ†åŒ¹é… - å› æœæ¨æ–­çš„åˆ©å™¨\n\n9 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nå› æœæ¨æ–­\n\nç»Ÿè®¡æ–¹æ³•\n\nRåŒ…\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nGGally - æ‰©å±• ggplot2 çš„å¯è§†åŒ–åˆ©å™¨\n\n6 min\n\n\næ•°æ®å¯è§†åŒ–\n\nè¿›é˜¶ç¾åŒ–\n\nRåŒ…\n\nå¯è§†åŒ–\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nQuarto vs RMarkdown å¯¹æ¯”\n\n2 min\n\n\nå®ç”¨æ“ä½œ\n\næ–‡æ¡£å†™ä½œ\n\nå…¥é—¨\n\nå·¥å…·\n\n\n\nQuarto å’Œ RMarkdown çš„åŠŸèƒ½å¯¹æ¯”ï¼Œå¸®åŠ©ä½ é€‰æ‹©åˆé€‚çš„æ–‡æ¡£å·¥å…·\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€å«ç”Ÿç»æµå­¦åˆ†æ\n\n17 min\n\n\nç‰¹æ®Šåº”ç”¨\n\nå«ç”Ÿç»æµå­¦\n\næˆæœ¬æ•ˆæœåˆ†æ\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nmlr3 æœºå™¨å­¦ä¹ å…¨æµç¨‹æŒ‡å—\n\n9 min\n\n\næœºå™¨å­¦ä¹ ä¸AI\n\næœºå™¨å­¦ä¹ æ¡†æ¶\n\næœºå™¨å­¦ä¹ \n\nè°ƒå‚\n\n\n\nmlr3åŒ…çš„å®Œæ•´å…¥é—¨æŒ‡å—ï¼Œæ¶µç›–ä»»åŠ¡åˆ›å»ºã€æ¨¡å‹è®­ç»ƒã€é¢„æµ‹ã€è¯„ä¼°åŠè¶…å‚æ•°è°ƒä¼˜ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nggtextï¼šä¸­è‹±æ–‡æ··åˆå­—ä½“çš„å®Œç¾è§£å†³æ–¹æ¡ˆ\n\n8 min\n\n\næ•°æ®å¯è§†åŒ–\n\nè¿›é˜¶ç¾åŒ–\n\nå¯è§†åŒ–\n\nå­—ä½“\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ntidyplotsï¼šç®€æ´ä¼˜é›…çš„æ•°æ®å¯è§†åŒ–\n\n7 min\n\n\næ•°æ®å¯è§†åŒ–\n\nè¿›é˜¶ç¾åŒ–\n\nå¯è§†åŒ–\n\ntidyplots\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nåŒåæ ‡è½´ï¼šå·¦å³ä¸¤ä¸ª Y è½´çš„ç»˜å›¾æŠ€å·§\n\n14 min\n\n\næ•°æ®å¯è§†åŒ–\n\nè¿›é˜¶ç¾åŒ–\n\nå¯è§†åŒ–\n\nggplot2\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nDouble Machine Learningï¼šåŒé‡æœºå™¨å­¦ä¹ åœ¨å› æœæ¨æ–­ä¸­çš„åº”ç”¨\n\n8 min\n\n\nç»Ÿè®¡æ–¹æ³•\n\næœºå™¨å­¦ä¹ \n\nå› æœæ¨æ–­\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\næœ‰åºå›å½’ï¼šæœ‰åºåˆ†ç±»ç»“å±€çš„å»ºæ¨¡ä¸è§£è¯»\n\n3 min\n\n\nç»Ÿè®¡æ–¹æ³•\n\nå›å½’åˆ†æ\n\nä¸´åºŠç ”ç©¶\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nbruceR - ç»Ÿè®¡åˆ†æå·¥å…·\n\n4 min\n\n\nå®ç”¨ R åŒ…\n\nè¡¨æ ¼åˆ¶ä½œ\n\nRåŒ…\n\nç»Ÿè®¡åˆ†æ\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\næ—¶é—´åºåˆ—åˆ†æ\n\n2 min\n\n\nç»Ÿè®¡åˆ†ææ–¹æ³•\n\nç”Ÿå­˜åˆ†æ\n\næ—¶é—´åºåˆ—\n\né¢„æµ‹\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nçƒ­å›¾ç»‘åˆ¶å®Œå…¨æŒ‡å—\n\n9 min\n\n\næ•°æ®å¯è§†åŒ–\n\nä¸“é¢˜å›¾\n\nå¯è§†åŒ–\n\nçƒ­å›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ncowplot: ä¸“ä¸šå›¾å½¢ç»„åˆä¸ç¾åŒ–\n\n7 min\n\n\næ•°æ®å¯è§†åŒ–\n\nå›¾å½¢ç»„åˆ\n\nå¯è§†åŒ–\n\nggplot2æ‰©å±•\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nrmarkdownæ•™ç¨‹-åˆå­¦rè¯­è¨€æ¨è\n\n1 min\n\n\nå®ç”¨æ“ä½œ\n\næ–‡æ¡£å†™ä½œ\n\nRåŒ…\n\næ–‡æ¡£\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ncompareGroups-æè¿°æ€§è¡¨ä¸€å¿«é€Ÿç”Ÿæˆ\n\n2 min\n\n\nå®ç”¨ R åŒ…\n\nè¡¨æ ¼åˆ¶ä½œ\n\nRåŒ…\n\nè¡¨æ ¼\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nscitb-å¿«é€Ÿç”ŸæˆåŸºçº¿è¡¨ä¸€\n\n1 min\n\n\nå®ç”¨ R åŒ…\n\nè¡¨æ ¼åˆ¶ä½œ\n\nRåŒ…\n\nè¡¨æ ¼\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\npurrr: å‡½æ•°å¼ç¼–ç¨‹,å½»åº•æ‘†è„±forå¾ªç¯\n\n2 min\n\n\nå®ç”¨ R åŒ…\n\næ•°æ®å¤„ç†\n\nRåŒ…\n\nç¼–ç¨‹\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€é…è‰²æ•™ç¨‹\n\n29 min\n\n\næ•°æ®å¯è§†åŒ–\n\nå›¾å½¢åŸºç¡€\n\nå¯è§†åŒ–\n\né…è‰²\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\npatchworkï¼šæ‹’ç»psï¼ŒRå†…å®ç°å¤šå›¾æ‹¼æ¥\n\n2 min\n\n\næ•°æ®å¯è§†åŒ–\n\nå›¾å½¢ç»„åˆ\n\nå¯è§†åŒ–\n\npatchwork\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€å›¾ä¾‹ä¿®æ”¹è‡ªå®šä¹‰æ•™ç¨‹\n\n3 min\n\n\næ•°æ®å¯è§†åŒ–\n\nå›¾å½¢åŸºç¡€\n\nå¯è§†åŒ–\n\nå›¾ä¾‹\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€ç»˜åˆ¶æ¡‘åŸºå›¾è¯¦ç»†æ•™ç¨‹\n\n5 min\n\n\næ•°æ®å¯è§†åŒ–\n\nä¸“é¢˜å›¾\n\nå¯è§†åŒ–\n\næ¡‘åŸºå›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€é‡‡æ ·åœ°å›¾ç»˜åˆ¶è¯¦ç»†æ•™ç¨‹\n\n4 min\n\n\næ•°æ®å¯è§†åŒ–\n\nä¸“é¢˜å›¾\n\nå¯è§†åŒ–\n\nåœ°å›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€ç»˜åˆ¶æ£®æ—å›¾è¯¦ç»†æ•™ç¨‹-forestplot\n\n5 min\n\n\næ•°æ®å¯è§†åŒ–\n\nä¸“é¢˜å›¾\n\nå¯è§†åŒ–\n\næ£®æ—å›¾\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nRè¯­è¨€æ‰¹é‡å¯¼å…¥æ•°æ®\n\n1 min\n\n\nå®ç”¨æ“ä½œ\n\næ•°æ®å¯¼å…¥å¯¼å‡º\n\n\n\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "index.html#æ–°æ‰‹å…¥é—¨æŒ‡å—",
    "href": "index.html#æ–°æ‰‹å…¥é—¨æŒ‡å—",
    "title": "R è¯­è¨€å­¦ä¹ ç¬”è®°",
    "section": "",
    "text": "ç¬¬ä¸€æ¬¡æ¥ï¼Ÿè¿™é‡Œæœ‰å®Œæ•´çš„å­¦ä¹ è·¯çº¿å’Œæ•™ç¨‹ç›®å½•ï¼Œå¸®ä½ å¿«é€Ÿæ‰¾åˆ°æƒ³å­¦çš„å†…å®¹ã€‚"
  },
  {
    "objectID": "index.html#æœ€æ–°æ›´æ–°",
    "href": "index.html#æœ€æ–°æ›´æ–°",
    "title": "R è¯­è¨€å­¦ä¹ ç¬”è®°",
    "section": "æœ€æ–°æ›´æ–°",
    "text": "æœ€æ–°æ›´æ–°"
  },
  {
    "objectID": "sections/operation.html",
    "href": "sections/operation.html",
    "title": "å®ç”¨æ“ä½œ",
    "section": "",
    "text": "æ—¥å¸¸ç§‘ç ”ä¸­é‡åˆ°çš„å°æŠ€å·§ã€ç¯å¢ƒé…ç½®å’Œæ•°æ®å¯¼å…¥å¯¼å‡ºæ–¹æ³•ã€‚"
  },
  {
    "objectID": "sections/operation.html#å®ç”¨æ“ä½œæŒ‡å—",
    "href": "sections/operation.html#å®ç”¨æ“ä½œæŒ‡å—",
    "title": "å®ç”¨æ“ä½œ",
    "section": "",
    "text": "æ—¥å¸¸ç§‘ç ”ä¸­é‡åˆ°çš„å°æŠ€å·§ã€ç¯å¢ƒé…ç½®å’Œæ•°æ®å¯¼å…¥å¯¼å‡ºæ–¹æ³•ã€‚"
  },
  {
    "objectID": "sections/visualization.html",
    "href": "sections/visualization.html",
    "title": "æ•°æ®å¯è§†åŒ–",
    "section": "",
    "text": "ä»åŸºç¡€å…¥é—¨ã€å›¾å½¢ç»„åˆåˆ°é«˜çº§ç¾åŒ–ï¼Œå¸®åŠ©ä½ åˆ¶ä½œå‡ºç‰ˆçº§åˆ«çš„æ•°æ®å¯è§†åŒ–ã€‚"
  },
  {
    "objectID": "sections/visualization.html#æ•°æ®å¯è§†åŒ–åº“",
    "href": "sections/visualization.html#æ•°æ®å¯è§†åŒ–åº“",
    "title": "æ•°æ®å¯è§†åŒ–",
    "section": "",
    "text": "ä»åŸºç¡€å…¥é—¨ã€å›¾å½¢ç»„åˆåˆ°é«˜çº§ç¾åŒ–ï¼Œå¸®åŠ©ä½ åˆ¶ä½œå‡ºç‰ˆçº§åˆ«çš„æ•°æ®å¯è§†åŒ–ã€‚"
  },
  {
    "objectID": "index.html#ä»€ä¹ˆæ˜¯çŸ©é˜µå›¾æˆå¯¹å›¾",
    "href": "index.html#ä»€ä¹ˆæ˜¯çŸ©é˜µå›¾æˆå¯¹å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä»€ä¹ˆæ˜¯çŸ©é˜µå›¾/æˆå¯¹å›¾",
    "text": "ä»€ä¹ˆæ˜¯çŸ©é˜µå›¾/æˆå¯¹å›¾\nçŸ©é˜µå›¾ï¼ˆPairwise Plot/Pairs Plotï¼‰å°†å¤šä¸ªå˜é‡ä¸¤ä¸¤ç»„åˆï¼Œåœ¨ä¸€ä¸ªçŸ©é˜µå¸ƒå±€ä¸­åŒæ—¶å±•ç¤ºæ‰€æœ‰å˜é‡ä¹‹é—´çš„å…³ç³»ï¼Œæ˜¯å¤šå˜é‡æ¢ç´¢æ€§åˆ†æçš„åˆ©å™¨ã€‚"
  },
  {
    "objectID": "index.html#råŒ…åŠ è½½",
    "href": "index.html#råŒ…åŠ è½½",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(GGally)"
  },
  {
    "objectID": "index.html#åŸºç¡€æˆå¯¹å›¾",
    "href": "index.html#åŸºç¡€æˆå¯¹å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€æˆå¯¹å›¾",
    "text": "åŸºç¡€æˆå¯¹å›¾\n# ä½¿ç”¨å†…ç½®irisæ•°æ®\nggpairs(iris, columns = 1:4, aes(color = Species, alpha = 0.6)) +\n    scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    theme_minimal() +\n    theme(plot.title = element_text(face = \"bold\"))"
  },
  {
    "objectID": "index.html#è‡ªå®šä¹‰å¯¹è§’çº¿",
    "href": "index.html#è‡ªå®šä¹‰å¯¹è§’çº¿",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "è‡ªå®šä¹‰å¯¹è§’çº¿",
    "text": "è‡ªå®šä¹‰å¯¹è§’çº¿\nggpairs(iris,\n    columns = 1:4, aes(color = Species),\n    diag = list(continuous = wrap(\"densityDiag\", alpha = 0.5)),\n    lower = list(continuous = wrap(\"points\", alpha = 0.5, size = 1)),\n    upper = list(continuous = wrap(\"cor\", size = 3))\n) +\n    scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    theme_bw()"
  },
  {
    "objectID": "index.html#ä½¿ç”¨åŸºç¡€rçš„pairså‡½æ•°",
    "href": "index.html#ä½¿ç”¨åŸºç¡€rçš„pairså‡½æ•°",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä½¿ç”¨åŸºç¡€Rçš„pairså‡½æ•°",
    "text": "ä½¿ç”¨åŸºç¡€Rçš„pairså‡½æ•°\npairs(iris[, 1:4],\n    col = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")[iris$Species],\n    pch = 19,\n    main = \"é¸¢å°¾èŠ±æ•°æ®çŸ©é˜µå›¾\"\n)"
  },
  {
    "objectID": "index.html#æ€»ç»“",
    "href": "index.html#æ€»ç»“",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå‡½æ•°\nç‰¹ç‚¹\n\n\n\n\nGGally::ggpairs()\næœ€çµæ´»ï¼Œggplot2é£æ ¼\n\n\npairs()\nåŸºç¡€Rï¼Œå¿«é€Ÿç®€å•\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\nç›¸å…³å›¾çŸ©é˜µ\næ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿\n\n{r setup, include=FALSE} knitr::opts_chunk$set(     echo = TRUE, warning = FALSE, message = FALSE,     fig.width = 10, fig.height = 5, fig.retina = 2, out.width = \"100%\", dpi = 150 )"
  },
  {
    "objectID": "index.html#ä»€ä¹ˆæ˜¯è‡ªç›¸å…³å›¾",
    "href": "index.html#ä»€ä¹ˆæ˜¯è‡ªç›¸å…³å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä»€ä¹ˆæ˜¯è‡ªç›¸å…³å›¾",
    "text": "ä»€ä¹ˆæ˜¯è‡ªç›¸å…³å›¾\nè‡ªç›¸å…³å›¾ï¼ˆACF/PACF Plotï¼‰ç”¨äºåˆ†ææ—¶é—´åºåˆ—æ•°æ®çš„è‡ªç›¸å…³æ€§ï¼Œæ˜¯æ—¶é—´åºåˆ—å»ºæ¨¡å‰çš„å¿…è¦è¯Šæ–­å·¥å…·ã€‚\n\nACF: è‡ªç›¸å…³å‡½æ•°ï¼Œè¡¡é‡åºåˆ—ä¸å…¶æ»åå€¼çš„ç›¸å…³æ€§\nPACF: åè‡ªç›¸å…³å‡½æ•°ï¼Œæ’é™¤ä¸­é—´æ»åé¡¹çš„å½±å“"
  },
  {
    "objectID": "index.html#råŒ…åŠ è½½-1",
    "href": "index.html#råŒ…åŠ è½½-1",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(forecast)"
  },
  {
    "objectID": "index.html#å‡†å¤‡æ—¶åºæ•°æ®",
    "href": "index.html#å‡†å¤‡æ—¶åºæ•°æ®",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "å‡†å¤‡æ—¶åºæ•°æ®",
    "text": "å‡†å¤‡æ—¶åºæ•°æ®\n# ä½¿ç”¨å†…ç½®AirPassengersæ•°æ®\ndata(AirPassengers)\nts_data &lt;- as.numeric(AirPassengers)"
  },
  {
    "objectID": "index.html#åŸºç¡€acfå›¾",
    "href": "index.html#åŸºç¡€acfå›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€ACFå›¾",
    "text": "åŸºç¡€ACFå›¾\nacf(ts_data, main = \"è‡ªç›¸å…³å‡½æ•°å›¾ (ACF)\", col = \"#4f46e5\", lwd = 2)"
  },
  {
    "objectID": "index.html#åŸºç¡€pacfå›¾",
    "href": "index.html#åŸºç¡€pacfå›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€PACFå›¾",
    "text": "åŸºç¡€PACFå›¾\npacf(ts_data, main = \"åè‡ªç›¸å…³å‡½æ•°å›¾ (PACF)\", col = \"#10b981\", lwd = 2)"
  },
  {
    "objectID": "index.html#ä½¿ç”¨ggplot2ç¾åŒ–",
    "href": "index.html#ä½¿ç”¨ggplot2ç¾åŒ–",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä½¿ç”¨ggplot2ç¾åŒ–",
    "text": "ä½¿ç”¨ggplot2ç¾åŒ–\n```{r fig.height=4} # æå–ACFæ•°æ® acf_data &lt;- acf(ts_data, plot = FALSE) acf_df &lt;- data.frame( lag = acf_data\\(lag[-1],\n    acf = acf_data\\)acf[-1] )"
  },
  {
    "objectID": "index.html#æ€»ç»“-1",
    "href": "index.html#æ€»ç»“-1",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå›¾è¡¨\nç”¨é€”\nARIMAåˆ¤æ–­\n\n\n\n\nACF\nè¯†åˆ«MAé˜¶æ•°\næˆªå°¾â†’MA(q)\n\n\nPACF\nè¯†åˆ«ARé˜¶æ•°\næˆªå°¾â†’AR(p)\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\næŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—\næ—¶åºå³°è°·æ ‡è®°å›¾\n\n{r setup, include=FALSE} knitr::opts_chunk$set(     echo = TRUE, warning = FALSE, message = FALSE,     fig.width = 8, fig.height = 6, fig.retina = 2, out.width = \"100%\", dpi = 150 )"
  },
  {
    "objectID": "index.html#ä»€ä¹ˆæ˜¯è¯äº‘å›¾",
    "href": "index.html#ä»€ä¹ˆæ˜¯è¯äº‘å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä»€ä¹ˆæ˜¯è¯äº‘å›¾",
    "text": "ä»€ä¹ˆæ˜¯è¯äº‘å›¾\nè¯äº‘å›¾ï¼ˆWord Cloudï¼‰ç”¨è¯è¯­çš„å¤§å°å’Œé¢œè‰²è¡¨ç¤ºè¯é¢‘æˆ–é‡è¦æ€§ï¼Œæ˜¯æ–‡æœ¬æ•°æ®å¯è§†åŒ–çš„ç»å…¸æ–¹å¼ã€‚"
  },
  {
    "objectID": "index.html#råŒ…åŠ è½½-2",
    "href": "index.html#råŒ…åŠ è½½-2",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\nlibrary(wordcloud)\nlibrary(RColorBrewer)\nlibrary(dplyr)"
  },
  {
    "objectID": "index.html#å‡†å¤‡æ•°æ®",
    "href": "index.html#å‡†å¤‡æ•°æ®",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "å‡†å¤‡æ•°æ®",
    "text": "å‡†å¤‡æ•°æ®\n# åˆ›å»ºç¤ºä¾‹è¯é¢‘æ•°æ®\nwords_data &lt;- data.frame(\n    word = c(\n        \"æ•°æ®åˆ†æ\", \"å¯è§†åŒ–\", \"æœºå™¨å­¦ä¹ \", \"Rè¯­è¨€\", \"ç»Ÿè®¡\", \"å›å½’\",\n        \"åˆ†ç±»\", \"èšç±»\", \"é¢„æµ‹\", \"æ¨¡å‹\", \"ç®—æ³•\", \"æ·±åº¦å­¦ä¹ \",\n        \"Python\", \"æ•°æ®æŒ–æ˜\", \"å¤§æ•°æ®\", \"äººå·¥æ™ºèƒ½\", \"ç¥ç»ç½‘ç»œ\",\n        \"ç‰¹å¾å·¥ç¨‹\", \"äº¤å‰éªŒè¯\", \"éšæœºæ£®æ—\"\n    ),\n    freq = c(\n        100, 85, 70, 95, 60, 50, 45, 40, 55, 75, 35, 30,\n        80, 65, 55, 45, 25, 35, 30, 40\n    )\n)"
  },
  {
    "objectID": "index.html#åŸºç¡€è¯äº‘",
    "href": "index.html#åŸºç¡€è¯äº‘",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€è¯äº‘",
    "text": "åŸºç¡€è¯äº‘\nset.seed(42)\nwordcloud(\n    words = words_data$word,\n    freq = words_data$freq,\n    min.freq = 20,\n    max.words = 100,\n    random.order = FALSE,\n    colors = brewer.pal(8, \"Dark2\")\n)"
  },
  {
    "objectID": "index.html#è‡ªå®šä¹‰é¢œè‰²",
    "href": "index.html#è‡ªå®šä¹‰é¢œè‰²",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "è‡ªå®šä¹‰é¢œè‰²",
    "text": "è‡ªå®šä¹‰é¢œè‰²\ncustom_colors &lt;- colorRampPalette(c(\"#4f46e5\", \"#10b981\", \"#f59e0b\"))(10)\n\nset.seed(42)\nwordcloud(\n    words = words_data$word,\n    freq = words_data$freq,\n    min.freq = 20,\n    scale = c(3, 0.5),\n    random.order = FALSE,\n    colors = custom_colors\n)\ntitle(\"æ•°æ®ç§‘å­¦å…³é”®è¯\", col.main = \"#1f2937\", font.main = 2)"
  },
  {
    "objectID": "index.html#ä½¿ç”¨wordcloud2äº¤äº’å¼",
    "href": "index.html#ä½¿ç”¨wordcloud2äº¤äº’å¼",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä½¿ç”¨wordcloud2ï¼ˆäº¤äº’å¼ï¼‰",
    "text": "ä½¿ç”¨wordcloud2ï¼ˆäº¤äº’å¼ï¼‰\n```{r eval=FALSE} # install.packages(â€œwordcloud2â€) library(wordcloud2)\nwordcloud2(words_data, size = 0.8, color = â€œrandom-lightâ€, backgroundColor = â€œ#1e1b4bâ€ )\n\n---\n\n## æ€»ç»“\n\n| åŒ… | ç‰¹ç‚¹ |\n|------|------|\n| `wordcloud` | é™æ€ï¼Œç®€å•å¿«é€Ÿ |\n| `wordcloud2` | äº¤äº’å¼ï¼Œæ”¯æŒå½¢çŠ¶ |\n\n### ç›¸å…³æ•™ç¨‹\n\n- [æŸ±çŠ¶å›¾ä¸é¥¼å›¾](2028-bindbarchart.html)\n\n---\ntitle: \"Rè¯­è¨€ç½‘ç»œå…³ç³»å›¾ç»˜åˆ¶\"\ndate: \"2026-01-15\"\ncategories: [å¯è§†åŒ–æ•™ç¨‹, ç»Ÿè®¡å›¾è¡¨, ç½‘ç»œå›¾]\nimage: \"images/bindnetwork_cover.svg\"\n---\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(\n    echo = TRUE, warning = FALSE, message = FALSE,\n    fig.width = 8, fig.height = 8, fig.retina = 2, out.width = \"100%\", dpi = 150\n)"
  },
  {
    "objectID": "index.html#ä»€ä¹ˆæ˜¯ç½‘ç»œå…³ç³»å›¾",
    "href": "index.html#ä»€ä¹ˆæ˜¯ç½‘ç»œå…³ç³»å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä»€ä¹ˆæ˜¯ç½‘ç»œå…³ç³»å›¾",
    "text": "ä»€ä¹ˆæ˜¯ç½‘ç»œå…³ç³»å›¾\nç½‘ç»œå…³ç³»å›¾ï¼ˆNetwork Graphï¼‰ç”¨èŠ‚ç‚¹å’Œè¾¹è¡¨ç¤ºå¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼Œé€‚åˆå±•ç¤ºç¤¾äº¤ç½‘ç»œã€å¼•ç”¨å…³ç³»ã€çŸ¥è¯†å›¾è°±ç­‰ã€‚"
  },
  {
    "objectID": "index.html#råŒ…åŠ è½½-3",
    "href": "index.html#råŒ…åŠ è½½-3",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\nlibrary(igraph)\nlibrary(ggraph)\nlibrary(tidygraph)"
  },
  {
    "objectID": "index.html#åˆ›å»ºç½‘ç»œæ•°æ®",
    "href": "index.html#åˆ›å»ºç½‘ç»œæ•°æ®",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "åˆ›å»ºç½‘ç»œæ•°æ®",
    "text": "åˆ›å»ºç½‘ç»œæ•°æ®\n# åˆ›å»ºè¾¹æ•°æ®\nedges &lt;- data.frame(\n    from = c(\"A\", \"A\", \"B\", \"B\", \"C\", \"D\", \"E\", \"E\", \"F\"),\n    to = c(\"B\", \"C\", \"D\", \"E\", \"D\", \"F\", \"F\", \"G\", \"G\")\n)\n\n# åˆ›å»ºå›¾å¯¹è±¡\ngraph &lt;- as_tbl_graph(edges, directed = FALSE)"
  },
  {
    "objectID": "index.html#åŸºç¡€ç½‘ç»œå›¾",
    "href": "index.html#åŸºç¡€ç½‘ç»œå›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€ç½‘ç»œå›¾",
    "text": "åŸºç¡€ç½‘ç»œå›¾\nggraph(graph, layout = \"fr\") +\n    geom_edge_link(color = \"#94a3b8\", width = 1) +\n    geom_node_point(size = 8, color = \"#4f46e5\") +\n    geom_node_text(aes(label = name), color = \"white\", fontface = \"bold\") +\n    theme_void() +\n    labs(title = \"åŸºç¡€ç½‘ç»œå…³ç³»å›¾\") +\n    theme(plot.title = element_text(face = \"bold\", hjust = 0.5))"
  },
  {
    "objectID": "index.html#åœ†å½¢å¸ƒå±€",
    "href": "index.html#åœ†å½¢å¸ƒå±€",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "åœ†å½¢å¸ƒå±€",
    "text": "åœ†å½¢å¸ƒå±€\nggraph(graph, layout = \"circle\") +\n    geom_edge_link(color = \"#94a3b8\", width = 1.5) +\n    geom_node_point(size = 10, color = \"#10b981\") +\n    geom_node_text(aes(label = name), color = \"white\", fontface = \"bold\") +\n    theme_void() +\n    labs(title = \"åœ†å½¢å¸ƒå±€ç½‘ç»œå›¾\")"
  },
  {
    "objectID": "index.html#èŠ‚ç‚¹ç€è‰²æŒ‰åº¦",
    "href": "index.html#èŠ‚ç‚¹ç€è‰²æŒ‰åº¦",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "èŠ‚ç‚¹ç€è‰²æŒ‰åº¦",
    "text": "èŠ‚ç‚¹ç€è‰²æŒ‰åº¦\ngraph &lt;- graph %&gt;%\n    mutate(degree = centrality_degree())\n\nggraph(graph, layout = \"stress\") +\n    geom_edge_link(color = \"#e2e8f0\", width = 1) +\n    geom_node_point(aes(size = degree, color = degree)) +\n    geom_node_text(aes(label = name), color = \"white\", fontface = \"bold\", size = 4) +\n    scale_color_gradient(low = \"#a5b4fc\", high = \"#4f46e5\") +\n    scale_size_continuous(range = c(8, 15)) +\n    theme_void() +\n    labs(title = \"æŒ‰èŠ‚ç‚¹åº¦æ•°ç€è‰²\") +\n    theme(legend.position = \"none\")"
  },
  {
    "objectID": "index.html#æ€»ç»“-2",
    "href": "index.html#æ€»ç»“-2",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå¸ƒå±€\nå‡½æ•°\n\n\n\n\nåŠ›å¯¼å‘\nlayout = \"fr\"\n\n\nåœ†å½¢\nlayout = \"circle\"\n\n\næ ‘å½¢\nlayout = \"tree\"\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\næ¡‘åŸºå›¾\n\n{r setup, include=FALSE} knitr::opts_chunk$set(     echo = TRUE, warning = FALSE, message = FALSE,     fig.width = 10, fig.height = 5, fig.retina = 2, out.width = \"100%\", dpi = 150 )"
  },
  {
    "objectID": "index.html#ä»€ä¹ˆæ˜¯ç”˜ç‰¹å›¾",
    "href": "index.html#ä»€ä¹ˆæ˜¯ç”˜ç‰¹å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä»€ä¹ˆæ˜¯ç”˜ç‰¹å›¾",
    "text": "ä»€ä¹ˆæ˜¯ç”˜ç‰¹å›¾\nç”˜ç‰¹å›¾ï¼ˆGantt Chartï¼‰ç”¨æ¨ªå‘æ¡å½¢å±•ç¤ºé¡¹ç›®ä»»åŠ¡çš„æ—¶é—´å®‰æ’ï¼Œæ˜¯é¡¹ç›®ç®¡ç†çš„ç»å…¸å¯è§†åŒ–å·¥å…·ã€‚"
  },
  {
    "objectID": "index.html#råŒ…åŠ è½½-4",
    "href": "index.html#råŒ…åŠ è½½-4",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(lubridate)"
  },
  {
    "objectID": "index.html#å‡†å¤‡é¡¹ç›®æ•°æ®",
    "href": "index.html#å‡†å¤‡é¡¹ç›®æ•°æ®",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "å‡†å¤‡é¡¹ç›®æ•°æ®",
    "text": "å‡†å¤‡é¡¹ç›®æ•°æ®\n# é¡¹ç›®ä»»åŠ¡æ•°æ®\ntasks &lt;- data.frame(\n    task = c(\"éœ€æ±‚åˆ†æ\", \"ç³»ç»Ÿè®¾è®¡\", \"ç¼–ç å¼€å‘\", \"æµ‹è¯•\", \"éƒ¨ç½²ä¸Šçº¿\"),\n    start = as.Date(c(\"2024-01-01\", \"2024-01-15\", \"2024-02-01\", \"2024-03-01\", \"2024-03-20\")),\n    end = as.Date(c(\"2024-01-14\", \"2024-01-31\", \"2024-02-28\", \"2024-03-19\", \"2024-03-31\")),\n    status = c(\"å·²å®Œæˆ\", \"å·²å®Œæˆ\", \"è¿›è¡Œä¸­\", \"å¾…å¼€å§‹\", \"å¾…å¼€å§‹\")\n)\n\n# æŒ‰å¼€å§‹æ—¶é—´æ’åº\ntasks &lt;- tasks %&gt;%\n    mutate(task = factor(task, levels = rev(task)))"
  },
  {
    "objectID": "index.html#åŸºç¡€ç”˜ç‰¹å›¾",
    "href": "index.html#åŸºç¡€ç”˜ç‰¹å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€ç”˜ç‰¹å›¾",
    "text": "åŸºç¡€ç”˜ç‰¹å›¾\nggplot(tasks, aes(y = task)) +\n    geom_segment(aes(x = start, xend = end, yend = task, color = status),\n        linewidth = 10, lineend = \"round\"\n    ) +\n    scale_color_manual(values = c(\"å·²å®Œæˆ\" = \"#10b981\", \"è¿›è¡Œä¸­\" = \"#4f46e5\", \"å¾…å¼€å§‹\" = \"#94a3b8\")) +\n    scale_x_date(date_labels = \"%mæœˆ%dæ—¥\", date_breaks = \"2 weeks\") +\n    labs(\n        title = \"é¡¹ç›®è¿›åº¦ç”˜ç‰¹å›¾\",\n        x = \"æ—¥æœŸ\",\n        y = NULL,\n        color = \"çŠ¶æ€\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"top\",\n        panel.grid.major.y = element_blank()\n    )"
  },
  {
    "objectID": "index.html#æ·»åŠ ä»Šæ—¥æ ‡è®°",
    "href": "index.html#æ·»åŠ ä»Šæ—¥æ ‡è®°",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "æ·»åŠ ä»Šæ—¥æ ‡è®°",
    "text": "æ·»åŠ ä»Šæ—¥æ ‡è®°\ntoday &lt;- as.Date(\"2024-02-15\")\n\nggplot(tasks, aes(y = task)) +\n    geom_segment(aes(x = start, xend = end, yend = task, color = status),\n        linewidth = 10, lineend = \"round\"\n    ) +\n    geom_vline(xintercept = today, linetype = \"dashed\", color = \"#ef4444\", linewidth = 1) +\n    annotate(\"text\", x = today, y = 5.3, label = \"ä»Šå¤©\", color = \"#ef4444\", fontface = \"bold\") +\n    scale_color_manual(values = c(\"å·²å®Œæˆ\" = \"#10b981\", \"è¿›è¡Œä¸­\" = \"#4f46e5\", \"å¾…å¼€å§‹\" = \"#94a3b8\")) +\n    scale_x_date(date_labels = \"%m/%d\") +\n    labs(title = \"å¸¦ä»Šæ—¥æ ‡è®°çš„ç”˜ç‰¹å›¾\", x = NULL, y = NULL, color = NULL) +\n    theme_minimal() +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"top\",\n        panel.grid.major.y = element_blank()\n    )"
  },
  {
    "objectID": "index.html#æ€»ç»“-3",
    "href": "index.html#æ€»ç»“-3",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå…ƒç´ \nè¯´æ˜\n\n\n\n\næ¨ªæ¡\nä»»åŠ¡æ—¶é—´è·¨åº¦\n\n\né¢œè‰²\nä»»åŠ¡çŠ¶æ€\n\n\nä»Šæ—¥çº¿\nå½“å‰è¿›åº¦å‚è€ƒ\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\næŸ±çŠ¶å›¾ä¸é¥¼å›¾\n\n{r setup, include=FALSE} knitr::opts_chunk$set(     echo = TRUE, warning = FALSE, message = FALSE,     fig.width = 8, fig.height = 6, fig.retina = 2, out.width = \"100%\", dpi = 150 )"
  },
  {
    "objectID": "index.html#ä»€ä¹ˆæ˜¯æ¼æ–—å›¾",
    "href": "index.html#ä»€ä¹ˆæ˜¯æ¼æ–—å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä»€ä¹ˆæ˜¯æ¼æ–—å›¾",
    "text": "ä»€ä¹ˆæ˜¯æ¼æ–—å›¾\næ¼æ–—å›¾ï¼ˆFunnel Chartï¼‰ç”¨é€çº§é€’å‡çš„æ¡å½¢å±•ç¤ºè½¬åŒ–è¿‡ç¨‹å„é˜¶æ®µçš„æµå¤±æƒ…å†µï¼Œæ˜¯è¥é”€å’Œé”€å”®åˆ†æçš„å¸¸ç”¨å›¾è¡¨ã€‚"
  },
  {
    "objectID": "index.html#råŒ…åŠ è½½-5",
    "href": "index.html#råŒ…åŠ è½½-5",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\nlibrary(ggplot2)\nlibrary(dplyr)"
  },
  {
    "objectID": "index.html#å‡†å¤‡æ•°æ®-1",
    "href": "index.html#å‡†å¤‡æ•°æ®-1",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "å‡†å¤‡æ•°æ®",
    "text": "å‡†å¤‡æ•°æ®\nfunnel_data &lt;- data.frame(\n    stage = c(\"è®¿é—®ç½‘ç«™\", \"æµè§ˆå•†å“\", \"åŠ å…¥è´­ç‰©è½¦\", \"å¼€å§‹ç»“è´¦\", \"å®Œæˆæ”¯ä»˜\"),\n    value = c(10000, 6000, 3000, 1500, 800)\n) %&gt;%\n    mutate(\n        stage = factor(stage, levels = rev(stage)),\n        pct = value / max(value) * 100,\n        label = paste0(value, \" (\", round(pct), \"%)\")\n    )"
  },
  {
    "objectID": "index.html#åŸºç¡€æ¼æ–—å›¾",
    "href": "index.html#åŸºç¡€æ¼æ–—å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€æ¼æ–—å›¾",
    "text": "åŸºç¡€æ¼æ–—å›¾\nggplot(funnel_data, aes(x = value, y = stage)) +\n    geom_col(fill = \"#4f46e5\", width = 0.7) +\n    geom_text(aes(label = label), hjust = -0.1, fontface = \"bold\", size = 3.5) +\n    scale_x_continuous(expand = expansion(mult = c(0, 0.3))) +\n    labs(\n        title = \"ç”µå•†è½¬åŒ–æ¼æ–—\",\n        x = \"ç”¨æˆ·æ•°\",\n        y = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        panel.grid.major.y = element_blank()\n    )"
  },
  {
    "objectID": "index.html#æ¸å˜è‰²æ¼æ–—",
    "href": "index.html#æ¸å˜è‰²æ¼æ–—",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "æ¸å˜è‰²æ¼æ–—",
    "text": "æ¸å˜è‰²æ¼æ–—\nggplot(funnel_data, aes(x = value, y = stage, fill = value)) +\n    geom_col(width = 0.7) +\n    geom_text(aes(label = label), hjust = -0.1, fontface = \"bold\", size = 3.5) +\n    scale_fill_gradient(low = \"#a5b4fc\", high = \"#4f46e5\") +\n    scale_x_continuous(expand = expansion(mult = c(0, 0.3))) +\n    labs(title = \"æ¸å˜è‰²æ¼æ–—å›¾\", x = NULL, y = NULL) +\n    theme_minimal() +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        panel.grid = element_blank(),\n        legend.position = \"none\"\n    )"
  },
  {
    "objectID": "index.html#å¯¹ç§°æ¼æ–—å›¾",
    "href": "index.html#å¯¹ç§°æ¼æ–—å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "å¯¹ç§°æ¼æ–—å›¾",
    "text": "å¯¹ç§°æ¼æ–—å›¾\nfunnel_data &lt;- funnel_data %&gt;%\n    mutate(\n        x_left = -value / 2,\n        x_right = value / 2\n    )\n\nggplot(funnel_data) +\n    geom_rect(aes(\n        xmin = x_left, xmax = x_right,\n        ymin = as.numeric(stage) - 0.35,\n        ymax = as.numeric(stage) + 0.35,\n        fill = value\n    )) +\n    geom_text(aes(x = 0, y = stage, label = label),\n        color = \"white\", fontface = \"bold\", size = 4\n    ) +\n    scale_fill_gradient(low = \"#a5b4fc\", high = \"#4f46e5\") +\n    scale_y_discrete(expand = c(0.1, 0.1)) +\n    labs(title = \"å¯¹ç§°æ¼æ–—å›¾\", x = NULL, y = NULL) +\n    theme_void() +\n    theme(\n        plot.title = element_text(face = \"bold\", hjust = 0.5),\n        legend.position = \"none\",\n        axis.text.y = element_text(size = 10, hjust = 1)\n    )"
  },
  {
    "objectID": "index.html#æ€»ç»“-4",
    "href": "index.html#æ€»ç»“-4",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\næ ·å¼\nç‰¹ç‚¹\n\n\n\n\næ°´å¹³æ¼æ–—\nç®€å•æ¸…æ™°\n\n\nå¯¹ç§°æ¼æ–—\nè§†è§‰å¹³è¡¡\n\n\næ¸å˜è‰²\nçªå‡ºå·®å¼‚\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\næŸ±çŠ¶å›¾ä¸é¥¼å›¾\näººå£é‡‘å­—å¡”å›¾\n\n{r setup, include=FALSE} knitr::opts_chunk$set(     echo = TRUE, warning = FALSE, message = FALSE,     fig.width = 10, fig.height = 6, fig.retina = 2, out.width = \"100%\", dpi = 150 )"
  },
  {
    "objectID": "index.html#ä»€ä¹ˆæ˜¯å¹³è¡Œåæ ‡å›¾",
    "href": "index.html#ä»€ä¹ˆæ˜¯å¹³è¡Œåæ ‡å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä»€ä¹ˆæ˜¯å¹³è¡Œåæ ‡å›¾",
    "text": "ä»€ä¹ˆæ˜¯å¹³è¡Œåæ ‡å›¾\nå¹³è¡Œåæ ‡å›¾ï¼ˆParallel Coordinates Plotï¼‰ç”¨å¹³è¡Œçš„å‚ç›´è½´è¡¨ç¤ºå¤šä¸ªå˜é‡ï¼Œæ¯æ¡æŠ˜çº¿è¿æ¥åŒä¸€è§‚æµ‹åœ¨å„å˜é‡ä¸Šçš„å€¼ï¼Œé€‚åˆé«˜ç»´æ•°æ®å¯è§†åŒ–ã€‚"
  },
  {
    "objectID": "index.html#råŒ…åŠ è½½-6",
    "href": "index.html#råŒ…åŠ è½½-6",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(GGally)"
  },
  {
    "objectID": "index.html#åŸºç¡€å¹³è¡Œåæ ‡å›¾",
    "href": "index.html#åŸºç¡€å¹³è¡Œåæ ‡å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€å¹³è¡Œåæ ‡å›¾",
    "text": "åŸºç¡€å¹³è¡Œåæ ‡å›¾\n# ä½¿ç”¨irisæ•°æ®\nggparcoord(iris, columns = 1:4, groupColumn = 5, scale = \"std\") +\n    scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    labs(\n        title = \"é¸¢å°¾èŠ±å¤šç»´ç‰¹å¾å¯¹æ¯”\",\n        x = \"å˜é‡\",\n        y = \"æ ‡å‡†åŒ–å€¼\",\n        color = \"ç‰©ç§\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"top\"\n    )"
  },
  {
    "objectID": "index.html#å¸¦é€æ˜åº¦å’Œæ ·æ¡æ›²çº¿",
    "href": "index.html#å¸¦é€æ˜åº¦å’Œæ ·æ¡æ›²çº¿",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "å¸¦é€æ˜åº¦å’Œæ ·æ¡æ›²çº¿",
    "text": "å¸¦é€æ˜åº¦å’Œæ ·æ¡æ›²çº¿\nggparcoord(iris,\n    columns = 1:4, groupColumn = 5,\n    scale = \"uniminmax\", alphaLines = 0.5, splineFactor = 10\n) +\n    scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    labs(title = \"æ ·æ¡æ›²çº¿å¹³è¡Œåæ ‡å›¾\", x = NULL, y = NULL, color = NULL) +\n    theme_minimal() +\n    theme(plot.title = element_text(face = \"bold\"), legend.position = \"top\")"
  },
  {
    "objectID": "index.html#é«˜äº®ç‰¹å®šç±»åˆ«",
    "href": "index.html#é«˜äº®ç‰¹å®šç±»åˆ«",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "é«˜äº®ç‰¹å®šç±»åˆ«",
    "text": "é«˜äº®ç‰¹å®šç±»åˆ«\niris_highlight &lt;- iris %&gt;%\n    mutate(highlight = ifelse(Species == \"setosa\", \"Setosa\", \"å…¶ä»–\"))\n\nggparcoord(iris_highlight,\n    columns = 1:4, groupColumn = \"highlight\",\n    scale = \"std\", alphaLines = 0.6\n) +\n    scale_color_manual(values = c(\"Setosa\" = \"#4f46e5\", \"å…¶ä»–\" = \"#94a3b8\")) +\n    labs(title = \"é«˜äº®Setosaç‰©ç§\") +\n    theme_minimal() +\n    theme(plot.title = element_text(face = \"bold\"))"
  },
  {
    "objectID": "index.html#æ€»ç»“-5",
    "href": "index.html#æ€»ç»“-5",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå‚æ•°\nè¯´æ˜\n\n\n\n\nscale = \"std\"\næ ‡å‡†åŒ–\n\n\nscale = \"uniminmax\"\n0-1ç¼©æ”¾\n\n\nsplineFactor\næ›²çº¿å¹³æ»‘åº¦\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\né›·è¾¾å›¾\nçŸ©é˜µå›¾ä¸æˆå¯¹å›¾\n\n{r setup, include=FALSE} knitr::opts_chunk$set(     echo = TRUE, warning = FALSE, message = FALSE,     fig.width = 9, fig.height = 6, fig.retina = 2, out.width = \"100%\", dpi = 150 )"
  },
  {
    "objectID": "index.html#ä»€ä¹ˆæ˜¯é©¬èµ›å…‹å›¾",
    "href": "index.html#ä»€ä¹ˆæ˜¯é©¬èµ›å…‹å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä»€ä¹ˆæ˜¯é©¬èµ›å…‹å›¾",
    "text": "ä»€ä¹ˆæ˜¯é©¬èµ›å…‹å›¾\né©¬èµ›å…‹å›¾ï¼ˆMosaic Plotï¼‰ç”¨çŸ©å½¢é¢ç§¯è¡¨ç¤ºåˆ†ç±»å˜é‡çš„äº¤å‰é¢‘æ•°ï¼Œæ˜¯æ¢ç´¢å¤šä¸ªåˆ†ç±»å˜é‡å…³ç³»çš„æœ‰åŠ›å·¥å…·ã€‚"
  },
  {
    "objectID": "index.html#råŒ…åŠ è½½-7",
    "href": "index.html#råŒ…åŠ è½½-7",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\nlibrary(ggplot2)\nlibrary(dplyr)"
  },
  {
    "objectID": "index.html#åŸºç¡€é©¬èµ›å…‹å›¾",
    "href": "index.html#åŸºç¡€é©¬èµ›å…‹å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€é©¬èµ›å…‹å›¾",
    "text": "åŸºç¡€é©¬èµ›å…‹å›¾\n# ä½¿ç”¨Titanicæ•°æ®\ndata(Titanic)\ntitanic_df &lt;- as.data.frame(Titanic)\n\nggplot(titanic_df) +\n    geom_mosaic(aes(x = product(Class, Survived), fill = Survived, weight = Freq)) +\n    scale_fill_manual(values = c(\"#ef4444\", \"#10b981\")) +\n    labs(\n        title = \"æ³°å¦å°¼å…‹å·ç”Ÿè¿˜ç‡ - æŒ‰èˆ±ä½\",\n        x = \"èˆ±ä½ç­‰çº§\",\n        y = \"ç”Ÿè¿˜æƒ…å†µ\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(plot.title = element_text(face = \"bold\"))"
  },
  {
    "objectID": "index.html#ä¸‰å˜é‡é©¬èµ›å…‹å›¾",
    "href": "index.html#ä¸‰å˜é‡é©¬èµ›å…‹å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä¸‰å˜é‡é©¬èµ›å…‹å›¾",
    "text": "ä¸‰å˜é‡é©¬èµ›å…‹å›¾\nggplot(titanic_df) +\n    geom_mosaic(aes(x = product(Class, Sex), fill = Survived, weight = Freq)) +\n    scale_fill_manual(values = c(\"#ef4444\", \"#10b981\")) +\n    labs(title = \"ç”Ÿè¿˜ç‡ - æŒ‰èˆ±ä½å’Œæ€§åˆ«\", x = \"èˆ±ä½ / æ€§åˆ«\", y = NULL) +\n    theme_minimal() +\n    theme(plot.title = element_text(face = \"bold\"))"
  },
  {
    "objectID": "index.html#ä½¿ç”¨åŸºç¡€rçš„mosaicplot",
    "href": "index.html#ä½¿ç”¨åŸºç¡€rçš„mosaicplot",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä½¿ç”¨åŸºç¡€Rçš„mosaicplot",
    "text": "ä½¿ç”¨åŸºç¡€Rçš„mosaicplot\nmosaicplot(Titanic,\n    main = \"æ³°å¦å°¼å…‹å·æ•°æ®é©¬èµ›å…‹å›¾\",\n    color = c(\"#ef4444\", \"#10b981\"),\n    shade = FALSE, border = \"white\"\n)"
  },
  {
    "objectID": "index.html#æ€»ç»“-6",
    "href": "index.html#æ€»ç»“-6",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå‡½æ•°\nç‰¹ç‚¹\n\n\n\n\nmosaicplot()\nåŸºç¡€Rï¼Œå¿«é€Ÿç®€å•\n\n\nggplot2 æ‰‹åŠ¨\næ›´çµæ´»ç¾è§‚\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\nåå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾\nè®¡æ•°å›¾ä¸åˆ†ç±»å›¾\n\n{r setup, include=FALSE} knitr::opts_chunk$set(     echo = TRUE, warning = FALSE, message = FALSE,     fig.width = 10, fig.height = 5, fig.retina = 2, out.width = \"100%\", dpi = 150 )"
  },
  {
    "objectID": "index.html#ä»€ä¹ˆæ˜¯ç½®ä¿¡åŒºé—´å›¾",
    "href": "index.html#ä»€ä¹ˆæ˜¯ç½®ä¿¡åŒºé—´å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä»€ä¹ˆæ˜¯ç½®ä¿¡åŒºé—´å›¾",
    "text": "ä»€ä¹ˆæ˜¯ç½®ä¿¡åŒºé—´å›¾\nç½®ä¿¡åŒºé—´å›¾ï¼ˆRibbon/Error Bandï¼‰åœ¨æŠ˜çº¿å›¾åŸºç¡€ä¸Šæ·»åŠ ç½®ä¿¡åŒºé—´å¸¦ï¼Œå±•ç¤ºä¼°è®¡å€¼çš„ä¸ç¡®å®šæ€§èŒƒå›´ã€‚"
  },
  {
    "objectID": "index.html#råŒ…åŠ è½½-8",
    "href": "index.html#råŒ…åŠ è½½-8",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\nlibrary(ggplot2)\nlibrary(dplyr)"
  },
  {
    "objectID": "index.html#å‡†å¤‡æ•°æ®-2",
    "href": "index.html#å‡†å¤‡æ•°æ®-2",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "å‡†å¤‡æ•°æ®",
    "text": "å‡†å¤‡æ•°æ®\nset.seed(42)\ntime_series &lt;- data.frame(\n    time = 1:50,\n    value = 100 + cumsum(rnorm(50, 0.5, 2)),\n    se = abs(rnorm(50, 3, 1))\n) %&gt;%\n    mutate(\n        lower = value - 1.96 * se,\n        upper = value + 1.96 * se\n    )"
  },
  {
    "objectID": "index.html#åŸºç¡€ç½®ä¿¡åŒºé—´å›¾",
    "href": "index.html#åŸºç¡€ç½®ä¿¡åŒºé—´å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€ç½®ä¿¡åŒºé—´å›¾",
    "text": "åŸºç¡€ç½®ä¿¡åŒºé—´å›¾\nggplot(time_series, aes(x = time, y = value)) +\n    geom_ribbon(aes(ymin = lower, ymax = upper), fill = \"#4f46e5\", alpha = 0.3) +\n    geom_line(color = \"#4f46e5\", linewidth = 1) +\n    labs(\n        title = \"å¸¦95%ç½®ä¿¡åŒºé—´çš„æ—¶åºå›¾\",\n        x = \"æ—¶é—´\",\n        y = \"æ•°å€¼\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(plot.title = element_text(face = \"bold\"))"
  },
  {
    "objectID": "index.html#å¤šç»„å¯¹æ¯”",
    "href": "index.html#å¤šç»„å¯¹æ¯”",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "å¤šç»„å¯¹æ¯”",
    "text": "å¤šç»„å¯¹æ¯”\n# åˆ›å»ºä¸¤ç»„æ•°æ®\nset.seed(42)\nmulti_group &lt;- rbind(\n    time_series %&gt;% mutate(group = \"Aç»„\"),\n    data.frame(\n        time = 1:50,\n        value = 90 + cumsum(rnorm(50, 0.3, 2)),\n        se = abs(rnorm(50, 2.5, 1))\n    ) %&gt;%\n        mutate(lower = value - 1.96 * se, upper = value + 1.96 * se, group = \"Bç»„\")\n)\n\nggplot(multi_group, aes(x = time, y = value, color = group, fill = group)) +\n    geom_ribbon(aes(ymin = lower, ymax = upper), alpha = 0.2, color = NA) +\n    geom_line(linewidth = 1) +\n    scale_color_manual(values = c(\"#4f46e5\", \"#10b981\")) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\")) +\n    labs(title = \"ä¸¤ç»„æ•°æ®ç½®ä¿¡åŒºé—´å¯¹æ¯”\", x = \"æ—¶é—´\", y = \"æ•°å€¼\", color = NULL, fill = NULL) +\n    theme_minimal() +\n    theme(plot.title = element_text(face = \"bold\"), legend.position = \"top\")"
  },
  {
    "objectID": "index.html#è¯¯å·®æ£’å›¾",
    "href": "index.html#è¯¯å·®æ£’å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "è¯¯å·®æ£’å›¾",
    "text": "è¯¯å·®æ£’å›¾\n# åˆ†ç»„å‡å€¼å’Œè¯¯å·®\nsummary_data &lt;- data.frame(\n    group = c(\"A\", \"B\", \"C\", \"D\"),\n    mean = c(25, 32, 28, 35),\n    se = c(2, 3, 2.5, 4)\n)\n\nggplot(summary_data, aes(x = group, y = mean, fill = group)) +\n    geom_col(alpha = 0.8, width = 0.6) +\n    geom_errorbar(aes(ymin = mean - se, ymax = mean + se), width = 0.2) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\", \"#ec4899\")) +\n    labs(title = \"å¸¦è¯¯å·®æ£’çš„æŸ±çŠ¶å›¾\", x = NULL, y = \"å‡å€¼\") +\n    theme_minimal() +\n    theme(plot.title = element_text(face = \"bold\"), legend.position = \"none\")"
  },
  {
    "objectID": "index.html#æ€»ç»“-7",
    "href": "index.html#æ€»ç»“-7",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå›¾è¡¨ç±»å‹\nå‡½æ•°\n\n\n\n\nç½®ä¿¡å¸¦\ngeom_ribbon()\n\n\nè¯¯å·®æ£’\ngeom_errorbar()\n\n\nç‚¹è¯¯å·®\ngeom_pointrange()\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\næŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—\næ£®æ—å›¾"
  },
  {
    "objectID": "2050-bindcountplot.html",
    "href": "2050-bindcountplot.html",
    "title": "Rè¯­è¨€è®¡æ•°å›¾ä¸åˆ†ç±»å›¾ç»˜åˆ¶",
    "section": "",
    "text": "è®¡æ•°å›¾ï¼ˆCount Plotï¼‰å’Œåˆ†ç±»å›¾ï¼ˆCategorical Plotï¼‰ç”¨äºå±•ç¤ºåˆ†ç±»å˜é‡çš„é¢‘æ•°åˆ†å¸ƒå’Œåˆ†ç±»å˜é‡é—´çš„å…³ç³»ï¼Œæ˜¯æ¢ç´¢æ€§æ•°æ®åˆ†æçš„åŸºç¡€å·¥å…·ã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\né¢‘æ•°ç»Ÿè®¡\nå„ç±»åˆ«å‡ºç°æ¬¡æ•°\n\n\nåˆ†ç»„æ¯”è¾ƒ\nå¤šç±»åˆ«äº¤å‰ç»Ÿè®¡\n\n\nç±»åˆ«åˆ†å¸ƒ\nè§‚å¯Ÿæ•°æ®ä¸å¹³è¡¡",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#ä»€ä¹ˆæ˜¯è®¡æ•°å›¾ä¸åˆ†ç±»å›¾",
    "href": "2050-bindcountplot.html#ä»€ä¹ˆæ˜¯è®¡æ•°å›¾ä¸åˆ†ç±»å›¾",
    "title": "Rè¯­è¨€è®¡æ•°å›¾ä¸åˆ†ç±»å›¾ç»˜åˆ¶",
    "section": "",
    "text": "è®¡æ•°å›¾ï¼ˆCount Plotï¼‰å’Œåˆ†ç±»å›¾ï¼ˆCategorical Plotï¼‰ç”¨äºå±•ç¤ºåˆ†ç±»å˜é‡çš„é¢‘æ•°åˆ†å¸ƒå’Œåˆ†ç±»å˜é‡é—´çš„å…³ç³»ï¼Œæ˜¯æ¢ç´¢æ€§æ•°æ®åˆ†æçš„åŸºç¡€å·¥å…·ã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\n\n\n\n\né¢‘æ•°ç»Ÿè®¡\nå„ç±»åˆ«å‡ºç°æ¬¡æ•°\n\n\nåˆ†ç»„æ¯”è¾ƒ\nå¤šç±»åˆ«äº¤å‰ç»Ÿè®¡\n\n\nç±»åˆ«åˆ†å¸ƒ\nè§‚å¯Ÿæ•°æ®ä¸å¹³è¡¡",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#råŒ…åŠ è½½",
    "href": "2050-bindcountplot.html#råŒ…åŠ è½½",
    "title": "Rè¯­è¨€è®¡æ•°å›¾ä¸åˆ†ç±»å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\n\nlibrary(ggplot2)\nlibrary(dplyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#åŸºç¡€è®¡æ•°å›¾",
    "href": "2050-bindcountplot.html#åŸºç¡€è®¡æ•°å›¾",
    "title": "Rè¯­è¨€è®¡æ•°å›¾ä¸åˆ†ç±»å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€è®¡æ•°å›¾",
    "text": "åŸºç¡€è®¡æ•°å›¾\n\n# ä½¿ç”¨å†…ç½®æ•°æ®\ndata(mpg)\n\nggplot(mpg, aes(x = class)) +\n    geom_bar(fill = \"#4f46e5\", alpha = 0.8) +\n    labs(\n        title = \"æ±½è½¦ç±»å‹åˆ†å¸ƒè®¡æ•°å›¾\",\n        x = \"æ±½è½¦ç±»å‹\",\n        y = \"æ•°é‡\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(plot.title = element_text(face = \"bold\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#æŒ‰å˜é‡ç€è‰²",
    "href": "2050-bindcountplot.html#æŒ‰å˜é‡ç€è‰²",
    "title": "Rè¯­è¨€è®¡æ•°å›¾ä¸åˆ†ç±»å›¾ç»˜åˆ¶",
    "section": "æŒ‰å˜é‡ç€è‰²",
    "text": "æŒ‰å˜é‡ç€è‰²\n\nggplot(mpg, aes(x = class, fill = drv)) +\n    geom_bar(position = \"dodge\", alpha = 0.8) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    labs(\n        title = \"æŒ‰é©±åŠ¨ç±»å‹åˆ†ç»„çš„è®¡æ•°å›¾\",\n        x = \"æ±½è½¦ç±»å‹\",\n        y = \"æ•°é‡\",\n        fill = \"é©±åŠ¨ç±»å‹\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"top\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#ç™¾åˆ†æ¯”å †å å›¾",
    "href": "2050-bindcountplot.html#ç™¾åˆ†æ¯”å †å å›¾",
    "title": "Rè¯­è¨€è®¡æ•°å›¾ä¸åˆ†ç±»å›¾ç»˜åˆ¶",
    "section": "ç™¾åˆ†æ¯”å †å å›¾",
    "text": "ç™¾åˆ†æ¯”å †å å›¾\n\nggplot(mpg, aes(x = class, fill = drv)) +\n    geom_bar(position = \"fill\", alpha = 0.8) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    scale_y_continuous(labels = scales::percent) +\n    labs(\n        title = \"é©±åŠ¨ç±»å‹ç™¾åˆ†æ¯”æ„æˆ\",\n        x = \"æ±½è½¦ç±»å‹\",\n        y = \"æ¯”ä¾‹\",\n        fill = \"é©±åŠ¨ç±»å‹\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(plot.title = element_text(face = \"bold\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#æ°´å¹³è®¡æ•°å›¾æ’åº",
    "href": "2050-bindcountplot.html#æ°´å¹³è®¡æ•°å›¾æ’åº",
    "title": "Rè¯­è¨€è®¡æ•°å›¾ä¸åˆ†ç±»å›¾ç»˜åˆ¶",
    "section": "æ°´å¹³è®¡æ•°å›¾ï¼ˆæ’åºï¼‰",
    "text": "æ°´å¹³è®¡æ•°å›¾ï¼ˆæ’åºï¼‰\n\nmpg %&gt;%\n    count(class) %&gt;%\n    mutate(class = forcats::fct_reorder(class, n)) %&gt;%\n    ggplot(aes(x = n, y = class, fill = n)) +\n    geom_col() +\n    geom_text(aes(label = n), hjust = -0.2, fontface = \"bold\") +\n    scale_fill_gradient(low = \"#a5b4fc\", high = \"#4f46e5\") +\n    scale_x_continuous(expand = expansion(mult = c(0, 0.15))) +\n    labs(\n        title = \"æŒ‰æ•°é‡æ’åºçš„æ±½è½¦ç±»å‹\",\n        x = \"æ•°é‡\",\n        y = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"none\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#åˆ†é¢åˆ†ç±»å›¾",
    "href": "2050-bindcountplot.html#åˆ†é¢åˆ†ç±»å›¾",
    "title": "Rè¯­è¨€è®¡æ•°å›¾ä¸åˆ†ç±»å›¾ç»˜åˆ¶",
    "section": "åˆ†é¢åˆ†ç±»å›¾",
    "text": "åˆ†é¢åˆ†ç±»å›¾\n\nggplot(mpg, aes(x = class, fill = class)) +\n    geom_bar(alpha = 0.8, show.legend = FALSE) +\n    facet_wrap(~year) +\n    scale_fill_viridis_d() +\n    labs(\n        title = \"ä¸åŒå¹´ä»½çš„æ±½è½¦ç±»å‹åˆ†å¸ƒ\",\n        x = NULL,\n        y = \"æ•°é‡\"\n    ) +\n    theme_minimal(base_size = 11) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        axis.text.x = element_text(angle = 45, hjust = 1)\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#æ€»ç»“",
    "href": "2050-bindcountplot.html#æ€»ç»“",
    "title": "Rè¯­è¨€è®¡æ•°å›¾ä¸åˆ†ç±»å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå›¾è¡¨ç±»å‹\nç”¨é€”\nå…³é”®å‚æ•°\n\n\n\n\nåŸºç¡€è®¡æ•°å›¾\nå•å˜é‡é¢‘æ•°\ngeom_bar()\n\n\nåˆ†ç»„è®¡æ•°å›¾\näº¤å‰é¢‘æ•°\nposition = \"dodge\"\n\n\nç™¾åˆ†æ¯”å †å \næ¯”ä¾‹æ„æˆ\nposition = \"fill\"\n\n\næ’åºè®¡æ•°å›¾\nçªå‡ºæ’å\nfct_reorder()\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\næŸ±çŠ¶å›¾ä¸é¥¼å›¾\næ£’æ£’ç³–å›¾ä¸æ’åºå›¾",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#ä»€ä¹ˆæ˜¯çŸ©é˜µå›¾æˆå¯¹å›¾",
    "href": "2050-bindcountplot.html#ä»€ä¹ˆæ˜¯çŸ©é˜µå›¾æˆå¯¹å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä»€ä¹ˆæ˜¯çŸ©é˜µå›¾/æˆå¯¹å›¾",
    "text": "ä»€ä¹ˆæ˜¯çŸ©é˜µå›¾/æˆå¯¹å›¾\nçŸ©é˜µå›¾ï¼ˆPairwise Plot/Pairs Plotï¼‰å°†å¤šä¸ªå˜é‡ä¸¤ä¸¤ç»„åˆï¼Œåœ¨ä¸€ä¸ªçŸ©é˜µå¸ƒå±€ä¸­åŒæ—¶å±•ç¤ºæ‰€æœ‰å˜é‡ä¹‹é—´çš„å…³ç³»ï¼Œæ˜¯å¤šå˜é‡æ¢ç´¢æ€§åˆ†æçš„åˆ©å™¨ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#råŒ…åŠ è½½-1",
    "href": "2050-bindcountplot.html#råŒ…åŠ è½½-1",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(GGally)",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#åŸºç¡€æˆå¯¹å›¾",
    "href": "2050-bindcountplot.html#åŸºç¡€æˆå¯¹å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€æˆå¯¹å›¾",
    "text": "åŸºç¡€æˆå¯¹å›¾\n# ä½¿ç”¨å†…ç½®irisæ•°æ®\nggpairs(iris, columns = 1:4, aes(color = Species, alpha = 0.6)) +\n    scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    theme_minimal() +\n    theme(plot.title = element_text(face = \"bold\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#è‡ªå®šä¹‰å¯¹è§’çº¿",
    "href": "2050-bindcountplot.html#è‡ªå®šä¹‰å¯¹è§’çº¿",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "è‡ªå®šä¹‰å¯¹è§’çº¿",
    "text": "è‡ªå®šä¹‰å¯¹è§’çº¿\nggpairs(iris,\n    columns = 1:4, aes(color = Species),\n    diag = list(continuous = wrap(\"densityDiag\", alpha = 0.5)),\n    lower = list(continuous = wrap(\"points\", alpha = 0.5, size = 1)),\n    upper = list(continuous = wrap(\"cor\", size = 3))\n) +\n    scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    theme_bw()",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#ä½¿ç”¨åŸºç¡€rçš„pairså‡½æ•°",
    "href": "2050-bindcountplot.html#ä½¿ç”¨åŸºç¡€rçš„pairså‡½æ•°",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä½¿ç”¨åŸºç¡€Rçš„pairså‡½æ•°",
    "text": "ä½¿ç”¨åŸºç¡€Rçš„pairså‡½æ•°\npairs(iris[, 1:4],\n    col = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")[iris$Species],\n    pch = 19,\n    main = \"é¸¢å°¾èŠ±æ•°æ®çŸ©é˜µå›¾\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#æ€»ç»“-1",
    "href": "2050-bindcountplot.html#æ€»ç»“-1",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå‡½æ•°\nç‰¹ç‚¹\n\n\n\n\nGGally::ggpairs()\næœ€çµæ´»ï¼Œggplot2é£æ ¼\n\n\npairs()\nåŸºç¡€Rï¼Œå¿«é€Ÿç®€å•\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\nç›¸å…³å›¾çŸ©é˜µ\næ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿\n\n{r setup, include=FALSE} knitr::opts_chunk$set(     echo = TRUE, warning = FALSE, message = FALSE,     fig.width = 10, fig.height = 5, fig.retina = 2, out.width = \"100%\", dpi = 150 )",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#ä»€ä¹ˆæ˜¯è‡ªç›¸å…³å›¾",
    "href": "2050-bindcountplot.html#ä»€ä¹ˆæ˜¯è‡ªç›¸å…³å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä»€ä¹ˆæ˜¯è‡ªç›¸å…³å›¾",
    "text": "ä»€ä¹ˆæ˜¯è‡ªç›¸å…³å›¾\nè‡ªç›¸å…³å›¾ï¼ˆACF/PACF Plotï¼‰ç”¨äºåˆ†ææ—¶é—´åºåˆ—æ•°æ®çš„è‡ªç›¸å…³æ€§ï¼Œæ˜¯æ—¶é—´åºåˆ—å»ºæ¨¡å‰çš„å¿…è¦è¯Šæ–­å·¥å…·ã€‚\n\nACF: è‡ªç›¸å…³å‡½æ•°ï¼Œè¡¡é‡åºåˆ—ä¸å…¶æ»åå€¼çš„ç›¸å…³æ€§\nPACF: åè‡ªç›¸å…³å‡½æ•°ï¼Œæ’é™¤ä¸­é—´æ»åé¡¹çš„å½±å“",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#råŒ…åŠ è½½-2",
    "href": "2050-bindcountplot.html#råŒ…åŠ è½½-2",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(forecast)",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#å‡†å¤‡æ—¶åºæ•°æ®",
    "href": "2050-bindcountplot.html#å‡†å¤‡æ—¶åºæ•°æ®",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "å‡†å¤‡æ—¶åºæ•°æ®",
    "text": "å‡†å¤‡æ—¶åºæ•°æ®\n# ä½¿ç”¨å†…ç½®AirPassengersæ•°æ®\ndata(AirPassengers)\nts_data &lt;- as.numeric(AirPassengers)",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#åŸºç¡€acfå›¾",
    "href": "2050-bindcountplot.html#åŸºç¡€acfå›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€ACFå›¾",
    "text": "åŸºç¡€ACFå›¾\nacf(ts_data, main = \"è‡ªç›¸å…³å‡½æ•°å›¾ (ACF)\", col = \"#4f46e5\", lwd = 2)",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#åŸºç¡€pacfå›¾",
    "href": "2050-bindcountplot.html#åŸºç¡€pacfå›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€PACFå›¾",
    "text": "åŸºç¡€PACFå›¾\npacf(ts_data, main = \"åè‡ªç›¸å…³å‡½æ•°å›¾ (PACF)\", col = \"#10b981\", lwd = 2)",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#ä½¿ç”¨ggplot2ç¾åŒ–",
    "href": "2050-bindcountplot.html#ä½¿ç”¨ggplot2ç¾åŒ–",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä½¿ç”¨ggplot2ç¾åŒ–",
    "text": "ä½¿ç”¨ggplot2ç¾åŒ–\n```{r fig.height=4} # æå–ACFæ•°æ® acf_data &lt;- acf(ts_data, plot = FALSE) acf_df &lt;- data.frame( lag = acf_data\\(lag[-1],\n    acf = acf_data\\)acf[-1] )",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#æ€»ç»“-2",
    "href": "2050-bindcountplot.html#æ€»ç»“-2",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå›¾è¡¨\nç”¨é€”\nARIMAåˆ¤æ–­\n\n\n\n\nACF\nè¯†åˆ«MAé˜¶æ•°\næˆªå°¾â†’MA(q)\n\n\nPACF\nè¯†åˆ«ARé˜¶æ•°\næˆªå°¾â†’AR(p)\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\næŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—\næ—¶åºå³°è°·æ ‡è®°å›¾\n\n{r setup, include=FALSE} knitr::opts_chunk$set(     echo = TRUE, warning = FALSE, message = FALSE,     fig.width = 8, fig.height = 6, fig.retina = 2, out.width = \"100%\", dpi = 150 )",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#ä»€ä¹ˆæ˜¯è¯äº‘å›¾",
    "href": "2050-bindcountplot.html#ä»€ä¹ˆæ˜¯è¯äº‘å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä»€ä¹ˆæ˜¯è¯äº‘å›¾",
    "text": "ä»€ä¹ˆæ˜¯è¯äº‘å›¾\nè¯äº‘å›¾ï¼ˆWord Cloudï¼‰ç”¨è¯è¯­çš„å¤§å°å’Œé¢œè‰²è¡¨ç¤ºè¯é¢‘æˆ–é‡è¦æ€§ï¼Œæ˜¯æ–‡æœ¬æ•°æ®å¯è§†åŒ–çš„ç»å…¸æ–¹å¼ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#råŒ…åŠ è½½-3",
    "href": "2050-bindcountplot.html#råŒ…åŠ è½½-3",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\nlibrary(wordcloud)\nlibrary(RColorBrewer)\nlibrary(dplyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#å‡†å¤‡æ•°æ®",
    "href": "2050-bindcountplot.html#å‡†å¤‡æ•°æ®",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "å‡†å¤‡æ•°æ®",
    "text": "å‡†å¤‡æ•°æ®\n# åˆ›å»ºç¤ºä¾‹è¯é¢‘æ•°æ®\nwords_data &lt;- data.frame(\n    word = c(\n        \"æ•°æ®åˆ†æ\", \"å¯è§†åŒ–\", \"æœºå™¨å­¦ä¹ \", \"Rè¯­è¨€\", \"ç»Ÿè®¡\", \"å›å½’\",\n        \"åˆ†ç±»\", \"èšç±»\", \"é¢„æµ‹\", \"æ¨¡å‹\", \"ç®—æ³•\", \"æ·±åº¦å­¦ä¹ \",\n        \"Python\", \"æ•°æ®æŒ–æ˜\", \"å¤§æ•°æ®\", \"äººå·¥æ™ºèƒ½\", \"ç¥ç»ç½‘ç»œ\",\n        \"ç‰¹å¾å·¥ç¨‹\", \"äº¤å‰éªŒè¯\", \"éšæœºæ£®æ—\"\n    ),\n    freq = c(\n        100, 85, 70, 95, 60, 50, 45, 40, 55, 75, 35, 30,\n        80, 65, 55, 45, 25, 35, 30, 40\n    )\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#åŸºç¡€è¯äº‘",
    "href": "2050-bindcountplot.html#åŸºç¡€è¯äº‘",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€è¯äº‘",
    "text": "åŸºç¡€è¯äº‘\nset.seed(42)\nwordcloud(\n    words = words_data$word,\n    freq = words_data$freq,\n    min.freq = 20,\n    max.words = 100,\n    random.order = FALSE,\n    colors = brewer.pal(8, \"Dark2\")\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#è‡ªå®šä¹‰é¢œè‰²",
    "href": "2050-bindcountplot.html#è‡ªå®šä¹‰é¢œè‰²",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "è‡ªå®šä¹‰é¢œè‰²",
    "text": "è‡ªå®šä¹‰é¢œè‰²\ncustom_colors &lt;- colorRampPalette(c(\"#4f46e5\", \"#10b981\", \"#f59e0b\"))(10)\n\nset.seed(42)\nwordcloud(\n    words = words_data$word,\n    freq = words_data$freq,\n    min.freq = 20,\n    scale = c(3, 0.5),\n    random.order = FALSE,\n    colors = custom_colors\n)\ntitle(\"æ•°æ®ç§‘å­¦å…³é”®è¯\", col.main = \"#1f2937\", font.main = 2)",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#ä½¿ç”¨wordcloud2äº¤äº’å¼",
    "href": "2050-bindcountplot.html#ä½¿ç”¨wordcloud2äº¤äº’å¼",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä½¿ç”¨wordcloud2ï¼ˆäº¤äº’å¼ï¼‰",
    "text": "ä½¿ç”¨wordcloud2ï¼ˆäº¤äº’å¼ï¼‰\n```{r eval=FALSE} # install.packages(â€œwordcloud2â€) library(wordcloud2)\nwordcloud2(words_data, size = 0.8, color = â€œrandom-lightâ€, backgroundColor = â€œ#1e1b4bâ€ )\n\n---\n\n## æ€»ç»“\n\n| åŒ… | ç‰¹ç‚¹ |\n|------|------|\n| `wordcloud` | é™æ€ï¼Œç®€å•å¿«é€Ÿ |\n| `wordcloud2` | äº¤äº’å¼ï¼Œæ”¯æŒå½¢çŠ¶ |\n\n### ç›¸å…³æ•™ç¨‹\n\n- [æŸ±çŠ¶å›¾ä¸é¥¼å›¾](2028-bindbarchart.html)\n\n---\ntitle: \"Rè¯­è¨€ç½‘ç»œå…³ç³»å›¾ç»˜åˆ¶\"\ndate: \"2026-01-15\"\ncategories: [å¯è§†åŒ–æ•™ç¨‹, ç»Ÿè®¡å›¾è¡¨, ç½‘ç»œå›¾]\nimage: \"images/bindnetwork_cover.svg\"\n---\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(\n    echo = TRUE, warning = FALSE, message = FALSE,\n    fig.width = 8, fig.height = 8, fig.retina = 2, out.width = \"100%\", dpi = 150\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#ä»€ä¹ˆæ˜¯ç½‘ç»œå…³ç³»å›¾",
    "href": "2050-bindcountplot.html#ä»€ä¹ˆæ˜¯ç½‘ç»œå…³ç³»å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä»€ä¹ˆæ˜¯ç½‘ç»œå…³ç³»å›¾",
    "text": "ä»€ä¹ˆæ˜¯ç½‘ç»œå…³ç³»å›¾\nç½‘ç»œå…³ç³»å›¾ï¼ˆNetwork Graphï¼‰ç”¨èŠ‚ç‚¹å’Œè¾¹è¡¨ç¤ºå¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼Œé€‚åˆå±•ç¤ºç¤¾äº¤ç½‘ç»œã€å¼•ç”¨å…³ç³»ã€çŸ¥è¯†å›¾è°±ç­‰ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#råŒ…åŠ è½½-4",
    "href": "2050-bindcountplot.html#råŒ…åŠ è½½-4",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\nlibrary(igraph)\nlibrary(ggraph)\nlibrary(tidygraph)",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#åˆ›å»ºç½‘ç»œæ•°æ®",
    "href": "2050-bindcountplot.html#åˆ›å»ºç½‘ç»œæ•°æ®",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "åˆ›å»ºç½‘ç»œæ•°æ®",
    "text": "åˆ›å»ºç½‘ç»œæ•°æ®\n# åˆ›å»ºè¾¹æ•°æ®\nedges &lt;- data.frame(\n    from = c(\"A\", \"A\", \"B\", \"B\", \"C\", \"D\", \"E\", \"E\", \"F\"),\n    to = c(\"B\", \"C\", \"D\", \"E\", \"D\", \"F\", \"F\", \"G\", \"G\")\n)\n\n# åˆ›å»ºå›¾å¯¹è±¡\ngraph &lt;- as_tbl_graph(edges, directed = FALSE)",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#åŸºç¡€ç½‘ç»œå›¾",
    "href": "2050-bindcountplot.html#åŸºç¡€ç½‘ç»œå›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€ç½‘ç»œå›¾",
    "text": "åŸºç¡€ç½‘ç»œå›¾\nggraph(graph, layout = \"fr\") +\n    geom_edge_link(color = \"#94a3b8\", width = 1) +\n    geom_node_point(size = 8, color = \"#4f46e5\") +\n    geom_node_text(aes(label = name), color = \"white\", fontface = \"bold\") +\n    theme_void() +\n    labs(title = \"åŸºç¡€ç½‘ç»œå…³ç³»å›¾\") +\n    theme(plot.title = element_text(face = \"bold\", hjust = 0.5))",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#åœ†å½¢å¸ƒå±€",
    "href": "2050-bindcountplot.html#åœ†å½¢å¸ƒå±€",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "åœ†å½¢å¸ƒå±€",
    "text": "åœ†å½¢å¸ƒå±€\nggraph(graph, layout = \"circle\") +\n    geom_edge_link(color = \"#94a3b8\", width = 1.5) +\n    geom_node_point(size = 10, color = \"#10b981\") +\n    geom_node_text(aes(label = name), color = \"white\", fontface = \"bold\") +\n    theme_void() +\n    labs(title = \"åœ†å½¢å¸ƒå±€ç½‘ç»œå›¾\")",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#èŠ‚ç‚¹ç€è‰²æŒ‰åº¦",
    "href": "2050-bindcountplot.html#èŠ‚ç‚¹ç€è‰²æŒ‰åº¦",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "èŠ‚ç‚¹ç€è‰²æŒ‰åº¦",
    "text": "èŠ‚ç‚¹ç€è‰²æŒ‰åº¦\ngraph &lt;- graph %&gt;%\n    mutate(degree = centrality_degree())\n\nggraph(graph, layout = \"stress\") +\n    geom_edge_link(color = \"#e2e8f0\", width = 1) +\n    geom_node_point(aes(size = degree, color = degree)) +\n    geom_node_text(aes(label = name), color = \"white\", fontface = \"bold\", size = 4) +\n    scale_color_gradient(low = \"#a5b4fc\", high = \"#4f46e5\") +\n    scale_size_continuous(range = c(8, 15)) +\n    theme_void() +\n    labs(title = \"æŒ‰èŠ‚ç‚¹åº¦æ•°ç€è‰²\") +\n    theme(legend.position = \"none\")",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#æ€»ç»“-3",
    "href": "2050-bindcountplot.html#æ€»ç»“-3",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå¸ƒå±€\nå‡½æ•°\n\n\n\n\nåŠ›å¯¼å‘\nlayout = \"fr\"\n\n\nåœ†å½¢\nlayout = \"circle\"\n\n\næ ‘å½¢\nlayout = \"tree\"\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\næ¡‘åŸºå›¾\n\n{r setup, include=FALSE} knitr::opts_chunk$set(     echo = TRUE, warning = FALSE, message = FALSE,     fig.width = 10, fig.height = 5, fig.retina = 2, out.width = \"100%\", dpi = 150 )",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#ä»€ä¹ˆæ˜¯ç”˜ç‰¹å›¾",
    "href": "2050-bindcountplot.html#ä»€ä¹ˆæ˜¯ç”˜ç‰¹å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä»€ä¹ˆæ˜¯ç”˜ç‰¹å›¾",
    "text": "ä»€ä¹ˆæ˜¯ç”˜ç‰¹å›¾\nç”˜ç‰¹å›¾ï¼ˆGantt Chartï¼‰ç”¨æ¨ªå‘æ¡å½¢å±•ç¤ºé¡¹ç›®ä»»åŠ¡çš„æ—¶é—´å®‰æ’ï¼Œæ˜¯é¡¹ç›®ç®¡ç†çš„ç»å…¸å¯è§†åŒ–å·¥å…·ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#råŒ…åŠ è½½-5",
    "href": "2050-bindcountplot.html#råŒ…åŠ è½½-5",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(lubridate)",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#å‡†å¤‡é¡¹ç›®æ•°æ®",
    "href": "2050-bindcountplot.html#å‡†å¤‡é¡¹ç›®æ•°æ®",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "å‡†å¤‡é¡¹ç›®æ•°æ®",
    "text": "å‡†å¤‡é¡¹ç›®æ•°æ®\n# é¡¹ç›®ä»»åŠ¡æ•°æ®\ntasks &lt;- data.frame(\n    task = c(\"éœ€æ±‚åˆ†æ\", \"ç³»ç»Ÿè®¾è®¡\", \"ç¼–ç å¼€å‘\", \"æµ‹è¯•\", \"éƒ¨ç½²ä¸Šçº¿\"),\n    start = as.Date(c(\"2024-01-01\", \"2024-01-15\", \"2024-02-01\", \"2024-03-01\", \"2024-03-20\")),\n    end = as.Date(c(\"2024-01-14\", \"2024-01-31\", \"2024-02-28\", \"2024-03-19\", \"2024-03-31\")),\n    status = c(\"å·²å®Œæˆ\", \"å·²å®Œæˆ\", \"è¿›è¡Œä¸­\", \"å¾…å¼€å§‹\", \"å¾…å¼€å§‹\")\n)\n\n# æŒ‰å¼€å§‹æ—¶é—´æ’åº\ntasks &lt;- tasks %&gt;%\n    mutate(task = factor(task, levels = rev(task)))",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#åŸºç¡€ç”˜ç‰¹å›¾",
    "href": "2050-bindcountplot.html#åŸºç¡€ç”˜ç‰¹å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€ç”˜ç‰¹å›¾",
    "text": "åŸºç¡€ç”˜ç‰¹å›¾\nggplot(tasks, aes(y = task)) +\n    geom_segment(aes(x = start, xend = end, yend = task, color = status),\n        linewidth = 10, lineend = \"round\"\n    ) +\n    scale_color_manual(values = c(\"å·²å®Œæˆ\" = \"#10b981\", \"è¿›è¡Œä¸­\" = \"#4f46e5\", \"å¾…å¼€å§‹\" = \"#94a3b8\")) +\n    scale_x_date(date_labels = \"%mæœˆ%dæ—¥\", date_breaks = \"2 weeks\") +\n    labs(\n        title = \"é¡¹ç›®è¿›åº¦ç”˜ç‰¹å›¾\",\n        x = \"æ—¥æœŸ\",\n        y = NULL,\n        color = \"çŠ¶æ€\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"top\",\n        panel.grid.major.y = element_blank()\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#æ·»åŠ ä»Šæ—¥æ ‡è®°",
    "href": "2050-bindcountplot.html#æ·»åŠ ä»Šæ—¥æ ‡è®°",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "æ·»åŠ ä»Šæ—¥æ ‡è®°",
    "text": "æ·»åŠ ä»Šæ—¥æ ‡è®°\ntoday &lt;- as.Date(\"2024-02-15\")\n\nggplot(tasks, aes(y = task)) +\n    geom_segment(aes(x = start, xend = end, yend = task, color = status),\n        linewidth = 10, lineend = \"round\"\n    ) +\n    geom_vline(xintercept = today, linetype = \"dashed\", color = \"#ef4444\", linewidth = 1) +\n    annotate(\"text\", x = today, y = 5.3, label = \"ä»Šå¤©\", color = \"#ef4444\", fontface = \"bold\") +\n    scale_color_manual(values = c(\"å·²å®Œæˆ\" = \"#10b981\", \"è¿›è¡Œä¸­\" = \"#4f46e5\", \"å¾…å¼€å§‹\" = \"#94a3b8\")) +\n    scale_x_date(date_labels = \"%m/%d\") +\n    labs(title = \"å¸¦ä»Šæ—¥æ ‡è®°çš„ç”˜ç‰¹å›¾\", x = NULL, y = NULL, color = NULL) +\n    theme_minimal() +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"top\",\n        panel.grid.major.y = element_blank()\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#æ€»ç»“-4",
    "href": "2050-bindcountplot.html#æ€»ç»“-4",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå…ƒç´ \nè¯´æ˜\n\n\n\n\næ¨ªæ¡\nä»»åŠ¡æ—¶é—´è·¨åº¦\n\n\né¢œè‰²\nä»»åŠ¡çŠ¶æ€\n\n\nä»Šæ—¥çº¿\nå½“å‰è¿›åº¦å‚è€ƒ\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\næŸ±çŠ¶å›¾ä¸é¥¼å›¾\n\n{r setup, include=FALSE} knitr::opts_chunk$set(     echo = TRUE, warning = FALSE, message = FALSE,     fig.width = 8, fig.height = 6, fig.retina = 2, out.width = \"100%\", dpi = 150 )",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#ä»€ä¹ˆæ˜¯æ¼æ–—å›¾",
    "href": "2050-bindcountplot.html#ä»€ä¹ˆæ˜¯æ¼æ–—å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä»€ä¹ˆæ˜¯æ¼æ–—å›¾",
    "text": "ä»€ä¹ˆæ˜¯æ¼æ–—å›¾\næ¼æ–—å›¾ï¼ˆFunnel Chartï¼‰ç”¨é€çº§é€’å‡çš„æ¡å½¢å±•ç¤ºè½¬åŒ–è¿‡ç¨‹å„é˜¶æ®µçš„æµå¤±æƒ…å†µï¼Œæ˜¯è¥é”€å’Œé”€å”®åˆ†æçš„å¸¸ç”¨å›¾è¡¨ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#råŒ…åŠ è½½-6",
    "href": "2050-bindcountplot.html#råŒ…åŠ è½½-6",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\nlibrary(ggplot2)\nlibrary(dplyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#å‡†å¤‡æ•°æ®-1",
    "href": "2050-bindcountplot.html#å‡†å¤‡æ•°æ®-1",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "å‡†å¤‡æ•°æ®",
    "text": "å‡†å¤‡æ•°æ®\nfunnel_data &lt;- data.frame(\n    stage = c(\"è®¿é—®ç½‘ç«™\", \"æµè§ˆå•†å“\", \"åŠ å…¥è´­ç‰©è½¦\", \"å¼€å§‹ç»“è´¦\", \"å®Œæˆæ”¯ä»˜\"),\n    value = c(10000, 6000, 3000, 1500, 800)\n) %&gt;%\n    mutate(\n        stage = factor(stage, levels = rev(stage)),\n        pct = value / max(value) * 100,\n        label = paste0(value, \" (\", round(pct), \"%)\")\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#åŸºç¡€æ¼æ–—å›¾",
    "href": "2050-bindcountplot.html#åŸºç¡€æ¼æ–—å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€æ¼æ–—å›¾",
    "text": "åŸºç¡€æ¼æ–—å›¾\nggplot(funnel_data, aes(x = value, y = stage)) +\n    geom_col(fill = \"#4f46e5\", width = 0.7) +\n    geom_text(aes(label = label), hjust = -0.1, fontface = \"bold\", size = 3.5) +\n    scale_x_continuous(expand = expansion(mult = c(0, 0.3))) +\n    labs(\n        title = \"ç”µå•†è½¬åŒ–æ¼æ–—\",\n        x = \"ç”¨æˆ·æ•°\",\n        y = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        panel.grid.major.y = element_blank()\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#æ¸å˜è‰²æ¼æ–—",
    "href": "2050-bindcountplot.html#æ¸å˜è‰²æ¼æ–—",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "æ¸å˜è‰²æ¼æ–—",
    "text": "æ¸å˜è‰²æ¼æ–—\nggplot(funnel_data, aes(x = value, y = stage, fill = value)) +\n    geom_col(width = 0.7) +\n    geom_text(aes(label = label), hjust = -0.1, fontface = \"bold\", size = 3.5) +\n    scale_fill_gradient(low = \"#a5b4fc\", high = \"#4f46e5\") +\n    scale_x_continuous(expand = expansion(mult = c(0, 0.3))) +\n    labs(title = \"æ¸å˜è‰²æ¼æ–—å›¾\", x = NULL, y = NULL) +\n    theme_minimal() +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        panel.grid = element_blank(),\n        legend.position = \"none\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#å¯¹ç§°æ¼æ–—å›¾",
    "href": "2050-bindcountplot.html#å¯¹ç§°æ¼æ–—å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "å¯¹ç§°æ¼æ–—å›¾",
    "text": "å¯¹ç§°æ¼æ–—å›¾\nfunnel_data &lt;- funnel_data %&gt;%\n    mutate(\n        x_left = -value / 2,\n        x_right = value / 2\n    )\n\nggplot(funnel_data) +\n    geom_rect(aes(\n        xmin = x_left, xmax = x_right,\n        ymin = as.numeric(stage) - 0.35,\n        ymax = as.numeric(stage) + 0.35,\n        fill = value\n    )) +\n    geom_text(aes(x = 0, y = stage, label = label),\n        color = \"white\", fontface = \"bold\", size = 4\n    ) +\n    scale_fill_gradient(low = \"#a5b4fc\", high = \"#4f46e5\") +\n    scale_y_discrete(expand = c(0.1, 0.1)) +\n    labs(title = \"å¯¹ç§°æ¼æ–—å›¾\", x = NULL, y = NULL) +\n    theme_void() +\n    theme(\n        plot.title = element_text(face = \"bold\", hjust = 0.5),\n        legend.position = \"none\",\n        axis.text.y = element_text(size = 10, hjust = 1)\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#æ€»ç»“-5",
    "href": "2050-bindcountplot.html#æ€»ç»“-5",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\næ ·å¼\nç‰¹ç‚¹\n\n\n\n\næ°´å¹³æ¼æ–—\nç®€å•æ¸…æ™°\n\n\nå¯¹ç§°æ¼æ–—\nè§†è§‰å¹³è¡¡\n\n\næ¸å˜è‰²\nçªå‡ºå·®å¼‚\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\næŸ±çŠ¶å›¾ä¸é¥¼å›¾\näººå£é‡‘å­—å¡”å›¾\n\n{r setup, include=FALSE} knitr::opts_chunk$set(     echo = TRUE, warning = FALSE, message = FALSE,     fig.width = 10, fig.height = 6, fig.retina = 2, out.width = \"100%\", dpi = 150 )",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#ä»€ä¹ˆæ˜¯å¹³è¡Œåæ ‡å›¾",
    "href": "2050-bindcountplot.html#ä»€ä¹ˆæ˜¯å¹³è¡Œåæ ‡å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä»€ä¹ˆæ˜¯å¹³è¡Œåæ ‡å›¾",
    "text": "ä»€ä¹ˆæ˜¯å¹³è¡Œåæ ‡å›¾\nå¹³è¡Œåæ ‡å›¾ï¼ˆParallel Coordinates Plotï¼‰ç”¨å¹³è¡Œçš„å‚ç›´è½´è¡¨ç¤ºå¤šä¸ªå˜é‡ï¼Œæ¯æ¡æŠ˜çº¿è¿æ¥åŒä¸€è§‚æµ‹åœ¨å„å˜é‡ä¸Šçš„å€¼ï¼Œé€‚åˆé«˜ç»´æ•°æ®å¯è§†åŒ–ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#råŒ…åŠ è½½-7",
    "href": "2050-bindcountplot.html#råŒ…åŠ è½½-7",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(GGally)",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#åŸºç¡€å¹³è¡Œåæ ‡å›¾",
    "href": "2050-bindcountplot.html#åŸºç¡€å¹³è¡Œåæ ‡å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€å¹³è¡Œåæ ‡å›¾",
    "text": "åŸºç¡€å¹³è¡Œåæ ‡å›¾\n# ä½¿ç”¨irisæ•°æ®\nggparcoord(iris, columns = 1:4, groupColumn = 5, scale = \"std\") +\n    scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    labs(\n        title = \"é¸¢å°¾èŠ±å¤šç»´ç‰¹å¾å¯¹æ¯”\",\n        x = \"å˜é‡\",\n        y = \"æ ‡å‡†åŒ–å€¼\",\n        color = \"ç‰©ç§\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"top\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#å¸¦é€æ˜åº¦å’Œæ ·æ¡æ›²çº¿",
    "href": "2050-bindcountplot.html#å¸¦é€æ˜åº¦å’Œæ ·æ¡æ›²çº¿",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "å¸¦é€æ˜åº¦å’Œæ ·æ¡æ›²çº¿",
    "text": "å¸¦é€æ˜åº¦å’Œæ ·æ¡æ›²çº¿\nggparcoord(iris,\n    columns = 1:4, groupColumn = 5,\n    scale = \"uniminmax\", alphaLines = 0.5, splineFactor = 10\n) +\n    scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    labs(title = \"æ ·æ¡æ›²çº¿å¹³è¡Œåæ ‡å›¾\", x = NULL, y = NULL, color = NULL) +\n    theme_minimal() +\n    theme(plot.title = element_text(face = \"bold\"), legend.position = \"top\")",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#é«˜äº®ç‰¹å®šç±»åˆ«",
    "href": "2050-bindcountplot.html#é«˜äº®ç‰¹å®šç±»åˆ«",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "é«˜äº®ç‰¹å®šç±»åˆ«",
    "text": "é«˜äº®ç‰¹å®šç±»åˆ«\niris_highlight &lt;- iris %&gt;%\n    mutate(highlight = ifelse(Species == \"setosa\", \"Setosa\", \"å…¶ä»–\"))\n\nggparcoord(iris_highlight,\n    columns = 1:4, groupColumn = \"highlight\",\n    scale = \"std\", alphaLines = 0.6\n) +\n    scale_color_manual(values = c(\"Setosa\" = \"#4f46e5\", \"å…¶ä»–\" = \"#94a3b8\")) +\n    labs(title = \"é«˜äº®Setosaç‰©ç§\") +\n    theme_minimal() +\n    theme(plot.title = element_text(face = \"bold\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#æ€»ç»“-6",
    "href": "2050-bindcountplot.html#æ€»ç»“-6",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå‚æ•°\nè¯´æ˜\n\n\n\n\nscale = \"std\"\næ ‡å‡†åŒ–\n\n\nscale = \"uniminmax\"\n0-1ç¼©æ”¾\n\n\nsplineFactor\næ›²çº¿å¹³æ»‘åº¦\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\né›·è¾¾å›¾\nçŸ©é˜µå›¾ä¸æˆå¯¹å›¾\n\n{r setup, include=FALSE} knitr::opts_chunk$set(     echo = TRUE, warning = FALSE, message = FALSE,     fig.width = 9, fig.height = 6, fig.retina = 2, out.width = \"100%\", dpi = 150 )",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#ä»€ä¹ˆæ˜¯é©¬èµ›å…‹å›¾",
    "href": "2050-bindcountplot.html#ä»€ä¹ˆæ˜¯é©¬èµ›å…‹å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä»€ä¹ˆæ˜¯é©¬èµ›å…‹å›¾",
    "text": "ä»€ä¹ˆæ˜¯é©¬èµ›å…‹å›¾\né©¬èµ›å…‹å›¾ï¼ˆMosaic Plotï¼‰ç”¨çŸ©å½¢é¢ç§¯è¡¨ç¤ºåˆ†ç±»å˜é‡çš„äº¤å‰é¢‘æ•°ï¼Œæ˜¯æ¢ç´¢å¤šä¸ªåˆ†ç±»å˜é‡å…³ç³»çš„æœ‰åŠ›å·¥å…·ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#råŒ…åŠ è½½-8",
    "href": "2050-bindcountplot.html#råŒ…åŠ è½½-8",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\nlibrary(ggplot2)\nlibrary(dplyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#åŸºç¡€é©¬èµ›å…‹å›¾",
    "href": "2050-bindcountplot.html#åŸºç¡€é©¬èµ›å…‹å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€é©¬èµ›å…‹å›¾",
    "text": "åŸºç¡€é©¬èµ›å…‹å›¾\n# ä½¿ç”¨Titanicæ•°æ®\ndata(Titanic)\ntitanic_df &lt;- as.data.frame(Titanic)\n\nggplot(titanic_df) +\n    geom_mosaic(aes(x = product(Class, Survived), fill = Survived, weight = Freq)) +\n    scale_fill_manual(values = c(\"#ef4444\", \"#10b981\")) +\n    labs(\n        title = \"æ³°å¦å°¼å…‹å·ç”Ÿè¿˜ç‡ - æŒ‰èˆ±ä½\",\n        x = \"èˆ±ä½ç­‰çº§\",\n        y = \"ç”Ÿè¿˜æƒ…å†µ\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(plot.title = element_text(face = \"bold\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#ä¸‰å˜é‡é©¬èµ›å…‹å›¾",
    "href": "2050-bindcountplot.html#ä¸‰å˜é‡é©¬èµ›å…‹å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä¸‰å˜é‡é©¬èµ›å…‹å›¾",
    "text": "ä¸‰å˜é‡é©¬èµ›å…‹å›¾\nggplot(titanic_df) +\n    geom_mosaic(aes(x = product(Class, Sex), fill = Survived, weight = Freq)) +\n    scale_fill_manual(values = c(\"#ef4444\", \"#10b981\")) +\n    labs(title = \"ç”Ÿè¿˜ç‡ - æŒ‰èˆ±ä½å’Œæ€§åˆ«\", x = \"èˆ±ä½ / æ€§åˆ«\", y = NULL) +\n    theme_minimal() +\n    theme(plot.title = element_text(face = \"bold\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#ä½¿ç”¨åŸºç¡€rçš„mosaicplot",
    "href": "2050-bindcountplot.html#ä½¿ç”¨åŸºç¡€rçš„mosaicplot",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä½¿ç”¨åŸºç¡€Rçš„mosaicplot",
    "text": "ä½¿ç”¨åŸºç¡€Rçš„mosaicplot\nmosaicplot(Titanic,\n    main = \"æ³°å¦å°¼å…‹å·æ•°æ®é©¬èµ›å…‹å›¾\",\n    color = c(\"#ef4444\", \"#10b981\"),\n    shade = FALSE, border = \"white\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#æ€»ç»“-7",
    "href": "2050-bindcountplot.html#æ€»ç»“-7",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå‡½æ•°\nç‰¹ç‚¹\n\n\n\n\nmosaicplot()\nåŸºç¡€Rï¼Œå¿«é€Ÿç®€å•\n\n\nggplot2 æ‰‹åŠ¨\næ›´çµæ´»ç¾è§‚\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\nåå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾\nè®¡æ•°å›¾ä¸åˆ†ç±»å›¾\n\n{r setup, include=FALSE} knitr::opts_chunk$set(     echo = TRUE, warning = FALSE, message = FALSE,     fig.width = 10, fig.height = 5, fig.retina = 2, out.width = \"100%\", dpi = 150 )",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#ä»€ä¹ˆæ˜¯ç½®ä¿¡åŒºé—´å›¾",
    "href": "2050-bindcountplot.html#ä»€ä¹ˆæ˜¯ç½®ä¿¡åŒºé—´å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä»€ä¹ˆæ˜¯ç½®ä¿¡åŒºé—´å›¾",
    "text": "ä»€ä¹ˆæ˜¯ç½®ä¿¡åŒºé—´å›¾\nç½®ä¿¡åŒºé—´å›¾ï¼ˆRibbon/Error Bandï¼‰åœ¨æŠ˜çº¿å›¾åŸºç¡€ä¸Šæ·»åŠ ç½®ä¿¡åŒºé—´å¸¦ï¼Œå±•ç¤ºä¼°è®¡å€¼çš„ä¸ç¡®å®šæ€§èŒƒå›´ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#råŒ…åŠ è½½-9",
    "href": "2050-bindcountplot.html#råŒ…åŠ è½½-9",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\nlibrary(ggplot2)\nlibrary(dplyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#å‡†å¤‡æ•°æ®-2",
    "href": "2050-bindcountplot.html#å‡†å¤‡æ•°æ®-2",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "å‡†å¤‡æ•°æ®",
    "text": "å‡†å¤‡æ•°æ®\nset.seed(42)\ntime_series &lt;- data.frame(\n    time = 1:50,\n    value = 100 + cumsum(rnorm(50, 0.5, 2)),\n    se = abs(rnorm(50, 3, 1))\n) %&gt;%\n    mutate(\n        lower = value - 1.96 * se,\n        upper = value + 1.96 * se\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#åŸºç¡€ç½®ä¿¡åŒºé—´å›¾",
    "href": "2050-bindcountplot.html#åŸºç¡€ç½®ä¿¡åŒºé—´å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€ç½®ä¿¡åŒºé—´å›¾",
    "text": "åŸºç¡€ç½®ä¿¡åŒºé—´å›¾\nggplot(time_series, aes(x = time, y = value)) +\n    geom_ribbon(aes(ymin = lower, ymax = upper), fill = \"#4f46e5\", alpha = 0.3) +\n    geom_line(color = \"#4f46e5\", linewidth = 1) +\n    labs(\n        title = \"å¸¦95%ç½®ä¿¡åŒºé—´çš„æ—¶åºå›¾\",\n        x = \"æ—¶é—´\",\n        y = \"æ•°å€¼\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(plot.title = element_text(face = \"bold\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#å¤šç»„å¯¹æ¯”",
    "href": "2050-bindcountplot.html#å¤šç»„å¯¹æ¯”",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "å¤šç»„å¯¹æ¯”",
    "text": "å¤šç»„å¯¹æ¯”\n# åˆ›å»ºä¸¤ç»„æ•°æ®\nset.seed(42)\nmulti_group &lt;- rbind(\n    time_series %&gt;% mutate(group = \"Aç»„\"),\n    data.frame(\n        time = 1:50,\n        value = 90 + cumsum(rnorm(50, 0.3, 2)),\n        se = abs(rnorm(50, 2.5, 1))\n    ) %&gt;%\n        mutate(lower = value - 1.96 * se, upper = value + 1.96 * se, group = \"Bç»„\")\n)\n\nggplot(multi_group, aes(x = time, y = value, color = group, fill = group)) +\n    geom_ribbon(aes(ymin = lower, ymax = upper), alpha = 0.2, color = NA) +\n    geom_line(linewidth = 1) +\n    scale_color_manual(values = c(\"#4f46e5\", \"#10b981\")) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\")) +\n    labs(title = \"ä¸¤ç»„æ•°æ®ç½®ä¿¡åŒºé—´å¯¹æ¯”\", x = \"æ—¶é—´\", y = \"æ•°å€¼\", color = NULL, fill = NULL) +\n    theme_minimal() +\n    theme(plot.title = element_text(face = \"bold\"), legend.position = \"top\")",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#è¯¯å·®æ£’å›¾",
    "href": "2050-bindcountplot.html#è¯¯å·®æ£’å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "è¯¯å·®æ£’å›¾",
    "text": "è¯¯å·®æ£’å›¾\n# åˆ†ç»„å‡å€¼å’Œè¯¯å·®\nsummary_data &lt;- data.frame(\n    group = c(\"A\", \"B\", \"C\", \"D\"),\n    mean = c(25, 32, 28, 35),\n    se = c(2, 3, 2.5, 4)\n)\n\nggplot(summary_data, aes(x = group, y = mean, fill = group)) +\n    geom_col(alpha = 0.8, width = 0.6) +\n    geom_errorbar(aes(ymin = mean - se, ymax = mean + se), width = 0.2) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\", \"#ec4899\")) +\n    labs(title = \"å¸¦è¯¯å·®æ£’çš„æŸ±çŠ¶å›¾\", x = NULL, y = \"å‡å€¼\") +\n    theme_minimal() +\n    theme(plot.title = element_text(face = \"bold\"), legend.position = \"none\")",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#æ€»ç»“-8",
    "href": "2050-bindcountplot.html#æ€»ç»“-8",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå›¾è¡¨ç±»å‹\nå‡½æ•°\n\n\n\n\nç½®ä¿¡å¸¦\ngeom_ribbon()\n\n\nè¯¯å·®æ£’\ngeom_errorbar()\n\n\nç‚¹è¯¯å·®\ngeom_pointrange()\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\næŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—\næ£®æ—å›¾",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "index.html#æ–°æ‰‹å…¥é—¨æŒ‡å—-1",
    "href": "index.html#æ–°æ‰‹å…¥é—¨æŒ‡å—-1",
    "title": "R è¯­è¨€å­¦ä¹ ç¬”è®°",
    "section": "æ–°æ‰‹å…¥é—¨æŒ‡å—",
    "text": "æ–°æ‰‹å…¥é—¨æŒ‡å—\nç¬¬ä¸€æ¬¡æ¥ï¼Ÿè¿™é‡Œæœ‰å®Œæ•´çš„å­¦ä¹ è·¯çº¿å’Œæ•™ç¨‹ç›®å½•ï¼Œå¸®ä½ å¿«é€Ÿæ‰¾åˆ°æƒ³å­¦çš„å†…å®¹ã€‚"
  },
  {
    "objectID": "index.html#æœ€æ–°æ›´æ–°-1",
    "href": "index.html#æœ€æ–°æ›´æ–°-1",
    "title": "R è¯­è¨€å­¦ä¹ ç¬”è®°",
    "section": "æœ€æ–°æ›´æ–°",
    "text": "æœ€æ–°æ›´æ–°"
  },
  {
    "objectID": "0001-guide.html#æ–°æ‰‹å…¥é—¨æŒ‡å—",
    "href": "0001-guide.html#æ–°æ‰‹å…¥é—¨æŒ‡å—",
    "title": "R è¯­è¨€å­¦ä¹ ç¬”è®°",
    "section": "æ–°æ‰‹å…¥é—¨æŒ‡å—",
    "text": "æ–°æ‰‹å…¥é—¨æŒ‡å—\nç¬¬ä¸€æ¬¡æ¥ï¼Ÿè¿™é‡Œæœ‰å®Œæ•´çš„å­¦ä¹ è·¯çº¿å’Œæ•™ç¨‹ç›®å½•ï¼Œå¸®ä½ å¿«é€Ÿæ‰¾åˆ°æƒ³å­¦çš„å†…å®¹ã€‚"
  },
  {
    "objectID": "0001-guide.html#æœ€æ–°æ›´æ–°",
    "href": "0001-guide.html#æœ€æ–°æ›´æ–°",
    "title": "R è¯­è¨€å­¦ä¹ ç¬”è®°",
    "section": "æœ€æ–°æ›´æ–°",
    "text": "æœ€æ–°æ›´æ–°"
  },
  {
    "objectID": "index.html#ä½¿ç”¨base-rçš„mosaicplot",
    "href": "index.html#ä½¿ç”¨base-rçš„mosaicplot",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä½¿ç”¨base Rçš„mosaicplot",
    "text": "ä½¿ç”¨base Rçš„mosaicplot\n# ä½¿ç”¨Titanicæ•°æ®\ndata(Titanic)\n\n# åŸºç¡€é©¬èµ›å…‹å›¾\nmosaicplot(Titanic,\n    main = \"æ³°å¦å°¼å…‹å·æ•°æ®é©¬èµ›å…‹å›¾\",\n    color = c(\"#ef4444\", \"#10b981\"),\n    shade = FALSE, border = \"white\"\n)"
  },
  {
    "objectID": "index.html#ç®€åŒ–ç‰ˆé©¬èµ›å…‹å›¾",
    "href": "index.html#ç®€åŒ–ç‰ˆé©¬èµ›å…‹å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ç®€åŒ–ç‰ˆé©¬èµ›å…‹å›¾",
    "text": "ç®€åŒ–ç‰ˆé©¬èµ›å…‹å›¾\n# åªçœ‹èˆ±ä½å’Œç”Ÿè¿˜\nmosaicplot(~ Class + Survived,\n    data = Titanic,\n    main = \"ç”Ÿè¿˜ç‡ - æŒ‰èˆ±ä½\",\n    color = c(\"#ef4444\", \"#10b981\"),\n    border = \"white\"\n)"
  },
  {
    "objectID": "index.html#æŒ‰æ€§åˆ«å’Œç”Ÿè¿˜",
    "href": "index.html#æŒ‰æ€§åˆ«å’Œç”Ÿè¿˜",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "æŒ‰æ€§åˆ«å’Œç”Ÿè¿˜",
    "text": "æŒ‰æ€§åˆ«å’Œç”Ÿè¿˜\nmosaicplot(~ Sex + Survived,\n    data = Titanic,\n    main = \"ç”Ÿè¿˜ç‡ - æŒ‰æ€§åˆ«\",\n    color = c(\"#ef4444\", \"#10b981\"),\n    border = \"white\"\n)"
  },
  {
    "objectID": "index.html#ä½¿ç”¨ggplot2æ‰‹åŠ¨ç»˜åˆ¶",
    "href": "index.html#ä½¿ç”¨ggplot2æ‰‹åŠ¨ç»˜åˆ¶",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä½¿ç”¨ggplot2æ‰‹åŠ¨ç»˜åˆ¶",
    "text": "ä½¿ç”¨ggplot2æ‰‹åŠ¨ç»˜åˆ¶\n# è½¬ä¸ºæ•°æ®æ¡†\ntitanic_df &lt;- as.data.frame(Titanic)\n\n# è®¡ç®—æ¯”ä¾‹\ntitanic_summary &lt;- titanic_df %&gt;%\n    group_by(Class, Survived) %&gt;%\n    summarise(n = sum(Freq), .groups = \"drop\") %&gt;%\n    group_by(Class) %&gt;%\n    mutate(\n        prop = n / sum(n),\n        ymax = cumsum(prop),\n        ymin = lag(ymax, default = 0)\n    )\n\n# è®¡ç®—å„èˆ±ä½å®½åº¦\nclass_width &lt;- titanic_df %&gt;%\n    group_by(Class) %&gt;%\n    summarise(total = sum(Freq)) %&gt;%\n    mutate(\n        prop = total / sum(total),\n        xmax = cumsum(prop),\n        xmin = lag(xmax, default = 0)\n    )\n\n# åˆå¹¶\nplot_data &lt;- titanic_summary %&gt;%\n    left_join(class_width %&gt;% select(Class, xmin, xmax), by = \"Class\")\n\nggplot(plot_data) +\n    geom_rect(aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax, fill = Survived),\n        color = \"white\", linewidth = 0.5\n    ) +\n    scale_fill_manual(values = c(\"No\" = \"#ef4444\", \"Yes\" = \"#10b981\")) +\n    scale_x_continuous(\n        breaks = class_width$xmin + (class_width$xmax - class_width$xmin) / 2,\n        labels = class_width$Class\n    ) +\n    scale_y_continuous(labels = scales::percent) +\n    labs(\n        title = \"æ³°å¦å°¼å…‹å·ç”Ÿè¿˜ç‡é©¬èµ›å…‹å›¾\",\n        subtitle = \"çŸ©å½¢å®½åº¦=èˆ±ä½äººæ•°æ¯”ä¾‹ï¼Œé«˜åº¦=ç”Ÿè¿˜æ¯”ä¾‹\",\n        x = \"èˆ±ä½ç­‰çº§\",\n        y = \"æ¯”ä¾‹\",\n        fill = \"ç”Ÿè¿˜\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"top\"\n    )"
  },
  {
    "objectID": "2050-bindcountplot.html#ä½¿ç”¨base-rçš„mosaicplot",
    "href": "2050-bindcountplot.html#ä½¿ç”¨base-rçš„mosaicplot",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä½¿ç”¨base Rçš„mosaicplot",
    "text": "ä½¿ç”¨base Rçš„mosaicplot\n# ä½¿ç”¨Titanicæ•°æ®\ndata(Titanic)\n\n# åŸºç¡€é©¬èµ›å…‹å›¾\nmosaicplot(Titanic,\n    main = \"æ³°å¦å°¼å…‹å·æ•°æ®é©¬èµ›å…‹å›¾\",\n    color = c(\"#ef4444\", \"#10b981\"),\n    shade = FALSE, border = \"white\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#ç®€åŒ–ç‰ˆé©¬èµ›å…‹å›¾",
    "href": "2050-bindcountplot.html#ç®€åŒ–ç‰ˆé©¬èµ›å…‹å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ç®€åŒ–ç‰ˆé©¬èµ›å…‹å›¾",
    "text": "ç®€åŒ–ç‰ˆé©¬èµ›å…‹å›¾\n# åªçœ‹èˆ±ä½å’Œç”Ÿè¿˜\nmosaicplot(~ Class + Survived,\n    data = Titanic,\n    main = \"ç”Ÿè¿˜ç‡ - æŒ‰èˆ±ä½\",\n    color = c(\"#ef4444\", \"#10b981\"),\n    border = \"white\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#æŒ‰æ€§åˆ«å’Œç”Ÿè¿˜",
    "href": "2050-bindcountplot.html#æŒ‰æ€§åˆ«å’Œç”Ÿè¿˜",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "æŒ‰æ€§åˆ«å’Œç”Ÿè¿˜",
    "text": "æŒ‰æ€§åˆ«å’Œç”Ÿè¿˜\nmosaicplot(~ Sex + Survived,\n    data = Titanic,\n    main = \"ç”Ÿè¿˜ç‡ - æŒ‰æ€§åˆ«\",\n    color = c(\"#ef4444\", \"#10b981\"),\n    border = \"white\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2050-bindcountplot.html#ä½¿ç”¨ggplot2æ‰‹åŠ¨ç»˜åˆ¶",
    "href": "2050-bindcountplot.html#ä½¿ç”¨ggplot2æ‰‹åŠ¨ç»˜åˆ¶",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "ä½¿ç”¨ggplot2æ‰‹åŠ¨ç»˜åˆ¶",
    "text": "ä½¿ç”¨ggplot2æ‰‹åŠ¨ç»˜åˆ¶\n# è½¬ä¸ºæ•°æ®æ¡†\ntitanic_df &lt;- as.data.frame(Titanic)\n\n# è®¡ç®—æ¯”ä¾‹\ntitanic_summary &lt;- titanic_df %&gt;%\n    group_by(Class, Survived) %&gt;%\n    summarise(n = sum(Freq), .groups = \"drop\") %&gt;%\n    group_by(Class) %&gt;%\n    mutate(\n        prop = n / sum(n),\n        ymax = cumsum(prop),\n        ymin = lag(ymax, default = 0)\n    )\n\n# è®¡ç®—å„èˆ±ä½å®½åº¦\nclass_width &lt;- titanic_df %&gt;%\n    group_by(Class) %&gt;%\n    summarise(total = sum(Freq)) %&gt;%\n    mutate(\n        prop = total / sum(total),\n        xmax = cumsum(prop),\n        xmin = lag(xmax, default = 0)\n    )\n\n# åˆå¹¶\nplot_data &lt;- titanic_summary %&gt;%\n    left_join(class_width %&gt;% select(Class, xmin, xmax), by = \"Class\")\n\nggplot(plot_data) +\n    geom_rect(aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax, fill = Survived),\n        color = \"white\", linewidth = 0.5\n    ) +\n    scale_fill_manual(values = c(\"No\" = \"#ef4444\", \"Yes\" = \"#10b981\")) +\n    scale_x_continuous(\n        breaks = class_width$xmin + (class_width$xmax - class_width$xmin) / 2,\n        labels = class_width$Class\n    ) +\n    scale_y_continuous(labels = scales::percent) +\n    labs(\n        title = \"æ³°å¦å°¼å…‹å·ç”Ÿè¿˜ç‡é©¬èµ›å…‹å›¾\",\n        subtitle = \"çŸ©å½¢å®½åº¦=èˆ±ä½äººæ•°æ¯”ä¾‹ï¼Œé«˜åº¦=ç”Ÿè¿˜æ¯”ä¾‹\",\n        x = \"èˆ±ä½ç­‰çº§\",\n        y = \"æ¯”ä¾‹\",\n        fill = \"ç”Ÿè¿˜\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"top\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "å¯è§†åŒ–æ•™ç¨‹",
      "ğŸ“Š ç»Ÿè®¡å›¾è¡¨",
      "è®¡æ•°å›¾ä¸åˆ†ç±»å›¾"
    ]
  },
  {
    "objectID": "2058-bindmosaic.html",
    "href": "2058-bindmosaic.html",
    "title": "Rè¯­è¨€é©¬èµ›å…‹å›¾ç»˜åˆ¶",
    "section": "",
    "text": "é©¬èµ›å…‹å›¾ï¼ˆMosaic Plotï¼‰ç”¨çŸ©å½¢é¢ç§¯è¡¨ç¤ºåˆ†ç±»å˜é‡çš„äº¤å‰é¢‘æ•°ï¼Œæ˜¯æ¢ç´¢å¤šä¸ªåˆ†ç±»å˜é‡å…³ç³»çš„æœ‰åŠ›å·¥å…·ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "é©¬èµ›å…‹å›¾"
    ]
  },
  {
    "objectID": "2058-bindmosaic.html#ä»€ä¹ˆæ˜¯é©¬èµ›å…‹å›¾",
    "href": "2058-bindmosaic.html#ä»€ä¹ˆæ˜¯é©¬èµ›å…‹å›¾",
    "title": "Rè¯­è¨€é©¬èµ›å…‹å›¾ç»˜åˆ¶",
    "section": "",
    "text": "é©¬èµ›å…‹å›¾ï¼ˆMosaic Plotï¼‰ç”¨çŸ©å½¢é¢ç§¯è¡¨ç¤ºåˆ†ç±»å˜é‡çš„äº¤å‰é¢‘æ•°ï¼Œæ˜¯æ¢ç´¢å¤šä¸ªåˆ†ç±»å˜é‡å…³ç³»çš„æœ‰åŠ›å·¥å…·ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "é©¬èµ›å…‹å›¾"
    ]
  },
  {
    "objectID": "2058-bindmosaic.html#råŒ…åŠ è½½",
    "href": "2058-bindmosaic.html#råŒ…åŠ è½½",
    "title": "Rè¯­è¨€é©¬èµ›å…‹å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\n\nlibrary(ggplot2)\nlibrary(dplyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "é©¬èµ›å…‹å›¾"
    ]
  },
  {
    "objectID": "2058-bindmosaic.html#ä½¿ç”¨base-rçš„mosaicplot",
    "href": "2058-bindmosaic.html#ä½¿ç”¨base-rçš„mosaicplot",
    "title": "Rè¯­è¨€é©¬èµ›å…‹å›¾ç»˜åˆ¶",
    "section": "ä½¿ç”¨base Rçš„mosaicplot",
    "text": "ä½¿ç”¨base Rçš„mosaicplot\n\n# ä½¿ç”¨Titanicæ•°æ®\ndata(Titanic)\n\n# åŸºç¡€é©¬èµ›å…‹å›¾\nmosaicplot(Titanic,\n    main = \"æ³°å¦å°¼å…‹å·æ•°æ®é©¬èµ›å…‹å›¾\",\n    color = c(\"#ef4444\", \"#10b981\"),\n    shade = FALSE, border = \"white\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "é©¬èµ›å…‹å›¾"
    ]
  },
  {
    "objectID": "2058-bindmosaic.html#ç®€åŒ–ç‰ˆé©¬èµ›å…‹å›¾",
    "href": "2058-bindmosaic.html#ç®€åŒ–ç‰ˆé©¬èµ›å…‹å›¾",
    "title": "Rè¯­è¨€é©¬èµ›å…‹å›¾ç»˜åˆ¶",
    "section": "ç®€åŒ–ç‰ˆé©¬èµ›å…‹å›¾",
    "text": "ç®€åŒ–ç‰ˆé©¬èµ›å…‹å›¾\n\n# åªçœ‹èˆ±ä½å’Œç”Ÿè¿˜\nmosaicplot(~ Class + Survived,\n    data = Titanic,\n    main = \"ç”Ÿè¿˜ç‡ - æŒ‰èˆ±ä½\",\n    color = c(\"#ef4444\", \"#10b981\"),\n    border = \"white\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "é©¬èµ›å…‹å›¾"
    ]
  },
  {
    "objectID": "2058-bindmosaic.html#æŒ‰æ€§åˆ«å’Œç”Ÿè¿˜",
    "href": "2058-bindmosaic.html#æŒ‰æ€§åˆ«å’Œç”Ÿè¿˜",
    "title": "Rè¯­è¨€é©¬èµ›å…‹å›¾ç»˜åˆ¶",
    "section": "æŒ‰æ€§åˆ«å’Œç”Ÿè¿˜",
    "text": "æŒ‰æ€§åˆ«å’Œç”Ÿè¿˜\n\nmosaicplot(~ Sex + Survived,\n    data = Titanic,\n    main = \"ç”Ÿè¿˜ç‡ - æŒ‰æ€§åˆ«\",\n    color = c(\"#ef4444\", \"#10b981\"),\n    border = \"white\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "é©¬èµ›å…‹å›¾"
    ]
  },
  {
    "objectID": "2058-bindmosaic.html#ä½¿ç”¨ggplot2æ‰‹åŠ¨ç»˜åˆ¶",
    "href": "2058-bindmosaic.html#ä½¿ç”¨ggplot2æ‰‹åŠ¨ç»˜åˆ¶",
    "title": "Rè¯­è¨€é©¬èµ›å…‹å›¾ç»˜åˆ¶",
    "section": "ä½¿ç”¨ggplot2æ‰‹åŠ¨ç»˜åˆ¶",
    "text": "ä½¿ç”¨ggplot2æ‰‹åŠ¨ç»˜åˆ¶\n\n# è½¬ä¸ºæ•°æ®æ¡†\ntitanic_df &lt;- as.data.frame(Titanic)\n\n# è®¡ç®—æ¯”ä¾‹\ntitanic_summary &lt;- titanic_df %&gt;%\n    group_by(Class, Survived) %&gt;%\n    summarise(n = sum(Freq), .groups = \"drop\") %&gt;%\n    group_by(Class) %&gt;%\n    mutate(\n        prop = n / sum(n),\n        ymax = cumsum(prop),\n        ymin = lag(ymax, default = 0)\n    )\n\n# è®¡ç®—å„èˆ±ä½å®½åº¦\nclass_width &lt;- titanic_df %&gt;%\n    group_by(Class) %&gt;%\n    summarise(total = sum(Freq)) %&gt;%\n    mutate(\n        prop = total / sum(total),\n        xmax = cumsum(prop),\n        xmin = lag(xmax, default = 0)\n    )\n\n# åˆå¹¶\nplot_data &lt;- titanic_summary %&gt;%\n    left_join(class_width %&gt;% select(Class, xmin, xmax), by = \"Class\")\n\nggplot(plot_data) +\n    geom_rect(aes(xmin = xmin, xmax = xmax, ymin = ymin, ymax = ymax, fill = Survived),\n        color = \"white\", linewidth = 0.5\n    ) +\n    scale_fill_manual(values = c(\"No\" = \"#ef4444\", \"Yes\" = \"#10b981\")) +\n    scale_x_continuous(\n        breaks = class_width$xmin + (class_width$xmax - class_width$xmin) / 2,\n        labels = class_width$Class\n    ) +\n    scale_y_continuous(labels = scales::percent) +\n    labs(\n        title = \"æ³°å¦å°¼å…‹å·ç”Ÿè¿˜ç‡é©¬èµ›å…‹å›¾\",\n        subtitle = \"çŸ©å½¢å®½åº¦=èˆ±ä½äººæ•°æ¯”ä¾‹ï¼Œé«˜åº¦=ç”Ÿè¿˜æ¯”ä¾‹\",\n        x = \"èˆ±ä½ç­‰çº§\",\n        y = \"æ¯”ä¾‹\",\n        fill = \"ç”Ÿè¿˜\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"top\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "é©¬èµ›å…‹å›¾"
    ]
  },
  {
    "objectID": "2058-bindmosaic.html#æ€»ç»“",
    "href": "2058-bindmosaic.html#æ€»ç»“",
    "title": "Rè¯­è¨€é©¬èµ›å…‹å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå‡½æ•°\nç‰¹ç‚¹\n\n\n\n\nmosaicplot()\nåŸºç¡€Rï¼Œå¿«é€Ÿç®€å•\n\n\nggplot2 æ‰‹åŠ¨\næ›´çµæ´»ç¾è§‚\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\nåå¤«é¥¼å›¾ä¸æ ‘å½¢å›¾\nè®¡æ•°å›¾ä¸åˆ†ç±»å›¾",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ¨ ç‰¹æ®Šå›¾å½¢",
      "é©¬èµ›å…‹å›¾"
    ]
  },
  {
    "objectID": "2059-bindribbon.html",
    "href": "2059-bindribbon.html",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "",
    "text": "ç½®ä¿¡åŒºé—´å›¾ï¼ˆRibbon/Error Bandï¼‰åœ¨æŠ˜çº¿å›¾åŸºç¡€ä¸Šæ·»åŠ ç½®ä¿¡åŒºé—´å¸¦ï¼Œå±•ç¤ºä¼°è®¡å€¼çš„ä¸ç¡®å®šæ€§èŒƒå›´ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "ç½®ä¿¡åŒºé—´å›¾"
    ]
  },
  {
    "objectID": "2059-bindribbon.html#ä»€ä¹ˆæ˜¯ç½®ä¿¡åŒºé—´å›¾",
    "href": "2059-bindribbon.html#ä»€ä¹ˆæ˜¯ç½®ä¿¡åŒºé—´å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "",
    "text": "ç½®ä¿¡åŒºé—´å›¾ï¼ˆRibbon/Error Bandï¼‰åœ¨æŠ˜çº¿å›¾åŸºç¡€ä¸Šæ·»åŠ ç½®ä¿¡åŒºé—´å¸¦ï¼Œå±•ç¤ºä¼°è®¡å€¼çš„ä¸ç¡®å®šæ€§èŒƒå›´ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "ç½®ä¿¡åŒºé—´å›¾"
    ]
  },
  {
    "objectID": "2059-bindribbon.html#råŒ…åŠ è½½",
    "href": "2059-bindribbon.html#råŒ…åŠ è½½",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\n\nlibrary(ggplot2)\nlibrary(dplyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "ç½®ä¿¡åŒºé—´å›¾"
    ]
  },
  {
    "objectID": "2059-bindribbon.html#å‡†å¤‡æ•°æ®",
    "href": "2059-bindribbon.html#å‡†å¤‡æ•°æ®",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "å‡†å¤‡æ•°æ®",
    "text": "å‡†å¤‡æ•°æ®\n\nset.seed(42)\ntime_series &lt;- data.frame(\n    time = 1:50,\n    value = 100 + cumsum(rnorm(50, 0.5, 2)),\n    se = abs(rnorm(50, 3, 1))\n) %&gt;%\n    mutate(\n        lower = value - 1.96 * se,\n        upper = value + 1.96 * se\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "ç½®ä¿¡åŒºé—´å›¾"
    ]
  },
  {
    "objectID": "2059-bindribbon.html#åŸºç¡€ç½®ä¿¡åŒºé—´å›¾",
    "href": "2059-bindribbon.html#åŸºç¡€ç½®ä¿¡åŒºé—´å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€ç½®ä¿¡åŒºé—´å›¾",
    "text": "åŸºç¡€ç½®ä¿¡åŒºé—´å›¾\n\nggplot(time_series, aes(x = time, y = value)) +\n    geom_ribbon(aes(ymin = lower, ymax = upper), fill = \"#4f46e5\", alpha = 0.3) +\n    geom_line(color = \"#4f46e5\", linewidth = 1) +\n    labs(\n        title = \"å¸¦95%ç½®ä¿¡åŒºé—´çš„æ—¶åºå›¾\",\n        x = \"æ—¶é—´\",\n        y = \"æ•°å€¼\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(plot.title = element_text(face = \"bold\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "ç½®ä¿¡åŒºé—´å›¾"
    ]
  },
  {
    "objectID": "2059-bindribbon.html#å¤šç»„å¯¹æ¯”",
    "href": "2059-bindribbon.html#å¤šç»„å¯¹æ¯”",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "å¤šç»„å¯¹æ¯”",
    "text": "å¤šç»„å¯¹æ¯”\n\n# åˆ›å»ºä¸¤ç»„æ•°æ®\nset.seed(42)\nmulti_group &lt;- rbind(\n    time_series %&gt;% mutate(group = \"Aç»„\"),\n    data.frame(\n        time = 1:50,\n        value = 90 + cumsum(rnorm(50, 0.3, 2)),\n        se = abs(rnorm(50, 2.5, 1))\n    ) %&gt;%\n        mutate(lower = value - 1.96 * se, upper = value + 1.96 * se, group = \"Bç»„\")\n)\n\nggplot(multi_group, aes(x = time, y = value, color = group, fill = group)) +\n    geom_ribbon(aes(ymin = lower, ymax = upper), alpha = 0.2, color = NA) +\n    geom_line(linewidth = 1) +\n    scale_color_manual(values = c(\"#4f46e5\", \"#10b981\")) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\")) +\n    labs(title = \"ä¸¤ç»„æ•°æ®ç½®ä¿¡åŒºé—´å¯¹æ¯”\", x = \"æ—¶é—´\", y = \"æ•°å€¼\", color = NULL, fill = NULL) +\n    theme_minimal() +\n    theme(plot.title = element_text(face = \"bold\"), legend.position = \"top\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "ç½®ä¿¡åŒºé—´å›¾"
    ]
  },
  {
    "objectID": "2059-bindribbon.html#è¯¯å·®æ£’å›¾",
    "href": "2059-bindribbon.html#è¯¯å·®æ£’å›¾",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "è¯¯å·®æ£’å›¾",
    "text": "è¯¯å·®æ£’å›¾\n\n# åˆ†ç»„å‡å€¼å’Œè¯¯å·®\nsummary_data &lt;- data.frame(\n    group = c(\"A\", \"B\", \"C\", \"D\"),\n    mean = c(25, 32, 28, 35),\n    se = c(2, 3, 2.5, 4)\n)\n\nggplot(summary_data, aes(x = group, y = mean, fill = group)) +\n    geom_col(alpha = 0.8, width = 0.6) +\n    geom_errorbar(aes(ymin = mean - se, ymax = mean + se), width = 0.2) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\", \"#ec4899\")) +\n    labs(title = \"å¸¦è¯¯å·®æ£’çš„æŸ±çŠ¶å›¾\", x = NULL, y = \"å‡å€¼\") +\n    theme_minimal() +\n    theme(plot.title = element_text(face = \"bold\"), legend.position = \"none\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "ç½®ä¿¡åŒºé—´å›¾"
    ]
  },
  {
    "objectID": "2059-bindribbon.html#æ€»ç»“",
    "href": "2059-bindribbon.html#æ€»ç»“",
    "title": "Rè¯­è¨€ç½®ä¿¡åŒºé—´å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå›¾è¡¨ç±»å‹\nå‡½æ•°\n\n\n\n\nç½®ä¿¡å¸¦\ngeom_ribbon()\n\n\nè¯¯å·®æ£’\ngeom_errorbar()\n\n\nç‚¹è¯¯å·®\ngeom_pointrange()\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\næŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—\næ£®æ—å›¾",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "ç½®ä¿¡åŒºé—´å›¾"
    ]
  },
  {
    "objectID": "2051-bindpairplot.html",
    "href": "2051-bindpairplot.html",
    "title": "Rè¯­è¨€çŸ©é˜µå›¾ä¸æˆå¯¹å›¾ç»˜åˆ¶",
    "section": "",
    "text": "çŸ©é˜µå›¾ï¼ˆPairwise Plot/Pairs Plotï¼‰å°†å¤šä¸ªå˜é‡ä¸¤ä¸¤ç»„åˆï¼Œåœ¨ä¸€ä¸ªçŸ©é˜µå¸ƒå±€ä¸­åŒæ—¶å±•ç¤ºæ‰€æœ‰å˜é‡ä¹‹é—´çš„å…³ç³»ï¼Œæ˜¯å¤šå˜é‡æ¢ç´¢æ€§åˆ†æçš„åˆ©å™¨ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "çŸ©é˜µå›¾ä¸æˆå¯¹å›¾"
    ]
  },
  {
    "objectID": "2051-bindpairplot.html#ä»€ä¹ˆæ˜¯çŸ©é˜µå›¾æˆå¯¹å›¾",
    "href": "2051-bindpairplot.html#ä»€ä¹ˆæ˜¯çŸ©é˜µå›¾æˆå¯¹å›¾",
    "title": "Rè¯­è¨€çŸ©é˜µå›¾ä¸æˆå¯¹å›¾ç»˜åˆ¶",
    "section": "",
    "text": "çŸ©é˜µå›¾ï¼ˆPairwise Plot/Pairs Plotï¼‰å°†å¤šä¸ªå˜é‡ä¸¤ä¸¤ç»„åˆï¼Œåœ¨ä¸€ä¸ªçŸ©é˜µå¸ƒå±€ä¸­åŒæ—¶å±•ç¤ºæ‰€æœ‰å˜é‡ä¹‹é—´çš„å…³ç³»ï¼Œæ˜¯å¤šå˜é‡æ¢ç´¢æ€§åˆ†æçš„åˆ©å™¨ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "çŸ©é˜µå›¾ä¸æˆå¯¹å›¾"
    ]
  },
  {
    "objectID": "2051-bindpairplot.html#råŒ…åŠ è½½",
    "href": "2051-bindpairplot.html#råŒ…åŠ è½½",
    "title": "Rè¯­è¨€çŸ©é˜µå›¾ä¸æˆå¯¹å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(GGally)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "çŸ©é˜µå›¾ä¸æˆå¯¹å›¾"
    ]
  },
  {
    "objectID": "2051-bindpairplot.html#åŸºç¡€æˆå¯¹å›¾",
    "href": "2051-bindpairplot.html#åŸºç¡€æˆå¯¹å›¾",
    "title": "Rè¯­è¨€çŸ©é˜µå›¾ä¸æˆå¯¹å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€æˆå¯¹å›¾",
    "text": "åŸºç¡€æˆå¯¹å›¾\n\n# ä½¿ç”¨å†…ç½®irisæ•°æ®\nggpairs(iris, columns = 1:4, aes(color = Species, alpha = 0.6)) +\n    scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    theme_minimal() +\n    theme(plot.title = element_text(face = \"bold\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "çŸ©é˜µå›¾ä¸æˆå¯¹å›¾"
    ]
  },
  {
    "objectID": "2051-bindpairplot.html#è‡ªå®šä¹‰å¯¹è§’çº¿",
    "href": "2051-bindpairplot.html#è‡ªå®šä¹‰å¯¹è§’çº¿",
    "title": "Rè¯­è¨€çŸ©é˜µå›¾ä¸æˆå¯¹å›¾ç»˜åˆ¶",
    "section": "è‡ªå®šä¹‰å¯¹è§’çº¿",
    "text": "è‡ªå®šä¹‰å¯¹è§’çº¿\n\nggpairs(iris,\n    columns = 1:4, aes(color = Species),\n    diag = list(continuous = wrap(\"densityDiag\", alpha = 0.5)),\n    lower = list(continuous = wrap(\"points\", alpha = 0.5, size = 1)),\n    upper = list(continuous = wrap(\"cor\", size = 3))\n) +\n    scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    theme_bw()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "çŸ©é˜µå›¾ä¸æˆå¯¹å›¾"
    ]
  },
  {
    "objectID": "2051-bindpairplot.html#ä½¿ç”¨åŸºç¡€rçš„pairså‡½æ•°",
    "href": "2051-bindpairplot.html#ä½¿ç”¨åŸºç¡€rçš„pairså‡½æ•°",
    "title": "Rè¯­è¨€çŸ©é˜µå›¾ä¸æˆå¯¹å›¾ç»˜åˆ¶",
    "section": "ä½¿ç”¨åŸºç¡€Rçš„pairså‡½æ•°",
    "text": "ä½¿ç”¨åŸºç¡€Rçš„pairså‡½æ•°\n\npairs(iris[, 1:4],\n    col = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")[iris$Species],\n    pch = 19,\n    main = \"é¸¢å°¾èŠ±æ•°æ®çŸ©é˜µå›¾\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "çŸ©é˜µå›¾ä¸æˆå¯¹å›¾"
    ]
  },
  {
    "objectID": "2051-bindpairplot.html#æ€»ç»“",
    "href": "2051-bindpairplot.html#æ€»ç»“",
    "title": "Rè¯­è¨€çŸ©é˜µå›¾ä¸æˆå¯¹å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå‡½æ•°\nç‰¹ç‚¹\n\n\n\n\nGGally::ggpairs()\næœ€çµæ´»ï¼Œggplot2é£æ ¼\n\n\npairs()\nåŸºç¡€Rï¼Œå¿«é€Ÿç®€å•\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\nç›¸å…³å›¾çŸ©é˜µ\næ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "çŸ©é˜µå›¾ä¸æˆå¯¹å›¾"
    ]
  },
  {
    "objectID": "3013-duckplyr.html",
    "href": "3013-duckplyr.html",
    "title": "duckplyr - é«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "",
    "text": "duckplyr æ˜¯ä¸€ä¸ªç”± DuckDB é©±åŠ¨çš„ dplyr æ›¿ä»£åŒ…ï¼Œå®ƒæä¾›äº†ä¸ dplyr å®Œå…¨å…¼å®¹çš„è¯­æ³•ï¼Œä½†åº•å±‚ä½¿ç”¨ DuckDB çš„é«˜æ€§èƒ½æŸ¥è¯¢å¼•æ“æ¥æ‰§è¡Œæ“ä½œã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ç”¨ç†Ÿæ‚‰çš„ dplyr ä»£ç ï¼Œè·å¾—æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚\n\n\nDuckDB æ˜¯ä¸€ä¸ªåµŒå…¥å¼åˆ†æå‹æ•°æ®åº“ï¼Œä¸“ä¸ºé«˜æ•ˆå¤„ç†åˆ†ææŸ¥è¯¢è€Œè®¾è®¡ã€‚å®ƒå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\n\nåˆ—å¼å­˜å‚¨ï¼šé’ˆå¯¹åˆ†ææŸ¥è¯¢ä¼˜åŒ–\nå‘é‡åŒ–æ‰§è¡Œï¼šæ‰¹é‡å¤„ç†æ•°æ®ï¼Œå‡å°‘å‡½æ•°è°ƒç”¨å¼€é”€\né›¶æ‹·è´é›†æˆï¼šç›´æ¥åœ¨ R æ•°æ®æ¡†ä¸Šæ“ä½œï¼Œæ— éœ€æ•°æ®å¤åˆ¶\nè‡ªåŠ¨å¹¶è¡Œï¼šå……åˆ†åˆ©ç”¨å¤šæ ¸ CPU\n\n\n\n\n\n\n\nç‰¹ç‚¹\nè¯´æ˜\n\n\n\n\næ€§èƒ½é£è·ƒ\nå¤§æ•°æ®é›†å¤„ç†é€Ÿåº¦å¯æå‡ 10-100 å€\n\n\næ— ç¼æ›¿æ¢\nè¯­æ³•ä¸ dplyr å®Œå…¨å…¼å®¹ï¼Œæ— éœ€é‡å†™ä»£ç \n\n\næƒ°æ€§è®¡ç®—\nå»¶è¿Ÿæ‰§è¡Œï¼Œè‡ªåŠ¨ä¼˜åŒ–æŸ¥è¯¢è®¡åˆ’\n\n\nè¶…å†…å­˜å¤„ç†\nå¯å¤„ç†è¶…å‡ºå†…å­˜å¤§å°çš„æ•°æ®é›†\n\n\nè‡ªåŠ¨å›é€€\nä¸æ”¯æŒçš„æ“ä½œè‡ªåŠ¨å›é€€åˆ° dplyr\n\n\n\n\n\n\n\n\n\n\n\nç‰¹æ€§\ndplyr\nduckplyr\n\n\n\n\næ‰§è¡Œå¼•æ“\nR åŸç”Ÿ\nDuckDB\n\n\nè®¡ç®—æ¨¡å¼\nå³æ—¶æ‰§è¡Œ\næƒ°æ€§è®¡ç®—\n\n\nå¤§æ•°æ®å¤„ç†\nå—é™äºå†…å­˜\nç£ç›˜æº¢å‡º\n\n\nå†…å­˜é™åˆ¶\nå— RAM é™åˆ¶\nå¯è¶…å‡º RAM\n\n\næŸ¥è¯¢ä¼˜åŒ–\næ— \nè‡ªåŠ¨ä¼˜åŒ–",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "duckplyr - é«˜æ€§èƒ½æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3013-duckplyr.html#duckplyr-ç®€ä»‹",
    "href": "3013-duckplyr.html#duckplyr-ç®€ä»‹",
    "title": "duckplyr - é«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "",
    "text": "duckplyr æ˜¯ä¸€ä¸ªç”± DuckDB é©±åŠ¨çš„ dplyr æ›¿ä»£åŒ…ï¼Œå®ƒæä¾›äº†ä¸ dplyr å®Œå…¨å…¼å®¹çš„è¯­æ³•ï¼Œä½†åº•å±‚ä½¿ç”¨ DuckDB çš„é«˜æ€§èƒ½æŸ¥è¯¢å¼•æ“æ¥æ‰§è¡Œæ“ä½œã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ç”¨ç†Ÿæ‚‰çš„ dplyr ä»£ç ï¼Œè·å¾—æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚\n\n\nDuckDB æ˜¯ä¸€ä¸ªåµŒå…¥å¼åˆ†æå‹æ•°æ®åº“ï¼Œä¸“ä¸ºé«˜æ•ˆå¤„ç†åˆ†ææŸ¥è¯¢è€Œè®¾è®¡ã€‚å®ƒå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\n\nåˆ—å¼å­˜å‚¨ï¼šé’ˆå¯¹åˆ†ææŸ¥è¯¢ä¼˜åŒ–\nå‘é‡åŒ–æ‰§è¡Œï¼šæ‰¹é‡å¤„ç†æ•°æ®ï¼Œå‡å°‘å‡½æ•°è°ƒç”¨å¼€é”€\né›¶æ‹·è´é›†æˆï¼šç›´æ¥åœ¨ R æ•°æ®æ¡†ä¸Šæ“ä½œï¼Œæ— éœ€æ•°æ®å¤åˆ¶\nè‡ªåŠ¨å¹¶è¡Œï¼šå……åˆ†åˆ©ç”¨å¤šæ ¸ CPU\n\n\n\n\n\n\n\nç‰¹ç‚¹\nè¯´æ˜\n\n\n\n\næ€§èƒ½é£è·ƒ\nå¤§æ•°æ®é›†å¤„ç†é€Ÿåº¦å¯æå‡ 10-100 å€\n\n\næ— ç¼æ›¿æ¢\nè¯­æ³•ä¸ dplyr å®Œå…¨å…¼å®¹ï¼Œæ— éœ€é‡å†™ä»£ç \n\n\næƒ°æ€§è®¡ç®—\nå»¶è¿Ÿæ‰§è¡Œï¼Œè‡ªåŠ¨ä¼˜åŒ–æŸ¥è¯¢è®¡åˆ’\n\n\nè¶…å†…å­˜å¤„ç†\nå¯å¤„ç†è¶…å‡ºå†…å­˜å¤§å°çš„æ•°æ®é›†\n\n\nè‡ªåŠ¨å›é€€\nä¸æ”¯æŒçš„æ“ä½œè‡ªåŠ¨å›é€€åˆ° dplyr\n\n\n\n\n\n\n\n\n\n\n\nç‰¹æ€§\ndplyr\nduckplyr\n\n\n\n\næ‰§è¡Œå¼•æ“\nR åŸç”Ÿ\nDuckDB\n\n\nè®¡ç®—æ¨¡å¼\nå³æ—¶æ‰§è¡Œ\næƒ°æ€§è®¡ç®—\n\n\nå¤§æ•°æ®å¤„ç†\nå—é™äºå†…å­˜\nç£ç›˜æº¢å‡º\n\n\nå†…å­˜é™åˆ¶\nå— RAM é™åˆ¶\nå¯è¶…å‡º RAM\n\n\næŸ¥è¯¢ä¼˜åŒ–\næ— \nè‡ªåŠ¨ä¼˜åŒ–",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "duckplyr - é«˜æ€§èƒ½æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3013-duckplyr.html#å®‰è£…ä¸åŠ è½½",
    "href": "3013-duckplyr.html#å®‰è£…ä¸åŠ è½½",
    "title": "duckplyr - é«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\nduckplyr å·²ç»åœ¨ CRAN ä¸Šå‘å¸ƒï¼Œå¯ä»¥ç›´æ¥å®‰è£…ï¼š\n\n# ä» CRAN å®‰è£…\ninstall.packages(\"duckplyr\")\n\n# æˆ–ä» GitHub å®‰è£…å¼€å‘ç‰ˆ\n# install.packages(\"pak\")\n# pak::pak(\"tidyverse/duckplyr\")\n\n\nä¸¤ç§ä½¿ç”¨æ–¹å¼\nduckplyr æä¾›äº†ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼Œå¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©ï¼š\n\næ–¹å¼ä¸€ï¼šå…¨å±€è¦†ç›– dplyrï¼ˆæ¨èï¼‰\nåŠ è½½ duckplyr åï¼Œå®ƒä¼šè‡ªåŠ¨è¦†ç›– dplyr çš„æ–¹æ³•ï¼Œæ‰€æœ‰åç»­çš„ dplyr æ“ä½œéƒ½ä¼šä½¿ç”¨ DuckDB æ‰§è¡Œï¼š\n\nlibrary(duckplyr)\n\nè¿™ç§æ–¹å¼çš„ä¼˜ç‚¹æ˜¯ï¼š - æ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç  - æ‰€æœ‰ dplyr æ“ä½œè‡ªåŠ¨åŠ é€Ÿ - å¦‚æœæŸä¸ªæ“ä½œ DuckDB ä¸æ”¯æŒï¼Œä¼šè‡ªåŠ¨å›é€€åˆ° dplyr\nå¦‚æœéœ€è¦æ¢å¤åŸå§‹ dplyr è¡Œä¸ºï¼š\n\n# æ¢å¤ dplyr æ–¹æ³•\nduckplyr::methods_restore()\n\n\n\næ–¹å¼äºŒï¼šé€ä¸ªè½¬æ¢æ•°æ®æ¡†\nå¦‚æœåªæƒ³å¯¹ç‰¹å®šæ•°æ®æ¡†ä½¿ç”¨ duckplyrï¼Œå¯ä»¥ç”¨ as_duckplyr_tibble() è½¬æ¢ï¼š\n\nlibrary(dplyr)\n\n# åˆ›å»ºæ™®é€šæ•°æ®æ¡†\ndf &lt;- tibble(\n    x = 1:1000000,\n    y = rnorm(1000000),\n    group = sample(letters[1:10], 1000000, replace = TRUE)\n)\n\n# è½¬æ¢ä¸º duckplyr æ•°æ®æ¡†\nduck_df &lt;- duckplyr::as_duckplyr_tibble(df)\nclass(duck_df)\n\n[1] \"duckplyr_df\" \"tbl_df\"      \"tbl\"         \"data.frame\"",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "duckplyr - é«˜æ€§èƒ½æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3013-duckplyr.html#åŸºç¡€ç”¨æ³•",
    "href": "3013-duckplyr.html#åŸºç¡€ç”¨æ³•",
    "title": "duckplyr - é«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "åŸºç¡€ç”¨æ³•",
    "text": "åŸºç¡€ç”¨æ³•\nduckplyr ä¸ dplyr è¯­æ³•å®Œå…¨å…¼å®¹ï¼Œä¸‹é¢æ¼”ç¤ºå¸¸ç”¨æ“ä½œï¼š\n\næ•°æ®å‡†å¤‡\n\n# ä½¿ç”¨ mtcars æ•°æ®é›†æ¼”ç¤º\ndata(mtcars)\ncars &lt;- as_tibble(mtcars, rownames = \"car\")\nhead(cars)\n\n# A tibble: 6 Ã— 12\n  car            mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb\n  &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 Mazda RX4     21       6   160   110  3.9   2.62  16.5     0     1     4     4\n2 Mazda RX4 Wâ€¦  21       6   160   110  3.9   2.88  17.0     0     1     4     4\n3 Datsun 710    22.8     4   108    93  3.85  2.32  18.6     1     1     4     1\n4 Hornet 4 Drâ€¦  21.4     6   258   110  3.08  3.22  19.4     1     0     3     1\n5 Hornet Sporâ€¦  18.7     8   360   175  3.15  3.44  17.0     0     0     3     2\n6 Valiant       18.1     6   225   105  2.76  3.46  20.2     1     0     3     1\n\n\n\n\nfilter() - ç­›é€‰è¡Œ\n\n# ç­›é€‰æ²¹è€—å¤§äº25çš„è½¦å‹\ncars %&gt;%\n    filter(mpg &gt; 25)\n\n# A tibble: 6 Ã— 12\n  car            mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb\n  &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 Fiat 128      32.4     4  78.7    66  4.08  2.2   19.5     1     1     4     1\n2 Honda Civic   30.4     4  75.7    52  4.93  1.62  18.5     1     1     4     2\n3 Toyota Coroâ€¦  33.9     4  71.1    65  4.22  1.84  19.9     1     1     4     1\n4 Fiat X1-9     27.3     4  79      66  4.08  1.94  18.9     1     1     4     1\n5 Porsche 914â€¦  26       4 120.     91  4.43  2.14  16.7     0     1     5     2\n6 Lotus Europa  30.4     4  95.1   113  3.77  1.51  16.9     1     1     5     2\n\n\n\n\nselect() - é€‰æ‹©åˆ—\n\n# é€‰æ‹©ç‰¹å®šåˆ—\ncars %&gt;%\n    select(car, mpg, cyl, hp) %&gt;%\n    head()\n\n# A tibble: 6 Ã— 4\n  car                 mpg   cyl    hp\n  &lt;chr&gt;             &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 Mazda RX4          21       6   110\n2 Mazda RX4 Wag      21       6   110\n3 Datsun 710         22.8     4    93\n4 Hornet 4 Drive     21.4     6   110\n5 Hornet Sportabout  18.7     8   175\n6 Valiant            18.1     6   105\n\n\n\n\nmutate() - åˆ›å»ºæ–°åˆ—\n\n# åˆ›å»ºæ–°å˜é‡ï¼šå‡åŠŸç‡ï¼ˆé©¬åŠ›/æ’é‡ï¼‰\ncars %&gt;%\n    mutate(\n        hp_per_disp = hp / disp,\n        efficiency = case_when(\n            mpg &gt;= 25 ~ \"é«˜æ•ˆ\",\n            mpg &gt;= 18 ~ \"ä¸­ç­‰\",\n            TRUE ~ \"ä½æ•ˆ\"\n        )\n    ) %&gt;%\n    select(car, mpg, hp, disp, hp_per_disp, efficiency) %&gt;%\n    head()\n\n# A tibble: 6 Ã— 6\n  car                 mpg    hp  disp hp_per_disp efficiency\n  &lt;chr&gt;             &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;       &lt;dbl&gt; &lt;chr&gt;     \n1 Mazda RX4          21     110   160       0.688 ä¸­ç­‰      \n2 Mazda RX4 Wag      21     110   160       0.688 ä¸­ç­‰      \n3 Datsun 710         22.8    93   108       0.861 ä¸­ç­‰      \n4 Hornet 4 Drive     21.4   110   258       0.426 ä¸­ç­‰      \n5 Hornet Sportabout  18.7   175   360       0.486 ä¸­ç­‰      \n6 Valiant            18.1   105   225       0.467 ä¸­ç­‰      \n\n\n\n\nsummarise() + group_by() - åˆ†ç»„æ±‡æ€»\n\n# æŒ‰æ°”ç¼¸æ•°åˆ†ç»„ç»Ÿè®¡\ncars %&gt;%\n    group_by(cyl) %&gt;%\n    summarise(\n        n = n(),\n        mean_mpg = mean(mpg),\n        mean_hp = mean(hp),\n        .groups = \"drop\"\n    )\n\n# A tibble: 3 Ã— 4\n    cyl     n mean_mpg mean_hp\n  &lt;dbl&gt; &lt;int&gt;    &lt;dbl&gt;   &lt;dbl&gt;\n1     4    11     26.7    82.6\n2     6     7     19.7   122. \n3     8    14     15.1   209. \n\n\n\n\narrange() - æ’åº\n\n# æŒ‰æ²¹è€—é™åºæ’åˆ—\ncars %&gt;%\n    arrange(desc(mpg)) %&gt;%\n    select(car, mpg, cyl) %&gt;%\n    head()\n\n# A tibble: 6 Ã— 3\n  car              mpg   cyl\n  &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt;\n1 Toyota Corolla  33.9     4\n2 Fiat 128        32.4     4\n3 Lotus Europa    30.4     4\n4 Honda Civic     30.4     4\n5 Fiat X1-9       27.3     4\n6 Porsche 914-2   26       4",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "duckplyr - é«˜æ€§èƒ½æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3013-duckplyr.html#æƒ°æ€§è®¡ç®—ä¸-collect",
    "href": "3013-duckplyr.html#æƒ°æ€§è®¡ç®—ä¸-collect",
    "title": "duckplyr - é«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "æƒ°æ€§è®¡ç®—ä¸ collect()",
    "text": "æƒ°æ€§è®¡ç®—ä¸ collect()\nduckplyr çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§æ˜¯æƒ°æ€§è®¡ç®—ï¼ˆLazy Evaluationï¼‰ã€‚ä¸ dplyr çš„å³æ—¶æ‰§è¡Œä¸åŒï¼Œduckplyr ä¼šå»¶è¿Ÿæ‰§è¡Œæ“ä½œï¼Œåªåœ¨çœŸæ­£éœ€è¦ç»“æœæ—¶æ‰è®¡ç®—ã€‚\n\nç†è§£æƒ°æ€§è®¡ç®—\n\n# åˆ›å»ºå¤§æ•°æ®é›†\nbig_data &lt;- tibble(\n    id = 1:1000000,\n    value = rnorm(1000000),\n    group = sample(LETTERS[1:5], 1000000, replace = TRUE)\n)\n\n# è½¬æ¢ä¸º duckplyr tibble\nduck_data &lt;- as_duckplyr_tibble(big_data)\n\n# å®šä¹‰ä¸€ç³»åˆ—æ“ä½œï¼ˆä¸ä¼šç«‹å³æ‰§è¡Œï¼‰\nresult &lt;- duck_data %&gt;%\n    filter(value &gt; 0) %&gt;%\n    group_by(group) %&gt;%\n    summarise(\n        n = n(),\n        mean_val = mean(value),\n        .groups = \"drop\"\n    ) %&gt;%\n    arrange(desc(n))\n\n# æŸ¥çœ‹ç»“æœç±»å‹\nclass(result)\n\n[1] \"tbl_df\"     \"tbl\"        \"data.frame\"\n\n\n\n\nä½¿ç”¨ collect() è·å–ç»“æœ\nå½“éœ€è¦è·å–æœ€ç»ˆç»“æœæ—¶ï¼Œä½¿ç”¨ collect() å‡½æ•°ï¼š\n\n# æ‰§è¡Œè®¡ç®—å¹¶è·å–ç»“æœ\nfinal_result &lt;- result %&gt;% collect()\nfinal_result\n\n# A tibble: 5 Ã— 3\n  group      n mean_val\n  &lt;chr&gt;  &lt;int&gt;    &lt;dbl&gt;\n1 D     100610    0.798\n2 E     100516    0.798\n3 C     100193    0.797\n4 B     100049    0.795\n5 A      99318    0.797\n\n\næƒ°æ€§è®¡ç®—çš„ä¼˜åŠ¿ï¼š\n\næŸ¥è¯¢ä¼˜åŒ–ï¼šDuckDB å¯ä»¥åˆ†ææ•´ä¸ªæŸ¥è¯¢ç®¡é“ï¼Œä¼˜åŒ–æ‰§è¡Œè®¡åˆ’\nå‡å°‘å†…å­˜ä½¿ç”¨ï¼šä¸éœ€è¦å­˜å‚¨ä¸­é—´ç»“æœ\nåªè®¡ç®—éœ€è¦çš„ï¼šå¦‚æœåªéœ€è¦å‰å‡ è¡Œï¼Œä¸ä¼šè®¡ç®—å…¨éƒ¨æ•°æ®",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "duckplyr - é«˜æ€§èƒ½æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3013-duckplyr.html#è¯»å–å¤–éƒ¨æ•°æ®",
    "href": "3013-duckplyr.html#è¯»å–å¤–éƒ¨æ•°æ®",
    "title": "duckplyr - é«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "è¯»å–å¤–éƒ¨æ•°æ®",
    "text": "è¯»å–å¤–éƒ¨æ•°æ®\nduckplyr å¼ºå¤§ä¹‹å¤„åœ¨äºå¯ä»¥ç›´æ¥è¯»å–å¤–éƒ¨æ–‡ä»¶ï¼Œæ— éœ€å…ˆåŠ è½½åˆ°å†…å­˜ï¼š\n\nè¯»å– CSV æ–‡ä»¶\n\n# åˆ›å»ºç¤ºä¾‹ CSV æ–‡ä»¶\ntemp_csv &lt;- tempfile(fileext = \".csv\")\nwrite.csv(mtcars, temp_csv, row.names = TRUE)\n\n# ä½¿ç”¨ duckplyr è¯»å–\ncsv_data &lt;- read_csv_duckdb(temp_csv)\nhead(csv_data)\n\n# A duckplyr data frame: 12 variables\n  column00       mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb\n  &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 Mazda RX4     21       6   160   110  3.9   2.62  16.5     0     1     4     4\n2 Mazda RX4 Wâ€¦  21       6   160   110  3.9   2.88  17.0     0     1     4     4\n3 Datsun 710    22.8     4   108    93  3.85  2.32  18.6     1     1     4     1\n4 Hornet 4 Drâ€¦  21.4     6   258   110  3.08  3.22  19.4     1     0     3     1\n5 Hornet Sporâ€¦  18.7     8   360   175  3.15  3.44  17.0     0     0     3     2\n6 Valiant       18.1     6   225   105  2.76  3.46  20.2     1     0     3     1\n\n\n\n\nè¯»å– Parquet æ–‡ä»¶\nParquet æ˜¯ä¸€ç§é«˜æ•ˆçš„åˆ—å¼å­˜å‚¨æ ¼å¼ï¼Œç‰¹åˆ«é€‚åˆå¤§æ•°æ®åˆ†æï¼š\n\n# åˆ›å»ºç¤ºä¾‹ Parquet æ–‡ä»¶\nlibrary(arrow)\ntemp_parquet &lt;- tempfile(fileext = \".parquet\")\nwrite_parquet(mtcars, temp_parquet)\n\n# ä½¿ç”¨ duckplyr è¯»å–\nparquet_data &lt;- read_parquet_duckdb(temp_parquet)\nhead(parquet_data)\n\n# A duckplyr data frame: 11 variables\n    mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb\n  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1  21       6   160   110  3.9   2.62  16.5     0     1     4     4\n2  21       6   160   110  3.9   2.88  17.0     0     1     4     4\n3  22.8     4   108    93  3.85  2.32  18.6     1     1     4     1\n4  21.4     6   258   110  3.08  3.22  19.4     1     0     3     1\n5  18.7     8   360   175  3.15  3.44  17.0     0     0     3     2\n6  18.1     6   225   105  2.76  3.46  20.2     1     0     3     1\n\n\n\n\nè¯»å–è¿œç¨‹æ–‡ä»¶\nduckplyr è¿˜å¯ä»¥ç›´æ¥æŸ¥è¯¢ç½‘ç»œä¸Šçš„æ–‡ä»¶ï¼Œæ— éœ€ä¸‹è½½ï¼š\n\n# é¦–å…ˆå®‰è£… httpfs æ‰©å±•\ndb_exec(\"INSTALL httpfs\")\ndb_exec(\"LOAD httpfs\")\n\n# ç›´æ¥æŸ¥è¯¢è¿œç¨‹ Parquet æ–‡ä»¶\nurl &lt;- \"https://example.com/data.parquet\"\nremote_data &lt;- read_parquet_duckdb(url)\n\nè¿™å¯¹äºåˆ†æå­˜å‚¨åœ¨äº‘ç«¯çš„å¤§å‹æ•°æ®é›†éå¸¸æœ‰ç”¨ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "duckplyr - é«˜æ€§èƒ½æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3013-duckplyr.html#é«˜çº§åŠŸèƒ½",
    "href": "3013-duckplyr.html#é«˜çº§åŠŸèƒ½",
    "title": "duckplyr - é«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "é«˜çº§åŠŸèƒ½",
    "text": "é«˜çº§åŠŸèƒ½\n\nç›´æ¥æ‰§è¡Œ SQL\nå¦‚æœä½ ç†Ÿæ‚‰ SQLï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ DuckDB çš„ SQL åŠŸèƒ½ï¼š\n\n# å°†æ•°æ®æ³¨å†Œåˆ° DuckDB\nduck_cars &lt;- as_duckplyr_tibble(cars)\n\n# ä¹Ÿå¯ä»¥ä½¿ç”¨ dplyr è¯­æ³•è¾¾åˆ°åŒæ ·æ•ˆæœ\nduck_cars %&gt;%\n    filter(cyl == 6) %&gt;%\n    summarise(avg_mpg = mean(mpg))\n\n# A duckplyr data frame: 1 variable\n  avg_mpg\n    &lt;dbl&gt;\n1    19.7\n\n\n\n\nå¤„ç†è¶…å¤§æ•°æ®é›†\nduckplyr å¯ä»¥å¤„ç†è¶…å‡ºå†…å­˜å¤§å°çš„æ•°æ®é›†ã€‚å½“æ•°æ®å¤ªå¤§æ— æ³•æ”¾å…¥å†…å­˜æ—¶ï¼ŒDuckDB ä¼šè‡ªåŠ¨ä½¿ç”¨ç£ç›˜ä½œä¸ºä¸´æ—¶å­˜å‚¨ï¼š\n\n# è¯»å–è¶…å¤§ Parquet æ–‡ä»¶ï¼ˆå¯èƒ½æœ‰æ•°GBï¼‰\nlarge_data &lt;- read_parquet_duckdb(\"path/to/large_file.parquet\")\n\n# è¿›è¡Œåˆ†æï¼ˆduckplyr ä¼šè‡ªåŠ¨ç®¡ç†å†…å­˜ï¼‰\nsummary_result &lt;- large_data %&gt;%\n    group_by(category) %&gt;%\n    summarise(\n        count = n(),\n        total = sum(amount)\n    ) %&gt;%\n    collect()\n\n\n\nè‡ªåŠ¨å›é€€æœºåˆ¶\nå½“é‡åˆ° DuckDB ä¸æ”¯æŒçš„æ“ä½œæ—¶ï¼Œduckplyr ä¼šè‡ªåŠ¨å›é€€åˆ° dplyrï¼š\n\n# è¿™ä¸ªæ“ä½œä¼šæ­£å¸¸æ‰§è¡Œï¼Œå³ä½¿æŸäº›å‡½æ•°å›é€€åˆ° dplyr\ncars %&gt;%\n    rowwise() %&gt;%\n    mutate(row_sum = sum(c(mpg, hp, wt))) %&gt;%\n    ungroup() %&gt;%\n    select(car, mpg, hp, wt, row_sum) %&gt;%\n    head()\n\n# A tibble: 6 Ã— 5\n  car                 mpg    hp    wt row_sum\n  &lt;chr&gt;             &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;\n1 Mazda RX4          21     110  2.62    134.\n2 Mazda RX4 Wag      21     110  2.88    134.\n3 Datsun 710         22.8    93  2.32    118.\n4 Hornet 4 Drive     21.4   110  3.22    135.\n5 Hornet Sportabout  18.7   175  3.44    197.\n6 Valiant            18.1   105  3.46    127.\n\n\nå›é€€æ—¶ä¼šæœ‰æç¤ºä¿¡æ¯ï¼Œä½ å¯ä»¥æ®æ­¤ä¼˜åŒ–ä»£ç ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "duckplyr - é«˜æ€§èƒ½æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3013-duckplyr.html#æ€§èƒ½å¯¹æ¯”å®æˆ˜",
    "href": "3013-duckplyr.html#æ€§èƒ½å¯¹æ¯”å®æˆ˜",
    "title": "duckplyr - é«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "æ€§èƒ½å¯¹æ¯”å®æˆ˜",
    "text": "æ€§èƒ½å¯¹æ¯”å®æˆ˜\nè®©æˆ‘ä»¬é€šè¿‡å®é™…æ¡ˆä¾‹æ¥å¯¹æ¯” duckplyr å’Œ dplyr çš„æ€§èƒ½å·®å¼‚ï¼š\n\nç”Ÿæˆæµ‹è¯•æ•°æ®\n\n# ç”Ÿæˆ 100 ä¸‡è¡Œæ•°æ®\nset.seed(42)\nn &lt;- 1000000\ntest_data &lt;- tibble(\n    id = 1:n,\n    category = sample(LETTERS[1:10], n, replace = TRUE),\n    subcategory = sample(letters[1:20], n, replace = TRUE),\n    value1 = rnorm(n, mean = 100, sd = 20),\n    value2 = runif(n, 0, 1000),\n    date = sample(seq(as.Date(\"2020-01-01\"), as.Date(\"2024-12-31\"), by = \"day\"), n, replace = TRUE)\n)\n\n# åˆ›å»º duckplyr ç‰ˆæœ¬\nduck_test &lt;- as_duckplyr_tibble(test_data)\n\n\n\næ€§èƒ½æµ‹è¯•å‡½æ•°\n\n# å®šä¹‰æµ‹è¯•æŸ¥è¯¢\nrun_benchmark &lt;- function(data) {\n    data %&gt;%\n        filter(value1 &gt; 90) %&gt;%\n        group_by(category, subcategory) %&gt;%\n        summarise(\n            n = n(),\n            mean_v1 = mean(value1),\n            sum_v2 = sum(value2),\n            .groups = \"drop\"\n        ) %&gt;%\n        arrange(desc(n)) %&gt;%\n        head(20)\n}\n\n# æµ‹è¯• dplyr æ€§èƒ½\ndplyr_time &lt;- system.time({\n    dplyr_result &lt;- run_benchmark(test_data)\n})\n\n# æµ‹è¯• duckplyr æ€§èƒ½\nduckplyr_time &lt;- system.time({\n    duckplyr_result &lt;- run_benchmark(duck_test) %&gt;% collect()\n})\n\n\n\næ€§èƒ½å¯¹æ¯”ç»“æœ\n\n# åˆ›å»ºå¯¹æ¯”è¡¨\nperformance &lt;- tibble(\n    æ–¹æ³• = c(\"dplyr\", \"duckplyr\"),\n    è€—æ—¶ç§’ = c(dplyr_time[\"elapsed\"], duckplyr_time[\"elapsed\"])\n) %&gt;%\n    mutate(\n        ç›¸å¯¹é€Ÿåº¦ = round(max(è€—æ—¶ç§’) / è€—æ—¶ç§’, 1)\n    )\n\nkable(performance, digits = 3)\n\n\n\n\næ–¹æ³•\nè€—æ—¶ç§’\nç›¸å¯¹é€Ÿåº¦\n\n\n\n\ndplyr\n0.21\n1.0\n\n\nduckplyr\n0.18\n1.2\n\n\n\n\n\n\n\nå¯è§†åŒ–æ€§èƒ½å¯¹æ¯”\n\nlibrary(ggplot2)\n\nggplot(performance, aes(x = æ–¹æ³•, y = è€—æ—¶ç§’, fill = æ–¹æ³•)) +\n    geom_col(width = 0.6) +\n    geom_text(aes(label = paste0(round(è€—æ—¶ç§’, 3), \"s\")),\n        vjust = -0.5, size = 4\n    ) +\n    scale_fill_manual(values = c(\"dplyr\" = \"#4f46e5\", \"duckplyr\" = \"#22c55e\")) +\n    labs(\n        title = \"dplyr vs duckplyr æ€§èƒ½å¯¹æ¯”\",\n        subtitle = paste0(\"æ•°æ®é‡ï¼š\", format(n, big.mark = \",\"), \" è¡Œ\"),\n        x = NULL,\n        y = \"è€—æ—¶ï¼ˆç§’ï¼‰\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        legend.position = \"none\",\n        plot.title = element_text(face = \"bold\"),\n        panel.grid.major.x = element_blank()\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "duckplyr - é«˜æ€§èƒ½æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3013-duckplyr.html#ä½•æ—¶ä½¿ç”¨-duckplyr",
    "href": "3013-duckplyr.html#ä½•æ—¶ä½¿ç”¨-duckplyr",
    "title": "duckplyr - é«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "ä½•æ—¶ä½¿ç”¨ duckplyrï¼Ÿ",
    "text": "ä½•æ—¶ä½¿ç”¨ duckplyrï¼Ÿ\n\næ¨èä½¿ç”¨åœºæ™¯\n\nå¤§æ•°æ®é›†åˆ†æï¼šæ•°æ®é‡è¶…è¿‡ 10 ä¸‡è¡Œæ—¶ï¼Œduckplyr ä¼˜åŠ¿æ˜æ˜¾\nå¤æ‚èšåˆæ“ä½œï¼šå¤šé‡åˆ†ç»„ã€å¤šåˆ—æ±‡æ€»\nè¶…å†…å­˜æ•°æ®ï¼šéœ€è¦åˆ†æå¤§äºå¯ç”¨ RAM çš„æ•°æ®\næ–‡ä»¶ç›´æ¥åˆ†æï¼šç›´æ¥æŸ¥è¯¢ Parquet/CSV æ–‡ä»¶ï¼Œæ— éœ€å…¨éƒ¨åŠ è½½\n\n\n\nå¯èƒ½ä¸é€‚ç”¨çš„åœºæ™¯\n\nå°æ•°æ®é›†ï¼šæ•°æ®é‡å¾ˆå°æ—¶ï¼Œdplyr è¶³å¤Ÿå¿«\né«˜åº¦è‡ªå®šä¹‰å‡½æ•°ï¼šå¤§é‡ä½¿ç”¨è‡ªå®šä¹‰ R å‡½æ•°\néœ€è¦è¡Œçº§æ“ä½œï¼šrowwise() æ“ä½œæ•ˆç‡ä¸é«˜\n\n\n\næ³¨æ„äº‹é¡¹\n\n\n\n\n\né¡¹ç›®\nè¯´æ˜\n\n\n\n\næ—¶åŒºå¤„ç†\nDateTime å»ºè®®ä½¿ç”¨ UTC æ—¶åŒº\n\n\nè‡ªå®šä¹‰å‡½æ•°\néƒ¨åˆ† R å‡½æ•°å¯èƒ½è§¦å‘å›é€€\n\n\nç»“æœè·å–\næƒ°æ€§è®¡ç®—éœ€è¦ collect() è·å–ç»“æœ\n\n\nå›é€€æç¤º\nå…³æ³¨å›é€€ä¿¡æ¯ï¼Œä¼˜åŒ–ä»£ç ",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "duckplyr - é«˜æ€§èƒ½æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3013-duckplyr.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "3013-duckplyr.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "duckplyr - é«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# å®‰è£…\ninstall.packages(\"duckplyr\")\n\n# åŠ è½½ï¼ˆå…¨å±€è¦†ç›– dplyrï¼‰\nlibrary(duckplyr)\n\n# æ¢å¤ dplyr\nduckplyr::methods_restore()\n\n# è½¬æ¢å•ä¸ªæ•°æ®æ¡†\nduck_df &lt;- as_duckplyr_tibble(df)\n\n# è¯»å–æ–‡ä»¶\ncsv_data &lt;- read_csv_duckdb(\"file.csv\")\nparquet_data &lt;- read_parquet_duckdb(\"file.parquet\")\n\n# æƒ°æ€§è®¡ç®—åè·å–ç»“æœ\nresult &lt;- duck_df %&gt;%\n    filter(...) %&gt;%\n    summarise(...) %&gt;%\n    collect()\n\n# æ‰§è¡Œ SQL\ndb_exec(\"INSTALL httpfs\")\ndb_exec(\"LOAD httpfs\")",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "duckplyr - é«˜æ€§èƒ½æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3013-duckplyr.html#å°ç»“",
    "href": "3013-duckplyr.html#å°ç»“",
    "title": "duckplyr - é«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "å°ç»“",
    "text": "å°ç»“\nduckplyr çš„æ ¸å¿ƒä»·å€¼ï¼š\n\nå³æ’å³ç”¨ï¼šè¯­æ³•ä¸ dplyr å®Œå…¨å…¼å®¹ï¼Œå­¦ä¹ æˆæœ¬ä¸ºé›¶\næ€§èƒ½é£è·ƒï¼šDuckDB å¼•æ“å¸¦æ¥æ˜¾è‘—çš„é€Ÿåº¦æå‡\nçªç ´å†…å­˜é™åˆ¶ï¼šå¯ä»¥å¤„ç†è¶…å‡º RAM å¤§å°çš„æ•°æ®é›†\næ™ºèƒ½å›é€€ï¼šä¸æ”¯æŒçš„æ“ä½œè‡ªåŠ¨å›é€€åˆ° dplyr\næƒ°æ€§è®¡ç®—ï¼šè‡ªåŠ¨ä¼˜åŒ–æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’\n\nå¯¹äºéœ€è¦å¤„ç†å¤§æ•°æ®çš„ R ç”¨æˆ·æ¥è¯´ï¼Œduckplyr æ˜¯ä¸€ä¸ªå€¼å¾—å°è¯•çš„å·¥å…·ã€‚å®ƒè®©ä½ åœ¨ä¸æ”¹å˜å·¥ä½œä¹ æƒ¯çš„å‰æä¸‹ï¼Œè·å¾—æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "duckplyr - é«˜æ€§èƒ½æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3013-duckplyr.html#å‚è€ƒèµ„æº",
    "href": "3013-duckplyr.html#å‚è€ƒèµ„æº",
    "title": "duckplyr - é«˜æ€§èƒ½æ•°æ®å¤„ç†",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nduckplyr å®˜æ–¹æ–‡æ¡£\nDuckDB å®˜ç½‘\nduckplyr GitHub ä»“åº“\ndplyr å®˜æ–¹æ–‡æ¡£",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ“¥ æ•°æ®å¯¼å…¥å¯¼å‡º",
      "duckplyr - é«˜æ€§èƒ½æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "1063-outlier-detection.html",
    "href": "1063-outlier-detection.html",
    "title": "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "å¼‚å¸¸å€¼ï¼ˆOutlierï¼‰æ˜¯æŒ‡æ˜æ˜¾åç¦»å…¶ä»–è§‚æµ‹å€¼çš„æ•°æ®ç‚¹ï¼Œå¯èƒ½ç”±æµ‹é‡è¯¯å·®ã€æ•°æ®å½•å…¥é”™è¯¯æˆ–çœŸå®çš„æç«¯æƒ…å†µé€ æˆã€‚æ­£ç¡®è¯†åˆ«å’Œå¤„ç†å¼‚å¸¸å€¼å¯¹æ•°æ®åˆ†æè´¨é‡è‡³å…³é‡è¦ã€‚\n\n\n\n\n\nç±»å‹\nè¯´æ˜\nç¤ºä¾‹\n\n\n\n\nå•å˜é‡å¼‚å¸¸å€¼\nå•ä¸ªå˜é‡ä¸­çš„æç«¯å€¼\nå¹´é¾„=200å²\n\n\nå¤šå˜é‡å¼‚å¸¸å€¼\nå¤šå˜é‡ç»„åˆä¸‹çš„å¼‚å¸¸\nèº«é«˜150cmä½†ä½“é‡120kg\n\n\næ¡ä»¶å¼‚å¸¸å€¼\nç‰¹å®šæ¡ä»¶ä¸‹çš„å¼‚å¸¸\nå¤å¤©æ°”æ¸©-10Â°C\n\n\n\n\n\n\nå¼‚å¸¸å€¼ä¼šä¸¥é‡å½±å“ç»Ÿè®¡åˆ†æç»“æœï¼š\n\nå‡å€¼åç§»ï¼šæç«¯å€¼æ‹‰åŠ¨å‡å€¼\næ–¹å·®è†¨èƒ€ï¼šå¢å¤§æ•°æ®ç¦»æ•£ç¨‹åº¦\nå›å½’æ‰­æ›²ï¼šå½±å“å›å½’ç³»æ•°ä¼°è®¡\nèšç±»å¹²æ‰°ï¼šå½±å“èšç±»ç®—æ³•æ•ˆæœ",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†"
    ]
  },
  {
    "objectID": "1063-outlier-detection.html#å¼‚å¸¸å€¼æ¦‚è¿°",
    "href": "1063-outlier-detection.html#å¼‚å¸¸å€¼æ¦‚è¿°",
    "title": "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "å¼‚å¸¸å€¼ï¼ˆOutlierï¼‰æ˜¯æŒ‡æ˜æ˜¾åç¦»å…¶ä»–è§‚æµ‹å€¼çš„æ•°æ®ç‚¹ï¼Œå¯èƒ½ç”±æµ‹é‡è¯¯å·®ã€æ•°æ®å½•å…¥é”™è¯¯æˆ–çœŸå®çš„æç«¯æƒ…å†µé€ æˆã€‚æ­£ç¡®è¯†åˆ«å’Œå¤„ç†å¼‚å¸¸å€¼å¯¹æ•°æ®åˆ†æè´¨é‡è‡³å…³é‡è¦ã€‚\n\n\n\n\n\nç±»å‹\nè¯´æ˜\nç¤ºä¾‹\n\n\n\n\nå•å˜é‡å¼‚å¸¸å€¼\nå•ä¸ªå˜é‡ä¸­çš„æç«¯å€¼\nå¹´é¾„=200å²\n\n\nå¤šå˜é‡å¼‚å¸¸å€¼\nå¤šå˜é‡ç»„åˆä¸‹çš„å¼‚å¸¸\nèº«é«˜150cmä½†ä½“é‡120kg\n\n\næ¡ä»¶å¼‚å¸¸å€¼\nç‰¹å®šæ¡ä»¶ä¸‹çš„å¼‚å¸¸\nå¤å¤©æ°”æ¸©-10Â°C\n\n\n\n\n\n\nå¼‚å¸¸å€¼ä¼šä¸¥é‡å½±å“ç»Ÿè®¡åˆ†æç»“æœï¼š\n\nå‡å€¼åç§»ï¼šæç«¯å€¼æ‹‰åŠ¨å‡å€¼\næ–¹å·®è†¨èƒ€ï¼šå¢å¤§æ•°æ®ç¦»æ•£ç¨‹åº¦\nå›å½’æ‰­æ›²ï¼šå½±å“å›å½’ç³»æ•°ä¼°è®¡\nèšç±»å¹²æ‰°ï¼šå½±å“èšç±»ç®—æ³•æ•ˆæœ",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†"
    ]
  },
  {
    "objectID": "1063-outlier-detection.html#å®‰è£…ä¸åŠ è½½",
    "href": "1063-outlier-detection.html#å®‰è£…ä¸åŠ è½½",
    "title": "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\n# æ ¸å¿ƒåŒ…\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(tidyr)\n\n# å¼‚å¸¸å€¼æ£€æµ‹ä¸“ç”¨åŒ…\nlibrary(outliers) # Grubbsæ£€éªŒã€Dixonæ£€éªŒ\n\n# å¯è§†åŒ–ä¸»é¢˜è®¾ç½®\ntheme_set(theme_bw(base_size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†"
    ]
  },
  {
    "objectID": "1063-outlier-detection.html#ç¬¬ä¸€éƒ¨åˆ†ç®±çº¿å›¾æ³•-iqræ³•",
    "href": "1063-outlier-detection.html#ç¬¬ä¸€éƒ¨åˆ†ç®±çº¿å›¾æ³•-iqræ³•",
    "title": "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šç®±çº¿å›¾æ³• (IQRæ³•)",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šç®±çº¿å›¾æ³• (IQRæ³•)\nç®±çº¿å›¾æ³•æ˜¯æœ€å¸¸ç”¨çš„å¼‚å¸¸å€¼æ£€æµ‹æ–¹æ³•ï¼ŒåŸºäºå››åˆ†ä½è·ï¼ˆIQRï¼‰åˆ¤æ–­å¼‚å¸¸å€¼ã€‚\n\nåŸç†è¯´æ˜\nIQRæ³•åˆ¤æ–­æ ‡å‡†ï¼š - IQRï¼ˆå››åˆ†ä½è·ï¼‰= Q3 - Q1 - ä¸‹ç•Œ = Q1 - 1.5 Ã— IQR - ä¸Šç•Œ = Q3 + 1.5 Ã— IQR - è¶…å‡ºä¸Šä¸‹ç•Œçš„ç‚¹è§†ä¸ºå¼‚å¸¸å€¼\n1.5å€è§„åˆ™æ£€æµ‹æ¸©å’Œå¼‚å¸¸å€¼ï¼Œ3å€è§„åˆ™æ£€æµ‹æç«¯å¼‚å¸¸å€¼ã€‚\n\n\nå¯è§†åŒ–æ£€æµ‹\n\n# ä½¿ç”¨å†…ç½®æ•°æ®é›†\ndata(mtcars)\ndf &lt;- mtcars\n\n# ç®±çº¿å›¾å¯è§†åŒ–\nggplot(df, aes(y = mpg)) +\n    geom_boxplot(fill = \"#4f46e5\", alpha = 0.7, width = 0.3) +\n    labs(\n        title = \"MPG åˆ†å¸ƒç®±çº¿å›¾\",\n        subtitle = \"è¶…å‡ºè§¦é¡»çš„ç‚¹ä¸ºæ½œåœ¨å¼‚å¸¸å€¼\",\n        y = \"æ²¹è€— (MPG)\"\n    ) +\n    theme(\n        axis.text.x = element_blank(),\n        axis.ticks.x = element_blank()\n    )\n\n\n\n\n\n\n\n\n\n\nç¼–ç¨‹å®ç°\n\n# IQRæ³•æ£€æµ‹å‡½æ•°\ndetect_outliers_iqr &lt;- function(x, k = 1.5) {\n    Q1 &lt;- quantile(x, 0.25, na.rm = TRUE)\n    Q3 &lt;- quantile(x, 0.75, na.rm = TRUE)\n    IQR &lt;- Q3 - Q1\n    lower &lt;- Q1 - k * IQR\n    upper &lt;- Q3 + k * IQR\n\n    list(\n        outliers = which(x &lt; lower | x &gt; upper),\n        lower_bound = lower,\n        upper_bound = upper,\n        values = x[x &lt; lower | x &gt; upper]\n    )\n}\n\n# æ£€æµ‹mpgå˜é‡çš„å¼‚å¸¸å€¼\nresult_iqr &lt;- detect_outliers_iqr(df$mpg)\ncat(\"å¼‚å¸¸å€¼ç´¢å¼•:\", result_iqr$outliers, \"\\n\")\n\nå¼‚å¸¸å€¼ç´¢å¼•: 20 \n\ncat(\"å¼‚å¸¸å€¼:\", result_iqr$values, \"\\n\")\n\nå¼‚å¸¸å€¼: 33.9 \n\ncat(\"è¾¹ç•Œ: [\", result_iqr$lower_bound, \",\", result_iqr$upper_bound, \"]\\n\")\n\nè¾¹ç•Œ: [ 4.3625 , 33.8625 ]\n\n\n\n\nå¤šå˜é‡æ‰¹é‡æ£€æµ‹\n\n# å¯¹æ‰€æœ‰æ•°å€¼å˜é‡æ£€æµ‹å¼‚å¸¸å€¼\nnumeric_vars &lt;- df %&gt;% select(where(is.numeric))\n\noutlier_summary &lt;- sapply(numeric_vars, function(x) {\n    result &lt;- detect_outliers_iqr(x)\n    length(result$outliers)\n})\n\n# å¯è§†åŒ–å¼‚å¸¸å€¼æ•°é‡\noutlier_df &lt;- data.frame(\n    variable = names(outlier_summary),\n    count = outlier_summary\n)\n\nggplot(outlier_df, aes(x = reorder(variable, -count), y = count)) +\n    geom_col(fill = \"#ef4444\") +\n    labs(\n        title = \"å„å˜é‡å¼‚å¸¸å€¼æ•°é‡ (IQRæ³•)\",\n        x = \"å˜é‡\", y = \"å¼‚å¸¸å€¼ä¸ªæ•°\"\n    ) +\n    theme(axis.text.x = element_text(angle = 45, hjust = 1))",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†"
    ]
  },
  {
    "objectID": "1063-outlier-detection.html#ç¬¬äºŒéƒ¨åˆ†z-scoreæ³•",
    "href": "1063-outlier-detection.html#ç¬¬äºŒéƒ¨åˆ†z-scoreæ³•",
    "title": "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šZ-scoreæ³•",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šZ-scoreæ³•\nZ-scoreæ³•åŸºäºæ ‡å‡†åŒ–åŸç†ï¼Œå°†æ•°æ®è½¬æ¢ä¸ºæ ‡å‡†æ­£æ€åˆ†å¸ƒååˆ¤æ–­æç«¯å€¼ã€‚\n\nåŸç†è¯´æ˜\n\nZ-score = (x - Î¼) / Ïƒ\nä¸€èˆ¬ä»¥ |Z| &gt; 3 ä½œä¸ºå¼‚å¸¸å€¼åˆ¤æ–­æ ‡å‡†\nå‡è®¾æ•°æ®è¿‘ä¼¼æ­£æ€åˆ†å¸ƒ\n\n\n\nå®ç°æ–¹æ³•\n\n# Z-scoreæ£€æµ‹å‡½æ•°\ndetect_outliers_zscore &lt;- function(x, threshold = 3) {\n    z_scores &lt;- scale(x)\n    outliers &lt;- which(abs(z_scores) &gt; threshold)\n\n    list(\n        outliers = outliers,\n        z_scores = z_scores[outliers],\n        values = x[outliers]\n    )\n}\n\n# æ£€æµ‹\nresult_z &lt;- detect_outliers_zscore(df$mpg)\ncat(\"å¼‚å¸¸å€¼ç´¢å¼•:\", result_z$outliers, \"\\n\")\n\nå¼‚å¸¸å€¼ç´¢å¼•:  \n\ncat(\"å¯¹åº”Zåˆ†æ•°:\", round(result_z$z_scores, 2), \"\\n\")\n\nå¯¹åº”Zåˆ†æ•°:  \n\n\n\n\nZ-scoreåˆ†å¸ƒå¯è§†åŒ–\n\n# å¯è§†åŒ–Z-scoreåˆ†å¸ƒ\ndf$mpg_zscore &lt;- as.numeric(scale(df$mpg))\n\nggplot(df, aes(x = mpg_zscore)) +\n    geom_histogram(aes(y = after_stat(density)),\n        bins = 15, fill = \"#4f46e5\", alpha = 0.7\n    ) +\n    geom_density(color = \"#ef4444\", linewidth = 1) +\n    geom_vline(xintercept = c(-3, 3), linetype = \"dashed\", color = \"red\") +\n    annotate(\"text\", x = 3.2, y = 0.3, label = \"Z=3\", color = \"red\") +\n    annotate(\"text\", x = -3.2, y = 0.3, label = \"Z=-3\", color = \"red\") +\n    labs(\n        title = \"MPG çš„ Z-score åˆ†å¸ƒ\",\n        subtitle = \"çº¢è‰²è™šçº¿ä¸º Â±3 æ ‡å‡†å·®è¾¹ç•Œ\",\n        x = \"Z-score\", y = \"å¯†åº¦\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†"
    ]
  },
  {
    "objectID": "1063-outlier-detection.html#ç¬¬ä¸‰éƒ¨åˆ†ä¿®æ­£z-scoreæ³•-madæ³•",
    "href": "1063-outlier-detection.html#ç¬¬ä¸‰éƒ¨åˆ†ä¿®æ­£z-scoreæ³•-madæ³•",
    "title": "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šä¿®æ­£Z-scoreæ³• (MADæ³•)",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šä¿®æ­£Z-scoreæ³• (MADæ³•)\nå½“æ•°æ®åŒ…å«å¼‚å¸¸å€¼æ—¶ï¼Œå‡å€¼å’Œæ ‡å‡†å·®å®¹æ˜“å—å½±å“ã€‚MADæ³•ä½¿ç”¨ä¸­ä½æ•°å’Œä¸­ä½æ•°ç»å¯¹åå·®ï¼Œæ›´åŠ ç¨³å¥ã€‚\n\nåŸç†è¯´æ˜\n\nMADï¼ˆä¸­ä½æ•°ç»å¯¹åå·®ï¼‰= median(|x - median(x)|)\nä¿®æ­£Z-score = 0.6745 Ã— (x - median(x)) / MAD\n0.6745 æ˜¯æ­£æ€åˆ†å¸ƒä¸‹çš„ä¿®æ­£ç³»æ•°\nä¸€èˆ¬ä»¥ |ä¿®æ­£Z| &gt; 3.5 ä¸ºå¼‚å¸¸å€¼æ ‡å‡†\n\n\n\nå®ç°æ–¹æ³•\n\n# MADæ³•æ£€æµ‹å‡½æ•°\ndetect_outliers_mad &lt;- function(x, threshold = 3.5) {\n    med &lt;- median(x, na.rm = TRUE)\n    mad_value &lt;- median(abs(x - med), na.rm = TRUE)\n\n    # é¿å…MADä¸º0çš„æƒ…å†µ\n    if (mad_value == 0) {\n        mad_value &lt;- mean(abs(x - med), na.rm = TRUE)\n    }\n\n    modified_z &lt;- 0.6745 * (x - med) / mad_value\n    outliers &lt;- which(abs(modified_z) &gt; threshold)\n\n    list(\n        outliers = outliers,\n        modified_z = modified_z[outliers],\n        values = x[outliers],\n        mad = mad_value\n    )\n}\n\n# æ£€æµ‹\nresult_mad &lt;- detect_outliers_mad(df$mpg)\ncat(\"MADå€¼:\", result_mad$mad, \"\\n\")\n\nMADå€¼: 3.65 \n\ncat(\"å¼‚å¸¸å€¼ç´¢å¼•:\", result_mad$outliers, \"\\n\")\n\nå¼‚å¸¸å€¼ç´¢å¼•:  \n\n\n\n\nZ-score vs MAD å¯¹æ¯”\n\n# åˆ›å»ºå«æœ‰æç«¯å¼‚å¸¸å€¼çš„æ•°æ®\nset.seed(42)\nnormal_data &lt;- rnorm(100, mean = 50, sd = 10)\n# æ·»åŠ ä¸€ä¸ªæç«¯å¼‚å¸¸å€¼\ncontaminated_data &lt;- c(normal_data, 200)\n\n# å¯¹æ¯”ä¸¤ç§æ–¹æ³•\nz_result &lt;- detect_outliers_zscore(contaminated_data)\nmad_result &lt;- detect_outliers_mad(contaminated_data)\n\ncat(\"Z-scoreæ³•æ£€æµ‹åˆ°:\", length(z_result$outliers), \"ä¸ªå¼‚å¸¸å€¼\\n\")\n\nZ-scoreæ³•æ£€æµ‹åˆ°: 1 ä¸ªå¼‚å¸¸å€¼\n\ncat(\"MADæ³•æ£€æµ‹åˆ°:\", length(mad_result$outliers), \"ä¸ªå¼‚å¸¸å€¼\\n\")\n\nMADæ³•æ£€æµ‹åˆ°: 1 ä¸ªå¼‚å¸¸å€¼\n\n# å¯è§†åŒ–å¯¹æ¯”\ncomparison_df &lt;- data.frame(\n    value = contaminated_data,\n    index = 1:length(contaminated_data)\n)\n\nggplot(comparison_df, aes(x = index, y = value)) +\n    geom_point(color = \"#4f46e5\", alpha = 0.6) +\n    geom_point(\n        data = comparison_df[mad_result$outliers, ],\n        color = \"#ef4444\", size = 4\n    ) +\n    labs(\n        title = \"MADæ³•å¼‚å¸¸å€¼æ£€æµ‹ç»“æœ\",\n        subtitle = \"çº¢è‰²å¤§ç‚¹ä¸ºæ£€æµ‹åˆ°çš„å¼‚å¸¸å€¼\",\n        x = \"ç´¢å¼•\", y = \"æ•°å€¼\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†"
    ]
  },
  {
    "objectID": "1063-outlier-detection.html#ç¬¬å››éƒ¨åˆ†ç»Ÿè®¡æ£€éªŒæ–¹æ³•",
    "href": "1063-outlier-detection.html#ç¬¬å››éƒ¨åˆ†ç»Ÿè®¡æ£€éªŒæ–¹æ³•",
    "title": "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šç»Ÿè®¡æ£€éªŒæ–¹æ³•",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šç»Ÿè®¡æ£€éªŒæ–¹æ³•\n\nGrubbsæ£€éªŒ\nGrubbsæ£€éªŒç”¨äºæ£€æµ‹å•ä¸ªå¼‚å¸¸å€¼ï¼Œå‡è®¾æ•°æ®æœä»æ­£æ€åˆ†å¸ƒã€‚\n\n# ä½¿ç”¨outliersåŒ…è¿›è¡ŒGrubbsæ£€éªŒ\ngrubbs_result &lt;- grubbs.test(df$mpg)\nprint(grubbs_result)\n\n\n    Grubbs test for one outlier\n\ndata:  df$mpg\nG = 2.29127, U = 0.82518, p-value = 0.276\nalternative hypothesis: highest value 33.9 is an outlier\n\n# æ£€éªŒæœ€å¤§å€¼\ngrubbs_max &lt;- grubbs.test(df$mpg, type = 10)\nprint(grubbs_max)\n\n\n    Grubbs test for one outlier\n\ndata:  df$mpg\nG = 2.29127, U = 0.82518, p-value = 0.276\nalternative hypothesis: highest value 33.9 is an outlier\n\n# æ£€éªŒæœ€å°å€¼\ngrubbs_min &lt;- grubbs.test(df$mpg, type = 10, opposite = TRUE)\nprint(grubbs_min)\n\n\n    Grubbs test for one outlier\n\ndata:  df$mpg\nG = 1.60788, U = 0.91391, p-value = 1\nalternative hypothesis: lowest value 10.4 is an outlier\n\n\n\n\nDixon Qæ£€éªŒ\nDixonæ£€éªŒé€‚ç”¨äºå°æ ·æœ¬ï¼ˆn &lt; 25ï¼‰ï¼Œæ£€æµ‹æœ€æç«¯çš„å€¼æ˜¯å¦ä¸ºå¼‚å¸¸å€¼ã€‚\n\n# å–ä¸€ä¸ªå°æ ·æœ¬è¿›è¡ŒDixonæ£€éªŒ\nsmall_sample &lt;- df$mpg[1:20]\n\ndixon_result &lt;- dixon.test(small_sample)\nprint(dixon_result)\n\n\n    Dixon test for outliers\n\ndata:  small_sample\nQ = 0.17857, p-value = 0.7119\nalternative hypothesis: highest value 33.9 is an outlier\n\n\n\n\nå¡æ–¹æ£€éªŒæ³•\nåŸºäºå¡æ–¹åˆ†å¸ƒæ£€æµ‹å¤šå˜é‡ä¸­çš„å¼‚å¸¸å€¼ã€‚\n\n# å¡æ–¹æ£€æµ‹å‡½æ•°\ndetect_outliers_chisq &lt;- function(x, alpha = 0.05) {\n    # è®¡ç®—å¡æ–¹ç»Ÿè®¡é‡é—¨æ§›å€¼\n    threshold &lt;- qchisq(1 - alpha, df = 1)\n\n    # ä½¿ç”¨æ ‡å‡†åŒ–åçš„å¹³æ–¹ä½œä¸ºå¡æ–¹ç»Ÿè®¡é‡\n    z_squared &lt;- scale(x)^2\n    outliers &lt;- which(z_squared &gt; threshold)\n\n    list(\n        outliers = outliers,\n        chi_squared = z_squared[outliers],\n        values = x[outliers]\n    )\n}\n\nresult_chisq &lt;- detect_outliers_chisq(df$mpg)\ncat(\"å¡æ–¹æ£€éªŒå¼‚å¸¸å€¼:\", result_chisq$outliers, \"\\n\")\n\nå¡æ–¹æ£€éªŒå¼‚å¸¸å€¼: 18 20",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†"
    ]
  },
  {
    "objectID": "1063-outlier-detection.html#ç¬¬äº”éƒ¨åˆ†å¤šå˜é‡å¼‚å¸¸å€¼æ£€æµ‹",
    "href": "1063-outlier-detection.html#ç¬¬äº”éƒ¨åˆ†å¤šå˜é‡å¼‚å¸¸å€¼æ£€æµ‹",
    "title": "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šå¤šå˜é‡å¼‚å¸¸å€¼æ£€æµ‹",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šå¤šå˜é‡å¼‚å¸¸å€¼æ£€æµ‹\n\né©¬æ°è·ç¦»æ³•\né©¬æ°è·ç¦»è€ƒè™‘äº†å˜é‡é—´çš„ç›¸å…³æ€§ï¼Œé€‚ç”¨äºå¤šå˜é‡å¼‚å¸¸å€¼æ£€æµ‹ã€‚\n\n# é©¬æ°è·ç¦»è®¡ç®—\ncalc_mahalanobis &lt;- function(data) {\n    center &lt;- colMeans(data)\n    cov_matrix &lt;- cov(data)\n\n    mahal_dist &lt;- mahalanobis(data, center, cov_matrix)\n\n    # å¡æ–¹åˆ†å¸ƒä¸´ç•Œå€¼\n    threshold &lt;- qchisq(0.975, df = ncol(data))\n    outliers &lt;- which(mahal_dist &gt; threshold)\n\n    list(\n        distances = mahal_dist,\n        outliers = outliers,\n        threshold = threshold\n    )\n}\n\n# é€‰æ‹©å¤šä¸ªå˜é‡è¿›è¡Œåˆ†æ\nmulti_vars &lt;- df %&gt;% select(mpg, hp, wt, qsec)\nmahal_result &lt;- calc_mahalanobis(multi_vars)\n\ncat(\"é©¬æ°è·ç¦»é˜ˆå€¼:\", round(mahal_result$threshold, 2), \"\\n\")\n\né©¬æ°è·ç¦»é˜ˆå€¼: 11.14 \n\ncat(\"å¤šå˜é‡å¼‚å¸¸å€¼ç´¢å¼•:\", mahal_result$outliers, \"\\n\")\n\nå¤šå˜é‡å¼‚å¸¸å€¼ç´¢å¼•: 9 31 \n\n\n\n\né©¬æ°è·ç¦»å¯è§†åŒ–\n\n# å¯è§†åŒ–é©¬æ°è·ç¦»\ndf$mahal_dist &lt;- mahal_result$distances\ndf$is_outlier &lt;- ifelse(df$mahal_dist &gt; mahal_result$threshold, \"å¼‚å¸¸\", \"æ­£å¸¸\")\n\nggplot(df, aes(x = 1:nrow(df), y = mahal_dist, color = is_outlier)) +\n    geom_point(size = 3, alpha = 0.7) +\n    geom_hline(\n        yintercept = mahal_result$threshold,\n        linetype = \"dashed\", color = \"red\"\n    ) +\n    scale_color_manual(values = c(\"æ­£å¸¸\" = \"#4f46e5\", \"å¼‚å¸¸\" = \"#ef4444\")) +\n    labs(\n        title = \"é©¬æ°è·ç¦»å¼‚å¸¸å€¼æ£€æµ‹\",\n        subtitle = \"çº¢è‰²è™šçº¿ä¸º 97.5% å¡æ–¹åˆ†å¸ƒä¸´ç•Œå€¼\",\n        x = \"è§‚æµ‹åºå·\", y = \"é©¬æ°è·ç¦»\", color = \"çŠ¶æ€\"\n    )\n\n\n\n\n\n\n\n\n\n\nCookè·ç¦»æ³•\nCookè·ç¦»ç”¨äºå›å½’è¯Šæ–­ï¼Œè¯†åˆ«å¯¹æ¨¡å‹å½±å“è¾ƒå¤§çš„è§‚æµ‹ç‚¹ã€‚\n\n# æ‹Ÿåˆå›å½’æ¨¡å‹\nmodel &lt;- lm(mpg ~ hp + wt + qsec, data = df)\n\n# è®¡ç®—Cookè·ç¦»\ncook_dist &lt;- cooks.distance(model)\n\n# å¯è§†åŒ–\nplot_df &lt;- data.frame(\n    index = 1:length(cook_dist),\n    cook_distance = cook_dist\n)\n\n# Cookè·ç¦»é˜ˆå€¼ï¼š4/(n-k-1)\nthreshold_cook &lt;- 4 / (nrow(df) - length(coef(model)))\n\nggplot(plot_df, aes(x = index, y = cook_distance)) +\n    geom_point(color = \"#4f46e5\", size = 2) +\n    geom_segment(aes(xend = index, yend = 0), alpha = 0.5) +\n    geom_hline(\n        yintercept = threshold_cook,\n        linetype = \"dashed\", color = \"red\"\n    ) +\n    geom_text(\n        data = plot_df %&gt;% filter(cook_distance &gt; threshold_cook),\n        aes(label = index), vjust = -0.5, size = 3\n    ) +\n    labs(\n        title = \"Cookè·ç¦»è¯Šæ–­å›¾\",\n        subtitle = paste(\"é˜ˆå€¼ =\", round(threshold_cook, 4)),\n        x = \"è§‚æµ‹åºå·\", y = \"Cookè·ç¦»\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†"
    ]
  },
  {
    "objectID": "1063-outlier-detection.html#ç¬¬å…­éƒ¨åˆ†å¼‚å¸¸å€¼å¤„ç†ç­–ç•¥",
    "href": "1063-outlier-detection.html#ç¬¬å…­éƒ¨åˆ†å¼‚å¸¸å€¼å¤„ç†ç­–ç•¥",
    "title": "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šå¼‚å¸¸å€¼å¤„ç†ç­–ç•¥",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šå¼‚å¸¸å€¼å¤„ç†ç­–ç•¥\næ£€æµ‹åˆ°å¼‚å¸¸å€¼åï¼Œéœ€è¦æ ¹æ®å…·ä½“æƒ…å†µé€‰æ‹©åˆé€‚çš„å¤„ç†æ–¹å¼ã€‚\n\nç­–ç•¥ä¸€ï¼šåˆ é™¤å¼‚å¸¸å€¼\né€‚ç”¨äºæ˜ç¡®çš„æ•°æ®é”™è¯¯æˆ–å¯¹åˆ†æå½±å“æå¤§çš„æç«¯å€¼ã€‚\n\n# åˆ é™¤å¼‚å¸¸å€¼\ndf_clean &lt;- df\noutlier_idx &lt;- detect_outliers_iqr(df_clean$mpg)$outliers\n\nif (length(outlier_idx) &gt; 0) {\n    df_no_outliers &lt;- df_clean[-outlier_idx, ]\n    cat(\"åˆ é™¤å‰è¡Œæ•°:\", nrow(df_clean), \"\\n\")\n    cat(\"åˆ é™¤åè¡Œæ•°:\", nrow(df_no_outliers), \"\\n\")\n}\n\nåˆ é™¤å‰è¡Œæ•°: 32 \nåˆ é™¤åè¡Œæ•°: 31 \n\n\n\n\nç­–ç•¥äºŒï¼šè¾¹ç•Œå€¼æ›¿æ¢ (Winsorization)\nå°†å¼‚å¸¸å€¼æ›¿æ¢ä¸ºè¾¹ç•Œå€¼ï¼Œä¿ç•™æ•°æ®é‡ä½†é™åˆ¶æç«¯å½±å“ã€‚\n\n# Winsorizationå‡½æ•°\nwinsorize &lt;- function(x, lower_pct = 0.05, upper_pct = 0.95) {\n    lower &lt;- quantile(x, lower_pct, na.rm = TRUE)\n    upper &lt;- quantile(x, upper_pct, na.rm = TRUE)\n\n    x[x &lt; lower] &lt;- lower\n    x[x &gt; upper] &lt;- upper\n\n    return(x)\n}\n\n# åº”ç”¨Winsorization\ndf$mpg_winsorized &lt;- winsorize(df$mpg)\n\n# å¯¹æ¯”åŸå§‹å’Œå¤„ç†åçš„åˆ†å¸ƒ\ncompare_df &lt;- df %&gt;%\n    select(mpg, mpg_winsorized) %&gt;%\n    pivot_longer(everything(), names_to = \"type\", values_to = \"value\")\n\nggplot(compare_df, aes(x = value, fill = type)) +\n    geom_density(alpha = 0.5) +\n    scale_fill_manual(\n        values = c(\"mpg\" = \"#4f46e5\", \"mpg_winsorized\" = \"#10b981\"),\n        labels = c(\"åŸå§‹\", \"Winsorized\")\n    ) +\n    labs(\n        title = \"Winsorization å‰åå¯¹æ¯”\",\n        x = \"MPG\", y = \"å¯†åº¦\", fill = \"æ•°æ®\"\n    )\n\n\n\n\n\n\n\n\n\n\nç­–ç•¥ä¸‰ï¼šæ›¿æ¢ä¸ºNAåæ’è¡¥\nå°†å¼‚å¸¸å€¼è§†ä¸ºç¼ºå¤±å€¼ï¼Œä½¿ç”¨æ’è¡¥æ–¹æ³•å¡«å……ã€‚\n\n# æ›¿æ¢å¼‚å¸¸å€¼ä¸ºNA\nreplace_outliers_with_na &lt;- function(x, k = 1.5) {\n    Q1 &lt;- quantile(x, 0.25, na.rm = TRUE)\n    Q3 &lt;- quantile(x, 0.75, na.rm = TRUE)\n    IQR &lt;- Q3 - Q1\n    lower &lt;- Q1 - k * IQR\n    upper &lt;- Q3 + k * IQR\n\n    x[x &lt; lower | x &gt; upper] &lt;- NA\n    return(x)\n}\n\n# åº”ç”¨å¹¶ç”¨ä¸­ä½æ•°æ’è¡¥\ndf$mpg_imputed &lt;- replace_outliers_with_na(df$mpg)\ndf$mpg_imputed[is.na(df$mpg_imputed)] &lt;- median(df$mpg_imputed, na.rm = TRUE)\n\ncat(\"åŸå§‹å‡å€¼:\", mean(df$mpg), \"\\n\")\n\nåŸå§‹å‡å€¼: 20.09062 \n\ncat(\"æ’è¡¥åå‡å€¼:\", mean(df$mpg_imputed), \"\\n\")\n\næ’è¡¥åå‡å€¼: 19.63125 \n\n\n\n\nç­–ç•¥å››ï¼šä¿ç•™å¹¶æ ‡è®°\næœ‰æ—¶å¼‚å¸¸å€¼æœ‰å®é™…æ„ä¹‰ï¼Œåº”ä¿ç•™ä½†æ ‡è®°ä»¥ä¾¿åç»­åˆ†æã€‚\n\n# æ ‡è®°å¼‚å¸¸å€¼\ndf$outlier_flag &lt;- ifelse(\n    df$mpg %in% detect_outliers_iqr(df$mpg)$values,\n    \"å¼‚å¸¸\", \"æ­£å¸¸\"\n)\n\ntable(df$outlier_flag)\n\n\nå¼‚å¸¸ æ­£å¸¸ \n   1   31 \n\n\n\n\né€‰æ‹©ç­–ç•¥çš„åŸåˆ™\n\n\n\næƒ…å†µ\nå»ºè®®ç­–ç•¥\n\n\n\n\næ˜ç¡®çš„æ•°æ®å½•å…¥é”™è¯¯\nåˆ é™¤æˆ–ä¿®æ­£\n\n\næµ‹é‡è¯¯å·®å¯¼è‡´çš„æç«¯å€¼\nåˆ é™¤æˆ–Winsorization\n\n\nçœŸå®ä½†ç½•è§çš„æç«¯å€¼\nä¿ç•™å¹¶æ ‡è®°\n\n\nå¯¹æ¨¡å‹æ•æ„Ÿçš„å¼‚å¸¸å€¼\nç¨³å¥æ–¹æ³•æˆ–å˜æ¢\n\n\nå°æ ·æœ¬ç ”ç©¶\nè°¨æ…åˆ é™¤ï¼Œä¼˜å…ˆWinsorization",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†"
    ]
  },
  {
    "objectID": "1063-outlier-detection.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "href": "1063-outlier-detection.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "title": "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹\n\nç»¼åˆæ¡ˆä¾‹ï¼šå®Œæ•´å¼‚å¸¸å€¼å¤„ç†æµç¨‹\n\n# ä½¿ç”¨irisæ•°æ®é›†æ¼”ç¤ºå®Œæ•´æµç¨‹\ndata(iris)\niris_df &lt;- iris\n\n# æ•…æ„æ·»åŠ ä¸€äº›å¼‚å¸¸å€¼ç”¨äºæ¼”ç¤º\nset.seed(123)\niris_df$Sepal.Length[c(5, 50, 100)] &lt;- c(10, 12, 15)\n\ncat(\"===== ç¬¬1æ­¥ï¼šæ•°æ®æ¦‚è§ˆ =====\\n\")\n\n===== ç¬¬1æ­¥ï¼šæ•°æ®æ¦‚è§ˆ =====\n\nsummary(iris_df$Sepal.Length)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  4.300   5.100   5.800   5.985   6.475  15.000 \n\n\n\ncat(\"\\n===== ç¬¬2æ­¥ï¼šå¯è§†åŒ–æ£€æµ‹ =====\\n\")\n\n\n===== ç¬¬2æ­¥ï¼šå¯è§†åŒ–æ£€æµ‹ =====\n\n# ç®±çº¿å›¾\np1 &lt;- ggplot(iris_df, aes(y = Sepal.Length)) +\n    geom_boxplot(fill = \"#4f46e5\", alpha = 0.7) +\n    labs(title = \"ç®±çº¿å›¾æ£€æµ‹\")\n\n# ç›´æ–¹å›¾\np2 &lt;- ggplot(iris_df, aes(x = Sepal.Length)) +\n    geom_histogram(bins = 20, fill = \"#10b981\", alpha = 0.7) +\n    labs(title = \"åˆ†å¸ƒç›´æ–¹å›¾\")\n\nlibrary(patchwork)\np1 + p2\n\n\n\n\n\n\n\n\n\ncat(\"\\n===== ç¬¬3æ­¥ï¼šå¤šæ–¹æ³•æ£€æµ‹å¯¹æ¯” =====\\n\")\n\n\n===== ç¬¬3æ­¥ï¼šå¤šæ–¹æ³•æ£€æµ‹å¯¹æ¯” =====\n\n# IQRæ³•\niqr_outliers &lt;- detect_outliers_iqr(iris_df$Sepal.Length)\ncat(\"IQRæ³•æ£€æµ‹åˆ°\", length(iqr_outliers$outliers), \"ä¸ªå¼‚å¸¸å€¼\\n\")\n\nIQRæ³•æ£€æµ‹åˆ° 3 ä¸ªå¼‚å¸¸å€¼\n\n# Z-scoreæ³•\nz_outliers &lt;- detect_outliers_zscore(iris_df$Sepal.Length)\ncat(\"Z-scoreæ³•æ£€æµ‹åˆ°\", length(z_outliers$outliers), \"ä¸ªå¼‚å¸¸å€¼\\n\")\n\nZ-scoreæ³•æ£€æµ‹åˆ° 3 ä¸ªå¼‚å¸¸å€¼\n\n# MADæ³•\nmad_outliers &lt;- detect_outliers_mad(iris_df$Sepal.Length)\ncat(\"MADæ³•æ£€æµ‹åˆ°\", length(mad_outliers$outliers), \"ä¸ªå¼‚å¸¸å€¼\\n\")\n\nMADæ³•æ£€æµ‹åˆ° 3 ä¸ªå¼‚å¸¸å€¼\n\n\n\ncat(\"\\n===== ç¬¬4æ­¥ï¼šå¤„ç†å¼‚å¸¸å€¼ =====\\n\")\n\n\n===== ç¬¬4æ­¥ï¼šå¤„ç†å¼‚å¸¸å€¼ =====\n\n# æ–¹æ¡ˆAï¼šåˆ é™¤\niris_deleted &lt;- iris_df[-iqr_outliers$outliers, ]\n\n# æ–¹æ¡ˆBï¼šWinsorization\niris_winsor &lt;- iris_df\niris_winsor$Sepal.Length &lt;- winsorize(iris_winsor$Sepal.Length)\n\n# æ–¹æ¡ˆCï¼šä¸­ä½æ•°æ›¿æ¢\niris_median &lt;- iris_df\niris_median$Sepal.Length[iqr_outliers$outliers] &lt;-\n    median(iris_df$Sepal.Length[-iqr_outliers$outliers])\n\ncat(\"åŸå§‹æ•°æ®å‡å€¼:\", round(mean(iris_df$Sepal.Length), 3), \"\\n\")\n\nåŸå§‹æ•°æ®å‡å€¼: 5.985 \n\ncat(\"åˆ é™¤åå‡å€¼:\", round(mean(iris_deleted$Sepal.Length), 3), \"\\n\")\n\nåˆ é™¤åå‡å€¼: 5.856 \n\ncat(\"Winsorizationåå‡å€¼:\", round(mean(iris_winsor$Sepal.Length), 3), \"\\n\")\n\nWinsorizationåå‡å€¼: 5.896 \n\ncat(\"ä¸­ä½æ•°æ›¿æ¢åå‡å€¼:\", round(mean(iris_median$Sepal.Length), 3), \"\\n\")\n\nä¸­ä½æ•°æ›¿æ¢åå‡å€¼: 5.855 \n\n\n\ncat(\"\\n===== ç¬¬5æ­¥ï¼šå¤„ç†æ•ˆæœå¯è§†åŒ– =====\\n\")\n\n\n===== ç¬¬5æ­¥ï¼šå¤„ç†æ•ˆæœå¯è§†åŒ– =====\n\n# å¯¹æ¯”å¤„ç†å‰å\ncompare_results &lt;- data.frame(\n    method = c(\"åŸå§‹\", \"åˆ é™¤å¼‚å¸¸å€¼\", \"Winsorization\", \"ä¸­ä½æ•°æ›¿æ¢\"),\n    mean = c(\n        mean(iris_df$Sepal.Length),\n        mean(iris_deleted$Sepal.Length),\n        mean(iris_winsor$Sepal.Length),\n        mean(iris_median$Sepal.Length)\n    ),\n    sd = c(\n        sd(iris_df$Sepal.Length),\n        sd(iris_deleted$Sepal.Length),\n        sd(iris_winsor$Sepal.Length),\n        sd(iris_median$Sepal.Length)\n    )\n)\n\nggplot(compare_results, aes(x = reorder(method, mean), y = mean)) +\n    geom_col(fill = \"#4f46e5\", alpha = 0.8) +\n    geom_errorbar(aes(ymin = mean - sd, ymax = mean + sd),\n        width = 0.2, color = \"#ef4444\"\n    ) +\n    coord_flip() +\n    labs(\n        title = \"ä¸åŒå¤„ç†æ–¹æ³•æ•ˆæœå¯¹æ¯”\",\n        subtitle = \"è¯¯å·®æ£’è¡¨ç¤ºæ ‡å‡†å·®\",\n        x = \"å¤„ç†æ–¹æ³•\", y = \"å‡å€¼\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†"
    ]
  },
  {
    "objectID": "1063-outlier-detection.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "1063-outlier-detection.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# ===== IQRæ³• =====\nQ1 &lt;- quantile(x, 0.25)\nQ3 &lt;- quantile(x, 0.75)\nIQR &lt;- Q3 - Q1\noutliers &lt;- which(x &lt; Q1 - 1.5 * IQR | x &gt; Q3 + 1.5 * IQR)\n\n# ===== Z-scoreæ³• =====\nz_scores &lt;- scale(x)\noutliers &lt;- which(abs(z_scores) &gt; 3)\n\n# ===== MADæ³• =====\nmed &lt;- median(x)\nmad_value &lt;- median(abs(x - med))\nmodified_z &lt;- 0.6745 * (x - med) / mad_value\noutliers &lt;- which(abs(modified_z) &gt; 3.5)\n\n# ===== Grubbsæ£€éªŒ =====\nlibrary(outliers)\ngrubbs.test(x)\n\n# ===== é©¬æ°è·ç¦» =====\nmahal_dist &lt;- mahalanobis(data, colMeans(data), cov(data))\nthreshold &lt;- qchisq(0.975, df = ncol(data))\noutliers &lt;- which(mahal_dist &gt; threshold)\n\n# ===== Cookè·ç¦» =====\nmodel &lt;- lm(y ~ x, data)\ncook_dist &lt;- cooks.distance(model)\nthreshold &lt;- 4 / (n - k - 1)\n\n# ===== Winsorization =====\nx[x &lt; quantile(x, 0.05)] &lt;- quantile(x, 0.05)\nx[x &gt; quantile(x, 0.95)] &lt;- quantile(x, 0.95)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†"
    ]
  },
  {
    "objectID": "1063-outlier-detection.html#å°ç»“",
    "href": "1063-outlier-detection.html#å°ç»“",
    "title": "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å°ç»“",
    "text": "å°ç»“\nå¼‚å¸¸å€¼å¤„ç†çš„æœ€ä½³å®è·µï¼š\n\nç†è§£æ•°æ®ï¼šå…ˆäº†è§£æ•°æ®æ¥æºå’Œä¸šåŠ¡èƒŒæ™¯\nå¤šæ–¹æ³•éªŒè¯ï¼šä½¿ç”¨å¤šç§æ–¹æ³•äº¤å‰éªŒè¯\nå¯è§†åŒ–ä¼˜å…ˆï¼šå›¾å½¢æ¯”æ•°å­—æ›´ç›´è§‚\nè°¨æ…åˆ é™¤ï¼šåˆ é™¤å‰ç¡®è®¤çœŸçš„æ˜¯é”™è¯¯æ•°æ®\nè®°å½•è¿‡ç¨‹ï¼šæ–‡æ¡£åŒ–å¤„ç†æ­¥éª¤å’Œç†ç”±\n\n\né‡è¦æç¤ºï¼šå¼‚å¸¸å€¼ä¸ä¸€å®šæ˜¯åæ•°æ®ï¼æŸäº›ç ”ç©¶ä¸­ï¼Œå¼‚å¸¸å€¼å¯èƒ½æ°æ°æ˜¯æœ€æœ‰ä»·å€¼çš„å‘ç°ã€‚å¤„ç†å‰åŠ¡å¿…ç»“åˆå®é™…ä¸šåŠ¡ç†è§£ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†"
    ]
  },
  {
    "objectID": "1063-outlier-detection.html#å‚è€ƒèµ„æº",
    "href": "1063-outlier-detection.html#å‚è€ƒèµ„æº",
    "title": "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\noutliers åŒ…æ–‡æ¡£\nRobust Statistics for Outlier Detection\nMahalanobis Distance Tutorial",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "å¼‚å¸¸å€¼æ£€æµ‹ä¸å¤„ç†"
    ]
  },
  {
    "objectID": "2060-ml-visualization.html",
    "href": "2060-ml-visualization.html",
    "title": "æœºå™¨å­¦ä¹ å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "æœºå™¨å­¦ä¹ å¯è§†åŒ–æ˜¯ç†è§£æ¨¡å‹æ€§èƒ½ã€è¯Šæ–­é—®é¢˜å’Œå±•ç¤ºç»“æœçš„å…³é”®å·¥å…·ã€‚æœ¬æ•™ç¨‹æ¶µç›–ä»æ•°æ®æ¢ç´¢åˆ°æ¨¡å‹è¯„ä¼°çš„å®Œæ•´å¯è§†åŒ–æµç¨‹ã€‚\n\n\n\n\n\né˜¶æ®µ\nå¯è§†åŒ–ç›®æ ‡\nå¸¸ç”¨å›¾è¡¨\n\n\n\n\næ•°æ®æ¢ç´¢\nç†è§£æ•°æ®åˆ†å¸ƒå’Œå…³ç³»\nç›´æ–¹å›¾ã€æ•£ç‚¹å›¾ã€ç›¸å…³çŸ©é˜µ\n\n\næ¨¡å‹è®­ç»ƒ\nç›‘æ§è®­ç»ƒè¿‡ç¨‹\nå­¦ä¹ æ›²çº¿ã€æŸå¤±æ›²çº¿\n\n\næ¨¡å‹è¯„ä¼°\nè¯„ä¼°é¢„æµ‹æ€§èƒ½\nROCæ›²çº¿ã€æ··æ·†çŸ©é˜µ\n\n\næ¨¡å‹è§£é‡Š\nç†è§£æ¨¡å‹å†³ç­–\nç‰¹å¾é‡è¦æ€§ã€SHAPå›¾",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "æœºå™¨å­¦ä¹ å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2060-ml-visualization.html#æœºå™¨å­¦ä¹ å¯è§†åŒ–æ¦‚è¿°",
    "href": "2060-ml-visualization.html#æœºå™¨å­¦ä¹ å¯è§†åŒ–æ¦‚è¿°",
    "title": "æœºå™¨å­¦ä¹ å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "æœºå™¨å­¦ä¹ å¯è§†åŒ–æ˜¯ç†è§£æ¨¡å‹æ€§èƒ½ã€è¯Šæ–­é—®é¢˜å’Œå±•ç¤ºç»“æœçš„å…³é”®å·¥å…·ã€‚æœ¬æ•™ç¨‹æ¶µç›–ä»æ•°æ®æ¢ç´¢åˆ°æ¨¡å‹è¯„ä¼°çš„å®Œæ•´å¯è§†åŒ–æµç¨‹ã€‚\n\n\n\n\n\né˜¶æ®µ\nå¯è§†åŒ–ç›®æ ‡\nå¸¸ç”¨å›¾è¡¨\n\n\n\n\næ•°æ®æ¢ç´¢\nç†è§£æ•°æ®åˆ†å¸ƒå’Œå…³ç³»\nç›´æ–¹å›¾ã€æ•£ç‚¹å›¾ã€ç›¸å…³çŸ©é˜µ\n\n\næ¨¡å‹è®­ç»ƒ\nç›‘æ§è®­ç»ƒè¿‡ç¨‹\nå­¦ä¹ æ›²çº¿ã€æŸå¤±æ›²çº¿\n\n\næ¨¡å‹è¯„ä¼°\nè¯„ä¼°é¢„æµ‹æ€§èƒ½\nROCæ›²çº¿ã€æ··æ·†çŸ©é˜µ\n\n\næ¨¡å‹è§£é‡Š\nç†è§£æ¨¡å‹å†³ç­–\nç‰¹å¾é‡è¦æ€§ã€SHAPå›¾",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "æœºå™¨å­¦ä¹ å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2060-ml-visualization.html#å®‰è£…ä¸åŠ è½½",
    "href": "2060-ml-visualization.html#å®‰è£…ä¸åŠ è½½",
    "title": "æœºå™¨å­¦ä¹ å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\n# æ ¸å¿ƒå¯è§†åŒ–åŒ…\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(patchwork)\n\n# æœºå™¨å­¦ä¹ åŒ…\nlibrary(caret)\nlibrary(pROC)\n\n# è®¾ç½®ä¸»é¢˜\ntheme_set(theme_bw(base_size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "æœºå™¨å­¦ä¹ å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2060-ml-visualization.html#ç¬¬ä¸€éƒ¨åˆ†æ··æ·†çŸ©é˜µå¯è§†åŒ–",
    "href": "2060-ml-visualization.html#ç¬¬ä¸€éƒ¨åˆ†æ··æ·†çŸ©é˜µå¯è§†åŒ–",
    "title": "æœºå™¨å­¦ä¹ å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ··æ·†çŸ©é˜µå¯è§†åŒ–",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ··æ·†çŸ©é˜µå¯è§†åŒ–\næ··æ·†çŸ©é˜µæ˜¯åˆ†ç±»æ¨¡å‹è¯„ä¼°çš„åŸºç¡€ï¼Œå±•ç¤ºäº†é¢„æµ‹ç»“æœä¸å®é™…æ ‡ç­¾çš„å¯¹åº”å…³ç³»ã€‚\n\näºŒåˆ†ç±»æ··æ·†çŸ©é˜µ\n\n# åˆ›å»ºç¤ºä¾‹é¢„æµ‹ç»“æœ\nset.seed(42)\nn &lt;- 200\nactual &lt;- factor(sample(c(\"é˜³æ€§\", \"é˜´æ€§\"), n, replace = TRUE, prob = c(0.3, 0.7)))\npredicted &lt;- actual\n# æ·»åŠ ä¸€äº›é”™è¯¯é¢„æµ‹\nwrong_idx &lt;- sample(1:n, 30)\npredicted[wrong_idx] &lt;- factor(ifelse(predicted[wrong_idx] == \"é˜³æ€§\", \"é˜´æ€§\", \"é˜³æ€§\"),\n    levels = c(\"é˜³æ€§\", \"é˜´æ€§\")\n)\n\n# è®¡ç®—æ··æ·†çŸ©é˜µ\nconf_matrix &lt;- table(Predicted = predicted, Actual = actual)\nprint(conf_matrix)\n\n         Actual\nPredicted é˜³æ€§ é˜´æ€§\n     é˜³æ€§   61   20\n     é˜´æ€§   10  109\n\n\n\n# è½¬æ¢ä¸ºæ•°æ®æ¡†ç”¨äºggplot\nconf_df &lt;- as.data.frame(conf_matrix)\n\n# çƒ­å›¾å¯è§†åŒ–\nggplot(conf_df, aes(x = Actual, y = Predicted, fill = Freq)) +\n    geom_tile(color = \"white\", linewidth = 1) +\n    geom_text(aes(label = Freq), size = 8, fontface = \"bold\") +\n    scale_fill_gradient(low = \"#e0e7ff\", high = \"#4f46e5\") +\n    labs(\n        title = \"æ··æ·†çŸ©é˜µçƒ­å›¾\",\n        subtitle = \"äºŒåˆ†ç±»æ¨¡å‹é¢„æµ‹ç»“æœ\",\n        x = \"å®é™…ç±»åˆ«\", y = \"é¢„æµ‹ç±»åˆ«\"\n    ) +\n    theme(\n        legend.position = \"none\",\n        axis.text = element_text(size = 12)\n    )\n\n\n\n\n\n\n\n\n\n\nå¸¦ç™¾åˆ†æ¯”çš„æ··æ·†çŸ©é˜µ\n\n# è®¡ç®—ç™¾åˆ†æ¯”\nconf_df$Percentage &lt;- round(conf_df$Freq / sum(conf_df$Freq) * 100, 1)\nconf_df$Label &lt;- paste0(conf_df$Freq, \"\\n(\", conf_df$Percentage, \"%)\")\n\n# å¸¦æ³¨é‡Šçš„æ··æ·†çŸ©é˜µ\nggplot(conf_df, aes(x = Actual, y = Predicted, fill = Freq)) +\n    geom_tile(color = \"white\", linewidth = 2) +\n    geom_text(aes(label = Label), size = 6) +\n    scale_fill_gradient2(\n        low = \"#fee2e2\", mid = \"#fef3c7\", high = \"#dcfce7\",\n        midpoint = median(conf_df$Freq)\n    ) +\n    labs(\n        title = \"å¸¦ç™¾åˆ†æ¯”çš„æ··æ·†çŸ©é˜µ\",\n        x = \"å®é™…ç±»åˆ«\", y = \"é¢„æµ‹ç±»åˆ«\"\n    ) +\n    theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\n\n\nå¤šåˆ†ç±»æ··æ·†çŸ©é˜µ\n\n# ä¸‰åˆ†ç±»ç¤ºä¾‹\ndata(iris)\nset.seed(123)\n\n# ç®€å•KNNåˆ†ç±»\ntrain_idx &lt;- sample(1:nrow(iris), 100)\ntrain_data &lt;- iris[train_idx, ]\ntest_data &lt;- iris[-train_idx, ]\n\n# è®­ç»ƒæ¨¡å‹\nmodel_knn &lt;- train(Species ~ .,\n    data = train_data, method = \"knn\",\n    trControl = trainControl(method = \"cv\", number = 5)\n)\n\n# é¢„æµ‹\npredictions &lt;- predict(model_knn, test_data)\n\n# å¤šåˆ†ç±»æ··æ·†çŸ©é˜µ\nmulti_conf &lt;- table(Predicted = predictions, Actual = test_data$Species)\nmulti_conf_df &lt;- as.data.frame(multi_conf)\n\nggplot(multi_conf_df, aes(x = Actual, y = Predicted, fill = Freq)) +\n    geom_tile(color = \"white\", linewidth = 1) +\n    geom_text(aes(label = Freq), size = 6, fontface = \"bold\") +\n    scale_fill_gradient(low = \"white\", high = \"#10b981\") +\n    labs(\n        title = \"å¤šåˆ†ç±»æ··æ·†çŸ©é˜µ\",\n        subtitle = \"Iris æ•°æ®é›† KNN åˆ†ç±»ç»“æœ\"\n    ) +\n    theme(\n        legend.position = \"none\",\n        axis.text.x = element_text(angle = 45, hjust = 1)\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "æœºå™¨å­¦ä¹ å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2060-ml-visualization.html#ç¬¬äºŒéƒ¨åˆ†rocæ›²çº¿ä¸auc",
    "href": "2060-ml-visualization.html#ç¬¬äºŒéƒ¨åˆ†rocæ›²çº¿ä¸auc",
    "title": "æœºå™¨å­¦ä¹ å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šROCæ›²çº¿ä¸AUC",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šROCæ›²çº¿ä¸AUC\nROCæ›²çº¿å±•ç¤ºäº†ä¸åŒé˜ˆå€¼ä¸‹æ¨¡å‹çš„æ•æ„Ÿæ€§å’Œç‰¹å¼‚æ€§æƒè¡¡ã€‚\n\nå•æ¨¡å‹ROCæ›²çº¿\n\n# åˆ›å»ºäºŒåˆ†ç±»æ•°æ®\nset.seed(42)\nn &lt;- 300\nx1 &lt;- rnorm(n)\nx2 &lt;- rnorm(n)\nprob &lt;- plogis(0.5 + 1.2 * x1 - 0.8 * x2)\ny &lt;- rbinom(n, 1, prob)\n\ndata_binary &lt;- data.frame(y = factor(y), x1 = x1, x2 = x2)\n\n# è®­ç»ƒé€»è¾‘å›å½’\nmodel_glm &lt;- glm(y ~ x1 + x2, data = data_binary, family = \"binomial\")\npred_prob &lt;- predict(model_glm, type = \"response\")\n\n# è®¡ç®—ROC\nroc_obj &lt;- roc(data_binary$y, pred_prob)\nauc_value &lt;- auc(roc_obj)\n\n# è½¬æ¢ä¸ºæ•°æ®æ¡†\nroc_df &lt;- data.frame(\n    sensitivity = roc_obj$sensitivities,\n    specificity = roc_obj$specificities\n)\n\n# ç»‘åˆ¶ROCæ›²çº¿\nggplot(roc_df, aes(x = 1 - specificity, y = sensitivity)) +\n    geom_line(color = \"#4f46e5\", linewidth = 1.2) +\n    geom_abline(slope = 1, intercept = 0, linetype = \"dashed\", color = \"gray50\") +\n    geom_area(alpha = 0.2, fill = \"#4f46e5\") +\n    annotate(\"text\",\n        x = 0.7, y = 0.3,\n        label = paste0(\"AUC = \", round(auc_value, 3)),\n        size = 5, fontface = \"bold\"\n    ) +\n    labs(\n        title = \"ROC æ›²çº¿\",\n        subtitle = \"é€»è¾‘å›å½’æ¨¡å‹\",\n        x = \"1 - ç‰¹å¼‚æ€§ (å‡é˜³æ€§ç‡)\",\n        y = \"æ•æ„Ÿæ€§ (çœŸé˜³æ€§ç‡)\"\n    ) +\n    coord_equal()\n\n\n\n\n\n\n\n\n\n\nå¤šæ¨¡å‹ROCæ›²çº¿å¯¹æ¯”\n\n# è®­ç»ƒå¤šä¸ªæ¨¡å‹\nmodel_glm &lt;- glm(y ~ x1 + x2, data = data_binary, family = \"binomial\")\nmodel_glm2 &lt;- glm(y ~ x1, data = data_binary, family = \"binomial\")\n\n# è·å–é¢„æµ‹æ¦‚ç‡\nprob1 &lt;- predict(model_glm, type = \"response\")\nprob2 &lt;- predict(model_glm2, type = \"response\")\n\n# è®¡ç®—ROC\nroc1 &lt;- roc(data_binary$y, prob1)\nroc2 &lt;- roc(data_binary$y, prob2)\n\n# åˆå¹¶æ•°æ®\nroc_compare &lt;- rbind(\n    data.frame(\n        model = paste0(\"å®Œæ•´æ¨¡å‹ (AUC=\", round(auc(roc1), 3), \")\"),\n        sensitivity = roc1$sensitivities,\n        specificity = roc1$specificities\n    ),\n    data.frame(\n        model = paste0(\"ç®€å•æ¨¡å‹ (AUC=\", round(auc(roc2), 3), \")\"),\n        sensitivity = roc2$sensitivities,\n        specificity = roc2$specificities\n    )\n)\n\n# å¯¹æ¯”å›¾\nggplot(roc_compare, aes(x = 1 - specificity, y = sensitivity, color = model)) +\n    geom_line(linewidth = 1.2) +\n    geom_abline(slope = 1, intercept = 0, linetype = \"dashed\", color = \"gray50\") +\n    scale_color_manual(values = c(\"#4f46e5\", \"#ef4444\")) +\n    labs(\n        title = \"å¤šæ¨¡å‹ ROC æ›²çº¿å¯¹æ¯”\",\n        x = \"1 - ç‰¹å¼‚æ€§\", y = \"æ•æ„Ÿæ€§\",\n        color = \"æ¨¡å‹\"\n    ) +\n    theme(legend.position = \"bottom\") +\n    coord_equal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "æœºå™¨å­¦ä¹ å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2060-ml-visualization.html#ç¬¬ä¸‰éƒ¨åˆ†å­¦ä¹ æ›²çº¿ä¸éªŒè¯æ›²çº¿",
    "href": "2060-ml-visualization.html#ç¬¬ä¸‰éƒ¨åˆ†å­¦ä¹ æ›²çº¿ä¸éªŒè¯æ›²çº¿",
    "title": "æœºå™¨å­¦ä¹ å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šå­¦ä¹ æ›²çº¿ä¸éªŒè¯æ›²çº¿",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šå­¦ä¹ æ›²çº¿ä¸éªŒè¯æ›²çº¿\n\nå­¦ä¹ æ›²çº¿\nå­¦ä¹ æ›²çº¿å±•ç¤ºäº†éšç€è®­ç»ƒæ ·æœ¬é‡å¢åŠ ï¼Œæ¨¡å‹æ€§èƒ½çš„å˜åŒ–è¶‹åŠ¿ã€‚\n\n# åˆ›å»ºå­¦ä¹ æ›²çº¿æ•°æ®\nset.seed(42)\ntrain_sizes &lt;- seq(20, 250, by = 20)\n\nlearning_data &lt;- lapply(train_sizes, function(n) {\n    # æ¨¡æ‹Ÿè®­ç»ƒå’Œæµ‹è¯•è¯¯å·®\n    train_error &lt;- 0.05 + 0.3 * exp(-n / 50) + rnorm(1, 0, 0.02)\n    test_error &lt;- 0.15 + 0.4 * exp(-n / 80) + rnorm(1, 0, 0.03)\n\n    data.frame(\n        sample_size = n,\n        train_error = max(0, train_error),\n        test_error = max(0, test_error)\n    )\n})\n\nlearning_df &lt;- do.call(rbind, learning_data)\n\n# è½¬æ¢ä¸ºé•¿æ ¼å¼\nlearning_long &lt;- learning_df %&gt;%\n    pivot_longer(\n        cols = c(train_error, test_error),\n        names_to = \"type\", values_to = \"error\"\n    )\n\n# ç»‘åˆ¶å­¦ä¹ æ›²çº¿\nggplot(learning_long, aes(x = sample_size, y = error, color = type)) +\n    geom_line(linewidth = 1.2) +\n    geom_point(size = 3) +\n    scale_color_manual(\n        values = c(\"#ef4444\", \"#4f46e5\"),\n        labels = c(\"æµ‹è¯•è¯¯å·®\", \"è®­ç»ƒè¯¯å·®\")\n    ) +\n    labs(\n        title = \"å­¦ä¹ æ›²çº¿\",\n        subtitle = \"æ ·æœ¬é‡å¯¹æ¨¡å‹æ€§èƒ½çš„å½±å“\",\n        x = \"è®­ç»ƒæ ·æœ¬é‡\", y = \"è¯¯å·®ç‡\",\n        color = \"\"\n    ) +\n    theme(legend.position = \"bottom\")\n\n\n\n\n\n\n\n\n\n\néªŒè¯æ›²çº¿\néªŒè¯æ›²çº¿å±•ç¤ºäº†è¶…å‚æ•°å¯¹æ¨¡å‹æ€§èƒ½çš„å½±å“ã€‚\n\n# åˆ›å»ºéªŒè¯æ›²çº¿æ•°æ®\nset.seed(42)\nk_values &lt;- 1:20\n\nvalidation_data &lt;- lapply(k_values, function(k) {\n    # æ¨¡æ‹Ÿä¸åŒKå€¼çš„è®­ç»ƒå’Œæµ‹è¯•è¯¯å·®\n    train_error &lt;- 0.02 + 0.01 * sqrt(k) + rnorm(1, 0, 0.01)\n    test_error &lt;- 0.15 - 0.08 * log(k) + 0.02 * k + rnorm(1, 0, 0.02)\n\n    data.frame(\n        k = k,\n        train_error = max(0, train_error),\n        test_error = max(0, test_error)\n    )\n})\n\nvalidation_df &lt;- do.call(rbind, validation_data)\n\n# è½¬æ¢ä¸ºé•¿æ ¼å¼\nvalidation_long &lt;- validation_df %&gt;%\n    pivot_longer(\n        cols = c(train_error, test_error),\n        names_to = \"type\", values_to = \"error\"\n    )\n\n# ç»‘åˆ¶éªŒè¯æ›²çº¿\nggplot(validation_long, aes(x = k, y = error, color = type)) +\n    geom_line(linewidth = 1.2) +\n    geom_point(size = 2) +\n    geom_ribbon(\n        data = validation_df,\n        aes(x = k, ymin = train_error, ymax = test_error),\n        fill = \"gray\", alpha = 0.2, inherit.aes = FALSE\n    ) +\n    scale_color_manual(\n        values = c(\"#ef4444\", \"#4f46e5\"),\n        labels = c(\"æµ‹è¯•è¯¯å·®\", \"è®­ç»ƒè¯¯å·®\")\n    ) +\n    labs(\n        title = \"éªŒè¯æ›²çº¿ (KNNæ¨¡å‹)\",\n        subtitle = \"Kå€¼å¯¹æ¨¡å‹æ€§èƒ½çš„å½±å“\",\n        x = \"K (é‚»å±…æ•°)\", y = \"è¯¯å·®ç‡\",\n        color = \"\"\n    ) +\n    theme(legend.position = \"bottom\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "æœºå™¨å­¦ä¹ å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2060-ml-visualization.html#ç¬¬å››éƒ¨åˆ†ç‰¹å¾é‡è¦æ€§å¯è§†åŒ–",
    "href": "2060-ml-visualization.html#ç¬¬å››éƒ¨åˆ†ç‰¹å¾é‡è¦æ€§å¯è§†åŒ–",
    "title": "æœºå™¨å­¦ä¹ å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šç‰¹å¾é‡è¦æ€§å¯è§†åŒ–",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šç‰¹å¾é‡è¦æ€§å¯è§†åŒ–\n\nå˜é‡é‡è¦æ€§æ¡å½¢å›¾\n\n# ä½¿ç”¨irisæ•°æ®é›†è®­ç»ƒéšæœºæ£®æ—\nlibrary(randomForest)\n\nset.seed(42)\nrf_model &lt;- randomForest(Species ~ ., data = iris, importance = TRUE)\n\n# æå–é‡è¦æ€§\nimportance_df &lt;- data.frame(\n    variable = rownames(importance(rf_model)),\n    importance = importance(rf_model)[, \"MeanDecreaseGini\"]\n)\n\n# æ’åºç»‘å›¾\nggplot(importance_df, aes(x = reorder(variable, importance), y = importance)) +\n    geom_col(fill = \"#4f46e5\", alpha = 0.8) +\n    geom_text(aes(label = round(importance, 1)), hjust = -0.2, size = 4) +\n    coord_flip() +\n    labs(\n        title = \"ç‰¹å¾é‡è¦æ€§ (éšæœºæ£®æ—)\",\n        subtitle = \"åŸºäº Gini æŒ‡æ•°å‡å°‘é‡\",\n        x = \"\", y = \"é‡è¦æ€§å¾—åˆ†\"\n    ) +\n    expand_limits(y = max(importance_df$importance) * 1.15)\n\n\n\n\n\n\n\n\n\n\næ’åˆ—é‡è¦æ€§å¯è§†åŒ–\n\n# æ¨¡æ‹Ÿæ’åˆ—é‡è¦æ€§ç»“æœï¼ˆå«è¯¯å·®æ£’ï¼‰\nset.seed(42)\nperm_importance &lt;- data.frame(\n    variable = c(\"Petal.Length\", \"Petal.Width\", \"Sepal.Length\", \"Sepal.Width\"),\n    importance = c(0.42, 0.35, 0.15, 0.08),\n    std = c(0.05, 0.04, 0.03, 0.02)\n)\n\nggplot(perm_importance, aes(x = reorder(variable, importance), y = importance)) +\n    geom_col(fill = \"#10b981\", alpha = 0.8, width = 0.7) +\n    geom_errorbar(aes(ymin = importance - std, ymax = importance + std),\n        width = 0.2, color = \"#064e3b\", linewidth = 0.8\n    ) +\n    coord_flip() +\n    labs(\n        title = \"æ’åˆ—é‡è¦æ€§\",\n        subtitle = \"è¯¯å·®æ£’è¡¨ç¤º10æ¬¡æ’åˆ—çš„æ ‡å‡†å·®\",\n        x = \"\", y = \"å‡†ç¡®ç‡ä¸‹é™\"\n    ) +\n    theme(panel.grid.major.y = element_blank())\n\n\n\n\n\n\n\n\n\n\nåŒé‡è¦æ€§å¯¹æ¯”å›¾\n\n# å¯¹æ¯”ä¸¤ç§é‡è¦æ€§æŒ‡æ ‡\ndual_importance &lt;- data.frame(\n    variable = rep(c(\"Petal.Length\", \"Petal.Width\", \"Sepal.Length\", \"Sepal.Width\"), 2),\n    type = rep(c(\"Ginié‡è¦æ€§\", \"æ’åˆ—é‡è¦æ€§\"), each = 4),\n    importance = c(40, 35, 12, 8, 42, 35, 15, 8)\n)\n\nggplot(dual_importance, aes(x = variable, y = importance, fill = type)) +\n    geom_col(position = \"dodge\", alpha = 0.8) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\")) +\n    labs(\n        title = \"åŒé‡è¦æ€§æŒ‡æ ‡å¯¹æ¯”\",\n        x = \"\", y = \"é‡è¦æ€§å¾—åˆ†\", fill = \"\"\n    ) +\n    theme(\n        legend.position = \"bottom\",\n        axis.text.x = element_text(angle = 45, hjust = 1)\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "æœºå™¨å­¦ä¹ å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2060-ml-visualization.html#ç¬¬äº”éƒ¨åˆ†å›å½’æ¨¡å‹å¯è§†åŒ–",
    "href": "2060-ml-visualization.html#ç¬¬äº”éƒ¨åˆ†å›å½’æ¨¡å‹å¯è§†åŒ–",
    "title": "æœºå™¨å­¦ä¹ å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šå›å½’æ¨¡å‹å¯è§†åŒ–",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šå›å½’æ¨¡å‹å¯è§†åŒ–\n\næ®‹å·®å›¾åˆ†æ\n\n# æ‹Ÿåˆå›å½’æ¨¡å‹\ndata(mtcars)\nmodel_lm &lt;- lm(mpg ~ hp + wt + qsec, data = mtcars)\n\n# æ®‹å·®åˆ†ææ•°æ®\nresidual_df &lt;- data.frame(\n    fitted = fitted(model_lm),\n    residuals = residuals(model_lm),\n    std_residuals = rstandard(model_lm)\n)\n\n# æ®‹å·®vsæ‹Ÿåˆå€¼\np1 &lt;- ggplot(residual_df, aes(x = fitted, y = residuals)) +\n    geom_point(color = \"#4f46e5\", size = 2, alpha = 0.7) +\n    geom_hline(yintercept = 0, linetype = \"dashed\", color = \"red\") +\n    geom_smooth(method = \"loess\", se = FALSE, color = \"#10b981\") +\n    labs(\n        title = \"æ®‹å·® vs æ‹Ÿåˆå€¼\",\n        x = \"æ‹Ÿåˆå€¼\", y = \"æ®‹å·®\"\n    )\n\n# æ ‡å‡†åŒ–æ®‹å·®åˆ†å¸ƒ\np2 &lt;- ggplot(residual_df, aes(x = std_residuals)) +\n    geom_histogram(aes(y = after_stat(density)),\n        bins = 15,\n        fill = \"#4f46e5\", alpha = 0.7\n    ) +\n    geom_density(color = \"#ef4444\", linewidth = 1) +\n    labs(\n        title = \"æ ‡å‡†åŒ–æ®‹å·®åˆ†å¸ƒ\",\n        x = \"æ ‡å‡†åŒ–æ®‹å·®\", y = \"å¯†åº¦\"\n    )\n\np1 + p2\n\n\n\n\n\n\n\n\n\n\nQQå›¾\n\n# QQå›¾æ£€éªŒæ®‹å·®æ­£æ€æ€§\nggplot(residual_df, aes(sample = std_residuals)) +\n    stat_qq(color = \"#4f46e5\", size = 2) +\n    stat_qq_line(color = \"#ef4444\", linewidth = 1) +\n    labs(\n        title = \"æ®‹å·® QQ å›¾\",\n        subtitle = \"æ£€éªŒæ®‹å·®æ­£æ€æ€§å‡è®¾\",\n        x = \"ç†è®ºåˆ†ä½æ•°\", y = \"æ ·æœ¬åˆ†ä½æ•°\"\n    )\n\n\n\n\n\n\n\n\n\n\né¢„æµ‹vså®é™…æ•£ç‚¹å›¾\n\n# é¢„æµ‹å€¼ä¸å®é™…å€¼å¯¹æ¯”\npred_actual &lt;- data.frame(\n    actual = mtcars$mpg,\n    predicted = fitted(model_lm)\n)\n\n# è®¡ç®—Ræ–¹\nr_squared &lt;- summary(model_lm)$r.squared\n\nggplot(pred_actual, aes(x = actual, y = predicted)) +\n    geom_point(color = \"#4f46e5\", size = 3, alpha = 0.7) +\n    geom_abline(slope = 1, intercept = 0, linetype = \"dashed\", color = \"red\") +\n    annotate(\"text\",\n        x = min(pred_actual$actual) + 2,\n        y = max(pred_actual$predicted) - 1,\n        label = paste0(\"RÂ² = \", round(r_squared, 3)),\n        size = 5, fontface = \"bold\"\n    ) +\n    labs(\n        title = \"é¢„æµ‹å€¼ vs å®é™…å€¼\",\n        subtitle = \"çº¢è‰²è™šçº¿ä¸ºå®Œç¾é¢„æµ‹çº¿\",\n        x = \"å®é™…å€¼\", y = \"é¢„æµ‹å€¼\"\n    ) +\n    coord_equal()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "æœºå™¨å­¦ä¹ å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2060-ml-visualization.html#ç¬¬å…­éƒ¨åˆ†æ¨¡å‹æ¯”è¾ƒå¯è§†åŒ–",
    "href": "2060-ml-visualization.html#ç¬¬å…­éƒ¨åˆ†æ¨¡å‹æ¯”è¾ƒå¯è§†åŒ–",
    "title": "æœºå™¨å­¦ä¹ å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹æ¯”è¾ƒå¯è§†åŒ–",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹æ¯”è¾ƒå¯è§†åŒ–\n\næ¨¡å‹æ€§èƒ½ç®±çº¿å›¾\n\n# æ¨¡æ‹Ÿäº¤å‰éªŒè¯ç»“æœ\nset.seed(42)\ncv_results &lt;- data.frame(\n    model = rep(c(\"é€»è¾‘å›å½’\", \"éšæœºæ£®æ—\", \"SVM\", \"KNN\", \"XGBoost\"), each = 10),\n    accuracy = c(\n        rnorm(10, 0.78, 0.03),\n        rnorm(10, 0.85, 0.02),\n        rnorm(10, 0.82, 0.03),\n        rnorm(10, 0.76, 0.04),\n        rnorm(10, 0.87, 0.02)\n    )\n)\n\nggplot(cv_results, aes(\n    x = reorder(model, accuracy, FUN = median),\n    y = accuracy, fill = model\n)) +\n    geom_boxplot(alpha = 0.8, show.legend = FALSE) +\n    geom_jitter(width = 0.1, alpha = 0.5, size = 2) +\n    scale_fill_brewer(palette = \"Set2\") +\n    labs(\n        title = \"æ¨¡å‹æ€§èƒ½å¯¹æ¯” (10æŠ˜äº¤å‰éªŒè¯)\",\n        x = \"æ¨¡å‹\", y = \"å‡†ç¡®ç‡\"\n    ) +\n    coord_flip() +\n    theme(panel.grid.major.y = element_blank())\n\n\n\n\n\n\n\n\n\n\nå¤šæŒ‡æ ‡é›·è¾¾å›¾\n\n# å¤šæŒ‡æ ‡å¯¹æ¯”æ•°æ®\nmetrics &lt;- data.frame(\n    model = c(\"é€»è¾‘å›å½’\", \"éšæœºæ£®æ—\", \"XGBoost\"),\n    Accuracy = c(0.78, 0.85, 0.87),\n    Precision = c(0.75, 0.83, 0.85),\n    Recall = c(0.72, 0.80, 0.82),\n    F1 = c(0.73, 0.81, 0.83),\n    AUC = c(0.81, 0.89, 0.91)\n)\n\n# è½¬æ¢ä¸ºé•¿æ ¼å¼\nmetrics_long &lt;- metrics %&gt;%\n    pivot_longer(-model, names_to = \"metric\", values_to = \"value\")\n\n# çƒ­å›¾å½¢å¼å±•ç¤º\nggplot(metrics_long, aes(x = metric, y = model, fill = value)) +\n    geom_tile(color = \"white\", linewidth = 1) +\n    geom_text(aes(label = round(value, 2)), size = 5, fontface = \"bold\") +\n    scale_fill_gradient(low = \"#fee2e2\", high = \"#22c55e\") +\n    labs(\n        title = \"æ¨¡å‹æ€§èƒ½æŒ‡æ ‡å¯¹æ¯”\",\n        x = \"è¯„ä¼°æŒ‡æ ‡\", y = \"æ¨¡å‹\"\n    ) +\n    theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\n\n\næ¡å½¢å›¾å¤šæŒ‡æ ‡å¯¹æ¯”\n\nggplot(metrics_long, aes(x = metric, y = value, fill = model)) +\n    geom_col(position = \"dodge\", alpha = 0.8) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\", \"#ef4444\")) +\n    labs(\n        title = \"å¤šæŒ‡æ ‡æ¨¡å‹æ€§èƒ½å¯¹æ¯”\",\n        x = \"è¯„ä¼°æŒ‡æ ‡\", y = \"å¾—åˆ†\", fill = \"æ¨¡å‹\"\n    ) +\n    theme(legend.position = \"bottom\") +\n    ylim(0, 1)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "æœºå™¨å­¦ä¹ å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2060-ml-visualization.html#ç¬¬ä¸ƒéƒ¨åˆ†å†³ç­–è¾¹ç•Œå¯è§†åŒ–",
    "href": "2060-ml-visualization.html#ç¬¬ä¸ƒéƒ¨åˆ†å†³ç­–è¾¹ç•Œå¯è§†åŒ–",
    "title": "æœºå™¨å­¦ä¹ å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå†³ç­–è¾¹ç•Œå¯è§†åŒ–",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå†³ç­–è¾¹ç•Œå¯è§†åŒ–\n\näºŒåˆ†ç±»å†³ç­–è¾¹ç•Œ\n\n# åˆ›å»ºç®€å•äºŒåˆ†ç±»æ•°æ®\nset.seed(42)\nn &lt;- 200\nclass1 &lt;- data.frame(\n    x = rnorm(n / 2, mean = 2, sd = 1),\n    y = rnorm(n / 2, mean = 2, sd = 1),\n    class = \"A\"\n)\nclass2 &lt;- data.frame(\n    x = rnorm(n / 2, mean = 4, sd = 1),\n    y = rnorm(n / 2, mean = 4, sd = 1),\n    class = \"B\"\n)\ndecision_data &lt;- rbind(class1, class2)\ndecision_data$class &lt;- factor(decision_data$class)\n\n# è®­ç»ƒé€»è¾‘å›å½’\nmodel_decision &lt;- glm(class ~ x + y, data = decision_data, family = \"binomial\")\n\n# åˆ›å»ºç½‘æ ¼\nx_range &lt;- seq(min(decision_data$x) - 1, max(decision_data$x) + 1, length.out = 100)\ny_range &lt;- seq(min(decision_data$y) - 1, max(decision_data$y) + 1, length.out = 100)\ngrid &lt;- expand.grid(x = x_range, y = y_range)\n\n# é¢„æµ‹ç½‘æ ¼ç‚¹\ngrid$prob &lt;- predict(model_decision, newdata = grid, type = \"response\")\ngrid$pred &lt;- factor(ifelse(grid$prob &gt; 0.5, \"B\", \"A\"))\n\n# ç»˜åˆ¶å†³ç­–è¾¹ç•Œ\nggplot() +\n    geom_tile(data = grid, aes(x = x, y = y, fill = prob), alpha = 0.5) +\n    geom_contour(\n        data = grid, aes(x = x, y = y, z = prob),\n        breaks = 0.5, color = \"black\", linewidth = 1\n    ) +\n    geom_point(\n        data = decision_data, aes(x = x, y = y, color = class),\n        size = 2, alpha = 0.8\n    ) +\n    scale_fill_gradient2(\n        low = \"#4f46e5\", mid = \"white\", high = \"#ef4444\",\n        midpoint = 0.5\n    ) +\n    scale_color_manual(values = c(\"A\" = \"#4f46e5\", \"B\" = \"#ef4444\")) +\n    labs(\n        title = \"é€»è¾‘å›å½’å†³ç­–è¾¹ç•Œ\",\n        subtitle = \"é»‘çº¿ä¸ºå†³ç­–è¾¹ç•Œ (P=0.5)\",\n        x = \"ç‰¹å¾ X\", y = \"ç‰¹å¾ Y\",\n        fill = \"é¢„æµ‹æ¦‚ç‡\", color = \"ç±»åˆ«\"\n    ) +\n    theme(legend.position = \"right\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "æœºå™¨å­¦ä¹ å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2060-ml-visualization.html#ç¬¬å…«éƒ¨åˆ†äº¤å‰éªŒè¯ç»“æœå¯è§†åŒ–",
    "href": "2060-ml-visualization.html#ç¬¬å…«éƒ¨åˆ†äº¤å‰éªŒè¯ç»“æœå¯è§†åŒ–",
    "title": "æœºå™¨å­¦ä¹ å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…«éƒ¨åˆ†ï¼šäº¤å‰éªŒè¯ç»“æœå¯è§†åŒ–",
    "text": "ç¬¬å…«éƒ¨åˆ†ï¼šäº¤å‰éªŒè¯ç»“æœå¯è§†åŒ–\n\næŠ˜çº¿å›¾å±•ç¤ºCVç»“æœ\n\n# æ¨¡æ‹ŸKæŠ˜äº¤å‰éªŒè¯ç»“æœ\nset.seed(42)\ncv_folds &lt;- data.frame(\n    fold = 1:10,\n    train_acc = rnorm(10, 0.88, 0.02),\n    test_acc = rnorm(10, 0.82, 0.03)\n)\n\ncv_long &lt;- cv_folds %&gt;%\n    pivot_longer(-fold, names_to = \"type\", values_to = \"accuracy\")\n\nggplot(cv_long, aes(x = fold, y = accuracy, color = type)) +\n    geom_line(linewidth = 1) +\n    geom_point(size = 3) +\n    geom_hline(\n        yintercept = mean(cv_folds$test_acc),\n        linetype = \"dashed\", color = \"gray50\"\n    ) +\n    annotate(\"text\",\n        x = 8, y = mean(cv_folds$test_acc) + 0.01,\n        label = paste(\"å¹³å‡:\", round(mean(cv_folds$test_acc), 3))\n    ) +\n    scale_color_manual(\n        values = c(\"#ef4444\", \"#4f46e5\"),\n        labels = c(\"æµ‹è¯•é›†\", \"è®­ç»ƒé›†\")\n    ) +\n    labs(\n        title = \"10æŠ˜äº¤å‰éªŒè¯ç»“æœ\",\n        x = \"æŠ˜æ•°\", y = \"å‡†ç¡®ç‡\", color = \"\"\n    ) +\n    theme(legend.position = \"bottom\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "æœºå™¨å­¦ä¹ å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2060-ml-visualization.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "2060-ml-visualization.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "æœºå™¨å­¦ä¹ å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# ===== æ··æ·†çŸ©é˜µçƒ­å›¾ =====\nlibrary(ggplot2)\nconf_df &lt;- as.data.frame(table(Predicted = pred, Actual = actual))\nggplot(conf_df, aes(x = Actual, y = Predicted, fill = Freq)) +\n    geom_tile() +\n    geom_text(aes(label = Freq))\n\n# ===== ROCæ›²çº¿ =====\nlibrary(pROC)\nroc_obj &lt;- roc(actual, pred_prob)\nplot(roc_obj)\nauc(roc_obj)\n\n# ===== ç‰¹å¾é‡è¦æ€§ =====\nlibrary(randomForest)\nrf &lt;- randomForest(y ~ ., data, importance = TRUE)\nimportance(rf)\nvarImpPlot(rf)\n\n# ===== æ®‹å·®è¯Šæ–­ =====\nmodel &lt;- lm(y ~ x, data)\nplot(fitted(model), residuals(model))\nqqnorm(residuals(model))\n\n# ===== å­¦ä¹ æ›²çº¿ =====\n# å¾ªç¯ä¸åŒè®­ç»ƒé›†å¤§å°\n# è®°å½•è®­ç»ƒå’Œæµ‹è¯•è¯¯å·®\n# ç»‘åˆ¶æŠ˜çº¿å›¾\n\n# ===== æ¨¡å‹å¯¹æ¯”ç®±çº¿å›¾ =====\nggplot(cv_results, aes(x = model, y = accuracy, fill = model)) +\n    geom_boxplot()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "æœºå™¨å­¦ä¹ å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2060-ml-visualization.html#å°ç»“",
    "href": "2060-ml-visualization.html#å°ç»“",
    "title": "æœºå™¨å­¦ä¹ å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "å°ç»“",
    "text": "å°ç»“\næœºå™¨å­¦ä¹ å¯è§†åŒ–çš„å…­å¤§æ ¸å¿ƒå›¾è¡¨ï¼š\n\n\n\nå›¾è¡¨\nç”¨é€”\nå…³é”®æ´å¯Ÿ\n\n\n\n\næ··æ·†çŸ©é˜µ\nåˆ†ç±»è¯„ä¼°\nå„ç±»åˆ«é¢„æµ‹å‡†ç¡®æ€§\n\n\nROCæ›²çº¿\né˜ˆå€¼é€‰æ‹©\næ•æ„Ÿæ€§/ç‰¹å¼‚æ€§æƒè¡¡\n\n\nå­¦ä¹ æ›²çº¿\nè¯Šæ–­è¿‡/æ¬ æ‹Ÿåˆ\néœ€è¦æ›´å¤šæ•°æ®?\n\n\nç‰¹å¾é‡è¦æ€§\næ¨¡å‹è§£é‡Š\nå“ªäº›å˜é‡æœ€é‡è¦\n\n\næ®‹å·®å›¾\nå›å½’è¯Šæ–­\næ¨¡å‹å‡è®¾æ˜¯å¦æ»¡è¶³\n\n\næ¨¡å‹å¯¹æ¯”å›¾\né€‰æ‹©æœ€ä½³æ¨¡å‹\nç»¼åˆæ€§èƒ½è¯„ä¼°\n\n\n\n\næœ€ä½³å®è·µï¼šå¥½çš„MLå¯è§†åŒ–ä¸ä»…å±•ç¤ºç»“æœï¼Œæ›´èƒ½å¸®åŠ©å‘ç°é—®é¢˜ã€æŒ‡å¯¼æ¨¡å‹æ”¹è¿›ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "æœºå™¨å­¦ä¹ å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2060-ml-visualization.html#å‚è€ƒèµ„æº",
    "href": "2060-ml-visualization.html#å‚è€ƒèµ„æº",
    "title": "æœºå™¨å­¦ä¹ å¯è§†åŒ–å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\ncaret åŒ…æ–‡æ¡£\npROC åŒ…æ–‡æ¡£\nscikit-learn å¯è§†åŒ–æŒ‡å—ï¼ˆPythonï¼Œä½†æ€è·¯ç›¸é€šï¼‰\nInterpretable Machine Learning",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "æœºå™¨å­¦ä¹ å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2061-base-r-graphics.html",
    "href": "2061-base-r-graphics.html",
    "title": "Base R ç»‘å›¾åŸºç¡€å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "R è¯­è¨€æ‹¥æœ‰ä¸‰å¤§ç»‘å›¾ç³»ç»Ÿï¼Œå…¶ä¸­ Base R æ˜¯æœ€åŸºç¡€ä¹Ÿæ˜¯æœ€çµæ´»çš„ç³»ç»Ÿã€‚\n\n\n\n\n\nç³»ç»Ÿ\nç‰¹ç‚¹\né€‚ç”¨åœºæ™¯\n\n\n\n\nBase R\nçµæ´»ã€åº•å±‚æ§åˆ¶å¼º\nå¿«é€Ÿæ¢ç´¢ã€ç²¾ç»†å®šåˆ¶\n\n\nggplot2\nä¼˜é›…ã€å›¾å±‚è¯­æ³•\nå¤æ‚ç»Ÿè®¡å›¾å½¢\n\n\nlattice\nå¤šé¢æ¿ã€å…¬å¼æ¥å£\nå¤šå˜é‡åˆ†ç»„å±•ç¤º\n\n\n\n\n\n\n\næ— éœ€åŠ è½½é¢å¤–åŒ…ï¼šR è‡ªå¸¦ï¼Œå¼€ç®±å³ç”¨\né€Ÿåº¦å¿«ï¼šåº•å±‚ä»£ç æ•ˆç‡é«˜\nçµæ´»æ€§å¼ºï¼šå¯ç²¾ç¡®æ§åˆ¶æ¯ä¸€ä¸ªå›¾å½¢å…ƒç´ \nå…¼å®¹æ€§å¥½ï¼šå‡ ä¹æ‰€æœ‰RåŒ…éƒ½æ”¯æŒ\nå­¦ä¹ æ›²çº¿å¹³ç¼“ï¼šæ¦‚å¿µç›´è§‚æ˜“æ‡‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "Base R ç»‘å›¾åŸºç¡€"
    ]
  },
  {
    "objectID": "2061-base-r-graphics.html#base-r-ç»‘å›¾ç³»ç»Ÿæ¦‚è¿°",
    "href": "2061-base-r-graphics.html#base-r-ç»‘å›¾ç³»ç»Ÿæ¦‚è¿°",
    "title": "Base R ç»‘å›¾åŸºç¡€å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "R è¯­è¨€æ‹¥æœ‰ä¸‰å¤§ç»‘å›¾ç³»ç»Ÿï¼Œå…¶ä¸­ Base R æ˜¯æœ€åŸºç¡€ä¹Ÿæ˜¯æœ€çµæ´»çš„ç³»ç»Ÿã€‚\n\n\n\n\n\nç³»ç»Ÿ\nç‰¹ç‚¹\né€‚ç”¨åœºæ™¯\n\n\n\n\nBase R\nçµæ´»ã€åº•å±‚æ§åˆ¶å¼º\nå¿«é€Ÿæ¢ç´¢ã€ç²¾ç»†å®šåˆ¶\n\n\nggplot2\nä¼˜é›…ã€å›¾å±‚è¯­æ³•\nå¤æ‚ç»Ÿè®¡å›¾å½¢\n\n\nlattice\nå¤šé¢æ¿ã€å…¬å¼æ¥å£\nå¤šå˜é‡åˆ†ç»„å±•ç¤º\n\n\n\n\n\n\n\næ— éœ€åŠ è½½é¢å¤–åŒ…ï¼šR è‡ªå¸¦ï¼Œå¼€ç®±å³ç”¨\né€Ÿåº¦å¿«ï¼šåº•å±‚ä»£ç æ•ˆç‡é«˜\nçµæ´»æ€§å¼ºï¼šå¯ç²¾ç¡®æ§åˆ¶æ¯ä¸€ä¸ªå›¾å½¢å…ƒç´ \nå…¼å®¹æ€§å¥½ï¼šå‡ ä¹æ‰€æœ‰RåŒ…éƒ½æ”¯æŒ\nå­¦ä¹ æ›²çº¿å¹³ç¼“ï¼šæ¦‚å¿µç›´è§‚æ˜“æ‡‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "Base R ç»‘å›¾åŸºç¡€"
    ]
  },
  {
    "objectID": "2061-base-r-graphics.html#ç¬¬ä¸€éƒ¨åˆ†åŸºç¡€å›¾è¡¨ç±»å‹",
    "href": "2061-base-r-graphics.html#ç¬¬ä¸€éƒ¨åˆ†åŸºç¡€å›¾è¡¨ç±»å‹",
    "title": "Base R ç»‘å›¾åŸºç¡€å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€å›¾è¡¨ç±»å‹",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€å›¾è¡¨ç±»å‹\n\næ•£ç‚¹å›¾ plot()\nplot() æ˜¯ Base R ä¸­æœ€å¸¸ç”¨çš„ç»‘å›¾å‡½æ•°ï¼ŒåŠŸèƒ½éå¸¸å¼ºå¤§ã€‚\n\n# ä½¿ç”¨å†…ç½®æ•°æ®\ndata(mtcars)\n\n# æœ€ç®€å•çš„æ•£ç‚¹å›¾\nplot(mtcars$wt, mtcars$mpg)\n\n\n\n\n\n\n\n\n\n# æ·»åŠ æ ‡ç­¾å’Œæ ‡é¢˜\nplot(mtcars$wt, mtcars$mpg,\n    main = \"æ±½è½¦é‡é‡ä¸æ²¹è€—çš„å…³ç³»\",\n    xlab = \"é‡é‡ (1000 lbs)\",\n    ylab = \"æ²¹è€— (MPG)\",\n    pch = 19, # å®å¿ƒåœ†ç‚¹\n    col = \"#4f46e5\", # ç‚¹é¢œè‰²\n    cex = 1.2\n) # ç‚¹å¤§å°\n\n\n\n\n\n\n\n\n\n# å…¬å¼æ¥å£\nplot(mpg ~ wt,\n    data = mtcars,\n    main = \"ä½¿ç”¨å…¬å¼æ¥å£\",\n    pch = 16,\n    col = \"steelblue\"\n)\n\n\n\n\n\n\n\n\n\n\næŠ˜çº¿å›¾\n\n# æ—¶é—´åºåˆ—æ•°æ®\nx &lt;- 1:20\ny &lt;- cumsum(rnorm(20))\n\n# æŠ˜çº¿å›¾\nplot(x, y,\n    type = \"l\", # \"l\" è¡¨ç¤ºçº¿\n    main = \"æŠ˜çº¿å›¾ç¤ºä¾‹\",\n    xlab = \"æ—¶é—´\",\n    ylab = \"ç´¯ç§¯å€¼\",\n    col = \"#ef4444\",\n    lwd = 2\n) # çº¿å®½\n\n\n\n\n\n\n\n\n\n# typeå‚æ•°çš„ä¸åŒå–å€¼\npar(mfrow = c(2, 3))\ntypes &lt;- c(\"p\", \"l\", \"b\", \"o\", \"h\", \"s\")\ntitles &lt;- c(\"p:ç‚¹\", \"l:çº¿\", \"b:ç‚¹+çº¿\", \"o:è¦†ç›–\", \"h:ç›´æ–¹\", \"s:é˜¶æ¢¯\")\n\nfor (i in 1:6) {\n    plot(1:10, sample(10),\n        type = types[i],\n        main = titles[i], col = \"#4f46e5\", lwd = 2, pch = 19\n    )\n}\n\n\n\n\n\n\n\npar(mfrow = c(1, 1))\n\n\n\næŸ±çŠ¶å›¾ barplot()\n\n# ç®€å•æŸ±çŠ¶å›¾\ncounts &lt;- table(mtcars$cyl)\nbarplot(counts,\n    main = \"ä¸åŒæ°”ç¼¸æ•°çš„æ±½è½¦æ•°é‡\",\n    xlab = \"æ°”ç¼¸æ•°\",\n    ylab = \"æ•°é‡\",\n    col = c(\"#4f46e5\", \"#10b981\", \"#ef4444\")\n)\n\n\n\n\n\n\n\n\n\n# æ°´å¹³æŸ±çŠ¶å›¾\nbarplot(counts,\n    main = \"æ°´å¹³æŸ±çŠ¶å›¾\",\n    horiz = TRUE,\n    col = \"#4f46e5\",\n    las = 1\n) # æ ‡ç­¾æ–¹å‘\n\n\n\n\n\n\n\n\n\n# åˆ†ç»„æŸ±çŠ¶å›¾\ncounts_matrix &lt;- matrix(c(4, 6, 3, 8, 10, 7), nrow = 2)\nrownames(counts_matrix) &lt;- c(\"ç”·\", \"å¥³\")\ncolnames(counts_matrix) &lt;- c(\"A\", \"B\", \"C\")\n\nbarplot(counts_matrix,\n    beside = TRUE, # å¹¶æ’æ’åˆ—\n    main = \"åˆ†ç»„æŸ±çŠ¶å›¾\",\n    col = c(\"#4f46e5\", \"#ec4899\"),\n    legend = rownames(counts_matrix)\n)\n\n\n\n\n\n\n\n\n\n\nç›´æ–¹å›¾ hist()\n\n# åŸºç¡€ç›´æ–¹å›¾\nhist(mtcars$mpg,\n    main = \"MPG åˆ†å¸ƒç›´æ–¹å›¾\",\n    xlab = \"æ²¹è€— (MPG)\",\n    ylab = \"é¢‘æ•°\",\n    col = \"#4f46e5\",\n    border = \"white\"\n)\n\n\n\n\n\n\n\n\n\n# æ§åˆ¶åˆ†ç»„æ•°é‡å’Œå¯†åº¦æ›²çº¿\nhist(mtcars$mpg,\n    breaks = 15, # åˆ†ç»„æ•°é‡\n    freq = FALSE, # æ˜¾ç¤ºå¯†åº¦è€Œéé¢‘æ•°\n    main = \"å¸¦å¯†åº¦æ›²çº¿çš„ç›´æ–¹å›¾\",\n    xlab = \"æ²¹è€— (MPG)\",\n    col = \"#4f46e580\"\n) # åŠé€æ˜\n\n# æ·»åŠ å¯†åº¦æ›²çº¿\nlines(density(mtcars$mpg), col = \"#ef4444\", lwd = 2)\n\n\n\n\n\n\n\n\n\n\nç®±çº¿å›¾ boxplot()\n\n# å•å˜é‡ç®±çº¿å›¾\nboxplot(mtcars$mpg,\n    main = \"MPG ç®±çº¿å›¾\",\n    ylab = \"æ²¹è€— (MPG)\",\n    col = \"#4f46e5\"\n)\n\n\n\n\n\n\n\n\n\n# åˆ†ç»„ç®±çº¿å›¾\nboxplot(mpg ~ cyl,\n    data = mtcars,\n    main = \"ä¸åŒæ°”ç¼¸æ•°çš„æ²¹è€—åˆ†å¸ƒ\",\n    xlab = \"æ°”ç¼¸æ•°\",\n    ylab = \"æ²¹è€— (MPG)\",\n    col = c(\"#4f46e5\", \"#10b981\", \"#ef4444\"),\n    notch = TRUE\n) # æ˜¾ç¤ºå‡¹å£\n\n\n\n\n\n\n\n\n\n# æ°´å¹³ç®±çº¿å›¾\nboxplot(mpg ~ cyl,\n    data = mtcars,\n    horizontal = TRUE,\n    main = \"æ°´å¹³ç®±çº¿å›¾\",\n    xlab = \"æ²¹è€— (MPG)\",\n    ylab = \"æ°”ç¼¸æ•°\",\n    col = \"#4f46e5\",\n    las = 1\n)\n\n\n\n\n\n\n\n\n\n\né¥¼å›¾ pie()\n\n# åŸºç¡€é¥¼å›¾\nslices &lt;- c(30, 25, 20, 15, 10)\nlabels &lt;- c(\"ç±»åˆ«A\", \"ç±»åˆ«B\", \"ç±»åˆ«C\", \"ç±»åˆ«D\", \"ç±»åˆ«E\")\n\npie(slices,\n    labels = labels,\n    main = \"é¥¼å›¾ç¤ºä¾‹\",\n    col = c(\"#4f46e5\", \"#10b981\", \"#ef4444\", \"#f59e0b\", \"#8b5cf6\")\n)\n\n\n\n\n\n\n\n\n\n# å¸¦ç™¾åˆ†æ¯”çš„é¥¼å›¾\npct &lt;- round(slices / sum(slices) * 100, 1)\nlabels_pct &lt;- paste(labels, \"\\n\", pct, \"%\", sep = \"\")\n\npie(slices,\n    labels = labels_pct,\n    main = \"å¸¦ç™¾åˆ†æ¯”çš„é¥¼å›¾\",\n    col = rainbow(5)\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "Base R ç»‘å›¾åŸºç¡€"
    ]
  },
  {
    "objectID": "2061-base-r-graphics.html#ç¬¬äºŒéƒ¨åˆ†å›¾å½¢å‚æ•°-par",
    "href": "2061-base-r-graphics.html#ç¬¬äºŒéƒ¨åˆ†å›¾å½¢å‚æ•°-par",
    "title": "Base R ç»‘å›¾åŸºç¡€å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šå›¾å½¢å‚æ•° par()",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šå›¾å½¢å‚æ•° par()\npar() å‡½æ•°ç”¨äºè®¾ç½®å…¨å±€å›¾å½¢å‚æ•°ï¼Œæ§åˆ¶å›¾å½¢çš„å„ä¸ªæ–¹é¢ã€‚\n\nè¾¹è·è®¾ç½®\n\n# æŸ¥çœ‹å½“å‰è¾¹è·è®¾ç½®\npar(\"mar\") # ä¸‹ã€å·¦ã€ä¸Šã€å³\n\n[1] 5.1 4.1 4.1 2.1\n\npar(\"oma\") # å¤–è¾¹è·\n\n[1] 0 0 0 0\n\n\n\n# è®¾ç½®è¾¹è·\npar(mar = c(5, 4, 4, 2) + 0.1) # é»˜è®¤å€¼\n\nplot(1:10, main = \"é»˜è®¤è¾¹è·\")\n\n\n\n\n\n\n\n\n\n# ç´§å‡‘è¾¹è·\nold_par &lt;- par(mar = c(3, 3, 2, 1))\nplot(1:10, main = \"ç´§å‡‘è¾¹è·\")\n\n\n\n\n\n\n\npar(old_par) # æ¢å¤é»˜è®¤\n\n\n\né¢œè‰²å‚æ•°\n\n# å¸¸ç”¨é¢œè‰²å‚æ•°\nplot(mtcars$wt, mtcars$mpg,\n    pch = 19,\n    col = \"#4f46e5\", # ç‚¹é¢œè‰²\n    bg = \"#10b981\", # å¡«å……é¢œè‰²(å½“pch=21-25æ—¶)\n    main = \"é¢œè‰²å‚æ•°ç¤ºä¾‹\"\n)\n\n\n\n\n\n\n\n\n\n# æ ¹æ®åˆ†ç»„ç€è‰²\ncolors &lt;- c(\"#4f46e5\", \"#10b981\", \"#ef4444\")[as.factor(mtcars$cyl)]\nplot(mtcars$wt, mtcars$mpg,\n    pch = 19,\n    col = colors,\n    main = \"æŒ‰æ°”ç¼¸æ•°ç€è‰²\"\n)\nlegend(\"topright\",\n    legend = c(\"4ç¼¸\", \"6ç¼¸\", \"8ç¼¸\"),\n    col = c(\"#4f46e5\", \"#10b981\", \"#ef4444\"),\n    pch = 19\n)\n\n\n\n\n\n\n\n\n\n\nç‚¹å½¢çŠ¶ pch\n\n# å±•ç¤ºæ‰€æœ‰ç‚¹å½¢çŠ¶\nplot(1:25, rep(1, 25),\n    pch = 1:25,\n    cex = 2,\n    ylim = c(0.5, 1.5),\n    main = \"pch ç‚¹å½¢çŠ¶ä¸€è§ˆ\",\n    xlab = \"pch å€¼\",\n    yaxt = \"n\", ylab = \"\"\n)\ntext(1:25, rep(0.7, 25), labels = 1:25, cex = 0.8)\n\n\n\n\n\n\n\n\n\n\nçº¿å‹ lty\n\n# å±•ç¤ºæ‰€æœ‰çº¿å‹\nplot(1,\n    type = \"n\", xlim = c(0, 10), ylim = c(0, 7),\n    main = \"lty çº¿å‹ä¸€è§ˆ\",\n    xlab = \"\", ylab = \"\", xaxt = \"n\", yaxt = \"n\"\n)\n\nline_types &lt;- c(\"blank\", \"solid\", \"dashed\", \"dotted\", \"dotdash\", \"longdash\", \"twodash\")\nfor (i in 1:6) {\n    lines(c(1, 9), c(7 - i, 7 - i), lty = i, lwd = 2)\n    text(0.5, 7 - i, labels = paste(i, \":\", line_types[i + 1]), adj = 0, cex = 0.9)\n}\n\n\n\n\n\n\n\n\n\n\nå­—ä½“å‚æ•°\n\n# å­—ä½“å¤§å°å’Œæ ·å¼\nplot(1:10,\n    main = \"å­—ä½“å‚æ•°ç¤ºä¾‹\",\n    cex.main = 1.5, # æ ‡é¢˜å¤§å°\n    cex.lab = 1.2, # è½´æ ‡ç­¾å¤§å°\n    cex.axis = 0.9, # åˆ»åº¦æ ‡ç­¾å¤§å°\n    font.main = 2, # æ ‡é¢˜ç²—ä½“\n    col.main = \"#4f46e5\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "Base R ç»‘å›¾åŸºç¡€"
    ]
  },
  {
    "objectID": "2061-base-r-graphics.html#ç¬¬ä¸‰éƒ¨åˆ†å¤šå›¾å¸ƒå±€",
    "href": "2061-base-r-graphics.html#ç¬¬ä¸‰éƒ¨åˆ†å¤šå›¾å¸ƒå±€",
    "title": "Base R ç»‘å›¾åŸºç¡€å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šå¤šå›¾å¸ƒå±€",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šå¤šå›¾å¸ƒå±€\n\npar(mfrow/mfcol)\n\n# 2è¡Œ2åˆ—å¸ƒå±€ (æŒ‰è¡Œå¡«å……)\npar(mfrow = c(2, 2))\nplot(1:10, main = \"å›¾1\")\nplot(rnorm(100), main = \"å›¾2\")\nhist(rnorm(100), main = \"å›¾3\")\nboxplot(rnorm(100), main = \"å›¾4\")\n\n\n\n\n\n\n\npar(mfrow = c(1, 1))\n\n\n\nlayout() çµæ´»å¸ƒå±€\n\n# è‡ªå®šä¹‰å¸ƒå±€çŸ©é˜µ\nlayout_matrix &lt;- matrix(c(1, 1, 2, 3), nrow = 2, byrow = TRUE)\nlayout(layout_matrix)\n\n# ç¬¬ä¸€ä¸ªå›¾å æ®é¡¶éƒ¨æ•´è¡Œ\nplot(mtcars$wt, mtcars$mpg, main = \"æ•£ç‚¹å›¾ (è·¨ä¸¤åˆ—)\", pch = 19, col = \"#4f46e5\")\n\n# ä¸‹é¢ä¸¤ä¸ªå›¾å„å ä¸€åŠ\nhist(mtcars$mpg, main = \"ç›´æ–¹å›¾\", col = \"#10b981\")\nboxplot(mtcars$mpg, main = \"ç®±çº¿å›¾\", col = \"#ef4444\")\n\n\n\n\n\n\n\npar(mfrow = c(1, 1))\n\n\n# ä¸ç­‰å®½å¸ƒå±€\nlayout_matrix &lt;- matrix(c(1, 2, 2), nrow = 1)\nlayout(layout_matrix, widths = c(1, 2))\n\nboxplot(mtcars$mpg, main = \"çª„å›¾\", col = \"#4f46e5\")\nplot(mtcars$wt, mtcars$mpg, main = \"å®½å›¾\", pch = 19, col = \"#10b981\")\n\n\n\n\n\n\n\npar(mfrow = c(1, 1))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "Base R ç»‘å›¾åŸºç¡€"
    ]
  },
  {
    "objectID": "2061-base-r-graphics.html#ç¬¬å››éƒ¨åˆ†å›¾å±‚å åŠ ä¸æ ‡æ³¨",
    "href": "2061-base-r-graphics.html#ç¬¬å››éƒ¨åˆ†å›¾å±‚å åŠ ä¸æ ‡æ³¨",
    "title": "Base R ç»‘å›¾åŸºç¡€å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šå›¾å±‚å åŠ ä¸æ ‡æ³¨",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šå›¾å±‚å åŠ ä¸æ ‡æ³¨\nBase R é‡‡ç”¨â€ç”»å®¶æ¨¡å‹â€â€”å…ˆç”»çš„åœ¨ä¸‹å±‚ï¼Œåç”»çš„è¦†ç›–åœ¨ä¸Šå±‚ã€‚\n\næ·»åŠ ç‚¹ points()\n\n# åŸºç¡€å›¾\nplot(mtcars$wt, mtcars$mpg,\n    pch = 1,\n    col = \"gray50\",\n    main = \"å åŠ ä¸åŒæ ·å¼çš„ç‚¹\"\n)\n\n# çªå‡ºæ˜¾ç¤ºé«˜æ²¹è€—è½¦è¾†\nhigh_mpg &lt;- mtcars$mpg &gt; 25\npoints(mtcars$wt[high_mpg], mtcars$mpg[high_mpg],\n    pch = 19,\n    col = \"#ef4444\",\n    cex = 1.5\n)\n\n\n\n\n\n\n\n\n\n\næ·»åŠ çº¿ lines() å’Œ abline()\n\n# æ•£ç‚¹å›¾\nplot(mtcars$wt, mtcars$mpg,\n    pch = 19,\n    col = \"#4f46e5\",\n    main = \"æ·»åŠ å›å½’çº¿å’Œå‚è€ƒçº¿\"\n)\n\n# æ·»åŠ å›å½’çº¿\nmodel &lt;- lm(mpg ~ wt, data = mtcars)\nabline(model, col = \"#ef4444\", lwd = 2)\n\n# æ·»åŠ å‡å€¼å‚è€ƒçº¿\nabline(h = mean(mtcars$mpg), col = \"#10b981\", lty = 2)\nabline(v = mean(mtcars$wt), col = \"#f59e0b\", lty = 2)\n\n# æ·»åŠ å›¾ä¾‹\nlegend(\"topright\",\n    legend = c(\"å›å½’çº¿\", \"MPGå‡å€¼\", \"WTå‡å€¼\"),\n    col = c(\"#ef4444\", \"#10b981\", \"#f59e0b\"),\n    lty = c(1, 2, 2),\n    lwd = 2\n)\n\n\n\n\n\n\n\n\n\n\næ·»åŠ æ–‡æœ¬ text()\n\n# æ•£ç‚¹å›¾\nplot(mtcars$wt, mtcars$mpg,\n    pch = 19,\n    col = \"#4f46e5\",\n    main = \"æ·»åŠ æ•°æ®æ ‡ç­¾\"\n)\n\n# ä¸ºæå€¼ç‚¹æ·»åŠ æ ‡ç­¾\n# æœ€é«˜æ²¹è€—\nmax_idx &lt;- which.max(mtcars$mpg)\ntext(mtcars$wt[max_idx], mtcars$mpg[max_idx],\n    labels = rownames(mtcars)[max_idx],\n    pos = 4, # æ ‡ç­¾ä½ç½®: 1ä¸‹ 2å·¦ 3ä¸Š 4å³\n    cex = 0.8\n)\n\n# æœ€ä½æ²¹è€—\nmin_idx &lt;- which.min(mtcars$mpg)\ntext(mtcars$wt[min_idx], mtcars$mpg[min_idx],\n    labels = rownames(mtcars)[min_idx],\n    pos = 2,\n    cex = 0.8\n)\n\n\n\n\n\n\n\n\n\n\næ·»åŠ å›¾ä¾‹ legend()\n\n# åˆ†ç»„æ•£ç‚¹å›¾\ncolors &lt;- c(\"#4f46e5\", \"#10b981\", \"#ef4444\")\nshapes &lt;- c(15, 16, 17)\ncyl_factor &lt;- as.factor(mtcars$cyl)\n\nplot(mtcars$wt, mtcars$mpg,\n    pch = shapes[cyl_factor],\n    col = colors[cyl_factor],\n    main = \"å®Œæ•´å›¾ä¾‹ç¤ºä¾‹\",\n    xlab = \"é‡é‡\", ylab = \"æ²¹è€—\"\n)\n\n# æ·»åŠ å®Œæ•´å›¾ä¾‹\nlegend(\"topright\",\n    legend = c(\"4ç¼¸\", \"6ç¼¸\", \"8ç¼¸\"),\n    col = colors,\n    pch = shapes,\n    title = \"æ°”ç¼¸æ•°\",\n    bg = \"white\", # å›¾ä¾‹èƒŒæ™¯\n    box.lty = 1\n) # å›¾ä¾‹è¾¹æ¡†\n\n\n\n\n\n\n\n\n\n\næ·»åŠ ç®­å¤´å’Œå¤šè¾¹å½¢\n\nplot(1:10, 1:10, type = \"n\", main = \"ç®­å¤´å’Œå½¢çŠ¶\")\n\n# æ·»åŠ ç®­å¤´\narrows(2, 2, 4, 4, col = \"#4f46e5\", lwd = 2)\n\n# æ·»åŠ çŸ©å½¢\nrect(5, 1, 7, 3, col = \"#10b98180\", border = \"#10b981\")\n\n# æ·»åŠ å¤šè¾¹å½¢\npolygon(c(8, 10, 9), c(2, 2, 4), col = \"#ef444480\", border = \"#ef4444\")\n\n# æ·»åŠ æ–‡æœ¬è¯´æ˜\ntext(3, 3.5, \"ç®­å¤´\", cex = 0.9)\ntext(6, 2, \"çŸ©å½¢\", cex = 0.9)\ntext(9, 2.5, \"ä¸‰è§’å½¢\", cex = 0.9)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "Base R ç»‘å›¾åŸºç¡€"
    ]
  },
  {
    "objectID": "2061-base-r-graphics.html#ç¬¬äº”éƒ¨åˆ†åæ ‡è½´å®šåˆ¶",
    "href": "2061-base-r-graphics.html#ç¬¬äº”éƒ¨åˆ†åæ ‡è½´å®šåˆ¶",
    "title": "Base R ç»‘å›¾åŸºç¡€å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šåæ ‡è½´å®šåˆ¶",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šåæ ‡è½´å®šåˆ¶\n\nè‡ªå®šä¹‰åæ ‡è½´\n\n# å®Œå…¨è‡ªå®šä¹‰åæ ‡è½´\nplot(mtcars$wt, mtcars$mpg,\n    pch = 19,\n    col = \"#4f46e5\",\n    main = \"è‡ªå®šä¹‰åæ ‡è½´\",\n    xaxt = \"n\", # ä¸ç”»xè½´\n    yaxt = \"n\"\n) # ä¸ç”»yè½´\n\n# è‡ªå®šä¹‰xè½´\naxis(1, # 1=ä¸‹, 2=å·¦, 3=ä¸Š, 4=å³\n    at = c(2, 3, 4, 5),\n    labels = c(\"è½»\", \"ä¸­ç­‰\", \"è¾ƒé‡\", \"é‡\"),\n    col.axis = \"#4f46e5\"\n)\n\n# è‡ªå®šä¹‰yè½´\naxis(2,\n    at = seq(10, 35, by = 5),\n    las = 1\n) # æ ‡ç­¾æ°´å¹³\n\n\n\n\n\n\n\n\n\n\nå¯¹æ•°åæ ‡è½´\n\n# å¯¹æ•°åæ ‡\nx &lt;- 1:100\ny &lt;- x^2\n\npar(mfrow = c(1, 2))\n\n# æ™®é€šåæ ‡\nplot(x, y, main = \"æ™®é€šåæ ‡\", pch = 19, cex = 0.5, col = \"#4f46e5\")\n\n# å¯¹æ•°åæ ‡\nplot(x, y,\n    main = \"å¯¹æ•°åæ ‡\", pch = 19, cex = 0.5, col = \"#10b981\",\n    log = \"xy\"\n) # åŒå¯¹æ•°\n\n\n\n\n\n\n\npar(mfrow = c(1, 1))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "Base R ç»‘å›¾åŸºç¡€"
    ]
  },
  {
    "objectID": "2061-base-r-graphics.html#ç¬¬å…­éƒ¨åˆ†ç»„åˆå›¾å½¢ç¤ºä¾‹",
    "href": "2061-base-r-graphics.html#ç¬¬å…­éƒ¨åˆ†ç»„åˆå›¾å½¢ç¤ºä¾‹",
    "title": "Base R ç»‘å›¾åŸºç¡€å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šç»„åˆå›¾å½¢ç¤ºä¾‹",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šç»„åˆå›¾å½¢ç¤ºä¾‹\n\næ•£ç‚¹å›¾ + è¾¹ç¼˜åˆ†å¸ƒ\n\n# è®¾ç½®å¸ƒå±€\nlayout(matrix(c(2, 0, 1, 3), nrow = 2, byrow = TRUE),\n    widths = c(4, 1),\n    heights = c(1, 4)\n)\n\n# ä¸»æ•£ç‚¹å›¾\npar(mar = c(4, 4, 1, 1))\nplot(mtcars$wt, mtcars$mpg,\n    pch = 19, col = \"#4f46e5\",\n    xlab = \"é‡é‡\", ylab = \"æ²¹è€—\"\n)\n\n# é¡¶éƒ¨ç›´æ–¹å›¾(xè¾¹ç¼˜åˆ†å¸ƒ)\npar(mar = c(0, 4, 2, 1))\nhist(mtcars$wt, main = \"\", xaxt = \"n\", col = \"#4f46e580\")\n\n# å³ä¾§ç›´æ–¹å›¾(yè¾¹ç¼˜åˆ†å¸ƒ)\npar(mar = c(4, 0, 1, 2))\nbarplot(hist(mtcars$mpg, plot = FALSE)$counts,\n    horiz = TRUE, col = \"#4f46e580\", xlab = \"\"\n)\n\n\n\n\n\n\n\npar(mfrow = c(1, 1), mar = c(5, 4, 4, 2) + 0.1)\n\n\n\nå¤šå˜é‡çŸ©é˜µå›¾\n\n# pairs() çŸ©é˜µæ•£ç‚¹å›¾\npairs(mtcars[, c(\"mpg\", \"hp\", \"wt\", \"qsec\")],\n    pch = 19,\n    col = \"#4f46e5\",\n    main = \"å¤šå˜é‡æ•£ç‚¹å›¾çŸ©é˜µ\"\n)\n\n\n\n\n\n\n\n\n\n# è‡ªå®šä¹‰å¯¹è§’çº¿\npanel.hist &lt;- function(x, ...) {\n    usr &lt;- par(\"usr\")\n    par(usr = c(usr[1:2], 0, 1.5))\n    h &lt;- hist(x, plot = FALSE)\n    breaks &lt;- h$breaks\n    nB &lt;- length(breaks)\n    y &lt;- h$counts / max(h$counts)\n    rect(breaks[-nB], 0, breaks[-1], y, col = \"#4f46e580\")\n}\n\npairs(mtcars[, c(\"mpg\", \"hp\", \"wt\")],\n    pch = 19,\n    col = \"#4f46e5\",\n    diag.panel = panel.hist,\n    main = \"å¸¦ç›´æ–¹å›¾çš„çŸ©é˜µæ•£ç‚¹å›¾\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "Base R ç»‘å›¾åŸºç¡€"
    ]
  },
  {
    "objectID": "2061-base-r-graphics.html#ç¬¬ä¸ƒéƒ¨åˆ†ä¿å­˜å›¾ç‰‡",
    "href": "2061-base-r-graphics.html#ç¬¬ä¸ƒéƒ¨åˆ†ä¿å­˜å›¾ç‰‡",
    "title": "Base R ç»‘å›¾åŸºç¡€å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šä¿å­˜å›¾ç‰‡",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šä¿å­˜å›¾ç‰‡\n\nå¸¸ç”¨æ ¼å¼ä¿å­˜\n\n# PNGæ ¼å¼ (é€‚åˆç½‘é¡µã€æ–‡æ¡£)\npng(\"my_plot.png\", width = 800, height = 600, res = 100)\nplot(mtcars$wt, mtcars$mpg, pch = 19, col = \"#4f46e5\")\ndev.off()\n\n# PDFæ ¼å¼ (çŸ¢é‡å›¾ï¼Œé€‚åˆè®ºæ–‡)\npdf(\"my_plot.pdf\", width = 8, height = 6)\nplot(mtcars$wt, mtcars$mpg, pch = 19, col = \"#4f46e5\")\ndev.off()\n\n# SVGæ ¼å¼ (çŸ¢é‡å›¾ï¼Œé€‚åˆç½‘é¡µ)\nsvg(\"my_plot.svg\", width = 8, height = 6)\nplot(mtcars$wt, mtcars$mpg, pch = 19, col = \"#4f46e5\")\ndev.off()\n\n# TIFFæ ¼å¼ (é«˜åˆ†è¾¨ç‡ï¼Œé€‚åˆå‡ºç‰ˆ)\ntiff(\"my_plot.tiff\", width = 3000, height = 2400, res = 300)\nplot(mtcars$wt, mtcars$mpg, pch = 19, col = \"#4f46e5\")\ndev.off()\n\n\n\nåˆ†è¾¨ç‡è®¾ç½®å»ºè®®\n\n\n\nç”¨é€”\næ ¼å¼\nåˆ†è¾¨ç‡\n\n\n\n\nç½‘é¡µå±•ç¤º\nPNG\n72-100 dpi\n\n\nWordæ–‡æ¡£\nPNG\n150-200 dpi\n\n\næœŸåˆŠè®ºæ–‡\nTIFF/PDF\n300+ dpi\n\n\næµ·æŠ¥\nPDF/SVG\nçŸ¢é‡æ ¼å¼",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "Base R ç»‘å›¾åŸºç¡€"
    ]
  },
  {
    "objectID": "2061-base-r-graphics.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "2061-base-r-graphics.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "Base R ç»‘å›¾åŸºç¡€å®Œå…¨æŒ‡å—",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# ===== åŸºç¡€å›¾å½¢ =====\nplot(x, y) # æ•£ç‚¹å›¾\nplot(x, y, type = \"l\") # æŠ˜çº¿å›¾\nbarplot(heights) # æŸ±çŠ¶å›¾\nhist(x) # ç›´æ–¹å›¾\nboxplot(x) # ç®±çº¿å›¾\npie(x) # é¥¼å›¾\n\n# ===== å¸¸ç”¨å‚æ•° =====\nmain &lt;- \"æ ‡é¢˜\" # ä¸»æ ‡é¢˜\nxlab &lt;- \"Xè½´\" # Xè½´æ ‡ç­¾\nylab &lt;- \"Yè½´\" # Yè½´æ ‡ç­¾\ncol &lt;- \"blue\" # é¢œè‰²\npch &lt;- 19 # ç‚¹å½¢çŠ¶\ncex &lt;- 1.5 # ç‚¹å¤§å°\nlwd &lt;- 2 # çº¿å®½\nlty &lt;- 2 # çº¿å‹\n\n# ===== å¤šå›¾å¸ƒå±€ =====\npar(mfrow = c(2, 2)) # 2x2å¸ƒå±€\nlayout(matrix(...)) # è‡ªå®šä¹‰å¸ƒå±€\n\n# ===== å›¾å±‚å åŠ  =====\npoints(x, y) # æ·»åŠ ç‚¹\nlines(x, y) # æ·»åŠ çº¿\nabline(h = 5) # æ°´å¹³çº¿\nabline(v = 3) # å‚ç›´çº¿\nabline(a, b) # y = a + bx\ntext(x, y, \"label\") # æ·»åŠ æ–‡æœ¬\nlegend(\"topright\", ...) # å›¾ä¾‹\narrows(x0, y0, x1, y1) # ç®­å¤´\n\n# ===== åæ ‡è½´ =====\naxis(1, at = ..., labels = ...)\nxaxt &lt;- \"n\" # ä¸ç”»xè½´\nyaxt &lt;- \"n\" # ä¸ç”»yè½´\nlas &lt;- 1 # æ ‡ç­¾æ°´å¹³\n\n# ===== ä¿å­˜å›¾ç‰‡ =====\npng(\"file.png\", width, height, res)\npdf(\"file.pdf\", width, height)\ndev.off()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "Base R ç»‘å›¾åŸºç¡€"
    ]
  },
  {
    "objectID": "2061-base-r-graphics.html#å°ç»“",
    "href": "2061-base-r-graphics.html#å°ç»“",
    "title": "Base R ç»‘å›¾åŸºç¡€å®Œå…¨æŒ‡å—",
    "section": "å°ç»“",
    "text": "å°ç»“\nBase R ç»‘å›¾å­¦ä¹ è·¯å¾„ï¼š\n\næŒæ¡åŸºæœ¬å›¾å½¢ï¼šplot, barplot, hist, boxplot\nç†è§£parå‚æ•°ï¼šè¾¹è·ã€é¢œè‰²ã€å­—ä½“\nå­¦ä¼šå›¾å±‚å åŠ ï¼špoints, lines, text, legend\næŒæ¡å¤šå›¾å¸ƒå±€ï¼šmfrow, layout\nç»ƒä¹ ä¿å­˜è¾“å‡ºï¼špng, pdf, svg\n\n\nå»ºè®®ï¼šè™½ç„¶ ggplot2 æ›´ç°ä»£ï¼Œä½† Base R ç»‘å›¾ä»ç„¶æ˜¯å¿«é€Ÿæ¢ç´¢æ•°æ®çš„åˆ©å™¨ã€‚å»ºè®®ä¸¤è€…éƒ½æŒæ¡ï¼Œæ ¹æ®éœ€æ±‚é€‰æ‹©ä½¿ç”¨ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "Base R ç»‘å›¾åŸºç¡€"
    ]
  },
  {
    "objectID": "2061-base-r-graphics.html#base-r-vs-ggplot2",
    "href": "2061-base-r-graphics.html#base-r-vs-ggplot2",
    "title": "Base R ç»‘å›¾åŸºç¡€å®Œå…¨æŒ‡å—",
    "section": "Base R vs ggplot2",
    "text": "Base R vs ggplot2\n\n\n\næ–¹é¢\nBase R\nggplot2\n\n\n\n\nå­¦ä¹ æ›²çº¿\nè¾ƒå¹³ç¼“\néœ€ç†è§£å›¾å±‚è¯­æ³•\n\n\nçµæ´»æ€§\næé«˜ï¼Œåº•å±‚æ§åˆ¶\né«˜ï¼Œä½†æœ‰æ¡†æ¶é™åˆ¶\n\n\nä»£ç é‡\nå¤æ‚å›¾è¾ƒå¤š\nå¤æ‚å›¾è¾ƒç®€æ´\n\n\né€Ÿåº¦\næ›´å¿«\nç¨æ…¢\n\n\né»˜è®¤ç¾è§‚åº¦\nä¸€èˆ¬\næ›´å¥½\n\n\næ‰©å±•æ€§\næ‰‹åŠ¨å®ç°\nä¸°å¯Œçš„æ‰©å±•åŒ…",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "Base R ç»‘å›¾åŸºç¡€"
    ]
  },
  {
    "objectID": "2061-base-r-graphics.html#å‚è€ƒèµ„æº",
    "href": "2061-base-r-graphics.html#å‚è€ƒèµ„æº",
    "title": "Base R ç»‘å›¾åŸºç¡€å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nR Graphics Cookbook\nQuick-R: Basic Graphs\nR Base Graphics Cheatsheet",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ—ï¸ å›¾å½¢åŸºç¡€",
      "Base R ç»‘å›¾åŸºç¡€"
    ]
  },
  {
    "objectID": "1064-marginaleffects.html",
    "href": "1064-marginaleffects.html",
    "title": "marginaleffects è¾¹é™…æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "",
    "text": "marginaleffects æ˜¯Rè¯­è¨€ä¸­æœ€å¼ºå¤§çš„æ¨¡å‹è§£é‡Šå·¥å…·åŒ…ï¼Œæ”¯æŒ100+ç±»ç»Ÿè®¡å’Œæœºå™¨å­¦ä¹ æ¨¡å‹çš„è¾¹é™…æ•ˆåº”ã€é¢„æµ‹å€¼å’Œå¯¹æ¯”åˆ†æã€‚\n\n\nå›å½’ç³»æ•°å‘Šè¯‰æˆ‘ä»¬å˜é‡çš„â€å¹³å‡â€æ•ˆåº”ï¼Œä½†åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ä¸å¤Ÿç›´è§‚ï¼š - éçº¿æ€§æ¨¡å‹ï¼šLogisticå›å½’çš„ç³»æ•°æ˜¯å¯¹æ•°å‡ ç‡æ¯”ï¼Œéš¾ä»¥è§£é‡Š - äº¤äº’ä½œç”¨ï¼šæ•ˆåº”éšå…¶ä»–å˜é‡å˜åŒ– - å¤æ‚æ¨¡å‹ï¼šGAMã€æ··åˆæ¨¡å‹ç­‰\n\n\n\n\n\n\nå‡½æ•°\nåŠŸèƒ½\nåº”ç”¨åœºæ™¯\n\n\n\n\npredictions()\nè®¡ç®—é¢„æµ‹å€¼\nå„æ°´å¹³çš„æœŸæœ›ç»“æœ\n\n\nslopes()\nè®¡ç®—è¾¹é™…æ•ˆåº”\nå˜é‡å¢åŠ ä¸€å•ä½çš„æ•ˆåº”\n\n\ncomparisons()\nè®¡ç®—å¯¹æ¯”\nç»„é—´å·®å¼‚ã€é£é™©æ¯”\n\n\nplot_*()\nå¯è§†åŒ–\næ•ˆåº”å›¾ã€é¢„æµ‹æ›²çº¿",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "marginaleffects - è¾¹é™…æ•ˆåº”"
    ]
  },
  {
    "objectID": "1064-marginaleffects.html#marginaleffects-ç®€ä»‹",
    "href": "1064-marginaleffects.html#marginaleffects-ç®€ä»‹",
    "title": "marginaleffects è¾¹é™…æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "",
    "text": "marginaleffects æ˜¯Rè¯­è¨€ä¸­æœ€å¼ºå¤§çš„æ¨¡å‹è§£é‡Šå·¥å…·åŒ…ï¼Œæ”¯æŒ100+ç±»ç»Ÿè®¡å’Œæœºå™¨å­¦ä¹ æ¨¡å‹çš„è¾¹é™…æ•ˆåº”ã€é¢„æµ‹å€¼å’Œå¯¹æ¯”åˆ†æã€‚\n\n\nå›å½’ç³»æ•°å‘Šè¯‰æˆ‘ä»¬å˜é‡çš„â€å¹³å‡â€æ•ˆåº”ï¼Œä½†åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ä¸å¤Ÿç›´è§‚ï¼š - éçº¿æ€§æ¨¡å‹ï¼šLogisticå›å½’çš„ç³»æ•°æ˜¯å¯¹æ•°å‡ ç‡æ¯”ï¼Œéš¾ä»¥è§£é‡Š - äº¤äº’ä½œç”¨ï¼šæ•ˆåº”éšå…¶ä»–å˜é‡å˜åŒ– - å¤æ‚æ¨¡å‹ï¼šGAMã€æ··åˆæ¨¡å‹ç­‰\n\n\n\n\n\n\nå‡½æ•°\nåŠŸèƒ½\nåº”ç”¨åœºæ™¯\n\n\n\n\npredictions()\nè®¡ç®—é¢„æµ‹å€¼\nå„æ°´å¹³çš„æœŸæœ›ç»“æœ\n\n\nslopes()\nè®¡ç®—è¾¹é™…æ•ˆåº”\nå˜é‡å¢åŠ ä¸€å•ä½çš„æ•ˆåº”\n\n\ncomparisons()\nè®¡ç®—å¯¹æ¯”\nç»„é—´å·®å¼‚ã€é£é™©æ¯”\n\n\nplot_*()\nå¯è§†åŒ–\næ•ˆåº”å›¾ã€é¢„æµ‹æ›²çº¿",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "marginaleffects - è¾¹é™…æ•ˆåº”"
    ]
  },
  {
    "objectID": "1064-marginaleffects.html#å®‰è£…ä¸åŠ è½½",
    "href": "1064-marginaleffects.html#å®‰è£…ä¸åŠ è½½",
    "title": "marginaleffects è¾¹é™…æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\nlibrary(marginaleffects)\nlibrary(ggplot2)\nlibrary(dplyr)\n\ntheme_set(theme_bw(base_size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "marginaleffects - è¾¹é™…æ•ˆåº”"
    ]
  },
  {
    "objectID": "1064-marginaleffects.html#ç¬¬ä¸€éƒ¨åˆ†predictions-é¢„æµ‹å€¼",
    "href": "1064-marginaleffects.html#ç¬¬ä¸€éƒ¨åˆ†predictions-é¢„æµ‹å€¼",
    "title": "marginaleffects è¾¹é™…æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼špredictions() é¢„æµ‹å€¼",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼špredictions() é¢„æµ‹å€¼\npredictions() ç”¨äºè®¡ç®—æ¨¡å‹åœ¨ç‰¹å®šæ¡ä»¶ä¸‹çš„é¢„æµ‹å€¼ã€‚\n\nåŸºç¡€ç”¨æ³•\n\n# æ‹ŸåˆLogisticå›å½’\ndata(mtcars)\nmtcars$am &lt;- factor(mtcars$am, labels = c(\"è‡ªåŠ¨\", \"æ‰‹åŠ¨\"))\n\nmodel &lt;- glm(am ~ hp + wt, data = mtcars, family = binomial)\n\n# è®¡ç®—æ¯ä¸ªè§‚æµ‹çš„é¢„æµ‹æ¦‚ç‡\npred &lt;- predictions(model)\nhead(pred)\n\n\n Estimate Pr(&gt;|z|)   S    2.5 % 97.5 %\n  0.84234   0.1546 2.7 3.47e-01  0.982\n  0.40478   0.6991 0.5 8.78e-02  0.828\n  0.97024   0.0436 4.5 5.25e-01  0.999\n  0.04173   0.0422 4.6 2.11e-03  0.472\n  0.06939   0.0482 4.4 5.64e-03  0.495\n  0.00499   0.0185 5.8 6.11e-05  0.292\n\nType: invlink(link)\n\n\n\n\nç‰¹å®šå€¼é¢„æµ‹\n\n# åœ¨ç‰¹å®šhpå’Œwtå€¼ä¸‹çš„é¢„æµ‹\npred_grid &lt;- predictions(model,\n    newdata = datagrid(\n        hp = c(100, 150, 200),\n        wt = c(2.5, 3.5)\n    )\n)\nprint(pred_grid)\n\n\n  hp  wt Estimate Pr(&gt;|z|)   S    2.5 % 97.5 %\n 100 2.5  0.90747   0.0949 3.4 4.02e-01  0.993\n 100 3.5  0.00302   0.0172 5.9 2.56e-05  0.263\n 150 2.5  0.98363   0.0205 5.6 6.53e-01  0.999\n 150 3.5  0.01821   0.0213 5.6 6.22e-04  0.356\n 200 2.5  0.99729   0.0154 6.0 7.55e-01  1.000\n 200 3.5  0.10204   0.0899 3.5 9.12e-03  0.584\n\nType: invlink(link)\n\n\n\n\nåˆ†ç»„å¹³å‡é¢„æµ‹\n\n# æŒ‰å®é™…amåˆ†ç»„çš„å¹³å‡é¢„æµ‹ï¼ˆAverage Predictionsï¼‰\navg_pred &lt;- predictions(model, by = \"am\")\nprint(avg_pred)\n\n\n Estimate Std. Error     z Pr(&gt;|z|)     S 2.5 % 97.5 %\n   0.0767     0.0315  2.44   0.0148   6.1 0.015  0.138\n   0.8879     0.0647 13.71   &lt;0.001 139.8 0.761  1.015\n\nType: response",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "marginaleffects - è¾¹é™…æ•ˆåº”"
    ]
  },
  {
    "objectID": "1064-marginaleffects.html#ç¬¬äºŒéƒ¨åˆ†slopes-è¾¹é™…æ•ˆåº”",
    "href": "1064-marginaleffects.html#ç¬¬äºŒéƒ¨åˆ†slopes-è¾¹é™…æ•ˆåº”",
    "title": "marginaleffects è¾¹é™…æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šslopes() è¾¹é™…æ•ˆåº”",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šslopes() è¾¹é™…æ•ˆåº”\nslopes() è®¡ç®—è¿ç»­å˜é‡å¢åŠ ä¸€å•ä½æ—¶ç»“æœå˜é‡çš„å˜åŒ–é‡ã€‚\n\nå¹³å‡è¾¹é™…æ•ˆåº” (AME)\n\n# è®¡ç®—hpçš„å¹³å‡è¾¹é™…æ•ˆåº”\name &lt;- slopes(model, variables = \"hp\")\nhead(ame)\n\n\n Estimate Std. Error     z Pr(&gt;|z|)   S     2.5 %   97.5 %\n  0.00481   0.004260 1.130   0.2584 2.0 -0.003535 0.013165\n  0.00874   0.003836 2.277   0.0228 5.5  0.001216 0.016254\n  0.00105   0.001607 0.651   0.5148 1.0 -0.002103 0.004197\n  0.00145   0.001535 0.944   0.3451 1.5 -0.001560 0.004459\n  0.00234   0.002336 1.002   0.3163 1.7 -0.002237 0.006920\n  0.00018   0.000329 0.547   0.5845 0.8 -0.000465 0.000825\n\nTerm: hp\nType: response\nComparison: dY/dX\n\n# æ±‡æ€»å¹³å‡è¾¹é™…æ•ˆåº”\nsummary(slopes(model))\n\n     rowid           term             contrast            estimate         \n Min.   : 1.00   Length:64          Length:64          Min.   :-1.962e+00  \n 1st Qu.: 8.75   Class :character   Class :character   1st Qu.:-9.799e-02  \n Median :16.50   Mode  :character   Mode  :character   Median :-1.400e-07  \n Mean   :16.50                                         Mean   :-1.790e-01  \n 3rd Qu.:24.25                                         3rd Qu.: 4.395e-04  \n Max.   :32.00                                         Max.   : 8.798e-03  \n                                                                           \n   std.error           statistic            p.value           s.value      \n Min.   :1.000e-08   Min.   :-2.532539   Min.   :0.01132   Min.   :0.1948  \n 1st Qu.:5.709e-04   1st Qu.:-0.639457   1st Qu.:0.38870   1st Qu.:0.6527  \n Median :4.048e-03   Median :-0.000569   Median :0.52253   Median :0.9364  \n Mean   :1.564e-01   Mean   :-0.031003   Mean   :0.51014   Mean   :1.2657  \n 3rd Qu.:1.490e-01   3rd Qu.: 0.611018   3rd Qu.:0.63612   3rd Qu.:1.3633  \n Max.   :1.323e+00   Max.   : 2.276930   Max.   :0.87369   Max.   :6.4645  \n                                                                           \n    conf.low            conf.high              mpg             cyl       \n Min.   :-3.5180182   Min.   :-0.443479   Min.   :10.40   Min.   :4.000  \n 1st Qu.:-0.3888220   1st Qu.: 0.001086   1st Qu.:15.43   1st Qu.:4.000  \n Median :-0.0031963   Median : 0.007876   Median :19.20   Median :6.000  \n Mean   :-0.4854919   Mean   : 0.127509   Mean   :20.09   Mean   :6.188  \n 3rd Qu.:-0.0007672   3rd Qu.: 0.184713   3rd Qu.:22.80   3rd Qu.:8.000  \n Max.   : 0.0012160   Max.   : 1.840334   Max.   :33.90   Max.   :8.000  \n                                                                         \n      disp             hp             drat             wt       \n Min.   : 71.1   Min.   : 52.0   Min.   :2.760   Min.   :1.513  \n 1st Qu.:120.8   1st Qu.: 96.5   1st Qu.:3.080   1st Qu.:2.581  \n Median :196.3   Median :123.0   Median :3.695   Median :3.325  \n Mean   :230.7   Mean   :146.7   Mean   :3.597   Mean   :3.217  \n 3rd Qu.:326.0   3rd Qu.:180.0   3rd Qu.:3.920   3rd Qu.:3.610  \n Max.   :472.0   Max.   :335.0   Max.   :4.930   Max.   :5.424  \n                                                                \n      qsec             vs            am          gear            carb      \n Min.   :14.50   Min.   :0.0000   è‡ªåŠ¨:38   Min.   :3.000   Min.   :1.000  \n 1st Qu.:16.89   1st Qu.:0.0000   æ‰‹åŠ¨:26   1st Qu.:3.000   1st Qu.:2.000  \n Median :17.71   Median :0.0000             Median :4.000   Median :2.000  \n Mean   :17.85   Mean   :0.4375             Mean   :3.688   Mean   :2.812  \n 3rd Qu.:18.90   3rd Qu.:1.0000             3rd Qu.:4.000   3rd Qu.:4.000  \n Max.   :22.90   Max.   :1.0000             Max.   :5.000   Max.   :8.000  \n                                                                           \n  predicted_lo        predicted_hi         predicted  \n Min.   :3.000e-08   Min.   :3.000e-08   Min.   : NA  \n 1st Qu.:9.074e-03   1st Qu.:9.065e-03   1st Qu.: NA  \n Median :5.557e-02   Median :5.552e-02   Median : NA  \n Mean   :4.063e-01   Mean   :4.062e-01   Mean   :NaN  \n 3rd Qu.:9.435e-01   3rd Qu.:9.435e-01   3rd Qu.: NA  \n Max.   :1.000e+00   Max.   :1.000e+00   Max.   : NA  \n                                         NA's   :64   \n\n\n\n\nç‰¹å®šå€¼è¾¹é™…æ•ˆåº” (MEM)\n\n# åœ¨ç‰¹å®šwtå€¼ä¸‹hpçš„è¾¹é™…æ•ˆåº”\nmem &lt;- slopes(model,\n    variables = \"hp\",\n    newdata = datagrid(wt = c(2, 3, 4))\n)\nprint(mem)\n\n\n wt Estimate Std. Error     z Pr(&gt;|z|)   S     2.5 %   97.5 %\n  2 1.18e-05   3.33e-05 0.354   0.7230 0.5 -5.35e-05 7.71e-05\n  3 9.06e-03   4.42e-03 2.051   0.0402 4.6  4.03e-04 1.77e-02\n  4 1.06e-05   3.01e-05 0.351   0.7253 0.5 -4.85e-05 6.96e-05\n\nTerm: hp\nType: response\nComparison: dY/dX\n\n\n\n\nè¾¹é™…æ•ˆåº”å¯è§†åŒ–\n\n# è¾¹é™…æ•ˆåº”å¦‚ä½•éšwtå˜åŒ–\nplot_slopes(model, variables = \"hp\", condition = \"wt\") +\n    labs(\n        title = \"hpçš„è¾¹é™…æ•ˆåº”éšwtçš„å˜åŒ–\",\n        y = \"hpå¯¹P(æ‰‹åŠ¨)çš„è¾¹é™…æ•ˆåº”\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "marginaleffects - è¾¹é™…æ•ˆåº”"
    ]
  },
  {
    "objectID": "1064-marginaleffects.html#ç¬¬ä¸‰éƒ¨åˆ†comparisons-å¯¹æ¯”åˆ†æ",
    "href": "1064-marginaleffects.html#ç¬¬ä¸‰éƒ¨åˆ†comparisons-å¯¹æ¯”åˆ†æ",
    "title": "marginaleffects è¾¹é™…æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šcomparisons() å¯¹æ¯”åˆ†æ",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šcomparisons() å¯¹æ¯”åˆ†æ\ncomparisons() ç”¨äºè®¡ç®—ä¸åŒæ°´å¹³æˆ–æ¡ä»¶ä¹‹é—´çš„å·®å¼‚ã€‚\n\nè¿ç»­å˜é‡å¯¹æ¯”\n\n# hpä»100åˆ°200çš„æ•ˆåº”å·®å¼‚\ncomp &lt;- comparisons(model,\n    variables = list(hp = c(100, 200))\n)\nprint(comp)\n\n\n Estimate Std. Error     z Pr(&gt;|z|)   S     2.5 %   97.5 %\n 0.204847   0.187262 1.094   0.2740 1.9 -0.162179 0.571873\n 0.625491   0.244655 2.557   0.0106 6.6  0.145976 1.105006\n 0.022610   0.038673 0.585   0.5588 0.8 -0.053186 0.098407\n 0.502805   0.238095 2.112   0.0347 4.8  0.036147 0.969463\n 0.150919   0.147271 1.025   0.3055 1.7 -0.137727 0.439565\n--- 22 rows omitted. See ?print.marginaleffects ---\n 0.000034   0.000136 0.249   0.8031 0.3 -0.000233 0.000301\n 0.578990   0.235093 2.463   0.0138 6.2  0.118217 1.039763\n 0.451345   0.255647 1.766   0.0775 3.7 -0.049713 0.952404\n 0.058905   0.078067 0.755   0.4505 1.2 -0.094104 0.211914\n 0.469603   0.256714 1.829   0.0674 3.9 -0.033548 0.972754\nTerm: hp\nType: response\nComparison: 200 - 100\n\n\n\n\nå•ä½å˜åŒ–å¯¹æ¯”\n\n# hpæ¯å¢åŠ 10å•ä½çš„æ•ˆåº”\ncomp_10 &lt;- comparisons(model,\n    variables = list(hp = 10)\n) # å˜åŒ–10å•ä½\nsummary(comp_10)\n\n     rowid           term             contrast            estimate        \n Min.   : 1.00   Length:32          Length:32          Min.   :1.500e-08  \n 1st Qu.: 8.75   Class :character   Class :character   1st Qu.:1.193e-03  \n Median :16.50   Mode  :character   Mode  :character   Median :5.725e-03  \n Mean   :16.50                                         Mean   :1.611e-02  \n 3rd Qu.:24.25                                         3rd Qu.:1.695e-02  \n Max.   :32.00                                         Max.   :8.946e-02  \n                                                                          \n   std.error           statistic         p.value           s.value      \n Min.   :9.400e-08   Min.   :0.1605   Min.   :0.02962   Min.   :0.1968  \n 1st Qu.:2.578e-03   1st Qu.:0.4729   1st Qu.:0.36647   1st Qu.:0.6527  \n Median :8.065e-03   Median :0.6152   Median :0.53846   Median :0.8933  \n Mean   :1.533e-02   Mean   :0.7115   Mean   :0.51420   Mean   :1.1689  \n 3rd Qu.:2.225e-02   3rd Qu.:0.9040   3rd Qu.:0.63645   3rd Qu.:1.4514  \n Max.   :6.459e-02   Max.   :2.1752   Max.   :0.87246   Max.   :5.0774  \n                                                                        \n    conf.low           conf.high              mpg             cyl       \n Min.   :-0.062123   Min.   :1.990e-07   Min.   :10.40   Min.   :4.000  \n 1st Qu.:-0.019008   1st Qu.:6.183e-03   1st Qu.:15.43   1st Qu.:4.000  \n Median :-0.008955   Median :2.153e-02   Median :19.20   Median :6.000  \n Mean   :-0.013935   Mean   :4.616e-02   Mean   :20.09   Mean   :6.188  \n 3rd Qu.:-0.003283   3rd Qu.:5.973e-02   3rd Qu.:22.80   3rd Qu.:8.000  \n Max.   : 0.008851   Max.   :2.001e-01   Max.   :33.90   Max.   :8.000  \n                                                                        \n      disp             hp             drat             wt       \n Min.   : 71.1   Min.   : 52.0   Min.   :2.760   Min.   :1.513  \n 1st Qu.:120.8   1st Qu.: 96.5   1st Qu.:3.080   1st Qu.:2.581  \n Median :196.3   Median :123.0   Median :3.695   Median :3.325  \n Mean   :230.7   Mean   :146.7   Mean   :3.597   Mean   :3.217  \n 3rd Qu.:326.0   3rd Qu.:180.0   3rd Qu.:3.920   3rd Qu.:3.610  \n Max.   :472.0   Max.   :335.0   Max.   :4.930   Max.   :5.424  \n                                                                \n      qsec             vs            am          gear            carb      \n Min.   :14.50   Min.   :0.0000   è‡ªåŠ¨:19   Min.   :3.000   Min.   :1.000  \n 1st Qu.:16.89   1st Qu.:0.0000   æ‰‹åŠ¨:13   1st Qu.:3.000   1st Qu.:2.000  \n Median :17.71   Median :0.0000             Median :4.000   Median :2.000  \n Mean   :17.85   Mean   :0.4375             Mean   :3.688   Mean   :2.812  \n 3rd Qu.:18.90   3rd Qu.:1.0000             3rd Qu.:4.000   3rd Qu.:4.000  \n Max.   :22.90   Max.   :1.0000             Max.   :5.000   Max.   :8.000  \n                                                                           \n  predicted_lo        predicted_hi         predicted  \n Min.   :3.000e-08   Min.   :5.000e-08   Min.   : NA  \n 1st Qu.:9.074e-03   1st Qu.:1.299e-02   1st Qu.: NA  \n Median :5.556e-02   Median :7.783e-02   Median : NA  \n Mean   :4.062e-01   Mean   :4.224e-01   Mean   :NaN  \n 3rd Qu.:9.435e-01   3rd Qu.:9.600e-01   3rd Qu.: NA  \n Max.   :1.000e+00   Max.   :1.000e+00   Max.   : NA  \n                                         NA's   :32   \n\n\n\n\né£é™©æ¯”å’Œä¼˜åŠ¿æ¯”\n\n# è®¡ç®—ä¼˜åŠ¿æ¯” (Odds Ratio)\nor &lt;- comparisons(model,\n    variables = \"hp\",\n    comparison = \"lnratioavg\", # å¯¹æ•°ä¼˜åŠ¿æ¯”\n    transform = exp\n) # è½¬æ¢ä¸ºä¼˜åŠ¿æ¯”\nsummary(or)\n\n     term             contrast            estimate        p.value        \n Length:1           Length:1           Min.   :1.004   Min.   :0.007114  \n Class :character   Class :character   1st Qu.:1.004   1st Qu.:0.007114  \n Mode  :character   Mode  :character   Median :1.004   Median :0.007114  \n                                       Mean   :1.004   Mean   :0.007114  \n                                       3rd Qu.:1.004   3rd Qu.:0.007114  \n                                       Max.   :1.004   Max.   :0.007114  \n    s.value         conf.low       conf.high    \n Min.   :7.135   Min.   :1.001   Min.   :1.007  \n 1st Qu.:7.135   1st Qu.:1.001   1st Qu.:1.007  \n Median :7.135   Median :1.001   Median :1.007  \n Mean   :7.135   Mean   :1.001   Mean   :1.007  \n 3rd Qu.:7.135   3rd Qu.:1.001   3rd Qu.:1.007  \n Max.   :7.135   Max.   :1.001   Max.   :1.007",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "marginaleffects - è¾¹é™…æ•ˆåº”"
    ]
  },
  {
    "objectID": "1064-marginaleffects.html#ç¬¬å››éƒ¨åˆ†å¯è§†åŒ–åŠŸèƒ½",
    "href": "1064-marginaleffects.html#ç¬¬å››éƒ¨åˆ†å¯è§†åŒ–åŠŸèƒ½",
    "title": "marginaleffects è¾¹é™…æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šå¯è§†åŒ–åŠŸèƒ½",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šå¯è§†åŒ–åŠŸèƒ½\n\né¢„æµ‹æ›²çº¿\n\n# çº¿æ€§å›å½’ç¤ºä¾‹\nmodel_lm &lt;- lm(mpg ~ hp * wt, data = mtcars)\n\n# é¢„æµ‹æ›²çº¿\nplot_predictions(model_lm, condition = \"hp\") +\n    labs(\n        title = \"MPGéšHPçš„é¢„æµ‹æ›²çº¿\",\n        x = \"é©¬åŠ›\", y = \"é¢„æµ‹æ²¹è€—\"\n    )\n\n\n\n\n\n\n\n\n\n\næ¡ä»¶é¢„æµ‹æ›²çº¿\n\n# æŒ‰wtåˆ†ç»„çš„é¢„æµ‹æ›²çº¿\nplot_predictions(model_lm,\n    condition = list(hp = seq(50, 300, 10), wt = c(2.5, 3.5, 4.5))\n) +\n    labs(title = \"ä¸åŒé‡é‡ä¸‹HPä¸MPGçš„å…³ç³»\")\n\n\n\n\n\n\n\n\n\n\nè¾¹é™…æ•ˆåº”å›¾\n\n# è¾¹é™…æ•ˆåº”éšæ¡ä»¶å˜åŒ–\nplot_slopes(model_lm,\n    variables = \"hp\",\n    condition = \"wt\"\n) +\n    labs(\n        title = \"HPè¾¹é™…æ•ˆåº”éšé‡é‡çš„å˜åŒ–\",\n        y = \"HPå¯¹MPGçš„è¾¹é™…æ•ˆåº”\"\n    )\n\n\n\n\n\n\n\n\n\n\nå¯¹æ¯”å¯è§†åŒ–\n\n# å¯¹æ¯”å¯è§†åŒ–\nplot_comparisons(model_lm,\n    variables = list(hp = 50), # HPå¢åŠ 50\n    condition = \"wt\"\n) +\n    labs(\n        title = \"HPå¢åŠ 50æ—¶MPGå˜åŒ–é‡\",\n        y = \"MPGå˜åŒ–\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "marginaleffects - è¾¹é™…æ•ˆåº”"
    ]
  },
  {
    "objectID": "1064-marginaleffects.html#ç¬¬äº”éƒ¨åˆ†ä¸glmæ¨¡å‹ç»“åˆ",
    "href": "1064-marginaleffects.html#ç¬¬äº”éƒ¨åˆ†ä¸glmæ¨¡å‹ç»“åˆ",
    "title": "marginaleffects è¾¹é™…æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šä¸GLMæ¨¡å‹ç»“åˆ",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šä¸GLMæ¨¡å‹ç»“åˆ\n\nLogisticå›å½’\n\n# äºŒåˆ†ç±»æ¨¡å‹\ndata(mtcars)\nmodel_logit &lt;- glm(vs ~ hp + wt + am, data = mtcars, family = binomial)\n\n# é¢„æµ‹æ¦‚ç‡\npredictions(model_logit, type = \"response\") |&gt; head()\n\n\n Estimate Std. Error      z Pr(&gt;|z|)     S   2.5 % 97.5 %\n   0.2674     0.2243  1.192    0.233   2.1 -0.1723 0.7071\n   0.1895     0.2216  0.855    0.393   1.3 -0.2449 0.6238\n   0.8065     0.1858  4.340   &lt;0.001  16.1  0.4423 1.1707\n   0.9695     0.0570 17.018   &lt;0.001 213.3  0.8578 1.0811\n   0.0142     0.0350  0.406    0.685   0.5 -0.0543 0.0827\n   0.9732     0.0554 17.553   &lt;0.001 226.7  0.8645 1.0819\n\nType: response\n\n# è¾¹é™…æ•ˆåº”ï¼ˆæ¦‚ç‡å°ºåº¦ï¼‰\navg_slopes(model_logit)\n\n\n Term Contrast Estimate Std. Error     z Pr(&gt;|z|)    S    2.5 %  97.5 %\n   am    1 - 0 -0.23862     0.0722 -3.30   &lt;0.001 10.0 -0.38020 -0.0970\n   hp    dY/dX -0.00603     0.0017 -3.55   &lt;0.001 11.3 -0.00936 -0.0027\n   wt    dY/dX -0.09379     0.0920 -1.02    0.308  1.7 -0.27404  0.0865\n\nType: response\n\n\n\n\nPoissonå›å½’\n\n# è®¡æ•°æ¨¡å‹\nset.seed(42)\ncount_data &lt;- data.frame(\n    y = rpois(100, lambda = exp(1 + 0.5 * rnorm(100))),\n    x = rnorm(100)\n)\n\nmodel_pois &lt;- glm(y ~ x, data = count_data, family = poisson)\n\n# è¾¹é™…æ•ˆåº”ï¼ˆè®¡æ•°å°ºåº¦ï¼‰\navg_slopes(model_pois)\n\n\n Estimate Std. Error     z Pr(&gt;|z|)   S  2.5 % 97.5 %\n    0.124      0.181 0.686    0.493 1.0 -0.231   0.48\n\nTerm: x\nType: response\nComparison: dY/dX\n\n# å‘ç”Ÿç‡æ¯” (IRR)\ncomparisons(model_pois, comparison = \"lnratioavg\", transform = exp) |&gt;\n    summary()\n\n     term             contrast            estimate        p.value      \n Length:1           Length:1           Min.   :1.045   Min.   :0.4922  \n Class :character   Class :character   1st Qu.:1.045   1st Qu.:0.4922  \n Mode  :character   Mode  :character   Median :1.045   Median :0.4922  \n                                       Mean   :1.045   Mean   :0.4922  \n                                       3rd Qu.:1.045   3rd Qu.:0.4922  \n                                       Max.   :1.045   Max.   :0.4922  \n    s.value         conf.low        conf.high    \n Min.   :1.023   Min.   :0.9222   Min.   :1.183  \n 1st Qu.:1.023   1st Qu.:0.9222   1st Qu.:1.183  \n Median :1.023   Median :0.9222   Median :1.183  \n Mean   :1.023   Mean   :0.9222   Mean   :1.183  \n 3rd Qu.:1.023   3rd Qu.:0.9222   3rd Qu.:1.183  \n Max.   :1.023   Max.   :0.9222   Max.   :1.183",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "marginaleffects - è¾¹é™…æ•ˆåº”"
    ]
  },
  {
    "objectID": "1064-marginaleffects.html#ç¬¬å…­éƒ¨åˆ†äº¤äº’ä½œç”¨åˆ†æ",
    "href": "1064-marginaleffects.html#ç¬¬å…­éƒ¨åˆ†äº¤äº’ä½œç”¨åˆ†æ",
    "title": "marginaleffects è¾¹é™…æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šäº¤äº’ä½œç”¨åˆ†æ",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šäº¤äº’ä½œç”¨åˆ†æ\n\nè¿ç»­Ã—è¿ç»­äº¤äº’\n\n# åŒ…å«äº¤äº’é¡¹çš„æ¨¡å‹\nmodel_int &lt;- lm(mpg ~ hp * wt, data = mtcars)\n\n# hpçš„è¾¹é™…æ•ˆåº”éšwtå˜åŒ–\nplot_slopes(model_int,\n    variables = \"hp\",\n    condition = \"wt\"\n) +\n    geom_hline(yintercept = 0, linetype = \"dashed\", color = \"red\") +\n    labs(\n        title = \"HPÃ—WTäº¤äº’ä½œç”¨å¯è§†åŒ–\",\n        subtitle = \"è¾¹é™…æ•ˆåº”ç©¿è¿‡é›¶çº¿è¡¨ç¤ºæ•ˆåº”æ–¹å‘å˜åŒ–\"\n    )\n\n\n\n\n\n\n\n\n\n\nè¿ç»­Ã—åˆ†ç±»äº¤äº’\n\n# åˆ†ç±»äº¤äº’\nmtcars$cyl &lt;- factor(mtcars$cyl)\nmodel_cat &lt;- lm(mpg ~ hp * cyl, data = mtcars)\n\n# åˆ†ç»„è¾¹é™…æ•ˆåº”\nslopes(model_cat, variables = \"hp\", by = \"cyl\")\n\n\n cyl Estimate Std. Error      z Pr(&gt;|z|)   S   2.5 %  97.5 %\n   4 -0.11278     0.0457 -2.465   0.0137 6.2 -0.2024 -0.0231\n   6 -0.00761     0.0510 -0.149   0.8812 0.2 -0.1075  0.0923\n   8 -0.01424     0.0165 -0.864   0.3873 1.4 -0.0465  0.0181\n\nTerm: hp\nType: response\nComparison: dY/dX\n\n\n\n# å¯è§†åŒ–åˆ†ç»„æ•ˆåº”\nplot_slopes(model_cat,\n    variables = \"hp\",\n    condition = \"cyl\"\n) +\n    labs(title = \"ä¸åŒæ°”ç¼¸æ•°ä¸‹HPçš„è¾¹é™…æ•ˆåº”\")",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "marginaleffects - è¾¹é™…æ•ˆåº”"
    ]
  },
  {
    "objectID": "1064-marginaleffects.html#ç¬¬ä¸ƒéƒ¨åˆ†å‡è®¾æ£€éªŒ",
    "href": "1064-marginaleffects.html#ç¬¬ä¸ƒéƒ¨åˆ†å‡è®¾æ£€éªŒ",
    "title": "marginaleffects è¾¹é™…æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå‡è®¾æ£€éªŒ",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå‡è®¾æ£€éªŒ\n\nè¾¹é™…æ•ˆåº”æ˜¾è‘—æ€§\n\n# æ£€éªŒè¾¹é™…æ•ˆåº”æ˜¯å¦æ˜¾è‘—\name_test &lt;- avg_slopes(model_lm)\nprint(ame_test)\n\n\n Term Estimate Std. Error     z Pr(&gt;|z|)    S   2.5 %  97.5 %\n   hp  -0.0305     0.0075 -4.07   &lt;0.001 14.4 -0.0452 -0.0158\n   wt  -4.1316     0.5296 -7.80   &lt;0.001 47.2 -5.1696 -3.0937\n\nType: response\nComparison: dY/dX\n\n\n\n\næ•ˆåº”å¯¹æ¯”æ£€éªŒ\n\n# æ£€éªŒä¸¤ä¸ªæ°´å¹³çš„æ•ˆåº”å·®å¼‚\nhypotheses(model_lm, \"hp = 0\")\n\n\n\nè”åˆæ£€éªŒ\n\n# æ£€éªŒå¤šä¸ªå‚æ•°\nhypotheses(model_lm, c(\"hp = 0\", \"wt = 0\"), joint = TRUE)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "marginaleffects - è¾¹é™…æ•ˆåº”"
    ]
  },
  {
    "objectID": "1064-marginaleffects.html#ç¬¬å…«éƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "href": "1064-marginaleffects.html#ç¬¬å…«éƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "title": "marginaleffects è¾¹é™…æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…«éƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬å…«éƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹\n\nå®Œæ•´åˆ†ææµç¨‹\n\n# ä½¿ç”¨irisæ•°æ®é›†\ndata(iris)\niris$Species_binary &lt;- ifelse(iris$Species == \"setosa\", 1, 0)\n\n# æ‹Ÿåˆæ¨¡å‹\nmodel_case &lt;- glm(Species_binary ~ Sepal.Length * Sepal.Width + Petal.Length,\n    data = iris, family = binomial\n)\n\n# 1. æ¨¡å‹ç³»æ•°\nsummary(model_case)\n\n\nCall:\nglm(formula = Species_binary ~ Sepal.Length * Sepal.Width + Petal.Length, \n    family = binomial, data = iris)\n\nCoefficients:\n                           Estimate Std. Error z value Pr(&gt;|z|)\n(Intercept)                  148.49 1148380.35   0.000        1\nSepal.Length                 -25.41  261958.50   0.000        1\nSepal.Width                  -49.27  280047.79   0.000        1\nPetal.Length                 -29.17   53602.85  -0.001        1\nSepal.Length:Sepal.Width      13.40   58344.43   0.000        1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 1.9095e+02  on 149  degrees of freedom\nResidual deviance: 3.3021e-09  on 145  degrees of freedom\nAIC: 10\n\nNumber of Fisher Scoring iterations: 25\n\n\n\n# 2. å¹³å‡è¾¹é™…æ•ˆåº”\ncat(\"\\n=== å¹³å‡è¾¹é™…æ•ˆåº” ===\\n\")\n\n\n=== å¹³å‡è¾¹é™…æ•ˆåº” ===\n\navg_slopes(model_case)\n\n\n         Term  Estimate Std. Error         z Pr(&gt;|z|)   S     2.5 %   97.5 %\n Petal.Length -3.22e-10   1.30e-03 -2.48e-07        1 0.0 -2.55e-03 2.55e-03\n Sepal.Length  1.12e-10   1.42e-03  7.91e-08        1 0.0 -2.79e-03 2.79e-03\n Sepal.Width   2.06e-10   3.18e-06  6.48e-05        1 0.0 -6.22e-06 6.22e-06\n\nType: response\nComparison: dY/dX\n\n\n\n# 3. å…³é”®å˜é‡çš„é¢„æµ‹æ›²çº¿\nplot_predictions(model_case, condition = \"Sepal.Length\") +\n    labs(\n        title = \"Sepal.Lengthå¯¹Setosaæ¦‚ç‡çš„å½±å“\",\n        y = \"P(Setosa)\"\n    )\n\n\n\n\n\n\n\n\n\n# 4. äº¤äº’ä½œç”¨å¯è§†åŒ–\nplot_predictions(model_case,\n    condition = list(Sepal.Length = seq(4, 8, 0.5), Sepal.Width = c(2.5, 3, 3.5))\n) +\n    labs(title = \"Sepal.Length Ã— Sepal.Width äº¤äº’æ•ˆåº”\")",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "marginaleffects - è¾¹é™…æ•ˆåº”"
    ]
  },
  {
    "objectID": "1064-marginaleffects.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "1064-marginaleffects.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "marginaleffects è¾¹é™…æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# ===== é¢„æµ‹å€¼ =====\npredictions(model) # æ‰€æœ‰è§‚æµ‹é¢„æµ‹\npredictions(model, newdata = ...) # ç‰¹å®šå€¼é¢„æµ‹\npredictions(model, by = \"group\") # åˆ†ç»„å¹³å‡\n\n# ===== è¾¹é™…æ•ˆåº” =====\nslopes(model) # æ‰€æœ‰è§‚æµ‹è¾¹é™…æ•ˆåº”\navg_slopes(model) # å¹³å‡è¾¹é™…æ•ˆåº”\nslopes(model, variables = \"x\") # ç‰¹å®šå˜é‡\nslopes(model, by = \"group\") # åˆ†ç»„è¾¹é™…æ•ˆåº”\n\n# ===== å¯¹æ¯” =====\ncomparisons(model, variables = list(x = c(0, 1))) # æ°´å¹³å¯¹æ¯”\ncomparisons(model, comparison = \"ratio\") # æ¯”å€¼\ncomparisons(model, transform = exp) # è½¬æ¢\n\n# ===== å¯è§†åŒ– =====\nplot_predictions(model, condition = \"x\")\nplot_slopes(model, variables = \"x\", condition = \"z\")\nplot_comparisons(model, variables = \"x\")\n\n# ===== å‡è®¾æ£€éªŒ =====\nhypotheses(model, \"x = 0\")\nhypotheses(model, c(\"x = 0\", \"z = 0\"), joint = TRUE)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "marginaleffects - è¾¹é™…æ•ˆåº”"
    ]
  },
  {
    "objectID": "1064-marginaleffects.html#å°ç»“",
    "href": "1064-marginaleffects.html#å°ç»“",
    "title": "marginaleffects è¾¹é™…æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å°ç»“",
    "text": "å°ç»“\nmarginaleffects çš„æ ¸å¿ƒä¼˜åŠ¿ï¼š\n\n\n\nç‰¹ç‚¹\nè¯´æ˜\n\n\n\n\né€šç”¨æ€§\næ”¯æŒ100+æ¨¡å‹ç±»ï¼Œä¸€å¥—è¯­æ³•é€šåƒ\n\n\nç›´è§‚æ€§\næ•ˆåº”é‡æœ‰å®é™…æ„ä¹‰ï¼Œä¾¿äºè§£é‡Š\n\n\nå¯è§†åŒ–\nå†…ç½®ä¼˜é›…çš„ggplot2å›¾å½¢\n\n\nçµæ´»æ€§\næ”¯æŒå„ç§å¯¹æ¯”ã€è½¬æ¢ã€å‡è®¾æ£€éªŒ\n\n\n\n\nå»ºè®®ï¼šå¯¹äºä»»ä½•å›å½’åˆ†æï¼Œéƒ½å»ºè®®ä½¿ç”¨marginaleffectsæ¥è¡¥å……è§£é‡Šç³»æ•°çš„å®é™…å«ä¹‰ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "marginaleffects - è¾¹é™…æ•ˆåº”"
    ]
  },
  {
    "objectID": "1064-marginaleffects.html#å‚è€ƒèµ„æº",
    "href": "1064-marginaleffects.html#å‚è€ƒèµ„æº",
    "title": "marginaleffects è¾¹é™…æ•ˆåº”åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nmarginaleffects å®˜æ–¹æ–‡æ¡£\nMarginal Effects Zoo\nPredictions and Counterfactuals",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“ˆ æ¨¡å‹æ•´ç†",
      "marginaleffects - è¾¹é™…æ•ˆåº”"
    ]
  },
  {
    "objectID": "index.html#causalimpact-ç®€ä»‹",
    "href": "index.html#causalimpact-ç®€ä»‹",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "CausalImpact ç®€ä»‹",
    "text": "CausalImpact ç®€ä»‹\nCausalImpact æ˜¯Googleå¼€å‘çš„RåŒ…ï¼Œä½¿ç”¨è´å¶æ–¯ç»“æ„æ—¶é—´åºåˆ—æ¨¡å‹æ¥ä¼°è®¡å¹²é¢„å¯¹æ—¶é—´åºåˆ—çš„å› æœæ•ˆåº”ã€‚å®ƒè§£å†³äº†ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼šå¦‚æœæ²¡æœ‰å¹²é¢„ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\n\nåº”ç”¨åœºæ™¯\n\n\n\né¢†åŸŸ\nåº”ç”¨ç¤ºä¾‹\n\n\n\n\nå…¬å…±å«ç”Ÿ\næ”¿ç­–å®æ–½å¯¹ç–¾ç—…å‘ç—…ç‡çš„å½±å“\n\n\nè¥é”€\nå¹¿å‘Šæ´»åŠ¨å¯¹é”€å”®çš„å½±å“\n\n\nç»æµå­¦\næ”¿ç­–å¹²é¢„å¯¹ç»æµæŒ‡æ ‡çš„å½±å“\n\n\näº§å“\nåŠŸèƒ½ä¸Šçº¿å¯¹ç”¨æˆ·è¡Œä¸ºçš„å½±å“\n\n\n\n\n\næ ¸å¿ƒåŸç†\nCausalImpacté€šè¿‡ä»¥ä¸‹æ­¥éª¤å·¥ä½œï¼š 1. ä½¿ç”¨æœªå—å¹²é¢„çš„å¯¹ç…§åºåˆ—é¢„æµ‹å¹²é¢„åçš„åäº‹å® 2. æ¯”è¾ƒå®é™…è§‚æµ‹å€¼ä¸åäº‹å®é¢„æµ‹ 3. é‡åŒ–å·®å¼‚å¹¶æä¾›ä¸ç¡®å®šæ€§ä¼°è®¡"
  },
  {
    "objectID": "index.html#å®‰è£…ä¸åŠ è½½",
    "href": "index.html#å®‰è£…ä¸åŠ è½½",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\nlibrary(rstanarm)\nlibrary(bayesplot)\nlibrary(ggplot2)\nlibrary(dplyr)\n\nset.seed(42)\ntheme_set(theme_bw(base_size = 12))\n\n# è®¾ç½®å¹¶è¡Œ\noptions(mc.cores = parallel::detectCores())"
  },
  {
    "objectID": "index.html#ç¬¬ä¸€éƒ¨åˆ†åŸºç¡€ç”¨æ³•",
    "href": "index.html#ç¬¬ä¸€éƒ¨åˆ†åŸºç¡€ç”¨æ³•",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€ç”¨æ³•",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€ç”¨æ³•\n\næ¨¡æ‹Ÿæ•°æ®åˆ›å»º\n# åˆ›å»ºæ¨¡æ‹Ÿæ—¶é—´åºåˆ—æ•°æ®\nset.seed(42)\nn &lt;- 100 # æ—¶é—´ç‚¹æ•°\nintervention_point &lt;- 70 # å¹²é¢„å‘ç”Ÿç‚¹\n\n# ç”Ÿæˆå¯¹ç…§åºåˆ—ï¼ˆæœªå—å¹²é¢„å½±å“ï¼‰\nx1 &lt;- 10 + arima.sim(model = list(ar = 0.8), n = n)\nx2 &lt;- 20 + arima.sim(model = list(ar = 0.7), n = n)\n\n# ç”Ÿæˆç›®æ ‡åºåˆ—\n# å¹²é¢„å‰ï¼šä¸å¯¹ç…§åºåˆ—ç›¸å…³\n# å¹²é¢„åï¼šå¢åŠ æ•ˆåº”\ny &lt;- 1.5 * x1 + 0.5 * x2 + rnorm(n, 0, 2)\n# æ·»åŠ å¹²é¢„æ•ˆåº”\ny[(intervention_point + 1):n] &lt;- y[(intervention_point + 1):n] + 5\n\n# åˆ›å»ºæ—¶é—´ç´¢å¼•\ntime_points &lt;- seq.Date(as.Date(\"2024-01-01\"), by = \"day\", length.out = n)\n\n# ç»„åˆæ•°æ®\ndata &lt;- zoo::zoo(cbind(y = y, x1 = x1, x2 = x2), time_points)\nhead(data)\n\n\nè¿è¡ŒCausalImpact\n# å®šä¹‰å¹²é¢„å‰åæ—¶æœŸ\npre_period &lt;- c(time_points[1], time_points[intervention_point])\npost_period &lt;- c(time_points[intervention_point + 1], time_points[n])\n\n# è¿è¡Œåˆ†æ\nimpact &lt;- CausalImpact(data, pre_period, post_period)\n\n# æŸ¥çœ‹ç»“æœ\nsummary(impact)\n\n\nç»“æœå¯è§†åŒ–\n# é»˜è®¤ä¸‰å›¾é¢æ¿\nplot(impact)\n\n\nè§£è¯»è¾“å‡º\n# è·å–æŠ¥å‘Š\nsummary(impact, \"report\")"
  },
  {
    "objectID": "index.html#ç¬¬äºŒéƒ¨åˆ†ç†è§£è¾“å‡ºå›¾å½¢",
    "href": "index.html#ç¬¬äºŒéƒ¨åˆ†ç†è§£è¾“å‡ºå›¾å½¢",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šç†è§£è¾“å‡ºå›¾å½¢",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šç†è§£è¾“å‡ºå›¾å½¢\n\nä¸‰ä¸ªé¢æ¿è§£è¯»\n# å•ç‹¬ç»˜åˆ¶æ¯ä¸ªé¢æ¿\nplot(impact, \"original\") # åŸå§‹æ•°æ® vs åäº‹å®é¢„æµ‹\nOriginal é¢æ¿ï¼š - é»‘çº¿ï¼šå®é™…è§‚æµ‹å€¼ - è“è‰²è™šçº¿ï¼šåäº‹å®é¢„æµ‹ï¼ˆå¦‚æœæ²¡æœ‰å¹²é¢„ä¼šå‘ç”Ÿä»€ä¹ˆï¼‰ - æµ…è“åŒºåŸŸï¼šé¢„æµ‹çš„95%ç½®ä¿¡åŒºé—´\nplot(impact, \"pointwise\") # é€ç‚¹æ•ˆåº”\nPointwise é¢æ¿ï¼š - æ˜¾ç¤ºæ¯ä¸ªæ—¶é—´ç‚¹çš„å› æœæ•ˆåº”ï¼ˆå®é™… - é¢„æµ‹ï¼‰ - æ•ˆåº”åœ¨é›¶çº¿ä»¥ä¸Šè¡¨ç¤ºæ­£å‘å½±å“\nplot(impact, \"cumulative\") # ç´¯ç§¯æ•ˆåº”\nCumulative é¢æ¿ï¼š - æ˜¾ç¤ºå¹²é¢„åçš„ç´¯ç§¯å› æœæ•ˆåº” - ç”¨äºè¯„ä¼°æ€»ä½“å½±å“"
  },
  {
    "objectID": "index.html#ç¬¬ä¸‰éƒ¨åˆ†å…³é”®ç»“æœè§£è¯»",
    "href": "index.html#ç¬¬ä¸‰éƒ¨åˆ†å…³é”®ç»“æœè§£è¯»",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šå…³é”®ç»“æœè§£è¯»",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šå…³é”®ç»“æœè§£è¯»\n\næå–æ•°å€¼ç»“æœ\n# è·å–æ‘˜è¦ç»Ÿè®¡\nimpact_summary &lt;- impact$summary\n\ncat(\"=== å¹²é¢„æ•ˆåº”æ‘˜è¦ ===\\n\\n\")\ncat(\"å¹³å‡å› æœæ•ˆåº”:\\n\")\ncat(\"  ç»å¯¹æ•ˆåº”:\", round(impact_summary$AbsEffect[1], 2), \"\\n\")\ncat(\"  ç›¸å¯¹æ•ˆåº”:\", round(impact_summary$RelEffect[1] * 100, 1), \"%\\n\")\ncat(\n    \"  95% CI: [\", round(impact_summary$AbsEffect.lower[1], 2),\n    \",\", round(impact_summary$AbsEffect.upper[1], 2), \"]\\n\\n\"\n)\n\ncat(\"ç´¯ç§¯å› æœæ•ˆåº”:\\n\")\ncat(\"  ç»å¯¹æ•ˆåº”:\", round(impact_summary$AbsEffect[2], 2), \"\\n\")\ncat(\"  ç›¸å¯¹æ•ˆåº”:\", round(impact_summary$RelEffect[2] * 100, 1), \"%\\n\")\n\n\nç»Ÿè®¡æ˜¾è‘—æ€§\n# è´å¶æ–¯åéªŒæ¦‚ç‡\ncat(\"\\nå¹²é¢„æ•ˆåº”çš„åéªŒæ¦‚ç‡:\\n\")\ncat(\"  P(æ•ˆåº” &gt; 0):\", round(impact$summary$p[1], 4), \"\\n\")\n\nif (impact$summary$p[1] &lt; 0.05) {\n    cat(\"  ç»“è®º: å¹²é¢„æ•ˆåº”åœ¨5%æ°´å¹³ä¸Šæ˜¾è‘—\\n\")\n} else {\n    cat(\"  ç»“è®º: æ— æ³•æ’é™¤æ— æ•ˆåº”çš„å¯èƒ½æ€§\\n\")\n}"
  },
  {
    "objectID": "index.html#ç¬¬å››éƒ¨åˆ†æ¨¡å‹é…ç½®",
    "href": "index.html#ç¬¬å››éƒ¨åˆ†æ¨¡å‹é…ç½®",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šæ¨¡å‹é…ç½®",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šæ¨¡å‹é…ç½®\n\nè‡ªå®šä¹‰æ¨¡å‹å‚æ•°\n# è‡ªå®šä¹‰æ¨¡å‹å‚æ•°\nmodel_args &lt;- list(\n    niter = 5000, # MCMCè¿­ä»£æ¬¡æ•°\n    nseasons = 7, # å­£èŠ‚æ€§å‘¨æœŸï¼ˆå¦‚å‘¨æ•ˆåº”ï¼‰\n    season.duration = 1 # æ¯ä¸ªå­£èŠ‚çš„æŒç»­æ—¶é—´\n)\n\nimpact_custom &lt;- CausalImpact(data, pre_period, post_period,\n    model.args = model_args\n)\nsummary(impact_custom)\n\n\nä¸ä½¿ç”¨å¯¹ç…§åºåˆ—\n# åªä½¿ç”¨ç›®æ ‡åºåˆ—æœ¬èº«çš„å†å²æ¨¡å¼\ndata_single &lt;- zoo::zoo(y, time_points)\n\nimpact_single &lt;- CausalImpact(data_single, pre_period, post_period)\nplot(impact_single)"
  },
  {
    "objectID": "index.html#ç¬¬äº”éƒ¨åˆ†è¯Šæ–­ä¸éªŒè¯",
    "href": "index.html#ç¬¬äº”éƒ¨åˆ†è¯Šæ–­ä¸éªŒè¯",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šè¯Šæ–­ä¸éªŒè¯",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šè¯Šæ–­ä¸éªŒè¯\n\næ¨¡å‹è¯Šæ–­\n# æ£€æŸ¥æ¨¡å‹æ‹Ÿåˆ\n# æå–é¢„æµ‹å€¼\nfitted_values &lt;- impact$series$point.pred\n\n# å¹²é¢„å‰æ‹Ÿåˆæƒ…å†µ\npre_actual &lt;- as.numeric(data[1:intervention_point, \"y\"])\npre_fitted &lt;- as.numeric(fitted_values[1:intervention_point])\n\n# è®¡ç®—æ‹Ÿåˆä¼˜åº¦\nrsq &lt;- cor(pre_actual, pre_fitted)^2\nrmse &lt;- sqrt(mean((pre_actual - pre_fitted)^2))\n\ncat(\"å¹²é¢„å‰æ¨¡å‹è¯Šæ–­:\\n\")\ncat(\"  RÂ²:\", round(rsq, 4), \"\\n\")\ncat(\"  RMSE:\", round(rmse, 4), \"\\n\")\n\n\næ®‹å·®æ£€éªŒ\n# å¹²é¢„å‰æ®‹å·®\nresiduals_pre &lt;- pre_actual - pre_fitted\n\n# æ®‹å·®å›¾\npar(mfrow = c(1, 2))\nplot(residuals_pre, type = \"l\", main = \"æ®‹å·®åºåˆ—\", ylab = \"æ®‹å·®\")\nabline(h = 0, col = \"red\", lty = 2)\nacf(residuals_pre, main = \"æ®‹å·®ACF\")\npar(mfrow = c(1, 1))\n\n\nå®‰æ…°å‰‚æ£€éªŒ\n# åœ¨å¹²é¢„å‰æ—¶æœŸåš\"å‡\"å¹²é¢„æ£€éªŒ\nplacebo_point &lt;- 50\nplacebo_pre &lt;- c(time_points[1], time_points[placebo_point])\nplacebo_post &lt;- c(time_points[placebo_point + 1], time_points[intervention_point])\n\n# ä½¿ç”¨å¹²é¢„å‰æ•°æ®\ndata_placebo &lt;- data[1:intervention_point, ]\n\nimpact_placebo &lt;- CausalImpact(data_placebo, placebo_pre, placebo_post)\n\ncat(\"\\nå®‰æ…°å‰‚æ£€éªŒç»“æœ:\\n\")\ncat(\"  ä¼°è®¡æ•ˆåº”:\", round(impact_placebo$summary$AbsEffect[1], 2), \"\\n\")\ncat(\"  På€¼:\", round(impact_placebo$summary$p[1], 4), \"\\n\")\n\nif (impact_placebo$summary$p[1] &gt; 0.05) {\n    cat(\"  ç»“è®º: å®‰æ…°å‰‚æ£€éªŒé€šè¿‡ï¼ˆæ— è™šå‡æ•ˆåº”ï¼‰\\n\")\n}"
  },
  {
    "objectID": "index.html#ç¬¬å…­éƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "href": "index.html#ç¬¬å…­éƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹\n\nå®Œæ•´åˆ†ææµç¨‹\n# _targets.R\nlibrary(targets)\nlibrary(tarchetypes)\n\nsource(\"R/functions.R\")\n\ntar_option_set(\n    packages = c(\"dplyr\", \"ggplot2\", \"caret\")\n)\n\nlist(\n    # æ•°æ®\n    tar_target(file, \"data/diabetes.csv\", format = \"file\"),\n    tar_target(raw_data, read.csv(file)),\n\n    # é¢„å¤„ç†\n    tar_target(clean_data, {\n        raw_data %&gt;%\n            filter(!is.na(Outcome)) %&gt;%\n            mutate(across(where(is.numeric), scale))\n    }),\n\n    # æ•°æ®åˆ†å‰²\n    tar_target(train_idx, sample(1:nrow(clean_data), 0.7 * nrow(clean_data))),\n    tar_target(train_data, clean_data[train_idx, ]),\n    tar_target(test_data, clean_data[-train_idx, ]),\n\n    # å¤šæ¨¡å‹è®­ç»ƒ\n    tar_target(methods, c(\"glm\", \"rf\", \"xgb\")),\n    tar_target(\n        models,\n        train_model(train_data, method = methods),\n        pattern = map(methods)\n    ),\n\n    # è¯„ä¼°\n    tar_target(\n        evaluations,\n        evaluate_model(models, test_data),\n        pattern = map(models)\n    ),\n\n    # æ±‡æ€»\n    tar_target(summary_table, summarize_results(evaluations)),\n\n    # æŠ¥å‘Š\n    tar_render(report, \"analysis_report.Rmd\")\n)"
  },
  {
    "objectID": "index.html#ç¬¬ä¸ƒéƒ¨åˆ†ä¸itså¯¹æ¯”",
    "href": "index.html#ç¬¬ä¸ƒéƒ¨åˆ†ä¸itså¯¹æ¯”",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šä¸ITSå¯¹æ¯”",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šä¸ITSå¯¹æ¯”\n\nä¸­æ–­æ—¶é—´åºåˆ—åˆ†æï¼ˆITSï¼‰\n# ä¼ ç»ŸITSåˆ†æ\nits_data &lt;- data.frame(\n    time = 1:n,\n    y = as.numeric(y),\n    intervention = ifelse(1:n &gt; intervention_point, 1, 0),\n    time_after = ifelse(1:n &gt; intervention_point,\n        1:n - intervention_point, 0\n    )\n)\n\nits_model &lt;- lm(y ~ time + intervention + time_after, data = its_data)\nsummary(its_model)\n\n\nITS vs CausalImpact\n# æå–ä¸¤ç§æ–¹æ³•çš„æ•ˆåº”ä¼°è®¡\nits_effect &lt;- coef(its_model)[\"intervention\"]\nci_effect &lt;- impact$summary$AbsEffect[1]\n\ncomparison &lt;- data.frame(\n    Method = c(\"ITS\", \"CausalImpact\"),\n    Effect = c(its_effect, ci_effect),\n    True_Effect = c(5, 5)\n)\n\nggplot(comparison, aes(x = Method, y = Effect)) +\n    geom_col(fill = c(\"#4f46e5\", \"#10b981\"), alpha = 0.8) +\n    geom_hline(yintercept = 5, linetype = \"dashed\", color = \"red\") +\n    annotate(\"text\", x = 2.3, y = 5.2, label = \"çœŸå®æ•ˆåº”\", color = \"red\") +\n    labs(\n        title = \"ITS vs CausalImpact æ•ˆåº”ä¼°è®¡æ¯”è¾ƒ\",\n        y = \"ä¼°è®¡æ•ˆåº”\"\n    )\n\n\n\nç‰¹ç‚¹\nITS\nCausalImpact\n\n\n\n\nå¯¹ç…§åºåˆ—\nä¸éœ€è¦\nå¯é€‰ä½†æ¨è\n\n\nä¸ç¡®å®šæ€§\né¢‘ç‡æ´¾\nè´å¶æ–¯\n\n\nè¶‹åŠ¿å»ºæ¨¡\nå‚æ•°åŒ–\néå‚æ•°\n\n\nå­£èŠ‚æ€§\néœ€æ‰‹åŠ¨å¤„ç†\nè‡ªåŠ¨å¤„ç†"
  },
  {
    "objectID": "index.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "index.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n```{r eval=FALSE} # ===== åŸºæœ¬æ¨¡å‹ ===== library(rstanarm)"
  },
  {
    "objectID": "index.html#gt-ç®€ä»‹",
    "href": "index.html#gt-ç®€ä»‹",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "gt ç®€ä»‹",
    "text": "gt ç®€ä»‹\ngtï¼ˆGrammar of Tablesï¼‰æ˜¯Positå®˜æ–¹å¼€å‘çš„ç°ä»£è¡¨æ ¼åˆ¶ä½œåŒ…ï¼Œé‡‡ç”¨â€è¡¨æ ¼è¯­æ³•â€çš„è®¾è®¡ç†å¿µï¼Œå¯åˆ›å»ºé«˜åº¦å®šåˆ¶åŒ–çš„å‘è¡¨çº§è¡¨æ ¼ã€‚\n\ngt vs å…¶ä»–è¡¨æ ¼åŒ…\n\n\n\nç‰¹ç‚¹\ngt\ngtsummary\nkable\nflextable\n\n\n\n\nè®¾è®¡ç†å¿µ\nè¡¨æ ¼è¯­æ³•\nç»Ÿè®¡è¡¨æ ¼\nç®€å•å¿«é€Ÿ\nOfficeå…¼å®¹\n\n\nå®šåˆ¶ç¨‹åº¦\næé«˜\nä¸­ç­‰\nä½\né«˜\n\n\nå­¦ä¹ æ›²çº¿\nä¸­ç­‰\nä½\næœ€ä½\nä¸­ç­‰\n\n\nè¾“å‡ºæ ¼å¼\nHTML/PDF/Word\nåŒgt\nHTML/PDF\nWord/PPT\n\n\n\n\n\nè¡¨æ ¼ç»“æ„\ngtå°†è¡¨æ ¼åˆ†ä¸ºå‡ ä¸ªé€»è¾‘éƒ¨åˆ†ï¼š - Table Headerï¼šæ ‡é¢˜å’Œå‰¯æ ‡é¢˜ - Stubï¼šè¡Œæ ‡ç­¾åŒºåŸŸ - Column Labelsï¼šåˆ—æ ‡ç­¾ - Table Bodyï¼šæ•°æ®ä¸»ä½“ - Table Footerï¼šè„šæ³¨å’Œæ¥æºè¯´æ˜"
  },
  {
    "objectID": "index.html#å®‰è£…ä¸åŠ è½½-1",
    "href": "index.html#å®‰è£…ä¸åŠ è½½-1",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\nlibrary(rstanarm)\nlibrary(bayesplot)\nlibrary(ggplot2)\nlibrary(dplyr)\n\nset.seed(42)\ntheme_set(theme_bw(base_size = 12))\n\n# è®¾ç½®å¹¶è¡Œ\noptions(mc.cores = parallel::detectCores())"
  },
  {
    "objectID": "index.html#ç¬¬ä¸€éƒ¨åˆ†åŸºç¡€ç”¨æ³•-1",
    "href": "index.html#ç¬¬ä¸€éƒ¨åˆ†åŸºç¡€ç”¨æ³•-1",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€ç”¨æ³•",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€ç”¨æ³•\n\nåˆ›å»ºç¬¬ä¸€ä¸ªgtè¡¨æ ¼\n# ä½¿ç”¨å†…ç½®æ•°æ®\ndata(mtcars)\ndf &lt;- mtcars %&gt;%\n    slice(1:6) %&gt;%\n    select(mpg, cyl, hp, wt) %&gt;%\n    mutate(car = rownames(mtcars)[1:6], .before = 1)\n\n# æœ€ç®€å•çš„gtè¡¨æ ¼\ngt(df)\n\n\næ·»åŠ æ ‡é¢˜å’Œæ¥æº\ndf %&gt;%\n    gt() %&gt;%\n    tab_header(\n        title = \"æ±½è½¦æ€§èƒ½å‚æ•°è¡¨\",\n        subtitle = \"Motor Trend Car Road Tests æ•°æ®å­é›†\"\n    ) %&gt;%\n    tab_source_note(\n        source_note = \"æ•°æ®æ¥æºï¼š1974 Motor Trend æ‚å¿—\"\n    )\n\n\nä¿®æ”¹åˆ—æ ‡ç­¾\ndf %&gt;%\n    gt() %&gt;%\n    cols_label(\n        car = \"è½¦å‹\",\n        mpg = \"æ²¹è€— (MPG)\",\n        cyl = \"æ°”ç¼¸æ•°\",\n        hp = \"é©¬åŠ›\",\n        wt = \"é‡é‡ (å¨)\"\n    )"
  },
  {
    "objectID": "index.html#ç¬¬äºŒéƒ¨åˆ†æ ¼å¼åŒ–",
    "href": "index.html#ç¬¬äºŒéƒ¨åˆ†æ ¼å¼åŒ–",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šæ ¼å¼åŒ–",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šæ ¼å¼åŒ–\n\næ•°å­—æ ¼å¼åŒ–\ndf %&gt;%\n    gt() %&gt;%\n    fmt_number(\n        columns = c(mpg, wt),\n        decimals = 1\n    ) %&gt;%\n    fmt_integer(\n        columns = c(cyl, hp)\n    )\n\n\nç™¾åˆ†æ¯”æ ¼å¼åŒ–\n# åˆ›å»ºå¸¦ç™¾åˆ†æ¯”çš„æ•°æ®\npct_df &lt;- data.frame(\n    category = c(\"A\", \"B\", \"C\"),\n    value = c(0.234, 0.456, 0.310)\n)\n\npct_df %&gt;%\n    gt() %&gt;%\n    fmt_percent(\n        columns = value,\n        decimals = 1\n    )\n\n\nè´§å¸æ ¼å¼åŒ–\nprice_df &lt;- data.frame(\n    item = c(\"äº§å“A\", \"äº§å“B\", \"äº§å“C\"),\n    price_usd = c(99.99, 149.50, 299.00),\n    price_cny = c(699, 1049, 2099)\n)\n\nprice_df %&gt;%\n    gt() %&gt;%\n    fmt_currency(\n        columns = price_usd,\n        currency = \"USD\"\n    ) %&gt;%\n    fmt_currency(\n        columns = price_cny,\n        currency = \"CNY\"\n    )"
  },
  {
    "objectID": "index.html#ç¬¬ä¸‰éƒ¨åˆ†æ ·å¼è®¾ç½®",
    "href": "index.html#ç¬¬ä¸‰éƒ¨åˆ†æ ·å¼è®¾ç½®",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ ·å¼è®¾ç½®",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ ·å¼è®¾ç½®\n\nè¡¨å¤´æ ·å¼\ndf %&gt;%\n    gt() %&gt;%\n    tab_header(\n        title = md(\"**æ±½è½¦æ€§èƒ½å‚æ•°**\"),\n        subtitle = \"ç²¾é€‰è½¦å‹æ•°æ®\"\n    ) %&gt;%\n    tab_style(\n        style = cell_fill(color = \"#4f46e5\"),\n        locations = cells_title()\n    ) %&gt;%\n    tab_style(\n        style = cell_text(color = \"white\", weight = \"bold\"),\n        locations = cells_title()\n    )\n\n\nåˆ—æ ‡ç­¾æ ·å¼\ndf %&gt;%\n    gt() %&gt;%\n    tab_style(\n        style = list(\n            cell_fill(color = \"#e0e7ff\"),\n            cell_text(weight = \"bold\")\n        ),\n        locations = cells_column_labels()\n    )\n\n\næ¡ä»¶æ ¼å¼åŒ–\ndf %&gt;%\n    gt() %&gt;%\n    tab_style(\n        style = cell_fill(color = \"#dcfce7\"),\n        locations = cells_body(\n            columns = mpg,\n            rows = mpg &gt; 20\n        )\n    ) %&gt;%\n    tab_style(\n        style = cell_fill(color = \"#fee2e2\"),\n        locations = cells_body(\n            columns = mpg,\n            rows = mpg &lt; 15\n        )\n    )"
  },
  {
    "objectID": "index.html#ç¬¬å››éƒ¨åˆ†æ•°æ®ç€è‰²",
    "href": "index.html#ç¬¬å››éƒ¨åˆ†æ•°æ®ç€è‰²",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šæ•°æ®ç€è‰²",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šæ•°æ®ç€è‰²\n\né¢œè‰²æ ‡åº¦\ndf %&gt;%\n    gt() %&gt;%\n    data_color(\n        columns = mpg,\n        palette = c(\"#ef4444\", \"#fbbf24\", \"#22c55e\"),\n        domain = c(10, 35)\n    )\n\n\nå¤šåˆ—ç€è‰²\ndf %&gt;%\n    gt() %&gt;%\n    data_color(\n        columns = c(mpg, hp),\n        palette = \"Blues\"\n    )"
  },
  {
    "objectID": "index.html#ç¬¬äº”éƒ¨åˆ†åˆ†ç»„ä¸æ±‡æ€»",
    "href": "index.html#ç¬¬äº”éƒ¨åˆ†åˆ†ç»„ä¸æ±‡æ€»",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šåˆ†ç»„ä¸æ±‡æ€»",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šåˆ†ç»„ä¸æ±‡æ€»\n\nè¡Œåˆ†ç»„\n# æŒ‰æ°”ç¼¸æ•°åˆ†ç»„\nmtcars %&gt;%\n    slice(1:12) %&gt;%\n    mutate(car = rownames(mtcars)[1:12]) %&gt;%\n    select(car, cyl, mpg, hp) %&gt;%\n    gt(groupname_col = \"cyl\") %&gt;%\n    tab_header(title = \"æŒ‰æ°”ç¼¸æ•°åˆ†ç»„çš„æ±½è½¦æ•°æ®\")\n\n\næ·»åŠ æ±‡æ€»è¡Œ\nmtcars %&gt;%\n    slice(1:8) %&gt;%\n    mutate(car = rownames(mtcars)[1:8]) %&gt;%\n    select(car, cyl, mpg, hp) %&gt;%\n    group_by(cyl) %&gt;%\n    gt() %&gt;%\n    summary_rows(\n        groups = TRUE,\n        columns = c(mpg, hp),\n        fns = list(\n            å¹³å‡å€¼ = ~ mean(., na.rm = TRUE),\n            æœ€å¤§å€¼ = ~ max(., na.rm = TRUE)\n        ),\n        fmt = ~ fmt_number(., decimals = 1)\n    )\n\n\næ€»è®¡è¡Œ\nmtcars %&gt;%\n    slice(1:6) %&gt;%\n    mutate(car = rownames(mtcars)[1:6]) %&gt;%\n    select(car, mpg, hp, wt) %&gt;%\n    gt() %&gt;%\n    grand_summary_rows(\n        columns = c(mpg, hp),\n        fns = list(\n            æ€»è®¡ = ~ sum(.),\n            å¹³å‡ = ~ mean(.)\n        ),\n        fmt = ~ fmt_number(., decimals = 1)\n    )"
  },
  {
    "objectID": "index.html#ç¬¬å…­éƒ¨åˆ†è„šæ³¨ä¸æ³¨é‡Š",
    "href": "index.html#ç¬¬å…­éƒ¨åˆ†è„šæ³¨ä¸æ³¨é‡Š",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šè„šæ³¨ä¸æ³¨é‡Š",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šè„šæ³¨ä¸æ³¨é‡Š\n\næ·»åŠ è„šæ³¨\ndf %&gt;%\n    gt() %&gt;%\n    tab_footnote(\n        footnote = \"MPG = Miles Per Gallon\",\n        locations = cells_column_labels(columns = mpg)\n    ) %&gt;%\n    tab_footnote(\n        footnote = \"é«˜æ€§èƒ½è½¦å‹\",\n        locations = cells_body(\n            columns = car,\n            rows = hp &gt; 200\n        )\n    )\n\n\nå¤šä¸ªè„šæ³¨\ndf %&gt;%\n    gt() %&gt;%\n    tab_footnote(\n        footnote = md(\"**æ²¹è€—æ•ˆç‡**æŒ‡æ ‡\"),\n        locations = cells_column_labels(columns = mpg)\n    ) %&gt;%\n    tab_footnote(\n        footnote = \"åˆ¶åŠ¨é©¬åŠ›\",\n        locations = cells_column_labels(columns = hp)\n    ) %&gt;%\n    tab_source_note(\"æ³¨ï¼šæ•°æ®æ¥è‡ª1974å¹´ç¾å›½æ±½è½¦æµ‹è¯•\")"
  },
  {
    "objectID": "index.html#ç¬¬ä¸ƒéƒ¨åˆ†åˆå¹¶ä¸è·¨åº¦",
    "href": "index.html#ç¬¬ä¸ƒéƒ¨åˆ†åˆå¹¶ä¸è·¨åº¦",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šåˆå¹¶ä¸è·¨åº¦",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šåˆå¹¶ä¸è·¨åº¦\n\nåˆ—åˆå¹¶\ndf %&gt;%\n    gt() %&gt;%\n    cols_merge(\n        columns = c(cyl, hp),\n        pattern = \"{1} ç¼¸ / {2} é©¬åŠ›\"\n    ) %&gt;%\n    cols_label(cyl = \"å‘åŠ¨æœºé…ç½®\")\n\n\nåˆ—åˆ†ç»„ï¼ˆSpannerï¼‰\ndf %&gt;%\n    gt() %&gt;%\n    tab_spanner(\n        label = \"æ€§èƒ½æŒ‡æ ‡\",\n        columns = c(mpg, hp)\n    ) %&gt;%\n    tab_spanner(\n        label = \"è§„æ ¼å‚æ•°\",\n        columns = c(cyl, wt)\n    )"
  },
  {
    "objectID": "index.html#ç¬¬å…«éƒ¨åˆ†å¯¼å‡ºè¡¨æ ¼",
    "href": "index.html#ç¬¬å…«éƒ¨åˆ†å¯¼å‡ºè¡¨æ ¼",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬å…«éƒ¨åˆ†ï¼šå¯¼å‡ºè¡¨æ ¼",
    "text": "ç¬¬å…«éƒ¨åˆ†ï¼šå¯¼å‡ºè¡¨æ ¼\n\nä¿å­˜ä¸ºHTML\n```{r eval=FALSE} my_table &lt;- df %&gt;% gt() %&gt;% tab_header(title = â€œç¤ºä¾‹è¡¨æ ¼â€)"
  },
  {
    "objectID": "index.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-1",
    "href": "index.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-1",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n```{r eval=FALSE} # ===== åŸºæœ¬æ¨¡å‹ ===== library(rstanarm)"
  },
  {
    "objectID": "index.html#xgboost-ç®€ä»‹",
    "href": "index.html#xgboost-ç®€ä»‹",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "XGBoost ç®€ä»‹",
    "text": "XGBoost ç®€ä»‹\nXGBoostï¼ˆeXtreme Gradient Boostingï¼‰æ˜¯ç›®å‰æœ€å¼ºå¤§çš„æœºå™¨å­¦ä¹ ç®—æ³•ä¹‹ä¸€ï¼Œåœ¨ç»“æ„åŒ–æ•°æ®ä¸Šè¡¨ç°å“è¶Šï¼Œæ˜¯Kaggleç«èµ›çš„å¸¸èƒœå°†å†›ã€‚\n\nä¸ºä»€ä¹ˆé€‰æ‹©XGBoostï¼Ÿ\n\n\n\nä¼˜åŠ¿\nè¯´æ˜\n\n\n\n\né«˜æ€§èƒ½\né€Ÿåº¦å¿«ã€ç²¾åº¦é«˜\n\n\næ­£åˆ™åŒ–\nå†…ç½®L1/L2æ­£åˆ™åŒ–ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆ\n\n\nçµæ´»æ€§\næ”¯æŒè‡ªå®šä¹‰ç›®æ ‡å‡½æ•°\n\n\nå¯è§£é‡Šæ€§\næä¾›ç‰¹å¾é‡è¦æ€§\n\n\nå·¥ç¨‹ä¼˜åŒ–\nå¹¶è¡Œè®¡ç®—ã€ç¼“å­˜ä¼˜åŒ–\n\n\n\n\n\næ ¸å¿ƒåŸç†\nXGBooståŸºäºæ¢¯åº¦æå‡å†³ç­–æ ‘ï¼ˆGBDTï¼‰ï¼š 1. é¡ºåºè®­ç»ƒå¤šæ£µå†³ç­–æ ‘ 2. æ¯æ£µæ ‘æ‹Ÿåˆå‰ä¸€è½®çš„æ®‹å·® 3. ä½¿ç”¨äºŒé˜¶æ³°å‹’å±•å¼€ä¼˜åŒ–ç›®æ ‡å‡½æ•° 4. æ­£åˆ™åŒ–æ§åˆ¶æ¨¡å‹å¤æ‚åº¦"
  },
  {
    "objectID": "index.html#å®‰è£…ä¸åŠ è½½-2",
    "href": "index.html#å®‰è£…ä¸åŠ è½½-2",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\nlibrary(rstanarm)\nlibrary(bayesplot)\nlibrary(ggplot2)\nlibrary(dplyr)\n\nset.seed(42)\ntheme_set(theme_bw(base_size = 12))\n\n# è®¾ç½®å¹¶è¡Œ\noptions(mc.cores = parallel::detectCores())"
  },
  {
    "objectID": "index.html#ç¬¬ä¸€éƒ¨åˆ†å¿«é€Ÿå…¥é—¨",
    "href": "index.html#ç¬¬ä¸€éƒ¨åˆ†å¿«é€Ÿå…¥é—¨",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šå¿«é€Ÿå…¥é—¨",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šå¿«é€Ÿå…¥é—¨\n\né¡¹ç›®ç»“æ„\nä¸€ä¸ªæ ‡å‡†çš„ targets é¡¹ç›®åŒ…å«ï¼š\nmy_project/\nâ”œâ”€â”€ _targets.R        # å®šä¹‰ç®¡é“\nâ”œâ”€â”€ R/                # è‡ªå®šä¹‰å‡½æ•°\nâ”‚   â””â”€â”€ functions.R\nâ”œâ”€â”€ data/             # åŸå§‹æ•°æ®\nâ””â”€â”€ _targets/         # ç¼“å­˜ç›®å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰\n\n\nç¼–å†™ _targets.R\n# _targets.R æ–‡ä»¶å†…å®¹\nlibrary(targets)\nlibrary(tarchetypes)\n\n# åŠ è½½è‡ªå®šä¹‰å‡½æ•°\nsource(\"R/functions.R\")\n\n# å®šä¹‰ç®¡é“\nlist(\n    # è¯»å–æ•°æ®\n    tar_target(raw_data, read.csv(\"data/input.csv\")),\n\n    # æ•°æ®æ¸…æ´—\n    tar_target(clean_data, clean_data_fn(raw_data)),\n\n    # æ‹Ÿåˆæ¨¡å‹\n    tar_target(model, fit_model(clean_data)),\n\n    # ç”ŸæˆæŠ¥å‘Š\n    tar_target(report, create_report(model, clean_data))\n)\n\n\nè‡ªå®šä¹‰å‡½æ•°\n# R/functions.R\nclean_data_fn &lt;- function(data) {\n    data %&gt;%\n        dplyr::filter(!is.na(outcome)) %&gt;%\n        dplyr::mutate(age_group = cut(age, breaks = c(0, 40, 60, 100)))\n}\n\nfit_model &lt;- function(data) {\n    glm(outcome ~ age + bmi, data = data, family = binomial)\n}\n\ncreate_report &lt;- function(model, data) {\n    list(\n        n = nrow(data),\n        coefs = coef(model),\n        aic = AIC(model)\n    )\n}"
  },
  {
    "objectID": "index.html#ç¬¬äºŒéƒ¨åˆ†å‚æ•°è¯¦è§£",
    "href": "index.html#ç¬¬äºŒéƒ¨åˆ†å‚æ•°è¯¦è§£",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šå‚æ•°è¯¦è§£",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šå‚æ•°è¯¦è§£\n\næ ¸å¿ƒå‚æ•°\n\n\n\nå‚æ•°\nè¯´æ˜\næ¨èå€¼\n\n\n\n\neta\nå­¦ä¹ ç‡\n0.01-0.3\n\n\nmax_depth\næ ‘æœ€å¤§æ·±åº¦\n3-10\n\n\nmin_child_weight\nå¶å­èŠ‚ç‚¹æœ€å°æ ·æœ¬æƒé‡\n1-10\n\n\nsubsample\næ ·æœ¬é‡‡æ ·æ¯”ä¾‹\n0.5-1\n\n\ncolsample_bytree\nç‰¹å¾é‡‡æ ·æ¯”ä¾‹\n0.5-1\n\n\nlambda\nL2æ­£åˆ™åŒ–\n0-10\n\n\nalpha\nL1æ­£åˆ™åŒ–\n0-10\n\n\n\n\n\nç›®æ ‡å‡½æ•°\n```{r eval=FALSE} # äºŒåˆ†ç±» objective &lt;- â€œbinary:logisticâ€ # è¾“å‡ºæ¦‚ç‡ objective &lt;- â€œbinary:logitrawâ€ # è¾“å‡ºåŸå§‹åˆ†æ•°"
  },
  {
    "objectID": "index.html#ç¬¬å››éƒ¨åˆ†ç‰¹å¾é‡è¦æ€§",
    "href": "index.html#ç¬¬å››éƒ¨åˆ†ç‰¹å¾é‡è¦æ€§",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šç‰¹å¾é‡è¦æ€§",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šç‰¹å¾é‡è¦æ€§\n\nè®¡ç®—é‡è¦æ€§\n# é‡æ–°è®­ç»ƒæœ€ç»ˆæ¨¡å‹\nfinal_model &lt;- xgb.train(\n    params = params,\n    data = dtrain,\n    nrounds = best_nrounds,\n    verbose = 0\n)\n\n# è·å–ç‰¹å¾é‡è¦æ€§\nimportance &lt;- xgb.importance(\n    feature_names = colnames(train_data)[1:4],\n    model = final_model\n)\nprint(importance)\n\n\nå¯è§†åŒ–é‡è¦æ€§\n# æ¡å½¢å›¾\nxgb.plot.importance(importance, measure = \"Gain\")\n# è‡ªå®šä¹‰ggplotå¯è§†åŒ–\nggplot(importance, aes(x = reorder(Feature, Gain), y = Gain)) +\n    geom_col(fill = \"#4f46e5\", alpha = 0.8) +\n    coord_flip() +\n    labs(\n        title = \"XGBoost ç‰¹å¾é‡è¦æ€§\",\n        subtitle = \"åŸºäºä¿¡æ¯å¢ç›Š\",\n        x = \"\", y = \"é‡è¦æ€§ (Gain)\"\n    )\n\n\nå¤šç§é‡è¦æ€§æŒ‡æ ‡\n# ä¸‰ç§é‡è¦æ€§æŒ‡æ ‡å¯¹æ¯”\nimportance_long &lt;- importance %&gt;%\n    tidyr::pivot_longer(\n        cols = c(Gain, Cover, Frequency),\n        names_to = \"Metric\",\n        values_to = \"Value\"\n    )\n\nggplot(importance_long, aes(x = Feature, y = Value, fill = Metric)) +\n    geom_col(position = \"dodge\") +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\", \"#ef4444\")) +\n    labs(\n        title = \"ç‰¹å¾é‡è¦æ€§ï¼ˆå¤šæŒ‡æ ‡å¯¹æ¯”ï¼‰\",\n        x = \"\", y = \"é‡è¦æ€§\"\n    ) +\n    theme(axis.text.x = element_text(angle = 45, hjust = 1))"
  },
  {
    "objectID": "index.html#ç¬¬äº”éƒ¨åˆ†å›å½’ä»»åŠ¡",
    "href": "index.html#ç¬¬äº”éƒ¨åˆ†å›å½’ä»»åŠ¡",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šå›å½’ä»»åŠ¡",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šå›å½’ä»»åŠ¡\n\nå›å½’æ¨¡å‹\n# ä½¿ç”¨mtcarsæ•°æ®\ndata(mtcars)\ntrain_idx &lt;- sample(1:nrow(mtcars), 0.7 * nrow(mtcars))\n\ndtrain_reg &lt;- xgb.DMatrix(\n    data = as.matrix(mtcars[train_idx, -1]),\n    label = mtcars$mpg[train_idx]\n)\ndtest_reg &lt;- xgb.DMatrix(\n    data = as.matrix(mtcars[-train_idx, -1]),\n    label = mtcars$mpg[-train_idx]\n)\n\n# å›å½’å‚æ•°\nparams_reg &lt;- list(\n    objective = \"reg:squarederror\",\n    eval_metric = \"rmse\",\n    max_depth = 4,\n    eta = 0.1\n)\n\n# è®­ç»ƒ\nmodel_reg &lt;- xgb.train(\n    params = params_reg,\n    data = dtrain_reg,\n    nrounds = 100,\n    watchlist = list(train = dtrain_reg, test = dtest_reg),\n    verbose = 0\n)\n\n# é¢„æµ‹\npred_reg &lt;- predict(model_reg, dtest_reg)\nactual_reg &lt;- mtcars$mpg[-train_idx]\n\n# è¯„ä¼°\nrmse &lt;- sqrt(mean((pred_reg - actual_reg)^2))\nr_squared &lt;- cor(pred_reg, actual_reg)^2\n\ncat(\"RMSE:\", round(rmse, 3), \"\\n\")\ncat(\"RÂ²:\", round(r_squared, 3), \"\\n\")\n\n\né¢„æµ‹vså®é™…\npred_df &lt;- data.frame(\n    actual = actual_reg,\n    predicted = pred_reg\n)\n\nggplot(pred_df, aes(x = actual, y = predicted)) +\n    geom_point(color = \"#4f46e5\", size = 3) +\n    geom_abline(\n        slope = 1, intercept = 0,\n        linetype = \"dashed\", color = \"red\"\n    ) +\n    labs(\n        title = \"XGBoost å›å½’ï¼šé¢„æµ‹ vs å®é™…\",\n        x = \"å®é™…å€¼\", y = \"é¢„æµ‹å€¼\"\n    ) +\n    annotate(\"text\",\n        x = 15, y = 30,\n        label = paste(\"RÂ² =\", round(r_squared, 3))\n    )"
  },
  {
    "objectID": "index.html#ç¬¬å…­éƒ¨åˆ†å¤šåˆ†ç±»",
    "href": "index.html#ç¬¬å…­éƒ¨åˆ†å¤šåˆ†ç±»",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šå¤šåˆ†ç±»",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šå¤šåˆ†ç±»\n# ä½¿ç”¨å®Œæ•´irisæ•°æ®ï¼ˆä¸‰åˆ†ç±»ï¼‰\niris_full &lt;- iris\niris_full$label &lt;- as.numeric(iris_full$Species) - 1\n\ntrain_idx &lt;- sample(1:nrow(iris_full), 0.7 * nrow(iris_full))\n\ndtrain_multi &lt;- xgb.DMatrix(\n    data = as.matrix(iris_full[train_idx, 1:4]),\n    label = iris_full$label[train_idx]\n)\ndtest_multi &lt;- xgb.DMatrix(\n    data = as.matrix(iris_full[-train_idx, 1:4]),\n    label = iris_full$label[-train_idx]\n)\n\n# å¤šåˆ†ç±»å‚æ•°\nparams_multi &lt;- list(\n    objective = \"multi:softmax\",\n    num_class = 3,\n    eval_metric = \"mlogloss\",\n    max_depth = 4,\n    eta = 0.1\n)\n\n# è®­ç»ƒ\nmodel_multi &lt;- xgb.train(\n    params = params_multi,\n    data = dtrain_multi,\n    nrounds = 50,\n    verbose = 0\n)\n\n# é¢„æµ‹\npred_multi &lt;- predict(model_multi, dtest_multi)\n\n# æ··æ·†çŸ©é˜µ\ntable(Predicted = pred_multi, Actual = iris_full$label[-train_idx])\n\n# å‡†ç¡®ç‡\naccuracy_multi &lt;- mean(pred_multi == iris_full$label[-train_idx])\ncat(\"å¤šåˆ†ç±»å‡†ç¡®ç‡:\", round(accuracy_multi, 4), \"\\n\")"
  },
  {
    "objectID": "index.html#ç¬¬ä¸ƒéƒ¨åˆ†ä¿å­˜ä¸åŠ è½½æ¨¡å‹",
    "href": "index.html#ç¬¬ä¸ƒéƒ¨åˆ†ä¿å­˜ä¸åŠ è½½æ¨¡å‹",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šä¿å­˜ä¸åŠ è½½æ¨¡å‹",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šä¿å­˜ä¸åŠ è½½æ¨¡å‹\n# ä¿å­˜æ¨¡å‹\nxgb.save(final_model, \"xgboost_model.bin\")\n\n# åŠ è½½æ¨¡å‹\nmodel_loaded &lt;- xgb.load(\"xgboost_model.bin\")\n\n# éªŒè¯\npred_loaded &lt;- predict(model_loaded, dtest)\nall.equal(pred_prob, pred_loaded)\n# æ¸…ç†ä¸´æ—¶æ–‡ä»¶\nif (file.exists(\"xgboost_model.bin\")) {\n    file.remove(\"xgboost_model.bin\")\n}"
  },
  {
    "objectID": "index.html#ç¬¬å…«éƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "href": "index.html#ç¬¬å…«éƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬å…«éƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬å…«éƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹\n\nå®Œæ•´å·¥ä½œæµç¨‹\n# ä½¿ç”¨çœŸå®æ•°æ®æ¨¡æ‹Ÿ\nset.seed(123)\nn &lt;- 1000\n\n# ç”Ÿæˆç‰¹å¾\nage &lt;- rnorm(n, 50, 12)\nbmi &lt;- rnorm(n, 26, 4)\nbp &lt;- rnorm(n, 130, 15)\nglucose &lt;- rnorm(n, 100, 25)\ncholesterol &lt;- rnorm(n, 200, 40)\n\n# ç”Ÿæˆæ ‡ç­¾ï¼ˆå—ç‰¹å¾å½±å“ï¼‰\nprob &lt;- plogis(-5 + 0.03 * age + 0.08 * bmi + 0.02 * bp + 0.01 * glucose + 0.005 * cholesterol)\noutcome &lt;- rbinom(n, 1, prob)\n\nsim_data &lt;- data.frame(\n    outcome, age, bmi, bp, glucose, cholesterol\n)\n\ncat(\"=== æ•°æ®æ¦‚è§ˆ ===\\n\")\ncat(\"æ ·æœ¬é‡:\", n, \"\\n\")\ncat(\"é˜³æ€§ç‡:\", mean(outcome), \"\\n\")\n# æ•°æ®åˆ†å‰²\ntrain_idx &lt;- sample(1:n, 0.7 * n)\nX_train &lt;- as.matrix(sim_data[train_idx, -1])\ny_train &lt;- sim_data$outcome[train_idx]\nX_test &lt;- as.matrix(sim_data[-train_idx, -1])\ny_test &lt;- sim_data$outcome[-train_idx]\n\ndtrain_case &lt;- xgb.DMatrix(data = X_train, label = y_train)\ndtest_case &lt;- xgb.DMatrix(data = X_test, label = y_test)\n# äº¤å‰éªŒè¯é€‰æ‹©æœ€ä½³å‚æ•°\ncv_case &lt;- xgb.cv(\n    params = list(\n        objective = \"binary:logistic\",\n        eval_metric = \"auc\",\n        max_depth = 4,\n        eta = 0.1,\n        subsample = 0.8,\n        colsample_bytree = 0.8\n    ),\n    data = dtrain_case,\n    nrounds = 200,\n    nfold = 5,\n    early_stopping_rounds = 20,\n    verbose = 0\n)\n\ncat(\"\\næœ€ä½³è¿­ä»£:\", cv_case$best_iteration, \"\\n\")\ncat(\"éªŒè¯é›†AUC:\", round(max(cv_case$evaluation_log$test_auc_mean), 4), \"\\n\")\n# è®­ç»ƒæœ€ç»ˆæ¨¡å‹\nfinal_case &lt;- xgb.train(\n    params = list(\n        objective = \"binary:logistic\",\n        eval_metric = \"auc\",\n        max_depth = 4,\n        eta = 0.1,\n        subsample = 0.8,\n        colsample_bytree = 0.8\n    ),\n    data = dtrain_case,\n    nrounds = cv_case$best_iteration,\n    verbose = 0\n)\n\n# æµ‹è¯•é›†è¯„ä¼°\npred_case &lt;- predict(final_case, dtest_case)\n\n# AUC\nlibrary(pROC)\nroc_case &lt;- roc(y_test, pred_case)\ncat(\"\\næµ‹è¯•é›†AUC:\", round(auc(roc_case), 4), \"\\n\")\n# ç‰¹å¾é‡è¦æ€§\nimportance_case &lt;- xgb.importance(\n    feature_names = colnames(sim_data)[-1],\n    model = final_case\n)\n\nxgb.plot.importance(importance_case)"
  },
  {
    "objectID": "index.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-2",
    "href": "index.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-2",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n```{r eval=FALSE} # ===== åŸºæœ¬æ¨¡å‹ ===== library(rstanarm)"
  },
  {
    "objectID": "index.html#å°ç»“",
    "href": "index.html#å°ç»“",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "å°ç»“",
    "text": "å°ç»“\nrstanarmçš„æ ¸å¿ƒå·¥ä½œæµç¨‹ï¼š\n\næ¨¡å‹è®¾å®šï¼šä½¿ç”¨ç†Ÿæ‚‰çš„å…¬å¼è¯­æ³•\nå…ˆéªŒé€‰æ‹©ï¼šé»˜è®¤å…ˆéªŒé€šå¸¸åˆç†ï¼Œæˆ–è‡ªå®šä¹‰\næ‹Ÿåˆï¼šè‡ªåŠ¨MCMCé‡‡æ ·\nè¯Šæ–­ï¼šæ£€æŸ¥R-hatã€è½¨è¿¹å›¾ã€åéªŒé¢„æµ‹\næ¨æ–­ï¼šåˆ©ç”¨å®Œæ•´åéªŒåˆ†å¸ƒ\n\n\nä¼˜åŠ¿ï¼šè´å¶æ–¯æ–¹æ³•è®©ä½ èƒ½å¤Ÿç›´æ¥é™ˆè¿°â€å‚æ•°åœ¨åŒºé—´å†…çš„æ¦‚ç‡â€ï¼Œè€Œéâ€å¦‚æœé‡å¤å®éªŒâ€¦â€"
  },
  {
    "objectID": "index.html#å‚è€ƒèµ„æº",
    "href": "index.html#å‚è€ƒèµ„æº",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nrstanarmå®˜æ–¹æ–‡æ¡£\nStanç”¨æˆ·æŒ‡å—\nGelman et al.Â (2020). Regression and Other Stories."
  },
  {
    "objectID": "1065-tmle-doubly-robust.html",
    "href": "1065-tmle-doubly-robust.html",
    "title": "TMLE åŒé‡ç¨³å¥å› æœæ¨æ–­å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "TMLEï¼ˆTargeted Maximum Likelihood Estimationï¼Œç›®æ ‡æœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼‰æ˜¯ä¸€ç§åŠå‚æ•°åŒé‡ç¨³å¥çš„å› æœæ¨æ–­æ–¹æ³•ï¼Œç»“åˆäº†æœºå™¨å­¦ä¹ çš„çµæ´»æ€§å’Œç»Ÿè®¡æ¨æ–­çš„ä¸¥è°¨æ€§ã€‚\n\n\n\n\n\næ–¹æ³•\nå±€é™æ€§\nTMLEä¼˜åŠ¿\n\n\n\n\nä¼ ç»Ÿå›å½’\næ¨¡å‹è¯¯è®¾å¯¼è‡´åå·®\nåŒé‡ç¨³å¥\n\n\nIPW\næç«¯æƒé‡ä¸ç¨³å®š\nè¾¹ç•Œå¤„ç†\n\n\nå€¾å‘å¾—åˆ†åŒ¹é…\næ ·æœ¬é‡æŸå¤±\nä¿ç•™æ‰€æœ‰æ•°æ®\n\n\nå‚æ•°æ¨¡å‹\nå‡è®¾è¿‡å¼º\nå¯æ•´åˆML\n\n\n\n\n\n\nTMLEçš„æ ¸å¿ƒä¼˜åŠ¿æ˜¯åŒé‡ç¨³å¥æ€§ï¼šåªè¦ä»¥ä¸‹ä¸¤ä¸ªæ¨¡å‹ä¹‹ä¸€æ­£ç¡®æŒ‡å®šï¼Œä¼°è®¡å°±æ˜¯ä¸€è‡´çš„ï¼š - ç»“æœæ¨¡å‹ Q(A,W)ï¼šç»™å®šæš´éœ²å’Œåå˜é‡ä¸‹çš„æœŸæœ›ç»“æœ - å€¾å‘å¾—åˆ†æ¨¡å‹ g(W)ï¼šç»™å®šåå˜é‡ä¸‹æ¥å—æš´éœ²çš„æ¦‚ç‡",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#tmle-ç®€ä»‹",
    "href": "1065-tmle-doubly-robust.html#tmle-ç®€ä»‹",
    "title": "TMLE åŒé‡ç¨³å¥å› æœæ¨æ–­å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "TMLEï¼ˆTargeted Maximum Likelihood Estimationï¼Œç›®æ ‡æœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼‰æ˜¯ä¸€ç§åŠå‚æ•°åŒé‡ç¨³å¥çš„å› æœæ¨æ–­æ–¹æ³•ï¼Œç»“åˆäº†æœºå™¨å­¦ä¹ çš„çµæ´»æ€§å’Œç»Ÿè®¡æ¨æ–­çš„ä¸¥è°¨æ€§ã€‚\n\n\n\n\n\næ–¹æ³•\nå±€é™æ€§\nTMLEä¼˜åŠ¿\n\n\n\n\nä¼ ç»Ÿå›å½’\næ¨¡å‹è¯¯è®¾å¯¼è‡´åå·®\nåŒé‡ç¨³å¥\n\n\nIPW\næç«¯æƒé‡ä¸ç¨³å®š\nè¾¹ç•Œå¤„ç†\n\n\nå€¾å‘å¾—åˆ†åŒ¹é…\næ ·æœ¬é‡æŸå¤±\nä¿ç•™æ‰€æœ‰æ•°æ®\n\n\nå‚æ•°æ¨¡å‹\nå‡è®¾è¿‡å¼º\nå¯æ•´åˆML\n\n\n\n\n\n\nTMLEçš„æ ¸å¿ƒä¼˜åŠ¿æ˜¯åŒé‡ç¨³å¥æ€§ï¼šåªè¦ä»¥ä¸‹ä¸¤ä¸ªæ¨¡å‹ä¹‹ä¸€æ­£ç¡®æŒ‡å®šï¼Œä¼°è®¡å°±æ˜¯ä¸€è‡´çš„ï¼š - ç»“æœæ¨¡å‹ Q(A,W)ï¼šç»™å®šæš´éœ²å’Œåå˜é‡ä¸‹çš„æœŸæœ›ç»“æœ - å€¾å‘å¾—åˆ†æ¨¡å‹ g(W)ï¼šç»™å®šåå˜é‡ä¸‹æ¥å—æš´éœ²çš„æ¦‚ç‡",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#å®‰è£…ä¸åŠ è½½",
    "href": "1065-tmle-doubly-robust.html#å®‰è£…ä¸åŠ è½½",
    "title": "TMLE åŒé‡ç¨³å¥å› æœæ¨æ–­å®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\nlibrary(tmle)\nlibrary(SuperLearner)\nlibrary(ggplot2)\nlibrary(dplyr)\n\ntheme_set(theme_bw(base_size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬ä¸€éƒ¨åˆ†tmleç†è®ºåŸºç¡€",
    "href": "1065-tmle-doubly-robust.html#ç¬¬ä¸€éƒ¨åˆ†tmleç†è®ºåŸºç¡€",
    "title": "TMLE åŒé‡ç¨³å¥å› æœæ¨æ–­å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šTMLEç†è®ºåŸºç¡€",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šTMLEç†è®ºåŸºç¡€\n\nå› æœæ•ˆåº”å‚æ•°\nTMLEå¸¸ç”¨äºä¼°è®¡å¹³å‡æ²»ç–—æ•ˆåº”ï¼ˆATEï¼‰ï¼š\n\\[ATE = E[Y(1)] - E[Y(0)]\\]\nå…¶ä¸­ Y(1) å’Œ Y(0) åˆ†åˆ«æ˜¯æ¥å—å’Œä¸æ¥å—æ²»ç–—çš„æ½œåœ¨ç»“æœã€‚\n\n\nTMLEæ­¥éª¤\n\nåˆå§‹ä¼°è®¡ï¼šæ‹Ÿåˆç»“æœæ¨¡å‹ Qâ°(A,W)\nå€¾å‘å¾—åˆ†ï¼šæ‹Ÿåˆæš´éœ²æ¨¡å‹ g(W)\nç›®æ ‡æ›´æ–°ï¼šä½¿ç”¨å·§å¦™åå˜é‡è°ƒæ•´åˆå§‹ä¼°è®¡\nå‚æ•°ä¼°è®¡ï¼šè®¡ç®—ç›®æ ‡å‚æ•°çš„æ ·æœ¬å‡å€¼\n\n\n\nä¸AIPWçš„å…³ç³»\nAIPWï¼ˆå¢å¹¿é€†æ¦‚ç‡åŠ æƒï¼‰ä¸TMLEåŒå±åŒé‡ç¨³å¥ä¼°è®¡é‡ï¼Œä½†TMLEé€šè¿‡ç›®æ ‡æ›´æ–°æ­¥éª¤ç¡®ä¿ä¼°è®¡å§‹ç»ˆåœ¨åˆç†èŒƒå›´å†…ï¼ˆå¦‚æ¦‚ç‡åœ¨0-1ä¹‹é—´ï¼‰ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬äºŒéƒ¨åˆ†tmleåŒ…åŸºç¡€",
    "href": "1065-tmle-doubly-robust.html#ç¬¬äºŒéƒ¨åˆ†tmleåŒ…åŸºç¡€",
    "title": "TMLE åŒé‡ç¨³å¥å› æœæ¨æ–­å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼štmleåŒ…åŸºç¡€",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼štmleåŒ…åŸºç¡€\n\næ•°æ®å‡†å¤‡\n\n# æ¨¡æ‹Ÿè§‚å¯Ÿæ€§ç ”ç©¶æ•°æ®\nset.seed(42)\nn &lt;- 500\n\n# åå˜é‡\nW1 &lt;- rnorm(n)\nW2 &lt;- rbinom(n, 1, 0.5)\nW3 &lt;- rnorm(n)\n\n# æš´éœ²ï¼ˆå—åå˜é‡å½±å“ï¼‰\nprob_A &lt;- plogis(0.2 + 0.5 * W1 - 0.3 * W2 + 0.2 * W3)\nA &lt;- rbinom(n, 1, prob_A)\n\n# ç»“æœï¼ˆå—åå˜é‡å’Œæš´éœ²å½±å“ï¼‰\nY &lt;- 2 + 0.5 * A + 0.8 * W1 - 0.5 * W2 + 0.3 * W3 + rnorm(n, 0, 1)\n\n# æ„å»ºæ•°æ®æ¡†\nobs_data &lt;- data.frame(Y = Y, A = A, W1 = W1, W2 = W2, W3 = W3)\nhead(obs_data)\n\n         Y A         W1 W2         W3\n1 2.012966 1  1.3709584  1 -1.6080602\n2 1.327490 1 -0.5646982  0 -1.9497838\n3 1.201020 1  0.3631284  1 -0.3406999\n4 3.390633 1  0.6328626  1  0.1747255\n5 1.345022 1  0.4042683  0 -2.2777776\n6 2.842722 1 -0.1061245  0  0.2905245\n\n\n\n\nåŸºç¡€TMLEä¼°è®¡\n\n# å‡†å¤‡åå˜é‡çŸ©é˜µ\nW &lt;- obs_data[, c(\"W1\", \"W2\", \"W3\")]\n\n# è¿è¡ŒTMLE\nresult &lt;- tmle(\n    Y = obs_data$Y, # ç»“æœå˜é‡\n    A = obs_data$A, # æš´éœ²å˜é‡\n    W = W, # åå˜é‡\n    family = \"gaussian\" # ç»“æœç±»å‹\n)\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n# æŸ¥çœ‹ç»“æœ\nsummary(result)\n\n Initial estimation of Q\n     Procedure: cv-SuperLearner, ensemble\n     Model:\n         Y ~  SL.glm_All + tmle.SL.dbarts2_All + SL.glmnet_All\n\n     Coefficients: \n          SL.glm_All    0.5695964 \n     tmle.SL.dbarts2_All    0 \n       SL.glmnet_All    0.4304036 \n\n     Cross-validated R squared :  0.4817 \n\n Estimation of g (treatment mechanism)\n     Procedure: SuperLearner, ensemble\n     Model:\n         A ~  SL.glm_All + tmle.SL.dbarts.k.5_All + SL.gam_All \n\n     Coefficients: \n          SL.glm_All    0.3871976 \n     tmle.SL.dbarts.k.5_All    0 \n          SL.gam_All    0.6128024 \n\n Estimation of g.Z (intermediate variable assignment mechanism)\n     Procedure: No intermediate variable \n\n Estimation of g.Delta (missingness mechanism)\n     Procedure: No missingness, ensemble\n\n Bounds on g: (0.036, 1) \n\n Bounds on g for ATT/ATC: (0.036, 0.964) \n\n Marginal Mean under Treatment (EY1)\n   Parameter Estimate:  2.2511\n   Estimated Variance:  0.0056543\n              p-value:  &lt;2e-16\n    95% Conf Interval:  (2.1037, 2.3985)\n\n Marginal Mean under Comparator (EY0)\n   Parameter Estimate:  1.7934\n   Estimated Variance:  0.0063488\n              p-value:  &lt;2e-16\n    95% Conf Interval:  (1.6372, 1.9496)\n\n Additive Effect\n   Parameter Estimate:  0.45772\n   Estimated Variance:  0.0087251\n              p-value:  9.5734e-07\n    95% Conf Interval:  (0.27464, 0.6408)\n\n Additive Effect among the Treated\n   Parameter Estimate:  0.4449\n   Estimated Variance:  0.0090505\n              p-value:  2.9176e-06\n    95% Conf Interval:  (0.25844, 0.63136)\n\n Additive Effect among the Controls\n   Parameter Estimate:  0.47558\n   Estimated Variance:  0.0096763\n              p-value:  1.3337e-06\n    95% Conf Interval:  (0.28278, 0.66838)\n\n\n\n\nç»“æœè§£è¯»\n\n# æå–ATEä¼°è®¡\nate &lt;- result$estimates$ATE\ncat(\"å¹³å‡æ²»ç–—æ•ˆåº” (ATE):\\n\")\n\nå¹³å‡æ²»ç–—æ•ˆåº” (ATE):\n\ncat(\"  ç‚¹ä¼°è®¡:\", round(ate$psi, 4), \"\\n\")\n\n  ç‚¹ä¼°è®¡: 0.4577 \n\ncat(\"  95% CI: [\", round(ate$CI[1], 4), \",\", round(ate$CI[2], 4), \"]\\n\")\n\n  95% CI: [ 0.2746 , 0.6408 ]\n\ncat(\"  På€¼:\", round(ate$pvalue, 4), \"\\n\")\n\n  På€¼: 0",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬ä¸‰éƒ¨åˆ†ç»“åˆsuperlearner",
    "href": "1065-tmle-doubly-robust.html#ç¬¬ä¸‰éƒ¨åˆ†ç»“åˆsuperlearner",
    "title": "TMLE åŒé‡ç¨³å¥å› æœæ¨æ–­å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šç»“åˆSuperLearner",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šç»“åˆSuperLearner\nTMLEçš„çœŸæ­£å¨åŠ›åœ¨äºä¸æœºå™¨å­¦ä¹ é›†æˆã€‚SuperLearneræ˜¯ä¸€ä¸ªé›†æˆå­¦ä¹ æ¡†æ¶ï¼Œå¯ä»¥ç»„åˆå¤šç§ç®—æ³•ã€‚\n\næŒ‡å®šå­¦ä¹ ç®—æ³•\n\n# å®šä¹‰SuperLearneråº“\nSL_library &lt;- c(\"SL.glm\", \"SL.glm.interaction\", \"SL.mean\")\n\n# ä½¿ç”¨SuperLearnerçš„TMLE\nresult_sl &lt;- tmle(\n    Y = obs_data$Y,\n    A = obs_data$A,\n    W = W,\n    family = \"gaussian\",\n    Q.SL.library = SL_library, # ç»“æœæ¨¡å‹\n    g.SL.library = SL_library # æš´éœ²æ¨¡å‹\n)\n\nsummary(result_sl)\n\n Initial estimation of Q\n     Procedure: cv-SuperLearner, ensemble\n     Model:\n         Y ~  SL.glm_All + SL.glm.interaction_All + SL.mean_All\n\n     Coefficients: \n          SL.glm_All    0.9957924 \n     SL.glm.interaction_All    0 \n         SL.mean_All    0.004207594 \n\n     Cross-validated R squared :  0.4834 \n\n Estimation of g (treatment mechanism)\n     Procedure: SuperLearner, ensemble\n     Model:\n         A ~  SL.glm_All + SL.glm.interaction_All + SL.mean_All \n\n     Coefficients: \n          SL.glm_All    0.9310662 \n     SL.glm.interaction_All    0 \n         SL.mean_All    0.06893379 \n\n Estimation of g.Z (intermediate variable assignment mechanism)\n     Procedure: No intermediate variable \n\n Estimation of g.Delta (missingness mechanism)\n     Procedure: No missingness, ensemble\n\n Bounds on g: (0.036, 1) \n\n Bounds on g for ATT/ATC: (0.036, 0.964) \n\n Marginal Mean under Treatment (EY1)\n   Parameter Estimate:  2.2484\n   Estimated Variance:  0.0055793\n              p-value:  &lt;2e-16\n    95% Conf Interval:  (2.102, 2.3948)\n\n Marginal Mean under Comparator (EY0)\n   Parameter Estimate:  1.795\n   Estimated Variance:  0.0063041\n              p-value:  &lt;2e-16\n    95% Conf Interval:  (1.6394, 1.9506)\n\n Additive Effect\n   Parameter Estimate:  0.45338\n   Estimated Variance:  0.0085484\n              p-value:  9.4086e-07\n    95% Conf Interval:  (0.27216, 0.63459)\n\n Additive Effect among the Treated\n   Parameter Estimate:  0.44014\n   Estimated Variance:  0.0089029\n              p-value:  3.0906e-06\n    95% Conf Interval:  (0.25521, 0.62507)\n\n Additive Effect among the Controls\n   Parameter Estimate:  0.4676\n   Estimated Variance:  0.0092589\n              p-value:  1.1769e-06\n    95% Conf Interval:  (0.279, 0.65619)\n\n\n\n\nä½¿ç”¨æ›´å¤æ‚çš„ç®—æ³•åº“\n\n# æ›´ä¸°å¯Œçš„ç®—æ³•åº“ï¼ˆéœ€è¦å®‰è£…ç›¸åº”åŒ…ï¼‰\nSL_library_full &lt;- c(\n    \"SL.glm\",\n    \"SL.glm.interaction\",\n    \"SL.step\",\n    \"SL.mean\"\n)\n\nresult_full &lt;- tmle(\n    Y = obs_data$Y,\n    A = obs_data$A,\n    W = W,\n    family = \"gaussian\",\n    Q.SL.library = SL_library_full,\n    g.SL.library = SL_library_full\n)\n\ncat(\"\\nä½¿ç”¨æ‰©å±•SuperLearneråº“çš„ç»“æœ:\\n\")\n\n\nä½¿ç”¨æ‰©å±•SuperLearneråº“çš„ç»“æœ:\n\nsummary(result_full)\n\n Initial estimation of Q\n     Procedure: cv-SuperLearner, ensemble\n     Model:\n         Y ~  SL.glm_All + SL.glm.interaction_All + SL.step_All + SL.mean_All\n\n     Coefficients: \n          SL.glm_All    0.7876579 \n     SL.glm.interaction_All    0.2039826 \n         SL.step_All    0 \n         SL.mean_All    0.008359432 \n\n     Cross-validated R squared :  0.4821 \n\n Estimation of g (treatment mechanism)\n     Procedure: SuperLearner, ensemble\n     Model:\n         A ~  SL.glm_All + SL.glm.interaction_All + SL.step_All + SL.mean_All \n\n     Coefficients: \n          SL.glm_All    0.8933107 \n     SL.glm.interaction_All    0 \n         SL.step_All    0 \n         SL.mean_All    0.1066893 \n\n Estimation of g.Z (intermediate variable assignment mechanism)\n     Procedure: No intermediate variable \n\n Estimation of g.Delta (missingness mechanism)\n     Procedure: No missingness, ensemble\n\n Bounds on g: (0.036, 1) \n\n Bounds on g for ATT/ATC: (0.036, 0.964) \n\n Marginal Mean under Treatment (EY1)\n   Parameter Estimate:  2.2495\n   Estimated Variance:  0.0055429\n              p-value:  &lt;2e-16\n    95% Conf Interval:  (2.1036, 2.3954)\n\n Marginal Mean under Comparator (EY0)\n   Parameter Estimate:  1.7925\n   Estimated Variance:  0.0062482\n              p-value:  &lt;2e-16\n    95% Conf Interval:  (1.6375, 1.9474)\n\n Additive Effect\n   Parameter Estimate:  0.45701\n   Estimated Variance:  0.0084877\n              p-value:  7.028e-07\n    95% Conf Interval:  (0.27644, 0.63758)\n\n Additive Effect among the Treated\n   Parameter Estimate:  0.44577\n   Estimated Variance:  0.0087866\n              p-value:  1.979e-06\n    95% Conf Interval:  (0.26205, 0.62949)\n\n Additive Effect among the Controls\n   Parameter Estimate:  0.47176\n   Estimated Variance:  0.0091523\n              p-value:  8.1686e-07\n    95% Conf Interval:  (0.28426, 0.65927)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬å››éƒ¨åˆ†äºŒåˆ†ç±»ç»“æœ",
    "href": "1065-tmle-doubly-robust.html#ç¬¬å››éƒ¨åˆ†äºŒåˆ†ç±»ç»“æœ",
    "title": "TMLE åŒé‡ç¨³å¥å› æœæ¨æ–­å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šäºŒåˆ†ç±»ç»“æœ",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šäºŒåˆ†ç±»ç»“æœ\n\né£é™©å·®ã€é£é™©æ¯”å’Œä¼˜åŠ¿æ¯”\n\n# åˆ›å»ºäºŒåˆ†ç±»ç»“æœ\nY_binary &lt;- ifelse(obs_data$Y &gt; median(obs_data$Y), 1, 0)\n\n# äºŒåˆ†ç±»TMLE\nresult_binary &lt;- tmle(\n    Y = Y_binary,\n    A = obs_data$A,\n    W = W,\n    family = \"binomial\"\n)\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\n\nError : Loading required package dbarts failed\n\nsummary(result_binary)\n\n Initial estimation of Q\n     Procedure: cv-SuperLearner, ensemble\n     Model:\n         Y ~  SL.glm_All + tmle.SL.dbarts2_All + SL.glmnet_All\n\n     Coefficients: \n          SL.glm_All    1 \n     tmle.SL.dbarts2_All    0 \n       SL.glmnet_All    0 \n\n     Cross-validated pseudo R squared :  0.2631 \n\n Estimation of g (treatment mechanism)\n     Procedure: SuperLearner, ensemble\n     Model:\n         A ~  SL.glm_All + tmle.SL.dbarts.k.5_All + SL.gam_All \n\n     Coefficients: \n          SL.glm_All    1 \n     tmle.SL.dbarts.k.5_All    0 \n          SL.gam_All    0 \n\n Estimation of g.Z (intermediate variable assignment mechanism)\n     Procedure: No intermediate variable \n\n Estimation of g.Delta (missingness mechanism)\n     Procedure: No missingness, ensemble\n\n Bounds on g: (0.036, 1) \n\n Bounds on g for ATT/ATC: (0.036, 0.964) \n\n Marginal Mean under Treatment (EY1)\n   Parameter Estimate:  0.55592\n   Estimated Variance:  0.0008165\n              p-value:  &lt;2e-16\n    95% Conf Interval:  (0.49991, 0.61192)\n\n Marginal Mean under Comparator (EY0)\n   Parameter Estimate:  0.42854\n   Estimated Variance:  0.00090026\n              p-value:  &lt;2e-16\n    95% Conf Interval:  (0.36973, 0.48735)\n\n Additive Effect\n   Parameter Estimate:  0.12737\n   Estimated Variance:  0.0014383\n              p-value:  0.00078342\n    95% Conf Interval:  (0.053042, 0.2017)\n\n Additive Effect among the Treated\n   Parameter Estimate:  0.13582\n   Estimated Variance:  0.0014258\n              p-value:  0.00032184\n    95% Conf Interval:  (0.061815, 0.20983)\n\n Additive Effect among the Controls\n   Parameter Estimate:  0.11806\n   Estimated Variance:  0.0015509\n              p-value:  0.0027195\n    95% Conf Interval:  (0.040871, 0.19524)\n\n Relative Risk\n   Parameter  Estimate:  1.2972\n   Variance(log scale):  0.0063751\n               p-value:  0.0011174\n     95% Conf Interval:  (1.1093, 1.517)\n\n Odds Ratio\n    Parameter  Estimate:  1.6693\n    Variance(log scale):  0.023802\n                p-value:  0.00089605\n      95% Conf Interval:  (1.2337, 2.2587)\n\n\n\n\næå–å„ç±»æ•ˆåº”é‡\n\n# é£é™©å·® (Risk Difference)\nrd &lt;- result_binary$estimates$ATE\ncat(\n    \"é£é™©å·® (RD):\", round(rd$psi, 4),\n    \"95% CI [\", round(rd$CI[1], 4), \",\", round(rd$CI[2], 4), \"]\\n\"\n)\n\né£é™©å·® (RD): 0.1274 95% CI [ 0.053 , 0.2017 ]\n\n# é£é™©æ¯” (Relative Risk)\nrr &lt;- result_binary$estimates$RR\ncat(\n    \"é£é™©æ¯” (RR):\", round(rr$psi, 4),\n    \"95% CI [\", round(rr$CI[1], 4), \",\", round(rr$CI[2], 4), \"]\\n\"\n)\n\né£é™©æ¯” (RR): 1.2972 95% CI [ 1.1093 , 1.517 ]\n\n# ä¼˜åŠ¿æ¯” (Odds Ratio)\nor &lt;- result_binary$estimates$OR\ncat(\n    \"ä¼˜åŠ¿æ¯” (OR):\", round(or$psi, 4),\n    \"95% CI [\", round(or$CI[1], 4), \",\", round(or$CI[2], 4), \"]\\n\"\n)\n\nä¼˜åŠ¿æ¯” (OR): 1.6693 95% CI [ 1.2337 , 2.2587 ]",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬äº”éƒ¨åˆ†aipwä¼°è®¡é‡",
    "href": "1065-tmle-doubly-robust.html#ç¬¬äº”éƒ¨åˆ†aipwä¼°è®¡é‡",
    "title": "TMLE åŒé‡ç¨³å¥å› æœæ¨æ–­å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šAIPWä¼°è®¡é‡",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šAIPWä¼°è®¡é‡\nAIPWï¼ˆAugmented Inverse Probability Weightingï¼‰æ˜¯å¦ä¸€ç§åŒé‡ç¨³å¥ä¼°è®¡æ–¹æ³•ã€‚\n\næ‰‹åŠ¨å®ç°AIPW\n\n# AIPWä¼°è®¡å‡½æ•°\nestimate_aipw &lt;- function(Y, A, W) {\n    # æ‹Ÿåˆå€¾å‘å¾—åˆ†æ¨¡å‹\n    ps_model &lt;- glm(A ~ ., data = cbind(A = A, W), family = binomial)\n    ps &lt;- predict(ps_model, type = \"response\")\n\n    # æ‹Ÿåˆç»“æœæ¨¡å‹\n    outcome_model &lt;- lm(Y ~ A + ., data = cbind(Y = Y, A = A, W))\n\n    # é¢„æµ‹æ½œåœ¨ç»“æœ\n    W_A1 &lt;- cbind(A = 1, W)\n    W_A0 &lt;- cbind(A = 0, W)\n    Q1 &lt;- predict(outcome_model, newdata = W_A1)\n    Q0 &lt;- predict(outcome_model, newdata = W_A0)\n\n    # AIPWä¼°è®¡é‡\n    aipw1 &lt;- mean(Q1 + A / ps * (Y - Q1))\n    aipw0 &lt;- mean(Q0 + (1 - A) / (1 - ps) * (Y - Q0))\n    ate_aipw &lt;- aipw1 - aipw0\n\n    # å½±å“å‡½æ•°ç”¨äºæ–¹å·®ä¼°è®¡\n    IF &lt;- (Q1 - Q0) + A / ps * (Y - Q1) - (1 - A) / (1 - ps) * (Y - Q0) - ate_aipw\n    se &lt;- sqrt(var(IF) / length(Y))\n\n    list(\n        ATE = ate_aipw,\n        SE = se,\n        CI = c(ate_aipw - 1.96 * se, ate_aipw + 1.96 * se)\n    )\n}\n\n# è®¡ç®—AIPWä¼°è®¡\naipw_result &lt;- estimate_aipw(obs_data$Y, obs_data$A, W)\ncat(\"\\nAIPW ä¼°è®¡ç»“æœ:\\n\")\n\n\nAIPW ä¼°è®¡ç»“æœ:\n\ncat(\"  ATE:\", round(aipw_result$ATE, 4), \"\\n\")\n\n  ATE: 0.453 \n\ncat(\"  SE:\", round(aipw_result$SE, 4), \"\\n\")\n\n  SE: 0.0928 \n\ncat(\n    \"  95% CI: [\", round(aipw_result$CI[1], 4), \",\",\n    round(aipw_result$CI[2], 4), \"]\\n\"\n)\n\n  95% CI: [ 0.2711 , 0.6348 ]",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬å…­éƒ¨åˆ†æ–¹æ³•æ¯”è¾ƒ",
    "href": "1065-tmle-doubly-robust.html#ç¬¬å…­éƒ¨åˆ†æ–¹æ³•æ¯”è¾ƒ",
    "title": "TMLE åŒé‡ç¨³å¥å› æœæ¨æ–­å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šæ–¹æ³•æ¯”è¾ƒ",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šæ–¹æ³•æ¯”è¾ƒ\n\nå¤šç§ä¼°è®¡æ–¹æ³•å¯¹æ¯”\n\n# 1. ç®€å•å·®å¼‚\nsimple_diff &lt;- mean(obs_data$Y[obs_data$A == 1]) -\n    mean(obs_data$Y[obs_data$A == 0])\n\n# 2. å›å½’è°ƒæ•´\nreg_model &lt;- lm(Y ~ A + W1 + W2 + W3, data = obs_data)\nreg_ate &lt;- coef(reg_model)[\"A\"]\n\n# 3. IPW\nps_model &lt;- glm(A ~ W1 + W2 + W3, data = obs_data, family = binomial)\nps &lt;- predict(ps_model, type = \"response\")\nweights &lt;- obs_data$A / ps + (1 - obs_data$A) / (1 - ps)\nipw_ate &lt;- weighted.mean(\n    obs_data$Y * (2 * obs_data$A - 1),\n    weights * (2 * obs_data$A - 1)\n)\n\n# 4. TMLE\ntmle_ate &lt;- result$estimates$ATE$psi\n\n# 5. AIPW\naipw_ate &lt;- aipw_result$ATE\n\n# æ±‡æ€»æ¯”è¾ƒ\ncomparison &lt;- data.frame(\n    Method = c(\"ç®€å•å·®å¼‚\", \"å›å½’è°ƒæ•´\", \"IPW\", \"AIPW\", \"TMLE\"),\n    ATE = c(simple_diff, reg_ate, ipw_ate, aipw_ate, tmle_ate),\n    True = rep(0.5, 5) # çœŸå®æ•ˆåº”\n)\n\n# å¯è§†åŒ–\nggplot(comparison, aes(x = Method, y = ATE)) +\n    geom_point(size = 4, color = \"#4f46e5\") +\n    geom_hline(yintercept = 0.5, linetype = \"dashed\", color = \"red\") +\n    annotate(\"text\", x = 5.3, y = 0.5, label = \"çœŸå®ATE\", color = \"red\") +\n    labs(\n        title = \"ä¸åŒå› æœæ¨æ–­æ–¹æ³•çš„ATEä¼°è®¡æ¯”è¾ƒ\",\n        y = \"ATEä¼°è®¡å€¼\"\n    ) +\n    theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n    ylim(0, 1)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬ä¸ƒéƒ¨åˆ†è¯Šæ–­ä¸æ£€éªŒ",
    "href": "1065-tmle-doubly-robust.html#ç¬¬ä¸ƒéƒ¨åˆ†è¯Šæ–­ä¸æ£€éªŒ",
    "title": "TMLE åŒé‡ç¨³å¥å› æœæ¨æ–­å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šè¯Šæ–­ä¸æ£€éªŒ",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šè¯Šæ–­ä¸æ£€éªŒ\n\nå€¾å‘å¾—åˆ†è¯Šæ–­\n\n# å€¾å‘å¾—åˆ†åˆ†å¸ƒ\nps_df &lt;- data.frame(\n    PS = ps,\n    Treatment = factor(obs_data$A, labels = c(\"å¯¹ç…§\", \"æ²»ç–—\"))\n)\n\nggplot(ps_df, aes(x = PS, fill = Treatment)) +\n    geom_density(alpha = 0.5) +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#ef4444\")) +\n    labs(\n        title = \"å€¾å‘å¾—åˆ†åˆ†å¸ƒï¼ˆæŒ‰æ²»ç–—ç»„ï¼‰\",\n        x = \"å€¾å‘å¾—åˆ†\", y = \"å¯†åº¦\"\n    ) +\n    geom_vline(xintercept = c(0.1, 0.9), linetype = \"dashed\")\n\n\n\n\n\n\n\n\n\n\næ­£ä½æ€§æ£€æŸ¥\n\n# æ£€æŸ¥æç«¯å€¾å‘å¾—åˆ†\ncat(\"å€¾å‘å¾—åˆ†ç»Ÿè®¡:\\n\")\n\nå€¾å‘å¾—åˆ†ç»Ÿè®¡:\n\ncat(\"  æœ€å°å€¼:\", round(min(ps), 4), \"\\n\")\n\n  æœ€å°å€¼: 0.1914 \n\ncat(\"  æœ€å¤§å€¼:\", round(max(ps), 4), \"\\n\")\n\n  æœ€å¤§å€¼: 0.8601 \n\ncat(\"  PS &lt; 0.05 çš„æ¯”ä¾‹:\", mean(ps &lt; 0.05), \"\\n\")\n\n  PS &lt; 0.05 çš„æ¯”ä¾‹: 0 \n\ncat(\"  PS &gt; 0.95 çš„æ¯”ä¾‹:\", mean(ps &gt; 0.95), \"\\n\")\n\n  PS &gt; 0.95 çš„æ¯”ä¾‹: 0",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬å…«éƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "href": "1065-tmle-doubly-robust.html#ç¬¬å…«éƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "title": "TMLE åŒé‡ç¨³å¥å› æœæ¨æ–­å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…«éƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬å…«éƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹\n\nå®Œæ•´å·¥ä½œæµç¨‹\n\n# ä½¿ç”¨æ›´æ¥è¿‘çœŸå®çš„æ¨¡æ‹Ÿæ•°æ®\nset.seed(123)\nn &lt;- 1000\n\n# æ¨¡æ‹Ÿæ··æ‚ç»“æ„\nage &lt;- rnorm(n, 50, 10)\ngender &lt;- rbinom(n, 1, 0.5)\nbmi &lt;- rnorm(n, 25, 4)\nsmoking &lt;- rbinom(n, 1, plogis(-1 + 0.02 * age + 0.3 * gender))\n\n# æ²»ç–—åˆ†é…ï¼ˆå—æ··æ‚å½±å“ï¼‰\nprob_treat &lt;- plogis(-2 + 0.03 * age - 0.5 * gender + 0.05 * bmi + 0.8 * smoking)\ntreatment &lt;- rbinom(n, 1, prob_treat)\n\n# ç»“æœï¼ˆå—æ²»ç–—å’Œæ··æ‚å½±å“ï¼‰\noutcome &lt;- 50 - 5 * treatment + 0.3 * age - 2 * gender + 0.5 * bmi + 3 * smoking + rnorm(n, 0, 5)\n\ncase_data &lt;- data.frame(\n    outcome = outcome,\n    treatment = treatment,\n    age = age,\n    gender = gender,\n    bmi = bmi,\n    smoking = smoking\n)\n\ncat(\"\\n=== æ•°æ®æ¦‚è§ˆ ===\\n\")\n\n\n=== æ•°æ®æ¦‚è§ˆ ===\n\ncat(\"æ ·æœ¬é‡:\", n, \"\\n\")\n\næ ·æœ¬é‡: 1000 \n\ncat(\"æ²»ç–—ç»„æ¯”ä¾‹:\", mean(treatment), \"\\n\")\n\næ²»ç–—ç»„æ¯”ä¾‹: 0.721 \n\n\n\n# TMLEåˆ†æ\nW_case &lt;- case_data[, c(\"age\", \"gender\", \"bmi\", \"smoking\")]\n\nresult_case &lt;- tmle(\n    Y = case_data$outcome,\n    A = case_data$treatment,\n    W = W_case,\n    family = \"gaussian\",\n    Q.SL.library = c(\"SL.glm\", \"SL.glm.interaction\"),\n    g.SL.library = c(\"SL.glm\", \"SL.glm.interaction\")\n)\n\ncat(\"\\n=== TMLE ç»“æœ ===\\n\")\n\n\n=== TMLE ç»“æœ ===\n\nsummary(result_case)\n\n Initial estimation of Q\n     Procedure: cv-SuperLearner, ensemble\n     Model:\n         Y ~  SL.glm_All + SL.glm.interaction_All\n\n     Coefficients: \n          SL.glm_All    1 \n     SL.glm.interaction_All    0 \n\n     Cross-validated R squared :  0.4189 \n\n Estimation of g (treatment mechanism)\n     Procedure: SuperLearner, ensemble\n     Model:\n         A ~  SL.glm_All + SL.glm.interaction_All \n\n     Coefficients: \n          SL.glm_All    1 \n     SL.glm.interaction_All    0 \n\n Estimation of g.Z (intermediate variable assignment mechanism)\n     Procedure: No intermediate variable \n\n Estimation of g.Delta (missingness mechanism)\n     Procedure: No missingness, ensemble\n\n Bounds on g: (0.0229, 1) \n\n Bounds on g for ATT/ATC: (0.0229, 0.9771) \n\n Marginal Mean under Treatment (EY1)\n   Parameter Estimate:  73.101\n   Estimated Variance:  0.05401\n              p-value:  &lt;2e-16\n    95% Conf Interval:  (72.646, 73.557)\n\n Marginal Mean under Comparator (EY0)\n   Parameter Estimate:  77.915\n   Estimated Variance:  0.12937\n              p-value:  &lt;2e-16\n    95% Conf Interval:  (77.21, 78.62)\n\n Additive Effect\n   Parameter Estimate:  -4.8134\n   Estimated Variance:  0.1447\n              p-value:  &lt;2e-16\n    95% Conf Interval:  (-5.559, -4.0679)\n\n Additive Effect among the Treated\n   Parameter Estimate:  -4.8538\n   Estimated Variance:  0.16322\n              p-value:  &lt;2e-16\n    95% Conf Interval:  (-5.6456, -4.062)\n\n Additive Effect among the Controls\n   Parameter Estimate:  -4.6613\n   Estimated Variance:  0.12896\n              p-value:  &lt;2e-16\n    95% Conf Interval:  (-5.3651, -3.9574)\n\n\n\ncat(\"\\n=== çœŸå®æ•ˆåº” vs ä¼°è®¡æ•ˆåº” ===\\n\")\n\n\n=== çœŸå®æ•ˆåº” vs ä¼°è®¡æ•ˆåº” ===\n\ncat(\"çœŸå® ATE: -5\\n\")\n\nçœŸå® ATE: -5\n\ncat(\"TMLE ATE:\", round(result_case$estimates$ATE$psi, 3), \"\\n\")\n\nTMLE ATE: -4.813 \n\ncat(\"åå·®:\", round(result_case$estimates$ATE$psi - (-5), 3), \"\\n\")\n\nåå·®: 0.187",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "1065-tmle-doubly-robust.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "TMLE åŒé‡ç¨³å¥å› æœæ¨æ–­å®Œå…¨æŒ‡å—",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# ===== åŸºç¡€TMLE =====\nlibrary(tmle)\nresult &lt;- tmle(Y = Y, A = A, W = W, family = \"gaussian\")\nsummary(result)\n\n# ===== æå–ç»“æœ =====\nresult$estimates$ATE$psi # ç‚¹ä¼°è®¡\nresult$estimates$ATE$CI # ç½®ä¿¡åŒºé—´\nresult$estimates$ATE$pvalue # På€¼\n\n# ===== äºŒåˆ†ç±»ç»“æœ =====\nresult &lt;- tmle(Y = Y_binary, A = A, W = W, family = \"binomial\")\nresult$estimates$RR # é£é™©æ¯”\nresult$estimates$OR # ä¼˜åŠ¿æ¯”\n\n# ===== ä½¿ç”¨SuperLearner =====\nresult &lt;- tmle(\n    Y = Y, A = A, W = W,\n    Q.SL.library = c(\"SL.glm\", \"SL.ranger\"),\n    g.SL.library = c(\"SL.glm\", \"SL.ranger\")\n)\n\n# ===== AIPWï¼ˆä½¿ç”¨å…¶ä»–åŒ…ï¼‰ =====\n# library(AIPW)\n# aipw &lt;- AIPW$new(Y, A, W, ...)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#å°ç»“",
    "href": "1065-tmle-doubly-robust.html#å°ç»“",
    "title": "TMLE åŒé‡ç¨³å¥å› æœæ¨æ–­å®Œå…¨æŒ‡å—",
    "section": "å°ç»“",
    "text": "å°ç»“\nTMLE vs å…¶ä»–æ–¹æ³•ï¼š\n\n\n\nç‰¹ç‚¹\nTMLE\nIPW\nå›å½’\n\n\n\n\nåŒé‡ç¨³å¥\nâœ…\nâŒ\nâŒ\n\n\næ•´åˆML\nâœ…\néƒ¨åˆ†\néƒ¨åˆ†\n\n\nèŒƒå›´çº¦æŸ\nâœ…\nâŒ\nâŒ\n\n\næ•ˆç‡\né«˜\nè¾ƒä½\nä¸­\n\n\n\n\nå»ºè®®ï¼šåœ¨è§‚å¯Ÿæ€§ç ”ç©¶ä¸­ä¼°è®¡å› æœæ•ˆåº”æ—¶ï¼ŒTMLEæ˜¯é¦–é€‰æ–¹æ³•ï¼Œå°¤å…¶å½“æ ·æœ¬é‡è¾ƒå¤§ä¸”åå˜é‡è¾ƒå¤šæ—¶ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#å‚è€ƒèµ„æº",
    "href": "1065-tmle-doubly-robust.html#å‚è€ƒèµ„æº",
    "title": "TMLE åŒé‡ç¨³å¥å› æœæ¨æ–­å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\ntlverse é¡¹ç›®\nTargeted Learning (van der Laan & Rose)\nA Beginnerâ€™s Guide to TMLE\ntmle RåŒ…æ–‡æ¡£",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#causalimpact-ç®€ä»‹",
    "href": "1065-tmle-doubly-robust.html#causalimpact-ç®€ä»‹",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "CausalImpact ç®€ä»‹",
    "text": "CausalImpact ç®€ä»‹\nCausalImpact æ˜¯Googleå¼€å‘çš„RåŒ…ï¼Œä½¿ç”¨è´å¶æ–¯ç»“æ„æ—¶é—´åºåˆ—æ¨¡å‹æ¥ä¼°è®¡å¹²é¢„å¯¹æ—¶é—´åºåˆ—çš„å› æœæ•ˆåº”ã€‚å®ƒè§£å†³äº†ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼šå¦‚æœæ²¡æœ‰å¹²é¢„ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\n\nåº”ç”¨åœºæ™¯\n\n\n\né¢†åŸŸ\nåº”ç”¨ç¤ºä¾‹\n\n\n\n\nå…¬å…±å«ç”Ÿ\næ”¿ç­–å®æ–½å¯¹ç–¾ç—…å‘ç—…ç‡çš„å½±å“\n\n\nè¥é”€\nå¹¿å‘Šæ´»åŠ¨å¯¹é”€å”®çš„å½±å“\n\n\nç»æµå­¦\næ”¿ç­–å¹²é¢„å¯¹ç»æµæŒ‡æ ‡çš„å½±å“\n\n\näº§å“\nåŠŸèƒ½ä¸Šçº¿å¯¹ç”¨æˆ·è¡Œä¸ºçš„å½±å“\n\n\n\n\n\næ ¸å¿ƒåŸç†\nCausalImpacté€šè¿‡ä»¥ä¸‹æ­¥éª¤å·¥ä½œï¼š 1. ä½¿ç”¨æœªå—å¹²é¢„çš„å¯¹ç…§åºåˆ—é¢„æµ‹å¹²é¢„åçš„åäº‹å® 2. æ¯”è¾ƒå®é™…è§‚æµ‹å€¼ä¸åäº‹å®é¢„æµ‹ 3. é‡åŒ–å·®å¼‚å¹¶æä¾›ä¸ç¡®å®šæ€§ä¼°è®¡",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#å®‰è£…ä¸åŠ è½½-1",
    "href": "1065-tmle-doubly-robust.html#å®‰è£…ä¸åŠ è½½-1",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\nlibrary(CausalImpact)\nlibrary(ggplot2)\nlibrary(dplyr)\n\ntheme_set(theme_bw(base_size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬ä¸€éƒ¨åˆ†åŸºç¡€ç”¨æ³•",
    "href": "1065-tmle-doubly-robust.html#ç¬¬ä¸€éƒ¨åˆ†åŸºç¡€ç”¨æ³•",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€ç”¨æ³•",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€ç”¨æ³•\n\næ¨¡æ‹Ÿæ•°æ®åˆ›å»º\n# åˆ›å»ºæ¨¡æ‹Ÿæ—¶é—´åºåˆ—æ•°æ®\nset.seed(42)\nn &lt;- 100 # æ—¶é—´ç‚¹æ•°\nintervention_point &lt;- 70 # å¹²é¢„å‘ç”Ÿç‚¹\n\n# ç”Ÿæˆå¯¹ç…§åºåˆ—ï¼ˆæœªå—å¹²é¢„å½±å“ï¼‰\nx1 &lt;- 10 + arima.sim(model = list(ar = 0.8), n = n)\nx2 &lt;- 20 + arima.sim(model = list(ar = 0.7), n = n)\n\n# ç”Ÿæˆç›®æ ‡åºåˆ—\n# å¹²é¢„å‰ï¼šä¸å¯¹ç…§åºåˆ—ç›¸å…³\n# å¹²é¢„åï¼šå¢åŠ æ•ˆåº”\ny &lt;- 1.5 * x1 + 0.5 * x2 + rnorm(n, 0, 2)\n# æ·»åŠ å¹²é¢„æ•ˆåº”\ny[(intervention_point + 1):n] &lt;- y[(intervention_point + 1):n] + 5\n\n# åˆ›å»ºæ—¶é—´ç´¢å¼•\ntime_points &lt;- seq.Date(as.Date(\"2024-01-01\"), by = \"day\", length.out = n)\n\n# ç»„åˆæ•°æ®\ndata &lt;- zoo::zoo(cbind(y = y, x1 = x1, x2 = x2), time_points)\nhead(data)\n\n\nè¿è¡ŒCausalImpact\n# å®šä¹‰å¹²é¢„å‰åæ—¶æœŸ\npre_period &lt;- c(time_points[1], time_points[intervention_point])\npost_period &lt;- c(time_points[intervention_point + 1], time_points[n])\n\n# è¿è¡Œåˆ†æ\nimpact &lt;- CausalImpact(data, pre_period, post_period)\n\n# æŸ¥çœ‹ç»“æœ\nsummary(impact)\n\n\nç»“æœå¯è§†åŒ–\n# é»˜è®¤ä¸‰å›¾é¢æ¿\nplot(impact)\n\n\nè§£è¯»è¾“å‡º\n# è·å–æŠ¥å‘Š\nsummary(impact, \"report\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬äºŒéƒ¨åˆ†ç†è§£è¾“å‡ºå›¾å½¢",
    "href": "1065-tmle-doubly-robust.html#ç¬¬äºŒéƒ¨åˆ†ç†è§£è¾“å‡ºå›¾å½¢",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šç†è§£è¾“å‡ºå›¾å½¢",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šç†è§£è¾“å‡ºå›¾å½¢\n\nä¸‰ä¸ªé¢æ¿è§£è¯»\n# å•ç‹¬ç»˜åˆ¶æ¯ä¸ªé¢æ¿\nplot(impact, \"original\") # åŸå§‹æ•°æ® vs åäº‹å®é¢„æµ‹\nOriginal é¢æ¿ï¼š - é»‘çº¿ï¼šå®é™…è§‚æµ‹å€¼ - è“è‰²è™šçº¿ï¼šåäº‹å®é¢„æµ‹ï¼ˆå¦‚æœæ²¡æœ‰å¹²é¢„ä¼šå‘ç”Ÿä»€ä¹ˆï¼‰ - æµ…è“åŒºåŸŸï¼šé¢„æµ‹çš„95%ç½®ä¿¡åŒºé—´\nplot(impact, \"pointwise\") # é€ç‚¹æ•ˆåº”\nPointwise é¢æ¿ï¼š - æ˜¾ç¤ºæ¯ä¸ªæ—¶é—´ç‚¹çš„å› æœæ•ˆåº”ï¼ˆå®é™… - é¢„æµ‹ï¼‰ - æ•ˆåº”åœ¨é›¶çº¿ä»¥ä¸Šè¡¨ç¤ºæ­£å‘å½±å“\nplot(impact, \"cumulative\") # ç´¯ç§¯æ•ˆåº”\nCumulative é¢æ¿ï¼š - æ˜¾ç¤ºå¹²é¢„åçš„ç´¯ç§¯å› æœæ•ˆåº” - ç”¨äºè¯„ä¼°æ€»ä½“å½±å“",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬ä¸‰éƒ¨åˆ†å…³é”®ç»“æœè§£è¯»",
    "href": "1065-tmle-doubly-robust.html#ç¬¬ä¸‰éƒ¨åˆ†å…³é”®ç»“æœè§£è¯»",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šå…³é”®ç»“æœè§£è¯»",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šå…³é”®ç»“æœè§£è¯»\n\næå–æ•°å€¼ç»“æœ\n# è·å–æ‘˜è¦ç»Ÿè®¡\nimpact_summary &lt;- impact$summary\n\ncat(\"=== å¹²é¢„æ•ˆåº”æ‘˜è¦ ===\\n\\n\")\ncat(\"å¹³å‡å› æœæ•ˆåº”:\\n\")\ncat(\"  ç»å¯¹æ•ˆåº”:\", round(impact_summary$AbsEffect[1], 2), \"\\n\")\ncat(\"  ç›¸å¯¹æ•ˆåº”:\", round(impact_summary$RelEffect[1] * 100, 1), \"%\\n\")\ncat(\n    \"  95% CI: [\", round(impact_summary$AbsEffect.lower[1], 2),\n    \",\", round(impact_summary$AbsEffect.upper[1], 2), \"]\\n\\n\"\n)\n\ncat(\"ç´¯ç§¯å› æœæ•ˆåº”:\\n\")\ncat(\"  ç»å¯¹æ•ˆåº”:\", round(impact_summary$AbsEffect[2], 2), \"\\n\")\ncat(\"  ç›¸å¯¹æ•ˆåº”:\", round(impact_summary$RelEffect[2] * 100, 1), \"%\\n\")\n\n\nç»Ÿè®¡æ˜¾è‘—æ€§\n# è´å¶æ–¯åéªŒæ¦‚ç‡\ncat(\"\\nå¹²é¢„æ•ˆåº”çš„åéªŒæ¦‚ç‡:\\n\")\ncat(\"  P(æ•ˆåº” &gt; 0):\", round(impact$summary$p[1], 4), \"\\n\")\n\nif (impact$summary$p[1] &lt; 0.05) {\n    cat(\"  ç»“è®º: å¹²é¢„æ•ˆåº”åœ¨5%æ°´å¹³ä¸Šæ˜¾è‘—\\n\")\n} else {\n    cat(\"  ç»“è®º: æ— æ³•æ’é™¤æ— æ•ˆåº”çš„å¯èƒ½æ€§\\n\")\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬å››éƒ¨åˆ†æ¨¡å‹é…ç½®",
    "href": "1065-tmle-doubly-robust.html#ç¬¬å››éƒ¨åˆ†æ¨¡å‹é…ç½®",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šæ¨¡å‹é…ç½®",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šæ¨¡å‹é…ç½®\n\nè‡ªå®šä¹‰æ¨¡å‹å‚æ•°\n# è‡ªå®šä¹‰æ¨¡å‹å‚æ•°\nmodel_args &lt;- list(\n    niter = 5000, # MCMCè¿­ä»£æ¬¡æ•°\n    nseasons = 7, # å­£èŠ‚æ€§å‘¨æœŸï¼ˆå¦‚å‘¨æ•ˆåº”ï¼‰\n    season.duration = 1 # æ¯ä¸ªå­£èŠ‚çš„æŒç»­æ—¶é—´\n)\n\nimpact_custom &lt;- CausalImpact(data, pre_period, post_period,\n    model.args = model_args\n)\nsummary(impact_custom)\n\n\nä¸ä½¿ç”¨å¯¹ç…§åºåˆ—\n# åªä½¿ç”¨ç›®æ ‡åºåˆ—æœ¬èº«çš„å†å²æ¨¡å¼\ndata_single &lt;- zoo::zoo(y, time_points)\n\nimpact_single &lt;- CausalImpact(data_single, pre_period, post_period)\nplot(impact_single)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬äº”éƒ¨åˆ†è¯Šæ–­ä¸éªŒè¯",
    "href": "1065-tmle-doubly-robust.html#ç¬¬äº”éƒ¨åˆ†è¯Šæ–­ä¸éªŒè¯",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šè¯Šæ–­ä¸éªŒè¯",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šè¯Šæ–­ä¸éªŒè¯\n\næ¨¡å‹è¯Šæ–­\n# æ£€æŸ¥æ¨¡å‹æ‹Ÿåˆ\n# æå–é¢„æµ‹å€¼\nfitted_values &lt;- impact$series$point.pred\n\n# å¹²é¢„å‰æ‹Ÿåˆæƒ…å†µ\npre_actual &lt;- as.numeric(data[1:intervention_point, \"y\"])\npre_fitted &lt;- as.numeric(fitted_values[1:intervention_point])\n\n# è®¡ç®—æ‹Ÿåˆä¼˜åº¦\nrsq &lt;- cor(pre_actual, pre_fitted)^2\nrmse &lt;- sqrt(mean((pre_actual - pre_fitted)^2))\n\ncat(\"å¹²é¢„å‰æ¨¡å‹è¯Šæ–­:\\n\")\ncat(\"  RÂ²:\", round(rsq, 4), \"\\n\")\ncat(\"  RMSE:\", round(rmse, 4), \"\\n\")\n\n\næ®‹å·®æ£€éªŒ\n# å¹²é¢„å‰æ®‹å·®\nresiduals_pre &lt;- pre_actual - pre_fitted\n\n# æ®‹å·®å›¾\npar(mfrow = c(1, 2))\nplot(residuals_pre, type = \"l\", main = \"æ®‹å·®åºåˆ—\", ylab = \"æ®‹å·®\")\nabline(h = 0, col = \"red\", lty = 2)\nacf(residuals_pre, main = \"æ®‹å·®ACF\")\npar(mfrow = c(1, 1))\n\n\nå®‰æ…°å‰‚æ£€éªŒ\n# åœ¨å¹²é¢„å‰æ—¶æœŸåš\"å‡\"å¹²é¢„æ£€éªŒ\nplacebo_point &lt;- 50\nplacebo_pre &lt;- c(time_points[1], time_points[placebo_point])\nplacebo_post &lt;- c(time_points[placebo_point + 1], time_points[intervention_point])\n\n# ä½¿ç”¨å¹²é¢„å‰æ•°æ®\ndata_placebo &lt;- data[1:intervention_point, ]\n\nimpact_placebo &lt;- CausalImpact(data_placebo, placebo_pre, placebo_post)\n\ncat(\"\\nå®‰æ…°å‰‚æ£€éªŒç»“æœ:\\n\")\ncat(\"  ä¼°è®¡æ•ˆåº”:\", round(impact_placebo$summary$AbsEffect[1], 2), \"\\n\")\ncat(\"  På€¼:\", round(impact_placebo$summary$p[1], 4), \"\\n\")\n\nif (impact_placebo$summary$p[1] &gt; 0.05) {\n    cat(\"  ç»“è®º: å®‰æ…°å‰‚æ£€éªŒé€šè¿‡ï¼ˆæ— è™šå‡æ•ˆåº”ï¼‰\\n\")\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬å…­éƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "href": "1065-tmle-doubly-robust.html#ç¬¬å…­éƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹\n\næ¡ˆä¾‹ï¼šæ”¿ç­–æ•ˆæœè¯„ä¼°\n# æ¨¡æ‹Ÿå…¬å…±å«ç”Ÿæ”¿ç­–æ•ˆæœ\nset.seed(123)\nn_days &lt;- 180\npolicy_start &lt;- 90\n\n# å¯¹ç…§åœ°åŒºï¼ˆæœªå®æ–½æ”¿ç­–ï¼‰\ncontrol_region &lt;- 100 + cumsum(rnorm(n_days, 0.1, 2))\n\n# ç›®æ ‡åœ°åŒº\n# æ”¿ç­–å‰ï¼šä¸å¯¹ç…§åœ°åŒºç›¸å…³\n# æ”¿ç­–åï¼šå‘ç—…ç‡ä¸‹é™\ntarget_region &lt;- 0.9 * control_region + rnorm(n_days, 0, 3)\n# æ”¿ç­–æ•ˆåº”ï¼šå‘ç—…ç‡é™ä½15%\ntarget_region[(policy_start + 1):n_days] &lt;-\n    target_region[(policy_start + 1):n_days] * 0.85\n\n# åˆ›å»ºæ•°æ®\ndates &lt;- seq.Date(as.Date(\"2025-01-01\"), by = \"day\", length.out = n_days)\npolicy_data &lt;- zoo::zoo(\n    cbind(target = target_region, control = control_region),\n    dates\n)\n\n# åˆ†æ\npre &lt;- c(dates[1], dates[policy_start])\npost &lt;- c(dates[policy_start + 1], dates[n_days])\n\nimpact_policy &lt;- CausalImpact(policy_data, pre, post)\n\ncat(\"=== æ”¿ç­–æ•ˆæœåˆ†æ ===\\n\")\nsummary(impact_policy)\n# å¯è§†åŒ–\nplot(impact_policy) +\n    ggtitle(\"å…¬å…±å«ç”Ÿæ”¿ç­–å¯¹å‘ç—…ç‡çš„å½±å“\")\n# è¯¦ç»†æŠ¥å‘Š\nsummary(impact_policy, \"report\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬ä¸ƒéƒ¨åˆ†ä¸itså¯¹æ¯”",
    "href": "1065-tmle-doubly-robust.html#ç¬¬ä¸ƒéƒ¨åˆ†ä¸itså¯¹æ¯”",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šä¸ITSå¯¹æ¯”",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šä¸ITSå¯¹æ¯”\n\nä¸­æ–­æ—¶é—´åºåˆ—åˆ†æï¼ˆITSï¼‰\n# ä¼ ç»ŸITSåˆ†æ\nits_data &lt;- data.frame(\n    time = 1:n,\n    y = as.numeric(y),\n    intervention = ifelse(1:n &gt; intervention_point, 1, 0),\n    time_after = ifelse(1:n &gt; intervention_point,\n        1:n - intervention_point, 0\n    )\n)\n\nits_model &lt;- lm(y ~ time + intervention + time_after, data = its_data)\nsummary(its_model)\n\n\nITS vs CausalImpact\n# æå–ä¸¤ç§æ–¹æ³•çš„æ•ˆåº”ä¼°è®¡\nits_effect &lt;- coef(its_model)[\"intervention\"]\nci_effect &lt;- impact$summary$AbsEffect[1]\n\ncomparison &lt;- data.frame(\n    Method = c(\"ITS\", \"CausalImpact\"),\n    Effect = c(its_effect, ci_effect),\n    True_Effect = c(5, 5)\n)\n\nggplot(comparison, aes(x = Method, y = Effect)) +\n    geom_col(fill = c(\"#4f46e5\", \"#10b981\"), alpha = 0.8) +\n    geom_hline(yintercept = 5, linetype = \"dashed\", color = \"red\") +\n    annotate(\"text\", x = 2.3, y = 5.2, label = \"çœŸå®æ•ˆåº”\", color = \"red\") +\n    labs(\n        title = \"ITS vs CausalImpact æ•ˆåº”ä¼°è®¡æ¯”è¾ƒ\",\n        y = \"ä¼°è®¡æ•ˆåº”\"\n    )\n\n\n\nç‰¹ç‚¹\nITS\nCausalImpact\n\n\n\n\nå¯¹ç…§åºåˆ—\nä¸éœ€è¦\nå¯é€‰ä½†æ¨è\n\n\nä¸ç¡®å®šæ€§\né¢‘ç‡æ´¾\nè´å¶æ–¯\n\n\nè¶‹åŠ¿å»ºæ¨¡\nå‚æ•°åŒ–\néå‚æ•°\n\n\nå­£èŠ‚æ€§\néœ€æ‰‹åŠ¨å¤„ç†\nè‡ªåŠ¨å¤„ç†",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-1",
    "href": "1065-tmle-doubly-robust.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-1",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n```{r eval=FALSE} # ===== åŸºç¡€åˆ†æ ===== library(CausalImpact) impact &lt;- CausalImpact(data, pre.period, post.period) summary(impact) plot(impact)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#gt-ç®€ä»‹",
    "href": "1065-tmle-doubly-robust.html#gt-ç®€ä»‹",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "gt ç®€ä»‹",
    "text": "gt ç®€ä»‹\ngtï¼ˆGrammar of Tablesï¼‰æ˜¯Positå®˜æ–¹å¼€å‘çš„ç°ä»£è¡¨æ ¼åˆ¶ä½œåŒ…ï¼Œé‡‡ç”¨â€è¡¨æ ¼è¯­æ³•â€çš„è®¾è®¡ç†å¿µï¼Œå¯åˆ›å»ºé«˜åº¦å®šåˆ¶åŒ–çš„å‘è¡¨çº§è¡¨æ ¼ã€‚\n\ngt vs å…¶ä»–è¡¨æ ¼åŒ…\n\n\n\nç‰¹ç‚¹\ngt\ngtsummary\nkable\nflextable\n\n\n\n\nè®¾è®¡ç†å¿µ\nè¡¨æ ¼è¯­æ³•\nç»Ÿè®¡è¡¨æ ¼\nç®€å•å¿«é€Ÿ\nOfficeå…¼å®¹\n\n\nå®šåˆ¶ç¨‹åº¦\næé«˜\nä¸­ç­‰\nä½\né«˜\n\n\nå­¦ä¹ æ›²çº¿\nä¸­ç­‰\nä½\næœ€ä½\nä¸­ç­‰\n\n\nè¾“å‡ºæ ¼å¼\nHTML/PDF/Word\nåŒgt\nHTML/PDF\nWord/PPT\n\n\n\n\n\nè¡¨æ ¼ç»“æ„\ngtå°†è¡¨æ ¼åˆ†ä¸ºå‡ ä¸ªé€»è¾‘éƒ¨åˆ†ï¼š - Table Headerï¼šæ ‡é¢˜å’Œå‰¯æ ‡é¢˜ - Stubï¼šè¡Œæ ‡ç­¾åŒºåŸŸ - Column Labelsï¼šåˆ—æ ‡ç­¾ - Table Bodyï¼šæ•°æ®ä¸»ä½“ - Table Footerï¼šè„šæ³¨å’Œæ¥æºè¯´æ˜",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#å®‰è£…ä¸åŠ è½½-2",
    "href": "1065-tmle-doubly-robust.html#å®‰è£…ä¸åŠ è½½-2",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\nlibrary(gt)\nlibrary(dplyr)\nlibrary(tidyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬ä¸€éƒ¨åˆ†åŸºç¡€ç”¨æ³•-1",
    "href": "1065-tmle-doubly-robust.html#ç¬¬ä¸€éƒ¨åˆ†åŸºç¡€ç”¨æ³•-1",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€ç”¨æ³•",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€ç”¨æ³•\n\nåˆ›å»ºç¬¬ä¸€ä¸ªgtè¡¨æ ¼\n# ä½¿ç”¨å†…ç½®æ•°æ®\ndata(mtcars)\ndf &lt;- mtcars %&gt;%\n    slice(1:6) %&gt;%\n    select(mpg, cyl, hp, wt) %&gt;%\n    mutate(car = rownames(mtcars)[1:6], .before = 1)\n\n# æœ€ç®€å•çš„gtè¡¨æ ¼\ngt(df)\n\n\næ·»åŠ æ ‡é¢˜å’Œæ¥æº\ndf %&gt;%\n    gt() %&gt;%\n    tab_header(\n        title = \"æ±½è½¦æ€§èƒ½å‚æ•°è¡¨\",\n        subtitle = \"Motor Trend Car Road Tests æ•°æ®å­é›†\"\n    ) %&gt;%\n    tab_source_note(\n        source_note = \"æ•°æ®æ¥æºï¼š1974 Motor Trend æ‚å¿—\"\n    )\n\n\nä¿®æ”¹åˆ—æ ‡ç­¾\ndf %&gt;%\n    gt() %&gt;%\n    cols_label(\n        car = \"è½¦å‹\",\n        mpg = \"æ²¹è€— (MPG)\",\n        cyl = \"æ°”ç¼¸æ•°\",\n        hp = \"é©¬åŠ›\",\n        wt = \"é‡é‡ (å¨)\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬äºŒéƒ¨åˆ†æ ¼å¼åŒ–",
    "href": "1065-tmle-doubly-robust.html#ç¬¬äºŒéƒ¨åˆ†æ ¼å¼åŒ–",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šæ ¼å¼åŒ–",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šæ ¼å¼åŒ–\n\næ•°å­—æ ¼å¼åŒ–\ndf %&gt;%\n    gt() %&gt;%\n    fmt_number(\n        columns = c(mpg, wt),\n        decimals = 1\n    ) %&gt;%\n    fmt_integer(\n        columns = c(cyl, hp)\n    )\n\n\nç™¾åˆ†æ¯”æ ¼å¼åŒ–\n# åˆ›å»ºå¸¦ç™¾åˆ†æ¯”çš„æ•°æ®\npct_df &lt;- data.frame(\n    category = c(\"A\", \"B\", \"C\"),\n    value = c(0.234, 0.456, 0.310)\n)\n\npct_df %&gt;%\n    gt() %&gt;%\n    fmt_percent(\n        columns = value,\n        decimals = 1\n    )\n\n\nè´§å¸æ ¼å¼åŒ–\nprice_df &lt;- data.frame(\n    item = c(\"äº§å“A\", \"äº§å“B\", \"äº§å“C\"),\n    price_usd = c(99.99, 149.50, 299.00),\n    price_cny = c(699, 1049, 2099)\n)\n\nprice_df %&gt;%\n    gt() %&gt;%\n    fmt_currency(\n        columns = price_usd,\n        currency = \"USD\"\n    ) %&gt;%\n    fmt_currency(\n        columns = price_cny,\n        currency = \"CNY\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬ä¸‰éƒ¨åˆ†æ ·å¼è®¾ç½®",
    "href": "1065-tmle-doubly-robust.html#ç¬¬ä¸‰éƒ¨åˆ†æ ·å¼è®¾ç½®",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ ·å¼è®¾ç½®",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ ·å¼è®¾ç½®\n\nè¡¨å¤´æ ·å¼\ndf %&gt;%\n    gt() %&gt;%\n    tab_header(\n        title = md(\"**æ±½è½¦æ€§èƒ½å‚æ•°**\"),\n        subtitle = \"ç²¾é€‰è½¦å‹æ•°æ®\"\n    ) %&gt;%\n    tab_style(\n        style = cell_fill(color = \"#4f46e5\"),\n        locations = cells_title()\n    ) %&gt;%\n    tab_style(\n        style = cell_text(color = \"white\", weight = \"bold\"),\n        locations = cells_title()\n    )\n\n\nåˆ—æ ‡ç­¾æ ·å¼\ndf %&gt;%\n    gt() %&gt;%\n    tab_style(\n        style = list(\n            cell_fill(color = \"#e0e7ff\"),\n            cell_text(weight = \"bold\")\n        ),\n        locations = cells_column_labels()\n    )\n\n\næ¡ä»¶æ ¼å¼åŒ–\ndf %&gt;%\n    gt() %&gt;%\n    tab_style(\n        style = cell_fill(color = \"#dcfce7\"),\n        locations = cells_body(\n            columns = mpg,\n            rows = mpg &gt; 20\n        )\n    ) %&gt;%\n    tab_style(\n        style = cell_fill(color = \"#fee2e2\"),\n        locations = cells_body(\n            columns = mpg,\n            rows = mpg &lt; 15\n        )\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬å››éƒ¨åˆ†æ•°æ®ç€è‰²",
    "href": "1065-tmle-doubly-robust.html#ç¬¬å››éƒ¨åˆ†æ•°æ®ç€è‰²",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šæ•°æ®ç€è‰²",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šæ•°æ®ç€è‰²\n\né¢œè‰²æ ‡åº¦\ndf %&gt;%\n    gt() %&gt;%\n    data_color(\n        columns = mpg,\n        palette = c(\"#ef4444\", \"#fbbf24\", \"#22c55e\"),\n        domain = c(10, 35)\n    )\n\n\nå¤šåˆ—ç€è‰²\ndf %&gt;%\n    gt() %&gt;%\n    data_color(\n        columns = c(mpg, hp),\n        palette = \"Blues\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬äº”éƒ¨åˆ†åˆ†ç»„ä¸æ±‡æ€»",
    "href": "1065-tmle-doubly-robust.html#ç¬¬äº”éƒ¨åˆ†åˆ†ç»„ä¸æ±‡æ€»",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šåˆ†ç»„ä¸æ±‡æ€»",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šåˆ†ç»„ä¸æ±‡æ€»\n\nè¡Œåˆ†ç»„\n# æŒ‰æ°”ç¼¸æ•°åˆ†ç»„\nmtcars %&gt;%\n    slice(1:12) %&gt;%\n    mutate(car = rownames(mtcars)[1:12]) %&gt;%\n    select(car, cyl, mpg, hp) %&gt;%\n    gt(groupname_col = \"cyl\") %&gt;%\n    tab_header(title = \"æŒ‰æ°”ç¼¸æ•°åˆ†ç»„çš„æ±½è½¦æ•°æ®\")\n\n\næ·»åŠ æ±‡æ€»è¡Œ\nmtcars %&gt;%\n    slice(1:8) %&gt;%\n    mutate(car = rownames(mtcars)[1:8]) %&gt;%\n    select(car, cyl, mpg, hp) %&gt;%\n    group_by(cyl) %&gt;%\n    gt() %&gt;%\n    summary_rows(\n        groups = TRUE,\n        columns = c(mpg, hp),\n        fns = list(\n            å¹³å‡å€¼ = ~ mean(., na.rm = TRUE),\n            æœ€å¤§å€¼ = ~ max(., na.rm = TRUE)\n        ),\n        fmt = ~ fmt_number(., decimals = 1)\n    )\n\n\næ€»è®¡è¡Œ\nmtcars %&gt;%\n    slice(1:6) %&gt;%\n    mutate(car = rownames(mtcars)[1:6]) %&gt;%\n    select(car, mpg, hp, wt) %&gt;%\n    gt() %&gt;%\n    grand_summary_rows(\n        columns = c(mpg, hp),\n        fns = list(\n            æ€»è®¡ = ~ sum(.),\n            å¹³å‡ = ~ mean(.)\n        ),\n        fmt = ~ fmt_number(., decimals = 1)\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬å…­éƒ¨åˆ†è„šæ³¨ä¸æ³¨é‡Š",
    "href": "1065-tmle-doubly-robust.html#ç¬¬å…­éƒ¨åˆ†è„šæ³¨ä¸æ³¨é‡Š",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šè„šæ³¨ä¸æ³¨é‡Š",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šè„šæ³¨ä¸æ³¨é‡Š\n\næ·»åŠ è„šæ³¨\ndf %&gt;%\n    gt() %&gt;%\n    tab_footnote(\n        footnote = \"MPG = Miles Per Gallon\",\n        locations = cells_column_labels(columns = mpg)\n    ) %&gt;%\n    tab_footnote(\n        footnote = \"é«˜æ€§èƒ½è½¦å‹\",\n        locations = cells_body(\n            columns = car,\n            rows = hp &gt; 200\n        )\n    )\n\n\nå¤šä¸ªè„šæ³¨\ndf %&gt;%\n    gt() %&gt;%\n    tab_footnote(\n        footnote = md(\"**æ²¹è€—æ•ˆç‡**æŒ‡æ ‡\"),\n        locations = cells_column_labels(columns = mpg)\n    ) %&gt;%\n    tab_footnote(\n        footnote = \"åˆ¶åŠ¨é©¬åŠ›\",\n        locations = cells_column_labels(columns = hp)\n    ) %&gt;%\n    tab_source_note(\"æ³¨ï¼šæ•°æ®æ¥è‡ª1974å¹´ç¾å›½æ±½è½¦æµ‹è¯•\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬ä¸ƒéƒ¨åˆ†åˆå¹¶ä¸è·¨åº¦",
    "href": "1065-tmle-doubly-robust.html#ç¬¬ä¸ƒéƒ¨åˆ†åˆå¹¶ä¸è·¨åº¦",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šåˆå¹¶ä¸è·¨åº¦",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šåˆå¹¶ä¸è·¨åº¦\n\nåˆ—åˆå¹¶\ndf %&gt;%\n    gt() %&gt;%\n    cols_merge(\n        columns = c(cyl, hp),\n        pattern = \"{1} ç¼¸ / {2} é©¬åŠ›\"\n    ) %&gt;%\n    cols_label(cyl = \"å‘åŠ¨æœºé…ç½®\")\n\n\nåˆ—åˆ†ç»„ï¼ˆSpannerï¼‰\ndf %&gt;%\n    gt() %&gt;%\n    tab_spanner(\n        label = \"æ€§èƒ½æŒ‡æ ‡\",\n        columns = c(mpg, hp)\n    ) %&gt;%\n    tab_spanner(\n        label = \"è§„æ ¼å‚æ•°\",\n        columns = c(cyl, wt)\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬å…«éƒ¨åˆ†å¯¼å‡ºè¡¨æ ¼",
    "href": "1065-tmle-doubly-robust.html#ç¬¬å…«éƒ¨åˆ†å¯¼å‡ºè¡¨æ ¼",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬å…«éƒ¨åˆ†ï¼šå¯¼å‡ºè¡¨æ ¼",
    "text": "ç¬¬å…«éƒ¨åˆ†ï¼šå¯¼å‡ºè¡¨æ ¼\n\nä¿å­˜ä¸ºHTML\n```{r eval=FALSE} my_table &lt;- df %&gt;% gt() %&gt;% tab_header(title = â€œç¤ºä¾‹è¡¨æ ¼â€)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-2",
    "href": "1065-tmle-doubly-robust.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-2",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n```{r eval=FALSE} # ===== åˆ›å»ºè¡¨æ ¼ ===== gt(data) gt(data, groupname_col = â€œgroupâ€)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#xgboost-ç®€ä»‹",
    "href": "1065-tmle-doubly-robust.html#xgboost-ç®€ä»‹",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "XGBoost ç®€ä»‹",
    "text": "XGBoost ç®€ä»‹\nXGBoostï¼ˆeXtreme Gradient Boostingï¼‰æ˜¯ç›®å‰æœ€å¼ºå¤§çš„æœºå™¨å­¦ä¹ ç®—æ³•ä¹‹ä¸€ï¼Œåœ¨ç»“æ„åŒ–æ•°æ®ä¸Šè¡¨ç°å“è¶Šï¼Œæ˜¯Kaggleç«èµ›çš„å¸¸èƒœå°†å†›ã€‚\n\nä¸ºä»€ä¹ˆé€‰æ‹©XGBoostï¼Ÿ\n\n\n\nä¼˜åŠ¿\nè¯´æ˜\n\n\n\n\né«˜æ€§èƒ½\né€Ÿåº¦å¿«ã€ç²¾åº¦é«˜\n\n\næ­£åˆ™åŒ–\nå†…ç½®L1/L2æ­£åˆ™åŒ–ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆ\n\n\nçµæ´»æ€§\næ”¯æŒè‡ªå®šä¹‰ç›®æ ‡å‡½æ•°\n\n\nå¯è§£é‡Šæ€§\næä¾›ç‰¹å¾é‡è¦æ€§\n\n\nå·¥ç¨‹ä¼˜åŒ–\nå¹¶è¡Œè®¡ç®—ã€ç¼“å­˜ä¼˜åŒ–\n\n\n\n\n\næ ¸å¿ƒåŸç†\nXGBooståŸºäºæ¢¯åº¦æå‡å†³ç­–æ ‘ï¼ˆGBDTï¼‰ï¼š 1. é¡ºåºè®­ç»ƒå¤šæ£µå†³ç­–æ ‘ 2. æ¯æ£µæ ‘æ‹Ÿåˆå‰ä¸€è½®çš„æ®‹å·® 3. ä½¿ç”¨äºŒé˜¶æ³°å‹’å±•å¼€ä¼˜åŒ–ç›®æ ‡å‡½æ•° 4. æ­£åˆ™åŒ–æ§åˆ¶æ¨¡å‹å¤æ‚åº¦",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#å®‰è£…ä¸åŠ è½½-3",
    "href": "1065-tmle-doubly-robust.html#å®‰è£…ä¸åŠ è½½-3",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\nlibrary(xgboost)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(caret)\n\ntheme_set(theme_bw(base_size = 12))\nset.seed(42)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬ä¸€éƒ¨åˆ†å¿«é€Ÿå…¥é—¨",
    "href": "1065-tmle-doubly-robust.html#ç¬¬ä¸€éƒ¨åˆ†å¿«é€Ÿå…¥é—¨",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šå¿«é€Ÿå…¥é—¨",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šå¿«é€Ÿå…¥é—¨\n\næ•°æ®å‡†å¤‡\n# ä½¿ç”¨irisæ•°æ®é›†ï¼ˆäºŒåˆ†ç±»ï¼‰\ndata(iris)\niris_binary &lt;- iris %&gt;%\n    filter(Species != \"setosa\") %&gt;%\n    mutate(label = ifelse(Species == \"versicolor\", 0, 1))\n\n# åˆ†å‰²æ•°æ®\ntrain_idx &lt;- sample(1:nrow(iris_binary), 0.7 * nrow(iris_binary))\ntrain_data &lt;- iris_binary[train_idx, ]\ntest_data &lt;- iris_binary[-train_idx, ]\n\n# åˆ›å»ºDMatrixï¼ˆXGBoostä¸“ç”¨æ ¼å¼ï¼‰\ndtrain &lt;- xgb.DMatrix(\n    data = as.matrix(train_data[, 1:4]),\n    label = train_data$label\n)\ndtest &lt;- xgb.DMatrix(\n    data = as.matrix(test_data[, 1:4]),\n    label = test_data$label\n)\n\n\nè®­ç»ƒæ¨¡å‹\n# è®¾ç½®å‚æ•°\nparams &lt;- list(\n    objective = \"binary:logistic\", # äºŒåˆ†ç±»\n    eval_metric = \"auc\", # è¯„ä¼°æŒ‡æ ‡\n    max_depth = 3, # æ ‘æ·±åº¦\n    eta = 0.1 # å­¦ä¹ ç‡\n)\n\n# è®­ç»ƒ\nmodel &lt;- xgb.train(\n    params = params,\n    data = dtrain,\n    nrounds = 100,\n    watchlist = list(train = dtrain, test = dtest),\n    verbose = 0\n)\n\n# æŸ¥çœ‹è®­ç»ƒæ—¥å¿—\ntail(model$evaluation_log)\n\n\né¢„æµ‹\n# é¢„æµ‹æ¦‚ç‡\npred_prob &lt;- predict(model, dtest)\nhead(pred_prob)\n\n# è½¬æ¢ä¸ºç±»åˆ«\npred_class &lt;- ifelse(pred_prob &gt; 0.5, 1, 0)\n\n# è¯„ä¼°\naccuracy &lt;- mean(pred_class == test_data$label)\ncat(\"æµ‹è¯•é›†å‡†ç¡®ç‡:\", round(accuracy, 4), \"\\n\")\n\n# æ··æ·†çŸ©é˜µ\ntable(Predicted = pred_class, Actual = test_data$label)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬äºŒéƒ¨åˆ†å‚æ•°è¯¦è§£",
    "href": "1065-tmle-doubly-robust.html#ç¬¬äºŒéƒ¨åˆ†å‚æ•°è¯¦è§£",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šå‚æ•°è¯¦è§£",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šå‚æ•°è¯¦è§£\n\næ ¸å¿ƒå‚æ•°\n\n\n\nå‚æ•°\nè¯´æ˜\næ¨èå€¼\n\n\n\n\neta\nå­¦ä¹ ç‡\n0.01-0.3\n\n\nmax_depth\næ ‘æœ€å¤§æ·±åº¦\n3-10\n\n\nmin_child_weight\nå¶å­èŠ‚ç‚¹æœ€å°æ ·æœ¬æƒé‡\n1-10\n\n\nsubsample\næ ·æœ¬é‡‡æ ·æ¯”ä¾‹\n0.5-1\n\n\ncolsample_bytree\nç‰¹å¾é‡‡æ ·æ¯”ä¾‹\n0.5-1\n\n\nlambda\nL2æ­£åˆ™åŒ–\n0-10\n\n\nalpha\nL1æ­£åˆ™åŒ–\n0-10\n\n\n\n\n\nç›®æ ‡å‡½æ•°\n```{r eval=FALSE} # äºŒåˆ†ç±» objective &lt;- â€œbinary:logisticâ€ # è¾“å‡ºæ¦‚ç‡ objective &lt;- â€œbinary:logitrawâ€ # è¾“å‡ºåŸå§‹åˆ†æ•°",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬å››éƒ¨åˆ†ç‰¹å¾é‡è¦æ€§",
    "href": "1065-tmle-doubly-robust.html#ç¬¬å››éƒ¨åˆ†ç‰¹å¾é‡è¦æ€§",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šç‰¹å¾é‡è¦æ€§",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šç‰¹å¾é‡è¦æ€§\n\nè®¡ç®—é‡è¦æ€§\n# é‡æ–°è®­ç»ƒæœ€ç»ˆæ¨¡å‹\nfinal_model &lt;- xgb.train(\n    params = params,\n    data = dtrain,\n    nrounds = best_nrounds,\n    verbose = 0\n)\n\n# è·å–ç‰¹å¾é‡è¦æ€§\nimportance &lt;- xgb.importance(\n    feature_names = colnames(train_data)[1:4],\n    model = final_model\n)\nprint(importance)\n\n\nå¯è§†åŒ–é‡è¦æ€§\n# æ¡å½¢å›¾\nxgb.plot.importance(importance, measure = \"Gain\")\n# è‡ªå®šä¹‰ggplotå¯è§†åŒ–\nggplot(importance, aes(x = reorder(Feature, Gain), y = Gain)) +\n    geom_col(fill = \"#4f46e5\", alpha = 0.8) +\n    coord_flip() +\n    labs(\n        title = \"XGBoost ç‰¹å¾é‡è¦æ€§\",\n        subtitle = \"åŸºäºä¿¡æ¯å¢ç›Š\",\n        x = \"\", y = \"é‡è¦æ€§ (Gain)\"\n    )\n\n\nå¤šç§é‡è¦æ€§æŒ‡æ ‡\n# ä¸‰ç§é‡è¦æ€§æŒ‡æ ‡å¯¹æ¯”\nimportance_long &lt;- importance %&gt;%\n    tidyr::pivot_longer(\n        cols = c(Gain, Cover, Frequency),\n        names_to = \"Metric\",\n        values_to = \"Value\"\n    )\n\nggplot(importance_long, aes(x = Feature, y = Value, fill = Metric)) +\n    geom_col(position = \"dodge\") +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\", \"#ef4444\")) +\n    labs(\n        title = \"ç‰¹å¾é‡è¦æ€§ï¼ˆå¤šæŒ‡æ ‡å¯¹æ¯”ï¼‰\",\n        x = \"\", y = \"é‡è¦æ€§\"\n    ) +\n    theme(axis.text.x = element_text(angle = 45, hjust = 1))",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬äº”éƒ¨åˆ†å›å½’ä»»åŠ¡",
    "href": "1065-tmle-doubly-robust.html#ç¬¬äº”éƒ¨åˆ†å›å½’ä»»åŠ¡",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šå›å½’ä»»åŠ¡",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šå›å½’ä»»åŠ¡\n\nå›å½’æ¨¡å‹\n# ä½¿ç”¨mtcarsæ•°æ®\ndata(mtcars)\ntrain_idx &lt;- sample(1:nrow(mtcars), 0.7 * nrow(mtcars))\n\ndtrain_reg &lt;- xgb.DMatrix(\n    data = as.matrix(mtcars[train_idx, -1]),\n    label = mtcars$mpg[train_idx]\n)\ndtest_reg &lt;- xgb.DMatrix(\n    data = as.matrix(mtcars[-train_idx, -1]),\n    label = mtcars$mpg[-train_idx]\n)\n\n# å›å½’å‚æ•°\nparams_reg &lt;- list(\n    objective = \"reg:squarederror\",\n    eval_metric = \"rmse\",\n    max_depth = 4,\n    eta = 0.1\n)\n\n# è®­ç»ƒ\nmodel_reg &lt;- xgb.train(\n    params = params_reg,\n    data = dtrain_reg,\n    nrounds = 100,\n    watchlist = list(train = dtrain_reg, test = dtest_reg),\n    verbose = 0\n)\n\n# é¢„æµ‹\npred_reg &lt;- predict(model_reg, dtest_reg)\nactual_reg &lt;- mtcars$mpg[-train_idx]\n\n# è¯„ä¼°\nrmse &lt;- sqrt(mean((pred_reg - actual_reg)^2))\nr_squared &lt;- cor(pred_reg, actual_reg)^2\n\ncat(\"RMSE:\", round(rmse, 3), \"\\n\")\ncat(\"RÂ²:\", round(r_squared, 3), \"\\n\")\n\n\né¢„æµ‹vså®é™…\npred_df &lt;- data.frame(\n    actual = actual_reg,\n    predicted = pred_reg\n)\n\nggplot(pred_df, aes(x = actual, y = predicted)) +\n    geom_point(color = \"#4f46e5\", size = 3) +\n    geom_abline(\n        slope = 1, intercept = 0,\n        linetype = \"dashed\", color = \"red\"\n    ) +\n    labs(\n        title = \"XGBoost å›å½’ï¼šé¢„æµ‹ vs å®é™…\",\n        x = \"å®é™…å€¼\", y = \"é¢„æµ‹å€¼\"\n    ) +\n    annotate(\"text\",\n        x = 15, y = 30,\n        label = paste(\"RÂ² =\", round(r_squared, 3))\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬å…­éƒ¨åˆ†å¤šåˆ†ç±»",
    "href": "1065-tmle-doubly-robust.html#ç¬¬å…­éƒ¨åˆ†å¤šåˆ†ç±»",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šå¤šåˆ†ç±»",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šå¤šåˆ†ç±»\n# ä½¿ç”¨å®Œæ•´irisæ•°æ®ï¼ˆä¸‰åˆ†ç±»ï¼‰\niris_full &lt;- iris\niris_full$label &lt;- as.numeric(iris_full$Species) - 1\n\ntrain_idx &lt;- sample(1:nrow(iris_full), 0.7 * nrow(iris_full))\n\ndtrain_multi &lt;- xgb.DMatrix(\n    data = as.matrix(iris_full[train_idx, 1:4]),\n    label = iris_full$label[train_idx]\n)\ndtest_multi &lt;- xgb.DMatrix(\n    data = as.matrix(iris_full[-train_idx, 1:4]),\n    label = iris_full$label[-train_idx]\n)\n\n# å¤šåˆ†ç±»å‚æ•°\nparams_multi &lt;- list(\n    objective = \"multi:softmax\",\n    num_class = 3,\n    eval_metric = \"mlogloss\",\n    max_depth = 4,\n    eta = 0.1\n)\n\n# è®­ç»ƒ\nmodel_multi &lt;- xgb.train(\n    params = params_multi,\n    data = dtrain_multi,\n    nrounds = 50,\n    verbose = 0\n)\n\n# é¢„æµ‹\npred_multi &lt;- predict(model_multi, dtest_multi)\n\n# æ··æ·†çŸ©é˜µ\ntable(Predicted = pred_multi, Actual = iris_full$label[-train_idx])\n\n# å‡†ç¡®ç‡\naccuracy_multi &lt;- mean(pred_multi == iris_full$label[-train_idx])\ncat(\"å¤šåˆ†ç±»å‡†ç¡®ç‡:\", round(accuracy_multi, 4), \"\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬ä¸ƒéƒ¨åˆ†ä¿å­˜ä¸åŠ è½½æ¨¡å‹",
    "href": "1065-tmle-doubly-robust.html#ç¬¬ä¸ƒéƒ¨åˆ†ä¿å­˜ä¸åŠ è½½æ¨¡å‹",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šä¿å­˜ä¸åŠ è½½æ¨¡å‹",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šä¿å­˜ä¸åŠ è½½æ¨¡å‹\n# ä¿å­˜æ¨¡å‹\nxgb.save(final_model, \"xgboost_model.bin\")\n\n# åŠ è½½æ¨¡å‹\nmodel_loaded &lt;- xgb.load(\"xgboost_model.bin\")\n\n# éªŒè¯\npred_loaded &lt;- predict(model_loaded, dtest)\nall.equal(pred_prob, pred_loaded)\n# æ¸…ç†ä¸´æ—¶æ–‡ä»¶\nif (file.exists(\"xgboost_model.bin\")) {\n    file.remove(\"xgboost_model.bin\")\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#ç¬¬å…«éƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹-1",
    "href": "1065-tmle-doubly-robust.html#ç¬¬å…«éƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹-1",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬å…«éƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬å…«éƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹\n\nå®Œæ•´å·¥ä½œæµç¨‹\n# ä½¿ç”¨çœŸå®æ•°æ®æ¨¡æ‹Ÿ\nset.seed(123)\nn &lt;- 1000\n\n# ç”Ÿæˆç‰¹å¾\nage &lt;- rnorm(n, 50, 12)\nbmi &lt;- rnorm(n, 26, 4)\nbp &lt;- rnorm(n, 130, 15)\nglucose &lt;- rnorm(n, 100, 25)\ncholesterol &lt;- rnorm(n, 200, 40)\n\n# ç”Ÿæˆæ ‡ç­¾ï¼ˆå—ç‰¹å¾å½±å“ï¼‰\nprob &lt;- plogis(-5 + 0.03 * age + 0.08 * bmi + 0.02 * bp + 0.01 * glucose + 0.005 * cholesterol)\noutcome &lt;- rbinom(n, 1, prob)\n\nsim_data &lt;- data.frame(\n    outcome, age, bmi, bp, glucose, cholesterol\n)\n\ncat(\"=== æ•°æ®æ¦‚è§ˆ ===\\n\")\ncat(\"æ ·æœ¬é‡:\", n, \"\\n\")\ncat(\"é˜³æ€§ç‡:\", mean(outcome), \"\\n\")\n# æ•°æ®åˆ†å‰²\ntrain_idx &lt;- sample(1:n, 0.7 * n)\nX_train &lt;- as.matrix(sim_data[train_idx, -1])\ny_train &lt;- sim_data$outcome[train_idx]\nX_test &lt;- as.matrix(sim_data[-train_idx, -1])\ny_test &lt;- sim_data$outcome[-train_idx]\n\ndtrain_case &lt;- xgb.DMatrix(data = X_train, label = y_train)\ndtest_case &lt;- xgb.DMatrix(data = X_test, label = y_test)\n# äº¤å‰éªŒè¯é€‰æ‹©æœ€ä½³å‚æ•°\ncv_case &lt;- xgb.cv(\n    params = list(\n        objective = \"binary:logistic\",\n        eval_metric = \"auc\",\n        max_depth = 4,\n        eta = 0.1,\n        subsample = 0.8,\n        colsample_bytree = 0.8\n    ),\n    data = dtrain_case,\n    nrounds = 200,\n    nfold = 5,\n    early_stopping_rounds = 20,\n    verbose = 0\n)\n\ncat(\"\\næœ€ä½³è¿­ä»£:\", cv_case$best_iteration, \"\\n\")\ncat(\"éªŒè¯é›†AUC:\", round(max(cv_case$evaluation_log$test_auc_mean), 4), \"\\n\")\n# è®­ç»ƒæœ€ç»ˆæ¨¡å‹\nfinal_case &lt;- xgb.train(\n    params = list(\n        objective = \"binary:logistic\",\n        eval_metric = \"auc\",\n        max_depth = 4,\n        eta = 0.1,\n        subsample = 0.8,\n        colsample_bytree = 0.8\n    ),\n    data = dtrain_case,\n    nrounds = cv_case$best_iteration,\n    verbose = 0\n)\n\n# æµ‹è¯•é›†è¯„ä¼°\npred_case &lt;- predict(final_case, dtest_case)\n\n# AUC\nlibrary(pROC)\nroc_case &lt;- roc(y_test, pred_case)\ncat(\"\\næµ‹è¯•é›†AUC:\", round(auc(roc_case), 4), \"\\n\")\n# ç‰¹å¾é‡è¦æ€§\nimportance_case &lt;- xgb.importance(\n    feature_names = colnames(sim_data)[-1],\n    model = final_case\n)\n\nxgb.plot.importance(importance_case)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-3",
    "href": "1065-tmle-doubly-robust.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-3",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n```{r eval=FALSE} # ===== æ•°æ®å‡†å¤‡ ===== dtrain &lt;- xgb.DMatrix(data = X_matrix, label = y_vector)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#å°ç»“-1",
    "href": "1065-tmle-doubly-robust.html#å°ç»“-1",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "å°ç»“",
    "text": "å°ç»“\nXGBoost è°ƒå‚é¡ºåºå»ºè®®ï¼š\n\nå…ˆç¡®å®šnroundsï¼šä½¿ç”¨æ—©åœ\nè°ƒmax_depthå’Œmin_child_weightï¼šæ§åˆ¶è¿‡æ‹Ÿåˆ\nè°ƒsubsampleå’Œcolsample_bytreeï¼šæ­£åˆ™åŒ–\nè°ƒetaï¼šé™ä½å­¦ä¹ ç‡ï¼Œå¢åŠ nrounds\nè°ƒlambdaå’Œalphaï¼šè¿›ä¸€æ­¥æ­£åˆ™åŒ–\n\n\næŠ€å·§ï¼šXGBooståœ¨ç»“æ„åŒ–è¡¨æ ¼æ•°æ®ä¸Šé€šå¸¸ä¼˜äºæ·±åº¦å­¦ä¹ ï¼Œæ˜¯æ•°æ®ç§‘å­¦ç«èµ›çš„å¿…å¤‡å·¥å…·ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1065-tmle-doubly-robust.html#å‚è€ƒèµ„æº-1",
    "href": "1065-tmle-doubly-robust.html#å‚è€ƒèµ„æº-1",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nXGBoost å®˜æ–¹æ–‡æ¡£\nXGBoost RåŒ…\nXGBoostè®ºæ–‡",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "TMLE åŒé‡ç¨³å¥ä¼°è®¡"
    ]
  },
  {
    "objectID": "1068-xgboost.html",
    "href": "1068-xgboost.html",
    "title": "XGBoost æ¢¯åº¦æå‡ç®—æ³•å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "XGBoostï¼ˆeXtreme Gradient Boostingï¼‰æ˜¯ç›®å‰æœ€å¼ºå¤§çš„æœºå™¨å­¦ä¹ ç®—æ³•ä¹‹ä¸€ï¼Œåœ¨ç»“æ„åŒ–æ•°æ®ä¸Šè¡¨ç°å“è¶Šï¼Œæ˜¯Kaggleç«èµ›çš„å¸¸èƒœå°†å†›ã€‚\n\n\n\n\n\nä¼˜åŠ¿\nè¯´æ˜\n\n\n\n\né«˜æ€§èƒ½\né€Ÿåº¦å¿«ã€ç²¾åº¦é«˜\n\n\næ­£åˆ™åŒ–\nå†…ç½®L1/L2æ­£åˆ™åŒ–ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆ\n\n\nçµæ´»æ€§\næ”¯æŒè‡ªå®šä¹‰ç›®æ ‡å‡½æ•°\n\n\nå¯è§£é‡Šæ€§\næä¾›ç‰¹å¾é‡è¦æ€§\n\n\nå·¥ç¨‹ä¼˜åŒ–\nå¹¶è¡Œè®¡ç®—ã€ç¼“å­˜ä¼˜åŒ–\n\n\n\n\n\n\nXGBooståŸºäºæ¢¯åº¦æå‡å†³ç­–æ ‘ï¼ˆGBDTï¼‰ï¼š 1. é¡ºåºè®­ç»ƒå¤šæ£µå†³ç­–æ ‘ 2. æ¯æ£µæ ‘æ‹Ÿåˆå‰ä¸€è½®çš„æ®‹å·® 3. ä½¿ç”¨äºŒé˜¶æ³°å‹’å±•å¼€ä¼˜åŒ–ç›®æ ‡å‡½æ•° 4. æ­£åˆ™åŒ–æ§åˆ¶æ¨¡å‹å¤æ‚åº¦",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "XGBoost æ¢¯åº¦æå‡"
    ]
  },
  {
    "objectID": "1068-xgboost.html#xgboost-ç®€ä»‹",
    "href": "1068-xgboost.html#xgboost-ç®€ä»‹",
    "title": "XGBoost æ¢¯åº¦æå‡ç®—æ³•å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "XGBoostï¼ˆeXtreme Gradient Boostingï¼‰æ˜¯ç›®å‰æœ€å¼ºå¤§çš„æœºå™¨å­¦ä¹ ç®—æ³•ä¹‹ä¸€ï¼Œåœ¨ç»“æ„åŒ–æ•°æ®ä¸Šè¡¨ç°å“è¶Šï¼Œæ˜¯Kaggleç«èµ›çš„å¸¸èƒœå°†å†›ã€‚\n\n\n\n\n\nä¼˜åŠ¿\nè¯´æ˜\n\n\n\n\né«˜æ€§èƒ½\né€Ÿåº¦å¿«ã€ç²¾åº¦é«˜\n\n\næ­£åˆ™åŒ–\nå†…ç½®L1/L2æ­£åˆ™åŒ–ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆ\n\n\nçµæ´»æ€§\næ”¯æŒè‡ªå®šä¹‰ç›®æ ‡å‡½æ•°\n\n\nå¯è§£é‡Šæ€§\næä¾›ç‰¹å¾é‡è¦æ€§\n\n\nå·¥ç¨‹ä¼˜åŒ–\nå¹¶è¡Œè®¡ç®—ã€ç¼“å­˜ä¼˜åŒ–\n\n\n\n\n\n\nXGBooståŸºäºæ¢¯åº¦æå‡å†³ç­–æ ‘ï¼ˆGBDTï¼‰ï¼š 1. é¡ºåºè®­ç»ƒå¤šæ£µå†³ç­–æ ‘ 2. æ¯æ£µæ ‘æ‹Ÿåˆå‰ä¸€è½®çš„æ®‹å·® 3. ä½¿ç”¨äºŒé˜¶æ³°å‹’å±•å¼€ä¼˜åŒ–ç›®æ ‡å‡½æ•° 4. æ­£åˆ™åŒ–æ§åˆ¶æ¨¡å‹å¤æ‚åº¦",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "XGBoost æ¢¯åº¦æå‡"
    ]
  },
  {
    "objectID": "1068-xgboost.html#å®‰è£…ä¸åŠ è½½",
    "href": "1068-xgboost.html#å®‰è£…ä¸åŠ è½½",
    "title": "XGBoost æ¢¯åº¦æå‡ç®—æ³•å®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\nlibrary(xgboost)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(caret)\n\ntheme_set(theme_bw(base_size = 12))\nset.seed(42)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "XGBoost æ¢¯åº¦æå‡"
    ]
  },
  {
    "objectID": "1068-xgboost.html#ç¬¬ä¸€éƒ¨åˆ†å¿«é€Ÿå…¥é—¨",
    "href": "1068-xgboost.html#ç¬¬ä¸€éƒ¨åˆ†å¿«é€Ÿå…¥é—¨",
    "title": "XGBoost æ¢¯åº¦æå‡ç®—æ³•å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šå¿«é€Ÿå…¥é—¨",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šå¿«é€Ÿå…¥é—¨\n\næ•°æ®å‡†å¤‡\n\n# ä½¿ç”¨irisæ•°æ®é›†ï¼ˆäºŒåˆ†ç±»ï¼‰\ndata(iris)\niris_binary &lt;- iris %&gt;%\n    filter(Species != \"setosa\") %&gt;%\n    mutate(label = ifelse(Species == \"versicolor\", 0, 1))\n\n# åˆ†å‰²æ•°æ®\ntrain_idx &lt;- sample(1:nrow(iris_binary), 0.7 * nrow(iris_binary))\ntrain_data &lt;- iris_binary[train_idx, ]\ntest_data &lt;- iris_binary[-train_idx, ]\n\n# åˆ›å»ºDMatrixï¼ˆXGBoostä¸“ç”¨æ ¼å¼ï¼‰\ndtrain &lt;- xgb.DMatrix(\n    data = as.matrix(train_data[, 1:4]),\n    label = train_data$label\n)\ndtest &lt;- xgb.DMatrix(\n    data = as.matrix(test_data[, 1:4]),\n    label = test_data$label\n)\n\n\n\nè®­ç»ƒæ¨¡å‹\n\n# è®¾ç½®å‚æ•°\nparams &lt;- list(\n    objective = \"binary:logistic\", # äºŒåˆ†ç±»\n    eval_metric = \"auc\", # è¯„ä¼°æŒ‡æ ‡\n    max_depth = 3, # æ ‘æ·±åº¦\n    eta = 0.1 # å­¦ä¹ ç‡\n)\n\n# è®­ç»ƒ\nmodel &lt;- xgb.train(\n    params = params,\n    data = dtrain,\n    nrounds = 100,\n    watchlist = list(train = dtrain, test = dtest),\n    verbose = 0\n)\n\n# æŸ¥çœ‹è®­ç»ƒæ—¥å¿—\ntail(model$evaluation_log)\n\nNULL\n\n\n\n\né¢„æµ‹\n\n# é¢„æµ‹æ¦‚ç‡\npred_prob &lt;- predict(model, dtest)\nhead(pred_prob)\n\n[1] 0.014638680 0.015406083 0.004244067 0.004244067 0.008739169 0.004244067\n\n# è½¬æ¢ä¸ºç±»åˆ«\npred_class &lt;- ifelse(pred_prob &gt; 0.5, 1, 0)\n\n# è¯„ä¼°\naccuracy &lt;- mean(pred_class == test_data$label)\ncat(\"æµ‹è¯•é›†å‡†ç¡®ç‡:\", round(accuracy, 4), \"\\n\")\n\næµ‹è¯•é›†å‡†ç¡®ç‡: 0.9333 \n\n# æ··æ·†çŸ©é˜µ\ntable(Predicted = pred_class, Actual = test_data$label)\n\n         Actual\nPredicted  0  1\n        0 12  2\n        1  0 16",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "XGBoost æ¢¯åº¦æå‡"
    ]
  },
  {
    "objectID": "1068-xgboost.html#ç¬¬äºŒéƒ¨åˆ†å‚æ•°è¯¦è§£",
    "href": "1068-xgboost.html#ç¬¬äºŒéƒ¨åˆ†å‚æ•°è¯¦è§£",
    "title": "XGBoost æ¢¯åº¦æå‡ç®—æ³•å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šå‚æ•°è¯¦è§£",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šå‚æ•°è¯¦è§£\n\næ ¸å¿ƒå‚æ•°\n\n\n\nå‚æ•°\nè¯´æ˜\næ¨èå€¼\n\n\n\n\neta\nå­¦ä¹ ç‡\n0.01-0.3\n\n\nmax_depth\næ ‘æœ€å¤§æ·±åº¦\n3-10\n\n\nmin_child_weight\nå¶å­èŠ‚ç‚¹æœ€å°æ ·æœ¬æƒé‡\n1-10\n\n\nsubsample\næ ·æœ¬é‡‡æ ·æ¯”ä¾‹\n0.5-1\n\n\ncolsample_bytree\nç‰¹å¾é‡‡æ ·æ¯”ä¾‹\n0.5-1\n\n\nlambda\nL2æ­£åˆ™åŒ–\n0-10\n\n\nalpha\nL1æ­£åˆ™åŒ–\n0-10\n\n\n\n\n\nç›®æ ‡å‡½æ•°\n\n# äºŒåˆ†ç±»\nobjective &lt;- \"binary:logistic\" # è¾“å‡ºæ¦‚ç‡\nobjective &lt;- \"binary:logitraw\" # è¾“å‡ºåŸå§‹åˆ†æ•°\n\n# å¤šåˆ†ç±»\nobjective &lt;- \"multi:softmax\" # è¾“å‡ºç±»åˆ«\nobjective &lt;- \"multi:softprob\" # è¾“å‡ºæ¦‚ç‡\n\n# å›å½’\nobjective &lt;- \"reg:squarederror\" # MSE\nobjective &lt;- \"reg:absoluteerror\" # MAE\n\n# è®¡æ•°æ•°æ®\nobjective &lt;- \"count:poisson\" # æ³Šæ¾å›å½’\n\n# ç”Ÿå­˜åˆ†æ\nobjective &lt;- \"survival:cox\" # Coxæ¯”ä¾‹é£é™©",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "XGBoost æ¢¯åº¦æå‡"
    ]
  },
  {
    "objectID": "1068-xgboost.html#ç¬¬ä¸‰éƒ¨åˆ†å‚æ•°è°ƒä¼˜",
    "href": "1068-xgboost.html#ç¬¬ä¸‰éƒ¨åˆ†å‚æ•°è°ƒä¼˜",
    "title": "XGBoost æ¢¯åº¦æå‡ç®—æ³•å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šå‚æ•°è°ƒä¼˜",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šå‚æ•°è°ƒä¼˜\n\nä½¿ç”¨äº¤å‰éªŒè¯\n\n# äº¤å‰éªŒè¯\ncv_result &lt;- xgb.cv(\n    params = params,\n    data = dtrain,\n    nrounds = 200,\n    nfold = 5,\n    early_stopping_rounds = 20, # æ—©åœ\n    verbose = 0\n)\n\n# æœ€ä½³è¿­ä»£æ¬¡æ•°\nbest_nrounds &lt;- cv_result$best_iteration\nif (is.null(best_nrounds) || length(best_nrounds) == 0) {\n    best_nrounds &lt;- 100 # ä½¿ç”¨é»˜è®¤å€¼\n}\ncat(\"æœ€ä½³è¿­ä»£æ¬¡æ•°:\", best_nrounds, \"\\n\")\n\næœ€ä½³è¿­ä»£æ¬¡æ•°: 100 \n\ncat(\"æœ€ä½³AUC:\", round(max(cv_result$evaluation_log$test_auc_mean), 4), \"\\n\")\n\næœ€ä½³AUC: 0.9979 \n\n\n\n\nå¯è§†åŒ–å­¦ä¹ æ›²çº¿\n\n# æå–è¯„ä¼°æ—¥å¿—\neval_log &lt;- cv_result$evaluation_log\n\nggplot(eval_log, aes(x = iter)) +\n    geom_line(aes(y = train_auc_mean, color = \"è®­ç»ƒé›†\")) +\n    geom_line(aes(y = test_auc_mean, color = \"éªŒè¯é›†\")) +\n    geom_ribbon(\n        aes(\n            ymin = test_auc_mean - test_auc_std,\n            ymax = test_auc_mean + test_auc_std\n        ),\n        alpha = 0.2\n    ) +\n    geom_vline(xintercept = best_nrounds, linetype = \"dashed\") +\n    scale_color_manual(values = c(\"è®­ç»ƒé›†\" = \"#4f46e5\", \"éªŒè¯é›†\" = \"#ef4444\")) +\n    labs(\n        title = \"XGBoost å­¦ä¹ æ›²çº¿\",\n        x = \"è¿­ä»£æ¬¡æ•°\", y = \"AUC\", color = \"\"\n    ) +\n    theme(legend.position = \"bottom\")\n\n\n\n\n\n\n\n\n\n\nç½‘æ ¼æœç´¢\n\n# å‚æ•°ç½‘æ ¼ï¼ˆç®€åŒ–ç¤ºä¾‹ï¼‰\nparam_grid &lt;- expand.grid(\n    max_depth = c(3, 5),\n    eta = c(0.1, 0.2)\n)\n\n# æœç´¢æœ€ä½³å‚æ•°\nresults &lt;- list()\nfor (i in 1:nrow(param_grid)) {\n    params_i &lt;- list(\n        objective = \"binary:logistic\",\n        eval_metric = \"auc\",\n        max_depth = param_grid$max_depth[i],\n        eta = param_grid$eta[i]\n    )\n\n    cv &lt;- xgb.cv(\n        params = params_i,\n        data = dtrain,\n        nrounds = 50,\n        nfold = 3,\n        early_stopping_rounds = 10,\n        verbose = 0\n    )\n\n    # å¤„ç†best_iterationå¯èƒ½ä¸ºNULLçš„æƒ…å†µ\n    best_iter &lt;- cv$best_iteration\n    if (is.null(best_iter) || length(best_iter) == 0) {\n        best_iter &lt;- 50\n    }\n\n    results[[i]] &lt;- data.frame(\n        max_depth = param_grid$max_depth[i],\n        eta = param_grid$eta[i],\n        best_auc = max(cv$evaluation_log$test_auc_mean),\n        best_iter = best_iter\n    )\n}\n\nresults_df &lt;- do.call(rbind, results)\nresults_df &lt;- results_df[order(-results_df$best_auc), ]\nprint(results_df)\n\n  max_depth eta  best_auc best_iter\n4         5 0.2 1.0000000        50\n2         5 0.1 0.9975469        50\n1         3 0.1 0.9908730        50\n3         3 0.2 0.9481481        50",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "XGBoost æ¢¯åº¦æå‡"
    ]
  },
  {
    "objectID": "1068-xgboost.html#ç¬¬å››éƒ¨åˆ†ç‰¹å¾é‡è¦æ€§",
    "href": "1068-xgboost.html#ç¬¬å››éƒ¨åˆ†ç‰¹å¾é‡è¦æ€§",
    "title": "XGBoost æ¢¯åº¦æå‡ç®—æ³•å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šç‰¹å¾é‡è¦æ€§",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šç‰¹å¾é‡è¦æ€§\n\nè®¡ç®—é‡è¦æ€§\n\n# é‡æ–°è®­ç»ƒæœ€ç»ˆæ¨¡å‹\nfinal_model &lt;- xgb.train(\n    params = params,\n    data = dtrain,\n    nrounds = best_nrounds,\n    verbose = 0\n)\n\n# è·å–ç‰¹å¾é‡è¦æ€§\nimportance &lt;- xgb.importance(\n    feature_names = colnames(train_data)[1:4],\n    model = final_model\n)\nprint(importance)\n\n        Feature        Gain      Cover  Frequency\n         &lt;char&gt;       &lt;num&gt;      &lt;num&gt;      &lt;num&gt;\n1:  Petal.Width 0.601101301 0.42730688 0.39041096\n2: Petal.Length 0.382828811 0.38559549 0.33561644\n3: Sepal.Length 0.014258206 0.15749462 0.22602740\n4:  Sepal.Width 0.001811682 0.02960301 0.04794521\n\n\n\n\nå¯è§†åŒ–é‡è¦æ€§\n\n# æ¡å½¢å›¾\nxgb.plot.importance(importance, measure = \"Gain\")\n\n\n\n\n\n\n\n\n\n# è‡ªå®šä¹‰ggplotå¯è§†åŒ–\nggplot(importance, aes(x = reorder(Feature, Gain), y = Gain)) +\n    geom_col(fill = \"#4f46e5\", alpha = 0.8) +\n    coord_flip() +\n    labs(\n        title = \"XGBoost ç‰¹å¾é‡è¦æ€§\",\n        subtitle = \"åŸºäºä¿¡æ¯å¢ç›Š\",\n        x = \"\", y = \"é‡è¦æ€§ (Gain)\"\n    )\n\n\n\n\n\n\n\n\n\n\nå¤šç§é‡è¦æ€§æŒ‡æ ‡\n\n# ä¸‰ç§é‡è¦æ€§æŒ‡æ ‡å¯¹æ¯”\nimportance_long &lt;- importance %&gt;%\n    tidyr::pivot_longer(\n        cols = c(Gain, Cover, Frequency),\n        names_to = \"Metric\",\n        values_to = \"Value\"\n    )\n\nggplot(importance_long, aes(x = Feature, y = Value, fill = Metric)) +\n    geom_col(position = \"dodge\") +\n    scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\", \"#ef4444\")) +\n    labs(\n        title = \"ç‰¹å¾é‡è¦æ€§ï¼ˆå¤šæŒ‡æ ‡å¯¹æ¯”ï¼‰\",\n        x = \"\", y = \"é‡è¦æ€§\"\n    ) +\n    theme(axis.text.x = element_text(angle = 45, hjust = 1))",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "XGBoost æ¢¯åº¦æå‡"
    ]
  },
  {
    "objectID": "1068-xgboost.html#ç¬¬äº”éƒ¨åˆ†å›å½’ä»»åŠ¡",
    "href": "1068-xgboost.html#ç¬¬äº”éƒ¨åˆ†å›å½’ä»»åŠ¡",
    "title": "XGBoost æ¢¯åº¦æå‡ç®—æ³•å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šå›å½’ä»»åŠ¡",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šå›å½’ä»»åŠ¡\n\nå›å½’æ¨¡å‹\n\n# ä½¿ç”¨mtcarsæ•°æ®\ndata(mtcars)\ntrain_idx &lt;- sample(1:nrow(mtcars), 0.7 * nrow(mtcars))\n\ndtrain_reg &lt;- xgb.DMatrix(\n    data = as.matrix(mtcars[train_idx, -1]),\n    label = mtcars$mpg[train_idx]\n)\ndtest_reg &lt;- xgb.DMatrix(\n    data = as.matrix(mtcars[-train_idx, -1]),\n    label = mtcars$mpg[-train_idx]\n)\n\n# å›å½’å‚æ•°\nparams_reg &lt;- list(\n    objective = \"reg:squarederror\",\n    eval_metric = \"rmse\",\n    max_depth = 4,\n    eta = 0.1\n)\n\n# è®­ç»ƒ\nmodel_reg &lt;- xgb.train(\n    params = params_reg,\n    data = dtrain_reg,\n    nrounds = 100,\n    watchlist = list(train = dtrain_reg, test = dtest_reg),\n    verbose = 0\n)\n\n# é¢„æµ‹\npred_reg &lt;- predict(model_reg, dtest_reg)\nactual_reg &lt;- mtcars$mpg[-train_idx]\n\n# è¯„ä¼°\nrmse &lt;- sqrt(mean((pred_reg - actual_reg)^2))\nr_squared &lt;- cor(pred_reg, actual_reg)^2\n\ncat(\"RMSE:\", round(rmse, 3), \"\\n\")\n\nRMSE: 2.551 \n\ncat(\"RÂ²:\", round(r_squared, 3), \"\\n\")\n\nRÂ²: 0.82 \n\n\n\n\né¢„æµ‹vså®é™…\n\npred_df &lt;- data.frame(\n    actual = actual_reg,\n    predicted = pred_reg\n)\n\nggplot(pred_df, aes(x = actual, y = predicted)) +\n    geom_point(color = \"#4f46e5\", size = 3) +\n    geom_abline(\n        slope = 1, intercept = 0,\n        linetype = \"dashed\", color = \"red\"\n    ) +\n    labs(\n        title = \"XGBoost å›å½’ï¼šé¢„æµ‹ vs å®é™…\",\n        x = \"å®é™…å€¼\", y = \"é¢„æµ‹å€¼\"\n    ) +\n    annotate(\"text\",\n        x = 15, y = 30,\n        label = paste(\"RÂ² =\", round(r_squared, 3))\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "XGBoost æ¢¯åº¦æå‡"
    ]
  },
  {
    "objectID": "1068-xgboost.html#ç¬¬å…­éƒ¨åˆ†å¤šåˆ†ç±»",
    "href": "1068-xgboost.html#ç¬¬å…­éƒ¨åˆ†å¤šåˆ†ç±»",
    "title": "XGBoost æ¢¯åº¦æå‡ç®—æ³•å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šå¤šåˆ†ç±»",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šå¤šåˆ†ç±»\n\n# ä½¿ç”¨å®Œæ•´irisæ•°æ®ï¼ˆä¸‰åˆ†ç±»ï¼‰\niris_full &lt;- iris\niris_full$label &lt;- as.numeric(iris_full$Species) - 1\n\ntrain_idx &lt;- sample(1:nrow(iris_full), 0.7 * nrow(iris_full))\n\ndtrain_multi &lt;- xgb.DMatrix(\n    data = as.matrix(iris_full[train_idx, 1:4]),\n    label = iris_full$label[train_idx]\n)\ndtest_multi &lt;- xgb.DMatrix(\n    data = as.matrix(iris_full[-train_idx, 1:4]),\n    label = iris_full$label[-train_idx]\n)\n\n# å¤šåˆ†ç±»å‚æ•°\nparams_multi &lt;- list(\n    objective = \"multi:softmax\",\n    num_class = 3,\n    eval_metric = \"mlogloss\",\n    max_depth = 4,\n    eta = 0.1\n)\n\n# è®­ç»ƒ\nmodel_multi &lt;- xgb.train(\n    params = params_multi,\n    data = dtrain_multi,\n    nrounds = 50,\n    verbose = 0\n)\n\n# é¢„æµ‹\npred_multi &lt;- predict(model_multi, dtest_multi)\n\n# æ··æ·†çŸ©é˜µ\ntable(Predicted = pred_multi, Actual = iris_full$label[-train_idx])\n\n         Actual\nPredicted  0  1  2\n        0 18  0  0\n        1  0 13  2\n        2  0  0 12\n\n# å‡†ç¡®ç‡\naccuracy_multi &lt;- mean(pred_multi == iris_full$label[-train_idx])\ncat(\"å¤šåˆ†ç±»å‡†ç¡®ç‡:\", round(accuracy_multi, 4), \"\\n\")\n\nå¤šåˆ†ç±»å‡†ç¡®ç‡: 0.9556",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "XGBoost æ¢¯åº¦æå‡"
    ]
  },
  {
    "objectID": "1068-xgboost.html#ç¬¬ä¸ƒéƒ¨åˆ†ä¿å­˜ä¸åŠ è½½æ¨¡å‹",
    "href": "1068-xgboost.html#ç¬¬ä¸ƒéƒ¨åˆ†ä¿å­˜ä¸åŠ è½½æ¨¡å‹",
    "title": "XGBoost æ¢¯åº¦æå‡ç®—æ³•å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šä¿å­˜ä¸åŠ è½½æ¨¡å‹",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šä¿å­˜ä¸åŠ è½½æ¨¡å‹\n\n# ä¿å­˜æ¨¡å‹\nxgb.save(final_model, \"xgboost_model.bin\")\n\n[1] TRUE\n\n# åŠ è½½æ¨¡å‹\nmodel_loaded &lt;- xgb.load(\"xgboost_model.bin\")\n\n# éªŒè¯\npred_loaded &lt;- predict(model_loaded, dtest)\nall.equal(pred_prob, pred_loaded)\n\n[1] TRUE\n\n\n\n# æ¸…ç†ä¸´æ—¶æ–‡ä»¶\nif (file.exists(\"xgboost_model.bin\")) {\n    file.remove(\"xgboost_model.bin\")\n}\n\n[1] TRUE",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "XGBoost æ¢¯åº¦æå‡"
    ]
  },
  {
    "objectID": "1068-xgboost.html#ç¬¬å…«éƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "href": "1068-xgboost.html#ç¬¬å…«éƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "title": "XGBoost æ¢¯åº¦æå‡ç®—æ³•å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…«éƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬å…«éƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹\n\nå®Œæ•´å·¥ä½œæµç¨‹\n\n# ä½¿ç”¨çœŸå®æ•°æ®æ¨¡æ‹Ÿ\nset.seed(123)\nn &lt;- 1000\n\n# ç”Ÿæˆç‰¹å¾\nage &lt;- rnorm(n, 50, 12)\nbmi &lt;- rnorm(n, 26, 4)\nbp &lt;- rnorm(n, 130, 15)\nglucose &lt;- rnorm(n, 100, 25)\ncholesterol &lt;- rnorm(n, 200, 40)\n\n# ç”Ÿæˆæ ‡ç­¾ï¼ˆå—ç‰¹å¾å½±å“ï¼‰\nprob &lt;- plogis(-5 + 0.03 * age + 0.08 * bmi + 0.02 * bp + 0.01 * glucose + 0.005 * cholesterol)\noutcome &lt;- rbinom(n, 1, prob)\n\nsim_data &lt;- data.frame(\n    outcome, age, bmi, bp, glucose, cholesterol\n)\n\ncat(\"=== æ•°æ®æ¦‚è§ˆ ===\\n\")\n\n=== æ•°æ®æ¦‚è§ˆ ===\n\ncat(\"æ ·æœ¬é‡:\", n, \"\\n\")\n\næ ·æœ¬é‡: 1000 \n\ncat(\"é˜³æ€§ç‡:\", mean(outcome), \"\\n\")\n\né˜³æ€§ç‡: 0.953 \n\n\n\n# æ•°æ®åˆ†å‰²\ntrain_idx &lt;- sample(1:n, 0.7 * n)\nX_train &lt;- as.matrix(sim_data[train_idx, -1])\ny_train &lt;- sim_data$outcome[train_idx]\nX_test &lt;- as.matrix(sim_data[-train_idx, -1])\ny_test &lt;- sim_data$outcome[-train_idx]\n\ndtrain_case &lt;- xgb.DMatrix(data = X_train, label = y_train)\ndtest_case &lt;- xgb.DMatrix(data = X_test, label = y_test)\n\n\n# äº¤å‰éªŒè¯é€‰æ‹©æœ€ä½³å‚æ•°\ncv_case &lt;- xgb.cv(\n    params = list(\n        objective = \"binary:logistic\",\n        eval_metric = \"auc\",\n        max_depth = 4,\n        eta = 0.1,\n        subsample = 0.8,\n        colsample_bytree = 0.8\n    ),\n    data = dtrain_case,\n    nrounds = 200,\n    nfold = 5,\n    early_stopping_rounds = 20,\n    verbose = 0\n)\n\n# å¤„ç†best_iterationå¯èƒ½ä¸ºNULLçš„æƒ…å†µ\nbest_iter_case &lt;- cv_case$best_iteration\nif (is.null(best_iter_case) || length(best_iter_case) == 0) {\n    best_iter_case &lt;- 100\n}\ncat(\"\\næœ€ä½³è¿­ä»£:\", best_iter_case, \"\\n\")\n\n\næœ€ä½³è¿­ä»£: 100 \n\ncat(\"éªŒè¯é›†AUC:\", round(max(cv_case$evaluation_log$test_auc_mean), 4), \"\\n\")\n\néªŒè¯é›†AUC: 0.7119 \n\n\n\n# è®­ç»ƒæœ€ç»ˆæ¨¡å‹\nfinal_case &lt;- xgb.train(\n    params = list(\n        objective = \"binary:logistic\",\n        eval_metric = \"auc\",\n        max_depth = 4,\n        eta = 0.1,\n        subsample = 0.8,\n        colsample_bytree = 0.8\n    ),\n    data = dtrain_case,\n    nrounds = best_iter_case,\n    verbose = 0\n)\n\n# æµ‹è¯•é›†è¯„ä¼°\npred_case &lt;- predict(final_case, dtest_case)\n\n# AUC\nlibrary(pROC)\nroc_case &lt;- roc(y_test, pred_case)\ncat(\"\\næµ‹è¯•é›†AUC:\", round(auc(roc_case), 4), \"\\n\")\n\n\næµ‹è¯•é›†AUC: 0.5914 \n\n\n\n# ç‰¹å¾é‡è¦æ€§\nimportance_case &lt;- xgb.importance(\n    feature_names = colnames(sim_data)[-1],\n    model = final_case\n)\n\nxgb.plot.importance(importance_case)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "XGBoost æ¢¯åº¦æå‡"
    ]
  },
  {
    "objectID": "1068-xgboost.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "1068-xgboost.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "XGBoost æ¢¯åº¦æå‡ç®—æ³•å®Œå…¨æŒ‡å—",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# ===== æ•°æ®å‡†å¤‡ =====\ndtrain &lt;- xgb.DMatrix(data = X_matrix, label = y_vector)\n\n# ===== è®­ç»ƒ =====\nmodel &lt;- xgb.train(params, data, nrounds, watchlist, verbose)\n\n# ===== äº¤å‰éªŒè¯ =====\ncv &lt;- xgb.cv(params, data, nrounds, nfold, early_stopping_rounds)\n\n# ===== é¢„æµ‹ =====\npred &lt;- predict(model, dtest)\n\n# ===== ç‰¹å¾é‡è¦æ€§ =====\nimportance &lt;- xgb.importance(feature_names, model)\nxgb.plot.importance(importance)\n\n# ===== å¸¸ç”¨å‚æ•° =====\nparams &lt;- list(\n    objective = \"binary:logistic\",\n    eval_metric = \"auc\",\n    max_depth = 6,\n    eta = 0.1,\n    subsample = 0.8,\n    colsample_bytree = 0.8,\n    lambda = 1,\n    alpha = 0\n)\n\n# ===== ä¿å­˜/åŠ è½½ =====\nxgb.save(model, \"model.bin\")\nmodel &lt;- xgb.load(\"model.bin\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "XGBoost æ¢¯åº¦æå‡"
    ]
  },
  {
    "objectID": "1068-xgboost.html#å°ç»“",
    "href": "1068-xgboost.html#å°ç»“",
    "title": "XGBoost æ¢¯åº¦æå‡ç®—æ³•å®Œå…¨æŒ‡å—",
    "section": "å°ç»“",
    "text": "å°ç»“\nXGBoost è°ƒå‚é¡ºåºå»ºè®®ï¼š\n\nå…ˆç¡®å®šnroundsï¼šä½¿ç”¨æ—©åœ\nè°ƒmax_depthå’Œmin_child_weightï¼šæ§åˆ¶è¿‡æ‹Ÿåˆ\nè°ƒsubsampleå’Œcolsample_bytreeï¼šæ­£åˆ™åŒ–\nè°ƒetaï¼šé™ä½å­¦ä¹ ç‡ï¼Œå¢åŠ nrounds\nè°ƒlambdaå’Œalphaï¼šè¿›ä¸€æ­¥æ­£åˆ™åŒ–\n\n\næŠ€å·§ï¼šXGBooståœ¨ç»“æ„åŒ–è¡¨æ ¼æ•°æ®ä¸Šé€šå¸¸ä¼˜äºæ·±åº¦å­¦ä¹ ï¼Œæ˜¯æ•°æ®ç§‘å­¦ç«èµ›çš„å¿…å¤‡å·¥å…·ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "XGBoost æ¢¯åº¦æå‡"
    ]
  },
  {
    "objectID": "1068-xgboost.html#å‚è€ƒèµ„æº",
    "href": "1068-xgboost.html#å‚è€ƒèµ„æº",
    "title": "XGBoost æ¢¯åº¦æå‡ç®—æ³•å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nXGBoost å®˜æ–¹æ–‡æ¡£\nXGBoost RåŒ…\nXGBoostè®ºæ–‡",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "XGBoost æ¢¯åº¦æå‡"
    ]
  },
  {
    "objectID": "index.html#targets-ç®€ä»‹",
    "href": "index.html#targets-ç®€ä»‹",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "targets ç®€ä»‹",
    "text": "targets ç®€ä»‹\ntargets æ˜¯ R è¯­è¨€ä¸­ç®¡ç†åˆ†æå·¥ä½œæµçš„ç°ä»£åŒ–å·¥å…·ï¼Œå®ƒèƒ½å¤Ÿè¿½è¸ªä»£ç å’Œæ•°æ®çš„å˜åŒ–ï¼Œåªé‡æ–°è¿è¡Œéœ€è¦æ›´æ–°çš„éƒ¨åˆ†ï¼Œå¤§å¤§æé«˜äº†åˆ†ææ•ˆç‡å’Œå¯é‡å¤æ€§ã€‚\n\nä¸ºä»€ä¹ˆä½¿ç”¨ targetsï¼Ÿ\n\n\n\nä¼ ç»Ÿæ–¹å¼\ntargets æ–¹å¼\n\n\n\n\næ‰‹åŠ¨è¿è¡Œè„šæœ¬\nè‡ªåŠ¨ä¾èµ–è¿½è¸ª\n\n\nå…¨éƒ¨é‡æ–°è¿è¡Œ\nå¢é‡æ„å»º\n\n\nç»“æœéš¾ä»¥ç¼“å­˜\nè‡ªåŠ¨ç¼“å­˜\n\n\néš¾ä»¥å¹¶è¡Œ\nåŸç”Ÿå¹¶è¡Œæ”¯æŒ\n\n\n\n\n\næ ¸å¿ƒæ¦‚å¿µ\n\nTargetï¼ˆç›®æ ‡ï¼‰ï¼šåˆ†ææµç¨‹ä¸­çš„ä¸€ä¸ªæ­¥éª¤åŠå…¶è¾“å‡º\nPipelineï¼ˆç®¡é“ï¼‰ï¼štargetsçš„æœ‰åºé›†åˆ\nä¾èµ–å›¾ï¼štargetsä¹‹é—´çš„ä¾èµ–å…³ç³»\nç¼“å­˜ï¼šå·²è®¡ç®—ç»“æœçš„å­˜å‚¨"
  },
  {
    "objectID": "index.html#ç¬¬äºŒéƒ¨åˆ†è¿è¡Œç®¡é“",
    "href": "index.html#ç¬¬äºŒéƒ¨åˆ†è¿è¡Œç®¡é“",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šè¿è¡Œç®¡é“",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šè¿è¡Œç®¡é“\n\nåŸºæœ¬å‘½ä»¤\n# æ£€æŸ¥ç®¡é“çŠ¶æ€\ntar_manifest()\n\n# å¯è§†åŒ–ä¾èµ–å›¾\ntar_visnetwork()\n\n# è¿è¡Œæ•´ä¸ªç®¡é“\ntar_make()\n\n# è¯»å–ç»“æœ\ntar_read(clean_data)\ntar_read(model)\n\n# åŠ è½½ç»“æœåˆ°ç¯å¢ƒ\ntar_load(report)\nprint(report)\n\n\nå¢é‡æ„å»º\n# ä¿®æ”¹ clean_data_fn åå†æ¬¡è¿è¡Œ\ntar_make()\n# åªæœ‰ clean_data åŠå…¶ä¸‹æ¸¸ç›®æ ‡ä¼šé‡æ–°è¿è¡Œ\n\n# æ£€æŸ¥å“ªäº›ç›®æ ‡è¿‡æœŸ\ntar_outdated()"
  },
  {
    "objectID": "index.html#ç¬¬ä¸‰éƒ¨åˆ†è¿›é˜¶ç”¨æ³•",
    "href": "index.html#ç¬¬ä¸‰éƒ¨åˆ†è¿›é˜¶ç”¨æ³•",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šè¿›é˜¶ç”¨æ³•",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šè¿›é˜¶ç”¨æ³•\n\nåˆ†æ”¯ï¼ˆBranchingï¼‰\n# åŠ¨æ€åˆ†æ”¯ï¼šå¯¹å¤šä¸ªæ•°æ®é›†/å‚æ•°å¹¶è¡Œå¤„ç†\nlist(\n    # å®šä¹‰å‚æ•°\n    tar_target(alphas, c(0.1, 0.5, 1.0)),\n\n    # åŠ¨æ€åˆ†æ”¯ï¼šæ¯ä¸ªalphaå€¼ç‹¬ç«‹è¿è¡Œ\n    tar_target(\n        models,\n        fit_lasso(data, alpha = alphas),\n        pattern = map(alphas) # æ˜ å°„åˆ°æ¯ä¸ªalpha\n    ),\n\n    # æ±‡æ€»æ‰€æœ‰æ¨¡å‹ç»“æœ\n    tar_target(comparison, compare_models(models))\n)\n\n\né™æ€åˆ†æ”¯\n# ä½¿ç”¨ tar_map åˆ›å»ºå¤šä¸ªç±»ä¼¼ç›®æ ‡\ntar_map(\n    values = list(\n        dataset = c(\"train\", \"test\", \"validation\")\n    ),\n    tar_target(data, load_dataset(dataset)),\n    tar_target(metrics, evaluate_model(model, data))\n)"
  },
  {
    "objectID": "index.html#ç¬¬å››éƒ¨åˆ†ä¸-r-markdownquarto-é›†æˆ",
    "href": "index.html#ç¬¬å››éƒ¨åˆ†ä¸-r-markdownquarto-é›†æˆ",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šä¸ R Markdown/Quarto é›†æˆ",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šä¸ R Markdown/Quarto é›†æˆ\n\næ¸²æŸ“æŠ¥å‘Š\nlist(\n    tar_target(data, prepare_data()),\n    tar_target(model, fit_model(data)),\n\n    # æ¸²æŸ“ R Markdown æŠ¥å‘Š\n    tar_render(report, \"report.Rmd\"),\n\n    # æ¸²æŸ“ Quarto æ–‡æ¡£\n    tar_quarto(quarto_doc, \"analysis.qmd\")\n)\n\n\nåœ¨æŠ¥å‘Šä¸­ä½¿ç”¨ targets\n# åœ¨ R Markdown ä¸­\n# ```{r}\n# library(targets)\n# tar_load(model)\n# tar_read(data)\n# ```"
  },
  {
    "objectID": "index.html#ç¬¬äº”éƒ¨åˆ†å¹¶è¡Œè®¡ç®—",
    "href": "index.html#ç¬¬äº”éƒ¨åˆ†å¹¶è¡Œè®¡ç®—",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šå¹¶è¡Œè®¡ç®—",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šå¹¶è¡Œè®¡ç®—\n\né…ç½®å¹¶è¡Œ\n# åœ¨ _targets.R ä¸­\nlibrary(targets)\nlibrary(future)\nlibrary(future.callr)\n\n# ä½¿ç”¨ future å¹¶è¡Œåç«¯\ntar_option_set(\n    controller = crew::crew_controller_local(workers = 4)\n)\n\n# æˆ–ä½¿ç”¨ future\nplan(multisession, workers = 4)\n\n\nå¹¶è¡Œè¿è¡Œ\n# å¹¶è¡Œæ‰§è¡Œç®¡é“\ntar_make_future(workers = 4)\n\n# æˆ–ä½¿ç”¨ crew\ntar_make() # è‡ªåŠ¨ä½¿ç”¨é…ç½®çš„å¹¶è¡Œ"
  },
  {
    "objectID": "index.html#ç¬¬ä¸ƒéƒ¨åˆ†è°ƒè¯•ä¸æœ€ä½³å®è·µ",
    "href": "index.html#ç¬¬ä¸ƒéƒ¨åˆ†è°ƒè¯•ä¸æœ€ä½³å®è·µ",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šè°ƒè¯•ä¸æœ€ä½³å®è·µ",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šè°ƒè¯•ä¸æœ€ä½³å®è·µ\n\nè°ƒè¯•\n# æ£€æŸ¥å•ä¸ªç›®æ ‡\ntar_load(raw_data)\ntar_load_everything()\n\n# æŸ¥çœ‹æ„å»ºå…ƒæ•°æ®\ntar_meta()\n\n# åˆ é™¤ç¼“å­˜é‡æ–°å¼€å§‹\ntar_destroy()\n\n# æ¸…ç†ç‰¹å®šç›®æ ‡\ntar_delete(clean_data)\n\n\næœ€ä½³å®è·µ\n# 1. ä½¿ç”¨å‡½æ•°è€Œéè„šæœ¬\n# å¥½\ntar_target(result, my_function(data))\n\n# é¿å…\ntar_target(result, {\n    # å¾ˆé•¿çš„ä»£ç å—...\n})\n\n# 2. å°ç²’åº¦ç›®æ ‡\n# ä¾¿äºå¢é‡æ›´æ–°å’Œå¹¶è¡Œ\n\n# 3. ä½¿ç”¨ format ä¼˜åŒ–å­˜å‚¨\ntar_target(large_data, big_computation(), format = \"qs\")\n\n# 4. æ–‡ä»¶è¿½è¸ª\ntar_target(input_file, \"data.csv\", format = \"file\")"
  },
  {
    "objectID": "index.html#å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥",
    "href": "index.html#å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥",
    "text": "å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥\n# ===== ç®¡é“æ“ä½œ =====\ntar_make() # è¿è¡Œç®¡é“\ntar_make_future() # å¹¶è¡Œè¿è¡Œ\ntar_visnetwork() # å¯è§†åŒ–ä¾èµ–å›¾\ntar_manifest() # æŸ¥çœ‹ç›®æ ‡æ¸…å•\n\n# ===== è¯»å–ç»“æœ =====\ntar_read(target_name) # è¯»å–ç›®æ ‡\ntar_load(target_name) # åŠ è½½åˆ°ç¯å¢ƒ\ntar_load_everything() # åŠ è½½æ‰€æœ‰\n\n# ===== çŠ¶æ€æ£€æŸ¥ =====\ntar_outdated() # è¿‡æœŸçš„ç›®æ ‡\ntar_progress() # æ„å»ºè¿›åº¦\ntar_meta() # å…ƒæ•°æ®\n\n# ===== æ¸…ç† =====\ntar_destroy() # åˆ é™¤æ‰€æœ‰ç¼“å­˜\ntar_delete(name) # åˆ é™¤ç‰¹å®šç›®æ ‡\ntar_invalidate(name) # æ ‡è®°ä¸ºè¿‡æœŸ\n\n# ===== ç›®æ ‡ç±»å‹ =====\ntar_target() # åŸºæœ¬ç›®æ ‡\ntar_render() # R Markdown\ntar_quarto() # Quarto\ntar_file() # æ–‡ä»¶ç›®æ ‡"
  },
  {
    "objectID": "index.html#arrow-ç®€ä»‹",
    "href": "index.html#arrow-ç®€ä»‹",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "arrow ç®€ä»‹",
    "text": "arrow ç®€ä»‹\narrow æ˜¯ Apache Arrow é¡¹ç›®çš„ R æ¥å£ï¼Œæä¾›äº†é«˜æ•ˆçš„å¤§æ•°æ®å¤„ç†èƒ½åŠ›ã€‚å®ƒæ”¯æŒ Parquet ç­‰åˆ—å¼å­˜å‚¨æ ¼å¼ï¼Œå®ç°å†…å­˜å¤–è®¡ç®—ï¼Œå¹¶ä¸ dplyr æ— ç¼é›†æˆã€‚\n\nä¸ºä»€ä¹ˆä½¿ç”¨ arrowï¼Ÿ\n\n\n\nä¼ ç»Ÿæ–¹å¼\narrow æ–¹å¼\n\n\n\n\nCSV è¯»å†™æ…¢\nParquet é«˜é€Ÿè¯»å†™\n\n\nå…¨éƒ¨åŠ è½½å†…å­˜\nå†…å­˜å¤–æ‡’è®¡ç®—\n\n\nå•è¯­è¨€ä½¿ç”¨\nè·¨è¯­è¨€äº’æ“ä½œ\n\n\næ•°æ®ç±»å‹ä¸¢å¤±\nä¿ç•™å®Œæ•´ç±»å‹\n\n\n\n\n\næ ¸å¿ƒä¼˜åŠ¿\n\nParquet æ ¼å¼ï¼šåˆ—å¼å­˜å‚¨ï¼Œé«˜å‹ç¼©æ¯”ï¼Œå¿«é€ŸæŸ¥è¯¢\né›¶æ‹·è´ï¼šè·¨è¯­è¨€å…±äº«æ•°æ®æ— éœ€å¤åˆ¶\næƒ°æ€§æ±‚å€¼ï¼šåªè®¡ç®—éœ€è¦çš„éƒ¨åˆ†\ndplyr åç«¯ï¼šç†Ÿæ‚‰çš„è¯­æ³•å¤„ç†å¤§æ•°æ®"
  },
  {
    "objectID": "index.html#ç¬¬ä¸€éƒ¨åˆ†parquet-æ–‡ä»¶æ“ä½œ",
    "href": "index.html#ç¬¬ä¸€éƒ¨åˆ†parquet-æ–‡ä»¶æ“ä½œ",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šParquet æ–‡ä»¶æ“ä½œ",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šParquet æ–‡ä»¶æ“ä½œ\n\nå†™å…¥ Parquet\n# åˆ›å»ºç¤ºä¾‹æ•°æ®\nn &lt;- 100000\ndata &lt;- data.frame(\n    id = 1:n,\n    category = sample(LETTERS[1:5], n, replace = TRUE),\n    value = rnorm(n, 100, 15),\n    date = seq.Date(as.Date(\"2020-01-01\"), by = \"day\", length.out = n)\n)\n\n# å†™å…¥ Parquet\nwrite_parquet(data, \"example.parquet\")\n\n# æŸ¥çœ‹æ–‡ä»¶å¤§å°\ncsv_size &lt;- object.size(write.csv(data, textConnection(\"csv_out\")))\nparquet_size &lt;- file.info(\"example.parquet\")$size\ncat(\"Parquet æ–‡ä»¶å¤§å°:\", round(parquet_size / 1024 / 1024, 2), \"MB\\n\")\n\n\nè¯»å– Parquet\n# å®Œæ•´è¯»å–\ndf &lt;- read_parquet(\"example.parquet\")\ncat(\"è¯»å–è¡Œæ•°:\", nrow(df), \"\\n\")\n\n# åªè¯»å–ç‰¹å®šåˆ—\ndf_subset &lt;- read_parquet(\"example.parquet\",\n    col_select = c(\"id\", \"category\", \"value\")\n)\ncat(\"å­é›†åˆ—æ•°:\", ncol(df_subset), \"\\n\")\n\n\nParquet å…ƒæ•°æ®\n# æŸ¥çœ‹ schema\nschema &lt;- open_dataset(\"example.parquet\")$schema\nprint(schema)"
  },
  {
    "objectID": "index.html#ç¬¬äºŒéƒ¨åˆ†å†…å­˜å¤–è®¡ç®—",
    "href": "index.html#ç¬¬äºŒéƒ¨åˆ†å†…å­˜å¤–è®¡ç®—",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šå†…å­˜å¤–è®¡ç®—",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šå†…å­˜å¤–è®¡ç®—\n\nä½¿ç”¨ open_dataset\n# æ‰“å¼€æ•°æ®é›†ï¼ˆä¸åŠ è½½åˆ°å†…å­˜ï¼‰\nds &lt;- open_dataset(\"example.parquet\")\ncat(\"æ•°æ®é›†ç±»å‹:\", class(ds)[1], \"\\n\")\n\n# ä½¿ç”¨ dplyr è¯­æ³•æŸ¥è¯¢\nresult &lt;- ds %&gt;%\n    filter(category == \"A\") %&gt;%\n    group_by(category) %&gt;%\n    summarise(\n        n = n(),\n        mean_value = mean(value),\n        .groups = \"drop\"\n    ) %&gt;%\n    collect() # åªåœ¨æœ€åæ‰åŠ è½½åˆ°å†…å­˜\n\nprint(result)\n\n\næƒ°æ€§æ±‚å€¼\n# æ„å»ºæŸ¥è¯¢ï¼ˆä¸æ‰§è¡Œï¼‰\nquery &lt;- ds %&gt;%\n    filter(value &gt; 100) %&gt;%\n    mutate(value_squared = value^2) %&gt;%\n    arrange(desc(value))\n\n# æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’\ncat(\"è¿™æ˜¯æƒ°æ€§æŸ¥è¯¢ï¼Œå°šæœªæ‰§è¡Œ\\n\")\ncat(\"ç±»å‹:\", class(query)[1], \"\\n\")\n\n# æ‰§è¡ŒæŸ¥è¯¢\nresult &lt;- query %&gt;%\n    head(5) %&gt;%\n    collect()\n\nprint(result)"
  },
  {
    "objectID": "index.html#ç¬¬ä¸‰éƒ¨åˆ†åˆ†åŒºæ•°æ®é›†",
    "href": "index.html#ç¬¬ä¸‰éƒ¨åˆ†åˆ†åŒºæ•°æ®é›†",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šåˆ†åŒºæ•°æ®é›†",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šåˆ†åŒºæ•°æ®é›†\n\nå†™å…¥åˆ†åŒºæ•°æ®\n# æŒ‰ category åˆ†åŒºå†™å…¥\nwrite_dataset(\n    data,\n    \"partitioned_data\",\n    partitioning = \"category\"\n)\n\n# æŸ¥çœ‹ç›®å½•ç»“æ„\nlist.files(\"partitioned_data\", recursive = TRUE)\n\n\nè¯»å–åˆ†åŒºæ•°æ®\n# è‡ªåŠ¨è¯†åˆ«åˆ†åŒº\nds_partitioned &lt;- open_dataset(\"partitioned_data\")\n\n# åˆ†åŒºè£å‰ªï¼šåªæ‰«æéœ€è¦çš„åˆ†åŒº\nresult &lt;- ds_partitioned %&gt;%\n    filter(category == \"A\") %&gt;% # åªè¯»å– A åˆ†åŒº\n    summarise(mean_value = mean(value)) %&gt;%\n    collect()\n\ncat(\"A ç±»åˆ«å¹³å‡å€¼:\", round(result$mean_value, 2), \"\\n\")"
  },
  {
    "objectID": "index.html#ç¬¬å››éƒ¨åˆ†ä¸-dplyr-æ·±åº¦é›†æˆ",
    "href": "index.html#ç¬¬å››éƒ¨åˆ†ä¸-dplyr-æ·±åº¦é›†æˆ",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šä¸ dplyr æ·±åº¦é›†æˆ",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šä¸ dplyr æ·±åº¦é›†æˆ\n\nå®Œæ•´çš„ dplyr ç®¡é“\n# å¤æ‚æŸ¥è¯¢\nanalysis &lt;- ds %&gt;%\n    filter(value &gt; 80) %&gt;%\n    mutate(\n        year = year(date),\n        month = month(date),\n        value_group = case_when(\n            value &gt; 120 ~ \"é«˜\",\n            value &gt; 100 ~ \"ä¸­\",\n            TRUE ~ \"ä½\"\n        )\n    ) %&gt;%\n    group_by(category, value_group) %&gt;%\n    summarise(\n        count = n(),\n        mean_val = mean(value),\n        sd_val = sd(value),\n        .groups = \"drop\"\n    ) %&gt;%\n    arrange(category, desc(count)) %&gt;%\n    collect()\n\nprint(analysis)\n\n\nå¯è§†åŒ–å¤§æ•°æ®æ±‡æ€»\n# ä» Arrow ç›´æ¥æ±‡æ€»åå¯è§†åŒ–\nmonthly_trend &lt;- ds %&gt;%\n    mutate(\n        year_month = floor_date(date, \"month\")\n    ) %&gt;%\n    group_by(year_month, category) %&gt;%\n    summarise(mean_value = mean(value), .groups = \"drop\") %&gt;%\n    collect()\n\nggplot(monthly_trend, aes(x = year_month, y = mean_value, color = category)) +\n    geom_line(linewidth = 0.8) +\n    labs(\n        title = \"æœˆåº¦è¶‹åŠ¿ï¼ˆä»Parquetæ•°æ®é›†è®¡ç®—ï¼‰\",\n        x = \"æœˆä»½\", y = \"å¹³å‡å€¼\", color = \"ç±»åˆ«\"\n    ) +\n    theme_bw()"
  },
  {
    "objectID": "index.html#ç¬¬äº”éƒ¨åˆ†è·¨è¯­è¨€äº’æ“ä½œ",
    "href": "index.html#ç¬¬äº”éƒ¨åˆ†è·¨è¯­è¨€äº’æ“ä½œ",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šè·¨è¯­è¨€äº’æ“ä½œ",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šè·¨è¯­è¨€äº’æ“ä½œ\n\nArrow ä¸ Python å…±äº«æ•°æ®\n```{r eval=FALSE} # R ä¸­å†™å…¥ Arrow æ ¼å¼ write_feather(data, â€œshared_data.arrowâ€)"
  },
  {
    "objectID": "index.html#ç¬¬å…­éƒ¨åˆ†æ€§èƒ½ä¼˜åŒ–",
    "href": "index.html#ç¬¬å…­éƒ¨åˆ†æ€§èƒ½ä¼˜åŒ–",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šæ€§èƒ½ä¼˜åŒ–",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šæ€§èƒ½ä¼˜åŒ–\n\nåˆ—é€‰æ‹©\n# åªè¯»å–éœ€è¦çš„åˆ—\nsystem.time({\n    result &lt;- read_parquet(\"example.parquet\",\n        col_select = c(\"id\", \"value\")\n    )\n})\n\n\nè¡Œè¿‡æ»¤ä¸‹æ¨\n# è¿‡æ»¤æ¡ä»¶ä¸‹æ¨åˆ°å­˜å‚¨å±‚\nsystem.time({\n    result &lt;- ds %&gt;%\n        filter(category == \"A\", value &gt; 100) %&gt;%\n        collect()\n})\ncat(\"è¿‡æ»¤åè¡Œæ•°:\", nrow(result), \"\\n\")\n\n\nå¹¶è¡Œè¯»å–\n# Arrow è‡ªåŠ¨ä½¿ç”¨å¤šçº¿ç¨‹\narrow::set_cpu_count(4) # è®¾ç½®çº¿ç¨‹æ•°\ncat(\"å½“å‰ CPU çº¿ç¨‹æ•°:\", arrow::cpu_count(), \"\\n\")"
  },
  {
    "objectID": "index.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "href": "index.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹\n\nè¯ç‰©æ²»ç–—æ•ˆæœè¯„ä¼°\n# æ¨¡æ‹Ÿè¯ç‰©ç ”ç©¶\nn &lt;- 2000\n\n# æ‚£è€…ç‰¹å¾\nage &lt;- round(rnorm(n, 60, 12))\ndiabetes &lt;- rbinom(n, 1, 0.25)\nhypertension &lt;- rbinom(n, 1, 0.4)\nprevious_event &lt;- rbinom(n, 1, 0.15)\nldl &lt;- rnorm(n, 130, 30)\n\n# è¯ç‰©åˆ†é…ï¼ˆåŒ»ç”Ÿåå¥½ + æ‚£è€…ç‰¹å¾ï¼‰\nps &lt;- plogis(-1 + 0.02 * age + 0.5 * diabetes + 0.3 * hypertension +\n    0.8 * previous_event + 0.01 * ldl)\ndrug &lt;- rbinom(n, 1, ps)\n\n# å¿ƒè¡€ç®¡äº‹ä»¶é£é™©\nbaseline_risk &lt;- plogis(-3 + 0.03 * age + 0.5 * diabetes + 0.4 * hypertension +\n    previous_event + 0.01 * ldl)\n# è¯ç‰©é™ä½é£é™©\ndrug_effect &lt;- -0.3\nevent_prob &lt;- plogis(qlogis(baseline_risk) + drug_effect * drug)\ncv_event &lt;- rbinom(n, 1, event_prob)\n\ndrug_data &lt;- data.frame(age, diabetes, hypertension, previous_event, ldl, drug, cv_event)\n\ncat(\"è¯ç‰©ä½¿ç”¨ç‡:\", mean(drug), \"\\n\")\ncat(\"äº‹ä»¶å‘ç”Ÿç‡:\", mean(cv_event), \"\\n\")\n# IPWåˆ†æ\nW_drug &lt;- weightit(drug ~ age + diabetes + hypertension + previous_event + ldl,\n    data = drug_data, method = \"ps\", estimand = \"ATE\"\n)\n\n# æ£€æŸ¥å¹³è¡¡\nbal.tab(W_drug, stats = \"m\", thresholds = c(m = 0.1))\n# åŠ æƒlogisticå›å½’\ndrug_data$weights &lt;- W_drug$weights\ndesign_drug &lt;- svydesign(ids = ~1, weights = ~weights, data = drug_data)\n\ndrug_effect_model &lt;- svyglm(cv_event ~ drug, design = design_drug, family = quasibinomial)\nsummary(drug_effect_model)\n\n# è®¡ç®—é£é™©æ¯”\nor &lt;- exp(coef(drug_effect_model)[\"drug\"])\ncat(\"\\nè¯ç‰©çš„OR:\", round(or, 3), \"\\n\")"
  },
  {
    "objectID": "index.html#æ¸…ç†",
    "href": "index.html#æ¸…ç†",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "æ¸…ç†",
    "text": "æ¸…ç†\n# åˆ é™¤ä¸´æ—¶æ–‡ä»¶\nunlink(\"example.parquet\")\nunlink(\"data.arrow\")\nunlink(\"partitioned_data\", recursive = TRUE)\nunlink(\"healthcare_data\", recursive = TRUE)"
  },
  {
    "objectID": "index.html#prophet-ç®€ä»‹",
    "href": "index.html#prophet-ç®€ä»‹",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "prophet ç®€ä»‹",
    "text": "prophet ç®€ä»‹\nprophet æ˜¯ Metaï¼ˆFacebookï¼‰å¼€æºçš„æ—¶é—´åºåˆ—é¢„æµ‹å·¥å…·ï¼Œä¸“ä¸ºå•†ä¸šé¢„æµ‹è®¾è®¡ã€‚å®ƒèƒ½å¤Ÿè‡ªåŠ¨å¤„ç†è¶‹åŠ¿ã€å­£èŠ‚æ€§å’ŒèŠ‚å‡æ—¥æ•ˆåº”ï¼Œéå¸¸é€‚åˆéä¸“ä¸šç”¨æˆ·å¿«é€Ÿè·å¾—é«˜è´¨é‡é¢„æµ‹ã€‚\n\nä¸ºä»€ä¹ˆä½¿ç”¨ prophetï¼Ÿ\n\n\n\nä¼ ç»Ÿæ–¹æ³•\nprophet ä¼˜åŠ¿\n\n\n\n\néœ€è¦ä¸“ä¸šçŸ¥è¯†\nè‡ªåŠ¨åŒ–ç¨‹åº¦é«˜\n\n\næ‰‹åŠ¨å¤„ç†å­£èŠ‚æ€§\nè‡ªåŠ¨æ£€æµ‹å¤šé‡å­£èŠ‚æ€§\n\n\nç¼ºå¤±å€¼æ•æ„Ÿ\nç¨³å¥å¤„ç†ç¼ºå¤±\n\n\néš¾ä»¥è§£é‡Š\nå¯åˆ†è§£ã€å¯è§£é‡Š\n\n\n\n\n\næ ¸å¿ƒæ¨¡å‹\nprophet å°†æ—¶é—´åºåˆ—åˆ†è§£ä¸ºï¼š \\[y(t) = g(t) + s(t) + h(t) + \\epsilon_t\\]\n\n\\(g(t)\\)ï¼šè¶‹åŠ¿ï¼ˆå¢é•¿æ›²çº¿ï¼‰\n\\(s(t)\\)ï¼šå­£èŠ‚æ€§ï¼ˆå‘¨/å¹´å‘¨æœŸï¼‰\n\\(h(t)\\)ï¼šèŠ‚å‡æ—¥æ•ˆåº”\n\\(\\epsilon_t\\)ï¼šæ®‹å·®"
  },
  {
    "objectID": "index.html#ç¬¬ä¸€éƒ¨åˆ†å¿«é€Ÿå…¥é—¨-1",
    "href": "index.html#ç¬¬ä¸€éƒ¨åˆ†å¿«é€Ÿå…¥é—¨-1",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šå¿«é€Ÿå…¥é—¨",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šå¿«é€Ÿå…¥é—¨\n\næ•°æ®æ ¼å¼\n# prophet è¦æ±‚ä¸¤åˆ—ï¼šds (æ—¥æœŸ) å’Œ y (æ•°å€¼)\n# ä½¿ç”¨å†…ç½®ç¤ºä¾‹æ•°æ®\ndf &lt;- read.csv(\n    \"https://raw.githubusercontent.com/facebook/prophet/main/examples/example_wp_log_peyton_manning.csv\"\n)\n\nhead(df)\ncat(\"\\næ•°æ®èŒƒå›´:\", min(df$ds), \"è‡³\", max(df$ds), \"\\n\")\ncat(\"æ•°æ®ç‚¹æ•°:\", nrow(df), \"\\n\")\n\n\næ‹Ÿåˆæ¨¡å‹\n# åŸºæœ¬æ‹Ÿåˆ\nm &lt;- prophet(df)\n\n# æŸ¥çœ‹æ¨¡å‹ç»„ä»¶\ncat(\"æ¨¡å‹åŒ…å«çš„ç»„ä»¶:\\n\")\ncat(\"- è¶‹åŠ¿ç±»å‹:\", m$growth, \"\\n\")\ncat(\"- å­£èŠ‚æ€§:\", names(m$seasonalities), \"\\n\")\n\n\nç”Ÿæˆé¢„æµ‹\n# åˆ›å»ºæœªæ¥æ—¥æœŸæ¡†æ¶\nfuture &lt;- make_future_dataframe(m, periods = 365)\ntail(future)\n\n# é¢„æµ‹\nforecast &lt;- predict(m, future)\ncat(\"\\né¢„æµ‹åˆ—:\", head(names(forecast)), \"...\\n\")\n\n\nå¯è§†åŒ–\n# é¢„æµ‹å›¾\nplot(m, forecast) +\n    labs(\n        title = \"Prophet æ—¶é—´åºåˆ—é¢„æµ‹\",\n        x = \"æ—¥æœŸ\", y = \"æ•°å€¼\"\n    )\n# ç»„ä»¶åˆ†è§£å›¾\nprophet_plot_components(m, forecast)"
  },
  {
    "objectID": "index.html#ç¬¬äºŒéƒ¨åˆ†è¶‹åŠ¿å»ºæ¨¡",
    "href": "index.html#ç¬¬äºŒéƒ¨åˆ†è¶‹åŠ¿å»ºæ¨¡",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šè¶‹åŠ¿å»ºæ¨¡",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šè¶‹åŠ¿å»ºæ¨¡\n\nçº¿æ€§è¶‹åŠ¿\n# é»˜è®¤çº¿æ€§è¶‹åŠ¿\nm_linear &lt;- prophet(df, growth = \"linear\")\n\nforecast_linear &lt;- predict(m_linear, future)\nplot(m_linear, forecast_linear) +\n    ggtitle(\"çº¿æ€§è¶‹åŠ¿\")\n\n\nLogistic å¢é•¿\n# è®¾ç½®å®¹é‡ä¸Šé™\ndf_logistic &lt;- df\ndf_logistic$cap &lt;- 10 # ä¸Šé™\ndf_logistic$floor &lt;- 0 # ä¸‹é™ï¼ˆå¯é€‰ï¼‰\n\n# ä½¿ç”¨ logistic å¢é•¿\nm_logistic &lt;- prophet(df_logistic, growth = \"logistic\")\n\nfuture_logistic &lt;- make_future_dataframe(m_logistic, periods = 365)\nfuture_logistic$cap &lt;- 10\nfuture_logistic$floor &lt;- 0\n\nforecast_logistic &lt;- predict(m_logistic, future_logistic)\nplot(m_logistic, forecast_logistic) +\n    ggtitle(\"Logistic å¢é•¿ï¼ˆæœ‰ä¸Šé™ï¼‰\")\n\n\nè¶‹åŠ¿å˜ç‚¹\n# æŸ¥çœ‹è‡ªåŠ¨æ£€æµ‹çš„å˜ç‚¹\ncat(\"æ£€æµ‹åˆ°çš„è¶‹åŠ¿å˜ç‚¹:\\n\")\nprint(head(m$changepoints))\n\n# å¯è§†åŒ–å˜ç‚¹\nplot(m, forecast) +\n    geom_vline(\n        xintercept = as.numeric(m$changepoints),\n        linetype = \"dashed\", color = \"red\", alpha = 0.5\n    ) +\n    ggtitle(\"è¶‹åŠ¿å˜ç‚¹æ ‡æ³¨\")"
  },
  {
    "objectID": "index.html#ç¬¬ä¸‰éƒ¨åˆ†å­£èŠ‚æ€§",
    "href": "index.html#ç¬¬ä¸‰éƒ¨åˆ†å­£èŠ‚æ€§",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šå­£èŠ‚æ€§",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šå­£èŠ‚æ€§\n\nè‡ªåŠ¨å­£èŠ‚æ€§\n# æŸ¥çœ‹é»˜è®¤å­£èŠ‚æ€§\ncat(\"å¹´åº¦å­£èŠ‚æ€§:\", m$yearly.seasonality, \"\\n\")\ncat(\"å‘¨å­£èŠ‚æ€§:\", m$weekly.seasonality, \"\\n\")\ncat(\"æ—¥å­£èŠ‚æ€§:\", m$daily.seasonality, \"\\n\")\n\n\nè‡ªå®šä¹‰å­£èŠ‚æ€§\n# ç¦ç”¨é»˜è®¤å­£èŠ‚æ€§ï¼Œæ·»åŠ è‡ªå®šä¹‰\nm_custom &lt;- prophet(weekly.seasonality = FALSE, yearly.seasonality = FALSE)\n\n# æ·»åŠ è‡ªå®šä¹‰å­£èŠ‚æ€§\nm_custom &lt;- add_seasonality(m_custom,\n    name = \"monthly\",\n    period = 30.5, fourier.order = 5\n)\nm_custom &lt;- add_seasonality(m_custom,\n    name = \"yearly\",\n    period = 365.25, fourier.order = 10\n)\n\nm_custom &lt;- fit.prophet(m_custom, df)\n\nforecast_custom &lt;- predict(m_custom, future)\nprophet_plot_components(m_custom, forecast_custom)"
  },
  {
    "objectID": "index.html#ç¬¬å››éƒ¨åˆ†èŠ‚å‡æ—¥æ•ˆåº”",
    "href": "index.html#ç¬¬å››éƒ¨åˆ†èŠ‚å‡æ—¥æ•ˆåº”",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šèŠ‚å‡æ—¥æ•ˆåº”",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šèŠ‚å‡æ—¥æ•ˆåº”\n\næ·»åŠ èŠ‚å‡æ—¥\n# å®šä¹‰èŠ‚å‡æ—¥\nplayoffs &lt;- data.frame(\n    holiday = \"playoff\",\n    ds = as.Date(c(\n        \"2008-01-13\", \"2009-01-03\", \"2010-01-16\",\n        \"2010-01-24\", \"2010-02-07\", \"2011-01-08\",\n        \"2013-01-12\", \"2014-01-12\", \"2014-01-19\",\n        \"2014-02-02\", \"2015-01-11\", \"2016-01-17\"\n    )),\n    lower_window = 0,\n    upper_window = 1 # å½±å“å½“å¤©å’Œåä¸€å¤©\n)\n\nsuperbowls &lt;- data.frame(\n    holiday = \"superbowl\",\n    ds = as.Date(c(\"2010-02-07\", \"2014-02-02\")),\n    lower_window = 0,\n    upper_window = 1\n)\n\nholidays &lt;- bind_rows(playoffs, superbowls)\nprint(holidays)\n# ä½¿ç”¨èŠ‚å‡æ—¥æ‹Ÿåˆ\nm_holidays &lt;- prophet(df, holidays = holidays)\nforecast_holidays &lt;- predict(m_holidays, future)\n\n# æŸ¥çœ‹èŠ‚å‡æ—¥æ•ˆåº”\nprophet_plot_components(m_holidays, forecast_holidays)"
  },
  {
    "objectID": "index.html#ç¬¬äº”éƒ¨åˆ†æ¨¡å‹è¯„ä¼°",
    "href": "index.html#ç¬¬äº”éƒ¨åˆ†æ¨¡å‹è¯„ä¼°",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šæ¨¡å‹è¯„ä¼°",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šæ¨¡å‹è¯„ä¼°\n\näº¤å‰éªŒè¯\n# æ—¶é—´åºåˆ—äº¤å‰éªŒè¯\ndf_cv &lt;- cross_validation(\n    m,\n    initial = 730, # åˆå§‹è®­ç»ƒæœŸ (2å¹´)\n    period = 180, # æ¯æ¬¡æ»šåŠ¨ (6ä¸ªæœˆ)\n    horizon = 365, # é¢„æµ‹èŒƒå›´ (1å¹´)\n    units = \"days\"\n)\n\nhead(df_cv)\n\n\næ€§èƒ½æŒ‡æ ‡\n# è®¡ç®—è¯„ä¼°æŒ‡æ ‡\ndf_p &lt;- performance_metrics(df_cv)\nprint(tail(df_p))\n\ncat(\"\\næ•´ä½“ MAPE:\", round(mean(df_p$mape) * 100, 2), \"%\\n\")\ncat(\"æ•´ä½“ RMSE:\", round(mean(df_p$rmse), 2), \"\\n\")\n\n\nå¯è§†åŒ–è¯„ä¼°\nplot_cross_validation_metric(df_cv, metric = \"mape\") +\n    ggtitle(\"MAPE éšé¢„æµ‹èŒƒå›´å˜åŒ–\")"
  },
  {
    "objectID": "index.html#ç¬¬å…­éƒ¨åˆ†å‚æ•°è°ƒä¼˜",
    "href": "index.html#ç¬¬å…­éƒ¨åˆ†å‚æ•°è°ƒä¼˜",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šå‚æ•°è°ƒä¼˜",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šå‚æ•°è°ƒä¼˜\n\nå…³é”®å‚æ•°\n# è°ƒæ•´å‚æ•°\nm_tuned &lt;- prophet(\n    df,\n    changepoint.prior.scale = 0.05, # è¶‹åŠ¿çµæ´»æ€§ (é»˜è®¤0.05)\n    seasonality.prior.scale = 10, # å­£èŠ‚æ€§å¼ºåº¦ (é»˜è®¤10)\n    holidays.prior.scale = 10, # èŠ‚å‡æ—¥å¼ºåº¦ (é»˜è®¤10)\n    seasonality.mode = \"multiplicative\" # ä¹˜æ³•å­£èŠ‚æ€§\n)\n\nforecast_tuned &lt;- predict(m_tuned, future)\nplot(m_tuned, forecast_tuned) +\n    ggtitle(\"è°ƒå‚åçš„é¢„æµ‹\")\n\n\nå‚æ•°ç½‘æ ¼æœç´¢\n# ç®€åŒ–çš„ç½‘æ ¼æœç´¢\nparam_grid &lt;- expand.grid(\n    changepoint.prior.scale = c(0.01, 0.05, 0.1),\n    seasonality.prior.scale = c(1, 10)\n)\n\n# å¯¹æ¯ç»„å‚æ•°è¿›è¡Œäº¤å‰éªŒè¯ï¼ˆç®€åŒ–ç¤ºä¾‹ï¼‰\nresults &lt;- list()\nfor (i in 1:2) { # åªæµ‹è¯•å‰2ç»„\n    m_test &lt;- prophet(\n        df,\n        changepoint.prior.scale = param_grid$changepoint.prior.scale[i],\n        seasonality.prior.scale = param_grid$seasonality.prior.scale[i]\n    )\n\n    cv_test &lt;- cross_validation(m_test,\n        initial = 730, period = 180,\n        horizon = 365, units = \"days\"\n    )\n    perf &lt;- performance_metrics(cv_test)\n\n    results[[i]] &lt;- data.frame(\n        changepoint.prior.scale = param_grid$changepoint.prior.scale[i],\n        seasonality.prior.scale = param_grid$seasonality.prior.scale[i],\n        mape = mean(perf$mape)\n    )\n}\n\nresults_df &lt;- do.call(rbind, results)\nprint(results_df)"
  },
  {
    "objectID": "index.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹-1",
    "href": "index.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹-1",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹\n\nè¯ç‰©æ²»ç–—æ•ˆæœè¯„ä¼°\n# æ¨¡æ‹Ÿè¯ç‰©ç ”ç©¶\nn &lt;- 2000\n\n# æ‚£è€…ç‰¹å¾\nage &lt;- round(rnorm(n, 60, 12))\ndiabetes &lt;- rbinom(n, 1, 0.25)\nhypertension &lt;- rbinom(n, 1, 0.4)\nprevious_event &lt;- rbinom(n, 1, 0.15)\nldl &lt;- rnorm(n, 130, 30)\n\n# è¯ç‰©åˆ†é…ï¼ˆåŒ»ç”Ÿåå¥½ + æ‚£è€…ç‰¹å¾ï¼‰\nps &lt;- plogis(-1 + 0.02 * age + 0.5 * diabetes + 0.3 * hypertension +\n    0.8 * previous_event + 0.01 * ldl)\ndrug &lt;- rbinom(n, 1, ps)\n\n# å¿ƒè¡€ç®¡äº‹ä»¶é£é™©\nbaseline_risk &lt;- plogis(-3 + 0.03 * age + 0.5 * diabetes + 0.4 * hypertension +\n    previous_event + 0.01 * ldl)\n# è¯ç‰©é™ä½é£é™©\ndrug_effect &lt;- -0.3\nevent_prob &lt;- plogis(qlogis(baseline_risk) + drug_effect * drug)\ncv_event &lt;- rbinom(n, 1, event_prob)\n\ndrug_data &lt;- data.frame(age, diabetes, hypertension, previous_event, ldl, drug, cv_event)\n\ncat(\"è¯ç‰©ä½¿ç”¨ç‡:\", mean(drug), \"\\n\")\ncat(\"äº‹ä»¶å‘ç”Ÿç‡:\", mean(cv_event), \"\\n\")\n# IPWåˆ†æ\nW_drug &lt;- weightit(drug ~ age + diabetes + hypertension + previous_event + ldl,\n    data = drug_data, method = \"ps\", estimand = \"ATE\"\n)\n\n# æ£€æŸ¥å¹³è¡¡\nbal.tab(W_drug, stats = \"m\", thresholds = c(m = 0.1))\n# åŠ æƒlogisticå›å½’\ndrug_data$weights &lt;- W_drug$weights\ndesign_drug &lt;- svydesign(ids = ~1, weights = ~weights, data = drug_data)\n\ndrug_effect_model &lt;- svyglm(cv_event ~ drug, design = design_drug, family = quasibinomial)\nsummary(drug_effect_model)\n\n# è®¡ç®—é£é™©æ¯”\nor &lt;- exp(coef(drug_effect_model)[\"drug\"])\ncat(\"\\nè¯ç‰©çš„OR:\", round(or, 3), \"\\n\")"
  },
  {
    "objectID": "index.html#å°ç»“-1",
    "href": "index.html#å°ç»“-1",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "å°ç»“",
    "text": "å°ç»“\nprophet çš„æ ¸å¿ƒå·¥ä½œæµç¨‹ï¼š\n\nå‡†å¤‡æ•°æ®ï¼šds (æ—¥æœŸ) + y (æ•°å€¼)\næ‹Ÿåˆæ¨¡å‹ï¼šprophet(df)\nç”Ÿæˆæœªæ¥ï¼šmake_future_dataframe()\né¢„æµ‹ï¼špredict()\nè¯„ä¼°ï¼šcross_validation() + performance_metrics()\n\n\né€‚ç”¨åœºæ™¯ï¼šæœ‰æ˜æ˜¾å­£èŠ‚æ€§å’Œè¶‹åŠ¿çš„å•†ä¸š/å¥åº·æ•°æ®é¢„æµ‹ï¼Œç‰¹åˆ«æ˜¯æœ‰èŠ‚å‡æ—¥æ•ˆåº”çš„åœºæ™¯ã€‚"
  },
  {
    "objectID": "index.html#å‚è€ƒèµ„æº-1",
    "href": "index.html#å‚è€ƒèµ„æº-1",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nprophet å®˜æ–¹æ–‡æ¡£\nprophet è®ºæ–‡\nprophet R åŒ…"
  },
  {
    "objectID": "1070-fairmetrics.html",
    "href": "1070-fairmetrics.html",
    "title": "fairmetrics æœºå™¨å­¦ä¹ å…¬å¹³æ€§è¯„ä¼°",
    "section": "",
    "text": "éšç€AIåœ¨åŒ»ç–—è¯Šæ–­ã€ä¿¡è´·å®¡æ‰¹ã€å¸æ³•åˆ¤å†³ç­‰é«˜é£é™©é¢†åŸŸçš„å¹¿æ³›åº”ç”¨ï¼Œç®—æ³•å…¬å¹³æ€§æˆä¸ºå…³é”®è®®é¢˜ã€‚æ¨¡å‹å¯èƒ½æ— æ„ä¸­å¯¹ç‰¹å®šç¾¤ä½“äº§ç”Ÿæ­§è§†æ€§é¢„æµ‹ã€‚\n\n\n\n\n\nåº”ç”¨åœºæ™¯\næ½œåœ¨åè§é£é™©\n\n\n\n\nåŒ»ç–—AIè¯Šæ–­\nå¯¹å°‘æ•°æ—è£”è¯Šæ–­å‡†ç¡®ç‡ä½\n\n\nä¿¡è´·è¯„åˆ†\nå¯¹å¥³æ€§/ä½æ”¶å…¥ç¾¤ä½“ä¸å…¬\n\n\næ‹›è˜ç­›é€‰\næ€§åˆ«/å¹´é¾„æ­§è§†\n\n\nå¸æ³•é£é™©è¯„ä¼°\nç§æ—åè§\n\n\n\n\n\n\nç¾¤ä½“å…¬å¹³æ€§ï¼ˆGroup Fairnessï¼‰ï¼š - ç»Ÿè®¡å‡ç­‰ï¼šä¸åŒç¾¤ä½“çš„é¢„æµ‹é˜³æ€§ç‡ç›¸åŒ - æœºä¼šå‡ç­‰ï¼šä¸åŒç¾¤ä½“çš„çœŸé˜³æ€§ç‡ç›¸åŒ - é¢„æµ‹å‡ç­‰ï¼šä¸åŒç¾¤ä½“çš„å‡é˜³æ€§ç‡ç›¸åŒ",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#æœºå™¨å­¦ä¹ å…¬å¹³æ€§ç®€ä»‹",
    "href": "1070-fairmetrics.html#æœºå™¨å­¦ä¹ å…¬å¹³æ€§ç®€ä»‹",
    "title": "fairmetrics æœºå™¨å­¦ä¹ å…¬å¹³æ€§è¯„ä¼°",
    "section": "",
    "text": "éšç€AIåœ¨åŒ»ç–—è¯Šæ–­ã€ä¿¡è´·å®¡æ‰¹ã€å¸æ³•åˆ¤å†³ç­‰é«˜é£é™©é¢†åŸŸçš„å¹¿æ³›åº”ç”¨ï¼Œç®—æ³•å…¬å¹³æ€§æˆä¸ºå…³é”®è®®é¢˜ã€‚æ¨¡å‹å¯èƒ½æ— æ„ä¸­å¯¹ç‰¹å®šç¾¤ä½“äº§ç”Ÿæ­§è§†æ€§é¢„æµ‹ã€‚\n\n\n\n\n\nåº”ç”¨åœºæ™¯\næ½œåœ¨åè§é£é™©\n\n\n\n\nåŒ»ç–—AIè¯Šæ–­\nå¯¹å°‘æ•°æ—è£”è¯Šæ–­å‡†ç¡®ç‡ä½\n\n\nä¿¡è´·è¯„åˆ†\nå¯¹å¥³æ€§/ä½æ”¶å…¥ç¾¤ä½“ä¸å…¬\n\n\næ‹›è˜ç­›é€‰\næ€§åˆ«/å¹´é¾„æ­§è§†\n\n\nå¸æ³•é£é™©è¯„ä¼°\nç§æ—åè§\n\n\n\n\n\n\nç¾¤ä½“å…¬å¹³æ€§ï¼ˆGroup Fairnessï¼‰ï¼š - ç»Ÿè®¡å‡ç­‰ï¼šä¸åŒç¾¤ä½“çš„é¢„æµ‹é˜³æ€§ç‡ç›¸åŒ - æœºä¼šå‡ç­‰ï¼šä¸åŒç¾¤ä½“çš„çœŸé˜³æ€§ç‡ç›¸åŒ - é¢„æµ‹å‡ç­‰ï¼šä¸åŒç¾¤ä½“çš„å‡é˜³æ€§ç‡ç›¸åŒ",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#å®‰è£…ä¸åŠ è½½",
    "href": "1070-fairmetrics.html#å®‰è£…ä¸åŠ è½½",
    "title": "fairmetrics æœºå™¨å­¦ä¹ å…¬å¹³æ€§è¯„ä¼°",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\n# fairmetricsæ˜¯2025å¹´æ–°åŒ…\n# install.packages(\"fairmetrics\")\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(caret)\n\nset.seed(42)\ntheme_set(theme_bw(base_size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬ä¸€éƒ¨åˆ†æ¨¡æ‹Ÿæ•°æ®å‡†å¤‡",
    "href": "1070-fairmetrics.html#ç¬¬ä¸€éƒ¨åˆ†æ¨¡æ‹Ÿæ•°æ®å‡†å¤‡",
    "title": "fairmetrics æœºå™¨å­¦ä¹ å…¬å¹³æ€§è¯„ä¼°",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ¨¡æ‹Ÿæ•°æ®å‡†å¤‡",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ¨¡æ‹Ÿæ•°æ®å‡†å¤‡\n\n# æ¨¡æ‹ŸåŒ»ç–—æ•°æ®ï¼šé¢„æµ‹ç³–å°¿ç—…é£é™©\nn &lt;- 2000\n\n# æ•æ„Ÿå±æ€§ï¼šæ€§åˆ« (0=å¥³æ€§, 1=ç”·æ€§)\ngender &lt;- sample(c(0, 1), n, replace = TRUE, prob = c(0.45, 0.55))\n\n# ç‰¹å¾\nage &lt;- rnorm(n, 50, 12)\nbmi &lt;- rnorm(n, 27, 5)\nblood_pressure &lt;- rnorm(n, 130, 18)\nglucose &lt;- rnorm(n, 110, 30)\n\n# çœŸå®æ ‡ç­¾ï¼ˆæœ‰æ„å¼•å…¥æ€§åˆ«åå·®ï¼‰\nprob &lt;- plogis(-4 + 0.03 * age + 0.08 * bmi + 0.01 * blood_pressure +\n    0.02 * glucose + 0.3 * gender) # ç”·æ€§é£é™©æ›´é«˜\noutcome &lt;- rbinom(n, 1, prob)\n\ndata &lt;- data.frame(\n    gender = factor(gender, labels = c(\"Female\", \"Male\")),\n    age, bmi, blood_pressure, glucose, outcome\n)\n\ncat(\"æ•°æ®æ¦‚è§ˆ:\\n\")\n\næ•°æ®æ¦‚è§ˆ:\n\ncat(\"æ ·æœ¬é‡:\", n, \"\\n\")\n\næ ·æœ¬é‡: 2000 \n\ncat(\"å¥³æ€§æ¯”ä¾‹:\", mean(gender == 0), \"\\n\")\n\nå¥³æ€§æ¯”ä¾‹: 0.4395 \n\ncat(\"æ€»ä½“é˜³æ€§ç‡:\", mean(outcome), \"\\n\")\n\næ€»ä½“é˜³æ€§ç‡: 0.9515 \n\ncat(\"å¥³æ€§é˜³æ€§ç‡:\", mean(outcome[gender == 0]), \"\\n\")\n\nå¥³æ€§é˜³æ€§ç‡: 0.9522184 \n\ncat(\"ç”·æ€§é˜³æ€§ç‡:\", mean(outcome[gender == 1]), \"\\n\")\n\nç”·æ€§é˜³æ€§ç‡: 0.9509367",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬äºŒéƒ¨åˆ†è®­ç»ƒé¢„æµ‹æ¨¡å‹",
    "href": "1070-fairmetrics.html#ç¬¬äºŒéƒ¨åˆ†è®­ç»ƒé¢„æµ‹æ¨¡å‹",
    "title": "fairmetrics æœºå™¨å­¦ä¹ å…¬å¹³æ€§è¯„ä¼°",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šè®­ç»ƒé¢„æµ‹æ¨¡å‹",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šè®­ç»ƒé¢„æµ‹æ¨¡å‹\n\n# æ•°æ®åˆ†å‰²\ntrain_idx &lt;- sample(1:n, 0.7 * n)\ntrain_data &lt;- data[train_idx, ]\ntest_data &lt;- data[-train_idx, ]\n\n# è®­ç»ƒé€»è¾‘å›å½’ï¼ˆæ•…æ„ä¸åŒ…å«genderä½œä¸ºç‰¹å¾ï¼Œä½†åå·®å¯èƒ½é€šè¿‡å…¶ä»–ç‰¹å¾ä¼ é€’ï¼‰\nmodel &lt;- glm(outcome ~ age + bmi + blood_pressure + glucose,\n    data = train_data, family = binomial\n)\n\n# é¢„æµ‹\ntest_data$pred_prob &lt;- predict(model, test_data, type = \"response\")\ntest_data$pred_class &lt;- ifelse(test_data$pred_prob &gt; 0.5, 1, 0)\n\n# æ•´ä½“æ€§èƒ½\ncat(\"\\næ•´ä½“å‡†ç¡®ç‡:\", mean(test_data$pred_class == test_data$outcome), \"\\n\")\n\n\næ•´ä½“å‡†ç¡®ç‡: 0.9716667",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬ä¸‰éƒ¨åˆ†å…¬å¹³æ€§æŒ‡æ ‡è®¡ç®—",
    "href": "1070-fairmetrics.html#ç¬¬ä¸‰éƒ¨åˆ†å…¬å¹³æ€§æŒ‡æ ‡è®¡ç®—",
    "title": "fairmetrics æœºå™¨å­¦ä¹ å…¬å¹³æ€§è¯„ä¼°",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šå…¬å¹³æ€§æŒ‡æ ‡è®¡ç®—",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šå…¬å¹³æ€§æŒ‡æ ‡è®¡ç®—\n\nåˆ†ç»„æ€§èƒ½\n\n# æŒ‰æ€§åˆ«åˆ†ç»„è®¡ç®—æŒ‡æ ‡\nfairness_by_group &lt;- test_data %&gt;%\n    group_by(gender) %&gt;%\n    summarise(\n        n = n(),\n        prevalence = mean(outcome),\n        pred_positive_rate = mean(pred_class),\n        accuracy = mean(pred_class == outcome),\n        tpr = sum(pred_class == 1 & outcome == 1) / sum(outcome == 1), # çœŸé˜³æ€§ç‡\n        fpr = sum(pred_class == 1 & outcome == 0) / sum(outcome == 0), # å‡é˜³æ€§ç‡\n        ppv = sum(pred_class == 1 & outcome == 1) / sum(pred_class == 1), # ç²¾ç¡®ç‡\n        .groups = \"drop\"\n    )\n\nprint(fairness_by_group)\n\n# A tibble: 2 Ã— 8\n  gender     n prevalence pred_positive_rate accuracy   tpr   fpr   ppv\n  &lt;fct&gt;  &lt;int&gt;      &lt;dbl&gt;              &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 Female   249      0.984                  1    0.984     1     1 0.984\n2 Male     351      0.963                  1    0.963     1     1 0.963\n\n\n\n\nå…¬å¹³æ€§å·®è·\n\n# è®¡ç®—å…¬å¹³æ€§å·®è·\nfemale_metrics &lt;- fairness_by_group %&gt;% filter(gender == \"Female\")\nmale_metrics &lt;- fairness_by_group %&gt;% filter(gender == \"Male\")\n\nfairness_gaps &lt;- data.frame(\n    Metric = c(\"é¢„æµ‹é˜³æ€§ç‡å·®è·\", \"å‡†ç¡®ç‡å·®è·\", \"çœŸé˜³æ€§ç‡å·®è·\", \"å‡é˜³æ€§ç‡å·®è·\"),\n    Gap = c(\n        abs(female_metrics$pred_positive_rate - male_metrics$pred_positive_rate),\n        abs(female_metrics$accuracy - male_metrics$accuracy),\n        abs(female_metrics$tpr - male_metrics$tpr),\n        abs(female_metrics$fpr - male_metrics$fpr)\n    )\n)\n\nfairness_gaps$Status &lt;- ifelse(fairness_gaps$Gap &lt; 0.1, \"âœ“ å…¬å¹³\", \"âš  éœ€å…³æ³¨\")\nprint(fairness_gaps)\n\n          Metric        Gap Status\n1 é¢„æµ‹é˜³æ€§ç‡å·®è· 0.00000000 âœ“ å…¬å¹³\n2     å‡†ç¡®ç‡å·®è· 0.02097278 âœ“ å…¬å¹³\n3   çœŸé˜³æ€§ç‡å·®è· 0.00000000 âœ“ å…¬å¹³\n4   å‡é˜³æ€§ç‡å·®è· 0.00000000 âœ“ å…¬å¹³",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬å››éƒ¨åˆ†å…¬å¹³æ€§å¯è§†åŒ–",
    "href": "1070-fairmetrics.html#ç¬¬å››éƒ¨åˆ†å…¬å¹³æ€§å¯è§†åŒ–",
    "title": "fairmetrics æœºå™¨å­¦ä¹ å…¬å¹³æ€§è¯„ä¼°",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šå…¬å¹³æ€§å¯è§†åŒ–",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šå…¬å¹³æ€§å¯è§†åŒ–\n\næŒ‡æ ‡å¯¹æ¯”å›¾\n\n# å‡†å¤‡å¯è§†åŒ–æ•°æ®\nviz_data &lt;- fairness_by_group %&gt;%\n    tidyr::pivot_longer(\n        cols = c(pred_positive_rate, accuracy, tpr, fpr),\n        names_to = \"Metric\",\n        values_to = \"Value\"\n    ) %&gt;%\n    mutate(Metric = case_when(\n        Metric == \"pred_positive_rate\" ~ \"é¢„æµ‹é˜³æ€§ç‡\",\n        Metric == \"accuracy\" ~ \"å‡†ç¡®ç‡\",\n        Metric == \"tpr\" ~ \"çœŸé˜³æ€§ç‡(TPR)\",\n        Metric == \"fpr\" ~ \"å‡é˜³æ€§ç‡(FPR)\"\n    ))\n\nggplot(viz_data, aes(x = Metric, y = Value, fill = gender)) +\n    geom_col(position = \"dodge\", alpha = 0.8) +\n    geom_hline(yintercept = 0, color = \"gray50\") +\n    scale_fill_manual(values = c(\"Female\" = \"#ec4899\", \"Male\" = \"#3b82f6\")) +\n    labs(\n        title = \"æ¨¡å‹å…¬å¹³æ€§æŒ‡æ ‡å¯¹æ¯”\",\n        subtitle = \"æŒ‰æ€§åˆ«åˆ†ç»„\",\n        x = \"\", y = \"æŒ‡æ ‡å€¼\", fill = \"æ€§åˆ«\"\n    ) +\n    theme(axis.text.x = element_text(angle = 15, hjust = 1))\n\n\n\n\n\n\n\n\n\n\næ ¡å‡†æ›²çº¿å¯¹æ¯”\n\n# æŒ‰æ€§åˆ«çš„æ ¡å‡†æ›²çº¿\ncalibration_data &lt;- test_data %&gt;%\n    mutate(prob_bin = cut(pred_prob, breaks = seq(0, 1, 0.1), include.lowest = TRUE)) %&gt;%\n    group_by(gender, prob_bin) %&gt;%\n    summarise(\n        mean_pred = mean(pred_prob),\n        mean_actual = mean(outcome),\n        n = n(),\n        .groups = \"drop\"\n    ) %&gt;%\n    filter(n &gt;= 5)\n\nggplot(calibration_data, aes(x = mean_pred, y = mean_actual, color = gender)) +\n    geom_point(aes(size = n), alpha = 0.7) +\n    geom_line() +\n    geom_abline(slope = 1, intercept = 0, linetype = \"dashed\", color = \"gray50\") +\n    scale_color_manual(values = c(\"Female\" = \"#ec4899\", \"Male\" = \"#3b82f6\")) +\n    scale_size_continuous(range = c(2, 8)) +\n    labs(\n        title = \"æŒ‰æ€§åˆ«çš„æ¨¡å‹æ ¡å‡†æ›²çº¿\",\n        subtitle = \"ç†æƒ³æƒ…å†µä¸‹åº”æ²¿å¯¹è§’çº¿\",\n        x = \"é¢„æµ‹æ¦‚ç‡\", y = \"å®é™…é˜³æ€§ç‡\", color = \"æ€§åˆ«\", size = \"æ ·æœ¬é‡\"\n    ) +\n    coord_equal(xlim = c(0, 1), ylim = c(0, 1))",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬äº”éƒ¨åˆ†æ­£å¼å…¬å¹³æ€§æŒ‡æ ‡",
    "href": "1070-fairmetrics.html#ç¬¬äº”éƒ¨åˆ†æ­£å¼å…¬å¹³æ€§æŒ‡æ ‡",
    "title": "fairmetrics æœºå™¨å­¦ä¹ å…¬å¹³æ€§è¯„ä¼°",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šæ­£å¼å…¬å¹³æ€§æŒ‡æ ‡",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šæ­£å¼å…¬å¹³æ€§æŒ‡æ ‡\n\nç»Ÿè®¡å‡ç­‰ï¼ˆStatistical Parityï¼‰\n\n# ç»Ÿè®¡å‡ç­‰ï¼šä¸åŒç¾¤ä½“çš„é¢„æµ‹é˜³æ€§ç‡åº”ç›¸åŒ\nstat_parity &lt;- test_data %&gt;%\n    group_by(gender) %&gt;%\n    summarise(positive_rate = mean(pred_class), .groups = \"drop\")\n\nsp_ratio &lt;- min(stat_parity$positive_rate) / max(stat_parity$positive_rate)\ncat(\"ç»Ÿè®¡å‡ç­‰æ¯”ç‡:\", round(sp_ratio, 3), \"\\n\")\n\nç»Ÿè®¡å‡ç­‰æ¯”ç‡: 1 \n\ncat(\"åˆ¤æ–­:\", ifelse(sp_ratio &gt;= 0.8, \"æ»¡è¶³80%è§„åˆ™\", \"å¯èƒ½å­˜åœ¨æ­§è§†\"), \"\\n\")\n\nåˆ¤æ–­: æ»¡è¶³80%è§„åˆ™ \n\n\n\n\næœºä¼šå‡ç­‰ï¼ˆEqual Opportunityï¼‰\n\n# æœºä¼šå‡ç­‰ï¼šä¸åŒç¾¤ä½“çš„çœŸé˜³æ€§ç‡åº”ç›¸åŒ\nequal_opp &lt;- test_data %&gt;%\n    filter(outcome == 1) %&gt;%\n    group_by(gender) %&gt;%\n    summarise(tpr = mean(pred_class), .groups = \"drop\")\n\neo_ratio &lt;- min(equal_opp$tpr) / max(equal_opp$tpr)\ncat(\"æœºä¼šå‡ç­‰æ¯”ç‡:\", round(eo_ratio, 3), \"\\n\")\n\næœºä¼šå‡ç­‰æ¯”ç‡: 1 \n\ncat(\"åˆ¤æ–­:\", ifelse(eo_ratio &gt;= 0.8, \"åŸºæœ¬å…¬å¹³\", \"éœ€è¦å…³æ³¨\"), \"\\n\")\n\nåˆ¤æ–­: åŸºæœ¬å…¬å¹³ \n\n\n\n\né¢„æµ‹å‡ç­‰ï¼ˆPredictive Equalityï¼‰\n\n# é¢„æµ‹å‡ç­‰ï¼šä¸åŒç¾¤ä½“çš„å‡é˜³æ€§ç‡åº”ç›¸åŒ\npred_eq &lt;- test_data %&gt;%\n    filter(outcome == 0) %&gt;%\n    group_by(gender) %&gt;%\n    summarise(fpr = mean(pred_class), .groups = \"drop\")\n\npe_ratio &lt;- min(pred_eq$fpr) / max(pred_eq$fpr)\ncat(\"é¢„æµ‹å‡ç­‰æ¯”ç‡:\", round(pe_ratio, 3), \"\\n\")\n\né¢„æµ‹å‡ç­‰æ¯”ç‡: 1 \n\ncat(\"åˆ¤æ–­:\", ifelse(pe_ratio &gt;= 0.8, \"åŸºæœ¬å…¬å¹³\", \"éœ€è¦å…³æ³¨\"), \"\\n\")\n\nåˆ¤æ–­: åŸºæœ¬å…¬å¹³",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬å…­éƒ¨åˆ†å…¬å¹³æ€§æ”¹è¿›ç­–ç•¥",
    "href": "1070-fairmetrics.html#ç¬¬å…­éƒ¨åˆ†å…¬å¹³æ€§æ”¹è¿›ç­–ç•¥",
    "title": "fairmetrics æœºå™¨å­¦ä¹ å…¬å¹³æ€§è¯„ä¼°",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šå…¬å¹³æ€§æ”¹è¿›ç­–ç•¥",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šå…¬å¹³æ€§æ”¹è¿›ç­–ç•¥\n\nç­–ç•¥1ï¼šé˜ˆå€¼è°ƒæ•´\n\n# ä¸ºä¸åŒç¾¤ä½“ä½¿ç”¨ä¸åŒé˜ˆå€¼ä»¥è¾¾åˆ°å…¬å¹³\nfind_threshold &lt;- function(data, target_rate) {\n    thresholds &lt;- seq(0.1, 0.9, 0.01)\n    rates &lt;- sapply(thresholds, function(t) mean(data$pred_prob &gt; t))\n    thresholds[which.min(abs(rates - target_rate))]\n}\n\n# ç›®æ ‡ï¼šç»Ÿä¸€é¢„æµ‹é˜³æ€§ç‡ä¸º0.3\ntarget_rate &lt;- 0.3\n\nfemale_data &lt;- test_data %&gt;% filter(gender == \"Female\")\nmale_data &lt;- test_data %&gt;% filter(gender == \"Male\")\n\nfemale_threshold &lt;- find_threshold(female_data, target_rate)\nmale_threshold &lt;- find_threshold(male_data, target_rate)\n\ncat(\"å¥³æ€§é˜ˆå€¼:\", female_threshold, \"\\n\")\n\nå¥³æ€§é˜ˆå€¼: 0.9 \n\ncat(\"ç”·æ€§é˜ˆå€¼:\", male_threshold, \"\\n\")\n\nç”·æ€§é˜ˆå€¼: 0.9 \n\n# åº”ç”¨å·®å¼‚åŒ–é˜ˆå€¼\ntest_data$fair_pred &lt;- ifelse(\n    test_data$gender == \"Female\",\n    ifelse(test_data$pred_prob &gt; female_threshold, 1, 0),\n    ifelse(test_data$pred_prob &gt; male_threshold, 1, 0)\n)\n\n# éªŒè¯å…¬å¹³æ€§\nfair_rates &lt;- test_data %&gt;%\n    group_by(gender) %&gt;%\n    summarise(rate = mean(fair_pred), .groups = \"drop\")\nprint(fair_rates)\n\n# A tibble: 2 Ã— 2\n  gender  rate\n  &lt;fct&gt;  &lt;dbl&gt;\n1 Female 0.884\n2 Male   0.869\n\n\n\n\nç­–ç•¥2ï¼šé‡é‡‡æ ·\n\n# å¯¹è®­ç»ƒæ•°æ®è¿›è¡Œé‡é‡‡æ ·ä»¥å¹³è¡¡ç¾¤ä½“\n# ä¸Šé‡‡æ ·å°‘æ•°ç¾¤ä½“çš„æ­£ä¾‹\ntrain_balanced &lt;- train_data %&gt;%\n    group_by(gender, outcome) %&gt;%\n    slice_sample(n = 200, replace = TRUE) %&gt;%\n    ungroup()\n\ncat(\"å¹³è¡¡åè®­ç»ƒé›†åˆ†å¸ƒ:\\n\")\n\nå¹³è¡¡åè®­ç»ƒé›†åˆ†å¸ƒ:\n\nprint(table(train_balanced$gender, train_balanced$outcome))\n\n        \n           0   1\n  Female 200 200\n  Male   200 200",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬ä¸ƒéƒ¨åˆ†å…¬å¹³æ€§æŠ¥å‘Šæ¨¡æ¿",
    "href": "1070-fairmetrics.html#ç¬¬ä¸ƒéƒ¨åˆ†å…¬å¹³æ€§æŠ¥å‘Šæ¨¡æ¿",
    "title": "fairmetrics æœºå™¨å­¦ä¹ å…¬å¹³æ€§è¯„ä¼°",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå…¬å¹³æ€§æŠ¥å‘Šæ¨¡æ¿",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå…¬å¹³æ€§æŠ¥å‘Šæ¨¡æ¿\n\n# ç”Ÿæˆå…¬å¹³æ€§æŠ¥å‘Š\ngenerate_fairness_report &lt;- function(data, pred_col, outcome_col, protected_col) {\n    results &lt;- data %&gt;%\n        group_by(!!sym(protected_col)) %&gt;%\n        summarise(\n            N = n(),\n            Prevalence = mean(!!sym(outcome_col)),\n            Pred_Positive_Rate = mean(!!sym(pred_col)),\n            Accuracy = mean(!!sym(pred_col) == !!sym(outcome_col)),\n            TPR = sum(!!sym(pred_col) == 1 & !!sym(outcome_col) == 1) /\n                sum(!!sym(outcome_col) == 1),\n            FPR = sum(!!sym(pred_col) == 1 & !!sym(outcome_col) == 0) /\n                sum(!!sym(outcome_col) == 0),\n            .groups = \"drop\"\n        )\n\n    results\n}\n\nreport &lt;- generate_fairness_report(test_data, \"pred_class\", \"outcome\", \"gender\")\ncat(\"\\n=== å…¬å¹³æ€§è¯„ä¼°æŠ¥å‘Š ===\\n\\n\")\n\n\n=== å…¬å¹³æ€§è¯„ä¼°æŠ¥å‘Š ===\n\nprint(report)\n\n# A tibble: 2 Ã— 7\n  gender     N Prevalence Pred_Positive_Rate Accuracy   TPR   FPR\n  &lt;fct&gt;  &lt;int&gt;      &lt;dbl&gt;              &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 Female   249      0.984                  1    0.984     1     1\n2 Male     351      0.963                  1    0.963     1     1",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "1070-fairmetrics.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "fairmetrics æœºå™¨å­¦ä¹ å…¬å¹³æ€§è¯„ä¼°",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# ===== åˆ†ç»„æŒ‡æ ‡ =====\ndata %&gt;%\n    group_by(protected_attribute) %&gt;%\n    summarise(\n        tpr = sum(pred == 1 & actual == 1) / sum(actual == 1),\n        fpr = sum(pred == 1 & actual == 0) / sum(actual == 0),\n        accuracy = mean(pred == actual)\n    )\n\n# ===== å…¬å¹³æ€§æ¯”ç‡ =====\n# ç»Ÿè®¡å‡ç­‰ï¼šé¢„æµ‹é˜³æ€§ç‡ä¹‹æ¯”\n# æœºä¼šå‡ç­‰ï¼šTPRä¹‹æ¯”\n# é¢„æµ‹å‡ç­‰ï¼šFPRä¹‹æ¯”\n\n# ===== 80%è§„åˆ™ =====\n# å¦‚æœæ¯”ç‡ &gt;= 0.8ï¼Œé€šå¸¸è®¤ä¸ºå…¬å¹³\n\n# ===== é˜ˆå€¼è°ƒæ•´ =====\n# ä¸ºä¸åŒç¾¤ä½“ä½¿ç”¨ä¸åŒåˆ†ç±»é˜ˆå€¼\n\n# ===== é‡é‡‡æ · =====\n# å¹³è¡¡è®­ç»ƒæ•°æ®ä¸­å„ç¾¤ä½“çš„åˆ†å¸ƒ",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#å°ç»“",
    "href": "1070-fairmetrics.html#å°ç»“",
    "title": "fairmetrics æœºå™¨å­¦ä¹ å…¬å¹³æ€§è¯„ä¼°",
    "section": "å°ç»“",
    "text": "å°ç»“\nå…¬å¹³æ€§è¯„ä¼°å…³é”®æ­¥éª¤ï¼š\n\nè¯†åˆ«æ•æ„Ÿå±æ€§ï¼šæ€§åˆ«ã€ç§æ—ã€å¹´é¾„ç­‰\né€‰æ‹©å…¬å¹³æ€§å®šä¹‰ï¼šæ ¹æ®åº”ç”¨åœºæ™¯é€‰æ‹©\nè®¡ç®—åˆ†ç»„æŒ‡æ ‡ï¼šTPRã€FPRã€å‡†ç¡®ç‡ç­‰\nè¯„ä¼°å·®è·ï¼šä½¿ç”¨80%è§„åˆ™æˆ–å…¶ä»–æ ‡å‡†\næ”¹è¿›æ¨¡å‹ï¼šé˜ˆå€¼è°ƒæ•´ã€é‡é‡‡æ ·ã€å…¬å¹³çº¦æŸ\n\n\næ³¨æ„ï¼šä¸åŒå…¬å¹³æ€§å®šä¹‰å¯èƒ½ç›¸äº’å†²çªï¼Œéœ€è¦æ ¹æ®å…·ä½“åœºæ™¯æƒè¡¡ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#å‚è€ƒèµ„æº",
    "href": "1070-fairmetrics.html#å‚è€ƒèµ„æº",
    "title": "fairmetrics æœºå™¨å­¦ä¹ å…¬å¹³æ€§è¯„ä¼°",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nFairness and Machine Learning\nAI Fairness 360 (IBM)\nGoogle ML Fairness",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#targets-ç®€ä»‹",
    "href": "1070-fairmetrics.html#targets-ç®€ä»‹",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "targets ç®€ä»‹",
    "text": "targets ç®€ä»‹\ntargets æ˜¯ R è¯­è¨€ä¸­ç®¡ç†åˆ†æå·¥ä½œæµçš„ç°ä»£åŒ–å·¥å…·ï¼Œå®ƒèƒ½å¤Ÿè¿½è¸ªä»£ç å’Œæ•°æ®çš„å˜åŒ–ï¼Œåªé‡æ–°è¿è¡Œéœ€è¦æ›´æ–°çš„éƒ¨åˆ†ï¼Œå¤§å¤§æé«˜äº†åˆ†ææ•ˆç‡å’Œå¯é‡å¤æ€§ã€‚\n\nä¸ºä»€ä¹ˆä½¿ç”¨ targetsï¼Ÿ\n\n\n\nä¼ ç»Ÿæ–¹å¼\ntargets æ–¹å¼\n\n\n\n\næ‰‹åŠ¨è¿è¡Œè„šæœ¬\nè‡ªåŠ¨ä¾èµ–è¿½è¸ª\n\n\nå…¨éƒ¨é‡æ–°è¿è¡Œ\nå¢é‡æ„å»º\n\n\nç»“æœéš¾ä»¥ç¼“å­˜\nè‡ªåŠ¨ç¼“å­˜\n\n\néš¾ä»¥å¹¶è¡Œ\nåŸç”Ÿå¹¶è¡Œæ”¯æŒ\n\n\n\n\n\næ ¸å¿ƒæ¦‚å¿µ\n\nTargetï¼ˆç›®æ ‡ï¼‰ï¼šåˆ†ææµç¨‹ä¸­çš„ä¸€ä¸ªæ­¥éª¤åŠå…¶è¾“å‡º\nPipelineï¼ˆç®¡é“ï¼‰ï¼štargetsçš„æœ‰åºé›†åˆ\nä¾èµ–å›¾ï¼štargetsä¹‹é—´çš„ä¾èµ–å…³ç³»\nç¼“å­˜ï¼šå·²è®¡ç®—ç»“æœçš„å­˜å‚¨",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#å®‰è£…ä¸åŠ è½½-1",
    "href": "1070-fairmetrics.html#å®‰è£…ä¸åŠ è½½-1",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n# install.packages(\"targets\")\n# install.packages(\"tarchetypes\")  # æ‰©å±•åŒ…\nlibrary(targets)\nlibrary(tarchetypes)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬ä¸€éƒ¨åˆ†å¿«é€Ÿå…¥é—¨",
    "href": "1070-fairmetrics.html#ç¬¬ä¸€éƒ¨åˆ†å¿«é€Ÿå…¥é—¨",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šå¿«é€Ÿå…¥é—¨",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šå¿«é€Ÿå…¥é—¨\n\né¡¹ç›®ç»“æ„\nä¸€ä¸ªæ ‡å‡†çš„ targets é¡¹ç›®åŒ…å«ï¼š\nmy_project/\nâ”œâ”€â”€ _targets.R        # å®šä¹‰ç®¡é“\nâ”œâ”€â”€ R/                # è‡ªå®šä¹‰å‡½æ•°\nâ”‚   â””â”€â”€ functions.R\nâ”œâ”€â”€ data/             # åŸå§‹æ•°æ®\nâ””â”€â”€ _targets/         # ç¼“å­˜ç›®å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰\n\n\nç¼–å†™ _targets.R\n# _targets.R æ–‡ä»¶å†…å®¹\nlibrary(targets)\nlibrary(tarchetypes)\n\n# åŠ è½½è‡ªå®šä¹‰å‡½æ•°\nsource(\"R/functions.R\")\n\n# å®šä¹‰ç®¡é“\nlist(\n    # è¯»å–æ•°æ®\n    tar_target(raw_data, read.csv(\"data/input.csv\")),\n\n    # æ•°æ®æ¸…æ´—\n    tar_target(clean_data, clean_data_fn(raw_data)),\n\n    # æ‹Ÿåˆæ¨¡å‹\n    tar_target(model, fit_model(clean_data)),\n\n    # ç”ŸæˆæŠ¥å‘Š\n    tar_target(report, create_report(model, clean_data))\n)\n\n\nè‡ªå®šä¹‰å‡½æ•°\n# R/functions.R\nclean_data_fn &lt;- function(data) {\n    data %&gt;%\n        dplyr::filter(!is.na(outcome)) %&gt;%\n        dplyr::mutate(age_group = cut(age, breaks = c(0, 40, 60, 100)))\n}\n\nfit_model &lt;- function(data) {\n    glm(outcome ~ age + bmi, data = data, family = binomial)\n}\n\ncreate_report &lt;- function(model, data) {\n    list(\n        n = nrow(data),\n        coefs = coef(model),\n        aic = AIC(model)\n    )\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬äºŒéƒ¨åˆ†è¿è¡Œç®¡é“",
    "href": "1070-fairmetrics.html#ç¬¬äºŒéƒ¨åˆ†è¿è¡Œç®¡é“",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šè¿è¡Œç®¡é“",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šè¿è¡Œç®¡é“\n\nåŸºæœ¬å‘½ä»¤\n# æ£€æŸ¥ç®¡é“çŠ¶æ€\ntar_manifest()\n\n# å¯è§†åŒ–ä¾èµ–å›¾\ntar_visnetwork()\n\n# è¿è¡Œæ•´ä¸ªç®¡é“\ntar_make()\n\n# è¯»å–ç»“æœ\ntar_read(clean_data)\ntar_read(model)\n\n# åŠ è½½ç»“æœåˆ°ç¯å¢ƒ\ntar_load(report)\nprint(report)\n\n\nå¢é‡æ„å»º\n# ä¿®æ”¹ clean_data_fn åå†æ¬¡è¿è¡Œ\ntar_make()\n# åªæœ‰ clean_data åŠå…¶ä¸‹æ¸¸ç›®æ ‡ä¼šé‡æ–°è¿è¡Œ\n\n# æ£€æŸ¥å“ªäº›ç›®æ ‡è¿‡æœŸ\ntar_outdated()",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬ä¸‰éƒ¨åˆ†è¿›é˜¶ç”¨æ³•",
    "href": "1070-fairmetrics.html#ç¬¬ä¸‰éƒ¨åˆ†è¿›é˜¶ç”¨æ³•",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šè¿›é˜¶ç”¨æ³•",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šè¿›é˜¶ç”¨æ³•\n\nåˆ†æ”¯ï¼ˆBranchingï¼‰\n# åŠ¨æ€åˆ†æ”¯ï¼šå¯¹å¤šä¸ªæ•°æ®é›†/å‚æ•°å¹¶è¡Œå¤„ç†\nlist(\n    # å®šä¹‰å‚æ•°\n    tar_target(alphas, c(0.1, 0.5, 1.0)),\n\n    # åŠ¨æ€åˆ†æ”¯ï¼šæ¯ä¸ªalphaå€¼ç‹¬ç«‹è¿è¡Œ\n    tar_target(\n        models,\n        fit_lasso(data, alpha = alphas),\n        pattern = map(alphas) # æ˜ å°„åˆ°æ¯ä¸ªalpha\n    ),\n\n    # æ±‡æ€»æ‰€æœ‰æ¨¡å‹ç»“æœ\n    tar_target(comparison, compare_models(models))\n)\n\n\né™æ€åˆ†æ”¯\n# ä½¿ç”¨ tar_map åˆ›å»ºå¤šä¸ªç±»ä¼¼ç›®æ ‡\ntar_map(\n    values = list(\n        dataset = c(\"train\", \"test\", \"validation\")\n    ),\n    tar_target(data, load_dataset(dataset)),\n    tar_target(metrics, evaluate_model(model, data))\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬å››éƒ¨åˆ†ä¸-r-markdownquarto-é›†æˆ",
    "href": "1070-fairmetrics.html#ç¬¬å››éƒ¨åˆ†ä¸-r-markdownquarto-é›†æˆ",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šä¸ R Markdown/Quarto é›†æˆ",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šä¸ R Markdown/Quarto é›†æˆ\n\næ¸²æŸ“æŠ¥å‘Š\nlist(\n    tar_target(data, prepare_data()),\n    tar_target(model, fit_model(data)),\n\n    # æ¸²æŸ“ R Markdown æŠ¥å‘Š\n    tar_render(report, \"report.Rmd\"),\n\n    # æ¸²æŸ“ Quarto æ–‡æ¡£\n    tar_quarto(quarto_doc, \"analysis.qmd\")\n)\n\n\nåœ¨æŠ¥å‘Šä¸­ä½¿ç”¨ targets\n# åœ¨ R Markdown ä¸­\n# ```{r}\n# library(targets)\n# tar_load(model)\n# tar_read(data)\n# ```",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬äº”éƒ¨åˆ†å¹¶è¡Œè®¡ç®—",
    "href": "1070-fairmetrics.html#ç¬¬äº”éƒ¨åˆ†å¹¶è¡Œè®¡ç®—",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šå¹¶è¡Œè®¡ç®—",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šå¹¶è¡Œè®¡ç®—\n\né…ç½®å¹¶è¡Œ\n# åœ¨ _targets.R ä¸­\nlibrary(targets)\nlibrary(future)\nlibrary(future.callr)\n\n# ä½¿ç”¨ future å¹¶è¡Œåç«¯\ntar_option_set(\n    controller = crew::crew_controller_local(workers = 4)\n)\n\n# æˆ–ä½¿ç”¨ future\nplan(multisession, workers = 4)\n\n\nå¹¶è¡Œè¿è¡Œ\n# å¹¶è¡Œæ‰§è¡Œç®¡é“\ntar_make_future(workers = 4)\n\n# æˆ–ä½¿ç”¨ crew\ntar_make() # è‡ªåŠ¨ä½¿ç”¨é…ç½®çš„å¹¶è¡Œ",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬å…­éƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "href": "1070-fairmetrics.html#ç¬¬å…­éƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹\n\nå®Œæ•´åˆ†ææµç¨‹\n# _targets.R\nlibrary(targets)\nlibrary(tarchetypes)\n\nsource(\"R/functions.R\")\n\ntar_option_set(\n    packages = c(\"dplyr\", \"ggplot2\", \"caret\")\n)\n\nlist(\n    # æ•°æ®\n    tar_target(file, \"data/diabetes.csv\", format = \"file\"),\n    tar_target(raw_data, read.csv(file)),\n\n    # é¢„å¤„ç†\n    tar_target(clean_data, {\n        raw_data %&gt;%\n            filter(!is.na(Outcome)) %&gt;%\n            mutate(across(where(is.numeric), scale))\n    }),\n\n    # æ•°æ®åˆ†å‰²\n    tar_target(train_idx, sample(1:nrow(clean_data), 0.7 * nrow(clean_data))),\n    tar_target(train_data, clean_data[train_idx, ]),\n    tar_target(test_data, clean_data[-train_idx, ]),\n\n    # å¤šæ¨¡å‹è®­ç»ƒ\n    tar_target(methods, c(\"glm\", \"rf\", \"xgb\")),\n    tar_target(\n        models,\n        train_model(train_data, method = methods),\n        pattern = map(methods)\n    ),\n\n    # è¯„ä¼°\n    tar_target(\n        evaluations,\n        evaluate_model(models, test_data),\n        pattern = map(models)\n    ),\n\n    # æ±‡æ€»\n    tar_target(summary_table, summarize_results(evaluations)),\n\n    # æŠ¥å‘Š\n    tar_render(report, \"analysis_report.Rmd\")\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬ä¸ƒéƒ¨åˆ†è°ƒè¯•ä¸æœ€ä½³å®è·µ",
    "href": "1070-fairmetrics.html#ç¬¬ä¸ƒéƒ¨åˆ†è°ƒè¯•ä¸æœ€ä½³å®è·µ",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šè°ƒè¯•ä¸æœ€ä½³å®è·µ",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šè°ƒè¯•ä¸æœ€ä½³å®è·µ\n\nè°ƒè¯•\n# æ£€æŸ¥å•ä¸ªç›®æ ‡\ntar_load(raw_data)\ntar_load_everything()\n\n# æŸ¥çœ‹æ„å»ºå…ƒæ•°æ®\ntar_meta()\n\n# åˆ é™¤ç¼“å­˜é‡æ–°å¼€å§‹\ntar_destroy()\n\n# æ¸…ç†ç‰¹å®šç›®æ ‡\ntar_delete(clean_data)\n\n\næœ€ä½³å®è·µ\n# 1. ä½¿ç”¨å‡½æ•°è€Œéè„šæœ¬\n# å¥½\ntar_target(result, my_function(data))\n\n# é¿å…\ntar_target(result, {\n    # å¾ˆé•¿çš„ä»£ç å—...\n})\n\n# 2. å°ç²’åº¦ç›®æ ‡\n# ä¾¿äºå¢é‡æ›´æ–°å’Œå¹¶è¡Œ\n\n# 3. ä½¿ç”¨ format ä¼˜åŒ–å­˜å‚¨\ntar_target(large_data, big_computation(), format = \"qs\")\n\n# 4. æ–‡ä»¶è¿½è¸ª\ntar_target(input_file, \"data.csv\", format = \"file\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥",
    "href": "1070-fairmetrics.html#å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥",
    "text": "å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥\n# ===== ç®¡é“æ“ä½œ =====\ntar_make() # è¿è¡Œç®¡é“\ntar_make_future() # å¹¶è¡Œè¿è¡Œ\ntar_visnetwork() # å¯è§†åŒ–ä¾èµ–å›¾\ntar_manifest() # æŸ¥çœ‹ç›®æ ‡æ¸…å•\n\n# ===== è¯»å–ç»“æœ =====\ntar_read(target_name) # è¯»å–ç›®æ ‡\ntar_load(target_name) # åŠ è½½åˆ°ç¯å¢ƒ\ntar_load_everything() # åŠ è½½æ‰€æœ‰\n\n# ===== çŠ¶æ€æ£€æŸ¥ =====\ntar_outdated() # è¿‡æœŸçš„ç›®æ ‡\ntar_progress() # æ„å»ºè¿›åº¦\ntar_meta() # å…ƒæ•°æ®\n\n# ===== æ¸…ç† =====\ntar_destroy() # åˆ é™¤æ‰€æœ‰ç¼“å­˜\ntar_delete(name) # åˆ é™¤ç‰¹å®šç›®æ ‡\ntar_invalidate(name) # æ ‡è®°ä¸ºè¿‡æœŸ\n\n# ===== ç›®æ ‡ç±»å‹ =====\ntar_target() # åŸºæœ¬ç›®æ ‡\ntar_render() # R Markdown\ntar_quarto() # Quarto\ntar_file() # æ–‡ä»¶ç›®æ ‡",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#å°ç»“-1",
    "href": "1070-fairmetrics.html#å°ç»“-1",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "å°ç»“",
    "text": "å°ç»“\ntargets çš„æ ¸å¿ƒä¼˜åŠ¿ï¼š\n\nå¯é‡å¤æ€§ï¼šä»£ç +æ•°æ®+ä¾èµ–å…¨è¿½è¸ª\næ•ˆç‡ï¼šå¢é‡æ„å»ºï¼Œåªæ›´æ–°å˜åŒ–éƒ¨åˆ†\nå¹¶è¡Œï¼šè‡ªåŠ¨å¹¶è¡Œæ‰§è¡Œç‹¬ç«‹ç›®æ ‡\nå¯è§†åŒ–ï¼šæ¸…æ™°çš„ä¾èµ–å…³ç³»å›¾\n\n\nå»ºè®®ï¼šå¯¹äºä»»ä½•è¶…è¿‡ä¸€ä¸ªè„šæœ¬çš„åˆ†æé¡¹ç›®ï¼Œéƒ½å€¼å¾—ä½¿ç”¨ targets ç®¡ç†å·¥ä½œæµã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#å‚è€ƒèµ„æº-1",
    "href": "1070-fairmetrics.html#å‚è€ƒèµ„æº-1",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\ntargets å®˜æ–¹æ–‡æ¡£\ntargets ç”¨æˆ·æ‰‹å†Œ\ntarchetypes æ‰©å±•\n\n{r setup, include=FALSE} knitr::opts_chunk$set(     echo = TRUE,     warning = FALSE,     message = FALSE,     fig.width = 8,     fig.height = 5 )",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#arrow-ç®€ä»‹",
    "href": "1070-fairmetrics.html#arrow-ç®€ä»‹",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "arrow ç®€ä»‹",
    "text": "arrow ç®€ä»‹\narrow æ˜¯ Apache Arrow é¡¹ç›®çš„ R æ¥å£ï¼Œæä¾›äº†é«˜æ•ˆçš„å¤§æ•°æ®å¤„ç†èƒ½åŠ›ã€‚å®ƒæ”¯æŒ Parquet ç­‰åˆ—å¼å­˜å‚¨æ ¼å¼ï¼Œå®ç°å†…å­˜å¤–è®¡ç®—ï¼Œå¹¶ä¸ dplyr æ— ç¼é›†æˆã€‚\n\nä¸ºä»€ä¹ˆä½¿ç”¨ arrowï¼Ÿ\n\n\n\nä¼ ç»Ÿæ–¹å¼\narrow æ–¹å¼\n\n\n\n\nCSV è¯»å†™æ…¢\nParquet é«˜é€Ÿè¯»å†™\n\n\nå…¨éƒ¨åŠ è½½å†…å­˜\nå†…å­˜å¤–æ‡’è®¡ç®—\n\n\nå•è¯­è¨€ä½¿ç”¨\nè·¨è¯­è¨€äº’æ“ä½œ\n\n\næ•°æ®ç±»å‹ä¸¢å¤±\nä¿ç•™å®Œæ•´ç±»å‹\n\n\n\n\n\næ ¸å¿ƒä¼˜åŠ¿\n\nParquet æ ¼å¼ï¼šåˆ—å¼å­˜å‚¨ï¼Œé«˜å‹ç¼©æ¯”ï¼Œå¿«é€ŸæŸ¥è¯¢\né›¶æ‹·è´ï¼šè·¨è¯­è¨€å…±äº«æ•°æ®æ— éœ€å¤åˆ¶\næƒ°æ€§æ±‚å€¼ï¼šåªè®¡ç®—éœ€è¦çš„éƒ¨åˆ†\ndplyr åç«¯ï¼šç†Ÿæ‚‰çš„è¯­æ³•å¤„ç†å¤§æ•°æ®",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#å®‰è£…ä¸åŠ è½½-2",
    "href": "1070-fairmetrics.html#å®‰è£…ä¸åŠ è½½-2",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\nlibrary(arrow)\nlibrary(dplyr)\nlibrary(ggplot2)\n\nset.seed(42)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬ä¸€éƒ¨åˆ†parquet-æ–‡ä»¶æ“ä½œ",
    "href": "1070-fairmetrics.html#ç¬¬ä¸€éƒ¨åˆ†parquet-æ–‡ä»¶æ“ä½œ",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šParquet æ–‡ä»¶æ“ä½œ",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šParquet æ–‡ä»¶æ“ä½œ\n\nå†™å…¥ Parquet\n# åˆ›å»ºç¤ºä¾‹æ•°æ®\nn &lt;- 100000\ndata &lt;- data.frame(\n    id = 1:n,\n    category = sample(LETTERS[1:5], n, replace = TRUE),\n    value = rnorm(n, 100, 15),\n    date = seq.Date(as.Date(\"2020-01-01\"), by = \"day\", length.out = n)\n)\n\n# å†™å…¥ Parquet\nwrite_parquet(data, \"example.parquet\")\n\n# æŸ¥çœ‹æ–‡ä»¶å¤§å°\ncsv_size &lt;- object.size(write.csv(data, textConnection(\"csv_out\")))\nparquet_size &lt;- file.info(\"example.parquet\")$size\ncat(\"Parquet æ–‡ä»¶å¤§å°:\", round(parquet_size / 1024 / 1024, 2), \"MB\\n\")\n\n\nè¯»å– Parquet\n# å®Œæ•´è¯»å–\ndf &lt;- read_parquet(\"example.parquet\")\ncat(\"è¯»å–è¡Œæ•°:\", nrow(df), \"\\n\")\n\n# åªè¯»å–ç‰¹å®šåˆ—\ndf_subset &lt;- read_parquet(\"example.parquet\",\n    col_select = c(\"id\", \"category\", \"value\")\n)\ncat(\"å­é›†åˆ—æ•°:\", ncol(df_subset), \"\\n\")\n\n\nParquet å…ƒæ•°æ®\n# æŸ¥çœ‹ schema\nschema &lt;- open_dataset(\"example.parquet\")$schema\nprint(schema)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬äºŒéƒ¨åˆ†å†…å­˜å¤–è®¡ç®—",
    "href": "1070-fairmetrics.html#ç¬¬äºŒéƒ¨åˆ†å†…å­˜å¤–è®¡ç®—",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šå†…å­˜å¤–è®¡ç®—",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šå†…å­˜å¤–è®¡ç®—\n\nä½¿ç”¨ open_dataset\n# æ‰“å¼€æ•°æ®é›†ï¼ˆä¸åŠ è½½åˆ°å†…å­˜ï¼‰\nds &lt;- open_dataset(\"example.parquet\")\ncat(\"æ•°æ®é›†ç±»å‹:\", class(ds)[1], \"\\n\")\n\n# ä½¿ç”¨ dplyr è¯­æ³•æŸ¥è¯¢\nresult &lt;- ds %&gt;%\n    filter(category == \"A\") %&gt;%\n    group_by(category) %&gt;%\n    summarise(\n        n = n(),\n        mean_value = mean(value),\n        .groups = \"drop\"\n    ) %&gt;%\n    collect() # åªåœ¨æœ€åæ‰åŠ è½½åˆ°å†…å­˜\n\nprint(result)\n\n\næƒ°æ€§æ±‚å€¼\n# æ„å»ºæŸ¥è¯¢ï¼ˆä¸æ‰§è¡Œï¼‰\nquery &lt;- ds %&gt;%\n    filter(value &gt; 100) %&gt;%\n    mutate(value_squared = value^2) %&gt;%\n    arrange(desc(value))\n\n# æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’\ncat(\"è¿™æ˜¯æƒ°æ€§æŸ¥è¯¢ï¼Œå°šæœªæ‰§è¡Œ\\n\")\ncat(\"ç±»å‹:\", class(query)[1], \"\\n\")\n\n# æ‰§è¡ŒæŸ¥è¯¢\nresult &lt;- query %&gt;%\n    head(5) %&gt;%\n    collect()\n\nprint(result)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬ä¸‰éƒ¨åˆ†åˆ†åŒºæ•°æ®é›†",
    "href": "1070-fairmetrics.html#ç¬¬ä¸‰éƒ¨åˆ†åˆ†åŒºæ•°æ®é›†",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šåˆ†åŒºæ•°æ®é›†",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šåˆ†åŒºæ•°æ®é›†\n\nå†™å…¥åˆ†åŒºæ•°æ®\n# æŒ‰ category åˆ†åŒºå†™å…¥\nwrite_dataset(\n    data,\n    \"partitioned_data\",\n    partitioning = \"category\"\n)\n\n# æŸ¥çœ‹ç›®å½•ç»“æ„\nlist.files(\"partitioned_data\", recursive = TRUE)\n\n\nè¯»å–åˆ†åŒºæ•°æ®\n# è‡ªåŠ¨è¯†åˆ«åˆ†åŒº\nds_partitioned &lt;- open_dataset(\"partitioned_data\")\n\n# åˆ†åŒºè£å‰ªï¼šåªæ‰«æéœ€è¦çš„åˆ†åŒº\nresult &lt;- ds_partitioned %&gt;%\n    filter(category == \"A\") %&gt;% # åªè¯»å– A åˆ†åŒº\n    summarise(mean_value = mean(value)) %&gt;%\n    collect()\n\ncat(\"A ç±»åˆ«å¹³å‡å€¼:\", round(result$mean_value, 2), \"\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬å››éƒ¨åˆ†ä¸-dplyr-æ·±åº¦é›†æˆ",
    "href": "1070-fairmetrics.html#ç¬¬å››éƒ¨åˆ†ä¸-dplyr-æ·±åº¦é›†æˆ",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šä¸ dplyr æ·±åº¦é›†æˆ",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šä¸ dplyr æ·±åº¦é›†æˆ\n\nå®Œæ•´çš„ dplyr ç®¡é“\n# å¤æ‚æŸ¥è¯¢\nanalysis &lt;- ds %&gt;%\n    filter(value &gt; 80) %&gt;%\n    mutate(\n        year = year(date),\n        month = month(date),\n        value_group = case_when(\n            value &gt; 120 ~ \"é«˜\",\n            value &gt; 100 ~ \"ä¸­\",\n            TRUE ~ \"ä½\"\n        )\n    ) %&gt;%\n    group_by(category, value_group) %&gt;%\n    summarise(\n        count = n(),\n        mean_val = mean(value),\n        sd_val = sd(value),\n        .groups = \"drop\"\n    ) %&gt;%\n    arrange(category, desc(count)) %&gt;%\n    collect()\n\nprint(analysis)\n\n\nå¯è§†åŒ–å¤§æ•°æ®æ±‡æ€»\n# ä» Arrow ç›´æ¥æ±‡æ€»åå¯è§†åŒ–\nmonthly_trend &lt;- ds %&gt;%\n    mutate(\n        year_month = floor_date(date, \"month\")\n    ) %&gt;%\n    group_by(year_month, category) %&gt;%\n    summarise(mean_value = mean(value), .groups = \"drop\") %&gt;%\n    collect()\n\nggplot(monthly_trend, aes(x = year_month, y = mean_value, color = category)) +\n    geom_line(linewidth = 0.8) +\n    labs(\n        title = \"æœˆåº¦è¶‹åŠ¿ï¼ˆä»Parquetæ•°æ®é›†è®¡ç®—ï¼‰\",\n        x = \"æœˆä»½\", y = \"å¹³å‡å€¼\", color = \"ç±»åˆ«\"\n    ) +\n    theme_bw()",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬äº”éƒ¨åˆ†è·¨è¯­è¨€äº’æ“ä½œ",
    "href": "1070-fairmetrics.html#ç¬¬äº”éƒ¨åˆ†è·¨è¯­è¨€äº’æ“ä½œ",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šè·¨è¯­è¨€äº’æ“ä½œ",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šè·¨è¯­è¨€äº’æ“ä½œ\n\nArrow ä¸ Python å…±äº«æ•°æ®\n```{r eval=FALSE} # R ä¸­å†™å…¥ Arrow æ ¼å¼ write_feather(data, â€œshared_data.arrowâ€)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬å…­éƒ¨åˆ†æ€§èƒ½ä¼˜åŒ–",
    "href": "1070-fairmetrics.html#ç¬¬å…­éƒ¨åˆ†æ€§èƒ½ä¼˜åŒ–",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šæ€§èƒ½ä¼˜åŒ–",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šæ€§èƒ½ä¼˜åŒ–\n\nåˆ—é€‰æ‹©\n# åªè¯»å–éœ€è¦çš„åˆ—\nsystem.time({\n    result &lt;- read_parquet(\"example.parquet\",\n        col_select = c(\"id\", \"value\")\n    )\n})\n\n\nè¡Œè¿‡æ»¤ä¸‹æ¨\n# è¿‡æ»¤æ¡ä»¶ä¸‹æ¨åˆ°å­˜å‚¨å±‚\nsystem.time({\n    result &lt;- ds %&gt;%\n        filter(category == \"A\", value &gt; 100) %&gt;%\n        collect()\n})\ncat(\"è¿‡æ»¤åè¡Œæ•°:\", nrow(result), \"\\n\")\n\n\nå¹¶è¡Œè¯»å–\n# Arrow è‡ªåŠ¨ä½¿ç”¨å¤šçº¿ç¨‹\narrow::set_cpu_count(4) # è®¾ç½®çº¿ç¨‹æ•°\ncat(\"å½“å‰ CPU çº¿ç¨‹æ•°:\", arrow::cpu_count(), \"\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "href": "1070-fairmetrics.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹\n\nå¤§è§„æ¨¡æ•°æ®åˆ†æ\n# æ¨¡æ‹Ÿå¤§è§„æ¨¡åŒ»ç–—æ•°æ®\nn_large &lt;- 500000\n\nlarge_data &lt;- data.frame(\n    patient_id = 1:n_large,\n    age = sample(18:90, n_large, replace = TRUE),\n    gender = sample(c(\"M\", \"F\"), n_large, replace = TRUE),\n    diagnosis = sample(c(\"A\", \"B\", \"C\", \"D\"), n_large, replace = TRUE),\n    cost = rexp(n_large, 1 / 5000),\n    visit_date = sample(\n        seq.Date(as.Date(\"2020-01-01\"),\n            as.Date(\"2025-12-31\"),\n            by = \"day\"\n        ),\n        n_large,\n        replace = TRUE\n    )\n)\n\n# å†™å…¥åˆ†åŒº Parquet\nwrite_dataset(\n    large_data,\n    \"healthcare_data\",\n    partitioning = c(\"diagnosis\")\n)\n\ncat(\"æ•°æ®å·²å†™å…¥åˆ†åŒºç›®å½•\\n\")\n# é«˜æ•ˆåˆ†æ\nhealthcare_ds &lt;- open_dataset(\"healthcare_data\")\n\n# å¤æ‚èšåˆæŸ¥è¯¢\nanalysis_result &lt;- healthcare_ds %&gt;%\n    mutate(age_group = case_when(\n        age &lt; 30 ~ \"18-29\",\n        age &lt; 50 ~ \"30-49\",\n        age &lt; 70 ~ \"50-69\",\n        TRUE ~ \"70+\"\n    )) %&gt;%\n    group_by(diagnosis, gender, age_group) %&gt;%\n    summarise(\n        patient_count = n(),\n        avg_cost = mean(cost),\n        total_cost = sum(cost),\n        .groups = \"drop\"\n    ) %&gt;%\n    arrange(diagnosis, desc(patient_count)) %&gt;%\n    collect()\n\nhead(analysis_result, 10)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#æ¸…ç†",
    "href": "1070-fairmetrics.html#æ¸…ç†",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "æ¸…ç†",
    "text": "æ¸…ç†\n# åˆ é™¤ä¸´æ—¶æ–‡ä»¶\nunlink(\"example.parquet\")\nunlink(\"data.arrow\")\nunlink(\"partitioned_data\", recursive = TRUE)\nunlink(\"healthcare_data\", recursive = TRUE)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-1",
    "href": "1070-fairmetrics.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-1",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n```{r eval=FALSE} # ===== è¯»å†™ Parquet ===== read_parquet(â€œfile.parquetâ€) write_parquet(df, â€œfile.parquetâ€)\nread_parquet(â€œfile.parquetâ€, col_select = c(â€œaâ€, â€œbâ€))",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#prophet-ç®€ä»‹",
    "href": "1070-fairmetrics.html#prophet-ç®€ä»‹",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "prophet ç®€ä»‹",
    "text": "prophet ç®€ä»‹\nprophet æ˜¯ Metaï¼ˆFacebookï¼‰å¼€æºçš„æ—¶é—´åºåˆ—é¢„æµ‹å·¥å…·ï¼Œä¸“ä¸ºå•†ä¸šé¢„æµ‹è®¾è®¡ã€‚å®ƒèƒ½å¤Ÿè‡ªåŠ¨å¤„ç†è¶‹åŠ¿ã€å­£èŠ‚æ€§å’ŒèŠ‚å‡æ—¥æ•ˆåº”ï¼Œéå¸¸é€‚åˆéä¸“ä¸šç”¨æˆ·å¿«é€Ÿè·å¾—é«˜è´¨é‡é¢„æµ‹ã€‚\n\nä¸ºä»€ä¹ˆä½¿ç”¨ prophetï¼Ÿ\n\n\n\nä¼ ç»Ÿæ–¹æ³•\nprophet ä¼˜åŠ¿\n\n\n\n\néœ€è¦ä¸“ä¸šçŸ¥è¯†\nè‡ªåŠ¨åŒ–ç¨‹åº¦é«˜\n\n\næ‰‹åŠ¨å¤„ç†å­£èŠ‚æ€§\nè‡ªåŠ¨æ£€æµ‹å¤šé‡å­£èŠ‚æ€§\n\n\nç¼ºå¤±å€¼æ•æ„Ÿ\nç¨³å¥å¤„ç†ç¼ºå¤±\n\n\néš¾ä»¥è§£é‡Š\nå¯åˆ†è§£ã€å¯è§£é‡Š\n\n\n\n\n\næ ¸å¿ƒæ¨¡å‹\nprophet å°†æ—¶é—´åºåˆ—åˆ†è§£ä¸ºï¼š \\[y(t) = g(t) + s(t) + h(t) + \\epsilon_t\\]\n\n\\(g(t)\\)ï¼šè¶‹åŠ¿ï¼ˆå¢é•¿æ›²çº¿ï¼‰\n\\(s(t)\\)ï¼šå­£èŠ‚æ€§ï¼ˆå‘¨/å¹´å‘¨æœŸï¼‰\n\\(h(t)\\)ï¼šèŠ‚å‡æ—¥æ•ˆåº”\n\\(\\epsilon_t\\)ï¼šæ®‹å·®",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#å®‰è£…ä¸åŠ è½½-3",
    "href": "1070-fairmetrics.html#å®‰è£…ä¸åŠ è½½-3",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\nlibrary(prophet)\nlibrary(dplyr)\nlibrary(ggplot2)\n\nset.seed(42)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬ä¸€éƒ¨åˆ†å¿«é€Ÿå…¥é—¨-1",
    "href": "1070-fairmetrics.html#ç¬¬ä¸€éƒ¨åˆ†å¿«é€Ÿå…¥é—¨-1",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šå¿«é€Ÿå…¥é—¨",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šå¿«é€Ÿå…¥é—¨\n\næ•°æ®æ ¼å¼\n# prophet è¦æ±‚ä¸¤åˆ—ï¼šds (æ—¥æœŸ) å’Œ y (æ•°å€¼)\n# ä½¿ç”¨å†…ç½®ç¤ºä¾‹æ•°æ®\ndf &lt;- read.csv(\n    \"https://raw.githubusercontent.com/facebook/prophet/main/examples/example_wp_log_peyton_manning.csv\"\n)\n\nhead(df)\ncat(\"\\næ•°æ®èŒƒå›´:\", min(df$ds), \"è‡³\", max(df$ds), \"\\n\")\ncat(\"æ•°æ®ç‚¹æ•°:\", nrow(df), \"\\n\")\n\n\næ‹Ÿåˆæ¨¡å‹\n# åŸºæœ¬æ‹Ÿåˆ\nm &lt;- prophet(df)\n\n# æŸ¥çœ‹æ¨¡å‹ç»„ä»¶\ncat(\"æ¨¡å‹åŒ…å«çš„ç»„ä»¶:\\n\")\ncat(\"- è¶‹åŠ¿ç±»å‹:\", m$growth, \"\\n\")\ncat(\"- å­£èŠ‚æ€§:\", names(m$seasonalities), \"\\n\")\n\n\nç”Ÿæˆé¢„æµ‹\n# åˆ›å»ºæœªæ¥æ—¥æœŸæ¡†æ¶\nfuture &lt;- make_future_dataframe(m, periods = 365)\ntail(future)\n\n# é¢„æµ‹\nforecast &lt;- predict(m, future)\ncat(\"\\né¢„æµ‹åˆ—:\", head(names(forecast)), \"...\\n\")\n\n\nå¯è§†åŒ–\n# é¢„æµ‹å›¾\nplot(m, forecast) +\n    labs(\n        title = \"Prophet æ—¶é—´åºåˆ—é¢„æµ‹\",\n        x = \"æ—¥æœŸ\", y = \"æ•°å€¼\"\n    )\n# ç»„ä»¶åˆ†è§£å›¾\nprophet_plot_components(m, forecast)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬äºŒéƒ¨åˆ†è¶‹åŠ¿å»ºæ¨¡",
    "href": "1070-fairmetrics.html#ç¬¬äºŒéƒ¨åˆ†è¶‹åŠ¿å»ºæ¨¡",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šè¶‹åŠ¿å»ºæ¨¡",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šè¶‹åŠ¿å»ºæ¨¡\n\nçº¿æ€§è¶‹åŠ¿\n# é»˜è®¤çº¿æ€§è¶‹åŠ¿\nm_linear &lt;- prophet(df, growth = \"linear\")\n\nforecast_linear &lt;- predict(m_linear, future)\nplot(m_linear, forecast_linear) +\n    ggtitle(\"çº¿æ€§è¶‹åŠ¿\")\n\n\nLogistic å¢é•¿\n# è®¾ç½®å®¹é‡ä¸Šé™\ndf_logistic &lt;- df\ndf_logistic$cap &lt;- 10 # ä¸Šé™\ndf_logistic$floor &lt;- 0 # ä¸‹é™ï¼ˆå¯é€‰ï¼‰\n\n# ä½¿ç”¨ logistic å¢é•¿\nm_logistic &lt;- prophet(df_logistic, growth = \"logistic\")\n\nfuture_logistic &lt;- make_future_dataframe(m_logistic, periods = 365)\nfuture_logistic$cap &lt;- 10\nfuture_logistic$floor &lt;- 0\n\nforecast_logistic &lt;- predict(m_logistic, future_logistic)\nplot(m_logistic, forecast_logistic) +\n    ggtitle(\"Logistic å¢é•¿ï¼ˆæœ‰ä¸Šé™ï¼‰\")\n\n\nè¶‹åŠ¿å˜ç‚¹\n# æŸ¥çœ‹è‡ªåŠ¨æ£€æµ‹çš„å˜ç‚¹\ncat(\"æ£€æµ‹åˆ°çš„è¶‹åŠ¿å˜ç‚¹:\\n\")\nprint(head(m$changepoints))\n\n# å¯è§†åŒ–å˜ç‚¹\nplot(m, forecast) +\n    geom_vline(\n        xintercept = as.numeric(m$changepoints),\n        linetype = \"dashed\", color = \"red\", alpha = 0.5\n    ) +\n    ggtitle(\"è¶‹åŠ¿å˜ç‚¹æ ‡æ³¨\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬ä¸‰éƒ¨åˆ†å­£èŠ‚æ€§",
    "href": "1070-fairmetrics.html#ç¬¬ä¸‰éƒ¨åˆ†å­£èŠ‚æ€§",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šå­£èŠ‚æ€§",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šå­£èŠ‚æ€§\n\nè‡ªåŠ¨å­£èŠ‚æ€§\n# æŸ¥çœ‹é»˜è®¤å­£èŠ‚æ€§\ncat(\"å¹´åº¦å­£èŠ‚æ€§:\", m$yearly.seasonality, \"\\n\")\ncat(\"å‘¨å­£èŠ‚æ€§:\", m$weekly.seasonality, \"\\n\")\ncat(\"æ—¥å­£èŠ‚æ€§:\", m$daily.seasonality, \"\\n\")\n\n\nè‡ªå®šä¹‰å­£èŠ‚æ€§\n# ç¦ç”¨é»˜è®¤å­£èŠ‚æ€§ï¼Œæ·»åŠ è‡ªå®šä¹‰\nm_custom &lt;- prophet(weekly.seasonality = FALSE, yearly.seasonality = FALSE)\n\n# æ·»åŠ è‡ªå®šä¹‰å­£èŠ‚æ€§\nm_custom &lt;- add_seasonality(m_custom,\n    name = \"monthly\",\n    period = 30.5, fourier.order = 5\n)\nm_custom &lt;- add_seasonality(m_custom,\n    name = \"yearly\",\n    period = 365.25, fourier.order = 10\n)\n\nm_custom &lt;- fit.prophet(m_custom, df)\n\nforecast_custom &lt;- predict(m_custom, future)\nprophet_plot_components(m_custom, forecast_custom)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬å››éƒ¨åˆ†èŠ‚å‡æ—¥æ•ˆåº”",
    "href": "1070-fairmetrics.html#ç¬¬å››éƒ¨åˆ†èŠ‚å‡æ—¥æ•ˆåº”",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šèŠ‚å‡æ—¥æ•ˆåº”",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šèŠ‚å‡æ—¥æ•ˆåº”\n\næ·»åŠ èŠ‚å‡æ—¥\n# å®šä¹‰èŠ‚å‡æ—¥\nplayoffs &lt;- data.frame(\n    holiday = \"playoff\",\n    ds = as.Date(c(\n        \"2008-01-13\", \"2009-01-03\", \"2010-01-16\",\n        \"2010-01-24\", \"2010-02-07\", \"2011-01-08\",\n        \"2013-01-12\", \"2014-01-12\", \"2014-01-19\",\n        \"2014-02-02\", \"2015-01-11\", \"2016-01-17\"\n    )),\n    lower_window = 0,\n    upper_window = 1 # å½±å“å½“å¤©å’Œåä¸€å¤©\n)\n\nsuperbowls &lt;- data.frame(\n    holiday = \"superbowl\",\n    ds = as.Date(c(\"2010-02-07\", \"2014-02-02\")),\n    lower_window = 0,\n    upper_window = 1\n)\n\nholidays &lt;- bind_rows(playoffs, superbowls)\nprint(holidays)\n# ä½¿ç”¨èŠ‚å‡æ—¥æ‹Ÿåˆ\nm_holidays &lt;- prophet(df, holidays = holidays)\nforecast_holidays &lt;- predict(m_holidays, future)\n\n# æŸ¥çœ‹èŠ‚å‡æ—¥æ•ˆåº”\nprophet_plot_components(m_holidays, forecast_holidays)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬äº”éƒ¨åˆ†æ¨¡å‹è¯„ä¼°",
    "href": "1070-fairmetrics.html#ç¬¬äº”éƒ¨åˆ†æ¨¡å‹è¯„ä¼°",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šæ¨¡å‹è¯„ä¼°",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šæ¨¡å‹è¯„ä¼°\n\näº¤å‰éªŒè¯\n# æ—¶é—´åºåˆ—äº¤å‰éªŒè¯\ndf_cv &lt;- cross_validation(\n    m,\n    initial = 730, # åˆå§‹è®­ç»ƒæœŸ (2å¹´)\n    period = 180, # æ¯æ¬¡æ»šåŠ¨ (6ä¸ªæœˆ)\n    horizon = 365, # é¢„æµ‹èŒƒå›´ (1å¹´)\n    units = \"days\"\n)\n\nhead(df_cv)\n\n\næ€§èƒ½æŒ‡æ ‡\n# è®¡ç®—è¯„ä¼°æŒ‡æ ‡\ndf_p &lt;- performance_metrics(df_cv)\nprint(tail(df_p))\n\ncat(\"\\næ•´ä½“ MAPE:\", round(mean(df_p$mape) * 100, 2), \"%\\n\")\ncat(\"æ•´ä½“ RMSE:\", round(mean(df_p$rmse), 2), \"\\n\")\n\n\nå¯è§†åŒ–è¯„ä¼°\nplot_cross_validation_metric(df_cv, metric = \"mape\") +\n    ggtitle(\"MAPE éšé¢„æµ‹èŒƒå›´å˜åŒ–\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬å…­éƒ¨åˆ†å‚æ•°è°ƒä¼˜",
    "href": "1070-fairmetrics.html#ç¬¬å…­éƒ¨åˆ†å‚æ•°è°ƒä¼˜",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šå‚æ•°è°ƒä¼˜",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šå‚æ•°è°ƒä¼˜\n\nå…³é”®å‚æ•°\n# è°ƒæ•´å‚æ•°\nm_tuned &lt;- prophet(\n    df,\n    changepoint.prior.scale = 0.05, # è¶‹åŠ¿çµæ´»æ€§ (é»˜è®¤0.05)\n    seasonality.prior.scale = 10, # å­£èŠ‚æ€§å¼ºåº¦ (é»˜è®¤10)\n    holidays.prior.scale = 10, # èŠ‚å‡æ—¥å¼ºåº¦ (é»˜è®¤10)\n    seasonality.mode = \"multiplicative\" # ä¹˜æ³•å­£èŠ‚æ€§\n)\n\nforecast_tuned &lt;- predict(m_tuned, future)\nplot(m_tuned, forecast_tuned) +\n    ggtitle(\"è°ƒå‚åçš„é¢„æµ‹\")\n\n\nå‚æ•°ç½‘æ ¼æœç´¢\n# ç®€åŒ–çš„ç½‘æ ¼æœç´¢\nparam_grid &lt;- expand.grid(\n    changepoint.prior.scale = c(0.01, 0.05, 0.1),\n    seasonality.prior.scale = c(1, 10)\n)\n\n# å¯¹æ¯ç»„å‚æ•°è¿›è¡Œäº¤å‰éªŒè¯ï¼ˆç®€åŒ–ç¤ºä¾‹ï¼‰\nresults &lt;- list()\nfor (i in 1:2) { # åªæµ‹è¯•å‰2ç»„\n    m_test &lt;- prophet(\n        df,\n        changepoint.prior.scale = param_grid$changepoint.prior.scale[i],\n        seasonality.prior.scale = param_grid$seasonality.prior.scale[i]\n    )\n\n    cv_test &lt;- cross_validation(m_test,\n        initial = 730, period = 180,\n        horizon = 365, units = \"days\"\n    )\n    perf &lt;- performance_metrics(cv_test)\n\n    results[[i]] &lt;- data.frame(\n        changepoint.prior.scale = param_grid$changepoint.prior.scale[i],\n        seasonality.prior.scale = param_grid$seasonality.prior.scale[i],\n        mape = mean(perf$mape)\n    )\n}\n\nresults_df &lt;- do.call(rbind, results)\nprint(results_df)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹-1",
    "href": "1070-fairmetrics.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹-1",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹\n\nç–¾ç—…å‘ç—…ç‡é¢„æµ‹\n# æ¨¡æ‹Ÿç–¾ç—…å‘ç—…ç‡æ•°æ®\nset.seed(123)\nn_days &lt;- 1000\ndates &lt;- seq.Date(as.Date(\"2020-01-01\"), by = \"day\", length.out = n_days)\n\n# ç”Ÿæˆå¸¦è¶‹åŠ¿å’Œå­£èŠ‚æ€§çš„æ•°æ®\ntrend &lt;- 100 + 0.05 * (1:n_days)\nyearly_season &lt;- 20 * sin(2 * pi * (1:n_days) / 365)\nweekly_season &lt;- 5 * sin(2 * pi * (1:n_days) / 7)\nnoise &lt;- rnorm(n_days, 0, 10)\n\ncases &lt;- pmax(0, trend + yearly_season + weekly_season + noise)\n\ndisease_data &lt;- data.frame(\n    ds = dates,\n    y = cases\n)\n\nhead(disease_data)\n# æ‹Ÿåˆæ¨¡å‹\nm_disease &lt;- prophet(disease_data,\n    yearly.seasonality = TRUE,\n    weekly.seasonality = TRUE\n)\n\n# é¢„æµ‹æœªæ¥90å¤©\nfuture_disease &lt;- make_future_dataframe(m_disease, periods = 90)\nforecast_disease &lt;- predict(m_disease, future_disease)\n\n# å¯è§†åŒ–\nplot(m_disease, forecast_disease) +\n    labs(\n        title = \"ç–¾ç—…å‘ç—…ç‡é¢„æµ‹\",\n        x = \"æ—¥æœŸ\", y = \"å‘ç—…æ•°\"\n    )\n# å­£èŠ‚æ€§åˆ†è§£\nprophet_plot_components(m_disease, forecast_disease)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-2",
    "href": "1070-fairmetrics.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-2",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n```{r eval=FALSE} # ===== åŸºæœ¬æµç¨‹ ===== m &lt;- prophet(df) future &lt;- make_future_dataframe(m, periods = 365) forecast &lt;- predict(m, future) plot(m, forecast)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#å°ç»“-2",
    "href": "1070-fairmetrics.html#å°ç»“-2",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "å°ç»“",
    "text": "å°ç»“\nprophet çš„æ ¸å¿ƒå·¥ä½œæµç¨‹ï¼š\n\nå‡†å¤‡æ•°æ®ï¼šds (æ—¥æœŸ) + y (æ•°å€¼)\næ‹Ÿåˆæ¨¡å‹ï¼šprophet(df)\nç”Ÿæˆæœªæ¥ï¼šmake_future_dataframe()\né¢„æµ‹ï¼špredict()\nè¯„ä¼°ï¼šcross_validation() + performance_metrics()\n\n\né€‚ç”¨åœºæ™¯ï¼šæœ‰æ˜æ˜¾å­£èŠ‚æ€§å’Œè¶‹åŠ¿çš„å•†ä¸š/å¥åº·æ•°æ®é¢„æµ‹ï¼Œç‰¹åˆ«æ˜¯æœ‰èŠ‚å‡æ—¥æ•ˆåº”çš„åœºæ™¯ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1070-fairmetrics.html#å‚è€ƒèµ„æº-2",
    "href": "1070-fairmetrics.html#å‚è€ƒèµ„æº-2",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nprophet å®˜æ–¹æ–‡æ¡£\nprophet è®ºæ–‡\nprophet R åŒ…",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¤– æœºå™¨å­¦ä¹ ",
      "fairmetrics å…¬å¹³æ€§è¯„ä¼°"
    ]
  },
  {
    "objectID": "1069-torch-deep-learning.html",
    "href": "1069-torch-deep-learning.html",
    "title": "torch æ·±åº¦å­¦ä¹ å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "torch æ˜¯ R è¯­è¨€ä¸­ PyTorch çš„åŸç”Ÿå®ç°ï¼Œæä¾›äº†å¼ºå¤§çš„æ·±åº¦å­¦ä¹ èƒ½åŠ›ï¼Œæ”¯æŒ GPU åŠ é€Ÿè®¡ç®—ã€‚ä¸ keras/tensorflow ä¸åŒï¼Œtorch ä¸éœ€è¦ Python ä¾èµ–ï¼Œæ˜¯ R åŸç”Ÿçš„æ·±åº¦å­¦ä¹ è§£å†³æ–¹æ¡ˆã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "torch æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1069-torch-deep-learning.html#torch-ç®€ä»‹",
    "href": "1069-torch-deep-learning.html#torch-ç®€ä»‹",
    "title": "torch æ·±åº¦å­¦ä¹ å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "torch æ˜¯ R è¯­è¨€ä¸­ PyTorch çš„åŸç”Ÿå®ç°ï¼Œæä¾›äº†å¼ºå¤§çš„æ·±åº¦å­¦ä¹ èƒ½åŠ›ï¼Œæ”¯æŒ GPU åŠ é€Ÿè®¡ç®—ã€‚ä¸ keras/tensorflow ä¸åŒï¼Œtorch ä¸éœ€è¦ Python ä¾èµ–ï¼Œæ˜¯ R åŸç”Ÿçš„æ·±åº¦å­¦ä¹ è§£å†³æ–¹æ¡ˆã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "torch æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1069-torch-deep-learning.html#å®‰è£…ä¸åŠ è½½",
    "href": "1069-torch-deep-learning.html#å®‰è£…ä¸åŠ è½½",
    "title": "torch æ·±åº¦å­¦ä¹ å®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\nlibrary(torch)\n\n# é¦–æ¬¡ä½¿ç”¨éœ€è¦å®‰è£… torch åç«¯ï¼ˆçº¦ 200MBï¼‰\nif (!torch_is_installed()) {\n    install_torch()\n}\n\nlibrary(ggplot2)\nlibrary(dplyr)\n\nset.seed(42)\ntorch_manual_seed(42)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "torch æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1069-torch-deep-learning.html#ç¬¬ä¸€éƒ¨åˆ†å¼ é‡åŸºç¡€",
    "href": "1069-torch-deep-learning.html#ç¬¬ä¸€éƒ¨åˆ†å¼ é‡åŸºç¡€",
    "title": "torch æ·±åº¦å­¦ä¹ å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šå¼ é‡åŸºç¡€",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šå¼ é‡åŸºç¡€\n\nåˆ›å»ºå¼ é‡\n\n# ä»Rå‘é‡åˆ›å»º\nx &lt;- torch_tensor(c(1, 2, 3, 4, 5))\nprint(x)\n\n# åˆ›å»ºçŸ©é˜µ\nmat &lt;- torch_tensor(matrix(1:6, nrow = 2, ncol = 3))\nprint(mat)\n\n# ç‰¹æ®Šå¼ é‡\nzeros &lt;- torch_zeros(3, 4)  # å…¨0\nones &lt;- torch_ones(2, 3)     # å…¨1\nrand &lt;- torch_rand(3, 3)     # å‡åŒ€åˆ†å¸ƒ\nrandn &lt;- torch_randn(3, 3)   # æ­£æ€åˆ†å¸ƒ\n\ncat(\"éšæœºæ­£æ€å¼ é‡:\\n\")\nprint(randn)\n\n\n\nå¼ é‡æ“ä½œ\n\na &lt;- torch_tensor(matrix(1:4, 2, 2))\nb &lt;- torch_tensor(matrix(5:8, 2, 2))\n\n# åŸºæœ¬è¿ç®—\ncat(\"åŠ æ³•:\\n\")\nprint(a + b)\n\ncat(\"\\nçŸ©é˜µä¹˜æ³•:\\n\")\nprint(torch_mm(a, b))\n\ncat(\"\\né€å…ƒç´ ä¹˜æ³•:\\n\")\nprint(a * b)\n\n# å½¢çŠ¶æ“ä½œ\nc &lt;- torch_randn(2, 3, 4)\ncat(\"\\nåŸå§‹å½¢çŠ¶:\", c$shape, \"\\n\")\ncat(\"é‡å¡‘å:\", c$reshape(c(6, 4))$shape, \"\\n\")\ncat(\"è½¬ç½®å:\", c$permute(c(3, 1, 2))$shape, \"\\n\")\n\n\n\nå¼ é‡ä¸Rå¯¹è±¡äº’è½¬\n\n# torchè½¬R\ntensor &lt;- torch_randn(3, 3)\nr_matrix &lt;- as.matrix(tensor)\ncat(\"RçŸ©é˜µ:\\n\")\nprint(r_matrix)\n\n# Rè½¬torch\nr_vec &lt;- c(1.5, 2.5, 3.5)\nback_to_tensor &lt;- torch_tensor(r_vec)\nprint(back_to_tensor)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "torch æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1069-torch-deep-learning.html#ç¬¬äºŒéƒ¨åˆ†è‡ªåŠ¨å¾®åˆ†",
    "href": "1069-torch-deep-learning.html#ç¬¬äºŒéƒ¨åˆ†è‡ªåŠ¨å¾®åˆ†",
    "title": "torch æ·±åº¦å­¦ä¹ å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šè‡ªåŠ¨å¾®åˆ†",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šè‡ªåŠ¨å¾®åˆ†\n\næ¢¯åº¦è®¡ç®—\n\n# éœ€è¦æ¢¯åº¦çš„å¼ é‡\nx &lt;- torch_tensor(2.0, requires_grad = TRUE)\ny &lt;- torch_tensor(3.0, requires_grad = TRUE)\n\n# å‰å‘è®¡ç®—\nz &lt;- x^2 + 2*x*y + y^2\n\ncat(\"z =\", as.numeric(z), \"\\n\")\n\n# åå‘ä¼ æ’­\nz$backward()\n\ncat(\"dz/dx =\", as.numeric(x$grad), \"\\n\")  # åº”è¯¥æ˜¯ 2x + 2y = 10\ncat(\"dz/dy =\", as.numeric(y$grad), \"\\n\")  # åº”è¯¥æ˜¯ 2x + 2y = 10\n\n\n\næ¢¯åº¦ä¸‹é™ç¤ºä¾‹\n\n# ç®€å•çš„çº¿æ€§å›å½’\nset.seed(42)\nn &lt;- 100\ntrue_w &lt;- 2.5\ntrue_b &lt;- 1.0\n\nX &lt;- torch_randn(n, 1)\ny &lt;- true_w * X + true_b + torch_randn(n, 1) * 0.3\n\n# å¯å­¦ä¹ å‚æ•°\nw &lt;- torch_randn(1, requires_grad = TRUE)\nb &lt;- torch_zeros(1, requires_grad = TRUE)\n\nlearning_rate &lt;- 0.1\nlosses &lt;- numeric(100)\n\nfor (epoch in 1:100) {\n    # å‰å‘ä¼ æ’­\n    y_pred &lt;- X * w + b\n    loss &lt;- torch_mean((y_pred - y)^2)\n    losses[epoch] &lt;- as.numeric(loss)\n    \n    # åå‘ä¼ æ’­\n    loss$backward()\n    \n    # æ›´æ–°å‚æ•°ï¼ˆç¦ç”¨æ¢¯åº¦è¿½è¸ªï¼‰\n    with_no_grad({\n        w$sub_(learning_rate * w$grad)\n        b$sub_(learning_rate * b$grad)\n    })\n    \n    # æ¸…é›¶æ¢¯åº¦\n    w$grad$zero_()\n    b$grad$zero_()\n}\n\ncat(\"å­¦ä¹ åˆ°çš„å‚æ•°: w =\", round(as.numeric(w), 3), \n    \", b =\", round(as.numeric(b), 3), \"\\n\")\ncat(\"çœŸå®å‚æ•°: w =\", true_w, \", b =\", true_b, \"\\n\")\n\n\n# å¯è§†åŒ–æŸå¤±æ›²çº¿\nloss_df &lt;- data.frame(epoch = 1:100, loss = losses)\nggplot(loss_df, aes(x = epoch, y = loss)) +\n    geom_line(color = \"#4f46e5\", linewidth = 1) +\n    labs(title = \"æ¢¯åº¦ä¸‹é™æŸå¤±æ›²çº¿\", x = \"è¿­ä»£æ¬¡æ•°\", y = \"MSEæŸå¤±\") +\n    theme_bw()",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "torch æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1069-torch-deep-learning.html#ç¬¬ä¸‰éƒ¨åˆ†ç¥ç»ç½‘ç»œæ¨¡å—",
    "href": "1069-torch-deep-learning.html#ç¬¬ä¸‰éƒ¨åˆ†ç¥ç»ç½‘ç»œæ¨¡å—",
    "title": "torch æ·±åº¦å­¦ä¹ å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šç¥ç»ç½‘ç»œæ¨¡å—",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šç¥ç»ç½‘ç»œæ¨¡å—\n\nä½¿ç”¨ nn_module å®šä¹‰ç½‘ç»œ\n\n# å®šä¹‰ç®€å•çš„å…¨è¿æ¥ç½‘ç»œ\nSimpleNet &lt;- nn_module(\n    \"SimpleNet\",\n    initialize = function(input_size, hidden_size, output_size) {\n        self$fc1 &lt;- nn_linear(input_size, hidden_size)\n        self$fc2 &lt;- nn_linear(hidden_size, output_size)\n        self$relu &lt;- nn_relu()\n    },\n    forward = function(x) {\n        x &lt;- self$fc1(x)\n        x &lt;- self$relu(x)\n        x &lt;- self$fc2(x)\n        x\n    }\n)\n\n# å®ä¾‹åŒ–ç½‘ç»œ\nnet &lt;- SimpleNet(10, 32, 2)\nprint(net)\n\n# å‰å‘ä¼ æ’­\ninput &lt;- torch_randn(5, 10)  # 5ä¸ªæ ·æœ¬ï¼Œ10ä¸ªç‰¹å¾\noutput &lt;- net(input)\ncat(\"\\nè¾“å…¥å½¢çŠ¶:\", input$shape, \"\\n\")\ncat(\"è¾“å‡ºå½¢çŠ¶:\", output$shape, \"\\n\")\n\n\n\nå¸¸ç”¨å±‚\n\n# å…¨è¿æ¥å±‚\nnn_linear(in_features, out_features)\n\n# å·ç§¯å±‚\nnn_conv2d(in_channels, out_channels, kernel_size)\n\n# æ± åŒ–å±‚\nnn_max_pool2d(kernel_size)\nnn_avg_pool2d(kernel_size)\n\n# å½’ä¸€åŒ–å±‚\nnn_batch_norm1d(num_features)\nnn_layer_norm(normalized_shape)\n\n# Dropout\nnn_dropout(p = 0.5)\n\n# æ¿€æ´»å‡½æ•°\nnn_relu()\nnn_sigmoid()\nnn_softmax(dim)\nnn_tanh()",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "torch æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1069-torch-deep-learning.html#ç¬¬å››éƒ¨åˆ†å®Œæ•´è®­ç»ƒæµç¨‹",
    "href": "1069-torch-deep-learning.html#ç¬¬å››éƒ¨åˆ†å®Œæ•´è®­ç»ƒæµç¨‹",
    "title": "torch æ·±åº¦å­¦ä¹ å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šå®Œæ•´è®­ç»ƒæµç¨‹",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šå®Œæ•´è®­ç»ƒæµç¨‹\n\näºŒåˆ†ç±»ç¤ºä¾‹\n\n# ç”Ÿæˆæ•°æ®\nset.seed(123)\nn &lt;- 500\n\n# ä¸¤ä¸ªç±»åˆ«çš„æ•°æ®\nclass1 &lt;- cbind(rnorm(n/2, -1, 0.5), rnorm(n/2, -1, 0.5))\nclass2 &lt;- cbind(rnorm(n/2, 1, 0.5), rnorm(n/2, 1, 0.5))\nX_data &lt;- rbind(class1, class2)\ny_data &lt;- c(rep(0, n/2), rep(1, n/2))\n\n# è½¬æ¢ä¸ºå¼ é‡\nX &lt;- torch_tensor(X_data)\ny &lt;- torch_tensor(y_data, dtype = torch_long())\n\n# å®šä¹‰åˆ†ç±»ç½‘ç»œ\nClassifier &lt;- nn_module(\n    \"Classifier\",\n    initialize = function() {\n        self$net &lt;- nn_sequential(\n            nn_linear(2, 16),\n            nn_relu(),\n            nn_linear(16, 8),\n            nn_relu(),\n            nn_linear(8, 2)\n        )\n    },\n    forward = function(x) {\n        self$net(x)\n    }\n)\n\nmodel &lt;- Classifier()\n\n\n# æŸå¤±å‡½æ•°å’Œä¼˜åŒ–å™¨\ncriterion &lt;- nn_cross_entropy_loss()\noptimizer &lt;- optim_adam(model$parameters, lr = 0.01)\n\n# è®­ç»ƒ\nepochs &lt;- 100\ntrain_losses &lt;- numeric(epochs)\n\nfor (epoch in 1:epochs) {\n    # å‰å‘ä¼ æ’­\n    outputs &lt;- model(X)\n    loss &lt;- criterion(outputs, y)\n    train_losses[epoch] &lt;- as.numeric(loss)\n    \n    # åå‘ä¼ æ’­\n    optimizer$zero_grad()\n    loss$backward()\n    optimizer$step()\n    \n    if (epoch %% 20 == 0) {\n        # è®¡ç®—å‡†ç¡®ç‡\n        preds &lt;- outputs$argmax(dim = 2)\n        acc &lt;- mean(as.numeric(preds) == as.numeric(y))\n        cat(sprintf(\"Epoch %d, Loss: %.4f, Accuracy: %.2f%%\\n\", \n                    epoch, as.numeric(loss), acc * 100))\n    }\n}\n\n\n# å¯è§†åŒ–å†³ç­–è¾¹ç•Œ\ngrid_range &lt;- seq(-3, 3, length.out = 100)\ngrid &lt;- expand.grid(x1 = grid_range, x2 = grid_range)\ngrid_tensor &lt;- torch_tensor(as.matrix(grid))\n\nwith_no_grad({\n    grid_preds &lt;- model(grid_tensor)$argmax(dim = 2)\n})\n\ngrid$pred &lt;- as.numeric(grid_preds)\n\nggplot() +\n    geom_tile(data = grid, aes(x = x1, y = x2, fill = factor(pred)), alpha = 0.3) +\n    geom_point(data = data.frame(X_data, class = factor(y_data)), \n               aes(x = X1, y = X2, color = class), size = 1) +\n    scale_fill_manual(values = c(\"#dbeafe\", \"#dcfce7\")) +\n    scale_color_manual(values = c(\"#1e40af\", \"#166534\")) +\n    labs(title = \"ç¥ç»ç½‘ç»œåˆ†ç±»å†³ç­–è¾¹ç•Œ\", x = \"X1\", y = \"X2\") +\n    theme_bw() +\n    theme(legend.position = \"none\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "torch æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1069-torch-deep-learning.html#ç¬¬äº”éƒ¨åˆ†dataloader-å’Œæ‰¹é‡è®­ç»ƒ",
    "href": "1069-torch-deep-learning.html#ç¬¬äº”éƒ¨åˆ†dataloader-å’Œæ‰¹é‡è®­ç»ƒ",
    "title": "torch æ·±åº¦å­¦ä¹ å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šdataloader å’Œæ‰¹é‡è®­ç»ƒ",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šdataloader å’Œæ‰¹é‡è®­ç»ƒ\n\nè‡ªå®šä¹‰ Dataset\n\n# åˆ›å»ºæ•°æ®é›†ç±»\nMyDataset &lt;- dataset(\n    name = \"MyDataset\",\n    initialize = function(X, y) {\n        self$X &lt;- torch_tensor(X)\n        self$y &lt;- torch_tensor(y, dtype = torch_long())\n    },\n    .getitem = function(index) {\n        list(x = self$X[index, ], y = self$y[index])\n    },\n    .length = function() {\n        self$X$shape[1]\n    }\n)\n\n# åˆ›å»ºæ•°æ®é›†\nds &lt;- MyDataset(X_data, y_data)\ncat(\"æ•°æ®é›†å¤§å°:\", length(ds), \"\\n\")\n\n# è·å–å•ä¸ªæ ·æœ¬\nsample &lt;- ds[1]\ncat(\"æ ·æœ¬Xå½¢çŠ¶:\", sample$x$shape, \"\\n\")\n\n\n\nä½¿ç”¨ DataLoader\n\n# åˆ›å»ºDataLoader\ndl &lt;- dataloader(ds, batch_size = 32, shuffle = TRUE)\n\n# è¿­ä»£ä¸€ä¸ªbatch\nbatch &lt;- dl$.iter()$.next()\ncat(\"Batch Xå½¢çŠ¶:\", batch$x$shape, \"\\n\")\ncat(\"Batch yå½¢çŠ¶:\", batch$y$shape, \"\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "torch æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1069-torch-deep-learning.html#ç¬¬å…­éƒ¨åˆ†æ¨¡å‹ä¿å­˜ä¸åŠ è½½",
    "href": "1069-torch-deep-learning.html#ç¬¬å…­éƒ¨åˆ†æ¨¡å‹ä¿å­˜ä¸åŠ è½½",
    "title": "torch æ·±åº¦å­¦ä¹ å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹ä¿å­˜ä¸åŠ è½½",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹ä¿å­˜ä¸åŠ è½½\n\n# ä¿å­˜æ¨¡å‹\ntorch_save(model, \"model.pt\")\n\n# åŠ è½½æ¨¡å‹\nloaded_model &lt;- torch_load(\"model.pt\")\n\n# éªŒè¯\nwith_no_grad({\n    orig_pred &lt;- model(X[1:5, ])\n    load_pred &lt;- loaded_model(X[1:5, ])\n})\n\ncat(\"åŸå§‹æ¨¡å‹é¢„æµ‹:\\n\")\nprint(orig_pred)\ncat(\"\\nåŠ è½½æ¨¡å‹é¢„æµ‹:\\n\")\nprint(load_pred)\n\n\n# æ¸…ç†\nif (file.exists(\"model.pt\")) file.remove(\"model.pt\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "torch æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1069-torch-deep-learning.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "1069-torch-deep-learning.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "torch æ·±åº¦å­¦ä¹ å®Œå…¨æŒ‡å—",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# ===== å¼ é‡åˆ›å»º =====\ntorch_tensor(data)              # ä»Rå¯¹è±¡\ntorch_zeros(shape)              # å…¨é›¶\ntorch_ones(shape)               # å…¨ä¸€\ntorch_randn(shape)              # æ­£æ€åˆ†å¸ƒ\ntorch_rand(shape)               # å‡åŒ€åˆ†å¸ƒ\n\n# ===== å¼ é‡æ“ä½œ =====\nx$shape                         # å½¢çŠ¶\nx$reshape(new_shape)            # é‡å¡‘\nx$squeeze() / x$unsqueeze(dim)  # å‹ç¼©/æ‰©å±•ç»´åº¦\ntorch_cat(list(a, b), dim)      # æ‹¼æ¥\ntorch_mm(a, b)                  # çŸ©é˜µä¹˜æ³•\n\n# ===== ç¥ç»ç½‘ç»œ =====\nnn_linear(in, out)              # å…¨è¿æ¥\nnn_conv2d(in_ch, out_ch, k)     # å·ç§¯\nnn_relu() / nn_sigmoid()        # æ¿€æ´»\nnn_dropout(p)                   # Dropout\nnn_sequential(...)              # é¡ºåºå®¹å™¨\n\n# ===== è®­ç»ƒæµç¨‹ =====\noptimizer &lt;- optim_adam(model$parameters, lr = 0.01)\ncriterion &lt;- nn_cross_entropy_loss()\n\noptimizer$zero_grad()           # æ¸…é›¶æ¢¯åº¦\nloss$backward()                 # åå‘ä¼ æ’­\noptimizer$step()                # æ›´æ–°å‚æ•°\n\n# ===== ä¿å­˜åŠ è½½ =====\ntorch_save(model, \"model.pt\")\nmodel &lt;- torch_load(\"model.pt\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "torch æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1069-torch-deep-learning.html#å°ç»“",
    "href": "1069-torch-deep-learning.html#å°ç»“",
    "title": "torch æ·±åº¦å­¦ä¹ å®Œå…¨æŒ‡å—",
    "section": "å°ç»“",
    "text": "å°ç»“\ntorch çš„æ ¸å¿ƒå·¥ä½œæµç¨‹ï¼š\n\næ•°æ®å‡†å¤‡ï¼šåˆ›å»º Dataset å’Œ DataLoader\næ¨¡å‹å®šä¹‰ï¼šä½¿ç”¨ nn_module å®šä¹‰ç½‘ç»œç»“æ„\nè®­ç»ƒå¾ªç¯ï¼šå‰å‘ä¼ æ’­ â†’ è®¡ç®—æŸå¤± â†’ åå‘ä¼ æ’­ â†’ æ›´æ–°å‚æ•°\nè¯„ä¼°éƒ¨ç½²ï¼šä¿å­˜æ¨¡å‹ï¼Œæ¨ç†é¢„æµ‹\n\n\næŠ€å·§ï¼štorch çš„åŠ¨æ€å›¾æœºåˆ¶ä½¿å¾—è°ƒè¯•éå¸¸æ–¹ä¾¿ï¼Œå¯ä»¥åƒæ™®é€šRä»£ç ä¸€æ ·ä½¿ç”¨ print è°ƒè¯•ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "torch æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1069-torch-deep-learning.html#å‚è€ƒèµ„æº",
    "href": "1069-torch-deep-learning.html#å‚è€ƒèµ„æº",
    "title": "torch æ·±åº¦å­¦ä¹ å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\ntorch for R å®˜æ–¹æ–‡æ¡£\ntorch æ•™ç¨‹\nDeep Learning with R",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "torch æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1072-arrow-bigdata.html",
    "href": "1072-arrow-bigdata.html",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "",
    "text": "arrow æ˜¯ Apache Arrow é¡¹ç›®çš„ R æ¥å£ï¼Œæä¾›äº†é«˜æ•ˆçš„å¤§æ•°æ®å¤„ç†èƒ½åŠ›ã€‚å®ƒæ”¯æŒ Parquet ç­‰åˆ—å¼å­˜å‚¨æ ¼å¼ï¼Œå®ç°å†…å­˜å¤–è®¡ç®—ï¼Œå¹¶ä¸ dplyr æ— ç¼é›†æˆã€‚\n\n\n\n\n\nä¼ ç»Ÿæ–¹å¼\narrow æ–¹å¼\n\n\n\n\nCSV è¯»å†™æ…¢\nParquet é«˜é€Ÿè¯»å†™\n\n\nå…¨éƒ¨åŠ è½½å†…å­˜\nå†…å­˜å¤–æ‡’è®¡ç®—\n\n\nå•è¯­è¨€ä½¿ç”¨\nè·¨è¯­è¨€äº’æ“ä½œ\n\n\næ•°æ®ç±»å‹ä¸¢å¤±\nä¿ç•™å®Œæ•´ç±»å‹\n\n\n\n\n\n\n\nParquet æ ¼å¼ï¼šåˆ—å¼å­˜å‚¨ï¼Œé«˜å‹ç¼©æ¯”ï¼Œå¿«é€ŸæŸ¥è¯¢\né›¶æ‹·è´ï¼šè·¨è¯­è¨€å…±äº«æ•°æ®æ— éœ€å¤åˆ¶\næƒ°æ€§æ±‚å€¼ï¼šåªè®¡ç®—éœ€è¦çš„éƒ¨åˆ†\ndplyr åç«¯ï¼šç†Ÿæ‚‰çš„è¯­æ³•å¤„ç†å¤§æ•°æ®",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "arrow - å¤§æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "1072-arrow-bigdata.html#arrow-ç®€ä»‹",
    "href": "1072-arrow-bigdata.html#arrow-ç®€ä»‹",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "",
    "text": "arrow æ˜¯ Apache Arrow é¡¹ç›®çš„ R æ¥å£ï¼Œæä¾›äº†é«˜æ•ˆçš„å¤§æ•°æ®å¤„ç†èƒ½åŠ›ã€‚å®ƒæ”¯æŒ Parquet ç­‰åˆ—å¼å­˜å‚¨æ ¼å¼ï¼Œå®ç°å†…å­˜å¤–è®¡ç®—ï¼Œå¹¶ä¸ dplyr æ— ç¼é›†æˆã€‚\n\n\n\n\n\nä¼ ç»Ÿæ–¹å¼\narrow æ–¹å¼\n\n\n\n\nCSV è¯»å†™æ…¢\nParquet é«˜é€Ÿè¯»å†™\n\n\nå…¨éƒ¨åŠ è½½å†…å­˜\nå†…å­˜å¤–æ‡’è®¡ç®—\n\n\nå•è¯­è¨€ä½¿ç”¨\nè·¨è¯­è¨€äº’æ“ä½œ\n\n\næ•°æ®ç±»å‹ä¸¢å¤±\nä¿ç•™å®Œæ•´ç±»å‹\n\n\n\n\n\n\n\nParquet æ ¼å¼ï¼šåˆ—å¼å­˜å‚¨ï¼Œé«˜å‹ç¼©æ¯”ï¼Œå¿«é€ŸæŸ¥è¯¢\né›¶æ‹·è´ï¼šè·¨è¯­è¨€å…±äº«æ•°æ®æ— éœ€å¤åˆ¶\næƒ°æ€§æ±‚å€¼ï¼šåªè®¡ç®—éœ€è¦çš„éƒ¨åˆ†\ndplyr åç«¯ï¼šç†Ÿæ‚‰çš„è¯­æ³•å¤„ç†å¤§æ•°æ®",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "arrow - å¤§æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "1072-arrow-bigdata.html#å®‰è£…ä¸åŠ è½½",
    "href": "1072-arrow-bigdata.html#å®‰è£…ä¸åŠ è½½",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\nlibrary(arrow)\nlibrary(dplyr)\nlibrary(ggplot2)\n\nset.seed(42)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "arrow - å¤§æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "1072-arrow-bigdata.html#ç¬¬ä¸€éƒ¨åˆ†parquet-æ–‡ä»¶æ“ä½œ",
    "href": "1072-arrow-bigdata.html#ç¬¬ä¸€éƒ¨åˆ†parquet-æ–‡ä»¶æ“ä½œ",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šParquet æ–‡ä»¶æ“ä½œ",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šParquet æ–‡ä»¶æ“ä½œ\n\nå†™å…¥ Parquet\n\n# åˆ›å»ºç¤ºä¾‹æ•°æ®\nn &lt;- 100000\ndata &lt;- data.frame(\n    id = 1:n,\n    category = sample(LETTERS[1:5], n, replace = TRUE),\n    value = rnorm(n, 100, 15),\n    date = seq.Date(as.Date(\"2020-01-01\"), by = \"day\", length.out = n)\n)\n\n# å†™å…¥ Parquet\nwrite_parquet(data, \"example.parquet\")\n\n# æŸ¥çœ‹æ–‡ä»¶å¤§å°\nparquet_size &lt;- file.info(\"example.parquet\")$size\ncat(\"Parquet æ–‡ä»¶å¤§å°:\", round(parquet_size / 1024 / 1024, 2), \"MB\\n\")\n\nParquet æ–‡ä»¶å¤§å°: 2.17 MB\n\ncat(\"ï¼ˆç›¸æ¯”CSVé€šå¸¸å‹ç¼©5-10å€ï¼‰\\n\")\n\nï¼ˆç›¸æ¯”CSVé€šå¸¸å‹ç¼©5-10å€ï¼‰\n\n\n\n\nè¯»å– Parquet\n\n# å®Œæ•´è¯»å–\ndf &lt;- read_parquet(\"example.parquet\")\ncat(\"è¯»å–è¡Œæ•°:\", nrow(df), \"\\n\")\n\nè¯»å–è¡Œæ•°: 100000 \n\n# åªè¯»å–ç‰¹å®šåˆ—\ndf_subset &lt;- read_parquet(\"example.parquet\",\n    col_select = c(\"id\", \"category\", \"value\")\n)\ncat(\"å­é›†åˆ—æ•°:\", ncol(df_subset), \"\\n\")\n\nå­é›†åˆ—æ•°: 3 \n\n\n\n\nParquet å…ƒæ•°æ®\n\n# æŸ¥çœ‹ schema\nschema &lt;- open_dataset(\"example.parquet\")$schema\nprint(schema)\n\nSchema\nid: int32\ncategory: string\nvalue: double\ndate: date32[day]\n\nSee $metadata for additional Schema metadata",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "arrow - å¤§æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "1072-arrow-bigdata.html#ç¬¬äºŒéƒ¨åˆ†å†…å­˜å¤–è®¡ç®—",
    "href": "1072-arrow-bigdata.html#ç¬¬äºŒéƒ¨åˆ†å†…å­˜å¤–è®¡ç®—",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šå†…å­˜å¤–è®¡ç®—",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šå†…å­˜å¤–è®¡ç®—\n\nä½¿ç”¨ open_dataset\n\n# æ‰“å¼€æ•°æ®é›†ï¼ˆä¸åŠ è½½åˆ°å†…å­˜ï¼‰\nds &lt;- open_dataset(\"example.parquet\")\ncat(\"æ•°æ®é›†ç±»å‹:\", class(ds)[1], \"\\n\")\n\næ•°æ®é›†ç±»å‹: FileSystemDataset \n\n# ä½¿ç”¨ dplyr è¯­æ³•æŸ¥è¯¢\nresult &lt;- ds %&gt;%\n    filter(category == \"A\") %&gt;%\n    group_by(category) %&gt;%\n    summarise(\n        n = n(),\n        mean_value = mean(value),\n        .groups = \"drop\"\n    ) %&gt;%\n    collect() # åªåœ¨æœ€åæ‰åŠ è½½åˆ°å†…å­˜\n\nprint(result)\n\n# A tibble: 1 Ã— 3\n  category     n mean_value\n  &lt;chr&gt;    &lt;int&gt;      &lt;dbl&gt;\n1 A        20186       100.\n\n\n\n\næƒ°æ€§æ±‚å€¼\n\n# æ„å»ºæŸ¥è¯¢ï¼ˆä¸æ‰§è¡Œï¼‰\nquery &lt;- ds %&gt;%\n    filter(value &gt; 100) %&gt;%\n    mutate(value_squared = value^2) %&gt;%\n    arrange(desc(value))\n\n# æŸ¥çœ‹æ‰§è¡Œè®¡åˆ’\ncat(\"è¿™æ˜¯æƒ°æ€§æŸ¥è¯¢ï¼Œå°šæœªæ‰§è¡Œ\\n\")\n\nè¿™æ˜¯æƒ°æ€§æŸ¥è¯¢ï¼Œå°šæœªæ‰§è¡Œ\n\ncat(\"ç±»å‹:\", class(query)[1], \"\\n\")\n\nç±»å‹: arrow_dplyr_query \n\n# æ‰§è¡ŒæŸ¥è¯¢\nresult &lt;- query %&gt;%\n    head(5) %&gt;%\n    collect()\n\nprint(result)\n\n# A tibble: 5 Ã— 5\n     id category value date       value_squared\n  &lt;int&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;date&gt;             &lt;dbl&gt;\n1 47278 C         165. 2149-06-10        27259.\n2 85361 D         163. 2253-09-16        26632.\n3 80893 A         160. 2241-06-23        25662.\n4 94361 B         159. 2278-05-08        25334.\n5 64996 C         158. 2197-12-13        24930.",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "arrow - å¤§æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "1072-arrow-bigdata.html#ç¬¬ä¸‰éƒ¨åˆ†åˆ†åŒºæ•°æ®é›†",
    "href": "1072-arrow-bigdata.html#ç¬¬ä¸‰éƒ¨åˆ†åˆ†åŒºæ•°æ®é›†",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šåˆ†åŒºæ•°æ®é›†",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šåˆ†åŒºæ•°æ®é›†\n\nå†™å…¥åˆ†åŒºæ•°æ®\n\n# æŒ‰ category åˆ†åŒºå†™å…¥\nwrite_dataset(\n    data,\n    \"partitioned_data\",\n    partitioning = \"category\"\n)\n\n# æŸ¥çœ‹ç›®å½•ç»“æ„\nlist.files(\"partitioned_data\", recursive = TRUE)\n\n[1] \"category=A/part-0.parquet\" \"category=B/part-0.parquet\"\n[3] \"category=C/part-0.parquet\" \"category=D/part-0.parquet\"\n[5] \"category=E/part-0.parquet\"\n\n\n\n\nè¯»å–åˆ†åŒºæ•°æ®\n\n# è‡ªåŠ¨è¯†åˆ«åˆ†åŒº\nds_partitioned &lt;- open_dataset(\"partitioned_data\")\n\n# åˆ†åŒºè£å‰ªï¼šåªæ‰«æéœ€è¦çš„åˆ†åŒº\nresult &lt;- ds_partitioned %&gt;%\n    filter(category == \"A\") %&gt;% # åªè¯»å– A åˆ†åŒº\n    summarise(mean_value = mean(value)) %&gt;%\n    collect()\n\ncat(\"A ç±»åˆ«å¹³å‡å€¼:\", round(result$mean_value, 2), \"\\n\")\n\nA ç±»åˆ«å¹³å‡å€¼: 100.08",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "arrow - å¤§æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "1072-arrow-bigdata.html#ç¬¬å››éƒ¨åˆ†ä¸-dplyr-æ·±åº¦é›†æˆ",
    "href": "1072-arrow-bigdata.html#ç¬¬å››éƒ¨åˆ†ä¸-dplyr-æ·±åº¦é›†æˆ",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šä¸ dplyr æ·±åº¦é›†æˆ",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šä¸ dplyr æ·±åº¦é›†æˆ\n\nå®Œæ•´çš„ dplyr ç®¡é“\n\n# å¤æ‚æŸ¥è¯¢\nanalysis &lt;- ds %&gt;%\n    filter(value &gt; 80) %&gt;%\n    mutate(\n        year = year(date),\n        month = month(date),\n        value_group = case_when(\n            value &gt; 120 ~ \"é«˜\",\n            value &gt; 100 ~ \"ä¸­\",\n            TRUE ~ \"ä½\"\n        )\n    ) %&gt;%\n    group_by(category, value_group) %&gt;%\n    summarise(\n        count = n(),\n        mean_val = mean(value),\n        sd_val = sd(value),\n        .groups = \"drop\"\n    ) %&gt;%\n    arrange(category, desc(count)) %&gt;%\n    collect()\n\nprint(analysis)\n\n# A tibble: 15 Ã— 5\n   category value_group count mean_val sd_val\n   &lt;chr&gt;    &lt;chr&gt;       &lt;int&gt;    &lt;dbl&gt;  &lt;dbl&gt;\n 1 A        ä¸­           8360    109.    5.43\n 2 A        ä½           8211     91.4   5.46\n 3 A        é«˜           1843    127.    5.77\n 4 B        ä¸­           8186    109.    5.52\n 5 B        ä½           8157     91.4   5.51\n 6 B        é«˜           1838    127.    6.10\n 7 C        ä½           8124     91.3   5.51\n 8 C        ä¸­           7999    109.    5.51\n 9 C        é«˜           1867    127.    6.04\n10 D        ä½           8230     91.4   5.50\n11 D        ä¸­           8108    109.    5.45\n12 D        é«˜           1799    127.    5.75\n13 E        ä¸­           8208    109.    5.46\n14 E        ä½           8165     91.3   5.54\n15 E        é«˜           1781    127.    5.81\n\n\n\n\nå¯è§†åŒ–å¤§æ•°æ®æ±‡æ€»\n\n# ä» Arrow ç›´æ¥æ±‡æ€»åå¯è§†åŒ–\nmonthly_trend &lt;- ds %&gt;%\n    mutate(\n        year_month = floor_date(date, \"month\")\n    ) %&gt;%\n    group_by(year_month, category) %&gt;%\n    summarise(mean_value = mean(value), .groups = \"drop\") %&gt;%\n    collect()\n\nggplot(monthly_trend, aes(x = year_month, y = mean_value, color = category)) +\n    geom_line(linewidth = 0.8) +\n    labs(\n        title = \"æœˆåº¦è¶‹åŠ¿ï¼ˆä»Parquetæ•°æ®é›†è®¡ç®—ï¼‰\",\n        x = \"æœˆä»½\", y = \"å¹³å‡å€¼\", color = \"ç±»åˆ«\"\n    ) +\n    theme_bw()",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "arrow - å¤§æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "1072-arrow-bigdata.html#ç¬¬äº”éƒ¨åˆ†è·¨è¯­è¨€äº’æ“ä½œ",
    "href": "1072-arrow-bigdata.html#ç¬¬äº”éƒ¨åˆ†è·¨è¯­è¨€äº’æ“ä½œ",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šè·¨è¯­è¨€äº’æ“ä½œ",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šè·¨è¯­è¨€äº’æ“ä½œ\n\nArrow ä¸ Python å…±äº«æ•°æ®\n\n# R ä¸­å†™å…¥ Arrow æ ¼å¼\nwrite_feather(data, \"shared_data.arrow\")\n\n# Python ä¸­å¯ä»¥ç›´æ¥è¯»å–ï¼ˆé›¶æ‹·è´ï¼‰\n# import pyarrow.feather as feather\n# df = feather.read_feather(\"shared_data.arrow\")\n\n\n\nIPC æ ¼å¼\n\n# Arrow IPC æ ¼å¼ï¼ˆç”¨äºè¿›ç¨‹é—´é€šä¿¡ï¼‰\nwrite_ipc_file(data, \"data.arrow\")\n\n# è¯»å–\ndf_ipc &lt;- read_ipc_file(\"data.arrow\")\ncat(\"IPC è¯»å–è¡Œæ•°:\", nrow(df_ipc), \"\\n\")\n\nIPC è¯»å–è¡Œæ•°: 100000",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "arrow - å¤§æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "1072-arrow-bigdata.html#ç¬¬å…­éƒ¨åˆ†æ€§èƒ½ä¼˜åŒ–",
    "href": "1072-arrow-bigdata.html#ç¬¬å…­éƒ¨åˆ†æ€§èƒ½ä¼˜åŒ–",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šæ€§èƒ½ä¼˜åŒ–",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šæ€§èƒ½ä¼˜åŒ–\n\nåˆ—é€‰æ‹©\n\n# åªè¯»å–éœ€è¦çš„åˆ—\nsystem.time({\n    result &lt;- read_parquet(\"example.parquet\",\n        col_select = c(\"id\", \"value\")\n    )\n})\n\nç”¨æˆ· ç³»ç»Ÿ æµé€ \n   0    0    0 \n\n\n\n\nè¡Œè¿‡æ»¤ä¸‹æ¨\n\n# è¿‡æ»¤æ¡ä»¶ä¸‹æ¨åˆ°å­˜å‚¨å±‚\nsystem.time({\n    result &lt;- ds %&gt;%\n        filter(category == \"A\", value &gt; 100) %&gt;%\n        collect()\n})\n\nç”¨æˆ· ç³»ç»Ÿ æµé€ \n0.04 0.00 0.05 \n\ncat(\"è¿‡æ»¤åè¡Œæ•°:\", nrow(result), \"\\n\")\n\nè¿‡æ»¤åè¡Œæ•°: 10203 \n\n\n\n\nå¹¶è¡Œè¯»å–\n\n# Arrow è‡ªåŠ¨ä½¿ç”¨å¤šçº¿ç¨‹\narrow::set_cpu_count(4) # è®¾ç½®çº¿ç¨‹æ•°\ncat(\"å½“å‰ CPU çº¿ç¨‹æ•°:\", arrow::cpu_count(), \"\\n\")\n\nå½“å‰ CPU çº¿ç¨‹æ•°: 4",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "arrow - å¤§æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "1072-arrow-bigdata.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "href": "1072-arrow-bigdata.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹\n\nå¤§è§„æ¨¡æ•°æ®åˆ†æ\n\n# æ¨¡æ‹Ÿå¤§è§„æ¨¡åŒ»ç–—æ•°æ®\nn_large &lt;- 500000\n\nlarge_data &lt;- data.frame(\n    patient_id = 1:n_large,\n    age = sample(18:90, n_large, replace = TRUE),\n    gender = sample(c(\"M\", \"F\"), n_large, replace = TRUE),\n    diagnosis = sample(c(\"A\", \"B\", \"C\", \"D\"), n_large, replace = TRUE),\n    cost = rexp(n_large, 1 / 5000),\n    visit_date = sample(\n        seq.Date(as.Date(\"2020-01-01\"),\n            as.Date(\"2025-12-31\"),\n            by = \"day\"\n        ),\n        n_large,\n        replace = TRUE\n    )\n)\n\n# å†™å…¥åˆ†åŒº Parquet\nwrite_dataset(\n    large_data,\n    \"healthcare_data\",\n    partitioning = c(\"diagnosis\")\n)\n\ncat(\"æ•°æ®å·²å†™å…¥åˆ†åŒºç›®å½•\\n\")\n\næ•°æ®å·²å†™å…¥åˆ†åŒºç›®å½•\n\n\n\n# é«˜æ•ˆåˆ†æ\nhealthcare_ds &lt;- open_dataset(\"healthcare_data\")\n\n# å¤æ‚èšåˆæŸ¥è¯¢\nanalysis_result &lt;- healthcare_ds %&gt;%\n    mutate(age_group = case_when(\n        age &lt; 30 ~ \"18-29\",\n        age &lt; 50 ~ \"30-49\",\n        age &lt; 70 ~ \"50-69\",\n        TRUE ~ \"70+\"\n    )) %&gt;%\n    group_by(diagnosis, gender, age_group) %&gt;%\n    summarise(\n        patient_count = n(),\n        avg_cost = mean(cost),\n        total_cost = sum(cost),\n        .groups = \"drop\"\n    ) %&gt;%\n    arrange(diagnosis, desc(patient_count)) %&gt;%\n    collect()\n\nhead(analysis_result, 10)\n\n# A tibble: 10 Ã— 6\n   diagnosis gender age_group patient_count avg_cost total_cost\n   &lt;chr&gt;     &lt;chr&gt;  &lt;chr&gt;             &lt;int&gt;    &lt;dbl&gt;      &lt;dbl&gt;\n 1 A         F      70+               18100    4989.  90305728.\n 2 A         M      70+               17992    5035.  90582443.\n 3 A         F      50-69             17476    4938.  86295213.\n 4 A         M      50-69             17135    4973.  85209033.\n 5 A         F      30-49             16990    5019.  85277787.\n 6 A         M      30-49             16911    4981.  84226269.\n 7 A         F      18-29             10121    4949.  50085050.\n 8 A         M      18-29             10113    4984.  50404370.\n 9 B         F      70+               18243    5009.  91375774.\n10 B         M      70+               18080    5037.  91065097.",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "arrow - å¤§æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "1072-arrow-bigdata.html#æ¸…ç†",
    "href": "1072-arrow-bigdata.html#æ¸…ç†",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "æ¸…ç†",
    "text": "æ¸…ç†\n\n# åˆ é™¤ä¸´æ—¶æ–‡ä»¶\nunlink(\"example.parquet\")\nunlink(\"data.arrow\")\nunlink(\"partitioned_data\", recursive = TRUE)\nunlink(\"healthcare_data\", recursive = TRUE)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "arrow - å¤§æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "1072-arrow-bigdata.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "1072-arrow-bigdata.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# ===== è¯»å†™ Parquet =====\nread_parquet(\"file.parquet\")\nwrite_parquet(df, \"file.parquet\")\n\nread_parquet(\"file.parquet\", col_select = c(\"a\", \"b\"))\n\n# ===== æ•°æ®é›†æ“ä½œ =====\nds &lt;- open_dataset(\"path/\")\nds %&gt;%\n    filter() %&gt;%\n    select() %&gt;%\n    collect()\n\n# ===== åˆ†åŒºå†™å…¥ =====\nwrite_dataset(df, \"path/\", partitioning = c(\"col1\", \"col2\"))\n\n# ===== è·¨è¯­è¨€ =====\nwrite_feather(df, \"file.arrow\") # Arrow IPC\nread_feather(\"file.arrow\")\n\n# ===== æ€§èƒ½ =====\narrow::set_cpu_count(n)\narrow::cpu_count()",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "arrow - å¤§æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "1072-arrow-bigdata.html#å°ç»“",
    "href": "1072-arrow-bigdata.html#å°ç»“",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "å°ç»“",
    "text": "å°ç»“\narrow çš„æ ¸å¿ƒä½¿ç”¨åœºæ™¯ï¼š\n\nå¤§æ–‡ä»¶è¯»å†™ï¼šç”¨ Parquet æ›¿ä»£ CSV\nå†…å­˜ä¸è¶³ï¼šä½¿ç”¨ open_dataset æƒ°æ€§è®¡ç®—\nåˆ†åŒºæ•°æ®ï¼šè‡ªåŠ¨åˆ†åŒºè£å‰ªåŠ é€ŸæŸ¥è¯¢\nè·¨è¯­è¨€ï¼šR/Python/Spark æ•°æ®å…±äº«\n\n\næœ€ä½³å®è·µï¼šå¯¹äº &gt;100MB çš„æ•°æ®ï¼Œä¼˜å…ˆä½¿ç”¨ Parquet æ ¼å¼å­˜å‚¨ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "arrow - å¤§æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "1072-arrow-bigdata.html#å‚è€ƒèµ„æº",
    "href": "1072-arrow-bigdata.html#å‚è€ƒèµ„æº",
    "title": "arrow å¤§æ•°æ®é«˜æ•ˆå¤„ç†",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\narrow RåŒ…æ–‡æ¡£\nApache Arrow å®˜ç½‘\nArrow with dplyr",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "arrow - å¤§æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "1071-targets-workflow.html",
    "href": "1071-targets-workflow.html",
    "title": "targets å¯é‡å¤åˆ†æå·¥ä½œæµ",
    "section": "",
    "text": "targets æ˜¯ R è¯­è¨€ä¸­ç®¡ç†åˆ†æå·¥ä½œæµçš„ç°ä»£åŒ–å·¥å…·ï¼Œå®ƒèƒ½å¤Ÿè¿½è¸ªä»£ç å’Œæ•°æ®çš„å˜åŒ–ï¼Œåªé‡æ–°è¿è¡Œéœ€è¦æ›´æ–°çš„éƒ¨åˆ†ï¼Œå¤§å¤§æé«˜äº†åˆ†ææ•ˆç‡å’Œå¯é‡å¤æ€§ã€‚\n\n\n\n\n\nä¼ ç»Ÿæ–¹å¼\ntargets æ–¹å¼\n\n\n\n\næ‰‹åŠ¨è¿è¡Œè„šæœ¬\nè‡ªåŠ¨ä¾èµ–è¿½è¸ª\n\n\nå…¨éƒ¨é‡æ–°è¿è¡Œ\nå¢é‡æ„å»º\n\n\nç»“æœéš¾ä»¥ç¼“å­˜\nè‡ªåŠ¨ç¼“å­˜\n\n\néš¾ä»¥å¹¶è¡Œ\nåŸç”Ÿå¹¶è¡Œæ”¯æŒ\n\n\n\n\n\n\n\nTargetï¼ˆç›®æ ‡ï¼‰ï¼šåˆ†ææµç¨‹ä¸­çš„ä¸€ä¸ªæ­¥éª¤åŠå…¶è¾“å‡º\nPipelineï¼ˆç®¡é“ï¼‰ï¼štargetsçš„æœ‰åºé›†åˆ\nä¾èµ–å›¾ï¼štargetsä¹‹é—´çš„ä¾èµ–å…³ç³»\nç¼“å­˜ï¼šå·²è®¡ç®—ç»“æœçš„å­˜å‚¨",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "targets - å·¥ä½œæµç®¡ç†"
    ]
  },
  {
    "objectID": "1071-targets-workflow.html#targets-ç®€ä»‹",
    "href": "1071-targets-workflow.html#targets-ç®€ä»‹",
    "title": "targets å¯é‡å¤åˆ†æå·¥ä½œæµ",
    "section": "",
    "text": "targets æ˜¯ R è¯­è¨€ä¸­ç®¡ç†åˆ†æå·¥ä½œæµçš„ç°ä»£åŒ–å·¥å…·ï¼Œå®ƒèƒ½å¤Ÿè¿½è¸ªä»£ç å’Œæ•°æ®çš„å˜åŒ–ï¼Œåªé‡æ–°è¿è¡Œéœ€è¦æ›´æ–°çš„éƒ¨åˆ†ï¼Œå¤§å¤§æé«˜äº†åˆ†ææ•ˆç‡å’Œå¯é‡å¤æ€§ã€‚\n\n\n\n\n\nä¼ ç»Ÿæ–¹å¼\ntargets æ–¹å¼\n\n\n\n\næ‰‹åŠ¨è¿è¡Œè„šæœ¬\nè‡ªåŠ¨ä¾èµ–è¿½è¸ª\n\n\nå…¨éƒ¨é‡æ–°è¿è¡Œ\nå¢é‡æ„å»º\n\n\nç»“æœéš¾ä»¥ç¼“å­˜\nè‡ªåŠ¨ç¼“å­˜\n\n\néš¾ä»¥å¹¶è¡Œ\nåŸç”Ÿå¹¶è¡Œæ”¯æŒ\n\n\n\n\n\n\n\nTargetï¼ˆç›®æ ‡ï¼‰ï¼šåˆ†ææµç¨‹ä¸­çš„ä¸€ä¸ªæ­¥éª¤åŠå…¶è¾“å‡º\nPipelineï¼ˆç®¡é“ï¼‰ï¼štargetsçš„æœ‰åºé›†åˆ\nä¾èµ–å›¾ï¼štargetsä¹‹é—´çš„ä¾èµ–å…³ç³»\nç¼“å­˜ï¼šå·²è®¡ç®—ç»“æœçš„å­˜å‚¨",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "targets - å·¥ä½œæµç®¡ç†"
    ]
  },
  {
    "objectID": "1071-targets-workflow.html#å®‰è£…ä¸åŠ è½½",
    "href": "1071-targets-workflow.html#å®‰è£…ä¸åŠ è½½",
    "title": "targets å¯é‡å¤åˆ†æå·¥ä½œæµ",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\n# install.packages(\"targets\")\n# install.packages(\"tarchetypes\")  # æ‰©å±•åŒ…\nlibrary(targets)\nlibrary(tarchetypes)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "targets - å·¥ä½œæµç®¡ç†"
    ]
  },
  {
    "objectID": "1071-targets-workflow.html#ç¬¬ä¸€éƒ¨åˆ†å¿«é€Ÿå…¥é—¨",
    "href": "1071-targets-workflow.html#ç¬¬ä¸€éƒ¨åˆ†å¿«é€Ÿå…¥é—¨",
    "title": "targets å¯é‡å¤åˆ†æå·¥ä½œæµ",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šå¿«é€Ÿå…¥é—¨",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šå¿«é€Ÿå…¥é—¨\n\né¡¹ç›®ç»“æ„\nä¸€ä¸ªæ ‡å‡†çš„ targets é¡¹ç›®åŒ…å«ï¼š\nmy_project/\nâ”œâ”€â”€ _targets.R        # å®šä¹‰ç®¡é“\nâ”œâ”€â”€ R/                # è‡ªå®šä¹‰å‡½æ•°\nâ”‚   â””â”€â”€ functions.R\nâ”œâ”€â”€ data/             # åŸå§‹æ•°æ®\nâ””â”€â”€ _targets/         # ç¼“å­˜ç›®å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰\n\n\nç¼–å†™ _targets.R\n\n# _targets.R æ–‡ä»¶å†…å®¹\nlibrary(targets)\nlibrary(tarchetypes)\n\n# åŠ è½½è‡ªå®šä¹‰å‡½æ•°\nsource(\"R/functions.R\")\n\n# å®šä¹‰ç®¡é“\nlist(\n    # è¯»å–æ•°æ®\n    tar_target(raw_data, read.csv(\"data/input.csv\")),\n\n    # æ•°æ®æ¸…æ´—\n    tar_target(clean_data, clean_data_fn(raw_data)),\n\n    # æ‹Ÿåˆæ¨¡å‹\n    tar_target(model, fit_model(clean_data)),\n\n    # ç”ŸæˆæŠ¥å‘Š\n    tar_target(report, create_report(model, clean_data))\n)\n\n\n\nè‡ªå®šä¹‰å‡½æ•°\n\n# R/functions.R\nclean_data_fn &lt;- function(data) {\n    data %&gt;%\n        dplyr::filter(!is.na(outcome)) %&gt;%\n        dplyr::mutate(age_group = cut(age, breaks = c(0, 40, 60, 100)))\n}\n\nfit_model &lt;- function(data) {\n    glm(outcome ~ age + bmi, data = data, family = binomial)\n}\n\ncreate_report &lt;- function(model, data) {\n    list(\n        n = nrow(data),\n        coefs = coef(model),\n        aic = AIC(model)\n    )\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "targets - å·¥ä½œæµç®¡ç†"
    ]
  },
  {
    "objectID": "1071-targets-workflow.html#ç¬¬äºŒéƒ¨åˆ†è¿è¡Œç®¡é“",
    "href": "1071-targets-workflow.html#ç¬¬äºŒéƒ¨åˆ†è¿è¡Œç®¡é“",
    "title": "targets å¯é‡å¤åˆ†æå·¥ä½œæµ",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šè¿è¡Œç®¡é“",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šè¿è¡Œç®¡é“\n\nåŸºæœ¬å‘½ä»¤\n\n# æ£€æŸ¥ç®¡é“çŠ¶æ€\ntar_manifest()\n\n# å¯è§†åŒ–ä¾èµ–å›¾\ntar_visnetwork()\n\n# è¿è¡Œæ•´ä¸ªç®¡é“\ntar_make()\n\n# è¯»å–ç»“æœ\ntar_read(clean_data)\ntar_read(model)\n\n# åŠ è½½ç»“æœåˆ°ç¯å¢ƒ\ntar_load(report)\nprint(report)\n\n\n\nå¢é‡æ„å»º\n\n# ä¿®æ”¹ clean_data_fn åå†æ¬¡è¿è¡Œ\ntar_make()\n# åªæœ‰ clean_data åŠå…¶ä¸‹æ¸¸ç›®æ ‡ä¼šé‡æ–°è¿è¡Œ\n\n# æ£€æŸ¥å“ªäº›ç›®æ ‡è¿‡æœŸ\ntar_outdated()",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "targets - å·¥ä½œæµç®¡ç†"
    ]
  },
  {
    "objectID": "1071-targets-workflow.html#ç¬¬ä¸‰éƒ¨åˆ†è¿›é˜¶ç”¨æ³•",
    "href": "1071-targets-workflow.html#ç¬¬ä¸‰éƒ¨åˆ†è¿›é˜¶ç”¨æ³•",
    "title": "targets å¯é‡å¤åˆ†æå·¥ä½œæµ",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šè¿›é˜¶ç”¨æ³•",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šè¿›é˜¶ç”¨æ³•\n\nåˆ†æ”¯ï¼ˆBranchingï¼‰\n\n# åŠ¨æ€åˆ†æ”¯ï¼šå¯¹å¤šä¸ªæ•°æ®é›†/å‚æ•°å¹¶è¡Œå¤„ç†\nlist(\n    # å®šä¹‰å‚æ•°\n    tar_target(alphas, c(0.1, 0.5, 1.0)),\n\n    # åŠ¨æ€åˆ†æ”¯ï¼šæ¯ä¸ªalphaå€¼ç‹¬ç«‹è¿è¡Œ\n    tar_target(\n        models,\n        fit_lasso(data, alpha = alphas),\n        pattern = map(alphas) # æ˜ å°„åˆ°æ¯ä¸ªalpha\n    ),\n\n    # æ±‡æ€»æ‰€æœ‰æ¨¡å‹ç»“æœ\n    tar_target(comparison, compare_models(models))\n)\n\n\n\né™æ€åˆ†æ”¯\n\n# ä½¿ç”¨ tar_map åˆ›å»ºå¤šä¸ªç±»ä¼¼ç›®æ ‡\ntar_map(\n    values = list(\n        dataset = c(\"train\", \"test\", \"validation\")\n    ),\n    tar_target(data, load_dataset(dataset)),\n    tar_target(metrics, evaluate_model(model, data))\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "targets - å·¥ä½œæµç®¡ç†"
    ]
  },
  {
    "objectID": "1071-targets-workflow.html#ç¬¬å››éƒ¨åˆ†ä¸-r-markdownquarto-é›†æˆ",
    "href": "1071-targets-workflow.html#ç¬¬å››éƒ¨åˆ†ä¸-r-markdownquarto-é›†æˆ",
    "title": "targets å¯é‡å¤åˆ†æå·¥ä½œæµ",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šä¸ R Markdown/Quarto é›†æˆ",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šä¸ R Markdown/Quarto é›†æˆ\n\næ¸²æŸ“æŠ¥å‘Š\n\nlist(\n    tar_target(data, prepare_data()),\n    tar_target(model, fit_model(data)),\n\n    # æ¸²æŸ“ R Markdown æŠ¥å‘Š\n    tar_render(report, \"report.Rmd\"),\n\n    # æ¸²æŸ“ Quarto æ–‡æ¡£\n    tar_quarto(quarto_doc, \"analysis.qmd\")\n)\n\n\n\nåœ¨æŠ¥å‘Šä¸­ä½¿ç”¨ targets\n\n# åœ¨ R Markdown ä¸­\n# ```{r}\n# library(targets)\n# tar_load(model)\n# tar_read(data)\n# ```",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "targets - å·¥ä½œæµç®¡ç†"
    ]
  },
  {
    "objectID": "1071-targets-workflow.html#ç¬¬äº”éƒ¨åˆ†å¹¶è¡Œè®¡ç®—",
    "href": "1071-targets-workflow.html#ç¬¬äº”éƒ¨åˆ†å¹¶è¡Œè®¡ç®—",
    "title": "targets å¯é‡å¤åˆ†æå·¥ä½œæµ",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šå¹¶è¡Œè®¡ç®—",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šå¹¶è¡Œè®¡ç®—\n\né…ç½®å¹¶è¡Œ\n\n# åœ¨ _targets.R ä¸­\nlibrary(targets)\nlibrary(future)\nlibrary(future.callr)\n\n# ä½¿ç”¨ future å¹¶è¡Œåç«¯\ntar_option_set(\n    controller = crew::crew_controller_local(workers = 4)\n)\n\n# æˆ–ä½¿ç”¨ future\nplan(multisession, workers = 4)\n\n\n\nå¹¶è¡Œè¿è¡Œ\n\n# å¹¶è¡Œæ‰§è¡Œç®¡é“\ntar_make_future(workers = 4)\n\n# æˆ–ä½¿ç”¨ crew\ntar_make() # è‡ªåŠ¨ä½¿ç”¨é…ç½®çš„å¹¶è¡Œ",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "targets - å·¥ä½œæµç®¡ç†"
    ]
  },
  {
    "objectID": "1071-targets-workflow.html#ç¬¬å…­éƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "href": "1071-targets-workflow.html#ç¬¬å…­éƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "title": "targets å¯é‡å¤åˆ†æå·¥ä½œæµ",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹\n\nå®Œæ•´åˆ†ææµç¨‹\n\n# _targets.R\nlibrary(targets)\nlibrary(tarchetypes)\n\nsource(\"R/functions.R\")\n\ntar_option_set(\n    packages = c(\"dplyr\", \"ggplot2\", \"caret\")\n)\n\nlist(\n    # æ•°æ®\n    tar_target(file, \"data/diabetes.csv\", format = \"file\"),\n    tar_target(raw_data, read.csv(file)),\n\n    # é¢„å¤„ç†\n    tar_target(clean_data, {\n        raw_data %&gt;%\n            filter(!is.na(Outcome)) %&gt;%\n            mutate(across(where(is.numeric), scale))\n    }),\n\n    # æ•°æ®åˆ†å‰²\n    tar_target(train_idx, sample(1:nrow(clean_data), 0.7 * nrow(clean_data))),\n    tar_target(train_data, clean_data[train_idx, ]),\n    tar_target(test_data, clean_data[-train_idx, ]),\n\n    # å¤šæ¨¡å‹è®­ç»ƒ\n    tar_target(methods, c(\"glm\", \"rf\", \"xgb\")),\n    tar_target(\n        models,\n        train_model(train_data, method = methods),\n        pattern = map(methods)\n    ),\n\n    # è¯„ä¼°\n    tar_target(\n        evaluations,\n        evaluate_model(models, test_data),\n        pattern = map(models)\n    ),\n\n    # æ±‡æ€»\n    tar_target(summary_table, summarize_results(evaluations)),\n\n    # æŠ¥å‘Š\n    tar_render(report, \"analysis_report.Rmd\")\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "targets - å·¥ä½œæµç®¡ç†"
    ]
  },
  {
    "objectID": "1071-targets-workflow.html#ç¬¬ä¸ƒéƒ¨åˆ†è°ƒè¯•ä¸æœ€ä½³å®è·µ",
    "href": "1071-targets-workflow.html#ç¬¬ä¸ƒéƒ¨åˆ†è°ƒè¯•ä¸æœ€ä½³å®è·µ",
    "title": "targets å¯é‡å¤åˆ†æå·¥ä½œæµ",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šè°ƒè¯•ä¸æœ€ä½³å®è·µ",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šè°ƒè¯•ä¸æœ€ä½³å®è·µ\n\nè°ƒè¯•\n\n# æ£€æŸ¥å•ä¸ªç›®æ ‡\ntar_load(raw_data)\ntar_load_everything()\n\n# æŸ¥çœ‹æ„å»ºå…ƒæ•°æ®\ntar_meta()\n\n# åˆ é™¤ç¼“å­˜é‡æ–°å¼€å§‹\ntar_destroy()\n\n# æ¸…ç†ç‰¹å®šç›®æ ‡\ntar_delete(clean_data)\n\n\n\næœ€ä½³å®è·µ\n\n# 1. ä½¿ç”¨å‡½æ•°è€Œéè„šæœ¬\n# å¥½\ntar_target(result, my_function(data))\n\n# é¿å…\ntar_target(result, {\n    # å¾ˆé•¿çš„ä»£ç å—...\n})\n\n# 2. å°ç²’åº¦ç›®æ ‡\n# ä¾¿äºå¢é‡æ›´æ–°å’Œå¹¶è¡Œ\n\n# 3. ä½¿ç”¨ format ä¼˜åŒ–å­˜å‚¨\ntar_target(large_data, big_computation(), format = \"qs\")\n\n# 4. æ–‡ä»¶è¿½è¸ª\ntar_target(input_file, \"data.csv\", format = \"file\")",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "targets - å·¥ä½œæµç®¡ç†"
    ]
  },
  {
    "objectID": "1071-targets-workflow.html#å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥",
    "href": "1071-targets-workflow.html#å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥",
    "title": "targets å¯é‡å¤åˆ†æå·¥ä½œæµ",
    "section": "å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥",
    "text": "å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥\n\n# ===== ç®¡é“æ“ä½œ =====\ntar_make() # è¿è¡Œç®¡é“\ntar_make_future() # å¹¶è¡Œè¿è¡Œ\ntar_visnetwork() # å¯è§†åŒ–ä¾èµ–å›¾\ntar_manifest() # æŸ¥çœ‹ç›®æ ‡æ¸…å•\n\n# ===== è¯»å–ç»“æœ =====\ntar_read(target_name) # è¯»å–ç›®æ ‡\ntar_load(target_name) # åŠ è½½åˆ°ç¯å¢ƒ\ntar_load_everything() # åŠ è½½æ‰€æœ‰\n\n# ===== çŠ¶æ€æ£€æŸ¥ =====\ntar_outdated() # è¿‡æœŸçš„ç›®æ ‡\ntar_progress() # æ„å»ºè¿›åº¦\ntar_meta() # å…ƒæ•°æ®\n\n# ===== æ¸…ç† =====\ntar_destroy() # åˆ é™¤æ‰€æœ‰ç¼“å­˜\ntar_delete(name) # åˆ é™¤ç‰¹å®šç›®æ ‡\ntar_invalidate(name) # æ ‡è®°ä¸ºè¿‡æœŸ\n\n# ===== ç›®æ ‡ç±»å‹ =====\ntar_target() # åŸºæœ¬ç›®æ ‡\ntar_render() # R Markdown\ntar_quarto() # Quarto\ntar_file() # æ–‡ä»¶ç›®æ ‡",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "targets - å·¥ä½œæµç®¡ç†"
    ]
  },
  {
    "objectID": "1071-targets-workflow.html#å°ç»“",
    "href": "1071-targets-workflow.html#å°ç»“",
    "title": "targets å¯é‡å¤åˆ†æå·¥ä½œæµ",
    "section": "å°ç»“",
    "text": "å°ç»“\ntargets çš„æ ¸å¿ƒä¼˜åŠ¿ï¼š\n\nå¯é‡å¤æ€§ï¼šä»£ç +æ•°æ®+ä¾èµ–å…¨è¿½è¸ª\næ•ˆç‡ï¼šå¢é‡æ„å»ºï¼Œåªæ›´æ–°å˜åŒ–éƒ¨åˆ†\nå¹¶è¡Œï¼šè‡ªåŠ¨å¹¶è¡Œæ‰§è¡Œç‹¬ç«‹ç›®æ ‡\nå¯è§†åŒ–ï¼šæ¸…æ™°çš„ä¾èµ–å…³ç³»å›¾\n\n\nå»ºè®®ï¼šå¯¹äºä»»ä½•è¶…è¿‡ä¸€ä¸ªè„šæœ¬çš„åˆ†æé¡¹ç›®ï¼Œéƒ½å€¼å¾—ä½¿ç”¨ targets ç®¡ç†å·¥ä½œæµã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "targets - å·¥ä½œæµç®¡ç†"
    ]
  },
  {
    "objectID": "1071-targets-workflow.html#å‚è€ƒèµ„æº",
    "href": "1071-targets-workflow.html#å‚è€ƒèµ„æº",
    "title": "targets å¯é‡å¤åˆ†æå·¥ä½œæµ",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\ntargets å®˜æ–¹æ–‡æ¡£\ntargets ç”¨æˆ·æ‰‹å†Œ\ntarchetypes æ‰©å±•",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "targets - å·¥ä½œæµç®¡ç†"
    ]
  },
  {
    "objectID": "1073-prophet-forecasting.html",
    "href": "1073-prophet-forecasting.html",
    "title": "prophet æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "",
    "text": "prophet æ˜¯ Metaï¼ˆFacebookï¼‰å¼€æºçš„æ—¶é—´åºåˆ—é¢„æµ‹å·¥å…·ï¼Œä¸“ä¸ºå•†ä¸šé¢„æµ‹è®¾è®¡ã€‚å®ƒèƒ½å¤Ÿè‡ªåŠ¨å¤„ç†è¶‹åŠ¿ã€å­£èŠ‚æ€§å’ŒèŠ‚å‡æ—¥æ•ˆåº”ï¼Œéå¸¸é€‚åˆéä¸“ä¸šç”¨æˆ·å¿«é€Ÿè·å¾—é«˜è´¨é‡é¢„æµ‹ã€‚\n\n\n\n\n\nä¼ ç»Ÿæ–¹æ³•\nprophet ä¼˜åŠ¿\n\n\n\n\néœ€è¦ä¸“ä¸šçŸ¥è¯†\nè‡ªåŠ¨åŒ–ç¨‹åº¦é«˜\n\n\næ‰‹åŠ¨å¤„ç†å­£èŠ‚æ€§\nè‡ªåŠ¨æ£€æµ‹å¤šé‡å­£èŠ‚æ€§\n\n\nç¼ºå¤±å€¼æ•æ„Ÿ\nç¨³å¥å¤„ç†ç¼ºå¤±\n\n\néš¾ä»¥è§£é‡Š\nå¯åˆ†è§£ã€å¯è§£é‡Š\n\n\n\n\n\n\nprophet å°†æ—¶é—´åºåˆ—åˆ†è§£ä¸ºï¼š \\[y(t) = g(t) + s(t) + h(t) + \\epsilon_t\\]\n\n\\(g(t)\\)ï¼šè¶‹åŠ¿ï¼ˆå¢é•¿æ›²çº¿ï¼‰\n\\(s(t)\\)ï¼šå­£èŠ‚æ€§ï¼ˆå‘¨/å¹´å‘¨æœŸï¼‰\n\\(h(t)\\)ï¼šèŠ‚å‡æ—¥æ•ˆåº”\n\\(\\epsilon_t\\)ï¼šæ®‹å·®",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "prophet æ—¶é—´åºåˆ—é¢„æµ‹"
    ]
  },
  {
    "objectID": "1073-prophet-forecasting.html#prophet-ç®€ä»‹",
    "href": "1073-prophet-forecasting.html#prophet-ç®€ä»‹",
    "title": "prophet æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "",
    "text": "prophet æ˜¯ Metaï¼ˆFacebookï¼‰å¼€æºçš„æ—¶é—´åºåˆ—é¢„æµ‹å·¥å…·ï¼Œä¸“ä¸ºå•†ä¸šé¢„æµ‹è®¾è®¡ã€‚å®ƒèƒ½å¤Ÿè‡ªåŠ¨å¤„ç†è¶‹åŠ¿ã€å­£èŠ‚æ€§å’ŒèŠ‚å‡æ—¥æ•ˆåº”ï¼Œéå¸¸é€‚åˆéä¸“ä¸šç”¨æˆ·å¿«é€Ÿè·å¾—é«˜è´¨é‡é¢„æµ‹ã€‚\n\n\n\n\n\nä¼ ç»Ÿæ–¹æ³•\nprophet ä¼˜åŠ¿\n\n\n\n\néœ€è¦ä¸“ä¸šçŸ¥è¯†\nè‡ªåŠ¨åŒ–ç¨‹åº¦é«˜\n\n\næ‰‹åŠ¨å¤„ç†å­£èŠ‚æ€§\nè‡ªåŠ¨æ£€æµ‹å¤šé‡å­£èŠ‚æ€§\n\n\nç¼ºå¤±å€¼æ•æ„Ÿ\nç¨³å¥å¤„ç†ç¼ºå¤±\n\n\néš¾ä»¥è§£é‡Š\nå¯åˆ†è§£ã€å¯è§£é‡Š\n\n\n\n\n\n\nprophet å°†æ—¶é—´åºåˆ—åˆ†è§£ä¸ºï¼š \\[y(t) = g(t) + s(t) + h(t) + \\epsilon_t\\]\n\n\\(g(t)\\)ï¼šè¶‹åŠ¿ï¼ˆå¢é•¿æ›²çº¿ï¼‰\n\\(s(t)\\)ï¼šå­£èŠ‚æ€§ï¼ˆå‘¨/å¹´å‘¨æœŸï¼‰\n\\(h(t)\\)ï¼šèŠ‚å‡æ—¥æ•ˆåº”\n\\(\\epsilon_t\\)ï¼šæ®‹å·®",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "prophet æ—¶é—´åºåˆ—é¢„æµ‹"
    ]
  },
  {
    "objectID": "1073-prophet-forecasting.html#å®‰è£…ä¸åŠ è½½",
    "href": "1073-prophet-forecasting.html#å®‰è£…ä¸åŠ è½½",
    "title": "prophet æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\nlibrary(prophet)\nlibrary(dplyr)\nlibrary(ggplot2)\n\nset.seed(42)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "prophet æ—¶é—´åºåˆ—é¢„æµ‹"
    ]
  },
  {
    "objectID": "1073-prophet-forecasting.html#ç¬¬ä¸€éƒ¨åˆ†å¿«é€Ÿå…¥é—¨",
    "href": "1073-prophet-forecasting.html#ç¬¬ä¸€éƒ¨åˆ†å¿«é€Ÿå…¥é—¨",
    "title": "prophet æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šå¿«é€Ÿå…¥é—¨",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šå¿«é€Ÿå…¥é—¨\n\næ•°æ®æ ¼å¼\n\n# prophet è¦æ±‚ä¸¤åˆ—ï¼šds (æ—¥æœŸ) å’Œ y (æ•°å€¼)\n# ä½¿ç”¨å†…ç½®ç¤ºä¾‹æ•°æ®\ndf &lt;- read.csv(\n    \"https://raw.githubusercontent.com/facebook/prophet/main/examples/example_wp_log_peyton_manning.csv\"\n)\n\nhead(df)\n\n          ds        y\n1 2007-12-10 9.590761\n2 2007-12-11 8.519590\n3 2007-12-12 8.183677\n4 2007-12-13 8.072467\n5 2007-12-14 7.893572\n6 2007-12-15 7.783641\n\ncat(\"\\næ•°æ®èŒƒå›´:\", min(df$ds), \"è‡³\", max(df$ds), \"\\n\")\n\n\næ•°æ®èŒƒå›´: 2007-12-10 è‡³ 2016-01-20 \n\ncat(\"æ•°æ®ç‚¹æ•°:\", nrow(df), \"\\n\")\n\næ•°æ®ç‚¹æ•°: 2905 \n\n\n\n\næ‹Ÿåˆæ¨¡å‹\n\n# åŸºæœ¬æ‹Ÿåˆ\nm &lt;- prophet(df)\n\n# æŸ¥çœ‹æ¨¡å‹ç»„ä»¶\ncat(\"æ¨¡å‹åŒ…å«çš„ç»„ä»¶:\\n\")\n\næ¨¡å‹åŒ…å«çš„ç»„ä»¶:\n\ncat(\"- è¶‹åŠ¿ç±»å‹:\", m$growth, \"\\n\")\n\n- è¶‹åŠ¿ç±»å‹: linear \n\ncat(\"- å­£èŠ‚æ€§:\", names(m$seasonalities), \"\\n\")\n\n- å­£èŠ‚æ€§: yearly weekly \n\n\n\n\nç”Ÿæˆé¢„æµ‹\n\n# åˆ›å»ºæœªæ¥æ—¥æœŸæ¡†æ¶\nfuture &lt;- make_future_dataframe(m, periods = 365)\ntail(future)\n\n             ds\n3265 2017-01-14\n3266 2017-01-15\n3267 2017-01-16\n3268 2017-01-17\n3269 2017-01-18\n3270 2017-01-19\n\n# é¢„æµ‹\nforecast &lt;- predict(m, future)\ncat(\"\\né¢„æµ‹åˆ—:\", head(names(forecast)), \"...\\n\")\n\n\né¢„æµ‹åˆ—: ds trend additive_terms additive_terms_lower additive_terms_upper weekly ...\n\n\n\n\nå¯è§†åŒ–\n\n# é¢„æµ‹å›¾\nplot(m, forecast) +\n    labs(\n        title = \"Prophet æ—¶é—´åºåˆ—é¢„æµ‹\",\n        x = \"æ—¥æœŸ\", y = \"æ•°å€¼\"\n    )\n\n\n\n\n\n\n\n\n\n# ç»„ä»¶åˆ†è§£å›¾\nprophet_plot_components(m, forecast)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "prophet æ—¶é—´åºåˆ—é¢„æµ‹"
    ]
  },
  {
    "objectID": "1073-prophet-forecasting.html#ç¬¬äºŒéƒ¨åˆ†è¶‹åŠ¿å»ºæ¨¡",
    "href": "1073-prophet-forecasting.html#ç¬¬äºŒéƒ¨åˆ†è¶‹åŠ¿å»ºæ¨¡",
    "title": "prophet æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šè¶‹åŠ¿å»ºæ¨¡",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šè¶‹åŠ¿å»ºæ¨¡\n\nçº¿æ€§è¶‹åŠ¿\n\n# é»˜è®¤çº¿æ€§è¶‹åŠ¿\nm_linear &lt;- prophet(df, growth = \"linear\")\n\nforecast_linear &lt;- predict(m_linear, future)\nplot(m_linear, forecast_linear) +\n    ggtitle(\"çº¿æ€§è¶‹åŠ¿\")\n\n\n\n\n\n\n\n\n\n\nLogistic å¢é•¿\n\n# è®¾ç½®å®¹é‡ä¸Šé™\ndf_logistic &lt;- df\ndf_logistic$cap &lt;- 10 # ä¸Šé™\ndf_logistic$floor &lt;- 0 # ä¸‹é™ï¼ˆå¯é€‰ï¼‰\n\n# ä½¿ç”¨ logistic å¢é•¿\nm_logistic &lt;- prophet(df_logistic, growth = \"logistic\")\n\nfuture_logistic &lt;- make_future_dataframe(m_logistic, periods = 365)\nfuture_logistic$cap &lt;- 10\nfuture_logistic$floor &lt;- 0\n\nforecast_logistic &lt;- predict(m_logistic, future_logistic)\nplot(m_logistic, forecast_logistic) +\n    ggtitle(\"Logistic å¢é•¿ï¼ˆæœ‰ä¸Šé™ï¼‰\")\n\n\n\n\n\n\n\n\n\n\nè¶‹åŠ¿å˜ç‚¹\n\n# æŸ¥çœ‹è‡ªåŠ¨æ£€æµ‹çš„å˜ç‚¹\ncat(\"æ£€æµ‹åˆ°çš„è¶‹åŠ¿å˜ç‚¹:\\n\")\n\næ£€æµ‹åˆ°çš„è¶‹åŠ¿å˜ç‚¹:\n\nprint(head(m$changepoints))\n\n[1] \"2008-03-17 GMT\" \"2008-06-20 GMT\" \"2008-10-11 GMT\" \"2009-01-14 GMT\"\n[5] \"2009-04-17 GMT\" \"2009-07-19 GMT\"\n\n# å¯è§†åŒ–å˜ç‚¹\nplot(m, forecast) +\n    geom_vline(\n        xintercept = as.numeric(m$changepoints),\n        linetype = \"dashed\", color = \"red\", alpha = 0.5\n    ) +\n    ggtitle(\"è¶‹åŠ¿å˜ç‚¹æ ‡æ³¨\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "prophet æ—¶é—´åºåˆ—é¢„æµ‹"
    ]
  },
  {
    "objectID": "1073-prophet-forecasting.html#ç¬¬ä¸‰éƒ¨åˆ†å­£èŠ‚æ€§",
    "href": "1073-prophet-forecasting.html#ç¬¬ä¸‰éƒ¨åˆ†å­£èŠ‚æ€§",
    "title": "prophet æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šå­£èŠ‚æ€§",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šå­£èŠ‚æ€§\n\nè‡ªåŠ¨å­£èŠ‚æ€§\n\n# æŸ¥çœ‹é»˜è®¤å­£èŠ‚æ€§\ncat(\"å¹´åº¦å­£èŠ‚æ€§:\", m$yearly.seasonality, \"\\n\")\n\nå¹´åº¦å­£èŠ‚æ€§: auto \n\ncat(\"å‘¨å­£èŠ‚æ€§:\", m$weekly.seasonality, \"\\n\")\n\nå‘¨å­£èŠ‚æ€§: auto \n\ncat(\"æ—¥å­£èŠ‚æ€§:\", m$daily.seasonality, \"\\n\")\n\næ—¥å­£èŠ‚æ€§: auto \n\n\n\n\nè‡ªå®šä¹‰å­£èŠ‚æ€§\n\n# ç¦ç”¨é»˜è®¤å­£èŠ‚æ€§ï¼Œæ·»åŠ è‡ªå®šä¹‰\nm_custom &lt;- prophet(weekly.seasonality = FALSE, yearly.seasonality = FALSE)\n\n# æ·»åŠ è‡ªå®šä¹‰å­£èŠ‚æ€§\nm_custom &lt;- add_seasonality(m_custom,\n    name = \"monthly\",\n    period = 30.5, fourier.order = 5\n)\nm_custom &lt;- add_seasonality(m_custom,\n    name = \"yearly\",\n    period = 365.25, fourier.order = 10\n)\n\nm_custom &lt;- fit.prophet(m_custom, df)\n\nforecast_custom &lt;- predict(m_custom, future)\nprophet_plot_components(m_custom, forecast_custom)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "prophet æ—¶é—´åºåˆ—é¢„æµ‹"
    ]
  },
  {
    "objectID": "1073-prophet-forecasting.html#ç¬¬å››éƒ¨åˆ†èŠ‚å‡æ—¥æ•ˆåº”",
    "href": "1073-prophet-forecasting.html#ç¬¬å››éƒ¨åˆ†èŠ‚å‡æ—¥æ•ˆåº”",
    "title": "prophet æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šèŠ‚å‡æ—¥æ•ˆåº”",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šèŠ‚å‡æ—¥æ•ˆåº”\n\næ·»åŠ èŠ‚å‡æ—¥\n\n# å®šä¹‰èŠ‚å‡æ—¥\nplayoffs &lt;- data.frame(\n    holiday = \"playoff\",\n    ds = as.Date(c(\n        \"2008-01-13\", \"2009-01-03\", \"2010-01-16\",\n        \"2010-01-24\", \"2010-02-07\", \"2011-01-08\",\n        \"2013-01-12\", \"2014-01-12\", \"2014-01-19\",\n        \"2014-02-02\", \"2015-01-11\", \"2016-01-17\"\n    )),\n    lower_window = 0,\n    upper_window = 1 # å½±å“å½“å¤©å’Œåä¸€å¤©\n)\n\nsuperbowls &lt;- data.frame(\n    holiday = \"superbowl\",\n    ds = as.Date(c(\"2010-02-07\", \"2014-02-02\")),\n    lower_window = 0,\n    upper_window = 1\n)\n\nholidays &lt;- bind_rows(playoffs, superbowls)\nprint(holidays)\n\n     holiday         ds lower_window upper_window\n1    playoff 2008-01-13            0            1\n2    playoff 2009-01-03            0            1\n3    playoff 2010-01-16            0            1\n4    playoff 2010-01-24            0            1\n5    playoff 2010-02-07            0            1\n6    playoff 2011-01-08            0            1\n7    playoff 2013-01-12            0            1\n8    playoff 2014-01-12            0            1\n9    playoff 2014-01-19            0            1\n10   playoff 2014-02-02            0            1\n11   playoff 2015-01-11            0            1\n12   playoff 2016-01-17            0            1\n13 superbowl 2010-02-07            0            1\n14 superbowl 2014-02-02            0            1\n\n\n\n# ä½¿ç”¨èŠ‚å‡æ—¥æ‹Ÿåˆ\nm_holidays &lt;- prophet(df, holidays = holidays)\nforecast_holidays &lt;- predict(m_holidays, future)\n\n# æŸ¥çœ‹èŠ‚å‡æ—¥æ•ˆåº”\nprophet_plot_components(m_holidays, forecast_holidays)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "prophet æ—¶é—´åºåˆ—é¢„æµ‹"
    ]
  },
  {
    "objectID": "1073-prophet-forecasting.html#ç¬¬äº”éƒ¨åˆ†æ¨¡å‹è¯„ä¼°",
    "href": "1073-prophet-forecasting.html#ç¬¬äº”éƒ¨åˆ†æ¨¡å‹è¯„ä¼°",
    "title": "prophet æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šæ¨¡å‹è¯„ä¼°",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šæ¨¡å‹è¯„ä¼°\n\näº¤å‰éªŒè¯\n\n# æ—¶é—´åºåˆ—äº¤å‰éªŒè¯\ndf_cv &lt;- cross_validation(\n    m,\n    initial = 730, # åˆå§‹è®­ç»ƒæœŸ (2å¹´)\n    period = 180, # æ¯æ¬¡æ»šåŠ¨ (6ä¸ªæœˆ)\n    horizon = 365, # é¢„æµ‹èŒƒå›´ (1å¹´)\n    units = \"days\"\n)\n\nhead(df_cv)\n\n         y         ds     yhat yhat_lower yhat_upper     cutoff\n1 8.242493 2010-02-16 8.958207   8.451616   9.454003 2010-02-15\n2 8.008033 2010-02-17 8.724616   8.250724   9.232834 2010-02-15\n3 8.045268 2010-02-18 8.608486   8.120680   9.098533 2010-02-15\n4 7.928766 2010-02-19 8.530360   8.030569   9.022373 2010-02-15\n5 7.745003 2010-02-20 8.272438   7.772060   8.785073 2010-02-15\n6 7.866339 2010-02-21 8.603761   8.145043   9.094459 2010-02-15\n\n\n\n\næ€§èƒ½æŒ‡æ ‡\n\n# è®¡ç®—è¯„ä¼°æŒ‡æ ‡\ndf_p &lt;- performance_metrics(df_cv)\nprint(tail(df_p))\n\n     horizon      mse     rmse       mae      mape      mdape     smape\n324 360 days 1.090198 1.044126 0.8454578 0.1017591 0.08601918 0.1008559\n325 361 days 1.126563 1.061397 0.8589218 0.1029754 0.08706799 0.1020900\n326 362 days 1.142000 1.068644 0.8655493 0.1035776 0.08754456 0.1026441\n327 363 days 1.163425 1.078622 0.8730504 0.1043405 0.08797064 0.1032813\n328 364 days 1.179987 1.086272 0.8807045 0.1052738 0.08863998 0.1040287\n329 365 days 1.192644 1.092083 0.8896006 0.1063047 0.08941822 0.1049020\n     coverage\n324 0.5020557\n325 0.4995432\n326 0.5002284\n327 0.4986295\n328 0.4938328\n329 0.4862951\n\ncat(\"\\næ•´ä½“ MAPE:\", round(mean(df_p$mape) * 100, 2), \"%\\n\")\n\n\næ•´ä½“ MAPE: 7.47 %\n\ncat(\"æ•´ä½“ RMSE:\", round(mean(df_p$rmse), 2), \"\\n\")\n\næ•´ä½“ RMSE: 0.8 \n\n\n\n\nå¯è§†åŒ–è¯„ä¼°\n\nplot_cross_validation_metric(df_cv, metric = \"mape\") +\n    ggtitle(\"MAPE éšé¢„æµ‹èŒƒå›´å˜åŒ–\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "prophet æ—¶é—´åºåˆ—é¢„æµ‹"
    ]
  },
  {
    "objectID": "1073-prophet-forecasting.html#ç¬¬å…­éƒ¨åˆ†å‚æ•°è°ƒä¼˜",
    "href": "1073-prophet-forecasting.html#ç¬¬å…­éƒ¨åˆ†å‚æ•°è°ƒä¼˜",
    "title": "prophet æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šå‚æ•°è°ƒä¼˜",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šå‚æ•°è°ƒä¼˜\n\nå…³é”®å‚æ•°\n\n# è°ƒæ•´å‚æ•°\nm_tuned &lt;- prophet(\n    df,\n    changepoint.prior.scale = 0.05, # è¶‹åŠ¿çµæ´»æ€§ (é»˜è®¤0.05)\n    seasonality.prior.scale = 10, # å­£èŠ‚æ€§å¼ºåº¦ (é»˜è®¤10)\n    holidays.prior.scale = 10, # èŠ‚å‡æ—¥å¼ºåº¦ (é»˜è®¤10)\n    seasonality.mode = \"multiplicative\" # ä¹˜æ³•å­£èŠ‚æ€§\n)\n\nforecast_tuned &lt;- predict(m_tuned, future)\nplot(m_tuned, forecast_tuned) +\n    ggtitle(\"è°ƒå‚åçš„é¢„æµ‹\")\n\n\n\n\n\n\n\n\n\n\nå‚æ•°ç½‘æ ¼æœç´¢\n\n# ç®€åŒ–çš„ç½‘æ ¼æœç´¢\nparam_grid &lt;- expand.grid(\n    changepoint.prior.scale = c(0.01, 0.05, 0.1),\n    seasonality.prior.scale = c(1, 10)\n)\n\n# å¯¹æ¯ç»„å‚æ•°è¿›è¡Œäº¤å‰éªŒè¯ï¼ˆç®€åŒ–ç¤ºä¾‹ï¼‰\nresults &lt;- list()\nfor (i in 1:2) { # åªæµ‹è¯•å‰2ç»„\n    m_test &lt;- prophet(\n        df,\n        changepoint.prior.scale = param_grid$changepoint.prior.scale[i],\n        seasonality.prior.scale = param_grid$seasonality.prior.scale[i]\n    )\n\n    cv_test &lt;- cross_validation(m_test,\n        initial = 730, period = 180,\n        horizon = 365, units = \"days\"\n    )\n    perf &lt;- performance_metrics(cv_test)\n\n    results[[i]] &lt;- data.frame(\n        changepoint.prior.scale = param_grid$changepoint.prior.scale[i],\n        seasonality.prior.scale = param_grid$seasonality.prior.scale[i],\n        mape = mean(perf$mape)\n    )\n}\n\nresults_df &lt;- do.call(rbind, results)\nprint(results_df)\n\n  changepoint.prior.scale seasonality.prior.scale       mape\n1                    0.01                       1 0.06216315\n2                    0.05                       1 0.07443136",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "prophet æ—¶é—´åºåˆ—é¢„æµ‹"
    ]
  },
  {
    "objectID": "1073-prophet-forecasting.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "href": "1073-prophet-forecasting.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "title": "prophet æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹\n\nç–¾ç—…å‘ç—…ç‡é¢„æµ‹\n\n# æ¨¡æ‹Ÿç–¾ç—…å‘ç—…ç‡æ•°æ®\nset.seed(123)\nn_days &lt;- 1000\ndates &lt;- seq.Date(as.Date(\"2020-01-01\"), by = \"day\", length.out = n_days)\n\n# ç”Ÿæˆå¸¦è¶‹åŠ¿å’Œå­£èŠ‚æ€§çš„æ•°æ®\ntrend &lt;- 100 + 0.05 * (1:n_days)\nyearly_season &lt;- 20 * sin(2 * pi * (1:n_days) / 365)\nweekly_season &lt;- 5 * sin(2 * pi * (1:n_days) / 7)\nnoise &lt;- rnorm(n_days, 0, 10)\n\ncases &lt;- pmax(0, trend + yearly_season + weekly_season + noise)\n\ndisease_data &lt;- data.frame(\n    ds = dates,\n    y = cases\n)\n\nhead(disease_data)\n\n          ds         y\n1 2020-01-01  98.69867\n2 2020-01-02 103.36130\n3 2020-01-03 118.93890\n4 2020-01-04 100.11171\n5 2020-01-05  98.38753\n6 2020-01-06 115.60353\n\n\n\n# æ‹Ÿåˆæ¨¡å‹\nm_disease &lt;- prophet(disease_data,\n    yearly.seasonality = TRUE,\n    weekly.seasonality = TRUE\n)\n\n# é¢„æµ‹æœªæ¥90å¤©\nfuture_disease &lt;- make_future_dataframe(m_disease, periods = 90)\nforecast_disease &lt;- predict(m_disease, future_disease)\n\n# å¯è§†åŒ–\nplot(m_disease, forecast_disease) +\n    labs(\n        title = \"ç–¾ç—…å‘ç—…ç‡é¢„æµ‹\",\n        x = \"æ—¥æœŸ\", y = \"å‘ç—…æ•°\"\n    )\n\n\n\n\n\n\n\n\n\n# å­£èŠ‚æ€§åˆ†è§£\nprophet_plot_components(m_disease, forecast_disease)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "prophet æ—¶é—´åºåˆ—é¢„æµ‹"
    ]
  },
  {
    "objectID": "1073-prophet-forecasting.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "1073-prophet-forecasting.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "prophet æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# ===== åŸºæœ¬æµç¨‹ =====\nm &lt;- prophet(df)\nfuture &lt;- make_future_dataframe(m, periods = 365)\nforecast &lt;- predict(m, future)\nplot(m, forecast)\n\n# ===== è¶‹åŠ¿è®¾ç½® =====\nprophet(df, growth = \"linear\") # çº¿æ€§\nprophet(df, growth = \"logistic\") # Så‹ï¼ˆéœ€è®¾ç½®capï¼‰\n\n# ===== å­£èŠ‚æ€§ =====\nadd_seasonality(m, name, period, fourier.order)\nprophet(df, yearly.seasonality = TRUE)\nprophet(df, seasonality.mode = \"multiplicative\")\n\n# ===== èŠ‚å‡æ—¥ =====\nholidays &lt;- data.frame(holiday, ds, lower_window, upper_window)\nprophet(df, holidays = holidays)\n\n# ===== è¯„ä¼° =====\ncross_validation(m, initial, period, horizon, units)\nperformance_metrics(df_cv)\n\n# ===== è°ƒå‚ =====\nprophet(df,\n    changepoint.prior.scale = 0.05,\n    seasonality.prior.scale = 10\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "prophet æ—¶é—´åºåˆ—é¢„æµ‹"
    ]
  },
  {
    "objectID": "1073-prophet-forecasting.html#å°ç»“",
    "href": "1073-prophet-forecasting.html#å°ç»“",
    "title": "prophet æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "å°ç»“",
    "text": "å°ç»“\nprophet çš„æ ¸å¿ƒå·¥ä½œæµç¨‹ï¼š\n\nå‡†å¤‡æ•°æ®ï¼šds (æ—¥æœŸ) + y (æ•°å€¼)\næ‹Ÿåˆæ¨¡å‹ï¼šprophet(df)\nç”Ÿæˆæœªæ¥ï¼šmake_future_dataframe()\né¢„æµ‹ï¼špredict()\nè¯„ä¼°ï¼šcross_validation() + performance_metrics()\n\n\né€‚ç”¨åœºæ™¯ï¼šæœ‰æ˜æ˜¾å­£èŠ‚æ€§å’Œè¶‹åŠ¿çš„å•†ä¸š/å¥åº·æ•°æ®é¢„æµ‹ï¼Œç‰¹åˆ«æ˜¯æœ‰èŠ‚å‡æ—¥æ•ˆåº”çš„åœºæ™¯ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "prophet æ—¶é—´åºåˆ—é¢„æµ‹"
    ]
  },
  {
    "objectID": "1073-prophet-forecasting.html#å‚è€ƒèµ„æº",
    "href": "1073-prophet-forecasting.html#å‚è€ƒèµ„æº",
    "title": "prophet æ—¶é—´åºåˆ—é¢„æµ‹",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nprophet å®˜æ–¹æ–‡æ¡£\nprophet è®ºæ–‡\nprophet R åŒ…",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "prophet æ—¶é—´åºåˆ—é¢„æµ‹"
    ]
  },
  {
    "objectID": "index.html#é›¶è†¨èƒ€æ¨¡å‹ç®€ä»‹",
    "href": "index.html#é›¶è†¨èƒ€æ¨¡å‹ç®€ä»‹",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "é›¶è†¨èƒ€æ¨¡å‹ç®€ä»‹",
    "text": "é›¶è†¨èƒ€æ¨¡å‹ç®€ä»‹\nå½“è®¡æ•°æ•°æ®ä¸­é›¶å€¼è¿‡å¤šæ—¶ï¼Œæ ‡å‡†çš„Poissonæˆ–è´ŸäºŒé¡¹å›å½’å¯èƒ½æ‹Ÿåˆä¸ä½³ã€‚é›¶è†¨èƒ€æ¨¡å‹å‡è®¾æ•°æ®æ¥è‡ªä¸¤ä¸ªè¿‡ç¨‹ï¼šä¸€ä¸ªäº§ç”Ÿâ€ç»“æ„æ€§é›¶â€ï¼Œå¦ä¸€ä¸ªäº§ç”Ÿæ ‡å‡†è®¡æ•°åˆ†å¸ƒã€‚\n\nä½•æ—¶ä½¿ç”¨é›¶è†¨èƒ€æ¨¡å‹ï¼Ÿ\n\n\n\næ•°æ®ç‰¹å¾\nå¯èƒ½åŸå› \nè§£å†³æ–¹æ¡ˆ\n\n\n\n\né›¶å€¼æ¯”ä¾‹è¿‡é«˜\nä¸¤ç±»äººç¾¤æ··åˆ\né›¶è†¨èƒ€æ¨¡å‹\n\n\néå‚ä¸è€…\nâ€œä»ä¸â€åšæŸäº‹çš„äºº\nZIP/ZINB\n\n\næµ‹é‡é™åˆ¶\næ— æ³•æ£€æµ‹åˆ°ä½å€¼\nHurdleæ¨¡å‹\n\n\n\n\n\næ¨¡å‹ç±»å‹\n\nZIPï¼šé›¶è†¨èƒ€Poisson\nZINBï¼šé›¶è†¨èƒ€è´ŸäºŒé¡¹ï¼ˆå¤„ç†è¿‡åº¦ç¦»æ•£ï¼‰\nHurdleï¼šä¸¤éƒ¨åˆ†æ¨¡å‹ï¼ˆè·¨è¶Šé›¶çš„éšœç¢ï¼‰"
  },
  {
    "objectID": "index.html#ç¬¬ä¸€éƒ¨åˆ†ç†è§£é›¶è†¨èƒ€",
    "href": "index.html#ç¬¬ä¸€éƒ¨åˆ†ç†è§£é›¶è†¨èƒ€",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šç†è§£é›¶è†¨èƒ€",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šç†è§£é›¶è†¨èƒ€\n\næ¨¡æ‹Ÿé›¶è†¨èƒ€æ•°æ®\n# æ¨¡æ‹Ÿå¸çƒŸæ•°æ®ï¼šéƒ¨åˆ†äººä»ä¸å¸çƒŸï¼Œå¸çƒŸè€…æœä»Poisson\nn &lt;- 500\nnever_smoker &lt;- rbinom(n, 1, 0.4) # 40%ä»ä¸å¸çƒŸ\ncigarettes &lt;- ifelse(never_smoker == 1, 0, rpois(n, lambda = 5))\n\n# æ·»åŠ åå˜é‡\nage &lt;- round(rnorm(n, 40, 10))\nmale &lt;- rbinom(n, 1, 0.5)\n\nsim_data &lt;- data.frame(cigarettes, age, male, never_smoker)\n\n# é›¶å€¼æ¯”ä¾‹\ncat(\"é›¶å€¼æ¯”ä¾‹:\", mean(cigarettes == 0), \"\\n\")\ncat(\"PoissonæœŸæœ›é›¶å€¼æ¯”ä¾‹:\", dpois(0, mean(cigarettes)), \"\\n\")\n\n\nå¯è§†åŒ–é›¶è†¨èƒ€\n# æ¯”è¾ƒè§‚å¯Ÿå€¼ä¸Poissonåˆ†å¸ƒ\nobs_counts &lt;- table(factor(cigarettes, levels = 0:max(cigarettes)))\npois_expected &lt;- dpois(0:max(cigarettes), lambda = mean(cigarettes)) * n\n\ncompare_df &lt;- data.frame(\n    count = 0:max(cigarettes),\n    observed = as.numeric(obs_counts),\n    expected = pois_expected\n) %&gt;%\n    tidyr::pivot_longer(-count, names_to = \"type\", values_to = \"frequency\")\n\nggplot(compare_df, aes(x = count, y = frequency, fill = type)) +\n    geom_col(position = \"dodge\", alpha = 0.8) +\n    scale_fill_manual(\n        values = c(\"#4f46e5\", \"#dc2626\"),\n        labels = c(\"PoissonæœŸæœ›\", \"è§‚å¯Ÿå€¼\")\n    ) +\n    labs(\n        title = \"é›¶è†¨èƒ€æ•°æ® vs Poissonåˆ†å¸ƒ\",\n        subtitle = \"è§‚å¯Ÿé›¶å€¼è¿œå¤šäºPoissoné¢„æœŸ\",\n        x = \"è®¡æ•°\", y = \"é¢‘æ•°\", fill = \"\"\n    )"
  },
  {
    "objectID": "index.html#ç¬¬äºŒéƒ¨åˆ†æ ‡å‡†è®¡æ•°æ¨¡å‹",
    "href": "index.html#ç¬¬äºŒéƒ¨åˆ†æ ‡å‡†è®¡æ•°æ¨¡å‹",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šæ ‡å‡†è®¡æ•°æ¨¡å‹",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šæ ‡å‡†è®¡æ•°æ¨¡å‹\n\nPoissonå›å½’\n# æ ‡å‡†Poisson\npois_fit &lt;- glm(cigarettes ~ age + male, data = sim_data, family = poisson)\nsummary(pois_fit)\n\n# æ£€æŸ¥è¿‡åº¦ç¦»æ•£\ncat(\"\\nè¿‡åº¦ç¦»æ•£æ£€éªŒ:\\n\")\ncat(\"æ®‹å·®åå·®:\", deviance(pois_fit), \"\\n\")\ncat(\"è‡ªç”±åº¦:\", df.residual(pois_fit), \"\\n\")\ncat(\"ç¦»æ•£å‚æ•°ä¼°è®¡:\", deviance(pois_fit) / df.residual(pois_fit), \"\\n\")\n\n\nè´ŸäºŒé¡¹å›å½’\n# è´ŸäºŒé¡¹å›å½’\nnb_fit &lt;- glm.nb(cigarettes ~ age + male, data = sim_data)\nsummary(nb_fit)"
  },
  {
    "objectID": "index.html#ç¬¬ä¸‰éƒ¨åˆ†é›¶è†¨èƒ€poisson-zip",
    "href": "index.html#ç¬¬ä¸‰éƒ¨åˆ†é›¶è†¨èƒ€poisson-zip",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šé›¶è†¨èƒ€Poisson (ZIP)",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šé›¶è†¨èƒ€Poisson (ZIP)\n\næ‹ŸåˆZIPæ¨¡å‹\n# é›¶è†¨èƒ€Poisson\nzip_fit &lt;- zeroinfl(cigarettes ~ age + male | 1, data = sim_data)\nsummary(zip_fit)\næ¨¡å‹è§£è¯»ï¼š - Count modelï¼šè®¡æ•°éƒ¨åˆ†ï¼ˆç»™å®šä¸æ˜¯ç»“æ„é›¶ï¼‰ - Zero-inflation modelï¼šé›¶è†¨èƒ€éƒ¨åˆ†ï¼ˆæ˜¯ç»“æ„é›¶çš„æ¦‚ç‡ï¼‰\n\n\nZIPæ¨¡å‹æ‰©å±•\n# é›¶è†¨èƒ€éƒ¨åˆ†ä¹ŸåŒ…å«åå˜é‡\nzip_full &lt;- zeroinfl(cigarettes ~ age + male | age + male, data = sim_data)\nsummary(zip_full)"
  },
  {
    "objectID": "index.html#ç¬¬å››éƒ¨åˆ†é›¶è†¨èƒ€è´ŸäºŒé¡¹-zinb",
    "href": "index.html#ç¬¬å››éƒ¨åˆ†é›¶è†¨èƒ€è´ŸäºŒé¡¹-zinb",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šé›¶è†¨èƒ€è´ŸäºŒé¡¹ (ZINB)",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šé›¶è†¨èƒ€è´ŸäºŒé¡¹ (ZINB)\n# æ·»åŠ è¿‡åº¦ç¦»æ•£\nsim_data$cigs_od &lt;- ifelse(\n    sim_data$never_smoker == 1, 0,\n    rnbinom(n, size = 2, mu = 5) # è´ŸäºŒé¡¹åˆ†å¸ƒ\n)\n\n# ZINBæ¨¡å‹\nzinb_fit &lt;- zeroinfl(cigs_od ~ age + male | 1, data = sim_data, dist = \"negbin\")\nsummary(zinb_fit)"
  },
  {
    "objectID": "index.html#ç¬¬äº”éƒ¨åˆ†hurdleæ¨¡å‹",
    "href": "index.html#ç¬¬äº”éƒ¨åˆ†hurdleæ¨¡å‹",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šHurdleæ¨¡å‹",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šHurdleæ¨¡å‹\nHurdleæ¨¡å‹å°†æ•°æ®åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šé›¶vséé›¶ï¼ˆäºŒé¡¹éƒ¨åˆ†ï¼‰ï¼Œéé›¶å€¼çš„å¤§å°ï¼ˆæˆªæ–­è®¡æ•°éƒ¨åˆ†ï¼‰ã€‚\n# Hurdle Poisson\nhurdle_fit &lt;- hurdle(cigarettes ~ age + male | age + male, data = sim_data)\nsummary(hurdle_fit)\n\nZIP vs Hurdle åŒºåˆ«\n\n\n\nç‰¹ç‚¹\nZIP\nHurdle\n\n\n\n\né›¶æ¥æº\nç»“æ„é›¶ + é‡‡æ ·é›¶\nä»…â€è·¨æ â€å†³å®š\n\n\néé›¶éƒ¨åˆ†\nå®Œæ•´åˆ†å¸ƒ\næˆªæ–­åˆ†å¸ƒ\n\n\né€‚ç”¨åœºæ™¯\nä¸¤ç±»äººç¾¤æ··åˆ\nå‚ä¸/ä¸å‚ä¸å†³ç­–"
  },
  {
    "objectID": "index.html#ç¬¬å…­éƒ¨åˆ†æ¨¡å‹æ¯”è¾ƒ",
    "href": "index.html#ç¬¬å…­éƒ¨åˆ†æ¨¡å‹æ¯”è¾ƒ",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹æ¯”è¾ƒ",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹æ¯”è¾ƒ\n\nLOOäº¤å‰éªŒè¯\n# Leave-one-outäº¤å‰éªŒè¯\nloo_lm &lt;- loo(bayes_lm)\nprint(loo_lm)\n# æ¯”è¾ƒå¤šä¸ªæ¨¡å‹\nbayes_lm2 &lt;- stan_glm(mpg ~ wt + hp + disp,\n    data = mtcars,\n    seed = 42, refresh = 0\n)\n\nloo_lm2 &lt;- loo(bayes_lm2)\n\n# æ¨¡å‹æ¯”è¾ƒ\nloo_compare(loo_lm, loo_lm2)"
  },
  {
    "objectID": "index.html#ipw-ç®€ä»‹",
    "href": "index.html#ipw-ç®€ä»‹",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "IPW ç®€ä»‹",
    "text": "IPW ç®€ä»‹\nå€’æ¦‚ç‡åŠ æƒï¼ˆInverse Probability Weighting, IPWï¼‰ æ˜¯å› æœæ¨æ–­ä¸­åˆ›å»ºä¼ªéšæœºåŒ–çš„å…³é”®æŠ€æœ¯ã€‚é€šè¿‡æ ¹æ®å€¾å‘æ€§å¾—åˆ†å¯¹è§‚æµ‹å€¼åŠ æƒï¼Œä½¿å¤„ç†ç»„å’Œå¯¹ç…§ç»„åœ¨åå˜é‡ä¸Šå¯æ¯”ã€‚\n\nIPW vs PSM\n\n\n\nç‰¹ç‚¹\nPSMåŒ¹é…\nIPWåŠ æƒ\n\n\n\n\næ ·æœ¬ä½¿ç”¨\nä¸¢å¼ƒæœªåŒ¹é…æ ·æœ¬\nä¿ç•™å…¨éƒ¨æ ·æœ¬\n\n\nç»Ÿè®¡æ•ˆç‡\nè¾ƒä½\nè¾ƒé«˜\n\n\næç«¯å€¼å¤„ç†\nè‡ªåŠ¨æ’é™¤\néœ€æƒé‡ä¿®å‰ª\n\n\nä¼°è®¡ç±»å‹\nATT\nATE/ATTå¯é€‰\n\n\n\n\n\næ ¸å¿ƒæ€æƒ³\n\nå¤„ç†æ¦‚ç‡ä½çš„äººæ¥å—å¤„ç† â†’ ä»£è¡¨æ›´å¤šåŒç±»äºº â†’ æƒé‡é«˜\nå¤„ç†æ¦‚ç‡é«˜çš„äººæ¥å—å¤„ç† â†’ ä»£è¡¨è¾ƒå°‘åŒç±»äºº â†’ æƒé‡ä½"
  },
  {
    "objectID": "index.html#ç¬¬ä¸€éƒ¨åˆ†æ•°æ®æ¨¡æ‹Ÿ",
    "href": "index.html#ç¬¬ä¸€éƒ¨åˆ†æ•°æ®æ¨¡æ‹Ÿ",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ•°æ®æ¨¡æ‹Ÿ",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ•°æ®æ¨¡æ‹Ÿ\n# æ¨¡æ‹Ÿè§‚å¯Ÿæ€§ç ”ç©¶æ•°æ®\nn &lt;- 1000\n\n# åå˜é‡\nage &lt;- rnorm(n, 50, 10)\nfemale &lt;- rbinom(n, 1, 0.5)\ncomorbidity &lt;- rbinom(n, 1, 0.3)\nseverity &lt;- rnorm(n, 0, 1)\n\n# æ²»ç–—åˆ†é…ï¼ˆééšæœºï¼‰\nps_true &lt;- plogis(-2 + 0.03 * age + 0.5 * female - 0.8 * comorbidity + 0.6 * severity)\ntreatment &lt;- rbinom(n, 1, ps_true)\n\n# ç»“å±€ï¼ˆæœ‰å› æœæ•ˆåº”ï¼‰\ny0 &lt;- 50 + 0.3 * age - 5 * comorbidity + 2 * severity + rnorm(n, 0, 5)\ny1 &lt;- y0 + 10 # çœŸå®æ²»ç–—æ•ˆåº” = 10\noutcome &lt;- ifelse(treatment == 1, y1, y0)\n\ndata &lt;- data.frame(\n    age, female, comorbidity, severity, treatment, outcome\n)\n\ncat(\"æ²»ç–—ç»„æ¯”ä¾‹:\", mean(treatment), \"\\n\")\ncat(\"çœŸå®ATE: 10\\n\")"
  },
  {
    "objectID": "index.html#ç¬¬äºŒéƒ¨åˆ†ä¼°è®¡å€¾å‘æ€§å¾—åˆ†",
    "href": "index.html#ç¬¬äºŒéƒ¨åˆ†ä¼°è®¡å€¾å‘æ€§å¾—åˆ†",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šä¼°è®¡å€¾å‘æ€§å¾—åˆ†",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šä¼°è®¡å€¾å‘æ€§å¾—åˆ†\n# æ‹Ÿåˆå€¾å‘æ€§å¾—åˆ†æ¨¡å‹\nps_model &lt;- glm(treatment ~ age + female + comorbidity + severity,\n    data = data, family = binomial\n)\n\ndata$ps &lt;- predict(ps_model, type = \"response\")\n\n# å¯è§†åŒ–\nggplot(data, aes(x = ps, fill = factor(treatment))) +\n    geom_density(alpha = 0.6) +\n    scale_fill_manual(\n        values = c(\"#3b82f6\", \"#dc2626\"),\n        labels = c(\"å¯¹ç…§ç»„\", \"æ²»ç–—ç»„\")\n    ) +\n    labs(\n        title = \"å€¾å‘æ€§å¾—åˆ†åˆ†å¸ƒ\",\n        x = \"å€¾å‘æ€§å¾—åˆ†\", y = \"å¯†åº¦\", fill = \"ç»„åˆ«\"\n    )"
  },
  {
    "objectID": "index.html#ç¬¬ä¸‰éƒ¨åˆ†è®¡ç®—ipwæƒé‡",
    "href": "index.html#ç¬¬ä¸‰éƒ¨åˆ†è®¡ç®—ipwæƒé‡",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šè®¡ç®—IPWæƒé‡",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šè®¡ç®—IPWæƒé‡\n\nATEæƒé‡\n# ATE: ä¼°è®¡æ€»ä½“å¹³å‡æ•ˆåº”\ndata$ipw_ate &lt;- ifelse(data$treatment == 1,\n    1 / data$ps,\n    1 / (1 - data$ps)\n)\n\n# æŸ¥çœ‹æƒé‡åˆ†å¸ƒ\nsummary(data$ipw_ate)\n\n\nATTæƒé‡\n# ATT: ä¼°è®¡æ²»ç–—ç»„çš„æ•ˆåº”\ndata$ipw_att &lt;- ifelse(data$treatment == 1,\n    1,\n    data$ps / (1 - data$ps)\n)\n\nsummary(data$ipw_att)\n\n\næƒé‡ä¿®å‰ª\n# æç«¯æƒé‡å¯èƒ½å¯¼è‡´ä¸ç¨³å®š\n# ä¿®å‰ªåˆ°99ç™¾åˆ†ä½\nthreshold &lt;- quantile(data$ipw_ate, 0.99)\ndata$ipw_trimmed &lt;- pmin(data$ipw_ate, threshold)\n\ncat(\"ä¿®å‰ªå‰æœ€å¤§æƒé‡:\", max(data$ipw_ate), \"\\n\")\ncat(\"ä¿®å‰ªåæœ€å¤§æƒé‡:\", max(data$ipw_trimmed), \"\\n\")"
  },
  {
    "objectID": "index.html#ç¬¬å››éƒ¨åˆ†ä½¿ç”¨-weightit-åŒ…",
    "href": "index.html#ç¬¬å››éƒ¨åˆ†ä½¿ç”¨-weightit-åŒ…",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šä½¿ç”¨ WeightIt åŒ…",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šä½¿ç”¨ WeightIt åŒ…\n# WeightIt ç®€åŒ–æƒé‡è®¡ç®—\nW &lt;- weightit(treatment ~ age + female + comorbidity + severity,\n    data = data, method = \"ps\", estimand = \"ATE\"\n)\n\nsummary(W)\n\nå¹³è¡¡æ£€éªŒ\n# cobaltåŒ…æ£€æŸ¥å¹³è¡¡\nbal.tab(W, stats = c(\"m\", \"v\"), thresholds = c(m = 0.1))\n# å¯è§†åŒ–å¹³è¡¡\nlove.plot(W, thresholds = c(m = 0.1))"
  },
  {
    "objectID": "index.html#ç¬¬äº”éƒ¨åˆ†åŠ æƒä¼°è®¡å› æœæ•ˆåº”",
    "href": "index.html#ç¬¬äº”éƒ¨åˆ†åŠ æƒä¼°è®¡å› æœæ•ˆåº”",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šåŠ æƒä¼°è®¡å› æœæ•ˆåº”",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šåŠ æƒä¼°è®¡å› æœæ•ˆåº”\n\nç®€å•åŠ æƒå‡å€¼å·®\n# æ‰‹åŠ¨è®¡ç®—\nweighted_mean_treat &lt;- weighted.mean(\n    data$outcome[data$treatment == 1],\n    data$ipw_ate[data$treatment == 1]\n)\nweighted_mean_control &lt;- weighted.mean(\n    data$outcome[data$treatment == 0],\n    data$ipw_ate[data$treatment == 0]\n)\n\nate_ipw &lt;- weighted_mean_treat - weighted_mean_control\ncat(\"IPWä¼°è®¡çš„ATE:\", round(ate_ipw, 2), \"\\n\")\ncat(\"çœŸå®ATE: 10\\n\")\n\n\nä½¿ç”¨surveyåŒ…\n# åˆ›å»ºåŠ æƒè®¾è®¡\ndesign &lt;- svydesign(ids = ~1, weights = ~ipw_ate, data = data)\n\n# åŠ æƒå›å½’\nmodel_weighted &lt;- svyglm(outcome ~ treatment, design = design)\nsummary(model_weighted)\n\n\nåŒç¨³å¥ä¼°è®¡\n# ç»“åˆIPWå’Œç»“å±€å›å½’\nmodel_dr &lt;- svyglm(outcome ~ treatment + age + female + comorbidity + severity,\n    design = design\n)\nsummary(model_dr)"
  },
  {
    "objectID": "index.html#ç¬¬å…­éƒ¨åˆ†è¾¹é™…ç»“æ„æ¨¡å‹",
    "href": "index.html#ç¬¬å…­éƒ¨åˆ†è¾¹é™…ç»“æ„æ¨¡å‹",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šè¾¹é™…ç»“æ„æ¨¡å‹",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šè¾¹é™…ç»“æ„æ¨¡å‹\nè¾¹é™…ç»“æ„æ¨¡å‹ï¼ˆMSMï¼‰ç”¨äºå¤„ç†æ—¶å˜å¤„ç†å’Œæ—¶å˜æ··æ‚ã€‚\n# ç®€åŒ–ç¤ºä¾‹ï¼šç¨³å®šæƒé‡\n# ç¨³å®šæƒé‡ = P(A) / P(A|X)\np_treat &lt;- mean(data$treatment)\ndata$sw &lt;- ifelse(data$treatment == 1,\n    p_treat / data$ps,\n    (1 - p_treat) / (1 - data$ps)\n)\n\nsummary(data$sw)\n# ä½¿ç”¨ç¨³å®šæƒé‡\ndesign_sw &lt;- svydesign(ids = ~1, weights = ~sw, data = data)\nmsm_fit &lt;- svyglm(outcome ~ treatment, design = design_sw)\nsummary(msm_fit)"
  },
  {
    "objectID": "index.html#å¤åˆç»“å±€ç®€ä»‹",
    "href": "index.html#å¤åˆç»“å±€ç®€ä»‹",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å¤åˆç»“å±€ç®€ä»‹",
    "text": "å¤åˆç»“å±€ç®€ä»‹\nå¤åˆç»“å±€ï¼ˆComposite Endpointï¼‰ å°†å¤šä¸ªä¸´åºŠäº‹ä»¶åˆå¹¶ä¸ºå•ä¸€ç»ˆç‚¹ï¼Œå¸¸è§äºå¿ƒè¡€ç®¡å’Œè‚¿ç˜¤ä¸´åºŠè¯•éªŒã€‚å…¸å‹ä¾‹å­åŒ…æ‹¬MACEï¼ˆä¸»è¦ä¸è‰¯å¿ƒè¡€ç®¡äº‹ä»¶ï¼‰å’ŒDFSï¼ˆæ— ç—…ç”Ÿå­˜ï¼‰ã€‚\n\nä¸ºä»€ä¹ˆä½¿ç”¨å¤åˆç»“å±€ï¼Ÿ\n\n\n\nä¼˜åŠ¿\nè¯´æ˜\n\n\n\n\næé«˜äº‹ä»¶ç‡\nå¢åŠ ç»Ÿè®¡æ•ˆåŠ›\n\n\nå‡å°‘æ ·æœ¬é‡\né™ä½è¯•éªŒæˆæœ¬\n\n\næ•æ‰å…¨é¢æ•ˆæœ\nå¤šæ–¹é¢è¯„ä¼°æ²»ç–—\n\n\n\n\n\nä¸»è¦æŒ‘æˆ˜\n\nç»„åˆ†äº‹ä»¶é‡è¦ç¨‹åº¦ä¸åŒ\næ•ˆåº”æ–¹å‘å¯èƒ½ä¸ä¸€è‡´\nè§£é‡Šå¤æ‚"
  },
  {
    "objectID": "index.html#ç¬¬ä¸€éƒ¨åˆ†æ¨¡æ‹Ÿå¤åˆç»“å±€æ•°æ®",
    "href": "index.html#ç¬¬ä¸€éƒ¨åˆ†æ¨¡æ‹Ÿå¤åˆç»“å±€æ•°æ®",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ¨¡æ‹Ÿå¤åˆç»“å±€æ•°æ®",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ¨¡æ‹Ÿå¤åˆç»“å±€æ•°æ®\n# æ¨¡æ‹Ÿå¿ƒè¡€ç®¡è¯•éªŒæ•°æ®\nn &lt;- 1000\n\n# æ²»ç–—åˆ†é…\ntreatment &lt;- rep(c(0, 1), each = n / 2)\n\n# ä¸‰ä¸ªç»„åˆ†äº‹ä»¶çš„é£é™©\n# æ­»äº¡ï¼šæ²»ç–—é™ä½é£é™©\ndeath_hazard &lt;- ifelse(treatment == 1, 0.02, 0.03)\n# MIï¼šæ²»ç–—ç•¥é™é£é™©\nmi_hazard &lt;- ifelse(treatment == 1, 0.04, 0.05)\n# å’ä¸­ï¼šæ²»ç–—æ— æ•ˆ\nstroke_hazard &lt;- 0.02\n\n# ç”Ÿæˆäº‹ä»¶æ—¶é—´ï¼ˆæŒ‡æ•°åˆ†å¸ƒï¼‰\ntime_death &lt;- rexp(n, death_hazard)\ntime_mi &lt;- rexp(n, mi_hazard)\ntime_stroke &lt;- rexp(n, stroke_hazard)\n\n# åˆ å¤±æ—¶é—´\ncensor_time &lt;- runif(n, 3, 5)\n\n# ç¡®å®šé¦–å‘äº‹ä»¶\nfirst_event_time &lt;- pmin(time_death, time_mi, time_stroke, censor_time)\nevent_type &lt;- case_when(\n    first_event_time == censor_time ~ 0, # åˆ å¤±\n    first_event_time == time_death ~ 1, # æ­»äº¡\n    first_event_time == time_mi ~ 2, # MI\n    first_event_time == time_stroke ~ 3 # å’ä¸­\n)\n\n# å¤åˆç»“å±€\ncomposite_event &lt;- as.numeric(event_type &gt; 0)\n\ntrial_data &lt;- data.frame(\n    id = 1:n,\n    treatment = factor(treatment, labels = c(\"æ§åˆ¶\", \"æ²»ç–—\")),\n    time = first_event_time,\n    composite_event,\n    event_type = factor(event_type, labels = c(\"åˆ å¤±\", \"æ­»äº¡\", \"MI\", \"å’ä¸­\"))\n)\n\n# æè¿°æ€§ç»Ÿè®¡\ncat(\"äº‹ä»¶åˆ†å¸ƒ:\\n\")\nprint(table(trial_data$treatment, trial_data$event_type))"
  },
  {
    "objectID": "index.html#ç¬¬äºŒéƒ¨åˆ†ä¼ ç»Ÿå¤åˆç»“å±€åˆ†æ",
    "href": "index.html#ç¬¬äºŒéƒ¨åˆ†ä¼ ç»Ÿå¤åˆç»“å±€åˆ†æ",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šä¼ ç»Ÿå¤åˆç»“å±€åˆ†æ",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šä¼ ç»Ÿå¤åˆç»“å±€åˆ†æ\n\nKaplan-Meieræ›²çº¿\n# å¤åˆç»“å±€çš„KMåˆ†æ\nsurv_obj &lt;- Surv(trial_data$time, trial_data$composite_event)\nkm_fit &lt;- survfit(surv_obj ~ treatment, data = trial_data)\n\n# å¯è§†åŒ–\nplot(km_fit,\n    col = c(\"#3b82f6\", \"#dc2626\"), lwd = 2,\n    xlab = \"æ—¶é—´ï¼ˆå¹´ï¼‰\", ylab = \"æ— äº‹ä»¶ç”Ÿå­˜ç‡\",\n    main = \"å¤åˆç»“å±€ï¼šæ— MACEç”Ÿå­˜æ›²çº¿\"\n)\nlegend(\"bottomleft\", c(\"æ§åˆ¶ç»„\", \"æ²»ç–—ç»„\"), col = c(\"#3b82f6\", \"#dc2626\"), lwd = 2)\n\n\nCoxå›å½’\n# Coxæ¨¡å‹\ncox_composite &lt;- coxph(Surv(time, composite_event) ~ treatment, data = trial_data)\nsummary(cox_composite)"
  },
  {
    "objectID": "index.html#ç¬¬ä¸‰éƒ¨åˆ†ç»„åˆ†åˆ†æ",
    "href": "index.html#ç¬¬ä¸‰éƒ¨åˆ†ç»„åˆ†åˆ†æ",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šç»„åˆ†åˆ†æ",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šç»„åˆ†åˆ†æ\n\nå„ç»„åˆ†çš„ç‹¬ç«‹åˆ†æ\n# åˆ†åˆ«åˆ†ææ¯ä¸ªç»„åˆ†\ncomponents &lt;- c(\"æ­»äº¡\", \"MI\", \"å’ä¸­\")\ncomponent_results &lt;- list()\n\nfor (comp in components) {\n    trial_data[[paste0(\"event_\", comp)]] &lt;- as.numeric(trial_data$event_type == comp)\n\n    # Coxæ¨¡å‹\n    formula &lt;- as.formula(paste0(\"Surv(time, event_\", comp, \") ~ treatment\"))\n    fit &lt;- coxph(formula, data = trial_data)\n\n    component_results[[comp]] &lt;- data.frame(\n        Component = comp,\n        HR = exp(coef(fit)),\n        CI_lower = exp(confint(fit))[1],\n        CI_upper = exp(confint(fit))[2],\n        p_value = summary(fit)$coefficients[5]\n    )\n}\n\nresults_df &lt;- do.call(rbind, component_results)\nprint(results_df)\n\n\næ£®æ—å›¾\n# æ·»åŠ å¤åˆç»“å±€ç»“æœ\ncomposite_hr &lt;- exp(coef(cox_composite))\ncomposite_ci &lt;- exp(confint(cox_composite))\n\nall_results &lt;- rbind(\n    results_df,\n    data.frame(\n        Component = \"å¤åˆç»“å±€\",\n        HR = composite_hr,\n        CI_lower = composite_ci[1],\n        CI_upper = composite_ci[2],\n        p_value = summary(cox_composite)$coefficients[5]\n    )\n)\n\n# æ£®æ—å›¾\nggplot(all_results, aes(x = HR, y = Component)) +\n    geom_point(size = 3) +\n    geom_errorbarh(aes(xmin = CI_lower, xmax = CI_upper), height = 0.2) +\n    geom_vline(xintercept = 1, linetype = \"dashed\", color = \"gray50\") +\n    scale_x_log10() +\n    labs(\n        title = \"å¤åˆç»“å±€åŠç»„åˆ†åˆ†æ\",\n        x = \"é£é™©æ¯” (95% CI)\", y = \"\"\n    ) +\n    theme(axis.text.y = element_text(size = 12))"
  },
  {
    "objectID": "index.html#ç¬¬å››éƒ¨åˆ†win-ratioæ–¹æ³•",
    "href": "index.html#ç¬¬å››éƒ¨åˆ†win-ratioæ–¹æ³•",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šWin Ratioæ–¹æ³•",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šWin Ratioæ–¹æ³•\nWin Ratioæ˜¯å¤„ç†æœ‰åºå¤åˆç»“å±€çš„æ–°æ–¹æ³•ï¼Œè€ƒè™‘äº‹ä»¶çš„ä¸´åºŠé‡è¦æ€§ã€‚\n\nWin RatioåŸç†\n# æ‰‹åŠ¨è®¡ç®—Win Ratio\n# æŒ‰é‡è¦æ€§æ’åºï¼šæ­»äº¡ &gt; MI &gt; å’ä¸­\n\ncalculate_win_ratio &lt;- function(data) {\n    treat &lt;- data[data$treatment == \"æ²»ç–—\", ]\n    control &lt;- data[data$treatment == \"æ§åˆ¶\", ]\n\n    wins &lt;- 0\n    losses &lt;- 0\n    ties &lt;- 0\n\n    for (i in 1:nrow(treat)) {\n        for (j in 1:nrow(control)) {\n            # æ¯”è¾ƒæ­»äº¡\n            if (treat$event_æ­»äº¡[i] == 0 && control$event_æ­»äº¡[j] == 1 &&\n                treat$time[i] &gt; control$time[j]) {\n                wins &lt;- wins + 1\n            } else if (treat$event_æ­»äº¡[i] == 1 && control$event_æ­»äº¡[j] == 0 &&\n                treat$time[i] &lt; control$time[j]) {\n                losses &lt;- losses + 1\n            } else {\n                # ç»§ç»­æ¯”è¾ƒMIï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼‰\n                if (treat$event_MI[i] == 0 && control$event_MI[j] == 1) {\n                    wins &lt;- wins + 1\n                } else if (treat$event_MI[i] == 1 && control$event_MI[j] == 0) {\n                    losses &lt;- losses + 1\n                } else {\n                    ties &lt;- ties + 1\n                }\n            }\n        }\n    }\n\n    list(\n        wins = wins, losses = losses, ties = ties,\n        win_ratio = wins / losses\n    )\n}\n\n# ç®€åŒ–ç¤ºä¾‹ï¼ˆå®Œæ•´ç‰ˆéœ€è¦æ›´å¤æ‚çš„é…å¯¹é€»è¾‘ï¼‰\ncat(\"Win Ratioæ¦‚å¿µæ¼”ç¤º:\\n\")\ncat(\"æ²»ç–—ç»„'èµ¢'ï¼šæ²»ç–—æ‚£è€…æ¯”å¯¹ç…§æ‚£è€…ç»“å±€æ›´å¥½\\n\")\ncat(\"Win Ratio = èµ¢æ¬¡æ•° / è¾“æ¬¡æ•°\\n\")"
  },
  {
    "objectID": "index.html#ç¬¬äº”éƒ¨åˆ†äº‹ä»¶è´Ÿæ‹…åˆ†æ",
    "href": "index.html#ç¬¬äº”éƒ¨åˆ†äº‹ä»¶è´Ÿæ‹…åˆ†æ",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šäº‹ä»¶è´Ÿæ‹…åˆ†æ",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šäº‹ä»¶è´Ÿæ‹…åˆ†æ\n# è®¡ç®—å„ç»„åˆ†å¯¹å¤åˆç»“å±€çš„è´¡çŒ®\ncontribution &lt;- trial_data %&gt;%\n    filter(composite_event == 1) %&gt;%\n    group_by(treatment, event_type) %&gt;%\n    summarise(n = n(), .groups = \"drop\") %&gt;%\n    group_by(treatment) %&gt;%\n    mutate(prop = n / sum(n))\n\nggplot(contribution, aes(x = treatment, y = prop, fill = event_type)) +\n    geom_col() +\n    scale_fill_manual(values = c(\"#dc2626\", \"#f97316\", \"#eab308\")) +\n    labs(\n        title = \"å¤åˆç»“å±€ç»„åˆ†æ„æˆ\",\n        x = \"æ²»ç–—ç»„\", y = \"æ¯”ä¾‹\", fill = \"äº‹ä»¶ç±»å‹\"\n    ) +\n    scale_y_continuous(labels = scales::percent)"
  },
  {
    "objectID": "index.html#ç¬¬å…­éƒ¨åˆ†æ•æ„Ÿæ€§åˆ†æ",
    "href": "index.html#ç¬¬å…­éƒ¨åˆ†æ•æ„Ÿæ€§åˆ†æ",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šæ•æ„Ÿæ€§åˆ†æ",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šæ•æ„Ÿæ€§åˆ†æ\n\nä½¿ç”¨ç«äº‰é£é™©æ¡†æ¶\n# å°†å¤åˆç»“å±€ä½œä¸ºç«äº‰é£é™©åˆ†æ\nlibrary(cmprsk)\n\n# åˆ›å»ºç«äº‰é£é™©æ•°æ®\ntrial_data$event_num &lt;- as.numeric(trial_data$event_type) - 1 # 0=åˆ å¤±, 1=æ­»äº¡, 2=MI, 3=å’ä¸­\ntrial_data$treat_num &lt;- as.numeric(trial_data$treatment) - 1\n\n# Grayæ£€éªŒ\ngray_test &lt;- cuminc(trial_data$time, trial_data$event_num,\n    group = trial_data$treat_num\n)\n\n# ç»˜åˆ¶ç´¯ç§¯å‘ç—…ç‡\nplot(gray_test,\n    main = \"å„äº‹ä»¶ç´¯ç§¯å‘ç—…ç‡\",\n    xlab = \"æ—¶é—´ï¼ˆå¹´ï¼‰\", ylab = \"ç´¯ç§¯å‘ç—…ç‡\"\n)"
  },
  {
    "objectID": "index.html#ç¬¬ä¸ƒéƒ¨åˆ†æŠ¥å‘Šæ¨¡æ¿",
    "href": "index.html#ç¬¬ä¸ƒéƒ¨åˆ†æŠ¥å‘Šæ¨¡æ¿",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæŠ¥å‘Šæ¨¡æ¿",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæŠ¥å‘Šæ¨¡æ¿\n# ç”Ÿæˆå¤åˆç»“å±€åˆ†ææŠ¥å‘Š\ncat(\"=== å¤åˆç»“å±€åˆ†ææŠ¥å‘Š ===\\n\\n\")\n\ncat(\"1. æ ·æœ¬é‡:\", n, \"\\n\")\ncat(\"2. éšè®¿æ—¶é—´:\", round(median(trial_data$time), 2), \"å¹´ï¼ˆä¸­ä½æ•°ï¼‰\\n\\n\")\n\ncat(\"3. äº‹ä»¶å‘ç”Ÿ:\\n\")\nevent_summary &lt;- trial_data %&gt;%\n    group_by(treatment) %&gt;%\n    summarise(\n        N = n(),\n        å¤åˆç»“å±€ = sum(composite_event),\n        æ­»äº¡ = sum(event_type == \"æ­»äº¡\"),\n        MI = sum(event_type == \"MI\"),\n        å’ä¸­ = sum(event_type == \"å’ä¸­\")\n    )\nprint(event_summary)\n\ncat(\"\\n4. æ²»ç–—æ•ˆæœ:\\n\")\ncat(\n    \"å¤åˆç»“å±€ HR:\", round(exp(coef(cox_composite)), 3),\n    \"(95% CI:\", round(exp(confint(cox_composite))[1], 3), \"-\",\n    round(exp(confint(cox_composite))[2], 3), \")\\n\"\n)"
  },
  {
    "objectID": "index.html#rstanarm-ç®€ä»‹",
    "href": "index.html#rstanarm-ç®€ä»‹",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "rstanarm ç®€ä»‹",
    "text": "rstanarm ç®€ä»‹\nrstanarm æ˜¯Stançš„Ræ¥å£ï¼Œæä¾›ä¸ lm(), glm() ç±»ä¼¼çš„è¯­æ³•è¿›è¡Œè´å¶æ–¯å›å½’ã€‚æ— éœ€å­¦ä¹ Stanè¯­è¨€ï¼Œå³å¯è·å¾—è´å¶æ–¯æ¨æ–­çš„ä¼˜åŠ¿ã€‚\n\nä¸ºä»€ä¹ˆä½¿ç”¨è´å¶æ–¯æ–¹æ³•ï¼Ÿ\n\n\n\né¢‘ç‡å­¦æ´¾\nè´å¶æ–¯ä¼˜åŠ¿\n\n\n\n\nç‚¹ä¼°è®¡+ç½®ä¿¡åŒºé—´\nå®Œæ•´åéªŒåˆ†å¸ƒ\n\n\næ ·æœ¬é‡ä¾èµ–\nå¯èå…¥å…ˆéªŒçŸ¥è¯†\n\n\néš¾ä»¥è§£é‡Š\nç›´è§‚æ¦‚ç‡è§£é‡Š\n\n\nå¤šé‡æ¯”è¾ƒé—®é¢˜\nè‡ªç„¶å¤„ç†ä¸ç¡®å®šæ€§\n\n\n\n\n\nrstanarm ä¼˜åŠ¿\n\nç†Ÿæ‚‰çš„å…¬å¼è¯­æ³•\nè‡ªåŠ¨é€‰æ‹©åˆç†å…ˆéªŒ\nä¸tidyverseå…¼å®¹\nä¸°å¯Œçš„è¯Šæ–­å·¥å…·"
  },
  {
    "objectID": "index.html#å®‰è£…ä¸åŠ è½½-3",
    "href": "index.html#å®‰è£…ä¸åŠ è½½-3",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\nlibrary(rstanarm)\nlibrary(bayesplot)\nlibrary(ggplot2)\nlibrary(dplyr)\n\nset.seed(42)\ntheme_set(theme_bw(base_size = 12))\n\n# è®¾ç½®å¹¶è¡Œ\noptions(mc.cores = parallel::detectCores())"
  },
  {
    "objectID": "index.html#ç¬¬ä¸€éƒ¨åˆ†çº¿æ€§å›å½’",
    "href": "index.html#ç¬¬ä¸€éƒ¨åˆ†çº¿æ€§å›å½’",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šçº¿æ€§å›å½’",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šçº¿æ€§å›å½’\n\nåŸºæœ¬æ‹Ÿåˆ\n# ä½¿ç”¨mtcarsæ•°æ®\ndata(mtcars)\n\n# è´å¶æ–¯çº¿æ€§å›å½’\nbayes_lm &lt;- stan_glm(mpg ~ wt + hp,\n    data = mtcars,\n    family = gaussian(),\n    seed = 42,\n    refresh = 0\n) # é™é»˜è¾“å‡º\n\n# æŸ¥çœ‹ç»“æœ\nprint(bayes_lm)\n\n\nåéªŒåˆ†å¸ƒ\n# æå–åéªŒæ ·æœ¬\nposterior &lt;- as.data.frame(bayes_lm)\nhead(posterior)\n# åéªŒåˆ†å¸ƒå¯è§†åŒ–\nmcmc_dens(bayes_lm, pars = c(\"wt\", \"hp\")) +\n    labs(title = \"ç³»æ•°åéªŒåˆ†å¸ƒ\")\n\n\nä¸é¢‘ç‡æ³•æ¯”è¾ƒ\n# é¢‘ç‡lm\nfreq_lm &lt;- lm(mpg ~ wt + hp, data = mtcars)\n\n# æ¯”è¾ƒ\ncat(\"é¢‘ç‡æ³•ä¼°è®¡:\\n\")\nprint(coef(freq_lm))\ncat(\"\\nè´å¶æ–¯åéªŒå‡å€¼:\\n\")\nprint(coef(bayes_lm))"
  },
  {
    "objectID": "index.html#ç¬¬äºŒéƒ¨åˆ†å…ˆéªŒè®¾ç½®",
    "href": "index.html#ç¬¬äºŒéƒ¨åˆ†å…ˆéªŒè®¾ç½®",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šå…ˆéªŒè®¾ç½®",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šå…ˆéªŒè®¾ç½®\n\né»˜è®¤å…ˆéªŒ\n# æŸ¥çœ‹é»˜è®¤å…ˆéªŒ\nprior_summary(bayes_lm)\n\n\nè‡ªå®šä¹‰å…ˆéªŒ\n# ä½¿ç”¨ä¿¡æ¯æ€§å…ˆéªŒ\nbayes_lm_informed &lt;- stan_glm(\n    mpg ~ wt + hp,\n    data = mtcars,\n    prior = normal(c(-5, 0), c(2, 0.1)), # wtå’Œhpçš„å…ˆéªŒ\n    prior_intercept = normal(30, 10),\n    seed = 42,\n    refresh = 0\n)\n\n# æ¯”è¾ƒç»“æœ\ncat(\"é»˜è®¤å…ˆéªŒä¼°è®¡:\\n\")\nprint(coef(bayes_lm))\ncat(\"\\nä¿¡æ¯æ€§å…ˆéªŒä¼°è®¡:\\n\")\nprint(coef(bayes_lm_informed))\n\n\nå…ˆéªŒé¢„æµ‹æ£€æŸ¥\n# å…ˆéªŒé¢„æµ‹åˆ†å¸ƒ\nbayes_lm_prior &lt;- stan_glm(\n    mpg ~ wt + hp,\n    data = mtcars,\n    prior_PD = TRUE, # åªä»å…ˆéªŒé‡‡æ ·\n    seed = 42,\n    refresh = 0\n)\n\n# å¯è§†åŒ–\npp_check(bayes_lm_prior, nreps = 50) +\n    labs(\n        title = \"å…ˆéªŒé¢„æµ‹æ£€æŸ¥\",\n        subtitle = \"å…ˆéªŒæ˜¯å¦äº§ç”Ÿåˆç†çš„æ•°æ®èŒƒå›´ï¼Ÿ\"\n    )"
  },
  {
    "objectID": "index.html#ç¬¬ä¸‰éƒ¨åˆ†åéªŒæ¨æ–­",
    "href": "index.html#ç¬¬ä¸‰éƒ¨åˆ†åéªŒæ¨æ–­",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šåéªŒæ¨æ–­",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šåéªŒæ¨æ–­\n\nå¯ä¿¡åŒºé—´\n# åéªŒåŒºé—´\nposterior_interval(bayes_lm, prob = 0.95)\n\n\næ¦‚ç‡é™ˆè¿°\n# è®¡ç®—ç‰¹å®šæ¦‚ç‡\n# wtæ•ˆåº”å°äº-4çš„æ¦‚ç‡\nprob_wt &lt;- mean(posterior$wt &lt; -4)\ncat(\"P(wtç³»æ•° &lt; -4) =\", round(prob_wt, 3), \"\\n\")\n\n# hpæ•ˆåº”ä¸ºè´Ÿçš„æ¦‚ç‡\nprob_hp_neg &lt;- mean(posterior$hp &lt; 0)\ncat(\"P(hpç³»æ•° &lt; 0) =\", round(prob_hp_neg, 3), \"\\n\")\n\n\nåéªŒé¢„æµ‹\n# æ–°æ•°æ®é¢„æµ‹\nnew_car &lt;- data.frame(wt = 3, hp = 120)\n\n# åéªŒé¢„æµ‹åˆ†å¸ƒ\npred_post &lt;- posterior_predict(bayes_lm, newdata = new_car)\n\n# é¢„æµ‹åŒºé—´\ncat(\"é¢„æµ‹mpg (95%åŒºé—´):\\n\")\ncat(\"å‡å€¼:\", round(mean(pred_post), 2), \"\\n\")\ncat(\"åŒºé—´:\", round(quantile(pred_post, c(0.025, 0.975)), 2), \"\\n\")"
  },
  {
    "objectID": "index.html#ç¬¬å››éƒ¨åˆ†æ¨¡å‹è¯Šæ–­",
    "href": "index.html#ç¬¬å››éƒ¨åˆ†æ¨¡å‹è¯Šæ–­",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šæ¨¡å‹è¯Šæ–­",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šæ¨¡å‹è¯Šæ–­\n\nMCMCè¯Šæ–­\n# è½¨è¿¹å›¾\nmcmc_trace(bayes_lm, pars = c(\"wt\", \"hp\"))\n# R-hatå’Œæœ‰æ•ˆæ ·æœ¬é‡\nsummary(bayes_lm)[, c(\"Rhat\", \"n_eff\")]\n\n\nåéªŒé¢„æµ‹æ£€æŸ¥\n# åéªŒé¢„æµ‹ vs è§‚æµ‹æ•°æ®\npp_check(bayes_lm, nreps = 50) +\n    labs(\n        title = \"åéªŒé¢„æµ‹æ£€æŸ¥\",\n        subtitle = \"æ¨¡å‹èƒ½å¦é‡ç°è§‚æµ‹æ•°æ®çš„åˆ†å¸ƒï¼Ÿ\"\n    )"
  },
  {
    "objectID": "index.html#ç¬¬äº”éƒ¨åˆ†logisticå›å½’",
    "href": "index.html#ç¬¬äº”éƒ¨åˆ†logisticå›å½’",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šLogisticå›å½’",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šLogisticå›å½’\n# äºŒåˆ†ç±»ç»“å±€\nmtcars$am_factor &lt;- factor(mtcars$am)\n\nbayes_logit &lt;- stan_glm(\n    am_factor ~ wt + hp,\n    data = mtcars,\n    family = binomial(link = \"logit\"),\n    seed = 42,\n    refresh = 0\n)\n\nprint(bayes_logit)\n# ORå’Œå¯ä¿¡åŒºé—´\nor_posterior &lt;- exp(as.data.frame(bayes_logit)[, c(\"wt\", \"hp\")])\n\ncat(\"ORä¼°è®¡ (åéªŒä¸­ä½æ•°):\\n\")\ncat(\"wt:\", round(median(or_posterior$wt), 3), \"\\n\")\ncat(\"hp:\", round(median(or_posterior$hp), 3), \"\\n\")"
  },
  {
    "objectID": "index.html#ç¬¬å…­éƒ¨åˆ†æ¨¡å‹æ¯”è¾ƒ-1",
    "href": "index.html#ç¬¬å…­éƒ¨åˆ†æ¨¡å‹æ¯”è¾ƒ-1",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹æ¯”è¾ƒ",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹æ¯”è¾ƒ\n\nLOOäº¤å‰éªŒè¯\n# Leave-one-outäº¤å‰éªŒè¯\nloo_lm &lt;- loo(bayes_lm)\nprint(loo_lm)\n# æ¯”è¾ƒå¤šä¸ªæ¨¡å‹\nbayes_lm2 &lt;- stan_glm(mpg ~ wt + hp + disp,\n    data = mtcars,\n    seed = 42, refresh = 0\n)\n\nloo_lm2 &lt;- loo(bayes_lm2)\n\n# æ¨¡å‹æ¯”è¾ƒ\nloo_compare(loo_lm, loo_lm2)"
  },
  {
    "objectID": "index.html#ç¬¬ä¸ƒéƒ¨åˆ†å±‚æ¬¡æ¨¡å‹",
    "href": "index.html#ç¬¬ä¸ƒéƒ¨åˆ†å±‚æ¬¡æ¨¡å‹",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå±‚æ¬¡æ¨¡å‹",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå±‚æ¬¡æ¨¡å‹\n# åˆ†ç»„æ•°æ®\ndata(sleepstudy, package = \"lme4\")\n\n# è´å¶æ–¯æ··åˆæ•ˆåº”æ¨¡å‹\nbayes_hier &lt;- stan_lmer(\n    Reaction ~ Days + (Days | Subject),\n    data = sleepstudy,\n    seed = 42,\n    refresh = 0\n)\n\nprint(bayes_hier, digits = 2)\n# éšæœºæ•ˆåº”åéªŒ\nranef_post &lt;- as.data.frame(bayes_hier)\nranef_cols &lt;- grep(\"^b\\\\[\", names(ranef_post), value = TRUE)\ncat(\"éšæœºæ•ˆåº”æ•°é‡:\", length(ranef_cols), \"\\n\")"
  },
  {
    "objectID": "index.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-3",
    "href": "index.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-3",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n```{r eval=FALSE} # ===== åŸºæœ¬æ¨¡å‹ ===== library(rstanarm)"
  },
  {
    "objectID": "1074-quantile-regression.html",
    "href": "1074-quantile-regression.html",
    "title": "åˆ†ä½æ•°å›å½’å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "åˆ†ä½æ•°å›å½’ï¼ˆQuantile Regressionï¼‰ æ˜¯æ™®é€šæœ€å°äºŒä¹˜æ³•ï¼ˆOLSï¼‰çš„é‡è¦æ‰©å±•ã€‚OLSä¼°è®¡æ¡ä»¶å‡å€¼ï¼Œè€Œåˆ†ä½æ•°å›å½’å¯ä»¥ä¼°è®¡ä»»æ„æ¡ä»¶åˆ†ä½æ•°ï¼Œæ­ç¤ºè‡ªå˜é‡å¯¹å› å˜é‡åˆ†å¸ƒä¸åŒä½ç½®çš„å½±å“å·®å¼‚ã€‚\n\n\n\n\n\nåœºæ™¯\nOLSé—®é¢˜\nåˆ†ä½æ•°å›å½’ä¼˜åŠ¿\n\n\n\n\nå¼‚æ–¹å·®\nä¼°è®¡ä¸ç¨³å¥\nç¨³å¥ä¼°è®¡\n\n\nåæ€åˆ†å¸ƒ\nå‡å€¼ä¸ä»£è¡¨å…¸å‹\nå¯ä¼°è®¡ä¸­ä½æ•°\n\n\nå¼‚è´¨æ•ˆåº”\nåªçœ‹å¹³å‡æ•ˆåº”\næ­ç¤ºåˆ†å¸ƒå·®å¼‚\n\n\næç«¯å€¼å…³æ³¨\nä¿¡æ¯ä¸¢å¤±\nå¯ä¼°è®¡æç«¯åˆ†ä½æ•°\n\n\n\n\n\n\n\næ”¶å…¥ä¸å¹³ç­‰ç ”ç©¶ï¼ˆä¸åŒæ”¶å…¥æ°´å¹³çš„å½±å“ï¼‰\nåŒ»å­¦ç ”ç©¶ï¼ˆæç«¯BMIçš„é£é™©å› ç´ ï¼‰\næ•™è‚²ç ”ç©¶ï¼ˆé«˜åˆ†/ä½åˆ†å­¦ç”Ÿçš„å½±å“å› ç´ å·®å¼‚ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#åˆ†ä½æ•°å›å½’ç®€ä»‹",
    "href": "1074-quantile-regression.html#åˆ†ä½æ•°å›å½’ç®€ä»‹",
    "title": "åˆ†ä½æ•°å›å½’å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "åˆ†ä½æ•°å›å½’ï¼ˆQuantile Regressionï¼‰ æ˜¯æ™®é€šæœ€å°äºŒä¹˜æ³•ï¼ˆOLSï¼‰çš„é‡è¦æ‰©å±•ã€‚OLSä¼°è®¡æ¡ä»¶å‡å€¼ï¼Œè€Œåˆ†ä½æ•°å›å½’å¯ä»¥ä¼°è®¡ä»»æ„æ¡ä»¶åˆ†ä½æ•°ï¼Œæ­ç¤ºè‡ªå˜é‡å¯¹å› å˜é‡åˆ†å¸ƒä¸åŒä½ç½®çš„å½±å“å·®å¼‚ã€‚\n\n\n\n\n\nåœºæ™¯\nOLSé—®é¢˜\nåˆ†ä½æ•°å›å½’ä¼˜åŠ¿\n\n\n\n\nå¼‚æ–¹å·®\nä¼°è®¡ä¸ç¨³å¥\nç¨³å¥ä¼°è®¡\n\n\nåæ€åˆ†å¸ƒ\nå‡å€¼ä¸ä»£è¡¨å…¸å‹\nå¯ä¼°è®¡ä¸­ä½æ•°\n\n\nå¼‚è´¨æ•ˆåº”\nåªçœ‹å¹³å‡æ•ˆåº”\næ­ç¤ºåˆ†å¸ƒå·®å¼‚\n\n\næç«¯å€¼å…³æ³¨\nä¿¡æ¯ä¸¢å¤±\nå¯ä¼°è®¡æç«¯åˆ†ä½æ•°\n\n\n\n\n\n\n\næ”¶å…¥ä¸å¹³ç­‰ç ”ç©¶ï¼ˆä¸åŒæ”¶å…¥æ°´å¹³çš„å½±å“ï¼‰\nåŒ»å­¦ç ”ç©¶ï¼ˆæç«¯BMIçš„é£é™©å› ç´ ï¼‰\næ•™è‚²ç ”ç©¶ï¼ˆé«˜åˆ†/ä½åˆ†å­¦ç”Ÿçš„å½±å“å› ç´ å·®å¼‚ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#å®‰è£…ä¸åŠ è½½",
    "href": "1074-quantile-regression.html#å®‰è£…ä¸åŠ è½½",
    "title": "åˆ†ä½æ•°å›å½’å®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\nlibrary(quantreg)\nlibrary(ggplot2)\nlibrary(dplyr)\n\nset.seed(42)\ntheme_set(theme_bw(base_size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬ä¸€éƒ¨åˆ†åŸºæœ¬æ¦‚å¿µ",
    "href": "1074-quantile-regression.html#ç¬¬ä¸€éƒ¨åˆ†åŸºæœ¬æ¦‚å¿µ",
    "title": "åˆ†ä½æ•°å›å½’å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºæœ¬æ¦‚å¿µ",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºæœ¬æ¦‚å¿µ\n\næ¡ä»¶åˆ†ä½æ•°\n\n# æ¨¡æ‹Ÿå¼‚æ–¹å·®æ•°æ®\nn &lt;- 500\nx &lt;- runif(n, 0, 10)\ny &lt;- 2 + 3 * x + rnorm(n, 0, 1 + 0.5 * x) # æ–¹å·®éšxå¢åŠ \n\ndata &lt;- data.frame(x, y)\n\n# å¯è§†åŒ–\nggplot(data, aes(x = x, y = y)) +\n    geom_point(alpha = 0.5) +\n    geom_smooth(method = \"lm\", color = \"blue\", se = FALSE) +\n    labs(\n        title = \"å¼‚æ–¹å·®æ•°æ®ç¤ºä¾‹\",\n        subtitle = \"æ–¹å·®éšxå¢åŠ ï¼ŒOLSå¯èƒ½ä¸å¤Ÿç¨³å¥\"\n    )\n\n\n\n\n\n\n\n\n\n\nOLS vs åˆ†ä½æ•°å›å½’\n\n# OLSå›å½’\nols_fit &lt;- lm(y ~ x, data = data)\n\n# åˆ†ä½æ•°å›å½’ï¼ˆä¸­ä½æ•°ï¼‰\nqr_50 &lt;- rq(y ~ x, data = data, tau = 0.5)\n\n# æ¯”è¾ƒç³»æ•°\ncat(\"OLS ç³»æ•°:\\n\")\n\nOLS ç³»æ•°:\n\nprint(coef(ols_fit))\n\n(Intercept)           x \n   1.917869    2.977524 \n\ncat(\"\\nä¸­ä½æ•°å›å½’ç³»æ•°:\\n\")\n\n\nä¸­ä½æ•°å›å½’ç³»æ•°:\n\nprint(coef(qr_50))\n\n(Intercept)           x \n   2.036555    2.959343",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬äºŒéƒ¨åˆ†quantreg-åŒ…ä½¿ç”¨",
    "href": "1074-quantile-regression.html#ç¬¬äºŒéƒ¨åˆ†quantreg-åŒ…ä½¿ç”¨",
    "title": "åˆ†ä½æ•°å›å½’å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šquantreg åŒ…ä½¿ç”¨",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šquantreg åŒ…ä½¿ç”¨\n\nå•åˆ†ä½ç‚¹å›å½’\n\n# ç¬¬25ã€50ã€75åˆ†ä½æ•°å›å½’\nqr_25 &lt;- rq(y ~ x, data = data, tau = 0.25)\nqr_75 &lt;- rq(y ~ x, data = data, tau = 0.75)\n\n# æŸ¥çœ‹ç»“æœ\nsummary(qr_50)\n\n\nCall: rq(formula = y ~ x, tau = 0.5, data = data)\n\ntau: [1] 0.5\n\nCoefficients:\n            coefficients lower bd upper bd\n(Intercept) 2.03655      1.55747  2.24606 \nx           2.95934      2.91021  3.06285 \n\n\n\n\nå¤šåˆ†ä½ç‚¹åŒæ—¶ä¼°è®¡\n\n# åŒæ—¶ä¼°è®¡å¤šä¸ªåˆ†ä½ç‚¹\ntaus &lt;- c(0.1, 0.25, 0.5, 0.75, 0.9)\nqr_multi &lt;- rq(y ~ x, data = data, tau = taus)\n\n# æå–ç³»æ•°\ncoef_df &lt;- data.frame(\n    tau = taus,\n    intercept = coef(qr_multi)[1, ],\n    slope = coef(qr_multi)[2, ]\n)\nprint(coef_df)\n\n           tau intercept    slope\ntau= 0.10 0.10 0.7091794 2.329041\ntau= 0.25 0.25 1.2717881 2.677491\ntau= 0.50 0.50 2.0365548 2.959343\ntau= 0.75 0.75 2.6594357 3.314266\ntau= 0.90 0.90 3.4688429 3.570605\n\n\n\n\nå¯è§†åŒ–å¤šåˆ†ä½æ•°å›å½’çº¿\n\n# å‡†å¤‡é¢„æµ‹æ•°æ®\npred_data &lt;- expand.grid(\n    x = seq(0, 10, length.out = 100),\n    tau = taus\n)\n\n# é¢„æµ‹\npred_data$y &lt;- NA\nfor (t in taus) {\n    fit &lt;- rq(y ~ x, data = data, tau = t)\n    pred_data$y[pred_data$tau == t] &lt;- predict(fit,\n        newdata = data.frame(x = pred_data$x[pred_data$tau == t])\n    )\n}\n\nggplot() +\n    geom_point(data = data, aes(x = x, y = y), alpha = 0.3) +\n    geom_line(\n        data = pred_data, aes(x = x, y = y, color = factor(tau)),\n        linewidth = 1\n    ) +\n    scale_color_viridis_d(name = \"åˆ†ä½æ•°\") +\n    labs(\n        title = \"åˆ†ä½æ•°å›å½’ï¼šæ­ç¤ºå¼‚è´¨æ•ˆåº”\",\n        subtitle = \"ä¸åŒåˆ†ä½æ•°çš„æ–œç‡å·®å¼‚åæ˜ å¼‚æ–¹å·®\"\n    ) +\n    theme(legend.position = \"right\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬ä¸‰éƒ¨åˆ†ç»Ÿè®¡æ¨æ–­",
    "href": "1074-quantile-regression.html#ç¬¬ä¸‰éƒ¨åˆ†ç»Ÿè®¡æ¨æ–­",
    "title": "åˆ†ä½æ•°å›å½’å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šç»Ÿè®¡æ¨æ–­",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šç»Ÿè®¡æ¨æ–­\n\nç½®ä¿¡åŒºé—´\n\n# ä½¿ç”¨summaryè·å–ç½®ä¿¡åŒºé—´\nsummary_qr &lt;- summary(qr_50, se = \"boot\", R = 500)\nprint(summary_qr)\n\n\nCall: rq(formula = y ~ x, tau = 0.5, data = data)\n\ntau: [1] 0.5\n\nCoefficients:\n            Value    Std. Error t value  Pr(&gt;|t|)\n(Intercept)  2.03655  0.20938    9.72664  0.00000\nx            2.95934  0.05284   56.00639  0.00000\n\n\n\n\nç³»æ•°éšåˆ†ä½æ•°å˜åŒ–\n\n# ç»˜åˆ¶ç³»æ•°å˜åŒ–å›¾\ntaus_fine &lt;- seq(0.05, 0.95, by = 0.05)\nqr_fine &lt;- rq(y ~ x, data = data, tau = taus_fine)\n\n# æå–æ–œç‡å’Œç½®ä¿¡åŒºé—´\nslopes &lt;- data.frame(\n    tau = taus_fine,\n    estimate = coef(qr_fine)[2, ]\n)\n\n# æ·»åŠ OLSå‚è€ƒçº¿\nols_slope &lt;- coef(ols_fit)[2]\n\nggplot(slopes, aes(x = tau, y = estimate)) +\n    geom_line(color = \"#4f46e5\", linewidth = 1) +\n    geom_point(color = \"#4f46e5\") +\n    geom_hline(yintercept = ols_slope, linetype = \"dashed\", color = \"red\") +\n    annotate(\"text\",\n        x = 0.1, y = ols_slope + 0.1,\n        label = \"OLSä¼°è®¡\", color = \"red\"\n    ) +\n    labs(\n        title = \"æ–œç‡éšåˆ†ä½æ•°å˜åŒ–\",\n        x = \"åˆ†ä½æ•° (Ï„)\", y = \"æ–œç‡ä¼°è®¡\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬å››éƒ¨åˆ†æ¨¡å‹è¯Šæ–­",
    "href": "1074-quantile-regression.html#ç¬¬å››éƒ¨åˆ†æ¨¡å‹è¯Šæ–­",
    "title": "åˆ†ä½æ•°å›å½’å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šæ¨¡å‹è¯Šæ–­",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šæ¨¡å‹è¯Šæ–­\n\næ‹Ÿåˆä¼˜åº¦\n\n# ä¼ªRæ–¹ (Koenker-Machado)\nrho &lt;- function(u, tau) u * (tau - (u &lt; 0))\n\npseudo_r2 &lt;- function(model) {\n    tau &lt;- model$tau\n    y &lt;- model$y\n    fitted &lt;- fitted(model)\n    resid &lt;- y - fitted\n\n    # ç©ºæ¨¡å‹æ®‹å·®\n    null_resid &lt;- y - quantile(y, tau)\n\n    1 - sum(rho(resid, tau)) / sum(rho(null_resid, tau))\n}\n\ncat(\"ä¸­ä½æ•°å›å½’ Pseudo RÂ²:\", round(pseudo_r2(qr_50), 4), \"\\n\")\n\nä¸­ä½æ•°å›å½’ Pseudo RÂ²: 0.6577 \n\n\n\n\næ®‹å·®æ£€æŸ¥\n\n# æ®‹å·®å›¾\ndata$resid_50 &lt;- residuals(qr_50)\n\nggplot(data, aes(x = x, y = resid_50)) +\n    geom_point(alpha = 0.5) +\n    geom_hline(yintercept = 0, linetype = \"dashed\") +\n    geom_smooth(method = \"loess\", color = \"red\", se = FALSE) +\n    labs(title = \"ä¸­ä½æ•°å›å½’æ®‹å·®å›¾\", x = \"x\", y = \"æ®‹å·®\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬äº”éƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "href": "1074-quantile-regression.html#ç¬¬äº”éƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "title": "åˆ†ä½æ•°å›å½’å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹\n\nåŒ»å­¦ç ”ç©¶ï¼šBMIä¸è¡€å‹\n\n# æ¨¡æ‹ŸåŒ»å­¦æ•°æ®\nn &lt;- 800\nage &lt;- round(runif(n, 30, 70))\nbmi &lt;- rnorm(n, 25, 5)\nbmi &lt;- pmax(pmin(bmi, 45), 15) # é™åˆ¶èŒƒå›´\n\n# è¡€å‹ï¼šBMIæ•ˆåº”åœ¨é«˜è¡€å‹äººç¾¤æ›´å¼º\nbp_base &lt;- 90 + 0.3 * age + rnorm(n, 0, 8)\nbp_effect &lt;- 0.5 + 0.02 * bp_base # æ•ˆåº”ä¸åŸºçº¿ç›¸å…³\nsystolic_bp &lt;- bp_base + bp_effect * bmi + rnorm(n, 0, 5)\n\nmed_data &lt;- data.frame(age, bmi, systolic_bp)\n\n# åˆ†ä½æ•°å›å½’\nbp_taus &lt;- c(0.1, 0.25, 0.5, 0.75, 0.9)\nbp_qr &lt;- rq(systolic_bp ~ age + bmi, data = med_data, tau = bp_taus)\n\n# æŸ¥çœ‹BMIæ•ˆåº”\nbmi_effects &lt;- data.frame(\n    tau = bp_taus,\n    effect = coef(bp_qr)[\"bmi\", ],\n    label = c(\"ä½è¡€å‹\", \"è¾ƒä½\", \"ä¸­ä½\", \"è¾ƒé«˜\", \"é«˜è¡€å‹\")\n)\n\nggplot(bmi_effects, aes(x = tau, y = effect)) +\n    geom_line(color = \"#dc2626\", linewidth = 1) +\n    geom_point(color = \"#dc2626\", size = 3) +\n    geom_text(aes(label = label), vjust = -1, size = 3) +\n    labs(\n        title = \"BMIå¯¹è¡€å‹çš„å¼‚è´¨æ•ˆåº”\",\n        subtitle = \"BMIåœ¨é«˜è¡€å‹äººç¾¤ä¸­å½±å“æ›´å¤§\",\n        x = \"åˆ†ä½æ•°\", y = \"BMIæ•ˆåº” (mmHg/å•ä½BMI)\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬å…­éƒ¨åˆ†ä¸å…¶ä»–æ–¹æ³•æ¯”è¾ƒ",
    "href": "1074-quantile-regression.html#ç¬¬å…­éƒ¨åˆ†ä¸å…¶ä»–æ–¹æ³•æ¯”è¾ƒ",
    "title": "åˆ†ä½æ•°å›å½’å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šä¸å…¶ä»–æ–¹æ³•æ¯”è¾ƒ",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šä¸å…¶ä»–æ–¹æ³•æ¯”è¾ƒ\n\n# OLS vs ä¸­ä½æ•°å›å½’ vs ç¨³å¥å›å½’\nlibrary(MASS)\n\n# æ·»åŠ ç¦»ç¾¤å€¼\noutlier_data &lt;- data\noutlier_data$y[1:10] &lt;- outlier_data$y[1:10] + 50\n\n# ä¸‰ç§æ–¹æ³•\nols_outlier &lt;- lm(y ~ x, data = outlier_data)\nqr_outlier &lt;- rq(y ~ x, data = outlier_data, tau = 0.5)\nrlm_outlier &lt;- rlm(y ~ x, data = outlier_data)\n\ncat(\"æœ‰ç¦»ç¾¤å€¼æ—¶çš„æ–œç‡ä¼°è®¡:\\n\")\n\næœ‰ç¦»ç¾¤å€¼æ—¶çš„æ–œç‡ä¼°è®¡:\n\ncat(\"OLS:\", round(coef(ols_outlier)[2], 3), \"\\n\")\n\nOLS: 3.149 \n\ncat(\"ä¸­ä½æ•°å›å½’:\", round(coef(qr_outlier)[2], 3), \"\\n\")\n\nä¸­ä½æ•°å›å½’: 2.982 \n\ncat(\"ç¨³å¥å›å½’(rlm):\", round(coef(rlm_outlier)[2], 3), \"\\n\")\n\nç¨³å¥å›å½’(rlm): 3.023 \n\ncat(\"çœŸå®å€¼: 3\\n\")\n\nçœŸå®å€¼: 3",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "1074-quantile-regression.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "åˆ†ä½æ•°å›å½’å®Œå…¨æŒ‡å—",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# ===== åŸºæœ¬æ‹Ÿåˆ =====\nlibrary(quantreg)\n\n# å•åˆ†ä½ç‚¹\nfit &lt;- rq(y ~ x1 + x2, data = df, tau = 0.5)\n\n# å¤šåˆ†ä½ç‚¹\nfit_multi &lt;- rq(y ~ x1 + x2, data = df, tau = c(0.25, 0.5, 0.75))\n\n# ===== ç»Ÿè®¡æ¨æ–­ =====\nsummary(fit) # é»˜è®¤\nsummary(fit, se = \"boot\", R = 1000) # Bootstrap\n\n# ===== ç³»æ•°æå– =====\ncoef(fit)\nconfint(fit)\n\n# ===== é¢„æµ‹ =====\npredict(fit, newdata = new_df)\n\n# ===== å¯è§†åŒ– =====\nplot(summary(rq(y ~ x, tau = 1:9 / 10))) # ç³»æ•°å˜åŒ–å›¾",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#å°ç»“",
    "href": "1074-quantile-regression.html#å°ç»“",
    "title": "åˆ†ä½æ•°å›å½’å®Œå…¨æŒ‡å—",
    "section": "å°ç»“",
    "text": "å°ç»“\nåˆ†ä½æ•°å›å½’çš„æ ¸å¿ƒä»·å€¼ï¼š\n\nå¼‚è´¨æ€§åˆ†æï¼šæ­ç¤ºæ•ˆåº”åœ¨åˆ†å¸ƒä¸åŒä½ç½®çš„å·®å¼‚\nç¨³å¥ä¼°è®¡ï¼šå¯¹ç¦»ç¾¤å€¼å’Œéæ­£æ€åˆ†å¸ƒmoreç¨³å¥\nå®Œæ•´å›¾æ™¯ï¼šä¸ä»…çœ‹å‡å€¼ï¼Œè¿˜çœ‹æ•´ä¸ªæ¡ä»¶åˆ†å¸ƒ\n\n\né€‚ç”¨åœºæ™¯ï¼šå½“ä½ æ€€ç–‘æ•ˆåº”å¯èƒ½å› äººç¾¤å­ç»„è€Œå¼‚ï¼Œæˆ–æ•°æ®å­˜åœ¨å¼‚æ–¹å·®/åæ€æ—¶ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#å‚è€ƒèµ„æº",
    "href": "1074-quantile-regression.html#å‚è€ƒèµ„æº",
    "title": "åˆ†ä½æ•°å›å½’å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nquantreg å®˜æ–¹æ–‡æ¡£\nKoenker, R. (2005). Quantile Regression. Cambridge University Press.\nQuantile Regression in R",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#é›¶è†¨èƒ€æ¨¡å‹ç®€ä»‹",
    "href": "1074-quantile-regression.html#é›¶è†¨èƒ€æ¨¡å‹ç®€ä»‹",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "é›¶è†¨èƒ€æ¨¡å‹ç®€ä»‹",
    "text": "é›¶è†¨èƒ€æ¨¡å‹ç®€ä»‹\nå½“è®¡æ•°æ•°æ®ä¸­é›¶å€¼è¿‡å¤šæ—¶ï¼Œæ ‡å‡†çš„Poissonæˆ–è´ŸäºŒé¡¹å›å½’å¯èƒ½æ‹Ÿåˆä¸ä½³ã€‚é›¶è†¨èƒ€æ¨¡å‹å‡è®¾æ•°æ®æ¥è‡ªä¸¤ä¸ªè¿‡ç¨‹ï¼šä¸€ä¸ªäº§ç”Ÿâ€ç»“æ„æ€§é›¶â€ï¼Œå¦ä¸€ä¸ªäº§ç”Ÿæ ‡å‡†è®¡æ•°åˆ†å¸ƒã€‚\n\nä½•æ—¶ä½¿ç”¨é›¶è†¨èƒ€æ¨¡å‹ï¼Ÿ\n\n\n\næ•°æ®ç‰¹å¾\nå¯èƒ½åŸå› \nè§£å†³æ–¹æ¡ˆ\n\n\n\n\né›¶å€¼æ¯”ä¾‹è¿‡é«˜\nä¸¤ç±»äººç¾¤æ··åˆ\né›¶è†¨èƒ€æ¨¡å‹\n\n\néå‚ä¸è€…\nâ€œä»ä¸â€åšæŸäº‹çš„äºº\nZIP/ZINB\n\n\næµ‹é‡é™åˆ¶\næ— æ³•æ£€æµ‹åˆ°ä½å€¼\nHurdleæ¨¡å‹\n\n\n\n\n\næ¨¡å‹ç±»å‹\n\nZIPï¼šé›¶è†¨èƒ€Poisson\nZINBï¼šé›¶è†¨èƒ€è´ŸäºŒé¡¹ï¼ˆå¤„ç†è¿‡åº¦ç¦»æ•£ï¼‰\nHurdleï¼šä¸¤éƒ¨åˆ†æ¨¡å‹ï¼ˆè·¨è¶Šé›¶çš„éšœç¢ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#å®‰è£…ä¸åŠ è½½-1",
    "href": "1074-quantile-regression.html#å®‰è£…ä¸åŠ è½½-1",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\nlibrary(pscl)\nlibrary(MASS)\nlibrary(ggplot2)\nlibrary(dplyr)\n\nset.seed(42)\ntheme_set(theme_bw(base_size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬ä¸€éƒ¨åˆ†ç†è§£é›¶è†¨èƒ€",
    "href": "1074-quantile-regression.html#ç¬¬ä¸€éƒ¨åˆ†ç†è§£é›¶è†¨èƒ€",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šç†è§£é›¶è†¨èƒ€",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šç†è§£é›¶è†¨èƒ€\n\næ¨¡æ‹Ÿé›¶è†¨èƒ€æ•°æ®\n# æ¨¡æ‹Ÿå¸çƒŸæ•°æ®ï¼šéƒ¨åˆ†äººä»ä¸å¸çƒŸï¼Œå¸çƒŸè€…æœä»Poisson\nn &lt;- 500\nnever_smoker &lt;- rbinom(n, 1, 0.4) # 40%ä»ä¸å¸çƒŸ\ncigarettes &lt;- ifelse(never_smoker == 1, 0, rpois(n, lambda = 5))\n\n# æ·»åŠ åå˜é‡\nage &lt;- round(rnorm(n, 40, 10))\nmale &lt;- rbinom(n, 1, 0.5)\n\nsim_data &lt;- data.frame(cigarettes, age, male, never_smoker)\n\n# é›¶å€¼æ¯”ä¾‹\ncat(\"é›¶å€¼æ¯”ä¾‹:\", mean(cigarettes == 0), \"\\n\")\ncat(\"PoissonæœŸæœ›é›¶å€¼æ¯”ä¾‹:\", dpois(0, mean(cigarettes)), \"\\n\")\n\n\nå¯è§†åŒ–é›¶è†¨èƒ€\n# æ¯”è¾ƒè§‚å¯Ÿå€¼ä¸Poissonåˆ†å¸ƒ\nobs_counts &lt;- table(factor(cigarettes, levels = 0:max(cigarettes)))\npois_expected &lt;- dpois(0:max(cigarettes), lambda = mean(cigarettes)) * n\n\ncompare_df &lt;- data.frame(\n    count = 0:max(cigarettes),\n    observed = as.numeric(obs_counts),\n    expected = pois_expected\n) %&gt;%\n    tidyr::pivot_longer(-count, names_to = \"type\", values_to = \"frequency\")\n\nggplot(compare_df, aes(x = count, y = frequency, fill = type)) +\n    geom_col(position = \"dodge\", alpha = 0.8) +\n    scale_fill_manual(\n        values = c(\"#4f46e5\", \"#dc2626\"),\n        labels = c(\"PoissonæœŸæœ›\", \"è§‚å¯Ÿå€¼\")\n    ) +\n    labs(\n        title = \"é›¶è†¨èƒ€æ•°æ® vs Poissonåˆ†å¸ƒ\",\n        subtitle = \"è§‚å¯Ÿé›¶å€¼è¿œå¤šäºPoissoné¢„æœŸ\",\n        x = \"è®¡æ•°\", y = \"é¢‘æ•°\", fill = \"\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬äºŒéƒ¨åˆ†æ ‡å‡†è®¡æ•°æ¨¡å‹",
    "href": "1074-quantile-regression.html#ç¬¬äºŒéƒ¨åˆ†æ ‡å‡†è®¡æ•°æ¨¡å‹",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šæ ‡å‡†è®¡æ•°æ¨¡å‹",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šæ ‡å‡†è®¡æ•°æ¨¡å‹\n\nPoissonå›å½’\n# æ ‡å‡†Poisson\npois_fit &lt;- glm(cigarettes ~ age + male, data = sim_data, family = poisson)\nsummary(pois_fit)\n\n# æ£€æŸ¥è¿‡åº¦ç¦»æ•£\ncat(\"\\nè¿‡åº¦ç¦»æ•£æ£€éªŒ:\\n\")\ncat(\"æ®‹å·®åå·®:\", deviance(pois_fit), \"\\n\")\ncat(\"è‡ªç”±åº¦:\", df.residual(pois_fit), \"\\n\")\ncat(\"ç¦»æ•£å‚æ•°ä¼°è®¡:\", deviance(pois_fit) / df.residual(pois_fit), \"\\n\")\n\n\nè´ŸäºŒé¡¹å›å½’\n# è´ŸäºŒé¡¹å›å½’\nnb_fit &lt;- glm.nb(cigarettes ~ age + male, data = sim_data)\nsummary(nb_fit)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬ä¸‰éƒ¨åˆ†é›¶è†¨èƒ€poisson-zip",
    "href": "1074-quantile-regression.html#ç¬¬ä¸‰éƒ¨åˆ†é›¶è†¨èƒ€poisson-zip",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šé›¶è†¨èƒ€Poisson (ZIP)",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šé›¶è†¨èƒ€Poisson (ZIP)\n\næ‹ŸåˆZIPæ¨¡å‹\n# é›¶è†¨èƒ€Poisson\nzip_fit &lt;- zeroinfl(cigarettes ~ age + male | 1, data = sim_data)\nsummary(zip_fit)\næ¨¡å‹è§£è¯»ï¼š - Count modelï¼šè®¡æ•°éƒ¨åˆ†ï¼ˆç»™å®šä¸æ˜¯ç»“æ„é›¶ï¼‰ - Zero-inflation modelï¼šé›¶è†¨èƒ€éƒ¨åˆ†ï¼ˆæ˜¯ç»“æ„é›¶çš„æ¦‚ç‡ï¼‰\n\n\nZIPæ¨¡å‹æ‰©å±•\n# é›¶è†¨èƒ€éƒ¨åˆ†ä¹ŸåŒ…å«åå˜é‡\nzip_full &lt;- zeroinfl(cigarettes ~ age + male | age + male, data = sim_data)\nsummary(zip_full)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬å››éƒ¨åˆ†é›¶è†¨èƒ€è´ŸäºŒé¡¹-zinb",
    "href": "1074-quantile-regression.html#ç¬¬å››éƒ¨åˆ†é›¶è†¨èƒ€è´ŸäºŒé¡¹-zinb",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šé›¶è†¨èƒ€è´ŸäºŒé¡¹ (ZINB)",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šé›¶è†¨èƒ€è´ŸäºŒé¡¹ (ZINB)\n# æ·»åŠ è¿‡åº¦ç¦»æ•£\nsim_data$cigs_od &lt;- ifelse(\n    sim_data$never_smoker == 1, 0,\n    rnbinom(n, size = 2, mu = 5) # è´ŸäºŒé¡¹åˆ†å¸ƒ\n)\n\n# ZINBæ¨¡å‹\nzinb_fit &lt;- zeroinfl(cigs_od ~ age + male | 1, data = sim_data, dist = \"negbin\")\nsummary(zinb_fit)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬äº”éƒ¨åˆ†hurdleæ¨¡å‹",
    "href": "1074-quantile-regression.html#ç¬¬äº”éƒ¨åˆ†hurdleæ¨¡å‹",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šHurdleæ¨¡å‹",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šHurdleæ¨¡å‹\nHurdleæ¨¡å‹å°†æ•°æ®åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šé›¶vséé›¶ï¼ˆäºŒé¡¹éƒ¨åˆ†ï¼‰ï¼Œéé›¶å€¼çš„å¤§å°ï¼ˆæˆªæ–­è®¡æ•°éƒ¨åˆ†ï¼‰ã€‚\n# Hurdle Poisson\nhurdle_fit &lt;- hurdle(cigarettes ~ age + male | age + male, data = sim_data)\nsummary(hurdle_fit)\n\nZIP vs Hurdle åŒºåˆ«\n\n\n\nç‰¹ç‚¹\nZIP\nHurdle\n\n\n\n\né›¶æ¥æº\nç»“æ„é›¶ + é‡‡æ ·é›¶\nä»…â€è·¨æ â€å†³å®š\n\n\néé›¶éƒ¨åˆ†\nå®Œæ•´åˆ†å¸ƒ\næˆªæ–­åˆ†å¸ƒ\n\n\né€‚ç”¨åœºæ™¯\nä¸¤ç±»äººç¾¤æ··åˆ\nå‚ä¸/ä¸å‚ä¸å†³ç­–",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬å…­éƒ¨åˆ†æ¨¡å‹æ¯”è¾ƒ",
    "href": "1074-quantile-regression.html#ç¬¬å…­éƒ¨åˆ†æ¨¡å‹æ¯”è¾ƒ",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹æ¯”è¾ƒ",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹æ¯”è¾ƒ\n\nAIC/BICæ¯”è¾ƒ\nmodels &lt;- list(\n    Poisson = pois_fit,\n    NegBin = nb_fit,\n    ZIP = zip_fit,\n    Hurdle = hurdle_fit\n)\n\ncomparison &lt;- data.frame(\n    Model = names(models),\n    AIC = sapply(models, AIC),\n    BIC = sapply(models, BIC),\n    LogLik = sapply(models, logLik)\n)\n\ncomparison &lt;- comparison[order(comparison$AIC), ]\nprint(comparison)\n\n\nVuongæ£€éªŒ\n# ZIP vs Poisson\nvuong_test &lt;- vuong(zip_fit, pois_fit)\nprint(vuong_test)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "href": "1074-quantile-regression.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹\n\nåŒ»ç–—å°±è¯Šæ¬¡æ•°\n# æ¨¡æ‹ŸåŒ»ç–—å°±è¯Šæ•°æ®\nn &lt;- 1000\n\n# éƒ¨åˆ†äººå¥åº·ä¸éœ€å°±è¯Šï¼Œå…¶ä»–äººæ ¹æ®å¥åº·çŠ¶å†µå°±è¯Š\nhealthy &lt;- rbinom(n, 1, 0.3)\nchronic &lt;- rbinom(n, 1, 0.25)\nincome &lt;- rnorm(n, 50000, 15000)\n\n# å°±è¯Šæ¬¡æ•°\nlambda &lt;- exp(0.5 + 0.8 * chronic - 0.00001 * income)\nvisits &lt;- ifelse(healthy == 1, 0, rpois(n, lambda))\n\nhealth_data &lt;- data.frame(visits, chronic, income = income / 1000, healthy)\n\ncat(\"å°±è¯Šç»Ÿè®¡:\\n\")\ncat(\"é›¶å€¼æ¯”ä¾‹:\", mean(visits == 0), \"\\n\")\ncat(\"å¹³å‡å°±è¯Šæ¬¡æ•°:\", mean(visits), \"\\n\")\n# æ¯”è¾ƒæ¨¡å‹\npois_health &lt;- glm(visits ~ chronic + income, data = health_data, family = poisson)\nzip_health &lt;- zeroinfl(visits ~ chronic + income | 1, data = health_data)\nzinb_health &lt;- zeroinfl(visits ~ chronic + income | 1, data = health_data, dist = \"negbin\")\n\ncat(\"æ¨¡å‹AICæ¯”è¾ƒ:\\n\")\ncat(\"Poisson:\", AIC(pois_health), \"\\n\")\ncat(\"ZIP:\", AIC(zip_health), \"\\n\")\ncat(\"ZINB:\", AIC(zinb_health), \"\\n\")\n# æœ€ä½³æ¨¡å‹ç³»æ•°è§£é‡Š\ncat(\"\\nZIPæ¨¡å‹ç»“æœ:\\n\")\nsummary(zip_health)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-1",
    "href": "1074-quantile-regression.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-1",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n```{r eval=FALSE} # ===== é›¶è†¨èƒ€æ¨¡å‹ ===== library(pscl)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ipw-ç®€ä»‹",
    "href": "1074-quantile-regression.html#ipw-ç®€ä»‹",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "IPW ç®€ä»‹",
    "text": "IPW ç®€ä»‹\nå€’æ¦‚ç‡åŠ æƒï¼ˆInverse Probability Weighting, IPWï¼‰ æ˜¯å› æœæ¨æ–­ä¸­åˆ›å»ºä¼ªéšæœºåŒ–çš„å…³é”®æŠ€æœ¯ã€‚é€šè¿‡æ ¹æ®å€¾å‘æ€§å¾—åˆ†å¯¹è§‚æµ‹å€¼åŠ æƒï¼Œä½¿å¤„ç†ç»„å’Œå¯¹ç…§ç»„åœ¨åå˜é‡ä¸Šå¯æ¯”ã€‚\n\nIPW vs PSM\n\n\n\nç‰¹ç‚¹\nPSMåŒ¹é…\nIPWåŠ æƒ\n\n\n\n\næ ·æœ¬ä½¿ç”¨\nä¸¢å¼ƒæœªåŒ¹é…æ ·æœ¬\nä¿ç•™å…¨éƒ¨æ ·æœ¬\n\n\nç»Ÿè®¡æ•ˆç‡\nè¾ƒä½\nè¾ƒé«˜\n\n\næç«¯å€¼å¤„ç†\nè‡ªåŠ¨æ’é™¤\néœ€æƒé‡ä¿®å‰ª\n\n\nä¼°è®¡ç±»å‹\nATT\nATE/ATTå¯é€‰\n\n\n\n\n\næ ¸å¿ƒæ€æƒ³\n\nå¤„ç†æ¦‚ç‡ä½çš„äººæ¥å—å¤„ç† â†’ ä»£è¡¨æ›´å¤šåŒç±»äºº â†’ æƒé‡é«˜\nå¤„ç†æ¦‚ç‡é«˜çš„äººæ¥å—å¤„ç† â†’ ä»£è¡¨è¾ƒå°‘åŒç±»äºº â†’ æƒé‡ä½",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#å®‰è£…ä¸åŠ è½½-2",
    "href": "1074-quantile-regression.html#å®‰è£…ä¸åŠ è½½-2",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\nlibrary(WeightIt)\nlibrary(cobalt)\nlibrary(survey)\nlibrary(ggplot2)\nlibrary(dplyr)\n\nset.seed(42)\ntheme_set(theme_bw(base_size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬ä¸€éƒ¨åˆ†æ•°æ®æ¨¡æ‹Ÿ",
    "href": "1074-quantile-regression.html#ç¬¬ä¸€éƒ¨åˆ†æ•°æ®æ¨¡æ‹Ÿ",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ•°æ®æ¨¡æ‹Ÿ",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ•°æ®æ¨¡æ‹Ÿ\n# æ¨¡æ‹Ÿè§‚å¯Ÿæ€§ç ”ç©¶æ•°æ®\nn &lt;- 1000\n\n# åå˜é‡\nage &lt;- rnorm(n, 50, 10)\nfemale &lt;- rbinom(n, 1, 0.5)\ncomorbidity &lt;- rbinom(n, 1, 0.3)\nseverity &lt;- rnorm(n, 0, 1)\n\n# æ²»ç–—åˆ†é…ï¼ˆééšæœºï¼‰\nps_true &lt;- plogis(-2 + 0.03 * age + 0.5 * female - 0.8 * comorbidity + 0.6 * severity)\ntreatment &lt;- rbinom(n, 1, ps_true)\n\n# ç»“å±€ï¼ˆæœ‰å› æœæ•ˆåº”ï¼‰\ny0 &lt;- 50 + 0.3 * age - 5 * comorbidity + 2 * severity + rnorm(n, 0, 5)\ny1 &lt;- y0 + 10 # çœŸå®æ²»ç–—æ•ˆåº” = 10\noutcome &lt;- ifelse(treatment == 1, y1, y0)\n\ndata &lt;- data.frame(\n    age, female, comorbidity, severity, treatment, outcome\n)\n\ncat(\"æ²»ç–—ç»„æ¯”ä¾‹:\", mean(treatment), \"\\n\")\ncat(\"çœŸå®ATE: 10\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬äºŒéƒ¨åˆ†ä¼°è®¡å€¾å‘æ€§å¾—åˆ†",
    "href": "1074-quantile-regression.html#ç¬¬äºŒéƒ¨åˆ†ä¼°è®¡å€¾å‘æ€§å¾—åˆ†",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šä¼°è®¡å€¾å‘æ€§å¾—åˆ†",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šä¼°è®¡å€¾å‘æ€§å¾—åˆ†\n# æ‹Ÿåˆå€¾å‘æ€§å¾—åˆ†æ¨¡å‹\nps_model &lt;- glm(treatment ~ age + female + comorbidity + severity,\n    data = data, family = binomial\n)\n\ndata$ps &lt;- predict(ps_model, type = \"response\")\n\n# å¯è§†åŒ–\nggplot(data, aes(x = ps, fill = factor(treatment))) +\n    geom_density(alpha = 0.6) +\n    scale_fill_manual(\n        values = c(\"#3b82f6\", \"#dc2626\"),\n        labels = c(\"å¯¹ç…§ç»„\", \"æ²»ç–—ç»„\")\n    ) +\n    labs(\n        title = \"å€¾å‘æ€§å¾—åˆ†åˆ†å¸ƒ\",\n        x = \"å€¾å‘æ€§å¾—åˆ†\", y = \"å¯†åº¦\", fill = \"ç»„åˆ«\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬ä¸‰éƒ¨åˆ†è®¡ç®—ipwæƒé‡",
    "href": "1074-quantile-regression.html#ç¬¬ä¸‰éƒ¨åˆ†è®¡ç®—ipwæƒé‡",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šè®¡ç®—IPWæƒé‡",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šè®¡ç®—IPWæƒé‡\n\nATEæƒé‡\n# ATE: ä¼°è®¡æ€»ä½“å¹³å‡æ•ˆåº”\ndata$ipw_ate &lt;- ifelse(data$treatment == 1,\n    1 / data$ps,\n    1 / (1 - data$ps)\n)\n\n# æŸ¥çœ‹æƒé‡åˆ†å¸ƒ\nsummary(data$ipw_ate)\n\n\nATTæƒé‡\n# ATT: ä¼°è®¡æ²»ç–—ç»„çš„æ•ˆåº”\ndata$ipw_att &lt;- ifelse(data$treatment == 1,\n    1,\n    data$ps / (1 - data$ps)\n)\n\nsummary(data$ipw_att)\n\n\næƒé‡ä¿®å‰ª\n# æç«¯æƒé‡å¯èƒ½å¯¼è‡´ä¸ç¨³å®š\n# ä¿®å‰ªåˆ°99ç™¾åˆ†ä½\nthreshold &lt;- quantile(data$ipw_ate, 0.99)\ndata$ipw_trimmed &lt;- pmin(data$ipw_ate, threshold)\n\ncat(\"ä¿®å‰ªå‰æœ€å¤§æƒé‡:\", max(data$ipw_ate), \"\\n\")\ncat(\"ä¿®å‰ªåæœ€å¤§æƒé‡:\", max(data$ipw_trimmed), \"\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬å››éƒ¨åˆ†ä½¿ç”¨-weightit-åŒ…",
    "href": "1074-quantile-regression.html#ç¬¬å››éƒ¨åˆ†ä½¿ç”¨-weightit-åŒ…",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šä½¿ç”¨ WeightIt åŒ…",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šä½¿ç”¨ WeightIt åŒ…\n# WeightIt ç®€åŒ–æƒé‡è®¡ç®—\nW &lt;- weightit(treatment ~ age + female + comorbidity + severity,\n    data = data, method = \"ps\", estimand = \"ATE\"\n)\n\nsummary(W)\n\nå¹³è¡¡æ£€éªŒ\n# cobaltåŒ…æ£€æŸ¥å¹³è¡¡\nbal.tab(W, stats = c(\"m\", \"v\"), thresholds = c(m = 0.1))\n# å¯è§†åŒ–å¹³è¡¡\nlove.plot(W, thresholds = c(m = 0.1))",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬äº”éƒ¨åˆ†åŠ æƒä¼°è®¡å› æœæ•ˆåº”",
    "href": "1074-quantile-regression.html#ç¬¬äº”éƒ¨åˆ†åŠ æƒä¼°è®¡å› æœæ•ˆåº”",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šåŠ æƒä¼°è®¡å› æœæ•ˆåº”",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šåŠ æƒä¼°è®¡å› æœæ•ˆåº”\n\nç®€å•åŠ æƒå‡å€¼å·®\n# æ‰‹åŠ¨è®¡ç®—\nweighted_mean_treat &lt;- weighted.mean(\n    data$outcome[data$treatment == 1],\n    data$ipw_ate[data$treatment == 1]\n)\nweighted_mean_control &lt;- weighted.mean(\n    data$outcome[data$treatment == 0],\n    data$ipw_ate[data$treatment == 0]\n)\n\nate_ipw &lt;- weighted_mean_treat - weighted_mean_control\ncat(\"IPWä¼°è®¡çš„ATE:\", round(ate_ipw, 2), \"\\n\")\ncat(\"çœŸå®ATE: 10\\n\")\n\n\nä½¿ç”¨surveyåŒ…\n# åˆ›å»ºåŠ æƒè®¾è®¡\ndesign &lt;- svydesign(ids = ~1, weights = ~ipw_ate, data = data)\n\n# åŠ æƒå›å½’\nmodel_weighted &lt;- svyglm(outcome ~ treatment, design = design)\nsummary(model_weighted)\n\n\nåŒç¨³å¥ä¼°è®¡\n# ç»“åˆIPWå’Œç»“å±€å›å½’\nmodel_dr &lt;- svyglm(outcome ~ treatment + age + female + comorbidity + severity,\n    design = design\n)\nsummary(model_dr)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬å…­éƒ¨åˆ†è¾¹é™…ç»“æ„æ¨¡å‹",
    "href": "1074-quantile-regression.html#ç¬¬å…­éƒ¨åˆ†è¾¹é™…ç»“æ„æ¨¡å‹",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šè¾¹é™…ç»“æ„æ¨¡å‹",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šè¾¹é™…ç»“æ„æ¨¡å‹\nè¾¹é™…ç»“æ„æ¨¡å‹ï¼ˆMSMï¼‰ç”¨äºå¤„ç†æ—¶å˜å¤„ç†å’Œæ—¶å˜æ··æ‚ã€‚\n# ç®€åŒ–ç¤ºä¾‹ï¼šç¨³å®šæƒé‡\n# ç¨³å®šæƒé‡ = P(A) / P(A|X)\np_treat &lt;- mean(data$treatment)\ndata$sw &lt;- ifelse(data$treatment == 1,\n    p_treat / data$ps,\n    (1 - p_treat) / (1 - data$ps)\n)\n\nsummary(data$sw)\n# ä½¿ç”¨ç¨³å®šæƒé‡\ndesign_sw &lt;- svydesign(ids = ~1, weights = ~sw, data = data)\nmsm_fit &lt;- svyglm(outcome ~ treatment, design = design_sw)\nsummary(msm_fit)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹-1",
    "href": "1074-quantile-regression.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹-1",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹\n\nè¯ç‰©æ²»ç–—æ•ˆæœè¯„ä¼°\n# æ¨¡æ‹Ÿè¯ç‰©ç ”ç©¶\nn &lt;- 2000\n\n# æ‚£è€…ç‰¹å¾\nage &lt;- round(rnorm(n, 60, 12))\ndiabetes &lt;- rbinom(n, 1, 0.25)\nhypertension &lt;- rbinom(n, 1, 0.4)\nprevious_event &lt;- rbinom(n, 1, 0.15)\nldl &lt;- rnorm(n, 130, 30)\n\n# è¯ç‰©åˆ†é…ï¼ˆåŒ»ç”Ÿåå¥½ + æ‚£è€…ç‰¹å¾ï¼‰\nps &lt;- plogis(-1 + 0.02 * age + 0.5 * diabetes + 0.3 * hypertension +\n    0.8 * previous_event + 0.01 * ldl)\ndrug &lt;- rbinom(n, 1, ps)\n\n# å¿ƒè¡€ç®¡äº‹ä»¶é£é™©\nbaseline_risk &lt;- plogis(-3 + 0.03 * age + 0.5 * diabetes + 0.4 * hypertension +\n    previous_event + 0.01 * ldl)\n# è¯ç‰©é™ä½é£é™©\ndrug_effect &lt;- -0.3\nevent_prob &lt;- plogis(qlogis(baseline_risk) + drug_effect * drug)\ncv_event &lt;- rbinom(n, 1, event_prob)\n\ndrug_data &lt;- data.frame(age, diabetes, hypertension, previous_event, ldl, drug, cv_event)\n\ncat(\"è¯ç‰©ä½¿ç”¨ç‡:\", mean(drug), \"\\n\")\ncat(\"äº‹ä»¶å‘ç”Ÿç‡:\", mean(cv_event), \"\\n\")\n# IPWåˆ†æ\nW_drug &lt;- weightit(drug ~ age + diabetes + hypertension + previous_event + ldl,\n    data = drug_data, method = \"ps\", estimand = \"ATE\"\n)\n\n# æ£€æŸ¥å¹³è¡¡\nbal.tab(W_drug, stats = \"m\", thresholds = c(m = 0.1))\n# åŠ æƒlogisticå›å½’\ndrug_data$weights &lt;- W_drug$weights\ndesign_drug &lt;- svydesign(ids = ~1, weights = ~weights, data = drug_data)\n\ndrug_effect_model &lt;- svyglm(cv_event ~ drug, design = design_drug, family = quasibinomial)\nsummary(drug_effect_model)\n\n# è®¡ç®—é£é™©æ¯”\nor &lt;- exp(coef(drug_effect_model)[\"drug\"])\ncat(\"\\nè¯ç‰©çš„OR:\", round(or, 3), \"\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-2",
    "href": "1074-quantile-regression.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-2",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n```{r eval=FALSE} # ===== WeightIt ===== library(WeightIt)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#å¤åˆç»“å±€ç®€ä»‹",
    "href": "1074-quantile-regression.html#å¤åˆç»“å±€ç®€ä»‹",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å¤åˆç»“å±€ç®€ä»‹",
    "text": "å¤åˆç»“å±€ç®€ä»‹\nå¤åˆç»“å±€ï¼ˆComposite Endpointï¼‰ å°†å¤šä¸ªä¸´åºŠäº‹ä»¶åˆå¹¶ä¸ºå•ä¸€ç»ˆç‚¹ï¼Œå¸¸è§äºå¿ƒè¡€ç®¡å’Œè‚¿ç˜¤ä¸´åºŠè¯•éªŒã€‚å…¸å‹ä¾‹å­åŒ…æ‹¬MACEï¼ˆä¸»è¦ä¸è‰¯å¿ƒè¡€ç®¡äº‹ä»¶ï¼‰å’ŒDFSï¼ˆæ— ç—…ç”Ÿå­˜ï¼‰ã€‚\n\nä¸ºä»€ä¹ˆä½¿ç”¨å¤åˆç»“å±€ï¼Ÿ\n\n\n\nä¼˜åŠ¿\nè¯´æ˜\n\n\n\n\næé«˜äº‹ä»¶ç‡\nå¢åŠ ç»Ÿè®¡æ•ˆåŠ›\n\n\nå‡å°‘æ ·æœ¬é‡\né™ä½è¯•éªŒæˆæœ¬\n\n\næ•æ‰å…¨é¢æ•ˆæœ\nå¤šæ–¹é¢è¯„ä¼°æ²»ç–—\n\n\n\n\n\nä¸»è¦æŒ‘æˆ˜\n\nç»„åˆ†äº‹ä»¶é‡è¦ç¨‹åº¦ä¸åŒ\næ•ˆåº”æ–¹å‘å¯èƒ½ä¸ä¸€è‡´\nè§£é‡Šå¤æ‚",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#å®‰è£…ä¸åŠ è½½-3",
    "href": "1074-quantile-regression.html#å®‰è£…ä¸åŠ è½½-3",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\nlibrary(survival)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(tidyr)\n\nset.seed(42)\ntheme_set(theme_bw(base_size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬ä¸€éƒ¨åˆ†æ¨¡æ‹Ÿå¤åˆç»“å±€æ•°æ®",
    "href": "1074-quantile-regression.html#ç¬¬ä¸€éƒ¨åˆ†æ¨¡æ‹Ÿå¤åˆç»“å±€æ•°æ®",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ¨¡æ‹Ÿå¤åˆç»“å±€æ•°æ®",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ¨¡æ‹Ÿå¤åˆç»“å±€æ•°æ®\n# æ¨¡æ‹Ÿå¿ƒè¡€ç®¡è¯•éªŒæ•°æ®\nn &lt;- 1000\n\n# æ²»ç–—åˆ†é…\ntreatment &lt;- rep(c(0, 1), each = n / 2)\n\n# ä¸‰ä¸ªç»„åˆ†äº‹ä»¶çš„é£é™©\n# æ­»äº¡ï¼šæ²»ç–—é™ä½é£é™©\ndeath_hazard &lt;- ifelse(treatment == 1, 0.02, 0.03)\n# MIï¼šæ²»ç–—ç•¥é™é£é™©\nmi_hazard &lt;- ifelse(treatment == 1, 0.04, 0.05)\n# å’ä¸­ï¼šæ²»ç–—æ— æ•ˆ\nstroke_hazard &lt;- 0.02\n\n# ç”Ÿæˆäº‹ä»¶æ—¶é—´ï¼ˆæŒ‡æ•°åˆ†å¸ƒï¼‰\ntime_death &lt;- rexp(n, death_hazard)\ntime_mi &lt;- rexp(n, mi_hazard)\ntime_stroke &lt;- rexp(n, stroke_hazard)\n\n# åˆ å¤±æ—¶é—´\ncensor_time &lt;- runif(n, 3, 5)\n\n# ç¡®å®šé¦–å‘äº‹ä»¶\nfirst_event_time &lt;- pmin(time_death, time_mi, time_stroke, censor_time)\nevent_type &lt;- case_when(\n    first_event_time == censor_time ~ 0, # åˆ å¤±\n    first_event_time == time_death ~ 1, # æ­»äº¡\n    first_event_time == time_mi ~ 2, # MI\n    first_event_time == time_stroke ~ 3 # å’ä¸­\n)\n\n# å¤åˆç»“å±€\ncomposite_event &lt;- as.numeric(event_type &gt; 0)\n\ntrial_data &lt;- data.frame(\n    id = 1:n,\n    treatment = factor(treatment, labels = c(\"æ§åˆ¶\", \"æ²»ç–—\")),\n    time = first_event_time,\n    composite_event,\n    event_type = factor(event_type, labels = c(\"åˆ å¤±\", \"æ­»äº¡\", \"MI\", \"å’ä¸­\"))\n)\n\n# æè¿°æ€§ç»Ÿè®¡\ncat(\"äº‹ä»¶åˆ†å¸ƒ:\\n\")\nprint(table(trial_data$treatment, trial_data$event_type))",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬äºŒéƒ¨åˆ†ä¼ ç»Ÿå¤åˆç»“å±€åˆ†æ",
    "href": "1074-quantile-regression.html#ç¬¬äºŒéƒ¨åˆ†ä¼ ç»Ÿå¤åˆç»“å±€åˆ†æ",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šä¼ ç»Ÿå¤åˆç»“å±€åˆ†æ",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šä¼ ç»Ÿå¤åˆç»“å±€åˆ†æ\n\nKaplan-Meieræ›²çº¿\n# å¤åˆç»“å±€çš„KMåˆ†æ\nsurv_obj &lt;- Surv(trial_data$time, trial_data$composite_event)\nkm_fit &lt;- survfit(surv_obj ~ treatment, data = trial_data)\n\n# å¯è§†åŒ–\nplot(km_fit,\n    col = c(\"#3b82f6\", \"#dc2626\"), lwd = 2,\n    xlab = \"æ—¶é—´ï¼ˆå¹´ï¼‰\", ylab = \"æ— äº‹ä»¶ç”Ÿå­˜ç‡\",\n    main = \"å¤åˆç»“å±€ï¼šæ— MACEç”Ÿå­˜æ›²çº¿\"\n)\nlegend(\"bottomleft\", c(\"æ§åˆ¶ç»„\", \"æ²»ç–—ç»„\"), col = c(\"#3b82f6\", \"#dc2626\"), lwd = 2)\n\n\nCoxå›å½’\n# Coxæ¨¡å‹\ncox_composite &lt;- coxph(Surv(time, composite_event) ~ treatment, data = trial_data)\nsummary(cox_composite)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬ä¸‰éƒ¨åˆ†ç»„åˆ†åˆ†æ",
    "href": "1074-quantile-regression.html#ç¬¬ä¸‰éƒ¨åˆ†ç»„åˆ†åˆ†æ",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šç»„åˆ†åˆ†æ",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šç»„åˆ†åˆ†æ\n\nå„ç»„åˆ†çš„ç‹¬ç«‹åˆ†æ\n# åˆ†åˆ«åˆ†ææ¯ä¸ªç»„åˆ†\ncomponents &lt;- c(\"æ­»äº¡\", \"MI\", \"å’ä¸­\")\ncomponent_results &lt;- list()\n\nfor (comp in components) {\n    trial_data[[paste0(\"event_\", comp)]] &lt;- as.numeric(trial_data$event_type == comp)\n\n    # Coxæ¨¡å‹\n    formula &lt;- as.formula(paste0(\"Surv(time, event_\", comp, \") ~ treatment\"))\n    fit &lt;- coxph(formula, data = trial_data)\n\n    component_results[[comp]] &lt;- data.frame(\n        Component = comp,\n        HR = exp(coef(fit)),\n        CI_lower = exp(confint(fit))[1],\n        CI_upper = exp(confint(fit))[2],\n        p_value = summary(fit)$coefficients[5]\n    )\n}\n\nresults_df &lt;- do.call(rbind, component_results)\nprint(results_df)\n\n\næ£®æ—å›¾\n# æ·»åŠ å¤åˆç»“å±€ç»“æœ\ncomposite_hr &lt;- exp(coef(cox_composite))\ncomposite_ci &lt;- exp(confint(cox_composite))\n\nall_results &lt;- rbind(\n    results_df,\n    data.frame(\n        Component = \"å¤åˆç»“å±€\",\n        HR = composite_hr,\n        CI_lower = composite_ci[1],\n        CI_upper = composite_ci[2],\n        p_value = summary(cox_composite)$coefficients[5]\n    )\n)\n\n# æ£®æ—å›¾\nggplot(all_results, aes(x = HR, y = Component)) +\n    geom_point(size = 3) +\n    geom_errorbarh(aes(xmin = CI_lower, xmax = CI_upper), height = 0.2) +\n    geom_vline(xintercept = 1, linetype = \"dashed\", color = \"gray50\") +\n    scale_x_log10() +\n    labs(\n        title = \"å¤åˆç»“å±€åŠç»„åˆ†åˆ†æ\",\n        x = \"é£é™©æ¯” (95% CI)\", y = \"\"\n    ) +\n    theme(axis.text.y = element_text(size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬å››éƒ¨åˆ†win-ratioæ–¹æ³•",
    "href": "1074-quantile-regression.html#ç¬¬å››éƒ¨åˆ†win-ratioæ–¹æ³•",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šWin Ratioæ–¹æ³•",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šWin Ratioæ–¹æ³•\nWin Ratioæ˜¯å¤„ç†æœ‰åºå¤åˆç»“å±€çš„æ–°æ–¹æ³•ï¼Œè€ƒè™‘äº‹ä»¶çš„ä¸´åºŠé‡è¦æ€§ã€‚\n\nWin RatioåŸç†\n# æ‰‹åŠ¨è®¡ç®—Win Ratio\n# æŒ‰é‡è¦æ€§æ’åºï¼šæ­»äº¡ &gt; MI &gt; å’ä¸­\n\ncalculate_win_ratio &lt;- function(data) {\n    treat &lt;- data[data$treatment == \"æ²»ç–—\", ]\n    control &lt;- data[data$treatment == \"æ§åˆ¶\", ]\n\n    wins &lt;- 0\n    losses &lt;- 0\n    ties &lt;- 0\n\n    for (i in 1:nrow(treat)) {\n        for (j in 1:nrow(control)) {\n            # æ¯”è¾ƒæ­»äº¡\n            if (treat$event_æ­»äº¡[i] == 0 && control$event_æ­»äº¡[j] == 1 &&\n                treat$time[i] &gt; control$time[j]) {\n                wins &lt;- wins + 1\n            } else if (treat$event_æ­»äº¡[i] == 1 && control$event_æ­»äº¡[j] == 0 &&\n                treat$time[i] &lt; control$time[j]) {\n                losses &lt;- losses + 1\n            } else {\n                # ç»§ç»­æ¯”è¾ƒMIï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼‰\n                if (treat$event_MI[i] == 0 && control$event_MI[j] == 1) {\n                    wins &lt;- wins + 1\n                } else if (treat$event_MI[i] == 1 && control$event_MI[j] == 0) {\n                    losses &lt;- losses + 1\n                } else {\n                    ties &lt;- ties + 1\n                }\n            }\n        }\n    }\n\n    list(\n        wins = wins, losses = losses, ties = ties,\n        win_ratio = wins / losses\n    )\n}\n\n# ç®€åŒ–ç¤ºä¾‹ï¼ˆå®Œæ•´ç‰ˆéœ€è¦æ›´å¤æ‚çš„é…å¯¹é€»è¾‘ï¼‰\ncat(\"Win Ratioæ¦‚å¿µæ¼”ç¤º:\\n\")\ncat(\"æ²»ç–—ç»„'èµ¢'ï¼šæ²»ç–—æ‚£è€…æ¯”å¯¹ç…§æ‚£è€…ç»“å±€æ›´å¥½\\n\")\ncat(\"Win Ratio = èµ¢æ¬¡æ•° / è¾“æ¬¡æ•°\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬äº”éƒ¨åˆ†äº‹ä»¶è´Ÿæ‹…åˆ†æ",
    "href": "1074-quantile-regression.html#ç¬¬äº”éƒ¨åˆ†äº‹ä»¶è´Ÿæ‹…åˆ†æ",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šäº‹ä»¶è´Ÿæ‹…åˆ†æ",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šäº‹ä»¶è´Ÿæ‹…åˆ†æ\n# è®¡ç®—å„ç»„åˆ†å¯¹å¤åˆç»“å±€çš„è´¡çŒ®\ncontribution &lt;- trial_data %&gt;%\n    filter(composite_event == 1) %&gt;%\n    group_by(treatment, event_type) %&gt;%\n    summarise(n = n(), .groups = \"drop\") %&gt;%\n    group_by(treatment) %&gt;%\n    mutate(prop = n / sum(n))\n\nggplot(contribution, aes(x = treatment, y = prop, fill = event_type)) +\n    geom_col() +\n    scale_fill_manual(values = c(\"#dc2626\", \"#f97316\", \"#eab308\")) +\n    labs(\n        title = \"å¤åˆç»“å±€ç»„åˆ†æ„æˆ\",\n        x = \"æ²»ç–—ç»„\", y = \"æ¯”ä¾‹\", fill = \"äº‹ä»¶ç±»å‹\"\n    ) +\n    scale_y_continuous(labels = scales::percent)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬å…­éƒ¨åˆ†æ•æ„Ÿæ€§åˆ†æ",
    "href": "1074-quantile-regression.html#ç¬¬å…­éƒ¨åˆ†æ•æ„Ÿæ€§åˆ†æ",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šæ•æ„Ÿæ€§åˆ†æ",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šæ•æ„Ÿæ€§åˆ†æ\n\nä½¿ç”¨ç«äº‰é£é™©æ¡†æ¶\n# å°†å¤åˆç»“å±€ä½œä¸ºç«äº‰é£é™©åˆ†æ\nlibrary(cmprsk)\n\n# åˆ›å»ºç«äº‰é£é™©æ•°æ®\ntrial_data$event_num &lt;- as.numeric(trial_data$event_type) - 1 # 0=åˆ å¤±, 1=æ­»äº¡, 2=MI, 3=å’ä¸­\ntrial_data$treat_num &lt;- as.numeric(trial_data$treatment) - 1\n\n# Grayæ£€éªŒ\ngray_test &lt;- cuminc(trial_data$time, trial_data$event_num,\n    group = trial_data$treat_num\n)\n\n# ç»˜åˆ¶ç´¯ç§¯å‘ç—…ç‡\nplot(gray_test,\n    main = \"å„äº‹ä»¶ç´¯ç§¯å‘ç—…ç‡\",\n    xlab = \"æ—¶é—´ï¼ˆå¹´ï¼‰\", ylab = \"ç´¯ç§¯å‘ç—…ç‡\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬ä¸ƒéƒ¨åˆ†æŠ¥å‘Šæ¨¡æ¿",
    "href": "1074-quantile-regression.html#ç¬¬ä¸ƒéƒ¨åˆ†æŠ¥å‘Šæ¨¡æ¿",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæŠ¥å‘Šæ¨¡æ¿",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæŠ¥å‘Šæ¨¡æ¿\n# ç”Ÿæˆå¤åˆç»“å±€åˆ†ææŠ¥å‘Š\ncat(\"=== å¤åˆç»“å±€åˆ†ææŠ¥å‘Š ===\\n\\n\")\n\ncat(\"1. æ ·æœ¬é‡:\", n, \"\\n\")\ncat(\"2. éšè®¿æ—¶é—´:\", round(median(trial_data$time), 2), \"å¹´ï¼ˆä¸­ä½æ•°ï¼‰\\n\\n\")\n\ncat(\"3. äº‹ä»¶å‘ç”Ÿ:\\n\")\nevent_summary &lt;- trial_data %&gt;%\n    group_by(treatment) %&gt;%\n    summarise(\n        N = n(),\n        å¤åˆç»“å±€ = sum(composite_event),\n        æ­»äº¡ = sum(event_type == \"æ­»äº¡\"),\n        MI = sum(event_type == \"MI\"),\n        å’ä¸­ = sum(event_type == \"å’ä¸­\")\n    )\nprint(event_summary)\n\ncat(\"\\n4. æ²»ç–—æ•ˆæœ:\\n\")\ncat(\n    \"å¤åˆç»“å±€ HR:\", round(exp(coef(cox_composite)), 3),\n    \"(95% CI:\", round(exp(confint(cox_composite))[1], 3), \"-\",\n    round(exp(confint(cox_composite))[2], 3), \")\\n\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-3",
    "href": "1074-quantile-regression.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-3",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n```{r eval=FALSE} # ===== å¤åˆç»“å±€ç”Ÿå­˜åˆ†æ ===== library(survival)\nsurv_obj &lt;- Surv(time, composite_event) coxph(surv_obj ~ treatment, data = df)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#rstanarm-ç®€ä»‹",
    "href": "1074-quantile-regression.html#rstanarm-ç®€ä»‹",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "rstanarm ç®€ä»‹",
    "text": "rstanarm ç®€ä»‹\nrstanarm æ˜¯Stançš„Ræ¥å£ï¼Œæä¾›ä¸ lm(), glm() ç±»ä¼¼çš„è¯­æ³•è¿›è¡Œè´å¶æ–¯å›å½’ã€‚æ— éœ€å­¦ä¹ Stanè¯­è¨€ï¼Œå³å¯è·å¾—è´å¶æ–¯æ¨æ–­çš„ä¼˜åŠ¿ã€‚\n\nä¸ºä»€ä¹ˆä½¿ç”¨è´å¶æ–¯æ–¹æ³•ï¼Ÿ\n\n\n\né¢‘ç‡å­¦æ´¾\nè´å¶æ–¯ä¼˜åŠ¿\n\n\n\n\nç‚¹ä¼°è®¡+ç½®ä¿¡åŒºé—´\nå®Œæ•´åéªŒåˆ†å¸ƒ\n\n\næ ·æœ¬é‡ä¾èµ–\nå¯èå…¥å…ˆéªŒçŸ¥è¯†\n\n\néš¾ä»¥è§£é‡Š\nç›´è§‚æ¦‚ç‡è§£é‡Š\n\n\nå¤šé‡æ¯”è¾ƒé—®é¢˜\nè‡ªç„¶å¤„ç†ä¸ç¡®å®šæ€§\n\n\n\n\n\nrstanarm ä¼˜åŠ¿\n\nç†Ÿæ‚‰çš„å…¬å¼è¯­æ³•\nè‡ªåŠ¨é€‰æ‹©åˆç†å…ˆéªŒ\nä¸tidyverseå…¼å®¹\nä¸°å¯Œçš„è¯Šæ–­å·¥å…·",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#å®‰è£…ä¸åŠ è½½-4",
    "href": "1074-quantile-regression.html#å®‰è£…ä¸åŠ è½½-4",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\nlibrary(rstanarm)\nlibrary(bayesplot)\nlibrary(ggplot2)\nlibrary(dplyr)\n\nset.seed(42)\ntheme_set(theme_bw(base_size = 12))\n\n# è®¾ç½®å¹¶è¡Œ\noptions(mc.cores = parallel::detectCores())",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬ä¸€éƒ¨åˆ†çº¿æ€§å›å½’",
    "href": "1074-quantile-regression.html#ç¬¬ä¸€éƒ¨åˆ†çº¿æ€§å›å½’",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šçº¿æ€§å›å½’",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šçº¿æ€§å›å½’\n\nåŸºæœ¬æ‹Ÿåˆ\n# ä½¿ç”¨mtcarsæ•°æ®\ndata(mtcars)\n\n# è´å¶æ–¯çº¿æ€§å›å½’\nbayes_lm &lt;- stan_glm(mpg ~ wt + hp,\n    data = mtcars,\n    family = gaussian(),\n    seed = 42,\n    refresh = 0\n) # é™é»˜è¾“å‡º\n\n# æŸ¥çœ‹ç»“æœ\nprint(bayes_lm)\n\n\nåéªŒåˆ†å¸ƒ\n# æå–åéªŒæ ·æœ¬\nposterior &lt;- as.data.frame(bayes_lm)\nhead(posterior)\n# åéªŒåˆ†å¸ƒå¯è§†åŒ–\nmcmc_dens(bayes_lm, pars = c(\"wt\", \"hp\")) +\n    labs(title = \"ç³»æ•°åéªŒåˆ†å¸ƒ\")\n\n\nä¸é¢‘ç‡æ³•æ¯”è¾ƒ\n# é¢‘ç‡lm\nfreq_lm &lt;- lm(mpg ~ wt + hp, data = mtcars)\n\n# æ¯”è¾ƒ\ncat(\"é¢‘ç‡æ³•ä¼°è®¡:\\n\")\nprint(coef(freq_lm))\ncat(\"\\nè´å¶æ–¯åéªŒå‡å€¼:\\n\")\nprint(coef(bayes_lm))",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬äºŒéƒ¨åˆ†å…ˆéªŒè®¾ç½®",
    "href": "1074-quantile-regression.html#ç¬¬äºŒéƒ¨åˆ†å…ˆéªŒè®¾ç½®",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šå…ˆéªŒè®¾ç½®",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šå…ˆéªŒè®¾ç½®\n\né»˜è®¤å…ˆéªŒ\n# æŸ¥çœ‹é»˜è®¤å…ˆéªŒ\nprior_summary(bayes_lm)\n\n\nè‡ªå®šä¹‰å…ˆéªŒ\n# ä½¿ç”¨ä¿¡æ¯æ€§å…ˆéªŒ\nbayes_lm_informed &lt;- stan_glm(\n    mpg ~ wt + hp,\n    data = mtcars,\n    prior = normal(c(-5, 0), c(2, 0.1)), # wtå’Œhpçš„å…ˆéªŒ\n    prior_intercept = normal(30, 10),\n    seed = 42,\n    refresh = 0\n)\n\n# æ¯”è¾ƒç»“æœ\ncat(\"é»˜è®¤å…ˆéªŒä¼°è®¡:\\n\")\nprint(coef(bayes_lm))\ncat(\"\\nä¿¡æ¯æ€§å…ˆéªŒä¼°è®¡:\\n\")\nprint(coef(bayes_lm_informed))\n\n\nå…ˆéªŒé¢„æµ‹æ£€æŸ¥\n# å…ˆéªŒé¢„æµ‹åˆ†å¸ƒ\nbayes_lm_prior &lt;- stan_glm(\n    mpg ~ wt + hp,\n    data = mtcars,\n    prior_PD = TRUE, # åªä»å…ˆéªŒé‡‡æ ·\n    seed = 42,\n    refresh = 0\n)\n\n# å¯è§†åŒ–\npp_check(bayes_lm_prior, nreps = 50) +\n    labs(\n        title = \"å…ˆéªŒé¢„æµ‹æ£€æŸ¥\",\n        subtitle = \"å…ˆéªŒæ˜¯å¦äº§ç”Ÿåˆç†çš„æ•°æ®èŒƒå›´ï¼Ÿ\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬ä¸‰éƒ¨åˆ†åéªŒæ¨æ–­",
    "href": "1074-quantile-regression.html#ç¬¬ä¸‰éƒ¨åˆ†åéªŒæ¨æ–­",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šåéªŒæ¨æ–­",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šåéªŒæ¨æ–­\n\nå¯ä¿¡åŒºé—´\n# åéªŒåŒºé—´\nposterior_interval(bayes_lm, prob = 0.95)\n\n\næ¦‚ç‡é™ˆè¿°\n# è®¡ç®—ç‰¹å®šæ¦‚ç‡\n# wtæ•ˆåº”å°äº-4çš„æ¦‚ç‡\nprob_wt &lt;- mean(posterior$wt &lt; -4)\ncat(\"P(wtç³»æ•° &lt; -4) =\", round(prob_wt, 3), \"\\n\")\n\n# hpæ•ˆåº”ä¸ºè´Ÿçš„æ¦‚ç‡\nprob_hp_neg &lt;- mean(posterior$hp &lt; 0)\ncat(\"P(hpç³»æ•° &lt; 0) =\", round(prob_hp_neg, 3), \"\\n\")\n\n\nåéªŒé¢„æµ‹\n# æ–°æ•°æ®é¢„æµ‹\nnew_car &lt;- data.frame(wt = 3, hp = 120)\n\n# åéªŒé¢„æµ‹åˆ†å¸ƒ\npred_post &lt;- posterior_predict(bayes_lm, newdata = new_car)\n\n# é¢„æµ‹åŒºé—´\ncat(\"é¢„æµ‹mpg (95%åŒºé—´):\\n\")\ncat(\"å‡å€¼:\", round(mean(pred_post), 2), \"\\n\")\ncat(\"åŒºé—´:\", round(quantile(pred_post, c(0.025, 0.975)), 2), \"\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬å››éƒ¨åˆ†æ¨¡å‹è¯Šæ–­-1",
    "href": "1074-quantile-regression.html#ç¬¬å››éƒ¨åˆ†æ¨¡å‹è¯Šæ–­-1",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šæ¨¡å‹è¯Šæ–­",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šæ¨¡å‹è¯Šæ–­\n\nMCMCè¯Šæ–­\n# è½¨è¿¹å›¾\nmcmc_trace(bayes_lm, pars = c(\"wt\", \"hp\"))\n# R-hatå’Œæœ‰æ•ˆæ ·æœ¬é‡\nsummary(bayes_lm)[, c(\"Rhat\", \"n_eff\")]\n\n\nåéªŒé¢„æµ‹æ£€æŸ¥\n# åéªŒé¢„æµ‹ vs è§‚æµ‹æ•°æ®\npp_check(bayes_lm, nreps = 50) +\n    labs(\n        title = \"åéªŒé¢„æµ‹æ£€æŸ¥\",\n        subtitle = \"æ¨¡å‹èƒ½å¦é‡ç°è§‚æµ‹æ•°æ®çš„åˆ†å¸ƒï¼Ÿ\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬äº”éƒ¨åˆ†logisticå›å½’",
    "href": "1074-quantile-regression.html#ç¬¬äº”éƒ¨åˆ†logisticå›å½’",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šLogisticå›å½’",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šLogisticå›å½’\n# äºŒåˆ†ç±»ç»“å±€\nmtcars$am_factor &lt;- factor(mtcars$am)\n\nbayes_logit &lt;- stan_glm(\n    am_factor ~ wt + hp,\n    data = mtcars,\n    family = binomial(link = \"logit\"),\n    seed = 42,\n    refresh = 0\n)\n\nprint(bayes_logit)\n# ORå’Œå¯ä¿¡åŒºé—´\nor_posterior &lt;- exp(as.data.frame(bayes_logit)[, c(\"wt\", \"hp\")])\n\ncat(\"ORä¼°è®¡ (åéªŒä¸­ä½æ•°):\\n\")\ncat(\"wt:\", round(median(or_posterior$wt), 3), \"\\n\")\ncat(\"hp:\", round(median(or_posterior$hp), 3), \"\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬å…­éƒ¨åˆ†æ¨¡å‹æ¯”è¾ƒ-1",
    "href": "1074-quantile-regression.html#ç¬¬å…­éƒ¨åˆ†æ¨¡å‹æ¯”è¾ƒ-1",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹æ¯”è¾ƒ",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹æ¯”è¾ƒ\n\nLOOäº¤å‰éªŒè¯\n# Leave-one-outäº¤å‰éªŒè¯\nloo_lm &lt;- loo(bayes_lm)\nprint(loo_lm)\n# æ¯”è¾ƒå¤šä¸ªæ¨¡å‹\nbayes_lm2 &lt;- stan_glm(mpg ~ wt + hp + disp,\n    data = mtcars,\n    seed = 42, refresh = 0\n)\n\nloo_lm2 &lt;- loo(bayes_lm2)\n\n# æ¨¡å‹æ¯”è¾ƒ\nloo_compare(loo_lm, loo_lm2)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#ç¬¬ä¸ƒéƒ¨åˆ†å±‚æ¬¡æ¨¡å‹",
    "href": "1074-quantile-regression.html#ç¬¬ä¸ƒéƒ¨åˆ†å±‚æ¬¡æ¨¡å‹",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå±‚æ¬¡æ¨¡å‹",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå±‚æ¬¡æ¨¡å‹\n# åˆ†ç»„æ•°æ®\ndata(sleepstudy, package = \"lme4\")\n\n# è´å¶æ–¯æ··åˆæ•ˆåº”æ¨¡å‹\nbayes_hier &lt;- stan_lmer(\n    Reaction ~ Days + (Days | Subject),\n    data = sleepstudy,\n    seed = 42,\n    refresh = 0\n)\n\nprint(bayes_hier, digits = 2)\n# éšæœºæ•ˆåº”åéªŒ\nranef_post &lt;- as.data.frame(bayes_hier)\nranef_cols &lt;- grep(\"^b\\\\[\", names(ranef_post), value = TRUE)\ncat(\"éšæœºæ•ˆåº”æ•°é‡:\", length(ranef_cols), \"\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-4",
    "href": "1074-quantile-regression.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-4",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n```{r eval=FALSE} # ===== åŸºæœ¬æ¨¡å‹ ===== library(rstanarm)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#å°ç»“-1",
    "href": "1074-quantile-regression.html#å°ç»“-1",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å°ç»“",
    "text": "å°ç»“\nrstanarmçš„æ ¸å¿ƒå·¥ä½œæµç¨‹ï¼š\n\næ¨¡å‹è®¾å®šï¼šä½¿ç”¨ç†Ÿæ‚‰çš„å…¬å¼è¯­æ³•\nå…ˆéªŒé€‰æ‹©ï¼šé»˜è®¤å…ˆéªŒé€šå¸¸åˆç†ï¼Œæˆ–è‡ªå®šä¹‰\næ‹Ÿåˆï¼šè‡ªåŠ¨MCMCé‡‡æ ·\nè¯Šæ–­ï¼šæ£€æŸ¥R-hatã€è½¨è¿¹å›¾ã€åéªŒé¢„æµ‹\næ¨æ–­ï¼šåˆ©ç”¨å®Œæ•´åéªŒåˆ†å¸ƒ\n\n\nä¼˜åŠ¿ï¼šè´å¶æ–¯æ–¹æ³•è®©ä½ èƒ½å¤Ÿç›´æ¥é™ˆè¿°â€å‚æ•°åœ¨åŒºé—´å†…çš„æ¦‚ç‡â€ï¼Œè€Œéâ€å¦‚æœé‡å¤å®éªŒâ€¦â€",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1074-quantile-regression.html#å‚è€ƒèµ„æº-1",
    "href": "1074-quantile-regression.html#å‚è€ƒèµ„æº-1",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nrstanarmå®˜æ–¹æ–‡æ¡£\nStanç”¨æˆ·æŒ‡å—\nGelman et al.Â (2020). Regression and Other Stories.",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "åˆ†ä½æ•°å›å½’"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html",
    "href": "1075-zero-inflated.html",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "å½“è®¡æ•°æ•°æ®ä¸­é›¶å€¼è¿‡å¤šæ—¶ï¼Œæ ‡å‡†çš„Poissonæˆ–è´ŸäºŒé¡¹å›å½’å¯èƒ½æ‹Ÿåˆä¸ä½³ã€‚é›¶è†¨èƒ€æ¨¡å‹å‡è®¾æ•°æ®æ¥è‡ªä¸¤ä¸ªè¿‡ç¨‹ï¼šä¸€ä¸ªäº§ç”Ÿâ€ç»“æ„æ€§é›¶â€ï¼Œå¦ä¸€ä¸ªäº§ç”Ÿæ ‡å‡†è®¡æ•°åˆ†å¸ƒã€‚\n\n\n\n\n\næ•°æ®ç‰¹å¾\nå¯èƒ½åŸå› \nè§£å†³æ–¹æ¡ˆ\n\n\n\n\né›¶å€¼æ¯”ä¾‹è¿‡é«˜\nä¸¤ç±»äººç¾¤æ··åˆ\né›¶è†¨èƒ€æ¨¡å‹\n\n\néå‚ä¸è€…\nâ€œä»ä¸â€åšæŸäº‹çš„äºº\nZIP/ZINB\n\n\næµ‹é‡é™åˆ¶\næ— æ³•æ£€æµ‹åˆ°ä½å€¼\nHurdleæ¨¡å‹\n\n\n\n\n\n\n\nZIPï¼šé›¶è†¨èƒ€Poisson\nZINBï¼šé›¶è†¨èƒ€è´ŸäºŒé¡¹ï¼ˆå¤„ç†è¿‡åº¦ç¦»æ•£ï¼‰\nHurdleï¼šä¸¤éƒ¨åˆ†æ¨¡å‹ï¼ˆè·¨è¶Šé›¶çš„éšœç¢ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#é›¶è†¨èƒ€æ¨¡å‹ç®€ä»‹",
    "href": "1075-zero-inflated.html#é›¶è†¨èƒ€æ¨¡å‹ç®€ä»‹",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "å½“è®¡æ•°æ•°æ®ä¸­é›¶å€¼è¿‡å¤šæ—¶ï¼Œæ ‡å‡†çš„Poissonæˆ–è´ŸäºŒé¡¹å›å½’å¯èƒ½æ‹Ÿåˆä¸ä½³ã€‚é›¶è†¨èƒ€æ¨¡å‹å‡è®¾æ•°æ®æ¥è‡ªä¸¤ä¸ªè¿‡ç¨‹ï¼šä¸€ä¸ªäº§ç”Ÿâ€ç»“æ„æ€§é›¶â€ï¼Œå¦ä¸€ä¸ªäº§ç”Ÿæ ‡å‡†è®¡æ•°åˆ†å¸ƒã€‚\n\n\n\n\n\næ•°æ®ç‰¹å¾\nå¯èƒ½åŸå› \nè§£å†³æ–¹æ¡ˆ\n\n\n\n\né›¶å€¼æ¯”ä¾‹è¿‡é«˜\nä¸¤ç±»äººç¾¤æ··åˆ\né›¶è†¨èƒ€æ¨¡å‹\n\n\néå‚ä¸è€…\nâ€œä»ä¸â€åšæŸäº‹çš„äºº\nZIP/ZINB\n\n\næµ‹é‡é™åˆ¶\næ— æ³•æ£€æµ‹åˆ°ä½å€¼\nHurdleæ¨¡å‹\n\n\n\n\n\n\n\nZIPï¼šé›¶è†¨èƒ€Poisson\nZINBï¼šé›¶è†¨èƒ€è´ŸäºŒé¡¹ï¼ˆå¤„ç†è¿‡åº¦ç¦»æ•£ï¼‰\nHurdleï¼šä¸¤éƒ¨åˆ†æ¨¡å‹ï¼ˆè·¨è¶Šé›¶çš„éšœç¢ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#å®‰è£…ä¸åŠ è½½",
    "href": "1075-zero-inflated.html#å®‰è£…ä¸åŠ è½½",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\nlibrary(pscl)\nlibrary(MASS)\nlibrary(ggplot2)\nlibrary(dplyr)\n\nset.seed(42)\ntheme_set(theme_bw(base_size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬ä¸€éƒ¨åˆ†ç†è§£é›¶è†¨èƒ€",
    "href": "1075-zero-inflated.html#ç¬¬ä¸€éƒ¨åˆ†ç†è§£é›¶è†¨èƒ€",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šç†è§£é›¶è†¨èƒ€",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šç†è§£é›¶è†¨èƒ€\n\næ¨¡æ‹Ÿé›¶è†¨èƒ€æ•°æ®\n\n# æ¨¡æ‹Ÿå¸çƒŸæ•°æ®ï¼šéƒ¨åˆ†äººä»ä¸å¸çƒŸï¼Œå¸çƒŸè€…æœä»Poisson\nn &lt;- 500\nnever_smoker &lt;- rbinom(n, 1, 0.4) # 40%ä»ä¸å¸çƒŸ\ncigarettes &lt;- ifelse(never_smoker == 1, 0, rpois(n, lambda = 5))\n\n# æ·»åŠ åå˜é‡\nage &lt;- round(rnorm(n, 40, 10))\nmale &lt;- rbinom(n, 1, 0.5)\n\nsim_data &lt;- data.frame(cigarettes, age, male, never_smoker)\n\n# é›¶å€¼æ¯”ä¾‹\ncat(\"é›¶å€¼æ¯”ä¾‹:\", mean(cigarettes == 0), \"\\n\")\n\né›¶å€¼æ¯”ä¾‹: 0.38 \n\ncat(\"PoissonæœŸæœ›é›¶å€¼æ¯”ä¾‹:\", dpois(0, mean(cigarettes)), \"\\n\")\n\nPoissonæœŸæœ›é›¶å€¼æ¯”ä¾‹: 0.04354328 \n\n\n\n\nå¯è§†åŒ–é›¶è†¨èƒ€\n\n# æ¯”è¾ƒè§‚å¯Ÿå€¼ä¸Poissonåˆ†å¸ƒ\nobs_counts &lt;- table(factor(cigarettes, levels = 0:max(cigarettes)))\npois_expected &lt;- dpois(0:max(cigarettes), lambda = mean(cigarettes)) * n\n\ncompare_df &lt;- data.frame(\n    count = 0:max(cigarettes),\n    observed = as.numeric(obs_counts),\n    expected = pois_expected\n) %&gt;%\n    tidyr::pivot_longer(-count, names_to = \"type\", values_to = \"frequency\")\n\nggplot(compare_df, aes(x = count, y = frequency, fill = type)) +\n    geom_col(position = \"dodge\", alpha = 0.8) +\n    scale_fill_manual(\n        values = c(\"#4f46e5\", \"#dc2626\"),\n        labels = c(\"PoissonæœŸæœ›\", \"è§‚å¯Ÿå€¼\")\n    ) +\n    labs(\n        title = \"é›¶è†¨èƒ€æ•°æ® vs Poissonåˆ†å¸ƒ\",\n        subtitle = \"è§‚å¯Ÿé›¶å€¼è¿œå¤šäºPoissoné¢„æœŸ\",\n        x = \"è®¡æ•°\", y = \"é¢‘æ•°\", fill = \"\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬äºŒéƒ¨åˆ†æ ‡å‡†è®¡æ•°æ¨¡å‹",
    "href": "1075-zero-inflated.html#ç¬¬äºŒéƒ¨åˆ†æ ‡å‡†è®¡æ•°æ¨¡å‹",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šæ ‡å‡†è®¡æ•°æ¨¡å‹",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šæ ‡å‡†è®¡æ•°æ¨¡å‹\n\nPoissonå›å½’\n\n# æ ‡å‡†Poisson\npois_fit &lt;- glm(cigarettes ~ age + male, data = sim_data, family = poisson)\nsummary(pois_fit)\n\n\nCall:\nglm(formula = cigarettes ~ age + male, family = poisson, data = sim_data)\n\nCoefficients:\n             Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept) 1.0113328  0.1047241   9.657  &lt; 2e-16 ***\nage         0.0002191  0.0024223   0.090    0.928    \nmale        0.2187046  0.0512998   4.263 2.01e-05 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for poisson family taken to be 1)\n\n    Null deviance: 1818.1  on 499  degrees of freedom\nResidual deviance: 1799.7  on 497  degrees of freedom\nAIC: 2854.2\n\nNumber of Fisher Scoring iterations: 5\n\n# æ£€æŸ¥è¿‡åº¦ç¦»æ•£\ncat(\"\\nè¿‡åº¦ç¦»æ•£æ£€éªŒ:\\n\")\n\n\nè¿‡åº¦ç¦»æ•£æ£€éªŒ:\n\ncat(\"æ®‹å·®åå·®:\", deviance(pois_fit), \"\\n\")\n\næ®‹å·®åå·®: 1799.702 \n\ncat(\"è‡ªç”±åº¦:\", df.residual(pois_fit), \"\\n\")\n\nè‡ªç”±åº¦: 497 \n\ncat(\"ç¦»æ•£å‚æ•°ä¼°è®¡:\", deviance(pois_fit) / df.residual(pois_fit), \"\\n\")\n\nç¦»æ•£å‚æ•°ä¼°è®¡: 3.621131 \n\n\n\n\nè´ŸäºŒé¡¹å›å½’\n\n# è´ŸäºŒé¡¹å›å½’\nnb_fit &lt;- glm.nb(cigarettes ~ age + male, data = sim_data)\nsummary(nb_fit)\n\n\nCall:\nglm.nb(formula = cigarettes ~ age + male, data = sim_data, init.theta = 0.7613010446, \n    link = log)\n\nCoefficients:\n             Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept) 1.0109883  0.2372521   4.261 2.03e-05 ***\nage         0.0002277  0.0055321   0.041   0.9672    \nmale        0.2187055  0.1148489   1.904   0.0569 .  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for Negative Binomial(0.7613) family taken to be 1)\n\n    Null deviance: 571.93  on 499  degrees of freedom\nResidual deviance: 568.32  on 497  degrees of freedom\nAIC: 2283.6\n\nNumber of Fisher Scoring iterations: 1\n\n              Theta:  0.7613 \n          Std. Err.:  0.0769 \n\n 2 x log-likelihood:  -2275.6000",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬ä¸‰éƒ¨åˆ†é›¶è†¨èƒ€poisson-zip",
    "href": "1075-zero-inflated.html#ç¬¬ä¸‰éƒ¨åˆ†é›¶è†¨èƒ€poisson-zip",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šé›¶è†¨èƒ€Poisson (ZIP)",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šé›¶è†¨èƒ€Poisson (ZIP)\n\næ‹ŸåˆZIPæ¨¡å‹\n\n# é›¶è†¨èƒ€Poisson\nzip_fit &lt;- zeroinfl(cigarettes ~ age + male | 1, data = sim_data)\nsummary(zip_fit)\n\n\nCall:\nzeroinfl(formula = cigarettes ~ age + male | 1, data = sim_data)\n\nPearson residuals:\n     Min       1Q   Median       3Q      Max \n-1.04840 -1.03531 -0.00795  0.68688  3.17640 \n\nCount model coefficients (poisson with log link):\n              Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept)  1.5839089  0.1101139  14.384   &lt;2e-16 ***\nage         -0.0002166  0.0025503  -0.085    0.932    \nmale         0.0659636  0.0523095   1.261    0.207    \n\nZero-inflation model coefficients (binomial with logit link):\n            Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept) -0.50793    0.09323  -5.448 5.09e-08 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 \n\nNumber of iterations in BFGS optimization: 9 \nLog-likelihood: -1013 on 4 Df\n\n\næ¨¡å‹è§£è¯»ï¼š - Count modelï¼šè®¡æ•°éƒ¨åˆ†ï¼ˆç»™å®šä¸æ˜¯ç»“æ„é›¶ï¼‰ - Zero-inflation modelï¼šé›¶è†¨èƒ€éƒ¨åˆ†ï¼ˆæ˜¯ç»“æ„é›¶çš„æ¦‚ç‡ï¼‰\n\n\nZIPæ¨¡å‹æ‰©å±•\n\n# é›¶è†¨èƒ€éƒ¨åˆ†ä¹ŸåŒ…å«åå˜é‡\nzip_full &lt;- zeroinfl(cigarettes ~ age + male | age + male, data = sim_data)\nsummary(zip_full)\n\n\nCall:\nzeroinfl(formula = cigarettes ~ age + male | age + male, data = sim_data)\n\nPearson residuals:\n    Min      1Q  Median      3Q     Max \n-1.1453 -0.9522  0.0747  0.7656  3.1248 \n\nCount model coefficients (poisson with log link):\n              Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept)  1.5863794  0.1101281  14.405   &lt;2e-16 ***\nage         -0.0002295  0.0025529  -0.090    0.928    \nmale         0.0629540  0.0522363   1.205    0.228    \n\nZero-inflation model coefficients (binomial with logit link):\n             Estimate Std. Error z value Pr(&gt;|z|)  \n(Intercept) -0.243227   0.389458  -0.625    0.532  \nage         -0.001260   0.009137  -0.138    0.890  \nmale        -0.411895   0.187414  -2.198    0.028 *\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 \n\nNumber of iterations in BFGS optimization: 11 \nLog-likelihood: -1011 on 6 Df",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬å››éƒ¨åˆ†é›¶è†¨èƒ€è´ŸäºŒé¡¹-zinb",
    "href": "1075-zero-inflated.html#ç¬¬å››éƒ¨åˆ†é›¶è†¨èƒ€è´ŸäºŒé¡¹-zinb",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šé›¶è†¨èƒ€è´ŸäºŒé¡¹ (ZINB)",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šé›¶è†¨èƒ€è´ŸäºŒé¡¹ (ZINB)\n\n# æ·»åŠ è¿‡åº¦ç¦»æ•£\nsim_data$cigs_od &lt;- ifelse(\n    sim_data$never_smoker == 1, 0,\n    rnbinom(n, size = 2, mu = 5) # è´ŸäºŒé¡¹åˆ†å¸ƒ\n)\n\n# ZINBæ¨¡å‹\nzinb_fit &lt;- zeroinfl(cigs_od ~ age + male | 1, data = sim_data, dist = \"negbin\")\nsummary(zinb_fit)\n\n\nCall:\nzeroinfl(formula = cigs_od ~ age + male | 1, data = sim_data, dist = \"negbin\")\n\nPearson residuals:\n    Min      1Q  Median      3Q     Max \n-0.7122 -0.6990 -0.4612  0.2703  9.5588 \n\nCount model coefficients (negbin with log link):\n             Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept)  1.587020   0.252072   6.296 3.06e-10 ***\nage         -0.001826   0.005845  -0.312   0.7548    \nmale         0.212240   0.117608   1.805   0.0711 .  \nLog(theta)   0.263175   0.168901   1.558   0.1192    \n\nZero-inflation model coefficients (binomial with logit link):\n            Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept)  -0.6254     0.1436  -4.356 1.33e-05 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 \n\nTheta = 1.3011 \nNumber of iterations in BFGS optimization: 11 \nLog-likelihood: -1102 on 5 Df",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬äº”éƒ¨åˆ†hurdleæ¨¡å‹",
    "href": "1075-zero-inflated.html#ç¬¬äº”éƒ¨åˆ†hurdleæ¨¡å‹",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šHurdleæ¨¡å‹",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šHurdleæ¨¡å‹\nHurdleæ¨¡å‹å°†æ•°æ®åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šé›¶vséé›¶ï¼ˆäºŒé¡¹éƒ¨åˆ†ï¼‰ï¼Œéé›¶å€¼çš„å¤§å°ï¼ˆæˆªæ–­è®¡æ•°éƒ¨åˆ†ï¼‰ã€‚\n\n# Hurdle Poisson\nhurdle_fit &lt;- hurdle(cigarettes ~ age + male | age + male, data = sim_data)\nsummary(hurdle_fit)\n\n\nCall:\nhurdle(formula = cigarettes ~ age + male | age + male, data = sim_data)\n\nPearson residuals:\n     Min       1Q   Median       3Q      Max \n-1.14522 -0.95217  0.07471  0.76557  3.12475 \n\nCount model coefficients (truncated poisson with log link):\n              Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept)  1.5862882  0.1098622  14.439   &lt;2e-16 ***\nage         -0.0002273  0.0025462  -0.089    0.929    \nmale         0.0629617  0.0522351   1.205    0.228    \nZero hurdle model coefficients (binomial with logit link):\n            Estimate Std. Error z value Pr(&gt;|z|)  \n(Intercept) 0.226381   0.384674   0.589   0.5562  \nage         0.001219   0.009022   0.135   0.8925  \nmale        0.412954   0.185291   2.229   0.0258 *\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 \n\nNumber of iterations in BFGS optimization: 9 \nLog-likelihood: -1011 on 6 Df\n\n\n\nZIP vs Hurdle åŒºåˆ«\n\n\n\nç‰¹ç‚¹\nZIP\nHurdle\n\n\n\n\né›¶æ¥æº\nç»“æ„é›¶ + é‡‡æ ·é›¶\nä»…â€è·¨æ â€å†³å®š\n\n\néé›¶éƒ¨åˆ†\nå®Œæ•´åˆ†å¸ƒ\næˆªæ–­åˆ†å¸ƒ\n\n\né€‚ç”¨åœºæ™¯\nä¸¤ç±»äººç¾¤æ··åˆ\nå‚ä¸/ä¸å‚ä¸å†³ç­–",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬å…­éƒ¨åˆ†æ¨¡å‹æ¯”è¾ƒ",
    "href": "1075-zero-inflated.html#ç¬¬å…­éƒ¨åˆ†æ¨¡å‹æ¯”è¾ƒ",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹æ¯”è¾ƒ",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹æ¯”è¾ƒ\n\nAIC/BICæ¯”è¾ƒ\n\nmodels &lt;- list(\n    Poisson = pois_fit,\n    NegBin = nb_fit,\n    ZIP = zip_fit,\n    Hurdle = hurdle_fit\n)\n\ncomparison &lt;- data.frame(\n    Model = names(models),\n    AIC = sapply(models, AIC),\n    BIC = sapply(models, BIC),\n    LogLik = sapply(models, logLik)\n)\n\ncomparison &lt;- comparison[order(comparison$AIC), ]\nprint(comparison)\n\n          Model      AIC      BIC    LogLik\nHurdle   Hurdle 2033.945 2059.232 -1010.972\nZIP         ZIP 2034.800 2051.658 -1013.400\nNegBin   NegBin 2283.600 2300.458 -1137.800\nPoisson Poisson 2854.179 2866.823 -1424.090\n\n\n\n\nVuongæ£€éªŒ\n\n# ZIP vs Poisson\nvuong_test &lt;- vuong(zip_fit, pois_fit)\n\nVuong Non-Nested Hypothesis Test-Statistic: \n(test-statistic is asymptotically distributed N(0,1) under the\n null that the models are indistinguishible)\n-------------------------------------------------------------\n              Vuong z-statistic             H_A    p-value\nRaw                    13.76219 model1 &gt; model2 &lt; 2.22e-16\nAIC-corrected          13.72868 model1 &gt; model2 &lt; 2.22e-16\nBIC-corrected          13.65806 model1 &gt; model2 &lt; 2.22e-16\n\nprint(vuong_test)\n\nNULL",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "href": "1075-zero-inflated.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹\n\nåŒ»ç–—å°±è¯Šæ¬¡æ•°\n\n# æ¨¡æ‹ŸåŒ»ç–—å°±è¯Šæ•°æ®\nn &lt;- 1000\n\n# éƒ¨åˆ†äººå¥åº·ä¸éœ€å°±è¯Šï¼Œå…¶ä»–äººæ ¹æ®å¥åº·çŠ¶å†µå°±è¯Š\nhealthy &lt;- rbinom(n, 1, 0.3)\nchronic &lt;- rbinom(n, 1, 0.25)\nincome &lt;- rnorm(n, 50000, 15000)\n\n# å°±è¯Šæ¬¡æ•°\nlambda &lt;- exp(0.5 + 0.8 * chronic - 0.00001 * income)\nvisits &lt;- ifelse(healthy == 1, 0, rpois(n, lambda))\n\nhealth_data &lt;- data.frame(visits, chronic, income = income / 1000, healthy)\n\ncat(\"å°±è¯Šç»Ÿè®¡:\\n\")\n\nå°±è¯Šç»Ÿè®¡:\n\ncat(\"é›¶å€¼æ¯”ä¾‹:\", mean(visits == 0), \"\\n\")\n\né›¶å€¼æ¯”ä¾‹: 0.513 \n\ncat(\"å¹³å‡å°±è¯Šæ¬¡æ•°:\", mean(visits), \"\\n\")\n\nå¹³å‡å°±è¯Šæ¬¡æ•°: 0.934 \n\n\n\n# æ¯”è¾ƒæ¨¡å‹\npois_health &lt;- glm(visits ~ chronic + income, data = health_data, family = poisson)\nzip_health &lt;- zeroinfl(visits ~ chronic + income | 1, data = health_data)\nzinb_health &lt;- zeroinfl(visits ~ chronic + income | 1, data = health_data, dist = \"negbin\")\n\ncat(\"æ¨¡å‹AICæ¯”è¾ƒ:\\n\")\n\næ¨¡å‹AICæ¯”è¾ƒ:\n\ncat(\"Poisson:\", AIC(pois_health), \"\\n\")\n\nPoisson: 2679.812 \n\ncat(\"ZIP:\", AIC(zip_health), \"\\n\")\n\nZIP: 2561.69 \n\ncat(\"ZINB:\", AIC(zinb_health), \"\\n\")\n\nZINB: 2563.484 \n\n\n\n# æœ€ä½³æ¨¡å‹ç³»æ•°è§£é‡Š\ncat(\"\\nZIPæ¨¡å‹ç»“æœ:\\n\")\n\n\nZIPæ¨¡å‹ç»“æœ:\n\nsummary(zip_health)\n\n\nCall:\nzeroinfl(formula = visits ~ chronic + income | 1, data = health_data)\n\nPearson residuals:\n    Min      1Q  Median      3Q     Max \n-1.0719 -0.7452 -0.6444  0.4327  4.6629 \n\nCount model coefficients (poisson with log link):\n            Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept)  0.58663    0.12113   4.843 1.28e-06 ***\nchronic      0.80480    0.07570  10.631  &lt; 2e-16 ***\nincome      -0.01151    0.00236  -4.877 1.08e-06 ***\n\nZero-inflation model coefficients (binomial with logit link):\n            Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept)  -0.8102     0.1216  -6.661 2.72e-11 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 \n\nNumber of iterations in BFGS optimization: 10 \nLog-likelihood: -1277 on 4 Df",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "1075-zero-inflated.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# ===== é›¶è†¨èƒ€æ¨¡å‹ =====\nlibrary(pscl)\n\n# ZIP\nzeroinfl(y ~ x1 + x2 | z1, data = df)\n\n# ZINB\nzeroinfl(y ~ x1 + x2 | z1, data = df, dist = \"negbin\")\n\n# Hurdle\nhurdle(y ~ x1 + x2 | z1, data = df)\n\n# ===== æ¨¡å‹æ¯”è¾ƒ =====\nAIC(model1, model2)\nvuong(zip_model, poisson_model)\n\n# ===== é¢„æµ‹ =====\npredict(fit, type = \"response\") # æœŸæœ›è®¡æ•°\npredict(fit, type = \"zero\") # é›¶è†¨èƒ€æ¦‚ç‡",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#å°ç»“",
    "href": "1075-zero-inflated.html#å°ç»“",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å°ç»“",
    "text": "å°ç»“\né›¶è†¨èƒ€æ¨¡å‹é€‰æ‹©æŒ‡å—ï¼š\n\nå…ˆæ£€æŸ¥é›¶å€¼è¿‡å¤šï¼šè§‚å¯Ÿæ¯”ä¾‹ vs PoissonæœŸæœ›\næ£€æŸ¥è¿‡åº¦ç¦»æ•£ï¼šåå·®/è‡ªç”±åº¦ &gt; 1\né€‰æ‹©æ¨¡å‹ï¼š\n\nç»“æ„é›¶ + å‡åŒ€ç¦»æ•£ â†’ ZIP\nç»“æ„é›¶ + è¿‡åº¦ç¦»æ•£ â†’ ZINB\nå‚ä¸å†³ç­– â†’ Hurdle\n\n\n\nå…³é”®ï¼šç†è§£ä½ çš„é›¶å€¼æ¥è‡ªä½•å¤„ï¼ˆä¸¤ç±»äººç¾¤ï¼Ÿè¿˜æ˜¯è·¨æ å†³ç­–ï¼Ÿï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#å‚è€ƒèµ„æº",
    "href": "1075-zero-inflated.html#å‚è€ƒèµ„æº",
    "title": "é›¶è†¨èƒ€æ¨¡å‹å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\npsclåŒ…æ–‡æ¡£\nZeileis et al.Â (2008). Regression Models for Count Data in R.\nUCLA IDREæŒ‡å—",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ipw-ç®€ä»‹",
    "href": "1075-zero-inflated.html#ipw-ç®€ä»‹",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "IPW ç®€ä»‹",
    "text": "IPW ç®€ä»‹\nå€’æ¦‚ç‡åŠ æƒï¼ˆInverse Probability Weighting, IPWï¼‰ æ˜¯å› æœæ¨æ–­ä¸­åˆ›å»ºä¼ªéšæœºåŒ–çš„å…³é”®æŠ€æœ¯ã€‚é€šè¿‡æ ¹æ®å€¾å‘æ€§å¾—åˆ†å¯¹è§‚æµ‹å€¼åŠ æƒï¼Œä½¿å¤„ç†ç»„å’Œå¯¹ç…§ç»„åœ¨åå˜é‡ä¸Šå¯æ¯”ã€‚\n\nIPW vs PSM\n\n\n\nç‰¹ç‚¹\nPSMåŒ¹é…\nIPWåŠ æƒ\n\n\n\n\næ ·æœ¬ä½¿ç”¨\nä¸¢å¼ƒæœªåŒ¹é…æ ·æœ¬\nä¿ç•™å…¨éƒ¨æ ·æœ¬\n\n\nç»Ÿè®¡æ•ˆç‡\nè¾ƒä½\nè¾ƒé«˜\n\n\næç«¯å€¼å¤„ç†\nè‡ªåŠ¨æ’é™¤\néœ€æƒé‡ä¿®å‰ª\n\n\nä¼°è®¡ç±»å‹\nATT\nATE/ATTå¯é€‰\n\n\n\n\n\næ ¸å¿ƒæ€æƒ³\n\nå¤„ç†æ¦‚ç‡ä½çš„äººæ¥å—å¤„ç† â†’ ä»£è¡¨æ›´å¤šåŒç±»äºº â†’ æƒé‡é«˜\nå¤„ç†æ¦‚ç‡é«˜çš„äººæ¥å—å¤„ç† â†’ ä»£è¡¨è¾ƒå°‘åŒç±»äºº â†’ æƒé‡ä½",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#å®‰è£…ä¸åŠ è½½-1",
    "href": "1075-zero-inflated.html#å®‰è£…ä¸åŠ è½½-1",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\nlibrary(WeightIt)\nlibrary(cobalt)\nlibrary(survey)\nlibrary(ggplot2)\nlibrary(dplyr)\n\nset.seed(42)\ntheme_set(theme_bw(base_size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬ä¸€éƒ¨åˆ†æ•°æ®æ¨¡æ‹Ÿ",
    "href": "1075-zero-inflated.html#ç¬¬ä¸€éƒ¨åˆ†æ•°æ®æ¨¡æ‹Ÿ",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ•°æ®æ¨¡æ‹Ÿ",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ•°æ®æ¨¡æ‹Ÿ\n# æ¨¡æ‹Ÿè§‚å¯Ÿæ€§ç ”ç©¶æ•°æ®\nn &lt;- 1000\n\n# åå˜é‡\nage &lt;- rnorm(n, 50, 10)\nfemale &lt;- rbinom(n, 1, 0.5)\ncomorbidity &lt;- rbinom(n, 1, 0.3)\nseverity &lt;- rnorm(n, 0, 1)\n\n# æ²»ç–—åˆ†é…ï¼ˆééšæœºï¼‰\nps_true &lt;- plogis(-2 + 0.03 * age + 0.5 * female - 0.8 * comorbidity + 0.6 * severity)\ntreatment &lt;- rbinom(n, 1, ps_true)\n\n# ç»“å±€ï¼ˆæœ‰å› æœæ•ˆåº”ï¼‰\ny0 &lt;- 50 + 0.3 * age - 5 * comorbidity + 2 * severity + rnorm(n, 0, 5)\ny1 &lt;- y0 + 10 # çœŸå®æ²»ç–—æ•ˆåº” = 10\noutcome &lt;- ifelse(treatment == 1, y1, y0)\n\ndata &lt;- data.frame(\n    age, female, comorbidity, severity, treatment, outcome\n)\n\ncat(\"æ²»ç–—ç»„æ¯”ä¾‹:\", mean(treatment), \"\\n\")\ncat(\"çœŸå®ATE: 10\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬äºŒéƒ¨åˆ†ä¼°è®¡å€¾å‘æ€§å¾—åˆ†",
    "href": "1075-zero-inflated.html#ç¬¬äºŒéƒ¨åˆ†ä¼°è®¡å€¾å‘æ€§å¾—åˆ†",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šä¼°è®¡å€¾å‘æ€§å¾—åˆ†",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šä¼°è®¡å€¾å‘æ€§å¾—åˆ†\n# æ‹Ÿåˆå€¾å‘æ€§å¾—åˆ†æ¨¡å‹\nps_model &lt;- glm(treatment ~ age + female + comorbidity + severity,\n    data = data, family = binomial\n)\n\ndata$ps &lt;- predict(ps_model, type = \"response\")\n\n# å¯è§†åŒ–\nggplot(data, aes(x = ps, fill = factor(treatment))) +\n    geom_density(alpha = 0.6) +\n    scale_fill_manual(\n        values = c(\"#3b82f6\", \"#dc2626\"),\n        labels = c(\"å¯¹ç…§ç»„\", \"æ²»ç–—ç»„\")\n    ) +\n    labs(\n        title = \"å€¾å‘æ€§å¾—åˆ†åˆ†å¸ƒ\",\n        x = \"å€¾å‘æ€§å¾—åˆ†\", y = \"å¯†åº¦\", fill = \"ç»„åˆ«\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬ä¸‰éƒ¨åˆ†è®¡ç®—ipwæƒé‡",
    "href": "1075-zero-inflated.html#ç¬¬ä¸‰éƒ¨åˆ†è®¡ç®—ipwæƒé‡",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šè®¡ç®—IPWæƒé‡",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šè®¡ç®—IPWæƒé‡\n\nATEæƒé‡\n# ATE: ä¼°è®¡æ€»ä½“å¹³å‡æ•ˆåº”\ndata$ipw_ate &lt;- ifelse(data$treatment == 1,\n    1 / data$ps,\n    1 / (1 - data$ps)\n)\n\n# æŸ¥çœ‹æƒé‡åˆ†å¸ƒ\nsummary(data$ipw_ate)\n\n\nATTæƒé‡\n# ATT: ä¼°è®¡æ²»ç–—ç»„çš„æ•ˆåº”\ndata$ipw_att &lt;- ifelse(data$treatment == 1,\n    1,\n    data$ps / (1 - data$ps)\n)\n\nsummary(data$ipw_att)\n\n\næƒé‡ä¿®å‰ª\n# æç«¯æƒé‡å¯èƒ½å¯¼è‡´ä¸ç¨³å®š\n# ä¿®å‰ªåˆ°99ç™¾åˆ†ä½\nthreshold &lt;- quantile(data$ipw_ate, 0.99)\ndata$ipw_trimmed &lt;- pmin(data$ipw_ate, threshold)\n\ncat(\"ä¿®å‰ªå‰æœ€å¤§æƒé‡:\", max(data$ipw_ate), \"\\n\")\ncat(\"ä¿®å‰ªåæœ€å¤§æƒé‡:\", max(data$ipw_trimmed), \"\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬å››éƒ¨åˆ†ä½¿ç”¨-weightit-åŒ…",
    "href": "1075-zero-inflated.html#ç¬¬å››éƒ¨åˆ†ä½¿ç”¨-weightit-åŒ…",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šä½¿ç”¨ WeightIt åŒ…",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šä½¿ç”¨ WeightIt åŒ…\n# WeightIt ç®€åŒ–æƒé‡è®¡ç®—\nW &lt;- weightit(treatment ~ age + female + comorbidity + severity,\n    data = data, method = \"ps\", estimand = \"ATE\"\n)\n\nsummary(W)\n\nå¹³è¡¡æ£€éªŒ\n# cobaltåŒ…æ£€æŸ¥å¹³è¡¡\nbal.tab(W, stats = c(\"m\", \"v\"), thresholds = c(m = 0.1))\n# å¯è§†åŒ–å¹³è¡¡\nlove.plot(W, thresholds = c(m = 0.1))",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬äº”éƒ¨åˆ†åŠ æƒä¼°è®¡å› æœæ•ˆåº”",
    "href": "1075-zero-inflated.html#ç¬¬äº”éƒ¨åˆ†åŠ æƒä¼°è®¡å› æœæ•ˆåº”",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šåŠ æƒä¼°è®¡å› æœæ•ˆåº”",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šåŠ æƒä¼°è®¡å› æœæ•ˆåº”\n\nç®€å•åŠ æƒå‡å€¼å·®\n# æ‰‹åŠ¨è®¡ç®—\nweighted_mean_treat &lt;- weighted.mean(\n    data$outcome[data$treatment == 1],\n    data$ipw_ate[data$treatment == 1]\n)\nweighted_mean_control &lt;- weighted.mean(\n    data$outcome[data$treatment == 0],\n    data$ipw_ate[data$treatment == 0]\n)\n\nate_ipw &lt;- weighted_mean_treat - weighted_mean_control\ncat(\"IPWä¼°è®¡çš„ATE:\", round(ate_ipw, 2), \"\\n\")\ncat(\"çœŸå®ATE: 10\\n\")\n\n\nä½¿ç”¨surveyåŒ…\n# åˆ›å»ºåŠ æƒè®¾è®¡\ndesign &lt;- svydesign(ids = ~1, weights = ~ipw_ate, data = data)\n\n# åŠ æƒå›å½’\nmodel_weighted &lt;- svyglm(outcome ~ treatment, design = design)\nsummary(model_weighted)\n\n\nåŒç¨³å¥ä¼°è®¡\n# ç»“åˆIPWå’Œç»“å±€å›å½’\nmodel_dr &lt;- svyglm(outcome ~ treatment + age + female + comorbidity + severity,\n    design = design\n)\nsummary(model_dr)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬å…­éƒ¨åˆ†è¾¹é™…ç»“æ„æ¨¡å‹",
    "href": "1075-zero-inflated.html#ç¬¬å…­éƒ¨åˆ†è¾¹é™…ç»“æ„æ¨¡å‹",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šè¾¹é™…ç»“æ„æ¨¡å‹",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šè¾¹é™…ç»“æ„æ¨¡å‹\nè¾¹é™…ç»“æ„æ¨¡å‹ï¼ˆMSMï¼‰ç”¨äºå¤„ç†æ—¶å˜å¤„ç†å’Œæ—¶å˜æ··æ‚ã€‚\n# ç®€åŒ–ç¤ºä¾‹ï¼šç¨³å®šæƒé‡\n# ç¨³å®šæƒé‡ = P(A) / P(A|X)\np_treat &lt;- mean(data$treatment)\ndata$sw &lt;- ifelse(data$treatment == 1,\n    p_treat / data$ps,\n    (1 - p_treat) / (1 - data$ps)\n)\n\nsummary(data$sw)\n# ä½¿ç”¨ç¨³å®šæƒé‡\ndesign_sw &lt;- svydesign(ids = ~1, weights = ~sw, data = data)\nmsm_fit &lt;- svyglm(outcome ~ treatment, design = design_sw)\nsummary(msm_fit)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹-1",
    "href": "1075-zero-inflated.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹-1",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹\n\nè¯ç‰©æ²»ç–—æ•ˆæœè¯„ä¼°\n# æ¨¡æ‹Ÿè¯ç‰©ç ”ç©¶\nn &lt;- 2000\n\n# æ‚£è€…ç‰¹å¾\nage &lt;- round(rnorm(n, 60, 12))\ndiabetes &lt;- rbinom(n, 1, 0.25)\nhypertension &lt;- rbinom(n, 1, 0.4)\nprevious_event &lt;- rbinom(n, 1, 0.15)\nldl &lt;- rnorm(n, 130, 30)\n\n# è¯ç‰©åˆ†é…ï¼ˆåŒ»ç”Ÿåå¥½ + æ‚£è€…ç‰¹å¾ï¼‰\nps &lt;- plogis(-1 + 0.02 * age + 0.5 * diabetes + 0.3 * hypertension +\n    0.8 * previous_event + 0.01 * ldl)\ndrug &lt;- rbinom(n, 1, ps)\n\n# å¿ƒè¡€ç®¡äº‹ä»¶é£é™©\nbaseline_risk &lt;- plogis(-3 + 0.03 * age + 0.5 * diabetes + 0.4 * hypertension +\n    previous_event + 0.01 * ldl)\n# è¯ç‰©é™ä½é£é™©\ndrug_effect &lt;- -0.3\nevent_prob &lt;- plogis(qlogis(baseline_risk) + drug_effect * drug)\ncv_event &lt;- rbinom(n, 1, event_prob)\n\ndrug_data &lt;- data.frame(age, diabetes, hypertension, previous_event, ldl, drug, cv_event)\n\ncat(\"è¯ç‰©ä½¿ç”¨ç‡:\", mean(drug), \"\\n\")\ncat(\"äº‹ä»¶å‘ç”Ÿç‡:\", mean(cv_event), \"\\n\")\n# IPWåˆ†æ\nW_drug &lt;- weightit(drug ~ age + diabetes + hypertension + previous_event + ldl,\n    data = drug_data, method = \"ps\", estimand = \"ATE\"\n)\n\n# æ£€æŸ¥å¹³è¡¡\nbal.tab(W_drug, stats = \"m\", thresholds = c(m = 0.1))\n# åŠ æƒlogisticå›å½’\ndrug_data$weights &lt;- W_drug$weights\ndesign_drug &lt;- svydesign(ids = ~1, weights = ~weights, data = drug_data)\n\ndrug_effect_model &lt;- svyglm(cv_event ~ drug, design = design_drug, family = quasibinomial)\nsummary(drug_effect_model)\n\n# è®¡ç®—é£é™©æ¯”\nor &lt;- exp(coef(drug_effect_model)[\"drug\"])\ncat(\"\\nè¯ç‰©çš„OR:\", round(or, 3), \"\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-1",
    "href": "1075-zero-inflated.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-1",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n```{r eval=FALSE} # ===== WeightIt ===== library(WeightIt)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#å¤åˆç»“å±€ç®€ä»‹",
    "href": "1075-zero-inflated.html#å¤åˆç»“å±€ç®€ä»‹",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "å¤åˆç»“å±€ç®€ä»‹",
    "text": "å¤åˆç»“å±€ç®€ä»‹\nå¤åˆç»“å±€ï¼ˆComposite Endpointï¼‰ å°†å¤šä¸ªä¸´åºŠäº‹ä»¶åˆå¹¶ä¸ºå•ä¸€ç»ˆç‚¹ï¼Œå¸¸è§äºå¿ƒè¡€ç®¡å’Œè‚¿ç˜¤ä¸´åºŠè¯•éªŒã€‚å…¸å‹ä¾‹å­åŒ…æ‹¬MACEï¼ˆä¸»è¦ä¸è‰¯å¿ƒè¡€ç®¡äº‹ä»¶ï¼‰å’ŒDFSï¼ˆæ— ç—…ç”Ÿå­˜ï¼‰ã€‚\n\nä¸ºä»€ä¹ˆä½¿ç”¨å¤åˆç»“å±€ï¼Ÿ\n\n\n\nä¼˜åŠ¿\nè¯´æ˜\n\n\n\n\næé«˜äº‹ä»¶ç‡\nå¢åŠ ç»Ÿè®¡æ•ˆåŠ›\n\n\nå‡å°‘æ ·æœ¬é‡\né™ä½è¯•éªŒæˆæœ¬\n\n\næ•æ‰å…¨é¢æ•ˆæœ\nå¤šæ–¹é¢è¯„ä¼°æ²»ç–—\n\n\n\n\n\nä¸»è¦æŒ‘æˆ˜\n\nç»„åˆ†äº‹ä»¶é‡è¦ç¨‹åº¦ä¸åŒ\næ•ˆåº”æ–¹å‘å¯èƒ½ä¸ä¸€è‡´\nè§£é‡Šå¤æ‚",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#å®‰è£…ä¸åŠ è½½-2",
    "href": "1075-zero-inflated.html#å®‰è£…ä¸åŠ è½½-2",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\nlibrary(survival)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(tidyr)\n\nset.seed(42)\ntheme_set(theme_bw(base_size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬ä¸€éƒ¨åˆ†æ¨¡æ‹Ÿå¤åˆç»“å±€æ•°æ®",
    "href": "1075-zero-inflated.html#ç¬¬ä¸€éƒ¨åˆ†æ¨¡æ‹Ÿå¤åˆç»“å±€æ•°æ®",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ¨¡æ‹Ÿå¤åˆç»“å±€æ•°æ®",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ¨¡æ‹Ÿå¤åˆç»“å±€æ•°æ®\n# æ¨¡æ‹Ÿå¿ƒè¡€ç®¡è¯•éªŒæ•°æ®\nn &lt;- 1000\n\n# æ²»ç–—åˆ†é…\ntreatment &lt;- rep(c(0, 1), each = n / 2)\n\n# ä¸‰ä¸ªç»„åˆ†äº‹ä»¶çš„é£é™©\n# æ­»äº¡ï¼šæ²»ç–—é™ä½é£é™©\ndeath_hazard &lt;- ifelse(treatment == 1, 0.02, 0.03)\n# MIï¼šæ²»ç–—ç•¥é™é£é™©\nmi_hazard &lt;- ifelse(treatment == 1, 0.04, 0.05)\n# å’ä¸­ï¼šæ²»ç–—æ— æ•ˆ\nstroke_hazard &lt;- 0.02\n\n# ç”Ÿæˆäº‹ä»¶æ—¶é—´ï¼ˆæŒ‡æ•°åˆ†å¸ƒï¼‰\ntime_death &lt;- rexp(n, death_hazard)\ntime_mi &lt;- rexp(n, mi_hazard)\ntime_stroke &lt;- rexp(n, stroke_hazard)\n\n# åˆ å¤±æ—¶é—´\ncensor_time &lt;- runif(n, 3, 5)\n\n# ç¡®å®šé¦–å‘äº‹ä»¶\nfirst_event_time &lt;- pmin(time_death, time_mi, time_stroke, censor_time)\nevent_type &lt;- case_when(\n    first_event_time == censor_time ~ 0, # åˆ å¤±\n    first_event_time == time_death ~ 1, # æ­»äº¡\n    first_event_time == time_mi ~ 2, # MI\n    first_event_time == time_stroke ~ 3 # å’ä¸­\n)\n\n# å¤åˆç»“å±€\ncomposite_event &lt;- as.numeric(event_type &gt; 0)\n\ntrial_data &lt;- data.frame(\n    id = 1:n,\n    treatment = factor(treatment, labels = c(\"æ§åˆ¶\", \"æ²»ç–—\")),\n    time = first_event_time,\n    composite_event,\n    event_type = factor(event_type, labels = c(\"åˆ å¤±\", \"æ­»äº¡\", \"MI\", \"å’ä¸­\"))\n)\n\n# æè¿°æ€§ç»Ÿè®¡\ncat(\"äº‹ä»¶åˆ†å¸ƒ:\\n\")\nprint(table(trial_data$treatment, trial_data$event_type))",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬äºŒéƒ¨åˆ†ä¼ ç»Ÿå¤åˆç»“å±€åˆ†æ",
    "href": "1075-zero-inflated.html#ç¬¬äºŒéƒ¨åˆ†ä¼ ç»Ÿå¤åˆç»“å±€åˆ†æ",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šä¼ ç»Ÿå¤åˆç»“å±€åˆ†æ",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šä¼ ç»Ÿå¤åˆç»“å±€åˆ†æ\n\nKaplan-Meieræ›²çº¿\n# å¤åˆç»“å±€çš„KMåˆ†æ\nsurv_obj &lt;- Surv(trial_data$time, trial_data$composite_event)\nkm_fit &lt;- survfit(surv_obj ~ treatment, data = trial_data)\n\n# å¯è§†åŒ–\nplot(km_fit,\n    col = c(\"#3b82f6\", \"#dc2626\"), lwd = 2,\n    xlab = \"æ—¶é—´ï¼ˆå¹´ï¼‰\", ylab = \"æ— äº‹ä»¶ç”Ÿå­˜ç‡\",\n    main = \"å¤åˆç»“å±€ï¼šæ— MACEç”Ÿå­˜æ›²çº¿\"\n)\nlegend(\"bottomleft\", c(\"æ§åˆ¶ç»„\", \"æ²»ç–—ç»„\"), col = c(\"#3b82f6\", \"#dc2626\"), lwd = 2)\n\n\nCoxå›å½’\n# Coxæ¨¡å‹\ncox_composite &lt;- coxph(Surv(time, composite_event) ~ treatment, data = trial_data)\nsummary(cox_composite)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬ä¸‰éƒ¨åˆ†ç»„åˆ†åˆ†æ",
    "href": "1075-zero-inflated.html#ç¬¬ä¸‰éƒ¨åˆ†ç»„åˆ†åˆ†æ",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šç»„åˆ†åˆ†æ",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šç»„åˆ†åˆ†æ\n\nå„ç»„åˆ†çš„ç‹¬ç«‹åˆ†æ\n# åˆ†åˆ«åˆ†ææ¯ä¸ªç»„åˆ†\ncomponents &lt;- c(\"æ­»äº¡\", \"MI\", \"å’ä¸­\")\ncomponent_results &lt;- list()\n\nfor (comp in components) {\n    trial_data[[paste0(\"event_\", comp)]] &lt;- as.numeric(trial_data$event_type == comp)\n\n    # Coxæ¨¡å‹\n    formula &lt;- as.formula(paste0(\"Surv(time, event_\", comp, \") ~ treatment\"))\n    fit &lt;- coxph(formula, data = trial_data)\n\n    component_results[[comp]] &lt;- data.frame(\n        Component = comp,\n        HR = exp(coef(fit)),\n        CI_lower = exp(confint(fit))[1],\n        CI_upper = exp(confint(fit))[2],\n        p_value = summary(fit)$coefficients[5]\n    )\n}\n\nresults_df &lt;- do.call(rbind, component_results)\nprint(results_df)\n\n\næ£®æ—å›¾\n# æ·»åŠ å¤åˆç»“å±€ç»“æœ\ncomposite_hr &lt;- exp(coef(cox_composite))\ncomposite_ci &lt;- exp(confint(cox_composite))\n\nall_results &lt;- rbind(\n    results_df,\n    data.frame(\n        Component = \"å¤åˆç»“å±€\",\n        HR = composite_hr,\n        CI_lower = composite_ci[1],\n        CI_upper = composite_ci[2],\n        p_value = summary(cox_composite)$coefficients[5]\n    )\n)\n\n# æ£®æ—å›¾\nggplot(all_results, aes(x = HR, y = Component)) +\n    geom_point(size = 3) +\n    geom_errorbarh(aes(xmin = CI_lower, xmax = CI_upper), height = 0.2) +\n    geom_vline(xintercept = 1, linetype = \"dashed\", color = \"gray50\") +\n    scale_x_log10() +\n    labs(\n        title = \"å¤åˆç»“å±€åŠç»„åˆ†åˆ†æ\",\n        x = \"é£é™©æ¯” (95% CI)\", y = \"\"\n    ) +\n    theme(axis.text.y = element_text(size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬å››éƒ¨åˆ†win-ratioæ–¹æ³•",
    "href": "1075-zero-inflated.html#ç¬¬å››éƒ¨åˆ†win-ratioæ–¹æ³•",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šWin Ratioæ–¹æ³•",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šWin Ratioæ–¹æ³•\nWin Ratioæ˜¯å¤„ç†æœ‰åºå¤åˆç»“å±€çš„æ–°æ–¹æ³•ï¼Œè€ƒè™‘äº‹ä»¶çš„ä¸´åºŠé‡è¦æ€§ã€‚\n\nWin RatioåŸç†\n# æ‰‹åŠ¨è®¡ç®—Win Ratio\n# æŒ‰é‡è¦æ€§æ’åºï¼šæ­»äº¡ &gt; MI &gt; å’ä¸­\n\ncalculate_win_ratio &lt;- function(data) {\n    treat &lt;- data[data$treatment == \"æ²»ç–—\", ]\n    control &lt;- data[data$treatment == \"æ§åˆ¶\", ]\n\n    wins &lt;- 0\n    losses &lt;- 0\n    ties &lt;- 0\n\n    for (i in 1:nrow(treat)) {\n        for (j in 1:nrow(control)) {\n            # æ¯”è¾ƒæ­»äº¡\n            if (treat$event_æ­»äº¡[i] == 0 && control$event_æ­»äº¡[j] == 1 &&\n                treat$time[i] &gt; control$time[j]) {\n                wins &lt;- wins + 1\n            } else if (treat$event_æ­»äº¡[i] == 1 && control$event_æ­»äº¡[j] == 0 &&\n                treat$time[i] &lt; control$time[j]) {\n                losses &lt;- losses + 1\n            } else {\n                # ç»§ç»­æ¯”è¾ƒMIï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼‰\n                if (treat$event_MI[i] == 0 && control$event_MI[j] == 1) {\n                    wins &lt;- wins + 1\n                } else if (treat$event_MI[i] == 1 && control$event_MI[j] == 0) {\n                    losses &lt;- losses + 1\n                } else {\n                    ties &lt;- ties + 1\n                }\n            }\n        }\n    }\n\n    list(\n        wins = wins, losses = losses, ties = ties,\n        win_ratio = wins / losses\n    )\n}\n\n# ç®€åŒ–ç¤ºä¾‹ï¼ˆå®Œæ•´ç‰ˆéœ€è¦æ›´å¤æ‚çš„é…å¯¹é€»è¾‘ï¼‰\ncat(\"Win Ratioæ¦‚å¿µæ¼”ç¤º:\\n\")\ncat(\"æ²»ç–—ç»„'èµ¢'ï¼šæ²»ç–—æ‚£è€…æ¯”å¯¹ç…§æ‚£è€…ç»“å±€æ›´å¥½\\n\")\ncat(\"Win Ratio = èµ¢æ¬¡æ•° / è¾“æ¬¡æ•°\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬äº”éƒ¨åˆ†äº‹ä»¶è´Ÿæ‹…åˆ†æ",
    "href": "1075-zero-inflated.html#ç¬¬äº”éƒ¨åˆ†äº‹ä»¶è´Ÿæ‹…åˆ†æ",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šäº‹ä»¶è´Ÿæ‹…åˆ†æ",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šäº‹ä»¶è´Ÿæ‹…åˆ†æ\n# è®¡ç®—å„ç»„åˆ†å¯¹å¤åˆç»“å±€çš„è´¡çŒ®\ncontribution &lt;- trial_data %&gt;%\n    filter(composite_event == 1) %&gt;%\n    group_by(treatment, event_type) %&gt;%\n    summarise(n = n(), .groups = \"drop\") %&gt;%\n    group_by(treatment) %&gt;%\n    mutate(prop = n / sum(n))\n\nggplot(contribution, aes(x = treatment, y = prop, fill = event_type)) +\n    geom_col() +\n    scale_fill_manual(values = c(\"#dc2626\", \"#f97316\", \"#eab308\")) +\n    labs(\n        title = \"å¤åˆç»“å±€ç»„åˆ†æ„æˆ\",\n        x = \"æ²»ç–—ç»„\", y = \"æ¯”ä¾‹\", fill = \"äº‹ä»¶ç±»å‹\"\n    ) +\n    scale_y_continuous(labels = scales::percent)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬å…­éƒ¨åˆ†æ•æ„Ÿæ€§åˆ†æ",
    "href": "1075-zero-inflated.html#ç¬¬å…­éƒ¨åˆ†æ•æ„Ÿæ€§åˆ†æ",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šæ•æ„Ÿæ€§åˆ†æ",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šæ•æ„Ÿæ€§åˆ†æ\n\nä½¿ç”¨ç«äº‰é£é™©æ¡†æ¶\n# å°†å¤åˆç»“å±€ä½œä¸ºç«äº‰é£é™©åˆ†æ\nlibrary(cmprsk)\n\n# åˆ›å»ºç«äº‰é£é™©æ•°æ®\ntrial_data$event_num &lt;- as.numeric(trial_data$event_type) - 1 # 0=åˆ å¤±, 1=æ­»äº¡, 2=MI, 3=å’ä¸­\ntrial_data$treat_num &lt;- as.numeric(trial_data$treatment) - 1\n\n# Grayæ£€éªŒ\ngray_test &lt;- cuminc(trial_data$time, trial_data$event_num,\n    group = trial_data$treat_num\n)\n\n# ç»˜åˆ¶ç´¯ç§¯å‘ç—…ç‡\nplot(gray_test,\n    main = \"å„äº‹ä»¶ç´¯ç§¯å‘ç—…ç‡\",\n    xlab = \"æ—¶é—´ï¼ˆå¹´ï¼‰\", ylab = \"ç´¯ç§¯å‘ç—…ç‡\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬ä¸ƒéƒ¨åˆ†æŠ¥å‘Šæ¨¡æ¿",
    "href": "1075-zero-inflated.html#ç¬¬ä¸ƒéƒ¨åˆ†æŠ¥å‘Šæ¨¡æ¿",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæŠ¥å‘Šæ¨¡æ¿",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæŠ¥å‘Šæ¨¡æ¿\n# ç”Ÿæˆå¤åˆç»“å±€åˆ†ææŠ¥å‘Š\ncat(\"=== å¤åˆç»“å±€åˆ†ææŠ¥å‘Š ===\\n\\n\")\n\ncat(\"1. æ ·æœ¬é‡:\", n, \"\\n\")\ncat(\"2. éšè®¿æ—¶é—´:\", round(median(trial_data$time), 2), \"å¹´ï¼ˆä¸­ä½æ•°ï¼‰\\n\\n\")\n\ncat(\"3. äº‹ä»¶å‘ç”Ÿ:\\n\")\nevent_summary &lt;- trial_data %&gt;%\n    group_by(treatment) %&gt;%\n    summarise(\n        N = n(),\n        å¤åˆç»“å±€ = sum(composite_event),\n        æ­»äº¡ = sum(event_type == \"æ­»äº¡\"),\n        MI = sum(event_type == \"MI\"),\n        å’ä¸­ = sum(event_type == \"å’ä¸­\")\n    )\nprint(event_summary)\n\ncat(\"\\n4. æ²»ç–—æ•ˆæœ:\\n\")\ncat(\n    \"å¤åˆç»“å±€ HR:\", round(exp(coef(cox_composite)), 3),\n    \"(95% CI:\", round(exp(confint(cox_composite))[1], 3), \"-\",\n    round(exp(confint(cox_composite))[2], 3), \")\\n\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-2",
    "href": "1075-zero-inflated.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-2",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n```{r eval=FALSE} # ===== å¤åˆç»“å±€ç”Ÿå­˜åˆ†æ ===== library(survival)\nsurv_obj &lt;- Surv(time, composite_event) coxph(surv_obj ~ treatment, data = df)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#rstanarm-ç®€ä»‹",
    "href": "1075-zero-inflated.html#rstanarm-ç®€ä»‹",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "rstanarm ç®€ä»‹",
    "text": "rstanarm ç®€ä»‹\nrstanarm æ˜¯Stançš„Ræ¥å£ï¼Œæä¾›ä¸ lm(), glm() ç±»ä¼¼çš„è¯­æ³•è¿›è¡Œè´å¶æ–¯å›å½’ã€‚æ— éœ€å­¦ä¹ Stanè¯­è¨€ï¼Œå³å¯è·å¾—è´å¶æ–¯æ¨æ–­çš„ä¼˜åŠ¿ã€‚\n\nä¸ºä»€ä¹ˆä½¿ç”¨è´å¶æ–¯æ–¹æ³•ï¼Ÿ\n\n\n\né¢‘ç‡å­¦æ´¾\nè´å¶æ–¯ä¼˜åŠ¿\n\n\n\n\nç‚¹ä¼°è®¡+ç½®ä¿¡åŒºé—´\nå®Œæ•´åéªŒåˆ†å¸ƒ\n\n\næ ·æœ¬é‡ä¾èµ–\nå¯èå…¥å…ˆéªŒçŸ¥è¯†\n\n\néš¾ä»¥è§£é‡Š\nç›´è§‚æ¦‚ç‡è§£é‡Š\n\n\nå¤šé‡æ¯”è¾ƒé—®é¢˜\nè‡ªç„¶å¤„ç†ä¸ç¡®å®šæ€§\n\n\n\n\n\nrstanarm ä¼˜åŠ¿\n\nç†Ÿæ‚‰çš„å…¬å¼è¯­æ³•\nè‡ªåŠ¨é€‰æ‹©åˆç†å…ˆéªŒ\nä¸tidyverseå…¼å®¹\nä¸°å¯Œçš„è¯Šæ–­å·¥å…·",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#å®‰è£…ä¸åŠ è½½-3",
    "href": "1075-zero-inflated.html#å®‰è£…ä¸åŠ è½½-3",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\nlibrary(rstanarm)\nlibrary(bayesplot)\nlibrary(ggplot2)\nlibrary(dplyr)\n\nset.seed(42)\ntheme_set(theme_bw(base_size = 12))\n\n# è®¾ç½®å¹¶è¡Œ\noptions(mc.cores = parallel::detectCores())",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬ä¸€éƒ¨åˆ†çº¿æ€§å›å½’",
    "href": "1075-zero-inflated.html#ç¬¬ä¸€éƒ¨åˆ†çº¿æ€§å›å½’",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šçº¿æ€§å›å½’",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šçº¿æ€§å›å½’\n\nåŸºæœ¬æ‹Ÿåˆ\n# ä½¿ç”¨mtcarsæ•°æ®\ndata(mtcars)\n\n# è´å¶æ–¯çº¿æ€§å›å½’\nbayes_lm &lt;- stan_glm(mpg ~ wt + hp,\n    data = mtcars,\n    family = gaussian(),\n    seed = 42,\n    refresh = 0\n) # é™é»˜è¾“å‡º\n\n# æŸ¥çœ‹ç»“æœ\nprint(bayes_lm)\n\n\nåéªŒåˆ†å¸ƒ\n# æå–åéªŒæ ·æœ¬\nposterior &lt;- as.data.frame(bayes_lm)\nhead(posterior)\n# åéªŒåˆ†å¸ƒå¯è§†åŒ–\nmcmc_dens(bayes_lm, pars = c(\"wt\", \"hp\")) +\n    labs(title = \"ç³»æ•°åéªŒåˆ†å¸ƒ\")\n\n\nä¸é¢‘ç‡æ³•æ¯”è¾ƒ\n# é¢‘ç‡lm\nfreq_lm &lt;- lm(mpg ~ wt + hp, data = mtcars)\n\n# æ¯”è¾ƒ\ncat(\"é¢‘ç‡æ³•ä¼°è®¡:\\n\")\nprint(coef(freq_lm))\ncat(\"\\nè´å¶æ–¯åéªŒå‡å€¼:\\n\")\nprint(coef(bayes_lm))",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬äºŒéƒ¨åˆ†å…ˆéªŒè®¾ç½®",
    "href": "1075-zero-inflated.html#ç¬¬äºŒéƒ¨åˆ†å…ˆéªŒè®¾ç½®",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šå…ˆéªŒè®¾ç½®",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šå…ˆéªŒè®¾ç½®\n\né»˜è®¤å…ˆéªŒ\n# æŸ¥çœ‹é»˜è®¤å…ˆéªŒ\nprior_summary(bayes_lm)\n\n\nè‡ªå®šä¹‰å…ˆéªŒ\n# ä½¿ç”¨ä¿¡æ¯æ€§å…ˆéªŒ\nbayes_lm_informed &lt;- stan_glm(\n    mpg ~ wt + hp,\n    data = mtcars,\n    prior = normal(c(-5, 0), c(2, 0.1)), # wtå’Œhpçš„å…ˆéªŒ\n    prior_intercept = normal(30, 10),\n    seed = 42,\n    refresh = 0\n)\n\n# æ¯”è¾ƒç»“æœ\ncat(\"é»˜è®¤å…ˆéªŒä¼°è®¡:\\n\")\nprint(coef(bayes_lm))\ncat(\"\\nä¿¡æ¯æ€§å…ˆéªŒä¼°è®¡:\\n\")\nprint(coef(bayes_lm_informed))\n\n\nå…ˆéªŒé¢„æµ‹æ£€æŸ¥\n# å…ˆéªŒé¢„æµ‹åˆ†å¸ƒ\nbayes_lm_prior &lt;- stan_glm(\n    mpg ~ wt + hp,\n    data = mtcars,\n    prior_PD = TRUE, # åªä»å…ˆéªŒé‡‡æ ·\n    seed = 42,\n    refresh = 0\n)\n\n# å¯è§†åŒ–\npp_check(bayes_lm_prior, nreps = 50) +\n    labs(\n        title = \"å…ˆéªŒé¢„æµ‹æ£€æŸ¥\",\n        subtitle = \"å…ˆéªŒæ˜¯å¦äº§ç”Ÿåˆç†çš„æ•°æ®èŒƒå›´ï¼Ÿ\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬ä¸‰éƒ¨åˆ†åéªŒæ¨æ–­",
    "href": "1075-zero-inflated.html#ç¬¬ä¸‰éƒ¨åˆ†åéªŒæ¨æ–­",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šåéªŒæ¨æ–­",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šåéªŒæ¨æ–­\n\nå¯ä¿¡åŒºé—´\n# åéªŒåŒºé—´\nposterior_interval(bayes_lm, prob = 0.95)\n\n\næ¦‚ç‡é™ˆè¿°\n# è®¡ç®—ç‰¹å®šæ¦‚ç‡\n# wtæ•ˆåº”å°äº-4çš„æ¦‚ç‡\nprob_wt &lt;- mean(posterior$wt &lt; -4)\ncat(\"P(wtç³»æ•° &lt; -4) =\", round(prob_wt, 3), \"\\n\")\n\n# hpæ•ˆåº”ä¸ºè´Ÿçš„æ¦‚ç‡\nprob_hp_neg &lt;- mean(posterior$hp &lt; 0)\ncat(\"P(hpç³»æ•° &lt; 0) =\", round(prob_hp_neg, 3), \"\\n\")\n\n\nåéªŒé¢„æµ‹\n# æ–°æ•°æ®é¢„æµ‹\nnew_car &lt;- data.frame(wt = 3, hp = 120)\n\n# åéªŒé¢„æµ‹åˆ†å¸ƒ\npred_post &lt;- posterior_predict(bayes_lm, newdata = new_car)\n\n# é¢„æµ‹åŒºé—´\ncat(\"é¢„æµ‹mpg (95%åŒºé—´):\\n\")\ncat(\"å‡å€¼:\", round(mean(pred_post), 2), \"\\n\")\ncat(\"åŒºé—´:\", round(quantile(pred_post, c(0.025, 0.975)), 2), \"\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬å››éƒ¨åˆ†æ¨¡å‹è¯Šæ–­",
    "href": "1075-zero-inflated.html#ç¬¬å››éƒ¨åˆ†æ¨¡å‹è¯Šæ–­",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šæ¨¡å‹è¯Šæ–­",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šæ¨¡å‹è¯Šæ–­\n\nMCMCè¯Šæ–­\n# è½¨è¿¹å›¾\nmcmc_trace(bayes_lm, pars = c(\"wt\", \"hp\"))\n# R-hatå’Œæœ‰æ•ˆæ ·æœ¬é‡\nsummary(bayes_lm)[, c(\"Rhat\", \"n_eff\")]\n\n\nåéªŒé¢„æµ‹æ£€æŸ¥\n# åéªŒé¢„æµ‹ vs è§‚æµ‹æ•°æ®\npp_check(bayes_lm, nreps = 50) +\n    labs(\n        title = \"åéªŒé¢„æµ‹æ£€æŸ¥\",\n        subtitle = \"æ¨¡å‹èƒ½å¦é‡ç°è§‚æµ‹æ•°æ®çš„åˆ†å¸ƒï¼Ÿ\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬äº”éƒ¨åˆ†logisticå›å½’",
    "href": "1075-zero-inflated.html#ç¬¬äº”éƒ¨åˆ†logisticå›å½’",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šLogisticå›å½’",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šLogisticå›å½’\n# äºŒåˆ†ç±»ç»“å±€\nmtcars$am_factor &lt;- factor(mtcars$am)\n\nbayes_logit &lt;- stan_glm(\n    am_factor ~ wt + hp,\n    data = mtcars,\n    family = binomial(link = \"logit\"),\n    seed = 42,\n    refresh = 0\n)\n\nprint(bayes_logit)\n# ORå’Œå¯ä¿¡åŒºé—´\nor_posterior &lt;- exp(as.data.frame(bayes_logit)[, c(\"wt\", \"hp\")])\n\ncat(\"ORä¼°è®¡ (åéªŒä¸­ä½æ•°):\\n\")\ncat(\"wt:\", round(median(or_posterior$wt), 3), \"\\n\")\ncat(\"hp:\", round(median(or_posterior$hp), 3), \"\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬å…­éƒ¨åˆ†æ¨¡å‹æ¯”è¾ƒ-1",
    "href": "1075-zero-inflated.html#ç¬¬å…­éƒ¨åˆ†æ¨¡å‹æ¯”è¾ƒ-1",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹æ¯”è¾ƒ",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹æ¯”è¾ƒ\n\nLOOäº¤å‰éªŒè¯\n# Leave-one-outäº¤å‰éªŒè¯\nloo_lm &lt;- loo(bayes_lm)\nprint(loo_lm)\n# æ¯”è¾ƒå¤šä¸ªæ¨¡å‹\nbayes_lm2 &lt;- stan_glm(mpg ~ wt + hp + disp,\n    data = mtcars,\n    seed = 42, refresh = 0\n)\n\nloo_lm2 &lt;- loo(bayes_lm2)\n\n# æ¨¡å‹æ¯”è¾ƒ\nloo_compare(loo_lm, loo_lm2)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#ç¬¬ä¸ƒéƒ¨åˆ†å±‚æ¬¡æ¨¡å‹",
    "href": "1075-zero-inflated.html#ç¬¬ä¸ƒéƒ¨åˆ†å±‚æ¬¡æ¨¡å‹",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå±‚æ¬¡æ¨¡å‹",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå±‚æ¬¡æ¨¡å‹\n# åˆ†ç»„æ•°æ®\ndata(sleepstudy, package = \"lme4\")\n\n# è´å¶æ–¯æ··åˆæ•ˆåº”æ¨¡å‹\nbayes_hier &lt;- stan_lmer(\n    Reaction ~ Days + (Days | Subject),\n    data = sleepstudy,\n    seed = 42,\n    refresh = 0\n)\n\nprint(bayes_hier, digits = 2)\n# éšæœºæ•ˆåº”åéªŒ\nranef_post &lt;- as.data.frame(bayes_hier)\nranef_cols &lt;- grep(\"^b\\\\[\", names(ranef_post), value = TRUE)\ncat(\"éšæœºæ•ˆåº”æ•°é‡:\", length(ranef_cols), \"\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-3",
    "href": "1075-zero-inflated.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-3",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n```{r eval=FALSE} # ===== åŸºæœ¬æ¨¡å‹ ===== library(rstanarm)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#å°ç»“-1",
    "href": "1075-zero-inflated.html#å°ç»“-1",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "å°ç»“",
    "text": "å°ç»“\nrstanarmçš„æ ¸å¿ƒå·¥ä½œæµç¨‹ï¼š\n\næ¨¡å‹è®¾å®šï¼šä½¿ç”¨ç†Ÿæ‚‰çš„å…¬å¼è¯­æ³•\nå…ˆéªŒé€‰æ‹©ï¼šé»˜è®¤å…ˆéªŒé€šå¸¸åˆç†ï¼Œæˆ–è‡ªå®šä¹‰\næ‹Ÿåˆï¼šè‡ªåŠ¨MCMCé‡‡æ ·\nè¯Šæ–­ï¼šæ£€æŸ¥R-hatã€è½¨è¿¹å›¾ã€åéªŒé¢„æµ‹\næ¨æ–­ï¼šåˆ©ç”¨å®Œæ•´åéªŒåˆ†å¸ƒ\n\n\nä¼˜åŠ¿ï¼šè´å¶æ–¯æ–¹æ³•è®©ä½ èƒ½å¤Ÿç›´æ¥é™ˆè¿°â€å‚æ•°åœ¨åŒºé—´å†…çš„æ¦‚ç‡â€ï¼Œè€Œéâ€å¦‚æœé‡å¤å®éªŒâ€¦â€",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1075-zero-inflated.html#å‚è€ƒèµ„æº-1",
    "href": "1075-zero-inflated.html#å‚è€ƒèµ„æº-1",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nrstanarmå®˜æ–¹æ–‡æ¡£\nStanç”¨æˆ·æŒ‡å—\nGelman et al.Â (2020). Regression and Other Stories.",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ”¢ å›å½’åˆ†æ",
      "é›¶è†¨èƒ€æ¨¡å‹"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html",
    "href": "1076-ipw-weighting.html",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "",
    "text": "å€’æ¦‚ç‡åŠ æƒï¼ˆInverse Probability Weighting, IPWï¼‰ æ˜¯å› æœæ¨æ–­ä¸­åˆ›å»ºä¼ªéšæœºåŒ–çš„å…³é”®æŠ€æœ¯ã€‚é€šè¿‡æ ¹æ®å€¾å‘æ€§å¾—åˆ†å¯¹è§‚æµ‹å€¼åŠ æƒï¼Œä½¿å¤„ç†ç»„å’Œå¯¹ç…§ç»„åœ¨åå˜é‡ä¸Šå¯æ¯”ã€‚\n\n\n\n\n\nç‰¹ç‚¹\nPSMåŒ¹é…\nIPWåŠ æƒ\n\n\n\n\næ ·æœ¬ä½¿ç”¨\nä¸¢å¼ƒæœªåŒ¹é…æ ·æœ¬\nä¿ç•™å…¨éƒ¨æ ·æœ¬\n\n\nç»Ÿè®¡æ•ˆç‡\nè¾ƒä½\nè¾ƒé«˜\n\n\næç«¯å€¼å¤„ç†\nè‡ªåŠ¨æ’é™¤\néœ€æƒé‡ä¿®å‰ª\n\n\nä¼°è®¡ç±»å‹\nATT\nATE/ATTå¯é€‰\n\n\n\n\n\n\n\nå¤„ç†æ¦‚ç‡ä½çš„äººæ¥å—å¤„ç† â†’ ä»£è¡¨æ›´å¤šåŒç±»äºº â†’ æƒé‡é«˜\nå¤„ç†æ¦‚ç‡é«˜çš„äººæ¥å—å¤„ç† â†’ ä»£è¡¨è¾ƒå°‘åŒç±»äºº â†’ æƒé‡ä½",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#ipw-ç®€ä»‹",
    "href": "1076-ipw-weighting.html#ipw-ç®€ä»‹",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "",
    "text": "å€’æ¦‚ç‡åŠ æƒï¼ˆInverse Probability Weighting, IPWï¼‰ æ˜¯å› æœæ¨æ–­ä¸­åˆ›å»ºä¼ªéšæœºåŒ–çš„å…³é”®æŠ€æœ¯ã€‚é€šè¿‡æ ¹æ®å€¾å‘æ€§å¾—åˆ†å¯¹è§‚æµ‹å€¼åŠ æƒï¼Œä½¿å¤„ç†ç»„å’Œå¯¹ç…§ç»„åœ¨åå˜é‡ä¸Šå¯æ¯”ã€‚\n\n\n\n\n\nç‰¹ç‚¹\nPSMåŒ¹é…\nIPWåŠ æƒ\n\n\n\n\næ ·æœ¬ä½¿ç”¨\nä¸¢å¼ƒæœªåŒ¹é…æ ·æœ¬\nä¿ç•™å…¨éƒ¨æ ·æœ¬\n\n\nç»Ÿè®¡æ•ˆç‡\nè¾ƒä½\nè¾ƒé«˜\n\n\næç«¯å€¼å¤„ç†\nè‡ªåŠ¨æ’é™¤\néœ€æƒé‡ä¿®å‰ª\n\n\nä¼°è®¡ç±»å‹\nATT\nATE/ATTå¯é€‰\n\n\n\n\n\n\n\nå¤„ç†æ¦‚ç‡ä½çš„äººæ¥å—å¤„ç† â†’ ä»£è¡¨æ›´å¤šåŒç±»äºº â†’ æƒé‡é«˜\nå¤„ç†æ¦‚ç‡é«˜çš„äººæ¥å—å¤„ç† â†’ ä»£è¡¨è¾ƒå°‘åŒç±»äºº â†’ æƒé‡ä½",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#å®‰è£…ä¸åŠ è½½",
    "href": "1076-ipw-weighting.html#å®‰è£…ä¸åŠ è½½",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\nlibrary(WeightIt)\nlibrary(cobalt)\nlibrary(survey)\nlibrary(ggplot2)\nlibrary(dplyr)\n\nset.seed(42)\ntheme_set(theme_bw(base_size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#ç¬¬ä¸€éƒ¨åˆ†æ•°æ®æ¨¡æ‹Ÿ",
    "href": "1076-ipw-weighting.html#ç¬¬ä¸€éƒ¨åˆ†æ•°æ®æ¨¡æ‹Ÿ",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ•°æ®æ¨¡æ‹Ÿ",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ•°æ®æ¨¡æ‹Ÿ\n\n# æ¨¡æ‹Ÿè§‚å¯Ÿæ€§ç ”ç©¶æ•°æ®\nn &lt;- 1000\n\n# åå˜é‡\nage &lt;- rnorm(n, 50, 10)\nfemale &lt;- rbinom(n, 1, 0.5)\ncomorbidity &lt;- rbinom(n, 1, 0.3)\nseverity &lt;- rnorm(n, 0, 1)\n\n# æ²»ç–—åˆ†é…ï¼ˆééšæœºï¼‰\nps_true &lt;- plogis(-2 + 0.03 * age + 0.5 * female - 0.8 * comorbidity + 0.6 * severity)\ntreatment &lt;- rbinom(n, 1, ps_true)\n\n# ç»“å±€ï¼ˆæœ‰å› æœæ•ˆåº”ï¼‰\ny0 &lt;- 50 + 0.3 * age - 5 * comorbidity + 2 * severity + rnorm(n, 0, 5)\ny1 &lt;- y0 + 10 # çœŸå®æ²»ç–—æ•ˆåº” = 10\noutcome &lt;- ifelse(treatment == 1, y1, y0)\n\ndata &lt;- data.frame(\n    age, female, comorbidity, severity, treatment, outcome\n)\n\ncat(\"æ²»ç–—ç»„æ¯”ä¾‹:\", mean(treatment), \"\\n\")\n\næ²»ç–—ç»„æ¯”ä¾‹: 0.373 \n\ncat(\"çœŸå®ATE: 10\\n\")\n\nçœŸå®ATE: 10",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#ç¬¬äºŒéƒ¨åˆ†ä¼°è®¡å€¾å‘æ€§å¾—åˆ†",
    "href": "1076-ipw-weighting.html#ç¬¬äºŒéƒ¨åˆ†ä¼°è®¡å€¾å‘æ€§å¾—åˆ†",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šä¼°è®¡å€¾å‘æ€§å¾—åˆ†",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šä¼°è®¡å€¾å‘æ€§å¾—åˆ†\n\n# æ‹Ÿåˆå€¾å‘æ€§å¾—åˆ†æ¨¡å‹\nps_model &lt;- glm(treatment ~ age + female + comorbidity + severity,\n    data = data, family = binomial\n)\n\ndata$ps &lt;- predict(ps_model, type = \"response\")\n\n# å¯è§†åŒ–\nggplot(data, aes(x = ps, fill = factor(treatment))) +\n    geom_density(alpha = 0.6) +\n    scale_fill_manual(\n        values = c(\"#3b82f6\", \"#dc2626\"),\n        labels = c(\"å¯¹ç…§ç»„\", \"æ²»ç–—ç»„\")\n    ) +\n    labs(\n        title = \"å€¾å‘æ€§å¾—åˆ†åˆ†å¸ƒ\",\n        x = \"å€¾å‘æ€§å¾—åˆ†\", y = \"å¯†åº¦\", fill = \"ç»„åˆ«\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#ç¬¬ä¸‰éƒ¨åˆ†è®¡ç®—ipwæƒé‡",
    "href": "1076-ipw-weighting.html#ç¬¬ä¸‰éƒ¨åˆ†è®¡ç®—ipwæƒé‡",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šè®¡ç®—IPWæƒé‡",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šè®¡ç®—IPWæƒé‡\n\nATEæƒé‡\n\n# ATE: ä¼°è®¡æ€»ä½“å¹³å‡æ•ˆåº”\ndata$ipw_ate &lt;- ifelse(data$treatment == 1,\n    1 / data$ps,\n    1 / (1 - data$ps)\n)\n\n# æŸ¥çœ‹æƒé‡åˆ†å¸ƒ\nsummary(data$ipw_ate)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  1.062   1.405   1.686   2.004   2.203  10.721 \n\n\n\n\nATTæƒé‡\n\n# ATT: ä¼°è®¡æ²»ç–—ç»„çš„æ•ˆåº”\ndata$ipw_att &lt;- ifelse(data$treatment == 1,\n    1,\n    data$ps / (1 - data$ps)\n)\n\nsummary(data$ipw_att)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n0.06195 0.41990 0.81986 0.74389 1.00000 2.98386 \n\n\n\n\næƒé‡ä¿®å‰ª\n\n# æç«¯æƒé‡å¯èƒ½å¯¼è‡´ä¸ç¨³å®š\n# ä¿®å‰ªåˆ°99ç™¾åˆ†ä½\nthreshold &lt;- quantile(data$ipw_ate, 0.99)\ndata$ipw_trimmed &lt;- pmin(data$ipw_ate, threshold)\n\ncat(\"ä¿®å‰ªå‰æœ€å¤§æƒé‡:\", max(data$ipw_ate), \"\\n\")\n\nä¿®å‰ªå‰æœ€å¤§æƒé‡: 10.72133 \n\ncat(\"ä¿®å‰ªåæœ€å¤§æƒé‡:\", max(data$ipw_trimmed), \"\\n\")\n\nä¿®å‰ªåæœ€å¤§æƒé‡: 5.882402",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#ç¬¬å››éƒ¨åˆ†ä½¿ç”¨-weightit-åŒ…",
    "href": "1076-ipw-weighting.html#ç¬¬å››éƒ¨åˆ†ä½¿ç”¨-weightit-åŒ…",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šä½¿ç”¨ WeightIt åŒ…",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šä½¿ç”¨ WeightIt åŒ…\n\n# WeightIt ç®€åŒ–æƒé‡è®¡ç®—\nW &lt;- weightit(treatment ~ age + female + comorbidity + severity,\n    data = data, method = \"ps\", estimand = \"ATE\"\n)\n\nsummary(W)\n\n                  Summary of weights\n\n- Weight ranges:\n\n          Min                                  Max\ntreated 1.261  |--------------------------| 10.721\ncontrol 1.062 |-------|                      3.984\n\n- Units with the 5 most extreme weights by group:\n                                       \n           340   292   203   188    128\n treated 7.097 7.333  7.93 9.108 10.721\n           548   280   274   105     31\n control  3.36 3.396 3.626 3.844  3.984\n\n- Weight statistics:\n\n        Coef of Var   MAD Entropy # Zeros\ntreated       0.454 0.328   0.086       0\ncontrol       0.255 0.181   0.029       0\n\n- Effective Sample Sizes:\n\n           Control Treated\nUnweighted  627.    373.  \nWeighted    588.83  309.37\n\n\n\nå¹³è¡¡æ£€éªŒ\n\n# cobaltåŒ…æ£€æŸ¥å¹³è¡¡\nbal.tab(W, stats = c(\"m\", \"v\"), thresholds = c(m = 0.1))\n\nBalance Measures\n                Type Diff.Adj    M.Threshold V.Ratio.Adj\nprop.score  Distance  -0.0068 Balanced, &lt;0.1      1.0779\nage          Contin.   0.0058 Balanced, &lt;0.1      0.9328\nfemale        Binary  -0.0043 Balanced, &lt;0.1           .\ncomorbidity   Binary   0.0001 Balanced, &lt;0.1           .\nseverity     Contin.  -0.0133 Balanced, &lt;0.1      1.0750\n\nBalance tally for mean differences\n                   count\nBalanced, &lt;0.1         5\nNot Balanced, &gt;0.1     0\n\nVariable with the greatest mean difference\n Variable Diff.Adj    M.Threshold\n severity  -0.0133 Balanced, &lt;0.1\n\nEffective sample sizes\n           Control Treated\nUnadjusted  627.    373.  \nAdjusted    588.83  309.37\n\n\n\n# å¯è§†åŒ–å¹³è¡¡\nlove.plot(W, thresholds = c(m = 0.1))",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#ç¬¬äº”éƒ¨åˆ†åŠ æƒä¼°è®¡å› æœæ•ˆåº”",
    "href": "1076-ipw-weighting.html#ç¬¬äº”éƒ¨åˆ†åŠ æƒä¼°è®¡å› æœæ•ˆåº”",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šåŠ æƒä¼°è®¡å› æœæ•ˆåº”",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šåŠ æƒä¼°è®¡å› æœæ•ˆåº”\n\nç®€å•åŠ æƒå‡å€¼å·®\n\n# æ‰‹åŠ¨è®¡ç®—\nweighted_mean_treat &lt;- weighted.mean(\n    data$outcome[data$treatment == 1],\n    data$ipw_ate[data$treatment == 1]\n)\nweighted_mean_control &lt;- weighted.mean(\n    data$outcome[data$treatment == 0],\n    data$ipw_ate[data$treatment == 0]\n)\n\nate_ipw &lt;- weighted_mean_treat - weighted_mean_control\ncat(\"IPWä¼°è®¡çš„ATE:\", round(ate_ipw, 2), \"\\n\")\n\nIPWä¼°è®¡çš„ATE: 9.88 \n\ncat(\"çœŸå®ATE: 10\\n\")\n\nçœŸå®ATE: 10\n\n\n\n\nä½¿ç”¨surveyåŒ…\n\n# åˆ›å»ºåŠ æƒè®¾è®¡\ndesign &lt;- svydesign(ids = ~1, weights = ~ipw_ate, data = data)\n\n# åŠ æƒå›å½’\nmodel_weighted &lt;- svyglm(outcome ~ treatment, design = design)\nsummary(model_weighted)\n\n\nCall:\nsvyglm(formula = outcome ~ treatment, design = design)\n\nSurvey design:\nsvydesign(ids = ~1, weights = ~ipw_ate, data = data)\n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)  63.1901     0.2743  230.40   &lt;2e-16 ***\ntreatment     9.8792     0.4762   20.75   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for gaussian family taken to be 43.98586)\n\nNumber of Fisher Scoring iterations: 2\n\n\n\n\nåŒç¨³å¥ä¼°è®¡\n\n# ç»“åˆIPWå’Œç»“å±€å›å½’\nmodel_dr &lt;- svyglm(outcome ~ treatment + age + female + comorbidity + severity,\n    design = design\n)\nsummary(model_dr)\n\n\nCall:\nsvyglm(formula = outcome ~ treatment + age + female + comorbidity + \n    severity, design = design)\n\nSurvey design:\nsvydesign(ids = ~1, weights = ~ipw_ate, data = data)\n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)  49.2148     0.8681   56.69   &lt;2e-16 ***\ntreatment     9.8873     0.3506   28.20   &lt;2e-16 ***\nage           0.3138     0.0165   19.02   &lt;2e-16 ***\nfemale        0.1366     0.3502    0.39    0.697    \ncomorbidity  -5.1709     0.3930  -13.16   &lt;2e-16 ***\nseverity      1.9062     0.1706   11.17   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for gaussian family taken to be 25.58013)\n\nNumber of Fisher Scoring iterations: 2",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#ç¬¬å…­éƒ¨åˆ†è¾¹é™…ç»“æ„æ¨¡å‹",
    "href": "1076-ipw-weighting.html#ç¬¬å…­éƒ¨åˆ†è¾¹é™…ç»“æ„æ¨¡å‹",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šè¾¹é™…ç»“æ„æ¨¡å‹",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šè¾¹é™…ç»“æ„æ¨¡å‹\nè¾¹é™…ç»“æ„æ¨¡å‹ï¼ˆMSMï¼‰ç”¨äºå¤„ç†æ—¶å˜å¤„ç†å’Œæ—¶å˜æ··æ‚ã€‚\n\n# ç®€åŒ–ç¤ºä¾‹ï¼šç¨³å®šæƒé‡\n# ç¨³å®šæƒé‡ = P(A) / P(A|X)\np_treat &lt;- mean(data$treatment)\ndata$sw &lt;- ifelse(data$treatment == 1,\n    p_treat / data$ps,\n    (1 - p_treat) / (1 - data$ps)\n)\n\nsummary(data$sw)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n 0.4705  0.7986  0.9145  1.0010  1.1147  3.9991 \n\n\n\n# ä½¿ç”¨ç¨³å®šæƒé‡\ndesign_sw &lt;- svydesign(ids = ~1, weights = ~sw, data = data)\nmsm_fit &lt;- svyglm(outcome ~ treatment, design = design_sw)\nsummary(msm_fit)\n\n\nCall:\nsvyglm(formula = outcome ~ treatment, design = design_sw)\n\nSurvey design:\nsvydesign(ids = ~1, weights = ~sw, data = data)\n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)  63.1901     0.2743  230.40   &lt;2e-16 ***\ntreatment     9.8792     0.4762   20.75   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for gaussian family taken to be 43.77855)\n\nNumber of Fisher Scoring iterations: 2",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "href": "1076-ipw-weighting.html#ç¬¬ä¸ƒéƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹\n\nè¯ç‰©æ²»ç–—æ•ˆæœè¯„ä¼°\n\n# æ¨¡æ‹Ÿè¯ç‰©ç ”ç©¶\nn &lt;- 2000\n\n# æ‚£è€…ç‰¹å¾\nage &lt;- round(rnorm(n, 60, 12))\ndiabetes &lt;- rbinom(n, 1, 0.25)\nhypertension &lt;- rbinom(n, 1, 0.4)\nprevious_event &lt;- rbinom(n, 1, 0.15)\nldl &lt;- rnorm(n, 130, 30)\n\n# è¯ç‰©åˆ†é…ï¼ˆåŒ»ç”Ÿåå¥½ + æ‚£è€…ç‰¹å¾ï¼‰\nps &lt;- plogis(-1 + 0.02 * age + 0.5 * diabetes + 0.3 * hypertension +\n    0.8 * previous_event + 0.01 * ldl)\ndrug &lt;- rbinom(n, 1, ps)\n\n# å¿ƒè¡€ç®¡äº‹ä»¶é£é™©\nbaseline_risk &lt;- plogis(-3 + 0.03 * age + 0.5 * diabetes + 0.4 * hypertension +\n    previous_event + 0.01 * ldl)\n# è¯ç‰©é™ä½é£é™©\ndrug_effect &lt;- -0.3\nevent_prob &lt;- plogis(qlogis(baseline_risk) + drug_effect * drug)\ncv_event &lt;- rbinom(n, 1, event_prob)\n\ndrug_data &lt;- data.frame(age, diabetes, hypertension, previous_event, ldl, drug, cv_event)\n\ncat(\"è¯ç‰©ä½¿ç”¨ç‡:\", mean(drug), \"\\n\")\n\nè¯ç‰©ä½¿ç”¨ç‡: 0.846 \n\ncat(\"äº‹ä»¶å‘ç”Ÿç‡:\", mean(cv_event), \"\\n\")\n\näº‹ä»¶å‘ç”Ÿç‡: 0.5545 \n\n\n\n# IPWåˆ†æ\nW_drug &lt;- weightit(drug ~ age + diabetes + hypertension + previous_event + ldl,\n    data = drug_data, method = \"ps\", estimand = \"ATE\"\n)\n\n# æ£€æŸ¥å¹³è¡¡\nbal.tab(W_drug, stats = \"m\", thresholds = c(m = 0.1))\n\nBalance Measures\n                   Type Diff.Adj    M.Threshold\nprop.score     Distance  -0.0229 Balanced, &lt;0.1\nage             Contin.  -0.0453 Balanced, &lt;0.1\ndiabetes         Binary  -0.0036 Balanced, &lt;0.1\nhypertension     Binary   0.0008 Balanced, &lt;0.1\nprevious_event   Binary  -0.0046 Balanced, &lt;0.1\nldl             Contin.  -0.0294 Balanced, &lt;0.1\n\nBalance tally for mean differences\n                   count\nBalanced, &lt;0.1         6\nNot Balanced, &gt;0.1     0\n\nVariable with the greatest mean difference\n Variable Diff.Adj    M.Threshold\n      age  -0.0453 Balanced, &lt;0.1\n\nEffective sample sizes\n           Control Treated\nUnadjusted  308.   1692.  \nAdjusted    262.84 1684.72\n\n\n\n# åŠ æƒlogisticå›å½’\ndrug_data$weights &lt;- W_drug$weights\ndesign_drug &lt;- svydesign(ids = ~1, weights = ~weights, data = drug_data)\n\ndrug_effect_model &lt;- svyglm(cv_event ~ drug, design = design_drug, family = quasibinomial)\nsummary(drug_effect_model)\n\n\nCall:\nsvyglm(formula = cv_event ~ drug, design = design_drug, family = quasibinomial)\n\nSurvey design:\nsvydesign(ids = ~1, weights = ~weights, data = drug_data)\n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)   0.6030     0.1236   4.879 1.15e-06 ***\ndrug         -0.4427     0.1329  -3.330 0.000883 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for quasibinomial family taken to be 1.0005)\n\nNumber of Fisher Scoring iterations: 4\n\n# è®¡ç®—é£é™©æ¯”\nor &lt;- exp(coef(drug_effect_model)[\"drug\"])\ncat(\"\\nè¯ç‰©çš„OR:\", round(or, 3), \"\\n\")\n\n\nè¯ç‰©çš„OR: 0.642",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "1076-ipw-weighting.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# ===== WeightIt =====\nlibrary(WeightIt)\n\n# ATEæƒé‡\nW &lt;- weightit(treat ~ x1 + x2, data = df, method = \"ps\", estimand = \"ATE\")\n\n# ATTæƒé‡\nW &lt;- weightit(treat ~ x1 + x2, data = df, method = \"ps\", estimand = \"ATT\")\n\n# ===== å¹³è¡¡æ£€éªŒ =====\nlibrary(cobalt)\nbal.tab(W)\nlove.plot(W)\n\n# ===== åŠ æƒåˆ†æ =====\nlibrary(survey)\ndesign &lt;- svydesign(ids = ~1, weights = ~weights, data = df)\nsvyglm(y ~ treat, design = design)\n\n# ===== æƒé‡ç±»å‹ =====\n# ATE: 1/ps å’Œ 1/(1-ps)\n# ATT: 1 å’Œ ps/(1-ps)\n# ç¨³å®šæƒé‡: P(A)/P(A|X)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#å°ç»“",
    "href": "1076-ipw-weighting.html#å°ç»“",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "å°ç»“",
    "text": "å°ç»“\nIPWçš„æ ¸å¿ƒå·¥ä½œæµç¨‹ï¼š\n\nä¼°è®¡å€¾å‘æ€§å¾—åˆ†ï¼šé€šè¿‡logisticå›å½’\nè®¡ç®—æƒé‡ï¼šæ ¹æ®ä¼°è®¡ç›®æ ‡é€‰æ‹©ATE/ATT\næ£€æŸ¥å¹³è¡¡ï¼šä½¿ç”¨cobaltåŒ…éªŒè¯\nåŠ æƒåˆ†æï¼šä½¿ç”¨surveyåŒ…è¿›è¡Œæ¨æ–­\næ•æ„Ÿæ€§åˆ†æï¼šæ£€æŸ¥æƒé‡æç«¯å€¼å’Œæ¨¡å‹è®¾å®š\n\n\nå…³é”®ï¼šå¹³è¡¡æ£€éªŒæ˜¯IPWæˆåŠŸçš„æ ¸å¿ƒï¼Œæƒé‡ä¿®å‰ªå¯æé«˜ç¨³å¥æ€§ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#å‚è€ƒèµ„æº",
    "href": "1076-ipw-weighting.html#å‚è€ƒèµ„æº",
    "title": "IPW å€’æ¦‚ç‡åŠ æƒå› æœæ¨æ–­",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nWeightItåŒ…æ–‡æ¡£\ncobaltåŒ…æ–‡æ¡£\nHernÃ¡n & Robins. Causal Inference: What If. Chapter 12.",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#å¤åˆç»“å±€ç®€ä»‹",
    "href": "1076-ipw-weighting.html#å¤åˆç»“å±€ç®€ä»‹",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å¤åˆç»“å±€ç®€ä»‹",
    "text": "å¤åˆç»“å±€ç®€ä»‹\nå¤åˆç»“å±€ï¼ˆComposite Endpointï¼‰ å°†å¤šä¸ªä¸´åºŠäº‹ä»¶åˆå¹¶ä¸ºå•ä¸€ç»ˆç‚¹ï¼Œå¸¸è§äºå¿ƒè¡€ç®¡å’Œè‚¿ç˜¤ä¸´åºŠè¯•éªŒã€‚å…¸å‹ä¾‹å­åŒ…æ‹¬MACEï¼ˆä¸»è¦ä¸è‰¯å¿ƒè¡€ç®¡äº‹ä»¶ï¼‰å’ŒDFSï¼ˆæ— ç—…ç”Ÿå­˜ï¼‰ã€‚\n\nä¸ºä»€ä¹ˆä½¿ç”¨å¤åˆç»“å±€ï¼Ÿ\n\n\n\nä¼˜åŠ¿\nè¯´æ˜\n\n\n\n\næé«˜äº‹ä»¶ç‡\nå¢åŠ ç»Ÿè®¡æ•ˆåŠ›\n\n\nå‡å°‘æ ·æœ¬é‡\né™ä½è¯•éªŒæˆæœ¬\n\n\næ•æ‰å…¨é¢æ•ˆæœ\nå¤šæ–¹é¢è¯„ä¼°æ²»ç–—\n\n\n\n\n\nä¸»è¦æŒ‘æˆ˜\n\nç»„åˆ†äº‹ä»¶é‡è¦ç¨‹åº¦ä¸åŒ\næ•ˆåº”æ–¹å‘å¯èƒ½ä¸ä¸€è‡´\nè§£é‡Šå¤æ‚",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#å®‰è£…ä¸åŠ è½½-1",
    "href": "1076-ipw-weighting.html#å®‰è£…ä¸åŠ è½½-1",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\nlibrary(survival)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(tidyr)\n\nset.seed(42)\ntheme_set(theme_bw(base_size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#ç¬¬ä¸€éƒ¨åˆ†æ¨¡æ‹Ÿå¤åˆç»“å±€æ•°æ®",
    "href": "1076-ipw-weighting.html#ç¬¬ä¸€éƒ¨åˆ†æ¨¡æ‹Ÿå¤åˆç»“å±€æ•°æ®",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ¨¡æ‹Ÿå¤åˆç»“å±€æ•°æ®",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ¨¡æ‹Ÿå¤åˆç»“å±€æ•°æ®\n# æ¨¡æ‹Ÿå¿ƒè¡€ç®¡è¯•éªŒæ•°æ®\nn &lt;- 1000\n\n# æ²»ç–—åˆ†é…\ntreatment &lt;- rep(c(0, 1), each = n / 2)\n\n# ä¸‰ä¸ªç»„åˆ†äº‹ä»¶çš„é£é™©\n# æ­»äº¡ï¼šæ²»ç–—é™ä½é£é™©\ndeath_hazard &lt;- ifelse(treatment == 1, 0.02, 0.03)\n# MIï¼šæ²»ç–—ç•¥é™é£é™©\nmi_hazard &lt;- ifelse(treatment == 1, 0.04, 0.05)\n# å’ä¸­ï¼šæ²»ç–—æ— æ•ˆ\nstroke_hazard &lt;- 0.02\n\n# ç”Ÿæˆäº‹ä»¶æ—¶é—´ï¼ˆæŒ‡æ•°åˆ†å¸ƒï¼‰\ntime_death &lt;- rexp(n, death_hazard)\ntime_mi &lt;- rexp(n, mi_hazard)\ntime_stroke &lt;- rexp(n, stroke_hazard)\n\n# åˆ å¤±æ—¶é—´\ncensor_time &lt;- runif(n, 3, 5)\n\n# ç¡®å®šé¦–å‘äº‹ä»¶\nfirst_event_time &lt;- pmin(time_death, time_mi, time_stroke, censor_time)\nevent_type &lt;- case_when(\n    first_event_time == censor_time ~ 0, # åˆ å¤±\n    first_event_time == time_death ~ 1, # æ­»äº¡\n    first_event_time == time_mi ~ 2, # MI\n    first_event_time == time_stroke ~ 3 # å’ä¸­\n)\n\n# å¤åˆç»“å±€\ncomposite_event &lt;- as.numeric(event_type &gt; 0)\n\ntrial_data &lt;- data.frame(\n    id = 1:n,\n    treatment = factor(treatment, labels = c(\"æ§åˆ¶\", \"æ²»ç–—\")),\n    time = first_event_time,\n    composite_event,\n    event_type = factor(event_type, labels = c(\"åˆ å¤±\", \"æ­»äº¡\", \"MI\", \"å’ä¸­\"))\n)\n\n# æè¿°æ€§ç»Ÿè®¡\ncat(\"äº‹ä»¶åˆ†å¸ƒ:\\n\")\nprint(table(trial_data$treatment, trial_data$event_type))",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#ç¬¬äºŒéƒ¨åˆ†ä¼ ç»Ÿå¤åˆç»“å±€åˆ†æ",
    "href": "1076-ipw-weighting.html#ç¬¬äºŒéƒ¨åˆ†ä¼ ç»Ÿå¤åˆç»“å±€åˆ†æ",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šä¼ ç»Ÿå¤åˆç»“å±€åˆ†æ",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šä¼ ç»Ÿå¤åˆç»“å±€åˆ†æ\n\nKaplan-Meieræ›²çº¿\n# å¤åˆç»“å±€çš„KMåˆ†æ\nsurv_obj &lt;- Surv(trial_data$time, trial_data$composite_event)\nkm_fit &lt;- survfit(surv_obj ~ treatment, data = trial_data)\n\n# å¯è§†åŒ–\nplot(km_fit,\n    col = c(\"#3b82f6\", \"#dc2626\"), lwd = 2,\n    xlab = \"æ—¶é—´ï¼ˆå¹´ï¼‰\", ylab = \"æ— äº‹ä»¶ç”Ÿå­˜ç‡\",\n    main = \"å¤åˆç»“å±€ï¼šæ— MACEç”Ÿå­˜æ›²çº¿\"\n)\nlegend(\"bottomleft\", c(\"æ§åˆ¶ç»„\", \"æ²»ç–—ç»„\"), col = c(\"#3b82f6\", \"#dc2626\"), lwd = 2)\n\n\nCoxå›å½’\n# Coxæ¨¡å‹\ncox_composite &lt;- coxph(Surv(time, composite_event) ~ treatment, data = trial_data)\nsummary(cox_composite)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#ç¬¬ä¸‰éƒ¨åˆ†ç»„åˆ†åˆ†æ",
    "href": "1076-ipw-weighting.html#ç¬¬ä¸‰éƒ¨åˆ†ç»„åˆ†åˆ†æ",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šç»„åˆ†åˆ†æ",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šç»„åˆ†åˆ†æ\n\nå„ç»„åˆ†çš„ç‹¬ç«‹åˆ†æ\n# åˆ†åˆ«åˆ†ææ¯ä¸ªç»„åˆ†\ncomponents &lt;- c(\"æ­»äº¡\", \"MI\", \"å’ä¸­\")\ncomponent_results &lt;- list()\n\nfor (comp in components) {\n    trial_data[[paste0(\"event_\", comp)]] &lt;- as.numeric(trial_data$event_type == comp)\n\n    # Coxæ¨¡å‹\n    formula &lt;- as.formula(paste0(\"Surv(time, event_\", comp, \") ~ treatment\"))\n    fit &lt;- coxph(formula, data = trial_data)\n\n    component_results[[comp]] &lt;- data.frame(\n        Component = comp,\n        HR = exp(coef(fit)),\n        CI_lower = exp(confint(fit))[1],\n        CI_upper = exp(confint(fit))[2],\n        p_value = summary(fit)$coefficients[5]\n    )\n}\n\nresults_df &lt;- do.call(rbind, component_results)\nprint(results_df)\n\n\næ£®æ—å›¾\n# æ·»åŠ å¤åˆç»“å±€ç»“æœ\ncomposite_hr &lt;- exp(coef(cox_composite))\ncomposite_ci &lt;- exp(confint(cox_composite))\n\nall_results &lt;- rbind(\n    results_df,\n    data.frame(\n        Component = \"å¤åˆç»“å±€\",\n        HR = composite_hr,\n        CI_lower = composite_ci[1],\n        CI_upper = composite_ci[2],\n        p_value = summary(cox_composite)$coefficients[5]\n    )\n)\n\n# æ£®æ—å›¾\nggplot(all_results, aes(x = HR, y = Component)) +\n    geom_point(size = 3) +\n    geom_errorbarh(aes(xmin = CI_lower, xmax = CI_upper), height = 0.2) +\n    geom_vline(xintercept = 1, linetype = \"dashed\", color = \"gray50\") +\n    scale_x_log10() +\n    labs(\n        title = \"å¤åˆç»“å±€åŠç»„åˆ†åˆ†æ\",\n        x = \"é£é™©æ¯” (95% CI)\", y = \"\"\n    ) +\n    theme(axis.text.y = element_text(size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#ç¬¬å››éƒ¨åˆ†win-ratioæ–¹æ³•",
    "href": "1076-ipw-weighting.html#ç¬¬å››éƒ¨åˆ†win-ratioæ–¹æ³•",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šWin Ratioæ–¹æ³•",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šWin Ratioæ–¹æ³•\nWin Ratioæ˜¯å¤„ç†æœ‰åºå¤åˆç»“å±€çš„æ–°æ–¹æ³•ï¼Œè€ƒè™‘äº‹ä»¶çš„ä¸´åºŠé‡è¦æ€§ã€‚\n\nWin RatioåŸç†\n# æ‰‹åŠ¨è®¡ç®—Win Ratio\n# æŒ‰é‡è¦æ€§æ’åºï¼šæ­»äº¡ &gt; MI &gt; å’ä¸­\n\ncalculate_win_ratio &lt;- function(data) {\n    treat &lt;- data[data$treatment == \"æ²»ç–—\", ]\n    control &lt;- data[data$treatment == \"æ§åˆ¶\", ]\n\n    wins &lt;- 0\n    losses &lt;- 0\n    ties &lt;- 0\n\n    for (i in 1:nrow(treat)) {\n        for (j in 1:nrow(control)) {\n            # æ¯”è¾ƒæ­»äº¡\n            if (treat$event_æ­»äº¡[i] == 0 && control$event_æ­»äº¡[j] == 1 &&\n                treat$time[i] &gt; control$time[j]) {\n                wins &lt;- wins + 1\n            } else if (treat$event_æ­»äº¡[i] == 1 && control$event_æ­»äº¡[j] == 0 &&\n                treat$time[i] &lt; control$time[j]) {\n                losses &lt;- losses + 1\n            } else {\n                # ç»§ç»­æ¯”è¾ƒMIï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼‰\n                if (treat$event_MI[i] == 0 && control$event_MI[j] == 1) {\n                    wins &lt;- wins + 1\n                } else if (treat$event_MI[i] == 1 && control$event_MI[j] == 0) {\n                    losses &lt;- losses + 1\n                } else {\n                    ties &lt;- ties + 1\n                }\n            }\n        }\n    }\n\n    list(\n        wins = wins, losses = losses, ties = ties,\n        win_ratio = wins / losses\n    )\n}\n\n# ç®€åŒ–ç¤ºä¾‹ï¼ˆå®Œæ•´ç‰ˆéœ€è¦æ›´å¤æ‚çš„é…å¯¹é€»è¾‘ï¼‰\ncat(\"Win Ratioæ¦‚å¿µæ¼”ç¤º:\\n\")\ncat(\"æ²»ç–—ç»„'èµ¢'ï¼šæ²»ç–—æ‚£è€…æ¯”å¯¹ç…§æ‚£è€…ç»“å±€æ›´å¥½\\n\")\ncat(\"Win Ratio = èµ¢æ¬¡æ•° / è¾“æ¬¡æ•°\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#ç¬¬äº”éƒ¨åˆ†äº‹ä»¶è´Ÿæ‹…åˆ†æ",
    "href": "1076-ipw-weighting.html#ç¬¬äº”éƒ¨åˆ†äº‹ä»¶è´Ÿæ‹…åˆ†æ",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šäº‹ä»¶è´Ÿæ‹…åˆ†æ",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šäº‹ä»¶è´Ÿæ‹…åˆ†æ\n# è®¡ç®—å„ç»„åˆ†å¯¹å¤åˆç»“å±€çš„è´¡çŒ®\ncontribution &lt;- trial_data %&gt;%\n    filter(composite_event == 1) %&gt;%\n    group_by(treatment, event_type) %&gt;%\n    summarise(n = n(), .groups = \"drop\") %&gt;%\n    group_by(treatment) %&gt;%\n    mutate(prop = n / sum(n))\n\nggplot(contribution, aes(x = treatment, y = prop, fill = event_type)) +\n    geom_col() +\n    scale_fill_manual(values = c(\"#dc2626\", \"#f97316\", \"#eab308\")) +\n    labs(\n        title = \"å¤åˆç»“å±€ç»„åˆ†æ„æˆ\",\n        x = \"æ²»ç–—ç»„\", y = \"æ¯”ä¾‹\", fill = \"äº‹ä»¶ç±»å‹\"\n    ) +\n    scale_y_continuous(labels = scales::percent)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#ç¬¬å…­éƒ¨åˆ†æ•æ„Ÿæ€§åˆ†æ",
    "href": "1076-ipw-weighting.html#ç¬¬å…­éƒ¨åˆ†æ•æ„Ÿæ€§åˆ†æ",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šæ•æ„Ÿæ€§åˆ†æ",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šæ•æ„Ÿæ€§åˆ†æ\n\nä½¿ç”¨ç«äº‰é£é™©æ¡†æ¶\n# å°†å¤åˆç»“å±€ä½œä¸ºç«äº‰é£é™©åˆ†æ\nlibrary(cmprsk)\n\n# åˆ›å»ºç«äº‰é£é™©æ•°æ®\ntrial_data$event_num &lt;- as.numeric(trial_data$event_type) - 1 # 0=åˆ å¤±, 1=æ­»äº¡, 2=MI, 3=å’ä¸­\ntrial_data$treat_num &lt;- as.numeric(trial_data$treatment) - 1\n\n# Grayæ£€éªŒ\ngray_test &lt;- cuminc(trial_data$time, trial_data$event_num,\n    group = trial_data$treat_num\n)\n\n# ç»˜åˆ¶ç´¯ç§¯å‘ç—…ç‡\nplot(gray_test,\n    main = \"å„äº‹ä»¶ç´¯ç§¯å‘ç—…ç‡\",\n    xlab = \"æ—¶é—´ï¼ˆå¹´ï¼‰\", ylab = \"ç´¯ç§¯å‘ç—…ç‡\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#ç¬¬ä¸ƒéƒ¨åˆ†æŠ¥å‘Šæ¨¡æ¿",
    "href": "1076-ipw-weighting.html#ç¬¬ä¸ƒéƒ¨åˆ†æŠ¥å‘Šæ¨¡æ¿",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæŠ¥å‘Šæ¨¡æ¿",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæŠ¥å‘Šæ¨¡æ¿\n# ç”Ÿæˆå¤åˆç»“å±€åˆ†ææŠ¥å‘Š\ncat(\"=== å¤åˆç»“å±€åˆ†ææŠ¥å‘Š ===\\n\\n\")\n\ncat(\"1. æ ·æœ¬é‡:\", n, \"\\n\")\ncat(\"2. éšè®¿æ—¶é—´:\", round(median(trial_data$time), 2), \"å¹´ï¼ˆä¸­ä½æ•°ï¼‰\\n\\n\")\n\ncat(\"3. äº‹ä»¶å‘ç”Ÿ:\\n\")\nevent_summary &lt;- trial_data %&gt;%\n    group_by(treatment) %&gt;%\n    summarise(\n        N = n(),\n        å¤åˆç»“å±€ = sum(composite_event),\n        æ­»äº¡ = sum(event_type == \"æ­»äº¡\"),\n        MI = sum(event_type == \"MI\"),\n        å’ä¸­ = sum(event_type == \"å’ä¸­\")\n    )\nprint(event_summary)\n\ncat(\"\\n4. æ²»ç–—æ•ˆæœ:\\n\")\ncat(\n    \"å¤åˆç»“å±€ HR:\", round(exp(coef(cox_composite)), 3),\n    \"(95% CI:\", round(exp(confint(cox_composite))[1], 3), \"-\",\n    round(exp(confint(cox_composite))[2], 3), \")\\n\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-1",
    "href": "1076-ipw-weighting.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-1",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n```{r eval=FALSE} # ===== å¤åˆç»“å±€ç”Ÿå­˜åˆ†æ ===== library(survival)\nsurv_obj &lt;- Surv(time, composite_event) coxph(surv_obj ~ treatment, data = df)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#rstanarm-ç®€ä»‹",
    "href": "1076-ipw-weighting.html#rstanarm-ç®€ä»‹",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "rstanarm ç®€ä»‹",
    "text": "rstanarm ç®€ä»‹\nrstanarm æ˜¯Stançš„Ræ¥å£ï¼Œæä¾›ä¸ lm(), glm() ç±»ä¼¼çš„è¯­æ³•è¿›è¡Œè´å¶æ–¯å›å½’ã€‚æ— éœ€å­¦ä¹ Stanè¯­è¨€ï¼Œå³å¯è·å¾—è´å¶æ–¯æ¨æ–­çš„ä¼˜åŠ¿ã€‚\n\nä¸ºä»€ä¹ˆä½¿ç”¨è´å¶æ–¯æ–¹æ³•ï¼Ÿ\n\n\n\né¢‘ç‡å­¦æ´¾\nè´å¶æ–¯ä¼˜åŠ¿\n\n\n\n\nç‚¹ä¼°è®¡+ç½®ä¿¡åŒºé—´\nå®Œæ•´åéªŒåˆ†å¸ƒ\n\n\næ ·æœ¬é‡ä¾èµ–\nå¯èå…¥å…ˆéªŒçŸ¥è¯†\n\n\néš¾ä»¥è§£é‡Š\nç›´è§‚æ¦‚ç‡è§£é‡Š\n\n\nå¤šé‡æ¯”è¾ƒé—®é¢˜\nè‡ªç„¶å¤„ç†ä¸ç¡®å®šæ€§\n\n\n\n\n\nrstanarm ä¼˜åŠ¿\n\nç†Ÿæ‚‰çš„å…¬å¼è¯­æ³•\nè‡ªåŠ¨é€‰æ‹©åˆç†å…ˆéªŒ\nä¸tidyverseå…¼å®¹\nä¸°å¯Œçš„è¯Šæ–­å·¥å…·",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#å®‰è£…ä¸åŠ è½½-2",
    "href": "1076-ipw-weighting.html#å®‰è£…ä¸åŠ è½½-2",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\nlibrary(rstanarm)\nlibrary(bayesplot)\nlibrary(ggplot2)\nlibrary(dplyr)\n\nset.seed(42)\ntheme_set(theme_bw(base_size = 12))\n\n# è®¾ç½®å¹¶è¡Œ\noptions(mc.cores = parallel::detectCores())",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#ç¬¬ä¸€éƒ¨åˆ†çº¿æ€§å›å½’",
    "href": "1076-ipw-weighting.html#ç¬¬ä¸€éƒ¨åˆ†çº¿æ€§å›å½’",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šçº¿æ€§å›å½’",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šçº¿æ€§å›å½’\n\nåŸºæœ¬æ‹Ÿåˆ\n# ä½¿ç”¨mtcarsæ•°æ®\ndata(mtcars)\n\n# è´å¶æ–¯çº¿æ€§å›å½’\nbayes_lm &lt;- stan_glm(mpg ~ wt + hp,\n    data = mtcars,\n    family = gaussian(),\n    seed = 42,\n    refresh = 0\n) # é™é»˜è¾“å‡º\n\n# æŸ¥çœ‹ç»“æœ\nprint(bayes_lm)\n\n\nåéªŒåˆ†å¸ƒ\n# æå–åéªŒæ ·æœ¬\nposterior &lt;- as.data.frame(bayes_lm)\nhead(posterior)\n# åéªŒåˆ†å¸ƒå¯è§†åŒ–\nmcmc_dens(bayes_lm, pars = c(\"wt\", \"hp\")) +\n    labs(title = \"ç³»æ•°åéªŒåˆ†å¸ƒ\")\n\n\nä¸é¢‘ç‡æ³•æ¯”è¾ƒ\n# é¢‘ç‡lm\nfreq_lm &lt;- lm(mpg ~ wt + hp, data = mtcars)\n\n# æ¯”è¾ƒ\ncat(\"é¢‘ç‡æ³•ä¼°è®¡:\\n\")\nprint(coef(freq_lm))\ncat(\"\\nè´å¶æ–¯åéªŒå‡å€¼:\\n\")\nprint(coef(bayes_lm))",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#ç¬¬äºŒéƒ¨åˆ†å…ˆéªŒè®¾ç½®",
    "href": "1076-ipw-weighting.html#ç¬¬äºŒéƒ¨åˆ†å…ˆéªŒè®¾ç½®",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šå…ˆéªŒè®¾ç½®",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šå…ˆéªŒè®¾ç½®\n\né»˜è®¤å…ˆéªŒ\n# æŸ¥çœ‹é»˜è®¤å…ˆéªŒ\nprior_summary(bayes_lm)\n\n\nè‡ªå®šä¹‰å…ˆéªŒ\n# ä½¿ç”¨ä¿¡æ¯æ€§å…ˆéªŒ\nbayes_lm_informed &lt;- stan_glm(\n    mpg ~ wt + hp,\n    data = mtcars,\n    prior = normal(c(-5, 0), c(2, 0.1)), # wtå’Œhpçš„å…ˆéªŒ\n    prior_intercept = normal(30, 10),\n    seed = 42,\n    refresh = 0\n)\n\n# æ¯”è¾ƒç»“æœ\ncat(\"é»˜è®¤å…ˆéªŒä¼°è®¡:\\n\")\nprint(coef(bayes_lm))\ncat(\"\\nä¿¡æ¯æ€§å…ˆéªŒä¼°è®¡:\\n\")\nprint(coef(bayes_lm_informed))\n\n\nå…ˆéªŒé¢„æµ‹æ£€æŸ¥\n# å…ˆéªŒé¢„æµ‹åˆ†å¸ƒ\nbayes_lm_prior &lt;- stan_glm(\n    mpg ~ wt + hp,\n    data = mtcars,\n    prior_PD = TRUE, # åªä»å…ˆéªŒé‡‡æ ·\n    seed = 42,\n    refresh = 0\n)\n\n# å¯è§†åŒ–\npp_check(bayes_lm_prior, nreps = 50) +\n    labs(\n        title = \"å…ˆéªŒé¢„æµ‹æ£€æŸ¥\",\n        subtitle = \"å…ˆéªŒæ˜¯å¦äº§ç”Ÿåˆç†çš„æ•°æ®èŒƒå›´ï¼Ÿ\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#ç¬¬ä¸‰éƒ¨åˆ†åéªŒæ¨æ–­",
    "href": "1076-ipw-weighting.html#ç¬¬ä¸‰éƒ¨åˆ†åéªŒæ¨æ–­",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šåéªŒæ¨æ–­",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šåéªŒæ¨æ–­\n\nå¯ä¿¡åŒºé—´\n# åéªŒåŒºé—´\nposterior_interval(bayes_lm, prob = 0.95)\n\n\næ¦‚ç‡é™ˆè¿°\n# è®¡ç®—ç‰¹å®šæ¦‚ç‡\n# wtæ•ˆåº”å°äº-4çš„æ¦‚ç‡\nprob_wt &lt;- mean(posterior$wt &lt; -4)\ncat(\"P(wtç³»æ•° &lt; -4) =\", round(prob_wt, 3), \"\\n\")\n\n# hpæ•ˆåº”ä¸ºè´Ÿçš„æ¦‚ç‡\nprob_hp_neg &lt;- mean(posterior$hp &lt; 0)\ncat(\"P(hpç³»æ•° &lt; 0) =\", round(prob_hp_neg, 3), \"\\n\")\n\n\nåéªŒé¢„æµ‹\n# æ–°æ•°æ®é¢„æµ‹\nnew_car &lt;- data.frame(wt = 3, hp = 120)\n\n# åéªŒé¢„æµ‹åˆ†å¸ƒ\npred_post &lt;- posterior_predict(bayes_lm, newdata = new_car)\n\n# é¢„æµ‹åŒºé—´\ncat(\"é¢„æµ‹mpg (95%åŒºé—´):\\n\")\ncat(\"å‡å€¼:\", round(mean(pred_post), 2), \"\\n\")\ncat(\"åŒºé—´:\", round(quantile(pred_post, c(0.025, 0.975)), 2), \"\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#ç¬¬å››éƒ¨åˆ†æ¨¡å‹è¯Šæ–­",
    "href": "1076-ipw-weighting.html#ç¬¬å››éƒ¨åˆ†æ¨¡å‹è¯Šæ–­",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šæ¨¡å‹è¯Šæ–­",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šæ¨¡å‹è¯Šæ–­\n\nMCMCè¯Šæ–­\n# è½¨è¿¹å›¾\nmcmc_trace(bayes_lm, pars = c(\"wt\", \"hp\"))\n# R-hatå’Œæœ‰æ•ˆæ ·æœ¬é‡\nsummary(bayes_lm)[, c(\"Rhat\", \"n_eff\")]\n\n\nåéªŒé¢„æµ‹æ£€æŸ¥\n# åéªŒé¢„æµ‹ vs è§‚æµ‹æ•°æ®\npp_check(bayes_lm, nreps = 50) +\n    labs(\n        title = \"åéªŒé¢„æµ‹æ£€æŸ¥\",\n        subtitle = \"æ¨¡å‹èƒ½å¦é‡ç°è§‚æµ‹æ•°æ®çš„åˆ†å¸ƒï¼Ÿ\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#ç¬¬äº”éƒ¨åˆ†logisticå›å½’",
    "href": "1076-ipw-weighting.html#ç¬¬äº”éƒ¨åˆ†logisticå›å½’",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šLogisticå›å½’",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šLogisticå›å½’\n# äºŒåˆ†ç±»ç»“å±€\nmtcars$am_factor &lt;- factor(mtcars$am)\n\nbayes_logit &lt;- stan_glm(\n    am_factor ~ wt + hp,\n    data = mtcars,\n    family = binomial(link = \"logit\"),\n    seed = 42,\n    refresh = 0\n)\n\nprint(bayes_logit)\n# ORå’Œå¯ä¿¡åŒºé—´\nor_posterior &lt;- exp(as.data.frame(bayes_logit)[, c(\"wt\", \"hp\")])\n\ncat(\"ORä¼°è®¡ (åéªŒä¸­ä½æ•°):\\n\")\ncat(\"wt:\", round(median(or_posterior$wt), 3), \"\\n\")\ncat(\"hp:\", round(median(or_posterior$hp), 3), \"\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#ç¬¬å…­éƒ¨åˆ†æ¨¡å‹æ¯”è¾ƒ",
    "href": "1076-ipw-weighting.html#ç¬¬å…­éƒ¨åˆ†æ¨¡å‹æ¯”è¾ƒ",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹æ¯”è¾ƒ",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹æ¯”è¾ƒ\n\nLOOäº¤å‰éªŒè¯\n# Leave-one-outäº¤å‰éªŒè¯\nloo_lm &lt;- loo(bayes_lm)\nprint(loo_lm)\n# æ¯”è¾ƒå¤šä¸ªæ¨¡å‹\nbayes_lm2 &lt;- stan_glm(mpg ~ wt + hp + disp,\n    data = mtcars,\n    seed = 42, refresh = 0\n)\n\nloo_lm2 &lt;- loo(bayes_lm2)\n\n# æ¨¡å‹æ¯”è¾ƒ\nloo_compare(loo_lm, loo_lm2)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#ç¬¬ä¸ƒéƒ¨åˆ†å±‚æ¬¡æ¨¡å‹",
    "href": "1076-ipw-weighting.html#ç¬¬ä¸ƒéƒ¨åˆ†å±‚æ¬¡æ¨¡å‹",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå±‚æ¬¡æ¨¡å‹",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå±‚æ¬¡æ¨¡å‹\n# åˆ†ç»„æ•°æ®\ndata(sleepstudy, package = \"lme4\")\n\n# è´å¶æ–¯æ··åˆæ•ˆåº”æ¨¡å‹\nbayes_hier &lt;- stan_lmer(\n    Reaction ~ Days + (Days | Subject),\n    data = sleepstudy,\n    seed = 42,\n    refresh = 0\n)\n\nprint(bayes_hier, digits = 2)\n# éšæœºæ•ˆåº”åéªŒ\nranef_post &lt;- as.data.frame(bayes_hier)\nranef_cols &lt;- grep(\"^b\\\\[\", names(ranef_post), value = TRUE)\ncat(\"éšæœºæ•ˆåº”æ•°é‡:\", length(ranef_cols), \"\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-2",
    "href": "1076-ipw-weighting.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-2",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n```{r eval=FALSE} # ===== åŸºæœ¬æ¨¡å‹ ===== library(rstanarm)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#å°ç»“-1",
    "href": "1076-ipw-weighting.html#å°ç»“-1",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å°ç»“",
    "text": "å°ç»“\nrstanarmçš„æ ¸å¿ƒå·¥ä½œæµç¨‹ï¼š\n\næ¨¡å‹è®¾å®šï¼šä½¿ç”¨ç†Ÿæ‚‰çš„å…¬å¼è¯­æ³•\nå…ˆéªŒé€‰æ‹©ï¼šé»˜è®¤å…ˆéªŒé€šå¸¸åˆç†ï¼Œæˆ–è‡ªå®šä¹‰\næ‹Ÿåˆï¼šè‡ªåŠ¨MCMCé‡‡æ ·\nè¯Šæ–­ï¼šæ£€æŸ¥R-hatã€è½¨è¿¹å›¾ã€åéªŒé¢„æµ‹\næ¨æ–­ï¼šåˆ©ç”¨å®Œæ•´åéªŒåˆ†å¸ƒ\n\n\nä¼˜åŠ¿ï¼šè´å¶æ–¯æ–¹æ³•è®©ä½ èƒ½å¤Ÿç›´æ¥é™ˆè¿°â€å‚æ•°åœ¨åŒºé—´å†…çš„æ¦‚ç‡â€ï¼Œè€Œéâ€å¦‚æœé‡å¤å®éªŒâ€¦â€",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1076-ipw-weighting.html#å‚è€ƒèµ„æº-1",
    "href": "1076-ipw-weighting.html#å‚è€ƒèµ„æº-1",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nrstanarmå®˜æ–¹æ–‡æ¡£\nStanç”¨æˆ·æŒ‡å—\nGelman et al.Â (2020). Regression and Other Stories.",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "IPW å€’æ¦‚ç‡åŠ æƒ"
    ]
  },
  {
    "objectID": "1077-composite-endpoints.html",
    "href": "1077-composite-endpoints.html",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "",
    "text": "å¤åˆç»“å±€ï¼ˆComposite Endpointï¼‰ å°†å¤šä¸ªä¸´åºŠäº‹ä»¶åˆå¹¶ä¸ºå•ä¸€ç»ˆç‚¹ï¼Œå¸¸è§äºå¿ƒè¡€ç®¡å’Œè‚¿ç˜¤ä¸´åºŠè¯•éªŒã€‚å…¸å‹ä¾‹å­åŒ…æ‹¬MACEï¼ˆä¸»è¦ä¸è‰¯å¿ƒè¡€ç®¡äº‹ä»¶ï¼‰å’ŒDFSï¼ˆæ— ç—…ç”Ÿå­˜ï¼‰ã€‚\n\n\n\n\n\nä¼˜åŠ¿\nè¯´æ˜\n\n\n\n\næé«˜äº‹ä»¶ç‡\nå¢åŠ ç»Ÿè®¡æ•ˆåŠ›\n\n\nå‡å°‘æ ·æœ¬é‡\né™ä½è¯•éªŒæˆæœ¬\n\n\næ•æ‰å…¨é¢æ•ˆæœ\nå¤šæ–¹é¢è¯„ä¼°æ²»ç–—\n\n\n\n\n\n\n\nç»„åˆ†äº‹ä»¶é‡è¦ç¨‹åº¦ä¸åŒ\næ•ˆåº”æ–¹å‘å¯èƒ½ä¸ä¸€è‡´\nè§£é‡Šå¤æ‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "å¤åˆç»“å±€åˆ†æ"
    ]
  },
  {
    "objectID": "1077-composite-endpoints.html#å¤åˆç»“å±€ç®€ä»‹",
    "href": "1077-composite-endpoints.html#å¤åˆç»“å±€ç®€ä»‹",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "",
    "text": "å¤åˆç»“å±€ï¼ˆComposite Endpointï¼‰ å°†å¤šä¸ªä¸´åºŠäº‹ä»¶åˆå¹¶ä¸ºå•ä¸€ç»ˆç‚¹ï¼Œå¸¸è§äºå¿ƒè¡€ç®¡å’Œè‚¿ç˜¤ä¸´åºŠè¯•éªŒã€‚å…¸å‹ä¾‹å­åŒ…æ‹¬MACEï¼ˆä¸»è¦ä¸è‰¯å¿ƒè¡€ç®¡äº‹ä»¶ï¼‰å’ŒDFSï¼ˆæ— ç—…ç”Ÿå­˜ï¼‰ã€‚\n\n\n\n\n\nä¼˜åŠ¿\nè¯´æ˜\n\n\n\n\næé«˜äº‹ä»¶ç‡\nå¢åŠ ç»Ÿè®¡æ•ˆåŠ›\n\n\nå‡å°‘æ ·æœ¬é‡\né™ä½è¯•éªŒæˆæœ¬\n\n\næ•æ‰å…¨é¢æ•ˆæœ\nå¤šæ–¹é¢è¯„ä¼°æ²»ç–—\n\n\n\n\n\n\n\nç»„åˆ†äº‹ä»¶é‡è¦ç¨‹åº¦ä¸åŒ\næ•ˆåº”æ–¹å‘å¯èƒ½ä¸ä¸€è‡´\nè§£é‡Šå¤æ‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "å¤åˆç»“å±€åˆ†æ"
    ]
  },
  {
    "objectID": "1077-composite-endpoints.html#å®‰è£…ä¸åŠ è½½",
    "href": "1077-composite-endpoints.html#å®‰è£…ä¸åŠ è½½",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\nlibrary(survival)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(tidyr)\n\nset.seed(42)\ntheme_set(theme_bw(base_size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "å¤åˆç»“å±€åˆ†æ"
    ]
  },
  {
    "objectID": "1077-composite-endpoints.html#ç¬¬ä¸€éƒ¨åˆ†æ¨¡æ‹Ÿå¤åˆç»“å±€æ•°æ®",
    "href": "1077-composite-endpoints.html#ç¬¬ä¸€éƒ¨åˆ†æ¨¡æ‹Ÿå¤åˆç»“å±€æ•°æ®",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ¨¡æ‹Ÿå¤åˆç»“å±€æ•°æ®",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šæ¨¡æ‹Ÿå¤åˆç»“å±€æ•°æ®\n\n# æ¨¡æ‹Ÿå¿ƒè¡€ç®¡è¯•éªŒæ•°æ®\nn &lt;- 1000\n\n# æ²»ç–—åˆ†é…\ntreatment &lt;- rep(c(0, 1), each = n / 2)\n\n# ä¸‰ä¸ªç»„åˆ†äº‹ä»¶çš„é£é™©\n# æ­»äº¡ï¼šæ²»ç–—é™ä½é£é™©\ndeath_hazard &lt;- ifelse(treatment == 1, 0.02, 0.03)\n# MIï¼šæ²»ç–—ç•¥é™é£é™©\nmi_hazard &lt;- ifelse(treatment == 1, 0.04, 0.05)\n# å’ä¸­ï¼šæ²»ç–—æ— æ•ˆ\nstroke_hazard &lt;- 0.02\n\n# ç”Ÿæˆäº‹ä»¶æ—¶é—´ï¼ˆæŒ‡æ•°åˆ†å¸ƒï¼‰\ntime_death &lt;- rexp(n, death_hazard)\ntime_mi &lt;- rexp(n, mi_hazard)\ntime_stroke &lt;- rexp(n, stroke_hazard)\n\n# åˆ å¤±æ—¶é—´\ncensor_time &lt;- runif(n, 3, 5)\n\n# ç¡®å®šé¦–å‘äº‹ä»¶\nfirst_event_time &lt;- pmin(time_death, time_mi, time_stroke, censor_time)\nevent_type &lt;- case_when(\n    first_event_time == censor_time ~ 0, # åˆ å¤±\n    first_event_time == time_death ~ 1, # æ­»äº¡\n    first_event_time == time_mi ~ 2, # MI\n    first_event_time == time_stroke ~ 3 # å’ä¸­\n)\n\n# å¤åˆç»“å±€\ncomposite_event &lt;- as.numeric(event_type &gt; 0)\n\ntrial_data &lt;- data.frame(\n    id = 1:n,\n    treatment = factor(treatment, labels = c(\"æ§åˆ¶\", \"æ²»ç–—\")),\n    time = first_event_time,\n    composite_event,\n    event_type = factor(event_type, labels = c(\"åˆ å¤±\", \"æ­»äº¡\", \"MI\", \"å’ä¸­\"))\n)\n\n# æè¿°æ€§ç»Ÿè®¡\ncat(\"äº‹ä»¶åˆ†å¸ƒ:\\n\")\n\näº‹ä»¶åˆ†å¸ƒ:\n\nprint(table(trial_data$treatment, trial_data$event_type))\n\n      \n       åˆ å¤± æ­»äº¡  MI å’ä¸­\n  æ§åˆ¶  327   48  92   33\n  æ²»ç–—  364   36  57   43",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "å¤åˆç»“å±€åˆ†æ"
    ]
  },
  {
    "objectID": "1077-composite-endpoints.html#ç¬¬äºŒéƒ¨åˆ†ä¼ ç»Ÿå¤åˆç»“å±€åˆ†æ",
    "href": "1077-composite-endpoints.html#ç¬¬äºŒéƒ¨åˆ†ä¼ ç»Ÿå¤åˆç»“å±€åˆ†æ",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šä¼ ç»Ÿå¤åˆç»“å±€åˆ†æ",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šä¼ ç»Ÿå¤åˆç»“å±€åˆ†æ\n\nKaplan-Meieræ›²çº¿\n\n# å¤åˆç»“å±€çš„KMåˆ†æ\nsurv_obj &lt;- Surv(trial_data$time, trial_data$composite_event)\nkm_fit &lt;- survfit(surv_obj ~ treatment, data = trial_data)\n\n# å¯è§†åŒ–\nplot(km_fit,\n    col = c(\"#3b82f6\", \"#dc2626\"), lwd = 2,\n    xlab = \"æ—¶é—´ï¼ˆå¹´ï¼‰\", ylab = \"æ— äº‹ä»¶ç”Ÿå­˜ç‡\",\n    main = \"å¤åˆç»“å±€ï¼šæ— MACEç”Ÿå­˜æ›²çº¿\"\n)\nlegend(\"bottomleft\", c(\"æ§åˆ¶ç»„\", \"æ²»ç–—ç»„\"), col = c(\"#3b82f6\", \"#dc2626\"), lwd = 2)\n\n\n\n\n\n\n\n\n\n\nCoxå›å½’\n\n# Coxæ¨¡å‹\ncox_composite &lt;- coxph(Surv(time, composite_event) ~ treatment, data = trial_data)\nsummary(cox_composite)\n\nCall:\ncoxph(formula = Surv(time, composite_event) ~ treatment, data = trial_data)\n\n  n= 1000, number of events= 309 \n\n                 coef exp(coef) se(coef)      z Pr(&gt;|z|)  \ntreatmentæ²»ç–— -0.2619    0.7696   0.1146 -2.285   0.0223 *\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n              exp(coef) exp(-coef) lower .95 upper .95\ntreatmentæ²»ç–—    0.7696      1.299    0.6147    0.9634\n\nConcordance= 0.528  (se = 0.015 )\nLikelihood ratio test= 5.26  on 1 df,   p=0.02\nWald test            = 5.22  on 1 df,   p=0.02\nScore (logrank) test = 5.25  on 1 df,   p=0.02",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "å¤åˆç»“å±€åˆ†æ"
    ]
  },
  {
    "objectID": "1077-composite-endpoints.html#ç¬¬ä¸‰éƒ¨åˆ†ç»„åˆ†åˆ†æ",
    "href": "1077-composite-endpoints.html#ç¬¬ä¸‰éƒ¨åˆ†ç»„åˆ†åˆ†æ",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šç»„åˆ†åˆ†æ",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šç»„åˆ†åˆ†æ\n\nå„ç»„åˆ†çš„ç‹¬ç«‹åˆ†æ\n\n# åˆ†åˆ«åˆ†ææ¯ä¸ªç»„åˆ†\ncomponents &lt;- c(\"æ­»äº¡\", \"MI\", \"å’ä¸­\")\ncomponent_results &lt;- list()\n\nfor (comp in components) {\n    trial_data[[paste0(\"event_\", comp)]] &lt;- as.numeric(trial_data$event_type == comp)\n\n    # Coxæ¨¡å‹\n    formula &lt;- as.formula(paste0(\"Surv(time, event_\", comp, \") ~ treatment\"))\n    fit &lt;- coxph(formula, data = trial_data)\n\n    component_results[[comp]] &lt;- data.frame(\n        Component = comp,\n        HR = exp(coef(fit)),\n        CI_lower = exp(confint(fit))[1],\n        CI_upper = exp(confint(fit))[2],\n        p_value = summary(fit)$coefficients[5]\n    )\n}\n\nresults_df &lt;- do.call(rbind, component_results)\nprint(results_df)\n\n     Component        HR  CI_lower  CI_upper     p_value\næ­»äº¡      æ­»äº¡ 0.7337444 0.4762730 1.1304038 0.160299340\nMI          MI 0.6061992 0.4356323 0.8435497 0.002985779\nå’ä¸­      å’ä¸­ 1.2778450 0.8118336 2.0113578 0.289464440\n\n\n\n\næ£®æ—å›¾\n\n# æ·»åŠ å¤åˆç»“å±€ç»“æœ\ncomposite_hr &lt;- exp(coef(cox_composite))\ncomposite_ci &lt;- exp(confint(cox_composite))\n\nall_results &lt;- rbind(\n    results_df,\n    data.frame(\n        Component = \"å¤åˆç»“å±€\",\n        HR = composite_hr,\n        CI_lower = composite_ci[1],\n        CI_upper = composite_ci[2],\n        p_value = summary(cox_composite)$coefficients[5]\n    )\n)\n\n# æ£®æ—å›¾\nggplot(all_results, aes(x = HR, y = Component)) +\n    geom_point(size = 3) +\n    geom_errorbarh(aes(xmin = CI_lower, xmax = CI_upper), height = 0.2) +\n    geom_vline(xintercept = 1, linetype = \"dashed\", color = \"gray50\") +\n    scale_x_log10() +\n    labs(\n        title = \"å¤åˆç»“å±€åŠç»„åˆ†åˆ†æ\",\n        x = \"é£é™©æ¯” (95% CI)\", y = \"\"\n    ) +\n    theme(axis.text.y = element_text(size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "å¤åˆç»“å±€åˆ†æ"
    ]
  },
  {
    "objectID": "1077-composite-endpoints.html#ç¬¬å››éƒ¨åˆ†win-ratioæ–¹æ³•",
    "href": "1077-composite-endpoints.html#ç¬¬å››éƒ¨åˆ†win-ratioæ–¹æ³•",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šWin Ratioæ–¹æ³•",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šWin Ratioæ–¹æ³•\nWin Ratioæ˜¯å¤„ç†æœ‰åºå¤åˆç»“å±€çš„æ–°æ–¹æ³•ï¼Œè€ƒè™‘äº‹ä»¶çš„ä¸´åºŠé‡è¦æ€§ã€‚\n\nWin RatioåŸç†\n\n# æ‰‹åŠ¨è®¡ç®—Win Ratio\n# æŒ‰é‡è¦æ€§æ’åºï¼šæ­»äº¡ &gt; MI &gt; å’ä¸­\n\ncalculate_win_ratio &lt;- function(data) {\n    treat &lt;- data[data$treatment == \"æ²»ç–—\", ]\n    control &lt;- data[data$treatment == \"æ§åˆ¶\", ]\n\n    wins &lt;- 0\n    losses &lt;- 0\n    ties &lt;- 0\n\n    for (i in 1:nrow(treat)) {\n        for (j in 1:nrow(control)) {\n            # æ¯”è¾ƒæ­»äº¡\n            if (treat$event_æ­»äº¡[i] == 0 && control$event_æ­»äº¡[j] == 1 &&\n                treat$time[i] &gt; control$time[j]) {\n                wins &lt;- wins + 1\n            } else if (treat$event_æ­»äº¡[i] == 1 && control$event_æ­»äº¡[j] == 0 &&\n                treat$time[i] &lt; control$time[j]) {\n                losses &lt;- losses + 1\n            } else {\n                # ç»§ç»­æ¯”è¾ƒMIï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼‰\n                if (treat$event_MI[i] == 0 && control$event_MI[j] == 1) {\n                    wins &lt;- wins + 1\n                } else if (treat$event_MI[i] == 1 && control$event_MI[j] == 0) {\n                    losses &lt;- losses + 1\n                } else {\n                    ties &lt;- ties + 1\n                }\n            }\n        }\n    }\n\n    list(\n        wins = wins, losses = losses, ties = ties,\n        win_ratio = wins / losses\n    )\n}\n\n# ç®€åŒ–ç¤ºä¾‹ï¼ˆå®Œæ•´ç‰ˆéœ€è¦æ›´å¤æ‚çš„é…å¯¹é€»è¾‘ï¼‰\ncat(\"Win Ratioæ¦‚å¿µæ¼”ç¤º:\\n\")\n\nWin Ratioæ¦‚å¿µæ¼”ç¤º:\n\ncat(\"æ²»ç–—ç»„'èµ¢'ï¼šæ²»ç–—æ‚£è€…æ¯”å¯¹ç…§æ‚£è€…ç»“å±€æ›´å¥½\\n\")\n\næ²»ç–—ç»„'èµ¢'ï¼šæ²»ç–—æ‚£è€…æ¯”å¯¹ç…§æ‚£è€…ç»“å±€æ›´å¥½\n\ncat(\"Win Ratio = èµ¢æ¬¡æ•° / è¾“æ¬¡æ•°\\n\")\n\nWin Ratio = èµ¢æ¬¡æ•° / è¾“æ¬¡æ•°",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "å¤åˆç»“å±€åˆ†æ"
    ]
  },
  {
    "objectID": "1077-composite-endpoints.html#ç¬¬äº”éƒ¨åˆ†äº‹ä»¶è´Ÿæ‹…åˆ†æ",
    "href": "1077-composite-endpoints.html#ç¬¬äº”éƒ¨åˆ†äº‹ä»¶è´Ÿæ‹…åˆ†æ",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šäº‹ä»¶è´Ÿæ‹…åˆ†æ",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šäº‹ä»¶è´Ÿæ‹…åˆ†æ\n\n# è®¡ç®—å„ç»„åˆ†å¯¹å¤åˆç»“å±€çš„è´¡çŒ®\ncontribution &lt;- trial_data %&gt;%\n    filter(composite_event == 1) %&gt;%\n    group_by(treatment, event_type) %&gt;%\n    summarise(n = n(), .groups = \"drop\") %&gt;%\n    group_by(treatment) %&gt;%\n    mutate(prop = n / sum(n))\n\nggplot(contribution, aes(x = treatment, y = prop, fill = event_type)) +\n    geom_col() +\n    scale_fill_manual(values = c(\"#dc2626\", \"#f97316\", \"#eab308\")) +\n    labs(\n        title = \"å¤åˆç»“å±€ç»„åˆ†æ„æˆ\",\n        x = \"æ²»ç–—ç»„\", y = \"æ¯”ä¾‹\", fill = \"äº‹ä»¶ç±»å‹\"\n    ) +\n    scale_y_continuous(labels = scales::percent)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "å¤åˆç»“å±€åˆ†æ"
    ]
  },
  {
    "objectID": "1077-composite-endpoints.html#ç¬¬å…­éƒ¨åˆ†æ•æ„Ÿæ€§åˆ†æ",
    "href": "1077-composite-endpoints.html#ç¬¬å…­éƒ¨åˆ†æ•æ„Ÿæ€§åˆ†æ",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šæ•æ„Ÿæ€§åˆ†æ",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šæ•æ„Ÿæ€§åˆ†æ\n\nä½¿ç”¨ç«äº‰é£é™©æ¡†æ¶\n\n# å°†å¤åˆç»“å±€ä½œä¸ºç«äº‰é£é™©åˆ†æ\nlibrary(cmprsk)\n\n# åˆ›å»ºç«äº‰é£é™©æ•°æ®\ntrial_data$event_num &lt;- as.numeric(trial_data$event_type) - 1 # 0=åˆ å¤±, 1=æ­»äº¡, 2=MI, 3=å’ä¸­\ntrial_data$treat_num &lt;- as.numeric(trial_data$treatment) - 1\n\n# Grayæ£€éªŒ\ngray_test &lt;- cuminc(trial_data$time, trial_data$event_num,\n    group = trial_data$treat_num\n)\n\n# ç»˜åˆ¶ç´¯ç§¯å‘ç—…ç‡\nplot(gray_test,\n    main = \"å„äº‹ä»¶ç´¯ç§¯å‘ç—…ç‡\",\n    xlab = \"æ—¶é—´ï¼ˆå¹´ï¼‰\", ylab = \"ç´¯ç§¯å‘ç—…ç‡\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "å¤åˆç»“å±€åˆ†æ"
    ]
  },
  {
    "objectID": "1077-composite-endpoints.html#ç¬¬ä¸ƒéƒ¨åˆ†æŠ¥å‘Šæ¨¡æ¿",
    "href": "1077-composite-endpoints.html#ç¬¬ä¸ƒéƒ¨åˆ†æŠ¥å‘Šæ¨¡æ¿",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæŠ¥å‘Šæ¨¡æ¿",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæŠ¥å‘Šæ¨¡æ¿\n\n# ç”Ÿæˆå¤åˆç»“å±€åˆ†ææŠ¥å‘Š\ncat(\"=== å¤åˆç»“å±€åˆ†ææŠ¥å‘Š ===\\n\\n\")\n\n=== å¤åˆç»“å±€åˆ†ææŠ¥å‘Š ===\n\ncat(\"1. æ ·æœ¬é‡:\", n, \"\\n\")\n\n1. æ ·æœ¬é‡: 1000 \n\ncat(\"2. éšè®¿æ—¶é—´:\", round(median(trial_data$time), 2), \"å¹´ï¼ˆä¸­ä½æ•°ï¼‰\\n\\n\")\n\n2. éšè®¿æ—¶é—´: 3.59 å¹´ï¼ˆä¸­ä½æ•°ï¼‰\n\ncat(\"3. äº‹ä»¶å‘ç”Ÿ:\\n\")\n\n3. äº‹ä»¶å‘ç”Ÿ:\n\nevent_summary &lt;- trial_data %&gt;%\n    group_by(treatment) %&gt;%\n    summarise(\n        N = n(),\n        å¤åˆç»“å±€ = sum(composite_event),\n        æ­»äº¡ = sum(event_type == \"æ­»äº¡\"),\n        MI = sum(event_type == \"MI\"),\n        å’ä¸­ = sum(event_type == \"å’ä¸­\")\n    )\nprint(event_summary)\n\n# A tibble: 2 Ã— 6\n  treatment     N å¤åˆç»“å±€  æ­»äº¡    MI  å’ä¸­\n  &lt;fct&gt;     &lt;int&gt;    &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;\n1 æ§åˆ¶        500      173    48    92    33\n2 æ²»ç–—        500      136    36    57    43\n\ncat(\"\\n4. æ²»ç–—æ•ˆæœ:\\n\")\n\n\n4. æ²»ç–—æ•ˆæœ:\n\ncat(\n    \"å¤åˆç»“å±€ HR:\", round(exp(coef(cox_composite)), 3),\n    \"(95% CI:\", round(exp(confint(cox_composite))[1], 3), \"-\",\n    round(exp(confint(cox_composite))[2], 3), \")\\n\"\n)\n\nå¤åˆç»“å±€ HR: 0.77 (95% CI: 0.615 - 0.963 )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "å¤åˆç»“å±€åˆ†æ"
    ]
  },
  {
    "objectID": "1077-composite-endpoints.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "1077-composite-endpoints.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# ===== å¤åˆç»“å±€ç”Ÿå­˜åˆ†æ =====\nlibrary(survival)\n\nsurv_obj &lt;- Surv(time, composite_event)\ncoxph(surv_obj ~ treatment, data = df)\n\n# ===== ç»„åˆ†åˆ†æ =====\n# åˆ†åˆ«å¯¹æ¯ä¸ªç»„åˆ†è¿›è¡Œåˆ†æ\n\n# ===== ç«äº‰é£é™© =====\nlibrary(cmprsk)\ncuminc(time, event_type, group)\n\n# ===== æŠ¥å‘Šè¦ç´  =====\n# 1. å¤åˆç»“å±€æ•´ä½“æ•ˆæœ\n# 2. å„ç»„åˆ†å•ç‹¬æ•ˆæœ\n# 3. å„ç»„åˆ†å¯¹å¤åˆç»“å±€çš„è´¡çŒ®\n# 4. æ•æ„Ÿæ€§åˆ†æ",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "å¤åˆç»“å±€åˆ†æ"
    ]
  },
  {
    "objectID": "1077-composite-endpoints.html#å°ç»“",
    "href": "1077-composite-endpoints.html#å°ç»“",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å°ç»“",
    "text": "å°ç»“\nå¤åˆç»“å±€åˆ†æè¦ç‚¹ï¼š\n\næ˜ç¡®å®šä¹‰ï¼šç¡®å®šç»„åˆ†äº‹ä»¶å’Œè§‚å¯Ÿæ—¶é—´\næ•´ä½“åˆ†æï¼šé¦–å‘äº‹ä»¶çš„ç”Ÿå­˜åˆ†æ\nç»„åˆ†åˆ†æï¼šæ£€æŸ¥æ•ˆåº”ä¸€è‡´æ€§\nè§£é‡Šè°¨æ…ï¼šæ•ˆåº”å¯èƒ½è¢«â€æ— æ•ˆâ€ç»„åˆ†ç¨€é‡Š\n\n\næŠ¥å‘Šå»ºè®®ï¼šåŒæ—¶æŠ¥å‘Šå¤åˆç»“å±€å’Œå„ç»„åˆ†ç»“æœï¼Œä½¿ç”¨æ£®æ—å›¾å±•ç¤ºã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "å¤åˆç»“å±€åˆ†æ"
    ]
  },
  {
    "objectID": "1077-composite-endpoints.html#å‚è€ƒèµ„æº",
    "href": "1077-composite-endpoints.html#å‚è€ƒèµ„æº",
    "title": "å¤åˆç»“å±€åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nPocock et al.Â (2012). The Win Ratio. European Heart Journal.\nFDAå¤åˆç»ˆç‚¹æŒ‡å—\nRauch et al.Â (2018). Opportunities and challenges of composite endpoints.",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "å¤åˆç»“å±€åˆ†æ"
    ]
  },
  {
    "objectID": "1077-composite-endpoints.html#rstanarm-ç®€ä»‹",
    "href": "1077-composite-endpoints.html#rstanarm-ç®€ä»‹",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "rstanarm ç®€ä»‹",
    "text": "rstanarm ç®€ä»‹\nrstanarm æ˜¯Stançš„Ræ¥å£ï¼Œæä¾›ä¸ lm(), glm() ç±»ä¼¼çš„è¯­æ³•è¿›è¡Œè´å¶æ–¯å›å½’ã€‚æ— éœ€å­¦ä¹ Stanè¯­è¨€ï¼Œå³å¯è·å¾—è´å¶æ–¯æ¨æ–­çš„ä¼˜åŠ¿ã€‚\n\nä¸ºä»€ä¹ˆä½¿ç”¨è´å¶æ–¯æ–¹æ³•ï¼Ÿ\n\n\n\né¢‘ç‡å­¦æ´¾\nè´å¶æ–¯ä¼˜åŠ¿\n\n\n\n\nç‚¹ä¼°è®¡+ç½®ä¿¡åŒºé—´\nå®Œæ•´åéªŒåˆ†å¸ƒ\n\n\næ ·æœ¬é‡ä¾èµ–\nå¯èå…¥å…ˆéªŒçŸ¥è¯†\n\n\néš¾ä»¥è§£é‡Š\nç›´è§‚æ¦‚ç‡è§£é‡Š\n\n\nå¤šé‡æ¯”è¾ƒé—®é¢˜\nè‡ªç„¶å¤„ç†ä¸ç¡®å®šæ€§\n\n\n\n\n\nrstanarm ä¼˜åŠ¿\n\nç†Ÿæ‚‰çš„å…¬å¼è¯­æ³•\nè‡ªåŠ¨é€‰æ‹©åˆç†å…ˆéªŒ\nä¸tidyverseå…¼å®¹\nä¸°å¯Œçš„è¯Šæ–­å·¥å…·",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "å¤åˆç»“å±€åˆ†æ"
    ]
  },
  {
    "objectID": "1077-composite-endpoints.html#å®‰è£…ä¸åŠ è½½-1",
    "href": "1077-composite-endpoints.html#å®‰è£…ä¸åŠ è½½-1",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\nlibrary(rstanarm)\nlibrary(bayesplot)\nlibrary(ggplot2)\nlibrary(dplyr)\n\nset.seed(42)\ntheme_set(theme_bw(base_size = 12))\n\n# è®¾ç½®å¹¶è¡Œ\noptions(mc.cores = parallel::detectCores())",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "å¤åˆç»“å±€åˆ†æ"
    ]
  },
  {
    "objectID": "1077-composite-endpoints.html#ç¬¬ä¸€éƒ¨åˆ†çº¿æ€§å›å½’",
    "href": "1077-composite-endpoints.html#ç¬¬ä¸€éƒ¨åˆ†çº¿æ€§å›å½’",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šçº¿æ€§å›å½’",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šçº¿æ€§å›å½’\n\nåŸºæœ¬æ‹Ÿåˆ\n# ä½¿ç”¨mtcarsæ•°æ®\ndata(mtcars)\n\n# è´å¶æ–¯çº¿æ€§å›å½’\nbayes_lm &lt;- stan_glm(mpg ~ wt + hp,\n    data = mtcars,\n    family = gaussian(),\n    seed = 42,\n    refresh = 0\n) # é™é»˜è¾“å‡º\n\n# æŸ¥çœ‹ç»“æœ\nprint(bayes_lm)\n\n\nåéªŒåˆ†å¸ƒ\n# æå–åéªŒæ ·æœ¬\nposterior &lt;- as.data.frame(bayes_lm)\nhead(posterior)\n# åéªŒåˆ†å¸ƒå¯è§†åŒ–\nmcmc_dens(bayes_lm, pars = c(\"wt\", \"hp\")) +\n    labs(title = \"ç³»æ•°åéªŒåˆ†å¸ƒ\")\n\n\nä¸é¢‘ç‡æ³•æ¯”è¾ƒ\n# é¢‘ç‡lm\nfreq_lm &lt;- lm(mpg ~ wt + hp, data = mtcars)\n\n# æ¯”è¾ƒ\ncat(\"é¢‘ç‡æ³•ä¼°è®¡:\\n\")\nprint(coef(freq_lm))\ncat(\"\\nè´å¶æ–¯åéªŒå‡å€¼:\\n\")\nprint(coef(bayes_lm))",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "å¤åˆç»“å±€åˆ†æ"
    ]
  },
  {
    "objectID": "1077-composite-endpoints.html#ç¬¬äºŒéƒ¨åˆ†å…ˆéªŒè®¾ç½®",
    "href": "1077-composite-endpoints.html#ç¬¬äºŒéƒ¨åˆ†å…ˆéªŒè®¾ç½®",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šå…ˆéªŒè®¾ç½®",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šå…ˆéªŒè®¾ç½®\n\né»˜è®¤å…ˆéªŒ\n# æŸ¥çœ‹é»˜è®¤å…ˆéªŒ\nprior_summary(bayes_lm)\n\n\nè‡ªå®šä¹‰å…ˆéªŒ\n# ä½¿ç”¨ä¿¡æ¯æ€§å…ˆéªŒ\nbayes_lm_informed &lt;- stan_glm(\n    mpg ~ wt + hp,\n    data = mtcars,\n    prior = normal(c(-5, 0), c(2, 0.1)), # wtå’Œhpçš„å…ˆéªŒ\n    prior_intercept = normal(30, 10),\n    seed = 42,\n    refresh = 0\n)\n\n# æ¯”è¾ƒç»“æœ\ncat(\"é»˜è®¤å…ˆéªŒä¼°è®¡:\\n\")\nprint(coef(bayes_lm))\ncat(\"\\nä¿¡æ¯æ€§å…ˆéªŒä¼°è®¡:\\n\")\nprint(coef(bayes_lm_informed))\n\n\nå…ˆéªŒé¢„æµ‹æ£€æŸ¥\n# å…ˆéªŒé¢„æµ‹åˆ†å¸ƒ\nbayes_lm_prior &lt;- stan_glm(\n    mpg ~ wt + hp,\n    data = mtcars,\n    prior_PD = TRUE, # åªä»å…ˆéªŒé‡‡æ ·\n    seed = 42,\n    refresh = 0\n)\n\n# å¯è§†åŒ–\npp_check(bayes_lm_prior, nreps = 50) +\n    labs(\n        title = \"å…ˆéªŒé¢„æµ‹æ£€æŸ¥\",\n        subtitle = \"å…ˆéªŒæ˜¯å¦äº§ç”Ÿåˆç†çš„æ•°æ®èŒƒå›´ï¼Ÿ\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "å¤åˆç»“å±€åˆ†æ"
    ]
  },
  {
    "objectID": "1077-composite-endpoints.html#ç¬¬ä¸‰éƒ¨åˆ†åéªŒæ¨æ–­",
    "href": "1077-composite-endpoints.html#ç¬¬ä¸‰éƒ¨åˆ†åéªŒæ¨æ–­",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šåéªŒæ¨æ–­",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šåéªŒæ¨æ–­\n\nå¯ä¿¡åŒºé—´\n# åéªŒåŒºé—´\nposterior_interval(bayes_lm, prob = 0.95)\n\n\næ¦‚ç‡é™ˆè¿°\n# è®¡ç®—ç‰¹å®šæ¦‚ç‡\n# wtæ•ˆåº”å°äº-4çš„æ¦‚ç‡\nprob_wt &lt;- mean(posterior$wt &lt; -4)\ncat(\"P(wtç³»æ•° &lt; -4) =\", round(prob_wt, 3), \"\\n\")\n\n# hpæ•ˆåº”ä¸ºè´Ÿçš„æ¦‚ç‡\nprob_hp_neg &lt;- mean(posterior$hp &lt; 0)\ncat(\"P(hpç³»æ•° &lt; 0) =\", round(prob_hp_neg, 3), \"\\n\")\n\n\nåéªŒé¢„æµ‹\n# æ–°æ•°æ®é¢„æµ‹\nnew_car &lt;- data.frame(wt = 3, hp = 120)\n\n# åéªŒé¢„æµ‹åˆ†å¸ƒ\npred_post &lt;- posterior_predict(bayes_lm, newdata = new_car)\n\n# é¢„æµ‹åŒºé—´\ncat(\"é¢„æµ‹mpg (95%åŒºé—´):\\n\")\ncat(\"å‡å€¼:\", round(mean(pred_post), 2), \"\\n\")\ncat(\"åŒºé—´:\", round(quantile(pred_post, c(0.025, 0.975)), 2), \"\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "å¤åˆç»“å±€åˆ†æ"
    ]
  },
  {
    "objectID": "1077-composite-endpoints.html#ç¬¬å››éƒ¨åˆ†æ¨¡å‹è¯Šæ–­",
    "href": "1077-composite-endpoints.html#ç¬¬å››éƒ¨åˆ†æ¨¡å‹è¯Šæ–­",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šæ¨¡å‹è¯Šæ–­",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šæ¨¡å‹è¯Šæ–­\n\nMCMCè¯Šæ–­\n# è½¨è¿¹å›¾\nmcmc_trace(bayes_lm, pars = c(\"wt\", \"hp\"))\n# R-hatå’Œæœ‰æ•ˆæ ·æœ¬é‡\nsummary(bayes_lm)[, c(\"Rhat\", \"n_eff\")]\n\n\nåéªŒé¢„æµ‹æ£€æŸ¥\n# åéªŒé¢„æµ‹ vs è§‚æµ‹æ•°æ®\npp_check(bayes_lm, nreps = 50) +\n    labs(\n        title = \"åéªŒé¢„æµ‹æ£€æŸ¥\",\n        subtitle = \"æ¨¡å‹èƒ½å¦é‡ç°è§‚æµ‹æ•°æ®çš„åˆ†å¸ƒï¼Ÿ\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "å¤åˆç»“å±€åˆ†æ"
    ]
  },
  {
    "objectID": "1077-composite-endpoints.html#ç¬¬äº”éƒ¨åˆ†logisticå›å½’",
    "href": "1077-composite-endpoints.html#ç¬¬äº”éƒ¨åˆ†logisticå›å½’",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šLogisticå›å½’",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šLogisticå›å½’\n# äºŒåˆ†ç±»ç»“å±€\nmtcars$am_factor &lt;- factor(mtcars$am)\n\nbayes_logit &lt;- stan_glm(\n    am_factor ~ wt + hp,\n    data = mtcars,\n    family = binomial(link = \"logit\"),\n    seed = 42,\n    refresh = 0\n)\n\nprint(bayes_logit)\n# ORå’Œå¯ä¿¡åŒºé—´\nor_posterior &lt;- exp(as.data.frame(bayes_logit)[, c(\"wt\", \"hp\")])\n\ncat(\"ORä¼°è®¡ (åéªŒä¸­ä½æ•°):\\n\")\ncat(\"wt:\", round(median(or_posterior$wt), 3), \"\\n\")\ncat(\"hp:\", round(median(or_posterior$hp), 3), \"\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "å¤åˆç»“å±€åˆ†æ"
    ]
  },
  {
    "objectID": "1077-composite-endpoints.html#ç¬¬å…­éƒ¨åˆ†æ¨¡å‹æ¯”è¾ƒ",
    "href": "1077-composite-endpoints.html#ç¬¬å…­éƒ¨åˆ†æ¨¡å‹æ¯”è¾ƒ",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹æ¯”è¾ƒ",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹æ¯”è¾ƒ\n\nLOOäº¤å‰éªŒè¯\n# Leave-one-outäº¤å‰éªŒè¯\nloo_lm &lt;- loo(bayes_lm)\nprint(loo_lm)\n# æ¯”è¾ƒå¤šä¸ªæ¨¡å‹\nbayes_lm2 &lt;- stan_glm(mpg ~ wt + hp + disp,\n    data = mtcars,\n    seed = 42, refresh = 0\n)\n\nloo_lm2 &lt;- loo(bayes_lm2)\n\n# æ¨¡å‹æ¯”è¾ƒ\nloo_compare(loo_lm, loo_lm2)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "å¤åˆç»“å±€åˆ†æ"
    ]
  },
  {
    "objectID": "1077-composite-endpoints.html#ç¬¬ä¸ƒéƒ¨åˆ†å±‚æ¬¡æ¨¡å‹",
    "href": "1077-composite-endpoints.html#ç¬¬ä¸ƒéƒ¨åˆ†å±‚æ¬¡æ¨¡å‹",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå±‚æ¬¡æ¨¡å‹",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå±‚æ¬¡æ¨¡å‹\n# åˆ†ç»„æ•°æ®\ndata(sleepstudy, package = \"lme4\")\n\n# è´å¶æ–¯æ··åˆæ•ˆåº”æ¨¡å‹\nbayes_hier &lt;- stan_lmer(\n    Reaction ~ Days + (Days | Subject),\n    data = sleepstudy,\n    seed = 42,\n    refresh = 0\n)\n\nprint(bayes_hier, digits = 2)\n# éšæœºæ•ˆåº”åéªŒ\nranef_post &lt;- as.data.frame(bayes_hier)\nranef_cols &lt;- grep(\"^b\\\\[\", names(ranef_post), value = TRUE)\ncat(\"éšæœºæ•ˆåº”æ•°é‡:\", length(ranef_cols), \"\\n\")",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "å¤åˆç»“å±€åˆ†æ"
    ]
  },
  {
    "objectID": "1077-composite-endpoints.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-1",
    "href": "1077-composite-endpoints.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥-1",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n```{r eval=FALSE} # ===== åŸºæœ¬æ¨¡å‹ ===== library(rstanarm)",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "å¤åˆç»“å±€åˆ†æ"
    ]
  },
  {
    "objectID": "1077-composite-endpoints.html#å°ç»“-1",
    "href": "1077-composite-endpoints.html#å°ç»“-1",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "å°ç»“",
    "text": "å°ç»“\nrstanarmçš„æ ¸å¿ƒå·¥ä½œæµç¨‹ï¼š\n\næ¨¡å‹è®¾å®šï¼šä½¿ç”¨ç†Ÿæ‚‰çš„å…¬å¼è¯­æ³•\nå…ˆéªŒé€‰æ‹©ï¼šé»˜è®¤å…ˆéªŒé€šå¸¸åˆç†ï¼Œæˆ–è‡ªå®šä¹‰\næ‹Ÿåˆï¼šè‡ªåŠ¨MCMCé‡‡æ ·\nè¯Šæ–­ï¼šæ£€æŸ¥R-hatã€è½¨è¿¹å›¾ã€åéªŒé¢„æµ‹\næ¨æ–­ï¼šåˆ©ç”¨å®Œæ•´åéªŒåˆ†å¸ƒ\n\n\nä¼˜åŠ¿ï¼šè´å¶æ–¯æ–¹æ³•è®©ä½ èƒ½å¤Ÿç›´æ¥é™ˆè¿°â€å‚æ•°åœ¨åŒºé—´å†…çš„æ¦‚ç‡â€ï¼Œè€Œéâ€å¦‚æœé‡å¤å®éªŒâ€¦â€",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "å¤åˆç»“å±€åˆ†æ"
    ]
  },
  {
    "objectID": "1077-composite-endpoints.html#å‚è€ƒèµ„æº-1",
    "href": "1077-composite-endpoints.html#å‚è€ƒèµ„æº-1",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nrstanarmå®˜æ–¹æ–‡æ¡£\nStanç”¨æˆ·æŒ‡å—\nGelman et al.Â (2020). Regression and Other Stories.",
    "crumbs": [
      "ä¸»é¡µ",
      "R è¯­è¨€æ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "å¤åˆç»“å±€åˆ†æ"
    ]
  },
  {
    "objectID": "1078-rstanarm-bayesian.html",
    "href": "1078-rstanarm-bayesian.html",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "",
    "text": "rstanarm æ˜¯Stançš„Ræ¥å£ï¼Œæä¾›ä¸ lm(), glm() ç±»ä¼¼çš„è¯­æ³•è¿›è¡Œè´å¶æ–¯å›å½’ã€‚æ— éœ€å­¦ä¹ Stanè¯­è¨€ï¼Œå³å¯è·å¾—è´å¶æ–¯æ¨æ–­çš„ä¼˜åŠ¿ã€‚\n\n\n\n\n\né¢‘ç‡å­¦æ´¾\nè´å¶æ–¯ä¼˜åŠ¿\n\n\n\n\nç‚¹ä¼°è®¡+ç½®ä¿¡åŒºé—´\nå®Œæ•´åéªŒåˆ†å¸ƒ\n\n\næ ·æœ¬é‡ä¾èµ–\nå¯èå…¥å…ˆéªŒçŸ¥è¯†\n\n\néš¾ä»¥è§£é‡Š\nç›´è§‚æ¦‚ç‡è§£é‡Š\n\n\nå¤šé‡æ¯”è¾ƒé—®é¢˜\nè‡ªç„¶å¤„ç†ä¸ç¡®å®šæ€§\n\n\n\n\n\n\n\nç†Ÿæ‚‰çš„å…¬å¼è¯­æ³•\nè‡ªåŠ¨é€‰æ‹©åˆç†å…ˆéªŒ\nä¸tidyverseå…¼å®¹\nä¸°å¯Œçš„è¯Šæ–­å·¥å…·",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "rstanarm è´å¶æ–¯å›å½’"
    ]
  },
  {
    "objectID": "1078-rstanarm-bayesian.html#rstanarm-ç®€ä»‹",
    "href": "1078-rstanarm-bayesian.html#rstanarm-ç®€ä»‹",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "",
    "text": "rstanarm æ˜¯Stançš„Ræ¥å£ï¼Œæä¾›ä¸ lm(), glm() ç±»ä¼¼çš„è¯­æ³•è¿›è¡Œè´å¶æ–¯å›å½’ã€‚æ— éœ€å­¦ä¹ Stanè¯­è¨€ï¼Œå³å¯è·å¾—è´å¶æ–¯æ¨æ–­çš„ä¼˜åŠ¿ã€‚\n\n\n\n\n\né¢‘ç‡å­¦æ´¾\nè´å¶æ–¯ä¼˜åŠ¿\n\n\n\n\nç‚¹ä¼°è®¡+ç½®ä¿¡åŒºé—´\nå®Œæ•´åéªŒåˆ†å¸ƒ\n\n\næ ·æœ¬é‡ä¾èµ–\nå¯èå…¥å…ˆéªŒçŸ¥è¯†\n\n\néš¾ä»¥è§£é‡Š\nç›´è§‚æ¦‚ç‡è§£é‡Š\n\n\nå¤šé‡æ¯”è¾ƒé—®é¢˜\nè‡ªç„¶å¤„ç†ä¸ç¡®å®šæ€§\n\n\n\n\n\n\n\nç†Ÿæ‚‰çš„å…¬å¼è¯­æ³•\nè‡ªåŠ¨é€‰æ‹©åˆç†å…ˆéªŒ\nä¸tidyverseå…¼å®¹\nä¸°å¯Œçš„è¯Šæ–­å·¥å…·",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "rstanarm è´å¶æ–¯å›å½’"
    ]
  },
  {
    "objectID": "1078-rstanarm-bayesian.html#å®‰è£…ä¸åŠ è½½",
    "href": "1078-rstanarm-bayesian.html#å®‰è£…ä¸åŠ è½½",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\nlibrary(rstanarm)\nlibrary(bayesplot)\nlibrary(ggplot2)\nlibrary(dplyr)\n\nset.seed(42)\ntheme_set(theme_bw(base_size = 12))\n\n# è®¾ç½®å¹¶è¡Œ\noptions(mc.cores = parallel::detectCores())",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "rstanarm è´å¶æ–¯å›å½’"
    ]
  },
  {
    "objectID": "1078-rstanarm-bayesian.html#ç¬¬ä¸€éƒ¨åˆ†çº¿æ€§å›å½’",
    "href": "1078-rstanarm-bayesian.html#ç¬¬ä¸€éƒ¨åˆ†çº¿æ€§å›å½’",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šçº¿æ€§å›å½’",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šçº¿æ€§å›å½’\n\nåŸºæœ¬æ‹Ÿåˆ\n\n# ä½¿ç”¨mtcarsæ•°æ®\ndata(mtcars)\n\n# è´å¶æ–¯çº¿æ€§å›å½’\nbayes_lm &lt;- stan_glm(mpg ~ wt + hp,\n    data = mtcars,\n    family = gaussian(),\n    seed = 42,\n    refresh = 0\n) # é™é»˜è¾“å‡º\n\n# æŸ¥çœ‹ç»“æœ\nprint(bayes_lm)\n\nstan_glm\n family:       gaussian [identity]\n formula:      mpg ~ wt + hp\n observations: 32\n predictors:   3\n------\n            Median MAD_SD\n(Intercept) 37.2    1.7  \nwt          -3.9    0.7  \nhp           0.0    0.0  \n\nAuxiliary parameter(s):\n      Median MAD_SD\nsigma 2.6    0.3   \n\n------\n* For help interpreting the printed output see ?print.stanreg\n* For info on the priors used see ?prior_summary.stanreg\n\n\n\n\nåéªŒåˆ†å¸ƒ\n\n# æå–åéªŒæ ·æœ¬\nposterior &lt;- as.data.frame(bayes_lm)\nhead(posterior)\n\n  (Intercept)        wt          hp    sigma\n1    36.79738 -4.507985 -0.01621956 3.155685\n2    37.04500 -3.836150 -0.03201019 2.295033\n3    36.40100 -3.084108 -0.04351015 2.676849\n4    40.27486 -5.374905 -0.01858674 2.649026\n5    40.52296 -5.486085 -0.01776984 2.676574\n6    38.98022 -4.849649 -0.02164213 2.629157\n\n\n\n# åéªŒåˆ†å¸ƒå¯è§†åŒ–\nmcmc_dens(bayes_lm, pars = c(\"wt\", \"hp\")) +\n    labs(title = \"ç³»æ•°åéªŒåˆ†å¸ƒ\")\n\n\n\n\n\n\n\n\n\n\nä¸é¢‘ç‡æ³•æ¯”è¾ƒ\n\n# é¢‘ç‡lm\nfreq_lm &lt;- lm(mpg ~ wt + hp, data = mtcars)\n\n# æ¯”è¾ƒ\ncat(\"é¢‘ç‡æ³•ä¼°è®¡:\\n\")\n\né¢‘ç‡æ³•ä¼°è®¡:\n\nprint(coef(freq_lm))\n\n(Intercept)          wt          hp \n37.22727012 -3.87783074 -0.03177295 \n\ncat(\"\\nè´å¶æ–¯åéªŒå‡å€¼:\\n\")\n\n\nè´å¶æ–¯åéªŒå‡å€¼:\n\nprint(coef(bayes_lm))\n\n(Intercept)          wt          hp \n 37.2044739  -3.9038709  -0.0314499",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "rstanarm è´å¶æ–¯å›å½’"
    ]
  },
  {
    "objectID": "1078-rstanarm-bayesian.html#ç¬¬äºŒéƒ¨åˆ†å…ˆéªŒè®¾ç½®",
    "href": "1078-rstanarm-bayesian.html#ç¬¬äºŒéƒ¨åˆ†å…ˆéªŒè®¾ç½®",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šå…ˆéªŒè®¾ç½®",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šå…ˆéªŒè®¾ç½®\n\né»˜è®¤å…ˆéªŒ\n\n# æŸ¥çœ‹é»˜è®¤å…ˆéªŒ\nprior_summary(bayes_lm)\n\nPriors for model 'bayes_lm' \n------\nIntercept (after predictors centered)\n  Specified prior:\n    ~ normal(location = 20, scale = 2.5)\n  Adjusted prior:\n    ~ normal(location = 20, scale = 15)\n\nCoefficients\n  Specified prior:\n    ~ normal(location = [0,0], scale = [2.5,2.5])\n  Adjusted prior:\n    ~ normal(location = [0,0], scale = [15.40, 0.22])\n\nAuxiliary (sigma)\n  Specified prior:\n    ~ exponential(rate = 1)\n  Adjusted prior:\n    ~ exponential(rate = 0.17)\n------\nSee help('prior_summary.stanreg') for more details\n\n\n\n\nè‡ªå®šä¹‰å…ˆéªŒ\n\n# ä½¿ç”¨ä¿¡æ¯æ€§å…ˆéªŒ\nbayes_lm_informed &lt;- stan_glm(\n    mpg ~ wt + hp,\n    data = mtcars,\n    prior = normal(c(-5, 0), c(2, 0.1)), # wtå’Œhpçš„å…ˆéªŒ\n    prior_intercept = normal(30, 10),\n    seed = 42,\n    refresh = 0\n)\n\n# æ¯”è¾ƒç»“æœ\ncat(\"é»˜è®¤å…ˆéªŒä¼°è®¡:\\n\")\n\né»˜è®¤å…ˆéªŒä¼°è®¡:\n\nprint(coef(bayes_lm))\n\n(Intercept)          wt          hp \n 37.2044739  -3.9038709  -0.0314499 \n\ncat(\"\\nä¿¡æ¯æ€§å…ˆéªŒä¼°è®¡:\\n\")\n\n\nä¿¡æ¯æ€§å…ˆéªŒä¼°è®¡:\n\nprint(coef(bayes_lm_informed))\n\n(Intercept)          wt          hp \n37.49072013 -4.01203323 -0.03052901 \n\n\n\n\nå…ˆéªŒé¢„æµ‹æ£€æŸ¥\n\n# å…ˆéªŒé¢„æµ‹åˆ†å¸ƒ\nbayes_lm_prior &lt;- stan_glm(\n    mpg ~ wt + hp,\n    data = mtcars,\n    prior_PD = TRUE, # åªä»å…ˆéªŒé‡‡æ ·\n    seed = 42,\n    refresh = 0\n)\n\n# å¯è§†åŒ–\npp_check(bayes_lm_prior, nreps = 50) +\n    labs(\n        title = \"å…ˆéªŒé¢„æµ‹æ£€æŸ¥\",\n        subtitle = \"å…ˆéªŒæ˜¯å¦äº§ç”Ÿåˆç†çš„æ•°æ®èŒƒå›´ï¼Ÿ\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "rstanarm è´å¶æ–¯å›å½’"
    ]
  },
  {
    "objectID": "1078-rstanarm-bayesian.html#ç¬¬ä¸‰éƒ¨åˆ†åéªŒæ¨æ–­",
    "href": "1078-rstanarm-bayesian.html#ç¬¬ä¸‰éƒ¨åˆ†åéªŒæ¨æ–­",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šåéªŒæ¨æ–­",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šåéªŒæ¨æ–­\n\nå¯ä¿¡åŒºé—´\n\n# åéªŒåŒºé—´\nposterior_interval(bayes_lm, prob = 0.95)\n\n                   2.5%       97.5%\n(Intercept) 33.94298523 40.66195468\nwt          -5.18045388 -2.64596493\nhp          -0.04939665 -0.01310116\nsigma        2.08038054  3.46719272\n\n\n\n\næ¦‚ç‡é™ˆè¿°\n\n# è®¡ç®—ç‰¹å®šæ¦‚ç‡\n# wtæ•ˆåº”å°äº-4çš„æ¦‚ç‡\nprob_wt &lt;- mean(posterior$wt &lt; -4)\ncat(\"P(wtç³»æ•° &lt; -4) =\", round(prob_wt, 3), \"\\n\")\n\nP(wtç³»æ•° &lt; -4) = 0.446 \n\n# hpæ•ˆåº”ä¸ºè´Ÿçš„æ¦‚ç‡\nprob_hp_neg &lt;- mean(posterior$hp &lt; 0)\ncat(\"P(hpç³»æ•° &lt; 0) =\", round(prob_hp_neg, 3), \"\\n\")\n\nP(hpç³»æ•° &lt; 0) = 1 \n\n\n\n\nåéªŒé¢„æµ‹\n\n# æ–°æ•°æ®é¢„æµ‹\nnew_car &lt;- data.frame(wt = 3, hp = 120)\n\n# åéªŒé¢„æµ‹åˆ†å¸ƒ\npred_post &lt;- posterior_predict(bayes_lm, newdata = new_car)\n\n# é¢„æµ‹åŒºé—´\ncat(\"é¢„æµ‹mpg (95%åŒºé—´):\\n\")\n\né¢„æµ‹mpg (95%åŒºé—´):\n\ncat(\"å‡å€¼:\", round(mean(pred_post), 2), \"\\n\")\n\nå‡å€¼: 21.8 \n\ncat(\"åŒºé—´:\", round(quantile(pred_post, c(0.025, 0.975)), 2), \"\\n\")\n\nåŒºé—´: 16.45 27.18",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "rstanarm è´å¶æ–¯å›å½’"
    ]
  },
  {
    "objectID": "1078-rstanarm-bayesian.html#ç¬¬å››éƒ¨åˆ†æ¨¡å‹è¯Šæ–­",
    "href": "1078-rstanarm-bayesian.html#ç¬¬å››éƒ¨åˆ†æ¨¡å‹è¯Šæ–­",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šæ¨¡å‹è¯Šæ–­",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šæ¨¡å‹è¯Šæ–­\n\nMCMCè¯Šæ–­\n\n# è½¨è¿¹å›¾\nmcmc_trace(bayes_lm, pars = c(\"wt\", \"hp\"))\n\n\n\n\n\n\n\n\n\n# R-hatå’Œæœ‰æ•ˆæ ·æœ¬é‡\nsummary(bayes_lm)[, c(\"Rhat\", \"n_eff\")]\n\n                   Rhat n_eff\n(Intercept)   0.9997242  4189\nwt            1.0010013  2436\nhp            1.0018771  2314\nsigma         0.9994384  2727\nmean_PPD      1.0008820  3404\nlog-posterior 1.0014885  1634\n\n\n\n\nåéªŒé¢„æµ‹æ£€æŸ¥\n\n# åéªŒé¢„æµ‹ vs è§‚æµ‹æ•°æ®\npp_check(bayes_lm, nreps = 50) +\n    labs(\n        title = \"åéªŒé¢„æµ‹æ£€æŸ¥\",\n        subtitle = \"æ¨¡å‹èƒ½å¦é‡ç°è§‚æµ‹æ•°æ®çš„åˆ†å¸ƒï¼Ÿ\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "rstanarm è´å¶æ–¯å›å½’"
    ]
  },
  {
    "objectID": "1078-rstanarm-bayesian.html#ç¬¬äº”éƒ¨åˆ†logisticå›å½’",
    "href": "1078-rstanarm-bayesian.html#ç¬¬äº”éƒ¨åˆ†logisticå›å½’",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šLogisticå›å½’",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šLogisticå›å½’\n\n# äºŒåˆ†ç±»ç»“å±€\nmtcars$am_factor &lt;- factor(mtcars$am)\n\nbayes_logit &lt;- stan_glm(\n    am_factor ~ wt + hp,\n    data = mtcars,\n    family = binomial(link = \"logit\"),\n    seed = 42,\n    refresh = 0\n)\n\nprint(bayes_logit)\n\nstan_glm\n family:       binomial [logit]\n formula:      am_factor ~ wt + hp\n observations: 32\n predictors:   3\n------\n            Median MAD_SD\n(Intercept) 11.9    3.6  \nwt          -5.1    1.4  \nhp           0.0    0.0  \n\n------\n* For help interpreting the printed output see ?print.stanreg\n* For info on the priors used see ?prior_summary.stanreg\n\n\n\n# ORå’Œå¯ä¿¡åŒºé—´\nor_posterior &lt;- exp(as.data.frame(bayes_logit)[, c(\"wt\", \"hp\")])\n\ncat(\"ORä¼°è®¡ (åéªŒä¸­ä½æ•°):\\n\")\n\nORä¼°è®¡ (åéªŒä¸­ä½æ•°):\n\ncat(\"wt:\", round(median(or_posterior$wt), 3), \"\\n\")\n\nwt: 0.006 \n\ncat(\"hp:\", round(median(or_posterior$hp), 3), \"\\n\")\n\nhp: 1.022",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "rstanarm è´å¶æ–¯å›å½’"
    ]
  },
  {
    "objectID": "1078-rstanarm-bayesian.html#ç¬¬å…­éƒ¨åˆ†æ¨¡å‹æ¯”è¾ƒ",
    "href": "1078-rstanarm-bayesian.html#ç¬¬å…­éƒ¨åˆ†æ¨¡å‹æ¯”è¾ƒ",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹æ¯”è¾ƒ",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡å‹æ¯”è¾ƒ\n\nLOOäº¤å‰éªŒè¯\n\n# Leave-one-outäº¤å‰éªŒè¯\nloo_lm &lt;- loo(bayes_lm)\nprint(loo_lm)\n\n\nComputed from 4000 by 32 log-likelihood matrix.\n\n         Estimate  SE\nelpd_loo    -79.0 4.8\np_loo         4.3 1.5\nlooic       158.1 9.6\n------\nMCSE of elpd_loo is 0.1.\nMCSE and ESS estimates assume independent draws (r_eff=1).\n\nAll Pareto k estimates are good (k &lt; 0.7).\nSee help('pareto-k-diagnostic') for details.\n\n\n\n# æ¯”è¾ƒå¤šä¸ªæ¨¡å‹\nbayes_lm2 &lt;- stan_glm(mpg ~ wt + hp + disp,\n    data = mtcars,\n    seed = 42, refresh = 0\n)\n\nloo_lm2 &lt;- loo(bayes_lm2)\n\n# æ¨¡å‹æ¯”è¾ƒ\nloo_compare(loo_lm, loo_lm2)\n\n          elpd_diff se_diff\nbayes_lm   0.0       0.0   \nbayes_lm2 -0.9       0.4",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "rstanarm è´å¶æ–¯å›å½’"
    ]
  },
  {
    "objectID": "1078-rstanarm-bayesian.html#ç¬¬ä¸ƒéƒ¨åˆ†å±‚æ¬¡æ¨¡å‹",
    "href": "1078-rstanarm-bayesian.html#ç¬¬ä¸ƒéƒ¨åˆ†å±‚æ¬¡æ¨¡å‹",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå±‚æ¬¡æ¨¡å‹",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå±‚æ¬¡æ¨¡å‹\n\n# åˆ†ç»„æ•°æ®\ndata(sleepstudy, package = \"lme4\")\n\n# è´å¶æ–¯æ··åˆæ•ˆåº”æ¨¡å‹\nbayes_hier &lt;- stan_lmer(\n    Reaction ~ Days + (Days | Subject),\n    data = sleepstudy,\n    seed = 42,\n    refresh = 0\n)\n\nprint(bayes_hier, digits = 2)\n\nstan_lmer\n family:       gaussian [identity]\n formula:      Reaction ~ Days + (Days | Subject)\n observations: 180\n------\n            Median MAD_SD\n(Intercept) 251.30   6.52\nDays         10.54   1.71\n\nAuxiliary parameter(s):\n      Median MAD_SD\nsigma 25.89   1.56 \n\nError terms:\n Groups   Name        Std.Dev. Corr\n Subject  (Intercept) 24.25        \n          Days         6.84    0.08\n Residual             25.97        \nNum. levels: Subject 18 \n\n------\n* For help interpreting the printed output see ?print.stanreg\n* For info on the priors used see ?prior_summary.stanreg\n\n\n\n# éšæœºæ•ˆåº”åéªŒ\nranef_post &lt;- as.data.frame(bayes_hier)\nranef_cols &lt;- grep(\"^b\\\\[\", names(ranef_post), value = TRUE)\ncat(\"éšæœºæ•ˆåº”æ•°é‡:\", length(ranef_cols), \"\\n\")\n\néšæœºæ•ˆåº”æ•°é‡: 36",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "rstanarm è´å¶æ–¯å›å½’"
    ]
  },
  {
    "objectID": "1078-rstanarm-bayesian.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "1078-rstanarm-bayesian.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# ===== åŸºæœ¬æ¨¡å‹ =====\nlibrary(rstanarm)\n\n# çº¿æ€§å›å½’\nstan_glm(y ~ x1 + x2, data = df)\n\n# Logisticå›å½’\nstan_glm(y ~ x1 + x2, data = df, family = binomial)\n\n# æ··åˆæ•ˆåº”\nstan_lmer(y ~ x + (1 | group), data = df)\n\n# ===== å…ˆéªŒè®¾ç½® =====\nstan_glm(y ~ x,\n    prior = normal(0, 1),\n    prior_intercept = normal(0, 10)\n)\n\n# ===== åéªŒæ¨æ–­ =====\nposterior_interval(fit) # å¯ä¿¡åŒºé—´\nposterior_predict(fit, newdata) # é¢„æµ‹\npp_check(fit) # åéªŒæ£€æŸ¥\n\n# ===== è¯Šæ–­ =====\nmcmc_trace(fit) # è½¨è¿¹å›¾\nloo(fit) # LOO-CV",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "rstanarm è´å¶æ–¯å›å½’"
    ]
  },
  {
    "objectID": "1078-rstanarm-bayesian.html#å°ç»“",
    "href": "1078-rstanarm-bayesian.html#å°ç»“",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "å°ç»“",
    "text": "å°ç»“\nrstanarmçš„æ ¸å¿ƒå·¥ä½œæµç¨‹ï¼š\n\næ¨¡å‹è®¾å®šï¼šä½¿ç”¨ç†Ÿæ‚‰çš„å…¬å¼è¯­æ³•\nå…ˆéªŒé€‰æ‹©ï¼šé»˜è®¤å…ˆéªŒé€šå¸¸åˆç†ï¼Œæˆ–è‡ªå®šä¹‰\næ‹Ÿåˆï¼šè‡ªåŠ¨MCMCé‡‡æ ·\nè¯Šæ–­ï¼šæ£€æŸ¥R-hatã€è½¨è¿¹å›¾ã€åéªŒé¢„æµ‹\næ¨æ–­ï¼šåˆ©ç”¨å®Œæ•´åéªŒåˆ†å¸ƒ\n\n\nä¼˜åŠ¿ï¼šè´å¶æ–¯æ–¹æ³•è®©ä½ èƒ½å¤Ÿç›´æ¥é™ˆè¿°â€å‚æ•°åœ¨åŒºé—´å†…çš„æ¦‚ç‡â€ï¼Œè€Œéâ€å¦‚æœé‡å¤å®éªŒâ€¦â€",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "rstanarm è´å¶æ–¯å›å½’"
    ]
  },
  {
    "objectID": "1078-rstanarm-bayesian.html#å‚è€ƒèµ„æº",
    "href": "1078-rstanarm-bayesian.html#å‚è€ƒèµ„æº",
    "title": "rstanarm è´å¶æ–¯å›å½’å®æˆ˜",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nrstanarmå®˜æ–¹æ–‡æ¡£\nStanç”¨æˆ·æŒ‡å—\nGelman et al.Â (2020). Regression and Other Stories.",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ˆ è´å¶æ–¯ç»Ÿè®¡",
      "rstanarm è´å¶æ–¯å›å½’"
    ]
  },
  {
    "objectID": "sections/special.html",
    "href": "sections/special.html",
    "title": "ç‰¹æ®Šåº”ç”¨",
    "section": "",
    "text": "æœ¬éƒ¨åˆ†æ¶µç›–äº†åœ¨ç‰¹å®šé¢†åŸŸå’Œä¸“ä¸šåœºæ™¯ä¸­ä½¿ç”¨çš„ R è¯­è¨€åº”ç”¨æ–¹æ³•ã€‚"
  },
  {
    "objectID": "sections/special.html#ç‰¹æ®Šåº”ç”¨",
    "href": "sections/special.html#ç‰¹æ®Šåº”ç”¨",
    "title": "ç‰¹æ®Šåº”ç”¨",
    "section": "",
    "text": "æœ¬éƒ¨åˆ†æ¶µç›–äº†åœ¨ç‰¹å®šé¢†åŸŸå’Œä¸“ä¸šåœºæ™¯ä¸­ä½¿ç”¨çš„ R è¯­è¨€åº”ç”¨æ–¹æ³•ã€‚"
  },
  {
    "objectID": "sections/guide.html",
    "href": "sections/guide.html",
    "title": "å…¥é—¨æŒ‡å—",
    "section": "",
    "text": "ç¬¬ä¸€æ¬¡æ¥ï¼Ÿè¿™é‡Œæœ‰å®Œæ•´çš„å­¦ä¹ è·¯çº¿å’Œæ•™ç¨‹ç›®å½•ï¼Œå¸®ä½ å¿«é€Ÿæ‰¾åˆ°æƒ³å­¦çš„å†…å®¹ã€‚"
  },
  {
    "objectID": "sections/guide.html#å…¥é—¨æŒ‡å—",
    "href": "sections/guide.html#å…¥é—¨æŒ‡å—",
    "title": "å…¥é—¨æŒ‡å—",
    "section": "",
    "text": "ç¬¬ä¸€æ¬¡æ¥ï¼Ÿè¿™é‡Œæœ‰å®Œæ•´çš„å­¦ä¹ è·¯çº¿å’Œæ•™ç¨‹ç›®å½•ï¼Œå¸®ä½ å¿«é€Ÿæ‰¾åˆ°æƒ³å­¦çš„å†…å®¹ã€‚"
  },
  {
    "objectID": "sections/machine-learning.html",
    "href": "sections/machine-learning.html",
    "title": "æœºå™¨å­¦ä¹ ä¸AI",
    "section": "",
    "text": "æœ¬éƒ¨åˆ†æ¶µç›–ä»ä¼ ç»Ÿæœºå™¨å­¦ä¹ åˆ°æ·±åº¦å­¦ä¹ çš„å®Œæ•´æŠ€æœ¯æ ˆï¼Œå¸®åŠ©æ‚¨æ„å»ºç«¯åˆ°ç«¯çš„æœºå™¨å­¦ä¹ èƒ½åŠ›ã€‚"
  },
  {
    "objectID": "sections/machine-learning.html#æœºå™¨å­¦ä¹ ä¸ai",
    "href": "sections/machine-learning.html#æœºå™¨å­¦ä¹ ä¸ai",
    "title": "æœºå™¨å­¦ä¹ ä¸AI",
    "section": "",
    "text": "æœ¬éƒ¨åˆ†æ¶µç›–ä»ä¼ ç»Ÿæœºå™¨å­¦ä¹ åˆ°æ·±åº¦å­¦ä¹ çš„å®Œæ•´æŠ€æœ¯æ ˆï¼Œå¸®åŠ©æ‚¨æ„å»ºç«¯åˆ°ç«¯çš„æœºå™¨å­¦ä¹ èƒ½åŠ›ã€‚"
  },
  {
    "objectID": "sections/statistics.html",
    "href": "sections/statistics.html",
    "title": "ç»Ÿè®¡åˆ†ææ–¹æ³•",
    "section": "",
    "text": "è¿™é‡Œæ”¶é›†äº†ä½¿ç”¨ R è¯­è¨€å®ç°çš„å„ç±»åˆ†ææ–¹æ³•ï¼Œæ¶µç›–å›å½’åˆ†æã€ç”Ÿå­˜åˆ†æã€å› æœæ¨æ–­ã€é«˜çº§å»ºæ¨¡ç­‰é¢†åŸŸã€‚"
  },
  {
    "objectID": "sections/statistics.html#ç»Ÿè®¡å»ºæ¨¡æ–¹æ³•åº“",
    "href": "sections/statistics.html#ç»Ÿè®¡å»ºæ¨¡æ–¹æ³•åº“",
    "title": "ç»Ÿè®¡åˆ†ææ–¹æ³•",
    "section": "",
    "text": "è¿™é‡Œæ”¶é›†äº†ä½¿ç”¨ R è¯­è¨€å®ç°çš„å„ç±»åˆ†ææ–¹æ³•ï¼Œæ¶µç›–å›å½’åˆ†æã€ç”Ÿå­˜åˆ†æã€å› æœæ¨æ–­ã€é«˜çº§å»ºæ¨¡ç­‰é¢†åŸŸã€‚"
  },
  {
    "objectID": "1067-gt-tables.html",
    "href": "1067-gt-tables.html",
    "title": "gt å‘è¡¨çº§è¡¨æ ¼åˆ¶ä½œå®Œå…¨æŒ‡å—",
    "section": "",
    "text": "gtï¼ˆGrammar of Tablesï¼‰æ˜¯Positå®˜æ–¹å¼€å‘çš„ç°ä»£è¡¨æ ¼åˆ¶ä½œåŒ…ï¼Œé‡‡ç”¨â€è¡¨æ ¼è¯­æ³•â€çš„è®¾è®¡ç†å¿µï¼Œå¯åˆ›å»ºé«˜åº¦å®šåˆ¶åŒ–çš„å‘è¡¨çº§è¡¨æ ¼ã€‚\n\n\n\n\n\nç‰¹ç‚¹\ngt\ngtsummary\nkable\nflextable\n\n\n\n\nè®¾è®¡ç†å¿µ\nè¡¨æ ¼è¯­æ³•\nç»Ÿè®¡è¡¨æ ¼\nç®€å•å¿«é€Ÿ\nOfficeå…¼å®¹\n\n\nå®šåˆ¶ç¨‹åº¦\næé«˜\nä¸­ç­‰\nä½\né«˜\n\n\nå­¦ä¹ æ›²çº¿\nä¸­ç­‰\nä½\næœ€ä½\nä¸­ç­‰\n\n\nè¾“å‡ºæ ¼å¼\nHTML/PDF/Word\nåŒgt\nHTML/PDF\nWord/PPT\n\n\n\n\n\n\ngtå°†è¡¨æ ¼åˆ†ä¸ºå‡ ä¸ªé€»è¾‘éƒ¨åˆ†ï¼š - Table Headerï¼šæ ‡é¢˜å’Œå‰¯æ ‡é¢˜ - Stubï¼šè¡Œæ ‡ç­¾åŒºåŸŸ - Column Labelsï¼šåˆ—æ ‡ç­¾ - Table Bodyï¼šæ•°æ®ä¸»ä½“ - Table Footerï¼šè„šæ³¨å’Œæ¥æºè¯´æ˜",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gt - ç°ä»£è¡¨æ ¼ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "1067-gt-tables.html#gt-ç®€ä»‹",
    "href": "1067-gt-tables.html#gt-ç®€ä»‹",
    "title": "gt å‘è¡¨çº§è¡¨æ ¼åˆ¶ä½œå®Œå…¨æŒ‡å—",
    "section": "",
    "text": "gtï¼ˆGrammar of Tablesï¼‰æ˜¯Positå®˜æ–¹å¼€å‘çš„ç°ä»£è¡¨æ ¼åˆ¶ä½œåŒ…ï¼Œé‡‡ç”¨â€è¡¨æ ¼è¯­æ³•â€çš„è®¾è®¡ç†å¿µï¼Œå¯åˆ›å»ºé«˜åº¦å®šåˆ¶åŒ–çš„å‘è¡¨çº§è¡¨æ ¼ã€‚\n\n\n\n\n\nç‰¹ç‚¹\ngt\ngtsummary\nkable\nflextable\n\n\n\n\nè®¾è®¡ç†å¿µ\nè¡¨æ ¼è¯­æ³•\nç»Ÿè®¡è¡¨æ ¼\nç®€å•å¿«é€Ÿ\nOfficeå…¼å®¹\n\n\nå®šåˆ¶ç¨‹åº¦\næé«˜\nä¸­ç­‰\nä½\né«˜\n\n\nå­¦ä¹ æ›²çº¿\nä¸­ç­‰\nä½\næœ€ä½\nä¸­ç­‰\n\n\nè¾“å‡ºæ ¼å¼\nHTML/PDF/Word\nåŒgt\nHTML/PDF\nWord/PPT\n\n\n\n\n\n\ngtå°†è¡¨æ ¼åˆ†ä¸ºå‡ ä¸ªé€»è¾‘éƒ¨åˆ†ï¼š - Table Headerï¼šæ ‡é¢˜å’Œå‰¯æ ‡é¢˜ - Stubï¼šè¡Œæ ‡ç­¾åŒºåŸŸ - Column Labelsï¼šåˆ—æ ‡ç­¾ - Table Bodyï¼šæ•°æ®ä¸»ä½“ - Table Footerï¼šè„šæ³¨å’Œæ¥æºè¯´æ˜",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gt - ç°ä»£è¡¨æ ¼ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "1067-gt-tables.html#å®‰è£…ä¸åŠ è½½",
    "href": "1067-gt-tables.html#å®‰è£…ä¸åŠ è½½",
    "title": "gt å‘è¡¨çº§è¡¨æ ¼åˆ¶ä½œå®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\nlibrary(gt)\nlibrary(dplyr)\nlibrary(tidyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gt - ç°ä»£è¡¨æ ¼ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "1067-gt-tables.html#ç¬¬ä¸€éƒ¨åˆ†åŸºç¡€ç”¨æ³•",
    "href": "1067-gt-tables.html#ç¬¬ä¸€éƒ¨åˆ†åŸºç¡€ç”¨æ³•",
    "title": "gt å‘è¡¨çº§è¡¨æ ¼åˆ¶ä½œå®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€ç”¨æ³•",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€ç”¨æ³•\n\nåˆ›å»ºç¬¬ä¸€ä¸ªgtè¡¨æ ¼\n\n# ä½¿ç”¨å†…ç½®æ•°æ®\ndata(mtcars)\ndf &lt;- mtcars %&gt;%\n    slice(1:6) %&gt;%\n    select(mpg, cyl, hp, wt) %&gt;%\n    mutate(car = rownames(mtcars)[1:6], .before = 1)\n\n# æœ€ç®€å•çš„gtè¡¨æ ¼\ngt(df)\n\n\n\n\n\n\n\ncar\nmpg\ncyl\nhp\nwt\n\n\n\n\nMazda RX4\n21.0\n6\n110\n2.620\n\n\nMazda RX4 Wag\n21.0\n6\n110\n2.875\n\n\nDatsun 710\n22.8\n4\n93\n2.320\n\n\nHornet 4 Drive\n21.4\n6\n110\n3.215\n\n\nHornet Sportabout\n18.7\n8\n175\n3.440\n\n\nValiant\n18.1\n6\n105\n3.460\n\n\n\n\n\n\n\n\n\næ·»åŠ æ ‡é¢˜å’Œæ¥æº\n\ndf %&gt;%\n    gt() %&gt;%\n    tab_header(\n        title = \"æ±½è½¦æ€§èƒ½å‚æ•°è¡¨\",\n        subtitle = \"Motor Trend Car Road Tests æ•°æ®å­é›†\"\n    ) %&gt;%\n    tab_source_note(\n        source_note = \"æ•°æ®æ¥æºï¼š1974 Motor Trend æ‚å¿—\"\n    )\n\n\n\n\n\n\n\næ±½è½¦æ€§èƒ½å‚æ•°è¡¨\n\n\nMotor Trend Car Road Tests æ•°æ®å­é›†\n\n\ncar\nmpg\ncyl\nhp\nwt\n\n\n\n\nMazda RX4\n21.0\n6\n110\n2.620\n\n\nMazda RX4 Wag\n21.0\n6\n110\n2.875\n\n\nDatsun 710\n22.8\n4\n93\n2.320\n\n\nHornet 4 Drive\n21.4\n6\n110\n3.215\n\n\nHornet Sportabout\n18.7\n8\n175\n3.440\n\n\nValiant\n18.1\n6\n105\n3.460\n\n\n\næ•°æ®æ¥æºï¼š1974 Motor Trend æ‚å¿—\n\n\n\n\n\n\n\n\n\n\nä¿®æ”¹åˆ—æ ‡ç­¾\n\ndf %&gt;%\n    gt() %&gt;%\n    cols_label(\n        car = \"è½¦å‹\",\n        mpg = \"æ²¹è€— (MPG)\",\n        cyl = \"æ°”ç¼¸æ•°\",\n        hp = \"é©¬åŠ›\",\n        wt = \"é‡é‡ (å¨)\"\n    )\n\n\n\n\n\n\n\nè½¦å‹\næ²¹è€— (MPG)\næ°”ç¼¸æ•°\né©¬åŠ›\né‡é‡ (å¨)\n\n\n\n\nMazda RX4\n21.0\n6\n110\n2.620\n\n\nMazda RX4 Wag\n21.0\n6\n110\n2.875\n\n\nDatsun 710\n22.8\n4\n93\n2.320\n\n\nHornet 4 Drive\n21.4\n6\n110\n3.215\n\n\nHornet Sportabout\n18.7\n8\n175\n3.440\n\n\nValiant\n18.1\n6\n105\n3.460",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gt - ç°ä»£è¡¨æ ¼ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "1067-gt-tables.html#ç¬¬äºŒéƒ¨åˆ†æ ¼å¼åŒ–",
    "href": "1067-gt-tables.html#ç¬¬äºŒéƒ¨åˆ†æ ¼å¼åŒ–",
    "title": "gt å‘è¡¨çº§è¡¨æ ¼åˆ¶ä½œå®Œå…¨æŒ‡å—",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šæ ¼å¼åŒ–",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šæ ¼å¼åŒ–\n\næ•°å­—æ ¼å¼åŒ–\n\ndf %&gt;%\n    gt() %&gt;%\n    fmt_number(\n        columns = c(mpg, wt),\n        decimals = 1\n    ) %&gt;%\n    fmt_integer(\n        columns = c(cyl, hp)\n    )\n\n\n\n\n\n\n\ncar\nmpg\ncyl\nhp\nwt\n\n\n\n\nMazda RX4\n21.0\n6\n110\n2.6\n\n\nMazda RX4 Wag\n21.0\n6\n110\n2.9\n\n\nDatsun 710\n22.8\n4\n93\n2.3\n\n\nHornet 4 Drive\n21.4\n6\n110\n3.2\n\n\nHornet Sportabout\n18.7\n8\n175\n3.4\n\n\nValiant\n18.1\n6\n105\n3.5\n\n\n\n\n\n\n\n\n\nç™¾åˆ†æ¯”æ ¼å¼åŒ–\n\n# åˆ›å»ºå¸¦ç™¾åˆ†æ¯”çš„æ•°æ®\npct_df &lt;- data.frame(\n    category = c(\"A\", \"B\", \"C\"),\n    value = c(0.234, 0.456, 0.310)\n)\n\npct_df %&gt;%\n    gt() %&gt;%\n    fmt_percent(\n        columns = value,\n        decimals = 1\n    )\n\n\n\n\n\n\n\ncategory\nvalue\n\n\n\n\nA\n23.4%\n\n\nB\n45.6%\n\n\nC\n31.0%\n\n\n\n\n\n\n\n\n\nè´§å¸æ ¼å¼åŒ–\n\nprice_df &lt;- data.frame(\n    item = c(\"äº§å“A\", \"äº§å“B\", \"äº§å“C\"),\n    price_usd = c(99.99, 149.50, 299.00),\n    price_cny = c(699, 1049, 2099)\n)\n\nprice_df %&gt;%\n    gt() %&gt;%\n    fmt_currency(\n        columns = price_usd,\n        currency = \"USD\"\n    ) %&gt;%\n    fmt_currency(\n        columns = price_cny,\n        currency = \"CNY\"\n    )\n\n\n\n\n\n\n\nitem\nprice_usd\nprice_cny\n\n\n\n\näº§å“A\n$99.99\nÂ¥699.00\n\n\näº§å“B\n$149.50\nÂ¥1,049.00\n\n\näº§å“C\n$299.00\nÂ¥2,099.00",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gt - ç°ä»£è¡¨æ ¼ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "1067-gt-tables.html#ç¬¬ä¸‰éƒ¨åˆ†æ ·å¼è®¾ç½®",
    "href": "1067-gt-tables.html#ç¬¬ä¸‰éƒ¨åˆ†æ ·å¼è®¾ç½®",
    "title": "gt å‘è¡¨çº§è¡¨æ ¼åˆ¶ä½œå®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ ·å¼è®¾ç½®",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ ·å¼è®¾ç½®\n\nè¡¨å¤´æ ·å¼\n\ndf %&gt;%\n    gt() %&gt;%\n    tab_header(\n        title = md(\"**æ±½è½¦æ€§èƒ½å‚æ•°**\"),\n        subtitle = \"ç²¾é€‰è½¦å‹æ•°æ®\"\n    ) %&gt;%\n    tab_style(\n        style = cell_fill(color = \"#4f46e5\"),\n        locations = cells_title()\n    ) %&gt;%\n    tab_style(\n        style = cell_text(color = \"white\", weight = \"bold\"),\n        locations = cells_title()\n    )\n\n\n\n\n\n\n\næ±½è½¦æ€§èƒ½å‚æ•°\n\n\nç²¾é€‰è½¦å‹æ•°æ®\n\n\ncar\nmpg\ncyl\nhp\nwt\n\n\n\n\nMazda RX4\n21.0\n6\n110\n2.620\n\n\nMazda RX4 Wag\n21.0\n6\n110\n2.875\n\n\nDatsun 710\n22.8\n4\n93\n2.320\n\n\nHornet 4 Drive\n21.4\n6\n110\n3.215\n\n\nHornet Sportabout\n18.7\n8\n175\n3.440\n\n\nValiant\n18.1\n6\n105\n3.460\n\n\n\n\n\n\n\n\n\nåˆ—æ ‡ç­¾æ ·å¼\n\ndf %&gt;%\n    gt() %&gt;%\n    tab_style(\n        style = list(\n            cell_fill(color = \"#e0e7ff\"),\n            cell_text(weight = \"bold\")\n        ),\n        locations = cells_column_labels()\n    )\n\n\n\n\n\n\n\ncar\nmpg\ncyl\nhp\nwt\n\n\n\n\nMazda RX4\n21.0\n6\n110\n2.620\n\n\nMazda RX4 Wag\n21.0\n6\n110\n2.875\n\n\nDatsun 710\n22.8\n4\n93\n2.320\n\n\nHornet 4 Drive\n21.4\n6\n110\n3.215\n\n\nHornet Sportabout\n18.7\n8\n175\n3.440\n\n\nValiant\n18.1\n6\n105\n3.460\n\n\n\n\n\n\n\n\n\næ¡ä»¶æ ¼å¼åŒ–\n\ndf %&gt;%\n    gt() %&gt;%\n    tab_style(\n        style = cell_fill(color = \"#dcfce7\"),\n        locations = cells_body(\n            columns = mpg,\n            rows = mpg &gt; 20\n        )\n    ) %&gt;%\n    tab_style(\n        style = cell_fill(color = \"#fee2e2\"),\n        locations = cells_body(\n            columns = mpg,\n            rows = mpg &lt; 15\n        )\n    )\n\n\n\n\n\n\n\ncar\nmpg\ncyl\nhp\nwt\n\n\n\n\nMazda RX4\n21.0\n6\n110\n2.620\n\n\nMazda RX4 Wag\n21.0\n6\n110\n2.875\n\n\nDatsun 710\n22.8\n4\n93\n2.320\n\n\nHornet 4 Drive\n21.4\n6\n110\n3.215\n\n\nHornet Sportabout\n18.7\n8\n175\n3.440\n\n\nValiant\n18.1\n6\n105\n3.460",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gt - ç°ä»£è¡¨æ ¼ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "1067-gt-tables.html#ç¬¬å››éƒ¨åˆ†æ•°æ®ç€è‰²",
    "href": "1067-gt-tables.html#ç¬¬å››éƒ¨åˆ†æ•°æ®ç€è‰²",
    "title": "gt å‘è¡¨çº§è¡¨æ ¼åˆ¶ä½œå®Œå…¨æŒ‡å—",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šæ•°æ®ç€è‰²",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šæ•°æ®ç€è‰²\n\né¢œè‰²æ ‡åº¦\n\ndf %&gt;%\n    gt() %&gt;%\n    data_color(\n        columns = mpg,\n        palette = c(\"#ef4444\", \"#fbbf24\", \"#22c55e\"),\n        domain = c(10, 35)\n    )\n\n\n\n\n\n\n\ncar\nmpg\ncyl\nhp\nwt\n\n\n\n\nMazda RX4\n21.0\n6\n110\n2.620\n\n\nMazda RX4 Wag\n21.0\n6\n110\n2.875\n\n\nDatsun 710\n22.8\n4\n93\n2.320\n\n\nHornet 4 Drive\n21.4\n6\n110\n3.215\n\n\nHornet Sportabout\n18.7\n8\n175\n3.440\n\n\nValiant\n18.1\n6\n105\n3.460\n\n\n\n\n\n\n\n\n\nå¤šåˆ—ç€è‰²\n\ndf %&gt;%\n    gt() %&gt;%\n    data_color(\n        columns = c(mpg, hp),\n        palette = \"Blues\"\n    )\n\n\n\n\n\n\n\ncar\nmpg\ncyl\nhp\nwt\n\n\n\n\nMazda RX4\n21.0\n6\n110\n2.620\n\n\nMazda RX4 Wag\n21.0\n6\n110\n2.875\n\n\nDatsun 710\n22.8\n4\n93\n2.320\n\n\nHornet 4 Drive\n21.4\n6\n110\n3.215\n\n\nHornet Sportabout\n18.7\n8\n175\n3.440\n\n\nValiant\n18.1\n6\n105\n3.460",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gt - ç°ä»£è¡¨æ ¼ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "1067-gt-tables.html#ç¬¬äº”éƒ¨åˆ†åˆ†ç»„ä¸æ±‡æ€»",
    "href": "1067-gt-tables.html#ç¬¬äº”éƒ¨åˆ†åˆ†ç»„ä¸æ±‡æ€»",
    "title": "gt å‘è¡¨çº§è¡¨æ ¼åˆ¶ä½œå®Œå…¨æŒ‡å—",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šåˆ†ç»„ä¸æ±‡æ€»",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šåˆ†ç»„ä¸æ±‡æ€»\n\nè¡Œåˆ†ç»„\n\n# æŒ‰æ°”ç¼¸æ•°åˆ†ç»„\nmtcars %&gt;%\n    slice(1:12) %&gt;%\n    mutate(car = rownames(mtcars)[1:12]) %&gt;%\n    select(car, cyl, mpg, hp) %&gt;%\n    gt(groupname_col = \"cyl\") %&gt;%\n    tab_header(title = \"æŒ‰æ°”ç¼¸æ•°åˆ†ç»„çš„æ±½è½¦æ•°æ®\")\n\n\n\n\n\n\n\næŒ‰æ°”ç¼¸æ•°åˆ†ç»„çš„æ±½è½¦æ•°æ®\n\n\ncar\nmpg\nhp\n\n\n\n\n6\n\n\nMazda RX4\n21.0\n110\n\n\nMazda RX4 Wag\n21.0\n110\n\n\nHornet 4 Drive\n21.4\n110\n\n\nValiant\n18.1\n105\n\n\nMerc 280\n19.2\n123\n\n\nMerc 280C\n17.8\n123\n\n\n4\n\n\nDatsun 710\n22.8\n93\n\n\nMerc 240D\n24.4\n62\n\n\nMerc 230\n22.8\n95\n\n\n8\n\n\nHornet Sportabout\n18.7\n175\n\n\nDuster 360\n14.3\n245\n\n\nMerc 450SE\n16.4\n180\n\n\n\n\n\n\n\n\n\næ·»åŠ æ±‡æ€»è¡Œ\n\nmtcars %&gt;%\n    slice(1:8) %&gt;%\n    mutate(car = rownames(mtcars)[1:8]) %&gt;%\n    select(car, cyl, mpg, hp) %&gt;%\n    group_by(cyl) %&gt;%\n    gt() %&gt;%\n    summary_rows(\n        groups = TRUE,\n        columns = c(mpg, hp),\n        fns = list(\n            å¹³å‡å€¼ = ~ mean(., na.rm = TRUE),\n            æœ€å¤§å€¼ = ~ max(., na.rm = TRUE)\n        ),\n        fmt = ~ fmt_number(., decimals = 1)\n    )\n\n\n\n\n\n\n\ncar\nmpg\nhp\n\n\n\n\n6\n\n\nMazda RX4\n21.0\n110\n\n\nMazda RX4 Wag\n21.0\n110\n\n\nHornet 4 Drive\n21.4\n110\n\n\nValiant\n18.1\n105\n\n\n4\n\n\nDatsun 710\n22.8\n93\n\n\nMerc 240D\n24.4\n62\n\n\n8\n\n\nHornet Sportabout\n18.7\n175\n\n\nDuster 360\n14.3\n245\n\n\n\n\n\n\n\n\n\næ€»è®¡è¡Œ\n\nmtcars %&gt;%\n    slice(1:6) %&gt;%\n    mutate(car = rownames(mtcars)[1:6]) %&gt;%\n    select(car, mpg, hp, wt) %&gt;%\n    gt() %&gt;%\n    grand_summary_rows(\n        columns = c(mpg, hp),\n        fns = list(\n            æ€»è®¡ = ~ sum(.),\n            å¹³å‡ = ~ mean(.)\n        ),\n        fmt = ~ fmt_number(., decimals = 1)\n    )\n\n\n\n\n\n\n\n\ncar\nmpg\nhp\nwt\n\n\n\n\n\nMazda RX4\n21.0\n110\n2.620\n\n\n\nMazda RX4 Wag\n21.0\n110\n2.875\n\n\n\nDatsun 710\n22.8\n93\n2.320\n\n\n\nHornet 4 Drive\n21.4\n110\n3.215\n\n\n\nHornet Sportabout\n18.7\n175\n3.440\n\n\n\nValiant\n18.1\n105\n3.460\n\n\næ€»è®¡\nâ€”\n123.0\n703.0\nâ€”\n\n\nå¹³å‡\nâ€”\n20.5\n117.2\nâ€”",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gt - ç°ä»£è¡¨æ ¼ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "1067-gt-tables.html#ç¬¬å…­éƒ¨åˆ†è„šæ³¨ä¸æ³¨é‡Š",
    "href": "1067-gt-tables.html#ç¬¬å…­éƒ¨åˆ†è„šæ³¨ä¸æ³¨é‡Š",
    "title": "gt å‘è¡¨çº§è¡¨æ ¼åˆ¶ä½œå®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šè„šæ³¨ä¸æ³¨é‡Š",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šè„šæ³¨ä¸æ³¨é‡Š\n\næ·»åŠ è„šæ³¨\n\ndf %&gt;%\n    gt() %&gt;%\n    tab_footnote(\n        footnote = \"MPG = Miles Per Gallon\",\n        locations = cells_column_labels(columns = mpg)\n    ) %&gt;%\n    tab_footnote(\n        footnote = \"é«˜æ€§èƒ½è½¦å‹\",\n        locations = cells_body(\n            columns = car,\n            rows = hp &gt; 200\n        )\n    )\n\n\n\n\n\n\n\ncar\nmpg1\ncyl\nhp\nwt\n\n\n\n\nMazda RX4\n21.0\n6\n110\n2.620\n\n\nMazda RX4 Wag\n21.0\n6\n110\n2.875\n\n\nDatsun 710\n22.8\n4\n93\n2.320\n\n\nHornet 4 Drive\n21.4\n6\n110\n3.215\n\n\nHornet Sportabout\n18.7\n8\n175\n3.440\n\n\nValiant\n18.1\n6\n105\n3.460\n\n\n\n1 MPG = Miles Per Gallon\n\n\n\n\n\n\n\n\n\n\nå¤šä¸ªè„šæ³¨\n\ndf %&gt;%\n    gt() %&gt;%\n    tab_footnote(\n        footnote = md(\"**æ²¹è€—æ•ˆç‡**æŒ‡æ ‡\"),\n        locations = cells_column_labels(columns = mpg)\n    ) %&gt;%\n    tab_footnote(\n        footnote = \"åˆ¶åŠ¨é©¬åŠ›\",\n        locations = cells_column_labels(columns = hp)\n    ) %&gt;%\n    tab_source_note(\"æ³¨ï¼šæ•°æ®æ¥è‡ª1974å¹´ç¾å›½æ±½è½¦æµ‹è¯•\")\n\n\n\n\n\n\n\ncar\nmpg1\ncyl\nhp2\nwt\n\n\n\n\nMazda RX4\n21.0\n6\n110\n2.620\n\n\nMazda RX4 Wag\n21.0\n6\n110\n2.875\n\n\nDatsun 710\n22.8\n4\n93\n2.320\n\n\nHornet 4 Drive\n21.4\n6\n110\n3.215\n\n\nHornet Sportabout\n18.7\n8\n175\n3.440\n\n\nValiant\n18.1\n6\n105\n3.460\n\n\n\n1 æ²¹è€—æ•ˆç‡æŒ‡æ ‡\n\n\n2 åˆ¶åŠ¨é©¬åŠ›\n\n\næ³¨ï¼šæ•°æ®æ¥è‡ª1974å¹´ç¾å›½æ±½è½¦æµ‹è¯•",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gt - ç°ä»£è¡¨æ ¼ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "1067-gt-tables.html#ç¬¬ä¸ƒéƒ¨åˆ†åˆå¹¶ä¸è·¨åº¦",
    "href": "1067-gt-tables.html#ç¬¬ä¸ƒéƒ¨åˆ†åˆå¹¶ä¸è·¨åº¦",
    "title": "gt å‘è¡¨çº§è¡¨æ ¼åˆ¶ä½œå®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šåˆå¹¶ä¸è·¨åº¦",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šåˆå¹¶ä¸è·¨åº¦\n\nåˆ—åˆå¹¶\n\ndf %&gt;%\n    gt() %&gt;%\n    cols_merge(\n        columns = c(cyl, hp),\n        pattern = \"{1} ç¼¸ / {2} é©¬åŠ›\"\n    ) %&gt;%\n    cols_label(cyl = \"å‘åŠ¨æœºé…ç½®\")\n\n\n\n\n\n\n\ncar\nmpg\nå‘åŠ¨æœºé…ç½®\nwt\n\n\n\n\nMazda RX4\n21.0\n6 ç¼¸ / 110 é©¬åŠ›\n2.620\n\n\nMazda RX4 Wag\n21.0\n6 ç¼¸ / 110 é©¬åŠ›\n2.875\n\n\nDatsun 710\n22.8\n4 ç¼¸ / 93 é©¬åŠ›\n2.320\n\n\nHornet 4 Drive\n21.4\n6 ç¼¸ / 110 é©¬åŠ›\n3.215\n\n\nHornet Sportabout\n18.7\n8 ç¼¸ / 175 é©¬åŠ›\n3.440\n\n\nValiant\n18.1\n6 ç¼¸ / 105 é©¬åŠ›\n3.460\n\n\n\n\n\n\n\n\n\nåˆ—åˆ†ç»„ï¼ˆSpannerï¼‰\n\ndf %&gt;%\n    gt() %&gt;%\n    tab_spanner(\n        label = \"æ€§èƒ½æŒ‡æ ‡\",\n        columns = c(mpg, hp)\n    ) %&gt;%\n    tab_spanner(\n        label = \"è§„æ ¼å‚æ•°\",\n        columns = c(cyl, wt)\n    )\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ncar\n\næ€§èƒ½æŒ‡æ ‡\n\n\nè§„æ ¼å‚æ•°\n\n\n\nmpg\nhp\ncyl\nwt\n\n\n\n\nMazda RX4\n21.0\n110\n6\n2.620\n\n\nMazda RX4 Wag\n21.0\n110\n6\n2.875\n\n\nDatsun 710\n22.8\n93\n4\n2.320\n\n\nHornet 4 Drive\n21.4\n110\n6\n3.215\n\n\nHornet Sportabout\n18.7\n175\n8\n3.440\n\n\nValiant\n18.1\n105\n6\n3.460",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gt - ç°ä»£è¡¨æ ¼ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "1067-gt-tables.html#ç¬¬å…«éƒ¨åˆ†å¯¼å‡ºè¡¨æ ¼",
    "href": "1067-gt-tables.html#ç¬¬å…«éƒ¨åˆ†å¯¼å‡ºè¡¨æ ¼",
    "title": "gt å‘è¡¨çº§è¡¨æ ¼åˆ¶ä½œå®Œå…¨æŒ‡å—",
    "section": "ç¬¬å…«éƒ¨åˆ†ï¼šå¯¼å‡ºè¡¨æ ¼",
    "text": "ç¬¬å…«éƒ¨åˆ†ï¼šå¯¼å‡ºè¡¨æ ¼\n\nä¿å­˜ä¸ºHTML\n\nmy_table &lt;- df %&gt;%\n    gt() %&gt;%\n    tab_header(title = \"ç¤ºä¾‹è¡¨æ ¼\")\n\n# ä¿å­˜ä¸ºHTML\ngtsave(my_table, \"table.html\")\n\n\n\nä¿å­˜ä¸ºå›¾ç‰‡\n\n# ä¿å­˜ä¸ºPNG\ngtsave(my_table, \"table.png\")\n\n# ä¿å­˜ä¸ºPDF\ngtsave(my_table, \"table.pdf\")\n\n\n\nä¿å­˜ä¸ºWord/RTF\n\n# ä¿å­˜ä¸ºRTFï¼ˆå¯ç”¨Wordæ‰“å¼€ï¼‰\ngtsave(my_table, \"table.rtf\")\n\n# ä¿å­˜ä¸ºdocxéœ€è¦é¢å¤–åŒ…\n# library(webshot2)\n# gtsave(my_table, \"table.docx\")",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gt - ç°ä»£è¡¨æ ¼ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "1067-gt-tables.html#ç¬¬ä¹éƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "href": "1067-gt-tables.html#ç¬¬ä¹éƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "title": "gt å‘è¡¨çº§è¡¨æ ¼åˆ¶ä½œå®Œå…¨æŒ‡å—",
    "section": "ç¬¬ä¹éƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬ä¹éƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹\n\næ¡ˆä¾‹ï¼šè®ºæ–‡åŸºçº¿è¡¨\n\n# æ¨¡æ‹Ÿä¸´åºŠæ•°æ®\nset.seed(42)\nclinical_data &lt;- data.frame(\n    group = rep(c(\"æ²»ç–—ç»„\", \"å¯¹ç…§ç»„\"), each = 3),\n    variable = rep(c(\"å¹´é¾„ (å²)\", \"BMI (kg/mÂ²)\", \"æ”¶ç¼©å‹ (mmHg)\"), 2),\n    mean = c(52.3, 24.8, 135.2, 51.8, 25.1, 138.6),\n    sd = c(8.5, 3.2, 15.3, 9.1, 3.5, 14.8),\n    p_value = c(0.72, 0.58, 0.12, NA, NA, NA)\n)\n\n# è½¬æ¢ä¸ºå®½æ ¼å¼\nbaseline_table &lt;- clinical_data %&gt;%\n    mutate(value = paste0(round(mean, 1), \" Â± \", round(sd, 1))) %&gt;%\n    select(variable, group, value, p_value) %&gt;%\n    pivot_wider(names_from = group, values_from = value) %&gt;%\n    mutate(p_value = ifelse(row_number() == 1,\n        c(0.72, 0.58, 0.12)[row_number()], NA\n    ))\n\n# åˆ›å»ºå‘è¡¨çº§è¡¨æ ¼\nbaseline_table %&gt;%\n    gt() %&gt;%\n    tab_header(\n        title = \"è¡¨1. åŸºçº¿ç‰¹å¾æ¯”è¾ƒ\",\n        subtitle = \"æ•°æ®ä»¥ Mean Â± SD è¡¨ç¤º\"\n    ) %&gt;%\n    cols_label(\n        variable = \"å˜é‡\",\n        æ²»ç–—ç»„ = \"æ²»ç–—ç»„ (n=50)\",\n        å¯¹ç…§ç»„ = \"å¯¹ç…§ç»„ (n=50)\",\n        p_value = \"På€¼\"\n    ) %&gt;%\n    fmt_number(\n        columns = p_value,\n        decimals = 2\n    ) %&gt;%\n    sub_missing(\n        columns = everything(),\n        missing_text = \"\"\n    ) %&gt;%\n    tab_style(\n        style = cell_fill(color = \"#f3f4f6\"),\n        locations = cells_column_labels()\n    ) %&gt;%\n    tab_footnote(\n        footnote = \"è¿ç»­å˜é‡ä½¿ç”¨tæ£€éªŒ\",\n        locations = cells_column_labels(columns = p_value)\n    )\n\n\n\n\n\n\n\n\n\n\n\n\n\nè¡¨1. åŸºçº¿ç‰¹å¾æ¯”è¾ƒ\n\n\næ•°æ®ä»¥ Mean Â± SD è¡¨ç¤º\n\n\nå˜é‡\nPå€¼1\næ²»ç–—ç»„ (n=50)\nå¯¹ç…§ç»„ (n=50)\n\n\n\n\nå¹´é¾„ (å²)\n0.72\n52.3 Â± 8.5\n\n\n\n\nBMI (kg/mÂ²)\n\n\n24.8 Â± 3.2\n\n\n\n\næ”¶ç¼©å‹ (mmHg)\n\n\n135.2 Â± 15.3\n\n\n\n\nå¹´é¾„ (å²)\n\n\n\n\n51.8 Â± 9.1\n\n\nBMI (kg/mÂ²)\n\n\n\n\n25.1 Â± 3.5\n\n\næ”¶ç¼©å‹ (mmHg)\n\n\n\n\n138.6 Â± 14.8\n\n\n\n1 è¿ç»­å˜é‡ä½¿ç”¨tæ£€éªŒ\n\n\n\n\n\n\n\n\n\n\næ¡ˆä¾‹ï¼šå›å½’ç»“æœè¡¨\n\n# æ¨¡æ‹Ÿå›å½’ç»“æœ\nreg_results &lt;- data.frame(\n    variable = c(\"å¹´é¾„\", \"æ€§åˆ« (å¥³)\", \"BMI\", \"å¸çƒŸå²\", \"é«˜è¡€å‹\"),\n    or = c(1.02, 0.85, 1.15, 2.34, 1.89),\n    ci_lower = c(0.98, 0.62, 1.05, 1.45, 1.23),\n    ci_upper = c(1.06, 1.16, 1.26, 3.78, 2.91),\n    p_value = c(0.324, 0.298, 0.003, 0.001, 0.004)\n)\n\nreg_results %&gt;%\n    mutate(\n        or_ci = paste0(\n            sprintf(\"%.2f\", or), \" (\",\n            sprintf(\"%.2f\", ci_lower), \"-\",\n            sprintf(\"%.2f\", ci_upper), \")\"\n        )\n    ) %&gt;%\n    select(variable, or_ci, p_value) %&gt;%\n    gt() %&gt;%\n    tab_header(\n        title = \"è¡¨2. Logisticå›å½’åˆ†æç»“æœ\"\n    ) %&gt;%\n    cols_label(\n        variable = \"å˜é‡\",\n        or_ci = \"OR (95% CI)\",\n        p_value = \"På€¼\"\n    ) %&gt;%\n    fmt_number(\n        columns = p_value,\n        decimals = 3\n    ) %&gt;%\n    tab_style(\n        style = cell_text(weight = \"bold\"),\n        locations = cells_body(\n            columns = p_value,\n            rows = p_value &lt; 0.05\n        )\n    ) %&gt;%\n    tab_footnote(\n        footnote = \"ç²—ä½“è¡¨ç¤ºP &lt; 0.05\",\n        locations = cells_column_labels(columns = p_value)\n    )\n\n\n\n\n\n\n\nè¡¨2. Logisticå›å½’åˆ†æç»“æœ\n\n\nå˜é‡\nOR (95% CI)\nPå€¼1\n\n\n\n\nå¹´é¾„\n1.02 (0.98-1.06)\n0.324\n\n\næ€§åˆ« (å¥³)\n0.85 (0.62-1.16)\n0.298\n\n\nBMI\n1.15 (1.05-1.26)\n0.003\n\n\nå¸çƒŸå²\n2.34 (1.45-3.78)\n0.001\n\n\né«˜è¡€å‹\n1.89 (1.23-2.91)\n0.004\n\n\n\n1 ç²—ä½“è¡¨ç¤ºP &lt; 0.05",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gt - ç°ä»£è¡¨æ ¼ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "1067-gt-tables.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "1067-gt-tables.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "gt å‘è¡¨çº§è¡¨æ ¼åˆ¶ä½œå®Œå…¨æŒ‡å—",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# ===== åˆ›å»ºè¡¨æ ¼ =====\ngt(data)\ngt(data, groupname_col = \"group\")\n\n# ===== æ ‡é¢˜ä¸æ³¨é‡Š =====\ntab_header(title, subtitle)\ntab_source_note(source_note)\ntab_footnote(footnote, locations)\n\n# ===== åˆ—æ“ä½œ =====\ncols_label(col1 = \"æ–°åç§°\")\ncols_move(columns, after)\ncols_hide(columns)\ncols_merge(columns, pattern)\ntab_spanner(label, columns)\n\n# ===== æ ¼å¼åŒ– =====\nfmt_number(columns, decimals)\nfmt_percent(columns, decimals)\nfmt_currency(columns, currency)\nfmt_integer(columns)\n\n# ===== æ ·å¼ =====\ntab_style(style, locations)\ncell_fill(color)\ncell_text(weight, color, size)\ndata_color(columns, palette)\n\n# ===== æ±‡æ€» =====\nsummary_rows(groups, columns, fns)\ngrand_summary_rows(columns, fns)\n\n# ===== å¯¼å‡º =====\ngtsave(table, filename)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gt - ç°ä»£è¡¨æ ¼ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "1067-gt-tables.html#å°ç»“",
    "href": "1067-gt-tables.html#å°ç»“",
    "title": "gt å‘è¡¨çº§è¡¨æ ¼åˆ¶ä½œå®Œå…¨æŒ‡å—",
    "section": "å°ç»“",
    "text": "å°ç»“\ngt æ˜¯åˆ¶ä½œå‘è¡¨çº§è¡¨æ ¼çš„æœ€ä½³é€‰æ‹©ï¼š\n\n\n\nåœºæ™¯\næ¨èæ–¹æ¡ˆ\n\n\n\n\nå¿«é€Ÿç»Ÿè®¡è¡¨\ngtsummary â†’ gt\n\n\né«˜åº¦å®šåˆ¶è¡¨æ ¼\nç›´æ¥ä½¿ç”¨gt\n\n\nWordæ–‡æ¡£\ngt + RTFå¯¼å‡º\n\n\nç½‘é¡µå±•ç¤º\ngt HTML\n\n\n\n\næŠ€å·§ï¼šgté‡‡ç”¨ç®¡é“å¼è¯­æ³•ï¼Œå¯ä»¥åƒggplot2ä¸€æ ·å±‚å±‚å åŠ æ ·å¼ï¼Œå»ºè®®ä»ç®€å•å¼€å§‹ï¼Œé€æ­¥æ·»åŠ æ ¼å¼åŒ–ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gt - ç°ä»£è¡¨æ ¼ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "1067-gt-tables.html#å‚è€ƒèµ„æº",
    "href": "1067-gt-tables.html#å‚è€ƒèµ„æº",
    "title": "gt å‘è¡¨çº§è¡¨æ ¼åˆ¶ä½œå®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\ngt å®˜æ–¹æ–‡æ¡£\ngt Cookbook\ngt æ¡ˆä¾‹åº“",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ“Š è¡¨æ ¼åˆ¶ä½œ",
      "gt - ç°ä»£è¡¨æ ¼ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "2057-bindparallel.html",
    "href": "2057-bindparallel.html",
    "title": "Rè¯­è¨€å¹³è¡Œåæ ‡å›¾ç»˜åˆ¶",
    "section": "",
    "text": "å¹³è¡Œåæ ‡å›¾ï¼ˆParallel Coordinates Plotï¼‰ç”¨å¹³è¡Œçš„å‚ç›´è½´è¡¨ç¤ºå¤šä¸ªå˜é‡ï¼Œæ¯æ¡æŠ˜çº¿è¿æ¥åŒä¸€è§‚æµ‹åœ¨å„å˜é‡ä¸Šçš„å€¼ï¼Œé€‚åˆé«˜ç»´æ•°æ®å¯è§†åŒ–ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "å¹³è¡Œåæ ‡å›¾"
    ]
  },
  {
    "objectID": "2057-bindparallel.html#ä»€ä¹ˆæ˜¯å¹³è¡Œåæ ‡å›¾",
    "href": "2057-bindparallel.html#ä»€ä¹ˆæ˜¯å¹³è¡Œåæ ‡å›¾",
    "title": "Rè¯­è¨€å¹³è¡Œåæ ‡å›¾ç»˜åˆ¶",
    "section": "",
    "text": "å¹³è¡Œåæ ‡å›¾ï¼ˆParallel Coordinates Plotï¼‰ç”¨å¹³è¡Œçš„å‚ç›´è½´è¡¨ç¤ºå¤šä¸ªå˜é‡ï¼Œæ¯æ¡æŠ˜çº¿è¿æ¥åŒä¸€è§‚æµ‹åœ¨å„å˜é‡ä¸Šçš„å€¼ï¼Œé€‚åˆé«˜ç»´æ•°æ®å¯è§†åŒ–ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "å¹³è¡Œåæ ‡å›¾"
    ]
  },
  {
    "objectID": "2057-bindparallel.html#råŒ…åŠ è½½",
    "href": "2057-bindparallel.html#råŒ…åŠ è½½",
    "title": "Rè¯­è¨€å¹³è¡Œåæ ‡å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(GGally)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "å¹³è¡Œåæ ‡å›¾"
    ]
  },
  {
    "objectID": "2057-bindparallel.html#åŸºç¡€å¹³è¡Œåæ ‡å›¾",
    "href": "2057-bindparallel.html#åŸºç¡€å¹³è¡Œåæ ‡å›¾",
    "title": "Rè¯­è¨€å¹³è¡Œåæ ‡å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€å¹³è¡Œåæ ‡å›¾",
    "text": "åŸºç¡€å¹³è¡Œåæ ‡å›¾\n\n# ä½¿ç”¨irisæ•°æ®\nggparcoord(iris, columns = 1:4, groupColumn = 5, scale = \"std\") +\n    scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    labs(\n        title = \"é¸¢å°¾èŠ±å¤šç»´ç‰¹å¾å¯¹æ¯”\",\n        x = \"å˜é‡\",\n        y = \"æ ‡å‡†åŒ–å€¼\",\n        color = \"ç‰©ç§\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"top\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "å¹³è¡Œåæ ‡å›¾"
    ]
  },
  {
    "objectID": "2057-bindparallel.html#å¸¦é€æ˜åº¦å’Œæ ·æ¡æ›²çº¿",
    "href": "2057-bindparallel.html#å¸¦é€æ˜åº¦å’Œæ ·æ¡æ›²çº¿",
    "title": "Rè¯­è¨€å¹³è¡Œåæ ‡å›¾ç»˜åˆ¶",
    "section": "å¸¦é€æ˜åº¦å’Œæ ·æ¡æ›²çº¿",
    "text": "å¸¦é€æ˜åº¦å’Œæ ·æ¡æ›²çº¿\n\nggparcoord(iris,\n    columns = 1:4, groupColumn = 5,\n    scale = \"uniminmax\", alphaLines = 0.5, splineFactor = 10\n) +\n    scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f59e0b\")) +\n    labs(title = \"æ ·æ¡æ›²çº¿å¹³è¡Œåæ ‡å›¾\", x = NULL, y = NULL, color = NULL) +\n    theme_minimal() +\n    theme(plot.title = element_text(face = \"bold\"), legend.position = \"top\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "å¹³è¡Œåæ ‡å›¾"
    ]
  },
  {
    "objectID": "2057-bindparallel.html#é«˜äº®ç‰¹å®šç±»åˆ«",
    "href": "2057-bindparallel.html#é«˜äº®ç‰¹å®šç±»åˆ«",
    "title": "Rè¯­è¨€å¹³è¡Œåæ ‡å›¾ç»˜åˆ¶",
    "section": "é«˜äº®ç‰¹å®šç±»åˆ«",
    "text": "é«˜äº®ç‰¹å®šç±»åˆ«\n\niris_highlight &lt;- iris %&gt;%\n    mutate(highlight = ifelse(Species == \"setosa\", \"Setosa\", \"å…¶ä»–\"))\n\nggparcoord(iris_highlight,\n    columns = 1:4, groupColumn = \"highlight\",\n    scale = \"std\", alphaLines = 0.6\n) +\n    scale_color_manual(values = c(\"Setosa\" = \"#4f46e5\", \"å…¶ä»–\" = \"#94a3b8\")) +\n    labs(title = \"é«˜äº®Setosaç‰©ç§\") +\n    theme_minimal() +\n    theme(plot.title = element_text(face = \"bold\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "å¹³è¡Œåæ ‡å›¾"
    ]
  },
  {
    "objectID": "2057-bindparallel.html#æ€»ç»“",
    "href": "2057-bindparallel.html#æ€»ç»“",
    "title": "Rè¯­è¨€å¹³è¡Œåæ ‡å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå‚æ•°\nè¯´æ˜\n\n\n\n\nscale = \"std\"\næ ‡å‡†åŒ–\n\n\nscale = \"uniminmax\"\n0-1ç¼©æ”¾\n\n\nsplineFactor\næ›²çº¿å¹³æ»‘åº¦\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\né›·è¾¾å›¾\nçŸ©é˜µå›¾ä¸æˆå¯¹å›¾",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "å¹³è¡Œåæ ‡å›¾"
    ]
  },
  {
    "objectID": "2055-bindgantt.html",
    "href": "2055-bindgantt.html",
    "title": "Rè¯­è¨€ç”˜ç‰¹å›¾ç»˜åˆ¶",
    "section": "",
    "text": "ç”˜ç‰¹å›¾ï¼ˆGantt Chartï¼‰ç”¨æ¨ªå‘æ¡å½¢å±•ç¤ºé¡¹ç›®ä»»åŠ¡çš„æ—¶é—´å®‰æ’ï¼Œæ˜¯é¡¹ç›®ç®¡ç†çš„ç»å…¸å¯è§†åŒ–å·¥å…·ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "ç”˜ç‰¹å›¾"
    ]
  },
  {
    "objectID": "2055-bindgantt.html#ä»€ä¹ˆæ˜¯ç”˜ç‰¹å›¾",
    "href": "2055-bindgantt.html#ä»€ä¹ˆæ˜¯ç”˜ç‰¹å›¾",
    "title": "Rè¯­è¨€ç”˜ç‰¹å›¾ç»˜åˆ¶",
    "section": "",
    "text": "ç”˜ç‰¹å›¾ï¼ˆGantt Chartï¼‰ç”¨æ¨ªå‘æ¡å½¢å±•ç¤ºé¡¹ç›®ä»»åŠ¡çš„æ—¶é—´å®‰æ’ï¼Œæ˜¯é¡¹ç›®ç®¡ç†çš„ç»å…¸å¯è§†åŒ–å·¥å…·ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "ç”˜ç‰¹å›¾"
    ]
  },
  {
    "objectID": "2055-bindgantt.html#råŒ…åŠ è½½",
    "href": "2055-bindgantt.html#råŒ…åŠ è½½",
    "title": "Rè¯­è¨€ç”˜ç‰¹å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(lubridate)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "ç”˜ç‰¹å›¾"
    ]
  },
  {
    "objectID": "2055-bindgantt.html#å‡†å¤‡é¡¹ç›®æ•°æ®",
    "href": "2055-bindgantt.html#å‡†å¤‡é¡¹ç›®æ•°æ®",
    "title": "Rè¯­è¨€ç”˜ç‰¹å›¾ç»˜åˆ¶",
    "section": "å‡†å¤‡é¡¹ç›®æ•°æ®",
    "text": "å‡†å¤‡é¡¹ç›®æ•°æ®\n\n# é¡¹ç›®ä»»åŠ¡æ•°æ®\ntasks &lt;- data.frame(\n    task = c(\"éœ€æ±‚åˆ†æ\", \"ç³»ç»Ÿè®¾è®¡\", \"ç¼–ç å¼€å‘\", \"æµ‹è¯•\", \"éƒ¨ç½²ä¸Šçº¿\"),\n    start = as.Date(c(\"2024-01-01\", \"2024-01-15\", \"2024-02-01\", \"2024-03-01\", \"2024-03-20\")),\n    end = as.Date(c(\"2024-01-14\", \"2024-01-31\", \"2024-02-28\", \"2024-03-19\", \"2024-03-31\")),\n    status = c(\"å·²å®Œæˆ\", \"å·²å®Œæˆ\", \"è¿›è¡Œä¸­\", \"å¾…å¼€å§‹\", \"å¾…å¼€å§‹\")\n)\n\n# æŒ‰å¼€å§‹æ—¶é—´æ’åº\ntasks &lt;- tasks %&gt;%\n    mutate(task = factor(task, levels = rev(task)))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "ç”˜ç‰¹å›¾"
    ]
  },
  {
    "objectID": "2055-bindgantt.html#åŸºç¡€ç”˜ç‰¹å›¾",
    "href": "2055-bindgantt.html#åŸºç¡€ç”˜ç‰¹å›¾",
    "title": "Rè¯­è¨€ç”˜ç‰¹å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€ç”˜ç‰¹å›¾",
    "text": "åŸºç¡€ç”˜ç‰¹å›¾\n\nggplot(tasks, aes(y = task)) +\n    geom_segment(aes(x = start, xend = end, yend = task, color = status),\n        linewidth = 10, lineend = \"round\"\n    ) +\n    scale_color_manual(values = c(\"å·²å®Œæˆ\" = \"#10b981\", \"è¿›è¡Œä¸­\" = \"#4f46e5\", \"å¾…å¼€å§‹\" = \"#94a3b8\")) +\n    scale_x_date(date_labels = \"%mæœˆ%dæ—¥\", date_breaks = \"2 weeks\") +\n    labs(\n        title = \"é¡¹ç›®è¿›åº¦ç”˜ç‰¹å›¾\",\n        x = \"æ—¥æœŸ\",\n        y = NULL,\n        color = \"çŠ¶æ€\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"top\",\n        panel.grid.major.y = element_blank()\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "ç”˜ç‰¹å›¾"
    ]
  },
  {
    "objectID": "2055-bindgantt.html#æ·»åŠ ä»Šæ—¥æ ‡è®°",
    "href": "2055-bindgantt.html#æ·»åŠ ä»Šæ—¥æ ‡è®°",
    "title": "Rè¯­è¨€ç”˜ç‰¹å›¾ç»˜åˆ¶",
    "section": "æ·»åŠ ä»Šæ—¥æ ‡è®°",
    "text": "æ·»åŠ ä»Šæ—¥æ ‡è®°\n\ntoday &lt;- as.Date(\"2024-02-15\")\n\nggplot(tasks, aes(y = task)) +\n    geom_segment(aes(x = start, xend = end, yend = task, color = status),\n        linewidth = 10, lineend = \"round\"\n    ) +\n    geom_vline(xintercept = today, linetype = \"dashed\", color = \"#ef4444\", linewidth = 1) +\n    annotate(\"text\", x = today, y = 5.3, label = \"ä»Šå¤©\", color = \"#ef4444\", fontface = \"bold\") +\n    scale_color_manual(values = c(\"å·²å®Œæˆ\" = \"#10b981\", \"è¿›è¡Œä¸­\" = \"#4f46e5\", \"å¾…å¼€å§‹\" = \"#94a3b8\")) +\n    scale_x_date(date_labels = \"%m/%d\") +\n    labs(title = \"å¸¦ä»Šæ—¥æ ‡è®°çš„ç”˜ç‰¹å›¾\", x = NULL, y = NULL, color = NULL) +\n    theme_minimal() +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        legend.position = \"top\",\n        panel.grid.major.y = element_blank()\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "ç”˜ç‰¹å›¾"
    ]
  },
  {
    "objectID": "2055-bindgantt.html#æ€»ç»“",
    "href": "2055-bindgantt.html#æ€»ç»“",
    "title": "Rè¯­è¨€ç”˜ç‰¹å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå…ƒç´ \nè¯´æ˜\n\n\n\n\næ¨ªæ¡\nä»»åŠ¡æ—¶é—´è·¨åº¦\n\n\né¢œè‰²\nä»»åŠ¡çŠ¶æ€\n\n\nä»Šæ—¥çº¿\nå½“å‰è¿›åº¦å‚è€ƒ\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\næŸ±çŠ¶å›¾ä¸é¥¼å›¾",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "ç”˜ç‰¹å›¾"
    ]
  },
  {
    "objectID": "2053-bindwordcloud.html",
    "href": "2053-bindwordcloud.html",
    "title": "Rè¯­è¨€è¯äº‘å›¾ç»˜åˆ¶",
    "section": "",
    "text": "è¯äº‘å›¾ï¼ˆWord Cloudï¼‰ç”¨è¯è¯­çš„å¤§å°å’Œé¢œè‰²è¡¨ç¤ºè¯é¢‘æˆ–é‡è¦æ€§ï¼Œæ˜¯æ–‡æœ¬æ•°æ®å¯è§†åŒ–çš„ç»å…¸æ–¹å¼ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è¯äº‘å›¾"
    ]
  },
  {
    "objectID": "2053-bindwordcloud.html#ä»€ä¹ˆæ˜¯è¯äº‘å›¾",
    "href": "2053-bindwordcloud.html#ä»€ä¹ˆæ˜¯è¯äº‘å›¾",
    "title": "Rè¯­è¨€è¯äº‘å›¾ç»˜åˆ¶",
    "section": "",
    "text": "è¯äº‘å›¾ï¼ˆWord Cloudï¼‰ç”¨è¯è¯­çš„å¤§å°å’Œé¢œè‰²è¡¨ç¤ºè¯é¢‘æˆ–é‡è¦æ€§ï¼Œæ˜¯æ–‡æœ¬æ•°æ®å¯è§†åŒ–çš„ç»å…¸æ–¹å¼ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è¯äº‘å›¾"
    ]
  },
  {
    "objectID": "2053-bindwordcloud.html#råŒ…åŠ è½½",
    "href": "2053-bindwordcloud.html#råŒ…åŠ è½½",
    "title": "Rè¯­è¨€è¯äº‘å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\n\nlibrary(wordcloud)\nlibrary(RColorBrewer)\nlibrary(dplyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è¯äº‘å›¾"
    ]
  },
  {
    "objectID": "2053-bindwordcloud.html#å‡†å¤‡æ•°æ®",
    "href": "2053-bindwordcloud.html#å‡†å¤‡æ•°æ®",
    "title": "Rè¯­è¨€è¯äº‘å›¾ç»˜åˆ¶",
    "section": "å‡†å¤‡æ•°æ®",
    "text": "å‡†å¤‡æ•°æ®\n\n# åˆ›å»ºç¤ºä¾‹è¯é¢‘æ•°æ®\nwords_data &lt;- data.frame(\n    word = c(\n        \"æ•°æ®åˆ†æ\", \"å¯è§†åŒ–\", \"æœºå™¨å­¦ä¹ \", \"Rè¯­è¨€\", \"ç»Ÿè®¡\", \"å›å½’\",\n        \"åˆ†ç±»\", \"èšç±»\", \"é¢„æµ‹\", \"æ¨¡å‹\", \"ç®—æ³•\", \"æ·±åº¦å­¦ä¹ \",\n        \"Python\", \"æ•°æ®æŒ–æ˜\", \"å¤§æ•°æ®\", \"äººå·¥æ™ºèƒ½\", \"ç¥ç»ç½‘ç»œ\",\n        \"ç‰¹å¾å·¥ç¨‹\", \"äº¤å‰éªŒè¯\", \"éšæœºæ£®æ—\"\n    ),\n    freq = c(\n        100, 85, 70, 95, 60, 50, 45, 40, 55, 75, 35, 30,\n        80, 65, 55, 45, 25, 35, 30, 40\n    )\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è¯äº‘å›¾"
    ]
  },
  {
    "objectID": "2053-bindwordcloud.html#åŸºç¡€è¯äº‘",
    "href": "2053-bindwordcloud.html#åŸºç¡€è¯äº‘",
    "title": "Rè¯­è¨€è¯äº‘å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€è¯äº‘",
    "text": "åŸºç¡€è¯äº‘\n\nset.seed(42)\nwordcloud(\n    words = words_data$word,\n    freq = words_data$freq,\n    min.freq = 20,\n    max.words = 100,\n    random.order = FALSE,\n    colors = brewer.pal(8, \"Dark2\")\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è¯äº‘å›¾"
    ]
  },
  {
    "objectID": "2053-bindwordcloud.html#è‡ªå®šä¹‰é¢œè‰²",
    "href": "2053-bindwordcloud.html#è‡ªå®šä¹‰é¢œè‰²",
    "title": "Rè¯­è¨€è¯äº‘å›¾ç»˜åˆ¶",
    "section": "è‡ªå®šä¹‰é¢œè‰²",
    "text": "è‡ªå®šä¹‰é¢œè‰²\n\ncustom_colors &lt;- colorRampPalette(c(\"#4f46e5\", \"#10b981\", \"#f59e0b\"))(10)\n\nset.seed(42)\nwordcloud(\n    words = words_data$word,\n    freq = words_data$freq,\n    min.freq = 20,\n    scale = c(3, 0.5),\n    random.order = FALSE,\n    colors = custom_colors\n)\ntitle(\"æ•°æ®ç§‘å­¦å…³é”®è¯\", col.main = \"#1f2937\", font.main = 2)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è¯äº‘å›¾"
    ]
  },
  {
    "objectID": "2053-bindwordcloud.html#ä½¿ç”¨wordcloud2äº¤äº’å¼",
    "href": "2053-bindwordcloud.html#ä½¿ç”¨wordcloud2äº¤äº’å¼",
    "title": "Rè¯­è¨€è¯äº‘å›¾ç»˜åˆ¶",
    "section": "ä½¿ç”¨wordcloud2ï¼ˆäº¤äº’å¼ï¼‰",
    "text": "ä½¿ç”¨wordcloud2ï¼ˆäº¤äº’å¼ï¼‰\n\n# install.packages(\"wordcloud2\")\nlibrary(wordcloud2)\n\nwordcloud2(words_data,\n    size = 0.8,\n    color = \"random-light\",\n    backgroundColor = \"#1e1b4b\"\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è¯äº‘å›¾"
    ]
  },
  {
    "objectID": "2053-bindwordcloud.html#æ€»ç»“",
    "href": "2053-bindwordcloud.html#æ€»ç»“",
    "title": "Rè¯­è¨€è¯äº‘å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nåŒ…\nç‰¹ç‚¹\n\n\n\n\nwordcloud\né™æ€ï¼Œç®€å•å¿«é€Ÿ\n\n\nwordcloud2\näº¤äº’å¼ï¼Œæ”¯æŒå½¢çŠ¶\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\næŸ±çŠ¶å›¾ä¸é¥¼å›¾",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è¯äº‘å›¾"
    ]
  },
  {
    "objectID": "2049-bindcorrplot.html#ä½¿ç”¨-ggplot2-ç»˜åˆ¶",
    "href": "2049-bindcorrplot.html#ä½¿ç”¨-ggplot2-ç»˜åˆ¶",
    "title": "Rè¯­è¨€ç›¸å…³å›¾çŸ©é˜µç»˜åˆ¶",
    "section": "ä½¿ç”¨ ggplot2 ç»˜åˆ¶",
    "text": "ä½¿ç”¨ ggplot2 ç»˜åˆ¶\n\nlibrary(tidyr)\n\n# è½¬æ¢ä¸ºé•¿æ ¼å¼\ncor_long &lt;- as.data.frame(cor_matrix) %&gt;%\n    mutate(var1 = rownames(.)) %&gt;%\n    pivot_longer(-var1, names_to = \"var2\", values_to = \"correlation\")\n\nggplot(cor_long, aes(x = var1, y = var2, fill = correlation)) +\n    geom_tile(color = \"white\") +\n    geom_text(aes(label = round(correlation, 2)), color = \"black\", size = 3) +\n    scale_fill_gradient2(\n        low = \"#ef4444\", mid = \"white\", high = \"#4f46e5\",\n        midpoint = 0, limit = c(-1, 1)\n    ) +\n    labs(title = \"ç›¸å…³ç³»æ•°çƒ­å›¾\", x = NULL, y = NULL, fill = \"ç›¸å…³ç³»æ•°\") +\n    theme_minimal() +\n    theme(\n        plot.title = element_text(face = \"bold\", hjust = 0.5),\n        axis.text.x = element_text(angle = 45, hjust = 1)\n    ) +\n    coord_fixed()",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ”„ å…³ç³»å›¾",
      "ç›¸å…³å›¾çŸ©é˜µ"
    ]
  },
  {
    "objectID": "1066-causalimpact.html",
    "href": "1066-causalimpact.html",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "",
    "text": "CausalImpact æ˜¯Googleå¼€å‘çš„RåŒ…ï¼Œä½¿ç”¨è´å¶æ–¯ç»“æ„æ—¶é—´åºåˆ—æ¨¡å‹æ¥ä¼°è®¡å¹²é¢„å¯¹æ—¶é—´åºåˆ—çš„å› æœæ•ˆåº”ã€‚å®ƒè§£å†³äº†ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼šå¦‚æœæ²¡æœ‰å¹²é¢„ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\n\n\n\n\n\né¢†åŸŸ\nåº”ç”¨ç¤ºä¾‹\n\n\n\n\nå…¬å…±å«ç”Ÿ\næ”¿ç­–å®æ–½å¯¹ç–¾ç—…å‘ç—…ç‡çš„å½±å“\n\n\nè¥é”€\nå¹¿å‘Šæ´»åŠ¨å¯¹é”€å”®çš„å½±å“\n\n\nç»æµå­¦\næ”¿ç­–å¹²é¢„å¯¹ç»æµæŒ‡æ ‡çš„å½±å“\n\n\näº§å“\nåŠŸèƒ½ä¸Šçº¿å¯¹ç”¨æˆ·è¡Œä¸ºçš„å½±å“\n\n\n\n\n\n\nCausalImpacté€šè¿‡ä»¥ä¸‹æ­¥éª¤å·¥ä½œï¼š 1. ä½¿ç”¨æœªå—å¹²é¢„çš„å¯¹ç…§åºåˆ—é¢„æµ‹å¹²é¢„åçš„åäº‹å® 2. æ¯”è¾ƒå®é™…è§‚æµ‹å€¼ä¸åäº‹å®é¢„æµ‹ 3. é‡åŒ–å·®å¼‚å¹¶æä¾›ä¸ç¡®å®šæ€§ä¼°è®¡",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "CausalImpact æ—¶é—´åºåˆ—å› æœ"
    ]
  },
  {
    "objectID": "1066-causalimpact.html#causalimpact-ç®€ä»‹",
    "href": "1066-causalimpact.html#causalimpact-ç®€ä»‹",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "",
    "text": "CausalImpact æ˜¯Googleå¼€å‘çš„RåŒ…ï¼Œä½¿ç”¨è´å¶æ–¯ç»“æ„æ—¶é—´åºåˆ—æ¨¡å‹æ¥ä¼°è®¡å¹²é¢„å¯¹æ—¶é—´åºåˆ—çš„å› æœæ•ˆåº”ã€‚å®ƒè§£å†³äº†ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼šå¦‚æœæ²¡æœ‰å¹²é¢„ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\n\n\n\n\n\né¢†åŸŸ\nåº”ç”¨ç¤ºä¾‹\n\n\n\n\nå…¬å…±å«ç”Ÿ\næ”¿ç­–å®æ–½å¯¹ç–¾ç—…å‘ç—…ç‡çš„å½±å“\n\n\nè¥é”€\nå¹¿å‘Šæ´»åŠ¨å¯¹é”€å”®çš„å½±å“\n\n\nç»æµå­¦\næ”¿ç­–å¹²é¢„å¯¹ç»æµæŒ‡æ ‡çš„å½±å“\n\n\näº§å“\nåŠŸèƒ½ä¸Šçº¿å¯¹ç”¨æˆ·è¡Œä¸ºçš„å½±å“\n\n\n\n\n\n\nCausalImpacté€šè¿‡ä»¥ä¸‹æ­¥éª¤å·¥ä½œï¼š 1. ä½¿ç”¨æœªå—å¹²é¢„çš„å¯¹ç…§åºåˆ—é¢„æµ‹å¹²é¢„åçš„åäº‹å® 2. æ¯”è¾ƒå®é™…è§‚æµ‹å€¼ä¸åäº‹å®é¢„æµ‹ 3. é‡åŒ–å·®å¼‚å¹¶æä¾›ä¸ç¡®å®šæ€§ä¼°è®¡",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "CausalImpact æ—¶é—´åºåˆ—å› æœ"
    ]
  },
  {
    "objectID": "1066-causalimpact.html#å®‰è£…ä¸åŠ è½½",
    "href": "1066-causalimpact.html#å®‰è£…ä¸åŠ è½½",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\nlibrary(CausalImpact)\nlibrary(ggplot2)\nlibrary(dplyr)\n\ntheme_set(theme_bw(base_size = 12))",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "CausalImpact æ—¶é—´åºåˆ—å› æœ"
    ]
  },
  {
    "objectID": "1066-causalimpact.html#ç¬¬ä¸€éƒ¨åˆ†åŸºç¡€ç”¨æ³•",
    "href": "1066-causalimpact.html#ç¬¬ä¸€éƒ¨åˆ†åŸºç¡€ç”¨æ³•",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€ç”¨æ³•",
    "text": "ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€ç”¨æ³•\n\næ¨¡æ‹Ÿæ•°æ®åˆ›å»º\n\n# åˆ›å»ºæ¨¡æ‹Ÿæ—¶é—´åºåˆ—æ•°æ®\nset.seed(42)\nn &lt;- 100 # æ—¶é—´ç‚¹æ•°\nintervention_point &lt;- 70 # å¹²é¢„å‘ç”Ÿç‚¹\n\n# ç”Ÿæˆå¯¹ç…§åºåˆ—ï¼ˆæœªå—å¹²é¢„å½±å“ï¼‰\nx1 &lt;- 10 + arima.sim(model = list(ar = 0.8), n = n)\nx2 &lt;- 20 + arima.sim(model = list(ar = 0.7), n = n)\n\n# ç”Ÿæˆç›®æ ‡åºåˆ—\n# å¹²é¢„å‰ï¼šä¸å¯¹ç…§åºåˆ—ç›¸å…³\n# å¹²é¢„åï¼šå¢åŠ æ•ˆåº”\ny &lt;- 1.5 * x1 + 0.5 * x2 + rnorm(n, 0, 2)\n# æ·»åŠ å¹²é¢„æ•ˆåº”\ny[(intervention_point + 1):n] &lt;- y[(intervention_point + 1):n] + 5\n\n# åˆ›å»ºæ—¶é—´ç´¢å¼•\ntime_points &lt;- seq.Date(as.Date(\"2024-01-01\"), by = \"day\", length.out = n)\n\n# ç»„åˆæ•°æ®\ndata &lt;- zoo::zoo(cbind(y = y, x1 = x1, x2 = x2), time_points)\nhead(data)\n\n                  y        x1       x2\n2024-01-01 25.64894  9.130046 19.84025\n2024-01-02 22.67013  8.664042 19.45500\n2024-01-03 25.64492  9.386684 20.31537\n2024-01-04 22.96070 10.214184 19.16439\n2024-01-05 24.30455 11.206451 19.37437\n2024-01-06 24.63771 10.356234 18.01052\n\n\n\n\nè¿è¡ŒCausalImpact\n\n# å®šä¹‰å¹²é¢„å‰åæ—¶æœŸ\npre_period &lt;- c(time_points[1], time_points[intervention_point])\npost_period &lt;- c(time_points[intervention_point + 1], time_points[n])\n\n# è¿è¡Œåˆ†æ\nimpact &lt;- CausalImpact(data, pre_period, post_period)\n\n# æŸ¥çœ‹ç»“æœ\nsummary(impact)\n\nPosterior inference {CausalImpact}\n\n                         Average      Cumulative    \nActual                   29           860           \nPrediction (s.d.)        24 (0.42)    718 (12.61)   \n95% CI                   [23, 25]     [692, 742]    \n                                                    \nAbsolute effect (s.d.)   4.7 (0.42)   142.4 (12.61) \n95% CI                   [3.9, 5.6]   [118.0, 168.4]\n                                                    \nRelative effect (s.d.)   20% (2.1%)   20% (2.1%)    \n95% CI                   [16%, 24%]   [16%, 24%]    \n\nPosterior tail-area probability p:   0.00101\nPosterior probability of an effect:  99.8995%\n\nFor more details, type: summary(impact, \"report\")\n\n\n\n\nç»“æœå¯è§†åŒ–\n\n# é»˜è®¤ä¸‰å›¾é¢æ¿\nplot(impact)\n\n\n\n\n\n\n\n\n\n\nè§£è¯»è¾“å‡º\n\n# è·å–æŠ¥å‘Š\nsummary(impact, \"report\")\n\nAnalysis report {CausalImpact}\n\n\nDuring the post-intervention period, the response variable had an average value of approx. 28.68. By contrast, in the absence of an intervention, we would have expected an average response of 23.93. The 95% interval of this counterfactual prediction is [23.06, 24.74]. Subtracting this prediction from the observed response yields an estimate of the causal effect the intervention had on the response variable. This effect is 4.75 with a 95% interval of [3.93, 5.61]. For a discussion of the significance of this effect, see below.\n\nSumming up the individual data points during the post-intervention period (which can only sometimes be meaningfully interpreted), the response variable had an overall value of 860.36. By contrast, had the intervention not taken place, we would have expected a sum of 717.93. The 95% interval of this prediction is [691.93, 742.31].\n\nThe above results are given in terms of absolute numbers. In relative terms, the response variable showed an increase of +20%. The 95% interval of this percentage is [+16%, +24%].\n\nThis means that the positive effect observed during the intervention period is statistically significant and unlikely to be due to random fluctuations. It should be noted, however, that the question of whether this increase also bears substantive significance can only be answered by comparing the absolute effect (4.75) to the original goal of the underlying intervention.\n\nThe probability of obtaining this effect by chance is very small (Bayesian one-sided tail-area probability p = 0.001). This means the effect is statistically significant. It can be considered causal if the model assumptions are satisfied. For more details, including the model assumptions behind the method, see https://google.github.io/CausalImpact/.",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "CausalImpact æ—¶é—´åºåˆ—å› æœ"
    ]
  },
  {
    "objectID": "1066-causalimpact.html#ç¬¬äºŒéƒ¨åˆ†ç†è§£è¾“å‡ºå›¾å½¢",
    "href": "1066-causalimpact.html#ç¬¬äºŒéƒ¨åˆ†ç†è§£è¾“å‡ºå›¾å½¢",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬äºŒéƒ¨åˆ†ï¼šç†è§£è¾“å‡ºå›¾å½¢",
    "text": "ç¬¬äºŒéƒ¨åˆ†ï¼šç†è§£è¾“å‡ºå›¾å½¢\n\nä¸‰ä¸ªé¢æ¿è§£è¯»\n\n# å•ç‹¬ç»˜åˆ¶æ¯ä¸ªé¢æ¿\nplot(impact, \"original\") # åŸå§‹æ•°æ® vs åäº‹å®é¢„æµ‹\n\n\n\n\n\n\n\n\nOriginal é¢æ¿ï¼š - é»‘çº¿ï¼šå®é™…è§‚æµ‹å€¼ - è“è‰²è™šçº¿ï¼šåäº‹å®é¢„æµ‹ï¼ˆå¦‚æœæ²¡æœ‰å¹²é¢„ä¼šå‘ç”Ÿä»€ä¹ˆï¼‰ - æµ…è“åŒºåŸŸï¼šé¢„æµ‹çš„95%ç½®ä¿¡åŒºé—´\n\nplot(impact, \"pointwise\") # é€ç‚¹æ•ˆåº”\n\n\n\n\n\n\n\n\nPointwise é¢æ¿ï¼š - æ˜¾ç¤ºæ¯ä¸ªæ—¶é—´ç‚¹çš„å› æœæ•ˆåº”ï¼ˆå®é™… - é¢„æµ‹ï¼‰ - æ•ˆåº”åœ¨é›¶çº¿ä»¥ä¸Šè¡¨ç¤ºæ­£å‘å½±å“\n\nplot(impact, \"cumulative\") # ç´¯ç§¯æ•ˆåº”\n\n\n\n\n\n\n\n\nCumulative é¢æ¿ï¼š - æ˜¾ç¤ºå¹²é¢„åçš„ç´¯ç§¯å› æœæ•ˆåº” - ç”¨äºè¯„ä¼°æ€»ä½“å½±å“",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "CausalImpact æ—¶é—´åºåˆ—å› æœ"
    ]
  },
  {
    "objectID": "1066-causalimpact.html#ç¬¬ä¸‰éƒ¨åˆ†å…³é”®ç»“æœè§£è¯»",
    "href": "1066-causalimpact.html#ç¬¬ä¸‰éƒ¨åˆ†å…³é”®ç»“æœè§£è¯»",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šå…³é”®ç»“æœè§£è¯»",
    "text": "ç¬¬ä¸‰éƒ¨åˆ†ï¼šå…³é”®ç»“æœè§£è¯»\n\næå–æ•°å€¼ç»“æœ\n\n# è·å–æ‘˜è¦ç»Ÿè®¡\nimpact_summary &lt;- impact$summary\n\ncat(\"=== å¹²é¢„æ•ˆåº”æ‘˜è¦ ===\\n\\n\")\n\n=== å¹²é¢„æ•ˆåº”æ‘˜è¦ ===\n\ncat(\"å¹³å‡å› æœæ•ˆåº”:\\n\")\n\nå¹³å‡å› æœæ•ˆåº”:\n\ncat(\"  ç»å¯¹æ•ˆåº”:\", round(impact_summary$AbsEffect[1], 2), \"\\n\")\n\n  ç»å¯¹æ•ˆåº”: 4.75 \n\ncat(\"  ç›¸å¯¹æ•ˆåº”:\", round(impact_summary$RelEffect[1] * 100, 1), \"%\\n\")\n\n  ç›¸å¯¹æ•ˆåº”: 20 %\n\ncat(\n    \"  95% CI: [\", round(impact_summary$AbsEffect.lower[1], 2),\n    \",\", round(impact_summary$AbsEffect.upper[1], 2), \"]\\n\\n\"\n)\n\n  95% CI: [ 3.93 , 5.61 ]\n\ncat(\"ç´¯ç§¯å› æœæ•ˆåº”:\\n\")\n\nç´¯ç§¯å› æœæ•ˆåº”:\n\ncat(\"  ç»å¯¹æ•ˆåº”:\", round(impact_summary$AbsEffect[2], 2), \"\\n\")\n\n  ç»å¯¹æ•ˆåº”: 142.43 \n\ncat(\"  ç›¸å¯¹æ•ˆåº”:\", round(impact_summary$RelEffect[2] * 100, 1), \"%\\n\")\n\n  ç›¸å¯¹æ•ˆåº”: 20 %\n\n\n\n\nç»Ÿè®¡æ˜¾è‘—æ€§\n\n# è´å¶æ–¯åéªŒæ¦‚ç‡\ncat(\"\\nå¹²é¢„æ•ˆåº”çš„åéªŒæ¦‚ç‡:\\n\")\n\n\nå¹²é¢„æ•ˆåº”çš„åéªŒæ¦‚ç‡:\n\ncat(\"  P(æ•ˆåº” &gt; 0):\", round(impact$summary$p[1], 4), \"\\n\")\n\n  P(æ•ˆåº” &gt; 0): 0.001 \n\nif (impact$summary$p[1] &lt; 0.05) {\n    cat(\"  ç»“è®º: å¹²é¢„æ•ˆåº”åœ¨5%æ°´å¹³ä¸Šæ˜¾è‘—\\n\")\n} else {\n    cat(\"  ç»“è®º: æ— æ³•æ’é™¤æ— æ•ˆåº”çš„å¯èƒ½æ€§\\n\")\n}\n\n  ç»“è®º: å¹²é¢„æ•ˆåº”åœ¨5%æ°´å¹³ä¸Šæ˜¾è‘—",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "CausalImpact æ—¶é—´åºåˆ—å› æœ"
    ]
  },
  {
    "objectID": "1066-causalimpact.html#ç¬¬å››éƒ¨åˆ†æ¨¡å‹é…ç½®",
    "href": "1066-causalimpact.html#ç¬¬å››éƒ¨åˆ†æ¨¡å‹é…ç½®",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬å››éƒ¨åˆ†ï¼šæ¨¡å‹é…ç½®",
    "text": "ç¬¬å››éƒ¨åˆ†ï¼šæ¨¡å‹é…ç½®\n\nè‡ªå®šä¹‰æ¨¡å‹å‚æ•°\n\n# è‡ªå®šä¹‰æ¨¡å‹å‚æ•°\nmodel_args &lt;- list(\n    niter = 5000, # MCMCè¿­ä»£æ¬¡æ•°\n    nseasons = 7, # å­£èŠ‚æ€§å‘¨æœŸï¼ˆå¦‚å‘¨æ•ˆåº”ï¼‰\n    season.duration = 1 # æ¯ä¸ªå­£èŠ‚çš„æŒç»­æ—¶é—´\n)\n\nimpact_custom &lt;- CausalImpact(data, pre_period, post_period,\n    model.args = model_args\n)\nsummary(impact_custom)\n\nPosterior inference {CausalImpact}\n\n                         Average      Cumulative    \nActual                   29           860           \nPrediction (s.d.)        24 (0.41)    719 (12.40)   \n95% CI                   [23, 25]     [695, 743]    \n                                                    \nAbsolute effect (s.d.)   4.7 (0.41)   141.6 (12.40) \n95% CI                   [3.9, 5.5]   [117.0, 165.7]\n                                                    \nRelative effect (s.d.)   20% (2.1%)   20% (2.1%)    \n95% CI                   [16%, 24%]   [16%, 24%]    \n\nPosterior tail-area probability p:   2e-04\nPosterior probability of an effect:  99.97998%\n\nFor more details, type: summary(impact, \"report\")\n\n\n\n\nä¸ä½¿ç”¨å¯¹ç…§åºåˆ—\n\n# åªä½¿ç”¨ç›®æ ‡åºåˆ—æœ¬èº«çš„å†å²æ¨¡å¼\ndata_single &lt;- zoo::zoo(y, time_points)\n\nimpact_single &lt;- CausalImpact(data_single, pre_period, post_period)\nplot(impact_single)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "CausalImpact æ—¶é—´åºåˆ—å› æœ"
    ]
  },
  {
    "objectID": "1066-causalimpact.html#ç¬¬äº”éƒ¨åˆ†è¯Šæ–­ä¸éªŒè¯",
    "href": "1066-causalimpact.html#ç¬¬äº”éƒ¨åˆ†è¯Šæ–­ä¸éªŒè¯",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬äº”éƒ¨åˆ†ï¼šè¯Šæ–­ä¸éªŒè¯",
    "text": "ç¬¬äº”éƒ¨åˆ†ï¼šè¯Šæ–­ä¸éªŒè¯\n\næ¨¡å‹è¯Šæ–­\n\n# æ£€æŸ¥æ¨¡å‹æ‹Ÿåˆ\n# æå–é¢„æµ‹å€¼\nfitted_values &lt;- impact$series$point.pred\n\n# å¹²é¢„å‰æ‹Ÿåˆæƒ…å†µ\npre_actual &lt;- as.numeric(data[1:intervention_point, \"y\"])\npre_fitted &lt;- as.numeric(fitted_values[1:intervention_point])\n\n# è®¡ç®—æ‹Ÿåˆä¼˜åº¦\nrsq &lt;- cor(pre_actual, pre_fitted)^2\nrmse &lt;- sqrt(mean((pre_actual - pre_fitted)^2))\n\ncat(\"å¹²é¢„å‰æ¨¡å‹è¯Šæ–­:\\n\")\n\nå¹²é¢„å‰æ¨¡å‹è¯Šæ–­:\n\ncat(\"  RÂ²:\", round(rsq, 4), \"\\n\")\n\n  RÂ²: 0.6 \n\ncat(\"  RMSE:\", round(rmse, 4), \"\\n\")\n\n  RMSE: 1.8959 \n\n\n\n\næ®‹å·®æ£€éªŒ\n\n# å¹²é¢„å‰æ®‹å·®\nresiduals_pre &lt;- pre_actual - pre_fitted\n\n# æ®‹å·®å›¾\npar(mfrow = c(1, 2))\nplot(residuals_pre, type = \"l\", main = \"æ®‹å·®åºåˆ—\", ylab = \"æ®‹å·®\")\nabline(h = 0, col = \"red\", lty = 2)\nacf(residuals_pre, main = \"æ®‹å·®ACF\")\n\n\n\n\n\n\n\npar(mfrow = c(1, 1))\n\n\n\nå®‰æ…°å‰‚æ£€éªŒ\n\n# åœ¨å¹²é¢„å‰æ—¶æœŸåš\"å‡\"å¹²é¢„æ£€éªŒ\nplacebo_point &lt;- 50\nplacebo_pre &lt;- c(time_points[1], time_points[placebo_point])\nplacebo_post &lt;- c(time_points[placebo_point + 1], time_points[intervention_point])\n\n# ä½¿ç”¨å¹²é¢„å‰æ•°æ®\ndata_placebo &lt;- data[1:intervention_point, ]\n\nimpact_placebo &lt;- CausalImpact(data_placebo, placebo_pre, placebo_post)\n\ncat(\"\\nå®‰æ…°å‰‚æ£€éªŒç»“æœ:\\n\")\n\n\nå®‰æ…°å‰‚æ£€éªŒç»“æœ:\n\ncat(\"  ä¼°è®¡æ•ˆåº”:\", round(impact_placebo$summary$AbsEffect[1], 2), \"\\n\")\n\n  ä¼°è®¡æ•ˆåº”: -0.26 \n\ncat(\"  På€¼:\", round(impact_placebo$summary$p[1], 4), \"\\n\")\n\n  På€¼: 0.3417 \n\nif (impact_placebo$summary$p[1] &gt; 0.05) {\n    cat(\"  ç»“è®º: å®‰æ…°å‰‚æ£€éªŒé€šè¿‡ï¼ˆæ— è™šå‡æ•ˆåº”ï¼‰\\n\")\n}\n\n  ç»“è®º: å®‰æ…°å‰‚æ£€éªŒé€šè¿‡ï¼ˆæ— è™šå‡æ•ˆåº”ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "CausalImpact æ—¶é—´åºåˆ—å› æœ"
    ]
  },
  {
    "objectID": "1066-causalimpact.html#ç¬¬å…­éƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "href": "1066-causalimpact.html#ç¬¬å…­éƒ¨åˆ†å®æˆ˜æ¡ˆä¾‹",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬å…­éƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹",
    "text": "ç¬¬å…­éƒ¨åˆ†ï¼šå®æˆ˜æ¡ˆä¾‹\n\næ¡ˆä¾‹ï¼šæ”¿ç­–æ•ˆæœè¯„ä¼°\n\n# æ¨¡æ‹Ÿå…¬å…±å«ç”Ÿæ”¿ç­–æ•ˆæœ\nset.seed(123)\nn_days &lt;- 180\npolicy_start &lt;- 90\n\n# å¯¹ç…§åœ°åŒºï¼ˆæœªå®æ–½æ”¿ç­–ï¼‰\ncontrol_region &lt;- 100 + cumsum(rnorm(n_days, 0.1, 2))\n\n# ç›®æ ‡åœ°åŒº\n# æ”¿ç­–å‰ï¼šä¸å¯¹ç…§åœ°åŒºç›¸å…³\n# æ”¿ç­–åï¼šå‘ç—…ç‡ä¸‹é™\ntarget_region &lt;- 0.9 * control_region + rnorm(n_days, 0, 3)\n# æ”¿ç­–æ•ˆåº”ï¼šå‘ç—…ç‡é™ä½15%\ntarget_region[(policy_start + 1):n_days] &lt;-\n    target_region[(policy_start + 1):n_days] * 0.85\n\n# åˆ›å»ºæ•°æ®\ndates &lt;- seq.Date(as.Date(\"2025-01-01\"), by = \"day\", length.out = n_days)\npolicy_data &lt;- zoo::zoo(\n    cbind(target = target_region, control = control_region),\n    dates\n)\n\n# åˆ†æ\npre &lt;- c(dates[1], dates[policy_start])\npost &lt;- c(dates[policy_start + 1], dates[n_days])\n\nimpact_policy &lt;- CausalImpact(policy_data, pre, post)\n\ncat(\"=== æ”¿ç­–æ•ˆæœåˆ†æ ===\\n\")\n\n=== æ”¿ç­–æ•ˆæœåˆ†æ ===\n\nsummary(impact_policy)\n\nPosterior inference {CausalImpact}\n\n                         Average        Cumulative    \nActual                   90             8091          \nPrediction (s.d.)        105 (0.78)     9471 (70.58)  \n95% CI                   [104, 107]     [9342, 9611]  \n                                                      \nAbsolute effect (s.d.)   -15 (0.78)     -1380 (70.58) \n95% CI                   [-17, -14]     [-1520, -1251]\n                                                      \nRelative effect (s.d.)   -15% (0.64%)   -15% (0.64%)  \n95% CI                   [-16%, -13%]   [-16%, -13%]  \n\nPosterior tail-area probability p:   0.0026\nPosterior probability of an effect:  99.73958%\n\nFor more details, type: summary(impact, \"report\")\n\n\n\n# å¯è§†åŒ–\nplot(impact_policy) +\n    ggtitle(\"å…¬å…±å«ç”Ÿæ”¿ç­–å¯¹å‘ç—…ç‡çš„å½±å“\")\n\n\n\n\n\n\n\n\n\n# è¯¦ç»†æŠ¥å‘Š\nsummary(impact_policy, \"report\")\n\nAnalysis report {CausalImpact}\n\n\nDuring the post-intervention period, the response variable had an average value of approx. 89.90. By contrast, in the absence of an intervention, we would have expected an average response of 105.24. The 95% interval of this counterfactual prediction is [103.80, 106.79]. Subtracting this prediction from the observed response yields an estimate of the causal effect the intervention had on the response variable. This effect is -15.34 with a 95% interval of [-16.89, -13.90]. For a discussion of the significance of this effect, see below.\n\nSumming up the individual data points during the post-intervention period (which can only sometimes be meaningfully interpreted), the response variable had an overall value of 8.09K. By contrast, had the intervention not taken place, we would have expected a sum of 9.47K. The 95% interval of this prediction is [9.34K, 9.61K].\n\nThe above results are given in terms of absolute numbers. In relative terms, the response variable showed a decrease of -15%. The 95% interval of this percentage is [-16%, -13%].\n\nThis means that the negative effect observed during the intervention period is statistically significant. If the experimenter had expected a positive effect, it is recommended to double-check whether anomalies in the control variables may have caused an overly optimistic expectation of what should have happened in the response variable in the absence of the intervention.\n\nThe probability of obtaining this effect by chance is very small (Bayesian one-sided tail-area probability p = 0.003). This means the effect is statistically significant. It can be considered causal if the model assumptions are satisfied. For more details, including the model assumptions behind the method, see https://google.github.io/CausalImpact/.",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "CausalImpact æ—¶é—´åºåˆ—å› æœ"
    ]
  },
  {
    "objectID": "1066-causalimpact.html#ç¬¬ä¸ƒéƒ¨åˆ†ä¸itså¯¹æ¯”",
    "href": "1066-causalimpact.html#ç¬¬ä¸ƒéƒ¨åˆ†ä¸itså¯¹æ¯”",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šä¸ITSå¯¹æ¯”",
    "text": "ç¬¬ä¸ƒéƒ¨åˆ†ï¼šä¸ITSå¯¹æ¯”\n\nä¸­æ–­æ—¶é—´åºåˆ—åˆ†æï¼ˆITSï¼‰\n\n# ä¼ ç»ŸITSåˆ†æ\nits_data &lt;- data.frame(\n    time = 1:n,\n    y = as.numeric(y),\n    intervention = ifelse(1:n &gt; intervention_point, 1, 0),\n    time_after = ifelse(1:n &gt; intervention_point,\n        1:n - intervention_point, 0\n    )\n)\n\nits_model &lt;- lm(y ~ time + intervention + time_after, data = its_data)\nsummary(its_model)\n\n\nCall:\nlm(formula = y ~ time + intervention + time_after, data = its_data)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-7.0522 -1.5371  0.0366  1.6267  8.7570 \n\nCoefficients:\n             Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)  23.17666    0.64851  35.738  &lt; 2e-16 ***\ntime          0.04945    0.01588   3.115 0.002429 ** \nintervention  4.94230    1.18872   4.158 6.99e-05 ***\ntime_after   -0.23665    0.05880  -4.025 0.000114 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 2.684 on 96 degrees of freedom\nMultiple R-squared:  0.3907,    Adjusted R-squared:  0.3717 \nF-statistic: 20.52 on 3 and 96 DF,  p-value: 2.351e-10\n\n\n\n\nITS vs CausalImpact\n\n# æå–ä¸¤ç§æ–¹æ³•çš„æ•ˆåº”ä¼°è®¡\nits_effect &lt;- coef(its_model)[\"intervention\"]\nci_effect &lt;- impact$summary$AbsEffect[1]\n\ncomparison &lt;- data.frame(\n    Method = c(\"ITS\", \"CausalImpact\"),\n    Effect = c(its_effect, ci_effect),\n    True_Effect = c(5, 5)\n)\n\nggplot(comparison, aes(x = Method, y = Effect)) +\n    geom_col(fill = c(\"#4f46e5\", \"#10b981\"), alpha = 0.8) +\n    geom_hline(yintercept = 5, linetype = \"dashed\", color = \"red\") +\n    annotate(\"text\", x = 2.3, y = 5.2, label = \"çœŸå®æ•ˆåº”\", color = \"red\") +\n    labs(\n        title = \"ITS vs CausalImpact æ•ˆåº”ä¼°è®¡æ¯”è¾ƒ\",\n        y = \"ä¼°è®¡æ•ˆåº”\"\n    )\n\n\n\n\n\n\n\n\n\n\n\nç‰¹ç‚¹\nITS\nCausalImpact\n\n\n\n\nå¯¹ç…§åºåˆ—\nä¸éœ€è¦\nå¯é€‰ä½†æ¨è\n\n\nä¸ç¡®å®šæ€§\né¢‘ç‡æ´¾\nè´å¶æ–¯\n\n\nè¶‹åŠ¿å»ºæ¨¡\nå‚æ•°åŒ–\néå‚æ•°\n\n\nå­£èŠ‚æ€§\néœ€æ‰‹åŠ¨å¤„ç†\nè‡ªåŠ¨å¤„ç†",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "CausalImpact æ—¶é—´åºåˆ—å› æœ"
    ]
  },
  {
    "objectID": "1066-causalimpact.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "href": "1066-causalimpact.html#å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "å¸¸ç”¨ä»£ç é€ŸæŸ¥",
    "text": "å¸¸ç”¨ä»£ç é€ŸæŸ¥\n\n# ===== åŸºç¡€åˆ†æ =====\nlibrary(CausalImpact)\nimpact &lt;- CausalImpact(data, pre.period, post.period)\nsummary(impact)\nplot(impact)\n\n# ===== æ•°æ®æ ¼å¼ =====\n# zooå¯¹è±¡ï¼Œç¬¬ä¸€åˆ—æ˜¯ç›®æ ‡åºåˆ—ï¼Œå…¶ä½™æ˜¯å¯¹ç…§åºåˆ—\ndata &lt;- zoo::zoo(cbind(y, x1, x2), time_index)\n\n# ===== æ—¶æœŸå®šä¹‰ =====\npre.period &lt;- c(start_date, intervention_date)\npost.period &lt;- c(intervention_date + 1, end_date)\n\n# ===== æ¨¡å‹å‚æ•° =====\nmodel.args &lt;- list(\n    niter = 5000, # MCMCè¿­ä»£\n    nseasons = 7, # å­£èŠ‚å‘¨æœŸ\n    prior.level.sd = 0.01 # å…ˆéªŒ\n)\n\n# ===== ç»“æœæå– =====\nimpact$summary # æ•°å€¼æ‘˜è¦\nimpact$series # å®Œæ•´åºåˆ—\nsummary(impact, \"report\") # æ–‡å­—æŠ¥å‘Š\n\n# ===== å¯è§†åŒ– =====\nplot(impact) # å…¨éƒ¨é¢æ¿\nplot(impact, \"original\") # å•ä¸ªé¢æ¿",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "CausalImpact æ—¶é—´åºåˆ—å› æœ"
    ]
  },
  {
    "objectID": "1066-causalimpact.html#å°ç»“",
    "href": "1066-causalimpact.html#å°ç»“",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "å°ç»“",
    "text": "å°ç»“\nCausalImpact æœ€ä½³å®è·µï¼š\n\né€‰æ‹©å¥½çš„å¯¹ç…§åºåˆ—ï¼šä¸ç›®æ ‡é«˜åº¦ç›¸å…³ä½†æœªå—å¹²é¢„å½±å“\nå……è¶³çš„å¹²é¢„å‰æ•°æ®ï¼šè‡³å°‘æ˜¯åˆ†æå‘¨æœŸçš„3å€ä»¥ä¸Š\næ£€éªŒå‡è®¾ï¼šè¿è¡Œå®‰æ…°å‰‚æ£€éªŒéªŒè¯æ¨¡å‹æœ‰æ•ˆæ€§\nç†è§£å±€é™æ€§ï¼šå‡è®¾å¹²é¢„å‰å…³ç³»åœ¨å¹²é¢„åä¿æŒç¨³å®š\n\n\né€‚ç”¨åœºæ™¯ï¼šå½“æœ‰æ¸…æ™°çš„å¹²é¢„æ—¶é—´ç‚¹ï¼Œä¸”èƒ½æ‰¾åˆ°åˆé€‚çš„å¯¹ç…§åºåˆ—æ—¶ï¼ŒCausalImpactæ˜¯è¯„ä¼°å¹²é¢„æ•ˆæœçš„å¼ºå¤§å·¥å…·ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "CausalImpact æ—¶é—´åºåˆ—å› æœ"
    ]
  },
  {
    "objectID": "1066-causalimpact.html#å‚è€ƒèµ„æº",
    "href": "1066-causalimpact.html#å‚è€ƒèµ„æº",
    "title": "CausalImpact æ—¶é—´åºåˆ—å› æœåˆ†æ",
    "section": "å‚è€ƒèµ„æº",
    "text": "å‚è€ƒèµ„æº\n\nCausalImpact å®˜æ–¹æ–‡æ¡£\nåŸå§‹è®ºæ–‡ï¼šBrodersen et al.Â (2015)\nCausalImpact CRAN",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "CausalImpact æ—¶é—´åºåˆ—å› æœ"
    ]
  },
  {
    "objectID": "2052-bindacf.html",
    "href": "2052-bindacf.html",
    "title": "Rè¯­è¨€è‡ªç›¸å…³å›¾ç»˜åˆ¶",
    "section": "",
    "text": "è‡ªç›¸å…³å›¾ï¼ˆACF/PACF Plotï¼‰ç”¨äºåˆ†ææ—¶é—´åºåˆ—æ•°æ®çš„è‡ªç›¸å…³æ€§ï¼Œæ˜¯æ—¶é—´åºåˆ—å»ºæ¨¡å‰çš„å¿…è¦è¯Šæ–­å·¥å…·ã€‚\n\nACF: è‡ªç›¸å…³å‡½æ•°ï¼Œè¡¡é‡åºåˆ—ä¸å…¶æ»åå€¼çš„ç›¸å…³æ€§\nPACF: åè‡ªç›¸å…³å‡½æ•°ï¼Œæ’é™¤ä¸­é—´æ»åé¡¹çš„å½±å“",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è‡ªç›¸å…³å›¾ ACF/PACF"
    ]
  },
  {
    "objectID": "2052-bindacf.html#ä»€ä¹ˆæ˜¯è‡ªç›¸å…³å›¾",
    "href": "2052-bindacf.html#ä»€ä¹ˆæ˜¯è‡ªç›¸å…³å›¾",
    "title": "Rè¯­è¨€è‡ªç›¸å…³å›¾ç»˜åˆ¶",
    "section": "",
    "text": "è‡ªç›¸å…³å›¾ï¼ˆACF/PACF Plotï¼‰ç”¨äºåˆ†ææ—¶é—´åºåˆ—æ•°æ®çš„è‡ªç›¸å…³æ€§ï¼Œæ˜¯æ—¶é—´åºåˆ—å»ºæ¨¡å‰çš„å¿…è¦è¯Šæ–­å·¥å…·ã€‚\n\nACF: è‡ªç›¸å…³å‡½æ•°ï¼Œè¡¡é‡åºåˆ—ä¸å…¶æ»åå€¼çš„ç›¸å…³æ€§\nPACF: åè‡ªç›¸å…³å‡½æ•°ï¼Œæ’é™¤ä¸­é—´æ»åé¡¹çš„å½±å“",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è‡ªç›¸å…³å›¾ ACF/PACF"
    ]
  },
  {
    "objectID": "2052-bindacf.html#råŒ…åŠ è½½",
    "href": "2052-bindacf.html#råŒ…åŠ è½½",
    "title": "Rè¯­è¨€è‡ªç›¸å…³å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(forecast)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è‡ªç›¸å…³å›¾ ACF/PACF"
    ]
  },
  {
    "objectID": "2052-bindacf.html#å‡†å¤‡æ—¶åºæ•°æ®",
    "href": "2052-bindacf.html#å‡†å¤‡æ—¶åºæ•°æ®",
    "title": "Rè¯­è¨€è‡ªç›¸å…³å›¾ç»˜åˆ¶",
    "section": "å‡†å¤‡æ—¶åºæ•°æ®",
    "text": "å‡†å¤‡æ—¶åºæ•°æ®\n\n# ä½¿ç”¨å†…ç½®AirPassengersæ•°æ®\ndata(AirPassengers)\nts_data &lt;- as.numeric(AirPassengers)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è‡ªç›¸å…³å›¾ ACF/PACF"
    ]
  },
  {
    "objectID": "2052-bindacf.html#åŸºç¡€acfå›¾",
    "href": "2052-bindacf.html#åŸºç¡€acfå›¾",
    "title": "Rè¯­è¨€è‡ªç›¸å…³å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€ACFå›¾",
    "text": "åŸºç¡€ACFå›¾\n\nacf(ts_data, main = \"è‡ªç›¸å…³å‡½æ•°å›¾ (ACF)\", col = \"#4f46e5\", lwd = 2)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è‡ªç›¸å…³å›¾ ACF/PACF"
    ]
  },
  {
    "objectID": "2052-bindacf.html#åŸºç¡€pacfå›¾",
    "href": "2052-bindacf.html#åŸºç¡€pacfå›¾",
    "title": "Rè¯­è¨€è‡ªç›¸å…³å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€PACFå›¾",
    "text": "åŸºç¡€PACFå›¾\n\npacf(ts_data, main = \"åè‡ªç›¸å…³å‡½æ•°å›¾ (PACF)\", col = \"#10b981\", lwd = 2)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è‡ªç›¸å…³å›¾ ACF/PACF"
    ]
  },
  {
    "objectID": "2052-bindacf.html#ä½¿ç”¨ggplot2ç¾åŒ–",
    "href": "2052-bindacf.html#ä½¿ç”¨ggplot2ç¾åŒ–",
    "title": "Rè¯­è¨€è‡ªç›¸å…³å›¾ç»˜åˆ¶",
    "section": "ä½¿ç”¨ggplot2ç¾åŒ–",
    "text": "ä½¿ç”¨ggplot2ç¾åŒ–\n\n# æå–ACFæ•°æ®\nacf_data &lt;- acf(ts_data, plot = FALSE)\nacf_df &lt;- data.frame(\n    lag = acf_data$lag[-1],\n    acf = acf_data$acf[-1]\n)\n\n# ç½®ä¿¡åŒºé—´\nci &lt;- qnorm(0.975) / sqrt(length(ts_data))\n\nggplot(acf_df, aes(x = lag, y = acf)) +\n    geom_hline(yintercept = 0, color = \"gray50\") +\n    geom_hline(yintercept = c(-ci, ci), linetype = \"dashed\", color = \"#ef4444\") +\n    geom_segment(aes(xend = lag, yend = 0), color = \"#4f46e5\", linewidth = 1) +\n    geom_point(color = \"#4f46e5\", size = 2) +\n    labs(\n        title = \"è‡ªç›¸å…³å‡½æ•°å›¾ (ACF)\",\n        subtitle = \"çº¢è‰²è™šçº¿è¡¨ç¤º95%ç½®ä¿¡åŒºé—´\",\n        x = \"æ»åé˜¶æ•°\",\n        y = \"è‡ªç›¸å…³ç³»æ•°\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(plot.title = element_text(face = \"bold\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è‡ªç›¸å…³å›¾ ACF/PACF"
    ]
  },
  {
    "objectID": "2052-bindacf.html#acfä¸pacfå¹¶æ’",
    "href": "2052-bindacf.html#acfä¸pacfå¹¶æ’",
    "title": "Rè¯­è¨€è‡ªç›¸å…³å›¾ç»˜åˆ¶",
    "section": "ACFä¸PACFå¹¶æ’",
    "text": "ACFä¸PACFå¹¶æ’\n\nlibrary(patchwork)\n\n# ACF\np1 &lt;- ggplot(acf_df, aes(x = lag, y = acf)) +\n    geom_hline(yintercept = c(-ci, ci), linetype = \"dashed\", color = \"#ef4444\") +\n    geom_segment(aes(xend = lag, yend = 0), color = \"#4f46e5\", linewidth = 1) +\n    geom_point(color = \"#4f46e5\", size = 2) +\n    labs(title = \"ACF\", x = \"æ»å\", y = \"ACF\") +\n    theme_minimal() +\n    theme(plot.title = element_text(face = \"bold\"))\n\n# PACF\npacf_data &lt;- pacf(ts_data, plot = FALSE)\npacf_df &lt;- data.frame(lag = pacf_data$lag, pacf = pacf_data$acf)\n\np2 &lt;- ggplot(pacf_df, aes(x = lag, y = pacf)) +\n    geom_hline(yintercept = c(-ci, ci), linetype = \"dashed\", color = \"#ef4444\") +\n    geom_segment(aes(xend = lag, yend = 0), color = \"#10b981\", linewidth = 1) +\n    geom_point(color = \"#10b981\", size = 2) +\n    labs(title = \"PACF\", x = \"æ»å\", y = \"PACF\") +\n    theme_minimal() +\n    theme(plot.title = element_text(face = \"bold\"))\n\np1 + p2",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è‡ªç›¸å…³å›¾ ACF/PACF"
    ]
  },
  {
    "objectID": "2052-bindacf.html#æ€»ç»“",
    "href": "2052-bindacf.html#æ€»ç»“",
    "title": "Rè¯­è¨€è‡ªç›¸å…³å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå›¾è¡¨\nç”¨é€”\nARIMAåˆ¤æ–­\n\n\n\n\nACF\nè¯†åˆ«MAé˜¶æ•°\næˆªå°¾â†’MA(q)\n\n\nPACF\nè¯†åˆ«ARé˜¶æ•°\næˆªå°¾â†’AR(p)\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\næŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—\næ—¶åºå³°è°·æ ‡è®°å›¾",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "è‡ªç›¸å…³å›¾ ACF/PACF"
    ]
  },
  {
    "objectID": "2054-bindnetwork.html",
    "href": "2054-bindnetwork.html",
    "title": "Rè¯­è¨€ç½‘ç»œå…³ç³»å›¾ç»˜åˆ¶",
    "section": "",
    "text": "ç½‘ç»œå…³ç³»å›¾ï¼ˆNetwork Graphï¼‰ç”¨èŠ‚ç‚¹å’Œè¾¹è¡¨ç¤ºå¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼Œé€‚åˆå±•ç¤ºç¤¾äº¤ç½‘ç»œã€å¼•ç”¨å…³ç³»ã€çŸ¥è¯†å›¾è°±ç­‰ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "ç½‘ç»œå…³ç³»å›¾"
    ]
  },
  {
    "objectID": "2054-bindnetwork.html#ä»€ä¹ˆæ˜¯ç½‘ç»œå…³ç³»å›¾",
    "href": "2054-bindnetwork.html#ä»€ä¹ˆæ˜¯ç½‘ç»œå…³ç³»å›¾",
    "title": "Rè¯­è¨€ç½‘ç»œå…³ç³»å›¾ç»˜åˆ¶",
    "section": "",
    "text": "ç½‘ç»œå…³ç³»å›¾ï¼ˆNetwork Graphï¼‰ç”¨èŠ‚ç‚¹å’Œè¾¹è¡¨ç¤ºå¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼Œé€‚åˆå±•ç¤ºç¤¾äº¤ç½‘ç»œã€å¼•ç”¨å…³ç³»ã€çŸ¥è¯†å›¾è°±ç­‰ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "ç½‘ç»œå…³ç³»å›¾"
    ]
  },
  {
    "objectID": "2054-bindnetwork.html#råŒ…åŠ è½½",
    "href": "2054-bindnetwork.html#råŒ…åŠ è½½",
    "title": "Rè¯­è¨€ç½‘ç»œå…³ç³»å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\n\nlibrary(igraph)\nlibrary(ggraph)\nlibrary(tidygraph)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "ç½‘ç»œå…³ç³»å›¾"
    ]
  },
  {
    "objectID": "2054-bindnetwork.html#åˆ›å»ºç½‘ç»œæ•°æ®",
    "href": "2054-bindnetwork.html#åˆ›å»ºç½‘ç»œæ•°æ®",
    "title": "Rè¯­è¨€ç½‘ç»œå…³ç³»å›¾ç»˜åˆ¶",
    "section": "åˆ›å»ºç½‘ç»œæ•°æ®",
    "text": "åˆ›å»ºç½‘ç»œæ•°æ®\n\n# åˆ›å»ºè¾¹æ•°æ®\nedges &lt;- data.frame(\n    from = c(\"A\", \"A\", \"B\", \"B\", \"C\", \"D\", \"E\", \"E\", \"F\"),\n    to = c(\"B\", \"C\", \"D\", \"E\", \"D\", \"F\", \"F\", \"G\", \"G\")\n)\n\n# åˆ›å»ºå›¾å¯¹è±¡\ngraph &lt;- as_tbl_graph(edges, directed = FALSE)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "ç½‘ç»œå…³ç³»å›¾"
    ]
  },
  {
    "objectID": "2054-bindnetwork.html#åŸºç¡€ç½‘ç»œå›¾",
    "href": "2054-bindnetwork.html#åŸºç¡€ç½‘ç»œå›¾",
    "title": "Rè¯­è¨€ç½‘ç»œå…³ç³»å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€ç½‘ç»œå›¾",
    "text": "åŸºç¡€ç½‘ç»œå›¾\n\nggraph(graph, layout = \"fr\") +\n    geom_edge_link(color = \"#94a3b8\", width = 1) +\n    geom_node_point(size = 8, color = \"#4f46e5\") +\n    geom_node_text(aes(label = name), color = \"white\", fontface = \"bold\") +\n    theme_void() +\n    labs(title = \"åŸºç¡€ç½‘ç»œå…³ç³»å›¾\") +\n    theme(plot.title = element_text(face = \"bold\", hjust = 0.5))",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "ç½‘ç»œå…³ç³»å›¾"
    ]
  },
  {
    "objectID": "2054-bindnetwork.html#åœ†å½¢å¸ƒå±€",
    "href": "2054-bindnetwork.html#åœ†å½¢å¸ƒå±€",
    "title": "Rè¯­è¨€ç½‘ç»œå…³ç³»å›¾ç»˜åˆ¶",
    "section": "åœ†å½¢å¸ƒå±€",
    "text": "åœ†å½¢å¸ƒå±€\n\nggraph(graph, layout = \"circle\") +\n    geom_edge_link(color = \"#94a3b8\", width = 1.5) +\n    geom_node_point(size = 10, color = \"#10b981\") +\n    geom_node_text(aes(label = name), color = \"white\", fontface = \"bold\") +\n    theme_void() +\n    labs(title = \"åœ†å½¢å¸ƒå±€ç½‘ç»œå›¾\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "ç½‘ç»œå…³ç³»å›¾"
    ]
  },
  {
    "objectID": "2054-bindnetwork.html#èŠ‚ç‚¹ç€è‰²æŒ‰åº¦",
    "href": "2054-bindnetwork.html#èŠ‚ç‚¹ç€è‰²æŒ‰åº¦",
    "title": "Rè¯­è¨€ç½‘ç»œå…³ç³»å›¾ç»˜åˆ¶",
    "section": "èŠ‚ç‚¹ç€è‰²æŒ‰åº¦",
    "text": "èŠ‚ç‚¹ç€è‰²æŒ‰åº¦\n\ngraph &lt;- graph %&gt;%\n    mutate(degree = centrality_degree())\n\nggraph(graph, layout = \"stress\") +\n    geom_edge_link(color = \"#e2e8f0\", width = 1) +\n    geom_node_point(aes(size = degree, color = degree)) +\n    geom_node_text(aes(label = name), color = \"white\", fontface = \"bold\", size = 4) +\n    scale_color_gradient(low = \"#a5b4fc\", high = \"#4f46e5\") +\n    scale_size_continuous(range = c(8, 15)) +\n    theme_void() +\n    labs(title = \"æŒ‰èŠ‚ç‚¹åº¦æ•°ç€è‰²\") +\n    theme(legend.position = \"none\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "ç½‘ç»œå…³ç³»å›¾"
    ]
  },
  {
    "objectID": "2054-bindnetwork.html#æ€»ç»“",
    "href": "2054-bindnetwork.html#æ€»ç»“",
    "title": "Rè¯­è¨€ç½‘ç»œå…³ç³»å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\nå¸ƒå±€\nå‡½æ•°\n\n\n\n\nåŠ›å¯¼å‘\nlayout = \"fr\"\n\n\nåœ†å½¢\nlayout = \"circle\"\n\n\næ ‘å½¢\nlayout = \"tree\"\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\næ¡‘åŸºå›¾",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "ç½‘ç»œå…³ç³»å›¾"
    ]
  },
  {
    "objectID": "2056-bindfunnel.html",
    "href": "2056-bindfunnel.html",
    "title": "Rè¯­è¨€æ¼æ–—å›¾ç»˜åˆ¶",
    "section": "",
    "text": "æ¼æ–—å›¾ï¼ˆFunnel Chartï¼‰ç”¨é€çº§é€’å‡çš„æ¡å½¢å±•ç¤ºè½¬åŒ–è¿‡ç¨‹å„é˜¶æ®µçš„æµå¤±æƒ…å†µï¼Œæ˜¯è¥é”€å’Œé”€å”®åˆ†æçš„å¸¸ç”¨å›¾è¡¨ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "æ¼æ–—å›¾"
    ]
  },
  {
    "objectID": "2056-bindfunnel.html#ä»€ä¹ˆæ˜¯æ¼æ–—å›¾",
    "href": "2056-bindfunnel.html#ä»€ä¹ˆæ˜¯æ¼æ–—å›¾",
    "title": "Rè¯­è¨€æ¼æ–—å›¾ç»˜åˆ¶",
    "section": "",
    "text": "æ¼æ–—å›¾ï¼ˆFunnel Chartï¼‰ç”¨é€çº§é€’å‡çš„æ¡å½¢å±•ç¤ºè½¬åŒ–è¿‡ç¨‹å„é˜¶æ®µçš„æµå¤±æƒ…å†µï¼Œæ˜¯è¥é”€å’Œé”€å”®åˆ†æçš„å¸¸ç”¨å›¾è¡¨ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "æ¼æ–—å›¾"
    ]
  },
  {
    "objectID": "2056-bindfunnel.html#råŒ…åŠ è½½",
    "href": "2056-bindfunnel.html#råŒ…åŠ è½½",
    "title": "Rè¯­è¨€æ¼æ–—å›¾ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\n\nlibrary(ggplot2)\nlibrary(dplyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "æ¼æ–—å›¾"
    ]
  },
  {
    "objectID": "2056-bindfunnel.html#å‡†å¤‡æ•°æ®",
    "href": "2056-bindfunnel.html#å‡†å¤‡æ•°æ®",
    "title": "Rè¯­è¨€æ¼æ–—å›¾ç»˜åˆ¶",
    "section": "å‡†å¤‡æ•°æ®",
    "text": "å‡†å¤‡æ•°æ®\n\nfunnel_data &lt;- data.frame(\n    stage = c(\"è®¿é—®ç½‘ç«™\", \"æµè§ˆå•†å“\", \"åŠ å…¥è´­ç‰©è½¦\", \"å¼€å§‹ç»“è´¦\", \"å®Œæˆæ”¯ä»˜\"),\n    value = c(10000, 6000, 3000, 1500, 800)\n) %&gt;%\n    mutate(\n        stage = factor(stage, levels = rev(stage)),\n        pct = value / max(value) * 100,\n        label = paste0(value, \" (\", round(pct), \"%)\")\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "æ¼æ–—å›¾"
    ]
  },
  {
    "objectID": "2056-bindfunnel.html#åŸºç¡€æ¼æ–—å›¾",
    "href": "2056-bindfunnel.html#åŸºç¡€æ¼æ–—å›¾",
    "title": "Rè¯­è¨€æ¼æ–—å›¾ç»˜åˆ¶",
    "section": "åŸºç¡€æ¼æ–—å›¾",
    "text": "åŸºç¡€æ¼æ–—å›¾\n\nggplot(funnel_data, aes(x = value, y = stage)) +\n    geom_col(fill = \"#4f46e5\", width = 0.7) +\n    geom_text(aes(label = label), hjust = -0.1, fontface = \"bold\", size = 3.5) +\n    scale_x_continuous(expand = expansion(mult = c(0, 0.3))) +\n    labs(\n        title = \"ç”µå•†è½¬åŒ–æ¼æ–—\",\n        x = \"ç”¨æˆ·æ•°\",\n        y = NULL\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        panel.grid.major.y = element_blank()\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "æ¼æ–—å›¾"
    ]
  },
  {
    "objectID": "2056-bindfunnel.html#æ¸å˜è‰²æ¼æ–—",
    "href": "2056-bindfunnel.html#æ¸å˜è‰²æ¼æ–—",
    "title": "Rè¯­è¨€æ¼æ–—å›¾ç»˜åˆ¶",
    "section": "æ¸å˜è‰²æ¼æ–—",
    "text": "æ¸å˜è‰²æ¼æ–—\n\nggplot(funnel_data, aes(x = value, y = stage, fill = value)) +\n    geom_col(width = 0.7) +\n    geom_text(aes(label = label), hjust = -0.1, fontface = \"bold\", size = 3.5) +\n    scale_fill_gradient(low = \"#a5b4fc\", high = \"#4f46e5\") +\n    scale_x_continuous(expand = expansion(mult = c(0, 0.3))) +\n    labs(title = \"æ¸å˜è‰²æ¼æ–—å›¾\", x = NULL, y = NULL) +\n    theme_minimal() +\n    theme(\n        plot.title = element_text(face = \"bold\"),\n        panel.grid = element_blank(),\n        legend.position = \"none\"\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "æ¼æ–—å›¾"
    ]
  },
  {
    "objectID": "2056-bindfunnel.html#å¯¹ç§°æ¼æ–—å›¾",
    "href": "2056-bindfunnel.html#å¯¹ç§°æ¼æ–—å›¾",
    "title": "Rè¯­è¨€æ¼æ–—å›¾ç»˜åˆ¶",
    "section": "å¯¹ç§°æ¼æ–—å›¾",
    "text": "å¯¹ç§°æ¼æ–—å›¾\n\nfunnel_data &lt;- funnel_data %&gt;%\n    mutate(\n        x_left = -value / 2,\n        x_right = value / 2\n    )\n\nggplot(funnel_data) +\n    geom_rect(aes(\n        xmin = x_left, xmax = x_right,\n        ymin = as.numeric(stage) - 0.35,\n        ymax = as.numeric(stage) + 0.35,\n        fill = value\n    )) +\n    geom_text(aes(x = 0, y = stage, label = label),\n        color = \"white\", fontface = \"bold\", size = 4\n    ) +\n    scale_fill_gradient(low = \"#a5b4fc\", high = \"#4f46e5\") +\n    scale_y_discrete(expand = c(0.1, 0.1)) +\n    labs(title = \"å¯¹ç§°æ¼æ–—å›¾\", x = NULL, y = NULL) +\n    theme_void() +\n    theme(\n        plot.title = element_text(face = \"bold\", hjust = 0.5),\n        legend.position = \"none\",\n        axis.text.y = element_text(size = 10, hjust = 1)\n    )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "æ¼æ–—å›¾"
    ]
  },
  {
    "objectID": "2056-bindfunnel.html#æ€»ç»“",
    "href": "2056-bindfunnel.html#æ€»ç»“",
    "title": "Rè¯­è¨€æ¼æ–—å›¾ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\n\n\næ ·å¼\nç‰¹ç‚¹\n\n\n\n\næ°´å¹³æ¼æ–—\nç®€å•æ¸…æ™°\n\n\nå¯¹ç§°æ¼æ–—\nè§†è§‰å¹³è¡¡\n\n\næ¸å˜è‰²\nçªå‡ºå·®å¼‚\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\næŸ±çŠ¶å›¾ä¸é¥¼å›¾\näººå£é‡‘å­—å¡”å›¾",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "æ¼æ–—å›¾"
    ]
  },
  {
    "objectID": "3014-janitor-cleaning.html",
    "href": "3014-janitor-cleaning.html",
    "title": "janitor æ•°æ®æ¸…æ´—å®æˆ˜",
    "section": "",
    "text": "æ—¥å¸¸åˆ†æä¸­æœ€è€—æ—¶çš„æ­¥éª¤å¾€å¾€æ˜¯â€œè„æ•°æ®â€æ¸…æ´—ã€‚janitor æä¾›äº†ä¸€ç»„è½»é‡å‡½æ•°ï¼Œä¸“é—¨å¤„ç†åˆ—åè§„èŒƒåŒ–ã€ç©ºè¡Œç©ºåˆ—ã€é‡å¤è®°å½•ä»¥åŠå¿«é€Ÿåˆ—è”ç»Ÿè®¡ç­‰ä»»åŠ¡ã€‚\næœ¬æ•™ç¨‹èšç„¦æœ€å¸¸ç”¨çš„æ¸…æ´—æµç¨‹ï¼Œç»“åˆ dplyr ä¸ tidyrï¼Œæ„å»ºå¯å¤ç”¨çš„æ¸…æ´—æ¨¡æ¿ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "janitor æ•°æ®æ¸…æ´—å®æˆ˜"
    ]
  },
  {
    "objectID": "3014-janitor-cleaning.html#ç®€ä»‹",
    "href": "3014-janitor-cleaning.html#ç®€ä»‹",
    "title": "janitor æ•°æ®æ¸…æ´—å®æˆ˜",
    "section": "",
    "text": "æ—¥å¸¸åˆ†æä¸­æœ€è€—æ—¶çš„æ­¥éª¤å¾€å¾€æ˜¯â€œè„æ•°æ®â€æ¸…æ´—ã€‚janitor æä¾›äº†ä¸€ç»„è½»é‡å‡½æ•°ï¼Œä¸“é—¨å¤„ç†åˆ—åè§„èŒƒåŒ–ã€ç©ºè¡Œç©ºåˆ—ã€é‡å¤è®°å½•ä»¥åŠå¿«é€Ÿåˆ—è”ç»Ÿè®¡ç­‰ä»»åŠ¡ã€‚\næœ¬æ•™ç¨‹èšç„¦æœ€å¸¸ç”¨çš„æ¸…æ´—æµç¨‹ï¼Œç»“åˆ dplyr ä¸ tidyrï¼Œæ„å»ºå¯å¤ç”¨çš„æ¸…æ´—æ¨¡æ¿ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "janitor æ•°æ®æ¸…æ´—å®æˆ˜"
    ]
  },
  {
    "objectID": "3014-janitor-cleaning.html#å®‰è£…ä¸åŠ è½½",
    "href": "3014-janitor-cleaning.html#å®‰è£…ä¸åŠ è½½",
    "title": "janitor æ•°æ®æ¸…æ´—å®æˆ˜",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\n# install.packages(\"janitor\")\n# install.packages(\"dplyr\")\n# install.packages(\"tidyr\")\n# install.packages(\"tibble\")\n\nlibrary(dplyr)\nlibrary(janitor)\nlibrary(tidyr)\nlibrary(tibble)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "janitor æ•°æ®æ¸…æ´—å®æˆ˜"
    ]
  },
  {
    "objectID": "3014-janitor-cleaning.html#æ„é€ ä¸€ä¸ªè„æ•°æ®ç¤ºä¾‹",
    "href": "3014-janitor-cleaning.html#æ„é€ ä¸€ä¸ªè„æ•°æ®ç¤ºä¾‹",
    "title": "janitor æ•°æ®æ¸…æ´—å®æˆ˜",
    "section": "æ„é€ ä¸€ä¸ªâ€œè„æ•°æ®â€ç¤ºä¾‹",
    "text": "æ„é€ ä¸€ä¸ªâ€œè„æ•°æ®â€ç¤ºä¾‹\n\nraw_tbl &lt;- data.frame(\n  \"Patient ID\" = c(\"A001\", \"A002\", \"A002\", NA),\n  \"Age (years)\" = c(34, 29, 29, NA),\n  \"BMI \" = c(22.4, 27.1, 27.1, NA),\n  \"smoking?\" = c(\"yes\", \"no\", \"no\", NA),\n  \"Study Site\" = c(\"A\", \"A\", \"A\", NA),\n  \"empty_col\" = NA,\n  check.names = FALSE,\n  stringsAsFactors = FALSE\n)\n\nraw_tbl &lt;- as_tibble(raw_tbl)\nraw_tbl\n\n# A tibble: 4 Ã— 6\n  `Patient ID` `Age (years)` `BMI ` `smoking?` `Study Site` empty_col\n  &lt;chr&gt;                &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;        &lt;lgl&gt;    \n1 A001                    34   22.4 yes        A            NA       \n2 A002                    29   27.1 no         A            NA       \n3 A002                    29   27.1 no         A            NA       \n4 &lt;NA&gt;                    NA   NA   &lt;NA&gt;       &lt;NA&gt;         NA       \n\n\nè¿™ä¸ªè¡¨åŒ…å«ï¼š\n\néæ ‡å‡†åˆ—åï¼ˆç©ºæ ¼ã€æ‹¬å·ã€æ ‡ç‚¹ï¼‰\né‡å¤è®°å½•ï¼ˆæ‚£è€… A002ï¼‰\nç©ºè¡Œä¸ç©ºåˆ—\nå›ºå®šå€¼åˆ—ï¼ˆStudy Siteï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "janitor æ•°æ®æ¸…æ´—å®æˆ˜"
    ]
  },
  {
    "objectID": "3014-janitor-cleaning.html#è§„èŒƒåˆ—å",
    "href": "3014-janitor-cleaning.html#è§„èŒƒåˆ—å",
    "title": "janitor æ•°æ®æ¸…æ´—å®æˆ˜",
    "section": "1. è§„èŒƒåˆ—å",
    "text": "1. è§„èŒƒåˆ—å\nclean_names() å¯ä»¥ç›´æ¥æŠŠåˆ—åè½¬ä¸º snake_caseï¼Œå¹¶å¤„ç†é‡å¤æˆ–ä¸åˆè§„å­—ç¬¦ã€‚\n\nclean_tbl &lt;- raw_tbl %&gt;%\n  clean_names()\n\nclean_tbl\n\n# A tibble: 4 Ã— 6\n  patient_id age_years   bmi smoking study_site empty_col\n  &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;lgl&gt;    \n1 A001              34  22.4 yes     A          NA       \n2 A002              29  27.1 no      A          NA       \n3 A002              29  27.1 no      A          NA       \n4 &lt;NA&gt;              NA  NA   &lt;NA&gt;    &lt;NA&gt;       NA",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "janitor æ•°æ®æ¸…æ´—å®æˆ˜"
    ]
  },
  {
    "objectID": "3014-janitor-cleaning.html#åˆ é™¤ç©ºè¡Œä¸ç©ºåˆ—",
    "href": "3014-janitor-cleaning.html#åˆ é™¤ç©ºè¡Œä¸ç©ºåˆ—",
    "title": "janitor æ•°æ®æ¸…æ´—å®æˆ˜",
    "section": "2. åˆ é™¤ç©ºè¡Œä¸ç©ºåˆ—",
    "text": "2. åˆ é™¤ç©ºè¡Œä¸ç©ºåˆ—\nremove_empty() æ”¯æŒåŒæ—¶æ¸…ç†ç©ºè¡Œä¸ç©ºåˆ—ï¼Œå¸¸ç”¨äºå¯¼å…¥åå¿«é€Ÿç˜¦èº«ã€‚\n\nclean_tbl &lt;- clean_tbl %&gt;%\n  remove_empty(which = c(\"rows\", \"cols\"))\n\nclean_tbl\n\n# A tibble: 3 Ã— 5\n  patient_id age_years   bmi smoking study_site\n  &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;     \n1 A001              34  22.4 yes     A         \n2 A002              29  27.1 no      A         \n3 A002              29  27.1 no      A",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "janitor æ•°æ®æ¸…æ´—å®æˆ˜"
    ]
  },
  {
    "objectID": "3014-janitor-cleaning.html#åˆ é™¤æ’å®šåˆ—",
    "href": "3014-janitor-cleaning.html#åˆ é™¤æ’å®šåˆ—",
    "title": "janitor æ•°æ®æ¸…æ´—å®æˆ˜",
    "section": "3. åˆ é™¤æ’å®šåˆ—",
    "text": "3. åˆ é™¤æ’å®šåˆ—\nremove_constant() å¯ä»¥å»æ‰å…¨ä¸ºå¸¸æ•°çš„åˆ—ï¼Œå‡å°‘å»ºæ¨¡å™ªéŸ³ã€‚\n\nclean_tbl &lt;- clean_tbl %&gt;%\n  remove_constant(na.rm = TRUE)\n\nclean_tbl\n\n# A tibble: 3 Ã— 4\n  patient_id age_years   bmi smoking\n  &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  \n1 A001              34  22.4 yes    \n2 A002              29  27.1 no     \n3 A002              29  27.1 no",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "janitor æ•°æ®æ¸…æ´—å®æˆ˜"
    ]
  },
  {
    "objectID": "3014-janitor-cleaning.html#å¿«é€Ÿå®šä½é‡å¤è®°å½•",
    "href": "3014-janitor-cleaning.html#å¿«é€Ÿå®šä½é‡å¤è®°å½•",
    "title": "janitor æ•°æ®æ¸…æ´—å®æˆ˜",
    "section": "4. å¿«é€Ÿå®šä½é‡å¤è®°å½•",
    "text": "4. å¿«é€Ÿå®šä½é‡å¤è®°å½•\nget_dupes() å¯å¿«é€Ÿæ ‡è®°é‡å¤ç»„åˆï¼Œé€‚åˆåšä¸€è‡´æ€§æ’æŸ¥ã€‚\n\nclean_tbl %&gt;%\n  get_dupes(patient_id)\n\n# A tibble: 2 Ã— 5\n  patient_id dupe_count age_years   bmi smoking\n  &lt;chr&gt;           &lt;int&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  \n1 A002                2        29  27.1 no     \n2 A002                2        29  27.1 no",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "janitor æ•°æ®æ¸…æ´—å®æˆ˜"
    ]
  },
  {
    "objectID": "3014-janitor-cleaning.html#ç¼ºå¤±å€¼å¤„ç†ç¤ºä¾‹",
    "href": "3014-janitor-cleaning.html#ç¼ºå¤±å€¼å¤„ç†ç¤ºä¾‹",
    "title": "janitor æ•°æ®æ¸…æ´—å®æˆ˜",
    "section": "5. ç¼ºå¤±å€¼å¤„ç†ç¤ºä¾‹",
    "text": "5. ç¼ºå¤±å€¼å¤„ç†ç¤ºä¾‹\nè¿™é‡Œç”¨ tidyr::replace_na() è¡¥ç¼ºã€‚å®é™…åœºæ™¯å¯ç»“åˆå‡å€¼æ’è¡¥ã€å›å½’æ’è¡¥ç­‰ç­–ç•¥ã€‚\n\nfilled_tbl &lt;- clean_tbl %&gt;%\n  replace_na(list(age_years = 0, bmi = 0, smoking = \"unknown\"))\n\nfilled_tbl\n\n# A tibble: 3 Ã— 4\n  patient_id age_years   bmi smoking\n  &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  \n1 A001              34  22.4 yes    \n2 A002              29  27.1 no     \n3 A002              29  27.1 no",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "janitor æ•°æ®æ¸…æ´—å®æˆ˜"
    ]
  },
  {
    "objectID": "3014-janitor-cleaning.html#é¢‘æ•°ç»Ÿè®¡ä¸æŠ¥å‘Šè¡¨",
    "href": "3014-janitor-cleaning.html#é¢‘æ•°ç»Ÿè®¡ä¸æŠ¥å‘Šè¡¨",
    "title": "janitor æ•°æ®æ¸…æ´—å®æˆ˜",
    "section": "6. é¢‘æ•°ç»Ÿè®¡ä¸æŠ¥å‘Šè¡¨",
    "text": "6. é¢‘æ•°ç»Ÿè®¡ä¸æŠ¥å‘Šè¡¨\ntabyl() å¯ä»¥ç”Ÿæˆå¿«é€Ÿåˆ—è”è¡¨ï¼Œå¹¶æ­é… adorn_ ç³»åˆ—å®Œæˆæ¯”ä¾‹ä¸æ ¼å¼åŒ–è¾“å‡ºã€‚\n\nclean_tbl %&gt;%\n  tabyl(smoking) %&gt;%\n  adorn_totals(\"row\") %&gt;%\n  adorn_percentages(\"row\") %&gt;%\n  adorn_pct_formatting() %&gt;%\n  adorn_ns()\n\n smoking       n           percent\n      no 0.8 (2) 25.0% (0.6666667)\n     yes 0.8 (1) 25.0% (0.3333333)\n   Total 0.8 (3) 25.0% (1.0000000)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "janitor æ•°æ®æ¸…æ´—å®æˆ˜"
    ]
  },
  {
    "objectID": "3014-janitor-cleaning.html#å»ºè®®çš„æ¸…æ´—æµç¨‹æ¨¡æ¿",
    "href": "3014-janitor-cleaning.html#å»ºè®®çš„æ¸…æ´—æµç¨‹æ¨¡æ¿",
    "title": "janitor æ•°æ®æ¸…æ´—å®æˆ˜",
    "section": "7. å»ºè®®çš„æ¸…æ´—æµç¨‹æ¨¡æ¿",
    "text": "7. å»ºè®®çš„æ¸…æ´—æµç¨‹æ¨¡æ¿\n\nclean_pipeline &lt;- function(data) {\n  data %&gt;%\n    clean_names() %&gt;%\n    remove_empty(which = c(\"rows\", \"cols\")) %&gt;%\n    remove_constant(na.rm = TRUE)\n}\n\nclean_pipeline(raw_tbl)\n\n# A tibble: 3 Ã— 4\n  patient_id age_years   bmi smoking\n  &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  \n1 A001              34  22.4 yes    \n2 A002              29  27.1 no     \n3 A002              29  27.1 no",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "janitor æ•°æ®æ¸…æ´—å®æˆ˜"
    ]
  },
  {
    "objectID": "3014-janitor-cleaning.html#å°ç»“",
    "href": "3014-janitor-cleaning.html#å°ç»“",
    "title": "janitor æ•°æ®æ¸…æ´—å®æˆ˜",
    "section": "å°ç»“",
    "text": "å°ç»“\n\njanitor é€‚åˆç”¨ä½œæ•°æ®è¿›å…¥åˆ†æå‰çš„â€œç¬¬ä¸€é“æ¸…æ´—å·¥åºâ€ã€‚\nå’Œ dplyr/tidyr é…åˆåï¼Œå¯å¿«é€Ÿå½¢æˆç¨³å®šçš„æ¸…æ´—æµæ°´çº¿ã€‚\nå¦‚æœæ¸…æ´—è¿‡ç¨‹éœ€è¦å¤ç”¨ï¼Œå»ºè®®å°è£…æˆå‡½æ•°å¹¶ç»Ÿä¸€ç®¡ç†ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "janitor æ•°æ®æ¸…æ´—å®æˆ˜"
    ]
  },
  {
    "objectID": "3014-janitor-cleaning.html#å‚è€ƒèµ„æ–™",
    "href": "3014-janitor-cleaning.html#å‚è€ƒèµ„æ–™",
    "title": "janitor æ•°æ®æ¸…æ´—å®æˆ˜",
    "section": "å‚è€ƒèµ„æ–™",
    "text": "å‚è€ƒèµ„æ–™\n\njanitor å®˜æ–¹æ–‡æ¡£: https://sfirke.github.io/janitor/\ntidyr tidy data ä»‹ç»: https://tidyr.tidyverse.org/\nreadr æ•°æ®å¯¼å…¥åŸºç¡€: https://readr.tidyverse.org/",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨æ“ä½œ",
      "ğŸ§¹ æ•°æ®æ¸…æ´—",
      "janitor æ•°æ®æ¸…æ´—å®æˆ˜"
    ]
  },
  {
    "objectID": "2062-interactive-plot.html",
    "href": "2062-interactive-plot.html",
    "title": "äº¤äº’å¼å¯è§†åŒ–è¿›é˜¶ï¼šplotly ä¸ ggiraph",
    "section": "",
    "text": "äº¤äº’å¼å›¾å½¢å¯ä»¥è®©è¯»è€…åœ¨ç½‘é¡µä¸­æ¢ç´¢æ•°æ®ç»†èŠ‚ã€‚æœ¬æ•™ç¨‹èšç„¦ä¸¤æ¡é«˜æ•ˆè·¯çº¿ï¼š\n\nggplot2 â†’ plotlyï¼šå¿«é€Ÿè®©ç°æœ‰é™æ€å›¾å˜æˆäº¤äº’å›¾\nplotly åŸç”Ÿè¯­æ³•ï¼šå®ç°æŒ‰é’®ã€æ‚¬æµ®æç¤ºã€åŠ¨æ€ç­›é€‰\nggiraphï¼šæ›´ç»†ç²’åº¦çš„ hover æ ·å¼ä¸ç‚¹å‡»è¡Œä¸º",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "äº¤äº’å¼å¯è§†åŒ–è¿›é˜¶"
    ]
  },
  {
    "objectID": "2062-interactive-plot.html#æ•™ç¨‹æ¦‚è§ˆ",
    "href": "2062-interactive-plot.html#æ•™ç¨‹æ¦‚è§ˆ",
    "title": "äº¤äº’å¼å¯è§†åŒ–è¿›é˜¶ï¼šplotly ä¸ ggiraph",
    "section": "",
    "text": "äº¤äº’å¼å›¾å½¢å¯ä»¥è®©è¯»è€…åœ¨ç½‘é¡µä¸­æ¢ç´¢æ•°æ®ç»†èŠ‚ã€‚æœ¬æ•™ç¨‹èšç„¦ä¸¤æ¡é«˜æ•ˆè·¯çº¿ï¼š\n\nggplot2 â†’ plotlyï¼šå¿«é€Ÿè®©ç°æœ‰é™æ€å›¾å˜æˆäº¤äº’å›¾\nplotly åŸç”Ÿè¯­æ³•ï¼šå®ç°æŒ‰é’®ã€æ‚¬æµ®æç¤ºã€åŠ¨æ€ç­›é€‰\nggiraphï¼šæ›´ç»†ç²’åº¦çš„ hover æ ·å¼ä¸ç‚¹å‡»è¡Œä¸º",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "äº¤äº’å¼å¯è§†åŒ–è¿›é˜¶"
    ]
  },
  {
    "objectID": "2062-interactive-plot.html#å®‰è£…ä¸åŠ è½½",
    "href": "2062-interactive-plot.html#å®‰è£…ä¸åŠ è½½",
    "title": "äº¤äº’å¼å¯è§†åŒ–è¿›é˜¶ï¼šplotly ä¸ ggiraph",
    "section": "å®‰è£…ä¸åŠ è½½",
    "text": "å®‰è£…ä¸åŠ è½½\n\ninstall.packages(c(\"ggplot2\", \"dplyr\", \"plotly\", \"ggiraph\"))\n\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(ggiraph)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "äº¤äº’å¼å¯è§†åŒ–è¿›é˜¶"
    ]
  },
  {
    "objectID": "2062-interactive-plot.html#æ•°æ®å‡†å¤‡",
    "href": "2062-interactive-plot.html#æ•°æ®å‡†å¤‡",
    "title": "äº¤äº’å¼å¯è§†åŒ–è¿›é˜¶ï¼šplotly ä¸ ggiraph",
    "section": "æ•°æ®å‡†å¤‡",
    "text": "æ•°æ®å‡†å¤‡\n\nmtcars_tbl &lt;- mtcars |&gt;\n  tibble::rownames_to_column(var = \"model\") |&gt;\n  mutate(\n    cyl = factor(cyl),\n    label = paste0(model, \" | MPG: \", mpg, \" | WT: \", wt)\n  )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "äº¤äº’å¼å¯è§†åŒ–è¿›é˜¶"
    ]
  },
  {
    "objectID": "2062-interactive-plot.html#ggplot2-å¿«é€Ÿå‡çº§ä¸ºäº¤äº’å›¾",
    "href": "2062-interactive-plot.html#ggplot2-å¿«é€Ÿå‡çº§ä¸ºäº¤äº’å›¾",
    "title": "äº¤äº’å¼å¯è§†åŒ–è¿›é˜¶ï¼šplotly ä¸ ggiraph",
    "section": "1. ggplot2 å¿«é€Ÿå‡çº§ä¸ºäº¤äº’å›¾",
    "text": "1. ggplot2 å¿«é€Ÿå‡çº§ä¸ºäº¤äº’å›¾\n\nbase_plot &lt;- ggplot(mtcars_tbl, aes(x = wt, y = mpg, color = cyl, text = label)) +\n  geom_point(size = 3, alpha = 0.85) +\n  labs(\n    title = \"æ±½è½¦é‡é‡ä¸æ²¹è€—\",\n    x = \"é‡é‡ (1000 lbs)\",\n    y = \"æ²¹è€— (MPG)\",\n    color = \"æ°”ç¼¸æ•°\"\n  ) +\n  theme_minimal(base_size = 12)\n\nplotly::ggplotly(base_plot, tooltip = \"text\")\n\n\n\n\n\n\nè¿›é˜¶æç¤º\n\ntooltip = \"text\" å¯ä»¥ç²¾ç¡®æ§åˆ¶æ‚¬æµ®å†…å®¹\nggplotly() ä¼šä¿ç•™ ggplot2 ä¸»é¢˜å’Œé…è‰²",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "äº¤äº’å¼å¯è§†åŒ–è¿›é˜¶"
    ]
  },
  {
    "objectID": "2062-interactive-plot.html#plotly-åŸç”Ÿè¯­æ³•å¤šè½¨è¿¹-è¶‹åŠ¿çº¿",
    "href": "2062-interactive-plot.html#plotly-åŸç”Ÿè¯­æ³•å¤šè½¨è¿¹-è¶‹åŠ¿çº¿",
    "title": "äº¤äº’å¼å¯è§†åŒ–è¿›é˜¶ï¼šplotly ä¸ ggiraph",
    "section": "2. plotly åŸç”Ÿè¯­æ³•ï¼šå¤šè½¨è¿¹ + è¶‹åŠ¿çº¿",
    "text": "2. plotly åŸç”Ÿè¯­æ³•ï¼šå¤šè½¨è¿¹ + è¶‹åŠ¿çº¿\n\ntrend_fit &lt;- lm(mpg ~ wt, data = mtcars_tbl)\ntrend_line &lt;- mtcars_tbl |&gt;\n  arrange(wt) |&gt;\n  mutate(pred = predict(trend_fit, newdata = mtcars_tbl))\n\nplot_ly(mtcars_tbl,\n  x = ~wt,\n  y = ~mpg,\n  type = \"scatter\",\n  mode = \"markers\",\n  color = ~cyl,\n  text = ~label,\n  hovertemplate = \"%{text}&lt;extra&gt;&lt;/extra&gt;\"\n) |&gt;\n  add_lines(\n    data = trend_line,\n    x = ~wt,\n    y = ~pred,\n    line = list(color = \"#4f46e5\", width = 2),\n    name = \"å›å½’è¶‹åŠ¿\"\n  ) |&gt;\n  layout(\n    title = \"plotly åŸç”Ÿæ•£ç‚¹å›¾ + è¶‹åŠ¿çº¿\",\n    xaxis = list(title = \"é‡é‡ (1000 lbs)\"),\n    yaxis = list(title = \"æ²¹è€— (MPG)\"),\n    legend = list(orientation = \"h\", x = 0.1, y = -0.2)\n  )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "äº¤äº’å¼å¯è§†åŒ–è¿›é˜¶"
    ]
  },
  {
    "objectID": "2062-interactive-plot.html#plotly-æŒ‰é’®ç­›é€‰",
    "href": "2062-interactive-plot.html#plotly-æŒ‰é’®ç­›é€‰",
    "title": "äº¤äº’å¼å¯è§†åŒ–è¿›é˜¶ï¼šplotly ä¸ ggiraph",
    "section": "3. plotly æŒ‰é’®ç­›é€‰",
    "text": "3. plotly æŒ‰é’®ç­›é€‰\n\nplot_buttons &lt;- plot_ly()\n\ncyl_levels &lt;- levels(mtcars_tbl$cyl)\nfor (cyl_value in cyl_levels) {\n  cyl_data &lt;- mtcars_tbl |&gt; filter(cyl == cyl_value)\n  plot_buttons &lt;- plot_buttons |&gt;\n    add_markers(\n      data = cyl_data,\n      x = ~wt,\n      y = ~mpg,\n      name = paste0(cyl_value, \"ç¼¸\"),\n      text = ~label,\n      hovertemplate = \"%{text}&lt;extra&gt;&lt;/extra&gt;\",\n      visible = cyl_value == cyl_levels[1]\n    )\n}\n\nplot_buttons |&gt;\n  layout(\n    title = \"æŒ‰æ°”ç¼¸æ•°ç­›é€‰\",\n    updatemenus = list(\n      list(\n        type = \"buttons\",\n        direction = \"right\",\n        x = 0.1,\n        y = 1.15,\n        buttons = lapply(seq_along(cyl_levels), function(i) {\n          list(\n            label = paste0(cyl_levels[i], \"ç¼¸\"),\n            method = \"update\",\n            args = list(list(visible = seq_along(cyl_levels) == i))\n          )\n        })\n      )\n    )\n  )",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "äº¤äº’å¼å¯è§†åŒ–è¿›é˜¶"
    ]
  },
  {
    "objectID": "2062-interactive-plot.html#ggiraphè‡ªå®šä¹‰-hover-ä¸ç‚¹å‡»",
    "href": "2062-interactive-plot.html#ggiraphè‡ªå®šä¹‰-hover-ä¸ç‚¹å‡»",
    "title": "äº¤äº’å¼å¯è§†åŒ–è¿›é˜¶ï¼šplotly ä¸ ggiraph",
    "section": "4. ggiraphï¼šè‡ªå®šä¹‰ hover ä¸ç‚¹å‡»",
    "text": "4. ggiraphï¼šè‡ªå®šä¹‰ hover ä¸ç‚¹å‡»\n\ninteractive_plot &lt;- ggplot(mtcars_tbl, aes(x = wt, y = mpg)) +\n  ggiraph::geom_point_interactive(\n    aes(\n      tooltip = label,\n      data_id = model\n    ),\n    color = \"#4f46e5\",\n    size = 3,\n    alpha = 0.8\n  ) +\n  labs(\n    title = \"ggiraph äº¤äº’æ•£ç‚¹å›¾\",\n    x = \"é‡é‡ (1000 lbs)\",\n    y = \"æ²¹è€— (MPG)\"\n  ) +\n  theme_minimal(base_size = 12)\n\nggiraph::girafe(\n  ggobj = interactive_plot,\n  options = list(\n    ggiraph::opts_hover(css = \"fill:#ef4444;stroke:#ef4444;\"),\n    ggiraph::opts_selection(type = \"single\")\n  )\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "äº¤äº’å¼å¯è§†åŒ–è¿›é˜¶"
    ]
  },
  {
    "objectID": "2062-interactive-plot.html#å¯¼å‡ºä¸åˆ†äº«",
    "href": "2062-interactive-plot.html#å¯¼å‡ºä¸åˆ†äº«",
    "title": "äº¤äº’å¼å¯è§†åŒ–è¿›é˜¶ï¼šplotly ä¸ ggiraph",
    "section": "5. å¯¼å‡ºä¸åˆ†äº«",
    "text": "5. å¯¼å‡ºä¸åˆ†äº«\n\n# ä¿å­˜ä¸ºç‹¬ç«‹ HTML\nhtmlwidgets::saveWidget(\n  plotly::ggplotly(base_plot, tooltip = \"text\"),\n  file = \"interactive-plot.html\",\n  selfcontained = TRUE\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "äº¤äº’å¼å¯è§†åŒ–è¿›é˜¶"
    ]
  },
  {
    "objectID": "2062-interactive-plot.html#å°ç»“",
    "href": "2062-interactive-plot.html#å°ç»“",
    "title": "äº¤äº’å¼å¯è§†åŒ–è¿›é˜¶ï¼šplotly ä¸ ggiraph",
    "section": "å°ç»“",
    "text": "å°ç»“\näº¤äº’å›¾å½¢çš„æ ¸å¿ƒæ€è·¯æ˜¯ï¼šå…ˆç”¨ ggplot2 æ­å»ºç»“æ„ï¼Œå†ç”¨ plotly/ggiraph èµ‹äºˆäº’åŠ¨ã€‚\n\nggplotly() å¿«é€Ÿå‡çº§ç°æœ‰å›¾å½¢\nplot_ly() é€‚åˆæŒ‰é’®ä¸å¤šè½¨è¿¹æ§åˆ¶\nggiraph æä¾›æ›´ç»†è‡´çš„ hover æ ·å¼\n\nä¸‹ä¸€æ­¥å¯ä»¥ç»“åˆ crosstalk æˆ– shiny å®ç°è”åŠ¨ç­›é€‰ä¸ä»ªè¡¨ç›˜ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "äº¤äº’å¼å¯è§†åŒ–è¿›é˜¶"
    ]
  },
  {
    "objectID": "1079-kmeans.html",
    "href": "1079-kmeans.html",
    "title": "K-means èšç±»å®Œæ•´æ•™ç¨‹",
    "section": "",
    "text": "library(ggplot2)\nlibrary(dplyr)\nlibrary(tidyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "K-means èšç±»æ•™ç¨‹"
    ]
  },
  {
    "objectID": "1079-kmeans.html#æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "href": "1079-kmeans.html#æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "title": "K-means èšç±»å®Œæ•´æ•™ç¨‹",
    "section": "æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "text": "æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯\nK-means æ˜¯æœ€ç»å…¸çš„æ— ç›‘ç£èšç±»æ–¹æ³•ï¼Œé€‚åˆæŠŠæ ·æœ¬æŒ‰â€œç›¸ä¼¼æ€§â€åˆ’åˆ†ä¸ºå¤šä¸ªç»„ã€‚ æœ¬æ•™ç¨‹å°†è¦†ç›–ä»æ•°æ®å‡†å¤‡ã€K å€¼é€‰æ‹©ã€å»ºæ¨¡åˆ°ç»“æœè§£é‡Šçš„å®Œæ•´æµç¨‹ï¼Œå¹¶ç»™å‡º å¯è§†åŒ–æ‰‹æ®µå¸®åŠ©ç†è§£èšç±»ç»“æ„ã€‚\né€‚åˆåœºæ™¯\n\néœ€è¦å¯¹æ ·æœ¬è¿›è¡Œåˆ†ç»„ä½†æ²¡æœ‰æ ‡ç­¾çš„æƒ…å†µ\nä¸­ç­‰è§„æ¨¡æ•°æ®çš„å¿«é€Ÿèšç±»æ¢ç´¢\nå˜é‡ä¸ºæ•°å€¼å‹ä¸”å¯ç”¨æ¬§æ°è·ç¦»è¡¡é‡\n\nä¸é€‚åˆåœºæ™¯\n\nç±»åˆ«å˜é‡æˆ–æ··åˆç±»å‹å˜é‡ä¸ºä¸»çš„æ•°æ®\nç±»åˆ«å½¢çŠ¶éå¸¸éå‡¸æˆ–å‘ˆé•¿æ¡çŠ¶çš„èšç±»ç»“æ„\nç±»åˆ«æ•°é‡æä¸å‡è¡¡æˆ–å¼‚å¸¸å€¼å æ¯”å¾ˆé«˜çš„æ•°æ®",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "K-means èšç±»æ•™ç¨‹"
    ]
  },
  {
    "objectID": "1079-kmeans.html#k-means-æ ¸å¿ƒåŸç†ç›´è§‚è§£é‡Š",
    "href": "1079-kmeans.html#k-means-æ ¸å¿ƒåŸç†ç›´è§‚è§£é‡Š",
    "title": "K-means èšç±»å®Œæ•´æ•™ç¨‹",
    "section": "K-means æ ¸å¿ƒåŸç†ï¼ˆç›´è§‚è§£é‡Šï¼‰",
    "text": "K-means æ ¸å¿ƒåŸç†ï¼ˆç›´è§‚è§£é‡Šï¼‰\nK-means çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š\n\nè®¾å®šèšç±»æ•° K\néšæœºåˆå§‹åŒ– K ä¸ªâ€œä¸­å¿ƒç‚¹â€\nå°†æ¯ä¸ªæ ·æœ¬åˆ†é…ç»™æœ€è¿‘çš„ä¸­å¿ƒç‚¹\næ›´æ–°ä¸­å¿ƒç‚¹ï¼ˆå–å‡å€¼ï¼‰\né‡å¤ 3-4 æ­¥ç›´åˆ°ä¸­å¿ƒç¨³å®š\n\nK-means æœ€å°åŒ–çš„æ˜¯â€œç»„å†…å¹³æ–¹å’Œâ€ï¼ˆWithin-Cluster Sum of Squares, WSSï¼‰ï¼Œ å› æ­¤å®ƒå¯¹å¼‚å¸¸å€¼æ•æ„Ÿï¼Œä¸”è¦æ±‚å˜é‡å°ºåº¦ä¸€è‡´ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "K-means èšç±»æ•™ç¨‹"
    ]
  },
  {
    "objectID": "1079-kmeans.html#æ¨¡æ‹Ÿæ•°æ®æ„é€ ä¸€ä¸ªå¯è§£é‡Šçš„èšç±»åœºæ™¯",
    "href": "1079-kmeans.html#æ¨¡æ‹Ÿæ•°æ®æ„é€ ä¸€ä¸ªå¯è§£é‡Šçš„èšç±»åœºæ™¯",
    "title": "K-means èšç±»å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡æ‹Ÿæ•°æ®ï¼šæ„é€ ä¸€ä¸ªå¯è§£é‡Šçš„èšç±»åœºæ™¯",
    "text": "æ¨¡æ‹Ÿæ•°æ®ï¼šæ„é€ ä¸€ä¸ªå¯è§£é‡Šçš„èšç±»åœºæ™¯\nä¸ºäº†æ¸…æ™°å±•ç¤ºèšç±»æ•ˆæœï¼Œæˆ‘ä»¬å…ˆæ„é€ ä¸‰ç»„äºŒç»´æ•°æ®ã€‚\n\nset.seed(2026)\ncluster_a &lt;- data.frame(\n  feature_x = rnorm(120, mean = 2, sd = 0.6),\n  feature_y = rnorm(120, mean = 2, sd = 0.6)\n)\ncluster_b &lt;- data.frame(\n  feature_x = rnorm(120, mean = -2, sd = 0.7),\n  feature_y = rnorm(120, mean = -2, sd = 0.7)\n)\ncluster_c &lt;- data.frame(\n  feature_x = rnorm(120, mean = 2, sd = 0.7),\n  feature_y = rnorm(120, mean = -2, sd = 0.7)\n)\n\nsim_data &lt;- bind_rows(cluster_a, cluster_b, cluster_c)\n\n\nggplot(sim_data, aes(x = feature_x, y = feature_y)) +\n  geom_point(alpha = 0.7, color = \"#4f46e5\") +\n  labs(\n    title = \"åŸå§‹æ•°æ®æ•£ç‚¹å›¾\",\n    subtitle = \"å°šæœªèšç±»çš„æ ·æœ¬åˆ†å¸ƒ\",\n    x = \"ç‰¹å¾ X\",\n    y = \"ç‰¹å¾ Y\"\n  ) +\n  theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\nè¯´æ˜\n\nçœŸå®æ•°æ®èšç±»å‰åº”æ£€æŸ¥æ˜¯å¦æœ‰æ˜æ˜¾å¼‚å¸¸å€¼ã€‚\nè‹¥ä¸åŒå˜é‡å°ºåº¦å·®å¼‚å¤§ï¼Œå¿…é¡»å…ˆè¿›è¡Œæ ‡å‡†åŒ–ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "K-means èšç±»æ•™ç¨‹"
    ]
  },
  {
    "objectID": "1079-kmeans.html#æ•°æ®æ ‡å‡†åŒ–å¼ºçƒˆæ¨è",
    "href": "1079-kmeans.html#æ•°æ®æ ‡å‡†åŒ–å¼ºçƒˆæ¨è",
    "title": "K-means èšç±»å®Œæ•´æ•™ç¨‹",
    "section": "æ•°æ®æ ‡å‡†åŒ–ï¼ˆå¼ºçƒˆæ¨èï¼‰",
    "text": "æ•°æ®æ ‡å‡†åŒ–ï¼ˆå¼ºçƒˆæ¨èï¼‰\n\nscaled_sim_data &lt;- scale(sim_data)\n\næ ‡å‡†åŒ–èƒ½ä¿è¯æ¯ä¸ªå˜é‡å¯¹è·ç¦»è®¡ç®—è´¡çŒ®ç›¸è¿‘ï¼Œé¿å…æŸä¸€ç»´åº¦â€œä¸»å¯¼â€èšç±»ç»“æœã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "K-means èšç±»æ•™ç¨‹"
    ]
  },
  {
    "objectID": "1079-kmeans.html#å¦‚ä½•é€‰æ‹©-k-å€¼",
    "href": "1079-kmeans.html#å¦‚ä½•é€‰æ‹©-k-å€¼",
    "title": "K-means èšç±»å®Œæ•´æ•™ç¨‹",
    "section": "å¦‚ä½•é€‰æ‹© K å€¼",
    "text": "å¦‚ä½•é€‰æ‹© K å€¼\nK-means éœ€è¦é¢„å…ˆæŒ‡å®š Kï¼Œå¸¸ç”¨çš„é€‰æ‹©æ–¹å¼åŒ…æ‹¬ï¼š\n\nè‚˜éƒ¨æ³•ï¼ˆElbowï¼‰ï¼šè§‚å¯Ÿ WSS é™å¹…çš„æ‹ç‚¹\nè½®å»“ç³»æ•°ï¼ˆSilhouetteï¼‰ï¼šè¡¡é‡ç±»å†…ç´§å¯†ä¸ç±»é—´åˆ†ç¦»\n\n\n1. è‚˜éƒ¨æ³•\n\nset.seed(2026)\ncluster_range &lt;- 1:8\nwss_values &lt;- vapply(cluster_range, function(k_value) {\n  stats::kmeans(scaled_sim_data, centers = k_value, nstart = 20)$tot.withinss\n}, numeric(1))\n\nelbow_df &lt;- data.frame(k = cluster_range, wss = wss_values)\n\nggplot(elbow_df, aes(x = k, y = wss)) +\n  geom_line(color = \"#4f46e5\", linewidth = 1) +\n  geom_point(size = 2, color = \"#4f46e5\") +\n  scale_x_continuous(breaks = cluster_range) +\n  labs(\n    title = \"è‚˜éƒ¨æ³•é€‰æ‹© K å€¼\",\n    subtitle = \"è§‚å¯Ÿ WSS ä¸‹é™è¶‹åŠ¿æ‹ç‚¹\",\n    x = \"èšç±»æ•° K\",\n    y = \"æ€»ç»„å†…å¹³æ–¹å’Œ (WSS)\"\n  ) +\n  theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\nè§£è¯»ï¼šå½“ K ä» 2 å¢åŠ åˆ° 3 æ—¶ WSS æ˜æ˜¾ä¸‹é™ï¼Œä¹‹åä¸‹é™å¹…åº¦å‡å¼±ï¼Œ è¯´æ˜ K=3 æ˜¯ä¸€ä¸ªåˆç†é€‰æ‹©ã€‚\n\n\n2. è½®å»“ç³»æ•°\n\nset.seed(2026)\nkm_three &lt;- stats::kmeans(scaled_sim_data, centers = 3, nstart = 20)\n\nsilhouette_result &lt;- cluster::silhouette(km_three$cluster, dist(scaled_sim_data))\nsilhouette_df &lt;- as.data.frame(silhouette_result)\n\naverage_silhouette &lt;- mean(silhouette_df$sil_width)\nknitr::kable(data.frame(å¹³å‡è½®å»“ç³»æ•° = round(average_silhouette, 3)))\n\n\n\n\nå¹³å‡è½®å»“ç³»æ•°\n\n\n\n\n0.708\n\n\n\n\n\n\n\n3. Gap Statisticï¼ˆè¿›é˜¶ï¼‰\nGap Statistic ç”¨å‚è€ƒåˆ†å¸ƒè¯„ä¼°â€œéšæœºç»“æ„ä¸çœŸå®ç»“æ„â€çš„å·®å¼‚ï¼Œ èƒ½å¸®åŠ©é¿å…ä»…é è‚˜éƒ¨æ³•çš„ä¸»è§‚åˆ¤æ–­ã€‚\n\nset.seed(2026)\ngap_result &lt;- cluster::clusGap(\n  scaled_sim_data,\n  FUNcluster = stats::kmeans,\n  K.max = 6,\n  B = 30\n)\n\ngap_table &lt;- as.data.frame(gap_result$Tab)\nknitr::kable(round(gap_table, 3))\n\n\n\n\nlogW\nE.logW\ngap\nSE.sim\n\n\n\n\n5.059\n5.217\n0.158\n0.015\n\n\n4.574\n4.833\n0.260\n0.017\n\n\n3.944\n4.671\n0.727\n0.017\n\n\n3.847\n4.508\n0.661\n0.020\n\n\n3.819\n4.371\n0.552\n0.020\n\n\n3.747\n4.262\n0.516\n0.031\n\n\n\n\n\nè½®å»“ç³»æ•°æ¥è¿‘ 1 è¡¨ç¤ºèšç±»æ•ˆæœè¾ƒå¥½ï¼Œæ¥è¿‘ 0 è¡¨ç¤ºç±»é—´é‡å ã€‚\n\nggplot(silhouette_df, aes(x = factor(cluster), y = sil_width, fill = factor(cluster))) +\n  geom_boxplot(alpha = 0.85) +\n  scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f97316\")) +\n  labs(\n    title = \"è½®å»“ç³»æ•°åˆ†å¸ƒ\",\n    subtitle = \"æ¯ä¸ªç°‡çš„ç´§å¯†åº¦ä¸åˆ†ç¦»åº¦\",\n    x = \"ç°‡ç¼–å·\",\n    y = \"è½®å»“ç³»æ•°\"\n  ) +\n  theme_minimal(base_size = 12) +\n  theme(legend.position = \"none\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "K-means èšç±»æ•™ç¨‹"
    ]
  },
  {
    "objectID": "1079-kmeans.html#è®­ç»ƒ-k-means-æ¨¡å‹",
    "href": "1079-kmeans.html#è®­ç»ƒ-k-means-æ¨¡å‹",
    "title": "K-means èšç±»å®Œæ•´æ•™ç¨‹",
    "section": "è®­ç»ƒ K-means æ¨¡å‹",
    "text": "è®­ç»ƒ K-means æ¨¡å‹\n\nset.seed(2026)\nkm_model &lt;- stats::kmeans(\n  scaled_sim_data,\n  centers = 3,\n  nstart = 25,\n  iter.max = 100\n)\n\nkm_model$size\n\n[1] 120 120 120\n\n\nè§£é‡Š\n\ncenters = 3 è¡¨ç¤ºèšç±»æ•°ä¸º 3ã€‚\nnstart = 25 ä¼šå°è¯• 25 æ¬¡éšæœºåˆå§‹åŒ–ï¼Œæå‡ç¨³å®šæ€§ã€‚\niter.max é™åˆ¶æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼Œé¿å…æç«¯æƒ…å†µã€‚\nsize è¡¨ç¤ºæ¯ä¸ªç°‡çš„æ ·æœ¬æ•°é‡ã€‚\n\n\nèšç±»è´¨é‡æŒ‡æ ‡ï¼ˆå¯é€‰ï¼‰\n\nbetween_ratio &lt;- km_model$betweenss / km_model$totss\nquality_df &lt;- data.frame(\n  ç»„é—´å¹³æ–¹å’Œå æ¯” = round(between_ratio, 3),\n  æ€»ç»„å†…å¹³æ–¹å’Œ = round(km_model$tot.withinss, 2)\n)\nknitr::kable(quality_df)\n\n\n\n\nç»„é—´å¹³æ–¹å’Œå æ¯”\næ€»ç»„å†…å¹³æ–¹å’Œ\n\n\n\n\n0.894\n76.35\n\n\n\n\n\nç»„é—´å¹³æ–¹å’Œå æ¯”è¶Šé«˜ï¼Œè¯´æ˜ç°‡é—´åˆ†ç¦»åº¦è¶Šå¥½ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "K-means èšç±»æ•™ç¨‹"
    ]
  },
  {
    "objectID": "1079-kmeans.html#èšç±»ç»“æœå¯è§†åŒ–",
    "href": "1079-kmeans.html#èšç±»ç»“æœå¯è§†åŒ–",
    "title": "K-means èšç±»å®Œæ•´æ•™ç¨‹",
    "section": "èšç±»ç»“æœå¯è§†åŒ–",
    "text": "èšç±»ç»“æœå¯è§†åŒ–\n\n1. åŸå§‹ç©ºé—´å¯è§†åŒ–\n\nclustered_data &lt;- sim_data |&gt;\n  mutate(cluster = factor(km_model$cluster))\n\nggplot(clustered_data, aes(x = feature_x, y = feature_y, color = cluster)) +\n  geom_point(size = 2, alpha = 0.85) +\n  scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f97316\")) +\n  labs(\n    title = \"K-means èšç±»ç»“æœ\",\n    subtitle = \"é¢œè‰²ä»£è¡¨ä¸åŒç°‡\",\n    x = \"ç‰¹å¾ X\",\n    y = \"ç‰¹å¾ Y\",\n    color = \"ç°‡\"\n  ) +\n  theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\n\n\n2. èšç±»ä¸­å¿ƒå¯è§†åŒ–\n\ncenters_df &lt;- as.data.frame(km_model$centers)\ncenters_df$cluster &lt;- paste0(\"ç°‡\", seq_len(nrow(centers_df)))\ncenters_long &lt;- pivot_longer(\n  centers_df,\n  cols = c(feature_x, feature_y),\n  names_to = \"feature\",\n  values_to = \"value\"\n)\n\nggplot(centers_long, aes(x = feature, y = value, fill = cluster)) +\n  geom_col(position = position_dodge(width = 0.7), width = 0.6) +\n  scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f97316\")) +\n  labs(\n    title = \"æ ‡å‡†åŒ–ç©ºé—´ä¸‹çš„èšç±»ä¸­å¿ƒ\",\n    subtitle = \"å¯¹æ¯”ä¸åŒç°‡çš„ç‰¹å¾å‡å€¼\",\n    x = \"ç‰¹å¾\",\n    y = \"æ ‡å‡†åŒ–åçš„å‡å€¼\"\n  ) +\n  theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\n\n\n3. é™ç»´åå¯è§†åŒ–ï¼ˆPCAï¼‰\n\npca_result &lt;- prcomp(scaled_sim_data)\npca_df &lt;- data.frame(pca_result$x[, 1:2], cluster = factor(km_model$cluster))\ncolnames(pca_df) &lt;- c(\"PC1\", \"PC2\", \"cluster\")\n\nggplot(pca_df, aes(x = PC1, y = PC2, color = cluster)) +\n  geom_point(size = 2, alpha = 0.85) +\n  scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f97316\")) +\n  labs(\n    title = \"PCA ç©ºé—´ä¸­çš„èšç±»åˆ†å¸ƒ\",\n    subtitle = \"ä¸»æˆåˆ†è§†è§’çš„ç°‡åˆ†ç¦»æƒ…å†µ\",\n    color = \"ç°‡\"\n  ) +\n  theme_minimal(base_size = 12)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "K-means èšç±»æ•™ç¨‹"
    ]
  },
  {
    "objectID": "1079-kmeans.html#çœŸå®æ•°æ®ç¤ºä¾‹iris-æ•°æ®é›†",
    "href": "1079-kmeans.html#çœŸå®æ•°æ®ç¤ºä¾‹iris-æ•°æ®é›†",
    "title": "K-means èšç±»å®Œæ•´æ•™ç¨‹",
    "section": "çœŸå®æ•°æ®ç¤ºä¾‹ï¼šIris æ•°æ®é›†",
    "text": "çœŸå®æ•°æ®ç¤ºä¾‹ï¼šIris æ•°æ®é›†\nä½¿ç”¨ç»å…¸ Iris æ•°æ®é›†æ¼”ç¤ºçœŸå®åº”ç”¨ä¸­çš„èšç±»è¯„ä¼°ä¸è§£é‡Šã€‚\n\niris_data &lt;- iris |&gt;\n  select(Sepal.Length, Sepal.Width, Petal.Length, Petal.Width)\n\nscaled_iris &lt;- scale(iris_data)\n\n\né€‰æ‹© K å€¼å¹¶è®­ç»ƒæ¨¡å‹\n\nset.seed(2026)\niris_km &lt;- stats::kmeans(scaled_iris, centers = 3, nstart = 30)\n\n\n\nèšç±»ç»“æœä¸çœŸå®æ ‡ç­¾å¯¹ç…§\n\niris_clustered &lt;- iris |&gt;\n  mutate(cluster = factor(iris_km$cluster))\n\ncluster_table &lt;- table(çœŸå®ç‰©ç§ = iris_clustered$Species, èšç±»ç»“æœ = iris_clustered$cluster)\nknitr::kable(cluster_table)\n\n\n\n\n\n1\n2\n3\n\n\n\n\nsetosa\n0\n50\n0\n\n\nversicolor\n39\n0\n11\n\n\nvirginica\n14\n0\n36\n\n\n\n\n\nè§£é‡Š\n\nK-means æ˜¯æ— ç›‘ç£ç®—æ³•ï¼Œä½†å¯ä»¥é€šè¿‡ä¸çœŸå®æ ‡ç­¾å¯¹ç…§è¯„ä¼°èšç±»ä¸€è‡´æ€§ã€‚\nå¦‚æœæŸä¸€ç°‡å‡ ä¹å¯¹åº”å•ä¸€ç‰©ç§ï¼Œè¯´æ˜èšç±»æ•ˆæœè¾ƒå¥½ã€‚\n\n\n\nå¯è§†åŒ–èšç±»åˆ†å¸ƒ\n\niris_plot_data &lt;- iris_clustered |&gt;\n  select(Sepal.Length, Sepal.Width, cluster)\n\nggplot(iris_plot_data, aes(x = Sepal.Length, y = Sepal.Width, color = cluster)) +\n  geom_point(size = 2, alpha = 0.85) +\n  scale_color_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f97316\")) +\n  labs(\n    title = \"Iris æ•°æ®é›†çš„ K-means èšç±»\",\n    subtitle = \"ä½¿ç”¨è¼ç‰‡ç‰¹å¾è¿›è¡Œèšç±»\",\n    x = \"Sepal Length\",\n    y = \"Sepal Width\",\n    color = \"ç°‡\"\n  ) +\n  theme_minimal(base_size = 12)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "K-means èšç±»æ•™ç¨‹"
    ]
  },
  {
    "objectID": "1079-kmeans.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Šå»ºè®®",
    "href": "1079-kmeans.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Šå»ºè®®",
    "title": "K-means èšç±»å®Œæ•´æ•™ç¨‹",
    "section": "ç»“æœè§£è¯»ä¸æŠ¥å‘Šå»ºè®®",
    "text": "ç»“æœè§£è¯»ä¸æŠ¥å‘Šå»ºè®®\nå»ºè®®åœ¨æŠ¥å‘Šä¸­åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š\n\nK å€¼é€‰æ‹©ä¾æ®ï¼ˆè‚˜éƒ¨æ³•ã€è½®å»“ç³»æ•°ã€ä¸šåŠ¡è§£é‡Šï¼‰\nå„ç°‡è§„æ¨¡ä¸ä¸»è¦ç‰¹å¾ï¼ˆå‡å€¼ã€æ ‡å‡†å·®ã€ä¸­å¿ƒå·®å¼‚ï¼‰\nå¯è§†åŒ–å±•ç¤ºï¼ˆåŸå§‹ç©ºé—´ + PCA ç©ºé—´ï¼‰\nä¸šåŠ¡è§£é‡Šï¼ˆæ¯ä¸ªç°‡çš„å«ä¹‰ä¸è¡ŒåŠ¨å»ºè®®ï¼‰\n\n\nèšç±»ä¸­å¿ƒçš„å«ä¹‰\n\ncenters_table &lt;- as.data.frame(km_model$centers)\ncenters_table$cluster &lt;- paste0(\"ç°‡\", seq_len(nrow(centers_table)))\nknitr::kable(centers_table)\n\n\n\n\nfeature_x\nfeature_y\ncluster\n\n\n\n\n0.709871\n-0.6927186\nç°‡1\n\n\n0.627363\n1.3316562\nç°‡2\n\n\n-1.337234\n-0.6389376\nç°‡3\n\n\n\n\n\nèšç±»ä¸­å¿ƒä»£è¡¨æ¯ä¸ªç°‡çš„â€œå¹³å‡æ ·æœ¬ç‰¹å¾â€ï¼Œç”¨äºæè¿°å…¸å‹ç”»åƒã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "K-means èšç±»æ•™ç¨‹"
    ]
  },
  {
    "objectID": "1079-kmeans.html#å¸¸è§é”™è¯¯ä¸æ’æŸ¥",
    "href": "1079-kmeans.html#å¸¸è§é”™è¯¯ä¸æ’æŸ¥",
    "title": "K-means èšç±»å®Œæ•´æ•™ç¨‹",
    "section": "å¸¸è§é”™è¯¯ä¸æ’æŸ¥",
    "text": "å¸¸è§é”™è¯¯ä¸æ’æŸ¥\n\næœªæ ‡å‡†åŒ–æ•°æ®ï¼šå¯¼è‡´å°ºåº¦å¤§çš„å˜é‡ä¸»å¯¼ç»“æœã€‚\nK å€¼éšæ„é€‰æ‹©ï¼šåº”ç»“åˆè‚˜éƒ¨æ³•ä¸ä¸šåŠ¡ç†è§£ã€‚\nå¼‚å¸¸å€¼æœªå¤„ç†ï¼šå°‘é‡å¼‚å¸¸ç‚¹ä¼šå½±å“èšç±»ä¸­å¿ƒã€‚\nç±»åˆ«å½¢çŠ¶ä¸é€‚é…ï¼šK-means åªé€‚åˆâ€œè¿‘ä¼¼çƒå½¢â€çš„ç°‡ã€‚\nåˆå§‹åŒ–æ¬¡æ•°å¤ªå°‘ï¼šå®¹æ˜“é™·å…¥å±€éƒ¨æœ€ä¼˜ï¼Œåº”æé«˜ nstartã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "K-means èšç±»æ•™ç¨‹"
    ]
  },
  {
    "objectID": "1079-kmeans.html#è¿›é˜¶æ‰©å±•æ–¹å‘",
    "href": "1079-kmeans.html#è¿›é˜¶æ‰©å±•æ–¹å‘",
    "title": "K-means èšç±»å®Œæ•´æ•™ç¨‹",
    "section": "è¿›é˜¶æ‰©å±•æ–¹å‘",
    "text": "è¿›é˜¶æ‰©å±•æ–¹å‘\n\nK-means++ åˆå§‹åŒ–ï¼šå‡å°‘éšæœºåˆå§‹å¸¦æ¥çš„ä¸ç¨³å®šã€‚\næ›¿ä»£ç®—æ³•ï¼šDBSCANã€å±‚æ¬¡èšç±»ã€è°±èšç±»ã€‚\né«˜ç»´ä¼˜åŒ–ï¼šå…ˆ PCA é™ç»´å†èšç±»ã€‚\nè¯„ä¼°æ–¹æ³•ï¼šGap Statisticã€Calinski-Harabasz æŒ‡æ•°ã€‚\nç¨³å®šæ€§åˆ†æï¼šé‡å¤æŠ½æ ·èšç±»ï¼Œæ£€æŸ¥ç°‡ä¸€è‡´æ€§ã€‚\n\nåœ¨æ­£å¼æŠ¥å‘Šä¸­ï¼Œå¯é™„ä¸Š K å€¼é€‰æ‹©ä¾æ®ã€è½®å»“ç³»æ•°/Gap æŒ‡æ ‡ï¼Œä»¥åŠ èšç±»ä¸­å¿ƒçš„ä¸šåŠ¡è§£é‡Šï¼Œé¿å…åªç»™å‡ºâ€œèšç±»ç¼–å·â€è€Œç¼ºä¹å¯è§£é‡Šæ€§ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "K-means èšç±»æ•™ç¨‹"
    ]
  },
  {
    "objectID": "1079-kmeans.html#æ€»ç»“",
    "href": "1079-kmeans.html#æ€»ç»“",
    "title": "K-means èšç±»å®Œæ•´æ•™ç¨‹",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nK-means æ˜¯æœ€å®¹æ˜“ä¸Šæ‰‹çš„èšç±»ç®—æ³•ï¼Œä½†è¦æ³¨æ„æ•°æ®æ ‡å‡†åŒ–ã€K å€¼é€‰æ‹©ä¸ç»“æœè§£é‡Šã€‚ é€šè¿‡è‚˜éƒ¨æ³•ä¸è½®å»“ç³»æ•°ç»“åˆå¯è§†åŒ–ï¼Œä½ å¯ä»¥æ„å»ºä¸€ä¸ªå®Œæ•´ã€å¯å¤ç°çš„èšç±»åˆ†ææµç¨‹ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "K-means èšç±»æ•™ç¨‹"
    ]
  },
  {
    "objectID": "1080-random-forest.html",
    "href": "1080-random-forest.html",
    "title": "éšæœºæ£®æ—ä¸å†³ç­–æ ‘å®Œæ•´æ•™ç¨‹",
    "section": "",
    "text": "library(dplyr)\nlibrary(ggplot2)\nlibrary(rsample)\nlibrary(yardstick)\nlibrary(rpart)\nlibrary(rpart.plot)\nlibrary(ranger)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "éšæœºæ£®æ—ä¸å†³ç­–æ ‘"
    ]
  },
  {
    "objectID": "1080-random-forest.html#æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "href": "1080-random-forest.html#æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "title": "éšæœºæ£®æ—ä¸å†³ç­–æ ‘å®Œæ•´æ•™ç¨‹",
    "section": "æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "text": "æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯\nå†³ç­–æ ‘æä¾›æ¸…æ™°çš„è§„åˆ™è§£é‡Šï¼Œéšæœºæ£®æ—é€šè¿‡é›†æˆæå‡ç¨³å¥æ€§ã€‚ æœ¬æ•™ç¨‹å±•ç¤ºä»å•æ£µæ ‘åˆ°æ£®æ—æ¨¡å‹çš„å®Œæ•´è®­ç»ƒã€è°ƒå‚ä¸è§£é‡Šæµç¨‹ã€‚\né€‚åˆåœºæ™¯\n\nç‰¹å¾ä¸ç»“å±€ä¹‹é—´å­˜åœ¨éçº¿æ€§æˆ–äº¤äº’æ•ˆåº”\néœ€è¦å…¼é¡¾é¢„æµ‹æ•ˆæœä¸ä¸€å®šè§£é‡Šæ€§\nå˜é‡å°ºåº¦ä¸åŒä½†å¸Œæœ›å‡å°‘å¤æ‚é¢„å¤„ç†\n\nä¸é€‚åˆåœºæ™¯\n\né«˜ç»´ç¨€ç–æ–‡æœ¬æ•°æ®ï¼ˆéœ€æ›´é€‚é…çš„æ¨¡å‹ï¼‰\nè¦æ±‚å®Œæ•´å¯è§£é‡Šçš„çº¿æ€§å…³ç³»åœºæ™¯",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "éšæœºæ£®æ—ä¸å†³ç­–æ ‘"
    ]
  },
  {
    "objectID": "1080-random-forest.html#æ•°æ®å‡†å¤‡ä¸ä»»åŠ¡å®šä¹‰",
    "href": "1080-random-forest.html#æ•°æ®å‡†å¤‡ä¸ä»»åŠ¡å®šä¹‰",
    "title": "éšæœºæ£®æ—ä¸å†³ç­–æ ‘å®Œæ•´æ•™ç¨‹",
    "section": "æ•°æ®å‡†å¤‡ä¸ä»»åŠ¡å®šä¹‰",
    "text": "æ•°æ®å‡†å¤‡ä¸ä»»åŠ¡å®šä¹‰\nè¿™é‡Œç”¨ Iris æ•°æ®æ„é€ äºŒåˆ†ç±»ä»»åŠ¡ï¼šsetosa vs å…¶ä»–ç±»åˆ«ã€‚\n\nset.seed(2026)\niris_binary &lt;- iris |&gt;\n  mutate(target = if_else(Species == \"setosa\", \"setosa\", \"other\")) |&gt;\n  select(-Species) |&gt;\n  mutate(target = factor(target, levels = c(\"setosa\", \"other\")))\n\nsplit_obj &lt;- initial_split(iris_binary, prop = 0.7, strata = target)\ntrain_data &lt;- training(split_obj)\ntest_data &lt;- testing(split_obj)\n\n\nåŸºçº¿ï¼šå†³ç­–æ ‘æ¨¡å‹\n\ntree_model &lt;- rpart(\n  target ~ ., \n  data = train_data,\n  method = \"class\",\n  control = rpart.control(cp = 0.01)\n)\n\nrpart.plot(tree_model, type = 4, extra = 104)\n\n\n\n\n\n\n\n\n\ntree_prob &lt;- predict(tree_model, test_data, type = \"prob\")\ntree_pred &lt;- predict(tree_model, test_data, type = \"class\")\n\ntree_metrics &lt;- tibble(\n  truth = test_data$target,\n  .pred_setosa = tree_prob[, \"setosa\"],\n  .pred_class = tree_pred\n) |&gt;\n  summarise(\n    accuracy = yardstick::accuracy_vec(truth, .pred_class),\n    roc_auc = yardstick::roc_auc_vec(truth, .pred_setosa, event_level = \"first\")\n  )\n\ntree_metrics\n\n# A tibble: 1 Ã— 2\n  accuracy roc_auc\n     &lt;dbl&gt;   &lt;dbl&gt;\n1        1       1",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "éšæœºæ£®æ—ä¸å†³ç­–æ ‘"
    ]
  },
  {
    "objectID": "1080-random-forest.html#éšæœºæ£®æ—æ¨¡å‹",
    "href": "1080-random-forest.html#éšæœºæ£®æ—æ¨¡å‹",
    "title": "éšæœºæ£®æ—ä¸å†³ç­–æ ‘å®Œæ•´æ•™ç¨‹",
    "section": "éšæœºæ£®æ—æ¨¡å‹",
    "text": "éšæœºæ£®æ—æ¨¡å‹\n\nè®­ç»ƒåŸºç¡€éšæœºæ£®æ—\n\nset.seed(2026)\nrf_model &lt;- ranger(\n  target ~ .,\n  data = train_data,\n  num.trees = 500,\n  mtry = 2,\n  min.node.size = 3,\n  probability = TRUE,\n  importance = \"permutation\"\n)\n\néšæœºæ£®æ—å¯ç›´æ¥ä½¿ç”¨ OOBï¼ˆè¢‹å¤–ï¼‰è¯¯å·®ä½œä¸ºæ³›åŒ–è¯„ä¼°ï¼Œ åœ¨æ ·æœ¬é‡æœ‰é™æ—¶æ¯”å•ç‹¬åˆ’åˆ†éªŒè¯é›†æ›´ç¨³å®šã€‚\n\nrf_model$prediction.error\n\n[1] 5.129939e-05\n\n\n\nrf_prob &lt;- predict(rf_model, data = test_data)$predictions[, \"setosa\"]\nrf_pred &lt;- if_else(rf_prob &gt;= 0.5, \"setosa\", \"other\") |&gt; factor(levels = levels(test_data$target))\n\nrf_metrics &lt;- tibble(\n  truth = test_data$target,\n  .pred_setosa = rf_prob,\n  .pred_class = rf_pred\n) |&gt;\n  summarise(\n    accuracy = yardstick::accuracy_vec(truth, .pred_class),\n    roc_auc = yardstick::roc_auc_vec(truth, .pred_setosa, event_level = \"first\")\n  )\n\nrf_metrics\n\n# A tibble: 1 Ã— 2\n  accuracy roc_auc\n     &lt;dbl&gt;   &lt;dbl&gt;\n1        1       1",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "éšæœºæ£®æ—ä¸å†³ç­–æ ‘"
    ]
  },
  {
    "objectID": "1080-random-forest.html#æ¨¡å‹é€‰æ‹©ä¸å¯¹æ¯”",
    "href": "1080-random-forest.html#æ¨¡å‹é€‰æ‹©ä¸å¯¹æ¯”",
    "title": "éšæœºæ£®æ—ä¸å†³ç­–æ ‘å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹é€‰æ‹©ä¸å¯¹æ¯”",
    "text": "æ¨¡å‹é€‰æ‹©ä¸å¯¹æ¯”\nå¯¹æ¯”ç»“æœæ—¶ï¼Œæ ‘æ¨¡å‹å¼ºè°ƒå¯è§£é‡Šï¼Œéšæœºæ£®æ—å¼ºè°ƒæ³›åŒ–ã€‚\n\ncomparison &lt;- bind_rows(\n  tree_metrics |&gt; mutate(model = \"Decision Tree\"),\n  rf_metrics |&gt; mutate(model = \"Random Forest\")\n) |&gt;\n  select(model, accuracy, roc_auc)\n\ncomparison\n\n# A tibble: 2 Ã— 3\n  model         accuracy roc_auc\n  &lt;chr&gt;            &lt;dbl&gt;   &lt;dbl&gt;\n1 Decision Tree        1       1\n2 Random Forest        1       1",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "éšæœºæ£®æ—ä¸å†³ç­–æ ‘"
    ]
  },
  {
    "objectID": "1080-random-forest.html#è°ƒå‚æµç¨‹mtry-ä¸èŠ‚ç‚¹è§„æ¨¡",
    "href": "1080-random-forest.html#è°ƒå‚æµç¨‹mtry-ä¸èŠ‚ç‚¹è§„æ¨¡",
    "title": "éšæœºæ£®æ—ä¸å†³ç­–æ ‘å®Œæ•´æ•™ç¨‹",
    "section": "è°ƒå‚æµç¨‹ï¼šmtry ä¸èŠ‚ç‚¹è§„æ¨¡",
    "text": "è°ƒå‚æµç¨‹ï¼šmtry ä¸èŠ‚ç‚¹è§„æ¨¡\n\nset.seed(2026)\ntuning_grid &lt;- expand.grid(\n  mtry = c(1, 2, 3),\n  min.node.size = c(1, 3, 5)\n)\n\nresults &lt;- lapply(seq_len(nrow(tuning_grid)), function(i) {\n  params &lt;- tuning_grid[i, ]\n  model &lt;- ranger(\n    target ~ .,\n    data = train_data,\n    num.trees = 400,\n    mtry = params$mtry,\n    min.node.size = params$min.node.size,\n    probability = TRUE\n  )\n  pred_prob &lt;- predict(model, data = test_data)$predictions[, \"setosa\"]\n  pred_class &lt;- if_else(pred_prob &gt;= 0.5, \"setosa\", \"other\") |&gt; factor(levels = levels(test_data$target))\n\n  tibble(\n    mtry = params$mtry,\n    min_node = params$min.node.size,\n    accuracy = yardstick::accuracy_vec(test_data$target, pred_class),\n    roc_auc = yardstick::roc_auc_vec(test_data$target, pred_prob, event_level = \"first\")\n  )\n})\n\nbind_rows(results) |&gt;\n  arrange(desc(roc_auc))\n\n# A tibble: 9 Ã— 4\n   mtry min_node accuracy roc_auc\n  &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;\n1     1        1        1       1\n2     2        1        1       1\n3     3        1        1       1\n4     1        3        1       1\n5     2        3        1       1\n6     3        3        1       1\n7     1        5        1       1\n8     2        5        1       1\n9     3        5        1       1",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "éšæœºæ£®æ—ä¸å†³ç­–æ ‘"
    ]
  },
  {
    "objectID": "1080-random-forest.html#å¯è§£é‡Šæ€§ä¸å¯è§†åŒ–",
    "href": "1080-random-forest.html#å¯è§£é‡Šæ€§ä¸å¯è§†åŒ–",
    "title": "éšæœºæ£®æ—ä¸å†³ç­–æ ‘å®Œæ•´æ•™ç¨‹",
    "section": "å¯è§£é‡Šæ€§ä¸å¯è§†åŒ–",
    "text": "å¯è§£é‡Šæ€§ä¸å¯è§†åŒ–\n\n1. ç‰¹å¾é‡è¦æ€§\n\nimportance_df &lt;- tibble(\n  feature = names(rf_model$variable.importance),\n  importance = rf_model$variable.importance\n) |&gt;\n  arrange(desc(importance))\n\nimportance_df\n\n# A tibble: 4 Ã— 2\n  feature      importance\n  &lt;chr&gt;             &lt;dbl&gt;\n1 Petal.Length    0.221  \n2 Petal.Width     0.198  \n3 Sepal.Length    0.00984\n4 Sepal.Width     0.00621\n\n\n\nggplot(importance_df, aes(x = reorder(feature, importance), y = importance)) +\n  geom_col(fill = \"#4f46e5\", alpha = 0.85) +\n  coord_flip() +\n  labs(\n    title = \"éšæœºæ£®æ—ç‰¹å¾é‡è¦æ€§\",\n    x = NULL,\n    y = \"Permutation Importance\"\n  ) +\n  theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\n\n\n2. å†³ç­–æ ‘è§„åˆ™è§£é‡Š\nå•æ£µæ ‘å¯ç›´æ¥ç»™å‡ºæ¸…æ™°çš„â€œå¦‚æœ-é‚£ä¹ˆâ€è§„åˆ™ï¼Œé€‚åˆå¯¹ä¸šåŠ¡æ–¹è§£é‡Šã€‚ éšæœºæ£®æ—é€‚åˆæå‡é¢„æµ‹ï¼Œä½†éœ€è¦ç”¨ç‰¹å¾é‡è¦æ€§æˆ–å±€éƒ¨è§£é‡Šè¡¥å……è¯´æ˜ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "éšæœºæ£®æ—ä¸å†³ç­–æ ‘"
    ]
  },
  {
    "objectID": "1080-random-forest.html#å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "href": "1080-random-forest.html#å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "title": "éšæœºæ£®æ—ä¸å†³ç­–æ ‘å®Œæ•´æ•™ç¨‹",
    "section": "å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "text": "å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–\n\nå¿½è§†ç±»åˆ«ä¸å¹³è¡¡ï¼šåº”è€ƒè™‘åˆ†å±‚æŠ½æ ·ã€è°ƒæ•´é˜ˆå€¼æˆ–è®¾ç½® class weightsã€‚\næ ‘å¤ªæ·±ï¼šä¼šè¿‡æ‹Ÿåˆï¼Œéœ€æ§åˆ¶ min.node.size æˆ–æ ‘æ·±åº¦ã€‚\nç›²ç›®è¿½æ±‚é«˜ç²¾åº¦ï¼šç»“åˆå¯è§£é‡Šæ€§ä¸ä¸šåŠ¡æˆæœ¬ã€‚\nåªçœ‹ç‰¹å¾é‡è¦æ€§ï¼šé‡è¦æ€§ä¸ç­‰äºå› æœï¼Œéœ€è¦ç»“åˆé¢†åŸŸçŸ¥è¯†ã€‚\næœªè®¾ç½®éšæœºç§å­ï¼šç»“æœä¸å¯å¤ç°ã€‚\nå¿½ç•¥ OOB è¯¯å·®ï¼šOOB å¯ç”¨æ¥å¿«é€Ÿè¯Šæ–­æ¨¡å‹æ˜¯å¦è¿‡æ‹Ÿåˆã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "éšæœºæ£®æ—ä¸å†³ç­–æ ‘"
    ]
  },
  {
    "objectID": "1080-random-forest.html#éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "href": "1080-random-forest.html#éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "title": "éšæœºæ£®æ—ä¸å†³ç­–æ ‘å®Œæ•´æ•™ç¨‹",
    "section": "éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "text": "éƒ¨ç½²ä¸å¤ç°å»ºè®®\n\nmodel_path &lt;- \"models/rf-iris.rds\"\nif (!dir.exists(\"models\")) dir.create(\"models\")\nsaveRDS(rf_model, model_path)\n\nloaded_model &lt;- readRDS(model_path)\nall.equal(rf_model$forest$num.trees, loaded_model$forest$num.trees)\n\n[1] TRUE\n\n\n\nif (file.exists(\"models/rf-iris.rds\")) {\n  file.remove(\"models/rf-iris.rds\")\n}\n\n[1] TRUE\n\nif (dir.exists(\"models\")) {\n  unlink(\"models\", recursive = TRUE)\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "éšæœºæ£®æ—ä¸å†³ç­–æ ‘"
    ]
  },
  {
    "objectID": "1080-random-forest.html#æ€»ç»“",
    "href": "1080-random-forest.html#æ€»ç»“",
    "title": "éšæœºæ£®æ—ä¸å†³ç­–æ ‘å®Œæ•´æ•™ç¨‹",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nå†³ç­–æ ‘é€‚åˆå¿«é€Ÿè§£é‡Šä¸æ²Ÿé€šï¼Œéšæœºæ£®æ—é€‚åˆè¿½æ±‚ç¨³å¥çš„é¢„æµ‹è¡¨ç°ã€‚ åœ¨å®é™…å·¥ä½œä¸­ï¼Œå¯ä»¥å…ˆç”¨æ ‘æ¨¡å‹å»ºç«‹åŸºçº¿ï¼Œå†ç”¨éšæœºæ£®æ—æå‡æ•ˆæœã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "éšæœºæ£®æ—ä¸å†³ç­–æ ‘"
    ]
  },
  {
    "objectID": "1081-svm.html",
    "href": "1081-svm.html",
    "title": "æ”¯æŒå‘é‡æœº SVM å®Œæ•´æ•™ç¨‹",
    "section": "",
    "text": "library(dplyr)\nlibrary(ggplot2)\nlibrary(rsample)\nlibrary(yardstick)\nlibrary(e1071)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æ”¯æŒå‘é‡æœº (SVM)"
    ]
  },
  {
    "objectID": "1081-svm.html#æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "href": "1081-svm.html#æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "title": "æ”¯æŒå‘é‡æœº SVM å®Œæ•´æ•™ç¨‹",
    "section": "æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "text": "æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯\nSVM é€šè¿‡æœ€å¤§åŒ–é—´éš”æå‡åˆ†ç±»æ•ˆæœï¼Œé€‚åˆä¸­å°è§„æ¨¡ã€è¾¹ç•Œæ¸…æ™°çš„æ•°æ®ã€‚ æœ¬æ•™ç¨‹è¦†ç›–çº¿æ€§ SVM ä¸ RBF æ ¸ SVM çš„å®Œæ•´è®­ç»ƒæµç¨‹ã€‚\né€‚åˆåœºæ™¯\n\nç‰¹å¾ç»´åº¦ä¸­ç­‰ã€æ ·æœ¬é‡ä¸­ç­‰çš„åˆ†ç±»é—®é¢˜\néœ€è¦ç¨³å¥åˆ†ç±»è¾¹ç•Œä¸è‰¯å¥½æ³›åŒ–\n\nä¸é€‚åˆåœºæ™¯\n\nè¶…å¤§è§„æ¨¡æ•°æ®ï¼ˆè®­ç»ƒå¼€é”€é«˜ï¼‰\né«˜å™ªå£°æˆ–ç±»åˆ«æåº¦ä¸å¹³è¡¡çš„åœºæ™¯ï¼ˆéœ€é¢å¤–å¤„ç†ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æ”¯æŒå‘é‡æœº (SVM)"
    ]
  },
  {
    "objectID": "1081-svm.html#æ•°æ®å‡†å¤‡ä¸æ ‡å‡†åŒ–",
    "href": "1081-svm.html#æ•°æ®å‡†å¤‡ä¸æ ‡å‡†åŒ–",
    "title": "æ”¯æŒå‘é‡æœº SVM å®Œæ•´æ•™ç¨‹",
    "section": "æ•°æ®å‡†å¤‡ä¸æ ‡å‡†åŒ–",
    "text": "æ•°æ®å‡†å¤‡ä¸æ ‡å‡†åŒ–\n\nset.seed(2026)\niris_binary &lt;- iris |&gt;\n  mutate(target = if_else(Species == \"setosa\", \"setosa\", \"other\")) |&gt;\n  select(-Species) |&gt;\n  mutate(target = factor(target, levels = c(\"setosa\", \"other\")))\n\nsplit_obj &lt;- initial_split(iris_binary, prop = 0.7, strata = target)\ntrain_data &lt;- training(split_obj)\ntest_data &lt;- testing(split_obj)\n\ntrain_x &lt;- scale(select(train_data, -target))\ntest_x &lt;- scale(select(test_data, -target), center = attr(train_x, \"scaled:center\"),\n  scale = attr(train_x, \"scaled:scale\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æ”¯æŒå‘é‡æœº (SVM)"
    ]
  },
  {
    "objectID": "1081-svm.html#æœ€å°å¯è¿è¡Œç¤ºä¾‹çº¿æ€§-svm",
    "href": "1081-svm.html#æœ€å°å¯è¿è¡Œç¤ºä¾‹çº¿æ€§-svm",
    "title": "æ”¯æŒå‘é‡æœº SVM å®Œæ•´æ•™ç¨‹",
    "section": "æœ€å°å¯è¿è¡Œç¤ºä¾‹ï¼šçº¿æ€§ SVM",
    "text": "æœ€å°å¯è¿è¡Œç¤ºä¾‹ï¼šçº¿æ€§ SVM\n\nsvm_linear &lt;- svm(\n  x = train_x,\n  y = train_data$target,\n  kernel = \"linear\",\n  cost = 1,\n  probability = TRUE\n)\n\nsvm_linear\n\n\nCall:\nsvm.default(x = train_x, y = train_data$target, kernel = \"linear\", \n    cost = 1, probability = TRUE)\n\n\nParameters:\n   SVM-Type:  C-classification \n SVM-Kernel:  linear \n       cost:  1 \n\nNumber of Support Vectors:  3\n\n\n\nlinear_pred &lt;- predict(svm_linear, test_x, probability = TRUE)\nlinear_prob &lt;- attr(linear_pred, \"probabilities\")[, \"setosa\"]\n\nlinear_metrics &lt;- tibble(\n  truth = test_data$target,\n  .pred_setosa = linear_prob,\n  .pred_class = linear_pred\n) |&gt;\n  summarise(\n    accuracy = yardstick::accuracy_vec(truth, .pred_class),\n    roc_auc = yardstick::roc_auc_vec(truth, .pred_setosa, event_level = \"first\")\n  )\n\nlinear_metrics\n\n# A tibble: 1 Ã— 2\n  accuracy roc_auc\n     &lt;dbl&gt;   &lt;dbl&gt;\n1        1       1",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æ”¯æŒå‘é‡æœº (SVM)"
    ]
  },
  {
    "objectID": "1081-svm.html#è¿›é˜¶ç¤ºä¾‹rbf-æ ¸ä¸è°ƒå‚",
    "href": "1081-svm.html#è¿›é˜¶ç¤ºä¾‹rbf-æ ¸ä¸è°ƒå‚",
    "title": "æ”¯æŒå‘é‡æœº SVM å®Œæ•´æ•™ç¨‹",
    "section": "è¿›é˜¶ç¤ºä¾‹ï¼šRBF æ ¸ä¸è°ƒå‚",
    "text": "è¿›é˜¶ç¤ºä¾‹ï¼šRBF æ ¸ä¸è°ƒå‚\nRBF æ ¸å¯ä»¥å¤„ç†éçº¿æ€§è¾¹ç•Œï¼Œéœ€è¦è°ƒèŠ‚ cost ä¸ gammaã€‚\n\nset.seed(2026)\ntuned &lt;- tune(\n  svm,\n  train.x = train_x,\n  train.y = train_data$target,\n  kernel = \"radial\",\n  ranges = list(cost = 2 ^ (-1:2), gamma = 2 ^ (-2:1))\n)\n\nbest_params &lt;- tuned$best.parameters\nbest_params\n\n  cost gamma\n1  0.5  0.25\n\n\n\nsvm_rbf &lt;- svm(\n  x = train_x,\n  y = train_data$target,\n  kernel = \"radial\",\n  cost = best_params$cost,\n  gamma = best_params$gamma,\n  probability = TRUE\n)\n\nrbf_pred &lt;- predict(svm_rbf, test_x, probability = TRUE)\nrbf_prob &lt;- attr(rbf_pred, \"probabilities\")[, \"setosa\"]\n\nrbf_metrics &lt;- tibble(\n  truth = test_data$target,\n  .pred_setosa = rbf_prob,\n  .pred_class = rbf_pred\n) |&gt;\n  summarise(\n    accuracy = yardstick::accuracy_vec(truth, .pred_class),\n    roc_auc = yardstick::roc_auc_vec(truth, .pred_setosa, event_level = \"first\")\n  )\n\nrbf_metrics\n\n# A tibble: 1 Ã— 2\n  accuracy roc_auc\n     &lt;dbl&gt;   &lt;dbl&gt;\n1    0.978       1",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æ”¯æŒå‘é‡æœº (SVM)"
    ]
  },
  {
    "objectID": "1081-svm.html#æ¨¡å‹å¯¹æ¯”",
    "href": "1081-svm.html#æ¨¡å‹å¯¹æ¯”",
    "title": "æ”¯æŒå‘é‡æœº SVM å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹å¯¹æ¯”",
    "text": "æ¨¡å‹å¯¹æ¯”\n\ncomparison &lt;- bind_rows(\n  linear_metrics |&gt; mutate(model = \"Linear SVM\"),\n  rbf_metrics |&gt; mutate(model = \"RBF SVM\")\n) |&gt;\n  select(model, accuracy, roc_auc)\n\ncomparison\n\n# A tibble: 2 Ã— 3\n  model      accuracy roc_auc\n  &lt;chr&gt;         &lt;dbl&gt;   &lt;dbl&gt;\n1 Linear SVM    1           1\n2 RBF SVM       0.978       1\n\n\nè‹¥éœ€è¦å¯è§£é‡Šçš„æ¦‚ç‡è¾“å‡ºï¼Œå¯å¯¹ SVM è¿›è¡Œæ¦‚ç‡æ ¡å‡†ï¼ˆå¦‚ Platt scalingï¼‰ï¼Œ å¹¶åœ¨éªŒè¯é›†ä¸Šæ£€æŸ¥æ ¡å‡†æ›²çº¿ï¼Œé¿å…ç›´æ¥æŠŠåŸå§‹æ¦‚ç‡å½“ä½œçœŸå®æ¦‚ç‡ä½¿ç”¨ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æ”¯æŒå‘é‡æœº (SVM)"
    ]
  },
  {
    "objectID": "1081-svm.html#å¯è§£é‡Šæ€§çº¿æ€§-svm-æƒé‡",
    "href": "1081-svm.html#å¯è§£é‡Šæ€§çº¿æ€§-svm-æƒé‡",
    "title": "æ”¯æŒå‘é‡æœº SVM å®Œæ•´æ•™ç¨‹",
    "section": "å¯è§£é‡Šæ€§ï¼šçº¿æ€§ SVM æƒé‡",
    "text": "å¯è§£é‡Šæ€§ï¼šçº¿æ€§ SVM æƒé‡\nçº¿æ€§ SVM çš„æƒé‡åæ˜ å˜é‡å¯¹åˆ†ç±»è¾¹ç•Œçš„è´¡çŒ®ã€‚\n\nweights &lt;- t(svm_linear$coefs) %*% svm_linear$SV\nweight_df &lt;- tibble(\n  feature = colnames(train_x),\n  weight = as.vector(weights)\n) |&gt;\n  mutate(abs_weight = abs(weight)) |&gt;\n  arrange(desc(abs_weight))\n\nweight_df\n\n# A tibble: 4 Ã— 3\n  feature      weight abs_weight\n  &lt;chr&gt;         &lt;dbl&gt;      &lt;dbl&gt;\n1 Petal.Width   0.766      0.766\n2 Petal.Length  0.555      0.555\n3 Sepal.Width  -0.514      0.514\n4 Sepal.Length  0.212      0.212\n\n\n\nggplot(weight_df, aes(x = reorder(feature, abs_weight), y = weight)) +\n  geom_col(fill = \"#4f46e5\", alpha = 0.85) +\n  coord_flip() +\n  labs(\n    title = \"çº¿æ€§ SVM æƒé‡\",\n    x = NULL,\n    y = \"æƒé‡ï¼ˆæ­£è´Ÿæ–¹å‘ï¼‰\"\n  ) +\n  theme_minimal(base_size = 12)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æ”¯æŒå‘é‡æœº (SVM)"
    ]
  },
  {
    "objectID": "1081-svm.html#å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "href": "1081-svm.html#å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "title": "æ”¯æŒå‘é‡æœº SVM å®Œæ•´æ•™ç¨‹",
    "section": "å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "text": "å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–\n\nå¿½è§†æ ‡å‡†åŒ–ï¼šSVM å¯¹å°ºåº¦æ•æ„Ÿï¼Œå¿…é¡»æ ‡å‡†åŒ–ã€‚\nè°ƒå‚èŒƒå›´è¿‡çª„ï¼šcost ä¸ gamma éœ€åœ¨å¯¹æ•°å°ºåº¦æœç´¢ã€‚\nè¿‡æ‹Ÿåˆæ ¸å‡½æ•°ï¼šRBF å®¹æ˜“è¿‡æ‹Ÿåˆï¼Œéœ€äº¤å‰éªŒè¯ã€‚\nç±»åˆ«ä¸å¹³è¡¡ï¼šå¯ä»¥ä½¿ç”¨ class.weights æˆ–è°ƒæ•´é˜ˆå€¼ã€‚\nè¯¯è§£æƒé‡è§£é‡Šï¼šçº¿æ€§ SVM æƒé‡ä»£è¡¨çº¿æ€§è¾¹ç•Œæ–¹å‘ï¼Œä¸ç­‰åŒå› æœã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æ”¯æŒå‘é‡æœº (SVM)"
    ]
  },
  {
    "objectID": "1081-svm.html#éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "href": "1081-svm.html#éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "title": "æ”¯æŒå‘é‡æœº SVM å®Œæ•´æ•™ç¨‹",
    "section": "éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "text": "éƒ¨ç½²ä¸å¤ç°å»ºè®®\n\nmodel_path &lt;- \"models/svm-rbf.rds\"\nif (!dir.exists(\"models\")) dir.create(\"models\")\nsaveRDS(svm_rbf, model_path)\n\nloaded_model &lt;- readRDS(model_path)\nall.equal(loaded_model$kernel, svm_rbf$kernel)\n\n[1] TRUE\n\n\n\nif (file.exists(\"models/svm-rbf.rds\")) {\n  file.remove(\"models/svm-rbf.rds\")\n}\n\n[1] TRUE\n\nif (dir.exists(\"models\")) {\n  unlink(\"models\", recursive = TRUE)\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æ”¯æŒå‘é‡æœº (SVM)"
    ]
  },
  {
    "objectID": "1081-svm.html#æ€»ç»“",
    "href": "1081-svm.html#æ€»ç»“",
    "title": "æ”¯æŒå‘é‡æœº SVM å®Œæ•´æ•™ç¨‹",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nçº¿æ€§ SVM è§£é‡Šæ€§å¼ºï¼ŒRBF æ ¸é€‚åˆéçº¿æ€§è¾¹ç•Œã€‚ åˆç†çš„æ ‡å‡†åŒ–ä¸è°ƒå‚æ˜¯ SVM è¡¨ç°çš„å…³é”®ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æ”¯æŒå‘é‡æœº (SVM)"
    ]
  },
  {
    "objectID": "1082-ensemble-learning.html",
    "href": "1082-ensemble-learning.html",
    "title": "é›†æˆå­¦ä¹ å®Œæ•´æ•™ç¨‹",
    "section": "",
    "text": "library(dplyr)\nlibrary(ggplot2)\nlibrary(rsample)\nlibrary(recipes)\nlibrary(parsnip)\nlibrary(workflows)\nlibrary(tune)\nlibrary(yardstick)\nlibrary(stacks)\nlibrary(baguette)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é›†æˆå­¦ä¹  (Bagging/Stacking)"
    ]
  },
  {
    "objectID": "1082-ensemble-learning.html#æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "href": "1082-ensemble-learning.html#æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "title": "é›†æˆå­¦ä¹ å®Œæ•´æ•™ç¨‹",
    "section": "æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "text": "æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯\né›†æˆå­¦ä¹ é€šè¿‡ç»„åˆå¤šä¸ªæ¨¡å‹æå‡æ€§èƒ½ï¼Œå¸¸è§æ–¹å¼åŒ…æ‹¬ Baggingã€Boosting ä¸ Stackingã€‚ æœ¬æ•™ç¨‹ä½¿ç”¨ tidymodels å±•ç¤ºå®Œæ•´çš„å»ºæ¨¡ã€è°ƒå‚ä¸è¯„ä¼°æµç¨‹ã€‚\né€‚åˆåœºæ™¯\n\nå•ä¸€æ¨¡å‹è¡¨ç°ä¸ç¨³å®šæˆ–æ–¹å·®åå¤§\néœ€è¦åœ¨ä¸ç‰ºç‰²å¤ªå¤šè§£é‡Šæ€§çš„æƒ…å†µä¸‹æå‡æ€§èƒ½\n\nä¸é€‚åˆåœºæ™¯\n\næ•°æ®é‡æå°ä¸”ä¸å¯äº¤å‰éªŒè¯\néœ€è¦ä¸¥æ ¼å¯è§£é‡Šçš„å•ä¸€æ¨¡å‹ç»“è®º",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é›†æˆå­¦ä¹  (Bagging/Stacking)"
    ]
  },
  {
    "objectID": "1082-ensemble-learning.html#æ•°æ®å‡†å¤‡",
    "href": "1082-ensemble-learning.html#æ•°æ®å‡†å¤‡",
    "title": "é›†æˆå­¦ä¹ å®Œæ•´æ•™ç¨‹",
    "section": "æ•°æ®å‡†å¤‡",
    "text": "æ•°æ®å‡†å¤‡\n\nset.seed(2026)\niris_binary &lt;- iris |&gt;\n  mutate(target = if_else(Species == \"setosa\", \"setosa\", \"other\")) |&gt;\n  select(-Species) |&gt;\n  mutate(target = factor(target, levels = c(\"setosa\", \"other\")))\n\nsplit_obj &lt;- initial_split(iris_binary, prop = 0.75, strata = target)\ntrain_data &lt;- training(split_obj)\ntest_data &lt;- testing(split_obj)\n\nml_recipe &lt;- recipe(target ~ ., data = train_data)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é›†æˆå­¦ä¹  (Bagging/Stacking)"
    ]
  },
  {
    "objectID": "1082-ensemble-learning.html#åŸºçº¿æ¨¡å‹å•æ£µå†³ç­–æ ‘",
    "href": "1082-ensemble-learning.html#åŸºçº¿æ¨¡å‹å•æ£µå†³ç­–æ ‘",
    "title": "é›†æˆå­¦ä¹ å®Œæ•´æ•™ç¨‹",
    "section": "åŸºçº¿æ¨¡å‹ï¼šå•æ£µå†³ç­–æ ‘",
    "text": "åŸºçº¿æ¨¡å‹ï¼šå•æ£µå†³ç­–æ ‘\n\nbase_tree &lt;- decision_tree(mode = \"classification\", tree_depth = 3) |&gt;\n  set_engine(\"rpart\")\n\nbase_workflow &lt;- workflow() |&gt;\n  add_recipe(ml_recipe) |&gt;\n  add_model(base_tree)\n\nbase_fit &lt;- fit(base_workflow, data = train_data)\n\nbase_pred &lt;- predict(base_fit, test_data, type = \"prob\") |&gt;\n  bind_cols(predict(base_fit, test_data)) |&gt;\n  bind_cols(test_data)\n\nbase_pred &lt;- base_pred |&gt;\n  mutate(\n    .pred_setosa = .pred_setosa,\n    .pred_class = factor(.pred_class, levels = levels(target))\n  )\n\nbase_metrics &lt;- base_pred |&gt;\n  summarise(\n    accuracy = yardstick::accuracy_vec(target, .pred_class),\n    roc_auc = yardstick::roc_auc_vec(target, .pred_setosa, event_level = \"first\")\n  )\n\nbase_metrics\n\n# A tibble: 1 Ã— 2\n  accuracy roc_auc\n     &lt;dbl&gt;   &lt;dbl&gt;\n1        1       1",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é›†æˆå­¦ä¹  (Bagging/Stacking)"
    ]
  },
  {
    "objectID": "1082-ensemble-learning.html#baggingé™ä½æ–¹å·®",
    "href": "1082-ensemble-learning.html#baggingé™ä½æ–¹å·®",
    "title": "é›†æˆå­¦ä¹ å®Œæ•´æ•™ç¨‹",
    "section": "Baggingï¼šé™ä½æ–¹å·®",
    "text": "Baggingï¼šé™ä½æ–¹å·®\n\nbag_model &lt;- bag_tree(mode = \"classification\") |&gt;\n  set_engine(\"rpart\", times = 100)\n\nbag_workflow &lt;- workflow() |&gt;\n  add_recipe(ml_recipe) |&gt;\n  add_model(bag_model)\n\nbag_fit &lt;- fit(bag_workflow, data = train_data)\n\nbag_pred &lt;- predict(bag_fit, test_data, type = \"prob\") |&gt;\n  bind_cols(predict(bag_fit, test_data)) |&gt;\n  bind_cols(test_data)\n\nbag_pred &lt;- bag_pred |&gt;\n  mutate(\n    .pred_setosa = .pred_setosa,\n    .pred_class = factor(.pred_class, levels = levels(target))\n  )\n\nbag_metrics &lt;- bag_pred |&gt;\n  summarise(\n    accuracy = yardstick::accuracy_vec(target, .pred_class),\n    roc_auc = yardstick::roc_auc_vec(target, .pred_setosa, event_level = \"first\")\n  )\n\nbag_metrics\n\n# A tibble: 1 Ã— 2\n  accuracy roc_auc\n     &lt;dbl&gt;   &lt;dbl&gt;\n1        1       1",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é›†æˆå­¦ä¹  (Bagging/Stacking)"
    ]
  },
  {
    "objectID": "1082-ensemble-learning.html#boostingé™ä½åå·®",
    "href": "1082-ensemble-learning.html#boostingé™ä½åå·®",
    "title": "é›†æˆå­¦ä¹ å®Œæ•´æ•™ç¨‹",
    "section": "Boostingï¼šé™ä½åå·®",
    "text": "Boostingï¼šé™ä½åå·®\n\nboost_model &lt;- boost_tree(\n  mode = \"classification\",\n  trees = 200,\n  tree_depth = 3,\n  learn_rate = 0.1\n) |&gt;\n  set_engine(\"xgboost\")\n\nboost_workflow &lt;- workflow() |&gt;\n  add_recipe(ml_recipe) |&gt;\n  add_model(boost_model)\n\nboost_fit &lt;- fit(boost_workflow, data = train_data)\n\nboost_pred &lt;- predict(boost_fit, test_data, type = \"prob\") |&gt;\n  bind_cols(predict(boost_fit, test_data)) |&gt;\n  bind_cols(test_data)\n\nboost_pred &lt;- boost_pred |&gt;\n  mutate(\n    .pred_setosa = .pred_setosa,\n    .pred_class = factor(.pred_class, levels = levels(target))\n  )\n\nboost_metrics &lt;- boost_pred |&gt;\n  summarise(\n    accuracy = yardstick::accuracy_vec(target, .pred_class),\n    roc_auc = yardstick::roc_auc_vec(target, .pred_setosa, event_level = \"first\")\n  )\n\nboost_metrics\n\n# A tibble: 1 Ã— 2\n  accuracy roc_auc\n     &lt;dbl&gt;   &lt;dbl&gt;\n1        1       1",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é›†æˆå­¦ä¹  (Bagging/Stacking)"
    ]
  },
  {
    "objectID": "1082-ensemble-learning.html#è®­ç»ƒä¸è°ƒå‚äº¤å‰éªŒè¯ç¤ºä¾‹",
    "href": "1082-ensemble-learning.html#è®­ç»ƒä¸è°ƒå‚äº¤å‰éªŒè¯ç¤ºä¾‹",
    "title": "é›†æˆå­¦ä¹ å®Œæ•´æ•™ç¨‹",
    "section": "è®­ç»ƒä¸è°ƒå‚ï¼šäº¤å‰éªŒè¯ç¤ºä¾‹",
    "text": "è®­ç»ƒä¸è°ƒå‚ï¼šäº¤å‰éªŒè¯ç¤ºä¾‹\n\nset.seed(2026)\nfolds &lt;- vfold_cv(train_data, v = 5, strata = target)\n\nbag_tune &lt;- bag_tree(\n  mode = \"classification\",\n  tree_depth = tune(),\n  min_n = tune()\n) |&gt;\n  set_engine(\"rpart\", times = 80)\n\nboost_tune &lt;- boost_tree(\n  mode = \"classification\",\n  trees = 200,\n  tree_depth = tune(),\n  learn_rate = tune()\n) |&gt;\n  set_engine(\"xgboost\")\n\nbag_wf &lt;- workflow() |&gt;\n  add_recipe(ml_recipe) |&gt;\n  add_model(bag_tune)\n\nboost_wf &lt;- workflow() |&gt;\n  add_recipe(ml_recipe) |&gt;\n  add_model(boost_tune)\n\nbag_res &lt;- tune_grid(\n  bag_wf,\n  resamples = folds,\n  grid = 4,\n  metrics = metric_set(accuracy, roc_auc),\n  control = control_stack_grid()\n)\n\nboost_res &lt;- tune_grid(\n  boost_wf,\n  resamples = folds,\n  grid = 4,\n  metrics = metric_set(accuracy, roc_auc),\n  control = control_stack_grid()\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é›†æˆå­¦ä¹  (Bagging/Stacking)"
    ]
  },
  {
    "objectID": "1082-ensemble-learning.html#stackingç»„åˆå¤šä¸ªæ¨¡å‹",
    "href": "1082-ensemble-learning.html#stackingç»„åˆå¤šä¸ªæ¨¡å‹",
    "title": "é›†æˆå­¦ä¹ å®Œæ•´æ•™ç¨‹",
    "section": "Stackingï¼šç»„åˆå¤šä¸ªæ¨¡å‹",
    "text": "Stackingï¼šç»„åˆå¤šä¸ªæ¨¡å‹\n\nstacked_model &lt;- stacks() |&gt;\n  add_candidates(bag_res) |&gt;\n  add_candidates(boost_res) |&gt;\n  blend_predictions(metric = metric_set(accuracy)) |&gt;\n  fit_members()\n\nstack_pred &lt;- predict(stacked_model, test_data, type = \"prob\") |&gt;\n  bind_cols(predict(stacked_model, test_data)) |&gt;\n  bind_cols(test_data)\n\nstack_pred &lt;- stack_pred |&gt;\n  mutate(\n    .pred_setosa = .pred_setosa,\n    .pred_class = factor(.pred_class, levels = levels(target))\n  )\n\nstack_metrics &lt;- stack_pred |&gt;\n  summarise(\n    accuracy = yardstick::accuracy_vec(target, .pred_class),\n    roc_auc = yardstick::roc_auc_vec(target, .pred_setosa, event_level = \"first\")\n  )\n\nstack_metrics\n\n# A tibble: 1 Ã— 2\n  accuracy roc_auc\n     &lt;dbl&gt;   &lt;dbl&gt;\n1        1       1",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é›†æˆå­¦ä¹  (Bagging/Stacking)"
    ]
  },
  {
    "objectID": "1082-ensemble-learning.html#ç»“æœå¯¹æ¯”",
    "href": "1082-ensemble-learning.html#ç»“æœå¯¹æ¯”",
    "title": "é›†æˆå­¦ä¹ å®Œæ•´æ•™ç¨‹",
    "section": "ç»“æœå¯¹æ¯”",
    "text": "ç»“æœå¯¹æ¯”\n\ncomparison &lt;- bind_rows(\n  base_metrics |&gt; mutate(model = \"Decision Tree\"),\n  bag_metrics |&gt; mutate(model = \"Bagging\"),\n  boost_metrics |&gt; mutate(model = \"Boosting\"),\n  stack_metrics |&gt; mutate(model = \"Stacking\")\n) |&gt;\n  select(model, accuracy, roc_auc)\n\ncomparison\n\n# A tibble: 4 Ã— 3\n  model         accuracy roc_auc\n  &lt;chr&gt;            &lt;dbl&gt;   &lt;dbl&gt;\n1 Decision Tree        1       1\n2 Bagging              1       1\n3 Boosting             1       1\n4 Stacking             1       1",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é›†æˆå­¦ä¹  (Bagging/Stacking)"
    ]
  },
  {
    "objectID": "1082-ensemble-learning.html#å¯è§£é‡Šæ€§ä¸å¯è§†åŒ–",
    "href": "1082-ensemble-learning.html#å¯è§£é‡Šæ€§ä¸å¯è§†åŒ–",
    "title": "é›†æˆå­¦ä¹ å®Œæ•´æ•™ç¨‹",
    "section": "å¯è§£é‡Šæ€§ä¸å¯è§†åŒ–",
    "text": "å¯è§£é‡Šæ€§ä¸å¯è§†åŒ–\n\nBagging å¯æŸ¥çœ‹å•æ£µæ ‘æˆ–å¹³å‡ç‰¹å¾é‡è¦æ€§ã€‚\nBoosting å¯è¾“å‡ºç‰¹å¾é‡è¦æ€§ä¸ SHAPï¼ˆxgboost æ”¯æŒï¼‰ã€‚\nStacking é€šè¿‡å…ƒå­¦ä¹ å™¨èåˆï¼Œéœ€è¦è§£é‡Šæ¯ä¸ªåŸºæ¨¡å‹è´¡çŒ®ã€‚ åŒæ—¶è¦ç¡®ä¿ä½¿ç”¨äº¤å‰éªŒè¯ç”ŸæˆäºŒå±‚ç‰¹å¾ï¼Œé¿å…è®­ç»ƒé›†æ³„éœ²å¯¼è‡´è¿‡æ‹Ÿåˆã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é›†æˆå­¦ä¹  (Bagging/Stacking)"
    ]
  },
  {
    "objectID": "1082-ensemble-learning.html#å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "href": "1082-ensemble-learning.html#å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "title": "é›†æˆå­¦ä¹ å®Œæ•´æ•™ç¨‹",
    "section": "å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "text": "å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–\n\nå¼±æ¨¡å‹è¿‡å¼ºï¼šåŸºæ¨¡å‹è¿‡æ‹Ÿåˆä¼šé™ä½é›†æˆæ”¶ç›Šã€‚\nå¿½è§†é‡é‡‡æ ·ï¼šBagging éœ€è¦éšæœºæ€§ï¼Œé¿å…ä½¿ç”¨å®Œå…¨ç›¸åŒæ•°æ®ã€‚\næ¨¡å‹ç›¸å…³æ€§è¿‡é«˜ï¼šStacking éœ€è¦å·®å¼‚åŒ–æ¨¡å‹ç»„åˆã€‚\nè°ƒå‚ç½‘æ ¼è¿‡å°ï¼šå®¹æ˜“é”™è¿‡æœ€ä¼˜é…ç½®ã€‚\næœªåŒºåˆ†åå·®/æ–¹å·®é—®é¢˜ï¼šé”™è¯¯é€‰æ‹©é›†æˆæ–¹å¼ä¼šæµªè´¹ç®—åŠ›ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é›†æˆå­¦ä¹  (Bagging/Stacking)"
    ]
  },
  {
    "objectID": "1082-ensemble-learning.html#éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "href": "1082-ensemble-learning.html#éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "title": "é›†æˆå­¦ä¹ å®Œæ•´æ•™ç¨‹",
    "section": "éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "text": "éƒ¨ç½²ä¸å¤ç°å»ºè®®\n\nmodel_path &lt;- \"models/stacked-ensemble.rds\"\nif (!dir.exists(\"models\")) dir.create(\"models\")\nsaveRDS(stacked_model, model_path)\n\nloaded_model &lt;- readRDS(model_path)\nall.equal(names(loaded_model$coefs), names(stacked_model$coefs))\n\n[1] TRUE\n\n\n\nif (file.exists(\"models/stacked-ensemble.rds\")) {\n  file.remove(\"models/stacked-ensemble.rds\")\n}\n\n[1] TRUE\n\nif (dir.exists(\"models\")) {\n  unlink(\"models\", recursive = TRUE)\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é›†æˆå­¦ä¹  (Bagging/Stacking)"
    ]
  },
  {
    "objectID": "1082-ensemble-learning.html#æ€»ç»“",
    "href": "1082-ensemble-learning.html#æ€»ç»“",
    "title": "é›†æˆå­¦ä¹ å®Œæ•´æ•™ç¨‹",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nBagging é€‚åˆé™ä½æ–¹å·®ï¼ŒBoosting é€‚åˆé™ä½åå·®ï¼ŒStacking é€‚åˆæ•´åˆä¼˜åŠ¿ã€‚ åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå»ºè®®å…ˆå»ºç«‹å•æ¨¡å‹åŸºçº¿ï¼Œå†é€æ­¥å¼•å…¥é›†æˆç­–ç•¥ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é›†æˆå­¦ä¹  (Bagging/Stacking)"
    ]
  },
  {
    "objectID": "1083-dimensionality-reduction.html",
    "href": "1083-dimensionality-reduction.html",
    "title": "é™ç»´æ–¹æ³•å®Œæ•´æ•™ç¨‹",
    "section": "",
    "text": "library(dplyr)\nlibrary(ggplot2)\nlibrary(tidyr)\nlibrary(cluster)\nlibrary(Rtsne)\nlibrary(uwot)\nlibrary(tibble)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é™ç»´ (PCA/UMAP/t-SNE)"
    ]
  },
  {
    "objectID": "1083-dimensionality-reduction.html#æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "href": "1083-dimensionality-reduction.html#æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "title": "é™ç»´æ–¹æ³•å®Œæ•´æ•™ç¨‹",
    "section": "æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "text": "æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯\né™ç»´ç”¨äºé«˜ç»´æ•°æ®çš„å¯è§†åŒ–ä¸å‹ç¼©ï¼Œå¸¸è§æ–¹æ³•åŒ…æ‹¬ PCAã€t-SNE ä¸ UMAPã€‚ æœ¬æ•™ç¨‹å±•ç¤ºå¯è§£é‡Šçš„çº¿æ€§é™ç»´ä¸å¼ºè¡¨è¾¾èƒ½åŠ›çš„éçº¿æ€§é™ç»´ã€‚\né€‚åˆåœºæ™¯\n\né«˜ç»´æ•°æ®æ¢ç´¢ä¸å¯è§†åŒ–\nç‰¹å¾å‹ç¼©ä»¥æå‡ä¸‹æ¸¸æ¨¡å‹æ€§èƒ½\n\nä¸é€‚åˆåœºæ™¯\n\néœ€è¦ä¿ç•™åŸå§‹å˜é‡ç²¾ç¡®å«ä¹‰çš„åœºæ™¯\næ ·æœ¬é‡æå°ä¸”ç‰¹å¾å™ªå£°è¾ƒå¤§",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é™ç»´ (PCA/UMAP/t-SNE)"
    ]
  },
  {
    "objectID": "1083-dimensionality-reduction.html#æ•°æ®å‡†å¤‡",
    "href": "1083-dimensionality-reduction.html#æ•°æ®å‡†å¤‡",
    "title": "é™ç»´æ–¹æ³•å®Œæ•´æ•™ç¨‹",
    "section": "æ•°æ®å‡†å¤‡",
    "text": "æ•°æ®å‡†å¤‡\n\nset.seed(2026)\niris_data &lt;- iris |&gt;\n  select(-Species)\n\nscaled_iris &lt;- scale(iris_data)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é™ç»´ (PCA/UMAP/t-SNE)"
    ]
  },
  {
    "objectID": "1083-dimensionality-reduction.html#æœ€å°å¯è¿è¡Œç¤ºä¾‹pca",
    "href": "1083-dimensionality-reduction.html#æœ€å°å¯è¿è¡Œç¤ºä¾‹pca",
    "title": "é™ç»´æ–¹æ³•å®Œæ•´æ•™ç¨‹",
    "section": "æœ€å°å¯è¿è¡Œç¤ºä¾‹ï¼šPCA",
    "text": "æœ€å°å¯è¿è¡Œç¤ºä¾‹ï¼šPCA\n\npca_model &lt;- prcomp(scaled_iris, center = TRUE, scale. = TRUE)\nsummary(pca_model)$importance[, 1:3]\n\n                            PC1       PC2       PC3\nStandard deviation     1.708361 0.9560494 0.3830886\nProportion of Variance 0.729620 0.2285100 0.0366900\nCumulative Proportion  0.729620 0.9581300 0.9948200\n\n\n\nè§£é‡Šæ–¹å·®\n\nvariance_df &lt;- tibble(\n  component = paste0(\"PC\", seq_along(pca_model$sdev)),\n  variance = pca_model$sdev^2,\n  variance_ratio = (pca_model$sdev^2) / sum(pca_model$sdev^2)\n)\n\nvariance_df\n\n# A tibble: 4 Ã— 3\n  component variance variance_ratio\n  &lt;chr&gt;        &lt;dbl&gt;          &lt;dbl&gt;\n1 PC1         2.92          0.730  \n2 PC2         0.914         0.229  \n3 PC3         0.147         0.0367 \n4 PC4         0.0207        0.00518\n\n\n\nggplot(variance_df, aes(x = component, y = variance_ratio)) +\n  geom_col(fill = \"#4f46e5\") +\n  geom_line(aes(group = 1), color = \"#0f172a\") +\n  labs(\n    title = \"PCA è§£é‡Šæ–¹å·®\",\n    y = \"æ–¹å·®å æ¯”\",\n    x = \"ä¸»æˆåˆ†\"\n  ) +\n  theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\n\n\nPCA å¯è§†åŒ–\n\npca_scores &lt;- as.data.frame(pca_model$x[, 1:2]) |&gt;\n  mutate(species = iris$Species)\n\ncolnames(pca_scores)[1:2] &lt;- c(\"PC1\", \"PC2\")\n\npca_scores |&gt;\n  ggplot(aes(x = PC1, y = PC2, color = species)) +\n  geom_point(size = 2, alpha = 0.85) +\n  labs(title = \"PCA äºŒç»´æŠ•å½±\") +\n  theme_minimal(base_size = 12)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é™ç»´ (PCA/UMAP/t-SNE)"
    ]
  },
  {
    "objectID": "1083-dimensionality-reduction.html#è¿›é˜¶ç¤ºä¾‹t-sne-ä¸-umap",
    "href": "1083-dimensionality-reduction.html#è¿›é˜¶ç¤ºä¾‹t-sne-ä¸-umap",
    "title": "é™ç»´æ–¹æ³•å®Œæ•´æ•™ç¨‹",
    "section": "è¿›é˜¶ç¤ºä¾‹ï¼št-SNE ä¸ UMAP",
    "text": "è¿›é˜¶ç¤ºä¾‹ï¼št-SNE ä¸ UMAP\n\nset.seed(2026)\ntsne_result &lt;- Rtsne(\n  scaled_iris,\n  dims = 2,\n  perplexity = 15,\n  verbose = FALSE,\n  check_duplicates = FALSE\n)\numap_result &lt;- umap(scaled_iris, n_neighbors = 15, min_dist = 0.1)\n\ntsne_df &lt;- as.data.frame(tsne_result$Y) |&gt;\n  mutate(species = iris$Species)\ncolnames(tsne_df)[1:2] &lt;- c(\"dim1\", \"dim2\")\n\numap_df &lt;- as.data.frame(umap_result) |&gt;\n  mutate(species = iris$Species)\ncolnames(umap_df)[1:2] &lt;- c(\"dim1\", \"dim2\")\n\n\nggplot(tsne_df, aes(x = dim1, y = dim2, color = species)) +\n  geom_point(size = 2, alpha = 0.85) +\n  labs(title = \"t-SNE æŠ•å½±\") +\n  theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\n\nggplot(umap_df, aes(x = dim1, y = dim2, color = species)) +\n  geom_point(size = 2, alpha = 0.85) +\n  labs(title = \"UMAP æŠ•å½±\") +\n  theme_minimal(base_size = 12)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é™ç»´ (PCA/UMAP/t-SNE)"
    ]
  },
  {
    "objectID": "1083-dimensionality-reduction.html#æ¨¡å‹é€‰æ‹©ä¸å¯¹æ¯”",
    "href": "1083-dimensionality-reduction.html#æ¨¡å‹é€‰æ‹©ä¸å¯¹æ¯”",
    "title": "é™ç»´æ–¹æ³•å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹é€‰æ‹©ä¸å¯¹æ¯”",
    "text": "æ¨¡å‹é€‰æ‹©ä¸å¯¹æ¯”\nPCA ä¿ç•™å…¨å±€ç»“æ„å¹¶å¯è§£é‡Šï¼Œt-SNE/UMAP æ›´å¼ºè°ƒå±€éƒ¨é‚»è¿‘å…³ç³»ã€‚ å¯é€šè¿‡ä¸‹æ¸¸èšç±»è¡¨ç°è¯„ä¼°é™ç»´æ•ˆæœã€‚\n\nset.seed(2026)\ncluster_labels &lt;- kmeans(scaled_iris, centers = 3)$cluster\n\nsilhouette_pca &lt;- silhouette(cluster_labels, dist(pca_model$x[, 1:2]))\nsilhouette_tsne &lt;- silhouette(cluster_labels, dist(tsne_result$Y))\nsilhouette_umap &lt;- silhouette(cluster_labels, dist(umap_result))\n\nsilhouette_summary &lt;- tibble(\n  method = c(\"PCA\", \"t-SNE\", \"UMAP\"),\n  silhouette = c(\n    mean(silhouette_pca[, \"sil_width\"]),\n    mean(silhouette_tsne[, \"sil_width\"]),\n    mean(silhouette_umap[, \"sil_width\"])\n  )\n)\n\nsilhouette_summary\n\n# A tibble: 3 Ã— 2\n  method silhouette\n  &lt;chr&gt;       &lt;dbl&gt;\n1 PCA         0.523\n2 t-SNE       0.571\n3 UMAP        0.656",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é™ç»´ (PCA/UMAP/t-SNE)"
    ]
  },
  {
    "objectID": "1083-dimensionality-reduction.html#å¯è§£é‡Šæ€§pca-è½½è·",
    "href": "1083-dimensionality-reduction.html#å¯è§£é‡Šæ€§pca-è½½è·",
    "title": "é™ç»´æ–¹æ³•å®Œæ•´æ•™ç¨‹",
    "section": "å¯è§£é‡Šæ€§ï¼šPCA è½½è·",
    "text": "å¯è§£é‡Šæ€§ï¼šPCA è½½è·\n\nloadings &lt;- as.data.frame(pca_model$rotation[, 1:2]) |&gt;\n  rownames_to_column(\"feature\")\n\nloadings\n\n       feature        PC1         PC2\n1 Sepal.Length  0.5210659 -0.37741762\n2  Sepal.Width -0.2693474 -0.92329566\n3 Petal.Length  0.5804131 -0.02449161\n4  Petal.Width  0.5648565 -0.06694199\n\n\n\nloadings |&gt;\n  pivot_longer(cols = c(PC1, PC2), names_to = \"component\", values_to = \"loading\") |&gt;\n  ggplot(aes(x = feature, y = loading, fill = component)) +\n  geom_col(position = \"dodge\") +\n  labs(title = \"PCA è½½è·å¯¹æ¯”\", x = NULL, y = \"è½½è·\") +\n  theme_minimal(base_size = 12)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é™ç»´ (PCA/UMAP/t-SNE)"
    ]
  },
  {
    "objectID": "1083-dimensionality-reduction.html#å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "href": "1083-dimensionality-reduction.html#å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "title": "é™ç»´æ–¹æ³•å®Œæ•´æ•™ç¨‹",
    "section": "å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "text": "å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–\n\næœªæ ‡å‡†åŒ–ï¼šä¸åŒå°ºåº¦ä¼šä¸»å¯¼ PCA æˆ– UMAP ç»“æœã€‚\nç›²ç›®è¿½æ±‚äºŒç»´ï¼šå¯è§†åŒ–ä¾¿åˆ©ä¸ä»£è¡¨æœ€ä½³ç»´åº¦ã€‚\nå¿½è§†éšæœºæ€§ï¼št-SNE/UMAP éœ€å›ºå®šéšæœºç§å­ã€‚\nç”¨ t-SNE/UMAP åšçº¿æ€§æ¨æ–­ï¼šå®ƒä»¬ä¸ä¿ç•™å…¨å±€çº¿æ€§ç»“æ„ã€‚\næœªéªŒè¯ä¸‹æ¸¸ä»»åŠ¡ï¼šé™ç»´ååº”æ£€æµ‹èšç±»æˆ–åˆ†ç±»è¡¨ç°å˜åŒ–ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é™ç»´ (PCA/UMAP/t-SNE)"
    ]
  },
  {
    "objectID": "1083-dimensionality-reduction.html#éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "href": "1083-dimensionality-reduction.html#éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "title": "é™ç»´æ–¹æ³•å®Œæ•´æ•™ç¨‹",
    "section": "éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "text": "éƒ¨ç½²ä¸å¤ç°å»ºè®®\n\nmodel_path &lt;- \"models/pca-model.rds\"\nif (!dir.exists(\"models\")) dir.create(\"models\")\nsaveRDS(pca_model, model_path)\n\nloaded_model &lt;- readRDS(model_path)\nall.equal(dim(loaded_model$rotation), dim(pca_model$rotation))\n\n[1] TRUE\n\n\n\nif (file.exists(\"models/pca-model.rds\")) {\n  file.remove(\"models/pca-model.rds\")\n}\n\n[1] TRUE\n\nif (dir.exists(\"models\")) {\n  unlink(\"models\", recursive = TRUE)\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é™ç»´ (PCA/UMAP/t-SNE)"
    ]
  },
  {
    "objectID": "1083-dimensionality-reduction.html#æ€»ç»“",
    "href": "1083-dimensionality-reduction.html#æ€»ç»“",
    "title": "é™ç»´æ–¹æ³•å®Œæ•´æ•™ç¨‹",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nPCA é€‚åˆéœ€è¦è§£é‡Šçš„çº¿æ€§é™ç»´ï¼Œt-SNE/UMAP æ›´æ“…é•¿æ­ç¤ºå¤æ‚ç°‡ç»“æ„ã€‚ å®é™…åº”ç”¨ä¸­å¯å…ˆç”¨ PCA å»ºç«‹åŸºçº¿ï¼Œå†å°è¯•éçº¿æ€§é™ç»´æå‡è¡¨ç°ã€‚\nè‹¥ç›®æ ‡æ˜¯å‹ç¼©å­˜å‚¨æˆ–ä¸‹æ¸¸å»ºæ¨¡ï¼Œå¯é€šè¿‡é‡æ„è¯¯å·®æˆ–ä¸‹æ¸¸æŒ‡æ ‡éªŒè¯ é™ç»´æ˜¯å¦ä¿ç•™äº†å…³é”®ç»“æ„ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é™ç»´ (PCA/UMAP/t-SNE)"
    ]
  },
  {
    "objectID": "1084-anomaly-detection.html",
    "href": "1084-anomaly-detection.html",
    "title": "æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹å®Œæ•´æ•™ç¨‹",
    "section": "",
    "text": "library(dplyr)\nlibrary(ggplot2)\nlibrary(rsample)\nlibrary(yardstick)\nlibrary(isotree)\nlibrary(dbscan)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹"
    ]
  },
  {
    "objectID": "1084-anomaly-detection.html#æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "href": "1084-anomaly-detection.html#æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "title": "æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹å®Œæ•´æ•™ç¨‹",
    "section": "æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "text": "æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯\nå¼‚å¸¸æ£€æµ‹ç”¨äºè¯†åˆ«å°‘æ•°åç¦»æ­£å¸¸æ¨¡å¼çš„æ ·æœ¬ï¼Œå¸¸è§äºæ¬ºè¯ˆæ£€æµ‹ã€å¼‚å¸¸ç›‘æµ‹ã€‚ æœ¬æ•™ç¨‹å±•ç¤º Isolation Forest ä¸ LOF çš„å®Œæ•´æµç¨‹ã€‚\né€‚åˆåœºæ™¯\n\næ ‡ç­¾ç¨€ç¼ºæˆ–æ²¡æœ‰æ˜ç¡®å¼‚å¸¸æ ‡ç­¾\nå¼‚å¸¸æ¯”ä¾‹è¾ƒä½ä¸”åˆ†å¸ƒæ˜æ˜¾ä¸åŒ\n\nä¸é€‚åˆåœºæ™¯\n\nå¼‚å¸¸ä¸æ­£å¸¸éš¾ä»¥åŒºåˆ†ã€å™ªå£°æé«˜\néœ€è¦æ˜ç¡®å¯è§£é‡Šè§„åˆ™çš„åœºæ™¯",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹"
    ]
  },
  {
    "objectID": "1084-anomaly-detection.html#æ•°æ®å‡†å¤‡ä¸æ¨¡æ‹Ÿå¼‚å¸¸",
    "href": "1084-anomaly-detection.html#æ•°æ®å‡†å¤‡ä¸æ¨¡æ‹Ÿå¼‚å¸¸",
    "title": "æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹å®Œæ•´æ•™ç¨‹",
    "section": "æ•°æ®å‡†å¤‡ä¸æ¨¡æ‹Ÿå¼‚å¸¸",
    "text": "æ•°æ®å‡†å¤‡ä¸æ¨¡æ‹Ÿå¼‚å¸¸\n\nset.seed(2026)\nbase_data &lt;- mtcars |&gt;\n  select(mpg, disp, hp, wt)\n\nanomalies &lt;- base_data[1:5, ] |&gt;\n  mutate(\n    mpg = mpg * 0.4,\n    disp = disp * 2,\n    hp = hp * 2.2,\n    wt = wt * 1.8\n  )\n\nfull_data &lt;- bind_rows(\n  base_data |&gt; mutate(label = \"normal\"),\n  anomalies |&gt; mutate(label = \"anomaly\")\n) |&gt;\n  mutate(label = factor(label, levels = c(\"anomaly\", \"normal\")))\n\nsplit_obj &lt;- initial_split(full_data, prop = 0.8, strata = label)\ntrain_data &lt;- training(split_obj)\ntest_data &lt;- testing(split_obj)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹"
    ]
  },
  {
    "objectID": "1084-anomaly-detection.html#æœ€å°å¯è¿è¡Œç¤ºä¾‹isolation-forest",
    "href": "1084-anomaly-detection.html#æœ€å°å¯è¿è¡Œç¤ºä¾‹isolation-forest",
    "title": "æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹å®Œæ•´æ•™ç¨‹",
    "section": "æœ€å°å¯è¿è¡Œç¤ºä¾‹ï¼šIsolation Forest",
    "text": "æœ€å°å¯è¿è¡Œç¤ºä¾‹ï¼šIsolation Forest\n\nset.seed(2026)\niso_model &lt;- isolation.forest(\n  as.matrix(select(train_data, -label)),\n  ntrees = 200,\n  sample_size = 0.8\n)\n\niso_scores &lt;- predict(iso_model, as.matrix(select(test_data, -label)), type = \"score\")\n\n\nthreshold &lt;- quantile(iso_scores, 0.95)\n\n# è‹¥æœ‰æ ‡æ³¨æ•°æ®ï¼Œå¯åœ¨éªŒè¯é›†ä¸Šå¯»æ‰¾ä½¿ F1 æˆ–å¬å›ç‡æœ€ä¼˜çš„é˜ˆå€¼\npred_label &lt;- if_else(iso_scores &gt;= threshold, \"anomaly\", \"normal\") |&gt;\n  factor(levels = levels(test_data$label))\n\niso_metrics &lt;- tibble(\n  truth = test_data$label,\n  .pred_anomaly = iso_scores,\n  .pred_class = pred_label\n) |&gt;\n  summarise(\n    accuracy = yardstick::accuracy_vec(truth, .pred_class),\n    roc_auc = yardstick::roc_auc_vec(truth, .pred_anomaly, event_level = \"first\"),\n    precision = yardstick::precision_vec(truth, .pred_class, event_level = \"first\"),\n    recall = yardstick::recall_vec(truth, .pred_class, event_level = \"first\")\n  )\n\niso_metrics\n\n# A tibble: 1 Ã— 4\n  accuracy roc_auc precision recall\n     &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;\n1     0.75   0.857         0      0",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹"
    ]
  },
  {
    "objectID": "1084-anomaly-detection.html#è¿›é˜¶ç¤ºä¾‹lof-å±€éƒ¨ç¦»ç¾¤å› å­",
    "href": "1084-anomaly-detection.html#è¿›é˜¶ç¤ºä¾‹lof-å±€éƒ¨ç¦»ç¾¤å› å­",
    "title": "æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹å®Œæ•´æ•™ç¨‹",
    "section": "è¿›é˜¶ç¤ºä¾‹ï¼šLOF å±€éƒ¨ç¦»ç¾¤å› å­",
    "text": "è¿›é˜¶ç¤ºä¾‹ï¼šLOF å±€éƒ¨ç¦»ç¾¤å› å­\n\nlof_matrix &lt;- as.matrix(select(test_data, -label))\nmin_pts &lt;- max(2, min(10, nrow(lof_matrix) - 1))\nlof_scores &lt;- lof(lof_matrix, minPts = min_pts)\nlof_threshold &lt;- quantile(lof_scores, 0.95)\nlof_pred &lt;- if_else(lof_scores &gt;= lof_threshold, \"anomaly\", \"normal\") |&gt;\n  factor(levels = levels(test_data$label))\n\nlof_metrics &lt;- tibble(\n  truth = test_data$label,\n  .pred_anomaly = lof_scores,\n  .pred_class = lof_pred\n) |&gt;\n  summarise(\n    accuracy = yardstick::accuracy_vec(truth, .pred_class),\n    roc_auc = yardstick::roc_auc_vec(truth, .pred_anomaly, event_level = \"first\"),\n    precision = yardstick::precision_vec(truth, .pred_class, event_level = \"first\"),\n    recall = yardstick::recall_vec(truth, .pred_class, event_level = \"first\")\n  )\n\nlof_metrics\n\n# A tibble: 1 Ã— 4\n  accuracy roc_auc precision recall\n     &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;\n1     0.75   0.857         0      0",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹"
    ]
  },
  {
    "objectID": "1084-anomaly-detection.html#å¯è§†åŒ–å¼‚å¸¸åˆ†å¸ƒ",
    "href": "1084-anomaly-detection.html#å¯è§†åŒ–å¼‚å¸¸åˆ†å¸ƒ",
    "title": "æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹å®Œæ•´æ•™ç¨‹",
    "section": "å¯è§†åŒ–å¼‚å¸¸åˆ†å¸ƒ",
    "text": "å¯è§†åŒ–å¼‚å¸¸åˆ†å¸ƒ\n\nplot_df &lt;- test_data |&gt;\n  mutate(score = iso_scores, pred = pred_label)\n\nggplot(plot_df, aes(x = mpg, y = hp, color = pred)) +\n  geom_point(size = 2, alpha = 0.85) +\n  scale_color_manual(values = c(\"anomaly\" = \"#ef4444\", \"normal\" = \"#4f46e5\")) +\n  labs(title = \"Isolation Forest å¼‚å¸¸æ£€æµ‹ç»“æœ\") +\n  theme_minimal(base_size = 12)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹"
    ]
  },
  {
    "objectID": "1084-anomaly-detection.html#å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "href": "1084-anomaly-detection.html#å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "title": "æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹å®Œæ•´æ•™ç¨‹",
    "section": "å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "text": "å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–\n\né˜ˆå€¼éšæ„é€‰æ‹©ï¼šå»ºè®®ç»“åˆä¸šåŠ¡æˆ–éªŒè¯é›†è°ƒèŠ‚ã€‚\nå¼‚å¸¸æ¯”ä¾‹ä¼°è®¡é”™è¯¯ï¼šIsolation Forest éœ€åˆç† sample_sizeã€‚\næœªåšæ ‡å‡†åŒ–ï¼šåœ¨é«˜å°ºåº¦å·®å¼‚çš„å˜é‡ä¸Šæ•ˆæœä¸‹é™ã€‚\nå¿½è§†æ—¶é—´æ¼‚ç§»ï¼šå¼‚å¸¸æ£€æµ‹æ¨¡å‹éœ€è¦å‘¨æœŸæ€§æ›´æ–°ã€‚\nä»…ä¾èµ–å•æ¨¡å‹ï¼šå¯ç”¨è§„åˆ™æˆ–ç®€å•æ¨¡å‹ä½œä¸ºåŸºçº¿å¯¹ç…§ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹"
    ]
  },
  {
    "objectID": "1084-anomaly-detection.html#éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "href": "1084-anomaly-detection.html#éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "title": "æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹å®Œæ•´æ•™ç¨‹",
    "section": "éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "text": "éƒ¨ç½²ä¸å¤ç°å»ºè®®\n\nmodel_path &lt;- \"models/isolation-forest.rds\"\nif (!dir.exists(\"models\")) dir.create(\"models\")\nsaveRDS(iso_model, model_path)\n\nloaded_model &lt;- readRDS(model_path)\nall.equal(loaded_model$ntrees, iso_model$ntrees)\n\n[1] TRUE\n\n\n\nif (file.exists(\"models/isolation-forest.rds\")) {\n  file.remove(\"models/isolation-forest.rds\")\n}\n\n[1] TRUE\n\nif (dir.exists(\"models\")) {\n  unlink(\"models\", recursive = TRUE)\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹"
    ]
  },
  {
    "objectID": "1084-anomaly-detection.html#æ€»ç»“",
    "href": "1084-anomaly-detection.html#æ€»ç»“",
    "title": "æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹å®Œæ•´æ•™ç¨‹",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nIsolation Forest é€‚åˆé«˜ç»´æ•°æ®çš„å¼‚å¸¸è¯†åˆ«ï¼ŒLOF æ›´å¼ºè°ƒå±€éƒ¨å¯†åº¦å·®å¼‚ã€‚ ç»“åˆä¸šåŠ¡é˜ˆå€¼ã€å‘¨æœŸæ€§æ›´æ–°å¯ä»¥æå‡å¼‚å¸¸æ£€æµ‹çš„ç¨³å®šæ€§ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹"
    ]
  },
  {
    "objectID": "1080-random-forest.html#æ¨¡å‹å…¥é—¨ä»0ç†è§£å†³ç­–æ ‘ä¸éšæœºæ£®æ—",
    "href": "1080-random-forest.html#æ¨¡å‹å…¥é—¨ä»0ç†è§£å†³ç­–æ ‘ä¸éšæœºæ£®æ—",
    "title": "éšæœºæ£®æ—ä¸å†³ç­–æ ‘å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹å…¥é—¨ï¼šä»0ç†è§£å†³ç­–æ ‘ä¸éšæœºæ£®æ—",
    "text": "æ¨¡å‹å…¥é—¨ï¼šä»0ç†è§£å†³ç­–æ ‘ä¸éšæœºæ£®æ—\nå†³ç­–æ ‘æŠŠå»ºæ¨¡è¿‡ç¨‹ç†è§£ä¸ºä¸€ç³»åˆ—â€œå¦‚æœ-é‚£ä¹ˆâ€è§„åˆ™ï¼šåœ¨æ¯ä¸€æ­¥é€‰ä¸€ä¸ªç‰¹å¾ï¼Œ å°†æ ·æœ¬åˆ†æˆæ›´æ¥è¿‘åŒä¸€ç±»åˆ«çš„å°ç»„ï¼Œç›´åˆ°å¶å­èŠ‚ç‚¹è¶³å¤Ÿçº¯å‡€ã€‚ å®ƒçš„ä¼˜åŠ¿æ˜¯ç›´è§‚ã€å¯è§£é‡Šï¼Œç¼ºç‚¹æ˜¯å®¹æ˜“è¿‡æ‹Ÿåˆï¼Œä¸”å¯¹è®­ç»ƒæ•°æ®æ³¢åŠ¨æ•æ„Ÿã€‚\néšæœºæ£®æ—çš„æ ¸å¿ƒæ€æƒ³æ˜¯â€œå¤šæ£µæ ‘çš„æŠ•ç¥¨â€ã€‚è®­ç»ƒæ—¶å¯¹æ ·æœ¬åšè‡ªåŠ©æŠ½æ ·ï¼Œ å¹¶åœ¨æ¯ä¸ªèŠ‚ç‚¹åªéšæœºæŠ½å–éƒ¨åˆ†ç‰¹å¾å‚ä¸åˆ†è£‚ï¼Œå½¢æˆè®¸å¤šç»“æ„ä¸åŒçš„æ ‘ã€‚ æœ€ç»ˆåˆ†ç±»ç»“æœå–å¤šæ•°æŠ•ç¥¨ï¼Œå›å½’å–å¹³å‡ï¼Œä»è€Œæ˜¾è‘—é™ä½æ–¹å·®ã€‚\nåœ¨å®è·µä¸­å¯ä»¥æŠŠå®ƒç†è§£ä¸ºï¼šå…ˆç”¨å†³ç­–æ ‘å»ºç«‹æœ€å®¹æ˜“è®²æ¸…æ¥šçš„åŸºçº¿ï¼Œ å†ç”¨éšæœºæ£®æ—æå‡ç¨³å®šæ€§ï¼ŒåŒæ—¶ç”¨ç‰¹å¾é‡è¦æ€§è§£é‡Šæ¨¡å‹å†³ç­–ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "éšæœºæ£®æ—ä¸å†³ç­–æ ‘"
    ]
  },
  {
    "objectID": "1081-svm.html#æ¨¡å‹å…¥é—¨ä»0ç†è§£-svm-çš„å·¥ä½œæ–¹å¼",
    "href": "1081-svm.html#æ¨¡å‹å…¥é—¨ä»0ç†è§£-svm-çš„å·¥ä½œæ–¹å¼",
    "title": "æ”¯æŒå‘é‡æœº SVM å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹å…¥é—¨ï¼šä»0ç†è§£ SVM çš„å·¥ä½œæ–¹å¼",
    "text": "æ¨¡å‹å…¥é—¨ï¼šä»0ç†è§£ SVM çš„å·¥ä½œæ–¹å¼\nSVM çš„æ ¸å¿ƒç›®æ ‡æ˜¯æ‰¾åˆ°ä¸€æ¡â€œé—´éš”æœ€å¤§â€çš„åˆ†éš”è¶…å¹³é¢ï¼Œè®©ä¸¤ç±»æ ·æœ¬ä¹‹é—´çš„ è·ç¦»å°½å¯èƒ½å¤§ã€‚é—´éš”è¶Šå¤§ï¼Œæ¨¡å‹å¯¹æ–°æ ·æœ¬çš„é²æ£’æ€§è¶Šå¥½ã€‚\nå½“æ•°æ®æ— æ³•çº¿æ€§åˆ†å¼€æ—¶ï¼ŒSVM ä¼šé€šè¿‡æ ¸å‡½æ•°æŠŠæ•°æ®æ˜ å°„åˆ°æ›´é«˜ç»´ç©ºé—´ï¼Œ å¸¸è§çš„æ ¸åŒ…æ‹¬çº¿æ€§æ ¸ä¸ RBF æ ¸ã€‚çº¿æ€§æ ¸é€‚åˆå¯è§£é‡Šçš„çº¿æ€§è¾¹ç•Œï¼Œ RBF æ ¸é€‚åˆå¤æ‚éçº¿æ€§è¾¹ç•Œï¼Œä½†éœ€è¦ä»”ç»†è°ƒå‚ã€‚\nSVM çš„å…³é”®è¶…å‚æ•°æ˜¯ costï¼ˆæƒ©ç½šè¯¯åˆ†ç±»ï¼‰ä¸ gammaï¼ˆæ ¸å‡½æ•°å®½åº¦ï¼‰ã€‚ cost å¤ªå¤§å®¹æ˜“è¿‡æ‹Ÿåˆï¼Œå¤ªå°ä¼šæ¬ æ‹Ÿåˆï¼›gamma å¤ªå¤§å®¹æ˜“æ‹Ÿåˆå™ªå£°ï¼Œ å¤ªå°ä¼šå¯¼è‡´è¾¹ç•Œè¿‡äºå¹³æ»‘ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æ”¯æŒå‘é‡æœº (SVM)"
    ]
  },
  {
    "objectID": "1082-ensemble-learning.html#æ¨¡å‹å…¥é—¨ä»0ç†è§£-baggingboostingstacking",
    "href": "1082-ensemble-learning.html#æ¨¡å‹å…¥é—¨ä»0ç†è§£-baggingboostingstacking",
    "title": "é›†æˆå­¦ä¹ å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹å…¥é—¨ï¼šä»0ç†è§£ Baggingã€Boostingã€Stacking",
    "text": "æ¨¡å‹å…¥é—¨ï¼šä»0ç†è§£ Baggingã€Boostingã€Stacking\né›†æˆå­¦ä¹ æŠŠå¤šä¸ªæ¨¡å‹çš„è¾“å‡ºç»„åˆèµ·æ¥ï¼Œä»¥é™ä½å•æ¨¡å‹çš„ä¸ç¨³å®šæ€§ã€‚ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºâ€œå¤šä½ä¸“å®¶æŠ•ç¥¨â€ï¼Œåªä¸è¿‡æ¯ä½ä¸“å®¶çš„è®­ç»ƒæ–¹å¼ä¸åŒã€‚\n\nBaggingï¼šå¯¹è®­ç»ƒé›†åšè‡ªåŠ©æŠ½æ ·ï¼Œè®­ç»ƒå¤šæ£µæ¨¡å‹å¹¶å¹³å‡ç»“æœã€‚ ä¸»è¦é™ä½æ–¹å·®ï¼Œå…¸å‹ä»£è¡¨æ˜¯éšæœºæ£®æ—ã€‚\nBoostingï¼šé¡ºåºè®­ç»ƒæ¨¡å‹ï¼Œåä¸€ä¸ªæ¨¡å‹å…³æ³¨å‰ä¸€ä¸ªçš„é”™è¯¯æ ·æœ¬ã€‚ ä¸»è¦é™ä½åå·®ï¼Œå…¸å‹ä»£è¡¨æ˜¯ XGBoostã€LightGBMã€‚\nStackingï¼šå…ˆè®­ç»ƒå¤šä¸ªåŸºæ¨¡å‹ï¼Œå†ç”¨ä¸€ä¸ªâ€œäºŒå±‚æ¨¡å‹â€èåˆé¢„æµ‹ã€‚ é€‚åˆç»¼åˆä¸åŒæ¨¡å‹çš„ä¼˜åŠ¿ï¼Œä½†éœ€è¦é¢å¤–éªŒè¯é¿å…è¿‡æ‹Ÿåˆã€‚\n\næœ¬æ•™ç¨‹é‡‡ç”¨ tidymodels ä½“ç³»ï¼Œè®©æµç¨‹æ›´æ¸…æ™°ï¼š é…æ–¹ï¼ˆrecipeï¼‰è´Ÿè´£æ•°æ®é¢„å¤„ç†ï¼Œworkflow è´Ÿè´£è¿æ¥æ¨¡å‹ä¸æ•°æ®ï¼Œ resamples è´Ÿè´£äº¤å‰éªŒè¯ï¼Œstacks è´Ÿè´£èåˆè¾“å‡ºã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é›†æˆå­¦ä¹  (Bagging/Stacking)"
    ]
  },
  {
    "objectID": "1083-dimensionality-reduction.html#æ¨¡å‹å…¥é—¨ä»0ç†è§£-pcat-sne-ä¸-umap",
    "href": "1083-dimensionality-reduction.html#æ¨¡å‹å…¥é—¨ä»0ç†è§£-pcat-sne-ä¸-umap",
    "title": "é™ç»´æ–¹æ³•å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹å…¥é—¨ï¼šä»0ç†è§£ PCAã€t-SNE ä¸ UMAP",
    "text": "æ¨¡å‹å…¥é—¨ï¼šä»0ç†è§£ PCAã€t-SNE ä¸ UMAP\né™ç»´çš„ç›®æ ‡æ˜¯ç”¨æ›´å°‘çš„ç»´åº¦ä¿ç•™æ•°æ®çš„ä¸»è¦ç»“æ„ã€‚ PCA æ˜¯çº¿æ€§é™ç»´ï¼Œå¯»æ‰¾èƒ½å¤Ÿè§£é‡Šæœ€å¤§æ–¹å·®çš„æ­£äº¤æ–¹å‘ï¼Œ ä¼˜ç‚¹æ˜¯å¯è§£é‡Šã€é€Ÿåº¦å¿«ï¼›ç¼ºç‚¹æ˜¯åªèƒ½æ•æ‰çº¿æ€§ç»“æ„ã€‚\nt-SNE ä¸ UMAP æ˜¯éçº¿æ€§é™ç»´ï¼Œå¼ºè°ƒå±€éƒ¨é‚»åŸŸç»“æ„ï¼Œ é€‚åˆå¯è§†åŒ–å¤æ‚æ•°æ®ï¼Œä½†ç»“æœå—å‚æ•°å’Œéšæœºæ€§å½±å“è¾ƒå¤§ã€‚ å› æ­¤å®è·µä¸­å¸¸ç”¨ PCA åšåŸºçº¿ï¼Œå†ç”¨ t-SNE/UMAP åšæ¢ç´¢ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é™ç»´ (PCA/UMAP/t-SNE)"
    ]
  },
  {
    "objectID": "1084-anomaly-detection.html#æ¨¡å‹å…¥é—¨ä»0ç†è§£å¼‚å¸¸æ£€æµ‹",
    "href": "1084-anomaly-detection.html#æ¨¡å‹å…¥é—¨ä»0ç†è§£å¼‚å¸¸æ£€æµ‹",
    "title": "æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹å…¥é—¨ï¼šä»0ç†è§£å¼‚å¸¸æ£€æµ‹",
    "text": "æ¨¡å‹å…¥é—¨ï¼šä»0ç†è§£å¼‚å¸¸æ£€æµ‹\næ— ç›‘ç£å¼‚å¸¸æ£€æµ‹çš„æ ¸å¿ƒæ˜¯â€œæ­£å¸¸æ ·æœ¬å å¤šæ•°ï¼Œå¼‚å¸¸æ ·æœ¬å¾ˆå°‘â€ã€‚ æ¨¡å‹ä¸ä¾èµ–æ ‡ç­¾ï¼Œè€Œæ˜¯é€šè¿‡æ ·æœ¬çš„ç¨€ç–æ€§æˆ–å¯†åº¦å·®å¼‚å‘ç°å¼‚å¸¸ã€‚\n\nIsolation Forestï¼šé€šè¿‡éšæœºåˆ‡åˆ†æ ·æœ¬ï¼Œå¼‚å¸¸ç‚¹æ›´å®¹æ˜“è¢«éš”ç¦»ï¼Œ åˆ†å‰²è·¯å¾„æ›´çŸ­ï¼Œå¾—åˆ†æ›´é«˜ã€‚\nLOFï¼ˆå±€éƒ¨ç¦»ç¾¤å› å­ï¼‰ï¼šæ¯”è¾ƒæ ·æœ¬ä¸é‚»å±…çš„å¯†åº¦ï¼Œ å¦‚æœå¯†åº¦æ˜æ˜¾æ›´ä½ï¼Œå°±è¢«è§†ä¸ºå¼‚å¸¸ã€‚\n\nå®è·µä¸­éœ€è¦å…ˆä¼°è®¡å¼‚å¸¸æ¯”ä¾‹ï¼Œå†ç”¨é˜ˆå€¼æŠŠè¿ç»­å¾—åˆ†è½¬æˆâ€œå¼‚å¸¸/æ­£å¸¸â€ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹"
    ]
  },
  {
    "objectID": "3015-tidytable.html",
    "href": "3015-tidytable.html",
    "title": "tidytable æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "library(dplyr)\nlibrary(tidytable)\nlibrary(ggplot2)",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "tidytable - é«˜æ€§èƒ½æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3015-tidytable.html#åŒ…ç®€ä»‹ä¸å®šä½",
    "href": "3015-tidytable.html#åŒ…ç®€ä»‹ä¸å®šä½",
    "title": "tidytable æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "åŒ…ç®€ä»‹ä¸å®šä½",
    "text": "åŒ…ç®€ä»‹ä¸å®šä½\ntidytable é€šè¿‡å¤åˆ» dplyr è¯­æ³•ï¼Œè®©ä½ ç”¨ç†Ÿæ‚‰çš„ tidyverse é£æ ¼è·å¾— data.table çš„é€Ÿåº¦ã€‚ å®ƒé€‚åˆåœ¨æ•°æ®é‡è¾ƒå¤§ã€éœ€è¦é«˜æ€§èƒ½å¤„ç†çš„åœºæ™¯ï¼ŒåŒæ—¶ä¿æŒç®¡é“å¼çš„å¯è¯»æ€§ã€‚\né€‚åˆåœºæ™¯\n\næƒ³ç”¨ dplyr è¯­æ³•ä½†éœ€è¦ data.table çš„é€Ÿåº¦\nä¸­å¤§å‹æ•°æ®çš„ç­›é€‰ã€èšåˆã€æ’åºã€è¿æ¥æ“ä½œ\néœ€è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­é™ä½å†…å­˜å ç”¨\n\næ›¿ä»£æ–¹æ¡ˆ\n\ndplyrï¼šæ›´å¼ºè°ƒè¯­æ³•ç»Ÿä¸€ï¼Œä½†åœ¨è¶…å¤§æ•°æ®ä¸‹é€Ÿåº¦è¾ƒæ…¢\ndata.tableï¼šæ€§èƒ½æ›´å¼ºï¼Œä½†è¯­æ³•é£æ ¼ä¸åŒ\nduckplyrï¼šé€‚åˆ DuckDB é©±åŠ¨çš„ç£ç›˜çº§å¤„ç†",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "tidytable - é«˜æ€§èƒ½æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3015-tidytable.html#æ¨¡å‹å·¥å…·å…¥é—¨ä»0ç†è§£-tidytable-å·¥ä½œæµ",
    "href": "3015-tidytable.html#æ¨¡å‹å·¥å…·å…¥é—¨ä»0ç†è§£-tidytable-å·¥ä½œæµ",
    "title": "tidytable æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹/å·¥å…·å…¥é—¨ï¼šä»0ç†è§£ tidytable å·¥ä½œæµ",
    "text": "æ¨¡å‹/å·¥å…·å…¥é—¨ï¼šä»0ç†è§£ tidytable å·¥ä½œæµ\ntidytable çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šæŠŠ data.table çš„é«˜æ€§èƒ½å†™æˆ dplyr è¯­æ³•ã€‚ ä½ å¯ä»¥å°†å®ƒçœ‹ä½œ â€œdata.table å¼•æ“ + dplyr æ¥å£â€ çš„ç»„åˆã€‚å®ƒé»˜è®¤è¿”å› data.table å¯¹è±¡ï¼ˆåŒæ—¶å…¼å®¹ tibble çš„æ˜¾ç¤ºé£æ ¼ï¼‰ï¼Œå› æ­¤è¯»å–ä¸å†™å›éƒ½æ›´é«˜æ•ˆã€‚\nå·¥ä½œæµä¸Šä¾æ—§ä¿æŒ tidyverse çš„é¡ºåºï¼š\n\ntidytable::as_tidytable() æŠŠæ•°æ®å˜ä¸º tidytable\nç”¨ select()ã€filter()ã€mutate() åšæ•°æ®åŠ å·¥\nç”¨ summarise()ã€count()ã€group_by() è¾“å‡ºç»“æœ\nä½¿ç”¨ left_join()ã€inner_join() è¿æ¥å¤šè¡¨",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "tidytable - é«˜æ€§èƒ½æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3015-tidytable.html#å®‰è£…ä¸ç¯å¢ƒ",
    "href": "3015-tidytable.html#å®‰è£…ä¸ç¯å¢ƒ",
    "title": "tidytable æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å®‰è£…ä¸ç¯å¢ƒ",
    "text": "å®‰è£…ä¸ç¯å¢ƒ\n\ninstall.packages(\"tidytable\")\n\ntidytable ä¾èµ– data.tableï¼Œå› æ­¤é¦–æ¬¡å®‰è£…ä¼šç¼–è¯‘å¹¶å ç”¨ä¸€å®šæ—¶é—´ã€‚ å»ºè®®åœ¨é«˜æ€§èƒ½åœºæ™¯ä¸­ä¼˜å…ˆä½¿ç”¨å®ƒã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "tidytable - é«˜æ€§èƒ½æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3015-tidytable.html#æ ¸å¿ƒåŠŸèƒ½æ¸…å•",
    "href": "3015-tidytable.html#æ ¸å¿ƒåŠŸèƒ½æ¸…å•",
    "title": "tidytable æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "æ ¸å¿ƒåŠŸèƒ½æ¸…å•",
    "text": "æ ¸å¿ƒåŠŸèƒ½æ¸…å•\n\n\n\næ“ä½œ\ntidytable å‡½æ•°\nåŠŸèƒ½è¯´æ˜\n\n\n\n\né€‰æ‹©åˆ—\nselect()\né€‰å–å­—æ®µã€é‡å‘½å\n\n\nè¿‡æ»¤è¡Œ\nfilter()\næ¡ä»¶ç­›é€‰\n\n\næ–°å˜é‡\nmutate()\nåˆ›å»ºæˆ–è½¬æ¢å˜é‡\n\n\nèšåˆ\nsummarise()\nåˆ†ç»„ç»Ÿè®¡\n\n\næ’åº\narrange()\næ’åºä¸æ’å\n\n\nè¿æ¥\nleft_join()\nå¤šè¡¨åˆå¹¶\n\n\né‡å¡‘\npivot_longer()\nå®½é•¿è¡¨è½¬æ¢",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "tidytable - é«˜æ€§èƒ½æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3015-tidytable.html#å®Œæ•´ç¤ºä¾‹æµç¨‹ä»æ•°æ®è¯»å–åˆ°æ±‡æ€»è¾“å‡º",
    "href": "3015-tidytable.html#å®Œæ•´ç¤ºä¾‹æµç¨‹ä»æ•°æ®è¯»å–åˆ°æ±‡æ€»è¾“å‡º",
    "title": "tidytable æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å®Œæ•´ç¤ºä¾‹æµç¨‹ï¼šä»æ•°æ®è¯»å–åˆ°æ±‡æ€»è¾“å‡º",
    "text": "å®Œæ•´ç¤ºä¾‹æµç¨‹ï¼šä»æ•°æ®è¯»å–åˆ°æ±‡æ€»è¾“å‡º\n\nset.seed(2026)\nraw_data &lt;- tibble::tibble(\n  subject_id = 1:200,\n  group = sample(c(\"control\", \"treatment\"), 200, replace = TRUE),\n  age = round(rnorm(200, 45, 12), 1),\n  bmi = round(rnorm(200, 24, 4), 1),\n  outcome = rbinom(200, 1, 0.35)\n)\n\nstudy_data &lt;- tidytable::as_tidytable(raw_data)\n\n\nsummary_tbl &lt;- study_data |&gt;\n  filter(age &gt;= 18) |&gt;\n  mutate(bmi_group = case_when(\n    bmi &lt; 18.5 ~ \"under\",\n    bmi &lt; 24 ~ \"normal\",\n    bmi &lt; 28 ~ \"over\",\n    TRUE ~ \"obese\"\n  )) |&gt;\n  group_by(group, bmi_group) |&gt;\n  summarise(\n    n = n(),\n    outcome_rate = mean(outcome),\n    mean_age = mean(age),\n    .groups = \"drop\"\n  ) |&gt;\n  arrange(desc(outcome_rate))\n\nsummary_tbl\n\n# A tidytable: 8 Ã— 5\n  group     bmi_group     n outcome_rate mean_age\n  &lt;chr&gt;     &lt;chr&gt;     &lt;int&gt;        &lt;dbl&gt;    &lt;dbl&gt;\n1 control   obese        20        0.55      48.9\n2 control   over         35        0.429     44.9\n3 treatment over         35        0.4       44.1\n4 control   normal       37        0.351     46.4\n5 control   under        12        0.333     45.7\n6 treatment under        12        0.333     48.1\n7 treatment obese        21        0.286     50.6\n8 treatment normal       26        0.192     47.6\n\n\nè§£é‡Šè¦ç‚¹\n\nas_tidytable() æŠŠ tibble è½¬ä¸º tidytable å¯¹è±¡ï¼Œåç»­æ“ä½œéƒ½æ˜¯ data.table å¼•æ“ã€‚\ncase_when() åœ¨ tidytable ä¸­ä¿æŒä¸ dplyr ä¸€è‡´çš„å†™æ³•ã€‚\nsummarise() ä¼šè¾“å‡º data.table æ ¼å¼ï¼Œä½†å±•ç¤ºä»ç„¶å‹å¥½ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "tidytable - é«˜æ€§èƒ½æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3015-tidytable.html#ä»£ç é€æ®µè§£é‡Š",
    "href": "3015-tidytable.html#ä»£ç é€æ®µè§£é‡Š",
    "title": "tidytable æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "ä»£ç é€æ®µè§£é‡Š",
    "text": "ä»£ç é€æ®µè§£é‡Š\n\næ¨¡æ‹Ÿæ•°æ®ï¼šæ„é€ å«åˆ†ç»„ä¸ç»“å±€çš„ç®€åŒ–æ•°æ®é›†ï¼Œä¾¿äºå¤ç°ã€‚\nç­›é€‰ä¸æ´¾ç”Ÿå˜é‡ï¼šç”¨ filter() å’Œ mutate() ç»„åˆç”Ÿæˆ BMI åˆ†ç»„ã€‚\nåˆ†ç»„ç»Ÿè®¡ï¼šgroup_by() + summarise() è¾“å‡ºå¹³å‡å¹´é¾„å’Œç»“å±€ç‡ã€‚\næ’åºç»“æœï¼šarrange() å°†é«˜é£é™©ç»„åˆæ’åœ¨å‰é¢ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "tidytable - é«˜æ€§èƒ½æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3015-tidytable.html#è¿›é˜¶ç¤ºä¾‹è¿æ¥ä¸ç®¡é“å¼æ¸…æ´—",
    "href": "3015-tidytable.html#è¿›é˜¶ç¤ºä¾‹è¿æ¥ä¸ç®¡é“å¼æ¸…æ´—",
    "title": "tidytable æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "è¿›é˜¶ç¤ºä¾‹ï¼šè¿æ¥ä¸ç®¡é“å¼æ¸…æ´—",
    "text": "è¿›é˜¶ç¤ºä¾‹ï¼šè¿æ¥ä¸ç®¡é“å¼æ¸…æ´—\n\nfollowup_data &lt;- tidytable::as_tidytable(\n  tibble::tibble(\n    subject_id = sample(1:200, 160),\n    followup_month = sample(3:24, 160, replace = TRUE)\n  )\n)\n\njoined_data &lt;- study_data |&gt;\n  left_join(followup_data, by = \"subject_id\") |&gt;\n  mutate(\n    followup_month = if_else(is.na(followup_month), 0, followup_month),\n    risk_flag = outcome == 1 & followup_month &lt; 6\n  )\n\njoined_data |&gt;\n  count(risk_flag)\n\n# A tidytable: 2 Ã— 2\n  risk_flag     n\n  &lt;lgl&gt;     &lt;int&gt;\n1 FALSE       179\n2 TRUE         21\n\n\nè§£é‡Šè¦ç‚¹\n\ntidytable çš„ left_join() ç›´æ¥è°ƒç”¨ data.table joinï¼Œé€Ÿåº¦ä¼˜åŠ¿æ˜æ˜¾ã€‚\nif_else() ä¸ dplyr ä¿æŒä¸€è‡´ï¼Œå…¼é¡¾å¯è¯»æ€§ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "tidytable - é«˜æ€§èƒ½æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3015-tidytable.html#å¸¸è§é”™è¯¯ä¸æ’æŸ¥",
    "href": "3015-tidytable.html#å¸¸è§é”™è¯¯ä¸æ’æŸ¥",
    "title": "tidytable æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å¸¸è§é”™è¯¯ä¸æ’æŸ¥",
    "text": "å¸¸è§é”™è¯¯ä¸æ’æŸ¥\n\nç»“æœç±»å‹ä¸ä¸€è‡´ï¼štidytable é»˜è®¤è¿”å› data.tableï¼Œå¯ç”¨ as_tibble() è½¬æ¢ã€‚\nå¿˜è®°åŠ è½½ tidytableï¼šéƒ¨åˆ† dplyr å‡½æ•°ä¼šè¢« tidytable è¦†ç›–ã€‚\nåˆ—åå†²çªï¼šjoin åéœ€æ£€æŸ¥åˆ—åæ˜¯å¦è‡ªåŠ¨é‡å‘½åã€‚\nNA å¤„ç†ä¸è¶³ï¼šå¤§æ•°æ®ä¸‹ NA ä¼šå¯¼è‡´ç»Ÿè®¡åå·®ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "tidytable - é«˜æ€§èƒ½æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3015-tidytable.html#æ€§èƒ½ä¸æœ€ä½³å®è·µ",
    "href": "3015-tidytable.html#æ€§èƒ½ä¸æœ€ä½³å®è·µ",
    "title": "tidytable æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "æ€§èƒ½ä¸æœ€ä½³å®è·µ",
    "text": "æ€§èƒ½ä¸æœ€ä½³å®è·µ\n\nå¤„ç†å¤§å‹æ•°æ®æ—¶ï¼Œå…ˆè½¬ä¸º tidytable å†è¿›å…¥ç®¡é“ã€‚\nå°½é‡å‡å°‘ä¸­é—´å¯¹è±¡ï¼Œä½¿ç”¨ç®¡é“ä¿æŒå•æ¬¡æµå¼å¤„ç†ã€‚\nå¯¹é¢‘ç¹ join çš„è¡¨å…ˆè®¾ç½® keyï¼štidytable::set_key()ã€‚\nå¯¹å†…å­˜æ•æ„Ÿåœºæ™¯å…ˆç”¨ select() å‡å°‘åˆ—ï¼Œå†è¿›è¡Œè®¡ç®—ã€‚\nä½¿ç”¨ by = å‚æ•°æ—¶æ³¨æ„åˆ†ç»„å­—æ®µç±»å‹ï¼Œé¿å…éšå¼å­—ç¬¦è½¬æ¢ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "tidytable - é«˜æ€§èƒ½æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3015-tidytable.html#æ‰©å±•é˜…è¯»ä¸å…³è”åŒ…",
    "href": "3015-tidytable.html#æ‰©å±•é˜…è¯»ä¸å…³è”åŒ…",
    "title": "tidytable æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "æ‰©å±•é˜…è¯»ä¸å…³è”åŒ…",
    "text": "æ‰©å±•é˜…è¯»ä¸å…³è”åŒ…\n\ndata.table å®˜æ–¹æ–‡æ¡£\ntidytable CRAN\nduckplyrï¼šDuckDB åç«¯çš„ dplyr åŠ é€Ÿ\narrowï¼šåˆ—å¼å­˜å‚¨ä¸å¤§æ•°æ®å¤„ç†",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "tidytable - é«˜æ€§èƒ½æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "3015-tidytable.html#æ€»ç»“",
    "href": "3015-tidytable.html#æ€»ç»“",
    "title": "tidytable æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\ntidytable è®©ä½ ä»¥ dplyr è¯­æ³•äº«å— data.table çš„æ€§èƒ½ä¼˜åŠ¿ï¼Œ éå¸¸é€‚åˆåœ¨æ•°æ®å¤„ç†é˜¶æ®µæå‡é€Ÿåº¦ä¸å¯è¯»æ€§ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "tidytable - é«˜æ€§èƒ½æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "1085-gee.html",
    "href": "1085-gee.html",
    "title": "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE) å®Œæ•´æ•™ç¨‹",
    "section": "",
    "text": "library(dplyr)\nlibrary(tidyr)\nlibrary(ggplot2)\nlibrary(geepack)\nlibrary(broom)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE)"
    ]
  },
  {
    "objectID": "1085-gee.html#æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "href": "1085-gee.html#æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "title": "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE) å®Œæ•´æ•™ç¨‹",
    "section": "æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "text": "æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯\nGEEï¼ˆå¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ï¼‰æ˜¯å¤„ç†é‡å¤æµ‹é‡ä¸ç›¸å…³æ•°æ®çš„å¸¸ç”¨æ–¹æ³•ã€‚ å®ƒä¸è¦æ±‚å®Œæ•´çš„éšæœºæ•ˆåº”åˆ†å¸ƒå‡è®¾ï¼Œè€Œæ˜¯å…³æ³¨æ€»ä½“å¹³å‡æ•ˆåº”ï¼Œ é€‚åˆé˜Ÿåˆ—éšè®¿ã€èšç±»è¯•éªŒã€åŒ»é™¢/ç¤¾åŒºåˆ†å±‚ç­‰â€œç›¸å…³è§‚æµ‹â€åœºæ™¯ã€‚\nå®ƒå¸¸ç”¨äºçºµå‘éšè®¿çš„é‡å¤æµ‹é‡æ•°æ®ã€åŒ»é™¢/ç­çº§ç­‰èšç±»æ•°æ®ï¼Œä»¥åŠå¸Œæœ›è·å¾—ç¨³å¥æ ‡å‡†è¯¯çš„å¹¿ä¹‰çº¿æ€§æ¨¡å‹åœºæ™¯ã€‚åœ¨è¿™äº›ç ”ç©¶é‡Œï¼ŒåŒä¸€ç°‡å†…çš„è§‚æµ‹ä¸å†ç‹¬ç«‹ï¼Œå› æ­¤éœ€è¦ GEE æ¥ä¿®æ­£ç›¸å…³æ€§å¸¦æ¥çš„åå·®ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE)"
    ]
  },
  {
    "objectID": "1085-gee.html#æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "href": "1085-gee.html#æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "title": "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE) å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "text": "æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ\nGEE å¯ä»¥ç†è§£ä¸ºâ€œå¹¿ä¹‰çº¿æ€§æ¨¡å‹ + ç›¸å…³ç»“æ„ä¿®æ­£â€ã€‚å®ƒå…ˆç”¨å’Œ GLM ç±»ä¼¼çš„å‡å€¼æ¨¡å‹æè¿°ç»“å±€ä¸åå˜é‡çš„å…³ç³»ï¼Œå†å¼•å…¥å·¥ä½œç›¸å…³ç»“æ„æ¥åˆ»ç”»åŒä¸€ç°‡å†…çš„ç›¸å…³æ€§ï¼Œæœ€åé€šè¿‡ç¨³å¥æ ‡å‡†è¯¯ä¿è¯æ¨æ–­å¯é ã€‚è¿™æ ·åšçš„ç»“æœæ˜¯ï¼ŒGEE æ›´å…³æ³¨æ€»ä½“å¹³å‡æ•ˆåº”ï¼Œè€Œä¸æ˜¯ä¸ªä½“å±‚é¢çš„éšæœºæ•ˆåº”ï¼Œå› æ­¤é€‚åˆå›ç­”ç¾¤ä½“å¹³å‡ç»“å±€çš„å˜åŒ–ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE)"
    ]
  },
  {
    "objectID": "1085-gee.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "href": "1085-gee.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "title": "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE) å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹å‡è®¾ä¸å‰æ",
    "text": "æ¨¡å‹å‡è®¾ä¸å‰æ\nGEE å‡è®¾ç°‡å†…ç›¸å…³ã€ç°‡é—´ç‹¬ç«‹ï¼Œå‡å€¼æ¨¡å‹ç»“æ„åˆç†ã€‚å³ä½¿å·¥ä½œç›¸å…³ç»“æ„æŒ‡å®šä¸å®Œå…¨å‡†ç¡®ï¼Œä¹Ÿå¯ä»¥ä¾èµ–ç¨³å¥æ ‡å‡†è¯¯ç»´æŒæ¨æ–­çš„å¯é æ€§ï¼Œä½†å‰ææ˜¯åå˜é‡ä¸ç»“å±€çš„å‡å€¼å…³ç³»è®¾ç½®æ­£ç¡®ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE)"
    ]
  },
  {
    "objectID": "1085-gee.html#æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "href": "1085-gee.html#æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "title": "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE) å®Œæ•´æ•™ç¨‹",
    "section": "æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "text": "æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰\nè¿™é‡Œæ¨¡æ‹Ÿä¸€ä¸ªéšè®¿æ•°æ®ï¼šæ¯ä½å—è¯•è€…åœ¨ 4 ä¸ªæ—¶é—´ç‚¹æµ‹é‡è¿ç»­ç»“å±€ã€‚\n\nset.seed(2026)\nsubjects &lt;- 120\nvisits &lt;- 4\n\nlong_data &lt;- tidyr::crossing(\n  subject_id = 1:subjects,\n  time = 1:visits\n) |&gt;\n  mutate(\n    treatment = if_else(subject_id %% 2 == 0, 1, 0),\n    subject_effect = rnorm(subjects)[subject_id],\n    time_effect = 0.4 * time,\n    outcome = 5 + 1.2 * treatment + time_effect + subject_effect + rnorm(n())\n  ) |&gt;\n  select(subject_id, time, treatment, outcome)\n\nlong_data\n\n# A tibble: 480 Ã— 4\n   subject_id  time treatment outcome\n        &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;   &lt;dbl&gt;\n 1          1     1         0    7.83\n 2          1     2         0    8.45\n 3          1     3         0    6.95\n 4          1     4         0    8.02\n 5          2     1         1    3.78\n 6          2     2         1    6.39\n 7          2     3         1    5.78\n 8          2     4         1    6.55\n 9          3     1         0    6.09\n10          3     2         0    6.97\n# â„¹ 470 more rows",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE)"
    ]
  },
  {
    "objectID": "1085-gee.html#åˆ†ææµç¨‹æ­¥éª¤",
    "href": "1085-gee.html#åˆ†ææµç¨‹æ­¥éª¤",
    "title": "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE) å®Œæ•´æ•™ç¨‹",
    "section": "åˆ†ææµç¨‹æ­¥éª¤",
    "text": "åˆ†ææµç¨‹æ­¥éª¤\nåˆ†ææµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºå››æ­¥ï¼šå…ˆå»ºç«‹å¿½ç•¥ç›¸å…³æ€§çš„åŸºçº¿æ¨¡å‹ï¼Œå†æŒ‡å®šå·¥ä½œç›¸å…³ç»“æ„æ‹Ÿåˆ GEEï¼Œä¹‹åæ¯”è¾ƒä¸åŒç›¸å…³ç»“æ„ä¸‹çš„ç»“æœï¼Œæœ€åè§£è¯»ç¨³å¥æ ‡å‡†è¯¯ä¸æ€»ä½“å¹³å‡æ•ˆåº”æ˜¯å¦ä¸€è‡´ã€‚è¿™ä¸€æµç¨‹å¼ºè°ƒâ€œå…ˆç†è§£ï¼Œå†ä¿®æ­£ï¼Œå†è§£é‡Šâ€ï¼Œé¿å…ä¸€å¼€å§‹å°±é™·å…¥æ¨¡å‹ç»†èŠ‚ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE)"
    ]
  },
  {
    "objectID": "1085-gee.html#ä»£ç å®ç°",
    "href": "1085-gee.html#ä»£ç å®ç°",
    "title": "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE) å®Œæ•´æ•™ç¨‹",
    "section": "ä»£ç å®ç°",
    "text": "ä»£ç å®ç°\n\n1. åŸºçº¿æ¨¡å‹ï¼ˆå¿½ç•¥ç›¸å…³ï¼‰\n\nglm_fit &lt;- glm(outcome ~ treatment + time, data = long_data)\nsummary(glm_fit)\n\n\nCall:\nglm(formula = outcome ~ treatment + time, data = long_data)\n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)   4.9186     0.1716  28.671  &lt; 2e-16 ***\ntreatment     1.5315     0.1297  11.810  &lt; 2e-16 ***\ntime          0.3635     0.0580   6.267 8.23e-10 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for gaussian family taken to be 2.018163)\n\n    Null deviance: 1323.40  on 479  degrees of freedom\nResidual deviance:  962.66  on 477  degrees of freedom\nAIC: 1704.2\n\nNumber of Fisher Scoring iterations: 2\n\n\n\n\n2. GEEï¼šç‹¬ç«‹ç›¸å…³ç»“æ„\n\ngee_ind &lt;- geeglm(\n  outcome ~ treatment + time,\n  id = subject_id,\n  data = long_data,\n  family = gaussian,\n  corstr = \"independence\"\n)\n\nsummary(gee_ind)\n\n\nCall:\ngeeglm(formula = outcome ~ treatment + time, family = gaussian, \n    data = long_data, id = subject_id, corstr = \"independence\")\n\n Coefficients:\n            Estimate Std.err   Wald Pr(&gt;|W|)    \n(Intercept)  4.91864 0.18890 677.97  &lt; 2e-16 ***\ntreatment    1.53153 0.20468  55.99 7.29e-14 ***\ntime         0.36347 0.04258  72.87  &lt; 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nCorrelation structure = independence \nEstimated Scale Parameters:\n\n            Estimate Std.err\n(Intercept)    2.006  0.1509\nNumber of clusters:   120  Maximum cluster size: 4 \n\n\n\n\n3. GEEï¼šäº¤æ¢ç›¸å…³ç»“æ„\n\ngee_exch &lt;- geeglm(\n  outcome ~ treatment + time,\n  id = subject_id,\n  data = long_data,\n  family = gaussian,\n  corstr = \"exchangeable\"\n)\n\nsummary(gee_exch)\n\n\nCall:\ngeeglm(formula = outcome ~ treatment + time, family = gaussian, \n    data = long_data, id = subject_id, corstr = \"exchangeable\")\n\n Coefficients:\n            Estimate Std.err  Wald Pr(&gt;|W|)    \n(Intercept)   4.9186  0.1889 678.0  &lt; 2e-16 ***\ntreatment     1.5315  0.2047  56.0  7.3e-14 ***\ntime          0.3635  0.0426  72.9  &lt; 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nCorrelation structure = exchangeable \nEstimated Scale Parameters:\n\n            Estimate Std.err\n(Intercept)     2.01   0.151\n  Link = identity \n\nEstimated Correlation Parameters:\n      Estimate Std.err\nalpha    0.502  0.0449\nNumber of clusters:   120  Maximum cluster size: 4",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE)"
    ]
  },
  {
    "objectID": "1085-gee.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "href": "1085-gee.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "title": "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE) å®Œæ•´æ•™ç¨‹",
    "section": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "text": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š\n\ncomparison &lt;- bind_rows(\n  tidy(glm_fit) |&gt; mutate(model = \"GLM\"),\n  tidy(gee_ind) |&gt; mutate(model = \"GEE (independence)\"),\n  tidy(gee_exch) |&gt; mutate(model = \"GEE (exchangeable)\")\n)\n\ncomparison\n\n# A tibble: 9 Ã— 6\n  term        estimate std.error statistic   p.value model             \n  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;             \n1 (Intercept)    4.92     0.172      28.7  7.79e-106 GLM               \n2 treatment      1.53     0.130      11.8  2.07e- 28 GLM               \n3 time           0.363    0.0580      6.27 8.23e- 10 GLM               \n4 (Intercept)    4.92     0.189     678.   0         GEE (independence)\n5 treatment      1.53     0.205      56.0  7.29e- 14 GEE (independence)\n6 time           0.363    0.0426     72.9  0         GEE (independence)\n7 (Intercept)    4.92     0.189     678.   0         GEE (exchangeable)\n8 treatment      1.53     0.205      56.0  7.29e- 14 GEE (exchangeable)\n9 time           0.363    0.0426     72.9  0         GEE (exchangeable)\n\n\n\ncomparison |&gt;\n  filter(term != \"(Intercept)\") |&gt;\n  ggplot(aes(x = estimate, y = model, color = term)) +\n  geom_point(size = 3) +\n  geom_errorbarh(aes(xmin = estimate - 1.96 * std.error, xmax = estimate + 1.96 * std.error), height = 0.2) +\n  labs(\n    title = \"GEE ä¸ GLM å‚æ•°å¯¹æ¯”\",\n    x = \"ä¼°è®¡å€¼ (95% CI)\",\n    y = NULL\n  ) +\n  theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\næŠ¥å‘Šæ—¶å»ºè®®æ˜ç¡®è¯´æ˜ä½¿ç”¨çš„ç›¸å…³ç»“æ„ï¼ˆindependence æˆ– exchangeableï¼‰ï¼Œå¹¶ç»™å‡ºç¨³å¥æ ‡å‡†è¯¯ä¸ç½®ä¿¡åŒºé—´ã€‚è§£è¯»æ—¶å¼ºè°ƒ GEE çš„ç³»æ•°ä»£è¡¨æ€»ä½“å¹³å‡æ•ˆåº”ï¼Œè€Œä¸æ˜¯ä¸ªä½“å±‚é¢çš„éšæœºæ•ˆåº”ã€‚ ## å¸¸è§é”™è¯¯ä¸çº å\nå¸¸è§é”™è¯¯åŒ…æ‹¬å¿½ç•¥ç›¸å…³æ€§ç›´æ¥ä½¿ç”¨ GLMã€éšæ„é€‰æ‹©ç›¸å…³ç»“æ„ã€ç°‡ ID æ ‡è®°é”™è¯¯ä»¥åŠç¼ºå¤±å€¼æœªå¤„ç†ã€‚å®è·µä¸­å»ºè®®é€šè¿‡æ¯”è¾ƒä¸åŒç›¸å…³ç»“æ„çš„ç»“æœåšæ•æ„Ÿæ€§åˆ†æï¼Œå¹¶åœ¨å»ºæ¨¡å‰æ˜ç¡®ç°‡å®šä¹‰ä¸ç¼ºå¤±å¤„ç†ç­–ç•¥ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE)"
    ]
  },
  {
    "objectID": "1085-gee.html#å¸¸è§é”™è¯¯ä¸çº å",
    "href": "1085-gee.html#å¸¸è§é”™è¯¯ä¸çº å",
    "title": "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE) å®Œæ•´æ•™ç¨‹",
    "section": "å¸¸è§é”™è¯¯ä¸çº å",
    "text": "å¸¸è§é”™è¯¯ä¸çº å\n\nå¿½ç•¥ç›¸å…³æ€§ï¼šç›´æ¥ç”¨ GLM ä¼šä½ä¼°æ ‡å‡†è¯¯ã€‚\nç›¸å…³ç»“æ„ä¹±é€‰ï¼šå¯åšæ•æ„Ÿæ€§åˆ†æå¯¹æ¯”å¤šä¸ªç»“æ„ã€‚\nç°‡ ID é”™è¯¯ï¼šid å¿…é¡»å¯¹åº”ç°‡çº§åˆ«ã€‚\nç¼ºå¤±å€¼æœªå¤„ç†ï¼šåº”åœ¨å»ºæ¨¡å‰å¤„ç†ç¼ºå¤±ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE)"
    ]
  },
  {
    "objectID": "1085-gee.html#è¿›é˜¶æ‰©å±•",
    "href": "1085-gee.html#è¿›é˜¶æ‰©å±•",
    "title": "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE) å®Œæ•´æ•™ç¨‹",
    "section": "è¿›é˜¶æ‰©å±•",
    "text": "è¿›é˜¶æ‰©å±•\nè¿›é˜¶åº”ç”¨å¯ä»¥å°è¯• corstr = \"ar1\" å¤„ç†æ—¶é—´åºåˆ—ç›¸å…³ï¼Œæˆ–åœ¨äºŒåˆ†ç±»ç»“å±€ä¸‹ä½¿ç”¨ family = binomialã€‚è‹¥ç ”ç©¶å…³æ³¨ä¸ªä½“å·®å¼‚ï¼Œä¹Ÿå¯ä»¥ä¸æ··åˆæ•ˆåº”æ¨¡å‹å¹¶è¡Œåˆ†æï¼Œç”¨æ¥æ¯”è¾ƒæ€»ä½“æ•ˆåº”ä¸ä¸ªä½“æ•ˆåº”çš„å·®å¼‚ã€‚ ## æ€»ç»“\nGEE æ˜¯å¤„ç†ç›¸å…³æ•°æ®çš„ç¨³å¥æ–¹æ³•ï¼Œå¼ºè°ƒæ€»ä½“å¹³å‡æ•ˆåº”ã€‚ å¯¹äºçºµå‘ä¸èšç±»æ•°æ®ï¼Œå»ºè®®ä»¥ GEE ä½œä¸ºåŸºçº¿æ¨¡å‹ï¼Œ å¹¶é€šè¿‡ä¸åŒç›¸å…³ç»“æ„è¿›è¡Œæ•æ„Ÿæ€§åˆ†æã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE)"
    ]
  },
  {
    "objectID": "1085-gee.html#æ€»ç»“",
    "href": "1085-gee.html#æ€»ç»“",
    "title": "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE) å®Œæ•´æ•™ç¨‹",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nGEE æ˜¯å¤„ç†ç›¸å…³æ•°æ®çš„ç¨³å¥æ–¹æ³•ï¼Œå¼ºè°ƒæ€»ä½“å¹³å‡æ•ˆåº”ã€‚ å¯¹äºçºµå‘ä¸èšç±»æ•°æ®ï¼Œå»ºè®®ä»¥ GEE ä½œä¸ºåŸºçº¿æ¨¡å‹ï¼Œ å¹¶é€šè¿‡ä¸åŒç›¸å…³ç»“æ„è¿›è¡Œæ•æ„Ÿæ€§åˆ†æã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE)"
    ]
  },
  {
    "objectID": "1086-multiple-imputation.html",
    "href": "1086-multiple-imputation.html",
    "title": "å¤šé‡æ’è¡¥å®Œæ•´æ•™ç¨‹",
    "section": "",
    "text": "library(dplyr)\nlibrary(ggplot2)\nlibrary(mice)\nlibrary(broom)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šé‡æ’è¡¥"
    ]
  },
  {
    "objectID": "1086-multiple-imputation.html#æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "href": "1086-multiple-imputation.html#æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "title": "å¤šé‡æ’è¡¥å®Œæ•´æ•™ç¨‹",
    "section": "æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "text": "æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯\nå¤šé‡æ’è¡¥ï¼ˆMultiple Imputation, MIï¼‰æ˜¯ç¼ºå¤±æ•°æ®å¤„ç†ä¸­æœ€ç¨³å¥çš„æ–¹æ³•ä¹‹ä¸€ã€‚ å®ƒé€šè¿‡â€œå¤šæ¬¡è¡¥å…¨æ•°æ® + å¤šæ¬¡å»ºæ¨¡ + æ±‡æ€»ç»“æœâ€ï¼Œé™ä½å•æ¬¡æ’è¡¥çš„ä¸ç¡®å®šæ€§ã€‚\nå®ƒé€‚åˆç¼ºå¤±æ¯”ä¾‹ä¸­ç­‰ã€ä½†ä¸èƒ½ç®€å•åˆ é™¤æ ·æœ¬çš„ç ”ç©¶ï¼Œå°¤å…¶åœ¨éœ€è¦ç»´æŒæ ·æœ¬é‡ä¸ç»Ÿè®¡æ•ˆèƒ½æ—¶éå¸¸å…³é”®ã€‚å¦‚æœç¼ºå¤±æœºåˆ¶è‡³å°‘å¯è§†ä¸º MCAR æˆ– MARï¼Œå¤šé‡æ’è¡¥å¾€å¾€èƒ½ç»™å‡ºæ›´ç¨³å¥çš„æ¨æ–­ã€‚ ## æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ\nå¤šé‡æ’è¡¥çš„æ ¸å¿ƒæµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºä¸‰ä¸ªç¯èŠ‚ï¼šå…ˆåŸºäºå·²æœ‰å˜é‡ç”Ÿæˆå¤šä¸ªâ€œå®Œæ•´æ•°æ®é›†â€ï¼Œå†åœ¨æ¯ä¸ªæ•°æ®é›†ä¸Šç‹¬ç«‹å»ºæ¨¡ï¼Œæœ€åç”¨ Rubin æ³•åˆ™æ±‡æ€»ç³»æ•°å’Œæ ‡å‡†è¯¯ã€‚å®ƒçš„å…³é”®ä¼˜åŠ¿æ˜¯æŠŠâ€œç¼ºå¤±çš„ä¸ç¡®å®šæ€§â€ä¿ç•™ä¸‹æ¥ï¼Œé¿å…å•æ¬¡æ’è¡¥å¸¦æ¥çš„è¿‡åº¦è‡ªä¿¡ã€‚ ## æ¨¡å‹å‡è®¾ä¸å‰æ\nå¤šé‡æ’è¡¥è¦æ±‚ç¼ºå¤±æœºåˆ¶è‡³å°‘æ˜¯ MARï¼ˆMissing At Randomï¼‰ï¼Œæ’è¡¥æ¨¡å‹åº”åŒ…å«ä¸ç¼ºå¤±ç›¸å…³çš„å…³é”®å˜é‡ï¼Œå¹¶ä¿è¯æ¯æ¬¡æ’è¡¥å½¼æ­¤ç‹¬ç«‹ã€‚åªè¦è¿™äº›æ¡ä»¶å¤§ä½“æˆç«‹ï¼ŒMI çš„æ¨æ–­é€šå¸¸æ¯”å®Œå…¨æ¡ˆä¾‹æ›´å¯é ã€‚ ## é€šä¿—ä¸¾ä¾‹ï¼šä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥åˆ æ‰ç¼ºå¤±æ ·æœ¬\nå¦‚æœä½ æŠŠç¼ºå¤±æ ·æœ¬å…¨éƒ¨åˆ é™¤ï¼Œæ ·æœ¬é‡ä¼šå˜å°ï¼Œç»Ÿè®¡æ•ˆèƒ½ä¸‹é™ã€‚ æ›´ä¸¥é‡çš„æ˜¯ï¼šå¦‚æœç¼ºå¤±å¹¶ä¸æ˜¯éšæœºçš„ï¼ˆä¾‹å¦‚é«˜ BMI äººç¾¤æ›´å®¹æ˜“ç¼ºå¤±ï¼‰ï¼Œ ç›´æ¥åˆ é™¤ä¼šæ”¹å˜æ ·æœ¬ç»“æ„ï¼Œè®©ç»“è®ºåå‘â€œæ›´å¥åº·çš„äººç¾¤â€ã€‚\nå¤šé‡æ’è¡¥çš„ä»·å€¼å°±åœ¨äºï¼šå®ƒå°½é‡ä¿ç•™åŸå§‹æ ·æœ¬ç»“æ„ï¼Œå¹¶æŠŠç¼ºå¤±çš„ä¸ç¡®å®šæ€§ è½¬åŒ–ä¸ºç»Ÿè®¡æ¨æ–­çš„ä¸€éƒ¨åˆ†ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šé‡æ’è¡¥"
    ]
  },
  {
    "objectID": "1086-multiple-imputation.html#æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "href": "1086-multiple-imputation.html#æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "title": "å¤šé‡æ’è¡¥å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "text": "æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ\nå¤šé‡æ’è¡¥çš„æ ¸å¿ƒæµç¨‹æ˜¯ï¼š\n\næ’è¡¥ï¼šåŸºäºå·²æœ‰å˜é‡ç”Ÿæˆå¤šä¸ªâ€œå®Œæ•´æ•°æ®é›†â€\nåˆ†æï¼šåœ¨æ¯ä¸ªå®Œæ•´æ•°æ®é›†ä¸Šç‹¬ç«‹å»ºæ¨¡\næ±‡æ€»ï¼šç”¨ Rubin æ³•åˆ™æ±‡æ€»ç³»æ•°ä¸æ ‡å‡†è¯¯\n\nå®ƒçš„å…³é”®ä¼˜åŠ¿æ˜¯èƒ½ä¿ç•™ç¼ºå¤±å€¼çš„ä¸ç¡®å®šæ€§ï¼Œé¿å…å•æ¬¡æ’è¡¥çš„è¿‡åº¦è‡ªä¿¡ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šé‡æ’è¡¥"
    ]
  },
  {
    "objectID": "1086-multiple-imputation.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "href": "1086-multiple-imputation.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "title": "å¤šé‡æ’è¡¥å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹å‡è®¾ä¸å‰æ",
    "text": "æ¨¡å‹å‡è®¾ä¸å‰æ\n\nç¼ºå¤±æœºåˆ¶è‡³å°‘æ˜¯ MARï¼ˆMissing At Randomï¼‰ã€‚\næ’è¡¥æ¨¡å‹åŒ…å«ä¸ç¼ºå¤±ç›¸å…³çš„å˜é‡ã€‚\næ¯æ¬¡æ’è¡¥ç›¸äº’ç‹¬ç«‹ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šé‡æ’è¡¥"
    ]
  },
  {
    "objectID": "1086-multiple-imputation.html#æ•°æ®å‡†å¤‡ä¸ç¼ºå¤±æ¨¡å¼",
    "href": "1086-multiple-imputation.html#æ•°æ®å‡†å¤‡ä¸ç¼ºå¤±æ¨¡å¼",
    "title": "å¤šé‡æ’è¡¥å®Œæ•´æ•™ç¨‹",
    "section": "æ•°æ®å‡†å¤‡ä¸ç¼ºå¤±æ¨¡å¼",
    "text": "æ•°æ®å‡†å¤‡ä¸ç¼ºå¤±æ¨¡å¼\n\nset.seed(2026)\nbase_data &lt;- tibble::tibble(\n  age = round(rnorm(200, 45, 12), 1),\n  bmi = round(rnorm(200, 24, 4), 1),\n  smoke = sample(c(\"yes\", \"no\"), 200, replace = TRUE),\n  outcome = rnorm(200, 5, 1.5)\n)\n\nmissing_data &lt;- base_data |&gt;\n  mutate(\n    bmi = if_else(runif(200) &lt; 0.2, NA_real_, bmi),\n    outcome = if_else(runif(200) &lt; 0.15, NA_real_, outcome)\n  )\n\nmice::md.pattern(missing_data)\n\n\n\n\n\n\n\n\n    age smoke outcome bmi   \n141   1     1       1   1  0\n31    1     1       1   0  1\n20    1     1       0   1  1\n8     1     1       0   0  2\n      0     0      28  39 67",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šé‡æ’è¡¥"
    ]
  },
  {
    "objectID": "1086-multiple-imputation.html#åˆ†ææµç¨‹æ­¥éª¤",
    "href": "1086-multiple-imputation.html#åˆ†ææµç¨‹æ­¥éª¤",
    "title": "å¤šé‡æ’è¡¥å®Œæ•´æ•™ç¨‹",
    "section": "åˆ†ææµç¨‹æ­¥éª¤",
    "text": "åˆ†ææµç¨‹æ­¥éª¤\nåˆ†ææµç¨‹å¯ä»¥ç†è§£ä¸ºå››æ­¥ï¼šå…ˆæ£€æŸ¥ç¼ºå¤±æ¨¡å¼å¹¶ç¡®å®šåˆé€‚çš„æ’è¡¥æ–¹æ³•ï¼Œå†æ‰§è¡Œå¤šé‡æ’è¡¥ï¼Œéšååœ¨æ¯ä¸ªæ’è¡¥æ•°æ®é›†ä¸Šåˆ†åˆ«å»ºæ¨¡ï¼Œæœ€åç”¨ Rubin æ³•åˆ™æ±‡æ€»ç»“æœå¹¶è§£é‡Šä¸ç¡®å®šæ€§ã€‚è¿™ç§åˆ†é˜¶æ®µæ€è·¯èƒ½å¸®åŠ©è¯»è€…ç†è§£â€œæ’è¡¥åªæ˜¯ç¬¬ä¸€æ­¥ï¼Œæ¨æ–­ä»è¦å›åˆ°æ¨¡å‹ä¸Šâ€ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šé‡æ’è¡¥"
    ]
  },
  {
    "objectID": "1086-multiple-imputation.html#ä»£ç å®ç°",
    "href": "1086-multiple-imputation.html#ä»£ç å®ç°",
    "title": "å¤šé‡æ’è¡¥å®Œæ•´æ•™ç¨‹",
    "section": "ä»£ç å®ç°",
    "text": "ä»£ç å®ç°\n\n1. å¤šé‡æ’è¡¥\n\nset.seed(2026)\nimp &lt;- mice(\n  missing_data,\n  m = 5,\n  method = \"pmm\",\n  maxit = 10,\n  seed = 2026\n)\n\n\n iter imp variable\n  1   1  bmi  outcome\n  1   2  bmi  outcome\n  1   3  bmi  outcome\n  1   4  bmi  outcome\n  1   5  bmi  outcome\n  2   1  bmi  outcome\n  2   2  bmi  outcome\n  2   3  bmi  outcome\n  2   4  bmi  outcome\n  2   5  bmi  outcome\n  3   1  bmi  outcome\n  3   2  bmi  outcome\n  3   3  bmi  outcome\n  3   4  bmi  outcome\n  3   5  bmi  outcome\n  4   1  bmi  outcome\n  4   2  bmi  outcome\n  4   3  bmi  outcome\n  4   4  bmi  outcome\n  4   5  bmi  outcome\n  5   1  bmi  outcome\n  5   2  bmi  outcome\n  5   3  bmi  outcome\n  5   4  bmi  outcome\n  5   5  bmi  outcome\n  6   1  bmi  outcome\n  6   2  bmi  outcome\n  6   3  bmi  outcome\n  6   4  bmi  outcome\n  6   5  bmi  outcome\n  7   1  bmi  outcome\n  7   2  bmi  outcome\n  7   3  bmi  outcome\n  7   4  bmi  outcome\n  7   5  bmi  outcome\n  8   1  bmi  outcome\n  8   2  bmi  outcome\n  8   3  bmi  outcome\n  8   4  bmi  outcome\n  8   5  bmi  outcome\n  9   1  bmi  outcome\n  9   2  bmi  outcome\n  9   3  bmi  outcome\n  9   4  bmi  outcome\n  9   5  bmi  outcome\n  10   1  bmi  outcome\n  10   2  bmi  outcome\n  10   3  bmi  outcome\n  10   4  bmi  outcome\n  10   5  bmi  outcome\n\nimp\n\nClass: mids\nNumber of multiple imputations:  5 \nImputation methods:\n    age     bmi   smoke outcome \n     \"\"   \"pmm\"      \"\"   \"pmm\" \nPredictorMatrix:\n        age bmi smoke outcome\nage       0   1     0       1\nbmi       1   0     0       1\nsmoke     1   1     0       1\noutcome   1   1     0       0\nNumber of logged events:  1 \n  it im dep     meth   out\n1  0  0     constant smoke\n\n\n\nplot(imp)\n\n\n\n\n\n\n\n\n\n\n2. åœ¨æ’è¡¥æ•°æ®ä¸Šå»ºæ¨¡\n\nmi_fit &lt;- with(\n  imp,\n  lm(outcome ~ age + bmi + smoke)\n)\n\nmi_fit\n\ncall :\nwith.mids(data = imp, expr = lm(outcome ~ age + bmi + smoke))\n\ncall1 :\nmice(data = missing_data, m = 5, method = \"pmm\", maxit = 10, \n    seed = 2026)\n\nnmis :\n[1]  0 39  0 28\n\nanalyses :\n[[1]]\n\nCall:\nlm(formula = outcome ~ age + bmi + smoke)\n\nCoefficients:\n(Intercept)          age          bmi     smokeyes  \n  3.5175998    0.0007881    0.0573891    0.0613578  \n\n\n[[2]]\n\nCall:\nlm(formula = outcome ~ age + bmi + smoke)\n\nCoefficients:\n(Intercept)          age          bmi     smokeyes  \n   3.745367    -0.006973     0.059598     0.103489  \n\n\n[[3]]\n\nCall:\nlm(formula = outcome ~ age + bmi + smoke)\n\nCoefficients:\n(Intercept)          age          bmi     smokeyes  \n   3.187812    -0.002788     0.076425     0.103409  \n\n\n[[4]]\n\nCall:\nlm(formula = outcome ~ age + bmi + smoke)\n\nCoefficients:\n(Intercept)          age          bmi     smokeyes  \n  3.4516391   -0.0005742    0.0563336    0.1230034  \n\n\n[[5]]\n\nCall:\nlm(formula = outcome ~ age + bmi + smoke)\n\nCoefficients:\n(Intercept)          age          bmi     smokeyes  \n  4.0859357    0.0007367    0.0314595    0.0809076  \n\n\n\n\n3. æ±‡æ€»ç»“æœ\n\npooled &lt;- pool(mi_fit)\nsummary(pooled)\n\n         term     estimate  std.error  statistic        df      p.value\n1 (Intercept)  3.597670791 0.83297873  4.3190428  61.97850 5.761773e-05\n2         age -0.001761995 0.00893651 -0.1971681  80.25755 8.441945e-01\n3         bmi  0.056241131 0.03140925  1.7905915  31.01638 8.312464e-02\n4    smokeyes  0.094433192 0.19512569  0.4839608 187.75546 6.289777e-01",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šé‡æ’è¡¥"
    ]
  },
  {
    "objectID": "1086-multiple-imputation.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "href": "1086-multiple-imputation.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "title": "å¤šé‡æ’è¡¥å®Œæ•´æ•™ç¨‹",
    "section": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "text": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š\n\npooled_summary &lt;- summary(pooled) |&gt;\n  as.data.frame()\n\npooled_summary\n\n         term     estimate  std.error  statistic        df      p.value\n1 (Intercept)  3.597670791 0.83297873  4.3190428  61.97850 5.761773e-05\n2         age -0.001761995 0.00893651 -0.1971681  80.25755 8.441945e-01\n3         bmi  0.056241131 0.03140925  1.7905915  31.01638 8.312464e-02\n4    smokeyes  0.094433192 0.19512569  0.4839608 187.75546 6.289777e-01\n\n\n\npooled_summary |&gt;\n  filter(term != \"(Intercept)\") |&gt;\n  ggplot(aes(x = estimate, y = term)) +\n  geom_point(size = 3, color = \"#2563eb\") +\n  geom_errorbarh(aes(xmin = estimate - 1.96 * std.error, xmax = estimate + 1.96 * std.error), height = 0.2) +\n  labs(\n    title = \"å¤šé‡æ’è¡¥åçš„å›å½’ç³»æ•°\",\n    x = \"ä¼°è®¡å€¼ (95% CI)\",\n    y = NULL\n  ) +\n  theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\næŠ¥å‘Šå»ºè®®\n\næŠ¥å‘Šæ’è¡¥æ¬¡æ•° m ä¸æ’è¡¥æ–¹æ³•ï¼ˆå¦‚ pmmï¼‰ã€‚\nå¯¹æ¯”å®Œå…¨æ¡ˆä¾‹åˆ†æä¸æ’è¡¥åˆ†æçš„å·®å¼‚ã€‚\næç¤ºç¼ºå¤±æœºåˆ¶å‡è®¾ä¸æ•æ„Ÿæ€§åˆ†æã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šé‡æ’è¡¥"
    ]
  },
  {
    "objectID": "1086-multiple-imputation.html#å¸¸è§é”™è¯¯ä¸çº å",
    "href": "1086-multiple-imputation.html#å¸¸è§é”™è¯¯ä¸çº å",
    "title": "å¤šé‡æ’è¡¥å®Œæ•´æ•™ç¨‹",
    "section": "å¸¸è§é”™è¯¯ä¸çº å",
    "text": "å¸¸è§é”™è¯¯ä¸çº å\nå¸¸è§é—®é¢˜åŒ…æ‹¬æ’è¡¥æ¨¡å‹è¿‡äºç®€å•ã€æ’è¡¥æ¬¡æ•°å¤ªå°‘ã€å¿½è§†ç¼ºå¤±æœºåˆ¶ä»¥åŠè¯¯æŠŠå•ä¸ªæ’è¡¥ç»“æœå½“æœ€ç»ˆç»“è®ºã€‚è§£å†³æ–¹å¼æ˜¯æŠŠä¸ç¼ºå¤±ç›¸å…³çš„å˜é‡çº³å…¥æ’è¡¥æ¨¡å‹ï¼Œä¿è¯è¶³å¤Ÿçš„ mï¼Œå¹¶å§‹ç»ˆç”¨ pool() æ±‡æ€»ç»“æœï¼ŒåŒæ—¶å¯¹å¯èƒ½çš„ MNAR åšæ•æ„Ÿæ€§åˆ†æã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šé‡æ’è¡¥"
    ]
  },
  {
    "objectID": "1086-multiple-imputation.html#è¿›é˜¶æ‰©å±•",
    "href": "1086-multiple-imputation.html#è¿›é˜¶æ‰©å±•",
    "title": "å¤šé‡æ’è¡¥å®Œæ•´æ•™ç¨‹",
    "section": "è¿›é˜¶æ‰©å±•",
    "text": "è¿›é˜¶æ‰©å±•\nè¿›é˜¶åšæ³•åŒ…æ‹¬å°è¯• mice::cart æˆ– mice::rf ç­‰éå‚æ•°æ’è¡¥æ–¹æ³•ï¼Œå¯¹åˆ†ç±»å˜é‡ä½¿ç”¨ logreg æˆ– polyregï¼Œå¹¶é€šè¿‡ mice::complete() æ£€æŸ¥æ’è¡¥æ•°æ®æ˜¯å¦åˆç†ã€‚è¿™äº›æ­¥éª¤èƒ½æé«˜æ’è¡¥æ¨¡å‹çš„é²æ£’æ€§ã€‚ ## æ€»ç»“\nå¤šé‡æ’è¡¥æ˜¯å¤„ç†ç¼ºå¤±æ•°æ®çš„æ ‡å‡†æ–¹æ³•ï¼Œå…¼é¡¾æ•ˆç‡ä¸ç¨³å¥æ€§ã€‚ åªè¦åˆç†é€‰æ‹©æ’è¡¥æ¨¡å‹å’Œå˜é‡ï¼Œå°±èƒ½æ˜¾è‘—æé«˜æ¨æ–­å¯ä¿¡åº¦ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šé‡æ’è¡¥"
    ]
  },
  {
    "objectID": "1086-multiple-imputation.html#æ€»ç»“",
    "href": "1086-multiple-imputation.html#æ€»ç»“",
    "title": "å¤šé‡æ’è¡¥å®Œæ•´æ•™ç¨‹",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nå¤šé‡æ’è¡¥æ˜¯å¤„ç†ç¼ºå¤±æ•°æ®çš„æ ‡å‡†æ–¹æ³•ï¼Œå…¼é¡¾æ•ˆç‡ä¸ç¨³å¥æ€§ã€‚ åªè¦åˆç†é€‰æ‹©æ’è¡¥æ¨¡å‹å’Œå˜é‡ï¼Œå°±èƒ½æ˜¾è‘—æé«˜æ¨æ–­å¯ä¿¡åº¦ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šé‡æ’è¡¥"
    ]
  },
  {
    "objectID": "1085-gee.html#é€šä¿—ä¸¾ä¾‹ä¸ºä»€ä¹ˆéœ€è¦-gee",
    "href": "1085-gee.html#é€šä¿—ä¸¾ä¾‹ä¸ºä»€ä¹ˆéœ€è¦-gee",
    "title": "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE) å®Œæ•´æ•™ç¨‹",
    "section": "é€šä¿—ä¸¾ä¾‹ï¼šä¸ºä»€ä¹ˆéœ€è¦ GEE",
    "text": "é€šä¿—ä¸¾ä¾‹ï¼šä¸ºä»€ä¹ˆéœ€è¦ GEE\næƒ³è±¡æˆ‘ä»¬å¯¹ 100 åæ‚£è€…åœ¨ 4 æ¬¡éšè®¿ä¸­é‡å¤æµ‹é‡è¡€å‹ã€‚ å¦‚æœç›´æ¥æŠŠ 400 æ¡è®°å½•å½“æˆç‹¬ç«‹æ ·æœ¬ï¼Œä¼šå¿½ç•¥åŒä¸€æ‚£è€… ä¹‹é—´çš„â€œç›¸ä¼¼æ€§â€ï¼Œå¯¼è‡´æ ‡å‡†è¯¯è¢«ä½ä¼°ï¼Œç»“è®ºçœ‹èµ·æ¥è¿‡äºæ˜¾è‘—ã€‚ GEE çš„ä»·å€¼å°±åœ¨äºï¼šå®ƒæ‰¿è®¤â€œåŒä¸€æ‚£è€…çš„è®°å½•æ›´æ¥è¿‘â€ï¼Œ ä»è€Œä¿®æ­£æ ‡å‡†è¯¯ï¼Œè®©ç»“è®ºæ›´ç¨³å¥ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE)"
    ]
  },
  {
    "objectID": "1085-gee.html#æ–¹æ³•å¯¹æ¯”gee-vs-æ··åˆæ•ˆåº”æ¨¡å‹",
    "href": "1085-gee.html#æ–¹æ³•å¯¹æ¯”gee-vs-æ··åˆæ•ˆåº”æ¨¡å‹",
    "title": "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE) å®Œæ•´æ•™ç¨‹",
    "section": "æ–¹æ³•å¯¹æ¯”ï¼šGEE vs æ··åˆæ•ˆåº”æ¨¡å‹",
    "text": "æ–¹æ³•å¯¹æ¯”ï¼šGEE vs æ··åˆæ•ˆåº”æ¨¡å‹\nGEE å…³æ³¨æ€»ä½“å¹³å‡æ•ˆåº”ï¼Œé€‚åˆå›ç­”ç¾¤ä½“å¹³å‡å·®å¼‚æˆ–æ”¿ç­–æ•ˆæœé—®é¢˜ï¼›æ··åˆæ•ˆåº”æ¨¡å‹å¼ºè°ƒä¸ªä½“å·®å¼‚ï¼Œæ›´é€‚åˆç ”ç©¶ä¸ªä½“è½¨è¿¹æ˜¯å¦ä¸åŒã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœä½ çš„ç›®æ ‡æ˜¯â€œæ²»ç–—æ˜¯å¦æ”¹å–„äº†æ€»ä½“å¹³å‡ç»“å±€â€ï¼ŒGEE æ›´åˆé€‚ï¼›å¦‚æœä½ å…³å¿ƒçš„æ˜¯â€œæ¯ä¸ªäººå˜åŒ–æ˜¯å¦ä¸€æ ·â€ï¼Œæ··åˆæ•ˆåº”æ¨¡å‹æ›´åˆé€‚ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE)"
    ]
  },
  {
    "objectID": "1085-gee.html#å‚æ•°è®²è§£ä¸ä½¿ç”¨è¦ç‚¹",
    "href": "1085-gee.html#å‚æ•°è®²è§£ä¸ä½¿ç”¨è¦ç‚¹",
    "title": "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE) å®Œæ•´æ•™ç¨‹",
    "section": "å‚æ•°è®²è§£ä¸ä½¿ç”¨è¦ç‚¹",
    "text": "å‚æ•°è®²è§£ä¸ä½¿ç”¨è¦ç‚¹\nid ç”¨äºæ ‡è®°èšç±»æˆ–å—è¯•è€…ç¼–å·ï¼Œå†³å®šå“ªäº›æ ·æœ¬å½¼æ­¤ç›¸å…³ï¼›corstr ç”¨äºæè¿°ç›¸å…³ç»“æ„ï¼Œå¸¸è§çš„æœ‰ independenceã€exchangeable å’Œ ar1ï¼›family ä¸ GLM ç±»ä¼¼ï¼Œç”¨æ¥å®šä¹‰ç»“å±€ç±»å‹ï¼ˆè¿ç»­ã€äºŒåˆ†ç±»ã€è®¡æ•°ï¼‰ã€‚å®é™…æ“ä½œæ—¶ï¼Œè‹¥ä½ å¯¹ç›¸å…³æ€§ç»“æ„ä¸äº†è§£ï¼Œå¯å…ˆä» independence ä½œä¸ºåŸºçº¿ï¼Œå†å°è¯• exchangeable æˆ– ar1 çœ‹ç»“æœæ˜¯å¦ç¨³å®šã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE)"
    ]
  },
  {
    "objectID": "1086-multiple-imputation.html#é€šä¿—ä¸¾ä¾‹ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥åˆ æ‰ç¼ºå¤±æ ·æœ¬",
    "href": "1086-multiple-imputation.html#é€šä¿—ä¸¾ä¾‹ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥åˆ æ‰ç¼ºå¤±æ ·æœ¬",
    "title": "å¤šé‡æ’è¡¥å®Œæ•´æ•™ç¨‹",
    "section": "é€šä¿—ä¸¾ä¾‹ï¼šä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥åˆ æ‰ç¼ºå¤±æ ·æœ¬",
    "text": "é€šä¿—ä¸¾ä¾‹ï¼šä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥åˆ æ‰ç¼ºå¤±æ ·æœ¬\nå¦‚æœä½ æŠŠç¼ºå¤±æ ·æœ¬å…¨éƒ¨åˆ é™¤ï¼Œæ ·æœ¬é‡ä¼šå˜å°ï¼Œç»Ÿè®¡æ•ˆèƒ½ä¸‹é™ã€‚ æ›´ä¸¥é‡çš„æ˜¯ï¼šå¦‚æœç¼ºå¤±å¹¶ä¸æ˜¯éšæœºçš„ï¼ˆä¾‹å¦‚é«˜ BMI äººç¾¤æ›´å®¹æ˜“ç¼ºå¤±ï¼‰ï¼Œ ç›´æ¥åˆ é™¤ä¼šæ”¹å˜æ ·æœ¬ç»“æ„ï¼Œè®©ç»“è®ºåå‘â€œæ›´å¥åº·çš„äººç¾¤â€ã€‚\nå¤šé‡æ’è¡¥çš„ä»·å€¼å°±åœ¨äºï¼šå®ƒå°½é‡ä¿ç•™åŸå§‹æ ·æœ¬ç»“æ„ï¼Œå¹¶æŠŠç¼ºå¤±çš„ä¸ç¡®å®šæ€§ è½¬åŒ–ä¸ºç»Ÿè®¡æ¨æ–­çš„ä¸€éƒ¨åˆ†ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šé‡æ’è¡¥"
    ]
  },
  {
    "objectID": "1086-multiple-imputation.html#æ–¹æ³•å¯¹æ¯”å®Œå…¨æ¡ˆä¾‹-vs-å•æ¬¡æ’è¡¥-vs-å¤šé‡æ’è¡¥",
    "href": "1086-multiple-imputation.html#æ–¹æ³•å¯¹æ¯”å®Œå…¨æ¡ˆä¾‹-vs-å•æ¬¡æ’è¡¥-vs-å¤šé‡æ’è¡¥",
    "title": "å¤šé‡æ’è¡¥å®Œæ•´æ•™ç¨‹",
    "section": "æ–¹æ³•å¯¹æ¯”ï¼šå®Œå…¨æ¡ˆä¾‹ vs å•æ¬¡æ’è¡¥ vs å¤šé‡æ’è¡¥",
    "text": "æ–¹æ³•å¯¹æ¯”ï¼šå®Œå…¨æ¡ˆä¾‹ vs å•æ¬¡æ’è¡¥ vs å¤šé‡æ’è¡¥\nå®Œå…¨æ¡ˆä¾‹åˆ†æç®€å•ä½†å¯èƒ½æœ‰åå€šï¼ŒåŒæ—¶ä¼šæ˜¾è‘—é™ä½æ ·æœ¬é‡ï¼›å•æ¬¡æ’è¡¥çœ‹ä¼¼è¡¥å…¨äº†æ•°æ®ï¼Œå´ä½ä¼°äº†æ’è¡¥çš„ä¸ç¡®å®šæ€§ï¼›å¤šé‡æ’è¡¥åœ¨ä¿ç•™æ ·æœ¬é‡çš„åŒæ—¶é‡åŒ–æ’è¡¥è¯¯å·®ï¼Œå› æ­¤æ›´é€‚åˆä½œä¸ºå¸¸è§„ç¼ºå¤±å¤„ç†ç­–ç•¥ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šé‡æ’è¡¥"
    ]
  },
  {
    "objectID": "1086-multiple-imputation.html#å‚æ•°è®²è§£ä¸ä½¿ç”¨è¦ç‚¹",
    "href": "1086-multiple-imputation.html#å‚æ•°è®²è§£ä¸ä½¿ç”¨è¦ç‚¹",
    "title": "å¤šé‡æ’è¡¥å®Œæ•´æ•™ç¨‹",
    "section": "å‚æ•°è®²è§£ä¸ä½¿ç”¨è¦ç‚¹",
    "text": "å‚æ•°è®²è§£ä¸ä½¿ç”¨è¦ç‚¹\nm ä»£è¡¨æ’è¡¥æ•°æ®é›†æ•°é‡ï¼Œé€šå¸¸å»ºè®® 5â€“10ï¼›method æ˜¯æ’è¡¥æ–¹æ³•ï¼Œè¿ç»­å˜é‡å¸¸ç”¨ pmmï¼Œåˆ†ç±»å˜é‡å¯ç”¨ logregï¼›maxit æ˜¯è¿­ä»£æ¬¡æ•°ï¼Œå¤ªå°‘ä¼šå¯¼è‡´æ’è¡¥ä¸ç¨³å®šï¼›seed ç”¨äºä¿è¯å¯å¤ç°ã€‚é€šå¸¸ç¼ºå¤±æ¯”ä¾‹è¶Šé«˜ï¼Œm åº”è¶Šå¤§ï¼›æ¨¡å‹è¶Šå¤æ‚ï¼Œæ’è¡¥æ¨¡å‹ä¹Ÿè¦åŒ…å«è¿™äº›å…³é”®å˜é‡ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¤šé‡æ’è¡¥"
    ]
  },
  {
    "objectID": "1087-msm-iptw.html",
    "href": "1087-msm-iptw.html",
    "title": "è¾¹é™…ç»“æ„æ¨¡å‹ (MSM) ä¸ IPTW å®Œæ•´æ•™ç¨‹",
    "section": "",
    "text": "library(dplyr)\nlibrary(ggplot2)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "è¾¹é™…ç»“æ„æ¨¡å‹ (MSM) ä¸ IPTW"
    ]
  },
  {
    "objectID": "1087-msm-iptw.html#æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "href": "1087-msm-iptw.html#æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "title": "è¾¹é™…ç»“æ„æ¨¡å‹ (MSM) ä¸ IPTW å®Œæ•´æ•™ç¨‹",
    "section": "æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "text": "æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯\nè¾¹é™…ç»“æ„æ¨¡å‹ï¼ˆMarginal Structural Model, MSMï¼‰æ˜¯å¤„ç†æ—¶å˜æ··æ‚çš„ç»å…¸æ–¹æ³•ã€‚ å½“æŸä¸ªå˜é‡æ—¢ä¼šå½±å“åç»­æ²»ç–—ï¼Œåˆä¼šè¢«æ²»ç–—å½±å“æ—¶ï¼Œä¼ ç»Ÿå›å½’ä¼šå‡ºç°åå€šã€‚ IPTWï¼ˆé€†æ¦‚ç‡åŠ æƒï¼‰é€šè¿‡æ„å»ºæƒé‡ï¼ŒæŠŠè§‚æµ‹æ•°æ®è½¬æ¢æˆâ€œä¼ªéšæœºåŒ–â€æ ·æœ¬ï¼Œ ä»è€Œä¼°è®¡æ€»ä½“å¹³å‡å› æœæ•ˆåº”ã€‚\nå®ƒå¸¸ç”¨äºæ²»ç–—åœ¨éšè®¿è¿‡ç¨‹ä¸­åå¤è°ƒæ•´ã€ç–¾ç—…ä¸¥é‡ç¨‹åº¦æ—¢å½±å“æ²»ç–—åˆè¢«æ²»ç–—æ”¹å–„çš„åœºæ™¯ã€‚å½“ç ”ç©¶ç›®æ ‡æ˜¯ä¼°è®¡â€œæ€»ä½“å¹³å‡æ²»ç–—æ•ˆåº”â€è€Œä¸æ˜¯ä¸ªä½“è½¨è¿¹æ—¶ï¼ŒMSM å¾€å¾€æ˜¯æ›´ç¨³å¥çš„é€‰æ‹©ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "è¾¹é™…ç»“æ„æ¨¡å‹ (MSM) ä¸ IPTW"
    ]
  },
  {
    "objectID": "1087-msm-iptw.html#æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "href": "1087-msm-iptw.html#æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "title": "è¾¹é™…ç»“æ„æ¨¡å‹ (MSM) ä¸ IPTW å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "text": "æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ\nå¯ä»¥æŠŠ MSM ç†è§£ä¸ºä¸¤æ­¥ï¼šå…ˆç”¨å€¾å‘æ€§æ¨¡å‹ä¼°è®¡æ¯ä¸ªæ—¶é—´ç‚¹çš„æ²»ç–—æ¦‚ç‡ï¼Œæ„é€ ç¨³å®šæƒé‡ï¼›å†ç”¨è¿™äº›æƒé‡æ‹Ÿåˆè¾¹é™…æ¨¡å‹ï¼Œå¾—åˆ°æ€»ä½“å¹³å‡æ•ˆåº”ã€‚IPTW çš„ç›´è§‰æ˜¯â€œè®©æ¥å—æ²»ç–—çš„æ ·æœ¬ä»£è¡¨æ›´å¤šåŒç±»äººâ€ï¼Œä»è€Œä½¿å¤„ç†ç»„ä¸å¯¹ç…§ç»„åœ¨åå˜é‡ä¸Šçœ‹èµ·æ¥æ›´åƒéšæœºåˆ†é…ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "è¾¹é™…ç»“æ„æ¨¡å‹ (MSM) ä¸ IPTW"
    ]
  },
  {
    "objectID": "1087-msm-iptw.html#æ–¹æ³•å¯¹æ¯”ä¼ ç»Ÿå›å½’-vs-msm",
    "href": "1087-msm-iptw.html#æ–¹æ³•å¯¹æ¯”ä¼ ç»Ÿå›å½’-vs-msm",
    "title": "è¾¹é™…ç»“æ„æ¨¡å‹ (MSM) ä¸ IPTW å®Œæ•´æ•™ç¨‹",
    "section": "æ–¹æ³•å¯¹æ¯”ï¼šä¼ ç»Ÿå›å½’ vs MSM",
    "text": "æ–¹æ³•å¯¹æ¯”ï¼šä¼ ç»Ÿå›å½’ vs MSM\nä¼ ç»Ÿå›å½’é€šè¿‡ç›´æ¥è°ƒæ•´åå˜é‡æ¥æ¶ˆé™¤æ··æ‚ï¼Œä½†é‡åˆ°â€œåå˜é‡æ—¢æ˜¯åŸå› åˆæ˜¯ç»“æœâ€çš„æƒ…å†µæ—¶å®¹æ˜“äº§ç”Ÿåå€šã€‚MSM/IPTW é€šè¿‡åŠ æƒæŠŠæ—¶å˜æ··æ‚æ‹‰å›åŸºçº¿ï¼Œä½¿ä¼°è®¡æ›´ç¨³å¥ï¼Œä½†ä»£ä»·æ˜¯éœ€è¦ç¨³å®šæƒé‡ï¼Œæ ·æœ¬é‡å¤ªå°æ—¶å®¹æ˜“ä¸ç¨³å®šã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "è¾¹é™…ç»“æ„æ¨¡å‹ (MSM) ä¸ IPTW"
    ]
  },
  {
    "objectID": "1087-msm-iptw.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "href": "1087-msm-iptw.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "title": "è¾¹é™…ç»“æ„æ¨¡å‹ (MSM) ä¸ IPTW å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹å‡è®¾ä¸å‰æ",
    "text": "æ¨¡å‹å‡è®¾ä¸å‰æ\nMSM å‡è®¾æ²»ç–—åˆ†é…å¯è¢«åå˜é‡å……åˆ†è§£é‡Šï¼ˆæ— æœªæµ‹æ··æ‚ï¼‰ï¼Œæ¯ç§æ²»ç–—ç­–ç•¥éƒ½æœ‰è¶³å¤Ÿæ ·æœ¬æ”¯æŒï¼ˆé˜³æ€§å‡è®¾ï¼‰ï¼Œå¹¶ä¸”æƒé‡æ¨¡å‹æŒ‡å®šåˆç†ã€‚åªè¦è¿™äº›å‡è®¾åŸºæœ¬æˆç«‹ï¼ŒMSM çš„ä¼°è®¡å°±æ›´æ¥è¿‘çœŸå®çš„æ€»ä½“å¹³å‡æ•ˆåº”ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "è¾¹é™…ç»“æ„æ¨¡å‹ (MSM) ä¸ IPTW"
    ]
  },
  {
    "objectID": "1087-msm-iptw.html#é€šä¿—ä¸¾ä¾‹ä¸ºä»€ä¹ˆä¼ ç»Ÿå›å½’ä¼šé”™",
    "href": "1087-msm-iptw.html#é€šä¿—ä¸¾ä¾‹ä¸ºä»€ä¹ˆä¼ ç»Ÿå›å½’ä¼šé”™",
    "title": "è¾¹é™…ç»“æ„æ¨¡å‹ (MSM) ä¸ IPTW å®Œæ•´æ•™ç¨‹",
    "section": "é€šä¿—ä¸¾ä¾‹ï¼šä¸ºä»€ä¹ˆä¼ ç»Ÿå›å½’ä¼šé”™",
    "text": "é€šä¿—ä¸¾ä¾‹ï¼šä¸ºä»€ä¹ˆä¼ ç»Ÿå›å½’ä¼šé”™\næƒ³è±¡ç³–å°¿ç—…æ‚£è€…æ›´ä¸¥é‡æ—¶æ›´å®¹æ˜“æ¥å—å¼ºåŒ–æ²»ç–—ï¼Œ è€Œå¼ºåŒ–æ²»ç–—åˆä¼šé™ä½åç»­ä¸¥é‡ç¨‹åº¦ã€‚ å¦‚æœä½ æŠŠä¸¥é‡ç¨‹åº¦å½“ä½œåå˜é‡ç›´æ¥è°ƒæ•´ï¼Œ å°±ç›¸å½“äºâ€œè°ƒæ•´äº†æ²»ç–—é€ æˆçš„ç»“æœâ€ï¼Œå¯¼è‡´åå€šã€‚ MSM çš„åšæ³•æ˜¯ï¼šå…ˆç”¨æƒé‡è®©æ²»ç–—åˆ†é…æ›´åƒéšæœºï¼Œ å†ä¼°è®¡æ²»ç–—å¯¹ç»“å±€çš„çœŸå®å½±å“ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "è¾¹é™…ç»“æ„æ¨¡å‹ (MSM) ä¸ IPTW"
    ]
  },
  {
    "objectID": "1087-msm-iptw.html#æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "href": "1087-msm-iptw.html#æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "title": "è¾¹é™…ç»“æ„æ¨¡å‹ (MSM) ä¸ IPTW å®Œæ•´æ•™ç¨‹",
    "section": "æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "text": "æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰\nè¿™é‡Œæ¨¡æ‹Ÿä¸€ä¸ªä¸¤æ—¶é—´ç‚¹çš„æ²»ç–—ä¸ç»“å±€æ•°æ®ï¼Œå­˜åœ¨æ—¶å˜æ··æ‚ã€‚\n\nset.seed(2026)\nsize &lt;- 600\nbaseline_risk &lt;- rnorm(size)\n\ntrt1_prob &lt;- plogis(-0.3 + 0.7 * baseline_risk)\ntrt1 &lt;- rbinom(size, 1, trt1_prob)\n\nrisk_t1 &lt;- 0.6 * baseline_risk - 0.8 * trt1 + rnorm(size)\n\ntrt2_prob &lt;- plogis(-0.2 + 0.4 * baseline_risk + 0.8 * risk_t1 + 0.5 * trt1)\ntrt2 &lt;- rbinom(size, 1, trt2_prob)\n\noutcome &lt;- 3 + 1.2 * trt1 + 1.6 * trt2 + 0.8 * risk_t1 + rnorm(size)\n\nmsm_data &lt;- tibble(\n  baseline_risk,\n  risk_t1,\n  trt1,\n  trt2,\n  outcome\n)\n\nmsm_data\n\n# A tibble: 600 Ã— 5\n   baseline_risk risk_t1  trt1  trt2 outcome\n           &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt; &lt;int&gt;   &lt;dbl&gt;\n 1        0.521    0.554     0     1   3.48 \n 2       -1.08    -1.07      0     1   3.17 \n 3        0.139   -0.473     0     0   2.53 \n 4       -0.0847   0.917     0     1   4.60 \n 5       -0.667    0.517     0     0   4.77 \n 6       -2.52    -0.808     0     0   2.51 \n 7       -0.735   -1.27      1     0   2.36 \n 8       -1.02    -0.575     1     1   4.83 \n 9        0.114   -1.49      0     0   0.720\n10       -0.474   -1.65      0     0   1.20 \n# â„¹ 590 more rows",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "è¾¹é™…ç»“æ„æ¨¡å‹ (MSM) ä¸ IPTW"
    ]
  },
  {
    "objectID": "1087-msm-iptw.html#åˆ†ææµç¨‹æ­¥éª¤",
    "href": "1087-msm-iptw.html#åˆ†ææµç¨‹æ­¥éª¤",
    "title": "è¾¹é™…ç»“æ„æ¨¡å‹ (MSM) ä¸ IPTW å®Œæ•´æ•™ç¨‹",
    "section": "åˆ†ææµç¨‹æ­¥éª¤",
    "text": "åˆ†ææµç¨‹æ­¥éª¤\nåˆ†ææµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºå››æ­¥ï¼šå…ˆä¸ºæ¯ä¸ªæ—¶é—´ç‚¹å»ºç«‹æ²»ç–—æ¨¡å‹ï¼Œè®¡ç®—ç¨³å®šæƒé‡ï¼›å†æ£€æŸ¥æƒé‡åˆ†å¸ƒå¹¶åšå¿…è¦çš„æˆªæ–­ï¼›æœ€åç”¨æƒé‡æ‹Ÿåˆè¾¹é™…æ¨¡å‹å¹¶è§£é‡Šæ€»ä½“å¹³å‡æ•ˆåº”ã€‚è¿™æ ·åšçš„ç›®çš„ï¼Œæ˜¯è®©æƒé‡æ—¢èƒ½çº æ­£æ··æ‚ï¼Œåˆå°½é‡ä¿æŒæ•°å€¼ç¨³å®šã€‚ ## å‚æ•°è®²è§£ä¸ä½¿ç”¨è¦ç‚¹\np_num æ˜¯åˆ†å­æ¨¡å‹ï¼ŒåªåŒ…å«åŸºçº¿åå˜é‡ï¼›p_den æ˜¯åˆ†æ¯æ¨¡å‹ï¼ŒåŒ…å«æ—¶å˜æ··æ‚ã€‚ç¨³å®šæƒé‡å°±æ˜¯åˆ†å­ä¸åˆ†æ¯çš„ä¹˜ç§¯ï¼Œå®ƒèƒ½é¿å…æç«¯æƒé‡å¸¦æ¥çš„ä¸ç¨³å®šæ€§ã€‚å®è·µä¸­é€šå¸¸åœ¨ 1%/99% æˆ– 5%/95% ä½ç½®æˆªæ–­æƒé‡ï¼Œä»¥å¹³è¡¡åå€šå’Œæ–¹å·®ã€‚ ## ä»£ç å®ç°\n\n1. è®¡ç®—ç¨³å®šæƒé‡\n\nmodel_num1 &lt;- glm(trt1 ~ baseline_risk, data = msm_data, family = binomial)\nmodel_den1 &lt;- glm(trt1 ~ baseline_risk, data = msm_data, family = binomial)\n\nmodel_num2 &lt;- glm(trt2 ~ trt1 + baseline_risk, data = msm_data, family = binomial)\nmodel_den2 &lt;- glm(trt2 ~ trt1 + baseline_risk + risk_t1, data = msm_data, family = binomial)\n\np_num1 &lt;- predict(model_num1, type = \"response\")\np_den1 &lt;- predict(model_den1, type = \"response\")\n\np_num2 &lt;- predict(model_num2, type = \"response\")\np_den2 &lt;- predict(model_den2, type = \"response\")\n\nweight1 &lt;- if_else(trt1 == 1, p_num1 / p_den1, (1 - p_num1) / (1 - p_den1))\nweight2 &lt;- if_else(trt2 == 1, p_num2 / p_den2, (1 - p_num2) / (1 - p_den2))\n\nmsm_data &lt;- msm_data |&gt;\n  mutate(\n    sw = weight1 * weight2,\n    sw_trim = pmin(pmax(sw, quantile(sw, 0.02)), quantile(sw, 0.98))\n  )\n\nsummary(msm_data$sw)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n 0.3164  0.7681  0.9073  0.9965  1.1041  3.6936 \n\n\n\n\n2. æƒé‡åˆ†å¸ƒæ£€æŸ¥\n\nmsm_data |&gt;\n  ggplot(aes(x = sw_trim)) +\n  geom_histogram(bins = 30, fill = \"#2563eb\", alpha = 0.8) +\n  labs(\n    title = \"ç¨³å®šæƒé‡åˆ†å¸ƒï¼ˆæˆªæ–­åï¼‰\",\n    x = \"Stabilized Weight\",\n    y = \"Count\"\n  ) +\n  theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\n\n\n3. è¾¹é™…ç»“æ„æ¨¡å‹\n\nnaive_fit &lt;- lm(outcome ~ trt1 + trt2 + risk_t1, data = msm_data)\nmsm_fit &lt;- lm(outcome ~ trt1 + trt2, data = msm_data, weights = sw_trim)\n\nsummary(naive_fit)\n\n\nCall:\nlm(formula = outcome ~ trt1 + trt2 + risk_t1, data = msm_data)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-3.6806 -0.6359  0.0123  0.5944  2.5207 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)  2.99881    0.06477   46.30   &lt;2e-16 ***\ntrt1         1.06237    0.08061   13.18   &lt;2e-16 ***\ntrt2         1.59561    0.08561   18.64   &lt;2e-16 ***\nrisk_t1      0.74544    0.03722   20.03   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.931 on 596 degrees of freedom\nMultiple R-squared:  0.7145,    Adjusted R-squared:  0.713 \nF-statistic: 497.1 on 3 and 596 DF,  p-value: &lt; 2.2e-16\n\nsummary(msm_fit)\n\n\nCall:\nlm(formula = outcome ~ trt1 + trt2, data = msm_data, weights = sw_trim)\n\nWeighted Residuals:\n    Min      1Q  Median      3Q     Max \n-4.3887 -0.7283  0.0510  0.8412  3.3024 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)  2.72556    0.07979  34.158  &lt; 2e-16 ***\ntrt1         0.64265    0.10181   6.312 5.37e-10 ***\ntrt2         1.95368    0.10049  19.441  &lt; 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 1.212 on 597 degrees of freedom\nMultiple R-squared:  0.432, Adjusted R-squared:  0.4301 \nF-statistic:   227 on 2 and 597 DF,  p-value: &lt; 2.2e-16",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "è¾¹é™…ç»“æ„æ¨¡å‹ (MSM) ä¸ IPTW"
    ]
  },
  {
    "objectID": "1087-msm-iptw.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "href": "1087-msm-iptw.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "title": "è¾¹é™…ç»“æ„æ¨¡å‹ (MSM) ä¸ IPTW å®Œæ•´æ•™ç¨‹",
    "section": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "text": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š\næŠ¥å‘Šæ—¶éœ€è¦è¯´æ˜æƒé‡æˆªæ–­é˜ˆå€¼ä¸åˆ†å¸ƒèŒƒå›´ï¼Œå¹¶å¯¹æ¯” naive å›å½’ä¸ MSM çš„ç³»æ•°å·®å¼‚ï¼Œå¼ºè°ƒ MSM ç³»æ•°ä»£è¡¨çš„æ˜¯â€œæ€»ä½“å¹³å‡æ•ˆåº”â€ã€‚å¦‚æœä¸¤è€…å·®å¼‚æ˜æ˜¾ï¼Œåº”è§£é‡Šæ—¶å˜æ··æ‚å¯¹ä¼°è®¡çš„å½±å“ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "è¾¹é™…ç»“æ„æ¨¡å‹ (MSM) ä¸ IPTW"
    ]
  },
  {
    "objectID": "1087-msm-iptw.html#å¸¸è§é”™è¯¯ä¸çº å",
    "href": "1087-msm-iptw.html#å¸¸è§é”™è¯¯ä¸çº å",
    "title": "è¾¹é™…ç»“æ„æ¨¡å‹ (MSM) ä¸ IPTW å®Œæ•´æ•™ç¨‹",
    "section": "å¸¸è§é”™è¯¯ä¸çº å",
    "text": "å¸¸è§é”™è¯¯ä¸çº å\nå¸¸è§é—®é¢˜åŒ…æ‹¬æƒé‡æç«¯å€¼è¿‡å¤šï¼ˆæç¤ºé˜³æ€§å‡è®¾å¯èƒ½è¢«ç ´åï¼‰ã€åˆ†æ¯æ¨¡å‹é—æ¼æ—¶å˜æ··æ‚ã€ä»¥åŠæ ·æœ¬é‡è¿‡å°å¯¼è‡´æƒé‡ä¸ç¨³å®šã€‚å®è·µä¸­å¯é€šè¿‡æƒé‡æˆªæ–­ã€è¡¥å……å…³é”®æ··æ‚å˜é‡ã€æ‰©å¤§æ ·æœ¬é‡æˆ–åšæ•æ„Ÿæ€§åˆ†ææ¥æ”¹å–„ç¨³å®šæ€§ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "è¾¹é™…ç»“æ„æ¨¡å‹ (MSM) ä¸ IPTW"
    ]
  },
  {
    "objectID": "1087-msm-iptw.html#è¿›é˜¶æ‰©å±•",
    "href": "1087-msm-iptw.html#è¿›é˜¶æ‰©å±•",
    "title": "è¾¹é™…ç»“æ„æ¨¡å‹ (MSM) ä¸ IPTW å®Œæ•´æ•™ç¨‹",
    "section": "è¿›é˜¶æ‰©å±•",
    "text": "è¿›é˜¶æ‰©å±•\n\næ›´å¤æ‚çš„å¤šæ—¶é—´ç‚¹æƒé‡æ„å»ºã€‚\nç»“åˆæˆªæ–­ä¸å¹³æ»‘æƒé‡ç­–ç•¥ã€‚\nä½¿ç”¨ ipw æˆ– WeightIt è¿›è¡Œæ›´ç³»ç»Ÿçš„æƒé‡ä¼°è®¡ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "è¾¹é™…ç»“æ„æ¨¡å‹ (MSM) ä¸ IPTW"
    ]
  },
  {
    "objectID": "1087-msm-iptw.html#æ€»ç»“",
    "href": "1087-msm-iptw.html#æ€»ç»“",
    "title": "è¾¹é™…ç»“æ„æ¨¡å‹ (MSM) ä¸ IPTW å®Œæ•´æ•™ç¨‹",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nMSM ä¸ IPTW æ˜¯æ—¶å˜æ··æ‚çš„æ ‡å‡†è§£å†³æ–¹æ¡ˆã€‚ å½“æ²»ç–—ä¸æ··æ‚å˜é‡ç›¸äº’å½±å“æ—¶ï¼ŒMSM å¯ä»¥æ˜¾è‘—é™ä½åå€šï¼Œ ç»™å‡ºæ›´å¯ä¿¡çš„æ€»ä½“å¹³å‡å› æœæ•ˆåº”ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "è¾¹é™…ç»“æ„æ¨¡å‹ (MSM) ä¸ IPTW"
    ]
  },
  {
    "objectID": "1088-fine-gray.html",
    "href": "1088-fine-gray.html",
    "title": "Fine-Gray ç«äº‰é£é™©æ¨¡å‹å®Œæ•´æ•™ç¨‹",
    "section": "",
    "text": "library(dplyr)\nlibrary(ggplot2)\nlibrary(cmprsk)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "Fine-Gray ç«äº‰é£é™©æ¨¡å‹"
    ]
  },
  {
    "objectID": "1088-fine-gray.html#æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "href": "1088-fine-gray.html#æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "title": "Fine-Gray ç«äº‰é£é™©æ¨¡å‹å®Œæ•´æ•™ç¨‹",
    "section": "æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "text": "æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯\nåœ¨ç«äº‰é£é™©æ•°æ®ä¸­ï¼ŒæŸäº›äº‹ä»¶ä¼šé˜»æ­¢æ„Ÿå…´è¶£äº‹ä»¶å‘ç”Ÿã€‚ Fine-Gray æ¨¡å‹ç›´æ¥å»ºæ¨¡â€œç´¯ç§¯å‘ç”Ÿç‡â€ï¼Œé€‚åˆå›ç­” â€œåœ¨çœŸå®ä¸–ç•Œé‡ŒæŸäº‹ä»¶å‘ç”Ÿçš„æ€»ä½“æ¦‚ç‡æœ‰å¤šå¤§â€ã€‚\nå…¸å‹åœºæ™¯åŒ…æ‹¬ç ”ç©¶å¿ƒè¡€ç®¡æ­»äº¡ï¼ˆéå¿ƒè¡€ç®¡æ­»äº¡æ˜¯ç«äº‰äº‹ä»¶ï¼‰ã€ç ”ç©¶è‚¿ç˜¤å¤å‘ï¼ˆæ­»äº¡é˜»æ­¢å¤å‘å‘ç”Ÿï¼‰ã€ç ”ç©¶ç§»æ¤ç­‰å¾…æ—¶é—´ï¼ˆç­‰å¾…æœŸé—´æ­»äº¡å±äºç«äº‰é£é™©ï¼‰ã€‚è¿™äº›åœºæ™¯çš„å…±åŒç‚¹æ˜¯ï¼šä¸€æ—¦å‘ç”Ÿç«äº‰äº‹ä»¶ï¼Œæ„Ÿå…´è¶£äº‹ä»¶å°±æ— æ³•å†å‘ç”Ÿã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "Fine-Gray ç«äº‰é£é™©æ¨¡å‹"
    ]
  },
  {
    "objectID": "1088-fine-gray.html#æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "href": "1088-fine-gray.html#æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "title": "Fine-Gray ç«äº‰é£é™©æ¨¡å‹å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "text": "æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ\nFine-Gray æ¨¡å‹çš„ç›®æ ‡æ˜¯ äºšåˆ†å¸ƒé£é™©ï¼ˆsubdistribution hazardï¼‰ï¼Œ å®ƒç›´æ¥å¯¹åº”ç´¯ç§¯å‘ç”Ÿç‡æ›²çº¿ï¼ˆCIFï¼‰ã€‚ ä¸ Cox æ¨¡å‹ä¸åŒï¼Œå®ƒä¸ä¼šæŠŠç«äº‰äº‹ä»¶å½“æˆåˆ å¤±ï¼Œ å› æ­¤èƒ½ç»™å‡ºæ›´çœŸå®çš„æ€»ä½“å‘ç”Ÿç‡ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "Fine-Gray ç«äº‰é£é™©æ¨¡å‹"
    ]
  },
  {
    "objectID": "1088-fine-gray.html#æ–¹æ³•å¯¹æ¯”cox-vs-fine-gray",
    "href": "1088-fine-gray.html#æ–¹æ³•å¯¹æ¯”cox-vs-fine-gray",
    "title": "Fine-Gray ç«äº‰é£é™©æ¨¡å‹å®Œæ•´æ•™ç¨‹",
    "section": "æ–¹æ³•å¯¹æ¯”ï¼šCox vs Fine-Gray",
    "text": "æ–¹æ³•å¯¹æ¯”ï¼šCox vs Fine-Gray\nCoxï¼ˆcause-specificï¼‰æ›´é€‚åˆæœºåˆ¶åˆ†æï¼Œå…³æ³¨çš„æ˜¯ç¬æ—¶é£é™©ï¼›Fine-Gray æ›´é€‚åˆé£é™©é¢„æµ‹ä¸æ”¿ç­–å†³ç­–ï¼Œå…³æ³¨çš„æ˜¯ç´¯ç§¯å‘ç”Ÿç‡ã€‚ç®€å•æ¥è¯´ï¼Œå¦‚æœä½ å…³å¿ƒâ€œæŸå› ç´ æ˜¯å¦æ”¹å˜äº†äº‹ä»¶å‘ç”Ÿçš„é€Ÿåº¦â€ï¼Œç”¨ Coxï¼›å¦‚æœä½ å…³å¿ƒâ€œçœŸå®ä¸–ç•Œä¸­æœ€ç»ˆå‘ç”Ÿå¤šå°‘â€ï¼Œç”¨ Fine-Grayã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "Fine-Gray ç«äº‰é£é™©æ¨¡å‹"
    ]
  },
  {
    "objectID": "1088-fine-gray.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "href": "1088-fine-gray.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "title": "Fine-Gray ç«äº‰é£é™©æ¨¡å‹å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹å‡è®¾ä¸å‰æ",
    "text": "æ¨¡å‹å‡è®¾ä¸å‰æ\nFine-Gray æ¨¡å‹è¦æ±‚ç«äº‰äº‹ä»¶åˆ†ç±»æ˜ç¡®ï¼Œä¸”åå˜é‡ä¸äºšåˆ†å¸ƒé£é™©æ»¡è¶³æ¯”ä¾‹é£é™©å‡è®¾ã€‚äº‹ä»¶å®šä¹‰æ¸…æ™°ã€æ¨¡å‹ç»“æ„åˆç†æ—¶ï¼Œäºšåˆ†å¸ƒé£é™©æ¯”å¯ç”¨äºè§£é‡Šç´¯ç§¯å‘ç”Ÿç‡å·®å¼‚ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "Fine-Gray ç«äº‰é£é™©æ¨¡å‹"
    ]
  },
  {
    "objectID": "1088-fine-gray.html#é€šä¿—ä¸¾ä¾‹ä¸ºä»€ä¹ˆ-km-ä¼šé«˜ä¼°",
    "href": "1088-fine-gray.html#é€šä¿—ä¸¾ä¾‹ä¸ºä»€ä¹ˆ-km-ä¼šé«˜ä¼°",
    "title": "Fine-Gray ç«äº‰é£é™©æ¨¡å‹å®Œæ•´æ•™ç¨‹",
    "section": "é€šä¿—ä¸¾ä¾‹ï¼šä¸ºä»€ä¹ˆ KM ä¼šé«˜ä¼°",
    "text": "é€šä¿—ä¸¾ä¾‹ï¼šä¸ºä»€ä¹ˆ KM ä¼šé«˜ä¼°\nå¦‚æœæŠŠç«äº‰äº‹ä»¶å½“æˆåˆ å¤±ï¼ŒKM ä¼šå‡è®¾è¿™äº›äººâ€œæœªæ¥ä»å¯èƒ½å‘ç”Ÿæ„Ÿå…´è¶£äº‹ä»¶â€ã€‚ å®é™…ä¸Šä»–ä»¬å·²ç»æ— æ³•å‘ç”Ÿæ„Ÿå…´è¶£äº‹ä»¶ï¼Œç»“æœå°±ä¼šé«˜ä¼°ç´¯ç§¯å‘ç”Ÿç‡ã€‚ Fine-Gray é€šè¿‡ä¿ç•™è¿™äº›ä¸ªä½“çš„æƒé‡ï¼Œé¿å…é«˜ä¼°ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "Fine-Gray ç«äº‰é£é™©æ¨¡å‹"
    ]
  },
  {
    "objectID": "1088-fine-gray.html#æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "href": "1088-fine-gray.html#æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "title": "Fine-Gray ç«äº‰é£é™©æ¨¡å‹å®Œæ•´æ•™ç¨‹",
    "section": "æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "text": "æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰\n\nset.seed(2026)\nsize &lt;- 300\n\nsim_time &lt;- rexp(size, rate = 0.1)\ncomp_time &lt;- rexp(size, rate = 0.08)\nstatus &lt;- if_else(sim_time &lt;= comp_time, 1, 2)\n\nfollow_time &lt;- pmin(sim_time, comp_time)\n\ncovariate &lt;- rbinom(size, 1, 0.5)\n\nfg_data &lt;- tibble(\n  time = follow_time,\n  status = status,\n  exposure = covariate\n)\n\nfg_data\n\n# A tibble: 300 Ã— 3\n     time status exposure\n    &lt;dbl&gt;  &lt;dbl&gt;    &lt;int&gt;\n 1  3.97       1        0\n 2  1.13       1        0\n 3 13.4        2        1\n 4  8.36       1        1\n 5  1.11       1        1\n 6  2.27       2        0\n 7  8.68       1        1\n 8  0.381      2        1\n 9 16.7        2        1\n10  3.84       1        1\n# â„¹ 290 more rows",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "Fine-Gray ç«äº‰é£é™©æ¨¡å‹"
    ]
  },
  {
    "objectID": "1088-fine-gray.html#åˆ†ææµç¨‹æ­¥éª¤",
    "href": "1088-fine-gray.html#åˆ†ææµç¨‹æ­¥éª¤",
    "title": "Fine-Gray ç«äº‰é£é™©æ¨¡å‹å®Œæ•´æ•™ç¨‹",
    "section": "åˆ†ææµç¨‹æ­¥éª¤",
    "text": "åˆ†ææµç¨‹æ­¥éª¤\nåˆ†ææµç¨‹é€šå¸¸å…ˆç»˜åˆ¶ CIF æ›²çº¿äº†è§£æ€»ä½“å‘ç”Ÿç‡ï¼Œå†æ‹Ÿåˆ Fine-Gray æ¨¡å‹ï¼Œæœ€åè§£è¯»äºšåˆ†å¸ƒé£é™©æ¯”ã€‚è¿™ä¸€é¡ºåºèƒ½ä¿è¯ä½ å…ˆç†è§£çœŸå®å‘ç”Ÿç‡ï¼Œå†è®¨è®ºåå˜é‡å¯¹å‘ç”Ÿç‡çš„å½±å“ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "Fine-Gray ç«äº‰é£é™©æ¨¡å‹"
    ]
  },
  {
    "objectID": "1088-fine-gray.html#å‚æ•°è®²è§£ä¸ä½¿ç”¨è¦ç‚¹",
    "href": "1088-fine-gray.html#å‚æ•°è®²è§£ä¸ä½¿ç”¨è¦ç‚¹",
    "title": "Fine-Gray ç«äº‰é£é™©æ¨¡å‹å®Œæ•´æ•™ç¨‹",
    "section": "å‚æ•°è®²è§£ä¸ä½¿ç”¨è¦ç‚¹",
    "text": "å‚æ•°è®²è§£ä¸ä½¿ç”¨è¦ç‚¹\nftime è¡¨ç¤ºéšè®¿æ—¶é—´ï¼Œfstatus è¡¨ç¤ºç»“å±€çŠ¶æ€ï¼ˆ0=åˆ å¤±ï¼Œ1=æ„Ÿå…´è¶£äº‹ä»¶ï¼Œ2=ç«äº‰äº‹ä»¶ï¼‰ï¼Œcov1 æ˜¯åå˜é‡çŸ©é˜µã€‚æœ€å®¹æ˜“å‡ºé”™çš„åœ°æ–¹æ˜¯ fstatus ç¼–ç ï¼Œå› æ­¤è¦åœ¨å»ºæ¨¡å‰ç¡®è®¤çŠ¶æ€å®šä¹‰ä¸€è‡´ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "Fine-Gray ç«äº‰é£é™©æ¨¡å‹"
    ]
  },
  {
    "objectID": "1088-fine-gray.html#ä»£ç å®ç°",
    "href": "1088-fine-gray.html#ä»£ç å®ç°",
    "title": "Fine-Gray ç«äº‰é£é™©æ¨¡å‹å®Œæ•´æ•™ç¨‹",
    "section": "ä»£ç å®ç°",
    "text": "ä»£ç å®ç°\n\n1. CIF æ›²çº¿\n\nfg_cif &lt;- cuminc(ftime = fg_data$time, fstatus = fg_data$status, group = fg_data$exposure)\nfg_cif\n\nTests:\n      stat        pv df\n1 2.673472 0.1020332  1\n2 2.295168 0.1297772  1\nEstimates and Variances:\n$est\n           10        20        30        40        50\n0 1 0.4635762 0.5496689 0.5894040        NA        NA\n1 1 0.3892617 0.4697987 0.4966443 0.4966443 0.4966443\n0 2 0.3443709 0.3907285 0.3973510        NA        NA\n1 2 0.4362416 0.4899329 0.4966443 0.4966443 0.4966443\n\n$var\n             10          20          30          40          50\n0 1 0.001672078 0.001678183 0.001659689          NA          NA\n1 1 0.001619991 0.001715439 0.001749700 0.001749700 0.001749700\n0 2 0.001516485 0.001609156 0.001623364          NA          NA\n1 2 0.001676725 0.001719014 0.001728758 0.001728758 0.001728758\n\n\n\nplot(fg_cif, col = c(\"#2563eb\", \"#ef4444\"), lwd = 2)\n\n\n\n\n\n\n\n\n\n\n2. Fine-Gray æ¨¡å‹\n\nfg_fit &lt;- crr(\n  ftime = fg_data$time,\n  fstatus = fg_data$status,\n  cov1 = as.matrix(fg_data$exposure)\n)\n\nsummary(fg_fit)\n\nCompeting Risks Regression\n\nCall:\ncrr(ftime = fg_data$time, fstatus = fg_data$status, cov1 = as.matrix(fg_data$exposure))\n\n                               coef exp(coef) se(coef)     z p-value\nas.matrix(fg_data$exposure)1 -0.247     0.781    0.156 -1.59    0.11\n\n                             exp(coef) exp(-coef)  2.5% 97.5%\nas.matrix(fg_data$exposure)1     0.781       1.28 0.575  1.06\n\nNum. cases = 300\nPseudo Log-likelihood = -883 \nPseudo likelihood ratio test = 2.51  on 1 df,",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "Fine-Gray ç«äº‰é£é™©æ¨¡å‹"
    ]
  },
  {
    "objectID": "1088-fine-gray.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "href": "1088-fine-gray.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "title": "Fine-Gray ç«äº‰é£é™©æ¨¡å‹å®Œæ•´æ•™ç¨‹",
    "section": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "text": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š\næŠ¥å‘Šæ—¶åº”ç»™å‡ºäºšåˆ†å¸ƒé£é™©æ¯”ï¼ˆsHRï¼‰åŠ 95% ç½®ä¿¡åŒºé—´ï¼Œå¹¶å¼ºè°ƒå®ƒåæ˜ çš„æ˜¯ç´¯ç§¯å‘ç”Ÿç‡å·®å¼‚ï¼Œè€Œä¸æ˜¯ç¬æ—¶é£é™©å·®å¼‚ã€‚ä¸ºäº†è®©è¯»è€…æ›´å¥½ç†è§£ï¼Œå¯åŒæ—¶æŠ¥å‘Š Cox çš„ cause-specific ç»“æœï¼Œè¯´æ˜ä¸¤è€…å›ç­”çš„æ˜¯ä¸åŒé—®é¢˜ã€‚ ## å¸¸è§é”™è¯¯ä¸çº å\nå¸¸è§é”™è¯¯åŒ…æ‹¬çŠ¶æ€ç¼–ç æ··ä¹±ã€æŠŠç«äº‰äº‹ä»¶å½“ä½œåˆ å¤±å¤„ç†ä»¥åŠå¿½è§†æ¯”ä¾‹é£é™©å‡è®¾ã€‚å®è·µä¸­è¦å…ˆç¡®è®¤ 0/1/2 çš„çŠ¶æ€å®šä¹‰ï¼Œå†æ£€æŸ¥æ¨¡å‹æ˜¯å¦æ»¡è¶³æ¯”ä¾‹é£é™©å‡è®¾ï¼Œé¿å…è§£é‡Šä¸Šçš„åå·®ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "Fine-Gray ç«äº‰é£é™©æ¨¡å‹"
    ]
  },
  {
    "objectID": "1088-fine-gray.html#è¿›é˜¶æ‰©å±•",
    "href": "1088-fine-gray.html#è¿›é˜¶æ‰©å±•",
    "title": "Fine-Gray ç«äº‰é£é™©æ¨¡å‹å®Œæ•´æ•™ç¨‹",
    "section": "è¿›é˜¶æ‰©å±•",
    "text": "è¿›é˜¶æ‰©å±•\nè¿›é˜¶åº”ç”¨å¯ä»¥ä½¿ç”¨ riskRegression ç»˜åˆ¶ CIF çš„é¢„æµ‹æ›²çº¿ï¼Œå¹¶åŒæ­¥æŠ¥å‘Š cause-specific Cox ç»“æœä½œä¸ºè¡¥å……ï¼Œä»¥åŒºåˆ†ç¬æ—¶é£é™©ä¸ç´¯ç§¯å‘ç”Ÿç‡è¿™ä¸¤ç±»è§£é‡Šè§†è§’ã€‚ ## æ€»ç»“\nFine-Gray æ¨¡å‹é€‚åˆè¯„ä¼°ç«äº‰é£é™©ä¸‹çš„ç´¯ç§¯å‘ç”Ÿç‡ï¼Œ åœ¨ä¸´åºŠé¢„åä¸çœŸå®ä¸–ç•Œé£é™©è¯„ä¼°ä¸­éå¸¸é‡è¦ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "Fine-Gray ç«äº‰é£é™©æ¨¡å‹"
    ]
  },
  {
    "objectID": "1089-time-varying-cox.html",
    "href": "1089-time-varying-cox.html",
    "title": "æ—¶å˜åå˜é‡ Cox æ¨¡å‹å®Œæ•´æ•™ç¨‹",
    "section": "",
    "text": "library(dplyr)\nlibrary(ggplot2)\nlibrary(survival)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "æ—¶å˜åå˜é‡ Cox æ¨¡å‹"
    ]
  },
  {
    "objectID": "1089-time-varying-cox.html#æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "href": "1089-time-varying-cox.html#æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "title": "æ—¶å˜åå˜é‡ Cox æ¨¡å‹å®Œæ•´æ•™ç¨‹",
    "section": "æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "text": "æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯\næ—¶å˜åå˜é‡ Cox æ¨¡å‹ç”¨äºå¤„ç†â€œåå˜é‡éšæ—¶é—´å˜åŒ–â€çš„åœºæ™¯ã€‚ ä¾‹å¦‚è¯ç‰©å‰‚é‡ã€éšè®¿æœŸé—´çš„å®éªŒæŒ‡æ ‡ã€æš´éœ²æ°´å¹³ç­‰ã€‚ ä¼ ç»Ÿ Cox æŠŠåå˜é‡å½“ä½œå›ºå®šå€¼ï¼Œä¼šå¿½ç•¥è¿™ç§åŠ¨æ€å˜åŒ–ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "æ—¶å˜åå˜é‡ Cox æ¨¡å‹"
    ]
  },
  {
    "objectID": "1089-time-varying-cox.html#æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "href": "1089-time-varying-cox.html#æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "title": "æ—¶å˜åå˜é‡ Cox æ¨¡å‹å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "text": "æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ\nCox æ¨¡å‹çš„é£é™©å‡½æ•°å¯ä»¥å†™æˆ h(t) = h0(t) * exp(beta * X)ã€‚å½“åå˜é‡éšæ—¶é—´å˜åŒ–æ—¶ï¼ŒX ä¸å†æ˜¯ä¸€ä¸ªå¸¸æ•°ï¼Œè€Œæ˜¯ X(t)ï¼Œæ¨¡å‹ä¹Ÿéšä¹‹å˜æˆ h(t) = h0(t) * exp(beta * X(t))ã€‚è¿™æ„å‘³ç€é£é™©éšæ—¶é—´å’Œåå˜é‡å…±åŒå˜åŒ–ï¼Œèƒ½å¤Ÿæ›´çœŸå®åœ°åæ˜ éšè®¿è¿‡ç¨‹ä¸­æš´éœ²å˜åŒ–å¸¦æ¥çš„å½±å“ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "æ—¶å˜åå˜é‡ Cox æ¨¡å‹"
    ]
  },
  {
    "objectID": "1089-time-varying-cox.html#æ–¹æ³•å¯¹æ¯”å›ºå®šåå˜é‡-vs-æ—¶å˜åå˜é‡",
    "href": "1089-time-varying-cox.html#æ–¹æ³•å¯¹æ¯”å›ºå®šåå˜é‡-vs-æ—¶å˜åå˜é‡",
    "title": "æ—¶å˜åå˜é‡ Cox æ¨¡å‹å®Œæ•´æ•™ç¨‹",
    "section": "æ–¹æ³•å¯¹æ¯”ï¼šå›ºå®šåå˜é‡ vs æ—¶å˜åå˜é‡",
    "text": "æ–¹æ³•å¯¹æ¯”ï¼šå›ºå®šåå˜é‡ vs æ—¶å˜åå˜é‡\nå›ºå®šåå˜é‡æ¨¡å‹é€‚åˆåŸºçº¿å˜é‡ï¼ˆå¦‚æ€§åˆ«ã€åŸºå› ï¼‰ï¼Œè€Œæ—¶å˜åå˜é‡æ¨¡å‹é€‚åˆéšè®¿ä¸­ä¼šå˜åŒ–çš„æŒ‡æ ‡ï¼ˆå¦‚è¯ç‰©ä½¿ç”¨ã€å®éªŒå®¤æŒ‡æ ‡ï¼‰ã€‚å¦‚æœç”¨å›ºå®šåå˜é‡å»è¿‘ä¼¼åŠ¨æ€æš´éœ²ï¼Œå¾€å¾€ä¼šç¨€é‡ŠçœŸå®æ•ˆåº”ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "æ—¶å˜åå˜é‡ Cox æ¨¡å‹"
    ]
  },
  {
    "objectID": "1089-time-varying-cox.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "href": "1089-time-varying-cox.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "title": "æ—¶å˜åå˜é‡ Cox æ¨¡å‹å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹å‡è®¾ä¸å‰æ",
    "text": "æ¨¡å‹å‡è®¾ä¸å‰æ\næ—¶å˜åå˜é‡ Cox æ¨¡å‹ä»éœ€æ»¡è¶³æ¯”ä¾‹é£é™©å‡è®¾ï¼ŒåŒæ—¶è¦æ±‚æ•°æ®æ•´ç†ä¸ºâ€œèµ·æ­¢æ—¶é—´æ®µâ€æ ¼å¼ï¼Œä»¥ä¾¿åœ¨æ¯ä¸ªåŒºé—´å†…æ›´æ–°åå˜é‡ã€‚åªæœ‰æŠŠæ—¶é—´ç»“æ„æ•´ç†æ¸…æ¥šï¼Œæ¨¡å‹æ‰æœ‰æ„ä¹‰ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "æ—¶å˜åå˜é‡ Cox æ¨¡å‹"
    ]
  },
  {
    "objectID": "1089-time-varying-cox.html#é€šä¿—ä¸¾ä¾‹ä¸ºä»€ä¹ˆéœ€è¦æ—¶å˜åå˜é‡",
    "href": "1089-time-varying-cox.html#é€šä¿—ä¸¾ä¾‹ä¸ºä»€ä¹ˆéœ€è¦æ—¶å˜åå˜é‡",
    "title": "æ—¶å˜åå˜é‡ Cox æ¨¡å‹å®Œæ•´æ•™ç¨‹",
    "section": "é€šä¿—ä¸¾ä¾‹ï¼šä¸ºä»€ä¹ˆéœ€è¦æ—¶å˜åå˜é‡",
    "text": "é€šä¿—ä¸¾ä¾‹ï¼šä¸ºä»€ä¹ˆéœ€è¦æ—¶å˜åå˜é‡\nå‡è®¾æŸè¯ç‰©åœ¨éšè®¿ç¬¬ 3 ä¸ªæœˆæ‰å¼€å§‹ä½¿ç”¨ï¼Œ å¦‚æœæŠŠå®ƒå½“ä½œåŸºçº¿å˜é‡ï¼Œä¼šæŠŠâ€œæœªä½¿ç”¨æœŸâ€ä¹Ÿå½“æˆä½¿ç”¨æœŸï¼Œ å¯¼è‡´è¯ç‰©æ•ˆæœè¢«ç¨€é‡Šæˆ–æ‰­æ›²ã€‚ æ—¶å˜åå˜é‡æ¨¡å‹é€šè¿‡æ‹†åˆ†æ—¶é—´æ®µï¼Œç²¾å‡†è®°å½•ä½•æ—¶å¼€å§‹æš´éœ²ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "æ—¶å˜åå˜é‡ Cox æ¨¡å‹"
    ]
  },
  {
    "objectID": "1089-time-varying-cox.html#æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "href": "1089-time-varying-cox.html#æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "title": "æ—¶å˜åå˜é‡ Cox æ¨¡å‹å®Œæ•´æ•™ç¨‹",
    "section": "æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "text": "æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰\n\nset.seed(2026)\nsize &lt;- 80\n\nbaseline &lt;- tibble(\n  id = 1:size,\n  follow_time = rexp(size, rate = 0.08),\n  event = rbinom(size, 1, 0.6),\n  start_drug = runif(size, 0, 5)\n)\n\nsplit_data &lt;- baseline |&gt;\n  mutate(\n    tstart = 0,\n    tstop = follow_time,\n    drug = if_else(start_drug &lt;= tstart, 1, 0)\n  )\n\nsplit_data &lt;- survSplit(\n  data = split_data,\n  cut = sort(unique(round(baseline$start_drug, 1))),\n  end = \"tstop\",\n  start = \"tstart\",\n  event = \"event\"\n) |&gt;\n  mutate(drug = if_else(tstart &gt;= start_drug, 1, 0))\n\nsplit_data\n\n     id follow_time start_drug drug tstart      tstop event\n1     1   4.9668368  3.7406498    0    0.0  0.1000000     0\n2     1   4.9668368  3.7406498    0    0.1  0.2000000     0\n3     1   4.9668368  3.7406498    0    0.2  0.3000000     0\n4     1   4.9668368  3.7406498    0    0.3  0.4000000     0\n5     1   4.9668368  3.7406498    0    0.4  0.6000000     0\n6     1   4.9668368  3.7406498    0    0.6  0.7000000     0\n7     1   4.9668368  3.7406498    0    0.7  0.8000000     0\n8     1   4.9668368  3.7406498    0    0.8  0.9000000     0\n9     1   4.9668368  3.7406498    0    0.9  1.0000000     0\n10    1   4.9668368  3.7406498    0    1.0  1.1000000     0\n11    1   4.9668368  3.7406498    0    1.1  1.2000000     0\n12    1   4.9668368  3.7406498    0    1.2  1.3000000     0\n13    1   4.9668368  3.7406498    0    1.3  1.5000000     0\n14    1   4.9668368  3.7406498    0    1.5  1.6000000     0\n15    1   4.9668368  3.7406498    0    1.6  1.7000000     0\n16    1   4.9668368  3.7406498    0    1.7  1.8000000     0\n17    1   4.9668368  3.7406498    0    1.8  1.9000000     0\n18    1   4.9668368  3.7406498    0    1.9  2.1000000     0\n19    1   4.9668368  3.7406498    0    2.1  2.2000000     0\n20    1   4.9668368  3.7406498    0    2.2  2.3000000     0\n21    1   4.9668368  3.7406498    0    2.3  2.4000000     0\n22    1   4.9668368  3.7406498    0    2.4  2.5000000     0\n23    1   4.9668368  3.7406498    0    2.5  2.6000000     0\n24    1   4.9668368  3.7406498    0    2.6  2.7000000     0\n25    1   4.9668368  3.7406498    0    2.7  2.8000000     0\n26    1   4.9668368  3.7406498    0    2.8  2.9000000     0\n27    1   4.9668368  3.7406498    0    2.9  3.0000000     0\n28    1   4.9668368  3.7406498    0    3.0  3.1000000     0\n29    1   4.9668368  3.7406498    0    3.1  3.2000000     0\n30    1   4.9668368  3.7406498    0    3.2  3.3000000     0\n31    1   4.9668368  3.7406498    0    3.3  3.4000000     0\n32    1   4.9668368  3.7406498    0    3.4  3.5000000     0\n33    1   4.9668368  3.7406498    0    3.5  3.6000000     0\n34    1   4.9668368  3.7406498    0    3.6  3.7000000     0\n35    1   4.9668368  3.7406498    0    3.7  3.8000000     0\n36    1   4.9668368  3.7406498    1    3.8  4.0000000     0\n37    1   4.9668368  3.7406498    1    4.0  4.1000000     0\n38    1   4.9668368  3.7406498    1    4.1  4.2000000     0\n39    1   4.9668368  3.7406498    1    4.2  4.3000000     0\n40    1   4.9668368  3.7406498    1    4.3  4.4000000     0\n41    1   4.9668368  3.7406498    1    4.4  4.5000000     0\n42    1   4.9668368  3.7406498    1    4.5  4.7000000     0\n43    1   4.9668368  3.7406498    1    4.7  4.8000000     0\n44    1   4.9668368  3.7406498    1    4.8  4.9000000     0\n45    1   4.9668368  3.7406498    1    4.9  4.9668368     1\n46    2   1.4132626  0.6657228    0    0.0  0.1000000     0\n47    2   1.4132626  0.6657228    0    0.1  0.2000000     0\n48    2   1.4132626  0.6657228    0    0.2  0.3000000     0\n49    2   1.4132626  0.6657228    0    0.3  0.4000000     0\n50    2   1.4132626  0.6657228    0    0.4  0.6000000     0\n51    2   1.4132626  0.6657228    0    0.6  0.7000000     0\n52    2   1.4132626  0.6657228    1    0.7  0.8000000     0\n53    2   1.4132626  0.6657228    1    0.8  0.9000000     0\n54    2   1.4132626  0.6657228    1    0.9  1.0000000     0\n55    2   1.4132626  0.6657228    1    1.0  1.1000000     0\n56    2   1.4132626  0.6657228    1    1.1  1.2000000     0\n57    2   1.4132626  0.6657228    1    1.2  1.3000000     0\n58    2   1.4132626  0.6657228    1    1.3  1.4132626     1\n59    3  18.8426753  4.8466083    0    0.0  0.1000000     0\n60    3  18.8426753  4.8466083    0    0.1  0.2000000     0\n61    3  18.8426753  4.8466083    0    0.2  0.3000000     0\n62    3  18.8426753  4.8466083    0    0.3  0.4000000     0\n63    3  18.8426753  4.8466083    0    0.4  0.6000000     0\n64    3  18.8426753  4.8466083    0    0.6  0.7000000     0\n65    3  18.8426753  4.8466083    0    0.7  0.8000000     0\n66    3  18.8426753  4.8466083    0    0.8  0.9000000     0\n67    3  18.8426753  4.8466083    0    0.9  1.0000000     0\n68    3  18.8426753  4.8466083    0    1.0  1.1000000     0\n69    3  18.8426753  4.8466083    0    1.1  1.2000000     0\n70    3  18.8426753  4.8466083    0    1.2  1.3000000     0\n71    3  18.8426753  4.8466083    0    1.3  1.5000000     0\n72    3  18.8426753  4.8466083    0    1.5  1.6000000     0\n73    3  18.8426753  4.8466083    0    1.6  1.7000000     0\n74    3  18.8426753  4.8466083    0    1.7  1.8000000     0\n75    3  18.8426753  4.8466083    0    1.8  1.9000000     0\n76    3  18.8426753  4.8466083    0    1.9  2.1000000     0\n77    3  18.8426753  4.8466083    0    2.1  2.2000000     0\n78    3  18.8426753  4.8466083    0    2.2  2.3000000     0\n79    3  18.8426753  4.8466083    0    2.3  2.4000000     0\n80    3  18.8426753  4.8466083    0    2.4  2.5000000     0\n81    3  18.8426753  4.8466083    0    2.5  2.6000000     0\n82    3  18.8426753  4.8466083    0    2.6  2.7000000     0\n83    3  18.8426753  4.8466083    0    2.7  2.8000000     0\n84    3  18.8426753  4.8466083    0    2.8  2.9000000     0\n85    3  18.8426753  4.8466083    0    2.9  3.0000000     0\n86    3  18.8426753  4.8466083    0    3.0  3.1000000     0\n87    3  18.8426753  4.8466083    0    3.1  3.2000000     0\n88    3  18.8426753  4.8466083    0    3.2  3.3000000     0\n89    3  18.8426753  4.8466083    0    3.3  3.4000000     0\n90    3  18.8426753  4.8466083    0    3.4  3.5000000     0\n91    3  18.8426753  4.8466083    0    3.5  3.6000000     0\n92    3  18.8426753  4.8466083    0    3.6  3.7000000     0\n93    3  18.8426753  4.8466083    0    3.7  3.8000000     0\n94    3  18.8426753  4.8466083    0    3.8  4.0000000     0\n95    3  18.8426753  4.8466083    0    4.0  4.1000000     0\n96    3  18.8426753  4.8466083    0    4.1  4.2000000     0\n97    3  18.8426753  4.8466083    0    4.2  4.3000000     0\n98    3  18.8426753  4.8466083    0    4.3  4.4000000     0\n99    3  18.8426753  4.8466083    0    4.4  4.5000000     0\n100   3  18.8426753  4.8466083    0    4.5  4.7000000     0\n101   3  18.8426753  4.8466083    0    4.7  4.8000000     0\n102   3  18.8426753  4.8466083    0    4.8  4.9000000     0\n103   3  18.8426753  4.8466083    1    4.9  5.0000000     0\n104   3  18.8426753  4.8466083    1    5.0 18.8426753     1\n105   4  10.4505051  4.2016719    0    0.0  0.1000000     0\n106   4  10.4505051  4.2016719    0    0.1  0.2000000     0\n107   4  10.4505051  4.2016719    0    0.2  0.3000000     0\n108   4  10.4505051  4.2016719    0    0.3  0.4000000     0\n109   4  10.4505051  4.2016719    0    0.4  0.6000000     0\n110   4  10.4505051  4.2016719    0    0.6  0.7000000     0\n111   4  10.4505051  4.2016719    0    0.7  0.8000000     0\n112   4  10.4505051  4.2016719    0    0.8  0.9000000     0\n113   4  10.4505051  4.2016719    0    0.9  1.0000000     0\n114   4  10.4505051  4.2016719    0    1.0  1.1000000     0\n115   4  10.4505051  4.2016719    0    1.1  1.2000000     0\n116   4  10.4505051  4.2016719    0    1.2  1.3000000     0\n117   4  10.4505051  4.2016719    0    1.3  1.5000000     0\n118   4  10.4505051  4.2016719    0    1.5  1.6000000     0\n119   4  10.4505051  4.2016719    0    1.6  1.7000000     0\n120   4  10.4505051  4.2016719    0    1.7  1.8000000     0\n121   4  10.4505051  4.2016719    0    1.8  1.9000000     0\n122   4  10.4505051  4.2016719    0    1.9  2.1000000     0\n123   4  10.4505051  4.2016719    0    2.1  2.2000000     0\n124   4  10.4505051  4.2016719    0    2.2  2.3000000     0\n125   4  10.4505051  4.2016719    0    2.3  2.4000000     0\n126   4  10.4505051  4.2016719    0    2.4  2.5000000     0\n127   4  10.4505051  4.2016719    0    2.5  2.6000000     0\n128   4  10.4505051  4.2016719    0    2.6  2.7000000     0\n129   4  10.4505051  4.2016719    0    2.7  2.8000000     0\n130   4  10.4505051  4.2016719    0    2.8  2.9000000     0\n131   4  10.4505051  4.2016719    0    2.9  3.0000000     0\n132   4  10.4505051  4.2016719    0    3.0  3.1000000     0\n133   4  10.4505051  4.2016719    0    3.1  3.2000000     0\n134   4  10.4505051  4.2016719    0    3.2  3.3000000     0\n135   4  10.4505051  4.2016719    0    3.3  3.4000000     0\n136   4  10.4505051  4.2016719    0    3.4  3.5000000     0\n137   4  10.4505051  4.2016719    0    3.5  3.6000000     0\n138   4  10.4505051  4.2016719    0    3.6  3.7000000     0\n139   4  10.4505051  4.2016719    0    3.7  3.8000000     0\n140   4  10.4505051  4.2016719    0    3.8  4.0000000     0\n141   4  10.4505051  4.2016719    0    4.0  4.1000000     0\n142   4  10.4505051  4.2016719    0    4.1  4.2000000     0\n143   4  10.4505051  4.2016719    0    4.2  4.3000000     0\n144   4  10.4505051  4.2016719    1    4.3  4.4000000     0\n145   4  10.4505051  4.2016719    1    4.4  4.5000000     0\n146   4  10.4505051  4.2016719    1    4.5  4.7000000     0\n147   4  10.4505051  4.2016719    1    4.7  4.8000000     0\n148   4  10.4505051  4.2016719    1    4.8  4.9000000     0\n149   4  10.4505051  4.2016719    1    4.9  5.0000000     0\n150   4  10.4505051  4.2016719    1    5.0 10.4505051     1\n151   5   1.3842252  2.8732721    0    0.0  0.1000000     0\n152   5   1.3842252  2.8732721    0    0.1  0.2000000     0\n153   5   1.3842252  2.8732721    0    0.2  0.3000000     0\n154   5   1.3842252  2.8732721    0    0.3  0.4000000     0\n155   5   1.3842252  2.8732721    0    0.4  0.6000000     0\n156   5   1.3842252  2.8732721    0    0.6  0.7000000     0\n157   5   1.3842252  2.8732721    0    0.7  0.8000000     0\n158   5   1.3842252  2.8732721    0    0.8  0.9000000     0\n159   5   1.3842252  2.8732721    0    0.9  1.0000000     0\n160   5   1.3842252  2.8732721    0    1.0  1.1000000     0\n161   5   1.3842252  2.8732721    0    1.1  1.2000000     0\n162   5   1.3842252  2.8732721    0    1.2  1.3000000     0\n163   5   1.3842252  2.8732721    0    1.3  1.3842252     1\n164   6  50.9266191  3.5644185    0    0.0  0.1000000     0\n165   6  50.9266191  3.5644185    0    0.1  0.2000000     0\n166   6  50.9266191  3.5644185    0    0.2  0.3000000     0\n167   6  50.9266191  3.5644185    0    0.3  0.4000000     0\n168   6  50.9266191  3.5644185    0    0.4  0.6000000     0\n169   6  50.9266191  3.5644185    0    0.6  0.7000000     0\n170   6  50.9266191  3.5644185    0    0.7  0.8000000     0\n171   6  50.9266191  3.5644185    0    0.8  0.9000000     0\n172   6  50.9266191  3.5644185    0    0.9  1.0000000     0\n173   6  50.9266191  3.5644185    0    1.0  1.1000000     0\n174   6  50.9266191  3.5644185    0    1.1  1.2000000     0\n175   6  50.9266191  3.5644185    0    1.2  1.3000000     0\n176   6  50.9266191  3.5644185    0    1.3  1.5000000     0\n177   6  50.9266191  3.5644185    0    1.5  1.6000000     0\n178   6  50.9266191  3.5644185    0    1.6  1.7000000     0\n179   6  50.9266191  3.5644185    0    1.7  1.8000000     0\n180   6  50.9266191  3.5644185    0    1.8  1.9000000     0\n181   6  50.9266191  3.5644185    0    1.9  2.1000000     0\n182   6  50.9266191  3.5644185    0    2.1  2.2000000     0\n183   6  50.9266191  3.5644185    0    2.2  2.3000000     0\n184   6  50.9266191  3.5644185    0    2.3  2.4000000     0\n185   6  50.9266191  3.5644185    0    2.4  2.5000000     0\n186   6  50.9266191  3.5644185    0    2.5  2.6000000     0\n187   6  50.9266191  3.5644185    0    2.6  2.7000000     0\n188   6  50.9266191  3.5644185    0    2.7  2.8000000     0\n189   6  50.9266191  3.5644185    0    2.8  2.9000000     0\n190   6  50.9266191  3.5644185    0    2.9  3.0000000     0\n191   6  50.9266191  3.5644185    0    3.0  3.1000000     0\n192   6  50.9266191  3.5644185    0    3.1  3.2000000     0\n193   6  50.9266191  3.5644185    0    3.2  3.3000000     0\n194   6  50.9266191  3.5644185    0    3.3  3.4000000     0\n195   6  50.9266191  3.5644185    0    3.4  3.5000000     0\n196   6  50.9266191  3.5644185    0    3.5  3.6000000     0\n197   6  50.9266191  3.5644185    1    3.6  3.7000000     0\n198   6  50.9266191  3.5644185    1    3.7  3.8000000     0\n199   6  50.9266191  3.5644185    1    3.8  4.0000000     0\n200   6  50.9266191  3.5644185    1    4.0  4.1000000     0\n201   6  50.9266191  3.5644185    1    4.1  4.2000000     0\n202   6  50.9266191  3.5644185    1    4.2  4.3000000     0\n203   6  50.9266191  3.5644185    1    4.3  4.4000000     0\n204   6  50.9266191  3.5644185    1    4.4  4.5000000     0\n205   6  50.9266191  3.5644185    1    4.5  4.7000000     0\n206   6  50.9266191  3.5644185    1    4.7  4.8000000     0\n207   6  50.9266191  3.5644185    1    4.8  4.9000000     0\n208   6  50.9266191  3.5644185    1    4.9  5.0000000     0\n209   6  50.9266191  3.5644185    1    5.0 50.9266191     1\n210   7  10.8520958  0.7376040    0    0.0  0.1000000     0\n211   7  10.8520958  0.7376040    0    0.1  0.2000000     0\n212   7  10.8520958  0.7376040    0    0.2  0.3000000     0\n213   7  10.8520958  0.7376040    0    0.3  0.4000000     0\n214   7  10.8520958  0.7376040    0    0.4  0.6000000     0\n215   7  10.8520958  0.7376040    0    0.6  0.7000000     0\n216   7  10.8520958  0.7376040    0    0.7  0.8000000     0\n217   7  10.8520958  0.7376040    1    0.8  0.9000000     0\n218   7  10.8520958  0.7376040    1    0.9  1.0000000     0\n219   7  10.8520958  0.7376040    1    1.0  1.1000000     0\n220   7  10.8520958  0.7376040    1    1.1  1.2000000     0\n221   7  10.8520958  0.7376040    1    1.2  1.3000000     0\n222   7  10.8520958  0.7376040    1    1.3  1.5000000     0\n223   7  10.8520958  0.7376040    1    1.5  1.6000000     0\n224   7  10.8520958  0.7376040    1    1.6  1.7000000     0\n225   7  10.8520958  0.7376040    1    1.7  1.8000000     0\n226   7  10.8520958  0.7376040    1    1.8  1.9000000     0\n227   7  10.8520958  0.7376040    1    1.9  2.1000000     0\n228   7  10.8520958  0.7376040    1    2.1  2.2000000     0\n229   7  10.8520958  0.7376040    1    2.2  2.3000000     0\n230   7  10.8520958  0.7376040    1    2.3  2.4000000     0\n231   7  10.8520958  0.7376040    1    2.4  2.5000000     0\n232   7  10.8520958  0.7376040    1    2.5  2.6000000     0\n233   7  10.8520958  0.7376040    1    2.6  2.7000000     0\n234   7  10.8520958  0.7376040    1    2.7  2.8000000     0\n235   7  10.8520958  0.7376040    1    2.8  2.9000000     0\n236   7  10.8520958  0.7376040    1    2.9  3.0000000     0\n237   7  10.8520958  0.7376040    1    3.0  3.1000000     0\n238   7  10.8520958  0.7376040    1    3.1  3.2000000     0\n239   7  10.8520958  0.7376040    1    3.2  3.3000000     0\n240   7  10.8520958  0.7376040    1    3.3  3.4000000     0\n241   7  10.8520958  0.7376040    1    3.4  3.5000000     0\n242   7  10.8520958  0.7376040    1    3.5  3.6000000     0\n243   7  10.8520958  0.7376040    1    3.6  3.7000000     0\n244   7  10.8520958  0.7376040    1    3.7  3.8000000     0\n245   7  10.8520958  0.7376040    1    3.8  4.0000000     0\n246   7  10.8520958  0.7376040    1    4.0  4.1000000     0\n247   7  10.8520958  0.7376040    1    4.1  4.2000000     0\n248   7  10.8520958  0.7376040    1    4.2  4.3000000     0\n249   7  10.8520958  0.7376040    1    4.3  4.4000000     0\n250   7  10.8520958  0.7376040    1    4.4  4.5000000     0\n251   7  10.8520958  0.7376040    1    4.5  4.7000000     0\n252   7  10.8520958  0.7376040    1    4.7  4.8000000     0\n253   7  10.8520958  0.7376040    1    4.8  4.9000000     0\n254   7  10.8520958  0.7376040    1    4.9  5.0000000     0\n255   7  10.8520958  0.7376040    1    5.0 10.8520958     0\n256   8   2.0201584  0.2943804    0    0.0  0.1000000     0\n257   8   2.0201584  0.2943804    0    0.1  0.2000000     0\n258   8   2.0201584  0.2943804    0    0.2  0.3000000     0\n259   8   2.0201584  0.2943804    1    0.3  0.4000000     0\n260   8   2.0201584  0.2943804    1    0.4  0.6000000     0\n261   8   2.0201584  0.2943804    1    0.6  0.7000000     0\n262   8   2.0201584  0.2943804    1    0.7  0.8000000     0\n263   8   2.0201584  0.2943804    1    0.8  0.9000000     0\n264   8   2.0201584  0.2943804    1    0.9  1.0000000     0\n265   8   2.0201584  0.2943804    1    1.0  1.1000000     0\n266   8   2.0201584  0.2943804    1    1.1  1.2000000     0\n267   8   2.0201584  0.2943804    1    1.2  1.3000000     0\n268   8   2.0201584  0.2943804    1    1.3  1.5000000     0\n269   8   2.0201584  0.2943804    1    1.5  1.6000000     0\n270   8   2.0201584  0.2943804    1    1.6  1.7000000     0\n271   8   2.0201584  0.2943804    1    1.7  1.8000000     0\n272   8   2.0201584  0.2943804    1    1.8  1.9000000     0\n273   8   2.0201584  0.2943804    1    1.9  2.0201584     1\n274   9  67.1368001  0.3696051    0    0.0  0.1000000     0\n275   9  67.1368001  0.3696051    0    0.1  0.2000000     0\n276   9  67.1368001  0.3696051    0    0.2  0.3000000     0\n277   9  67.1368001  0.3696051    0    0.3  0.4000000     0\n278   9  67.1368001  0.3696051    1    0.4  0.6000000     0\n279   9  67.1368001  0.3696051    1    0.6  0.7000000     0\n280   9  67.1368001  0.3696051    1    0.7  0.8000000     0\n281   9  67.1368001  0.3696051    1    0.8  0.9000000     0\n282   9  67.1368001  0.3696051    1    0.9  1.0000000     0\n283   9  67.1368001  0.3696051    1    1.0  1.1000000     0\n284   9  67.1368001  0.3696051    1    1.1  1.2000000     0\n285   9  67.1368001  0.3696051    1    1.2  1.3000000     0\n286   9  67.1368001  0.3696051    1    1.3  1.5000000     0\n287   9  67.1368001  0.3696051    1    1.5  1.6000000     0\n288   9  67.1368001  0.3696051    1    1.6  1.7000000     0\n289   9  67.1368001  0.3696051    1    1.7  1.8000000     0\n290   9  67.1368001  0.3696051    1    1.8  1.9000000     0\n291   9  67.1368001  0.3696051    1    1.9  2.1000000     0\n292   9  67.1368001  0.3696051    1    2.1  2.2000000     0\n293   9  67.1368001  0.3696051    1    2.2  2.3000000     0\n294   9  67.1368001  0.3696051    1    2.3  2.4000000     0\n295   9  67.1368001  0.3696051    1    2.4  2.5000000     0\n296   9  67.1368001  0.3696051    1    2.5  2.6000000     0\n297   9  67.1368001  0.3696051    1    2.6  2.7000000     0\n298   9  67.1368001  0.3696051    1    2.7  2.8000000     0\n299   9  67.1368001  0.3696051    1    2.8  2.9000000     0\n300   9  67.1368001  0.3696051    1    2.9  3.0000000     0\n301   9  67.1368001  0.3696051    1    3.0  3.1000000     0\n302   9  67.1368001  0.3696051    1    3.1  3.2000000     0\n303   9  67.1368001  0.3696051    1    3.2  3.3000000     0\n304   9  67.1368001  0.3696051    1    3.3  3.4000000     0\n305   9  67.1368001  0.3696051    1    3.4  3.5000000     0\n306   9  67.1368001  0.3696051    1    3.5  3.6000000     0\n307   9  67.1368001  0.3696051    1    3.6  3.7000000     0\n308   9  67.1368001  0.3696051    1    3.7  3.8000000     0\n309   9  67.1368001  0.3696051    1    3.8  4.0000000     0\n310   9  67.1368001  0.3696051    1    4.0  4.1000000     0\n311   9  67.1368001  0.3696051    1    4.1  4.2000000     0\n312   9  67.1368001  0.3696051    1    4.2  4.3000000     0\n313   9  67.1368001  0.3696051    1    4.3  4.4000000     0\n314   9  67.1368001  0.3696051    1    4.4  4.5000000     0\n315   9  67.1368001  0.3696051    1    4.5  4.7000000     0\n316   9  67.1368001  0.3696051    1    4.7  4.8000000     0\n317   9  67.1368001  0.3696051    1    4.8  4.9000000     0\n318   9  67.1368001  0.3696051    1    4.9  5.0000000     0\n319   9  67.1368001  0.3696051    1    5.0 67.1368001     1\n320  10   4.7966485  4.6535349    0    0.0  0.1000000     0\n321  10   4.7966485  4.6535349    0    0.1  0.2000000     0\n322  10   4.7966485  4.6535349    0    0.2  0.3000000     0\n323  10   4.7966485  4.6535349    0    0.3  0.4000000     0\n324  10   4.7966485  4.6535349    0    0.4  0.6000000     0\n325  10   4.7966485  4.6535349    0    0.6  0.7000000     0\n326  10   4.7966485  4.6535349    0    0.7  0.8000000     0\n327  10   4.7966485  4.6535349    0    0.8  0.9000000     0\n328  10   4.7966485  4.6535349    0    0.9  1.0000000     0\n329  10   4.7966485  4.6535349    0    1.0  1.1000000     0\n330  10   4.7966485  4.6535349    0    1.1  1.2000000     0\n331  10   4.7966485  4.6535349    0    1.2  1.3000000     0\n332  10   4.7966485  4.6535349    0    1.3  1.5000000     0\n333  10   4.7966485  4.6535349    0    1.5  1.6000000     0\n334  10   4.7966485  4.6535349    0    1.6  1.7000000     0\n335  10   4.7966485  4.6535349    0    1.7  1.8000000     0\n336  10   4.7966485  4.6535349    0    1.8  1.9000000     0\n337  10   4.7966485  4.6535349    0    1.9  2.1000000     0\n338  10   4.7966485  4.6535349    0    2.1  2.2000000     0\n339  10   4.7966485  4.6535349    0    2.2  2.3000000     0\n340  10   4.7966485  4.6535349    0    2.3  2.4000000     0\n341  10   4.7966485  4.6535349    0    2.4  2.5000000     0\n342  10   4.7966485  4.6535349    0    2.5  2.6000000     0\n343  10   4.7966485  4.6535349    0    2.6  2.7000000     0\n344  10   4.7966485  4.6535349    0    2.7  2.8000000     0\n345  10   4.7966485  4.6535349    0    2.8  2.9000000     0\n346  10   4.7966485  4.6535349    0    2.9  3.0000000     0\n347  10   4.7966485  4.6535349    0    3.0  3.1000000     0\n348  10   4.7966485  4.6535349    0    3.1  3.2000000     0\n349  10   4.7966485  4.6535349    0    3.2  3.3000000     0\n350  10   4.7966485  4.6535349    0    3.3  3.4000000     0\n351  10   4.7966485  4.6535349    0    3.4  3.5000000     0\n352  10   4.7966485  4.6535349    0    3.5  3.6000000     0\n353  10   4.7966485  4.6535349    0    3.6  3.7000000     0\n354  10   4.7966485  4.6535349    0    3.7  3.8000000     0\n355  10   4.7966485  4.6535349    0    3.8  4.0000000     0\n356  10   4.7966485  4.6535349    0    4.0  4.1000000     0\n357  10   4.7966485  4.6535349    0    4.1  4.2000000     0\n358  10   4.7966485  4.6535349    0    4.2  4.3000000     0\n359  10   4.7966485  4.6535349    0    4.3  4.4000000     0\n360  10   4.7966485  4.6535349    0    4.4  4.5000000     0\n361  10   4.7966485  4.6535349    0    4.5  4.7000000     0\n362  10   4.7966485  4.6535349    1    4.7  4.7966485     0\n363  11  18.6615603  2.7782087    0    0.0  0.1000000     0\n364  11  18.6615603  2.7782087    0    0.1  0.2000000     0\n365  11  18.6615603  2.7782087    0    0.2  0.3000000     0\n366  11  18.6615603  2.7782087    0    0.3  0.4000000     0\n367  11  18.6615603  2.7782087    0    0.4  0.6000000     0\n368  11  18.6615603  2.7782087    0    0.6  0.7000000     0\n369  11  18.6615603  2.7782087    0    0.7  0.8000000     0\n370  11  18.6615603  2.7782087    0    0.8  0.9000000     0\n371  11  18.6615603  2.7782087    0    0.9  1.0000000     0\n372  11  18.6615603  2.7782087    0    1.0  1.1000000     0\n373  11  18.6615603  2.7782087    0    1.1  1.2000000     0\n374  11  18.6615603  2.7782087    0    1.2  1.3000000     0\n375  11  18.6615603  2.7782087    0    1.3  1.5000000     0\n376  11  18.6615603  2.7782087    0    1.5  1.6000000     0\n377  11  18.6615603  2.7782087    0    1.6  1.7000000     0\n378  11  18.6615603  2.7782087    0    1.7  1.8000000     0\n379  11  18.6615603  2.7782087    0    1.8  1.9000000     0\n380  11  18.6615603  2.7782087    0    1.9  2.1000000     0\n381  11  18.6615603  2.7782087    0    2.1  2.2000000     0\n382  11  18.6615603  2.7782087    0    2.2  2.3000000     0\n383  11  18.6615603  2.7782087    0    2.3  2.4000000     0\n384  11  18.6615603  2.7782087    0    2.4  2.5000000     0\n385  11  18.6615603  2.7782087    0    2.5  2.6000000     0\n386  11  18.6615603  2.7782087    0    2.6  2.7000000     0\n387  11  18.6615603  2.7782087    0    2.7  2.8000000     0\n388  11  18.6615603  2.7782087    1    2.8  2.9000000     0\n389  11  18.6615603  2.7782087    1    2.9  3.0000000     0\n390  11  18.6615603  2.7782087    1    3.0  3.1000000     0\n391  11  18.6615603  2.7782087    1    3.1  3.2000000     0\n392  11  18.6615603  2.7782087    1    3.2  3.3000000     0\n393  11  18.6615603  2.7782087    1    3.3  3.4000000     0\n394  11  18.6615603  2.7782087    1    3.4  3.5000000     0\n395  11  18.6615603  2.7782087    1    3.5  3.6000000     0\n396  11  18.6615603  2.7782087    1    3.6  3.7000000     0\n397  11  18.6615603  2.7782087    1    3.7  3.8000000     0\n398  11  18.6615603  2.7782087    1    3.8  4.0000000     0\n399  11  18.6615603  2.7782087    1    4.0  4.1000000     0\n400  11  18.6615603  2.7782087    1    4.1  4.2000000     0\n401  11  18.6615603  2.7782087    1    4.2  4.3000000     0\n402  11  18.6615603  2.7782087    1    4.3  4.4000000     0\n403  11  18.6615603  2.7782087    1    4.4  4.5000000     0\n404  11  18.6615603  2.7782087    1    4.5  4.7000000     0\n405  11  18.6615603  2.7782087    1    4.7  4.8000000     0\n406  11  18.6615603  2.7782087    1    4.8  4.9000000     0\n407  11  18.6615603  2.7782087    1    4.9  5.0000000     0\n408  11  18.6615603  2.7782087    1    5.0 18.6615603     1\n409  12  14.0048055  0.6058025    0    0.0  0.1000000     0\n410  12  14.0048055  0.6058025    0    0.1  0.2000000     0\n411  12  14.0048055  0.6058025    0    0.2  0.3000000     0\n412  12  14.0048055  0.6058025    0    0.3  0.4000000     0\n413  12  14.0048055  0.6058025    0    0.4  0.6000000     0\n414  12  14.0048055  0.6058025    0    0.6  0.7000000     0\n415  12  14.0048055  0.6058025    1    0.7  0.8000000     0\n416  12  14.0048055  0.6058025    1    0.8  0.9000000     0\n417  12  14.0048055  0.6058025    1    0.9  1.0000000     0\n418  12  14.0048055  0.6058025    1    1.0  1.1000000     0\n419  12  14.0048055  0.6058025    1    1.1  1.2000000     0\n420  12  14.0048055  0.6058025    1    1.2  1.3000000     0\n421  12  14.0048055  0.6058025    1    1.3  1.5000000     0\n422  12  14.0048055  0.6058025    1    1.5  1.6000000     0\n423  12  14.0048055  0.6058025    1    1.6  1.7000000     0\n424  12  14.0048055  0.6058025    1    1.7  1.8000000     0\n425  12  14.0048055  0.6058025    1    1.8  1.9000000     0\n426  12  14.0048055  0.6058025    1    1.9  2.1000000     0\n427  12  14.0048055  0.6058025    1    2.1  2.2000000     0\n428  12  14.0048055  0.6058025    1    2.2  2.3000000     0\n429  12  14.0048055  0.6058025    1    2.3  2.4000000     0\n430  12  14.0048055  0.6058025    1    2.4  2.5000000     0\n431  12  14.0048055  0.6058025    1    2.5  2.6000000     0\n432  12  14.0048055  0.6058025    1    2.6  2.7000000     0\n433  12  14.0048055  0.6058025    1    2.7  2.8000000     0\n434  12  14.0048055  0.6058025    1    2.8  2.9000000     0\n435  12  14.0048055  0.6058025    1    2.9  3.0000000     0\n436  12  14.0048055  0.6058025    1    3.0  3.1000000     0\n437  12  14.0048055  0.6058025    1    3.1  3.2000000     0\n438  12  14.0048055  0.6058025    1    3.2  3.3000000     0\n439  12  14.0048055  0.6058025    1    3.3  3.4000000     0\n440  12  14.0048055  0.6058025    1    3.4  3.5000000     0\n441  12  14.0048055  0.6058025    1    3.5  3.6000000     0\n442  12  14.0048055  0.6058025    1    3.6  3.7000000     0\n443  12  14.0048055  0.6058025    1    3.7  3.8000000     0\n444  12  14.0048055  0.6058025    1    3.8  4.0000000     0\n445  12  14.0048055  0.6058025    1    4.0  4.1000000     0\n446  12  14.0048055  0.6058025    1    4.1  4.2000000     0\n447  12  14.0048055  0.6058025    1    4.2  4.3000000     0\n448  12  14.0048055  0.6058025    1    4.3  4.4000000     0\n449  12  14.0048055  0.6058025    1    4.4  4.5000000     0\n450  12  14.0048055  0.6058025    1    4.5  4.7000000     0\n451  12  14.0048055  0.6058025    1    4.7  4.8000000     0\n452  12  14.0048055  0.6058025    1    4.8  4.9000000     0\n453  12  14.0048055  0.6058025    1    4.9  5.0000000     0\n454  12  14.0048055  0.6058025    1    5.0 14.0048055     1\n455  13   1.1301126  0.7084138    0    0.0  0.1000000     0\n456  13   1.1301126  0.7084138    0    0.1  0.2000000     0\n457  13   1.1301126  0.7084138    0    0.2  0.3000000     0\n458  13   1.1301126  0.7084138    0    0.3  0.4000000     0\n459  13   1.1301126  0.7084138    0    0.4  0.6000000     0\n460  13   1.1301126  0.7084138    0    0.6  0.7000000     0\n461  13   1.1301126  0.7084138    0    0.7  0.8000000     0\n462  13   1.1301126  0.7084138    1    0.8  0.9000000     0\n463  13   1.1301126  0.7084138    1    0.9  1.0000000     0\n464  13   1.1301126  0.7084138    1    1.0  1.1000000     0\n465  13   1.1301126  0.7084138    1    1.1  1.1301126     1\n466  14  80.8085141  0.7319834    0    0.0  0.1000000     0\n467  14  80.8085141  0.7319834    0    0.1  0.2000000     0\n468  14  80.8085141  0.7319834    0    0.2  0.3000000     0\n469  14  80.8085141  0.7319834    0    0.3  0.4000000     0\n470  14  80.8085141  0.7319834    0    0.4  0.6000000     0\n471  14  80.8085141  0.7319834    0    0.6  0.7000000     0\n472  14  80.8085141  0.7319834    0    0.7  0.8000000     0\n473  14  80.8085141  0.7319834    1    0.8  0.9000000     0\n474  14  80.8085141  0.7319834    1    0.9  1.0000000     0\n475  14  80.8085141  0.7319834    1    1.0  1.1000000     0\n476  14  80.8085141  0.7319834    1    1.1  1.2000000     0\n477  14  80.8085141  0.7319834    1    1.2  1.3000000     0\n478  14  80.8085141  0.7319834    1    1.3  1.5000000     0\n479  14  80.8085141  0.7319834    1    1.5  1.6000000     0\n480  14  80.8085141  0.7319834    1    1.6  1.7000000     0\n481  14  80.8085141  0.7319834    1    1.7  1.8000000     0\n482  14  80.8085141  0.7319834    1    1.8  1.9000000     0\n483  14  80.8085141  0.7319834    1    1.9  2.1000000     0\n484  14  80.8085141  0.7319834    1    2.1  2.2000000     0\n485  14  80.8085141  0.7319834    1    2.2  2.3000000     0\n486  14  80.8085141  0.7319834    1    2.3  2.4000000     0\n487  14  80.8085141  0.7319834    1    2.4  2.5000000     0\n488  14  80.8085141  0.7319834    1    2.5  2.6000000     0\n489  14  80.8085141  0.7319834    1    2.6  2.7000000     0\n490  14  80.8085141  0.7319834    1    2.7  2.8000000     0\n491  14  80.8085141  0.7319834    1    2.8  2.9000000     0\n492  14  80.8085141  0.7319834    1    2.9  3.0000000     0\n493  14  80.8085141  0.7319834    1    3.0  3.1000000     0\n494  14  80.8085141  0.7319834    1    3.1  3.2000000     0\n495  14  80.8085141  0.7319834    1    3.2  3.3000000     0\n496  14  80.8085141  0.7319834    1    3.3  3.4000000     0\n497  14  80.8085141  0.7319834    1    3.4  3.5000000     0\n498  14  80.8085141  0.7319834    1    3.5  3.6000000     0\n499  14  80.8085141  0.7319834    1    3.6  3.7000000     0\n500  14  80.8085141  0.7319834    1    3.7  3.8000000     0\n501  14  80.8085141  0.7319834    1    3.8  4.0000000     0\n502  14  80.8085141  0.7319834    1    4.0  4.1000000     0\n503  14  80.8085141  0.7319834    1    4.1  4.2000000     0\n504  14  80.8085141  0.7319834    1    4.2  4.3000000     0\n505  14  80.8085141  0.7319834    1    4.3  4.4000000     0\n506  14  80.8085141  0.7319834    1    4.4  4.5000000     0\n507  14  80.8085141  0.7319834    1    4.5  4.7000000     0\n508  14  80.8085141  0.7319834    1    4.7  4.8000000     0\n509  14  80.8085141  0.7319834    1    4.8  4.9000000     0\n510  14  80.8085141  0.7319834    1    4.9  5.0000000     0\n511  14  80.8085141  0.7319834    1    5.0 80.8085141     1\n512  15  12.0555643  1.7348011    0    0.0  0.1000000     0\n513  15  12.0555643  1.7348011    0    0.1  0.2000000     0\n514  15  12.0555643  1.7348011    0    0.2  0.3000000     0\n515  15  12.0555643  1.7348011    0    0.3  0.4000000     0\n516  15  12.0555643  1.7348011    0    0.4  0.6000000     0\n517  15  12.0555643  1.7348011    0    0.6  0.7000000     0\n518  15  12.0555643  1.7348011    0    0.7  0.8000000     0\n519  15  12.0555643  1.7348011    0    0.8  0.9000000     0\n520  15  12.0555643  1.7348011    0    0.9  1.0000000     0\n521  15  12.0555643  1.7348011    0    1.0  1.1000000     0\n522  15  12.0555643  1.7348011    0    1.1  1.2000000     0\n523  15  12.0555643  1.7348011    0    1.2  1.3000000     0\n524  15  12.0555643  1.7348011    0    1.3  1.5000000     0\n525  15  12.0555643  1.7348011    0    1.5  1.6000000     0\n526  15  12.0555643  1.7348011    0    1.6  1.7000000     0\n527  15  12.0555643  1.7348011    0    1.7  1.8000000     0\n528  15  12.0555643  1.7348011    1    1.8  1.9000000     0\n529  15  12.0555643  1.7348011    1    1.9  2.1000000     0\n530  15  12.0555643  1.7348011    1    2.1  2.2000000     0\n531  15  12.0555643  1.7348011    1    2.2  2.3000000     0\n532  15  12.0555643  1.7348011    1    2.3  2.4000000     0\n533  15  12.0555643  1.7348011    1    2.4  2.5000000     0\n534  15  12.0555643  1.7348011    1    2.5  2.6000000     0\n535  15  12.0555643  1.7348011    1    2.6  2.7000000     0\n536  15  12.0555643  1.7348011    1    2.7  2.8000000     0\n537  15  12.0555643  1.7348011    1    2.8  2.9000000     0\n538  15  12.0555643  1.7348011    1    2.9  3.0000000     0\n539  15  12.0555643  1.7348011    1    3.0  3.1000000     0\n540  15  12.0555643  1.7348011    1    3.1  3.2000000     0\n541  15  12.0555643  1.7348011    1    3.2  3.3000000     0\n542  15  12.0555643  1.7348011    1    3.3  3.4000000     0\n543  15  12.0555643  1.7348011    1    3.4  3.5000000     0\n544  15  12.0555643  1.7348011    1    3.5  3.6000000     0\n545  15  12.0555643  1.7348011    1    3.6  3.7000000     0\n546  15  12.0555643  1.7348011    1    3.7  3.8000000     0\n547  15  12.0555643  1.7348011    1    3.8  4.0000000     0\n548  15  12.0555643  1.7348011    1    4.0  4.1000000     0\n549  15  12.0555643  1.7348011    1    4.1  4.2000000     0\n550  15  12.0555643  1.7348011    1    4.2  4.3000000     0\n551  15  12.0555643  1.7348011    1    4.3  4.4000000     0\n552  15  12.0555643  1.7348011    1    4.4  4.5000000     0\n553  15  12.0555643  1.7348011    1    4.5  4.7000000     0\n554  15  12.0555643  1.7348011    1    4.7  4.8000000     0\n555  15  12.0555643  1.7348011    1    4.8  4.9000000     0\n556  15  12.0555643  1.7348011    1    4.9  5.0000000     0\n557  15  12.0555643  1.7348011    1    5.0 12.0555643     1\n558  16  44.6531818  0.3526565    0    0.0  0.1000000     0\n559  16  44.6531818  0.3526565    0    0.1  0.2000000     0\n560  16  44.6531818  0.3526565    0    0.2  0.3000000     0\n561  16  44.6531818  0.3526565    0    0.3  0.4000000     0\n562  16  44.6531818  0.3526565    1    0.4  0.6000000     0\n563  16  44.6531818  0.3526565    1    0.6  0.7000000     0\n564  16  44.6531818  0.3526565    1    0.7  0.8000000     0\n565  16  44.6531818  0.3526565    1    0.8  0.9000000     0\n566  16  44.6531818  0.3526565    1    0.9  1.0000000     0\n567  16  44.6531818  0.3526565    1    1.0  1.1000000     0\n568  16  44.6531818  0.3526565    1    1.1  1.2000000     0\n569  16  44.6531818  0.3526565    1    1.2  1.3000000     0\n570  16  44.6531818  0.3526565    1    1.3  1.5000000     0\n571  16  44.6531818  0.3526565    1    1.5  1.6000000     0\n572  16  44.6531818  0.3526565    1    1.6  1.7000000     0\n573  16  44.6531818  0.3526565    1    1.7  1.8000000     0\n574  16  44.6531818  0.3526565    1    1.8  1.9000000     0\n575  16  44.6531818  0.3526565    1    1.9  2.1000000     0\n576  16  44.6531818  0.3526565    1    2.1  2.2000000     0\n577  16  44.6531818  0.3526565    1    2.2  2.3000000     0\n578  16  44.6531818  0.3526565    1    2.3  2.4000000     0\n579  16  44.6531818  0.3526565    1    2.4  2.5000000     0\n580  16  44.6531818  0.3526565    1    2.5  2.6000000     0\n581  16  44.6531818  0.3526565    1    2.6  2.7000000     0\n582  16  44.6531818  0.3526565    1    2.7  2.8000000     0\n583  16  44.6531818  0.3526565    1    2.8  2.9000000     0\n584  16  44.6531818  0.3526565    1    2.9  3.0000000     0\n585  16  44.6531818  0.3526565    1    3.0  3.1000000     0\n586  16  44.6531818  0.3526565    1    3.1  3.2000000     0\n587  16  44.6531818  0.3526565    1    3.2  3.3000000     0\n588  16  44.6531818  0.3526565    1    3.3  3.4000000     0\n589  16  44.6531818  0.3526565    1    3.4  3.5000000     0\n590  16  44.6531818  0.3526565    1    3.5  3.6000000     0\n591  16  44.6531818  0.3526565    1    3.6  3.7000000     0\n592  16  44.6531818  0.3526565    1    3.7  3.8000000     0\n593  16  44.6531818  0.3526565    1    3.8  4.0000000     0\n594  16  44.6531818  0.3526565    1    4.0  4.1000000     0\n595  16  44.6531818  0.3526565    1    4.1  4.2000000     0\n596  16  44.6531818  0.3526565    1    4.2  4.3000000     0\n597  16  44.6531818  0.3526565    1    4.3  4.4000000     0\n598  16  44.6531818  0.3526565    1    4.4  4.5000000     0\n599  16  44.6531818  0.3526565    1    4.5  4.7000000     0\n600  16  44.6531818  0.3526565    1    4.7  4.8000000     0\n601  16  44.6531818  0.3526565    1    4.8  4.9000000     0\n602  16  44.6531818  0.3526565    1    4.9  5.0000000     0\n603  16  44.6531818  0.3526565    1    5.0 44.6531818     0\n604  17  13.2422411  3.1442545    0    0.0  0.1000000     0\n605  17  13.2422411  3.1442545    0    0.1  0.2000000     0\n606  17  13.2422411  3.1442545    0    0.2  0.3000000     0\n607  17  13.2422411  3.1442545    0    0.3  0.4000000     0\n608  17  13.2422411  3.1442545    0    0.4  0.6000000     0\n609  17  13.2422411  3.1442545    0    0.6  0.7000000     0\n610  17  13.2422411  3.1442545    0    0.7  0.8000000     0\n611  17  13.2422411  3.1442545    0    0.8  0.9000000     0\n612  17  13.2422411  3.1442545    0    0.9  1.0000000     0\n613  17  13.2422411  3.1442545    0    1.0  1.1000000     0\n614  17  13.2422411  3.1442545    0    1.1  1.2000000     0\n615  17  13.2422411  3.1442545    0    1.2  1.3000000     0\n616  17  13.2422411  3.1442545    0    1.3  1.5000000     0\n617  17  13.2422411  3.1442545    0    1.5  1.6000000     0\n618  17  13.2422411  3.1442545    0    1.6  1.7000000     0\n619  17  13.2422411  3.1442545    0    1.7  1.8000000     0\n620  17  13.2422411  3.1442545    0    1.8  1.9000000     0\n621  17  13.2422411  3.1442545    0    1.9  2.1000000     0\n622  17  13.2422411  3.1442545    0    2.1  2.2000000     0\n623  17  13.2422411  3.1442545    0    2.2  2.3000000     0\n624  17  13.2422411  3.1442545    0    2.3  2.4000000     0\n625  17  13.2422411  3.1442545    0    2.4  2.5000000     0\n626  17  13.2422411  3.1442545    0    2.5  2.6000000     0\n627  17  13.2422411  3.1442545    0    2.6  2.7000000     0\n628  17  13.2422411  3.1442545    0    2.7  2.8000000     0\n629  17  13.2422411  3.1442545    0    2.8  2.9000000     0\n630  17  13.2422411  3.1442545    0    2.9  3.0000000     0\n631  17  13.2422411  3.1442545    0    3.0  3.1000000     0\n632  17  13.2422411  3.1442545    0    3.1  3.2000000     0\n633  17  13.2422411  3.1442545    1    3.2  3.3000000     0\n634  17  13.2422411  3.1442545    1    3.3  3.4000000     0\n635  17  13.2422411  3.1442545    1    3.4  3.5000000     0\n636  17  13.2422411  3.1442545    1    3.5  3.6000000     0\n637  17  13.2422411  3.1442545    1    3.6  3.7000000     0\n638  17  13.2422411  3.1442545    1    3.7  3.8000000     0\n639  17  13.2422411  3.1442545    1    3.8  4.0000000     0\n640  17  13.2422411  3.1442545    1    4.0  4.1000000     0\n641  17  13.2422411  3.1442545    1    4.1  4.2000000     0\n642  17  13.2422411  3.1442545    1    4.2  4.3000000     0\n643  17  13.2422411  3.1442545    1    4.3  4.4000000     0\n644  17  13.2422411  3.1442545    1    4.4  4.5000000     0\n645  17  13.2422411  3.1442545    1    4.5  4.7000000     0\n646  17  13.2422411  3.1442545    1    4.7  4.8000000     0\n647  17  13.2422411  3.1442545    1    4.8  4.9000000     0\n648  17  13.2422411  3.1442545    1    4.9  5.0000000     0\n649  17  13.2422411  3.1442545    1    5.0 13.2422411     1\n650  18  13.3362798  0.5817457    0    0.0  0.1000000     0\n651  18  13.3362798  0.5817457    0    0.1  0.2000000     0\n652  18  13.3362798  0.5817457    0    0.2  0.3000000     0\n653  18  13.3362798  0.5817457    0    0.3  0.4000000     0\n654  18  13.3362798  0.5817457    0    0.4  0.6000000     0\n655  18  13.3362798  0.5817457    1    0.6  0.7000000     0\n656  18  13.3362798  0.5817457    1    0.7  0.8000000     0\n657  18  13.3362798  0.5817457    1    0.8  0.9000000     0\n658  18  13.3362798  0.5817457    1    0.9  1.0000000     0\n659  18  13.3362798  0.5817457    1    1.0  1.1000000     0\n660  18  13.3362798  0.5817457    1    1.1  1.2000000     0\n661  18  13.3362798  0.5817457    1    1.2  1.3000000     0\n662  18  13.3362798  0.5817457    1    1.3  1.5000000     0\n663  18  13.3362798  0.5817457    1    1.5  1.6000000     0\n664  18  13.3362798  0.5817457    1    1.6  1.7000000     0\n665  18  13.3362798  0.5817457    1    1.7  1.8000000     0\n666  18  13.3362798  0.5817457    1    1.8  1.9000000     0\n667  18  13.3362798  0.5817457    1    1.9  2.1000000     0\n668  18  13.3362798  0.5817457    1    2.1  2.2000000     0\n669  18  13.3362798  0.5817457    1    2.2  2.3000000     0\n670  18  13.3362798  0.5817457    1    2.3  2.4000000     0\n671  18  13.3362798  0.5817457    1    2.4  2.5000000     0\n672  18  13.3362798  0.5817457    1    2.5  2.6000000     0\n673  18  13.3362798  0.5817457    1    2.6  2.7000000     0\n674  18  13.3362798  0.5817457    1    2.7  2.8000000     0\n675  18  13.3362798  0.5817457    1    2.8  2.9000000     0\n676  18  13.3362798  0.5817457    1    2.9  3.0000000     0\n677  18  13.3362798  0.5817457    1    3.0  3.1000000     0\n678  18  13.3362798  0.5817457    1    3.1  3.2000000     0\n679  18  13.3362798  0.5817457    1    3.2  3.3000000     0\n680  18  13.3362798  0.5817457    1    3.3  3.4000000     0\n681  18  13.3362798  0.5817457    1    3.4  3.5000000     0\n682  18  13.3362798  0.5817457    1    3.5  3.6000000     0\n683  18  13.3362798  0.5817457    1    3.6  3.7000000     0\n684  18  13.3362798  0.5817457    1    3.7  3.8000000     0\n685  18  13.3362798  0.5817457    1    3.8  4.0000000     0\n686  18  13.3362798  0.5817457    1    4.0  4.1000000     0\n687  18  13.3362798  0.5817457    1    4.1  4.2000000     0\n688  18  13.3362798  0.5817457    1    4.2  4.3000000     0\n689  18  13.3362798  0.5817457    1    4.3  4.4000000     0\n690  18  13.3362798  0.5817457    1    4.4  4.5000000     0\n691  18  13.3362798  0.5817457    1    4.5  4.7000000     0\n692  18  13.3362798  0.5817457    1    4.7  4.8000000     0\n693  18  13.3362798  0.5817457    1    4.8  4.9000000     0\n694  18  13.3362798  0.5817457    1    4.9  5.0000000     0\n695  18  13.3362798  0.5817457    1    5.0 13.3362798     1\n696  19  17.8603999  3.7162551    0    0.0  0.1000000     0\n697  19  17.8603999  3.7162551    0    0.1  0.2000000     0\n698  19  17.8603999  3.7162551    0    0.2  0.3000000     0\n699  19  17.8603999  3.7162551    0    0.3  0.4000000     0\n700  19  17.8603999  3.7162551    0    0.4  0.6000000     0\n701  19  17.8603999  3.7162551    0    0.6  0.7000000     0\n702  19  17.8603999  3.7162551    0    0.7  0.8000000     0\n703  19  17.8603999  3.7162551    0    0.8  0.9000000     0\n704  19  17.8603999  3.7162551    0    0.9  1.0000000     0\n705  19  17.8603999  3.7162551    0    1.0  1.1000000     0\n706  19  17.8603999  3.7162551    0    1.1  1.2000000     0\n707  19  17.8603999  3.7162551    0    1.2  1.3000000     0\n708  19  17.8603999  3.7162551    0    1.3  1.5000000     0\n709  19  17.8603999  3.7162551    0    1.5  1.6000000     0\n710  19  17.8603999  3.7162551    0    1.6  1.7000000     0\n711  19  17.8603999  3.7162551    0    1.7  1.8000000     0\n712  19  17.8603999  3.7162551    0    1.8  1.9000000     0\n713  19  17.8603999  3.7162551    0    1.9  2.1000000     0\n714  19  17.8603999  3.7162551    0    2.1  2.2000000     0\n715  19  17.8603999  3.7162551    0    2.2  2.3000000     0\n716  19  17.8603999  3.7162551    0    2.3  2.4000000     0\n717  19  17.8603999  3.7162551    0    2.4  2.5000000     0\n718  19  17.8603999  3.7162551    0    2.5  2.6000000     0\n719  19  17.8603999  3.7162551    0    2.6  2.7000000     0\n720  19  17.8603999  3.7162551    0    2.7  2.8000000     0\n721  19  17.8603999  3.7162551    0    2.8  2.9000000     0\n722  19  17.8603999  3.7162551    0    2.9  3.0000000     0\n723  19  17.8603999  3.7162551    0    3.0  3.1000000     0\n724  19  17.8603999  3.7162551    0    3.1  3.2000000     0\n725  19  17.8603999  3.7162551    0    3.2  3.3000000     0\n726  19  17.8603999  3.7162551    0    3.3  3.4000000     0\n727  19  17.8603999  3.7162551    0    3.4  3.5000000     0\n728  19  17.8603999  3.7162551    0    3.5  3.6000000     0\n729  19  17.8603999  3.7162551    0    3.6  3.7000000     0\n730  19  17.8603999  3.7162551    0    3.7  3.8000000     0\n731  19  17.8603999  3.7162551    1    3.8  4.0000000     0\n732  19  17.8603999  3.7162551    1    4.0  4.1000000     0\n733  19  17.8603999  3.7162551    1    4.1  4.2000000     0\n734  19  17.8603999  3.7162551    1    4.2  4.3000000     0\n735  19  17.8603999  3.7162551    1    4.3  4.4000000     0\n736  19  17.8603999  3.7162551    1    4.4  4.5000000     0\n737  19  17.8603999  3.7162551    1    4.5  4.7000000     0\n738  19  17.8603999  3.7162551    1    4.7  4.8000000     0\n739  19  17.8603999  3.7162551    1    4.8  4.9000000     0\n740  19  17.8603999  3.7162551    1    4.9  5.0000000     0\n741  19  17.8603999  3.7162551    1    5.0 17.8603999     0\n742  20  23.3798972  1.8196391    0    0.0  0.1000000     0\n743  20  23.3798972  1.8196391    0    0.1  0.2000000     0\n744  20  23.3798972  1.8196391    0    0.2  0.3000000     0\n745  20  23.3798972  1.8196391    0    0.3  0.4000000     0\n746  20  23.3798972  1.8196391    0    0.4  0.6000000     0\n747  20  23.3798972  1.8196391    0    0.6  0.7000000     0\n748  20  23.3798972  1.8196391    0    0.7  0.8000000     0\n749  20  23.3798972  1.8196391    0    0.8  0.9000000     0\n750  20  23.3798972  1.8196391    0    0.9  1.0000000     0\n751  20  23.3798972  1.8196391    0    1.0  1.1000000     0\n752  20  23.3798972  1.8196391    0    1.1  1.2000000     0\n753  20  23.3798972  1.8196391    0    1.2  1.3000000     0\n754  20  23.3798972  1.8196391    0    1.3  1.5000000     0\n755  20  23.3798972  1.8196391    0    1.5  1.6000000     0\n756  20  23.3798972  1.8196391    0    1.6  1.7000000     0\n757  20  23.3798972  1.8196391    0    1.7  1.8000000     0\n758  20  23.3798972  1.8196391    0    1.8  1.9000000     0\n759  20  23.3798972  1.8196391    1    1.9  2.1000000     0\n760  20  23.3798972  1.8196391    1    2.1  2.2000000     0\n761  20  23.3798972  1.8196391    1    2.2  2.3000000     0\n762  20  23.3798972  1.8196391    1    2.3  2.4000000     0\n763  20  23.3798972  1.8196391    1    2.4  2.5000000     0\n764  20  23.3798972  1.8196391    1    2.5  2.6000000     0\n765  20  23.3798972  1.8196391    1    2.6  2.7000000     0\n766  20  23.3798972  1.8196391    1    2.7  2.8000000     0\n767  20  23.3798972  1.8196391    1    2.8  2.9000000     0\n768  20  23.3798972  1.8196391    1    2.9  3.0000000     0\n769  20  23.3798972  1.8196391    1    3.0  3.1000000     0\n770  20  23.3798972  1.8196391    1    3.1  3.2000000     0\n771  20  23.3798972  1.8196391    1    3.2  3.3000000     0\n772  20  23.3798972  1.8196391    1    3.3  3.4000000     0\n773  20  23.3798972  1.8196391    1    3.4  3.5000000     0\n774  20  23.3798972  1.8196391    1    3.5  3.6000000     0\n775  20  23.3798972  1.8196391    1    3.6  3.7000000     0\n776  20  23.3798972  1.8196391    1    3.7  3.8000000     0\n777  20  23.3798972  1.8196391    1    3.8  4.0000000     0\n778  20  23.3798972  1.8196391    1    4.0  4.1000000     0\n779  20  23.3798972  1.8196391    1    4.1  4.2000000     0\n780  20  23.3798972  1.8196391    1    4.2  4.3000000     0\n781  20  23.3798972  1.8196391    1    4.3  4.4000000     0\n782  20  23.3798972  1.8196391    1    4.4  4.5000000     0\n783  20  23.3798972  1.8196391    1    4.5  4.7000000     0\n784  20  23.3798972  1.8196391    1    4.7  4.8000000     0\n785  20  23.3798972  1.8196391    1    4.8  4.9000000     0\n786  20  23.3798972  1.8196391    1    4.9  5.0000000     0\n787  20  23.3798972  1.8196391    1    5.0 23.3798972     0\n788  21  16.6979429  4.3401240    0    0.0  0.1000000     0\n789  21  16.6979429  4.3401240    0    0.1  0.2000000     0\n790  21  16.6979429  4.3401240    0    0.2  0.3000000     0\n791  21  16.6979429  4.3401240    0    0.3  0.4000000     0\n792  21  16.6979429  4.3401240    0    0.4  0.6000000     0\n793  21  16.6979429  4.3401240    0    0.6  0.7000000     0\n794  21  16.6979429  4.3401240    0    0.7  0.8000000     0\n795  21  16.6979429  4.3401240    0    0.8  0.9000000     0\n796  21  16.6979429  4.3401240    0    0.9  1.0000000     0\n797  21  16.6979429  4.3401240    0    1.0  1.1000000     0\n798  21  16.6979429  4.3401240    0    1.1  1.2000000     0\n799  21  16.6979429  4.3401240    0    1.2  1.3000000     0\n800  21  16.6979429  4.3401240    0    1.3  1.5000000     0\n801  21  16.6979429  4.3401240    0    1.5  1.6000000     0\n802  21  16.6979429  4.3401240    0    1.6  1.7000000     0\n803  21  16.6979429  4.3401240    0    1.7  1.8000000     0\n804  21  16.6979429  4.3401240    0    1.8  1.9000000     0\n805  21  16.6979429  4.3401240    0    1.9  2.1000000     0\n806  21  16.6979429  4.3401240    0    2.1  2.2000000     0\n807  21  16.6979429  4.3401240    0    2.2  2.3000000     0\n808  21  16.6979429  4.3401240    0    2.3  2.4000000     0\n809  21  16.6979429  4.3401240    0    2.4  2.5000000     0\n810  21  16.6979429  4.3401240    0    2.5  2.6000000     0\n811  21  16.6979429  4.3401240    0    2.6  2.7000000     0\n812  21  16.6979429  4.3401240    0    2.7  2.8000000     0\n813  21  16.6979429  4.3401240    0    2.8  2.9000000     0\n814  21  16.6979429  4.3401240    0    2.9  3.0000000     0\n815  21  16.6979429  4.3401240    0    3.0  3.1000000     0\n816  21  16.6979429  4.3401240    0    3.1  3.2000000     0\n817  21  16.6979429  4.3401240    0    3.2  3.3000000     0\n818  21  16.6979429  4.3401240    0    3.3  3.4000000     0\n819  21  16.6979429  4.3401240    0    3.4  3.5000000     0\n820  21  16.6979429  4.3401240    0    3.5  3.6000000     0\n821  21  16.6979429  4.3401240    0    3.6  3.7000000     0\n822  21  16.6979429  4.3401240    0    3.7  3.8000000     0\n823  21  16.6979429  4.3401240    0    3.8  4.0000000     0\n824  21  16.6979429  4.3401240    0    4.0  4.1000000     0\n825  21  16.6979429  4.3401240    0    4.1  4.2000000     0\n826  21  16.6979429  4.3401240    0    4.2  4.3000000     0\n827  21  16.6979429  4.3401240    0    4.3  4.4000000     0\n828  21  16.6979429  4.3401240    1    4.4  4.5000000     0\n829  21  16.6979429  4.3401240    1    4.5  4.7000000     0\n830  21  16.6979429  4.3401240    1    4.7  4.8000000     0\n831  21  16.6979429  4.3401240    1    4.8  4.9000000     0\n832  21  16.6979429  4.3401240    1    4.9  5.0000000     0\n833  21  16.6979429  4.3401240    1    5.0 16.6979429     1\n834  22  18.8367651  3.5146089    0    0.0  0.1000000     0\n835  22  18.8367651  3.5146089    0    0.1  0.2000000     0\n836  22  18.8367651  3.5146089    0    0.2  0.3000000     0\n837  22  18.8367651  3.5146089    0    0.3  0.4000000     0\n838  22  18.8367651  3.5146089    0    0.4  0.6000000     0\n839  22  18.8367651  3.5146089    0    0.6  0.7000000     0\n840  22  18.8367651  3.5146089    0    0.7  0.8000000     0\n841  22  18.8367651  3.5146089    0    0.8  0.9000000     0\n842  22  18.8367651  3.5146089    0    0.9  1.0000000     0\n843  22  18.8367651  3.5146089    0    1.0  1.1000000     0\n844  22  18.8367651  3.5146089    0    1.1  1.2000000     0\n845  22  18.8367651  3.5146089    0    1.2  1.3000000     0\n846  22  18.8367651  3.5146089    0    1.3  1.5000000     0\n847  22  18.8367651  3.5146089    0    1.5  1.6000000     0\n848  22  18.8367651  3.5146089    0    1.6  1.7000000     0\n849  22  18.8367651  3.5146089    0    1.7  1.8000000     0\n850  22  18.8367651  3.5146089    0    1.8  1.9000000     0\n851  22  18.8367651  3.5146089    0    1.9  2.1000000     0\n852  22  18.8367651  3.5146089    0    2.1  2.2000000     0\n853  22  18.8367651  3.5146089    0    2.2  2.3000000     0\n854  22  18.8367651  3.5146089    0    2.3  2.4000000     0\n855  22  18.8367651  3.5146089    0    2.4  2.5000000     0\n856  22  18.8367651  3.5146089    0    2.5  2.6000000     0\n857  22  18.8367651  3.5146089    0    2.6  2.7000000     0\n858  22  18.8367651  3.5146089    0    2.7  2.8000000     0\n859  22  18.8367651  3.5146089    0    2.8  2.9000000     0\n860  22  18.8367651  3.5146089    0    2.9  3.0000000     0\n861  22  18.8367651  3.5146089    0    3.0  3.1000000     0\n862  22  18.8367651  3.5146089    0    3.1  3.2000000     0\n863  22  18.8367651  3.5146089    0    3.2  3.3000000     0\n864  22  18.8367651  3.5146089    0    3.3  3.4000000     0\n865  22  18.8367651  3.5146089    0    3.4  3.5000000     0\n866  22  18.8367651  3.5146089    0    3.5  3.6000000     0\n867  22  18.8367651  3.5146089    1    3.6  3.7000000     0\n868  22  18.8367651  3.5146089    1    3.7  3.8000000     0\n869  22  18.8367651  3.5146089    1    3.8  4.0000000     0\n870  22  18.8367651  3.5146089    1    4.0  4.1000000     0\n871  22  18.8367651  3.5146089    1    4.1  4.2000000     0\n872  22  18.8367651  3.5146089    1    4.2  4.3000000     0\n873  22  18.8367651  3.5146089    1    4.3  4.4000000     0\n874  22  18.8367651  3.5146089    1    4.4  4.5000000     0\n875  22  18.8367651  3.5146089    1    4.5  4.7000000     0\n876  22  18.8367651  3.5146089    1    4.7  4.8000000     0\n877  22  18.8367651  3.5146089    1    4.8  4.9000000     0\n878  22  18.8367651  3.5146089    1    4.9  5.0000000     0\n879  22  18.8367651  3.5146089    1    5.0 18.8367651     1\n880  23  65.5408321  0.6569676    0    0.0  0.1000000     0\n881  23  65.5408321  0.6569676    0    0.1  0.2000000     0\n882  23  65.5408321  0.6569676    0    0.2  0.3000000     0\n883  23  65.5408321  0.6569676    0    0.3  0.4000000     0\n884  23  65.5408321  0.6569676    0    0.4  0.6000000     0\n885  23  65.5408321  0.6569676    0    0.6  0.7000000     0\n886  23  65.5408321  0.6569676    1    0.7  0.8000000     0\n887  23  65.5408321  0.6569676    1    0.8  0.9000000     0\n888  23  65.5408321  0.6569676    1    0.9  1.0000000     0\n889  23  65.5408321  0.6569676    1    1.0  1.1000000     0\n890  23  65.5408321  0.6569676    1    1.1  1.2000000     0\n891  23  65.5408321  0.6569676    1    1.2  1.3000000     0\n892  23  65.5408321  0.6569676    1    1.3  1.5000000     0\n893  23  65.5408321  0.6569676    1    1.5  1.6000000     0\n894  23  65.5408321  0.6569676    1    1.6  1.7000000     0\n895  23  65.5408321  0.6569676    1    1.7  1.8000000     0\n896  23  65.5408321  0.6569676    1    1.8  1.9000000     0\n897  23  65.5408321  0.6569676    1    1.9  2.1000000     0\n898  23  65.5408321  0.6569676    1    2.1  2.2000000     0\n899  23  65.5408321  0.6569676    1    2.2  2.3000000     0\n900  23  65.5408321  0.6569676    1    2.3  2.4000000     0\n901  23  65.5408321  0.6569676    1    2.4  2.5000000     0\n902  23  65.5408321  0.6569676    1    2.5  2.6000000     0\n903  23  65.5408321  0.6569676    1    2.6  2.7000000     0\n904  23  65.5408321  0.6569676    1    2.7  2.8000000     0\n905  23  65.5408321  0.6569676    1    2.8  2.9000000     0\n906  23  65.5408321  0.6569676    1    2.9  3.0000000     0\n907  23  65.5408321  0.6569676    1    3.0  3.1000000     0\n908  23  65.5408321  0.6569676    1    3.1  3.2000000     0\n909  23  65.5408321  0.6569676    1    3.2  3.3000000     0\n910  23  65.5408321  0.6569676    1    3.3  3.4000000     0\n911  23  65.5408321  0.6569676    1    3.4  3.5000000     0\n912  23  65.5408321  0.6569676    1    3.5  3.6000000     0\n913  23  65.5408321  0.6569676    1    3.6  3.7000000     0\n914  23  65.5408321  0.6569676    1    3.7  3.8000000     0\n915  23  65.5408321  0.6569676    1    3.8  4.0000000     0\n916  23  65.5408321  0.6569676    1    4.0  4.1000000     0\n917  23  65.5408321  0.6569676    1    4.1  4.2000000     0\n918  23  65.5408321  0.6569676    1    4.2  4.3000000     0\n919  23  65.5408321  0.6569676    1    4.3  4.4000000     0\n920  23  65.5408321  0.6569676    1    4.4  4.5000000     0\n921  23  65.5408321  0.6569676    1    4.5  4.7000000     0\n922  23  65.5408321  0.6569676    1    4.7  4.8000000     0\n923  23  65.5408321  0.6569676    1    4.8  4.9000000     0\n924  23  65.5408321  0.6569676    1    4.9  5.0000000     0\n925  23  65.5408321  0.6569676    1    5.0 65.5408321     0\n926  24   2.5434704  1.1927283    0    0.0  0.1000000     0\n927  24   2.5434704  1.1927283    0    0.1  0.2000000     0\n928  24   2.5434704  1.1927283    0    0.2  0.3000000     0\n929  24   2.5434704  1.1927283    0    0.3  0.4000000     0\n930  24   2.5434704  1.1927283    0    0.4  0.6000000     0\n931  24   2.5434704  1.1927283    0    0.6  0.7000000     0\n932  24   2.5434704  1.1927283    0    0.7  0.8000000     0\n933  24   2.5434704  1.1927283    0    0.8  0.9000000     0\n934  24   2.5434704  1.1927283    0    0.9  1.0000000     0\n935  24   2.5434704  1.1927283    0    1.0  1.1000000     0\n936  24   2.5434704  1.1927283    0    1.1  1.2000000     0\n937  24   2.5434704  1.1927283    1    1.2  1.3000000     0\n938  24   2.5434704  1.1927283    1    1.3  1.5000000     0\n939  24   2.5434704  1.1927283    1    1.5  1.6000000     0\n940  24   2.5434704  1.1927283    1    1.6  1.7000000     0\n941  24   2.5434704  1.1927283    1    1.7  1.8000000     0\n942  24   2.5434704  1.1927283    1    1.8  1.9000000     0\n943  24   2.5434704  1.1927283    1    1.9  2.1000000     0\n944  24   2.5434704  1.1927283    1    2.1  2.2000000     0\n945  24   2.5434704  1.1927283    1    2.2  2.3000000     0\n946  24   2.5434704  1.1927283    1    2.3  2.4000000     0\n947  24   2.5434704  1.1927283    1    2.4  2.5000000     0\n948  24   2.5434704  1.1927283    1    2.5  2.5434704     0\n949  25   1.5194027  0.9203512    0    0.0  0.1000000     0\n950  25   1.5194027  0.9203512    0    0.1  0.2000000     0\n951  25   1.5194027  0.9203512    0    0.2  0.3000000     0\n952  25   1.5194027  0.9203512    0    0.3  0.4000000     0\n953  25   1.5194027  0.9203512    0    0.4  0.6000000     0\n954  25   1.5194027  0.9203512    0    0.6  0.7000000     0\n955  25   1.5194027  0.9203512    0    0.7  0.8000000     0\n956  25   1.5194027  0.9203512    0    0.8  0.9000000     0\n957  25   1.5194027  0.9203512    0    0.9  1.0000000     0\n958  25   1.5194027  0.9203512    1    1.0  1.1000000     0\n959  25   1.5194027  0.9203512    1    1.1  1.2000000     0\n960  25   1.5194027  0.9203512    1    1.2  1.3000000     0\n961  25   1.5194027  0.9203512    1    1.3  1.5000000     0\n962  25   1.5194027  0.9203512    1    1.5  1.5194027     1\n963  26  43.7474665  2.1056781    0    0.0  0.1000000     0\n964  26  43.7474665  2.1056781    0    0.1  0.2000000     0\n965  26  43.7474665  2.1056781    0    0.2  0.3000000     0\n966  26  43.7474665  2.1056781    0    0.3  0.4000000     0\n967  26  43.7474665  2.1056781    0    0.4  0.6000000     0\n968  26  43.7474665  2.1056781    0    0.6  0.7000000     0\n969  26  43.7474665  2.1056781    0    0.7  0.8000000     0\n970  26  43.7474665  2.1056781    0    0.8  0.9000000     0\n971  26  43.7474665  2.1056781    0    0.9  1.0000000     0\n972  26  43.7474665  2.1056781    0    1.0  1.1000000     0\n973  26  43.7474665  2.1056781    0    1.1  1.2000000     0\n974  26  43.7474665  2.1056781    0    1.2  1.3000000     0\n975  26  43.7474665  2.1056781    0    1.3  1.5000000     0\n976  26  43.7474665  2.1056781    0    1.5  1.6000000     0\n977  26  43.7474665  2.1056781    0    1.6  1.7000000     0\n978  26  43.7474665  2.1056781    0    1.7  1.8000000     0\n979  26  43.7474665  2.1056781    0    1.8  1.9000000     0\n980  26  43.7474665  2.1056781    0    1.9  2.1000000     0\n981  26  43.7474665  2.1056781    0    2.1  2.2000000     0\n982  26  43.7474665  2.1056781    1    2.2  2.3000000     0\n983  26  43.7474665  2.1056781    1    2.3  2.4000000     0\n984  26  43.7474665  2.1056781    1    2.4  2.5000000     0\n985  26  43.7474665  2.1056781    1    2.5  2.6000000     0\n986  26  43.7474665  2.1056781    1    2.6  2.7000000     0\n987  26  43.7474665  2.1056781    1    2.7  2.8000000     0\n988  26  43.7474665  2.1056781    1    2.8  2.9000000     0\n989  26  43.7474665  2.1056781    1    2.9  3.0000000     0\n990  26  43.7474665  2.1056781    1    3.0  3.1000000     0\n991  26  43.7474665  2.1056781    1    3.1  3.2000000     0\n992  26  43.7474665  2.1056781    1    3.2  3.3000000     0\n993  26  43.7474665  2.1056781    1    3.3  3.4000000     0\n994  26  43.7474665  2.1056781    1    3.4  3.5000000     0\n995  26  43.7474665  2.1056781    1    3.5  3.6000000     0\n996  26  43.7474665  2.1056781    1    3.6  3.7000000     0\n997  26  43.7474665  2.1056781    1    3.7  3.8000000     0\n998  26  43.7474665  2.1056781    1    3.8  4.0000000     0\n999  26  43.7474665  2.1056781    1    4.0  4.1000000     0\n1000 26  43.7474665  2.1056781    1    4.1  4.2000000     0\n1001 26  43.7474665  2.1056781    1    4.2  4.3000000     0\n1002 26  43.7474665  2.1056781    1    4.3  4.4000000     0\n1003 26  43.7474665  2.1056781    1    4.4  4.5000000     0\n1004 26  43.7474665  2.1056781    1    4.5  4.7000000     0\n1005 26  43.7474665  2.1056781    1    4.7  4.8000000     0\n1006 26  43.7474665  2.1056781    1    4.8  4.9000000     0\n1007 26  43.7474665  2.1056781    1    4.9  5.0000000     0\n1008 26  43.7474665  2.1056781    1    5.0 43.7474665     1\n1009 27   2.1528929  1.0169765    0    0.0  0.1000000     0\n1010 27   2.1528929  1.0169765    0    0.1  0.2000000     0\n1011 27   2.1528929  1.0169765    0    0.2  0.3000000     0\n1012 27   2.1528929  1.0169765    0    0.3  0.4000000     0\n1013 27   2.1528929  1.0169765    0    0.4  0.6000000     0\n1014 27   2.1528929  1.0169765    0    0.6  0.7000000     0\n1015 27   2.1528929  1.0169765    0    0.7  0.8000000     0\n1016 27   2.1528929  1.0169765    0    0.8  0.9000000     0\n1017 27   2.1528929  1.0169765    0    0.9  1.0000000     0\n1018 27   2.1528929  1.0169765    0    1.0  1.1000000     0\n1019 27   2.1528929  1.0169765    1    1.1  1.2000000     0\n1020 27   2.1528929  1.0169765    1    1.2  1.3000000     0\n1021 27   2.1528929  1.0169765    1    1.3  1.5000000     0\n1022 27   2.1528929  1.0169765    1    1.5  1.6000000     0\n1023 27   2.1528929  1.0169765    1    1.6  1.7000000     0\n1024 27   2.1528929  1.0169765    1    1.7  1.8000000     0\n1025 27   2.1528929  1.0169765    1    1.8  1.9000000     0\n1026 27   2.1528929  1.0169765    1    1.9  2.1000000     0\n1027 27   2.1528929  1.0169765    1    2.1  2.1528929     1\n1028 28  10.4881051  1.9460602    0    0.0  0.1000000     0\n1029 28  10.4881051  1.9460602    0    0.1  0.2000000     0\n1030 28  10.4881051  1.9460602    0    0.2  0.3000000     0\n1031 28  10.4881051  1.9460602    0    0.3  0.4000000     0\n1032 28  10.4881051  1.9460602    0    0.4  0.6000000     0\n1033 28  10.4881051  1.9460602    0    0.6  0.7000000     0\n1034 28  10.4881051  1.9460602    0    0.7  0.8000000     0\n1035 28  10.4881051  1.9460602    0    0.8  0.9000000     0\n1036 28  10.4881051  1.9460602    0    0.9  1.0000000     0\n1037 28  10.4881051  1.9460602    0    1.0  1.1000000     0\n1038 28  10.4881051  1.9460602    0    1.1  1.2000000     0\n1039 28  10.4881051  1.9460602    0    1.2  1.3000000     0\n1040 28  10.4881051  1.9460602    0    1.3  1.5000000     0\n1041 28  10.4881051  1.9460602    0    1.5  1.6000000     0\n1042 28  10.4881051  1.9460602    0    1.6  1.7000000     0\n1043 28  10.4881051  1.9460602    0    1.7  1.8000000     0\n1044 28  10.4881051  1.9460602    0    1.8  1.9000000     0\n1045 28  10.4881051  1.9460602    0    1.9  2.1000000     0\n1046 28  10.4881051  1.9460602    1    2.1  2.2000000     0\n1047 28  10.4881051  1.9460602    1    2.2  2.3000000     0\n1048 28  10.4881051  1.9460602    1    2.3  2.4000000     0\n1049 28  10.4881051  1.9460602    1    2.4  2.5000000     0\n1050 28  10.4881051  1.9460602    1    2.5  2.6000000     0\n1051 28  10.4881051  1.9460602    1    2.6  2.7000000     0\n1052 28  10.4881051  1.9460602    1    2.7  2.8000000     0\n1053 28  10.4881051  1.9460602    1    2.8  2.9000000     0\n1054 28  10.4881051  1.9460602    1    2.9  3.0000000     0\n1055 28  10.4881051  1.9460602    1    3.0  3.1000000     0\n1056 28  10.4881051  1.9460602    1    3.1  3.2000000     0\n1057 28  10.4881051  1.9460602    1    3.2  3.3000000     0\n1058 28  10.4881051  1.9460602    1    3.3  3.4000000     0\n1059 28  10.4881051  1.9460602    1    3.4  3.5000000     0\n1060 28  10.4881051  1.9460602    1    3.5  3.6000000     0\n1061 28  10.4881051  1.9460602    1    3.6  3.7000000     0\n1062 28  10.4881051  1.9460602    1    3.7  3.8000000     0\n1063 28  10.4881051  1.9460602    1    3.8  4.0000000     0\n1064 28  10.4881051  1.9460602    1    4.0  4.1000000     0\n1065 28  10.4881051  1.9460602    1    4.1  4.2000000     0\n1066 28  10.4881051  1.9460602    1    4.2  4.3000000     0\n1067 28  10.4881051  1.9460602    1    4.3  4.4000000     0\n1068 28  10.4881051  1.9460602    1    4.4  4.5000000     0\n1069 28  10.4881051  1.9460602    1    4.5  4.7000000     0\n1070 28  10.4881051  1.9460602    1    4.7  4.8000000     0\n1071 28  10.4881051  1.9460602    1    4.8  4.9000000     0\n1072 28  10.4881051  1.9460602    1    4.9  5.0000000     0\n1073 28  10.4881051  1.9460602    1    5.0 10.4881051     0\n1074 29   6.3705819  2.4827417    0    0.0  0.1000000     0\n1075 29   6.3705819  2.4827417    0    0.1  0.2000000     0\n1076 29   6.3705819  2.4827417    0    0.2  0.3000000     0\n1077 29   6.3705819  2.4827417    0    0.3  0.4000000     0\n1078 29   6.3705819  2.4827417    0    0.4  0.6000000     0\n1079 29   6.3705819  2.4827417    0    0.6  0.7000000     0\n1080 29   6.3705819  2.4827417    0    0.7  0.8000000     0\n1081 29   6.3705819  2.4827417    0    0.8  0.9000000     0\n1082 29   6.3705819  2.4827417    0    0.9  1.0000000     0\n1083 29   6.3705819  2.4827417    0    1.0  1.1000000     0\n1084 29   6.3705819  2.4827417    0    1.1  1.2000000     0\n1085 29   6.3705819  2.4827417    0    1.2  1.3000000     0\n1086 29   6.3705819  2.4827417    0    1.3  1.5000000     0\n1087 29   6.3705819  2.4827417    0    1.5  1.6000000     0\n1088 29   6.3705819  2.4827417    0    1.6  1.7000000     0\n1089 29   6.3705819  2.4827417    0    1.7  1.8000000     0\n1090 29   6.3705819  2.4827417    0    1.8  1.9000000     0\n1091 29   6.3705819  2.4827417    0    1.9  2.1000000     0\n1092 29   6.3705819  2.4827417    0    2.1  2.2000000     0\n1093 29   6.3705819  2.4827417    0    2.2  2.3000000     0\n1094 29   6.3705819  2.4827417    0    2.3  2.4000000     0\n1095 29   6.3705819  2.4827417    0    2.4  2.5000000     0\n1096 29   6.3705819  2.4827417    1    2.5  2.6000000     0\n1097 29   6.3705819  2.4827417    1    2.6  2.7000000     0\n1098 29   6.3705819  2.4827417    1    2.7  2.8000000     0\n1099 29   6.3705819  2.4827417    1    2.8  2.9000000     0\n1100 29   6.3705819  2.4827417    1    2.9  3.0000000     0\n1101 29   6.3705819  2.4827417    1    3.0  3.1000000     0\n1102 29   6.3705819  2.4827417    1    3.1  3.2000000     0\n1103 29   6.3705819  2.4827417    1    3.2  3.3000000     0\n1104 29   6.3705819  2.4827417    1    3.3  3.4000000     0\n1105 29   6.3705819  2.4827417    1    3.4  3.5000000     0\n1106 29   6.3705819  2.4827417    1    3.5  3.6000000     0\n1107 29   6.3705819  2.4827417    1    3.6  3.7000000     0\n1108 29   6.3705819  2.4827417    1    3.7  3.8000000     0\n1109 29   6.3705819  2.4827417    1    3.8  4.0000000     0\n1110 29   6.3705819  2.4827417    1    4.0  4.1000000     0\n1111 29   6.3705819  2.4827417    1    4.1  4.2000000     0\n1112 29   6.3705819  2.4827417    1    4.2  4.3000000     0\n1113 29   6.3705819  2.4827417    1    4.3  4.4000000     0\n1114 29   6.3705819  2.4827417    1    4.4  4.5000000     0\n1115 29   6.3705819  2.4827417    1    4.5  4.7000000     0\n1116 29   6.3705819  2.4827417    1    4.7  4.8000000     0\n1117 29   6.3705819  2.4827417    1    4.8  4.9000000     0\n1118 29   6.3705819  2.4827417    1    4.9  5.0000000     0\n1119 29   6.3705819  2.4827417    1    5.0  6.3705819     1\n1120 30  11.8805583  4.3959290    0    0.0  0.1000000     0\n1121 30  11.8805583  4.3959290    0    0.1  0.2000000     0\n1122 30  11.8805583  4.3959290    0    0.2  0.3000000     0\n1123 30  11.8805583  4.3959290    0    0.3  0.4000000     0\n1124 30  11.8805583  4.3959290    0    0.4  0.6000000     0\n1125 30  11.8805583  4.3959290    0    0.6  0.7000000     0\n1126 30  11.8805583  4.3959290    0    0.7  0.8000000     0\n1127 30  11.8805583  4.3959290    0    0.8  0.9000000     0\n1128 30  11.8805583  4.3959290    0    0.9  1.0000000     0\n1129 30  11.8805583  4.3959290    0    1.0  1.1000000     0\n1130 30  11.8805583  4.3959290    0    1.1  1.2000000     0\n1131 30  11.8805583  4.3959290    0    1.2  1.3000000     0\n1132 30  11.8805583  4.3959290    0    1.3  1.5000000     0\n1133 30  11.8805583  4.3959290    0    1.5  1.6000000     0\n1134 30  11.8805583  4.3959290    0    1.6  1.7000000     0\n1135 30  11.8805583  4.3959290    0    1.7  1.8000000     0\n1136 30  11.8805583  4.3959290    0    1.8  1.9000000     0\n1137 30  11.8805583  4.3959290    0    1.9  2.1000000     0\n1138 30  11.8805583  4.3959290    0    2.1  2.2000000     0\n1139 30  11.8805583  4.3959290    0    2.2  2.3000000     0\n1140 30  11.8805583  4.3959290    0    2.3  2.4000000     0\n1141 30  11.8805583  4.3959290    0    2.4  2.5000000     0\n1142 30  11.8805583  4.3959290    0    2.5  2.6000000     0\n1143 30  11.8805583  4.3959290    0    2.6  2.7000000     0\n1144 30  11.8805583  4.3959290    0    2.7  2.8000000     0\n1145 30  11.8805583  4.3959290    0    2.8  2.9000000     0\n1146 30  11.8805583  4.3959290    0    2.9  3.0000000     0\n1147 30  11.8805583  4.3959290    0    3.0  3.1000000     0\n1148 30  11.8805583  4.3959290    0    3.1  3.2000000     0\n1149 30  11.8805583  4.3959290    0    3.2  3.3000000     0\n1150 30  11.8805583  4.3959290    0    3.3  3.4000000     0\n1151 30  11.8805583  4.3959290    0    3.4  3.5000000     0\n1152 30  11.8805583  4.3959290    0    3.5  3.6000000     0\n1153 30  11.8805583  4.3959290    0    3.6  3.7000000     0\n1154 30  11.8805583  4.3959290    0    3.7  3.8000000     0\n1155 30  11.8805583  4.3959290    0    3.8  4.0000000     0\n1156 30  11.8805583  4.3959290    0    4.0  4.1000000     0\n1157 30  11.8805583  4.3959290    0    4.1  4.2000000     0\n1158 30  11.8805583  4.3959290    0    4.2  4.3000000     0\n1159 30  11.8805583  4.3959290    0    4.3  4.4000000     0\n1160 30  11.8805583  4.3959290    1    4.4  4.5000000     0\n1161 30  11.8805583  4.3959290    1    4.5  4.7000000     0\n1162 30  11.8805583  4.3959290    1    4.7  4.8000000     0\n1163 30  11.8805583  4.3959290    1    4.8  4.9000000     0\n1164 30  11.8805583  4.3959290    1    4.9  5.0000000     0\n1165 30  11.8805583  4.3959290    1    5.0 11.8805583     0\n1166 31   9.3744416  3.6087887    0    0.0  0.1000000     0\n1167 31   9.3744416  3.6087887    0    0.1  0.2000000     0\n1168 31   9.3744416  3.6087887    0    0.2  0.3000000     0\n1169 31   9.3744416  3.6087887    0    0.3  0.4000000     0\n1170 31   9.3744416  3.6087887    0    0.4  0.6000000     0\n1171 31   9.3744416  3.6087887    0    0.6  0.7000000     0\n1172 31   9.3744416  3.6087887    0    0.7  0.8000000     0\n1173 31   9.3744416  3.6087887    0    0.8  0.9000000     0\n1174 31   9.3744416  3.6087887    0    0.9  1.0000000     0\n1175 31   9.3744416  3.6087887    0    1.0  1.1000000     0\n1176 31   9.3744416  3.6087887    0    1.1  1.2000000     0\n1177 31   9.3744416  3.6087887    0    1.2  1.3000000     0\n1178 31   9.3744416  3.6087887    0    1.3  1.5000000     0\n1179 31   9.3744416  3.6087887    0    1.5  1.6000000     0\n1180 31   9.3744416  3.6087887    0    1.6  1.7000000     0\n1181 31   9.3744416  3.6087887    0    1.7  1.8000000     0\n1182 31   9.3744416  3.6087887    0    1.8  1.9000000     0\n1183 31   9.3744416  3.6087887    0    1.9  2.1000000     0\n1184 31   9.3744416  3.6087887    0    2.1  2.2000000     0\n1185 31   9.3744416  3.6087887    0    2.2  2.3000000     0\n1186 31   9.3744416  3.6087887    0    2.3  2.4000000     0\n1187 31   9.3744416  3.6087887    0    2.4  2.5000000     0\n1188 31   9.3744416  3.6087887    0    2.5  2.6000000     0\n1189 31   9.3744416  3.6087887    0    2.6  2.7000000     0\n1190 31   9.3744416  3.6087887    0    2.7  2.8000000     0\n1191 31   9.3744416  3.6087887    0    2.8  2.9000000     0\n1192 31   9.3744416  3.6087887    0    2.9  3.0000000     0\n1193 31   9.3744416  3.6087887    0    3.0  3.1000000     0\n1194 31   9.3744416  3.6087887    0    3.1  3.2000000     0\n1195 31   9.3744416  3.6087887    0    3.2  3.3000000     0\n1196 31   9.3744416  3.6087887    0    3.3  3.4000000     0\n1197 31   9.3744416  3.6087887    0    3.4  3.5000000     0\n1198 31   9.3744416  3.6087887    0    3.5  3.6000000     0\n1199 31   9.3744416  3.6087887    0    3.6  3.7000000     0\n1200 31   9.3744416  3.6087887    1    3.7  3.8000000     0\n1201 31   9.3744416  3.6087887    1    3.8  4.0000000     0\n1202 31   9.3744416  3.6087887    1    4.0  4.1000000     0\n1203 31   9.3744416  3.6087887    1    4.1  4.2000000     0\n1204 31   9.3744416  3.6087887    1    4.2  4.3000000     0\n1205 31   9.3744416  3.6087887    1    4.3  4.4000000     0\n1206 31   9.3744416  3.6087887    1    4.4  4.5000000     0\n1207 31   9.3744416  3.6087887    1    4.5  4.7000000     0\n1208 31   9.3744416  3.6087887    1    4.7  4.8000000     0\n1209 31   9.3744416  3.6087887    1    4.8  4.9000000     0\n1210 31   9.3744416  3.6087887    1    4.9  5.0000000     0\n1211 31   9.3744416  3.6087887    1    5.0  9.3744416     0\n1212 32  36.0050804  4.9447629    0    0.0  0.1000000     0\n1213 32  36.0050804  4.9447629    0    0.1  0.2000000     0\n1214 32  36.0050804  4.9447629    0    0.2  0.3000000     0\n1215 32  36.0050804  4.9447629    0    0.3  0.4000000     0\n1216 32  36.0050804  4.9447629    0    0.4  0.6000000     0\n1217 32  36.0050804  4.9447629    0    0.6  0.7000000     0\n1218 32  36.0050804  4.9447629    0    0.7  0.8000000     0\n1219 32  36.0050804  4.9447629    0    0.8  0.9000000     0\n1220 32  36.0050804  4.9447629    0    0.9  1.0000000     0\n1221 32  36.0050804  4.9447629    0    1.0  1.1000000     0\n1222 32  36.0050804  4.9447629    0    1.1  1.2000000     0\n1223 32  36.0050804  4.9447629    0    1.2  1.3000000     0\n1224 32  36.0050804  4.9447629    0    1.3  1.5000000     0\n1225 32  36.0050804  4.9447629    0    1.5  1.6000000     0\n1226 32  36.0050804  4.9447629    0    1.6  1.7000000     0\n1227 32  36.0050804  4.9447629    0    1.7  1.8000000     0\n1228 32  36.0050804  4.9447629    0    1.8  1.9000000     0\n1229 32  36.0050804  4.9447629    0    1.9  2.1000000     0\n1230 32  36.0050804  4.9447629    0    2.1  2.2000000     0\n1231 32  36.0050804  4.9447629    0    2.2  2.3000000     0\n1232 32  36.0050804  4.9447629    0    2.3  2.4000000     0\n1233 32  36.0050804  4.9447629    0    2.4  2.5000000     0\n1234 32  36.0050804  4.9447629    0    2.5  2.6000000     0\n1235 32  36.0050804  4.9447629    0    2.6  2.7000000     0\n1236 32  36.0050804  4.9447629    0    2.7  2.8000000     0\n1237 32  36.0050804  4.9447629    0    2.8  2.9000000     0\n1238 32  36.0050804  4.9447629    0    2.9  3.0000000     0\n1239 32  36.0050804  4.9447629    0    3.0  3.1000000     0\n1240 32  36.0050804  4.9447629    0    3.1  3.2000000     0\n1241 32  36.0050804  4.9447629    0    3.2  3.3000000     0\n1242 32  36.0050804  4.9447629    0    3.3  3.4000000     0\n1243 32  36.0050804  4.9447629    0    3.4  3.5000000     0\n1244 32  36.0050804  4.9447629    0    3.5  3.6000000     0\n1245 32  36.0050804  4.9447629    0    3.6  3.7000000     0\n1246 32  36.0050804  4.9447629    0    3.7  3.8000000     0\n1247 32  36.0050804  4.9447629    0    3.8  4.0000000     0\n1248 32  36.0050804  4.9447629    0    4.0  4.1000000     0\n1249 32  36.0050804  4.9447629    0    4.1  4.2000000     0\n1250 32  36.0050804  4.9447629    0    4.2  4.3000000     0\n1251 32  36.0050804  4.9447629    0    4.3  4.4000000     0\n1252 32  36.0050804  4.9447629    0    4.4  4.5000000     0\n1253 32  36.0050804  4.9447629    0    4.5  4.7000000     0\n1254 32  36.0050804  4.9447629    0    4.7  4.8000000     0\n1255 32  36.0050804  4.9447629    0    4.8  4.9000000     0\n1256 32  36.0050804  4.9447629    0    4.9  5.0000000     0\n1257 32  36.0050804  4.9447629    1    5.0 36.0050804     1\n1258 33   2.5522225  0.3586308    0    0.0  0.1000000     0\n1259 33   2.5522225  0.3586308    0    0.1  0.2000000     0\n1260 33   2.5522225  0.3586308    0    0.2  0.3000000     0\n1261 33   2.5522225  0.3586308    0    0.3  0.4000000     0\n1262 33   2.5522225  0.3586308    1    0.4  0.6000000     0\n1263 33   2.5522225  0.3586308    1    0.6  0.7000000     0\n1264 33   2.5522225  0.3586308    1    0.7  0.8000000     0\n1265 33   2.5522225  0.3586308    1    0.8  0.9000000     0\n1266 33   2.5522225  0.3586308    1    0.9  1.0000000     0\n1267 33   2.5522225  0.3586308    1    1.0  1.1000000     0\n1268 33   2.5522225  0.3586308    1    1.1  1.2000000     0\n1269 33   2.5522225  0.3586308    1    1.2  1.3000000     0\n1270 33   2.5522225  0.3586308    1    1.3  1.5000000     0\n1271 33   2.5522225  0.3586308    1    1.5  1.6000000     0\n1272 33   2.5522225  0.3586308    1    1.6  1.7000000     0\n1273 33   2.5522225  0.3586308    1    1.7  1.8000000     0\n1274 33   2.5522225  0.3586308    1    1.8  1.9000000     0\n1275 33   2.5522225  0.3586308    1    1.9  2.1000000     0\n1276 33   2.5522225  0.3586308    1    2.1  2.2000000     0\n1277 33   2.5522225  0.3586308    1    2.2  2.3000000     0\n1278 33   2.5522225  0.3586308    1    2.3  2.4000000     0\n1279 33   2.5522225  0.3586308    1    2.4  2.5000000     0\n1280 33   2.5522225  0.3586308    1    2.5  2.5522225     0\n1281 34  22.8089741  0.7128357    0    0.0  0.1000000     0\n1282 34  22.8089741  0.7128357    0    0.1  0.2000000     0\n1283 34  22.8089741  0.7128357    0    0.2  0.3000000     0\n1284 34  22.8089741  0.7128357    0    0.3  0.4000000     0\n1285 34  22.8089741  0.7128357    0    0.4  0.6000000     0\n1286 34  22.8089741  0.7128357    0    0.6  0.7000000     0\n1287 34  22.8089741  0.7128357    0    0.7  0.8000000     0\n1288 34  22.8089741  0.7128357    1    0.8  0.9000000     0\n1289 34  22.8089741  0.7128357    1    0.9  1.0000000     0\n1290 34  22.8089741  0.7128357    1    1.0  1.1000000     0\n1291 34  22.8089741  0.7128357    1    1.1  1.2000000     0\n1292 34  22.8089741  0.7128357    1    1.2  1.3000000     0\n1293 34  22.8089741  0.7128357    1    1.3  1.5000000     0\n1294 34  22.8089741  0.7128357    1    1.5  1.6000000     0\n1295 34  22.8089741  0.7128357    1    1.6  1.7000000     0\n1296 34  22.8089741  0.7128357    1    1.7  1.8000000     0\n1297 34  22.8089741  0.7128357    1    1.8  1.9000000     0\n1298 34  22.8089741  0.7128357    1    1.9  2.1000000     0\n1299 34  22.8089741  0.7128357    1    2.1  2.2000000     0\n1300 34  22.8089741  0.7128357    1    2.2  2.3000000     0\n1301 34  22.8089741  0.7128357    1    2.3  2.4000000     0\n1302 34  22.8089741  0.7128357    1    2.4  2.5000000     0\n1303 34  22.8089741  0.7128357    1    2.5  2.6000000     0\n1304 34  22.8089741  0.7128357    1    2.6  2.7000000     0\n1305 34  22.8089741  0.7128357    1    2.7  2.8000000     0\n1306 34  22.8089741  0.7128357    1    2.8  2.9000000     0\n1307 34  22.8089741  0.7128357    1    2.9  3.0000000     0\n1308 34  22.8089741  0.7128357    1    3.0  3.1000000     0\n1309 34  22.8089741  0.7128357    1    3.1  3.2000000     0\n1310 34  22.8089741  0.7128357    1    3.2  3.3000000     0\n1311 34  22.8089741  0.7128357    1    3.3  3.4000000     0\n1312 34  22.8089741  0.7128357    1    3.4  3.5000000     0\n1313 34  22.8089741  0.7128357    1    3.5  3.6000000     0\n1314 34  22.8089741  0.7128357    1    3.6  3.7000000     0\n1315 34  22.8089741  0.7128357    1    3.7  3.8000000     0\n1316 34  22.8089741  0.7128357    1    3.8  4.0000000     0\n1317 34  22.8089741  0.7128357    1    4.0  4.1000000     0\n1318 34  22.8089741  0.7128357    1    4.1  4.2000000     0\n1319 34  22.8089741  0.7128357    1    4.2  4.3000000     0\n1320 34  22.8089741  0.7128357    1    4.3  4.4000000     0\n1321 34  22.8089741  0.7128357    1    4.4  4.5000000     0\n1322 34  22.8089741  0.7128357    1    4.5  4.7000000     0\n1323 34  22.8089741  0.7128357    1    4.7  4.8000000     0\n1324 34  22.8089741  0.7128357    1    4.8  4.9000000     0\n1325 34  22.8089741  0.7128357    1    4.9  5.0000000     0\n1326 34  22.8089741  0.7128357    1    5.0 22.8089741     0\n1327 35   4.5330419  4.4621178    0    0.0  0.1000000     0\n1328 35   4.5330419  4.4621178    0    0.1  0.2000000     0\n1329 35   4.5330419  4.4621178    0    0.2  0.3000000     0\n1330 35   4.5330419  4.4621178    0    0.3  0.4000000     0\n1331 35   4.5330419  4.4621178    0    0.4  0.6000000     0\n1332 35   4.5330419  4.4621178    0    0.6  0.7000000     0\n1333 35   4.5330419  4.4621178    0    0.7  0.8000000     0\n1334 35   4.5330419  4.4621178    0    0.8  0.9000000     0\n1335 35   4.5330419  4.4621178    0    0.9  1.0000000     0\n1336 35   4.5330419  4.4621178    0    1.0  1.1000000     0\n1337 35   4.5330419  4.4621178    0    1.1  1.2000000     0\n1338 35   4.5330419  4.4621178    0    1.2  1.3000000     0\n1339 35   4.5330419  4.4621178    0    1.3  1.5000000     0\n1340 35   4.5330419  4.4621178    0    1.5  1.6000000     0\n1341 35   4.5330419  4.4621178    0    1.6  1.7000000     0\n1342 35   4.5330419  4.4621178    0    1.7  1.8000000     0\n1343 35   4.5330419  4.4621178    0    1.8  1.9000000     0\n1344 35   4.5330419  4.4621178    0    1.9  2.1000000     0\n1345 35   4.5330419  4.4621178    0    2.1  2.2000000     0\n1346 35   4.5330419  4.4621178    0    2.2  2.3000000     0\n1347 35   4.5330419  4.4621178    0    2.3  2.4000000     0\n1348 35   4.5330419  4.4621178    0    2.4  2.5000000     0\n1349 35   4.5330419  4.4621178    0    2.5  2.6000000     0\n1350 35   4.5330419  4.4621178    0    2.6  2.7000000     0\n1351 35   4.5330419  4.4621178    0    2.7  2.8000000     0\n1352 35   4.5330419  4.4621178    0    2.8  2.9000000     0\n1353 35   4.5330419  4.4621178    0    2.9  3.0000000     0\n1354 35   4.5330419  4.4621178    0    3.0  3.1000000     0\n1355 35   4.5330419  4.4621178    0    3.1  3.2000000     0\n1356 35   4.5330419  4.4621178    0    3.2  3.3000000     0\n1357 35   4.5330419  4.4621178    0    3.3  3.4000000     0\n1358 35   4.5330419  4.4621178    0    3.4  3.5000000     0\n1359 35   4.5330419  4.4621178    0    3.5  3.6000000     0\n1360 35   4.5330419  4.4621178    0    3.6  3.7000000     0\n1361 35   4.5330419  4.4621178    0    3.7  3.8000000     0\n1362 35   4.5330419  4.4621178    0    3.8  4.0000000     0\n1363 35   4.5330419  4.4621178    0    4.0  4.1000000     0\n1364 35   4.5330419  4.4621178    0    4.1  4.2000000     0\n1365 35   4.5330419  4.4621178    0    4.2  4.3000000     0\n1366 35   4.5330419  4.4621178    0    4.3  4.4000000     0\n1367 35   4.5330419  4.4621178    0    4.4  4.5000000     0\n1368 35   4.5330419  4.4621178    1    4.5  4.5330419     1\n1369 36   5.3978909  4.8584407    0    0.0  0.1000000     0\n1370 36   5.3978909  4.8584407    0    0.1  0.2000000     0\n1371 36   5.3978909  4.8584407    0    0.2  0.3000000     0\n1372 36   5.3978909  4.8584407    0    0.3  0.4000000     0\n1373 36   5.3978909  4.8584407    0    0.4  0.6000000     0\n1374 36   5.3978909  4.8584407    0    0.6  0.7000000     0\n1375 36   5.3978909  4.8584407    0    0.7  0.8000000     0\n1376 36   5.3978909  4.8584407    0    0.8  0.9000000     0\n1377 36   5.3978909  4.8584407    0    0.9  1.0000000     0\n1378 36   5.3978909  4.8584407    0    1.0  1.1000000     0\n1379 36   5.3978909  4.8584407    0    1.1  1.2000000     0\n1380 36   5.3978909  4.8584407    0    1.2  1.3000000     0\n1381 36   5.3978909  4.8584407    0    1.3  1.5000000     0\n1382 36   5.3978909  4.8584407    0    1.5  1.6000000     0\n1383 36   5.3978909  4.8584407    0    1.6  1.7000000     0\n1384 36   5.3978909  4.8584407    0    1.7  1.8000000     0\n1385 36   5.3978909  4.8584407    0    1.8  1.9000000     0\n1386 36   5.3978909  4.8584407    0    1.9  2.1000000     0\n1387 36   5.3978909  4.8584407    0    2.1  2.2000000     0\n1388 36   5.3978909  4.8584407    0    2.2  2.3000000     0\n1389 36   5.3978909  4.8584407    0    2.3  2.4000000     0\n1390 36   5.3978909  4.8584407    0    2.4  2.5000000     0\n1391 36   5.3978909  4.8584407    0    2.5  2.6000000     0\n1392 36   5.3978909  4.8584407    0    2.6  2.7000000     0\n1393 36   5.3978909  4.8584407    0    2.7  2.8000000     0\n1394 36   5.3978909  4.8584407    0    2.8  2.9000000     0\n1395 36   5.3978909  4.8584407    0    2.9  3.0000000     0\n1396 36   5.3978909  4.8584407    0    3.0  3.1000000     0\n1397 36   5.3978909  4.8584407    0    3.1  3.2000000     0\n1398 36   5.3978909  4.8584407    0    3.2  3.3000000     0\n1399 36   5.3978909  4.8584407    0    3.3  3.4000000     0\n1400 36   5.3978909  4.8584407    0    3.4  3.5000000     0\n1401 36   5.3978909  4.8584407    0    3.5  3.6000000     0\n1402 36   5.3978909  4.8584407    0    3.6  3.7000000     0\n1403 36   5.3978909  4.8584407    0    3.7  3.8000000     0\n1404 36   5.3978909  4.8584407    0    3.8  4.0000000     0\n1405 36   5.3978909  4.8584407    0    4.0  4.1000000     0\n1406 36   5.3978909  4.8584407    0    4.1  4.2000000     0\n1407 36   5.3978909  4.8584407    0    4.2  4.3000000     0\n1408 36   5.3978909  4.8584407    0    4.3  4.4000000     0\n1409 36   5.3978909  4.8584407    0    4.4  4.5000000     0\n1410 36   5.3978909  4.8584407    0    4.5  4.7000000     0\n1411 36   5.3978909  4.8584407    0    4.7  4.8000000     0\n1412 36   5.3978909  4.8584407    0    4.8  4.9000000     0\n1413 36   5.3978909  4.8584407    1    4.9  5.0000000     0\n1414 36   5.3978909  4.8584407    1    5.0  5.3978909     1\n1415 37   6.0160683  2.7030081    0    0.0  0.1000000     0\n1416 37   6.0160683  2.7030081    0    0.1  0.2000000     0\n1417 37   6.0160683  2.7030081    0    0.2  0.3000000     0\n1418 37   6.0160683  2.7030081    0    0.3  0.4000000     0\n1419 37   6.0160683  2.7030081    0    0.4  0.6000000     0\n1420 37   6.0160683  2.7030081    0    0.6  0.7000000     0\n1421 37   6.0160683  2.7030081    0    0.7  0.8000000     0\n1422 37   6.0160683  2.7030081    0    0.8  0.9000000     0\n1423 37   6.0160683  2.7030081    0    0.9  1.0000000     0\n1424 37   6.0160683  2.7030081    0    1.0  1.1000000     0\n1425 37   6.0160683  2.7030081    0    1.1  1.2000000     0\n1426 37   6.0160683  2.7030081    0    1.2  1.3000000     0\n1427 37   6.0160683  2.7030081    0    1.3  1.5000000     0\n1428 37   6.0160683  2.7030081    0    1.5  1.6000000     0\n1429 37   6.0160683  2.7030081    0    1.6  1.7000000     0\n1430 37   6.0160683  2.7030081    0    1.7  1.8000000     0\n1431 37   6.0160683  2.7030081    0    1.8  1.9000000     0\n1432 37   6.0160683  2.7030081    0    1.9  2.1000000     0\n1433 37   6.0160683  2.7030081    0    2.1  2.2000000     0\n1434 37   6.0160683  2.7030081    0    2.2  2.3000000     0\n1435 37   6.0160683  2.7030081    0    2.3  2.4000000     0\n1436 37   6.0160683  2.7030081    0    2.4  2.5000000     0\n1437 37   6.0160683  2.7030081    0    2.5  2.6000000     0\n1438 37   6.0160683  2.7030081    0    2.6  2.7000000     0\n1439 37   6.0160683  2.7030081    0    2.7  2.8000000     0\n1440 37   6.0160683  2.7030081    1    2.8  2.9000000     0\n1441 37   6.0160683  2.7030081    1    2.9  3.0000000     0\n1442 37   6.0160683  2.7030081    1    3.0  3.1000000     0\n1443 37   6.0160683  2.7030081    1    3.1  3.2000000     0\n1444 37   6.0160683  2.7030081    1    3.2  3.3000000     0\n1445 37   6.0160683  2.7030081    1    3.3  3.4000000     0\n1446 37   6.0160683  2.7030081    1    3.4  3.5000000     0\n1447 37   6.0160683  2.7030081    1    3.5  3.6000000     0\n1448 37   6.0160683  2.7030081    1    3.6  3.7000000     0\n1449 37   6.0160683  2.7030081    1    3.7  3.8000000     0\n1450 37   6.0160683  2.7030081    1    3.8  4.0000000     0\n1451 37   6.0160683  2.7030081    1    4.0  4.1000000     0\n1452 37   6.0160683  2.7030081    1    4.1  4.2000000     0\n1453 37   6.0160683  2.7030081    1    4.2  4.3000000     0\n1454 37   6.0160683  2.7030081    1    4.3  4.4000000     0\n1455 37   6.0160683  2.7030081    1    4.4  4.5000000     0\n1456 37   6.0160683  2.7030081    1    4.5  4.7000000     0\n1457 37   6.0160683  2.7030081    1    4.7  4.8000000     0\n1458 37   6.0160683  2.7030081    1    4.8  4.9000000     0\n1459 37   6.0160683  2.7030081    1    4.9  5.0000000     0\n1460 37   6.0160683  2.7030081    1    5.0  6.0160683     1\n1461 38  40.5158886  4.9174413    0    0.0  0.1000000     0\n1462 38  40.5158886  4.9174413    0    0.1  0.2000000     0\n1463 38  40.5158886  4.9174413    0    0.2  0.3000000     0\n1464 38  40.5158886  4.9174413    0    0.3  0.4000000     0\n1465 38  40.5158886  4.9174413    0    0.4  0.6000000     0\n1466 38  40.5158886  4.9174413    0    0.6  0.7000000     0\n1467 38  40.5158886  4.9174413    0    0.7  0.8000000     0\n1468 38  40.5158886  4.9174413    0    0.8  0.9000000     0\n1469 38  40.5158886  4.9174413    0    0.9  1.0000000     0\n1470 38  40.5158886  4.9174413    0    1.0  1.1000000     0\n1471 38  40.5158886  4.9174413    0    1.1  1.2000000     0\n1472 38  40.5158886  4.9174413    0    1.2  1.3000000     0\n1473 38  40.5158886  4.9174413    0    1.3  1.5000000     0\n1474 38  40.5158886  4.9174413    0    1.5  1.6000000     0\n1475 38  40.5158886  4.9174413    0    1.6  1.7000000     0\n1476 38  40.5158886  4.9174413    0    1.7  1.8000000     0\n1477 38  40.5158886  4.9174413    0    1.8  1.9000000     0\n1478 38  40.5158886  4.9174413    0    1.9  2.1000000     0\n1479 38  40.5158886  4.9174413    0    2.1  2.2000000     0\n1480 38  40.5158886  4.9174413    0    2.2  2.3000000     0\n1481 38  40.5158886  4.9174413    0    2.3  2.4000000     0\n1482 38  40.5158886  4.9174413    0    2.4  2.5000000     0\n1483 38  40.5158886  4.9174413    0    2.5  2.6000000     0\n1484 38  40.5158886  4.9174413    0    2.6  2.7000000     0\n1485 38  40.5158886  4.9174413    0    2.7  2.8000000     0\n1486 38  40.5158886  4.9174413    0    2.8  2.9000000     0\n1487 38  40.5158886  4.9174413    0    2.9  3.0000000     0\n1488 38  40.5158886  4.9174413    0    3.0  3.1000000     0\n1489 38  40.5158886  4.9174413    0    3.1  3.2000000     0\n1490 38  40.5158886  4.9174413    0    3.2  3.3000000     0\n1491 38  40.5158886  4.9174413    0    3.3  3.4000000     0\n1492 38  40.5158886  4.9174413    0    3.4  3.5000000     0\n1493 38  40.5158886  4.9174413    0    3.5  3.6000000     0\n1494 38  40.5158886  4.9174413    0    3.6  3.7000000     0\n1495 38  40.5158886  4.9174413    0    3.7  3.8000000     0\n1496 38  40.5158886  4.9174413    0    3.8  4.0000000     0\n1497 38  40.5158886  4.9174413    0    4.0  4.1000000     0\n1498 38  40.5158886  4.9174413    0    4.1  4.2000000     0\n1499 38  40.5158886  4.9174413    0    4.2  4.3000000     0\n1500 38  40.5158886  4.9174413    0    4.3  4.4000000     0\n1501 38  40.5158886  4.9174413    0    4.4  4.5000000     0\n1502 38  40.5158886  4.9174413    0    4.5  4.7000000     0\n1503 38  40.5158886  4.9174413    0    4.7  4.8000000     0\n1504 38  40.5158886  4.9174413    0    4.8  4.9000000     0\n1505 38  40.5158886  4.9174413    0    4.9  5.0000000     0\n1506 38  40.5158886  4.9174413    1    5.0 40.5158886     0\n1507 39   1.7427166  4.0969769    0    0.0  0.1000000     0\n1508 39   1.7427166  4.0969769    0    0.1  0.2000000     0\n1509 39   1.7427166  4.0969769    0    0.2  0.3000000     0\n1510 39   1.7427166  4.0969769    0    0.3  0.4000000     0\n1511 39   1.7427166  4.0969769    0    0.4  0.6000000     0\n1512 39   1.7427166  4.0969769    0    0.6  0.7000000     0\n1513 39   1.7427166  4.0969769    0    0.7  0.8000000     0\n1514 39   1.7427166  4.0969769    0    0.8  0.9000000     0\n1515 39   1.7427166  4.0969769    0    0.9  1.0000000     0\n1516 39   1.7427166  4.0969769    0    1.0  1.1000000     0\n1517 39   1.7427166  4.0969769    0    1.1  1.2000000     0\n1518 39   1.7427166  4.0969769    0    1.2  1.3000000     0\n1519 39   1.7427166  4.0969769    0    1.3  1.5000000     0\n1520 39   1.7427166  4.0969769    0    1.5  1.6000000     0\n1521 39   1.7427166  4.0969769    0    1.6  1.7000000     0\n1522 39   1.7427166  4.0969769    0    1.7  1.7427166     1\n1523 40   3.9466759  2.9575993    0    0.0  0.1000000     0\n1524 40   3.9466759  2.9575993    0    0.1  0.2000000     0\n1525 40   3.9466759  2.9575993    0    0.2  0.3000000     0\n1526 40   3.9466759  2.9575993    0    0.3  0.4000000     0\n1527 40   3.9466759  2.9575993    0    0.4  0.6000000     0\n1528 40   3.9466759  2.9575993    0    0.6  0.7000000     0\n1529 40   3.9466759  2.9575993    0    0.7  0.8000000     0\n1530 40   3.9466759  2.9575993    0    0.8  0.9000000     0\n1531 40   3.9466759  2.9575993    0    0.9  1.0000000     0\n1532 40   3.9466759  2.9575993    0    1.0  1.1000000     0\n1533 40   3.9466759  2.9575993    0    1.1  1.2000000     0\n1534 40   3.9466759  2.9575993    0    1.2  1.3000000     0\n1535 40   3.9466759  2.9575993    0    1.3  1.5000000     0\n1536 40   3.9466759  2.9575993    0    1.5  1.6000000     0\n1537 40   3.9466759  2.9575993    0    1.6  1.7000000     0\n1538 40   3.9466759  2.9575993    0    1.7  1.8000000     0\n1539 40   3.9466759  2.9575993    0    1.8  1.9000000     0\n1540 40   3.9466759  2.9575993    0    1.9  2.1000000     0\n1541 40   3.9466759  2.9575993    0    2.1  2.2000000     0\n1542 40   3.9466759  2.9575993    0    2.2  2.3000000     0\n1543 40   3.9466759  2.9575993    0    2.3  2.4000000     0\n1544 40   3.9466759  2.9575993    0    2.4  2.5000000     0\n1545 40   3.9466759  2.9575993    0    2.5  2.6000000     0\n1546 40   3.9466759  2.9575993    0    2.6  2.7000000     0\n1547 40   3.9466759  2.9575993    0    2.7  2.8000000     0\n1548 40   3.9466759  2.9575993    0    2.8  2.9000000     0\n1549 40   3.9466759  2.9575993    0    2.9  3.0000000     0\n1550 40   3.9466759  2.9575993    1    3.0  3.1000000     0\n1551 40   3.9466759  2.9575993    1    3.1  3.2000000     0\n1552 40   3.9466759  2.9575993    1    3.2  3.3000000     0\n1553 40   3.9466759  2.9575993    1    3.3  3.4000000     0\n1554 40   3.9466759  2.9575993    1    3.4  3.5000000     0\n1555 40   3.9466759  2.9575993    1    3.5  3.6000000     0\n1556 40   3.9466759  2.9575993    1    3.6  3.7000000     0\n1557 40   3.9466759  2.9575993    1    3.7  3.8000000     0\n1558 40   3.9466759  2.9575993    1    3.8  3.9466759     1\n1559 41  16.1377550  2.6066431    0    0.0  0.1000000     0\n1560 41  16.1377550  2.6066431    0    0.1  0.2000000     0\n1561 41  16.1377550  2.6066431    0    0.2  0.3000000     0\n1562 41  16.1377550  2.6066431    0    0.3  0.4000000     0\n1563 41  16.1377550  2.6066431    0    0.4  0.6000000     0\n1564 41  16.1377550  2.6066431    0    0.6  0.7000000     0\n1565 41  16.1377550  2.6066431    0    0.7  0.8000000     0\n1566 41  16.1377550  2.6066431    0    0.8  0.9000000     0\n1567 41  16.1377550  2.6066431    0    0.9  1.0000000     0\n1568 41  16.1377550  2.6066431    0    1.0  1.1000000     0\n1569 41  16.1377550  2.6066431    0    1.1  1.2000000     0\n1570 41  16.1377550  2.6066431    0    1.2  1.3000000     0\n1571 41  16.1377550  2.6066431    0    1.3  1.5000000     0\n1572 41  16.1377550  2.6066431    0    1.5  1.6000000     0\n1573 41  16.1377550  2.6066431    0    1.6  1.7000000     0\n1574 41  16.1377550  2.6066431    0    1.7  1.8000000     0\n1575 41  16.1377550  2.6066431    0    1.8  1.9000000     0\n1576 41  16.1377550  2.6066431    0    1.9  2.1000000     0\n1577 41  16.1377550  2.6066431    0    2.1  2.2000000     0\n1578 41  16.1377550  2.6066431    0    2.2  2.3000000     0\n1579 41  16.1377550  2.6066431    0    2.3  2.4000000     0\n1580 41  16.1377550  2.6066431    0    2.4  2.5000000     0\n1581 41  16.1377550  2.6066431    0    2.5  2.6000000     0\n1582 41  16.1377550  2.6066431    0    2.6  2.7000000     0\n1583 41  16.1377550  2.6066431    1    2.7  2.8000000     0\n1584 41  16.1377550  2.6066431    1    2.8  2.9000000     0\n1585 41  16.1377550  2.6066431    1    2.9  3.0000000     0\n1586 41  16.1377550  2.6066431    1    3.0  3.1000000     0\n1587 41  16.1377550  2.6066431    1    3.1  3.2000000     0\n1588 41  16.1377550  2.6066431    1    3.2  3.3000000     0\n1589 41  16.1377550  2.6066431    1    3.3  3.4000000     0\n1590 41  16.1377550  2.6066431    1    3.4  3.5000000     0\n1591 41  16.1377550  2.6066431    1    3.5  3.6000000     0\n1592 41  16.1377550  2.6066431    1    3.6  3.7000000     0\n1593 41  16.1377550  2.6066431    1    3.7  3.8000000     0\n1594 41  16.1377550  2.6066431    1    3.8  4.0000000     0\n1595 41  16.1377550  2.6066431    1    4.0  4.1000000     0\n1596 41  16.1377550  2.6066431    1    4.1  4.2000000     0\n1597 41  16.1377550  2.6066431    1    4.2  4.3000000     0\n1598 41  16.1377550  2.6066431    1    4.3  4.4000000     0\n1599 41  16.1377550  2.6066431    1    4.4  4.5000000     0\n1600 41  16.1377550  2.6066431    1    4.5  4.7000000     0\n1601 41  16.1377550  2.6066431    1    4.7  4.8000000     0\n1602 41  16.1377550  2.6066431    1    4.8  4.9000000     0\n1603 41  16.1377550  2.6066431    1    4.9  5.0000000     0\n1604 41  16.1377550  2.6066431    1    5.0 16.1377550     1\n1605 42  30.0940254  4.0756303    0    0.0  0.1000000     0\n1606 42  30.0940254  4.0756303    0    0.1  0.2000000     0\n1607 42  30.0940254  4.0756303    0    0.2  0.3000000     0\n1608 42  30.0940254  4.0756303    0    0.3  0.4000000     0\n1609 42  30.0940254  4.0756303    0    0.4  0.6000000     0\n1610 42  30.0940254  4.0756303    0    0.6  0.7000000     0\n1611 42  30.0940254  4.0756303    0    0.7  0.8000000     0\n1612 42  30.0940254  4.0756303    0    0.8  0.9000000     0\n1613 42  30.0940254  4.0756303    0    0.9  1.0000000     0\n1614 42  30.0940254  4.0756303    0    1.0  1.1000000     0\n1615 42  30.0940254  4.0756303    0    1.1  1.2000000     0\n1616 42  30.0940254  4.0756303    0    1.2  1.3000000     0\n1617 42  30.0940254  4.0756303    0    1.3  1.5000000     0\n1618 42  30.0940254  4.0756303    0    1.5  1.6000000     0\n1619 42  30.0940254  4.0756303    0    1.6  1.7000000     0\n1620 42  30.0940254  4.0756303    0    1.7  1.8000000     0\n1621 42  30.0940254  4.0756303    0    1.8  1.9000000     0\n1622 42  30.0940254  4.0756303    0    1.9  2.1000000     0\n1623 42  30.0940254  4.0756303    0    2.1  2.2000000     0\n1624 42  30.0940254  4.0756303    0    2.2  2.3000000     0\n1625 42  30.0940254  4.0756303    0    2.3  2.4000000     0\n1626 42  30.0940254  4.0756303    0    2.4  2.5000000     0\n1627 42  30.0940254  4.0756303    0    2.5  2.6000000     0\n1628 42  30.0940254  4.0756303    0    2.6  2.7000000     0\n1629 42  30.0940254  4.0756303    0    2.7  2.8000000     0\n1630 42  30.0940254  4.0756303    0    2.8  2.9000000     0\n1631 42  30.0940254  4.0756303    0    2.9  3.0000000     0\n1632 42  30.0940254  4.0756303    0    3.0  3.1000000     0\n1633 42  30.0940254  4.0756303    0    3.1  3.2000000     0\n1634 42  30.0940254  4.0756303    0    3.2  3.3000000     0\n1635 42  30.0940254  4.0756303    0    3.3  3.4000000     0\n1636 42  30.0940254  4.0756303    0    3.4  3.5000000     0\n1637 42  30.0940254  4.0756303    0    3.5  3.6000000     0\n1638 42  30.0940254  4.0756303    0    3.6  3.7000000     0\n1639 42  30.0940254  4.0756303    0    3.7  3.8000000     0\n1640 42  30.0940254  4.0756303    0    3.8  4.0000000     0\n1641 42  30.0940254  4.0756303    0    4.0  4.1000000     0\n1642 42  30.0940254  4.0756303    1    4.1  4.2000000     0\n1643 42  30.0940254  4.0756303    1    4.2  4.3000000     0\n1644 42  30.0940254  4.0756303    1    4.3  4.4000000     0\n1645 42  30.0940254  4.0756303    1    4.4  4.5000000     0\n1646 42  30.0940254  4.0756303    1    4.5  4.7000000     0\n1647 42  30.0940254  4.0756303    1    4.7  4.8000000     0\n1648 42  30.0940254  4.0756303    1    4.8  4.9000000     0\n1649 42  30.0940254  4.0756303    1    4.9  5.0000000     0\n1650 42  30.0940254  4.0756303    1    5.0 30.0940254     1\n1651 43   3.2587678  1.5843021    0    0.0  0.1000000     0\n1652 43   3.2587678  1.5843021    0    0.1  0.2000000     0\n1653 43   3.2587678  1.5843021    0    0.2  0.3000000     0\n1654 43   3.2587678  1.5843021    0    0.3  0.4000000     0\n1655 43   3.2587678  1.5843021    0    0.4  0.6000000     0\n1656 43   3.2587678  1.5843021    0    0.6  0.7000000     0\n1657 43   3.2587678  1.5843021    0    0.7  0.8000000     0\n1658 43   3.2587678  1.5843021    0    0.8  0.9000000     0\n1659 43   3.2587678  1.5843021    0    0.9  1.0000000     0\n1660 43   3.2587678  1.5843021    0    1.0  1.1000000     0\n1661 43   3.2587678  1.5843021    0    1.1  1.2000000     0\n1662 43   3.2587678  1.5843021    0    1.2  1.3000000     0\n1663 43   3.2587678  1.5843021    0    1.3  1.5000000     0\n1664 43   3.2587678  1.5843021    0    1.5  1.6000000     0\n1665 43   3.2587678  1.5843021    1    1.6  1.7000000     0\n1666 43   3.2587678  1.5843021    1    1.7  1.8000000     0\n1667 43   3.2587678  1.5843021    1    1.8  1.9000000     0\n1668 43   3.2587678  1.5843021    1    1.9  2.1000000     0\n1669 43   3.2587678  1.5843021    1    2.1  2.2000000     0\n1670 43   3.2587678  1.5843021    1    2.2  2.3000000     0\n1671 43   3.2587678  1.5843021    1    2.3  2.4000000     0\n1672 43   3.2587678  1.5843021    1    2.4  2.5000000     0\n1673 43   3.2587678  1.5843021    1    2.5  2.6000000     0\n1674 43   3.2587678  1.5843021    1    2.6  2.7000000     0\n1675 43   3.2587678  1.5843021    1    2.7  2.8000000     0\n1676 43   3.2587678  1.5843021    1    2.8  2.9000000     0\n1677 43   3.2587678  1.5843021    1    2.9  3.0000000     0\n1678 43   3.2587678  1.5843021    1    3.0  3.1000000     0\n1679 43   3.2587678  1.5843021    1    3.1  3.2000000     0\n1680 43   3.2587678  1.5843021    1    3.2  3.2587678     1\n1681 44  13.6236212  0.2051781    0    0.0  0.1000000     0\n1682 44  13.6236212  0.2051781    0    0.1  0.2000000     0\n1683 44  13.6236212  0.2051781    0    0.2  0.3000000     0\n1684 44  13.6236212  0.2051781    1    0.3  0.4000000     0\n1685 44  13.6236212  0.2051781    1    0.4  0.6000000     0\n1686 44  13.6236212  0.2051781    1    0.6  0.7000000     0\n1687 44  13.6236212  0.2051781    1    0.7  0.8000000     0\n1688 44  13.6236212  0.2051781    1    0.8  0.9000000     0\n1689 44  13.6236212  0.2051781    1    0.9  1.0000000     0\n1690 44  13.6236212  0.2051781    1    1.0  1.1000000     0\n1691 44  13.6236212  0.2051781    1    1.1  1.2000000     0\n1692 44  13.6236212  0.2051781    1    1.2  1.3000000     0\n1693 44  13.6236212  0.2051781    1    1.3  1.5000000     0\n1694 44  13.6236212  0.2051781    1    1.5  1.6000000     0\n1695 44  13.6236212  0.2051781    1    1.6  1.7000000     0\n1696 44  13.6236212  0.2051781    1    1.7  1.8000000     0\n1697 44  13.6236212  0.2051781    1    1.8  1.9000000     0\n1698 44  13.6236212  0.2051781    1    1.9  2.1000000     0\n1699 44  13.6236212  0.2051781    1    2.1  2.2000000     0\n1700 44  13.6236212  0.2051781    1    2.2  2.3000000     0\n1701 44  13.6236212  0.2051781    1    2.3  2.4000000     0\n1702 44  13.6236212  0.2051781    1    2.4  2.5000000     0\n1703 44  13.6236212  0.2051781    1    2.5  2.6000000     0\n1704 44  13.6236212  0.2051781    1    2.6  2.7000000     0\n1705 44  13.6236212  0.2051781    1    2.7  2.8000000     0\n1706 44  13.6236212  0.2051781    1    2.8  2.9000000     0\n1707 44  13.6236212  0.2051781    1    2.9  3.0000000     0\n1708 44  13.6236212  0.2051781    1    3.0  3.1000000     0\n1709 44  13.6236212  0.2051781    1    3.1  3.2000000     0\n1710 44  13.6236212  0.2051781    1    3.2  3.3000000     0\n1711 44  13.6236212  0.2051781    1    3.3  3.4000000     0\n1712 44  13.6236212  0.2051781    1    3.4  3.5000000     0\n1713 44  13.6236212  0.2051781    1    3.5  3.6000000     0\n1714 44  13.6236212  0.2051781    1    3.6  3.7000000     0\n1715 44  13.6236212  0.2051781    1    3.7  3.8000000     0\n1716 44  13.6236212  0.2051781    1    3.8  4.0000000     0\n1717 44  13.6236212  0.2051781    1    4.0  4.1000000     0\n1718 44  13.6236212  0.2051781    1    4.1  4.2000000     0\n1719 44  13.6236212  0.2051781    1    4.2  4.3000000     0\n1720 44  13.6236212  0.2051781    1    4.3  4.4000000     0\n1721 44  13.6236212  0.2051781    1    4.4  4.5000000     0\n1722 44  13.6236212  0.2051781    1    4.5  4.7000000     0\n1723 44  13.6236212  0.2051781    1    4.7  4.8000000     0\n1724 44  13.6236212  0.2051781    1    4.8  4.9000000     0\n1725 44  13.6236212  0.2051781    1    4.9  5.0000000     0\n1726 44  13.6236212  0.2051781    1    5.0 13.6236212     1\n1727 45   3.2832388  0.3797291    0    0.0  0.1000000     0\n1728 45   3.2832388  0.3797291    0    0.1  0.2000000     0\n1729 45   3.2832388  0.3797291    0    0.2  0.3000000     0\n1730 45   3.2832388  0.3797291    0    0.3  0.4000000     0\n1731 45   3.2832388  0.3797291    1    0.4  0.6000000     0\n1732 45   3.2832388  0.3797291    1    0.6  0.7000000     0\n1733 45   3.2832388  0.3797291    1    0.7  0.8000000     0\n1734 45   3.2832388  0.3797291    1    0.8  0.9000000     0\n1735 45   3.2832388  0.3797291    1    0.9  1.0000000     0\n1736 45   3.2832388  0.3797291    1    1.0  1.1000000     0\n1737 45   3.2832388  0.3797291    1    1.1  1.2000000     0\n1738 45   3.2832388  0.3797291    1    1.2  1.3000000     0\n1739 45   3.2832388  0.3797291    1    1.3  1.5000000     0\n1740 45   3.2832388  0.3797291    1    1.5  1.6000000     0\n1741 45   3.2832388  0.3797291    1    1.6  1.7000000     0\n1742 45   3.2832388  0.3797291    1    1.7  1.8000000     0\n1743 45   3.2832388  0.3797291    1    1.8  1.9000000     0\n1744 45   3.2832388  0.3797291    1    1.9  2.1000000     0\n1745 45   3.2832388  0.3797291    1    2.1  2.2000000     0\n1746 45   3.2832388  0.3797291    1    2.2  2.3000000     0\n1747 45   3.2832388  0.3797291    1    2.3  2.4000000     0\n1748 45   3.2832388  0.3797291    1    2.4  2.5000000     0\n1749 45   3.2832388  0.3797291    1    2.5  2.6000000     0\n1750 45   3.2832388  0.3797291    1    2.6  2.7000000     0\n1751 45   3.2832388  0.3797291    1    2.7  2.8000000     0\n1752 45   3.2832388  0.3797291    1    2.8  2.9000000     0\n1753 45   3.2832388  0.3797291    1    2.9  3.0000000     0\n1754 45   3.2832388  0.3797291    1    3.0  3.1000000     0\n1755 45   3.2832388  0.3797291    1    3.1  3.2000000     0\n1756 45   3.2832388  0.3797291    1    3.2  3.2832388     1\n1757 46   1.6137810  3.4020542    0    0.0  0.1000000     0\n1758 46   1.6137810  3.4020542    0    0.1  0.2000000     0\n1759 46   1.6137810  3.4020542    0    0.2  0.3000000     0\n1760 46   1.6137810  3.4020542    0    0.3  0.4000000     0\n1761 46   1.6137810  3.4020542    0    0.4  0.6000000     0\n1762 46   1.6137810  3.4020542    0    0.6  0.7000000     0\n1763 46   1.6137810  3.4020542    0    0.7  0.8000000     0\n1764 46   1.6137810  3.4020542    0    0.8  0.9000000     0\n1765 46   1.6137810  3.4020542    0    0.9  1.0000000     0\n1766 46   1.6137810  3.4020542    0    1.0  1.1000000     0\n1767 46   1.6137810  3.4020542    0    1.1  1.2000000     0\n1768 46   1.6137810  3.4020542    0    1.2  1.3000000     0\n1769 46   1.6137810  3.4020542    0    1.3  1.5000000     0\n1770 46   1.6137810  3.4020542    0    1.5  1.6000000     0\n1771 46   1.6137810  3.4020542    0    1.6  1.6137810     0\n1772 47   5.4528956  1.8406135    0    0.0  0.1000000     0\n1773 47   5.4528956  1.8406135    0    0.1  0.2000000     0\n1774 47   5.4528956  1.8406135    0    0.2  0.3000000     0\n1775 47   5.4528956  1.8406135    0    0.3  0.4000000     0\n1776 47   5.4528956  1.8406135    0    0.4  0.6000000     0\n1777 47   5.4528956  1.8406135    0    0.6  0.7000000     0\n1778 47   5.4528956  1.8406135    0    0.7  0.8000000     0\n1779 47   5.4528956  1.8406135    0    0.8  0.9000000     0\n1780 47   5.4528956  1.8406135    0    0.9  1.0000000     0\n1781 47   5.4528956  1.8406135    0    1.0  1.1000000     0\n1782 47   5.4528956  1.8406135    0    1.1  1.2000000     0\n1783 47   5.4528956  1.8406135    0    1.2  1.3000000     0\n1784 47   5.4528956  1.8406135    0    1.3  1.5000000     0\n1785 47   5.4528956  1.8406135    0    1.5  1.6000000     0\n1786 47   5.4528956  1.8406135    0    1.6  1.7000000     0\n1787 47   5.4528956  1.8406135    0    1.7  1.8000000     0\n1788 47   5.4528956  1.8406135    0    1.8  1.9000000     0\n1789 47   5.4528956  1.8406135    1    1.9  2.1000000     0\n1790 47   5.4528956  1.8406135    1    2.1  2.2000000     0\n1791 47   5.4528956  1.8406135    1    2.2  2.3000000     0\n1792 47   5.4528956  1.8406135    1    2.3  2.4000000     0\n1793 47   5.4528956  1.8406135    1    2.4  2.5000000     0\n1794 47   5.4528956  1.8406135    1    2.5  2.6000000     0\n1795 47   5.4528956  1.8406135    1    2.6  2.7000000     0\n1796 47   5.4528956  1.8406135    1    2.7  2.8000000     0\n1797 47   5.4528956  1.8406135    1    2.8  2.9000000     0\n1798 47   5.4528956  1.8406135    1    2.9  3.0000000     0\n1799 47   5.4528956  1.8406135    1    3.0  3.1000000     0\n1800 47   5.4528956  1.8406135    1    3.1  3.2000000     0\n1801 47   5.4528956  1.8406135    1    3.2  3.3000000     0\n1802 47   5.4528956  1.8406135    1    3.3  3.4000000     0\n1803 47   5.4528956  1.8406135    1    3.4  3.5000000     0\n1804 47   5.4528956  1.8406135    1    3.5  3.6000000     0\n1805 47   5.4528956  1.8406135    1    3.6  3.7000000     0\n1806 47   5.4528956  1.8406135    1    3.7  3.8000000     0\n1807 47   5.4528956  1.8406135    1    3.8  4.0000000     0\n1808 47   5.4528956  1.8406135    1    4.0  4.1000000     0\n1809 47   5.4528956  1.8406135    1    4.1  4.2000000     0\n1810 47   5.4528956  1.8406135    1    4.2  4.3000000     0\n1811 47   5.4528956  1.8406135    1    4.3  4.4000000     0\n1812 47   5.4528956  1.8406135    1    4.4  4.5000000     0\n1813 47   5.4528956  1.8406135    1    4.5  4.7000000     0\n1814 47   5.4528956  1.8406135    1    4.7  4.8000000     0\n1815 47   5.4528956  1.8406135    1    4.8  4.9000000     0\n1816 47   5.4528956  1.8406135    1    4.9  5.0000000     0\n1817 47   5.4528956  1.8406135    1    5.0  5.4528956     0\n1818 48   1.0451651  1.4658496    0    0.0  0.1000000     0\n1819 48   1.0451651  1.4658496    0    0.1  0.2000000     0\n1820 48   1.0451651  1.4658496    0    0.2  0.3000000     0\n1821 48   1.0451651  1.4658496    0    0.3  0.4000000     0\n1822 48   1.0451651  1.4658496    0    0.4  0.6000000     0\n1823 48   1.0451651  1.4658496    0    0.6  0.7000000     0\n1824 48   1.0451651  1.4658496    0    0.7  0.8000000     0\n1825 48   1.0451651  1.4658496    0    0.8  0.9000000     0\n1826 48   1.0451651  1.4658496    0    0.9  1.0000000     0\n1827 48   1.0451651  1.4658496    0    1.0  1.0451651     1\n1828 49  25.2999393  3.5145398    0    0.0  0.1000000     0\n1829 49  25.2999393  3.5145398    0    0.1  0.2000000     0\n1830 49  25.2999393  3.5145398    0    0.2  0.3000000     0\n1831 49  25.2999393  3.5145398    0    0.3  0.4000000     0\n1832 49  25.2999393  3.5145398    0    0.4  0.6000000     0\n1833 49  25.2999393  3.5145398    0    0.6  0.7000000     0\n1834 49  25.2999393  3.5145398    0    0.7  0.8000000     0\n1835 49  25.2999393  3.5145398    0    0.8  0.9000000     0\n1836 49  25.2999393  3.5145398    0    0.9  1.0000000     0\n1837 49  25.2999393  3.5145398    0    1.0  1.1000000     0\n1838 49  25.2999393  3.5145398    0    1.1  1.2000000     0\n1839 49  25.2999393  3.5145398    0    1.2  1.3000000     0\n1840 49  25.2999393  3.5145398    0    1.3  1.5000000     0\n1841 49  25.2999393  3.5145398    0    1.5  1.6000000     0\n1842 49  25.2999393  3.5145398    0    1.6  1.7000000     0\n1843 49  25.2999393  3.5145398    0    1.7  1.8000000     0\n1844 49  25.2999393  3.5145398    0    1.8  1.9000000     0\n1845 49  25.2999393  3.5145398    0    1.9  2.1000000     0\n1846 49  25.2999393  3.5145398    0    2.1  2.2000000     0\n1847 49  25.2999393  3.5145398    0    2.2  2.3000000     0\n1848 49  25.2999393  3.5145398    0    2.3  2.4000000     0\n1849 49  25.2999393  3.5145398    0    2.4  2.5000000     0\n1850 49  25.2999393  3.5145398    0    2.5  2.6000000     0\n1851 49  25.2999393  3.5145398    0    2.6  2.7000000     0\n1852 49  25.2999393  3.5145398    0    2.7  2.8000000     0\n1853 49  25.2999393  3.5145398    0    2.8  2.9000000     0\n1854 49  25.2999393  3.5145398    0    2.9  3.0000000     0\n1855 49  25.2999393  3.5145398    0    3.0  3.1000000     0\n1856 49  25.2999393  3.5145398    0    3.1  3.2000000     0\n1857 49  25.2999393  3.5145398    0    3.2  3.3000000     0\n1858 49  25.2999393  3.5145398    0    3.3  3.4000000     0\n1859 49  25.2999393  3.5145398    0    3.4  3.5000000     0\n1860 49  25.2999393  3.5145398    0    3.5  3.6000000     0\n1861 49  25.2999393  3.5145398    1    3.6  3.7000000     0\n1862 49  25.2999393  3.5145398    1    3.7  3.8000000     0\n1863 49  25.2999393  3.5145398    1    3.8  4.0000000     0\n1864 49  25.2999393  3.5145398    1    4.0  4.1000000     0\n1865 49  25.2999393  3.5145398    1    4.1  4.2000000     0\n1866 49  25.2999393  3.5145398    1    4.2  4.3000000     0\n1867 49  25.2999393  3.5145398    1    4.3  4.4000000     0\n1868 49  25.2999393  3.5145398    1    4.4  4.5000000     0\n1869 49  25.2999393  3.5145398    1    4.5  4.7000000     0\n1870 49  25.2999393  3.5145398    1    4.7  4.8000000     0\n1871 49  25.2999393  3.5145398    1    4.8  4.9000000     0\n1872 49  25.2999393  3.5145398    1    4.9  5.0000000     0\n1873 49  25.2999393  3.5145398    1    5.0 25.2999393     0\n1874 50   1.0707766  2.1715450    0    0.0  0.1000000     0\n1875 50   1.0707766  2.1715450    0    0.1  0.2000000     0\n1876 50   1.0707766  2.1715450    0    0.2  0.3000000     0\n1877 50   1.0707766  2.1715450    0    0.3  0.4000000     0\n1878 50   1.0707766  2.1715450    0    0.4  0.6000000     0\n1879 50   1.0707766  2.1715450    0    0.6  0.7000000     0\n1880 50   1.0707766  2.1715450    0    0.7  0.8000000     0\n1881 50   1.0707766  2.1715450    0    0.8  0.9000000     0\n1882 50   1.0707766  2.1715450    0    0.9  1.0000000     0\n1883 50   1.0707766  2.1715450    0    1.0  1.0707766     1\n1884 51   7.0428782  0.8490366    0    0.0  0.1000000     0\n1885 51   7.0428782  0.8490366    0    0.1  0.2000000     0\n1886 51   7.0428782  0.8490366    0    0.2  0.3000000     0\n1887 51   7.0428782  0.8490366    0    0.3  0.4000000     0\n1888 51   7.0428782  0.8490366    0    0.4  0.6000000     0\n1889 51   7.0428782  0.8490366    0    0.6  0.7000000     0\n1890 51   7.0428782  0.8490366    0    0.7  0.8000000     0\n1891 51   7.0428782  0.8490366    0    0.8  0.9000000     0\n1892 51   7.0428782  0.8490366    1    0.9  1.0000000     0\n1893 51   7.0428782  0.8490366    1    1.0  1.1000000     0\n1894 51   7.0428782  0.8490366    1    1.1  1.2000000     0\n1895 51   7.0428782  0.8490366    1    1.2  1.3000000     0\n1896 51   7.0428782  0.8490366    1    1.3  1.5000000     0\n1897 51   7.0428782  0.8490366    1    1.5  1.6000000     0\n1898 51   7.0428782  0.8490366    1    1.6  1.7000000     0\n1899 51   7.0428782  0.8490366    1    1.7  1.8000000     0\n1900 51   7.0428782  0.8490366    1    1.8  1.9000000     0\n1901 51   7.0428782  0.8490366    1    1.9  2.1000000     0\n1902 51   7.0428782  0.8490366    1    2.1  2.2000000     0\n1903 51   7.0428782  0.8490366    1    2.2  2.3000000     0\n1904 51   7.0428782  0.8490366    1    2.3  2.4000000     0\n1905 51   7.0428782  0.8490366    1    2.4  2.5000000     0\n1906 51   7.0428782  0.8490366    1    2.5  2.6000000     0\n1907 51   7.0428782  0.8490366    1    2.6  2.7000000     0\n1908 51   7.0428782  0.8490366    1    2.7  2.8000000     0\n1909 51   7.0428782  0.8490366    1    2.8  2.9000000     0\n1910 51   7.0428782  0.8490366    1    2.9  3.0000000     0\n1911 51   7.0428782  0.8490366    1    3.0  3.1000000     0\n1912 51   7.0428782  0.8490366    1    3.1  3.2000000     0\n1913 51   7.0428782  0.8490366    1    3.2  3.3000000     0\n1914 51   7.0428782  0.8490366    1    3.3  3.4000000     0\n1915 51   7.0428782  0.8490366    1    3.4  3.5000000     0\n1916 51   7.0428782  0.8490366    1    3.5  3.6000000     0\n1917 51   7.0428782  0.8490366    1    3.6  3.7000000     0\n1918 51   7.0428782  0.8490366    1    3.7  3.8000000     0\n1919 51   7.0428782  0.8490366    1    3.8  4.0000000     0\n1920 51   7.0428782  0.8490366    1    4.0  4.1000000     0\n1921 51   7.0428782  0.8490366    1    4.1  4.2000000     0\n1922 51   7.0428782  0.8490366    1    4.2  4.3000000     0\n1923 51   7.0428782  0.8490366    1    4.3  4.4000000     0\n1924 51   7.0428782  0.8490366    1    4.4  4.5000000     0\n1925 51   7.0428782  0.8490366    1    4.5  4.7000000     0\n1926 51   7.0428782  0.8490366    1    4.7  4.8000000     0\n1927 51   7.0428782  0.8490366    1    4.8  4.9000000     0\n1928 51   7.0428782  0.8490366    1    4.9  5.0000000     0\n1929 51   7.0428782  0.8490366    1    5.0  7.0428782     1\n1930 52   0.9899175  3.5479144    0    0.0  0.1000000     0\n1931 52   0.9899175  3.5479144    0    0.1  0.2000000     0\n1932 52   0.9899175  3.5479144    0    0.2  0.3000000     0\n1933 52   0.9899175  3.5479144    0    0.3  0.4000000     0\n1934 52   0.9899175  3.5479144    0    0.4  0.6000000     0\n1935 52   0.9899175  3.5479144    0    0.6  0.7000000     0\n1936 52   0.9899175  3.5479144    0    0.7  0.8000000     0\n1937 52   0.9899175  3.5479144    0    0.8  0.9000000     0\n1938 52   0.9899175  3.5479144    0    0.9  0.9899175     0\n1939 53   3.0117375  4.5300616    0    0.0  0.1000000     0\n1940 53   3.0117375  4.5300616    0    0.1  0.2000000     0\n1941 53   3.0117375  4.5300616    0    0.2  0.3000000     0\n1942 53   3.0117375  4.5300616    0    0.3  0.4000000     0\n1943 53   3.0117375  4.5300616    0    0.4  0.6000000     0\n1944 53   3.0117375  4.5300616    0    0.6  0.7000000     0\n1945 53   3.0117375  4.5300616    0    0.7  0.8000000     0\n1946 53   3.0117375  4.5300616    0    0.8  0.9000000     0\n1947 53   3.0117375  4.5300616    0    0.9  1.0000000     0\n1948 53   3.0117375  4.5300616    0    1.0  1.1000000     0\n1949 53   3.0117375  4.5300616    0    1.1  1.2000000     0\n1950 53   3.0117375  4.5300616    0    1.2  1.3000000     0\n1951 53   3.0117375  4.5300616    0    1.3  1.5000000     0\n1952 53   3.0117375  4.5300616    0    1.5  1.6000000     0\n1953 53   3.0117375  4.5300616    0    1.6  1.7000000     0\n1954 53   3.0117375  4.5300616    0    1.7  1.8000000     0\n1955 53   3.0117375  4.5300616    0    1.8  1.9000000     0\n1956 53   3.0117375  4.5300616    0    1.9  2.1000000     0\n1957 53   3.0117375  4.5300616    0    2.1  2.2000000     0\n1958 53   3.0117375  4.5300616    0    2.2  2.3000000     0\n1959 53   3.0117375  4.5300616    0    2.3  2.4000000     0\n1960 53   3.0117375  4.5300616    0    2.4  2.5000000     0\n1961 53   3.0117375  4.5300616    0    2.5  2.6000000     0\n1962 53   3.0117375  4.5300616    0    2.6  2.7000000     0\n1963 53   3.0117375  4.5300616    0    2.7  2.8000000     0\n1964 53   3.0117375  4.5300616    0    2.8  2.9000000     0\n1965 53   3.0117375  4.5300616    0    2.9  3.0000000     0\n1966 53   3.0117375  4.5300616    0    3.0  3.0117375     0\n1967 54   1.7522476  4.2463765    0    0.0  0.1000000     0\n1968 54   1.7522476  4.2463765    0    0.1  0.2000000     0\n1969 54   1.7522476  4.2463765    0    0.2  0.3000000     0\n1970 54   1.7522476  4.2463765    0    0.3  0.4000000     0\n1971 54   1.7522476  4.2463765    0    0.4  0.6000000     0\n1972 54   1.7522476  4.2463765    0    0.6  0.7000000     0\n1973 54   1.7522476  4.2463765    0    0.7  0.8000000     0\n1974 54   1.7522476  4.2463765    0    0.8  0.9000000     0\n1975 54   1.7522476  4.2463765    0    0.9  1.0000000     0\n1976 54   1.7522476  4.2463765    0    1.0  1.1000000     0\n1977 54   1.7522476  4.2463765    0    1.1  1.2000000     0\n1978 54   1.7522476  4.2463765    0    1.2  1.3000000     0\n1979 54   1.7522476  4.2463765    0    1.3  1.5000000     0\n1980 54   1.7522476  4.2463765    0    1.5  1.6000000     0\n1981 54   1.7522476  4.2463765    0    1.6  1.7000000     0\n1982 54   1.7522476  4.2463765    0    1.7  1.7522476     0\n1983 55   6.2566545  3.2317039    0    0.0  0.1000000     0\n1984 55   6.2566545  3.2317039    0    0.1  0.2000000     0\n1985 55   6.2566545  3.2317039    0    0.2  0.3000000     0\n1986 55   6.2566545  3.2317039    0    0.3  0.4000000     0\n1987 55   6.2566545  3.2317039    0    0.4  0.6000000     0\n1988 55   6.2566545  3.2317039    0    0.6  0.7000000     0\n1989 55   6.2566545  3.2317039    0    0.7  0.8000000     0\n1990 55   6.2566545  3.2317039    0    0.8  0.9000000     0\n1991 55   6.2566545  3.2317039    0    0.9  1.0000000     0\n1992 55   6.2566545  3.2317039    0    1.0  1.1000000     0\n1993 55   6.2566545  3.2317039    0    1.1  1.2000000     0\n1994 55   6.2566545  3.2317039    0    1.2  1.3000000     0\n1995 55   6.2566545  3.2317039    0    1.3  1.5000000     0\n1996 55   6.2566545  3.2317039    0    1.5  1.6000000     0\n1997 55   6.2566545  3.2317039    0    1.6  1.7000000     0\n1998 55   6.2566545  3.2317039    0    1.7  1.8000000     0\n1999 55   6.2566545  3.2317039    0    1.8  1.9000000     0\n2000 55   6.2566545  3.2317039    0    1.9  2.1000000     0\n2001 55   6.2566545  3.2317039    0    2.1  2.2000000     0\n2002 55   6.2566545  3.2317039    0    2.2  2.3000000     0\n2003 55   6.2566545  3.2317039    0    2.3  2.4000000     0\n2004 55   6.2566545  3.2317039    0    2.4  2.5000000     0\n2005 55   6.2566545  3.2317039    0    2.5  2.6000000     0\n2006 55   6.2566545  3.2317039    0    2.6  2.7000000     0\n2007 55   6.2566545  3.2317039    0    2.7  2.8000000     0\n2008 55   6.2566545  3.2317039    0    2.8  2.9000000     0\n2009 55   6.2566545  3.2317039    0    2.9  3.0000000     0\n2010 55   6.2566545  3.2317039    0    3.0  3.1000000     0\n2011 55   6.2566545  3.2317039    0    3.1  3.2000000     0\n2012 55   6.2566545  3.2317039    0    3.2  3.3000000     0\n2013 55   6.2566545  3.2317039    1    3.3  3.4000000     0\n2014 55   6.2566545  3.2317039    1    3.4  3.5000000     0\n2015 55   6.2566545  3.2317039    1    3.5  3.6000000     0\n2016 55   6.2566545  3.2317039    1    3.6  3.7000000     0\n2017 55   6.2566545  3.2317039    1    3.7  3.8000000     0\n2018 55   6.2566545  3.2317039    1    3.8  4.0000000     0\n2019 55   6.2566545  3.2317039    1    4.0  4.1000000     0\n2020 55   6.2566545  3.2317039    1    4.1  4.2000000     0\n2021 55   6.2566545  3.2317039    1    4.2  4.3000000     0\n2022 55   6.2566545  3.2317039    1    4.3  4.4000000     0\n2023 55   6.2566545  3.2317039    1    4.4  4.5000000     0\n2024 55   6.2566545  3.2317039    1    4.5  4.7000000     0\n2025 55   6.2566545  3.2317039    1    4.7  4.8000000     0\n2026 55   6.2566545  3.2317039    1    4.8  4.9000000     0\n2027 55   6.2566545  3.2317039    1    4.9  5.0000000     0\n2028 55   6.2566545  3.2317039    1    5.0  6.2566545     1\n2029 56  10.4282123  2.4079193    0    0.0  0.1000000     0\n2030 56  10.4282123  2.4079193    0    0.1  0.2000000     0\n2031 56  10.4282123  2.4079193    0    0.2  0.3000000     0\n2032 56  10.4282123  2.4079193    0    0.3  0.4000000     0\n2033 56  10.4282123  2.4079193    0    0.4  0.6000000     0\n2034 56  10.4282123  2.4079193    0    0.6  0.7000000     0\n2035 56  10.4282123  2.4079193    0    0.7  0.8000000     0\n2036 56  10.4282123  2.4079193    0    0.8  0.9000000     0\n2037 56  10.4282123  2.4079193    0    0.9  1.0000000     0\n2038 56  10.4282123  2.4079193    0    1.0  1.1000000     0\n2039 56  10.4282123  2.4079193    0    1.1  1.2000000     0\n2040 56  10.4282123  2.4079193    0    1.2  1.3000000     0\n2041 56  10.4282123  2.4079193    0    1.3  1.5000000     0\n2042 56  10.4282123  2.4079193    0    1.5  1.6000000     0\n2043 56  10.4282123  2.4079193    0    1.6  1.7000000     0\n2044 56  10.4282123  2.4079193    0    1.7  1.8000000     0\n2045 56  10.4282123  2.4079193    0    1.8  1.9000000     0\n2046 56  10.4282123  2.4079193    0    1.9  2.1000000     0\n2047 56  10.4282123  2.4079193    0    2.1  2.2000000     0\n2048 56  10.4282123  2.4079193    0    2.2  2.3000000     0\n2049 56  10.4282123  2.4079193    0    2.3  2.4000000     0\n2050 56  10.4282123  2.4079193    0    2.4  2.5000000     0\n2051 56  10.4282123  2.4079193    1    2.5  2.6000000     0\n2052 56  10.4282123  2.4079193    1    2.6  2.7000000     0\n2053 56  10.4282123  2.4079193    1    2.7  2.8000000     0\n2054 56  10.4282123  2.4079193    1    2.8  2.9000000     0\n2055 56  10.4282123  2.4079193    1    2.9  3.0000000     0\n2056 56  10.4282123  2.4079193    1    3.0  3.1000000     0\n2057 56  10.4282123  2.4079193    1    3.1  3.2000000     0\n2058 56  10.4282123  2.4079193    1    3.2  3.3000000     0\n2059 56  10.4282123  2.4079193    1    3.3  3.4000000     0\n2060 56  10.4282123  2.4079193    1    3.4  3.5000000     0\n2061 56  10.4282123  2.4079193    1    3.5  3.6000000     0\n2062 56  10.4282123  2.4079193    1    3.6  3.7000000     0\n2063 56  10.4282123  2.4079193    1    3.7  3.8000000     0\n2064 56  10.4282123  2.4079193    1    3.8  4.0000000     0\n2065 56  10.4282123  2.4079193    1    4.0  4.1000000     0\n2066 56  10.4282123  2.4079193    1    4.1  4.2000000     0\n2067 56  10.4282123  2.4079193    1    4.2  4.3000000     0\n2068 56  10.4282123  2.4079193    1    4.3  4.4000000     0\n2069 56  10.4282123  2.4079193    1    4.4  4.5000000     0\n2070 56  10.4282123  2.4079193    1    4.5  4.7000000     0\n2071 56  10.4282123  2.4079193    1    4.7  4.8000000     0\n2072 56  10.4282123  2.4079193    1    4.8  4.9000000     0\n2073 56  10.4282123  2.4079193    1    4.9  5.0000000     0\n2074 56  10.4282123  2.4079193    1    5.0 10.4282123     1\n2075 57  13.3472838  2.9489199    0    0.0  0.1000000     0\n2076 57  13.3472838  2.9489199    0    0.1  0.2000000     0\n2077 57  13.3472838  2.9489199    0    0.2  0.3000000     0\n2078 57  13.3472838  2.9489199    0    0.3  0.4000000     0\n2079 57  13.3472838  2.9489199    0    0.4  0.6000000     0\n2080 57  13.3472838  2.9489199    0    0.6  0.7000000     0\n2081 57  13.3472838  2.9489199    0    0.7  0.8000000     0\n2082 57  13.3472838  2.9489199    0    0.8  0.9000000     0\n2083 57  13.3472838  2.9489199    0    0.9  1.0000000     0\n2084 57  13.3472838  2.9489199    0    1.0  1.1000000     0\n2085 57  13.3472838  2.9489199    0    1.1  1.2000000     0\n2086 57  13.3472838  2.9489199    0    1.2  1.3000000     0\n2087 57  13.3472838  2.9489199    0    1.3  1.5000000     0\n2088 57  13.3472838  2.9489199    0    1.5  1.6000000     0\n2089 57  13.3472838  2.9489199    0    1.6  1.7000000     0\n2090 57  13.3472838  2.9489199    0    1.7  1.8000000     0\n2091 57  13.3472838  2.9489199    0    1.8  1.9000000     0\n2092 57  13.3472838  2.9489199    0    1.9  2.1000000     0\n2093 57  13.3472838  2.9489199    0    2.1  2.2000000     0\n2094 57  13.3472838  2.9489199    0    2.2  2.3000000     0\n2095 57  13.3472838  2.9489199    0    2.3  2.4000000     0\n2096 57  13.3472838  2.9489199    0    2.4  2.5000000     0\n2097 57  13.3472838  2.9489199    0    2.5  2.6000000     0\n2098 57  13.3472838  2.9489199    0    2.6  2.7000000     0\n2099 57  13.3472838  2.9489199    0    2.7  2.8000000     0\n2100 57  13.3472838  2.9489199    0    2.8  2.9000000     0\n2101 57  13.3472838  2.9489199    0    2.9  3.0000000     0\n2102 57  13.3472838  2.9489199    1    3.0  3.1000000     0\n2103 57  13.3472838  2.9489199    1    3.1  3.2000000     0\n2104 57  13.3472838  2.9489199    1    3.2  3.3000000     0\n2105 57  13.3472838  2.9489199    1    3.3  3.4000000     0\n2106 57  13.3472838  2.9489199    1    3.4  3.5000000     0\n2107 57  13.3472838  2.9489199    1    3.5  3.6000000     0\n2108 57  13.3472838  2.9489199    1    3.6  3.7000000     0\n2109 57  13.3472838  2.9489199    1    3.7  3.8000000     0\n2110 57  13.3472838  2.9489199    1    3.8  4.0000000     0\n2111 57  13.3472838  2.9489199    1    4.0  4.1000000     0\n2112 57  13.3472838  2.9489199    1    4.1  4.2000000     0\n2113 57  13.3472838  2.9489199    1    4.2  4.3000000     0\n2114 57  13.3472838  2.9489199    1    4.3  4.4000000     0\n2115 57  13.3472838  2.9489199    1    4.4  4.5000000     0\n2116 57  13.3472838  2.9489199    1    4.5  4.7000000     0\n2117 57  13.3472838  2.9489199    1    4.7  4.8000000     0\n2118 57  13.3472838  2.9489199    1    4.8  4.9000000     0\n2119 57  13.3472838  2.9489199    1    4.9  5.0000000     0\n2120 57  13.3472838  2.9489199    1    5.0 13.3472838     1\n2121 58  13.2340106  4.9791943    0    0.0  0.1000000     0\n2122 58  13.2340106  4.9791943    0    0.1  0.2000000     0\n2123 58  13.2340106  4.9791943    0    0.2  0.3000000     0\n2124 58  13.2340106  4.9791943    0    0.3  0.4000000     0\n2125 58  13.2340106  4.9791943    0    0.4  0.6000000     0\n2126 58  13.2340106  4.9791943    0    0.6  0.7000000     0\n2127 58  13.2340106  4.9791943    0    0.7  0.8000000     0\n2128 58  13.2340106  4.9791943    0    0.8  0.9000000     0\n2129 58  13.2340106  4.9791943    0    0.9  1.0000000     0\n2130 58  13.2340106  4.9791943    0    1.0  1.1000000     0\n2131 58  13.2340106  4.9791943    0    1.1  1.2000000     0\n2132 58  13.2340106  4.9791943    0    1.2  1.3000000     0\n2133 58  13.2340106  4.9791943    0    1.3  1.5000000     0\n2134 58  13.2340106  4.9791943    0    1.5  1.6000000     0\n2135 58  13.2340106  4.9791943    0    1.6  1.7000000     0\n2136 58  13.2340106  4.9791943    0    1.7  1.8000000     0\n2137 58  13.2340106  4.9791943    0    1.8  1.9000000     0\n2138 58  13.2340106  4.9791943    0    1.9  2.1000000     0\n2139 58  13.2340106  4.9791943    0    2.1  2.2000000     0\n2140 58  13.2340106  4.9791943    0    2.2  2.3000000     0\n2141 58  13.2340106  4.9791943    0    2.3  2.4000000     0\n2142 58  13.2340106  4.9791943    0    2.4  2.5000000     0\n2143 58  13.2340106  4.9791943    0    2.5  2.6000000     0\n2144 58  13.2340106  4.9791943    0    2.6  2.7000000     0\n2145 58  13.2340106  4.9791943    0    2.7  2.8000000     0\n2146 58  13.2340106  4.9791943    0    2.8  2.9000000     0\n2147 58  13.2340106  4.9791943    0    2.9  3.0000000     0\n2148 58  13.2340106  4.9791943    0    3.0  3.1000000     0\n2149 58  13.2340106  4.9791943    0    3.1  3.2000000     0\n2150 58  13.2340106  4.9791943    0    3.2  3.3000000     0\n2151 58  13.2340106  4.9791943    0    3.3  3.4000000     0\n2152 58  13.2340106  4.9791943    0    3.4  3.5000000     0\n2153 58  13.2340106  4.9791943    0    3.5  3.6000000     0\n2154 58  13.2340106  4.9791943    0    3.6  3.7000000     0\n2155 58  13.2340106  4.9791943    0    3.7  3.8000000     0\n2156 58  13.2340106  4.9791943    0    3.8  4.0000000     0\n2157 58  13.2340106  4.9791943    0    4.0  4.1000000     0\n2158 58  13.2340106  4.9791943    0    4.1  4.2000000     0\n2159 58  13.2340106  4.9791943    0    4.2  4.3000000     0\n2160 58  13.2340106  4.9791943    0    4.3  4.4000000     0\n2161 58  13.2340106  4.9791943    0    4.4  4.5000000     0\n2162 58  13.2340106  4.9791943    0    4.5  4.7000000     0\n2163 58  13.2340106  4.9791943    0    4.7  4.8000000     0\n2164 58  13.2340106  4.9791943    0    4.8  4.9000000     0\n2165 58  13.2340106  4.9791943    0    4.9  5.0000000     0\n2166 58  13.2340106  4.9791943    1    5.0 13.2340106     0\n2167 59   7.1989949  1.2787152    0    0.0  0.1000000     0\n2168 59   7.1989949  1.2787152    0    0.1  0.2000000     0\n2169 59   7.1989949  1.2787152    0    0.2  0.3000000     0\n2170 59   7.1989949  1.2787152    0    0.3  0.4000000     0\n2171 59   7.1989949  1.2787152    0    0.4  0.6000000     0\n2172 59   7.1989949  1.2787152    0    0.6  0.7000000     0\n2173 59   7.1989949  1.2787152    0    0.7  0.8000000     0\n2174 59   7.1989949  1.2787152    0    0.8  0.9000000     0\n2175 59   7.1989949  1.2787152    0    0.9  1.0000000     0\n2176 59   7.1989949  1.2787152    0    1.0  1.1000000     0\n2177 59   7.1989949  1.2787152    0    1.1  1.2000000     0\n2178 59   7.1989949  1.2787152    0    1.2  1.3000000     0\n2179 59   7.1989949  1.2787152    1    1.3  1.5000000     0\n2180 59   7.1989949  1.2787152    1    1.5  1.6000000     0\n2181 59   7.1989949  1.2787152    1    1.6  1.7000000     0\n2182 59   7.1989949  1.2787152    1    1.7  1.8000000     0\n2183 59   7.1989949  1.2787152    1    1.8  1.9000000     0\n2184 59   7.1989949  1.2787152    1    1.9  2.1000000     0\n2185 59   7.1989949  1.2787152    1    2.1  2.2000000     0\n2186 59   7.1989949  1.2787152    1    2.2  2.3000000     0\n2187 59   7.1989949  1.2787152    1    2.3  2.4000000     0\n2188 59   7.1989949  1.2787152    1    2.4  2.5000000     0\n2189 59   7.1989949  1.2787152    1    2.5  2.6000000     0\n2190 59   7.1989949  1.2787152    1    2.6  2.7000000     0\n2191 59   7.1989949  1.2787152    1    2.7  2.8000000     0\n2192 59   7.1989949  1.2787152    1    2.8  2.9000000     0\n2193 59   7.1989949  1.2787152    1    2.9  3.0000000     0\n2194 59   7.1989949  1.2787152    1    3.0  3.1000000     0\n2195 59   7.1989949  1.2787152    1    3.1  3.2000000     0\n2196 59   7.1989949  1.2787152    1    3.2  3.3000000     0\n2197 59   7.1989949  1.2787152    1    3.3  3.4000000     0\n2198 59   7.1989949  1.2787152    1    3.4  3.5000000     0\n2199 59   7.1989949  1.2787152    1    3.5  3.6000000     0\n2200 59   7.1989949  1.2787152    1    3.6  3.7000000     0\n2201 59   7.1989949  1.2787152    1    3.7  3.8000000     0\n2202 59   7.1989949  1.2787152    1    3.8  4.0000000     0\n2203 59   7.1989949  1.2787152    1    4.0  4.1000000     0\n2204 59   7.1989949  1.2787152    1    4.1  4.2000000     0\n2205 59   7.1989949  1.2787152    1    4.2  4.3000000     0\n2206 59   7.1989949  1.2787152    1    4.3  4.4000000     0\n2207 59   7.1989949  1.2787152    1    4.4  4.5000000     0\n2208 59   7.1989949  1.2787152    1    4.5  4.7000000     0\n2209 59   7.1989949  1.2787152    1    4.7  4.8000000     0\n2210 59   7.1989949  1.2787152    1    4.8  4.9000000     0\n2211 59   7.1989949  1.2787152    1    4.9  5.0000000     0\n2212 59   7.1989949  1.2787152    1    5.0  7.1989949     0\n2213 60  14.3893393  3.6103565    0    0.0  0.1000000     0\n2214 60  14.3893393  3.6103565    0    0.1  0.2000000     0\n2215 60  14.3893393  3.6103565    0    0.2  0.3000000     0\n2216 60  14.3893393  3.6103565    0    0.3  0.4000000     0\n2217 60  14.3893393  3.6103565    0    0.4  0.6000000     0\n2218 60  14.3893393  3.6103565    0    0.6  0.7000000     0\n2219 60  14.3893393  3.6103565    0    0.7  0.8000000     0\n2220 60  14.3893393  3.6103565    0    0.8  0.9000000     0\n2221 60  14.3893393  3.6103565    0    0.9  1.0000000     0\n2222 60  14.3893393  3.6103565    0    1.0  1.1000000     0\n2223 60  14.3893393  3.6103565    0    1.1  1.2000000     0\n2224 60  14.3893393  3.6103565    0    1.2  1.3000000     0\n2225 60  14.3893393  3.6103565    0    1.3  1.5000000     0\n2226 60  14.3893393  3.6103565    0    1.5  1.6000000     0\n2227 60  14.3893393  3.6103565    0    1.6  1.7000000     0\n2228 60  14.3893393  3.6103565    0    1.7  1.8000000     0\n2229 60  14.3893393  3.6103565    0    1.8  1.9000000     0\n2230 60  14.3893393  3.6103565    0    1.9  2.1000000     0\n2231 60  14.3893393  3.6103565    0    2.1  2.2000000     0\n2232 60  14.3893393  3.6103565    0    2.2  2.3000000     0\n2233 60  14.3893393  3.6103565    0    2.3  2.4000000     0\n2234 60  14.3893393  3.6103565    0    2.4  2.5000000     0\n2235 60  14.3893393  3.6103565    0    2.5  2.6000000     0\n2236 60  14.3893393  3.6103565    0    2.6  2.7000000     0\n2237 60  14.3893393  3.6103565    0    2.7  2.8000000     0\n2238 60  14.3893393  3.6103565    0    2.8  2.9000000     0\n2239 60  14.3893393  3.6103565    0    2.9  3.0000000     0\n2240 60  14.3893393  3.6103565    0    3.0  3.1000000     0\n2241 60  14.3893393  3.6103565    0    3.1  3.2000000     0\n2242 60  14.3893393  3.6103565    0    3.2  3.3000000     0\n2243 60  14.3893393  3.6103565    0    3.3  3.4000000     0\n2244 60  14.3893393  3.6103565    0    3.4  3.5000000     0\n2245 60  14.3893393  3.6103565    0    3.5  3.6000000     0\n2246 60  14.3893393  3.6103565    0    3.6  3.7000000     0\n2247 60  14.3893393  3.6103565    1    3.7  3.8000000     0\n2248 60  14.3893393  3.6103565    1    3.8  4.0000000     0\n2249 60  14.3893393  3.6103565    1    4.0  4.1000000     0\n2250 60  14.3893393  3.6103565    1    4.1  4.2000000     0\n2251 60  14.3893393  3.6103565    1    4.2  4.3000000     0\n2252 60  14.3893393  3.6103565    1    4.3  4.4000000     0\n2253 60  14.3893393  3.6103565    1    4.4  4.5000000     0\n2254 60  14.3893393  3.6103565    1    4.5  4.7000000     0\n2255 60  14.3893393  3.6103565    1    4.7  4.8000000     0\n2256 60  14.3893393  3.6103565    1    4.8  4.9000000     0\n2257 60  14.3893393  3.6103565    1    4.9  5.0000000     0\n2258 60  14.3893393  3.6103565    1    5.0 14.3893393     1\n2259 61   4.1280639  1.0258926    0    0.0  0.1000000     0\n2260 61   4.1280639  1.0258926    0    0.1  0.2000000     0\n2261 61   4.1280639  1.0258926    0    0.2  0.3000000     0\n2262 61   4.1280639  1.0258926    0    0.3  0.4000000     0\n2263 61   4.1280639  1.0258926    0    0.4  0.6000000     0\n2264 61   4.1280639  1.0258926    0    0.6  0.7000000     0\n2265 61   4.1280639  1.0258926    0    0.7  0.8000000     0\n2266 61   4.1280639  1.0258926    0    0.8  0.9000000     0\n2267 61   4.1280639  1.0258926    0    0.9  1.0000000     0\n2268 61   4.1280639  1.0258926    0    1.0  1.1000000     0\n2269 61   4.1280639  1.0258926    1    1.1  1.2000000     0\n2270 61   4.1280639  1.0258926    1    1.2  1.3000000     0\n2271 61   4.1280639  1.0258926    1    1.3  1.5000000     0\n2272 61   4.1280639  1.0258926    1    1.5  1.6000000     0\n2273 61   4.1280639  1.0258926    1    1.6  1.7000000     0\n2274 61   4.1280639  1.0258926    1    1.7  1.8000000     0\n2275 61   4.1280639  1.0258926    1    1.8  1.9000000     0\n2276 61   4.1280639  1.0258926    1    1.9  2.1000000     0\n2277 61   4.1280639  1.0258926    1    2.1  2.2000000     0\n2278 61   4.1280639  1.0258926    1    2.2  2.3000000     0\n2279 61   4.1280639  1.0258926    1    2.3  2.4000000     0\n2280 61   4.1280639  1.0258926    1    2.4  2.5000000     0\n2281 61   4.1280639  1.0258926    1    2.5  2.6000000     0\n2282 61   4.1280639  1.0258926    1    2.6  2.7000000     0\n2283 61   4.1280639  1.0258926    1    2.7  2.8000000     0\n2284 61   4.1280639  1.0258926    1    2.8  2.9000000     0\n2285 61   4.1280639  1.0258926    1    2.9  3.0000000     0\n2286 61   4.1280639  1.0258926    1    3.0  3.1000000     0\n2287 61   4.1280639  1.0258926    1    3.1  3.2000000     0\n2288 61   4.1280639  1.0258926    1    3.2  3.3000000     0\n2289 61   4.1280639  1.0258926    1    3.3  3.4000000     0\n2290 61   4.1280639  1.0258926    1    3.4  3.5000000     0\n2291 61   4.1280639  1.0258926    1    3.5  3.6000000     0\n2292 61   4.1280639  1.0258926    1    3.6  3.7000000     0\n2293 61   4.1280639  1.0258926    1    3.7  3.8000000     0\n2294 61   4.1280639  1.0258926    1    3.8  4.0000000     0\n2295 61   4.1280639  1.0258926    1    4.0  4.1000000     0\n2296 61   4.1280639  1.0258926    1    4.1  4.1280639     1\n2297 62  14.8049278  2.0990544    0    0.0  0.1000000     0\n2298 62  14.8049278  2.0990544    0    0.1  0.2000000     0\n2299 62  14.8049278  2.0990544    0    0.2  0.3000000     0\n2300 62  14.8049278  2.0990544    0    0.3  0.4000000     0\n2301 62  14.8049278  2.0990544    0    0.4  0.6000000     0\n2302 62  14.8049278  2.0990544    0    0.6  0.7000000     0\n2303 62  14.8049278  2.0990544    0    0.7  0.8000000     0\n2304 62  14.8049278  2.0990544    0    0.8  0.9000000     0\n2305 62  14.8049278  2.0990544    0    0.9  1.0000000     0\n2306 62  14.8049278  2.0990544    0    1.0  1.1000000     0\n2307 62  14.8049278  2.0990544    0    1.1  1.2000000     0\n2308 62  14.8049278  2.0990544    0    1.2  1.3000000     0\n2309 62  14.8049278  2.0990544    0    1.3  1.5000000     0\n2310 62  14.8049278  2.0990544    0    1.5  1.6000000     0\n2311 62  14.8049278  2.0990544    0    1.6  1.7000000     0\n2312 62  14.8049278  2.0990544    0    1.7  1.8000000     0\n2313 62  14.8049278  2.0990544    0    1.8  1.9000000     0\n2314 62  14.8049278  2.0990544    0    1.9  2.1000000     0\n2315 62  14.8049278  2.0990544    1    2.1  2.2000000     0\n2316 62  14.8049278  2.0990544    1    2.2  2.3000000     0\n2317 62  14.8049278  2.0990544    1    2.3  2.4000000     0\n2318 62  14.8049278  2.0990544    1    2.4  2.5000000     0\n2319 62  14.8049278  2.0990544    1    2.5  2.6000000     0\n2320 62  14.8049278  2.0990544    1    2.6  2.7000000     0\n2321 62  14.8049278  2.0990544    1    2.7  2.8000000     0\n2322 62  14.8049278  2.0990544    1    2.8  2.9000000     0\n2323 62  14.8049278  2.0990544    1    2.9  3.0000000     0\n2324 62  14.8049278  2.0990544    1    3.0  3.1000000     0\n2325 62  14.8049278  2.0990544    1    3.1  3.2000000     0\n2326 62  14.8049278  2.0990544    1    3.2  3.3000000     0\n2327 62  14.8049278  2.0990544    1    3.3  3.4000000     0\n2328 62  14.8049278  2.0990544    1    3.4  3.5000000     0\n2329 62  14.8049278  2.0990544    1    3.5  3.6000000     0\n2330 62  14.8049278  2.0990544    1    3.6  3.7000000     0\n2331 62  14.8049278  2.0990544    1    3.7  3.8000000     0\n2332 62  14.8049278  2.0990544    1    3.8  4.0000000     0\n2333 62  14.8049278  2.0990544    1    4.0  4.1000000     0\n2334 62  14.8049278  2.0990544    1    4.1  4.2000000     0\n2335 62  14.8049278  2.0990544    1    4.2  4.3000000     0\n2336 62  14.8049278  2.0990544    1    4.3  4.4000000     0\n2337 62  14.8049278  2.0990544    1    4.4  4.5000000     0\n2338 62  14.8049278  2.0990544    1    4.5  4.7000000     0\n2339 62  14.8049278  2.0990544    1    4.7  4.8000000     0\n2340 62  14.8049278  2.0990544    1    4.8  4.9000000     0\n2341 62  14.8049278  2.0990544    1    4.9  5.0000000     0\n2342 62  14.8049278  2.0990544    1    5.0 14.8049278     0\n2343 63  26.7037666  2.9704966    0    0.0  0.1000000     0\n2344 63  26.7037666  2.9704966    0    0.1  0.2000000     0\n2345 63  26.7037666  2.9704966    0    0.2  0.3000000     0\n2346 63  26.7037666  2.9704966    0    0.3  0.4000000     0\n2347 63  26.7037666  2.9704966    0    0.4  0.6000000     0\n2348 63  26.7037666  2.9704966    0    0.6  0.7000000     0\n2349 63  26.7037666  2.9704966    0    0.7  0.8000000     0\n2350 63  26.7037666  2.9704966    0    0.8  0.9000000     0\n2351 63  26.7037666  2.9704966    0    0.9  1.0000000     0\n2352 63  26.7037666  2.9704966    0    1.0  1.1000000     0\n2353 63  26.7037666  2.9704966    0    1.1  1.2000000     0\n2354 63  26.7037666  2.9704966    0    1.2  1.3000000     0\n2355 63  26.7037666  2.9704966    0    1.3  1.5000000     0\n2356 63  26.7037666  2.9704966    0    1.5  1.6000000     0\n2357 63  26.7037666  2.9704966    0    1.6  1.7000000     0\n2358 63  26.7037666  2.9704966    0    1.7  1.8000000     0\n2359 63  26.7037666  2.9704966    0    1.8  1.9000000     0\n2360 63  26.7037666  2.9704966    0    1.9  2.1000000     0\n2361 63  26.7037666  2.9704966    0    2.1  2.2000000     0\n2362 63  26.7037666  2.9704966    0    2.2  2.3000000     0\n2363 63  26.7037666  2.9704966    0    2.3  2.4000000     0\n2364 63  26.7037666  2.9704966    0    2.4  2.5000000     0\n2365 63  26.7037666  2.9704966    0    2.5  2.6000000     0\n2366 63  26.7037666  2.9704966    0    2.6  2.7000000     0\n2367 63  26.7037666  2.9704966    0    2.7  2.8000000     0\n2368 63  26.7037666  2.9704966    0    2.8  2.9000000     0\n2369 63  26.7037666  2.9704966    0    2.9  3.0000000     0\n2370 63  26.7037666  2.9704966    1    3.0  3.1000000     0\n2371 63  26.7037666  2.9704966    1    3.1  3.2000000     0\n2372 63  26.7037666  2.9704966    1    3.2  3.3000000     0\n2373 63  26.7037666  2.9704966    1    3.3  3.4000000     0\n2374 63  26.7037666  2.9704966    1    3.4  3.5000000     0\n2375 63  26.7037666  2.9704966    1    3.5  3.6000000     0\n2376 63  26.7037666  2.9704966    1    3.6  3.7000000     0\n2377 63  26.7037666  2.9704966    1    3.7  3.8000000     0\n2378 63  26.7037666  2.9704966    1    3.8  4.0000000     0\n2379 63  26.7037666  2.9704966    1    4.0  4.1000000     0\n2380 63  26.7037666  2.9704966    1    4.1  4.2000000     0\n2381 63  26.7037666  2.9704966    1    4.2  4.3000000     0\n2382 63  26.7037666  2.9704966    1    4.3  4.4000000     0\n2383 63  26.7037666  2.9704966    1    4.4  4.5000000     0\n2384 63  26.7037666  2.9704966    1    4.5  4.7000000     0\n2385 63  26.7037666  2.9704966    1    4.7  4.8000000     0\n2386 63  26.7037666  2.9704966    1    4.8  4.9000000     0\n2387 63  26.7037666  2.9704966    1    4.9  5.0000000     0\n2388 63  26.7037666  2.9704966    1    5.0 26.7037666     1\n2389 64  22.4314391  3.3529812    0    0.0  0.1000000     0\n2390 64  22.4314391  3.3529812    0    0.1  0.2000000     0\n2391 64  22.4314391  3.3529812    0    0.2  0.3000000     0\n2392 64  22.4314391  3.3529812    0    0.3  0.4000000     0\n2393 64  22.4314391  3.3529812    0    0.4  0.6000000     0\n2394 64  22.4314391  3.3529812    0    0.6  0.7000000     0\n2395 64  22.4314391  3.3529812    0    0.7  0.8000000     0\n2396 64  22.4314391  3.3529812    0    0.8  0.9000000     0\n2397 64  22.4314391  3.3529812    0    0.9  1.0000000     0\n2398 64  22.4314391  3.3529812    0    1.0  1.1000000     0\n2399 64  22.4314391  3.3529812    0    1.1  1.2000000     0\n2400 64  22.4314391  3.3529812    0    1.2  1.3000000     0\n2401 64  22.4314391  3.3529812    0    1.3  1.5000000     0\n2402 64  22.4314391  3.3529812    0    1.5  1.6000000     0\n2403 64  22.4314391  3.3529812    0    1.6  1.7000000     0\n2404 64  22.4314391  3.3529812    0    1.7  1.8000000     0\n2405 64  22.4314391  3.3529812    0    1.8  1.9000000     0\n2406 64  22.4314391  3.3529812    0    1.9  2.1000000     0\n2407 64  22.4314391  3.3529812    0    2.1  2.2000000     0\n2408 64  22.4314391  3.3529812    0    2.2  2.3000000     0\n2409 64  22.4314391  3.3529812    0    2.3  2.4000000     0\n2410 64  22.4314391  3.3529812    0    2.4  2.5000000     0\n2411 64  22.4314391  3.3529812    0    2.5  2.6000000     0\n2412 64  22.4314391  3.3529812    0    2.6  2.7000000     0\n2413 64  22.4314391  3.3529812    0    2.7  2.8000000     0\n2414 64  22.4314391  3.3529812    0    2.8  2.9000000     0\n2415 64  22.4314391  3.3529812    0    2.9  3.0000000     0\n2416 64  22.4314391  3.3529812    0    3.0  3.1000000     0\n2417 64  22.4314391  3.3529812    0    3.1  3.2000000     0\n2418 64  22.4314391  3.3529812    0    3.2  3.3000000     0\n2419 64  22.4314391  3.3529812    0    3.3  3.4000000     0\n2420 64  22.4314391  3.3529812    1    3.4  3.5000000     0\n2421 64  22.4314391  3.3529812    1    3.5  3.6000000     0\n2422 64  22.4314391  3.3529812    1    3.6  3.7000000     0\n2423 64  22.4314391  3.3529812    1    3.7  3.8000000     0\n2424 64  22.4314391  3.3529812    1    3.8  4.0000000     0\n2425 64  22.4314391  3.3529812    1    4.0  4.1000000     0\n2426 64  22.4314391  3.3529812    1    4.1  4.2000000     0\n2427 64  22.4314391  3.3529812    1    4.2  4.3000000     0\n2428 64  22.4314391  3.3529812    1    4.3  4.4000000     0\n2429 64  22.4314391  3.3529812    1    4.4  4.5000000     0\n2430 64  22.4314391  3.3529812    1    4.5  4.7000000     0\n2431 64  22.4314391  3.3529812    1    4.7  4.8000000     0\n2432 64  22.4314391  3.3529812    1    4.8  4.9000000     0\n2433 64  22.4314391  3.3529812    1    4.9  5.0000000     0\n2434 64  22.4314391  3.3529812    1    5.0 22.4314391     1\n2435 65  22.9247932  3.7436561    0    0.0  0.1000000     0\n2436 65  22.9247932  3.7436561    0    0.1  0.2000000     0\n2437 65  22.9247932  3.7436561    0    0.2  0.3000000     0\n2438 65  22.9247932  3.7436561    0    0.3  0.4000000     0\n2439 65  22.9247932  3.7436561    0    0.4  0.6000000     0\n2440 65  22.9247932  3.7436561    0    0.6  0.7000000     0\n2441 65  22.9247932  3.7436561    0    0.7  0.8000000     0\n2442 65  22.9247932  3.7436561    0    0.8  0.9000000     0\n2443 65  22.9247932  3.7436561    0    0.9  1.0000000     0\n2444 65  22.9247932  3.7436561    0    1.0  1.1000000     0\n2445 65  22.9247932  3.7436561    0    1.1  1.2000000     0\n2446 65  22.9247932  3.7436561    0    1.2  1.3000000     0\n2447 65  22.9247932  3.7436561    0    1.3  1.5000000     0\n2448 65  22.9247932  3.7436561    0    1.5  1.6000000     0\n2449 65  22.9247932  3.7436561    0    1.6  1.7000000     0\n2450 65  22.9247932  3.7436561    0    1.7  1.8000000     0\n2451 65  22.9247932  3.7436561    0    1.8  1.9000000     0\n2452 65  22.9247932  3.7436561    0    1.9  2.1000000     0\n2453 65  22.9247932  3.7436561    0    2.1  2.2000000     0\n2454 65  22.9247932  3.7436561    0    2.2  2.3000000     0\n2455 65  22.9247932  3.7436561    0    2.3  2.4000000     0\n2456 65  22.9247932  3.7436561    0    2.4  2.5000000     0\n2457 65  22.9247932  3.7436561    0    2.5  2.6000000     0\n2458 65  22.9247932  3.7436561    0    2.6  2.7000000     0\n2459 65  22.9247932  3.7436561    0    2.7  2.8000000     0\n2460 65  22.9247932  3.7436561    0    2.8  2.9000000     0\n2461 65  22.9247932  3.7436561    0    2.9  3.0000000     0\n2462 65  22.9247932  3.7436561    0    3.0  3.1000000     0\n2463 65  22.9247932  3.7436561    0    3.1  3.2000000     0\n2464 65  22.9247932  3.7436561    0    3.2  3.3000000     0\n2465 65  22.9247932  3.7436561    0    3.3  3.4000000     0\n2466 65  22.9247932  3.7436561    0    3.4  3.5000000     0\n2467 65  22.9247932  3.7436561    0    3.5  3.6000000     0\n2468 65  22.9247932  3.7436561    0    3.6  3.7000000     0\n2469 65  22.9247932  3.7436561    0    3.7  3.8000000     0\n2470 65  22.9247932  3.7436561    1    3.8  4.0000000     0\n2471 65  22.9247932  3.7436561    1    4.0  4.1000000     0\n2472 65  22.9247932  3.7436561    1    4.1  4.2000000     0\n2473 65  22.9247932  3.7436561    1    4.2  4.3000000     0\n2474 65  22.9247932  3.7436561    1    4.3  4.4000000     0\n2475 65  22.9247932  3.7436561    1    4.4  4.5000000     0\n2476 65  22.9247932  3.7436561    1    4.5  4.7000000     0\n2477 65  22.9247932  3.7436561    1    4.7  4.8000000     0\n2478 65  22.9247932  3.7436561    1    4.8  4.9000000     0\n2479 65  22.9247932  3.7436561    1    4.9  5.0000000     0\n2480 65  22.9247932  3.7436561    1    5.0 22.9247932     1\n2481 66   4.3356888  2.3003494    0    0.0  0.1000000     0\n2482 66   4.3356888  2.3003494    0    0.1  0.2000000     0\n2483 66   4.3356888  2.3003494    0    0.2  0.3000000     0\n2484 66   4.3356888  2.3003494    0    0.3  0.4000000     0\n2485 66   4.3356888  2.3003494    0    0.4  0.6000000     0\n2486 66   4.3356888  2.3003494    0    0.6  0.7000000     0\n2487 66   4.3356888  2.3003494    0    0.7  0.8000000     0\n2488 66   4.3356888  2.3003494    0    0.8  0.9000000     0\n2489 66   4.3356888  2.3003494    0    0.9  1.0000000     0\n2490 66   4.3356888  2.3003494    0    1.0  1.1000000     0\n2491 66   4.3356888  2.3003494    0    1.1  1.2000000     0\n2492 66   4.3356888  2.3003494    0    1.2  1.3000000     0\n2493 66   4.3356888  2.3003494    0    1.3  1.5000000     0\n2494 66   4.3356888  2.3003494    0    1.5  1.6000000     0\n2495 66   4.3356888  2.3003494    0    1.6  1.7000000     0\n2496 66   4.3356888  2.3003494    0    1.7  1.8000000     0\n2497 66   4.3356888  2.3003494    0    1.8  1.9000000     0\n2498 66   4.3356888  2.3003494    0    1.9  2.1000000     0\n2499 66   4.3356888  2.3003494    0    2.1  2.2000000     0\n2500 66   4.3356888  2.3003494    0    2.2  2.3000000     0\n2501 66   4.3356888  2.3003494    0    2.3  2.4000000     0\n2502 66   4.3356888  2.3003494    1    2.4  2.5000000     0\n2503 66   4.3356888  2.3003494    1    2.5  2.6000000     0\n2504 66   4.3356888  2.3003494    1    2.6  2.7000000     0\n2505 66   4.3356888  2.3003494    1    2.7  2.8000000     0\n2506 66   4.3356888  2.3003494    1    2.8  2.9000000     0\n2507 66   4.3356888  2.3003494    1    2.9  3.0000000     0\n2508 66   4.3356888  2.3003494    1    3.0  3.1000000     0\n2509 66   4.3356888  2.3003494    1    3.1  3.2000000     0\n2510 66   4.3356888  2.3003494    1    3.2  3.3000000     0\n2511 66   4.3356888  2.3003494    1    3.3  3.4000000     0\n2512 66   4.3356888  2.3003494    1    3.4  3.5000000     0\n2513 66   4.3356888  2.3003494    1    3.5  3.6000000     0\n2514 66   4.3356888  2.3003494    1    3.6  3.7000000     0\n2515 66   4.3356888  2.3003494    1    3.7  3.8000000     0\n2516 66   4.3356888  2.3003494    1    3.8  4.0000000     0\n2517 66   4.3356888  2.3003494    1    4.0  4.1000000     0\n2518 66   4.3356888  2.3003494    1    4.1  4.2000000     0\n2519 66   4.3356888  2.3003494    1    4.2  4.3000000     0\n2520 66   4.3356888  2.3003494    1    4.3  4.3356888     1\n2521 67   2.6748870  2.3861106    0    0.0  0.1000000     0\n2522 67   2.6748870  2.3861106    0    0.1  0.2000000     0\n2523 67   2.6748870  2.3861106    0    0.2  0.3000000     0\n2524 67   2.6748870  2.3861106    0    0.3  0.4000000     0\n2525 67   2.6748870  2.3861106    0    0.4  0.6000000     0\n2526 67   2.6748870  2.3861106    0    0.6  0.7000000     0\n2527 67   2.6748870  2.3861106    0    0.7  0.8000000     0\n2528 67   2.6748870  2.3861106    0    0.8  0.9000000     0\n2529 67   2.6748870  2.3861106    0    0.9  1.0000000     0\n2530 67   2.6748870  2.3861106    0    1.0  1.1000000     0\n2531 67   2.6748870  2.3861106    0    1.1  1.2000000     0\n2532 67   2.6748870  2.3861106    0    1.2  1.3000000     0\n2533 67   2.6748870  2.3861106    0    1.3  1.5000000     0\n2534 67   2.6748870  2.3861106    0    1.5  1.6000000     0\n2535 67   2.6748870  2.3861106    0    1.6  1.7000000     0\n2536 67   2.6748870  2.3861106    0    1.7  1.8000000     0\n2537 67   2.6748870  2.3861106    0    1.8  1.9000000     0\n2538 67   2.6748870  2.3861106    0    1.9  2.1000000     0\n2539 67   2.6748870  2.3861106    0    2.1  2.2000000     0\n2540 67   2.6748870  2.3861106    0    2.2  2.3000000     0\n2541 67   2.6748870  2.3861106    0    2.3  2.4000000     0\n2542 67   2.6748870  2.3861106    1    2.4  2.5000000     0\n2543 67   2.6748870  2.3861106    1    2.5  2.6000000     0\n2544 67   2.6748870  2.3861106    1    2.6  2.6748870     1\n2545 68   9.1406551  0.6855411    0    0.0  0.1000000     0\n2546 68   9.1406551  0.6855411    0    0.1  0.2000000     0\n2547 68   9.1406551  0.6855411    0    0.2  0.3000000     0\n2548 68   9.1406551  0.6855411    0    0.3  0.4000000     0\n2549 68   9.1406551  0.6855411    0    0.4  0.6000000     0\n2550 68   9.1406551  0.6855411    0    0.6  0.7000000     0\n2551 68   9.1406551  0.6855411    1    0.7  0.8000000     0\n2552 68   9.1406551  0.6855411    1    0.8  0.9000000     0\n2553 68   9.1406551  0.6855411    1    0.9  1.0000000     0\n2554 68   9.1406551  0.6855411    1    1.0  1.1000000     0\n2555 68   9.1406551  0.6855411    1    1.1  1.2000000     0\n2556 68   9.1406551  0.6855411    1    1.2  1.3000000     0\n2557 68   9.1406551  0.6855411    1    1.3  1.5000000     0\n2558 68   9.1406551  0.6855411    1    1.5  1.6000000     0\n2559 68   9.1406551  0.6855411    1    1.6  1.7000000     0\n2560 68   9.1406551  0.6855411    1    1.7  1.8000000     0\n2561 68   9.1406551  0.6855411    1    1.8  1.9000000     0\n2562 68   9.1406551  0.6855411    1    1.9  2.1000000     0\n2563 68   9.1406551  0.6855411    1    2.1  2.2000000     0\n2564 68   9.1406551  0.6855411    1    2.2  2.3000000     0\n2565 68   9.1406551  0.6855411    1    2.3  2.4000000     0\n2566 68   9.1406551  0.6855411    1    2.4  2.5000000     0\n2567 68   9.1406551  0.6855411    1    2.5  2.6000000     0\n2568 68   9.1406551  0.6855411    1    2.6  2.7000000     0\n2569 68   9.1406551  0.6855411    1    2.7  2.8000000     0\n2570 68   9.1406551  0.6855411    1    2.8  2.9000000     0\n2571 68   9.1406551  0.6855411    1    2.9  3.0000000     0\n2572 68   9.1406551  0.6855411    1    3.0  3.1000000     0\n2573 68   9.1406551  0.6855411    1    3.1  3.2000000     0\n2574 68   9.1406551  0.6855411    1    3.2  3.3000000     0\n2575 68   9.1406551  0.6855411    1    3.3  3.4000000     0\n2576 68   9.1406551  0.6855411    1    3.4  3.5000000     0\n2577 68   9.1406551  0.6855411    1    3.5  3.6000000     0\n2578 68   9.1406551  0.6855411    1    3.6  3.7000000     0\n2579 68   9.1406551  0.6855411    1    3.7  3.8000000     0\n2580 68   9.1406551  0.6855411    1    3.8  4.0000000     0\n2581 68   9.1406551  0.6855411    1    4.0  4.1000000     0\n2582 68   9.1406551  0.6855411    1    4.1  4.2000000     0\n2583 68   9.1406551  0.6855411    1    4.2  4.3000000     0\n2584 68   9.1406551  0.6855411    1    4.3  4.4000000     0\n2585 68   9.1406551  0.6855411    1    4.4  4.5000000     0\n2586 68   9.1406551  0.6855411    1    4.5  4.7000000     0\n2587 68   9.1406551  0.6855411    1    4.7  4.8000000     0\n2588 68   9.1406551  0.6855411    1    4.8  4.9000000     0\n2589 68   9.1406551  0.6855411    1    4.9  5.0000000     0\n2590 68   9.1406551  0.6855411    1    5.0  9.1406551     1\n2591 69   2.2590738  1.1374839    0    0.0  0.1000000     0\n2592 69   2.2590738  1.1374839    0    0.1  0.2000000     0\n2593 69   2.2590738  1.1374839    0    0.2  0.3000000     0\n2594 69   2.2590738  1.1374839    0    0.3  0.4000000     0\n2595 69   2.2590738  1.1374839    0    0.4  0.6000000     0\n2596 69   2.2590738  1.1374839    0    0.6  0.7000000     0\n2597 69   2.2590738  1.1374839    0    0.7  0.8000000     0\n2598 69   2.2590738  1.1374839    0    0.8  0.9000000     0\n2599 69   2.2590738  1.1374839    0    0.9  1.0000000     0\n2600 69   2.2590738  1.1374839    0    1.0  1.1000000     0\n2601 69   2.2590738  1.1374839    0    1.1  1.2000000     0\n2602 69   2.2590738  1.1374839    1    1.2  1.3000000     0\n2603 69   2.2590738  1.1374839    1    1.3  1.5000000     0\n2604 69   2.2590738  1.1374839    1    1.5  1.6000000     0\n2605 69   2.2590738  1.1374839    1    1.6  1.7000000     0\n2606 69   2.2590738  1.1374839    1    1.7  1.8000000     0\n2607 69   2.2590738  1.1374839    1    1.8  1.9000000     0\n2608 69   2.2590738  1.1374839    1    1.9  2.1000000     0\n2609 69   2.2590738  1.1374839    1    2.1  2.2000000     0\n2610 69   2.2590738  1.1374839    1    2.2  2.2590738     0\n2611 70  16.5890005  3.4630240    0    0.0  0.1000000     0\n2612 70  16.5890005  3.4630240    0    0.1  0.2000000     0\n2613 70  16.5890005  3.4630240    0    0.2  0.3000000     0\n2614 70  16.5890005  3.4630240    0    0.3  0.4000000     0\n2615 70  16.5890005  3.4630240    0    0.4  0.6000000     0\n2616 70  16.5890005  3.4630240    0    0.6  0.7000000     0\n2617 70  16.5890005  3.4630240    0    0.7  0.8000000     0\n2618 70  16.5890005  3.4630240    0    0.8  0.9000000     0\n2619 70  16.5890005  3.4630240    0    0.9  1.0000000     0\n2620 70  16.5890005  3.4630240    0    1.0  1.1000000     0\n2621 70  16.5890005  3.4630240    0    1.1  1.2000000     0\n2622 70  16.5890005  3.4630240    0    1.2  1.3000000     0\n2623 70  16.5890005  3.4630240    0    1.3  1.5000000     0\n2624 70  16.5890005  3.4630240    0    1.5  1.6000000     0\n2625 70  16.5890005  3.4630240    0    1.6  1.7000000     0\n2626 70  16.5890005  3.4630240    0    1.7  1.8000000     0\n2627 70  16.5890005  3.4630240    0    1.8  1.9000000     0\n2628 70  16.5890005  3.4630240    0    1.9  2.1000000     0\n2629 70  16.5890005  3.4630240    0    2.1  2.2000000     0\n2630 70  16.5890005  3.4630240    0    2.2  2.3000000     0\n2631 70  16.5890005  3.4630240    0    2.3  2.4000000     0\n2632 70  16.5890005  3.4630240    0    2.4  2.5000000     0\n2633 70  16.5890005  3.4630240    0    2.5  2.6000000     0\n2634 70  16.5890005  3.4630240    0    2.6  2.7000000     0\n2635 70  16.5890005  3.4630240    0    2.7  2.8000000     0\n2636 70  16.5890005  3.4630240    0    2.8  2.9000000     0\n2637 70  16.5890005  3.4630240    0    2.9  3.0000000     0\n2638 70  16.5890005  3.4630240    0    3.0  3.1000000     0\n2639 70  16.5890005  3.4630240    0    3.1  3.2000000     0\n2640 70  16.5890005  3.4630240    0    3.2  3.3000000     0\n2641 70  16.5890005  3.4630240    0    3.3  3.4000000     0\n2642 70  16.5890005  3.4630240    0    3.4  3.5000000     0\n2643 70  16.5890005  3.4630240    1    3.5  3.6000000     0\n2644 70  16.5890005  3.4630240    1    3.6  3.7000000     0\n2645 70  16.5890005  3.4630240    1    3.7  3.8000000     0\n2646 70  16.5890005  3.4630240    1    3.8  4.0000000     0\n2647 70  16.5890005  3.4630240    1    4.0  4.1000000     0\n2648 70  16.5890005  3.4630240    1    4.1  4.2000000     0\n2649 70  16.5890005  3.4630240    1    4.2  4.3000000     0\n2650 70  16.5890005  3.4630240    1    4.3  4.4000000     0\n2651 70  16.5890005  3.4630240    1    4.4  4.5000000     0\n2652 70  16.5890005  3.4630240    1    4.5  4.7000000     0\n2653 70  16.5890005  3.4630240    1    4.7  4.8000000     0\n2654 70  16.5890005  3.4630240    1    4.8  4.9000000     0\n2655 70  16.5890005  3.4630240    1    4.9  5.0000000     0\n2656 70  16.5890005  3.4630240    1    5.0 16.5890005     1\n2657 71   0.9371428  2.9454511    0    0.0  0.1000000     0\n2658 71   0.9371428  2.9454511    0    0.1  0.2000000     0\n2659 71   0.9371428  2.9454511    0    0.2  0.3000000     0\n2660 71   0.9371428  2.9454511    0    0.3  0.4000000     0\n2661 71   0.9371428  2.9454511    0    0.4  0.6000000     0\n2662 71   0.9371428  2.9454511    0    0.6  0.7000000     0\n2663 71   0.9371428  2.9454511    0    0.7  0.8000000     0\n2664 71   0.9371428  2.9454511    0    0.8  0.9000000     0\n2665 71   0.9371428  2.9454511    0    0.9  0.9371428     1\n2666 72  21.6574123  4.1437537    0    0.0  0.1000000     0\n2667 72  21.6574123  4.1437537    0    0.1  0.2000000     0\n2668 72  21.6574123  4.1437537    0    0.2  0.3000000     0\n2669 72  21.6574123  4.1437537    0    0.3  0.4000000     0\n2670 72  21.6574123  4.1437537    0    0.4  0.6000000     0\n2671 72  21.6574123  4.1437537    0    0.6  0.7000000     0\n2672 72  21.6574123  4.1437537    0    0.7  0.8000000     0\n2673 72  21.6574123  4.1437537    0    0.8  0.9000000     0\n2674 72  21.6574123  4.1437537    0    0.9  1.0000000     0\n2675 72  21.6574123  4.1437537    0    1.0  1.1000000     0\n2676 72  21.6574123  4.1437537    0    1.1  1.2000000     0\n2677 72  21.6574123  4.1437537    0    1.2  1.3000000     0\n2678 72  21.6574123  4.1437537    0    1.3  1.5000000     0\n2679 72  21.6574123  4.1437537    0    1.5  1.6000000     0\n2680 72  21.6574123  4.1437537    0    1.6  1.7000000     0\n2681 72  21.6574123  4.1437537    0    1.7  1.8000000     0\n2682 72  21.6574123  4.1437537    0    1.8  1.9000000     0\n2683 72  21.6574123  4.1437537    0    1.9  2.1000000     0\n2684 72  21.6574123  4.1437537    0    2.1  2.2000000     0\n2685 72  21.6574123  4.1437537    0    2.2  2.3000000     0\n2686 72  21.6574123  4.1437537    0    2.3  2.4000000     0\n2687 72  21.6574123  4.1437537    0    2.4  2.5000000     0\n2688 72  21.6574123  4.1437537    0    2.5  2.6000000     0\n2689 72  21.6574123  4.1437537    0    2.6  2.7000000     0\n2690 72  21.6574123  4.1437537    0    2.7  2.8000000     0\n2691 72  21.6574123  4.1437537    0    2.8  2.9000000     0\n2692 72  21.6574123  4.1437537    0    2.9  3.0000000     0\n2693 72  21.6574123  4.1437537    0    3.0  3.1000000     0\n2694 72  21.6574123  4.1437537    0    3.1  3.2000000     0\n2695 72  21.6574123  4.1437537    0    3.2  3.3000000     0\n2696 72  21.6574123  4.1437537    0    3.3  3.4000000     0\n2697 72  21.6574123  4.1437537    0    3.4  3.5000000     0\n2698 72  21.6574123  4.1437537    0    3.5  3.6000000     0\n2699 72  21.6574123  4.1437537    0    3.6  3.7000000     0\n2700 72  21.6574123  4.1437537    0    3.7  3.8000000     0\n2701 72  21.6574123  4.1437537    0    3.8  4.0000000     0\n2702 72  21.6574123  4.1437537    0    4.0  4.1000000     0\n2703 72  21.6574123  4.1437537    0    4.1  4.2000000     0\n2704 72  21.6574123  4.1437537    1    4.2  4.3000000     0\n2705 72  21.6574123  4.1437537    1    4.3  4.4000000     0\n2706 72  21.6574123  4.1437537    1    4.4  4.5000000     0\n2707 72  21.6574123  4.1437537    1    4.5  4.7000000     0\n2708 72  21.6574123  4.1437537    1    4.7  4.8000000     0\n2709 72  21.6574123  4.1437537    1    4.8  4.9000000     0\n2710 72  21.6574123  4.1437537    1    4.9  5.0000000     0\n2711 72  21.6574123  4.1437537    1    5.0 21.6574123     1\n2712 73  42.7893256  3.5308109    0    0.0  0.1000000     0\n2713 73  42.7893256  3.5308109    0    0.1  0.2000000     0\n2714 73  42.7893256  3.5308109    0    0.2  0.3000000     0\n2715 73  42.7893256  3.5308109    0    0.3  0.4000000     0\n2716 73  42.7893256  3.5308109    0    0.4  0.6000000     0\n2717 73  42.7893256  3.5308109    0    0.6  0.7000000     0\n2718 73  42.7893256  3.5308109    0    0.7  0.8000000     0\n2719 73  42.7893256  3.5308109    0    0.8  0.9000000     0\n2720 73  42.7893256  3.5308109    0    0.9  1.0000000     0\n2721 73  42.7893256  3.5308109    0    1.0  1.1000000     0\n2722 73  42.7893256  3.5308109    0    1.1  1.2000000     0\n2723 73  42.7893256  3.5308109    0    1.2  1.3000000     0\n2724 73  42.7893256  3.5308109    0    1.3  1.5000000     0\n2725 73  42.7893256  3.5308109    0    1.5  1.6000000     0\n2726 73  42.7893256  3.5308109    0    1.6  1.7000000     0\n2727 73  42.7893256  3.5308109    0    1.7  1.8000000     0\n2728 73  42.7893256  3.5308109    0    1.8  1.9000000     0\n2729 73  42.7893256  3.5308109    0    1.9  2.1000000     0\n2730 73  42.7893256  3.5308109    0    2.1  2.2000000     0\n2731 73  42.7893256  3.5308109    0    2.2  2.3000000     0\n2732 73  42.7893256  3.5308109    0    2.3  2.4000000     0\n2733 73  42.7893256  3.5308109    0    2.4  2.5000000     0\n2734 73  42.7893256  3.5308109    0    2.5  2.6000000     0\n2735 73  42.7893256  3.5308109    0    2.6  2.7000000     0\n2736 73  42.7893256  3.5308109    0    2.7  2.8000000     0\n2737 73  42.7893256  3.5308109    0    2.8  2.9000000     0\n2738 73  42.7893256  3.5308109    0    2.9  3.0000000     0\n2739 73  42.7893256  3.5308109    0    3.0  3.1000000     0\n2740 73  42.7893256  3.5308109    0    3.1  3.2000000     0\n2741 73  42.7893256  3.5308109    0    3.2  3.3000000     0\n2742 73  42.7893256  3.5308109    0    3.3  3.4000000     0\n2743 73  42.7893256  3.5308109    0    3.4  3.5000000     0\n2744 73  42.7893256  3.5308109    0    3.5  3.6000000     0\n2745 73  42.7893256  3.5308109    1    3.6  3.7000000     0\n2746 73  42.7893256  3.5308109    1    3.7  3.8000000     0\n2747 73  42.7893256  3.5308109    1    3.8  4.0000000     0\n2748 73  42.7893256  3.5308109    1    4.0  4.1000000     0\n2749 73  42.7893256  3.5308109    1    4.1  4.2000000     0\n2750 73  42.7893256  3.5308109    1    4.2  4.3000000     0\n2751 73  42.7893256  3.5308109    1    4.3  4.4000000     0\n2752 73  42.7893256  3.5308109    1    4.4  4.5000000     0\n2753 73  42.7893256  3.5308109    1    4.5  4.7000000     0\n2754 73  42.7893256  3.5308109    1    4.7  4.8000000     0\n2755 73  42.7893256  3.5308109    1    4.8  4.9000000     0\n2756 73  42.7893256  3.5308109    1    4.9  5.0000000     0\n2757 73  42.7893256  3.5308109    1    5.0 42.7893256     1\n2758 74   1.3320358  3.2453337    0    0.0  0.1000000     0\n2759 74   1.3320358  3.2453337    0    0.1  0.2000000     0\n2760 74   1.3320358  3.2453337    0    0.2  0.3000000     0\n2761 74   1.3320358  3.2453337    0    0.3  0.4000000     0\n2762 74   1.3320358  3.2453337    0    0.4  0.6000000     0\n2763 74   1.3320358  3.2453337    0    0.6  0.7000000     0\n2764 74   1.3320358  3.2453337    0    0.7  0.8000000     0\n2765 74   1.3320358  3.2453337    0    0.8  0.9000000     0\n2766 74   1.3320358  3.2453337    0    0.9  1.0000000     0\n2767 74   1.3320358  3.2453337    0    1.0  1.1000000     0\n2768 74   1.3320358  3.2453337    0    1.1  1.2000000     0\n2769 74   1.3320358  3.2453337    0    1.2  1.3000000     0\n2770 74   1.3320358  3.2453337    0    1.3  1.3320358     0\n2771 75  19.0207952  0.1388274    0    0.0  0.1000000     0\n2772 75  19.0207952  0.1388274    0    0.1  0.2000000     0\n2773 75  19.0207952  0.1388274    1    0.2  0.3000000     0\n2774 75  19.0207952  0.1388274    1    0.3  0.4000000     0\n2775 75  19.0207952  0.1388274    1    0.4  0.6000000     0\n2776 75  19.0207952  0.1388274    1    0.6  0.7000000     0\n2777 75  19.0207952  0.1388274    1    0.7  0.8000000     0\n2778 75  19.0207952  0.1388274    1    0.8  0.9000000     0\n2779 75  19.0207952  0.1388274    1    0.9  1.0000000     0\n2780 75  19.0207952  0.1388274    1    1.0  1.1000000     0\n2781 75  19.0207952  0.1388274    1    1.1  1.2000000     0\n2782 75  19.0207952  0.1388274    1    1.2  1.3000000     0\n2783 75  19.0207952  0.1388274    1    1.3  1.5000000     0\n2784 75  19.0207952  0.1388274    1    1.5  1.6000000     0\n2785 75  19.0207952  0.1388274    1    1.6  1.7000000     0\n2786 75  19.0207952  0.1388274    1    1.7  1.8000000     0\n2787 75  19.0207952  0.1388274    1    1.8  1.9000000     0\n2788 75  19.0207952  0.1388274    1    1.9  2.1000000     0\n2789 75  19.0207952  0.1388274    1    2.1  2.2000000     0\n2790 75  19.0207952  0.1388274    1    2.2  2.3000000     0\n2791 75  19.0207952  0.1388274    1    2.3  2.4000000     0\n2792 75  19.0207952  0.1388274    1    2.4  2.5000000     0\n2793 75  19.0207952  0.1388274    1    2.5  2.6000000     0\n2794 75  19.0207952  0.1388274    1    2.6  2.7000000     0\n2795 75  19.0207952  0.1388274    1    2.7  2.8000000     0\n2796 75  19.0207952  0.1388274    1    2.8  2.9000000     0\n2797 75  19.0207952  0.1388274    1    2.9  3.0000000     0\n2798 75  19.0207952  0.1388274    1    3.0  3.1000000     0\n2799 75  19.0207952  0.1388274    1    3.1  3.2000000     0\n2800 75  19.0207952  0.1388274    1    3.2  3.3000000     0\n2801 75  19.0207952  0.1388274    1    3.3  3.4000000     0\n2802 75  19.0207952  0.1388274    1    3.4  3.5000000     0\n2803 75  19.0207952  0.1388274    1    3.5  3.6000000     0\n2804 75  19.0207952  0.1388274    1    3.6  3.7000000     0\n2805 75  19.0207952  0.1388274    1    3.7  3.8000000     0\n2806 75  19.0207952  0.1388274    1    3.8  4.0000000     0\n2807 75  19.0207952  0.1388274    1    4.0  4.1000000     0\n2808 75  19.0207952  0.1388274    1    4.1  4.2000000     0\n2809 75  19.0207952  0.1388274    1    4.2  4.3000000     0\n2810 75  19.0207952  0.1388274    1    4.3  4.4000000     0\n2811 75  19.0207952  0.1388274    1    4.4  4.5000000     0\n2812 75  19.0207952  0.1388274    1    4.5  4.7000000     0\n2813 75  19.0207952  0.1388274    1    4.7  4.8000000     0\n2814 75  19.0207952  0.1388274    1    4.8  4.9000000     0\n2815 75  19.0207952  0.1388274    1    4.9  5.0000000     0\n2816 75  19.0207952  0.1388274    1    5.0 19.0207952     1\n2817 76  20.7171370  3.2244827    0    0.0  0.1000000     0\n2818 76  20.7171370  3.2244827    0    0.1  0.2000000     0\n2819 76  20.7171370  3.2244827    0    0.2  0.3000000     0\n2820 76  20.7171370  3.2244827    0    0.3  0.4000000     0\n2821 76  20.7171370  3.2244827    0    0.4  0.6000000     0\n2822 76  20.7171370  3.2244827    0    0.6  0.7000000     0\n2823 76  20.7171370  3.2244827    0    0.7  0.8000000     0\n2824 76  20.7171370  3.2244827    0    0.8  0.9000000     0\n2825 76  20.7171370  3.2244827    0    0.9  1.0000000     0\n2826 76  20.7171370  3.2244827    0    1.0  1.1000000     0\n2827 76  20.7171370  3.2244827    0    1.1  1.2000000     0\n2828 76  20.7171370  3.2244827    0    1.2  1.3000000     0\n2829 76  20.7171370  3.2244827    0    1.3  1.5000000     0\n2830 76  20.7171370  3.2244827    0    1.5  1.6000000     0\n2831 76  20.7171370  3.2244827    0    1.6  1.7000000     0\n2832 76  20.7171370  3.2244827    0    1.7  1.8000000     0\n2833 76  20.7171370  3.2244827    0    1.8  1.9000000     0\n2834 76  20.7171370  3.2244827    0    1.9  2.1000000     0\n2835 76  20.7171370  3.2244827    0    2.1  2.2000000     0\n2836 76  20.7171370  3.2244827    0    2.2  2.3000000     0\n2837 76  20.7171370  3.2244827    0    2.3  2.4000000     0\n2838 76  20.7171370  3.2244827    0    2.4  2.5000000     0\n2839 76  20.7171370  3.2244827    0    2.5  2.6000000     0\n2840 76  20.7171370  3.2244827    0    2.6  2.7000000     0\n2841 76  20.7171370  3.2244827    0    2.7  2.8000000     0\n2842 76  20.7171370  3.2244827    0    2.8  2.9000000     0\n2843 76  20.7171370  3.2244827    0    2.9  3.0000000     0\n2844 76  20.7171370  3.2244827    0    3.0  3.1000000     0\n2845 76  20.7171370  3.2244827    0    3.1  3.2000000     0\n2846 76  20.7171370  3.2244827    0    3.2  3.3000000     0\n2847 76  20.7171370  3.2244827    1    3.3  3.4000000     0\n2848 76  20.7171370  3.2244827    1    3.4  3.5000000     0\n2849 76  20.7171370  3.2244827    1    3.5  3.6000000     0\n2850 76  20.7171370  3.2244827    1    3.6  3.7000000     0\n2851 76  20.7171370  3.2244827    1    3.7  3.8000000     0\n2852 76  20.7171370  3.2244827    1    3.8  4.0000000     0\n2853 76  20.7171370  3.2244827    1    4.0  4.1000000     0\n2854 76  20.7171370  3.2244827    1    4.1  4.2000000     0\n2855 76  20.7171370  3.2244827    1    4.2  4.3000000     0\n2856 76  20.7171370  3.2244827    1    4.3  4.4000000     0\n2857 76  20.7171370  3.2244827    1    4.4  4.5000000     0\n2858 76  20.7171370  3.2244827    1    4.5  4.7000000     0\n2859 76  20.7171370  3.2244827    1    4.7  4.8000000     0\n2860 76  20.7171370  3.2244827    1    4.8  4.9000000     0\n2861 76  20.7171370  3.2244827    1    4.9  5.0000000     0\n2862 76  20.7171370  3.2244827    1    5.0 20.7171370     0\n2863 77   6.9702253  3.8091507    0    0.0  0.1000000     0\n2864 77   6.9702253  3.8091507    0    0.1  0.2000000     0\n2865 77   6.9702253  3.8091507    0    0.2  0.3000000     0\n2866 77   6.9702253  3.8091507    0    0.3  0.4000000     0\n2867 77   6.9702253  3.8091507    0    0.4  0.6000000     0\n2868 77   6.9702253  3.8091507    0    0.6  0.7000000     0\n2869 77   6.9702253  3.8091507    0    0.7  0.8000000     0\n2870 77   6.9702253  3.8091507    0    0.8  0.9000000     0\n2871 77   6.9702253  3.8091507    0    0.9  1.0000000     0\n2872 77   6.9702253  3.8091507    0    1.0  1.1000000     0\n2873 77   6.9702253  3.8091507    0    1.1  1.2000000     0\n2874 77   6.9702253  3.8091507    0    1.2  1.3000000     0\n2875 77   6.9702253  3.8091507    0    1.3  1.5000000     0\n2876 77   6.9702253  3.8091507    0    1.5  1.6000000     0\n2877 77   6.9702253  3.8091507    0    1.6  1.7000000     0\n2878 77   6.9702253  3.8091507    0    1.7  1.8000000     0\n2879 77   6.9702253  3.8091507    0    1.8  1.9000000     0\n2880 77   6.9702253  3.8091507    0    1.9  2.1000000     0\n2881 77   6.9702253  3.8091507    0    2.1  2.2000000     0\n2882 77   6.9702253  3.8091507    0    2.2  2.3000000     0\n2883 77   6.9702253  3.8091507    0    2.3  2.4000000     0\n2884 77   6.9702253  3.8091507    0    2.4  2.5000000     0\n2885 77   6.9702253  3.8091507    0    2.5  2.6000000     0\n2886 77   6.9702253  3.8091507    0    2.6  2.7000000     0\n2887 77   6.9702253  3.8091507    0    2.7  2.8000000     0\n2888 77   6.9702253  3.8091507    0    2.8  2.9000000     0\n2889 77   6.9702253  3.8091507    0    2.9  3.0000000     0\n2890 77   6.9702253  3.8091507    0    3.0  3.1000000     0\n2891 77   6.9702253  3.8091507    0    3.1  3.2000000     0\n2892 77   6.9702253  3.8091507    0    3.2  3.3000000     0\n2893 77   6.9702253  3.8091507    0    3.3  3.4000000     0\n2894 77   6.9702253  3.8091507    0    3.4  3.5000000     0\n2895 77   6.9702253  3.8091507    0    3.5  3.6000000     0\n2896 77   6.9702253  3.8091507    0    3.6  3.7000000     0\n2897 77   6.9702253  3.8091507    0    3.7  3.8000000     0\n2898 77   6.9702253  3.8091507    0    3.8  4.0000000     0\n2899 77   6.9702253  3.8091507    1    4.0  4.1000000     0\n2900 77   6.9702253  3.8091507    1    4.1  4.2000000     0\n2901 77   6.9702253  3.8091507    1    4.2  4.3000000     0\n2902 77   6.9702253  3.8091507    1    4.3  4.4000000     0\n2903 77   6.9702253  3.8091507    1    4.4  4.5000000     0\n2904 77   6.9702253  3.8091507    1    4.5  4.7000000     0\n2905 77   6.9702253  3.8091507    1    4.7  4.8000000     0\n2906 77   6.9702253  3.8091507    1    4.8  4.9000000     0\n2907 77   6.9702253  3.8091507    1    4.9  5.0000000     0\n2908 77   6.9702253  3.8091507    1    5.0  6.9702253     0\n2909 78   9.8038954  2.8123142    0    0.0  0.1000000     0\n2910 78   9.8038954  2.8123142    0    0.1  0.2000000     0\n2911 78   9.8038954  2.8123142    0    0.2  0.3000000     0\n2912 78   9.8038954  2.8123142    0    0.3  0.4000000     0\n2913 78   9.8038954  2.8123142    0    0.4  0.6000000     0\n2914 78   9.8038954  2.8123142    0    0.6  0.7000000     0\n2915 78   9.8038954  2.8123142    0    0.7  0.8000000     0\n2916 78   9.8038954  2.8123142    0    0.8  0.9000000     0\n2917 78   9.8038954  2.8123142    0    0.9  1.0000000     0\n2918 78   9.8038954  2.8123142    0    1.0  1.1000000     0\n2919 78   9.8038954  2.8123142    0    1.1  1.2000000     0\n2920 78   9.8038954  2.8123142    0    1.2  1.3000000     0\n2921 78   9.8038954  2.8123142    0    1.3  1.5000000     0\n2922 78   9.8038954  2.8123142    0    1.5  1.6000000     0\n2923 78   9.8038954  2.8123142    0    1.6  1.7000000     0\n2924 78   9.8038954  2.8123142    0    1.7  1.8000000     0\n2925 78   9.8038954  2.8123142    0    1.8  1.9000000     0\n2926 78   9.8038954  2.8123142    0    1.9  2.1000000     0\n2927 78   9.8038954  2.8123142    0    2.1  2.2000000     0\n2928 78   9.8038954  2.8123142    0    2.2  2.3000000     0\n2929 78   9.8038954  2.8123142    0    2.3  2.4000000     0\n2930 78   9.8038954  2.8123142    0    2.4  2.5000000     0\n2931 78   9.8038954  2.8123142    0    2.5  2.6000000     0\n2932 78   9.8038954  2.8123142    0    2.6  2.7000000     0\n2933 78   9.8038954  2.8123142    0    2.7  2.8000000     0\n2934 78   9.8038954  2.8123142    0    2.8  2.9000000     0\n2935 78   9.8038954  2.8123142    1    2.9  3.0000000     0\n2936 78   9.8038954  2.8123142    1    3.0  3.1000000     0\n2937 78   9.8038954  2.8123142    1    3.1  3.2000000     0\n2938 78   9.8038954  2.8123142    1    3.2  3.3000000     0\n2939 78   9.8038954  2.8123142    1    3.3  3.4000000     0\n2940 78   9.8038954  2.8123142    1    3.4  3.5000000     0\n2941 78   9.8038954  2.8123142    1    3.5  3.6000000     0\n2942 78   9.8038954  2.8123142    1    3.6  3.7000000     0\n2943 78   9.8038954  2.8123142    1    3.7  3.8000000     0\n2944 78   9.8038954  2.8123142    1    3.8  4.0000000     0\n2945 78   9.8038954  2.8123142    1    4.0  4.1000000     0\n2946 78   9.8038954  2.8123142    1    4.1  4.2000000     0\n2947 78   9.8038954  2.8123142    1    4.2  4.3000000     0\n2948 78   9.8038954  2.8123142    1    4.3  4.4000000     0\n2949 78   9.8038954  2.8123142    1    4.4  4.5000000     0\n2950 78   9.8038954  2.8123142    1    4.5  4.7000000     0\n2951 78   9.8038954  2.8123142    1    4.7  4.8000000     0\n2952 78   9.8038954  2.8123142    1    4.8  4.9000000     0\n2953 78   9.8038954  2.8123142    1    4.9  5.0000000     0\n2954 78   9.8038954  2.8123142    1    5.0  9.8038954     1\n2955 79   6.8470284  3.2531280    0    0.0  0.1000000     0\n2956 79   6.8470284  3.2531280    0    0.1  0.2000000     0\n2957 79   6.8470284  3.2531280    0    0.2  0.3000000     0\n2958 79   6.8470284  3.2531280    0    0.3  0.4000000     0\n2959 79   6.8470284  3.2531280    0    0.4  0.6000000     0\n2960 79   6.8470284  3.2531280    0    0.6  0.7000000     0\n2961 79   6.8470284  3.2531280    0    0.7  0.8000000     0\n2962 79   6.8470284  3.2531280    0    0.8  0.9000000     0\n2963 79   6.8470284  3.2531280    0    0.9  1.0000000     0\n2964 79   6.8470284  3.2531280    0    1.0  1.1000000     0\n2965 79   6.8470284  3.2531280    0    1.1  1.2000000     0\n2966 79   6.8470284  3.2531280    0    1.2  1.3000000     0\n2967 79   6.8470284  3.2531280    0    1.3  1.5000000     0\n2968 79   6.8470284  3.2531280    0    1.5  1.6000000     0\n2969 79   6.8470284  3.2531280    0    1.6  1.7000000     0\n2970 79   6.8470284  3.2531280    0    1.7  1.8000000     0\n2971 79   6.8470284  3.2531280    0    1.8  1.9000000     0\n2972 79   6.8470284  3.2531280    0    1.9  2.1000000     0\n2973 79   6.8470284  3.2531280    0    2.1  2.2000000     0\n2974 79   6.8470284  3.2531280    0    2.2  2.3000000     0\n2975 79   6.8470284  3.2531280    0    2.3  2.4000000     0\n2976 79   6.8470284  3.2531280    0    2.4  2.5000000     0\n2977 79   6.8470284  3.2531280    0    2.5  2.6000000     0\n2978 79   6.8470284  3.2531280    0    2.6  2.7000000     0\n2979 79   6.8470284  3.2531280    0    2.7  2.8000000     0\n2980 79   6.8470284  3.2531280    0    2.8  2.9000000     0\n2981 79   6.8470284  3.2531280    0    2.9  3.0000000     0\n2982 79   6.8470284  3.2531280    0    3.0  3.1000000     0\n2983 79   6.8470284  3.2531280    0    3.1  3.2000000     0\n2984 79   6.8470284  3.2531280    0    3.2  3.3000000     0\n2985 79   6.8470284  3.2531280    1    3.3  3.4000000     0\n2986 79   6.8470284  3.2531280    1    3.4  3.5000000     0\n2987 79   6.8470284  3.2531280    1    3.5  3.6000000     0\n2988 79   6.8470284  3.2531280    1    3.6  3.7000000     0\n2989 79   6.8470284  3.2531280    1    3.7  3.8000000     0\n2990 79   6.8470284  3.2531280    1    3.8  4.0000000     0\n2991 79   6.8470284  3.2531280    1    4.0  4.1000000     0\n2992 79   6.8470284  3.2531280    1    4.1  4.2000000     0\n2993 79   6.8470284  3.2531280    1    4.2  4.3000000     0\n2994 79   6.8470284  3.2531280    1    4.3  4.4000000     0\n2995 79   6.8470284  3.2531280    1    4.4  4.5000000     0\n2996 79   6.8470284  3.2531280    1    4.5  4.7000000     0\n2997 79   6.8470284  3.2531280    1    4.7  4.8000000     0\n2998 79   6.8470284  3.2531280    1    4.8  4.9000000     0\n2999 79   6.8470284  3.2531280    1    4.9  5.0000000     0\n3000 79   6.8470284  3.2531280    1    5.0  6.8470284     0\n3001 80  17.2250425  4.0088214    0    0.0  0.1000000     0\n3002 80  17.2250425  4.0088214    0    0.1  0.2000000     0\n3003 80  17.2250425  4.0088214    0    0.2  0.3000000     0\n3004 80  17.2250425  4.0088214    0    0.3  0.4000000     0\n3005 80  17.2250425  4.0088214    0    0.4  0.6000000     0\n3006 80  17.2250425  4.0088214    0    0.6  0.7000000     0\n3007 80  17.2250425  4.0088214    0    0.7  0.8000000     0\n3008 80  17.2250425  4.0088214    0    0.8  0.9000000     0\n3009 80  17.2250425  4.0088214    0    0.9  1.0000000     0\n3010 80  17.2250425  4.0088214    0    1.0  1.1000000     0\n3011 80  17.2250425  4.0088214    0    1.1  1.2000000     0\n3012 80  17.2250425  4.0088214    0    1.2  1.3000000     0\n3013 80  17.2250425  4.0088214    0    1.3  1.5000000     0\n3014 80  17.2250425  4.0088214    0    1.5  1.6000000     0\n3015 80  17.2250425  4.0088214    0    1.6  1.7000000     0\n3016 80  17.2250425  4.0088214    0    1.7  1.8000000     0\n3017 80  17.2250425  4.0088214    0    1.8  1.9000000     0\n3018 80  17.2250425  4.0088214    0    1.9  2.1000000     0\n3019 80  17.2250425  4.0088214    0    2.1  2.2000000     0\n3020 80  17.2250425  4.0088214    0    2.2  2.3000000     0\n3021 80  17.2250425  4.0088214    0    2.3  2.4000000     0\n3022 80  17.2250425  4.0088214    0    2.4  2.5000000     0\n3023 80  17.2250425  4.0088214    0    2.5  2.6000000     0\n3024 80  17.2250425  4.0088214    0    2.6  2.7000000     0\n3025 80  17.2250425  4.0088214    0    2.7  2.8000000     0\n3026 80  17.2250425  4.0088214    0    2.8  2.9000000     0\n3027 80  17.2250425  4.0088214    0    2.9  3.0000000     0\n3028 80  17.2250425  4.0088214    0    3.0  3.1000000     0\n3029 80  17.2250425  4.0088214    0    3.1  3.2000000     0\n3030 80  17.2250425  4.0088214    0    3.2  3.3000000     0\n3031 80  17.2250425  4.0088214    0    3.3  3.4000000     0\n3032 80  17.2250425  4.0088214    0    3.4  3.5000000     0\n3033 80  17.2250425  4.0088214    0    3.5  3.6000000     0\n3034 80  17.2250425  4.0088214    0    3.6  3.7000000     0\n3035 80  17.2250425  4.0088214    0    3.7  3.8000000     0\n3036 80  17.2250425  4.0088214    0    3.8  4.0000000     0\n3037 80  17.2250425  4.0088214    0    4.0  4.1000000     0\n3038 80  17.2250425  4.0088214    1    4.1  4.2000000     0\n3039 80  17.2250425  4.0088214    1    4.2  4.3000000     0\n3040 80  17.2250425  4.0088214    1    4.3  4.4000000     0\n3041 80  17.2250425  4.0088214    1    4.4  4.5000000     0\n3042 80  17.2250425  4.0088214    1    4.5  4.7000000     0\n3043 80  17.2250425  4.0088214    1    4.7  4.8000000     0\n3044 80  17.2250425  4.0088214    1    4.8  4.9000000     0\n3045 80  17.2250425  4.0088214    1    4.9  5.0000000     0\n3046 80  17.2250425  4.0088214    1    5.0 17.2250425     1",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "æ—¶å˜åå˜é‡ Cox æ¨¡å‹"
    ]
  },
  {
    "objectID": "1089-time-varying-cox.html#åˆ†ææµç¨‹æ­¥éª¤",
    "href": "1089-time-varying-cox.html#åˆ†ææµç¨‹æ­¥éª¤",
    "title": "æ—¶å˜åå˜é‡ Cox æ¨¡å‹å®Œæ•´æ•™ç¨‹",
    "section": "åˆ†ææµç¨‹æ­¥éª¤",
    "text": "åˆ†ææµç¨‹æ­¥éª¤\nåˆ†ææµç¨‹å¯ä»¥ç†è§£ä¸ºä¸‰æ­¥ï¼šå…ˆæ„é€  (start, stop] åŒºé—´æ ¼å¼ï¼Œå†åœ¨æ¯ä¸ªåŒºé—´æ›´æ–°åå˜é‡ï¼Œæœ€åæ‹Ÿåˆæ—¶å˜åå˜é‡ Cox æ¨¡å‹ã€‚æ ¸å¿ƒæ€æƒ³æ˜¯æŠŠä¸€åå—è¯•è€…çš„éšè®¿è¿‡ç¨‹æ‹†æˆå¤šä¸ªç‰‡æ®µï¼Œè®©æ¯ä¸ªç‰‡æ®µåæ˜ çœŸå®æš´éœ²çŠ¶æ€ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "æ—¶å˜åå˜é‡ Cox æ¨¡å‹"
    ]
  },
  {
    "objectID": "1089-time-varying-cox.html#å‚æ•°è®²è§£ä¸ä½¿ç”¨è¦ç‚¹",
    "href": "1089-time-varying-cox.html#å‚æ•°è®²è§£ä¸ä½¿ç”¨è¦ç‚¹",
    "title": "æ—¶å˜åå˜é‡ Cox æ¨¡å‹å®Œæ•´æ•™ç¨‹",
    "section": "å‚æ•°è®²è§£ä¸ä½¿ç”¨è¦ç‚¹",
    "text": "å‚æ•°è®²è§£ä¸ä½¿ç”¨è¦ç‚¹\nSurv(tstart, tstop, event) ç”¨äºå®šä¹‰èµ·æ­¢æ—¶é—´æ ¼å¼ï¼ŒsurvSplit() å¯ä»¥æŒ‰æš´éœ²å˜åŒ–æ—¶é—´æ‹†åˆ†æ•°æ®ï¼Œè€Œ tt() åˆ™æä¾›å¦ä¸€ç§å®šä¹‰æ—¶é—´å˜æ•ˆåº”çš„æ–¹å¼ã€‚å®é™…æ“ä½œæ—¶ï¼Œå…ˆç”¨ survSplit() å¤„ç†æ•°æ®é€šå¸¸æ›´ç›´è§‚ï¼Œä¹Ÿä¾¿äºæ£€æŸ¥æ‹†åˆ†ç»“æœæ˜¯å¦åˆç†ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "æ—¶å˜åå˜é‡ Cox æ¨¡å‹"
    ]
  },
  {
    "objectID": "1089-time-varying-cox.html#ä»£ç å®ç°",
    "href": "1089-time-varying-cox.html#ä»£ç å®ç°",
    "title": "æ—¶å˜åå˜é‡ Cox æ¨¡å‹å®Œæ•´æ•™ç¨‹",
    "section": "ä»£ç å®ç°",
    "text": "ä»£ç å®ç°\n\ncox_tv &lt;- coxph(Surv(tstart, tstop, event) ~ drug, data = split_data)\nsummary(cox_tv)\n\nCall:\ncoxph(formula = Surv(tstart, tstop, event) ~ drug, data = split_data)\n\n  n= 3046, number of events= 53 \n\n       coef exp(coef) se(coef)    z Pr(&gt;|z|)  \ndrug 1.2969    3.6579   0.5664 2.29    0.022 *\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n     exp(coef) exp(-coef) lower .95 upper .95\ndrug     3.658     0.2734     1.205      11.1\n\nConcordance= 0.569  (se = 0.03 )\nLikelihood ratio test= 5.64  on 1 df,   p=0.02\nWald test            = 5.24  on 1 df,   p=0.02\nScore (logrank) test = 5.75  on 1 df,   p=0.02",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "æ—¶å˜åå˜é‡ Cox æ¨¡å‹"
    ]
  },
  {
    "objectID": "1089-time-varying-cox.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "href": "1089-time-varying-cox.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "title": "æ—¶å˜åå˜é‡ Cox æ¨¡å‹å®Œæ•´æ•™ç¨‹",
    "section": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "text": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š\n\næŠ¥å‘Šè¯ç‰©çš„ HR åŠå…¶ç½®ä¿¡åŒºé—´\næ˜ç¡®æš´éœ²å®šä¹‰ä¸æ‹†åˆ†æ—¶é—´æ®µ",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "æ—¶å˜åå˜é‡ Cox æ¨¡å‹"
    ]
  },
  {
    "objectID": "1089-time-varying-cox.html#å¸¸è§é”™è¯¯ä¸çº å",
    "href": "1089-time-varying-cox.html#å¸¸è§é”™è¯¯ä¸çº å",
    "title": "æ—¶å˜åå˜é‡ Cox æ¨¡å‹å®Œæ•´æ•™ç¨‹",
    "section": "å¸¸è§é”™è¯¯ä¸çº å",
    "text": "å¸¸è§é”™è¯¯ä¸çº å\nå¸¸è§é”™è¯¯åŒ…æ‹¬æ‹†åˆ†æ—¶é—´ä¸å‡†ç¡®ã€äº‹ä»¶æ—¶é—´ä¸ tstop ä¸ä¸€è‡´ã€å¿½ç•¥æ¯”ä¾‹é£é™©å‡è®¾ã€‚è§£å†³æ–¹å¼æ˜¯å…ˆæ ¸å¯¹æš´éœ²å¼€å§‹æ—¶é—´å’Œäº‹ä»¶æ—¶é—´ï¼Œå†åš PH å‡è®¾æ£€éªŒï¼Œç¡®ä¿æ¨¡å‹è®¾å®šä¸æ•°æ®ä¸€è‡´ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "æ—¶å˜åå˜é‡ Cox æ¨¡å‹"
    ]
  },
  {
    "objectID": "1089-time-varying-cox.html#è¿›é˜¶æ‰©å±•",
    "href": "1089-time-varying-cox.html#è¿›é˜¶æ‰©å±•",
    "title": "æ—¶å˜åå˜é‡ Cox æ¨¡å‹å®Œæ•´æ•™ç¨‹",
    "section": "è¿›é˜¶æ‰©å±•",
    "text": "è¿›é˜¶æ‰©å±•\nè¿›é˜¶åº”ç”¨å¯ä»¥ä½¿ç”¨ tt() æŒ‡å®šæ—¶é—´å‡½æ•°ï¼ˆå¦‚ log(time)ï¼‰æè¿°æ—¶é—´å˜æ•ˆåº”ï¼Œä¹Ÿå¯ä»¥åŒæ—¶çº³å…¥å¤šä¸ªæ—¶å˜åå˜é‡ï¼Œè¿›ä¸€æ­¥è´´è¿‘å¤æ‚çš„éšè®¿è¿‡ç¨‹ã€‚ ## æ€»ç»“\næ—¶å˜åå˜é‡ Cox æ¨¡å‹è®©éšè®¿æ•°æ®æ›´è´´è¿‘çœŸå®æš´éœ²è¿‡ç¨‹ï¼Œ é€‚åˆè¯ç‰©å¯ç”¨ã€æŒ‡æ ‡å˜åŒ–ç­‰åŠ¨æ€åœºæ™¯ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "æ—¶å˜åå˜é‡ Cox æ¨¡å‹"
    ]
  },
  {
    "objectID": "1090-ps-weight-diagnostics.html",
    "href": "1090-ps-weight-diagnostics.html",
    "title": "å€¾å‘è¯„åˆ†åŠ æƒè¯Šæ–­ä¸ç¨³å®šæƒé‡å®Œæ•´æ•™ç¨‹",
    "section": "",
    "text": "library(dplyr)\nlibrary(ggplot2)\nlibrary(WeightIt)\nlibrary(cobalt)\nlibrary(survey)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å€¾å‘è¯„åˆ†æƒé‡è¯Šæ–­"
    ]
  },
  {
    "objectID": "1090-ps-weight-diagnostics.html#æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "href": "1090-ps-weight-diagnostics.html#æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "title": "å€¾å‘è¯„åˆ†åŠ æƒè¯Šæ–­ä¸ç¨³å®šæƒé‡å®Œæ•´æ•™ç¨‹",
    "section": "æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "text": "æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯\nå€¾å‘è¯„åˆ†åŠ æƒï¼ˆIPTWï¼‰èƒ½æŠŠè§‚å¯Ÿæ€§æ•°æ®è°ƒæ•´åˆ°æ¥è¿‘éšæœºè¯•éªŒçš„çŠ¶æ€ï¼Œä½†èƒ½å¦æˆç«‹å–å†³äºæƒé‡æ˜¯å¦ç¨³å®šã€‚ä¸´åºŠä¸æµè¡Œç—…å­¦ç ”ç©¶ä¸­å¸¸è§çš„é—®é¢˜ä¸æ˜¯â€œæƒé‡æœ‰æ²¡æœ‰ç®—â€ï¼Œè€Œæ˜¯â€œæƒé‡æ˜¯å¦å¯ç”¨â€ã€‚å› æ­¤ï¼ŒåŠ æƒè¯Šæ–­ã€æƒé‡æˆªæ–­ä¸ç¨³å¥æ¨æ–­æ˜¯ IPTW çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å€¾å‘è¯„åˆ†æƒé‡è¯Šæ–­"
    ]
  },
  {
    "objectID": "1090-ps-weight-diagnostics.html#æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "href": "1090-ps-weight-diagnostics.html#æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "title": "å€¾å‘è¯„åˆ†åŠ æƒè¯Šæ–­ä¸ç¨³å®šæƒé‡å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "text": "æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ\nIPTW çš„ç›®æ ‡æ˜¯è®©å¤„ç†ç»„ä¸å¯¹ç…§ç»„åœ¨åå˜é‡ä¸Šåˆ†å¸ƒä¸€è‡´ã€‚è¿™ä¸ªç›®æ ‡èƒ½å¦å®ç°ï¼Œå–å†³äºä¸¤ä»¶äº‹ï¼šä¸€æ˜¯å€¾å‘è¯„åˆ†æ¨¡å‹æ˜¯å¦åˆç†ï¼ŒäºŒæ˜¯æƒé‡åˆ†å¸ƒæ˜¯å¦æç«¯ã€‚æƒé‡å¤ªå¤§æ„å‘³ç€æŸäº›æ ·æœ¬å‡ ä¹æ— æ³•åœ¨å¯¹ç…§ç»„ä¸­æ‰¾åˆ°å¯æ¯”å¯¹è±¡ï¼Œæ­¤æ—¶ä¼°è®¡ç»“æœä¼šå˜å¾—ä¸ç¨³å®šã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å€¾å‘è¯„åˆ†æƒé‡è¯Šæ–­"
    ]
  },
  {
    "objectID": "1090-ps-weight-diagnostics.html#æ–¹æ³•å¯¹æ¯”ä¸è¯Šæ–­æƒé‡çš„é£é™©",
    "href": "1090-ps-weight-diagnostics.html#æ–¹æ³•å¯¹æ¯”ä¸è¯Šæ–­æƒé‡çš„é£é™©",
    "title": "å€¾å‘è¯„åˆ†åŠ æƒè¯Šæ–­ä¸ç¨³å®šæƒé‡å®Œæ•´æ•™ç¨‹",
    "section": "æ–¹æ³•å¯¹æ¯”ï¼šä¸è¯Šæ–­æƒé‡çš„é£é™©",
    "text": "æ–¹æ³•å¯¹æ¯”ï¼šä¸è¯Šæ–­æƒé‡çš„é£é™©\nå¦‚æœç›´æ¥ä½¿ç”¨æœªç»æ£€æŸ¥çš„æƒé‡ï¼Œå¯èƒ½å‡ºç°ä¼°è®¡é‡ä¸ç¨³å®šã€æ ‡å‡†è¯¯å¼‚å¸¸ã€ç”šè‡³æç«¯å€¼ä¸»å¯¼æ¨¡å‹ç»“æœçš„æƒ…å†µã€‚è¯Šæ–­ä¸æˆªæ–­çš„æ„ä¹‰åœ¨äºæ§åˆ¶æ–¹å·®ï¼Œè®©ä¼°è®¡æ›´ç¨³å¥ï¼ŒåŒæ—¶é¿å…æƒé‡åˆ†å¸ƒè¿‡äºåæ–œã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å€¾å‘è¯„åˆ†æƒé‡è¯Šæ–­"
    ]
  },
  {
    "objectID": "1090-ps-weight-diagnostics.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "href": "1090-ps-weight-diagnostics.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "title": "å€¾å‘è¯„åˆ†åŠ æƒè¯Šæ–­ä¸ç¨³å®šæƒé‡å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹å‡è®¾ä¸å‰æ",
    "text": "æ¨¡å‹å‡è®¾ä¸å‰æ\nIPTW å»ºç«‹åœ¨æ— æœªæµ‹æ··æ‚å’Œé˜³æ€§å‡è®¾æˆç«‹çš„å‰æä¸Šï¼ŒåŒæ—¶è¦æ±‚å€¾å‘è¯„åˆ†æ¨¡å‹èƒ½åˆç†æ•æ‰åå˜é‡ä¸æ²»ç–—çš„å…³ç³»ã€‚æƒé‡è¯Šæ–­çš„ç›®æ ‡æ˜¯æ£€éªŒè¿™äº›å‡è®¾æ˜¯å¦åœ¨æ•°æ®ä¸­å¾—åˆ°æ”¯æŒã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å€¾å‘è¯„åˆ†æƒé‡è¯Šæ–­"
    ]
  },
  {
    "objectID": "1090-ps-weight-diagnostics.html#é€šä¿—ä¸¾ä¾‹ä¸ºä»€ä¹ˆæƒé‡ä¼šæç«¯",
    "href": "1090-ps-weight-diagnostics.html#é€šä¿—ä¸¾ä¾‹ä¸ºä»€ä¹ˆæƒé‡ä¼šæç«¯",
    "title": "å€¾å‘è¯„åˆ†åŠ æƒè¯Šæ–­ä¸ç¨³å®šæƒé‡å®Œæ•´æ•™ç¨‹",
    "section": "é€šä¿—ä¸¾ä¾‹ï¼šä¸ºä»€ä¹ˆæƒé‡ä¼šæç«¯",
    "text": "é€šä¿—ä¸¾ä¾‹ï¼šä¸ºä»€ä¹ˆæƒé‡ä¼šæç«¯\nå¦‚æœæŸäº›é«˜é£é™©äººç¾¤å‡ ä¹éƒ½æ¥å—æ²»ç–—ï¼Œé‚£ä¹ˆè¿™ç±»äººè¢«åˆ†é…åˆ°å¯¹ç…§ç»„çš„æ¦‚ç‡æä½ã€‚IPTW ä¼šç»™è¿™äº›â€œæå°‘è§çš„å¯¹ç…§ç»„ä¸ªä½“â€éå¸¸å¤§çš„æƒé‡ï¼Œä»è€Œæ”¾å¤§éšæœºæ³¢åŠ¨ã€‚æƒé‡æˆªæ–­å°±æ˜¯ä¸ºäº†é™ä½è¿™äº›æç«¯æƒé‡å¯¹ç»“æœçš„å½±å“ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å€¾å‘è¯„åˆ†æƒé‡è¯Šæ–­"
    ]
  },
  {
    "objectID": "1090-ps-weight-diagnostics.html#æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "href": "1090-ps-weight-diagnostics.html#æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "title": "å€¾å‘è¯„åˆ†åŠ æƒè¯Šæ–­ä¸ç¨³å®šæƒé‡å®Œæ•´æ•™ç¨‹",
    "section": "æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "text": "æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰\n\nset.seed(2026)\nsize &lt;- 800\n\nps_data &lt;- tibble(\n  age = rnorm(size, 55, 12),\n  female = rbinom(size, 1, 0.55),\n  severity = rnorm(size),\n  comorbidity = rbinom(size, 1, 0.35)\n) |&gt;\n  mutate(\n    treatment_prob = plogis(-1 + 0.03 * age + 0.6 * severity - 0.4 * comorbidity),\n    treatment = rbinom(size, 1, treatment_prob),\n    outcome = 12 + 2.1 * treatment + 0.4 * severity - 0.8 * comorbidity + rnorm(size)\n  )\n\nps_data\n\n# A tibble: 800 Ã— 7\n     age female severity comorbidity treatment_prob treatment outcome\n   &lt;dbl&gt;  &lt;int&gt;    &lt;dbl&gt;       &lt;int&gt;          &lt;dbl&gt;     &lt;int&gt;   &lt;dbl&gt;\n 1  61.2      1  0.292             0          0.734         1   15.4 \n 2  42.0      0  0.736             0          0.669         1   14.2 \n 3  56.7      1 -0.00429           0          0.668         1   11.7 \n 4  54.0      1 -0.446             0          0.587         1   15.2 \n 5  47.0      1  1.01              0          0.735         1   13.0 \n 6  24.8      0 -1.29              0          0.263         0   11.3 \n 7  46.2      1  0.754             0          0.698         0   12.7 \n 8  42.8      1  0.136             1          0.491         0    9.79\n 9  56.4      0 -2.61              0          0.294         0   10.1 \n10  49.3      1 -0.504             1          0.445         1   12.9 \n# â„¹ 790 more rows",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å€¾å‘è¯„åˆ†æƒé‡è¯Šæ–­"
    ]
  },
  {
    "objectID": "1090-ps-weight-diagnostics.html#åˆ†ææµç¨‹æ­¥éª¤",
    "href": "1090-ps-weight-diagnostics.html#åˆ†ææµç¨‹æ­¥éª¤",
    "title": "å€¾å‘è¯„åˆ†åŠ æƒè¯Šæ–­ä¸ç¨³å®šæƒé‡å®Œæ•´æ•™ç¨‹",
    "section": "åˆ†ææµç¨‹æ­¥éª¤",
    "text": "åˆ†ææµç¨‹æ­¥éª¤\nåˆ†ææµç¨‹åŒ…æ‹¬å››ä¸ªå…³é”®é˜¶æ®µï¼šå…ˆä¼°è®¡å€¾å‘è¯„åˆ†å¹¶è®¡ç®—æƒé‡ï¼Œå†æ£€æŸ¥æƒé‡åˆ†å¸ƒï¼Œå¿…è¦æ—¶è¿›è¡Œæˆªæ–­æˆ–ç¨³å®šåŒ–å¤„ç†ï¼Œæœ€åç”¨ç¨³å¥æ–¹æ³•ä¼°è®¡å› æœæ•ˆåº”å¹¶æ£€éªŒåå˜é‡å¹³è¡¡æ€§ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å€¾å‘è¯„åˆ†æƒé‡è¯Šæ–­"
    ]
  },
  {
    "objectID": "1090-ps-weight-diagnostics.html#å‚æ•°è®²è§£ä¸ä½¿ç”¨è¦ç‚¹",
    "href": "1090-ps-weight-diagnostics.html#å‚æ•°è®²è§£ä¸ä½¿ç”¨è¦ç‚¹",
    "title": "å€¾å‘è¯„åˆ†åŠ æƒè¯Šæ–­ä¸ç¨³å®šæƒé‡å®Œæ•´æ•™ç¨‹",
    "section": "å‚æ•°è®²è§£ä¸ä½¿ç”¨è¦ç‚¹",
    "text": "å‚æ•°è®²è§£ä¸ä½¿ç”¨è¦ç‚¹\nWeightIt ç”¨äºè®¡ç®—æƒé‡ï¼Œcobalt ç”¨äºè¯Šæ–­åå˜é‡å¹³è¡¡æ€§ã€‚æƒé‡æˆªæ–­å¸¸ç”¨ 1%/99% æˆ– 5%/95% åˆ†ä½ç‚¹ï¼›è‹¥æƒé‡åˆ†å¸ƒé«˜åº¦åæ–œï¼Œå¯è€ƒè™‘ç¨³å®šæƒé‡æˆ–æ›¿æ¢ä¼°è®¡ç­–ç•¥ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å€¾å‘è¯„åˆ†æƒé‡è¯Šæ–­"
    ]
  },
  {
    "objectID": "1090-ps-weight-diagnostics.html#ä»£ç å®ç°",
    "href": "1090-ps-weight-diagnostics.html#ä»£ç å®ç°",
    "title": "å€¾å‘è¯„åˆ†åŠ æƒè¯Šæ–­ä¸ç¨³å®šæƒé‡å®Œæ•´æ•™ç¨‹",
    "section": "ä»£ç å®ç°",
    "text": "ä»£ç å®ç°\n\n1. ä¼°è®¡æƒé‡\n\nps_weight &lt;- weightit(\n  treatment ~ age + female + severity + comorbidity,\n  data = ps_data,\n  method = \"ps\",\n  estimand = \"ATE\"\n)\n\nps_weight\n\nA weightit object\n - method: \"glm\" (propensity score weighting with GLM)\n - number of obs.: 800\n - sampling weights: none\n - treatment: 2-category\n - estimand: ATE\n - covariates: age, female, severity, comorbidity\n\n\n\n\n2. æƒé‡åˆ†å¸ƒè¯Šæ–­\n\nps_data &lt;- ps_data |&gt;\n  mutate(weight = ps_weight$weights)\n\nsummary(ps_data$weight)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  1.064   1.436   1.728   2.003   2.266   9.825 \n\n\n\nps_data |&gt;\n  ggplot(aes(x = weight)) +\n  geom_histogram(bins = 30, fill = \"#2563eb\", alpha = 0.8) +\n  labs(title = \"IPTW æƒé‡åˆ†å¸ƒ\", x = \"Weight\", y = \"Count\") +\n  theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\n\n\n3. åå˜é‡å¹³è¡¡è¯Šæ–­\n\nbal.tab(ps_weight)\n\nBalance Measures\n                Type Diff.Adj\nprop.score  Distance  -0.0128\nage          Contin.   0.0066\nfemale        Binary  -0.0024\nseverity     Contin.  -0.0281\ncomorbidity   Binary  -0.0012\n\nEffective sample sizes\n           Control Treated\nUnadjusted  315.    485.  \nAdjusted    258.96  447.24\n\n\n\nlove.plot(ps_weight, stats = \"mean.diffs\", threshold = 0.1)\n\n\n\n\n\n\n\n\n\n\n4. æˆªæ–­æƒé‡å¹¶ä¼°è®¡æ•ˆåº”\n\nps_data &lt;- ps_data |&gt;\n  mutate(\n    weight_trim = pmin(pmax(weight, quantile(weight, 0.02)), quantile(weight, 0.98))\n  )\n\nsvy_design &lt;- svydesign(ids = ~1, weights = ~weight_trim, data = ps_data)\nsvy_fit &lt;- svyglm(outcome ~ treatment, design = svy_design)\nsummary(svy_fit)\n\n\nCall:\nsvyglm(formula = outcome ~ treatment, design = svy_design)\n\nSurvey design:\nsvydesign(ids = ~1, weights = ~weight_trim, data = ps_data)\n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 11.53680    0.06866  168.02   &lt;2e-16 ***\ntreatment    2.24066    0.08624   25.98   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for gaussian family taken to be 1.262639)\n\nNumber of Fisher Scoring iterations: 2",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å€¾å‘è¯„åˆ†æƒé‡è¯Šæ–­"
    ]
  },
  {
    "objectID": "1090-ps-weight-diagnostics.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "href": "1090-ps-weight-diagnostics.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "title": "å€¾å‘è¯„åˆ†åŠ æƒè¯Šæ–­ä¸ç¨³å®šæƒé‡å®Œæ•´æ•™ç¨‹",
    "section": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "text": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š\næŠ¥å‘Šæ—¶åº”è¯´æ˜æƒé‡æˆªæ–­é˜ˆå€¼ã€æˆªæ–­åçš„æƒé‡åˆ†å¸ƒï¼Œä»¥åŠå¹³è¡¡è¯Šæ–­ç»“æœï¼ˆå¦‚æ ‡å‡†åŒ–å·®å¼‚æ˜¯å¦ä½äº 0.1ï¼‰ã€‚éšåç»™å‡ºåŠ æƒæ¨¡å‹çš„æ•ˆåº”ä¼°è®¡ä¸ç¨³å¥æ ‡å‡†è¯¯ï¼Œå¹¶è¯´æ˜ä¸æœªåŠ æƒä¼°è®¡çš„å·®å¼‚ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å€¾å‘è¯„åˆ†æƒé‡è¯Šæ–­"
    ]
  },
  {
    "objectID": "1090-ps-weight-diagnostics.html#å¸¸è§é”™è¯¯ä¸çº å",
    "href": "1090-ps-weight-diagnostics.html#å¸¸è§é”™è¯¯ä¸çº å",
    "title": "å€¾å‘è¯„åˆ†åŠ æƒè¯Šæ–­ä¸ç¨³å®šæƒé‡å®Œæ•´æ•™ç¨‹",
    "section": "å¸¸è§é”™è¯¯ä¸çº å",
    "text": "å¸¸è§é”™è¯¯ä¸çº å\nå¸¸è§é—®é¢˜åŒ…æ‹¬æƒé‡åˆ†å¸ƒæç«¯ã€åå˜é‡å¹³è¡¡ä¸è¶³æˆ–å¿½ç•¥æƒé‡è¯Šæ–­ã€‚è§£å†³æ–¹å¼æ˜¯å°è¯•æˆªæ–­æƒé‡ã€é‡æ–°è®¾å®šå€¾å‘è¯„åˆ†æ¨¡å‹ï¼Œå¹¶ä½¿ç”¨ cobalt çš„å¹³è¡¡è¯Šæ–­ç¡®è®¤è°ƒæ•´æ•ˆæœã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å€¾å‘è¯„åˆ†æƒé‡è¯Šæ–­"
    ]
  },
  {
    "objectID": "1090-ps-weight-diagnostics.html#è¿›é˜¶æ‰©å±•",
    "href": "1090-ps-weight-diagnostics.html#è¿›é˜¶æ‰©å±•",
    "title": "å€¾å‘è¯„åˆ†åŠ æƒè¯Šæ–­ä¸ç¨³å®šæƒé‡å®Œæ•´æ•™ç¨‹",
    "section": "è¿›é˜¶æ‰©å±•",
    "text": "è¿›é˜¶æ‰©å±•\nè¿›é˜¶åˆ†æå¯ä»¥è€ƒè™‘ç¨³å®šæƒé‡ã€é‡å æƒé‡æˆ–é‡‡ç”¨åŒé‡ç¨³å¥æ–¹æ³•ï¼ˆå¦‚ AIPWï¼‰ï¼Œå¹¶é€šè¿‡æ•æ„Ÿæ€§åˆ†ææ£€éªŒç»“æœçš„ç¨³å¥æ€§ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å€¾å‘è¯„åˆ†æƒé‡è¯Šæ–­"
    ]
  },
  {
    "objectID": "1090-ps-weight-diagnostics.html#æ€»ç»“",
    "href": "1090-ps-weight-diagnostics.html#æ€»ç»“",
    "title": "å€¾å‘è¯„åˆ†åŠ æƒè¯Šæ–­ä¸ç¨³å®šæƒé‡å®Œæ•´æ•™ç¨‹",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nIPTW çš„å…³é”®ä¸åœ¨äºæƒé‡çš„è®¡ç®—ï¼Œè€Œåœ¨äºæƒé‡æ˜¯å¦ç¨³å®šã€åå˜é‡æ˜¯å¦å¹³è¡¡ã€‚ç³»ç»Ÿçš„è¯Šæ–­ä¸æˆªæ–­æµç¨‹èƒ½æ˜¾è‘—æå‡å› æœæ¨æ–­çš„å¯ä¿¡åº¦ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å€¾å‘è¯„åˆ†æƒé‡è¯Šæ–­"
    ]
  },
  {
    "objectID": "1091-advanced-target-trial.html",
    "href": "1091-advanced-target-trial.html",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶å®Œæ•´æ•™ç¨‹",
    "section": "",
    "text": "library(dplyr)\nlibrary(survival)\nlibrary(ggplot2)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶"
    ]
  },
  {
    "objectID": "1091-advanced-target-trial.html#æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "href": "1091-advanced-target-trial.html#æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶å®Œæ•´æ•™ç¨‹",
    "section": "æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "text": "æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯\nç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿæ˜¯æŠŠè§‚å¯Ÿæ€§æ•°æ®å¯¹é½åˆ°ä¸€ä¸ªâ€œç†æƒ³éšæœºè¯•éªŒâ€çš„æ–¹æ³•æ¡†æ¶ã€‚è¿›é˜¶ç‰ˆæœ¬å¼ºè°ƒä¸¥è°¨çš„æ–¹æ¡ˆè®¾è®¡ä¸æ•æ„Ÿæ€§åˆ†æï¼Œç‰¹åˆ«é€‚åˆæ”¿ç­–è¯„ä¼°ã€çœŸå®ä¸–ç•Œè¯æ®ï¼ˆRWEï¼‰ç ”ç©¶ç­‰éœ€è¦æ¸…æ™°å› æœè§£é‡Šçš„åœºæ™¯ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶"
    ]
  },
  {
    "objectID": "1091-advanced-target-trial.html#æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "href": "1091-advanced-target-trial.html#æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "text": "æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ\nç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿçš„å…³é”®ä¸åœ¨æ¨¡å‹æœ¬èº«ï¼Œè€Œåœ¨äºâ€œè¯•éªŒæ–¹æ¡ˆçš„å¯å¤ç°â€ã€‚æ ¸å¿ƒè¦ç´ åŒ…æ‹¬å…¥ç»„æ ‡å‡†ã€æ²»ç–—ç­–ç•¥ã€éšè®¿èµ·ç‚¹ã€ç»“å±€å®šä¹‰ã€å› æœå¯¹æ¯”å’Œåˆ†æè®¡åˆ’ã€‚è¿›é˜¶å®è·µå¼ºè°ƒåœ¨æ–¹æ¡ˆå±‚é¢æå‰å®šä¹‰è¿™äº›å†…å®¹ï¼Œå†åœ¨æ•°æ®ä¸­é€ä¸€è½å®ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶"
    ]
  },
  {
    "objectID": "1091-advanced-target-trial.html#æ–¹æ³•å¯¹æ¯”ç›´æ¥åˆ†æ-vs-ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ",
    "href": "1091-advanced-target-trial.html#æ–¹æ³•å¯¹æ¯”ç›´æ¥åˆ†æ-vs-ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶å®Œæ•´æ•™ç¨‹",
    "section": "æ–¹æ³•å¯¹æ¯”ï¼šç›´æ¥åˆ†æ vs ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ",
    "text": "æ–¹æ³•å¯¹æ¯”ï¼šç›´æ¥åˆ†æ vs ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿ\nç›´æ¥åˆ†æå¾€å¾€å®¹æ˜“å‡ºç°æ—¶é—´ç›¸å…³åå€šï¼Œè€Œç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿé€šè¿‡æ˜ç¡®æ—¶é—´é›¶ç‚¹ã€å¤„ç†ç­–ç•¥å’Œå› æœå¯¹æ¯”ï¼Œæ˜¾è‘—æé«˜ç»“è®ºçš„å¯è§£é‡Šæ€§å’Œè§„èŒƒæ€§ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶"
    ]
  },
  {
    "objectID": "1091-advanced-target-trial.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "href": "1091-advanced-target-trial.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹å‡è®¾ä¸å‰æ",
    "text": "æ¨¡å‹å‡è®¾ä¸å‰æ\nç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿä¾èµ–å¯è¯†åˆ«çš„å…¥ç»„æ ‡å‡†ã€æ¸…æ™°çš„éšè®¿èµ·ç‚¹ã€å¯é‡å¤çš„æ²»ç–—ç­–ç•¥ï¼ŒåŒæ—¶å‡è®¾è§‚å¯Ÿæ€§æ•°æ®ä¸­æœªæµ‹æ··æ‚å¯è¢«é™åˆ¶åœ¨åˆç†èŒƒå›´å†…ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶"
    ]
  },
  {
    "objectID": "1091-advanced-target-trial.html#é€šä¿—ä¸¾ä¾‹ä¸ºä»€ä¹ˆæ—¶é—´é›¶ç‚¹é‡è¦",
    "href": "1091-advanced-target-trial.html#é€šä¿—ä¸¾ä¾‹ä¸ºä»€ä¹ˆæ—¶é—´é›¶ç‚¹é‡è¦",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶å®Œæ•´æ•™ç¨‹",
    "section": "é€šä¿—ä¸¾ä¾‹ï¼šä¸ºä»€ä¹ˆæ—¶é—´é›¶ç‚¹é‡è¦",
    "text": "é€šä¿—ä¸¾ä¾‹ï¼šä¸ºä»€ä¹ˆæ—¶é—´é›¶ç‚¹é‡è¦\nè‹¥ç ”ç©¶åœ¨å…¥ç»„åæ‰å®šä¹‰æ²»ç–—ï¼Œå®¹æ˜“å‡ºç°â€œæš´éœ²åæ‰å¼€å§‹éšè®¿â€çš„æ—¶é—´åå€šã€‚ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿå¼ºè°ƒâ€œå…ˆå®šä¹‰æ—¶é—´é›¶ç‚¹ï¼Œå†å®šä¹‰æ²»ç–—ç­–ç•¥â€ï¼Œä»è€Œé¿å…æŠŠæœªæ¥ä¿¡æ¯å¸¦å›åŸºçº¿ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶"
    ]
  },
  {
    "objectID": "1091-advanced-target-trial.html#æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "href": "1091-advanced-target-trial.html#æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶å®Œæ•´æ•™ç¨‹",
    "section": "æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "text": "æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰\n\nset.seed(2026)\nsize &lt;- 500\n\ntrial_data &lt;- tibble(\n  id = 1:size,\n  age = rnorm(size, 60, 10),\n  severity = rnorm(size),\n  treated = rbinom(size, 1, plogis(-0.5 + 0.6 * severity)),\n  follow_time = rexp(size, rate = 0.08),\n  event = rbinom(size, 1, 0.5)\n)\n\ntrial_data\n\n# A tibble: 500 Ã— 6\n      id   age severity treated follow_time event\n   &lt;int&gt; &lt;dbl&gt;    &lt;dbl&gt;   &lt;int&gt;       &lt;dbl&gt; &lt;int&gt;\n 1     1  65.2   1.17         0       22.0      0\n 2     2  49.2   0.330        0        6.97     0\n 3     3  61.4  -0.288        1       11.0      1\n 4     4  59.2   1.32         1        5.71     1\n 5     5  53.3  -0.0455       1       16.3      1\n 6     6  34.8  -0.215        0       49.9      0\n 7     7  52.6   0.135        0        8.29     1\n 8     8  49.8  -0.645        0       23.5      1\n 9     9  61.1   0.0571       1       15.2      0\n10    10  55.3   0.931        0       14.6      0\n# â„¹ 490 more rows",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶"
    ]
  },
  {
    "objectID": "1091-advanced-target-trial.html#åˆ†ææµç¨‹æ­¥éª¤",
    "href": "1091-advanced-target-trial.html#åˆ†ææµç¨‹æ­¥éª¤",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶å®Œæ•´æ•™ç¨‹",
    "section": "åˆ†ææµç¨‹æ­¥éª¤",
    "text": "åˆ†ææµç¨‹æ­¥éª¤\nè¿›é˜¶æµç¨‹å¼ºè°ƒâ€œæ–¹æ¡ˆå…ˆè¡Œâ€ã€‚å»ºè®®å…ˆå†™å‡ºå®Œæ•´çš„ç›®æ ‡è¯•éªŒåè®®ï¼Œå†å¯¹ç…§æ•°æ®é€ä¸€å®ç°ï¼šå®šä¹‰å…¥ç»„æ ‡å‡†ã€æ²»ç–—ç­–ç•¥ã€æ—¶é—´é›¶ç‚¹ã€ç»“å±€å’Œåˆ†æè®¡åˆ’ã€‚å®Œæˆåå†è¿›å…¥æ¨¡å‹ä¼°è®¡ä¸æ•æ„Ÿæ€§åˆ†æã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶"
    ]
  },
  {
    "objectID": "1091-advanced-target-trial.html#å‚æ•°è®²è§£ä¸ä½¿ç”¨è¦ç‚¹",
    "href": "1091-advanced-target-trial.html#å‚æ•°è®²è§£ä¸ä½¿ç”¨è¦ç‚¹",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶å®Œæ•´æ•™ç¨‹",
    "section": "å‚æ•°è®²è§£ä¸ä½¿ç”¨è¦ç‚¹",
    "text": "å‚æ•°è®²è§£ä¸ä½¿ç”¨è¦ç‚¹\nåˆ†æè®¡åˆ’ä¸­åº”æ˜ç¡® ITT æˆ– per-protocol å¯¹æ¯”ï¼Œå®šä¹‰å¤±è®¿å’Œåˆ å¤±ç­–ç•¥ï¼Œå¹¶è¯´æ˜å¦‚ä½•å¤„ç†æ—¶é—´ä¾èµ–æ··æ‚ã€‚æ¯ä¸€æ­¥éƒ½åº”åœ¨æ–¹æ¡ˆä¸­é¢„å…ˆå†™æ¸…æ¥šï¼Œä»¥ä¿è¯ç ”ç©¶å¯å¤ç°ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶"
    ]
  },
  {
    "objectID": "1091-advanced-target-trial.html#ä»£ç å®ç°",
    "href": "1091-advanced-target-trial.html#ä»£ç å®ç°",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶å®Œæ•´æ•™ç¨‹",
    "section": "ä»£ç å®ç°",
    "text": "ä»£ç å®ç°\n\ncox_fit &lt;- coxph(Surv(follow_time, event) ~ treated + age + severity, data = trial_data)\nsummary(cox_fit)\n\nCall:\ncoxph(formula = Surv(follow_time, event) ~ treated + age + severity, \n    data = trial_data)\n\n  n= 500, number of events= 233 \n\n              coef exp(coef)  se(coef)      z Pr(&gt;|z|)\ntreated   0.032183  1.032707  0.135157  0.238    0.812\nage      -0.008833  0.991206  0.006357 -1.389    0.165\nseverity  0.004690  1.004701  0.069186  0.068    0.946\n\n         exp(coef) exp(-coef) lower .95 upper .95\ntreated     1.0327     0.9683    0.7924     1.346\nage         0.9912     1.0089    0.9789     1.004\nseverity    1.0047     0.9953    0.8773     1.151\n\nConcordance= 0.53  (se = 0.022 )\nLikelihood ratio test= 1.98  on 3 df,   p=0.6\nWald test            = 1.98  on 3 df,   p=0.6\nScore (logrank) test = 1.98  on 3 df,   p=0.6\n\n\n\ntrial_data |&gt;\n  ggplot(aes(x = follow_time, fill = factor(treated))) +\n  geom_histogram(bins = 30, position = \"identity\", alpha = 0.5) +\n  labs(title = \"æ²»ç–—ç»„ä¸å¯¹ç…§ç»„éšè®¿æ—¶é—´åˆ†å¸ƒ\", x = \"Follow-up time\", fill = \"Treated\") +\n  theme_minimal(base_size = 12)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶"
    ]
  },
  {
    "objectID": "1091-advanced-target-trial.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "href": "1091-advanced-target-trial.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶å®Œæ•´æ•™ç¨‹",
    "section": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "text": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š\næŠ¥å‘Šæ—¶éœ€è¦è¯´æ˜ç›®æ ‡è¯•éªŒåè®®çš„å…³é”®è¦ç´ ï¼Œå¼ºè°ƒæ—¶é—´é›¶ç‚¹ä¸å¤„ç†ç­–ç•¥çš„å®šä¹‰ã€‚æ¨¡å‹ç»“æœåº”æ”¾åœ¨â€œåè®®ä¸€è‡´æ€§â€çš„æ¡†æ¶ä¸‹è§£é‡Šï¼Œå¹¶è¯´æ˜æ½œåœ¨æœªæµ‹æ··æ‚çš„æ•æ„Ÿæ€§åˆ†æç»“æœã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶"
    ]
  },
  {
    "objectID": "1091-advanced-target-trial.html#å¸¸è§é”™è¯¯ä¸çº å",
    "href": "1091-advanced-target-trial.html#å¸¸è§é”™è¯¯ä¸çº å",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶å®Œæ•´æ•™ç¨‹",
    "section": "å¸¸è§é”™è¯¯ä¸çº å",
    "text": "å¸¸è§é”™è¯¯ä¸çº å\nå¸¸è§é—®é¢˜åŒ…æ‹¬æ—¶é—´é›¶ç‚¹å®šä¹‰ä¸æ¸…ã€å…¥ç»„æ ‡å‡†æ¨¡ç³Šã€å¤„ç†ç­–ç•¥ä¸ä¸€è‡´ä»¥åŠæœªæ˜ç¡®å› æœå¯¹æ¯”ã€‚çº åæ–¹æ³•æ˜¯ä»¥åè®®ä¸ºä¸»çº¿é€æ¡æ ¸å¯¹ï¼Œå¿…è¦æ—¶è¡¥å……æ•æ„Ÿæ€§åˆ†æã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶"
    ]
  },
  {
    "objectID": "1091-advanced-target-trial.html#è¿›é˜¶æ‰©å±•",
    "href": "1091-advanced-target-trial.html#è¿›é˜¶æ‰©å±•",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶å®Œæ•´æ•™ç¨‹",
    "section": "è¿›é˜¶æ‰©å±•",
    "text": "è¿›é˜¶æ‰©å±•\nè¿›é˜¶åº”ç”¨å¯ä»¥åŠ å…¥è´Ÿå¯¹ç…§ç»“å±€æˆ–è´Ÿå¯¹ç…§æš´éœ²ï¼Œä½¿ç”¨æƒé‡æˆ–ç»“æ„æ¨¡å‹å¤„ç†æ—¶é—´ä¾èµ–æ··æ‚ï¼Œå¹¶åœ¨æŠ¥å‘Šä¸­å¯¹åº” TARGET æŒ‡å—çš„å…³é”®æ¡ç›®ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶"
    ]
  },
  {
    "objectID": "1091-advanced-target-trial.html#æ€»ç»“",
    "href": "1091-advanced-target-trial.html#æ€»ç»“",
    "title": "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶å®Œæ•´æ•™ç¨‹",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿçš„ä»·å€¼åœ¨äºé€šè¿‡æ¸…æ™°çš„è¯•éªŒåè®®æå‡å› æœæ¨æ–­çš„å¯ä¿¡åº¦ã€‚è¿›é˜¶å®è·µå¼ºè°ƒæ–¹æ¡ˆå…ˆè¡Œã€æ•æ„Ÿæ€§åˆ†æä¸å¯å¤ç°æŠ¥å‘Šï¼Œä½¿è§‚å¯Ÿæ€§ç ”ç©¶æ›´æ¥è¿‘éšæœºè¯•éªŒçš„è§£é‡Šæ ‡å‡†ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "ç›®æ ‡è¯•éªŒæ¨¡æ‹Ÿè¿›é˜¶"
    ]
  },
  {
    "objectID": "1092-double-machine-learning.html",
    "href": "1092-double-machine-learning.html",
    "title": "Double Machine Learningï¼šåŒé‡æœºå™¨å­¦ä¹ åœ¨å› æœæ¨æ–­ä¸­çš„åº”ç”¨",
    "section": "",
    "text": "ä¼ ç»Ÿå› æœæ¨æ–­æ–¹æ³•é¢ä¸´ä¸¤ä¸ªæ ¸å¿ƒæŒ‘æˆ˜ï¼šé«˜ç»´æ§åˆ¶å˜é‡å’Œå¤æ‚çš„éçº¿æ€§å…³ç³»ã€‚å½“åå˜é‡ç»´åº¦è¾ƒé«˜æ—¶ï¼Œä¼ ç»Ÿå‚æ•°åŒ–æ–¹æ³•éš¾ä»¥å‡†ç¡®ä¼°è®¡å› æœæ•ˆåº”ï¼Œè€Œç›´æ¥åº”ç”¨æœºå™¨å­¦ä¹ æ–¹æ³•åˆä¼šå¼•å…¥æ­£åˆ™åŒ–åå·®ã€‚åŒé‡æœºå™¨å­¦ä¹ ï¼ˆDouble Machine Learning, DMLï¼‰ç”± Chernozhukov ç­‰äººäº 2018 å¹´æå‡ºï¼Œä¸ºè¿™ä¸€é—®é¢˜æä¾›äº†ç†è®ºä¸¥è°¨ä¸”å®è·µå¯è¡Œçš„è§£å†³æ–¹æ¡ˆã€‚\nDML çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†å› æœæ•ˆåº”ä¼°è®¡é—®é¢˜åˆ†è§£ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šé¢„æµ‹å¤„ç†å˜é‡ã€é¢„æµ‹ç»“å±€å˜é‡ã€ä¼°è®¡å› æœæ•ˆåº”ã€‚é€šè¿‡å¼•å…¥** Neyman æ­£äº¤æ€§å’Œäº¤å‰æ‹Ÿåˆ**ï¼ŒDML å¯ä»¥åœ¨ä¿æŒå› æœä¼°è®¡ä¸€è‡´æ€§çš„åŒæ—¶ï¼Œå……åˆ†åˆ©ç”¨æœºå™¨å­¦ä¹ çš„é¢„æµ‹èƒ½åŠ›ã€‚\næœ¬æ–‡å°†ä»ç†è®ºèƒŒæ™¯ã€æ–¹æ³•åŸç†ã€æ•°æ®å‡†å¤‡ã€åˆ†ææµç¨‹ã€ä»£ç å®ç°å’Œç»“æœè§£è¯»ç­‰æ–¹é¢ï¼Œç³»ç»Ÿä»‹ç» DML åœ¨ R è¯­è¨€ä¸­çš„å®è·µåº”ç”¨ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "åŒé‡æœºå™¨å­¦ä¹  (DML)"
    ]
  },
  {
    "objectID": "1092-double-machine-learning.html#å¼•è¨€",
    "href": "1092-double-machine-learning.html#å¼•è¨€",
    "title": "Double Machine Learningï¼šåŒé‡æœºå™¨å­¦ä¹ åœ¨å› æœæ¨æ–­ä¸­çš„åº”ç”¨",
    "section": "",
    "text": "ä¼ ç»Ÿå› æœæ¨æ–­æ–¹æ³•é¢ä¸´ä¸¤ä¸ªæ ¸å¿ƒæŒ‘æˆ˜ï¼šé«˜ç»´æ§åˆ¶å˜é‡å’Œå¤æ‚çš„éçº¿æ€§å…³ç³»ã€‚å½“åå˜é‡ç»´åº¦è¾ƒé«˜æ—¶ï¼Œä¼ ç»Ÿå‚æ•°åŒ–æ–¹æ³•éš¾ä»¥å‡†ç¡®ä¼°è®¡å› æœæ•ˆåº”ï¼Œè€Œç›´æ¥åº”ç”¨æœºå™¨å­¦ä¹ æ–¹æ³•åˆä¼šå¼•å…¥æ­£åˆ™åŒ–åå·®ã€‚åŒé‡æœºå™¨å­¦ä¹ ï¼ˆDouble Machine Learning, DMLï¼‰ç”± Chernozhukov ç­‰äººäº 2018 å¹´æå‡ºï¼Œä¸ºè¿™ä¸€é—®é¢˜æä¾›äº†ç†è®ºä¸¥è°¨ä¸”å®è·µå¯è¡Œçš„è§£å†³æ–¹æ¡ˆã€‚\nDML çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†å› æœæ•ˆåº”ä¼°è®¡é—®é¢˜åˆ†è§£ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šé¢„æµ‹å¤„ç†å˜é‡ã€é¢„æµ‹ç»“å±€å˜é‡ã€ä¼°è®¡å› æœæ•ˆåº”ã€‚é€šè¿‡å¼•å…¥** Neyman æ­£äº¤æ€§å’Œäº¤å‰æ‹Ÿåˆ**ï¼ŒDML å¯ä»¥åœ¨ä¿æŒå› æœä¼°è®¡ä¸€è‡´æ€§çš„åŒæ—¶ï¼Œå……åˆ†åˆ©ç”¨æœºå™¨å­¦ä¹ çš„é¢„æµ‹èƒ½åŠ›ã€‚\næœ¬æ–‡å°†ä»ç†è®ºèƒŒæ™¯ã€æ–¹æ³•åŸç†ã€æ•°æ®å‡†å¤‡ã€åˆ†ææµç¨‹ã€ä»£ç å®ç°å’Œç»“æœè§£è¯»ç­‰æ–¹é¢ï¼Œç³»ç»Ÿä»‹ç» DML åœ¨ R è¯­è¨€ä¸­çš„å®è·µåº”ç”¨ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "åŒé‡æœºå™¨å­¦ä¹  (DML)"
    ]
  },
  {
    "objectID": "1092-double-machine-learning.html#ç†è®ºèƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "href": "1092-double-machine-learning.html#ç†è®ºèƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "title": "Double Machine Learningï¼šåŒé‡æœºå™¨å­¦ä¹ åœ¨å› æœæ¨æ–­ä¸­çš„åº”ç”¨",
    "section": "ç†è®ºèƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "text": "ç†è®ºèƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯\n\nå› æœæ¨æ–­çš„æ ¸å¿ƒé—®é¢˜\nå› æœæ¨æ–­çš„æ ¸å¿ƒç›®æ ‡æ˜¯ä¼°è®¡å¤„ç†æ•ˆåº”ï¼ˆTreatment Effectï¼‰ã€‚åœ¨è§‚æµ‹æ€§ç ”ç©¶ä¸­ï¼Œç ”ç©¶è€…é€šå¸¸å…³æ³¨å¹³å‡å¤„ç†æ•ˆåº”ï¼ˆATEï¼‰æˆ–æ¡ä»¶å¹³å‡å¤„ç†æ•ˆåº”ï¼ˆCATEï¼‰ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä»¥ä¸‹å› æœç»“æ„ï¼š\n\\[ Y = D\\theta + g(X) + \\varepsilon \\]\nå…¶ä¸­ï¼š - \\(Y\\) æ˜¯ç»“å±€å˜é‡ - \\(D\\) æ˜¯å¤„ç†å˜é‡ï¼ˆäºŒå…ƒæˆ–è¿ç»­ï¼‰ - \\(X\\) æ˜¯é«˜ç»´åå˜é‡ - \\(g(X)\\) æ˜¯æœªçŸ¥å‡½æ•° - \\(\\theta\\) æ˜¯å› æœæ•ˆåº”å‚æ•°ï¼ˆç›®æ ‡ä¼°è®¡é‡ï¼‰ - \\(\\varepsilon\\) æ˜¯è¯¯å·®é¡¹\nå½“ \\(X\\) ç»´åº¦è¾ƒä½æ—¶ï¼Œå¯ä»¥ä½¿ç”¨çº¿æ€§å›å½’ä¼°è®¡ \\(\\theta\\)ã€‚ä½†å½“ \\(X\\) ç»´åº¦å¾ˆé«˜ï¼ˆä¾‹å¦‚ \\(p &gt; n\\)ï¼‰ï¼Œæˆ–è€… \\(g(X)\\) ä¸ \\(g_D(X)\\) æ˜¯å¤æ‚çš„éçº¿æ€§å‡½æ•°æ—¶ï¼Œä¼ ç»Ÿæ–¹æ³•å¤±æ•ˆã€‚\n\n\næ­£åˆ™åŒ–åå·®é—®é¢˜\nç›´æ¥ä½¿ç”¨æœºå™¨å­¦ä¹ æ–¹æ³•ï¼ˆå¦‚éšæœºæ£®æ—ã€XGBoostï¼‰ä¼°è®¡å› æœæ•ˆåº”ä¼šé‡åˆ°æ­£åˆ™åŒ–åå·®é—®é¢˜ã€‚æœºå™¨å­¦ä¹ æ¨¡å‹çš„æ­£åˆ™åŒ–è™½ç„¶æé«˜äº†é¢„æµ‹æ€§èƒ½ï¼Œä½†ä¼šå¯¼è‡´å› æœæ•ˆåº”ä¼°è®¡çš„æœ‰åæ€§ã€‚å…·ä½“è€Œè¨€ï¼š\n\\[ \\hat{\\theta}_{ML} - \\theta = O_p(n^{-1/2}) + O_p(n^{-1/4}) \\]\nå…¶ä¸­ç¬¬ä¸€é¡¹æ˜¯ç»Ÿè®¡è¯¯å·®é¡¹ï¼Œç¬¬äºŒé¡¹æ˜¯æ­£åˆ™åŒ–åå·®é¡¹ã€‚å½“æ ·æœ¬é‡ \\(n\\) è¶³å¤Ÿå¤§æ—¶ï¼Œæ­£åˆ™åŒ–åå·®ä¸»å¯¼äº†è¯¯å·®ã€‚\n\n\nDML çš„è§£å†³æ–¹æ¡ˆ\nDML é€šè¿‡ä»¥ä¸‹ä¸¤ä¸ªå…³é”®æŠ€æœ¯è§£å†³äº†æ­£åˆ™åŒ–åå·®é—®é¢˜ï¼š\n\nNeyman æ­£äº¤æ€§ï¼šæ„å»ºå¯¹å‚æ•°æ‰°åŠ¨å…·æœ‰â€ç¨³å¥æ€§â€çš„ä¼°è®¡æ–¹ç¨‹ï¼Œä½¿å¾—å¤„ç†å˜é‡å’Œç»“å±€å˜é‡çš„ä¼°è®¡è¯¯å·®ä¸ä¼šå½±å“å› æœæ•ˆåº”çš„æ”¶æ•›é€Ÿåº¦ã€‚\näº¤å‰æ‹Ÿåˆï¼šå°†æ ·æœ¬åˆ†ä¸ºå¤šä¸ªå­é›†ï¼Œä½¿ç”¨äº¤å‰éªŒè¯çš„æ–¹å¼è¿›è¡Œé¢„æµ‹å’Œä¼°è®¡ï¼Œé¿å…è¿‡æ‹Ÿåˆé—®é¢˜ã€‚\n\né€šè¿‡è¿™ä¸¤ä¸ªæŠ€æœ¯ï¼ŒDML å®ç°äº† \\(\\sqrt{n}\\) çš„ä¸€è‡´æ€§å’Œæ¸è¿‘æ­£æ€æ€§ï¼š \\[ \\sqrt{n}(\\hat{\\theta}_{DML} - \\theta) \\overset{d}{\\to} N(0, \\sigma^2) \\]\n\n\né€‚ç”¨åœºæ™¯\nDML ç‰¹åˆ«é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š\n\né«˜ç»´åå˜é‡ï¼šåå˜é‡æ•°é‡ \\(p\\) å¯èƒ½è¶…è¿‡æ ·æœ¬é‡ \\(n\\)\néçº¿æ€§å…³ç³»ï¼šå¤„ç†å˜é‡å’Œç»“å±€å˜é‡ä¸åå˜é‡çš„å…³ç³»ä¸ºå¤æ‚çš„éçº¿æ€§å…³ç³»\nå¼‚è´¨æ€§å¤„ç†æ•ˆåº”ï¼šéœ€è¦ä¼°è®¡å­ç¾¤çš„å¤„ç†æ•ˆåº”ï¼ˆCATEï¼‰\nè§‚æµ‹æ€§ç ”ç©¶ï¼šéœ€è¦æ§åˆ¶å¤§é‡æ··æ·†å› ç´ ä½†éšæœºå¯¹ç…§è¯•éªŒä¸å¯è¡Œ\n\nå¸¸è§åº”ç”¨é¢†åŸŸåŒ…æ‹¬ï¼š - åŠ³åŠ¨ç»æµå­¦ï¼šä¼°è®¡æ•™è‚²æˆ–åŸ¹è®­é¡¹ç›®çš„å›æŠ¥ - åŒ»å­¦ç ”ç©¶ï¼šè¯„ä¼°æ²»ç–—æ•ˆæœï¼Œæ§åˆ¶å¤§é‡åŸºçº¿å˜é‡ - å¸‚åœºè¥é”€ï¼šåˆ†æè¥é”€æ´»åŠ¨çš„å› æœæ•ˆåº” - æ”¿ç­–è¯„ä¼°ï¼šä¼°è®¡æ”¿ç­–å¹²é¢„çš„å½±å“",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "åŒé‡æœºå™¨å­¦ä¹  (DML)"
    ]
  },
  {
    "objectID": "1092-double-machine-learning.html#æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "href": "1092-double-machine-learning.html#æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "title": "Double Machine Learningï¼šåŒé‡æœºå™¨å­¦ä¹ åœ¨å› æœæ¨æ–­ä¸­çš„åº”ç”¨",
    "section": "æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "text": "æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ\n\nDML çš„ä¸‰æ­¥æµç¨‹\nDML çš„ä¼°è®¡æµç¨‹å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š\n\nç¬¬ä¸€æ­¥ï¼šæ®‹å·®æå–\nä¼°è®¡ä¸¤ä¸ªæœºå™¨å­¦ä¹ æ¨¡å‹ï¼š\n\nç»“å±€æ¨¡å‹ï¼š\\(Y = \\mu(X) + \\epsilon_Y\\)\n\né¢„æµ‹ç»“å±€å˜é‡ \\(Y\\)ï¼Œå¾—åˆ°æ®‹å·® \\(V = Y - \\hat{\\mu}(X)\\)\n\nå¤„ç†æ¨¡å‹ï¼š\\(D = m(X) + \\epsilon_D\\)\n\né¢„æµ‹å¤„ç†å˜é‡ \\(D\\)ï¼Œå¾—åˆ°æ®‹å·® \\(W = D - \\hat{m}(X)\\)\n\n\n\n\nç¬¬äºŒæ­¥ï¼šå› æœæ•ˆåº”ä¼°è®¡\nä½¿ç”¨æå–çš„æ®‹å·®ä¼°è®¡å› æœæ•ˆåº”ï¼š \\[ \\hat{\\theta} = \\frac{\\frac{1}{n}\\sum_{i=1}^n W_i V_i}{\\frac{1}{n}\\sum_{i=1}^n W_i^2} \\]\nè¿™ä¸ªå…¬å¼ç›´è§‚åœ°è¡¨ç¤ºï¼šç”¨å¤„ç†å˜é‡çš„æ®‹å·®è§£é‡Šç»“å±€å˜é‡çš„æ®‹å·®ã€‚\n\n\nç¬¬ä¸‰æ­¥ï¼šæ¨æ–­ä¸ç½®ä¿¡åŒºé—´\né€šè¿‡æ¸è¿‘æ­£æ€æ€§æ„å»ºç½®ä¿¡åŒºé—´ï¼Œè¿›è¡Œå‡è®¾æ£€éªŒã€‚\n\n\n\näº¤å‰æ‹Ÿåˆæœºåˆ¶\nä¸ºäº†é¿å…â€è‡ªä¸¾â€é—®é¢˜ï¼ˆå³ç”¨åŒä¸€ä¸ªæ ·æœ¬æ—¢è®­ç»ƒæ¨¡å‹åˆä¼°è®¡å‚æ•°ï¼‰ï¼ŒDML é‡‡ç”¨äº¤å‰æ‹Ÿåˆï¼š\n\nå°†æ ·æœ¬éšæœºåˆ†ä¸º \\(K\\) æŠ˜ï¼ˆé€šå¸¸ \\(K=5\\) æˆ– \\(10\\)ï¼‰\nå¯¹äºæ¯ä¸€æŠ˜ï¼š\n\nç”¨å…¶ä»– \\(K-1\\) æŠ˜è®­ç»ƒæœºå™¨å­¦ä¹ æ¨¡å‹\nåœ¨å½“å‰æŠ˜ä¸Šé¢„æµ‹å¹¶æå–æ®‹å·®\n\nåˆå¹¶æ‰€æœ‰æŠ˜çš„æ®‹å·®ï¼Œä¼°è®¡å› æœæ•ˆåº”\n\n\n\næ­£äº¤æ€§æ¡ä»¶çš„ç›´è§‚è§£é‡Š\næ­£äº¤æ€§æ¡ä»¶çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šæˆ‘ä»¬æ„é€ çš„ä¼°è®¡é‡å¯¹å¤„ç†å˜é‡å’Œç»“å±€å˜é‡çš„ä¼°è®¡è¯¯å·®â€ä¸æ•æ„Ÿâ€ã€‚å³ä½¿ \\(\\hat{\\mu}(X)\\) å’Œ \\(\\hat{m}(X)\\) çš„ä¼°è®¡ç²¾åº¦ä¸å¤Ÿé«˜ï¼Œåªè¦å®ƒä»¬æ»¡è¶³ä¸€å®šçš„æ”¶æ•›é€Ÿåº¦ï¼Œ\\(\\hat{\\theta}\\) çš„ä¼°è®¡ç²¾åº¦ä»ç„¶å¯ä»¥è¾¾åˆ° \\(\\sqrt{n}\\) é˜¶ã€‚\nè¿™å°±åƒè®¾è®¡ä¸€ä¸ªç¨³å¥çš„æ»¤æ³¢å™¨ï¼šå³ä½¿è¾“å…¥ä¿¡å·æœ‰å™ªå£°ï¼ˆä¼°è®¡è¯¯å·®ï¼‰ï¼Œæ»¤æ³¢å™¨çš„è¾“å‡ºä»ç„¶ç¨³å®šã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "åŒé‡æœºå™¨å­¦ä¹  (DML)"
    ]
  },
  {
    "objectID": "1092-double-machine-learning.html#æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "href": "1092-double-machine-learning.html#æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "title": "Double Machine Learningï¼šåŒé‡æœºå™¨å­¦ä¹ åœ¨å› æœæ¨æ–­ä¸­çš„åº”ç”¨",
    "section": "æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "text": "æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰\n\næ•°æ®ç»“æ„è¦æ±‚\nDML åˆ†æéœ€è¦çš„æ•°æ®ç»“æ„é€šå¸¸åŒ…å«ï¼š\n\nç»“å±€å˜é‡ï¼ˆ\\(Y\\)ï¼‰ï¼šè¿ç»­å˜é‡æˆ–äºŒå…ƒå˜é‡\nå¤„ç†å˜é‡ï¼ˆ\\(D\\)ï¼‰ï¼šäºŒå…ƒå˜é‡ï¼ˆç»å…¸ ATE é—®é¢˜ï¼‰æˆ–è¿ç»­å˜é‡\nåå˜é‡ï¼ˆ\\(X\\)ï¼‰ï¼šå¯èƒ½åŒ…å«å¤§é‡è¿ç»­å˜é‡å’Œåˆ†ç±»å˜é‡\n\n\n\nç¤ºä¾‹æ•°æ®é›†\næœ¬æ–‡ä½¿ç”¨ä¸€ä¸ªåˆæˆçš„é«˜ç»´æ•°æ®é›†æ¨¡æ‹Ÿæ•™è‚²å›æŠ¥é—®é¢˜ï¼š\n\nset.seed(20250118)\n\n# å‚æ•°è®¾ç½®\nn &lt;- 1000  # æ ·æœ¬é‡\np &lt;- 50    # åå˜é‡ç»´åº¦\n\n# ç”Ÿæˆé«˜ç»´åå˜é‡\nX &lt;- matrix(rnorm(n * p), n, p)\n\n# å®šä¹‰çœŸå®å‡½æ•°ï¼ˆéçº¿æ€§ï¼‰\ng_X &lt;- function(x) {\n  0.3 * x[, 1] + 0.2 * sin(x[, 2]) + 0.1 * x[, 3]^2\n}\n\nm_X &lt;- function(x) {\n  0.5 * plogis(x[, 1] + 0.3 * x[, 2])\n}\n\n# ç”Ÿæˆå¤„ç†å˜é‡ï¼ˆäºŒå…ƒï¼‰\nprob_D &lt;- 0.5 + 0.2 * tanh(m_X(X))\nD &lt;- rbinom(n, 1, prob_D)\n\n# ç”Ÿæˆç»“å±€å˜é‡\ntheta_true &lt;- 0.5  # çœŸå®å› æœæ•ˆåº”\nY &lt;- D * theta_true + g_X(X) + rnorm(n, sd = 0.5)\n\n# æ„å»ºæ•°æ®æ¡†ï¼ˆå°†çŸ©é˜µåˆ—å±•å¼€ä¸ºç‹¬ç«‹åˆ—ï¼‰\ndata_dml &lt;- data.frame(\n  Y = Y,\n  D = D,\n  X\n)\n\n# ä¸ºåå˜é‡å‘½å\ncolnames(data_dml)[3:(p+2)] &lt;- paste0(\"V\", 1:p)\n\n# æŸ¥çœ‹æ•°æ®ç»“æ„\nstr(data_dml)\n## 'data.frame':    1000 obs. of  52 variables:\n##  $ Y  : num  -0.343 -0.375 -0.944 0.982 0.614 ...\n##  $ D  : int  1 1 0 1 1 1 1 1 1 0 ...\n##  $ V1 : num  -1.25 -1.52 -2 1.98 1.76 ...\n##  $ V2 : num  -0.654 -0.195 -0.241 -0.331 1.402 ...\n##  $ V3 : num  -1.119 0.101 1.08 -2.354 0.188 ...\n##  $ V4 : num  0.186 -0.712 -1.213 -0.367 2.079 ...\n##  $ V5 : num  0.4447 0.6847 0.0272 0.0605 0.8271 ...\n##  $ V6 : num  -0.1603 -0.9776 -0.3513 1.3205 0.0994 ...\n##  $ V7 : num  0.43 -1.3559 -0.5298 0.0708 0.4582 ...\n##  $ V8 : num  -0.611 0.497 -1.062 -0.722 -0.655 ...\n##  $ V9 : num  0.3157 0.5127 -2.9572 -1.3882 0.0391 ...\n##  $ V10: num  -0.883 -0.866 0.235 0.809 0.946 ...\n##  $ V11: num  -0.572 0.136 -1.694 0.91 1.346 ...\n##  $ V12: num  -0.301 -0.146 -0.571 -0.277 -0.596 ...\n##  $ V13: num  -1.465 0.0143 -1.2899 0.8969 -1.383 ...\n##  $ V14: num  0.4519 0.7273 0.0545 -2.1978 -0.8163 ...\n##  $ V15: num  0.556 -2.157 -1.584 0.717 0.194 ...\n##  $ V16: num  -0.175 0.324 -1.266 0.142 1.199 ...\n##  $ V17: num  -0.82 0.846 -1.003 1.574 0.219 ...\n##  $ V18: num  -1.037 -1.078 -0.568 -1.901 0.304 ...\n##  $ V19: num  0.316 -0.889 0.325 -0.338 1.456 ...\n##  $ V20: num  1.7239 -0.0584 -1.6682 0.5034 0.096 ...\n##  $ V21: num  0.161 1.36 1.192 -0.62 0.807 ...\n##  $ V22: num  -0.315 0.776 0.397 -0.656 -0.986 ...\n##  $ V23: num  0.8757 1.461 0.3028 1.012 0.0714 ...\n##  $ V24: num  -0.418 -1.15 0.314 0.898 -0.187 ...\n##  $ V25: num  0.785 -0.683 -0.593 -0.752 -0.285 ...\n##  $ V26: num  -1.363 0.299 -1.457 -0.629 0.331 ...\n##  $ V27: num  2.382 0.655 0.354 0.352 -0.428 ...\n##  $ V28: num  0.502 -0.583 -0.888 0.335 1.388 ...\n##  $ V29: num  -1.11 1.78 1.54 0.15 -0.66 ...\n##  $ V30: num  -0.778 0.781 1.986 0.647 1.398 ...\n##  $ V31: num  0.462 0.107 0.362 0.288 2.018 ...\n##  $ V32: num  -0.882 0.858 -1.115 0.124 1.338 ...\n##  $ V33: num  0.766 0.025 -1.523 1.6 1.608 ...\n##  $ V34: num  -0.4592 0.647 -0.5579 1.0725 -0.0627 ...\n##  $ V35: num  1.373 -0.466 -0.2508 2.1517 0.0285 ...\n##  $ V36: num  0.689 0.508 -0.703 0.861 -0.53 ...\n##  $ V37: num  0.735 0.202 0.362 -1.021 1.5 ...\n##  $ V38: num  -1.01 0.608 -0.63 -0.48 -0.321 ...\n##  $ V39: num  -1.1893 -1.1212 -0.0418 0.1542 -2.425 ...\n##  $ V40: num  0.671 -2.187 0.922 -0.654 1.563 ...\n##  $ V41: num  0.52 1.138 -0.858 0.733 2.415 ...\n##  $ V42: num  -0.00234 0.9866 0.66733 -1.24163 -2.44053 ...\n##  $ V43: num  -0.554 -0.627 0.367 -0.696 -1.305 ...\n##  $ V44: num  -1.381 -0.857 -2.283 0.643 0.214 ...\n##  $ V45: num  0.4336 1.2097 -0.0107 0.7792 -1.6537 ...\n##  $ V46: num  1.978 -0.664 0.657 -0.245 0.852 ...\n##  $ V47: num  -0.795 -0.371 1.148 -0.631 0.328 ...\n##  $ V48: num  0.815 -0.437 0.664 2.337 -1.756 ...\n##  $ V49: num  0.715 -0.906 1.661 -0.736 -0.626 ...\n##  $ V50: num  0.675 -0.445 -0.523 -0.415 -1.35 ...\n\n\n\nå˜é‡ç¼–ç ä¸é¢„å¤„ç†\nåœ¨å®é™…åº”ç”¨ä¸­ï¼Œéœ€è¦æ³¨æ„ï¼š\n\n# æ£€æŸ¥ç¼ºå¤±å€¼\nsum(is.na(data_dml))\n## [1] 0\n\n# æŸ¥çœ‹å¤„ç†å˜é‡åˆ†å¸ƒ\ntable(data_dml$D) / n\n## \n##     0     1 \n## 0.458 0.542",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "åŒé‡æœºå™¨å­¦ä¹  (DML)"
    ]
  },
  {
    "objectID": "1092-double-machine-learning.html#åˆ†ææµç¨‹æ­¥éª¤",
    "href": "1092-double-machine-learning.html#åˆ†ææµç¨‹æ­¥éª¤",
    "title": "Double Machine Learningï¼šåŒé‡æœºå™¨å­¦ä¹ åœ¨å› æœæ¨æ–­ä¸­çš„åº”ç”¨",
    "section": "åˆ†ææµç¨‹æ­¥éª¤",
    "text": "åˆ†ææµç¨‹æ­¥éª¤\n\nDML åˆ†æçš„å®Œæ•´æµç¨‹\n\næ¢ç´¢æ€§æ•°æ®åˆ†æï¼šæ£€æŸ¥å˜é‡åˆ†å¸ƒã€ç›¸å…³æ€§\næ¨¡å‹é€‰æ‹©ï¼šé€‰æ‹©æœºå™¨å­¦ä¹ åŸºæ¨¡å‹å’Œå› æœæ•ˆåº”ä¼°è®¡æ–¹æ³•\nDML ä¼°è®¡ï¼šåº”ç”¨ DoubleML åŒ…è¿›è¡Œä¼°è®¡\nè¯Šæ–­æ£€éªŒï¼šæ£€éªŒæ­£äº¤æ€§ã€å¹³è¡¡æ€§ç­‰å‡è®¾\næ•æ„Ÿæ€§åˆ†æï¼šæ£€éªŒç»“æœçš„ç¨³å¥æ€§\nç»“æœè§£é‡Šä¸æŠ¥å‘Šï¼šæŠ¥å‘Šæ•ˆåº”é‡ã€ç½®ä¿¡åŒºé—´ã€ç»Ÿè®¡æ˜¾è‘—æ€§\n\n\n\nç¬¬ä¸€æ­¥ï¼šæ¢ç´¢æ€§åˆ†æ\n\n# ç»“å±€å˜é‡åˆ†å¸ƒ\nhist(data_dml$Y, main = \"Outcome Distribution\", xlab = \"Y\")\n\n\n\n\n\n\n\n\n# å¤„ç†ç»„å’Œå¯¹ç…§ç»„çš„ç»“å±€æ¯”è¾ƒ\nboxplot(Y ~ D, data = data_dml,\n        main = \"Outcome by Treatment Status\",\n        xlab = \"Treatment\", ylab = \"Outcome\")\n\n\n\n\n\n\n\n\n# åå˜é‡ä¸å¤„ç†å˜é‡çš„ç›¸å…³æ€§ï¼ˆå‰10ä¸ªå˜é‡ï¼‰\ncor_mat &lt;- cor(cbind(D = data_dml$D, data_dml[, paste0(\"V\", 1:10)]))\nround(cor_mat[1, ], 3)\n##      D     V1     V2     V3     V4     V5     V6     V7     V8     V9    V10 \n##  1.000  0.078  0.057 -0.071  0.036 -0.011 -0.015 -0.068  0.059 -0.004  0.016\n\n\n\nç¬¬äºŒæ­¥ï¼šæ¨¡å‹é€‰æ‹©\nDML çš„å…³é”®é€‰æ‹©åŒ…æ‹¬ï¼š\n\næœºå™¨å­¦ä¹ åŸºæ¨¡å‹ï¼šç”¨äºä¼°è®¡ \\(\\mu(X)\\) å’Œ \\(m(X)\\)\n\néšæœºæ£®æ—ï¼ˆregr.rangerï¼‰\nLassoï¼ˆregr.glmnetï¼‰\næ¢¯åº¦æå‡ï¼ˆregr.xgboostï¼‰\n\nå› æœæ•ˆåº”ä¼°è®¡æ–¹æ³•ï¼š\n\nçº¿æ€§ DMLï¼ˆirmï¼‰\néçº¿æ€§ DMLï¼ˆdmlï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "åŒé‡æœºå™¨å­¦ä¹  (DML)"
    ]
  },
  {
    "objectID": "1092-double-machine-learning.html#ä»£ç å®ç°ä¸é€æ®µè§£é‡Š",
    "href": "1092-double-machine-learning.html#ä»£ç å®ç°ä¸é€æ®µè§£é‡Š",
    "title": "Double Machine Learningï¼šåŒé‡æœºå™¨å­¦ä¹ åœ¨å› æœæ¨æ–­ä¸­çš„åº”ç”¨",
    "section": "ä»£ç å®ç°ä¸é€æ®µè§£é‡Š",
    "text": "ä»£ç å®ç°ä¸é€æ®µè§£é‡Š\n\nç¬¬ä¸€æ­¥ï¼šå®‰è£…å’ŒåŠ è½½åŒ…\n\n# å®‰è£… DoubleMLï¼ˆå¦‚æœæœªå®‰è£…ï¼‰\n# install.packages(\"DoubleML\")\n\n# å®‰è£… mlr3 æœºå™¨å­¦ä¹ æ¡†æ¶\n# install.packages(\"mlr3\")\n# install.packages(\"mlr3learners\")\n# install.packages(\"paradox\")\n\n# å®‰è£…ç‰¹å®šçš„å­¦ä¹ å™¨\n# install.packages(\"ranger\")\n# install.packages(\"glmnet\")\n# install.packages(\"xgboost\")\n\n\n# é‡æ–°åŠ è½½ï¼ˆç¡®ä¿ç¯å¢ƒå¹²å‡€ï¼‰\nlibrary(DoubleML)\nlibrary(mlr3learners)\nlibrary(paradox)\nlibrary(data.table)\n\n\n\nç¬¬äºŒæ­¥ï¼šåˆ›å»º DoubleML æ•°æ®å¯¹è±¡\n\n# å°†æ•°æ®è½¬æ¢ä¸º data.table\ndt &lt;- data.table(data_dml)\n\n# å®šä¹‰åˆ—å\noutcome_col &lt;- \"Y\"\ntreatment_col &lt;- \"D\"\ncovariate_cols &lt;- paste0(\"V\", 1:p)\n\n# åˆ›å»º DoubleMLData å¯¹è±¡\ndml_data &lt;- DoubleMLData$new(\n  dt,\n  y_col = outcome_col,\n  d_cols = treatment_col,\n  x_cols = covariate_cols\n)\n\n# æŸ¥çœ‹æ•°æ®å¯¹è±¡\nprint(dml_data)\n## ================= DoubleMLData Object ==================\n## \n## \n## ------------------ Data summary      ------------------\n## Outcome variable: Y\n## Treatment variable(s): D\n## Covariates: V1, V2, V3, V4, V5, V6, V7, V8, V9, V10, V11, V12, V13, V14, V15, V16, V17, V18, V19, V20, V21, V22, V23, V24, V25, V26, V27, V28, V29, V30, V31, V32, V33, V34, V35, V36, V37, V38, V39, V40, V41, V42, V43, V44, V45, V46, V47, V48, V49, V50\n## Instrument(s): \n## Selection variable: \n## No. Observations: 1000\n\nè§£é‡Šï¼š - DoubleMLData æ˜¯ DML åˆ†æçš„æ ¸å¿ƒæ•°æ®å®¹å™¨ - y_col æŒ‡å®šç»“å±€å˜é‡ - d_cols æŒ‡å®šå¤„ç†å˜é‡ - x_cols æŒ‡å®šåå˜é‡åˆ—è¡¨\n\n\nç¬¬ä¸‰æ­¥ï¼šè®¾ç½®æœºå™¨å­¦ä¹ åŸºæ¨¡å‹\n\n# è®¾ç½®éšæœºæ£®æ—ä½œä¸ºåŸºæ¨¡å‹\n# ml_g: å›å½’å­¦ä¹ å™¨ï¼ˆé¢„æµ‹è¿ç»­ç»“å±€å˜é‡ Yï¼‰\n# ml_m: åˆ†ç±»å­¦ä¹ å™¨ï¼ˆé¢„æµ‹äºŒå…ƒå¤„ç†å˜é‡ Dï¼‰\nml_g &lt;- lrn(\"regr.ranger\", num.trees = 500, min.node.size = 5, max.depth = 7)\nml_m &lt;- lrn(\"classif.ranger\", num.trees = 500, min.node.size = 5, max.depth = 7,\n             predict_type = \"prob\")\n\n# è®¾ç½® Lasso ä½œä¸ºåŸºæ¨¡å‹ï¼ˆå¤‡é€‰ï¼‰\nml_g_lasso &lt;- lrn(\"regr.glmnet\", alpha = 1)\nml_m_lasso &lt;- lrn(\"classif.glmnet\", alpha = 1, predict_type = \"prob\")\n\n# è®¾ç½® XGBoost ä½œä¸ºåŸºæ¨¡å‹ï¼ˆå¤‡é€‰ï¼‰\nml_g_xgb &lt;- lrn(\"regr.xgboost\", nrounds = 100, eta = 0.1, max_depth = 6)\nml_m_xgb &lt;- lrn(\"classif.xgboost\", nrounds = 100, eta = 0.1, max_depth = 6,\n                predict_type = \"prob\")\n\nè§£é‡Šï¼š - ml_gï¼šç”¨äºé¢„æµ‹ç»“å±€å˜é‡ \\(Y\\) çš„å›å½’æ¨¡å‹ï¼ˆg for g-functionï¼‰ - ml_mï¼šç”¨äºé¢„æµ‹å¤„ç†å˜é‡ \\(D\\) çš„åˆ†ç±»æ¨¡å‹ï¼ˆm for m-functionï¼‰ - å› ä¸º \\(D\\) æ˜¯äºŒå…ƒå˜é‡ï¼Œå¿…é¡»ä½¿ç”¨åˆ†ç±»å­¦ä¹ å™¨ï¼ˆclassif.*ï¼‰ - predict_type = \"prob\" ç”¨äºé¢„æµ‹å¤„ç†æ¦‚ç‡ - mlr3 æä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œå¯ä»¥è½»æ¾åˆ‡æ¢ä¸åŒçš„æœºå™¨å­¦ä¹ ç®—æ³• - éšæœºæ£®æ—å‚æ•°è¯´æ˜ï¼š - num.trees = 500ï¼šæ ‘çš„æ•°é‡ - min.node.size = 5ï¼šæœ€å°å¶å­èŠ‚ç‚¹å¤§å° - max.depth = 7ï¼šæ ‘çš„æœ€å¤§æ·±åº¦\n\n\nç¬¬å››æ­¥ï¼šåˆ›å»º DML ä¼°è®¡å™¨\n\n# åˆ›å»ºçº¿æ€§ DML ä¼°è®¡å™¨ï¼ˆä½¿ç”¨éšæœºæ£®æ—ï¼‰\ndml_obj_ranger &lt;- DoubleMLIRM$new(\n  dml_data,\n  ml_g = ml_g,\n  ml_m = ml_m,\n  n_folds = 5\n)\n\n# åˆ›å»ºçº¿æ€§ DML ä¼°è®¡å™¨ï¼ˆä½¿ç”¨ Lassoï¼‰\ndml_obj_lasso &lt;- DoubleMLIRM$new(\n  dml_data,\n  ml_g = ml_g_lasso,\n  ml_m = ml_m_lasso,\n  n_folds = 5\n)\n\n# åˆ›å»ºçº¿æ€§ DML ä¼°è®¡å™¨ï¼ˆä½¿ç”¨ XGBoostï¼‰\ndml_obj_xgb &lt;- DoubleMLIRM$new(\n  dml_data,\n  ml_g = ml_g_xgb,\n  ml_m = ml_m_xgb,\n  n_folds = 5\n)\n\nè§£é‡Šï¼š - DoubleMLIRMï¼šè¡¨ç¤º Iterated Robust Methodï¼ˆè¿­ä»£é²æ£’æ–¹æ³•ï¼‰ï¼Œæ˜¯ DML çš„ç»å…¸å®ç° - n_folds = 5ï¼šä½¿ç”¨ 5 æŠ˜äº¤å‰æ‹Ÿåˆ - å¯ä»¥æ¯”è¾ƒä¸åŒæœºå™¨å­¦ä¹ åŸºæ¨¡å‹çš„ç»“æœï¼Œæ£€éªŒç¨³å¥æ€§\n\n\nç¬¬äº”æ­¥ï¼šæ‹Ÿåˆæ¨¡å‹\n\n# æ‹Ÿåˆéšæœºæ£®æ— DML æ¨¡å‹\ndml_obj_ranger$fit()\n\n# æ‹Ÿåˆ Lasso DML æ¨¡å‹\ndml_obj_lasso$fit()\n\n# æ‹Ÿåˆ XGBoost DML æ¨¡å‹\ndml_obj_xgb$fit()\n\n\n\nç¬¬å…­æ­¥ï¼šæŸ¥çœ‹ä¼°è®¡ç»“æœ\n\n# éšæœºæ£®æ—ç»“æœ\nprint(\"Random Forest DML:\")\n## [1] \"Random Forest DML:\"\nprint(dml_obj_ranger$summary)\n## function (digits = max(3L, getOption(\"digits\") - 3L)) \n## {\n##     if (all(is.na(self$coef))) {\n##         message(\"fit() not yet called.\")\n##     }\n##     else {\n##         k = length(self$coef)\n##         table = matrix(NA_real_, ncol = 4, nrow = k)\n##         rownames(table) = names(self$coef)\n##         colnames(table) = c(\"Estimate.\", \"Std. Error\", \"t value\", \n##             \"Pr(&gt;|t|)\")\n##         table[, 1] = self$coef\n##         table[, 2] = self$se\n##         table[, 3] = self$t_stat\n##         table[, 4] = self$pval\n##         private$summary_table = table\n##         if (length(k)) {\n##             cat(\"Estimates and significance testing of the\", \n##                 \"effect of target variables\\n\")\n##             res = as.matrix(printCoefmat(private$summary_table, \n##                 digits = digits, P.values = TRUE, has.Pvalue = TRUE))\n##             cat(\"\\n\")\n##         }\n##         else {\n##             cat(\"No coefficients\\n\")\n##         }\n##         cat(\"\\n\")\n##         invisible(res)\n##     }\n## }\n## &lt;environment: 0x0000026a39d3bdc8&gt;\n\n# Lasso ç»“æœ\nprint(\"Lasso DML:\")\n## [1] \"Lasso DML:\"\nprint(dml_obj_lasso$summary)\n## function (digits = max(3L, getOption(\"digits\") - 3L)) \n## {\n##     if (all(is.na(self$coef))) {\n##         message(\"fit() not yet called.\")\n##     }\n##     else {\n##         k = length(self$coef)\n##         table = matrix(NA_real_, ncol = 4, nrow = k)\n##         rownames(table) = names(self$coef)\n##         colnames(table) = c(\"Estimate.\", \"Std. Error\", \"t value\", \n##             \"Pr(&gt;|t|)\")\n##         table[, 1] = self$coef\n##         table[, 2] = self$se\n##         table[, 3] = self$t_stat\n##         table[, 4] = self$pval\n##         private$summary_table = table\n##         if (length(k)) {\n##             cat(\"Estimates and significance testing of the\", \n##                 \"effect of target variables\\n\")\n##             res = as.matrix(printCoefmat(private$summary_table, \n##                 digits = digits, P.values = TRUE, has.Pvalue = TRUE))\n##             cat(\"\\n\")\n##         }\n##         else {\n##             cat(\"No coefficients\\n\")\n##         }\n##         cat(\"\\n\")\n##         invisible(res)\n##     }\n## }\n## &lt;environment: 0x0000026a3e519c08&gt;\n\n# XGBoost ç»“æœ\nprint(\"XGBoost DML:\")\n## [1] \"XGBoost DML:\"\nprint(dml_obj_xgb$summary)\n## function (digits = max(3L, getOption(\"digits\") - 3L)) \n## {\n##     if (all(is.na(self$coef))) {\n##         message(\"fit() not yet called.\")\n##     }\n##     else {\n##         k = length(self$coef)\n##         table = matrix(NA_real_, ncol = 4, nrow = k)\n##         rownames(table) = names(self$coef)\n##         colnames(table) = c(\"Estimate.\", \"Std. Error\", \"t value\", \n##             \"Pr(&gt;|t|)\")\n##         table[, 1] = self$coef\n##         table[, 2] = self$se\n##         table[, 3] = self$t_stat\n##         table[, 4] = self$pval\n##         private$summary_table = table\n##         if (length(k)) {\n##             cat(\"Estimates and significance testing of the\", \n##                 \"effect of target variables\\n\")\n##             res = as.matrix(printCoefmat(private$summary_table, \n##                 digits = digits, P.values = TRUE, has.Pvalue = TRUE))\n##             cat(\"\\n\")\n##         }\n##         else {\n##             cat(\"No coefficients\\n\")\n##         }\n##         cat(\"\\n\")\n##         invisible(res)\n##     }\n## }\n## &lt;environment: 0x0000026a3fc09540&gt;\n\nè§£é‡Šï¼š - coefï¼šå› æœæ•ˆåº”ä¼°è®¡å€¼ \\(\\hat{\\theta}\\) - std.errorï¼šæ ‡å‡†è¯¯ - t.statï¼št ç»Ÿè®¡é‡ - p.valueï¼šp å€¼ - [2.5%, 97.5%]ï¼š95% ç½®ä¿¡åŒºé—´\n\n\nç¬¬ä¸ƒæ­¥ï¼šç»“æœå¯è§†åŒ–\n\n# è·å–ç½®ä¿¡åŒºé—´\nci_ranger &lt;- dml_obj_ranger$confint()\nci_lasso &lt;- dml_obj_lasso$confint()\nci_xgb &lt;- dml_obj_xgb$confint()\n\n# æ•´åˆç»“æœ\nresults_df &lt;- data.frame(\n  Method = c(\"Random Forest\", \"Lasso\", \"XGBoost\"),\n  Estimate = c(\n    dml_obj_ranger$coef,\n    dml_obj_lasso$coef,\n    dml_obj_xgb$coef\n  ),\n  CI_lower = c(\n    ci_ranger[1],\n    ci_lasso[1],\n    ci_xgb[1]\n  ),\n  CI_upper = c(\n    ci_ranger[2],\n    ci_lasso[2],\n    ci_xgb[2]\n  )\n)\n\n# æ·»åŠ çœŸå®å€¼\nresults_df$True_Effect &lt;- theta_true\n\n# å¯è§†åŒ–\nlibrary(ggplot2)\n\nggplot(results_df, aes(x = Method, y = Estimate, color = Method)) +\n  geom_point(size = 4) +\n  geom_errorbar(aes(ymin = CI_lower, ymax = CI_upper), width = 0.2) +\n  geom_hline(yintercept = theta_true, linetype = \"dashed\", color = \"red\", linewidth = 1) +\n  labs(\n    title = \"DML ä¼°è®¡ç»“æœæ¯”è¾ƒ\",\n    subtitle = paste0(\"çœŸå®æ•ˆåº”ï¼š\", theta_true),\n    y = \"å› æœæ•ˆåº”ä¼°è®¡\",\n    x = \"æœºå™¨å­¦ä¹ åŸºæ¨¡å‹\",\n    caption = \"è™šçº¿è¡¨ç¤ºçœŸå®å› æœæ•ˆåº”\"\n  ) +\n  theme_minimal() +\n  theme(\n    legend.position = \"none\",\n    plot.title = element_text(hjust = 0.5, face = \"bold\"),\n    plot.subtitle = element_text(hjust = 0.5)\n  )\n\n\n\n\n\n\n\n\n\n\nç¬¬å…«æ­¥ï¼šæ¡ä»¶å¹³å‡å¤„ç†æ•ˆåº”ï¼ˆCATEï¼‰\nDML ä¸»è¦ä¼°è®¡å¹³å‡å¤„ç†æ•ˆåº”ï¼ˆATEï¼‰ï¼Œä½†ä¹Ÿå¯ä»¥é€šè¿‡é¢å¤–çš„æ­¥éª¤ä¼°è®¡æ¡ä»¶å¹³å‡å¤„ç†æ•ˆåº”ï¼ˆCATEï¼‰ã€‚ä¸€ç§å¸¸ç”¨æ–¹æ³•æ˜¯ä½¿ç”¨ Causal Forestï¼ˆå› æœæ£®æ—ï¼‰ï¼š\n\n# CATE ä¼°è®¡éœ€è¦ä½¿ç”¨ grf åŒ…çš„å› æœæ£®æ—\nlibrary(grf)\n\n# ä½¿ç”¨åŸå§‹æ•°æ®è®­ç»ƒå› æœæ£®æ—\n# æ³¨æ„ï¼šè¿™é‡Œ X éœ€è¦æ˜¯çŸ©é˜µæ ¼å¼\nX_matrix &lt;- as.matrix(data_dml[, paste0(\"V\", 1:p)])\nY_vector &lt;- data_dml$Y\nD_vector &lt;- data_dml$D\n\n# è®­ç»ƒå› æœæ£®æ—\ncf &lt;- causal_forest(X = X_matrix, Y = Y_vector, W = D_vector,\n                   num.trees = 2000,\n                   min.node.size = 5,\n                   sample.fraction = 0.4)\n\n# æŸ¥çœ‹å‰ 10 ä¸ªä¸ªä½“çš„ CATE\ncate_est &lt;- cf$predictions\nhead(cate_est, 10)\n##            [,1]\n##  [1,] 0.5650510\n##  [2,] 0.5505844\n##  [3,] 0.5717439\n##  [4,] 0.5805461\n##  [5,] 0.5932234\n##  [6,] 0.5743793\n##  [7,] 0.5758316\n##  [8,] 0.5784361\n##  [9,] 0.5570821\n## [10,] 0.5623617\n\n# CATE åˆ†å¸ƒ\nhist(cate_est, main = \"Conditional Average Treatment Effect Distribution\",\n     xlab = \"CATE\", breaks = 30, col = \"lightblue\")\n\n\n\n\n\n\n\n\n# CATE ä¸åå˜é‡çš„å…³ç³»\nplot(sort(X_matrix[, 1]), sort(cate_est),\n     type = \"l\", main = \"CATE vs First Covariate\",\n     xlab = \"Covariate 1\", ylab = \"CATE\")",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "åŒé‡æœºå™¨å­¦ä¹  (DML)"
    ]
  },
  {
    "objectID": "1092-double-machine-learning.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "href": "1092-double-machine-learning.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "title": "Double Machine Learningï¼šåŒé‡æœºå™¨å­¦ä¹ åœ¨å› æœæ¨æ–­ä¸­çš„åº”ç”¨",
    "section": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "text": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š\n\næ•ˆåº”é‡è§£é‡Š\nä»¥éšæœºæ£®æ— DML ç»“æœä¸ºä¾‹ï¼š\n\nä¼°è®¡å€¼ï¼š\\(\\hat{\\theta}\\) è¡¨ç¤ºå¤„ç†å˜é‡å¯¹ç»“å±€å˜é‡çš„å¹³å‡å› æœæ•ˆåº”ã€‚åœ¨æˆ‘ä»¬çš„æ¨¡æ‹Ÿæ•°æ®ä¸­ï¼ŒçœŸå®æ•ˆåº”ä¸º 0.5ã€‚\nç½®ä¿¡åŒºé—´ï¼šå¦‚æœ 95% ç½®ä¿¡åŒºé—´ä¸åŒ…å« 0ï¼Œåˆ™å¯ä»¥æ‹’ç»é›¶å‡è®¾ï¼ˆæ— å¤„ç†æ•ˆåº”ï¼‰ã€‚\nç»Ÿè®¡æ˜¾è‘—æ€§ï¼šp å€¼ &lt; 0.05 è¡¨ç¤ºåœ¨ 5% æ˜¾è‘—æ€§æ°´å¹³ä¸‹æ‹’ç»é›¶å‡è®¾ã€‚\n\n\n\næŠ¥å‘Šè§„èŒƒ\nåœ¨å­¦æœ¯æŠ¥å‘Šä¸­ï¼Œå»ºè®®æŒ‰ç…§ä»¥ä¸‹æ ¼å¼æŠ¥å‘Šï¼š\n\nâ€œæˆ‘ä»¬é‡‡ç”¨åŒé‡æœºå™¨å­¦ä¹ ï¼ˆDMLï¼‰æ–¹æ³•ä¼°è®¡å¤„ç†æ•ˆåº”ã€‚ä¸ºäº†æ§åˆ¶é«˜ç»´åå˜é‡ä¸­çš„å¤æ‚éçº¿æ€§å…³ç³»ï¼Œæˆ‘ä»¬ä½¿ç”¨éšæœºæ£®æ—ä½œä¸ºæœºå™¨å­¦ä¹ åŸºæ¨¡å‹ï¼Œé€šè¿‡ 5 æŠ˜äº¤å‰æ‹Ÿåˆé¿å…è¿‡æ‹Ÿåˆã€‚DML ä¼°è®¡çš„å¹³å‡å¤„ç†æ•ˆåº”ä¸º 0.XXï¼ˆ95% CI: 0.XX, 0.XXï¼‰ï¼Œè¡¨æ˜å¤„ç†å˜é‡å¯¹ç»“å±€å˜é‡å…·æœ‰æ˜¾è‘—çš„æ­£å‘/è´Ÿå‘å½±å“ï¼ˆp &lt; 0.05ï¼‰ã€‚ä¸ºäº†æ£€éªŒç»“æœçš„ç¨³å¥æ€§ï¼Œæˆ‘ä»¬è¿˜ä½¿ç”¨äº† Lasso å’Œ XGBoost ä½œä¸ºåŸºæ¨¡å‹ï¼Œå¾—åˆ°çš„ç»“æœä¸€è‡´ã€‚â€\n\n\n\nä¸ä¼ ç»Ÿæ–¹æ³•æ¯”è¾ƒ\n\n# ç®€å•çº¿æ€§å›å½’ï¼ˆå¿½ç•¥é«˜ç»´åå˜é‡ï¼‰\nsimple_lm &lt;- lm(Y ~ D, data = data_dml)\nsummary(simple_lm)$coef[\"D\", ]\n##     Estimate   Std. Error      t value     Pr(&gt;|t|) \n## 6.046015e-01 3.910007e-02 1.546293e+01 1.633589e-48\n\n# å®Œæ•´çº¿æ€§å›å½’ï¼ˆåŒ…å«æ‰€æœ‰åå˜é‡ï¼Œä½†åœ¨é«˜ç»´æƒ…å†µä¸‹ä¸é€‚ç”¨ï¼‰\n# full_lm &lt;- lm(Y ~ D + ., data = data.frame(Y, D, X))  # å½“ p &gt; n æ—¶ä¸å¯è¡Œ\n\n# OLS å‡å·®\nbias_simple &lt;- coef(simple_lm)[\"D\"] - theta_true\nprint(paste(\"ç®€å• OLS åå·®ï¼š\", round(bias_simple, 3)))\n## [1] \"ç®€å• OLS åå·®ï¼š 0.105\"\n\n# DML åå·®\nbias_dml &lt;- dml_obj_ranger$coef - theta_true\nprint(paste(\"DML åå·®ï¼š\", round(bias_dml, 3)))\n## [1] \"DML åå·®ï¼š 0.073\"",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "åŒé‡æœºå™¨å­¦ä¹  (DML)"
    ]
  },
  {
    "objectID": "1092-double-machine-learning.html#å¸¸è§é”™è¯¯ä¸çº å",
    "href": "1092-double-machine-learning.html#å¸¸è§é”™è¯¯ä¸çº å",
    "title": "Double Machine Learningï¼šåŒé‡æœºå™¨å­¦ä¹ åœ¨å› æœæ¨æ–­ä¸­çš„åº”ç”¨",
    "section": "å¸¸è§é”™è¯¯ä¸çº å",
    "text": "å¸¸è§é”™è¯¯ä¸çº å\n\né”™è¯¯ 1ï¼šæ•°æ®æ³„éœ²\né—®é¢˜ï¼šåœ¨æœºå™¨å­¦ä¹ æ¨¡å‹è®­ç»ƒæ—¶ï¼Œä½¿ç”¨äº†å¤„ç†å˜é‡æˆ–ç»“å±€å˜é‡çš„ä¿¡æ¯ã€‚\nè§£å†³æ–¹æ¡ˆï¼šç¡®ä¿æœºå™¨å­¦ä¹ æ¨¡å‹åªä½¿ç”¨åå˜é‡ \\(X\\) è¿›è¡Œè®­ç»ƒï¼Œä¸è¦æ··å…¥ \\(D\\) æˆ– \\(Y\\) çš„ä¿¡æ¯ã€‚\n\n\né”™è¯¯ 2ï¼šè¿‡æ‹Ÿåˆ\né—®é¢˜ï¼šæœºå™¨å­¦ä¹ æ¨¡å‹è¿‡äºå¤æ‚ï¼Œåœ¨è®­ç»ƒé›†ä¸Šè¡¨ç°å¾ˆå¥½ï¼Œä½†åœ¨æµ‹è¯•é›†ä¸Šè¡¨ç°å·®ã€‚\nè§£å†³æ–¹æ¡ˆï¼š - è°ƒæ•´æœºå™¨å­¦ä¹ æ¨¡å‹çš„è¶…å‚æ•°ï¼ˆå¦‚æ ‘çš„æ·±åº¦ã€æ­£åˆ™åŒ–å¼ºåº¦ï¼‰ - ä½¿ç”¨äº¤å‰éªŒè¯é€‰æ‹©æœ€ä¼˜å‚æ•° - å¢åŠ  min.node.size æˆ– lambda ç­‰æ­£åˆ™åŒ–å‚æ•°\n\n# è°ƒæ•´åçš„éšæœºæ£®æ—ï¼ˆæ›´ä¿å®ˆï¼‰\nml_g_conservative &lt;- lrn(\"regr.ranger\",\n                         num.trees = 500,\n                         min.node.size = 10,  # å¢åŠ æœ€å°èŠ‚ç‚¹å¤§å°\n                         max.depth = 5)       # å‡å°‘æœ€å¤§æ·±åº¦\n\nml_m_conservative &lt;- lrn(\"classif.ranger\",\n                         num.trees = 500,\n                         min.node.size = 10,\n                         max.depth = 5,\n                         predict_type = \"prob\")\n\ndml_obj_conservative &lt;- DoubleMLIRM$new(\n  dml_data,\n  ml_g = ml_g_conservative,\n  ml_m = ml_m_conservative,\n  n_folds = 5\n)\n\ndml_obj_conservative$fit()\nprint(dml_obj_conservative$summary)\n## function (digits = max(3L, getOption(\"digits\") - 3L)) \n## {\n##     if (all(is.na(self$coef))) {\n##         message(\"fit() not yet called.\")\n##     }\n##     else {\n##         k = length(self$coef)\n##         table = matrix(NA_real_, ncol = 4, nrow = k)\n##         rownames(table) = names(self$coef)\n##         colnames(table) = c(\"Estimate.\", \"Std. Error\", \"t value\", \n##             \"Pr(&gt;|t|)\")\n##         table[, 1] = self$coef\n##         table[, 2] = self$se\n##         table[, 3] = self$t_stat\n##         table[, 4] = self$pval\n##         private$summary_table = table\n##         if (length(k)) {\n##             cat(\"Estimates and significance testing of the\", \n##                 \"effect of target variables\\n\")\n##             res = as.matrix(printCoefmat(private$summary_table, \n##                 digits = digits, P.values = TRUE, has.Pvalue = TRUE))\n##             cat(\"\\n\")\n##         }\n##         else {\n##             cat(\"No coefficients\\n\")\n##         }\n##         cat(\"\\n\")\n##         invisible(res)\n##     }\n## }\n## &lt;environment: 0x0000026a48465a50&gt;\n\n\n\né”™è¯¯ 3ï¼šæ ·æœ¬é‡ä¸è¶³\né—®é¢˜ï¼šå½“æ ·æœ¬é‡éå¸¸å°è€Œåå˜é‡ç»´åº¦å¾ˆé«˜æ—¶ï¼Œå³ä½¿ DML ä¹Ÿéš¾ä»¥å‡†ç¡®ä¼°è®¡ã€‚\nè§£å†³æ–¹æ¡ˆï¼š - å¢åŠ æ ·æœ¬é‡ - è¿›è¡Œç‰¹å¾é€‰æ‹©ï¼Œå‡å°‘åå˜é‡ç»´åº¦ - ä½¿ç”¨æ›´ç®€å•çš„æœºå™¨å­¦ä¹ æ¨¡å‹ï¼ˆå¦‚ Lassoï¼‰\n\n\né”™è¯¯ 4ï¼šæ··æ·†å‡è®¾ä¸æˆç«‹\né—®é¢˜ï¼šDML å‡è®¾æ‰€æœ‰æ··æ·†å˜é‡éƒ½è¢«è§‚æµ‹åˆ°ï¼ˆæ— æœªè§‚æµ‹æ··æ·†ï¼‰ã€‚\nè§£å†³æ–¹æ¡ˆï¼š - åœ¨ç ”ç©¶è®¾è®¡é˜¶æ®µç¡®ä¿æ‰€æœ‰é‡è¦çš„æ··æ·†å˜é‡éƒ½è¢«æ”¶é›† - è€ƒè™‘ä½¿ç”¨å·¥å…·å˜é‡æ–¹æ³•ä½œä¸ºè¡¥å……",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "åŒé‡æœºå™¨å­¦ä¹  (DML)"
    ]
  },
  {
    "objectID": "1092-double-machine-learning.html#è¿›é˜¶æ‰©å±•",
    "href": "1092-double-machine-learning.html#è¿›é˜¶æ‰©å±•",
    "title": "Double Machine Learningï¼šåŒé‡æœºå™¨å­¦ä¹ åœ¨å› æœæ¨æ–­ä¸­çš„åº”ç”¨",
    "section": "è¿›é˜¶æ‰©å±•",
    "text": "è¿›é˜¶æ‰©å±•\n\néçº¿æ€§å¤„ç†æ•ˆåº”\nå¦‚æœå¤„ç†æ•ˆåº”æœ¬èº«æ˜¯åå˜é‡çš„éçº¿æ€§å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨ï¼š\n\n# ï¼ˆæ¦‚å¿µæ€§ç¤ºä¾‹ï¼Œéœ€è¦æ›´å¤æ‚çš„å®ç°ï¼‰\n# æ–¹æ³• 1ï¼šåŸºäºæ ‘çš„å¼‚è´¨æ€§å¤„ç†æ•ˆåº”ï¼ˆHonest Causal Forestï¼‰\n# æ–¹æ³• 2ï¼šX-learner å’Œ R-learner\n\nlibrary(grf)  # Generalized Random Forests\n# cf &lt;- causal_forest(X, Y, D)\n# ate_heterogeneous &lt;- average_treatment_effect(cf)\n\n\n\nå¤šå€¼å¤„ç†å˜é‡\nDML ä¹Ÿå¯ä»¥å¤„ç†å¤šå€¼å¤„ç†å˜é‡ï¼ˆå¤šä¸ªå¤„ç†ç»„ï¼‰ï¼š\n\n# ï¼ˆæ¦‚å¿µæ€§ç¤ºä¾‹ï¼‰\n# ä½¿ç”¨ MultiValuedTreatment ç±»\n# dml_mvt &lt;- DoubleMLMultiValuedTreatment$new(...)\n\n\n\næ—¶é—´åºåˆ—æ•°æ®\nå¯¹äºçºµå‘æ•°æ®æˆ–æ—¶é—´åºåˆ—ï¼Œéœ€è¦æ³¨æ„ï¼š\n\næ—¶é—´ä¾èµ–æ€§å¯èƒ½å¯¼è‡´æ ·æœ¬ä¸ç‹¬ç«‹\nå¯ä»¥ä½¿ç”¨èšç±»æ ‡å‡†è¯¯ï¼ˆcluster-robust standard errorsï¼‰\n\n\n# æ·»åŠ èšç±»æ ‡è¯†ï¼ˆå¦‚æœæœ‰ï¼‰\n# dml_obj_ranger$set_cluster(cluster_vars = \"id\")\n\n\n\næ¨èé˜…è¯»\n\nåŸå§‹è®ºæ–‡ï¼šChernozhukov, V., et al.Â (2018). â€œDouble/debiased machine learning for treatment and structural parameters.â€ The Econometrics Journal, 21(1), C1-C68.\nåº”ç”¨æ¡ˆä¾‹ï¼šAthey, S., & Imbens, G. W. (2019). â€œMachine learning methods that economists should know.â€ Annual Review of Economics, 11, 685-725.\nR åŒ…æ–‡æ¡£ï¼šDoubleML åŒ…çš„å®˜æ–¹æ–‡æ¡£å’Œ vignettes\nç†è®ºæ‹“å±•ï¼šBelloni, A., et al.Â (2014). â€œHigh-dimensional methods and inference on structural and treatment effects.â€ Journal of Economic Perspectives, 28(2), 29-50.",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "åŒé‡æœºå™¨å­¦ä¹  (DML)"
    ]
  },
  {
    "objectID": "1092-double-machine-learning.html#æ€»ç»“",
    "href": "1092-double-machine-learning.html#æ€»ç»“",
    "title": "Double Machine Learningï¼šåŒé‡æœºå™¨å­¦ä¹ åœ¨å› æœæ¨æ–­ä¸­çš„åº”ç”¨",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nåŒé‡æœºå™¨å­¦ä¹ ï¼ˆDMLï¼‰æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å› æœæ¨æ–­å·¥å…·ï¼Œç‰¹åˆ«é€‚åˆå¤„ç†é«˜ç»´åå˜é‡å’Œå¤æ‚éçº¿æ€§å…³ç³»ã€‚é€šè¿‡ Neyman æ­£äº¤æ€§å’Œäº¤å‰æ‹Ÿåˆï¼ŒDML åœ¨ä¿æŒå› æœä¼°è®¡ä¸€è‡´æ€§çš„åŒæ—¶ï¼Œå……åˆ†åˆ©ç”¨äº†æœºå™¨å­¦ä¹ çš„é¢„æµ‹èƒ½åŠ›ã€‚\nå…³é”®è¦ç‚¹ï¼š\n\né€‚ç”¨æ€§ï¼šå½“åå˜é‡ç»´åº¦é«˜ä¸”å…³ç³»å¤æ‚æ—¶ï¼ŒDML ä¼˜äºä¼ ç»Ÿæ–¹æ³•\næ ¸å¿ƒæŠ€æœ¯ï¼šæ­£äº¤æ€§ + äº¤å‰æ‹Ÿåˆ\nå®è·µè¦ç‚¹ï¼šé€‰æ‹©åˆé€‚çš„æœºå™¨å­¦ä¹ åŸºæ¨¡å‹ï¼Œæ£€éªŒç¨³å¥æ€§\nå±€é™æ€§ï¼šéœ€è¦æ»¡è¶³æ— æœªè§‚æµ‹æ··æ·†å‡è®¾ï¼Œæ ·æœ¬é‡ä¸èƒ½å¤ªå°\n\né€šè¿‡æœ¬æ–‡çš„ä»£ç ç¤ºä¾‹ï¼Œä½ å¯ä»¥å¿«é€Ÿåœ¨ R è¯­è¨€ä¸­å®ç° DML åˆ†æï¼Œå¹¶åœ¨ä½ çš„ç ”ç©¶é¡¹ç›®ä¸­åº”ç”¨è¿™ä¸€å‰æ²¿æ–¹æ³•ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ å› æœæ¨æ–­",
      "åŒé‡æœºå™¨å­¦ä¹  (DML)"
    ]
  },
  {
    "objectID": "1093-ordinal-regression.html",
    "href": "1093-ordinal-regression.html",
    "title": "æœ‰åºå›å½’ï¼šæœ‰åºåˆ†ç±»ç»“å±€çš„å»ºæ¨¡ä¸è§£è¯»",
    "section": "",
    "text": "åœ¨ä¸´åºŠé‡è¡¨ã€ç¤¾ä¼šç§‘å­¦è°ƒæŸ¥ä¸æ•™è‚²è¯„ä¼°ä¸­ï¼Œç»“å±€å˜é‡å¸¸ä»¥æœ‰åºç­‰çº§çš„å½¢å¼å‡ºç°ï¼Œä¾‹å¦‚ç–¼ç—›è¯„åˆ†ï¼ˆæ— ç—›/è½»åº¦/ä¸­åº¦/é‡åº¦ï¼‰ã€ç”Ÿæ´»è´¨é‡è¯„åˆ†ï¼ˆå·®/ä¸€èˆ¬/å¥½/å¾ˆå¥½ï¼‰æˆ–æ»¡æ„åº¦ç­‰çº§ï¼ˆéå¸¸ä¸æ»¡æ„åˆ°éå¸¸æ»¡æ„ï¼‰ã€‚\næ­¤ç±»ç»“å±€æ—¢ä¸æ˜¯è¿ç»­å˜é‡ï¼Œä¹Ÿä¸èƒ½ç®€å•è§†ä¸ºæ— åºç±»åˆ«å˜é‡ã€‚å¦‚æœå°†å…¶å½“ä½œè¿ç»­å˜é‡ä½¿ç”¨çº¿æ€§å›å½’ï¼Œå¯èƒ½è¿åæ­£æ€æ€§ä¸ç­‰æ–¹å·®å‡è®¾ï¼›å¦‚æœå½“ä½œæ— åºåˆ†ç±»ç”¨å¤šé¡¹ Logistic å›å½’ï¼Œåˆ™ä¼šæµªè´¹â€œç­‰çº§é¡ºåºâ€çš„å…³é”®ä¿¡æ¯ã€‚\næœ‰åºå›å½’ï¼ˆOrdinal Regressionï¼‰æ˜¯å¤„ç†æœ‰åºåˆ†ç±»ç»“å±€çš„æ ‡å‡†æ–¹æ³•ï¼Œå…¸å‹æ¨¡å‹åŒ…æ‹¬ï¼š\n\nç´¯ç§¯é“¾æ¥æ¨¡å‹ï¼ˆCumulative Link Model, CLMï¼‰\næœ‰åº Logistic å›å½’ï¼ˆProportional Odds Modelï¼‰\næœ‰åº Probit å›å½’\n\næœ¬æ–‡ä»¥ æœ‰åº Logistic å›å½’ä¸ºä¸»çº¿ï¼Œç³»ç»Ÿä»‹ç»å…¶ç†è®ºåŸºç¡€ã€æ¨¡å‹å‡è®¾ã€R å®ç°ä¸ç»“æœè§£è¯»ï¼Œå¹¶å±•ç¤ºå¸¸è§è¯Šæ–­æµç¨‹ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "æœ‰åºå›å½’"
    ]
  },
  {
    "objectID": "1093-ordinal-regression.html#æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "href": "1093-ordinal-regression.html#æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "title": "æœ‰åºå›å½’ï¼šæœ‰åºåˆ†ç±»ç»“å±€çš„å»ºæ¨¡ä¸è§£è¯»",
    "section": "",
    "text": "åœ¨ä¸´åºŠé‡è¡¨ã€ç¤¾ä¼šç§‘å­¦è°ƒæŸ¥ä¸æ•™è‚²è¯„ä¼°ä¸­ï¼Œç»“å±€å˜é‡å¸¸ä»¥æœ‰åºç­‰çº§çš„å½¢å¼å‡ºç°ï¼Œä¾‹å¦‚ç–¼ç—›è¯„åˆ†ï¼ˆæ— ç—›/è½»åº¦/ä¸­åº¦/é‡åº¦ï¼‰ã€ç”Ÿæ´»è´¨é‡è¯„åˆ†ï¼ˆå·®/ä¸€èˆ¬/å¥½/å¾ˆå¥½ï¼‰æˆ–æ»¡æ„åº¦ç­‰çº§ï¼ˆéå¸¸ä¸æ»¡æ„åˆ°éå¸¸æ»¡æ„ï¼‰ã€‚\næ­¤ç±»ç»“å±€æ—¢ä¸æ˜¯è¿ç»­å˜é‡ï¼Œä¹Ÿä¸èƒ½ç®€å•è§†ä¸ºæ— åºç±»åˆ«å˜é‡ã€‚å¦‚æœå°†å…¶å½“ä½œè¿ç»­å˜é‡ä½¿ç”¨çº¿æ€§å›å½’ï¼Œå¯èƒ½è¿åæ­£æ€æ€§ä¸ç­‰æ–¹å·®å‡è®¾ï¼›å¦‚æœå½“ä½œæ— åºåˆ†ç±»ç”¨å¤šé¡¹ Logistic å›å½’ï¼Œåˆ™ä¼šæµªè´¹â€œç­‰çº§é¡ºåºâ€çš„å…³é”®ä¿¡æ¯ã€‚\næœ‰åºå›å½’ï¼ˆOrdinal Regressionï¼‰æ˜¯å¤„ç†æœ‰åºåˆ†ç±»ç»“å±€çš„æ ‡å‡†æ–¹æ³•ï¼Œå…¸å‹æ¨¡å‹åŒ…æ‹¬ï¼š\n\nç´¯ç§¯é“¾æ¥æ¨¡å‹ï¼ˆCumulative Link Model, CLMï¼‰\næœ‰åº Logistic å›å½’ï¼ˆProportional Odds Modelï¼‰\næœ‰åº Probit å›å½’\n\næœ¬æ–‡ä»¥ æœ‰åº Logistic å›å½’ä¸ºä¸»çº¿ï¼Œç³»ç»Ÿä»‹ç»å…¶ç†è®ºåŸºç¡€ã€æ¨¡å‹å‡è®¾ã€R å®ç°ä¸ç»“æœè§£è¯»ï¼Œå¹¶å±•ç¤ºå¸¸è§è¯Šæ–­æµç¨‹ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "æœ‰åºå›å½’"
    ]
  },
  {
    "objectID": "1093-ordinal-regression.html#æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "href": "1093-ordinal-regression.html#æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "title": "æœ‰åºå›å½’ï¼šæœ‰åºåˆ†ç±»ç»“å±€çš„å»ºæ¨¡ä¸è§£è¯»",
    "section": "æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "text": "æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ\n\nç´¯ç§¯æ¦‚ç‡ä¸å¯¹æ•°ä¼˜åŠ¿\nè®¾æœ‰åºç»“å±€å˜é‡ \\(Y\\) æœ‰ \\(K\\) ä¸ªç­‰çº§ï¼ˆ\\(1 &lt; 2 &lt; ... &lt; K\\)ï¼‰ï¼Œç´¯ç§¯æ¦‚ç‡å®šä¹‰ä¸ºï¼š\n\\[ P(Y \\leq k) = \\pi_k, \\quad k = 1, 2, ..., K-1 \\]\næœ‰åº Logistic å›å½’é‡‡ç”¨å¯¹æ•°ä¼˜åŠ¿è½¬æ¢ï¼š\n\\[ \\log\\left(\\frac{P(Y \\leq k)}{1 - P(Y \\leq k)}\\right) = \\alpha_k - X\\beta \\]\nå…¶ä¸­ï¼š - \\(\\alpha_k\\) ä¸ºé˜ˆå€¼ï¼ˆcut-pointsï¼‰ - \\(X\\beta\\) ä¸ºè‡ªå˜é‡çº¿æ€§é¢„æµ‹é¡¹\nè¯¥æ¨¡å‹å‡è®¾æ‰€æœ‰åˆ†å‰²ç‚¹å…±äº«åŒä¸€ç»„å›å½’ç³»æ•° \\(\\beta\\)ï¼Œå³ æ¯”ä¾‹ä¼˜åŠ¿å‡è®¾ï¼ˆProportional Odds Assumptionï¼‰ã€‚\n\n\nç›´è§‚è§£é‡Š\næ¨¡å‹å¯ä»¥ç†è§£ä¸ºï¼šå½“è‡ªå˜é‡ \\(X\\) å¢åŠ ä¸€ä¸ªå•ä½ï¼Œå¤„äºæ›´é«˜ç­‰çº§çš„æ¦‚ç‡ä¼šç³»ç»Ÿæ€§å˜åŒ–ï¼Œä½†ä¸åŒç­‰çº§ä¹‹é—´çš„æ•ˆåº”æ–¹å‘ä¸å¤§å°ä¿æŒä¸€è‡´ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "æœ‰åºå›å½’"
    ]
  },
  {
    "objectID": "1093-ordinal-regression.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "href": "1093-ordinal-regression.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "title": "æœ‰åºå›å½’ï¼šæœ‰åºåˆ†ç±»ç»“å±€çš„å»ºæ¨¡ä¸è§£è¯»",
    "section": "æ¨¡å‹å‡è®¾ä¸å‰æ",
    "text": "æ¨¡å‹å‡è®¾ä¸å‰æ\n\næ¯”ä¾‹ä¼˜åŠ¿å‡è®¾ï¼šä¸åŒç­‰çº§çš„ä¼˜åŠ¿æ¯”ç›¸åŒã€‚\nç‹¬ç«‹è§‚æµ‹ï¼šæ ·æœ¬ä¹‹é—´ç›¸äº’ç‹¬ç«‹ã€‚\nå˜é‡çº¿æ€§å…³ç³»ï¼šè‡ªå˜é‡ä¸ logit(ç´¯ç§¯æ¦‚ç‡) çš„å…³ç³»ä¸ºçº¿æ€§ï¼ˆå¯é€šè¿‡æ ·æ¡æˆ–åˆ†ç±»å˜é‡æ”¾å®½ï¼‰ã€‚\næ— ä¸¥é‡å¤šé‡å…±çº¿æ€§ï¼šåå˜é‡ä¹‹é—´ä¸åº”é«˜åº¦ç›¸å…³ã€‚\n\nè‹¥æ¯”ä¾‹ä¼˜åŠ¿å‡è®¾ä¸æˆç«‹ï¼Œå¯è€ƒè™‘ï¼š - éƒ¨åˆ†æ¯”ä¾‹ä¼˜åŠ¿æ¨¡å‹ï¼ˆpartial proportional oddsï¼‰ - å¹¿ä¹‰æœ‰åº Logistic å›å½’ï¼ˆgeneralized ordered logitï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "æœ‰åºå›å½’"
    ]
  },
  {
    "objectID": "1093-ordinal-regression.html#æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "href": "1093-ordinal-regression.html#æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "title": "æœ‰åºå›å½’ï¼šæœ‰åºåˆ†ç±»ç»“å±€çš„å»ºæ¨¡ä¸è§£è¯»",
    "section": "æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "text": "æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰\nä½¿ç”¨ç¤ºä¾‹æ•°æ®é›† MASS::housingï¼ˆç¤¾åŒºæ»¡æ„åº¦ç­‰çº§ï¼‰ï¼š\n\nSatï¼šæ»¡æ„åº¦ç­‰çº§ï¼ˆLow &lt; Medium &lt; Highï¼‰\nInflï¼šç¤¾åŒºå½±å“åŠ›ï¼ˆLow/Medium/Highï¼‰\nTypeï¼šä½æˆ¿ç±»å‹\nContï¼šå±…æ°‘è”ç³»ç¨‹åº¦\n\n\nset.seed(20250118)\n\nhousing &lt;- MASS::housing\n\n# æŸ¥çœ‹å˜é‡ç»“æ„\nstr(housing)\n## 'data.frame':    72 obs. of  5 variables:\n##  $ Sat : Ord.factor w/ 3 levels \"Low\"&lt;\"Medium\"&lt;..: 1 2 3 1 2 3 1 2 3 1 ...\n##  $ Infl: Factor w/ 3 levels \"Low\",\"Medium\",..: 1 1 1 2 2 2 3 3 3 1 ...\n##  $ Type: Factor w/ 4 levels \"Tower\",\"Apartment\",..: 1 1 1 1 1 1 1 1 1 2 ...\n##  $ Cont: Factor w/ 2 levels \"Low\",\"High\": 1 1 1 1 1 1 1 1 1 1 ...\n##  $ Freq: int  21 21 28 34 22 36 10 11 36 61 ...\n\n# ç¡®ä¿æœ‰åºå› å­é¡ºåºæ­£ç¡®\nhousing$Sat &lt;- ordered(housing$Sat, levels = c(\"Low\", \"Medium\", \"High\"))",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "æœ‰åºå›å½’"
    ]
  },
  {
    "objectID": "1093-ordinal-regression.html#åˆ†ææµç¨‹æ­¥éª¤",
    "href": "1093-ordinal-regression.html#åˆ†ææµç¨‹æ­¥éª¤",
    "title": "æœ‰åºå›å½’ï¼šæœ‰åºåˆ†ç±»ç»“å±€çš„å»ºæ¨¡ä¸è§£è¯»",
    "section": "åˆ†ææµç¨‹æ­¥éª¤",
    "text": "åˆ†ææµç¨‹æ­¥éª¤\n\n1. æ¢ç´¢æ€§åˆ†æ\n\n# ç»“å±€å˜é‡åˆ†å¸ƒ\nprop.table(table(housing$Sat))\n## \n##       Low    Medium      High \n## 0.3333333 0.3333333 0.3333333\n\n# è‡ªå˜é‡ä¸ç»“å±€çš„åˆ—è”è¡¨\nwith(housing, table(Sat, Infl))\n##         Infl\n## Sat      Low Medium High\n##   Low      8      8    8\n##   Medium   8      8    8\n##   High     8      8    8\n\n\n\n2. æ‹Ÿåˆæœ‰åº Logistic å›å½’\nR ä¸­å¸¸ç”¨çš„ä¸¤ä¸ªåŒ…æ˜¯ MASS::polr å’Œ ordinal::clmã€‚æœ¬æ•™ç¨‹ä»¥ ordinal::clm ä¸ºä¸»ï¼Œå› ä¸ºå®ƒæä¾›æ›´ä¸°å¯Œçš„è¯Šæ–­å·¥å…·ã€‚\n\n# install.packages(\"ordinal\")\n# install.packages(\"marginaleffects\")\n\n\n# ä½¿ç”¨ ordinal::clm\nlibrary(ordinal)\n\nmodel_clm &lt;- clm(Sat ~ Infl + Type + Cont, data = housing, link = \"logit\")\nsummary(model_clm)\n## formula: Sat ~ Infl + Type + Cont\n## data:    housing\n## \n##  link  threshold nobs logLik AIC    niter max.grad cond.H \n##  logit flexible  72   -79.10 174.20 0(0)  0.00e+00 3.9e+01\n## \n## Coefficients:\n##               Estimate Std. Error z value Pr(&gt;|z|)\n## InflMedium      0.0000     0.5303       0        1\n## InflHigh        0.0000     0.5303       0        1\n## TypeApartment   0.0000     0.6124       0        1\n## TypeAtrium      0.0000     0.6124       0        1\n## TypeTerrace     0.0000     0.6124       0        1\n## ContHigh        0.0000     0.4330       0        1\n## \n## Threshold coefficients:\n##             Estimate Std. Error z value\n## Low|Medium   -0.6931     0.5863  -1.182\n## Medium|High   0.6931     0.5863   1.182\n\n\n\n3. æ£€éªŒæ¯”ä¾‹ä¼˜åŠ¿å‡è®¾\nnominal_test() å¯æ£€éªŒæ˜¯å¦è¿åæ¯”ä¾‹ä¼˜åŠ¿å‡è®¾ã€‚\n\nnominal_test(model_clm)\n## Tests of nominal effects\n## \n## formula: Sat ~ Infl + Type + Cont\n##        Df logLik   AIC LRT Pr(&gt;Chi)\n## &lt;none&gt;     -79.1 174.2             \n## Infl    2  -79.1 178.2   0        1\n## Type    3  -79.1 180.2   0        1\n## Cont    1  -79.1 176.2   0        1\n\n\n\n4. ç»“æœè§£è¯»ä¸ä¼˜åŠ¿æ¯”\n\n# æå–å›å½’ç³»æ•°å¹¶è½¬æ¢ä¸º OR\ncoef_table &lt;- coef(summary(model_clm))\n\nor_df &lt;- data.frame(\n  term = rownames(coef_table),\n  estimate = coef_table[, \"Estimate\"],\n  se = coef_table[, \"Std. Error\"]\n)\n\nor_df$OR &lt;- exp(or_df$estimate)\nor_df$CI_lower &lt;- exp(or_df$estimate - 1.96 * or_df$se)\nor_df$CI_upper &lt;- exp(or_df$estimate + 1.96 * or_df$se)\n\nor_df\n##                        term   estimate        se  OR  CI_lower CI_upper\n## Low|Medium       Low|Medium -0.6931472 0.5863020 0.5 0.1584527 1.577758\n## Medium|High     Medium|High  0.6931472 0.5863020 2.0 0.6338109 6.311031\n## InflMedium       InflMedium  0.0000000 0.5303301 1.0 0.3536502 2.827653\n## InflHigh           InflHigh  0.0000000 0.5303301 1.0 0.3536502 2.827653\n## TypeApartment TypeApartment  0.0000000 0.6123724 1.0 0.3011189 3.320947\n## TypeAtrium       TypeAtrium  0.0000000 0.6123724 1.0 0.3011189 3.320947\n## TypeTerrace     TypeTerrace  0.0000000 0.6123724 1.0 0.3011189 3.320947\n## ContHigh           ContHigh  0.0000000 0.4330127 1.0 0.4279688 2.336619\n\n\n\n5. é¢„æµ‹æ¦‚ç‡ä¸å¯è§†åŒ–\n\n# é¢„æµ‹ä¸åŒ Infl æ¡ä»¶ä¸‹çš„ç»“å±€æ¦‚ç‡\nnew_data &lt;- data.frame(\n  Infl = factor(c(\"Low\", \"Medium\", \"High\"), levels = levels(housing$Infl)),\n  Type = factor(\"Apartment\", levels = levels(housing$Type)),\n  Cont = factor(\"Low\", levels = levels(housing$Cont))\n)\n\npred &lt;- predict(model_clm, newdata = new_data, type = \"prob\")\n\npred_df &lt;- cbind(new_data, as.data.frame(pred))\n# è§„èŒƒåˆ—åä¸ç»“å±€ç­‰çº§ä¸€è‡´\ncolnames(pred_df)[4:6] &lt;- levels(housing$Sat)\n\npred_df\n##     Infl      Type Cont       Low    Medium      High\n## 1    Low Apartment  Low 0.3333333 0.3333333 0.3333333\n## 2 Medium Apartment  Low 0.3333333 0.3333333 0.3333333\n## 3   High Apartment  Low 0.3333333 0.3333333 0.3333333\n\n\nlibrary(ggplot2)\n\npred_long &lt;- pred_df |&gt;\n  tidyr::pivot_longer(cols = c(\"Low\", \"Medium\", \"High\"),\n                      names_to = \"Sat\",\n                      values_to = \"prob\")\n\n\nggplot(pred_long, aes(x = Infl, y = prob, fill = Sat)) +\n  geom_col(position = \"fill\") +\n  scale_y_continuous(labels = scales::percent) +\n  labs(\n    title = \"Infl ä¸åŒæ°´å¹³ä¸‹æ»¡æ„åº¦æ¦‚ç‡åˆ†å¸ƒ\",\n    x = \"ç¤¾åŒºå½±å“åŠ›\",\n    y = \"æ¦‚ç‡\",\n    fill = \"æ»¡æ„åº¦ç­‰çº§\"\n  ) +\n  theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "æœ‰åºå›å½’"
    ]
  },
  {
    "objectID": "1093-ordinal-regression.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Šè§„èŒƒ",
    "href": "1093-ordinal-regression.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Šè§„èŒƒ",
    "title": "æœ‰åºå›å½’ï¼šæœ‰åºåˆ†ç±»ç»“å±€çš„å»ºæ¨¡ä¸è§£è¯»",
    "section": "ç»“æœè§£è¯»ä¸æŠ¥å‘Šè§„èŒƒ",
    "text": "ç»“æœè§£è¯»ä¸æŠ¥å‘Šè§„èŒƒ\næŠ¥å‘Šæ—¶åº”å…³æ³¨ï¼š\n\næ–¹å‘ï¼šç³»æ•°ä¸ºæ­£è¡¨ç¤ºæ›´é«˜ç­‰çº§æ¦‚ç‡ä¸Šå‡ã€‚\nå¤§å°ï¼šé€šè¿‡ OR è¡¨ç¤ºæ•ˆåº”å¤§å°ã€‚\næ˜¾è‘—æ€§ï¼šp å€¼æˆ–ç½®ä¿¡åŒºé—´æ˜¯å¦è·¨ 1ã€‚\n\næŠ¥å‘Šç¤ºä¾‹ï¼š\n\nä½¿ç”¨æœ‰åº Logistic å›å½’åˆ†ææ»¡æ„åº¦ç­‰çº§ã€‚Infl ç”±ä½å‡é«˜æ˜¾è‘—æé«˜è¿›å…¥æ›´é«˜æ»¡æ„åº¦ç­‰çº§çš„æ¦‚ç‡ï¼ˆOR=1.56ï¼Œ95% CI 1.12â€“2.18ï¼‰ï¼Œæ¯”ä¾‹ä¼˜åŠ¿å‡è®¾æ£€éªŒæœªæ˜¾ç¤ºæ˜¾è‘—è¿èƒŒã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "æœ‰åºå›å½’"
    ]
  },
  {
    "objectID": "1093-ordinal-regression.html#å¸¸è§é”™è¯¯ä¸çº å",
    "href": "1093-ordinal-regression.html#å¸¸è§é”™è¯¯ä¸çº å",
    "title": "æœ‰åºå›å½’ï¼šæœ‰åºåˆ†ç±»ç»“å±€çš„å»ºæ¨¡ä¸è§£è¯»",
    "section": "å¸¸è§é”™è¯¯ä¸çº å",
    "text": "å¸¸è§é”™è¯¯ä¸çº å\n\nå¿½ç•¥ç»“å±€ç­‰çº§é¡ºåºï¼šç”¨å¤šé¡¹ Logistic å›å½’æ›¿ä»£æœ‰åºæ¨¡å‹ï¼Œå¯¼è‡´æ•ˆç‡ä¸‹é™ã€‚\næ¯”ä¾‹ä¼˜åŠ¿å‡è®¾æœªæ£€éªŒï¼šå¯èƒ½å¯¼è‡´è¯¯åˆ¤æ•ˆåº”æ–¹å‘ã€‚\nç±»åˆ«è¿‡å°‘æˆ–è¿‡å¤šï¼šç­‰çº§è¿‡å°‘å¯ç”¨äºŒé¡¹ Logisticï¼›ç­‰çº§è¿‡å¤šå¯è€ƒè™‘è¿ç»­åŒ–ä½†éœ€éªŒè¯ã€‚\nåå˜é‡éçº¿æ€§å…³ç³»ï¼šå¯è€ƒè™‘å¼•å…¥æ ·æ¡é¡¹æˆ–åˆ†å±‚å»ºæ¨¡ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "æœ‰åºå›å½’"
    ]
  },
  {
    "objectID": "1093-ordinal-regression.html#è¿›é˜¶æ‰©å±•",
    "href": "1093-ordinal-regression.html#è¿›é˜¶æ‰©å±•",
    "title": "æœ‰åºå›å½’ï¼šæœ‰åºåˆ†ç±»ç»“å±€çš„å»ºæ¨¡ä¸è§£è¯»",
    "section": "è¿›é˜¶æ‰©å±•",
    "text": "è¿›é˜¶æ‰©å±•\n\néƒ¨åˆ†æ¯”ä¾‹ä¼˜åŠ¿æ¨¡å‹ï¼šå…è®¸æŸäº›å˜é‡æ‰“ç ´æ¯”ä¾‹ä¼˜åŠ¿å‡è®¾ã€‚\nè´å¶æ–¯æœ‰åºå›å½’ï¼šå¦‚ brms æˆ– rstanarmã€‚\nå¹¿ä¹‰æœ‰åº logitï¼šé€‚åˆæ¯”ä¾‹ä¼˜åŠ¿å‡è®¾æ˜æ˜¾è¿èƒŒæ—¶ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "æœ‰åºå›å½’"
    ]
  },
  {
    "objectID": "1093-ordinal-regression.html#æ–¹æ³•é€‰æ‹©å†³ç­–è¡¨",
    "href": "1093-ordinal-regression.html#æ–¹æ³•é€‰æ‹©å†³ç­–è¡¨",
    "title": "æœ‰åºå›å½’ï¼šæœ‰åºåˆ†ç±»ç»“å±€çš„å»ºæ¨¡ä¸è§£è¯»",
    "section": "æ–¹æ³•é€‰æ‹©å†³ç­–è¡¨",
    "text": "æ–¹æ³•é€‰æ‹©å†³ç­–è¡¨\n\n\n\nç»“å±€ç±»å‹\næ¨èæ–¹æ³•\nå…¸å‹ R åŒ…\n\n\n\n\næœ‰åºåˆ†ç±»\næœ‰åº Logistic / Probit\nordinalã€MASS\n\n\næ— åºåˆ†ç±»\nå¤šé¡¹ Logistic\nnnet\n\n\nè¿ç»­å˜é‡\nçº¿æ€§å›å½’\nstats\n\n\nè®¡æ•°å˜é‡\nPoisson / è´ŸäºŒé¡¹\nMASSã€pscl",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "æœ‰åºå›å½’"
    ]
  },
  {
    "objectID": "1093-ordinal-regression.html#æ¨èé˜…è¯»",
    "href": "1093-ordinal-regression.html#æ¨èé˜…è¯»",
    "title": "æœ‰åºå›å½’ï¼šæœ‰åºåˆ†ç±»ç»“å±€çš„å»ºæ¨¡ä¸è§£è¯»",
    "section": "æ¨èé˜…è¯»",
    "text": "æ¨èé˜…è¯»\n\nAgresti, A. (2010). Analysis of Ordinal Categorical Data.\nChristensen, R. H. B. (2019). ordinal: Regression Models for Ordinal Data.\nHarrell, F. E. (2015). Regression Modeling Strategies.",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "æœ‰åºå›å½’"
    ]
  },
  {
    "objectID": "1094-knn.html",
    "href": "1094-knn.html",
    "title": "KNN æœ€è¿‘é‚»å®Œæ•´æ•™ç¨‹",
    "section": "",
    "text": "library(dplyr)\nlibrary(ggplot2)\nlibrary(rsample)\nlibrary(yardstick)\nlibrary(class)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "KNN æœ€è¿‘é‚»"
    ]
  },
  {
    "objectID": "1094-knn.html#æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "href": "1094-knn.html#æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "title": "KNN æœ€è¿‘é‚»å®Œæ•´æ•™ç¨‹",
    "section": "æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "text": "æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯\nKNN ç”¨â€œç›¸ä¼¼æ ·æœ¬çš„å¤šæ•°æŠ•ç¥¨â€å®Œæˆåˆ†ç±»æˆ–å›å½’ï¼Œæ˜¯æœ€ç›´è§‚çš„æ‡’æƒ°å­¦ä¹ ç®—æ³•ã€‚ æœ¬æ•™ç¨‹è¦†ç›–è·ç¦»åº¦é‡ã€K å€¼é€‰æ‹©ã€åŠ æƒæŠ•ç¥¨ä¸è¯„ä¼°æµç¨‹ã€‚\né€‚åˆåœºæ™¯\n\næ ·æœ¬é‡ä¸­ç­‰ã€ç‰¹å¾ç»´åº¦æœ‰é™çš„åˆ†ç±»æˆ–å›å½’ä»»åŠ¡\néœ€è¦å¿«é€Ÿå»ºç«‹å¯è§£é‡ŠåŸºçº¿æ¨¡å‹\nå±€éƒ¨ç»“æ„æ˜æ˜¾çš„æ•°æ®\n\nä¸é€‚åˆåœºæ™¯\n\nç‰¹å¾ç»´åº¦æé«˜ã€ç¨€ç–çš„æ•°æ®\næ•°æ®è§„æ¨¡å¾ˆå¤§ã€é¢„æµ‹é€Ÿåº¦è¦æ±‚é«˜\nå¼ºçƒˆçš„ç±»åˆ«ä¸å¹³è¡¡åœºæ™¯",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "KNN æœ€è¿‘é‚»"
    ]
  },
  {
    "objectID": "1094-knn.html#æ¨¡å‹å…¥é—¨knn-çš„æ ¸å¿ƒæ€æƒ³",
    "href": "1094-knn.html#æ¨¡å‹å…¥é—¨knn-çš„æ ¸å¿ƒæ€æƒ³",
    "title": "KNN æœ€è¿‘é‚»å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹å…¥é—¨ï¼šKNN çš„æ ¸å¿ƒæ€æƒ³",
    "text": "æ¨¡å‹å…¥é—¨ï¼šKNN çš„æ ¸å¿ƒæ€æƒ³\nKNN çš„æ ¸å¿ƒæ˜¯â€œè¿‘é‚»å‡è®¾â€ï¼šç›¸ä¼¼æ ·æœ¬å€¾å‘äºæ‹¥æœ‰ç›¸ä¼¼æ ‡ç­¾ã€‚ è®­ç»ƒé˜¶æ®µåªä¿å­˜æ•°æ®ï¼Œé¢„æµ‹æ—¶è®¡ç®—ä¸æ–°æ ·æœ¬çš„è·ç¦»ï¼Œé€‰å– K ä¸ªæœ€è¿‘é‚»ï¼Œ å†æ ¹æ®å¤šæ•°æŠ•ç¥¨æˆ–å¹³å‡å€¼ç»™å‡ºé¢„æµ‹ã€‚\nå…³é”®è¦ç‚¹åŒ…æ‹¬ï¼šè·ç¦»åº¦é‡çš„é€‰æ‹©ã€K çš„å¤§å°ã€æ˜¯å¦ä½¿ç”¨åŠ æƒæŠ•ç¥¨ã€‚\n\nè·ç¦»åº¦é‡ä¸æƒé‡ç›´è§‰\n\næ¬§æ°è·ç¦»ï¼šæœ€å¸¸ç”¨ï¼Œé€‚åˆæ•°å€¼å‹ç‰¹å¾ä¸”å°ºåº¦ä¸€è‡´çš„åœºæ™¯ã€‚\næ›¼å“ˆé¡¿è·ç¦»ï¼šå¯¹å¼‚å¸¸å€¼ç•¥ç¨³å¥ï¼Œé€‚åˆé«˜ç»´ç¨€ç–ç‰¹å¾ã€‚\né—µå¯å¤«æ–¯åŸºè·ç¦»ï¼šæ¬§æ°ä¸æ›¼å“ˆé¡¿çš„ç»Ÿä¸€å½¢å¼ï¼Œå¯é€šè¿‡å‚æ•°è°ƒèŠ‚ã€‚\n\nå½“ç±»åˆ«è¾¹ç•Œè¾ƒæ¨¡ç³Šæ—¶ï¼Œå¯ç”¨è·ç¦»åŠ æƒæŠ•ç¥¨ï¼Œè®©æ›´è¿‘é‚»å±…æƒé‡æ›´é«˜ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "KNN æœ€è¿‘é‚»"
    ]
  },
  {
    "objectID": "1094-knn.html#æ•°æ®å‡†å¤‡ä¸ä»»åŠ¡å®šä¹‰",
    "href": "1094-knn.html#æ•°æ®å‡†å¤‡ä¸ä»»åŠ¡å®šä¹‰",
    "title": "KNN æœ€è¿‘é‚»å®Œæ•´æ•™ç¨‹",
    "section": "æ•°æ®å‡†å¤‡ä¸ä»»åŠ¡å®šä¹‰",
    "text": "æ•°æ®å‡†å¤‡ä¸ä»»åŠ¡å®šä¹‰\nè¿™é‡Œç”¨ Iris æ•°æ®å®Œæˆä¸‰åˆ†ç±»ä»»åŠ¡ï¼Œå¹¶ä¿æŒç‰¹å¾æ ‡å‡†åŒ–ã€‚\n\nset.seed(2026)\n\niris_split &lt;- initial_split(iris, prop = 0.7, strata = Species)\ntrain_data &lt;- training(iris_split)\ntest_data &lt;- testing(iris_split)\n\ntrain_x &lt;- train_data |&gt; select(-Species)\ntrain_y &lt;- train_data$Species\n\ntest_x &lt;- test_data |&gt; select(-Species)\ntest_y &lt;- test_data$Species\n\ntrain_scaled &lt;- scale(train_x)\ntest_scaled &lt;- scale(test_x, center = attr(train_scaled, \"scaled:center\"),\n  scale = attr(train_scaled, \"scaled:scale\")\n)\n\næ ‡å‡†åŒ–å¯ä»¥é¿å…æŸä¸ªç‰¹å¾å› é‡çº²è¾ƒå¤§è€Œä¸»å¯¼è·ç¦»è®¡ç®—ã€‚ è‹¥è®­ç»ƒé›†ä¸æµ‹è¯•é›†ä½¿ç”¨ä¸åŒçš„ç¼©æ”¾å‚æ•°ï¼Œé¢„æµ‹å°†äº§ç”Ÿåç§»ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "KNN æœ€è¿‘é‚»"
    ]
  },
  {
    "objectID": "1094-knn.html#æ¨¡å‹é€‰æ‹©ä¸å¯¹æ¯”",
    "href": "1094-knn.html#æ¨¡å‹é€‰æ‹©ä¸å¯¹æ¯”",
    "title": "KNN æœ€è¿‘é‚»å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹é€‰æ‹©ä¸å¯¹æ¯”",
    "text": "æ¨¡å‹é€‰æ‹©ä¸å¯¹æ¯”\nKNN é€šå¸¸ä½œä¸ºåŸºçº¿æ¨¡å‹ï¼Œä¸é€»è¾‘å›å½’ã€å†³ç­–æ ‘ç­‰æ–¹æ³•å¯¹æ¯”ã€‚ æ¨¡å‹å¤æ‚åº¦å®Œå…¨ç”± K æ§åˆ¶ï¼šK è¶Šå°è¶Šçµæ´»ä½†æ˜“è¿‡æ‹Ÿåˆï¼ŒK è¶Šå¤§è¶Šç¨³å®šä½†åå·®æ›´é«˜ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "KNN æœ€è¿‘é‚»"
    ]
  },
  {
    "objectID": "1094-knn.html#è®­ç»ƒä¸è°ƒå‚æµç¨‹",
    "href": "1094-knn.html#è®­ç»ƒä¸è°ƒå‚æµç¨‹",
    "title": "KNN æœ€è¿‘é‚»å®Œæ•´æ•™ç¨‹",
    "section": "è®­ç»ƒä¸è°ƒå‚æµç¨‹",
    "text": "è®­ç»ƒä¸è°ƒå‚æµç¨‹\n\nK å€¼é€‰æ‹©\n\nset.seed(2026)\n\nk_grid &lt;- seq(1, 25, by = 2)\nknn_results &lt;- lapply(k_grid, function(k_value) {\n  preds &lt;- knn(\n    train = train_scaled,\n    test = test_scaled,\n    cl = train_y,\n    k = k_value\n  )\n  tibble(\n    k = k_value,\n    accuracy = mean(preds == test_y)\n  )\n}) |&gt; bind_rows()\n\nknn_results\n\n# A tibble: 13 Ã— 2\n       k accuracy\n   &lt;dbl&gt;    &lt;dbl&gt;\n 1     1    0.956\n 2     3    0.978\n 3     5    0.978\n 4     7    0.978\n 5     9    0.978\n 6    11    0.956\n 7    13    0.933\n 8    15    0.956\n 9    17    0.956\n10    19    0.933\n11    21    0.933\n12    23    0.911\n13    25    0.889\n\n\n\nggplot(knn_results, aes(x = k, y = accuracy)) +\n  geom_line(color = \"#0ea5e9\", linewidth = 1) +\n  geom_point(color = \"#0ea5e9\", size = 2) +\n  labs(title = \"KNN ä¸åŒ K å€¼çš„å‡†ç¡®ç‡\", x = \"K\", y = \"Accuracy\") +\n  theme_bw(base_size = 12)\n\n\n\n\n\n\n\n\n\n\nåŠ æƒæŠ•ç¥¨\nKNN çš„åŠ æƒç‰ˆæœ¬å¯ä»¥è®©æ›´è¿‘çš„æ ·æœ¬æƒé‡æ›´å¤§ã€‚ è¿™é‡Œé€šè¿‡è·ç¦»åŠ æƒç¤ºä¾‹æ¯”è¾ƒç»“æœã€‚\n\nset.seed(2026)\n\npreds_weighted &lt;- knn(\n  train = train_scaled,\n  test = test_scaled,\n  cl = train_y,\n  k = 7,\n  prob = TRUE\n)\n\nmean(preds_weighted == test_y)\n\n[1] 0.9777778\n\n\nä¸ºäº†ç›´è§‚çœ‹å‡ºåŠ æƒç­–ç•¥çš„å½±å“ï¼Œå¯ä»¥ä¸ç›¸åŒ K çš„æ™®é€šæŠ•ç¥¨åšå¯¹æ¯”ã€‚\n\nset.seed(2026)\n\npreds_plain &lt;- knn(\n  train = train_scaled,\n  test = test_scaled,\n  cl = train_y,\n  k = 7\n)\n\ncomparison &lt;- tibble(\n  method = c(\"plain\", \"weighted\"),\n  accuracy = c(\n    mean(preds_plain == test_y),\n    mean(preds_weighted == test_y)\n  )\n)\n\ncomparison\n\n# A tibble: 2 Ã— 2\n  method   accuracy\n  &lt;chr&gt;       &lt;dbl&gt;\n1 plain       0.978\n2 weighted    0.978",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "KNN æœ€è¿‘é‚»"
    ]
  },
  {
    "objectID": "1094-knn.html#è¯„ä¼°æŒ‡æ ‡ä¸ç»“æœè§£è¯»",
    "href": "1094-knn.html#è¯„ä¼°æŒ‡æ ‡ä¸ç»“æœè§£è¯»",
    "title": "KNN æœ€è¿‘é‚»å®Œæ•´æ•™ç¨‹",
    "section": "è¯„ä¼°æŒ‡æ ‡ä¸ç»“æœè§£è¯»",
    "text": "è¯„ä¼°æŒ‡æ ‡ä¸ç»“æœè§£è¯»\n\nknn_eval &lt;- tibble(\n  truth = test_y,\n  estimate = preds_weighted\n)\n\nmetrics &lt;- metric_set(accuracy, kap)\nmetrics(knn_eval, truth = truth, estimate = estimate)\n\n# A tibble: 2 Ã— 3\n  .metric  .estimator .estimate\n  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;\n1 accuracy multiclass     0.978\n2 kap      multiclass     0.967\n\n\nå‡†ç¡®ç‡ç”¨äºè¡¡é‡æ•´ä½“é¢„æµ‹æ­£ç¡®ç‡ï¼ŒKappa ç”¨äºçº æ­£å¶ç„¶ä¸€è‡´ã€‚ å½“ç±»åˆ«åˆ†å¸ƒä¸å‡è¡¡æ—¶ï¼Œå¯åŠ å…¥å®å¹³å‡ F1 ä¸å¬å›ç‡è¡¥å……è¯„ä¼°ã€‚\nKNN å¯¹æ•°æ®æ³„éœ²éå¸¸æ•æ„Ÿï¼šæ ‡å‡†åŒ–ã€ç‰¹å¾é€‰æ‹©éƒ½è¦åœ¨è®­ç»ƒé›†å®Œæˆï¼Œ å†å°†åŒæ ·çš„å‚æ•°åº”ç”¨åˆ°æµ‹è¯•é›†æˆ–æ–°æ ·æœ¬ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "KNN æœ€è¿‘é‚»"
    ]
  },
  {
    "objectID": "1094-knn.html#å¯è§£é‡Šæ€§ä¸å¯è§†åŒ–",
    "href": "1094-knn.html#å¯è§£é‡Šæ€§ä¸å¯è§†åŒ–",
    "title": "KNN æœ€è¿‘é‚»å®Œæ•´æ•™ç¨‹",
    "section": "å¯è§£é‡Šæ€§ä¸å¯è§†åŒ–",
    "text": "å¯è§£é‡Šæ€§ä¸å¯è§†åŒ–\nKNN æ²¡æœ‰æ˜¾å¼æ¨¡å‹å‚æ•°ï¼Œå¯é€šè¿‡â€œå±€éƒ¨é‚»å±…â€å¯è§†åŒ–è§£é‡Šé¢„æµ‹ã€‚\n\nknn_plot_data &lt;- train_data |&gt;\n  select(Sepal.Length, Sepal.Width, Species)\n\nggplot(knn_plot_data, aes(x = Sepal.Length, y = Sepal.Width, color = Species)) +\n  geom_point(size = 2, alpha = 0.8) +\n  theme_bw(base_size = 12) +\n  labs(title = \"è®­ç»ƒæ ·æœ¬çš„å±€éƒ¨ç»“æ„\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "KNN æœ€è¿‘é‚»"
    ]
  },
  {
    "objectID": "1094-knn.html#å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "href": "1094-knn.html#å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "title": "KNN æœ€è¿‘é‚»å®Œæ•´æ•™ç¨‹",
    "section": "å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "text": "å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–\n\næœªæ ‡å‡†åŒ–ç‰¹å¾å¯¼è‡´è·ç¦»è¢«å°ºåº¦ä¸»å¯¼ã€‚\nK å–å€¼è¿‡å°ï¼Œæ¨¡å‹å¯¹å™ªå£°æ•æ„Ÿã€‚\næµ‹è¯•é›†ä¸è®­ç»ƒé›†åˆ†å¸ƒå·®å¼‚è¿‡å¤§ã€‚\nå¤§æ ·æœ¬åœºæ™¯æœªä½¿ç”¨è¿‘é‚»ç´¢å¼•å¯¼è‡´é¢„æµ‹æ…¢ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "KNN æœ€è¿‘é‚»"
    ]
  },
  {
    "objectID": "1094-knn.html#éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "href": "1094-knn.html#éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "title": "KNN æœ€è¿‘é‚»å®Œæ•´æ•™ç¨‹",
    "section": "éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "text": "éƒ¨ç½²ä¸å¤ç°å»ºè®®\n\nä¿å­˜è®­ç»ƒé›†å‡å€¼ä¸æ ‡å‡†å·®ï¼Œç¡®ä¿çº¿ä¸Šæ ‡å‡†åŒ–ä¸€è‡´ã€‚\nå°†æœ€ä¼˜ K å›ºåŒ–å¹¶è®°å½•åœ¨å®éªŒé…ç½®ä¸­ã€‚\nå¯¹å¤§è§„æ¨¡æ•°æ®ä½¿ç”¨è¿‘é‚»ç´¢å¼•åº“æˆ–é™ç»´åå†åš KNNã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "KNN æœ€è¿‘é‚»"
    ]
  },
  {
    "objectID": "1094-knn.html#æ€»ç»“",
    "href": "1094-knn.html#æ€»ç»“",
    "title": "KNN æœ€è¿‘é‚»å®Œæ•´æ•™ç¨‹",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nKNN æ˜¯ç›´è§‚ä¸”æ˜“ç”¨çš„åŸºçº¿æ¨¡å‹ï¼Œé€‚åˆå¿«é€Ÿå»ºç«‹å¯è§£é‡Šçš„åˆ†ç±»æˆ–å›å½’æ–¹æ¡ˆã€‚ é€šè¿‡æ ‡å‡†åŒ–ã€K å€¼è°ƒå‚å’ŒåŠ æƒç­–ç•¥ï¼Œå¯æ˜¾è‘—æå‡é¢„æµ‹ç¨³å®šæ€§ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "KNN æœ€è¿‘é‚»"
    ]
  },
  {
    "objectID": "1095-naive-bayes.html",
    "href": "1095-naive-bayes.html",
    "title": "æœ´ç´ è´å¶æ–¯å®Œæ•´æ•™ç¨‹",
    "section": "",
    "text": "library(dplyr)\nlibrary(ggplot2)\nlibrary(rsample)\nlibrary(yardstick)\nlibrary(e1071)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æœ´ç´ è´å¶æ–¯"
    ]
  },
  {
    "objectID": "1095-naive-bayes.html#æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "href": "1095-naive-bayes.html#æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "title": "æœ´ç´ è´å¶æ–¯å®Œæ•´æ•™ç¨‹",
    "section": "æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "text": "æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯\næœ´ç´ è´å¶æ–¯é€šè¿‡æ¡ä»¶ç‹¬ç«‹å‡è®¾æ„å»ºæ¦‚ç‡æ¨¡å‹ï¼Œåœ¨æ–‡æœ¬åˆ†ç±»ä¸å°æ ·æœ¬åœºæ™¯ä¸­è¡¨ç°ç¨³å®šã€‚ æœ¬æ•™ç¨‹å±•ç¤ºä»æ¦‚ç‡å»ºæ¨¡ã€å¹³æ»‘å¤„ç†åˆ°åˆ†ç±»è¯„ä¼°çš„å®Œæ•´æµç¨‹ã€‚\né€‚åˆåœºæ™¯\n\næ–‡æœ¬åˆ†ç±»ä¸ä¸»é¢˜è¯†åˆ«\nå°æ ·æœ¬ã€ç‰¹å¾è¾ƒå¤šçš„åˆ†ç±»ä»»åŠ¡\néœ€è¦æ¦‚ç‡è¾“å‡ºçš„å†³ç­–åœºæ™¯\n\nä¸é€‚åˆåœºæ™¯\n\nå¼ºç‰¹å¾ç›¸å…³æ€§çš„æ•°æ®\néœ€è¦å¤æ‚éçº¿æ€§è¾¹ç•Œçš„ä»»åŠ¡",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æœ´ç´ è´å¶æ–¯"
    ]
  },
  {
    "objectID": "1095-naive-bayes.html#æ¨¡å‹å…¥é—¨æœ´ç´ è´å¶æ–¯çš„æ ¸å¿ƒæ€æƒ³",
    "href": "1095-naive-bayes.html#æ¨¡å‹å…¥é—¨æœ´ç´ è´å¶æ–¯çš„æ ¸å¿ƒæ€æƒ³",
    "title": "æœ´ç´ è´å¶æ–¯å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹å…¥é—¨ï¼šæœ´ç´ è´å¶æ–¯çš„æ ¸å¿ƒæ€æƒ³",
    "text": "æ¨¡å‹å…¥é—¨ï¼šæœ´ç´ è´å¶æ–¯çš„æ ¸å¿ƒæ€æƒ³\næœ´ç´ è´å¶æ–¯åŸºäºè´å¶æ–¯å…¬å¼ï¼Œå‡è®¾ç‰¹å¾åœ¨ç»™å®šç±»åˆ«æ¡ä»¶ä¸‹ç›¸äº’ç‹¬ç«‹ã€‚ å°½ç®¡å‡è®¾è¾ƒå¼ºï¼Œä½†åœ¨è®¸å¤šå®é™…åœºæ™¯ä¸­ä»èƒ½è·å¾—ç¨³å®šè¡¨ç°ã€‚\næ ¸å¿ƒå…¬å¼ï¼š\n[ P(yx) P(y) _{j=1}^p P(x_jy) ]",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æœ´ç´ è´å¶æ–¯"
    ]
  },
  {
    "objectID": "1095-naive-bayes.html#æ•°æ®å‡†å¤‡ä¸ä»»åŠ¡å®šä¹‰",
    "href": "1095-naive-bayes.html#æ•°æ®å‡†å¤‡ä¸ä»»åŠ¡å®šä¹‰",
    "title": "æœ´ç´ è´å¶æ–¯å®Œæ•´æ•™ç¨‹",
    "section": "æ•°æ®å‡†å¤‡ä¸ä»»åŠ¡å®šä¹‰",
    "text": "æ•°æ®å‡†å¤‡ä¸ä»»åŠ¡å®šä¹‰\nä½¿ç”¨ Iris æ•°æ®æ„å»ºä¸‰åˆ†ç±»ä»»åŠ¡ï¼Œå¹¶æ¯”è¾ƒé«˜æ–¯æœ´ç´ è´å¶æ–¯çš„æ•ˆæœã€‚\n\nset.seed(2026)\n\niris_split &lt;- initial_split(iris, prop = 0.7, strata = Species)\ntrain_data &lt;- training(iris_split)\ntest_data &lt;- testing(iris_split)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æœ´ç´ è´å¶æ–¯"
    ]
  },
  {
    "objectID": "1095-naive-bayes.html#æ¨¡å‹é€‰æ‹©ä¸å¯¹æ¯”",
    "href": "1095-naive-bayes.html#æ¨¡å‹é€‰æ‹©ä¸å¯¹æ¯”",
    "title": "æœ´ç´ è´å¶æ–¯å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹é€‰æ‹©ä¸å¯¹æ¯”",
    "text": "æ¨¡å‹é€‰æ‹©ä¸å¯¹æ¯”\næœ´ç´ è´å¶æ–¯å¯ä½œä¸ºåŸºçº¿æ¨¡å‹ï¼Œä¸é€»è¾‘å›å½’ã€KNN ç­‰æ–¹æ³•å¯¹æ¯”ã€‚ å½“ç‰¹å¾è¾ƒå¤šä¸”ç›¸å…³æ€§ä¸å¼ºæ—¶ï¼Œæœ´ç´ è´å¶æ–¯å¾€å¾€å…·å¤‡è‰¯å¥½æ³›åŒ–èƒ½åŠ›ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æœ´ç´ è´å¶æ–¯"
    ]
  },
  {
    "objectID": "1095-naive-bayes.html#è®­ç»ƒä¸è°ƒå‚æµç¨‹",
    "href": "1095-naive-bayes.html#è®­ç»ƒä¸è°ƒå‚æµç¨‹",
    "title": "æœ´ç´ è´å¶æ–¯å®Œæ•´æ•™ç¨‹",
    "section": "è®­ç»ƒä¸è°ƒå‚æµç¨‹",
    "text": "è®­ç»ƒä¸è°ƒå‚æµç¨‹\n\nåŸºç¡€è®­ç»ƒ\n\nset.seed(2026)\n\nnb_model &lt;- naiveBayes(Species ~ ., data = train_data)\nnb_model\n\n\nNaive Bayes Classifier for Discrete Predictors\n\nCall:\nnaiveBayes.default(x = X, y = Y, laplace = laplace)\n\nA-priori probabilities:\nY\n    setosa versicolor  virginica \n 0.3333333  0.3333333  0.3333333 \n\nConditional probabilities:\n            Sepal.Length\nY                [,1]      [,2]\n  setosa     5.020000 0.3367666\n  versicolor 5.988571 0.5126468\n  virginica  6.651429 0.5746464\n\n            Sepal.Width\nY                [,1]      [,2]\n  setosa     3.397143 0.4090777\n  versicolor 2.768571 0.2978071\n  virginica  2.994286 0.3114887\n\n            Petal.Length\nY                [,1]      [,2]\n  setosa     1.477143 0.1646488\n  versicolor 4.271429 0.4693998\n  virginica  5.608571 0.5392650\n\n            Petal.Width\nY                 [,1]      [,2]\n  setosa     0.2457143 0.1120474\n  versicolor 1.3171429 0.1838889\n  virginica  2.0600000 0.3021492\n\n\n\n\nå¹³æ»‘ä¸åˆ†å¸ƒå‡è®¾\né«˜æ–¯æœ´ç´ è´å¶æ–¯é»˜è®¤å‡è®¾è¿ç»­å˜é‡æœä»æ­£æ€åˆ†å¸ƒã€‚ å¯¹ç¦»æ•£æˆ–è®¡æ•°ç‰¹å¾ï¼Œå¯è€ƒè™‘å¤šé¡¹å¼æˆ–ä¼¯åŠªåˆ©å˜ä½“ã€‚\nå¹³æ»‘ç”¨äºé¿å…æŸä¸ªç‰¹å¾åœ¨æŸä¸€ç±»ä¸­ä»æœªå‡ºç°å¯¼è‡´çš„é›¶æ¦‚ç‡é—®é¢˜ã€‚ å¸¸è§çš„åšæ³•æ˜¯æ‹‰æ™®æ‹‰æ–¯å¹³æ»‘ï¼ˆåŠ  1 å¹³æ»‘ï¼‰ï¼Œç­‰ä»·äºå¼•å…¥å¼±å…ˆéªŒã€‚ å¯¹æ–‡æœ¬åˆ†ç±»ï¼Œå¹³æ»‘å¼ºåº¦è¿‡å¤§å¯èƒ½ä¼šæŠ¹å¹³é«˜åŒºåˆ†åº¦è¯æ±‡ï¼Œéœ€è¦è°ƒèŠ‚ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æœ´ç´ è´å¶æ–¯"
    ]
  },
  {
    "objectID": "1095-naive-bayes.html#è¯„ä¼°æŒ‡æ ‡ä¸ç»“æœè§£è¯»",
    "href": "1095-naive-bayes.html#è¯„ä¼°æŒ‡æ ‡ä¸ç»“æœè§£è¯»",
    "title": "æœ´ç´ è´å¶æ–¯å®Œæ•´æ•™ç¨‹",
    "section": "è¯„ä¼°æŒ‡æ ‡ä¸ç»“æœè§£è¯»",
    "text": "è¯„ä¼°æŒ‡æ ‡ä¸ç»“æœè§£è¯»\n\nnb_pred &lt;- predict(nb_model, newdata = test_data)\n\nnb_eval &lt;- tibble(\n  truth = test_data$Species,\n  estimate = nb_pred\n)\n\nmetrics &lt;- metric_set(accuracy, kap)\nmetrics(nb_eval, truth = truth, estimate = estimate)\n\n# A tibble: 2 Ã— 3\n  .metric  .estimator .estimate\n  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;\n1 accuracy multiclass     0.933\n2 kap      multiclass     0.9  \n\n\nå¯¹ç±»åˆ«ä¸å‡è¡¡çš„ä»»åŠ¡ï¼Œå¯å¢åŠ  macro F1ã€çµæ•åº¦ä¸ç‰¹å¼‚åº¦æŒ‡æ ‡ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æœ´ç´ è´å¶æ–¯"
    ]
  },
  {
    "objectID": "1095-naive-bayes.html#å¯è§£é‡Šæ€§ä¸å¯è§†åŒ–",
    "href": "1095-naive-bayes.html#å¯è§£é‡Šæ€§ä¸å¯è§†åŒ–",
    "title": "æœ´ç´ è´å¶æ–¯å®Œæ•´æ•™ç¨‹",
    "section": "å¯è§£é‡Šæ€§ä¸å¯è§†åŒ–",
    "text": "å¯è§£é‡Šæ€§ä¸å¯è§†åŒ–\næœ´ç´ è´å¶æ–¯è¾“å‡ºçš„æ¡ä»¶æ¦‚ç‡å¯ç”¨äºè§£é‡Šç‰¹å¾å¯¹åˆ†ç±»çš„è´¡çŒ®ã€‚\n\næ¡ä»¶æ¦‚ç‡çš„è§£é‡Š\næ¦‚ç‡å€¼è¡¨ç¤ºåœ¨æŸä¸ªç±»åˆ«ä¸‹è§‚æµ‹åˆ°è¯¥ç‰¹å¾çš„å¯èƒ½æ€§ã€‚ ä¾‹å¦‚æŸä¸ªç‰¹å¾åœ¨æŸç±»ä¸Šçš„æ¡ä»¶å¯†åº¦æ›´é«˜ï¼Œæ„å‘³ç€è¯¥ç‰¹å¾æ›´æ”¯æŒè¯¥ç±»åˆ«ã€‚ å¯¹äºè¿ç»­å˜é‡ï¼Œå¯æ¯”è¾ƒå‡å€¼ä¸æ ‡å‡†å·®çš„å·®å¼‚æ¥ç†è§£åŒºåˆ†åº¦ã€‚\n\nnb_scores &lt;- nb_model$tables$Sepal.Length\nnb_scores_df &lt;- as.data.frame(nb_scores)\nnb_scores_df &lt;- tibble::rownames_to_column(nb_scores_df, var = \"class\")\n\nnb_scores_df\n\n       class       V1        V2\n1     setosa 5.020000 0.3367666\n2 versicolor 5.988571 0.5126468\n3  virginica 6.651429 0.5746464",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æœ´ç´ è´å¶æ–¯"
    ]
  },
  {
    "objectID": "1095-naive-bayes.html#å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "href": "1095-naive-bayes.html#å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "title": "æœ´ç´ è´å¶æ–¯å®Œæ•´æ•™ç¨‹",
    "section": "å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "text": "å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–\n\nå¿½ç•¥ç±»åˆ«å…ˆéªŒå¯¼è‡´åˆ†ç±»åå·®ã€‚\nè¿ç»­å˜é‡åˆ†å¸ƒåç¦»æ­£æ€ï¼Œéœ€å˜æ¢æˆ–ç¦»æ•£åŒ–ã€‚\nè®­ç»ƒé›†ç±»åˆ«ä¸å‡è¡¡å¯¼è‡´é¢„æµ‹åç§»ã€‚\nç‰¹å¾ç›¸å…³æ€§è¿‡å¼ºï¼Œå‡è®¾å¤±æ•ˆã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æœ´ç´ è´å¶æ–¯"
    ]
  },
  {
    "objectID": "1095-naive-bayes.html#éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "href": "1095-naive-bayes.html#éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "title": "æœ´ç´ è´å¶æ–¯å®Œæ•´æ•™ç¨‹",
    "section": "éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "text": "éƒ¨ç½²ä¸å¤ç°å»ºè®®\n\nå›ºå®šç‰¹å¾å·¥ç¨‹æµç¨‹ï¼Œç¡®ä¿çº¿ä¸Šç‰¹å¾ä¸è®­ç»ƒä¸€è‡´ã€‚\nè®°å½•å…ˆéªŒåˆ†å¸ƒä¸å¹³æ»‘å‚æ•°ï¼Œä¾¿äºå¤ç°ã€‚\nå¯¹æ–‡æœ¬ä»»åŠ¡ä¿ç•™è¯å…¸ä¸ TF-IDF è§„åˆ™ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æœ´ç´ è´å¶æ–¯"
    ]
  },
  {
    "objectID": "1095-naive-bayes.html#æ€»ç»“",
    "href": "1095-naive-bayes.html#æ€»ç»“",
    "title": "æœ´ç´ è´å¶æ–¯å®Œæ•´æ•™ç¨‹",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\næœ´ç´ è´å¶æ–¯æ˜¯å¿«é€Ÿã€ç¨³å®šä¸”æ˜“è§£é‡Šçš„æ¦‚ç‡åˆ†ç±»æ¨¡å‹ã€‚ åœ¨æ–‡æœ¬åˆ†ç±»ä¸å°æ ·æœ¬ä»»åŠ¡ä¸­ä»ç„¶æ˜¯é«˜æ€§ä»·æ¯”çš„é¦–é€‰åŸºçº¿ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æœ´ç´ è´å¶æ–¯"
    ]
  },
  {
    "objectID": "1096-gbdt.html",
    "href": "1096-gbdt.html",
    "title": "GBDT æ¢¯åº¦æå‡æ ‘å®Œæ•´æ•™ç¨‹",
    "section": "",
    "text": "library(dplyr)\nlibrary(ggplot2)\nlibrary(rsample)\nlibrary(yardstick)\nlibrary(gbm)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "GBDT æ¢¯åº¦æå‡æ ‘"
    ]
  },
  {
    "objectID": "1096-gbdt.html#æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "href": "1096-gbdt.html#æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "title": "GBDT æ¢¯åº¦æå‡æ ‘å®Œæ•´æ•™ç¨‹",
    "section": "æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "text": "æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯\nGBDT é€šè¿‡é€æ­¥æ‹Ÿåˆæ®‹å·®æ„å»ºå¼ºé¢„æµ‹æ¨¡å‹ï¼Œé€‚åˆç»“æ„åŒ–æ•°æ®çš„åˆ†ç±»ä¸å›å½’ã€‚ æœ¬æ•™ç¨‹å±•ç¤º Boosting é€»è¾‘ã€å­¦ä¹ ç‡ä¸è¿­ä»£ç­–ç•¥ã€æ—©åœä¸è¯„ä¼°æµç¨‹ã€‚\né€‚åˆåœºæ™¯\n\nç»“æ„åŒ–è¡¨æ ¼æ•°æ®çš„é«˜ç²¾åº¦é¢„æµ‹\néœ€è¦éçº¿æ€§å’Œç‰¹å¾äº¤äº’å»ºæ¨¡\nå¯¹ç‰¹å¾å°ºåº¦ä¸æ•æ„Ÿçš„åœºæ™¯\n\nä¸é€‚åˆåœºæ™¯\n\nè¶…å¤§è§„æ¨¡æ•°æ®ä½†èµ„æºæœ‰é™\nå¼ºæ—¶åºä¾èµ–æˆ–é«˜ç»´ç¨€ç–æ–‡æœ¬æ•°æ®",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "GBDT æ¢¯åº¦æå‡æ ‘"
    ]
  },
  {
    "objectID": "1096-gbdt.html#æ¨¡å‹å…¥é—¨gbdt-çš„æ ¸å¿ƒæ€æƒ³",
    "href": "1096-gbdt.html#æ¨¡å‹å…¥é—¨gbdt-çš„æ ¸å¿ƒæ€æƒ³",
    "title": "GBDT æ¢¯åº¦æå‡æ ‘å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹å…¥é—¨ï¼šGBDT çš„æ ¸å¿ƒæ€æƒ³",
    "text": "æ¨¡å‹å…¥é—¨ï¼šGBDT çš„æ ¸å¿ƒæ€æƒ³\nGBDT å°†æ¨¡å‹è¡¨ç¤ºä¸ºåŠ æ³•æ ‘ï¼šæ¯ä¸€æ£µæ ‘éƒ½æ‹Ÿåˆå‰ä¸€è½®çš„æ®‹å·®ï¼Œ é€æ­¥é™ä½æŸå¤±å‡½æ•°ã€‚å­¦ä¹ ç‡æ§åˆ¶æ¯æ¬¡æ›´æ–°å¹…åº¦ï¼Œæ ‘æ·±åº¦æ§åˆ¶æ¨¡å‹å¤æ‚åº¦ã€‚\nå­¦ä¹ ç‡ä¸æ ‘æ•°å­˜åœ¨æ˜æ˜¾çš„æƒè¡¡ï¼šå­¦ä¹ ç‡è¶Šå°é€šå¸¸éœ€è¦æ›´å¤šæ ‘æ•°ï¼Œ æ¨¡å‹æ›´ç¨³å¥ä½†è®­ç»ƒæ›´æ…¢ï¼›å­¦ä¹ ç‡è¿‡å¤§å®¹æ˜“è¿‡æ‹Ÿåˆä¸”è¡¨ç°ä¸ç¨³å®šã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "GBDT æ¢¯åº¦æå‡æ ‘"
    ]
  },
  {
    "objectID": "1096-gbdt.html#æ•°æ®å‡†å¤‡ä¸ä»»åŠ¡å®šä¹‰",
    "href": "1096-gbdt.html#æ•°æ®å‡†å¤‡ä¸ä»»åŠ¡å®šä¹‰",
    "title": "GBDT æ¢¯åº¦æå‡æ ‘å®Œæ•´æ•™ç¨‹",
    "section": "æ•°æ®å‡†å¤‡ä¸ä»»åŠ¡å®šä¹‰",
    "text": "æ•°æ®å‡†å¤‡ä¸ä»»åŠ¡å®šä¹‰\nä½¿ç”¨ Iris æ•°æ®æ„å»ºäºŒåˆ†ç±»ä»»åŠ¡ï¼šsetosa vs å…¶ä»–ç±»åˆ«ã€‚\n\nset.seed(2026)\n\niris_binary &lt;- iris |&gt;\n  mutate(target = if_else(Species == \"setosa\", 1, 0))\n\nsplit_obj &lt;- initial_split(iris_binary, prop = 0.7, strata = target)\ntrain_data &lt;- training(split_obj)\ntest_data &lt;- testing(split_obj)\n\ntrain_data &lt;- train_data |&gt;\n  mutate(target_label = factor(if_else(target == 1, \"setosa\", \"other\"),\n    levels = c(\"setosa\", \"other\")\n  ))\n\ntest_data &lt;- test_data |&gt;\n  mutate(target_label = factor(if_else(target == 1, \"setosa\", \"other\"),\n    levels = c(\"setosa\", \"other\")\n  ))",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "GBDT æ¢¯åº¦æå‡æ ‘"
    ]
  },
  {
    "objectID": "1096-gbdt.html#æ¨¡å‹é€‰æ‹©ä¸å¯¹æ¯”",
    "href": "1096-gbdt.html#æ¨¡å‹é€‰æ‹©ä¸å¯¹æ¯”",
    "title": "GBDT æ¢¯åº¦æå‡æ ‘å®Œæ•´æ•™ç¨‹",
    "section": "æ¨¡å‹é€‰æ‹©ä¸å¯¹æ¯”",
    "text": "æ¨¡å‹é€‰æ‹©ä¸å¯¹æ¯”\nGBDT é€šå¸¸ä½œä¸ºé«˜æ€§èƒ½æ¨¡å‹ï¼Œä¸éšæœºæ£®æ—æˆ– XGBoost å¯¹æ¯”ã€‚ å­¦ä¹ ç‡è¾ƒå°ã€æ ‘æ•°è¾ƒå¤šçš„é…ç½®é€šå¸¸æ›´ç¨³å¥ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "GBDT æ¢¯åº¦æå‡æ ‘"
    ]
  },
  {
    "objectID": "1096-gbdt.html#è®­ç»ƒä¸è°ƒå‚æµç¨‹",
    "href": "1096-gbdt.html#è®­ç»ƒä¸è°ƒå‚æµç¨‹",
    "title": "GBDT æ¢¯åº¦æå‡æ ‘å®Œæ•´æ•™ç¨‹",
    "section": "è®­ç»ƒä¸è°ƒå‚æµç¨‹",
    "text": "è®­ç»ƒä¸è°ƒå‚æµç¨‹\n\nåŸºç¡€è®­ç»ƒ\n\nset.seed(2026)\n\ngbdt_model &lt;- gbm(\n  formula = target ~ .,\n  distribution = \"bernoulli\",\n  data = train_data,\n  n.trees = 300,\n  interaction.depth = 3,\n  shrinkage = 0.05,\n  n.minobsinnode = 10,\n  bag.fraction = 0.8,\n  verbose = FALSE\n)\n\n\n\né€‰æ‹©æœ€ä¼˜æ ‘æ•°\n\nset.seed(2026)\n\nbest_iter &lt;- gbm.perf(gbdt_model, method = \"OOB\", plot.it = FALSE)\nbest_iter\n\n[1] 300\nattr(,\"smoother\")\nCall:\nloess(formula = object$oobag.improve ~ x, enp.target = min(max(4, \n    length(x)/10), 50))\n\nNumber of Observations: 300 \nEquivalent Number of Parameters: 24.11 \nResidual Standard Error: 0.0009006 \n\n\nOOB è¯¯å·®å¯ä»¥è§†ä¸ºä¸€ç§å†…ç½®éªŒè¯æœºåˆ¶ï¼Œç”¨äºé¿å…æ ‘æ•°è¿‡å¤šå¯¼è‡´è¿‡æ‹Ÿåˆã€‚ å¦‚æœæ ·æœ¬é‡è¶³å¤Ÿï¼Œä¹Ÿå¯åœ¨éªŒè¯é›†ä¸Šåšæ—©åœï¼Œé€‰æ‹©ä½¿éªŒè¯æŸå¤±æœ€ä½çš„æ ‘æ•°ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "GBDT æ¢¯åº¦æå‡æ ‘"
    ]
  },
  {
    "objectID": "1096-gbdt.html#è¯„ä¼°æŒ‡æ ‡ä¸ç»“æœè§£è¯»",
    "href": "1096-gbdt.html#è¯„ä¼°æŒ‡æ ‡ä¸ç»“æœè§£è¯»",
    "title": "GBDT æ¢¯åº¦æå‡æ ‘å®Œæ•´æ•™ç¨‹",
    "section": "è¯„ä¼°æŒ‡æ ‡ä¸ç»“æœè§£è¯»",
    "text": "è¯„ä¼°æŒ‡æ ‡ä¸ç»“æœè§£è¯»\n\nprob_pred &lt;- predict(gbdt_model, newdata = test_data, n.trees = best_iter, type = \"response\")\nclass_pred &lt;- if_else(prob_pred &gt; 0.5, \"setosa\", \"other\") |&gt;\n  factor(levels = levels(test_data$target_label))\n\ngbdt_eval &lt;- tibble(\n  truth = test_data$target_label,\n  estimate = class_pred\n)\n\nmetrics &lt;- metric_set(accuracy, kap)\nmetrics(gbdt_eval, truth = truth, estimate = estimate)\n\n# A tibble: 2 Ã— 3\n  .metric  .estimator .estimate\n  &lt;chr&gt;    &lt;chr&gt;          &lt;dbl&gt;\n1 accuracy binary             1\n2 kap      binary             1",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "GBDT æ¢¯åº¦æå‡æ ‘"
    ]
  },
  {
    "objectID": "1096-gbdt.html#å¯è§£é‡Šæ€§ä¸å¯è§†åŒ–",
    "href": "1096-gbdt.html#å¯è§£é‡Šæ€§ä¸å¯è§†åŒ–",
    "title": "GBDT æ¢¯åº¦æå‡æ ‘å®Œæ•´æ•™ç¨‹",
    "section": "å¯è§£é‡Šæ€§ä¸å¯è§†åŒ–",
    "text": "å¯è§£é‡Šæ€§ä¸å¯è§†åŒ–\n\nimportance &lt;- summary(gbdt_model, n.trees = best_iter, plotit = FALSE)\nimportance_df &lt;- as_tibble(importance)\n\nimportance_df\n\n# A tibble: 6 Ã— 2\n  var           rel.inf\n  &lt;chr&gt;           &lt;dbl&gt;\n1 Species      6.69e+ 1\n2 Petal.Length 2.73e+ 1\n3 target_label 5.38e+ 0\n4 Petal.Width  4.89e- 1\n5 Sepal.Length 1.34e-28\n6 Sepal.Width  1.48e-29\n\n\n\nggplot(importance_df, aes(x = reorder(var, rel.inf), y = rel.inf)) +\n  geom_col(fill = \"#10b981\", alpha = 0.8) +\n  coord_flip() +\n  labs(title = \"GBDT ç‰¹å¾é‡è¦æ€§\", x = \"ç‰¹å¾\", y = \"ç›¸å¯¹é‡è¦æ€§\") +\n  theme_bw(base_size = 12)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "GBDT æ¢¯åº¦æå‡æ ‘"
    ]
  },
  {
    "objectID": "1096-gbdt.html#å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "href": "1096-gbdt.html#å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "title": "GBDT æ¢¯åº¦æå‡æ ‘å®Œæ•´æ•™ç¨‹",
    "section": "å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "text": "å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–\n\nå­¦ä¹ ç‡è¿‡å¤§å¯¼è‡´è¿‡æ‹Ÿåˆæˆ–ä¸ç¨³å®šã€‚\næ ‘æ·±åº¦è¿‡æ·±å¯¼è‡´æ³›åŒ–ä¸‹é™ã€‚\nä¸åšæ—©åœå¯¼è‡´è®­ç»ƒè¿‡åº¦ã€‚\nç±»åˆ«ä¸å¹³è¡¡æœªè°ƒæ•´æƒé‡ã€‚\nä»…çœ‹æ€»ä½“å‡†ç¡®ç‡ï¼Œå¿½è§†ä¸šåŠ¡ä»£ä»·ä¸é˜ˆå€¼é€‰æ‹©ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "GBDT æ¢¯åº¦æå‡æ ‘"
    ]
  },
  {
    "objectID": "1096-gbdt.html#éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "href": "1096-gbdt.html#éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "title": "GBDT æ¢¯åº¦æå‡æ ‘å®Œæ•´æ•™ç¨‹",
    "section": "éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "text": "éƒ¨ç½²ä¸å¤ç°å»ºè®®\n\nä¿å­˜æœ€ä¼˜æ ‘æ•°ä¸è¶…å‚æ•°é…ç½®ã€‚\nå¯¹ç”Ÿäº§ç¯å¢ƒè®¾å®šå›ºå®šé˜ˆå€¼å¹¶ç›‘æ§æ¼‚ç§»ã€‚\néœ€è¦æ›´é«˜æ€§èƒ½æ—¶å‡çº§åˆ° XGBoost/LightGBMã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "GBDT æ¢¯åº¦æå‡æ ‘"
    ]
  },
  {
    "objectID": "1096-gbdt.html#æ€»ç»“",
    "href": "1096-gbdt.html#æ€»ç»“",
    "title": "GBDT æ¢¯åº¦æå‡æ ‘å®Œæ•´æ•™ç¨‹",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nGBDT é€šè¿‡é€æ­¥æ‹Ÿåˆæ®‹å·®å®ç°é«˜ç²¾åº¦é¢„æµ‹ï¼Œæ˜¯è¡¨æ ¼æ•°æ®çš„å¼ºåŠ›åŸºçº¿æ¨¡å‹ã€‚ æ§åˆ¶å­¦ä¹ ç‡ã€æ ‘æ·±åº¦ä¸æ—©åœç­–ç•¥ï¼Œæ˜¯ç¨³å®šæ€§èƒ½çš„å…³é”®ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "GBDT æ¢¯åº¦æå‡æ ‘"
    ]
  },
  {
    "objectID": "1080-random-forest.html#æ–¹æ³•æ¡†æ¶ä¸æµç¨‹",
    "href": "1080-random-forest.html#æ–¹æ³•æ¡†æ¶ä¸æµç¨‹",
    "title": "éšæœºæ£®æ—ä¸å†³ç­–æ ‘å®Œæ•´æ•™ç¨‹",
    "section": "æ–¹æ³•æ¡†æ¶ä¸æµç¨‹",
    "text": "æ–¹æ³•æ¡†æ¶ä¸æµç¨‹\nå†³ç­–æ ‘ä¸éšæœºæ£®æ—çš„å®Œæ•´æµç¨‹å¯ä»¥åˆ†æˆå››ä¸ªé˜¶æ®µï¼š å…ˆæ˜ç¡®ä»»åŠ¡ç±»å‹ä¸è¯„ä»·æŒ‡æ ‡ï¼Œå†è¿›è¡Œæ•°æ®åˆ’åˆ†ä¸ç‰¹å¾å‡†å¤‡ï¼› æ¥ç€ç”¨å•æ£µæ ‘å»ºç«‹å¯è§£é‡ŠåŸºçº¿ï¼Œæœ€åç”¨éšæœºæ£®æ—æå‡æ³›åŒ–è¡¨ç°å¹¶åšè§£é‡Šã€‚ è¿™ä¸ªé¡ºåºå¯ä»¥é¿å…å…ˆä¸Šå¤æ‚æ¨¡å‹è€Œå¿½ç•¥æ•°æ®ä¸è¯„ä»·å£å¾„ã€‚\n\nå…³é”®æœ¯è¯­ä¸åˆ†è£‚å‡†åˆ™\nå†³ç­–æ ‘çš„â€œå¥½åˆ†è£‚â€æœ¬è´¨æ˜¯è®©èŠ‚ç‚¹æ›´çº¯ï¼š åˆ†ç±»ä»»åŠ¡å¸¸ç”¨åŸºå°¼æŒ‡æ•°æˆ–ä¿¡æ¯å¢ç›Šï¼Œå›å½’ä»»åŠ¡å¸¸ç”¨å‡æ–¹è¯¯å·®ã€‚ éšæœºæ£®æ—é€šè¿‡â€œæ ·æœ¬è‡ªåŠ©æŠ½æ · + ç‰¹å¾å­é›†éšæœºåŒ–â€é™ä½æ ‘ä¹‹é—´çš„ç›¸å…³æ€§ï¼Œ ä»è€Œå‡å°‘æ¨¡å‹æ–¹å·®å¹¶æå‡æ³›åŒ–èƒ½åŠ›ã€‚\n\n\nå…³é”®è¶…å‚æ•°ä¸å½±å“\n\ncpï¼ˆå¤æ‚åº¦å‚æ•°ï¼‰ï¼šæ§åˆ¶æ˜¯å¦ç»§ç»­åˆ†è£‚ï¼Œæ•°å€¼è¶Šå¤§æ ‘è¶Šæµ…ã€‚\nmtryï¼šæ¯æ¬¡åˆ†è£‚å¯ç”¨çš„ç‰¹å¾æ•°ï¼Œè¶Šå°éšæœºæ€§è¶Šå¼ºã€‚\nnum.treesï¼šæ ‘çš„æ•°é‡ï¼Œè¶Šå¤šè¶Šç¨³å®šï¼Œä½†è®­ç»ƒæ—¶é—´å¢åŠ ã€‚\nmin.node.sizeï¼šå¶å­èŠ‚ç‚¹æœ€å°æ ·æœ¬æ•°ï¼Œè¿‡å°å®¹æ˜“è¿‡æ‹Ÿåˆã€‚\n\n\n\nè¯„ä»·æŒ‡æ ‡é€‰æ‹©\næœ¬æ•™ç¨‹ç”¨äºŒåˆ†ç±»ç¤ºä¾‹ï¼Œå› æ­¤å…³æ³¨å‡†ç¡®ç‡ä¸ ROC AUCã€‚ å‡†ç¡®ç‡ç›´è§‚ä½†å—é˜ˆå€¼å½±å“ï¼ŒROC AUC æ›´èƒ½åæ˜ åŒºåˆ†åº¦ã€‚ å®é™…åº”ç”¨ä¸­åº”ç»“åˆä¸šåŠ¡æˆæœ¬è®¾å®šé˜ˆå€¼ä¸è¯„ä»·ä¼˜å…ˆçº§ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "éšæœºæ£®æ—ä¸å†³ç­–æ ‘"
    ]
  },
  {
    "objectID": "1081-svm.html#æ–¹æ³•æ¡†æ¶ä¸æµç¨‹",
    "href": "1081-svm.html#æ–¹æ³•æ¡†æ¶ä¸æµç¨‹",
    "title": "æ”¯æŒå‘é‡æœº SVM å®Œæ•´æ•™ç¨‹",
    "section": "æ–¹æ³•æ¡†æ¶ä¸æµç¨‹",
    "text": "æ–¹æ³•æ¡†æ¶ä¸æµç¨‹\nSVM å®è·µé€šå¸¸æŒ‰â€œçº¿æ€§åŸºçº¿ â†’ æ ¸å‡½æ•°æ‰©å±• â†’ è°ƒå‚éªŒè¯â€çš„é¡ºåºè¿›è¡Œï¼š å…ˆå»ºç«‹çº¿æ€§ SVM è§‚å¯Ÿå¯è§£é‡Šè¾¹ç•Œä¸åŸºæœ¬æ€§èƒ½ï¼Œå†ç”¨æ ¸å‡½æ•°å¤„ç†éçº¿æ€§ç»“æ„ï¼Œ æœ€åé€šè¿‡äº¤å‰éªŒè¯é€‰æ‹© cost ä¸ gamma çš„åˆç†ç»„åˆã€‚\n\nå…³é”®æœ¯è¯­ä¸ç›´è§‰\n\né—´éš”ï¼ˆmarginï¼‰ï¼šåˆ†éš”è¶…å¹³é¢åˆ°æœ€è¿‘æ ·æœ¬çš„è·ç¦»ï¼Œè¶Šå¤§è¶Šç¨³å¥ã€‚\næ”¯æŒå‘é‡ï¼šå†³å®šè¾¹ç•Œä½ç½®çš„å…³é”®æ ·æœ¬ï¼Œæ¨¡å‹åªä¾èµ–è¿™äº›ç‚¹ã€‚\næ ¸å‡½æ•°ï¼šå°†æ•°æ®æ˜ å°„åˆ°é«˜ç»´ç©ºé—´ä»¥å®ç°çº¿æ€§å¯åˆ†ã€‚\n\n\n\næ•°æ®æ ‡å‡†åŒ–å¿…è¦æ€§\nSVM å¯¹å°ºåº¦æåº¦æ•æ„Ÿï¼Œæœªæ ‡å‡†åŒ–ä¼šå¯¼è‡´æŸäº›å˜é‡ä¸»å¯¼é—´éš”ã€‚ å› æ­¤å¿…é¡»å¯¹è®­ç»ƒé›†æ ‡å‡†åŒ–ï¼Œå¹¶æŠŠç›¸åŒçš„ä¸­å¿ƒä¸å°ºåº¦åº”ç”¨åˆ°æµ‹è¯•é›†ã€‚\n\n\nè¯„ä»·æŒ‡æ ‡é€‰æ‹©\nåˆ†ç±»ç¤ºä¾‹ä½¿ç”¨å‡†ç¡®ç‡ä¸ ROC AUCã€‚ è‹¥ç±»åˆ«ä¸å¹³è¡¡ï¼Œå»ºè®®åŠ å…¥ç²¾ç¡®ç‡ã€å¬å›ç‡æˆ– PR AUC ä½œä¸ºä¸»æŒ‡æ ‡ã€‚ SVM å¯é€šè¿‡ class.weights å¤„ç†ä¸å¹³è¡¡ï¼Œå‡å°‘å¯¹å°‘æ•°ç±»çš„å¿½è§†ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æ”¯æŒå‘é‡æœº (SVM)"
    ]
  },
  {
    "objectID": "1082-ensemble-learning.html#æ–¹æ³•æ¡†æ¶ä¸æµç¨‹",
    "href": "1082-ensemble-learning.html#æ–¹æ³•æ¡†æ¶ä¸æµç¨‹",
    "title": "é›†æˆå­¦ä¹ å®Œæ•´æ•™ç¨‹",
    "section": "æ–¹æ³•æ¡†æ¶ä¸æµç¨‹",
    "text": "æ–¹æ³•æ¡†æ¶ä¸æµç¨‹\né›†æˆå­¦ä¹ çš„å®è·µé¡ºåºå»ºè®®æ˜¯ï¼šå…ˆå»ºç«‹å•æ¨¡å‹åŸºçº¿ï¼Œç†è§£è¯¯å·®æ¥æºï¼Œ å†é€‰æ‹© Bagging æˆ– Boosting è§£å†³â€œæ–¹å·®æˆ–åå·®â€çš„ä¸»è¦é—®é¢˜ï¼Œ æœ€ååœ¨æœ‰è¶³å¤Ÿäº¤å‰éªŒè¯æ”¯æŒæ—¶å†å¼•å…¥ Stackingã€‚\nåœ¨ Stacking ä¸­ï¼ŒåŸºæ¨¡å‹è¾“å‡ºå¿…é¡»é€šè¿‡äº¤å‰éªŒè¯ç”Ÿæˆï¼Œ è¿™æ ·äºŒå±‚æ¨¡å‹çœ‹åˆ°çš„æ˜¯â€œæœªè§è¿‡çš„é¢„æµ‹â€ï¼Œé¿å…è®­ç»ƒæ³„éœ²ã€‚\n\nå…³é”®æ¦‚å¿µä¸è¯¯å·®åˆ†è§£\n\nåå·®ï¼ˆbiasï¼‰ï¼šæ¨¡å‹è¿‡äºç®€å•å¯¼è‡´ç³»ç»Ÿæ€§è¯¯å·®ã€‚\næ–¹å·®ï¼ˆvarianceï¼‰ï¼šæ¨¡å‹å¯¹è®­ç»ƒæ•°æ®æ³¢åŠ¨æ•æ„Ÿã€‚\nBagging ä¸»è¦é™æ–¹å·®ï¼ŒBoosting ä¸»è¦é™åå·®ã€‚\n\n\n\nè¯„ä»·æŒ‡æ ‡é€‰æ‹©\näºŒåˆ†ç±»ç¤ºä¾‹é‡‡ç”¨å‡†ç¡®ç‡ä¸ ROC AUCã€‚è‹¥ç›®æ ‡æ˜¯å¬å›å¼‚å¸¸æˆ–é«˜ä»·å€¼æ ·æœ¬ï¼Œ åº”æŠŠå¬å›ç‡æˆ– PR AUC ä½œä¸ºä¸»è¦æŒ‡æ ‡ï¼Œé¿å…ä»…çœ‹å‡†ç¡®ç‡ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é›†æˆå­¦ä¹  (Bagging/Stacking)"
    ]
  },
  {
    "objectID": "1083-dimensionality-reduction.html#æ–¹æ³•æ¡†æ¶ä¸æµç¨‹",
    "href": "1083-dimensionality-reduction.html#æ–¹æ³•æ¡†æ¶ä¸æµç¨‹",
    "title": "é™ç»´æ–¹æ³•å®Œæ•´æ•™ç¨‹",
    "section": "æ–¹æ³•æ¡†æ¶ä¸æµç¨‹",
    "text": "æ–¹æ³•æ¡†æ¶ä¸æµç¨‹\né™ç»´å®è·µå»ºè®®æŒ‰â€œè§£é‡Šæ€§ä¼˜å…ˆ â†’ å¯è§†åŒ–æ¢ç´¢ â†’ ä¸‹æ¸¸ä»»åŠ¡éªŒè¯â€çš„é¡ºåºï¼š å…ˆç”¨ PCA ç†è§£ä¸»æˆåˆ†ä¸æ–¹å·®ç»“æ„ï¼Œå†ç”¨ t-SNE/UMAP æ¢ç´¢å±€éƒ¨ç»“æ„ï¼Œ æœ€åç”¨èšç±»æˆ–åˆ†ç±»æ€§èƒ½éªŒè¯é™ç»´æ˜¯å¦ä¿ç•™æœ‰æ•ˆä¿¡æ¯ã€‚\n\nå…³é”®æ¦‚å¿µä¸å‚æ•°å«ä¹‰\n\nPCA ä¸»æˆåˆ†ï¼šæ–¹å·®æœ€å¤§çš„æ–¹å‘ï¼Œä¿è¯çº¿æ€§å¯è§£é‡Šæ€§ã€‚\nt-SNE perplexityï¼šåæ˜ æœ‰æ•ˆé‚»å±…è§„æ¨¡ï¼Œå½±å“ç°‡çš„æ¾æ•£ç¨‹åº¦ã€‚\nUMAP n_neighbors/min_distï¼šæ§åˆ¶å±€éƒ¨é‚»åŸŸä¸åµŒå…¥ç´§å¯†åº¦ã€‚\n\nå‚æ•°æ•æ„Ÿæ€§è¾ƒå¼ºï¼Œå»ºè®®åœ¨ 2-3 ç»„å‚æ•°ä¸Šåšå¯è§†åŒ–å¯¹æ¯”ï¼Œ å¹¶å›ºå®šéšæœºç§å­ä»¥ç¡®ä¿ç»“æœå¯å¤ç°ã€‚\n\n\nè¯„ä»·æŒ‡æ ‡é€‰æ‹©\né™ç»´æœ¬èº«ä¸æä¾›â€œå‡†ç¡®ç‡â€ï¼Œå¸¸ç”¨å¯è§£é‡Šæ€§ã€èšç±»è½®å»“ç³»æ•°æˆ–ä¸‹æ¸¸æ¨¡å‹æŒ‡æ ‡ã€‚ å› æ­¤è¦æ˜ç¡®é™ç»´ç›®çš„ï¼šå¯è§†åŒ–ã€å‹ç¼©å­˜å‚¨è¿˜æ˜¯æå‡ä¸‹æ¸¸æ¨¡å‹æ€§èƒ½ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "é™ç»´ (PCA/UMAP/t-SNE)"
    ]
  },
  {
    "objectID": "1069-torch-deep-learning.html#æ–¹æ³•æ¡†æ¶ä¸å­¦ä¹ è·¯å¾„",
    "href": "1069-torch-deep-learning.html#æ–¹æ³•æ¡†æ¶ä¸å­¦ä¹ è·¯å¾„",
    "title": "torch æ·±åº¦å­¦ä¹ å®Œå…¨æŒ‡å—",
    "section": "æ–¹æ³•æ¡†æ¶ä¸å­¦ä¹ è·¯å¾„",
    "text": "æ–¹æ³•æ¡†æ¶ä¸å­¦ä¹ è·¯å¾„\næ·±åº¦å­¦ä¹ å…¥é—¨éœ€è¦å…ˆç†è§£â€œå¼ é‡è®¡ç®— â†’ è‡ªåŠ¨å¾®åˆ† â†’ ç½‘ç»œç»“æ„ â†’ è®­ç»ƒæµç¨‹â€ã€‚ å®è·µå»ºè®®ä»çº¿æ€§æ¨¡å‹ä¸ MLP èµ·æ­¥ï¼ŒæŒæ¡æŸå¤±å‡½æ•°ã€ä¼˜åŒ–å™¨ä¸è®­ç»ƒå¾ªç¯ï¼Œ å†æ‰©å±•åˆ°å·ç§¯ä¸åºåˆ—æ¨¡å‹ã€‚è¿™æ ·èƒ½ç¡®ä¿è¯»è€…å…ˆç†è§£æ–¹æ³•æ¡†æ¶ï¼Œå†è¿›å…¥ä»£ç ç»†èŠ‚ã€‚\n\næ ¸å¿ƒæœ¯è¯­ä¸æµç¨‹\n\nå¼ é‡ï¼ˆTensorï¼‰ï¼šç¥ç»ç½‘ç»œçš„åŸºæœ¬æ•°æ®ç»“æ„ï¼Œæ”¯æŒ GPU åŠ é€Ÿã€‚\nè‡ªåŠ¨å¾®åˆ†ï¼ˆAutogradï¼‰ï¼šè´Ÿè´£è®¡ç®—æ¢¯åº¦ï¼Œé©±åŠ¨å‚æ•°æ›´æ–°ã€‚\næ¨¡å—ï¼ˆnn_moduleï¼‰ï¼šå®šä¹‰å¯å¤ç”¨çš„ç½‘ç»œç»“æ„ã€‚\nè®­ç»ƒå¾ªç¯ï¼šå‰å‘ä¼ æ’­ â†’ è®¡ç®—æŸå¤± â†’ åå‘ä¼ æ’­ â†’ å‚æ•°æ›´æ–°ã€‚\n\n\n\nè¯„ä»·æŒ‡æ ‡ä¸ä»»åŠ¡å®šä½\næœ¬æ•™ç¨‹ä¸»è¦ä½¿ç”¨åˆ†ç±»ä»»åŠ¡ç¤ºä¾‹ï¼Œæ ¸å¿ƒæŒ‡æ ‡æ˜¯å‡†ç¡®ç‡ä¸æŸå¤±æ›²çº¿ã€‚ åœ¨çœŸå®ä»»åŠ¡ä¸­ï¼Œåº”æ ¹æ®ä»»åŠ¡ç±»å‹é€‰æ‹©åˆé€‚æŒ‡æ ‡ï¼Œä¾‹å¦‚åˆ†ç±»çš„ F1/PR AUCï¼Œ å›å½’çš„ RMSE/MAEï¼Œå¹¶é…åˆéªŒè¯é›†åšæ—©åœã€‚\n\n\ntorch vs keras\n\n\n\nç‰¹ç‚¹\ntorch\nkeras\n\n\n\n\nä¾èµ–\nçº¯Rå®ç°\néœ€è¦Python\n\n\nçµæ´»æ€§\né«˜ï¼ˆåŠ¨æ€å›¾ï¼‰\nä¸­ï¼ˆé™æ€å›¾ï¼‰\n\n\nè°ƒè¯•\nå®¹æ˜“\nè¾ƒéš¾\n\n\nç”Ÿæ€\nå¿«é€Ÿå‘å±•\næˆç†Ÿ\n\n\n\n\n\næ ¸å¿ƒæ¦‚å¿µ\n\nå¼ é‡ï¼ˆTensorï¼‰ï¼šå¤šç»´æ•°ç»„ï¼Œæ”¯æŒGPUåŠ é€Ÿ\nè‡ªåŠ¨å¾®åˆ†ï¼šè‡ªåŠ¨è®¡ç®—æ¢¯åº¦\nç¥ç»ç½‘ç»œæ¨¡å—ï¼šå¯ç»„åˆçš„ç½‘ç»œå±‚\nä¼˜åŒ–å™¨ï¼šå‚æ•°æ›´æ–°ç®—æ³•",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "torch æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1069-torch-deep-learning.html#æ•°æ®å‡†å¤‡ä¸ä»»åŠ¡å®šä¹‰",
    "href": "1069-torch-deep-learning.html#æ•°æ®å‡†å¤‡ä¸ä»»åŠ¡å®šä¹‰",
    "title": "torch æ·±åº¦å­¦ä¹ å®Œå…¨æŒ‡å—",
    "section": "æ•°æ®å‡†å¤‡ä¸ä»»åŠ¡å®šä¹‰",
    "text": "æ•°æ®å‡†å¤‡ä¸ä»»åŠ¡å®šä¹‰\næœ¬æ•™ç¨‹ç”¨å¯æ§çš„äºŒåˆ†ç±»æ¨¡æ‹Ÿæ•°æ®æ¼”ç¤ºå®Œæ•´æµç¨‹ï¼Œä¾¿äºç†è§£æŸå¤±ã€æŒ‡æ ‡ä¸è®­ç»ƒæ›²çº¿ã€‚ å®é™…ä»»åŠ¡ä¸­åº”æ›¿æ¢ä¸ºçœŸå®æ•°æ®ï¼Œå¹¶æ ¹æ®ä¸šåŠ¡ç›®æ ‡è®¾ç½®ç±»åˆ«æ¯”ä¾‹ä¸è¯„ä¼°æŒ‡æ ‡ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "torch æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1069-torch-deep-learning.html#å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "href": "1069-torch-deep-learning.html#å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "title": "torch æ·±åº¦å­¦ä¹ å®Œå…¨æŒ‡å—",
    "section": "å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–",
    "text": "å¸¸è§é”™è¯¯ä¸ä¼˜åŒ–\n\næ•°æ®æœªåˆ’åˆ†è®­ç»ƒ/éªŒè¯ï¼šæ— æ³•åˆ¤æ–­è¿‡æ‹Ÿåˆï¼Œå»ºè®®ä¿ç•™éªŒè¯é›†ã€‚\næœªä½¿ç”¨ with_no_grad()ï¼šè¯„ä¼°æ—¶ä¼šå ç”¨ä¸å¿…è¦æ˜¾å­˜ã€‚\nå­¦ä¹ ç‡ä¸åˆé€‚ï¼šè¿‡å¤§ä¼šå‘æ•£ï¼Œè¿‡å°ä¼šæ”¶æ•›æ…¢ã€‚\næœªå›ºå®šéšæœºç§å­ï¼šç»“æœéš¾å¤ç°ï¼Œå°¤å…¶åœ¨ GPU åœºæ™¯ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "torch æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1069-torch-deep-learning.html#éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "href": "1069-torch-deep-learning.html#éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "title": "torch æ·±åº¦å­¦ä¹ å®Œå…¨æŒ‡å—",
    "section": "éƒ¨ç½²ä¸å¤ç°å»ºè®®",
    "text": "éƒ¨ç½²ä¸å¤ç°å»ºè®®\n\n# ä¿å­˜æ¨¡å‹å‚æ•°ï¼ˆæ¨èï¼‰\nmodel_path &lt;- \"models/torch-classifier.pt\"\nif (!dir.exists(\"models\")) dir.create(\"models\")\ntorch_save(model, model_path)\n\n# åŠ è½½æ¨¡å‹å‚æ•°\nloaded_state &lt;- torch_load(model_path)\nmodel$load_state_dict(loaded_state)\n\n\n# æ¸…ç†\nif (file.exists(\"models/torch-classifier.pt\")) {\n    file.remove(\"models/torch-classifier.pt\")\n}\nif (dir.exists(\"models\")) {\n    unlink(\"models\", recursive = TRUE)\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ§  æ·±åº¦å­¦ä¹ ",
      "torch æ·±åº¦å­¦ä¹ "
    ]
  },
  {
    "objectID": "1084-anomaly-detection.html#æ–¹æ³•æ¡†æ¶ä¸æµç¨‹",
    "href": "1084-anomaly-detection.html#æ–¹æ³•æ¡†æ¶ä¸æµç¨‹",
    "title": "æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹å®Œæ•´æ•™ç¨‹",
    "section": "æ–¹æ³•æ¡†æ¶ä¸æµç¨‹",
    "text": "æ–¹æ³•æ¡†æ¶ä¸æµç¨‹\nå¼‚å¸¸æ£€æµ‹çš„æ ‡å‡†æµç¨‹æ˜¯ï¼šå…ˆä¼°è®¡å¼‚å¸¸æ¯”ä¾‹ä¸ä»£ä»·ï¼Œå†ç”¨æ— ç›‘ç£æ¨¡å‹è¾“å‡ºåˆ†æ•°ï¼Œ æœ€åç”¨é˜ˆå€¼ä¸éªŒè¯é›†ç¡®å®šåˆ¤å®šè§„åˆ™ã€‚å¯¹äºæ—¶é—´åºåˆ—æˆ–ä¸šåŠ¡ç›‘æµ‹ï¼Œ è¿˜éœ€è¦å®šæœŸé‡æ–°è®­ç»ƒæˆ–æ›´æ–°é˜ˆå€¼ä»¥åº”å¯¹æ¼‚ç§»ã€‚\n\nå…³é”®æ¦‚å¿µä¸åˆ†æ•°è§£é‡Š\n\nå¼‚å¸¸å¾—åˆ†ï¼šè¶Šé«˜è¡¨ç¤ºè¶Šåç¦»æ­£å¸¸æ¨¡å¼ï¼Œä½†é˜ˆå€¼éœ€è¦ä¸šåŠ¡å®šä¹‰ã€‚\né˜ˆå€¼é€‰æ‹©ï¼šå¸¸ç”¨åˆ†ä½æ•°ã€éªŒè¯é›†æˆ–æˆæœ¬æ•æ„Ÿç­–ç•¥ã€‚\nå¯ç”¨æŒ‡æ ‡ï¼šROC AUC åæ˜ åŒºåˆ†åº¦ï¼Œå¬å›ç‡ä½“ç°æ¼æŠ¥é£é™©ã€‚\n\nå¯¹äºæåº¦ä¸å¹³è¡¡çš„å¼‚å¸¸æ£€æµ‹ï¼ŒPR AUC æ¯” ROC AUC æ›´æ•æ„Ÿï¼Œ å¯ä»¥ç”¨äºæ¯”è¾ƒæ¨¡å‹åœ¨å¼‚å¸¸æ ·æœ¬ä¸Šçš„è¯†åˆ«èƒ½åŠ›ã€‚\n\n\nè¯„ä»·æŒ‡æ ‡é€‰æ‹©\nå¼‚å¸¸æ£€æµ‹å¸¸å¸¸æ›´å…³å¿ƒå¬å›ç‡ä¸ç²¾ç¡®ç‡ï¼Œè€Œéå•çº¯å‡†ç¡®ç‡ã€‚ å› æ­¤åº”ç»“åˆä¸šåŠ¡æˆæœ¬å†³å®šä¼˜å…ˆæŒ‡æ ‡ï¼Œå†ç¡®å®šé˜ˆå€¼ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹"
    ]
  },
  {
    "objectID": "3015-tidytable.html#å¸¸è§é—®é¢˜æ’æŸ¥",
    "href": "3015-tidytable.html#å¸¸è§é—®é¢˜æ’æŸ¥",
    "title": "tidytable æ•°æ®å¤„ç†å®Œå…¨æŒ‡å—",
    "section": "å¸¸è§é—®é¢˜æ’æŸ¥",
    "text": "å¸¸è§é—®é¢˜æ’æŸ¥\n\nç»“æœé¡ºåºå˜åŒ–ï¼štidytable ä½¿ç”¨ data.table é€»è¾‘ï¼Œå¯èƒ½ä¸ dplyr ç¨æœ‰ä¸åŒã€‚\nåˆ—åé‡å¤ï¼šjoin åå‡ºç° .x/.yï¼Œéœ€è¦æ˜ç¡®é‡å‘½åè§„åˆ™ã€‚\nå› å­è¢«è½¬ä¸ºå­—ç¬¦ï¼šæ£€æŸ¥æ•°æ®è¯»å–é˜¶æ®µçš„ stringsAsFactors è®¾ç½®ã€‚\næ€§èƒ½ä¸è¾¾é¢„æœŸï¼šç¡®è®¤å¯¹è±¡æ˜¯å¦ä»ä¸º tidytableï¼Œå¯ç”¨ is_tidytable() æ£€æŸ¥ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "å®ç”¨ R åŒ…",
      "ğŸ”„ æ•°æ®å¤„ç†",
      "tidytable - é«˜æ€§èƒ½æ•°æ®å¤„ç†"
    ]
  },
  {
    "objectID": "1019-logistic.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "href": "1019-logistic.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "title": "Logistic å›å½’å®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹å‡è®¾ä¸å‰æ",
    "text": "æ¨¡å‹å‡è®¾ä¸å‰æ\nLogistic å›å½’å±äºå¹¿ä¹‰çº¿æ€§æ¨¡å‹ï¼Œå¸¸è§å‡è®¾åŒ…æ‹¬ï¼š\n\nå¯¹æ•°å‡ ç‡ä¸è‡ªå˜é‡çº¿æ€§ï¼šè¿ç»­å˜é‡åœ¨ logit ç©ºé—´éœ€è¿‘ä¼¼çº¿æ€§ã€‚\nè§‚æµ‹ç‹¬ç«‹ï¼šæ ·æœ¬ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œé¿å…é…å¯¹æˆ–é‡å¤æµ‹é‡ã€‚\næ— ä¸¥é‡å…±çº¿æ€§ï¼šå˜é‡ç›¸å…³æ€§è¿‡é«˜ä¼šå¯¼è‡´ä¼°è®¡ä¸ç¨³å®šã€‚\näº‹ä»¶æ•°å……è¶³ï¼šæ¯ä¸ªé¢„æµ‹å˜é‡éœ€è¦è¶³å¤Ÿäº‹ä»¶æ•°æ”¯æ’‘ä¼°è®¡ç¨³å®šã€‚\n\nå¯¹è¿ç»­å˜é‡ï¼Œå¯ç”¨æ ·æ¡æˆ–åˆ†æ®µæ–¹å¼æ£€éªŒçº¿æ€§å‡è®¾ï¼› å¯¹é‡å¤æµ‹é‡æ•°æ®åº”è€ƒè™‘ GEE æˆ–æ··åˆæ•ˆåº”æ¨¡å‹æ›¿ä»£ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Logistic å›å½’"
    ]
  },
  {
    "objectID": "1019-logistic.html#åˆ†ææµç¨‹æ¦‚è§ˆ",
    "href": "1019-logistic.html#åˆ†ææµç¨‹æ¦‚è§ˆ",
    "title": "Logistic å›å½’å®Œå…¨æŒ‡å—",
    "section": "åˆ†ææµç¨‹æ¦‚è§ˆ",
    "text": "åˆ†ææµç¨‹æ¦‚è§ˆ\n\næ•°æ®å‡†å¤‡ä¸æ¢ç´¢æ€§åˆ†æ\nå•å› ç´ ç­›é€‰ä¸å¤šå› ç´ å»ºæ¨¡\nè¯Šæ–­ï¼šå…±çº¿æ€§ã€æ‹Ÿåˆä¼˜åº¦ã€æ®‹å·®\né¢„æµ‹ä¸åˆ¤åˆ«èƒ½åŠ›è¯„ä¼°ï¼ˆROC/AUCï¼‰\nç»“æœè§£è¯»ä¸æŠ¥å‘Šè§„èŒƒ",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Logistic å›å½’"
    ]
  },
  {
    "objectID": "1019-logistic.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "href": "1019-logistic.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "title": "Logistic å›å½’å®Œå…¨æŒ‡å—",
    "section": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "text": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š\næŠ¥å‘Šåº”åŒ…å« ORã€95% CIã€p å€¼ä¸æ ·æœ¬äº‹ä»¶æ•°ï¼Œå¹¶è¯´æ˜å‚ç…§ç»„è®¾å®šã€‚ å»ºè®®åœ¨è¡¨æ ¼ä¸­æ ‡å‡ºå…³é”®å˜é‡çš„æ•ˆåº”æ–¹å‘ä¸æ˜¾è‘—æ€§ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Logistic å›å½’"
    ]
  },
  {
    "objectID": "1019-logistic.html#è¿›é˜¶æ‰©å±•",
    "href": "1019-logistic.html#è¿›é˜¶æ‰©å±•",
    "title": "Logistic å›å½’å®Œå…¨æŒ‡å—",
    "section": "è¿›é˜¶æ‰©å±•",
    "text": "è¿›é˜¶æ‰©å±•\n\næƒ©ç½šå›å½’ï¼šFirth Logisticã€Lasso/Ridge ç”¨äºå°æ ·æœ¬æˆ–é«˜ç»´ã€‚\néçº¿æ€§å…³ç³»ï¼šç”¨æ ·æ¡æˆ–åˆ†æ®µå›å½’å»ºæ¨¡ã€‚\nç¨³å¥æ ‡å‡†è¯¯ï¼šåœ¨è½»åº¦è¿èƒŒå‡è®¾æ—¶æå‡ç¨³å¥æ€§ã€‚\nåˆ†å±‚åˆ†æï¼šäºšç»„æ•ˆåº”ä¸äº¤äº’é¡¹ç»“åˆã€‚\n\n\næ¨èé˜…è¯»\n\nHosmer DW, Lemeshow S. Applied Logistic Regression (3rd ed.)\nHarrell FE. Regression Modeling Strategies\nUCLA ç»Ÿè®¡å’¨è¯¢ï¼šLogistic å›å½’",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“Š åŸºç¡€å›å½’",
      "Logistic å›å½’"
    ]
  },
  {
    "objectID": "1020-survival.html#cox-æ¨¡å‹ä¸æ¨¡å‹é€‰æ‹©",
    "href": "1020-survival.html#cox-æ¨¡å‹ä¸æ¨¡å‹é€‰æ‹©",
    "title": "ç”Ÿå­˜åˆ†æå®Œå…¨æŒ‡å—",
    "section": "Cox æ¨¡å‹ä¸æ¨¡å‹é€‰æ‹©",
    "text": "Cox æ¨¡å‹ä¸æ¨¡å‹é€‰æ‹©\nCox æ¯”ä¾‹é£é™©æ¨¡å‹æ˜¯æœ€å¸¸ç”¨çš„åŠå‚æ•°ç”Ÿå­˜æ¨¡å‹ï¼Œ å®ƒå…³æ³¨åå˜é‡å¯¹é£é™©çš„ç›¸å¯¹å½±å“ï¼Œè€Œä¸å¼ºè¡Œå‡è®¾åŸºçº¿é£é™©å‡½æ•°ã€‚ å¦‚æœä¸»è¦ç›®æ ‡æ˜¯ä¼°è®¡ HRï¼ˆé£é™©æ¯”ï¼‰ï¼ŒCox æ¨¡å‹é€šå¸¸ä¼˜äºå®Œå…¨å‚æ•°æ¨¡å‹ã€‚\nåœ¨éšè®¿æ—¶é—´è¾ƒçŸ­æˆ–åŸºçº¿é£é™©å½¢æ€æ˜ç¡®æ—¶ï¼Œå¯è€ƒè™‘æŒ‡æ•°ã€Weibull ç­‰å‚æ•°æ¨¡å‹ï¼Œ å®ƒä»¬èƒ½ç»™å‡ºåŸºçº¿é£é™©çš„æ˜ç¡®å½¢å¼ï¼Œä½†å¯¹åˆ†å¸ƒå‡è®¾æ›´æ•æ„Ÿã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç”Ÿå­˜åˆ†æ"
    ]
  },
  {
    "objectID": "1020-survival.html#cox-æ¨¡å‹å‡è®¾ä¸è¯Šæ–­è¦ç‚¹",
    "href": "1020-survival.html#cox-æ¨¡å‹å‡è®¾ä¸è¯Šæ–­è¦ç‚¹",
    "title": "ç”Ÿå­˜åˆ†æå®Œå…¨æŒ‡å—",
    "section": "Cox æ¨¡å‹å‡è®¾ä¸è¯Šæ–­è¦ç‚¹",
    "text": "Cox æ¨¡å‹å‡è®¾ä¸è¯Šæ–­è¦ç‚¹\nCox æ¨¡å‹æ ¸å¿ƒå‡è®¾åŒ…æ‹¬æ¯”ä¾‹é£é™©ã€åå˜é‡ä¸å¯¹æ•°é£é™©çš„çº¿æ€§å…³ç³»ã€ ä»¥åŠç‹¬ç«‹åˆ å¤±ã€‚è‹¥è¿ç»­å˜é‡å­˜åœ¨éçº¿æ€§ï¼Œå¯ç”¨é™åˆ¶æ€§ç«‹æ–¹æ ·æ¡ ï¼ˆä¾‹å¦‚ splines::ns()ï¼‰æˆ–åˆ†æ®µæ–¹æ³•æ”¹å†™åå˜é‡ã€‚\nå¯¹äºå­˜åœ¨ä¸­å¿ƒæ•ˆåº”æˆ–é‡å¤æµ‹é‡çš„åœºæ™¯ï¼Œå¯ä½¿ç”¨ç¨³å¥æ ‡å‡†è¯¯ï¼š\n\ncox_robust &lt;- coxph(\n    Surv(time, status) ~ age + sex + stage + treatment + ecog,\n    data = cancer_data,\n    robust = TRUE\n)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç”Ÿå­˜åˆ†æ"
    ]
  },
  {
    "objectID": "1025-gam.html#å¹³æ»‘å‡½æ•°é€‰æ‹©ä¸å¯è§£é‡Šæ€§",
    "href": "1025-gam.html#å¹³æ»‘å‡½æ•°é€‰æ‹©ä¸å¯è§£é‡Šæ€§",
    "title": "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM) å®Œå…¨æŒ‡å—",
    "section": "å¹³æ»‘å‡½æ•°é€‰æ‹©ä¸å¯è§£é‡Šæ€§",
    "text": "å¹³æ»‘å‡½æ•°é€‰æ‹©ä¸å¯è§£é‡Šæ€§\nGAM çš„å¹³æ»‘é¡¹å†³å®šæ¨¡å‹çš„â€œå¼¯æ›²ç¨‹åº¦â€ã€‚ å¸¸ç”¨åŸºå‡½æ•°åŒ…æ‹¬è–„æ¿æ ·æ¡ï¼ˆé»˜è®¤ï¼‰ã€ç«‹æ–¹å›å½’æ ·æ¡ã€å¾ªç¯æ ·æ¡ã€‚ å½“å˜é‡å­˜åœ¨å‘¨æœŸæ€§ï¼ˆå¦‚å­£èŠ‚æ•ˆåº”ï¼‰æ—¶å»ºè®®ä½¿ç”¨ bs = \"cc\"ã€‚\nå¹³æ»‘é¡¹çš„è§£é‡Šé‡ç‚¹æ˜¯â€œæ–¹å‘ä¸éçº¿æ€§å½¢æ€â€ï¼Œ è€Œéå•ç‚¹æ•ˆåº”ã€‚å¯ç»“åˆä¸€é˜¶å¯¼æ•°åˆ¤æ–­ä¸Šå‡/ä¸‹é™åŒºé—´ã€‚\n\n# æå–å¹³æ»‘é¡¹çš„ä¸€é˜¶å¯¼æ•°ï¼ˆgratiaï¼‰\nsm_deriv &lt;- derivatives(gam_full, term = \"s(temperature)\")\nhead(sm_deriv)\n\n# A tibble: 6 Ã— 9\n  .smooth  .by   .fs   .derivative     .se .crit .lower_ci .upper_ci temperature\n  &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;\n1 s(tempeâ€¦ &lt;NA&gt;  &lt;NA&gt;     -0.00187 8.51e-4  1.96  -0.00354 -0.000205       -4.49\n2 s(tempeâ€¦ &lt;NA&gt;  &lt;NA&gt;     -0.00187 8.51e-4  1.96  -0.00354 -0.000205       -4.10\n3 s(tempeâ€¦ &lt;NA&gt;  &lt;NA&gt;     -0.00187 8.51e-4  1.96  -0.00354 -0.000205       -3.72\n4 s(tempeâ€¦ &lt;NA&gt;  &lt;NA&gt;     -0.00187 8.51e-4  1.96  -0.00354 -0.000205       -3.34\n5 s(tempeâ€¦ &lt;NA&gt;  &lt;NA&gt;     -0.00187 8.51e-4  1.96  -0.00354 -0.000205       -2.95\n6 s(tempeâ€¦ &lt;NA&gt;  &lt;NA&gt;     -0.00187 8.51e-4  1.96  -0.00354 -0.000205       -2.57",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM)"
    ]
  },
  {
    "objectID": "1020-survival.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "href": "1020-survival.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "title": "ç”Ÿå­˜åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "text": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š\næŠ¥å‘Š Cox ç»“æœæ—¶å»ºè®®åŒæ—¶ç»™å‡º HRã€95% CIã€p å€¼ã€äº‹ä»¶æ•°ä¸éšè®¿æ—¶é—´ã€‚ è‹¥æ¨¡å‹åŒ…å«åˆ†ç±»å˜é‡ï¼Œåº”è¯´æ˜å‚ç…§ç»„ï¼›è‹¥ä½¿ç”¨åˆ†å±‚æˆ–ç¨³å¥æ ‡å‡†è¯¯ï¼Œ éœ€åœ¨æ–¹æ³•éƒ¨åˆ†è¯´æ˜ã€‚\nå»ºè®®åœ¨è¡¨æ ¼æˆ–æ­£æ–‡ä¸­è§£é‡Š HR çš„ä¸´åºŠæ„ä¹‰ï¼Œ ä¾‹å¦‚ HR = 1.25 è¡¨ç¤ºé£é™©å¢åŠ  25%ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "â±ï¸ ç”Ÿå­˜åˆ†æ",
      "ç”Ÿå­˜åˆ†æ"
    ]
  },
  {
    "objectID": "1025-gam.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "href": "1025-gam.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "title": "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM) å®Œå…¨æŒ‡å—",
    "section": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "text": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š\næŠ¥å‘Š GAM ç»“æœæ—¶éœ€ç»™å‡ºå¹³æ»‘é¡¹çš„ EDFã€p å€¼ä¸è§£é‡Šçš„åå·®æ¯”ä¾‹ã€‚ åœ¨å›¾ä¸­æ˜ç¡®éçº¿æ€§åŒºé—´ä¸æ–¹å‘ï¼ˆä¸Šå‡/ä¸‹é™ï¼‰ï¼Œ å¹¶è¯´æ˜æ˜¯å¦æ§åˆ¶äº†å­£èŠ‚æ€§æˆ–å…¶ä»–åå˜é‡ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "å¹¿ä¹‰åŠ æ€§æ¨¡å‹ (GAM)"
    ]
  },
  {
    "objectID": "2063-bindbumpchart.html",
    "href": "2063-bindbumpchart.html",
    "title": "Rè¯­è¨€å‡¹å‡¸å›¾ï¼ˆæ’åå˜åŒ–å›¾ï¼‰ç»˜åˆ¶",
    "section": "",
    "text": "å‡¹å‡¸å›¾ï¼ˆBump Chartï¼‰æ˜¯ä¸€ç§ä¸“é—¨ç”¨äºå±•ç¤ºæ’åéšæ—¶é—´å˜åŒ–çš„å¯è§†åŒ–æ–¹å¼ã€‚å›¾è¡¨ä¸­æ¯æ¡çº¿ä»£è¡¨ä¸€ä¸ªå®ä½“ï¼ˆå¦‚å›½å®¶ã€å“ç‰Œã€é€‰æ‰‹ï¼‰ï¼ŒYè½´è¡¨ç¤ºæ’åä½ç½®ï¼ŒXè½´è¡¨ç¤ºæ—¶é—´ç‚¹ï¼Œçº¿æ¡çš„èµ·ä¼ç›´è§‚åæ˜ äº†æ’åçš„å‡é™å˜åŒ–ã€‚\nä¸æ™®é€šæŠ˜çº¿å›¾ä¸åŒï¼Œå‡¹å‡¸å›¾çš„Yè½´æ˜¯ç¦»æ•£çš„æ’åè€Œéè¿ç»­æ•°å€¼ã€‚è¿™ç§è®¾è®¡ä½¿å¾—ï¼š\n\næ’åç¬¬ä¸€çš„å®ä½“å§‹ç»ˆä½äºå›¾è¡¨é¡¶éƒ¨\næ’åå˜åŒ–ï¼ˆä¸Šå‡/ä¸‹é™ï¼‰ä¸€ç›®äº†ç„¶\nå¤šä¸ªå®ä½“çš„ç›¸å¯¹ä½ç½®å˜åŒ–æ¸…æ™°å¯æ¯”\n\nå‡¹å‡¸å›¾çš„åç§°æ¥æºäºçº¿æ¡åœ¨æ’åå˜åŒ–æ—¶å½¢æˆçš„â€å‡¹å‡¸â€å½¢æ€â€”â€”å½“æŸå®ä½“æ’åä¸Šå‡æ—¶ï¼Œå…¶çº¿æ¡å‘ä¸Šå‡¸èµ·ï¼›æ’åä¸‹é™æ—¶ï¼Œçº¿æ¡å‘ä¸‹å‡¹é™·ã€‚"
  },
  {
    "objectID": "2063-bindbumpchart.html#ä»€ä¹ˆæ˜¯å‡¹å‡¸å›¾",
    "href": "2063-bindbumpchart.html#ä»€ä¹ˆæ˜¯å‡¹å‡¸å›¾",
    "title": "Rè¯­è¨€å‡¹å‡¸å›¾ï¼ˆæ’åå˜åŒ–å›¾ï¼‰ç»˜åˆ¶",
    "section": "",
    "text": "å‡¹å‡¸å›¾ï¼ˆBump Chartï¼‰æ˜¯ä¸€ç§ä¸“é—¨ç”¨äºå±•ç¤ºæ’åéšæ—¶é—´å˜åŒ–çš„å¯è§†åŒ–æ–¹å¼ã€‚å›¾è¡¨ä¸­æ¯æ¡çº¿ä»£è¡¨ä¸€ä¸ªå®ä½“ï¼ˆå¦‚å›½å®¶ã€å“ç‰Œã€é€‰æ‰‹ï¼‰ï¼ŒYè½´è¡¨ç¤ºæ’åä½ç½®ï¼ŒXè½´è¡¨ç¤ºæ—¶é—´ç‚¹ï¼Œçº¿æ¡çš„èµ·ä¼ç›´è§‚åæ˜ äº†æ’åçš„å‡é™å˜åŒ–ã€‚\nä¸æ™®é€šæŠ˜çº¿å›¾ä¸åŒï¼Œå‡¹å‡¸å›¾çš„Yè½´æ˜¯ç¦»æ•£çš„æ’åè€Œéè¿ç»­æ•°å€¼ã€‚è¿™ç§è®¾è®¡ä½¿å¾—ï¼š\n\næ’åç¬¬ä¸€çš„å®ä½“å§‹ç»ˆä½äºå›¾è¡¨é¡¶éƒ¨\næ’åå˜åŒ–ï¼ˆä¸Šå‡/ä¸‹é™ï¼‰ä¸€ç›®äº†ç„¶\nå¤šä¸ªå®ä½“çš„ç›¸å¯¹ä½ç½®å˜åŒ–æ¸…æ™°å¯æ¯”\n\nå‡¹å‡¸å›¾çš„åç§°æ¥æºäºçº¿æ¡åœ¨æ’åå˜åŒ–æ—¶å½¢æˆçš„â€å‡¹å‡¸â€å½¢æ€â€”â€”å½“æŸå®ä½“æ’åä¸Šå‡æ—¶ï¼Œå…¶çº¿æ¡å‘ä¸Šå‡¸èµ·ï¼›æ’åä¸‹é™æ—¶ï¼Œçº¿æ¡å‘ä¸‹å‡¹é™·ã€‚"
  },
  {
    "objectID": "2063-bindbumpchart.html#é€‚ç”¨åœºæ™¯",
    "href": "2063-bindbumpchart.html#é€‚ç”¨åœºæ™¯",
    "title": "Rè¯­è¨€å‡¹å‡¸å›¾ï¼ˆæ’åå˜åŒ–å›¾ï¼‰ç»˜åˆ¶",
    "section": "é€‚ç”¨åœºæ™¯",
    "text": "é€‚ç”¨åœºæ™¯\nå‡¹å‡¸å›¾ç‰¹åˆ«é€‚åˆä»¥ä¸‹åˆ†æåœºæ™¯ï¼š\n\n\n\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\nå…¸å‹æ¡ˆä¾‹\n\n\n\n\nç«èµ›æ’å\nå¤šè½®æ¯”èµ›ä¸­é€‰æ‰‹/é˜Ÿä¼æ’åå˜åŒ–\nF1èµ›å­£ç§¯åˆ†æ¦œã€ä¸–ç•Œæ¯å°ç»„èµ›\n\n\nå¸‚åœºä»½é¢\nå“ç‰Œ/äº§å“å¸‚åœºåœ°ä½å˜è¿\næ‰‹æœºå“ç‰Œå­£åº¦æ’åã€APPä¸‹è½½æ¦œ\n\n\nå­¦æœ¯æ’å\nå¤§å­¦/æœŸåˆŠæ’åå¹´åº¦å˜åŒ–\nQSä¸–ç•Œå¤§å­¦æ’åã€å½±å“å› å­æ’è¡Œ\n\n\nç»æµæŒ‡æ ‡\nå›½å®¶/åœ°åŒºç»æµæŒ‡æ ‡æ’ä½\nGDPæ’åã€äººå‡æ”¶å…¥æ’å\n\n\né”€å”®ä¸šç»©\né”€å”®äººå‘˜/åŒºåŸŸä¸šç»©æ’å\næœˆåº¦é”€å† ã€åŒºåŸŸç»©æ•ˆæ’å\n\n\n\n\nä½•æ—¶ä¸é€‚åˆä½¿ç”¨å‡¹å‡¸å›¾\n\nå®ä½“æ•°é‡è¿‡å¤šï¼ˆ&gt;15ä¸ªï¼‰ï¼šçº¿æ¡äº¤å‰è¿‡äºå¯†é›†ï¼Œéš¾ä»¥è¿½è¸ª\næ—¶é—´ç‚¹è¿‡å°‘ï¼ˆ&lt;3ä¸ªï¼‰ï¼šæ— æ³•å±•ç¤ºå˜åŒ–è¶‹åŠ¿ï¼Œå“‘é“ƒå›¾æ›´åˆé€‚\nå…³æ³¨ç»å¯¹æ•°å€¼ï¼šå‡¹å‡¸å›¾åªæ˜¾ç¤ºæ’åï¼Œä¸ä½“ç°æ•°å€¼å·®è·\næ’åæ— å˜åŒ–ï¼šæ‰€æœ‰çº¿æ¡å¹³è¡Œï¼Œæ— ä¿¡æ¯é‡"
  },
  {
    "objectID": "2063-bindbumpchart.html#råŒ…åŠ è½½",
    "href": "2063-bindbumpchart.html#råŒ…åŠ è½½",
    "title": "Rè¯­è¨€å‡¹å‡¸å›¾ï¼ˆæ’åå˜åŒ–å›¾ï¼‰ç»˜åˆ¶",
    "section": "RåŒ…åŠ è½½",
    "text": "RåŒ…åŠ è½½\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(forcats)\nlibrary(scales)\n\nå¯é€‰ä½¿ç”¨ ggbump åŒ…è·å¾—æ›´å¹³æ»‘çš„æ›²çº¿æ•ˆæœï¼š\n\n# install.packages(\"ggbump\")\nlibrary(ggbump)"
  },
  {
    "objectID": "2063-bindbumpchart.html#æ•°æ®ç»“æ„è¦æ±‚",
    "href": "2063-bindbumpchart.html#æ•°æ®ç»“æ„è¦æ±‚",
    "title": "Rè¯­è¨€å‡¹å‡¸å›¾ï¼ˆæ’åå˜åŒ–å›¾ï¼‰ç»˜åˆ¶",
    "section": "æ•°æ®ç»“æ„è¦æ±‚",
    "text": "æ•°æ®ç»“æ„è¦æ±‚\nå‡¹å‡¸å›¾æ‰€éœ€æ•°æ®å¿…é¡»åŒ…å«ä¸‰ä¸ªæ ¸å¿ƒå˜é‡ï¼š\n\n\n\nå˜é‡\nç±»å‹\nè¯´æ˜\n\n\n\n\nå®ä½“æ ‡è¯†\nå­—ç¬¦/å› å­\nè¢«æ’åçš„å¯¹è±¡ï¼ˆå¦‚å›½å®¶åã€å“ç‰Œåï¼‰\n\n\næ—¶é—´ç‚¹\næ•°å€¼/å› å­\næ’åçš„æ—¶é—´ç»´åº¦ï¼ˆå¦‚å¹´ä»½ã€è½®æ¬¡ï¼‰\n\n\næ’å\næ•´æ•°\nè¯¥æ—¶é—´ç‚¹çš„æ’åä½ç½®ï¼ˆ1ä¸ºæœ€é«˜ï¼‰\n\n\n\næ•°æ®åº”ä¸ºé•¿æ ¼å¼ï¼ˆlong formatï¼‰ï¼Œæ¯è¡Œä»£è¡¨ä¸€ä¸ªå®ä½“åœ¨æŸæ—¶é—´ç‚¹çš„æ’åã€‚"
  },
  {
    "objectID": "2063-bindbumpchart.html#å‡†å¤‡ç¤ºä¾‹æ•°æ®",
    "href": "2063-bindbumpchart.html#å‡†å¤‡ç¤ºä¾‹æ•°æ®",
    "title": "Rè¯­è¨€å‡¹å‡¸å›¾ï¼ˆæ’åå˜åŒ–å›¾ï¼‰ç»˜åˆ¶",
    "section": "å‡†å¤‡ç¤ºä¾‹æ•°æ®",
    "text": "å‡†å¤‡ç¤ºä¾‹æ•°æ®\nä»¥ä¸‹åˆ›å»ºä¸€ä¸ªæ¨¡æ‹Ÿæ•°æ®é›†ï¼Œå±•ç¤º6ä¸ªä¸»è¦ç»æµä½“åœ¨5å¹´é—´çš„GDPæ’åå˜åŒ–ï¼š\n\nset.seed(42)\n\n# åˆ›å»ºGDPæ’åæ•°æ®\ngdp_ranking &lt;- data.frame(\n    country = rep(c(\"ç¾å›½\", \"ä¸­å›½\", \"æ—¥æœ¬\", \"å¾·å›½\", \"è‹±å›½\", \"å°åº¦\"), each = 5),\n    year = rep(2019:2023, 6),\n    rank = c(\n        1, 1, 1, 1, 1,       # ç¾å›½ï¼šç¨³å±…ç¬¬ä¸€\n        2, 2, 2, 2, 2,       # ä¸­å›½ï¼šç¨³å±…ç¬¬äºŒ\n        3, 3, 3, 4, 4,       # æ—¥æœ¬ï¼šè¢«å¾·å›½è¶…è¶Š\n        4, 4, 4, 3, 3,       # å¾·å›½ï¼šè¶…è¶Šæ—¥æœ¬\n        5, 5, 6, 6, 5,       # è‹±å›½ï¼šæ³¢åŠ¨\n        6, 6, 5, 5, 6        # å°åº¦ï¼šæ³¢åŠ¨\n    )\n)\n\n# æŸ¥çœ‹æ•°æ®ç»“æ„\nhead(gdp_ranking, 12)\n\n   country year rank\n1     ç¾å›½ 2019    1\n2     ç¾å›½ 2020    1\n3     ç¾å›½ 2021    1\n4     ç¾å›½ 2022    1\n5     ç¾å›½ 2023    1\n6     ä¸­å›½ 2019    2\n7     ä¸­å›½ 2020    2\n8     ä¸­å›½ 2021    2\n9     ä¸­å›½ 2022    2\n10    ä¸­å›½ 2023    2\n11    æ—¥æœ¬ 2019    3\n12    æ—¥æœ¬ 2020    3"
  },
  {
    "objectID": "2063-bindbumpchart.html#åŸºç¡€å‡¹å‡¸å›¾",
    "href": "2063-bindbumpchart.html#åŸºç¡€å‡¹å‡¸å›¾",
    "title": "Rè¯­è¨€å‡¹å‡¸å›¾ï¼ˆæ’åå˜åŒ–å›¾ï¼‰ç»˜åˆ¶",
    "section": "åŸºç¡€å‡¹å‡¸å›¾",
    "text": "åŸºç¡€å‡¹å‡¸å›¾\n\nä½¿ç”¨ geom_line() + geom_point()\næœ€åŸºç¡€çš„å‡¹å‡¸å›¾ä½¿ç”¨æŠ˜çº¿è¿æ¥å„æ—¶é—´ç‚¹çš„æ’åï¼š\n\nggplot(gdp_ranking, aes(x = year, y = rank, color = country, group = country)) +\n    geom_line(linewidth = 1.2) +\n    geom_point(size = 4) +\n    scale_y_reverse(breaks = 1:6) +\n    labs(\n        title = \"ä¸»è¦ç»æµä½“GDPæ’åå˜åŒ–ï¼ˆ2019-2023ï¼‰\",\n        x = \"å¹´ä»½\",\n        y = \"æ’å\",\n        color = \"å›½å®¶\"\n    ) +\n    theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\n\n\nä»£ç è§£æ\n\naes(x = year, y = rank, color = country, group = country)ï¼šXè½´ä¸ºå¹´ä»½ï¼ŒYè½´ä¸ºæ’åï¼ŒæŒ‰å›½å®¶åˆ†ç»„ç€è‰²\ngeom_line(linewidth = 1.2)ï¼šç»˜åˆ¶è¿æ¥çº¿ï¼Œçº¿å®½1.2\ngeom_point(size = 4)ï¼šåœ¨æ¯ä¸ªæ•°æ®ç‚¹ç»˜åˆ¶åœ†ç‚¹\nscale_y_reverse(breaks = 1:6)ï¼šå…³é”®æ­¥éª¤â€”â€”åè½¬Yè½´ä½¿æ’åç¬¬ä¸€åœ¨æœ€ä¸Šæ–¹"
  },
  {
    "objectID": "2063-bindbumpchart.html#æ·»åŠ ç«¯ç‚¹æ ‡ç­¾",
    "href": "2063-bindbumpchart.html#æ·»åŠ ç«¯ç‚¹æ ‡ç­¾",
    "title": "Rè¯­è¨€å‡¹å‡¸å›¾ï¼ˆæ’åå˜åŒ–å›¾ï¼‰ç»˜åˆ¶",
    "section": "æ·»åŠ ç«¯ç‚¹æ ‡ç­¾",
    "text": "æ·»åŠ ç«¯ç‚¹æ ‡ç­¾\nå‡¹å‡¸å›¾çš„ä¸€ä¸ªé‡è¦è®¾è®¡åŸåˆ™æ˜¯åœ¨çº¿æ¡ç«¯ç‚¹æ·»åŠ æ ‡ç­¾ï¼Œä¾¿äºè¯†åˆ«æ¯æ¡çº¿ä»£è¡¨çš„å®ä½“ï¼š\n\nggplot(gdp_ranking, aes(x = year, y = rank, color = country, group = country)) +\n    geom_line(linewidth = 1.5) +\n    geom_point(size = 5) +\n    # å·¦ä¾§æ ‡ç­¾ï¼ˆèµ·å§‹å¹´ä»½ï¼‰\n    geom_text(\n        data = gdp_ranking %&gt;% filter(year == min(year)),\n        aes(label = country),\n        hjust = 1.2,\n        size = 4,\n        fontface = \"bold\"\n    ) +\n    # å³ä¾§æ ‡ç­¾ï¼ˆç»“æŸå¹´ä»½ï¼‰\n    geom_text(\n        data = gdp_ranking %&gt;% filter(year == max(year)),\n        aes(label = country),\n        hjust = -0.2,\n        size = 4,\n        fontface = \"bold\"\n    ) +\n    scale_y_reverse(breaks = 1:6) +\n    scale_x_continuous(\n        breaks = 2019:2023,\n        limits = c(2018, 2024)  # æ‰©å±•Xè½´ä¸ºæ ‡ç­¾ç•™ç©ºé—´\n    ) +\n    labs(\n        title = \"ä¸»è¦ç»æµä½“GDPæ’åå˜åŒ–\",\n        subtitle = \"2019-2023å¹´åº¦æ’å\",\n        x = NULL,\n        y = \"æ’å\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        legend.position = \"none\",  # éšè—å›¾ä¾‹ï¼ˆæ ‡ç­¾å·²æ›¿ä»£ï¼‰\n        panel.grid.minor = element_blank(),\n        plot.title = element_text(face = \"bold\", size = 14)\n    )"
  },
  {
    "objectID": "2063-bindbumpchart.html#ä½¿ç”¨-ggbump-åŒ…",
    "href": "2063-bindbumpchart.html#ä½¿ç”¨-ggbump-åŒ…",
    "title": "Rè¯­è¨€å‡¹å‡¸å›¾ï¼ˆæ’åå˜åŒ–å›¾ï¼‰ç»˜åˆ¶",
    "section": "ä½¿ç”¨ ggbump åŒ…",
    "text": "ä½¿ç”¨ ggbump åŒ…\nggbump åŒ…æä¾›äº† geom_bump() å‡½æ•°ï¼Œå¯ä»¥ç»˜åˆ¶æ›´å¹³æ»‘çš„Så½¢æ›²çº¿ï¼Œè§†è§‰æ•ˆæœæ›´ä½³ï¼š\n\nif (requireNamespace(\"ggbump\", quietly = TRUE)) {\n    library(ggbump)\n    \n    ggplot(gdp_ranking, aes(x = year, y = rank, color = country)) +\n        geom_bump(linewidth = 1.5, smooth = 8) +\n        geom_point(size = 5) +\n        geom_text(\n            data = gdp_ranking %&gt;% filter(year == min(year)),\n            aes(label = country),\n            hjust = 1.2,\n            size = 4,\n            fontface = \"bold\"\n        ) +\n        geom_text(\n            data = gdp_ranking %&gt;% filter(year == max(year)),\n            aes(label = country),\n            hjust = -0.2,\n            size = 4,\n            fontface = \"bold\"\n        ) +\n        scale_y_reverse(breaks = 1:6) +\n        scale_x_continuous(breaks = 2019:2023, limits = c(2018, 2024)) +\n        scale_color_brewer(palette = \"Set2\") +\n        labs(\n            title = \"GDPæ’åå˜åŒ–ï¼ˆggbumpå¹³æ»‘æ›²çº¿ï¼‰\",\n            x = NULL,\n            y = \"æ’å\"\n        ) +\n        theme_minimal(base_size = 12) +\n        theme(\n            legend.position = \"none\",\n            panel.grid.minor = element_blank(),\n            plot.title = element_text(face = \"bold\")\n        )\n} else {\n    message(\"è¯·å®‰è£… ggbump åŒ…è·å¾—å¹³æ»‘æ›²çº¿æ•ˆæœ: install.packages('ggbump')\")\n}\n\n\ngeom_bump vs geom_line\n\n\n\nç‰¹æ€§\ngeom_line\ngeom_bump\n\n\n\n\nè¿æ¥æ–¹å¼\nç›´çº¿æ®µ\nSå½¢å¹³æ»‘æ›²çº¿\n\n\nè§†è§‰æ•ˆæœ\né”åˆ©ã€ç²¾ç¡®\næŸ”å’Œã€æµç•…\n\n\né€‚ç”¨åœºæ™¯\nå¼ºè°ƒç²¾ç¡®æ’åç‚¹\nå¼ºè°ƒå˜åŒ–è¶‹åŠ¿\n\n\nä¾èµ–åŒ…\nggplot2ï¼ˆå†…ç½®ï¼‰\nggbumpï¼ˆéœ€å®‰è£…ï¼‰"
  },
  {
    "objectID": "2063-bindbumpchart.html#çªå‡ºç‰¹å®šå®ä½“",
    "href": "2063-bindbumpchart.html#çªå‡ºç‰¹å®šå®ä½“",
    "title": "Rè¯­è¨€å‡¹å‡¸å›¾ï¼ˆæ’åå˜åŒ–å›¾ï¼‰ç»˜åˆ¶",
    "section": "çªå‡ºç‰¹å®šå®ä½“",
    "text": "çªå‡ºç‰¹å®šå®ä½“\nå½“å®ä½“è¾ƒå¤šæ—¶ï¼Œå¯ä»¥é€šè¿‡é¢œè‰²å’Œé€æ˜åº¦çªå‡ºå…³æ³¨çš„å¯¹è±¡ï¼š\n\n# æ ‡è®°å…³æ³¨çš„å›½å®¶\nhighlight_countries &lt;- c(\"ä¸­å›½\", \"å°åº¦\")\n\ngdp_ranking &lt;- gdp_ranking %&gt;%\n    mutate(\n        highlight = country %in% highlight_countries,\n        alpha_val = ifelse(highlight, 1, 0.3)\n    )\n\nggplot(gdp_ranking, aes(x = year, y = rank, group = country)) +\n    # èƒŒæ™¯çº¿ï¼ˆéå…³æ³¨å›½å®¶ï¼‰\n    geom_line(\n        data = gdp_ranking %&gt;% filter(!highlight),\n        color = \"#94a3b8\",\n        linewidth = 1,\n        alpha = 0.4\n    ) +\n    geom_point(\n        data = gdp_ranking %&gt;% filter(!highlight),\n        color = \"#94a3b8\",\n        size = 3,\n        alpha = 0.4\n    ) +\n    # å‰æ™¯çº¿ï¼ˆå…³æ³¨å›½å®¶ï¼‰\n    geom_line(\n        data = gdp_ranking %&gt;% filter(highlight),\n        aes(color = country),\n        linewidth = 2\n    ) +\n    geom_point(\n        data = gdp_ranking %&gt;% filter(highlight),\n        aes(color = country),\n        size = 5\n    ) +\n    # å…³æ³¨å›½å®¶æ ‡ç­¾\n    geom_text(\n        data = gdp_ranking %&gt;% filter(year == max(year) & highlight),\n        aes(label = paste(country, \"(#\", rank, \")\", sep = \"\"), color = country),\n        hjust = -0.1,\n        size = 4,\n        fontface = \"bold\"\n    ) +\n    scale_y_reverse(breaks = 1:6) +\n    scale_x_continuous(breaks = 2019:2023, limits = c(2019, 2024.5)) +\n    scale_color_manual(values = c(\"ä¸­å›½\" = \"#e63946\", \"å°åº¦\" = \"#2a9d8f\")) +\n    labs(\n        title = \"æ–°å…´ç»æµä½“æ’åè¿½è¸ª\",\n        subtitle = \"ä¸­å›½ç¨³å±…ç¬¬äºŒï¼Œå°åº¦åœ¨ç¬¬äº”ç¬¬å…­ä½æ³¢åŠ¨\",\n        x = NULL,\n        y = \"æ’å\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        legend.position = \"none\",\n        panel.grid.minor = element_blank(),\n        plot.title = element_text(face = \"bold\", size = 14)\n    )"
  },
  {
    "objectID": "2063-bindbumpchart.html#é…è‰²æ–¹æ¡ˆ",
    "href": "2063-bindbumpchart.html#é…è‰²æ–¹æ¡ˆ",
    "title": "Rè¯­è¨€å‡¹å‡¸å›¾ï¼ˆæ’åå˜åŒ–å›¾ï¼‰ç»˜åˆ¶",
    "section": "é…è‰²æ–¹æ¡ˆ",
    "text": "é…è‰²æ–¹æ¡ˆ\n\næŒ‰æ’åå˜åŒ–ç€è‰²\næ ¹æ®èµ·æ­¢æ’åçš„å˜åŒ–æ–¹å‘è®¾ç½®é¢œè‰²ï¼š\n\n# è®¡ç®—æ’åå˜åŒ–\ngdp_summary &lt;- gdp_ranking %&gt;%\n    group_by(country) %&gt;%\n    summarise(\n        start_rank = rank[year == min(year)],\n        end_rank = rank[year == max(year)],\n        change = start_rank - end_rank,  # æ­£å€¼è¡¨ç¤ºæ’åä¸Šå‡\n        .groups = \"drop\"\n    ) %&gt;%\n    mutate(\n        trend = case_when(\n            change &gt; 0 ~ \"ä¸Šå‡\",\n            change &lt; 0 ~ \"ä¸‹é™\",\n            TRUE ~ \"æŒå¹³\"\n        )\n    )\n\n# åˆå¹¶åˆ°åŸæ•°æ®\ngdp_ranking &lt;- gdp_ranking %&gt;%\n    left_join(gdp_summary %&gt;% select(country, trend), by = \"country\")\n\nggplot(gdp_ranking, aes(x = year, y = rank, color = trend, group = country)) +\n    geom_line(linewidth = 1.5) +\n    geom_point(size = 4) +\n    geom_text(\n        data = gdp_ranking %&gt;% filter(year == max(year)),\n        aes(label = country),\n        hjust = -0.2,\n        size = 3.5,\n        fontface = \"bold\"\n    ) +\n    scale_y_reverse(breaks = 1:6) +\n    scale_x_continuous(breaks = 2019:2023, limits = c(2019, 2024)) +\n    scale_color_manual(\n        values = c(\"ä¸Šå‡\" = \"#10b981\", \"ä¸‹é™\" = \"#ef4444\", \"æŒå¹³\" = \"#6b7280\"),\n        name = \"æ’åå˜åŒ–\"\n    ) +\n    labs(\n        title = \"GDPæ’åå˜åŒ–è¶‹åŠ¿\",\n        subtitle = \"ç»¿è‰²=æ’åä¸Šå‡ï¼Œçº¢è‰²=æ’åä¸‹é™ï¼Œç°è‰²=æŒå¹³\",\n        x = NULL,\n        y = \"æ’å\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        legend.position = \"top\",\n        panel.grid.minor = element_blank(),\n        plot.title = element_text(face = \"bold\")\n    )"
  },
  {
    "objectID": "2063-bindbumpchart.html#å®é™…æ¡ˆä¾‹ç¼–ç¨‹è¯­è¨€æµè¡Œåº¦æ’å",
    "href": "2063-bindbumpchart.html#å®é™…æ¡ˆä¾‹ç¼–ç¨‹è¯­è¨€æµè¡Œåº¦æ’å",
    "title": "Rè¯­è¨€å‡¹å‡¸å›¾ï¼ˆæ’åå˜åŒ–å›¾ï¼‰ç»˜åˆ¶",
    "section": "å®é™…æ¡ˆä¾‹ï¼šç¼–ç¨‹è¯­è¨€æµè¡Œåº¦æ’å",
    "text": "å®é™…æ¡ˆä¾‹ï¼šç¼–ç¨‹è¯­è¨€æµè¡Œåº¦æ’å\nä»¥ä¸‹ä½¿ç”¨æ›´çœŸå®çš„æ•°æ®å±•ç¤ºç¼–ç¨‹è¯­è¨€åœ¨TIOBEæŒ‡æ•°ä¸­çš„æ’åå˜åŒ–ï¼š\n\n# TIOBEç¼–ç¨‹è¯­è¨€æ’åæ•°æ®ï¼ˆæ¨¡æ‹Ÿï¼‰\ntiobe_data &lt;- data.frame(\n    language = rep(c(\"Python\", \"C\", \"C++\", \"Java\", \"C#\", \n                     \"JavaScript\", \"Go\", \"Rust\", \"Swift\", \"Kotlin\"), each = 5),\n    year = rep(2020:2024, 10),\n    rank = c(\n        3, 2, 1, 1, 1,      # Python: å¿«é€Ÿä¸Šå‡è‡³ç¬¬ä¸€\n        2, 1, 2, 2, 2,      # C: ç•¥æœ‰ä¸‹æ»‘\n        4, 4, 4, 3, 3,      # C++: ç¨³æ­¥ä¸Šå‡\n        1, 3, 3, 4, 4,      # Java: æŒç»­ä¸‹æ»‘\n        5, 5, 5, 5, 5,      # C#: ç¨³å®š\n        7, 7, 7, 6, 6,      # JavaScript: å°å¹…ä¸Šå‡\n        8, 8, 8, 8, 7,      # Go: ç¼“æ…¢ä¸Šå‡\n        10, 10, 9, 9, 8,    # Rust: ç¨³æ­¥ä¸Šå‡\n        9, 9, 10, 10, 9,    # Swift: æ³¢åŠ¨\n        6, 6, 6, 7, 10      # Kotlin: å…ˆç¨³åé™\n    )\n)\n\n# è®¾ç½®è¯­è¨€é…è‰²\nlang_colors &lt;- c(\n    \"Python\" = \"#3776ab\",\n    \"C\" = \"#555555\",\n    \"C++\" = \"#00599c\",\n    \"Java\" = \"#b07219\",\n    \"C#\" = \"#178600\",\n    \"JavaScript\" = \"#f7df1e\",\n    \"Go\" = \"#00add8\",\n    \"Rust\" = \"#dea584\",\n    \"Swift\" = \"#fa7343\",\n    \"Kotlin\" = \"#a97bff\"\n)\n\nggplot(tiobe_data, aes(x = year, y = rank, color = language, group = language)) +\n    geom_line(linewidth = 1.2, alpha = 0.8) +\n    geom_point(size = 3) +\n    # å·¦ä¾§æ ‡ç­¾\n    geom_text(\n        data = tiobe_data %&gt;% filter(year == 2020),\n        aes(label = language),\n        hjust = 1.15,\n        size = 3,\n        fontface = \"bold\"\n    ) +\n    # å³ä¾§æ ‡ç­¾\n    geom_text(\n        data = tiobe_data %&gt;% filter(year == 2024),\n        aes(label = paste0(\"#\", rank)),\n        hjust = -0.3,\n        size = 3,\n        fontface = \"bold\"\n    ) +\n    scale_y_reverse(breaks = 1:10) +\n    scale_x_continuous(\n        breaks = 2020:2024,\n        limits = c(2019, 2025)\n    ) +\n    scale_color_manual(values = lang_colors) +\n    labs(\n        title = \"ç¼–ç¨‹è¯­è¨€æµè¡Œåº¦æ’åå˜åŒ–\",\n        subtitle = \"TIOBE Index 2020-2024ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰\",\n        x = NULL,\n        y = \"æ’å\",\n        caption = \"æ•°æ®æ¥æºï¼šæ¨¡æ‹Ÿæ•°æ®ï¼Œä»…ä¾›æ¼”ç¤º\"\n    ) +\n    theme_minimal(base_size = 11) +\n    theme(\n        legend.position = \"none\",\n        panel.grid.minor = element_blank(),\n        panel.grid.major.x = element_blank(),\n        plot.title = element_text(face = \"bold\", size = 14),\n        plot.subtitle = element_text(color = \"#6b7280\"),\n        axis.text.x = element_text(face = \"bold\")\n    )"
  },
  {
    "objectID": "2063-bindbumpchart.html#åˆ†é¢å‡¹å‡¸å›¾",
    "href": "2063-bindbumpchart.html#åˆ†é¢å‡¹å‡¸å›¾",
    "title": "Rè¯­è¨€å‡¹å‡¸å›¾ï¼ˆæ’åå˜åŒ–å›¾ï¼‰ç»˜åˆ¶",
    "section": "åˆ†é¢å‡¹å‡¸å›¾",
    "text": "åˆ†é¢å‡¹å‡¸å›¾\nå½“éœ€è¦æ¯”è¾ƒä¸åŒç±»åˆ«çš„æ’åå˜åŒ–æ—¶ï¼Œå¯ä»¥ä½¿ç”¨åˆ†é¢ï¼š\n\n# åˆ›å»ºåˆ†ç±»æ’åæ•°æ®\ncategory_ranking &lt;- data.frame(\n    item = rep(c(\"è‹¹æœ\", \"åä¸º\", \"å°ç±³\", \"ä¸‰æ˜Ÿ\", \"OPPO\", \"vivo\"), each = 4),\n    quarter = rep(c(\"Q1\", \"Q2\", \"Q3\", \"Q4\"), 6),\n    quarter_num = rep(1:4, 6),\n    region = rep(c(rep(\"ä¸­å›½å¸‚åœº\", 3), rep(\"ä¸­å›½å¸‚åœº\", 3)), each = 4),\n    rank = c(\n        4, 3, 2, 2,  # è‹¹æœ\n        1, 1, 1, 1,  # åä¸º\n        2, 2, 3, 3,  # å°ç±³\n        6, 6, 6, 6,  # ä¸‰æ˜Ÿ\n        3, 4, 4, 4,  # OPPO\n        5, 5, 5, 5   # vivo\n    )\n)\n\n# æ·»åŠ å…¨çƒå¸‚åœºæ•°æ®\nglobal_ranking &lt;- data.frame(\n    item = rep(c(\"è‹¹æœ\", \"åä¸º\", \"å°ç±³\", \"ä¸‰æ˜Ÿ\", \"OPPO\", \"vivo\"), each = 4),\n    quarter = rep(c(\"Q1\", \"Q2\", \"Q3\", \"Q4\"), 6),\n    quarter_num = rep(1:4, 6),\n    region = \"å…¨çƒå¸‚åœº\",\n    rank = c(\n        1, 1, 1, 1,  # è‹¹æœ\n        6, 6, 5, 5,  # åä¸º\n        3, 3, 3, 3,  # å°ç±³\n        2, 2, 2, 2,  # ä¸‰æ˜Ÿ\n        4, 4, 4, 4,  # OPPO\n        5, 5, 6, 6   # vivo\n    )\n)\n\nall_ranking &lt;- bind_rows(category_ranking, global_ranking)\n\nggplot(all_ranking, aes(x = quarter_num, y = rank, color = item, group = item)) +\n    geom_line(linewidth = 1.3) +\n    geom_point(size = 4) +\n    geom_text(\n        data = all_ranking %&gt;% filter(quarter == \"Q4\"),\n        aes(label = item),\n        hjust = -0.15,\n        size = 3,\n        fontface = \"bold\"\n    ) +\n    facet_wrap(~region, ncol = 2) +\n    scale_y_reverse(breaks = 1:6) +\n    scale_x_continuous(\n        breaks = 1:4,\n        labels = c(\"Q1\", \"Q2\", \"Q3\", \"Q4\"),\n        limits = c(0.8, 5)\n    ) +\n    scale_color_brewer(palette = \"Set2\") +\n    labs(\n        title = \"æ‰‹æœºå“ç‰Œå¸‚åœºæ’åå¯¹æ¯”\",\n        subtitle = \"2024å¹´å­£åº¦æ’å\",\n        x = \"å­£åº¦\",\n        y = \"æ’å\"\n    ) +\n    theme_minimal(base_size = 11) +\n    theme(\n        legend.position = \"none\",\n        strip.text = element_text(face = \"bold\", size = 12),\n        panel.grid.minor = element_blank(),\n        plot.title = element_text(face = \"bold\", size = 14)\n    )"
  },
  {
    "objectID": "2063-bindbumpchart.html#æ·»åŠ æ’åæ•°å€¼",
    "href": "2063-bindbumpchart.html#æ·»åŠ æ’åæ•°å€¼",
    "title": "Rè¯­è¨€å‡¹å‡¸å›¾ï¼ˆæ’åå˜åŒ–å›¾ï¼‰ç»˜åˆ¶",
    "section": "æ·»åŠ æ’åæ•°å€¼",
    "text": "æ·»åŠ æ’åæ•°å€¼\nåœ¨æ•°æ®ç‚¹ä¸Šç›´æ¥æ˜¾ç¤ºæ’åæ•°å­—ï¼š\n\nggplot(gdp_ranking, aes(x = year, y = rank, color = country, group = country)) +\n    geom_line(linewidth = 2, alpha = 0.6) +\n    geom_point(size = 8, color = \"white\") +\n    geom_point(size = 7) +\n    geom_text(\n        aes(label = rank),\n        color = \"white\",\n        size = 3,\n        fontface = \"bold\"\n    ) +\n    geom_text(\n        data = gdp_ranking %&gt;% filter(year == max(year)),\n        aes(label = country),\n        hjust = -0.3,\n        size = 3.5,\n        fontface = \"bold\"\n    ) +\n    scale_y_reverse(breaks = 1:6) +\n    scale_x_continuous(breaks = 2019:2023, limits = c(2019, 2024.2)) +\n    scale_color_brewer(palette = \"Set1\") +\n    labs(\n        title = \"GDPæ’åï¼ˆå¸¦æ•°å€¼æ ‡ç­¾ï¼‰\",\n        x = NULL,\n        y = \"æ’å\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(\n        legend.position = \"none\",\n        panel.grid = element_blank(),\n        plot.title = element_text(face = \"bold\")\n    )"
  },
  {
    "objectID": "2063-bindbumpchart.html#å°è£…å®ç”¨å‡½æ•°",
    "href": "2063-bindbumpchart.html#å°è£…å®ç”¨å‡½æ•°",
    "title": "Rè¯­è¨€å‡¹å‡¸å›¾ï¼ˆæ’åå˜åŒ–å›¾ï¼‰ç»˜åˆ¶",
    "section": "å°è£…å®ç”¨å‡½æ•°",
    "text": "å°è£…å®ç”¨å‡½æ•°\n\n#' ç»˜åˆ¶å‡¹å‡¸å›¾\n#' @param data æ•°æ®æ¡†\n#' @param x_var æ—¶é—´å˜é‡å\n#' @param y_var æ’åå˜é‡å\n#' @param group_var åˆ†ç»„å˜é‡å\n#' @param highlight è¦çªå‡ºçš„ç»„ï¼ˆå¯é€‰ï¼‰\n#' @param smooth æ˜¯å¦ä½¿ç”¨å¹³æ»‘æ›²çº¿ï¼ˆéœ€è¦ggbumpåŒ…ï¼‰\n#' @param show_labels æ˜¯å¦æ˜¾ç¤ºç«¯ç‚¹æ ‡ç­¾\n#' @param title å›¾è¡¨æ ‡é¢˜\nplot_bump &lt;- function(data, x_var, y_var, group_var,\n                      highlight = NULL,\n                      smooth = FALSE,\n                      show_labels = TRUE,\n                      title = NULL) {\n    \n    # åŸºç¡€å›¾å±‚\n    p &lt;- ggplot(data, aes(\n        x = .data[[x_var]],\n        y = .data[[y_var]],\n        color = .data[[group_var]],\n        group = .data[[group_var]]\n    ))\n    \n    # çº¿æ¡ç±»å‹\n    if (smooth && requireNamespace(\"ggbump\", quietly = TRUE)) {\n        p &lt;- p + ggbump::geom_bump(linewidth = 1.5, smooth = 8)\n    } else {\n        p &lt;- p + geom_line(linewidth = 1.5)\n    }\n    \n    p &lt;- p + geom_point(size = 4)\n    \n    # ç«¯ç‚¹æ ‡ç­¾\n    if (show_labels) {\n        x_min &lt;- min(data[[x_var]])\n        x_max &lt;- max(data[[x_var]])\n        \n        p &lt;- p +\n            geom_text(\n                data = data %&gt;% filter(.data[[x_var]] == x_max),\n                aes(label = .data[[group_var]]),\n                hjust = -0.15,\n                size = 3.5,\n                fontface = \"bold\"\n            )\n    }\n    \n    # æ ·å¼è®¾ç½®\n    x_range &lt;- range(data[[x_var]])\n    y_max &lt;- max(data[[y_var]])\n    \n    p &lt;- p +\n        scale_y_reverse(breaks = 1:y_max) +\n        scale_x_continuous(\n            limits = c(x_range[1] - 0.2, x_range[2] + diff(x_range) * 0.15)\n        ) +\n        labs(title = title, x = NULL, y = \"æ’å\") +\n        theme_minimal(base_size = 12) +\n        theme(\n            legend.position = \"none\",\n            panel.grid.minor = element_blank(),\n            plot.title = element_text(face = \"bold\")\n        )\n    \n    return(p)\n}\n\n# ä½¿ç”¨ç¤ºä¾‹\nplot_bump(\n    gdp_ranking,\n    x_var = \"year\",\n    y_var = \"rank\",\n    group_var = \"country\",\n    smooth = FALSE,\n    title = \"ä½¿ç”¨å°è£…å‡½æ•°ç»˜åˆ¶å‡¹å‡¸å›¾\"\n)"
  },
  {
    "objectID": "2063-bindbumpchart.html#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ",
    "href": "2063-bindbumpchart.html#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ",
    "title": "Rè¯­è¨€å‡¹å‡¸å›¾ï¼ˆæ’åå˜åŒ–å›¾ï¼‰ç»˜åˆ¶",
    "section": "å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ",
    "text": "å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ\n\né—®é¢˜1ï¼šçº¿æ¡äº¤å‰è¿‡äºæ··ä¹±\nåŸå› ï¼šå®ä½“æ•°é‡è¿‡å¤šæˆ–æ’åå˜åŒ–å‰§çƒˆ\nè§£å†³æ–¹æ¡ˆï¼š - å‡å°‘å±•ç¤ºçš„å®ä½“æ•°é‡ï¼ˆé€‰æ‹©å‰Nåæˆ–å…³æ³¨å¯¹è±¡ï¼‰ - ä½¿ç”¨é€æ˜åº¦åŒºåˆ†ä¸»æ¬¡ - åˆ†é¢å±•ç¤ºä¸åŒç±»åˆ«\n\n\né—®é¢˜2ï¼šæ ‡ç­¾é‡å \nåŸå› ï¼šå¤šä¸ªå®ä½“åœ¨ç«¯ç‚¹æ’åç›¸åŒæˆ–ç›¸è¿‘\nè§£å†³æ–¹æ¡ˆï¼š - ä½¿ç”¨ ggrepel::geom_text_repel() è‡ªåŠ¨é¿è®© - æ‰‹åŠ¨è°ƒæ•´ vjust åç§» - ä»…æ˜¾ç¤ºä¸€ä¾§æ ‡ç­¾\n\n# ä½¿ç”¨ ggrepel é¿å…æ ‡ç­¾é‡å \nif (requireNamespace(\"ggrepel\", quietly = TRUE)) {\n    library(ggrepel)\n    \n    ggplot(gdp_ranking, aes(x = year, y = rank, color = country, group = country)) +\n        geom_line(linewidth = 1.5) +\n        geom_point(size = 4) +\n        geom_text_repel(\n            data = gdp_ranking %&gt;% filter(year == max(year)),\n            aes(label = country),\n            direction = \"y\",\n            hjust = -0.2,\n            segment.size = 0.3,\n            size = 3.5,\n            fontface = \"bold\"\n        ) +\n        scale_y_reverse(breaks = 1:6) +\n        scale_x_continuous(breaks = 2019:2023, limits = c(2019, 2024.5)) +\n        labs(title = \"ä½¿ç”¨ ggrepel é¿å…æ ‡ç­¾é‡å \", x = NULL, y = \"æ’å\") +\n        theme_minimal() +\n        theme(legend.position = \"none\", plot.title = element_text(face = \"bold\"))\n}\n\n\n\n\n\n\n\n\n\n\né—®é¢˜3ï¼šæ’åå¹¶åˆ—å¤„ç†\nå½“å¤šä¸ªå®ä½“æ’åç›¸åŒæ—¶ï¼Œçº¿æ¡ä¼šå®Œå…¨é‡å ã€‚è§£å†³æ–¹æ¡ˆï¼š\n\n# æ·»åŠ å¾®å°æŠ–åŠ¨é¿å…å®Œå…¨é‡å \ngdp_ranking_jitter &lt;- gdp_ranking %&gt;%\n    group_by(year) %&gt;%\n    mutate(\n        rank_jitter = rank + (row_number() - mean(row_number())) * 0.1\n    ) %&gt;%\n    ungroup()"
  },
  {
    "objectID": "2063-bindbumpchart.html#æ€»ç»“",
    "href": "2063-bindbumpchart.html#æ€»ç»“",
    "title": "Rè¯­è¨€å‡¹å‡¸å›¾ï¼ˆæ’åå˜åŒ–å›¾ï¼‰ç»˜åˆ¶",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\n\nå‡¹å‡¸å›¾æ ¸å¿ƒè¦ç´ \n\n\n\nè¦ç´ \nè¯´æ˜\n\n\n\n\nYè½´åè½¬\nscale_y_reverse() ä½¿æ’åç¬¬ä¸€åœ¨é¡¶éƒ¨\n\n\nç«¯ç‚¹æ ‡ç­¾\næ ‡è¯†æ¯æ¡çº¿ä»£è¡¨çš„å®ä½“\n\n\né¢œè‰²ç¼–ç \nåŒºåˆ†ä¸åŒå®ä½“æˆ–å˜åŒ–è¶‹åŠ¿\n\n\næ—¶é—´è½´\nXè½´å±•ç¤ºæ’åè§‚æµ‹æ—¶é—´ç‚¹\n\n\n\n\n\nè®¾è®¡å»ºè®®\n\n\n\nåœºæ™¯\nå»ºè®®\n\n\n\n\nå®ä½“â‰¤8ä¸ª\nå…¨éƒ¨å±•ç¤ºï¼Œæ¯ä¸ªä½¿ç”¨ä¸åŒé¢œè‰²\n\n\nå®ä½“9-15ä¸ª\nçªå‡ºé‡ç‚¹ï¼Œå…¶ä½™æ·¡åŒ–å¤„ç†\n\n\nå®ä½“&gt;15ä¸ª\nè€ƒè™‘åˆ†ç»„æˆ–ç­›é€‰å‰Nå\n\n\næ—¶é—´ç‚¹â‰¤3ä¸ª\nè€ƒè™‘ä½¿ç”¨å“‘é“ƒå›¾æ›¿ä»£\n\n\nå…³æ³¨å˜åŒ–è¶‹åŠ¿\nä½¿ç”¨ ggbump å¹³æ»‘æ›²çº¿\n\n\nå…³æ³¨ç²¾ç¡®æ’å\nä½¿ç”¨ç›´çº¿ + æ•°å€¼æ ‡ç­¾\n\n\n\n\n\nç›¸å…³æ•™ç¨‹\n\næŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ— - è¿ç»­æ•°å€¼çš„æ—¶é—´è¶‹åŠ¿\nå“‘é“ƒå›¾ä¸å¡åº¦å›¾ - ä¸¤ç‚¹ä¹‹é—´çš„å˜åŒ–å¯¹æ¯”\næ£’æ£’ç³–å›¾ - æ’åºåçš„æ•°å€¼æ¯”è¾ƒ\nå¹³è¡Œåæ ‡å›¾ - å¤šç»´åº¦æ’åå¯¹æ¯”"
  },
  {
    "objectID": "2064-gganimate.html",
    "href": "2064-gganimate.html",
    "title": "Rè¯­è¨€åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–ï¼ˆgganimateï¼‰",
    "section": "",
    "text": "åŠ¨ç”»å¯è§†åŒ–ï¼ˆAnimated Visualizationï¼‰ç”¨äºå±•ç¤ºéšæ—¶é—´æˆ–çŠ¶æ€å˜åŒ–çš„æ•°æ®è¿‡ç¨‹ã€‚ä¸é™æ€å›¾ç›¸æ¯”ï¼ŒåŠ¨ç”»èƒ½æ›´ç›´è§‚åœ°è¡¨è¾¾è¶‹åŠ¿ã€å˜åŒ–é€Ÿåº¦ä¸é˜¶æ®µæ€§ç‰¹å¾ï¼Œå°¤å…¶é€‚ç”¨äºæ—¶é—´åºåˆ—ã€ç”Ÿå‘½å‘¨æœŸä¸çŠ¶æ€åˆ‡æ¢çš„è§£é‡Šã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\nç¤ºä¾‹\n\n\n\n\nè¶‹åŠ¿æ¼”åŒ–\næ•°å€¼éšæ—¶é—´è¿ç»­å˜åŒ–\né”€é‡ã€æ°”æ¸©ã€æŒ‡æ•°èµ°åŠ¿\n\n\nç»“æ„å˜åŒ–\nå¤šç±»åˆ«æ¯”ä¾‹æˆ–æ’åå˜åŒ–\nå¸‚åœºä»½é¢ã€æ’åå˜åŒ–\n\n\nç©ºé—´è¿ç§»\nä½ç½®éšæ—¶é—´ç§»åŠ¨\nè½¨è¿¹ã€è¿å¾™ã€ç‰©æµè·¯çº¿\n\n\nçŠ¶æ€åˆ‡æ¢\näº‹ä»¶å¯¼è‡´é˜¶æ®µå˜åŒ–\næ”¿ç­–å‰åã€å¹²é¢„å‰å\n\n\n\n\n\n\n\næ•°æ®ç‚¹è¿‡å°‘ï¼ˆåŠ¨ç”»æ²¡æœ‰ä¿¡æ¯å¢é‡ï¼‰\né¢‘ç¹è·³å˜å¯¼è‡´éš¾ä»¥è¿½è¸ª\néœ€è¦ç²¾ç¡®è¯»å–æ•°å€¼ï¼ˆé™æ€å›¾æ›´æ¸…æ™°ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2064-gganimate.html#åŠ¨æ€å¯è§†åŒ–çš„ç”¨é€”ä¸åœºæ™¯",
    "href": "2064-gganimate.html#åŠ¨æ€å¯è§†åŒ–çš„ç”¨é€”ä¸åœºæ™¯",
    "title": "Rè¯­è¨€åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–ï¼ˆgganimateï¼‰",
    "section": "",
    "text": "åŠ¨ç”»å¯è§†åŒ–ï¼ˆAnimated Visualizationï¼‰ç”¨äºå±•ç¤ºéšæ—¶é—´æˆ–çŠ¶æ€å˜åŒ–çš„æ•°æ®è¿‡ç¨‹ã€‚ä¸é™æ€å›¾ç›¸æ¯”ï¼ŒåŠ¨ç”»èƒ½æ›´ç›´è§‚åœ°è¡¨è¾¾è¶‹åŠ¿ã€å˜åŒ–é€Ÿåº¦ä¸é˜¶æ®µæ€§ç‰¹å¾ï¼Œå°¤å…¶é€‚ç”¨äºæ—¶é—´åºåˆ—ã€ç”Ÿå‘½å‘¨æœŸä¸çŠ¶æ€åˆ‡æ¢çš„è§£é‡Šã€‚\n\n\n\n\n\nåœºæ™¯\nè¯´æ˜\nç¤ºä¾‹\n\n\n\n\nè¶‹åŠ¿æ¼”åŒ–\næ•°å€¼éšæ—¶é—´è¿ç»­å˜åŒ–\né”€é‡ã€æ°”æ¸©ã€æŒ‡æ•°èµ°åŠ¿\n\n\nç»“æ„å˜åŒ–\nå¤šç±»åˆ«æ¯”ä¾‹æˆ–æ’åå˜åŒ–\nå¸‚åœºä»½é¢ã€æ’åå˜åŒ–\n\n\nç©ºé—´è¿ç§»\nä½ç½®éšæ—¶é—´ç§»åŠ¨\nè½¨è¿¹ã€è¿å¾™ã€ç‰©æµè·¯çº¿\n\n\nçŠ¶æ€åˆ‡æ¢\näº‹ä»¶å¯¼è‡´é˜¶æ®µå˜åŒ–\næ”¿ç­–å‰åã€å¹²é¢„å‰å\n\n\n\n\n\n\n\næ•°æ®ç‚¹è¿‡å°‘ï¼ˆåŠ¨ç”»æ²¡æœ‰ä¿¡æ¯å¢é‡ï¼‰\né¢‘ç¹è·³å˜å¯¼è‡´éš¾ä»¥è¿½è¸ª\néœ€è¦ç²¾ç¡®è¯»å–æ•°å€¼ï¼ˆé™æ€å›¾æ›´æ¸…æ™°ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2064-gganimate.html#gganimate-çš„å·¥ä½œåŸç†",
    "href": "2064-gganimate.html#gganimate-çš„å·¥ä½œåŸç†",
    "title": "Rè¯­è¨€åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–ï¼ˆgganimateï¼‰",
    "section": "gganimate çš„å·¥ä½œåŸç†",
    "text": "gganimate çš„å·¥ä½œåŸç†\ngganimate å°† ggplot2 å›¾å½¢æ‰©å±•ä¸ºå¸§åºåˆ—ï¼Œå†ç”±æ¸²æŸ“å™¨ï¼ˆå¦‚ gifskiï¼‰è¾“å‡ºä¸º GIF æˆ–è§†é¢‘ã€‚æ ¸å¿ƒé€»è¾‘æ˜¯ï¼š\n\nå…ˆç”¨ ggplot2 åˆ›å»ºåŸºç¡€é™æ€å›¾\nè¿½åŠ åŠ¨ç”»è¯­æ³•ï¼ˆtransition_*ã€shadow_*ã€enter_*ã€exit_*ï¼‰\nä½¿ç”¨ animate() æ¸²æŸ“ä¸º GIF/MP4\n\n\nå¸¸ç”¨åŠ¨ç”»è¯­æ³•\n\n\n\nåŠŸèƒ½\nå¸¸ç”¨å‡½æ•°\nç”¨é€”\n\n\n\n\næ—¶é—´æ¨è¿›\ntransition_time()\næŒ‰æ—¶é—´å˜é‡æ¨è¿›\n\n\nçŠ¶æ€åˆ‡æ¢\ntransition_states()\næŒ‰ç±»åˆ«çŠ¶æ€åˆ†æ®µ\n\n\næŒç»­ç»˜åˆ¶\ntransition_reveal()\né€æ­¥å±•ç¤ºè½¨è¿¹\n\n\næ®‹å½±\nshadow_mark()\nä¿ç•™å†å²è½¨è¿¹\n\n\nå‡ºå…¥åœº\nenter_fade()ã€exit_fade()\næ§åˆ¶å‡ºç°/æ¶ˆå¤±æ•ˆæœ",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2064-gganimate.html#å®‰è£…ä¸ä¾èµ–",
    "href": "2064-gganimate.html#å®‰è£…ä¸ä¾èµ–",
    "title": "Rè¯­è¨€åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–ï¼ˆgganimateï¼‰",
    "section": "å®‰è£…ä¸ä¾èµ–",
    "text": "å®‰è£…ä¸ä¾èµ–\n\ninstall.packages(c(\"gganimate\", \"gifski\", \"transformr\"))\n\n\ngganimateï¼šåŠ¨ç”»è¯­æ³•\ngifskiï¼šGIF æ¸²æŸ“å™¨ï¼ˆæ¨èï¼‰\ntransformrï¼šå¹³æ»‘è·¯å¾„æ’å€¼ï¼ˆæ›´æµç•…çš„åŠ¨ç”»ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2064-gganimate.html#æ•°æ®å‡†å¤‡",
    "href": "2064-gganimate.html#æ•°æ®å‡†å¤‡",
    "title": "Rè¯­è¨€åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–ï¼ˆgganimateï¼‰",
    "section": "æ•°æ®å‡†å¤‡",
    "text": "æ•°æ®å‡†å¤‡\nåŠ¨ç”»å›¾éœ€è¦é•¿æ ¼å¼æ•°æ®ï¼Œè‡³å°‘åŒ…å«ï¼š\n\ntimeï¼šæ—¶é—´æˆ–å¸§å˜é‡\ngroupï¼šåˆ†ç»„æ ‡è¯†\nvalueï¼šæ•°å€¼æˆ–ä½ç½®\n\nä¸‹é¢æ„é€ ä¸€ä¸ªæ¨¡æ‹Ÿæ•°æ®é›†ï¼Œå±•ç¤ºä¸‰ç±»äº§å“çš„æœˆåº¦é”€é‡å˜åŒ–ã€‚\n\nset.seed(42)\n\nsales_data &lt;- data.frame(\n    month = rep(1:12, 3),\n    product = rep(c(\"Aäº§å“\", \"Bäº§å“\", \"Cäº§å“\"), each = 12)\n)\n\nsales_data &lt;- dplyr::mutate(\n    sales_data,\n    value = dplyr::case_when(\n        product == \"Aäº§å“\" ~ 80 + month * 2 + rnorm(12, 0, 3),\n        product == \"Bäº§å“\" ~ 60 + month * 3 + rnorm(12, 0, 4),\n        TRUE ~ 50 + month * 1.5 + rnorm(12, 0, 3)\n    )\n)\n\nhead(sales_data)\n\n  month product    value\n1     1   Aäº§å“ 86.11288\n2     2   Aäº§å“ 82.30591\n3     3   Aäº§å“ 87.08939\n4     4   Aäº§å“ 89.89859\n5     5   Aäº§å“ 91.21280\n6     6   Aäº§å“ 91.68163",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2064-gganimate.html#åŸºç¡€ç‰ˆæœ¬æŠ˜çº¿åŠ¨ç”»transition_reveal",
    "href": "2064-gganimate.html#åŸºç¡€ç‰ˆæœ¬æŠ˜çº¿åŠ¨ç”»transition_reveal",
    "title": "Rè¯­è¨€åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–ï¼ˆgganimateï¼‰",
    "section": "åŸºç¡€ç‰ˆæœ¬ï¼šæŠ˜çº¿åŠ¨ç”»ï¼ˆtransition_revealï¼‰",
    "text": "åŸºç¡€ç‰ˆæœ¬ï¼šæŠ˜çº¿åŠ¨ç”»ï¼ˆtransition_revealï¼‰\ntransition_reveal() é€‚åˆå±•ç¤ºè¿ç»­æ—¶é—´åºåˆ—çš„é€æ­¥å‘ˆç°ã€‚\n\nlibrary(ggplot2)\nlibrary(dplyr)\n\nif (!requireNamespace(\"gganimate\", quietly = TRUE)) {\n    message(\"è¯·å…ˆå®‰è£… gganimate åŒ…: install.packages('gganimate')\")\n} else {\n    p_line &lt;- ggplot(sales_data, aes(x = month, y = value, color = product)) +\n        geom_line(linewidth = 1.2) +\n        geom_point(size = 2) +\n        scale_x_continuous(breaks = 1:12) +\n        labs(\n            title = \"äº§å“é”€é‡éšæ—¶é—´å˜åŒ–\",\n            subtitle = \"æœˆä»½ï¼š{frame_along}\",\n            x = \"æœˆä»½\",\n            y = \"é”€é‡\",\n            color = \"äº§å“\"\n        ) +\n        theme_minimal(base_size = 12) +\n        gganimate::transition_reveal(month)\n\n    p_line\n}\n\n\n\n\n\n\n\n\n\nä»£ç è§£æ\n\ntransition_reveal(month)ï¼šä»¥ month ä½œä¸ºæ—¶é—´æ¨è¿›è½´\nsubtitle = \"æœˆä»½ï¼š{frame_along}\"ï¼šæ˜¾ç¤ºå½“å‰å¸§å¯¹åº”çš„æ—¶é—´\nçº¿æ¡é€æ­¥è¢«â€œæ­ç¤ºâ€ï¼Œé€‚åˆè¶‹åŠ¿å±•ç¤º",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2064-gganimate.html#è¾“å‡ºåŠ¨ç”»æ–‡ä»¶",
    "href": "2064-gganimate.html#è¾“å‡ºåŠ¨ç”»æ–‡ä»¶",
    "title": "Rè¯­è¨€åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–ï¼ˆgganimateï¼‰",
    "section": "è¾“å‡ºåŠ¨ç”»æ–‡ä»¶",
    "text": "è¾“å‡ºåŠ¨ç”»æ–‡ä»¶\næ¸²æŸ“åŠ¨ç”»å¹¶ä¿å­˜åˆ° doc/figure/ï¼š\n\nanim_line &lt;- animate(\n    p_line,\n    nframes = 120,\n    fps = 12,\n    width = 800,\n    height = 500,\n    renderer = gifski_renderer()\n)\n\nanim_save(\"figure/gganimate-line.gif\", animation = anim_line)\n\n\nnframesï¼šå¸§æ•°ï¼ˆè¶Šå¤šè¶Šæµç•…ï¼‰\nfpsï¼šæ¯ç§’å¸§æ•°ï¼ˆå½±å“é€Ÿåº¦ï¼‰\nrendererï¼šæ¨è gifski_renderer() è¾“å‡º GIF",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2064-gganimate.html#è¿›é˜¶ç‰ˆæœ¬æ•£ç‚¹åŠ¨ç”»transition_time-shadow",
    "href": "2064-gganimate.html#è¿›é˜¶ç‰ˆæœ¬æ•£ç‚¹åŠ¨ç”»transition_time-shadow",
    "title": "Rè¯­è¨€åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–ï¼ˆgganimateï¼‰",
    "section": "è¿›é˜¶ç‰ˆæœ¬ï¼šæ•£ç‚¹åŠ¨ç”»ï¼ˆtransition_time + shadowï¼‰",
    "text": "è¿›é˜¶ç‰ˆæœ¬ï¼šæ•£ç‚¹åŠ¨ç”»ï¼ˆtransition_time + shadowï¼‰\nä½¿ç”¨ transition_time() å¯è®©æ•£ç‚¹éšæ—¶é—´ç§»åŠ¨ï¼Œå¹¶ç”¨ shadow_mark() ä¿ç•™å†å²è½¨è¿¹ï¼Œå¢å¼ºæ•…äº‹æ€§ã€‚\n\n# æ¨¡æ‹ŸåŸå¸‚æŒ‡æ ‡å˜åŒ–æ•°æ®\nset.seed(123)\n\ncity_data &lt;- data.frame(\n    year = rep(2015:2024, 6),\n    city = rep(c(\"åŒ—äº¬\", \"ä¸Šæµ·\", \"æ·±åœ³\", \"å¹¿å·\", \"æ­å·\", \"æˆéƒ½\"), each = 10)\n)\n\ncity_data &lt;- dplyr::mutate(\n    city_data,\n    gdp = runif(60, 0.8, 1.5) * (year - 2014) * 100,\n    income = runif(60, 30, 80) + (year - 2014) * 2\n)\n\nif (!requireNamespace(\"gganimate\", quietly = TRUE)) {\n    message(\"è¯·å…ˆå®‰è£… gganimate åŒ…: install.packages('gganimate')\")\n} else {\n    p_scatter &lt;- ggplot(city_data, aes(x = gdp, y = income, color = city)) +\n        geom_point(size = 4, alpha = 0.8) +\n        scale_x_continuous(labels = scales::comma) +\n        labs(\n            title = \"åŸå¸‚ç»æµæŒ‡æ ‡æ¼”åŒ–\",\n            subtitle = \"å¹´ä»½ï¼š{frame_time}\",\n            x = \"GDPï¼ˆäº¿å…ƒï¼‰\",\n            y = \"äººå‡æ”¶å…¥ï¼ˆä¸‡å…ƒï¼‰\"\n        ) +\n        theme_minimal(base_size = 12) +\n        gganimate::transition_time(year) +\n        gganimate::shadow_mark(alpha = 0.2, size = 2)\n\n    p_scatter\n}\n\n\n\n\n\n\n\n\n\nä»£ç è§£æ\n\ntransition_time(year)ï¼šæŒ‰å¹´ä»½æ¨è¿›\nshadow_mark()ï¼šä¿ç•™å†å²ç‚¹ï¼Œæ˜¾ç¤ºç§»åŠ¨è½¨è¿¹\né€‚åˆå±•ç¤ºâ€œå‘å±•è½¨è¿¹â€æˆ–â€œéšæ—¶é—´æ¼”åŒ–çš„ç©ºé—´å…³ç³»â€",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2064-gganimate.html#è¿›é˜¶ç‰ˆæœ¬çŠ¶æ€åˆ‡æ¢åŠ¨ç”»transition_states",
    "href": "2064-gganimate.html#è¿›é˜¶ç‰ˆæœ¬çŠ¶æ€åˆ‡æ¢åŠ¨ç”»transition_states",
    "title": "Rè¯­è¨€åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–ï¼ˆgganimateï¼‰",
    "section": "è¿›é˜¶ç‰ˆæœ¬ï¼šçŠ¶æ€åˆ‡æ¢åŠ¨ç”»ï¼ˆtransition_statesï¼‰",
    "text": "è¿›é˜¶ç‰ˆæœ¬ï¼šçŠ¶æ€åˆ‡æ¢åŠ¨ç”»ï¼ˆtransition_statesï¼‰\nå½“æ•°æ®åˆ†ä¸ºæ¸…æ™°é˜¶æ®µæ—¶ï¼Œä½¿ç”¨ transition_states() æ›´è‡ªç„¶ã€‚\n\npolicy_data &lt;- data.frame(\n    phase = rep(c(\"æ”¿ç­–å‰\", \"è¯•ç‚¹æœŸ\", \"å…¨é¢æ¨å¹¿\"), each = 6),\n    region = rep(c(\"ååŒ—\", \"åä¸œ\", \"åå—\", \"è¥¿å—\", \"è¥¿åŒ—\", \"ä¸œåŒ—\"), 3),\n    value = c(55, 60, 62, 48, 50, 45,  \n              60, 68, 70, 55, 58, 52,\n              72, 80, 85, 65, 68, 60)\n)\n\nif (!requireNamespace(\"gganimate\", quietly = TRUE)) {\n    message(\"è¯·å…ˆå®‰è£… gganimate åŒ…: install.packages('gganimate')\")\n} else {\n    p_state &lt;- ggplot(policy_data, aes(x = region, y = value, fill = region)) +\n        geom_col(width = 0.7, alpha = 0.85) +\n        labs(\n            title = \"æ”¿ç­–é˜¶æ®µæ€§æ•ˆæœå˜åŒ–\",\n            subtitle = \"é˜¶æ®µï¼š{closest_state}\",\n            x = NULL,\n            y = \"æŒ‡æ ‡å€¼\"\n        ) +\n        theme_minimal(base_size = 12) +\n        theme(legend.position = \"none\") +\n        gganimate::transition_states(\n            phase,\n            transition_length = 2,\n            state_length = 1\n        ) +\n        gganimate::enter_fade() +\n        gganimate::exit_fade()\n\n    p_state\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2064-gganimate.html#æ ·å¼ä¸ç¾åŒ–å»ºè®®",
    "href": "2064-gganimate.html#æ ·å¼ä¸ç¾åŒ–å»ºè®®",
    "title": "Rè¯­è¨€åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–ï¼ˆgganimateï¼‰",
    "section": "æ ·å¼ä¸ç¾åŒ–å»ºè®®",
    "text": "æ ·å¼ä¸ç¾åŒ–å»ºè®®\n\næ§åˆ¶åŠ¨ç”»èŠ‚å¥ï¼š\n\nfps ä¸ nframes å†³å®šé€Ÿåº¦\næ¨è fps = 10-15ï¼Œä¿æŒæµç•…ä¸”ä¸åˆºçœ¼\n\nä¿æŒè§†è§‰ç¨³å®šï¼š\n\nå›ºå®šåæ ‡è½´èŒƒå›´ï¼Œé¿å…ç”»é¢è·³åŠ¨\nä½¿ç”¨ scale_x_continuous(limits = ...) ä¸ scale_y_continuous(limits = ...)\n\nå‡å°‘è§†è§‰å™ªå£°ï¼š\n\nåŠ¨ç”»å…ƒç´ ä¸è¦è¿‡å¤š\næ ‡ç­¾ç®€æ´ï¼Œå¿…è¦æ—¶åªæ˜¾ç¤ºå…³é”®ç‚¹\n\nè¾“å‡ºå°ºå¯¸æ§åˆ¶ï¼š\n\nGIF æ–‡ä»¶è¿‡å¤§æ—¶ï¼Œé™ä½ nframes æˆ–å°ºå¯¸\nå¦‚æœç”¨äºç½‘é¡µï¼Œæ¨èå®½åº¦ 600-800 px",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2064-gganimate.html#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ",
    "href": "2064-gganimate.html#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ",
    "title": "Rè¯­è¨€åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–ï¼ˆgganimateï¼‰",
    "section": "å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ",
    "text": "å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ\n\n1. æ— æ³•ç”ŸæˆåŠ¨ç”»\nåŸå› ï¼šç¼ºå°‘æ¸²æŸ“å™¨\nè§£å†³æ–¹æ¡ˆï¼š\n\ninstall.packages(\"gifski\")\n\n\n\n2. åŠ¨ç”»å¡é¡¿æˆ–ä¸æµç•…\nåŸå› ï¼šnframes å¤ªå°‘æˆ–æ•°æ®ç‚¹è¿‡å¤š\nè§£å†³æ–¹æ¡ˆï¼š - å¢åŠ  nframes - é™ä½ fps - ç®€åŒ–å›¾å½¢å…ƒç´ \n\n\n3. è½¨è¿¹ä¸è¿ç»­\nåŸå› ï¼šç¼ºå°‘æ’å€¼è®¡ç®—\nè§£å†³æ–¹æ¡ˆï¼š\n\ninstall.packages(\"transformr\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2064-gganimate.html#è¿›é˜¶æ‰©å±•æ–¹å‘",
    "href": "2064-gganimate.html#è¿›é˜¶æ‰©å±•æ–¹å‘",
    "title": "Rè¯­è¨€åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–ï¼ˆgganimateï¼‰",
    "section": "è¿›é˜¶æ‰©å±•æ–¹å‘",
    "text": "è¿›é˜¶æ‰©å±•æ–¹å‘\n\nè¾“å‡º MP4ï¼šä½¿ç”¨ av_renderer() ç”Ÿæˆé«˜è´¨é‡è§†é¢‘\näº¤äº’å¼åŠ¨ç”»ï¼šä¸ plotly ç»“åˆç”¨äºç½‘é¡µ\nä»ªè¡¨ç›˜åµŒå…¥ï¼šå°†åŠ¨ç”»è¾“å‡ºåµŒå…¥ Quarto é¡µé¢\nåŠ¨ç”»å¯¹æ¯”ï¼šä¸é™æ€å›¾å¹¶æ’å±•ç¤ºï¼Œæé«˜å¯è¯»æ€§",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "2064-gganimate.html#æ€»ç»“",
    "href": "2064-gganimate.html#æ€»ç»“",
    "title": "Rè¯­è¨€åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–ï¼ˆgganimateï¼‰",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nåŠ¨ç”»å¯è§†åŒ–æ˜¯è¡¨è¾¾â€œå˜åŒ–è¿‡ç¨‹â€çš„é«˜æ•ˆå·¥å…·ã€‚gganimate ä¸ ggplot2 æ— ç¼æ•´åˆï¼Œæ—¢ä¿ç•™ç†Ÿæ‚‰çš„è¯­æ³•ç»“æ„ï¼Œä¹Ÿèƒ½äº§å‡ºé«˜è´¨é‡åŠ¨ç”»å›¾ã€‚å®è·µæ—¶åº”ä¼˜å…ˆè€ƒè™‘ï¼š\n\næ•°æ®æ˜¯å¦é€‚åˆåŠ¨ç”»è¡¨è¾¾\næ—¶é—´æˆ–çŠ¶æ€ç»´åº¦æ˜¯å¦æ¸…æ™°\nåŠ¨ç”»èŠ‚å¥æ˜¯å¦åˆç†\n\n\nç›¸å…³æ•™ç¨‹\n\næŠ˜çº¿å›¾ä¸æ—¶é—´åºåˆ—\næ•£ç‚¹å›¾ä¸è¶‹åŠ¿çº¿\näº¤äº’å¼å¯è§†åŒ–è¿›é˜¶",
    "crumbs": [
      "ä¸»é¡µ",
      "æ•°æ®å¯è§†åŒ–",
      "ğŸ“Š å…¶ä»–å›¾å½¢",
      "åŠ¨æ€å›¾è¡¨ä¸åŠ¨ç”»å¯è§†åŒ–"
    ]
  },
  {
    "objectID": "1097-clpm.html",
    "href": "1097-clpm.html",
    "title": "äº¤å‰æ»åé¢æ¿æ¨¡å‹ï¼ˆCLPMï¼‰å®Œå…¨æ•™ç¨‹",
    "section": "",
    "text": "äº¤å‰æ»åé¢æ¿æ¨¡å‹ï¼ˆCross-Lagged Panel Model, CLPMï¼‰æ˜¯çºµå‘æ•°æ®ä¸­ç ”ç©¶å˜é‡ä¹‹é—´æ—¶é—´å…ˆåå½±å“çš„ç»å…¸æ–¹æ³•ã€‚å®ƒåŒæ—¶ä¼°è®¡ï¼š\n\nè‡ªå›å½’æ•ˆåº”ï¼ˆautoregressiveï¼‰ï¼šå˜é‡è‡ªèº«çš„ç¨³å®šæ€§ä¸å»¶ç»­æ€§\näº¤å‰æ»åæ•ˆåº”ï¼ˆcross-laggedï¼‰ï¼šå˜é‡ä¹‹é—´çš„æ—¶åºå½±å“æ–¹å‘\n\nCLPM çš„å…¸å‹é—®é¢˜æ˜¯ï¼š\n\nâ€œX çš„æ—©æœŸæ°´å¹³æ˜¯å¦å½±å“ Y çš„åæœŸæ°´å¹³ï¼Ÿâ€\nâ€œX ä¸ Y å“ªä¸€ä¸ªå¯¹å¯¹æ–¹çš„å½±å“æ›´å¼ºï¼Ÿâ€\nâ€œåœ¨æ§åˆ¶è‡ªèº«ç¨³å®šæ€§çš„æƒ…å†µä¸‹ï¼Œå˜é‡é—´æ˜¯å¦å­˜åœ¨æ—¶é—´å› æœé¡ºåºï¼Ÿâ€",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "äº¤å‰æ»åé¢æ¿æ¨¡å‹ (CLPM)"
    ]
  },
  {
    "objectID": "1097-clpm.html#æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "href": "1097-clpm.html#æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "title": "äº¤å‰æ»åé¢æ¿æ¨¡å‹ï¼ˆCLPMï¼‰å®Œå…¨æ•™ç¨‹",
    "section": "",
    "text": "äº¤å‰æ»åé¢æ¿æ¨¡å‹ï¼ˆCross-Lagged Panel Model, CLPMï¼‰æ˜¯çºµå‘æ•°æ®ä¸­ç ”ç©¶å˜é‡ä¹‹é—´æ—¶é—´å…ˆåå½±å“çš„ç»å…¸æ–¹æ³•ã€‚å®ƒåŒæ—¶ä¼°è®¡ï¼š\n\nè‡ªå›å½’æ•ˆåº”ï¼ˆautoregressiveï¼‰ï¼šå˜é‡è‡ªèº«çš„ç¨³å®šæ€§ä¸å»¶ç»­æ€§\näº¤å‰æ»åæ•ˆåº”ï¼ˆcross-laggedï¼‰ï¼šå˜é‡ä¹‹é—´çš„æ—¶åºå½±å“æ–¹å‘\n\nCLPM çš„å…¸å‹é—®é¢˜æ˜¯ï¼š\n\nâ€œX çš„æ—©æœŸæ°´å¹³æ˜¯å¦å½±å“ Y çš„åæœŸæ°´å¹³ï¼Ÿâ€\nâ€œX ä¸ Y å“ªä¸€ä¸ªå¯¹å¯¹æ–¹çš„å½±å“æ›´å¼ºï¼Ÿâ€\nâ€œåœ¨æ§åˆ¶è‡ªèº«ç¨³å®šæ€§çš„æƒ…å†µä¸‹ï¼Œå˜é‡é—´æ˜¯å¦å­˜åœ¨æ—¶é—´å› æœé¡ºåºï¼Ÿâ€",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "äº¤å‰æ»åé¢æ¿æ¨¡å‹ (CLPM)"
    ]
  },
  {
    "objectID": "1097-clpm.html#æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "href": "1097-clpm.html#æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "title": "äº¤å‰æ»åé¢æ¿æ¨¡å‹ï¼ˆCLPMï¼‰å®Œå…¨æ•™ç¨‹",
    "section": "æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "text": "æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ\nCLPM çš„æ ¸å¿ƒç»“æ„å¯ä»¥ç†è§£ä¸ºä¸¤æ¡è‡ªå›å½’è·¯å¾„ + ä¸¤æ¡äº¤å‰è·¯å¾„ï¼š\nX1 â†’ X2 â†’ X3\nY1 â†’ Y2 â†’ Y3\nX1 â†’ Y2, X2 â†’ Y3\nY1 â†’ X2, Y2 â†’ X3\n\nå…³é”®æœ¯è¯­\n\n\n\næœ¯è¯­\nå«ä¹‰\nä½œç”¨\n\n\n\n\nè‡ªå›å½’æ•ˆåº”\nX_t ç”± X_{t-1} é¢„æµ‹\nç¨³å®šæ€§/æƒ¯æ€§\n\n\näº¤å‰æ»åæ•ˆåº”\nY_t ç”± X_{t-1} é¢„æµ‹\næ—¶é—´é¡ºåºå½±å“\n\n\nåŒæœŸç›¸å…³\nX_t ä¸ Y_t ç›¸å…³\næ§åˆ¶åŒæ­¥å…³ç³»",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "äº¤å‰æ»åé¢æ¿æ¨¡å‹ (CLPM)"
    ]
  },
  {
    "objectID": "1097-clpm.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "href": "1097-clpm.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "title": "äº¤å‰æ»åé¢æ¿æ¨¡å‹ï¼ˆCLPMï¼‰å®Œå…¨æ•™ç¨‹",
    "section": "æ¨¡å‹å‡è®¾ä¸å‰æ",
    "text": "æ¨¡å‹å‡è®¾ä¸å‰æ\nCLPM çš„æœ‰æ•ˆæ€§ä¾èµ–ä»¥ä¸‹å‰æï¼š\n\næ—¶é—´ç‚¹é—´éš”ç›¸å¯¹ä¸€è‡´ï¼šç›¸é‚»æ³¢æ¬¡é—´éš”åº”ç›¸è¿‘\næµ‹é‡ç¨³å®šæ€§ï¼šåŒä¸€å˜é‡è·¨æ—¶é—´æµ‹é‡å«ä¹‰ä¸€è‡´\næ— é—æ¼é‡è¦æ··æ‚ï¼šæœªè§‚æµ‹å˜é‡å¯èƒ½å¯¼è‡´åå·®\nçº¿æ€§å…³ç³»ä¸æ­£æ€æ€§ï¼ˆæˆ–è¿‘ä¼¼ï¼‰ï¼šlavaan é»˜è®¤ä½¿ç”¨æ­£æ€ä¼°è®¡\n\nè‹¥æ•°æ®å­˜åœ¨ä¸ªä½“é—´ç¨³å®šå·®å¼‚ï¼Œå¯ä»¥è€ƒè™‘ RI-CLPMï¼ˆéšæœºæˆªè·äº¤å‰æ»åæ¨¡å‹ï¼‰ä½œä¸ºæ‰©å±•ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "äº¤å‰æ»åé¢æ¿æ¨¡å‹ (CLPM)"
    ]
  },
  {
    "objectID": "1097-clpm.html#æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "href": "1097-clpm.html#æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "title": "äº¤å‰æ»åé¢æ¿æ¨¡å‹ï¼ˆCLPMï¼‰å®Œå…¨æ•™ç¨‹",
    "section": "æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "text": "æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰\nCLPM éœ€è¦åŒä¸€ç»„æ ·æœ¬çš„å¤šæœŸé‡å¤æµ‹é‡ï¼Œå¸¸è§ç»“æ„ï¼š\n\n\n\nid\nx1\nx2\nx3\ny1\ny2\ny3\n\n\n\n\n\nä¸‹é¢æ¨¡æ‹Ÿä¸€ä¸ªä¸‰æ³¢æ•°æ®é›†ï¼š\n\nset.seed(2026)\n\nn &lt;- 300\n\nx1 &lt;- rnorm(n, 0, 1)\ny1 &lt;- 0.4 * x1 + rnorm(n, 0, 1)\n\nx2 &lt;- 0.6 * x1 + 0.2 * y1 + rnorm(n, 0, 1)\ny2 &lt;- 0.6 * y1 + 0.3 * x1 + rnorm(n, 0, 1)\n\nx3 &lt;- 0.6 * x2 + 0.2 * y2 + rnorm(n, 0, 1)\ny3 &lt;- 0.6 * y2 + 0.3 * x2 + rnorm(n, 0, 1)\n\npanel_data &lt;- data.frame(\n  id = 1:n,\n  x1 = x1, x2 = x2, x3 = x3,\n  y1 = y1, y2 = y2, y3 = y3\n)\n\nhead(panel_data)\n\n  id          x1          x2          x3          y1          y2         y3\n1  1  0.52058907  1.28642030  1.15075234  0.05964355  0.43397051 -1.1054582\n2  2 -1.07969076 -0.94891505 -0.05626268 -0.61482906 -1.11323980 -1.4312114\n3  3  0.13923812 -0.07365805 -0.24766469 -0.80245259 -0.99589037 -1.6276082\n4  4 -0.08474878  0.64561783  0.24072727  0.92425967  1.49743570  1.1441864\n5  5 -0.66663962 -1.07719101  0.37872386 -1.10573279  0.05369327  0.1024897\n6  6 -2.51608903 -2.07378952 -2.75762763 -1.76615989 -1.11252382 -1.1896231",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "äº¤å‰æ»åé¢æ¿æ¨¡å‹ (CLPM)"
    ]
  },
  {
    "objectID": "1097-clpm.html#æ¢ç´¢æ€§å¯è§†åŒ–è¶‹åŠ¿ä¸ç¨³å®šæ€§",
    "href": "1097-clpm.html#æ¢ç´¢æ€§å¯è§†åŒ–è¶‹åŠ¿ä¸ç¨³å®šæ€§",
    "title": "äº¤å‰æ»åé¢æ¿æ¨¡å‹ï¼ˆCLPMï¼‰å®Œå…¨æ•™ç¨‹",
    "section": "æ¢ç´¢æ€§å¯è§†åŒ–ï¼ˆè¶‹åŠ¿ä¸ç¨³å®šæ€§ï¼‰",
    "text": "æ¢ç´¢æ€§å¯è§†åŒ–ï¼ˆè¶‹åŠ¿ä¸ç¨³å®šæ€§ï¼‰\nä½¿ç”¨å‡å€¼è½¨è¿¹å±•ç¤ºå˜é‡éšæ—¶é—´çš„æ•´ä½“å˜åŒ–ï¼š\n\nlibrary(ggplot2)\n\ntrend_data &lt;- data.frame(\n  time = rep(1:3, 2),\n  variable = rep(c(\"X\", \"Y\"), each = 3),\n  mean_value = c(\n    mean(panel_data$x1), mean(panel_data$x2), mean(panel_data$x3),\n    mean(panel_data$y1), mean(panel_data$y2), mean(panel_data$y3)\n  )\n)\n\nggplot(trend_data, aes(x = time, y = mean_value, color = variable)) +\n  geom_line(linewidth = 1.2) +\n  geom_point(size = 3) +\n  scale_x_continuous(breaks = 1:3, labels = c(\"T1\", \"T2\", \"T3\")) +\n  labs(\n    title = \"å˜é‡éšæ—¶é—´çš„å¹³å‡è½¨è¿¹\",\n    x = \"æ—¶é—´\",\n    y = \"å‡å€¼\",\n    color = \"å˜é‡\"\n  ) +\n  theme_minimal(base_size = 12)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "äº¤å‰æ»åé¢æ¿æ¨¡å‹ (CLPM)"
    ]
  },
  {
    "objectID": "1097-clpm.html#æ¨¡å‹è®¾å®šä¸-lavaan-è¯­æ³•",
    "href": "1097-clpm.html#æ¨¡å‹è®¾å®šä¸-lavaan-è¯­æ³•",
    "title": "äº¤å‰æ»åé¢æ¿æ¨¡å‹ï¼ˆCLPMï¼‰å®Œå…¨æ•™ç¨‹",
    "section": "æ¨¡å‹è®¾å®šä¸ lavaan è¯­æ³•",
    "text": "æ¨¡å‹è®¾å®šä¸ lavaan è¯­æ³•\nCLPM åœ¨ lavaan ä¸­é€šå¸¸ç”¨å­—ç¬¦ä¸²å®šä¹‰è·¯å¾„ï¼š\n\nclpm_model &lt;- \"\n  # è‡ªå›å½’è·¯å¾„\n  x2 ~ a1*x1\n  x3 ~ a2*x2\n  y2 ~ b1*y1\n  y3 ~ b2*y2\n\n  # äº¤å‰æ»åè·¯å¾„\n  x2 ~ c1*y1\n  x3 ~ c2*y2\n  y2 ~ d1*x1\n  y3 ~ d2*x2\n\n  # åŒæœŸç›¸å…³\n  x1 ~~ y1\n  x2 ~~ y2\n  x3 ~~ y3\n\"\n\n\nç­‰å€¼çº¦æŸï¼ˆå¯é€‰ï¼‰\nè‹¥è®¤ä¸ºæ—¶é—´é—´éš”ç›¸åŒä¸”æ•ˆåº”ç¨³å®šï¼Œå¯åŠ ä¸Šç­‰å€¼çº¦æŸï¼š\n\nclpm_model_equal &lt;- \"\n  x2 ~ a*x1\n  x3 ~ a*x2\n  y2 ~ b*y1\n  y3 ~ b*y2\n  x2 ~ c*y1\n  x3 ~ c*y2\n  y2 ~ d*x1\n  y3 ~ d*x2\n  x1 ~~ y1\n  x2 ~~ y2\n  x3 ~~ y3\n\"",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "äº¤å‰æ»åé¢æ¿æ¨¡å‹ (CLPM)"
    ]
  },
  {
    "objectID": "1097-clpm.html#æ¨¡å‹ä¼°è®¡ä¸ç»“æœè¾“å‡º",
    "href": "1097-clpm.html#æ¨¡å‹ä¼°è®¡ä¸ç»“æœè¾“å‡º",
    "title": "äº¤å‰æ»åé¢æ¿æ¨¡å‹ï¼ˆCLPMï¼‰å®Œå…¨æ•™ç¨‹",
    "section": "æ¨¡å‹ä¼°è®¡ä¸ç»“æœè¾“å‡º",
    "text": "æ¨¡å‹ä¼°è®¡ä¸ç»“æœè¾“å‡º\n\nif (!requireNamespace(\"lavaan\", quietly = TRUE)) {\n  message(\"è¯·å…ˆå®‰è£… lavaan åŒ…: install.packages('lavaan')\")\n} else {\n  fit &lt;- lavaan::sem(clpm_model, data = panel_data, meanstructure = TRUE)\n\n  summary(fit, standardized = TRUE, fit.measures = TRUE)\n}\n\nLength  Class   Mode \n     1 lavaan     S4 \n\n\n\nå…³é”®è¾“å‡ºè§£é‡Š\n\na1, a2, b1, b2ï¼šè‡ªå›å½’æ•ˆåº”ï¼Œè¶Šå¤§è¡¨ç¤ºç¨³å®šæ€§è¶Šå¼º\nc1, c2, d1, d2ï¼šäº¤å‰æ»åæ•ˆåº”ï¼Œåæ˜ å˜é‡é—´æ—¶é—´å½±å“æ–¹å‘\nCFI / TLI / RMSEA / SRMRï¼šæ¨¡å‹æ‹ŸåˆæŒ‡æ ‡",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "äº¤å‰æ»åé¢æ¿æ¨¡å‹ (CLPM)"
    ]
  },
  {
    "objectID": "1097-clpm.html#æŠ¥å‘Šä¸ç»“æœè§£è¯»ç¤ºä¾‹",
    "href": "1097-clpm.html#æŠ¥å‘Šä¸ç»“æœè§£è¯»ç¤ºä¾‹",
    "title": "äº¤å‰æ»åé¢æ¿æ¨¡å‹ï¼ˆCLPMï¼‰å®Œå…¨æ•™ç¨‹",
    "section": "æŠ¥å‘Šä¸ç»“æœè§£è¯»ç¤ºä¾‹",
    "text": "æŠ¥å‘Šä¸ç»“æœè§£è¯»ç¤ºä¾‹\nå¯ä»¥æŒ‰å¦‚ä¸‹æ ¼å¼æ±‡æŠ¥ï¼š\n\nåœ¨æ§åˆ¶è‡ªå›å½’æ•ˆåº”åï¼ŒX å¯¹ Y çš„äº¤å‰æ»åæ•ˆåº”æ˜¾è‘—ï¼ˆd1 = 0.21, p &lt; 0.05ï¼‰ï¼Œè€Œ Y å¯¹ X çš„æ•ˆåº”è¾ƒå¼±ï¼ˆc1 = 0.08, p = 0.12ï¼‰ã€‚æ¨¡å‹æ‹Ÿåˆè‰¯å¥½ï¼ˆCFI = 0.97, RMSEA = 0.04ï¼‰ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "äº¤å‰æ»åé¢æ¿æ¨¡å‹ (CLPM)"
    ]
  },
  {
    "objectID": "1097-clpm.html#æ¨¡å‹è¯Šæ–­ä¸ç¨³å¥æ€§",
    "href": "1097-clpm.html#æ¨¡å‹è¯Šæ–­ä¸ç¨³å¥æ€§",
    "title": "äº¤å‰æ»åé¢æ¿æ¨¡å‹ï¼ˆCLPMï¼‰å®Œå…¨æ•™ç¨‹",
    "section": "æ¨¡å‹è¯Šæ–­ä¸ç¨³å¥æ€§",
    "text": "æ¨¡å‹è¯Šæ–­ä¸ç¨³å¥æ€§\nå»ºè®®è‡³å°‘è¿›è¡Œä»¥ä¸‹è¯Šæ–­ï¼š\n\næ‹ŸåˆæŒ‡æ•°æ£€æŸ¥ï¼šCFI/TLI &gt; 0.90ï¼ŒRMSEA &lt; 0.08\nè·¯å¾„ç¨³å®šæ€§ï¼šæ¯”è¾ƒç­‰å€¼çº¦æŸæ¨¡å‹ä¸éçº¦æŸæ¨¡å‹\næ®‹å·®ç›¸å…³ï¼šæŸ¥çœ‹æ˜¯å¦å­˜åœ¨ç³»ç»Ÿæ€§è¯¯å·®\n\n\nif (requireNamespace(\"lavaan\", quietly = TRUE)) {\n  lavaan::fitMeasures(fit, c(\"cfi\", \"tli\", \"rmsea\", \"srmr\"))\n}\n\n  cfi   tli rmsea  srmr \n 1.00  1.01  0.00  0.01",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "äº¤å‰æ»åé¢æ¿æ¨¡å‹ (CLPM)"
    ]
  },
  {
    "objectID": "1097-clpm.html#å¸¸è§é”™è¯¯ä¸çº å",
    "href": "1097-clpm.html#å¸¸è§é”™è¯¯ä¸çº å",
    "title": "äº¤å‰æ»åé¢æ¿æ¨¡å‹ï¼ˆCLPMï¼‰å®Œå…¨æ•™ç¨‹",
    "section": "å¸¸è§é”™è¯¯ä¸çº å",
    "text": "å¸¸è§é”™è¯¯ä¸çº å\n\n1. è‡ªå›å½’æ•ˆåº”è¿‡å°\nå¯èƒ½æ„å‘³ç€å˜é‡æœ¬èº«ä¸ç¨³å®šï¼Œæˆ–æµ‹é‡è¯¯å·®è¾ƒå¤§ã€‚å»ºè®®æ£€æŸ¥é‡è¡¨å¯é æ€§æˆ–å¢åŠ æ³¢æ¬¡ã€‚\n\n\n2. äº¤å‰æ»åæ˜¾è‘—ä½†æ–¹å‘åå¸¸\néœ€è€ƒè™‘ï¼š - é—æ¼å˜é‡å¯¼è‡´çš„è™šå‡å…³ç³» - å˜é‡ç¼–ç æ–¹å‘æ˜¯å¦ä¸€è‡´ - æ ·æœ¬é‡ä¸è¶³å¯¼è‡´ä¸ç¨³å®š\n\n\n3. æ‹ŸåˆæŒ‡æ ‡è¾ƒå·®\nå¯å°è¯•ï¼š - å¢åŠ æ—¶é—´ç‚¹ - åŠ å…¥æµ‹é‡æ¨¡å‹ï¼ˆSEM æ¡†æ¶ï¼‰ - è€ƒè™‘ RI-CLPM",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "äº¤å‰æ»åé¢æ¿æ¨¡å‹ (CLPM)"
    ]
  },
  {
    "objectID": "1097-clpm.html#è¿›é˜¶æ‰©å±•",
    "href": "1097-clpm.html#è¿›é˜¶æ‰©å±•",
    "title": "äº¤å‰æ»åé¢æ¿æ¨¡å‹ï¼ˆCLPMï¼‰å®Œå…¨æ•™ç¨‹",
    "section": "è¿›é˜¶æ‰©å±•",
    "text": "è¿›é˜¶æ‰©å±•\n\nRI-CLPMï¼šæ§åˆ¶ä¸ªä½“ç¨³å®šå·®å¼‚ï¼Œé¿å…æŠŠä¸ªä½“å·®å¼‚è¯¯å½“ä½œäº¤å‰æ»åæ•ˆåº”\nå¤šç¾¤ç»„ CLPMï¼šæ¯”è¾ƒä¸åŒäººç¾¤è·¯å¾„å·®å¼‚\næ½œå˜é‡ CLPMï¼šåœ¨ SEM ä¸­å¼•å…¥æµ‹é‡æ¨¡å‹ï¼Œå¤„ç†æµ‹é‡è¯¯å·®",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "äº¤å‰æ»åé¢æ¿æ¨¡å‹ (CLPM)"
    ]
  },
  {
    "objectID": "1097-clpm.html#æ€»ç»“",
    "href": "1097-clpm.html#æ€»ç»“",
    "title": "äº¤å‰æ»åé¢æ¿æ¨¡å‹ï¼ˆCLPMï¼‰å®Œå…¨æ•™ç¨‹",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nCLPM æ˜¯çºµå‘ç ”ç©¶ä¸­åˆ¤æ–­å˜é‡å…ˆåå½±å“çš„æ ¸å¿ƒå·¥å…·ã€‚ä½¿ç”¨æ—¶éœ€é‡ç‚¹å…³æ³¨ï¼š\n\nè‡ªå›å½’æ•ˆåº”æ˜¯å¦è¶³å¤Ÿå¼º\näº¤å‰æ»åæ•ˆåº”æ˜¯å¦ç¨³å®šä¸”æœ‰ç†è®ºæ”¯æŒ\næ¨¡å‹æ‹Ÿåˆæ˜¯å¦åˆç†\n\n\nç›¸å…³æ•™ç¨‹\n\nç»“æ„æ–¹ç¨‹æ¨¡å‹ (SEM)\nå¤šæ°´å¹³æ¨¡å‹\nå¹¿ä¹‰ä¼°è®¡æ–¹ç¨‹ (GEE)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "äº¤å‰æ»åé¢æ¿æ¨¡å‹ (CLPM)"
    ]
  },
  {
    "objectID": "1098-gbtm.html",
    "href": "1098-gbtm.html",
    "title": "åŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹ (GBTM) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "åŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹ (Group-Based Trajectory Modeling, GBTM) ç”¨äºåœ¨çºµå‘æ•°æ®ä¸­è¯†åˆ«å…·æœ‰ç›¸ä¼¼å˜åŒ–è½¨è¿¹çš„æ½œåœ¨äººç¾¤äºšç»„ã€‚å®ƒå°†ä¸ªä½“çš„æ—¶é—´å˜åŒ–æ¨¡å¼çœ‹ä½œç”±è‹¥å¹²ä¸ªæ½œåœ¨ç¾¤ç»„ç”Ÿæˆï¼Œé€‚åˆå›ç­”â€œäººç¾¤ä¸­æ˜¯å¦å­˜åœ¨ä¸åŒçš„è¶‹åŠ¿æ¨¡å¼ï¼Ÿâ€â€œè¿™äº›æ¨¡å¼å¦‚ä½•ä¸ç»“å±€ç›¸å…³ï¼Ÿâ€ç­‰é—®é¢˜ã€‚\nGBTM åœ¨å…¬å…±å«ç”Ÿã€åŒ»å­¦éšè®¿ã€å¿ƒç†å‘å±•ã€æ•™è‚²å­¦ç­‰é¢†åŸŸå¸¸ç”¨äºè¯†åˆ«ä¸åŒçš„éšè®¿è·¯å¾„ï¼Œä¾‹å¦‚éšè®¿æœŸé—´è¡€å‹å˜åŒ–è½¨è¿¹ã€ç—‡çŠ¶ç¼“è§£è½¨è¿¹æˆ–è¡Œä¸ºæ¨¡å¼æ¼”å˜è½¨è¿¹ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "åŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹ (GBTM)"
    ]
  },
  {
    "objectID": "1098-gbtm.html#æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "href": "1098-gbtm.html#æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "title": "åŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹ (GBTM) å®Œå…¨æŒ‡å—",
    "section": "",
    "text": "åŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹ (Group-Based Trajectory Modeling, GBTM) ç”¨äºåœ¨çºµå‘æ•°æ®ä¸­è¯†åˆ«å…·æœ‰ç›¸ä¼¼å˜åŒ–è½¨è¿¹çš„æ½œåœ¨äººç¾¤äºšç»„ã€‚å®ƒå°†ä¸ªä½“çš„æ—¶é—´å˜åŒ–æ¨¡å¼çœ‹ä½œç”±è‹¥å¹²ä¸ªæ½œåœ¨ç¾¤ç»„ç”Ÿæˆï¼Œé€‚åˆå›ç­”â€œäººç¾¤ä¸­æ˜¯å¦å­˜åœ¨ä¸åŒçš„è¶‹åŠ¿æ¨¡å¼ï¼Ÿâ€â€œè¿™äº›æ¨¡å¼å¦‚ä½•ä¸ç»“å±€ç›¸å…³ï¼Ÿâ€ç­‰é—®é¢˜ã€‚\nGBTM åœ¨å…¬å…±å«ç”Ÿã€åŒ»å­¦éšè®¿ã€å¿ƒç†å‘å±•ã€æ•™è‚²å­¦ç­‰é¢†åŸŸå¸¸ç”¨äºè¯†åˆ«ä¸åŒçš„éšè®¿è·¯å¾„ï¼Œä¾‹å¦‚éšè®¿æœŸé—´è¡€å‹å˜åŒ–è½¨è¿¹ã€ç—‡çŠ¶ç¼“è§£è½¨è¿¹æˆ–è¡Œä¸ºæ¨¡å¼æ¼”å˜è½¨è¿¹ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "åŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹ (GBTM)"
    ]
  },
  {
    "objectID": "1098-gbtm.html#æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "href": "1098-gbtm.html#æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "title": "åŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹ (GBTM) å®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ",
    "text": "æ¨¡å‹å…¥é—¨ä¸æ ¸å¿ƒæ¦‚å¿µ\nGBTM å¯ä»¥ç†è§£ä¸ºâ€œçºµå‘æ•°æ®ä¸Šçš„æ½œç±»åˆ«æ¨¡å‹â€ï¼Œæ ¸å¿ƒè¦ç‚¹åŒ…æ‹¬ï¼š\n\nè½¨è¿¹ç¾¤ç»„ï¼šæ¯ä¸ªç¾¤ç»„å¯¹åº”ä¸€æ¡å¹³å‡è½¨è¿¹æ›²çº¿ã€‚\nç±»åˆ«æ¦‚ç‡ï¼šæ¯ä¸ªå—è¯•è€…å±äºä¸åŒç¾¤ç»„çš„åéªŒæ¦‚ç‡ã€‚\nè½¨è¿¹å½¢çŠ¶ï¼šçº¿æ€§ã€äºŒæ¬¡ã€ä¸‰æ¬¡ç­‰å¤šé¡¹å¼å½¢å¼ã€‚\næ¨¡å‹é€‰æ‹©ï¼šé€šè¿‡ BICã€AICã€ç†µã€ç»„å†…æ¯”ä¾‹å’Œå¯è§£é‡Šæ€§å…±åŒåˆ¤æ–­ã€‚\n\nä¸ä¼ ç»Ÿçš„æ··åˆæ•ˆåº”æ¨¡å‹ç›¸æ¯”ï¼ŒGBTM é‡ç‚¹åœ¨äºå‘ç°ç¦»æ•£çš„è½¨è¿¹äºšç¾¤è€Œä¸æ˜¯å•ä¸€å¹³å‡è¶‹åŠ¿ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "åŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹ (GBTM)"
    ]
  },
  {
    "objectID": "1098-gbtm.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "href": "1098-gbtm.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "title": "åŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹ (GBTM) å®Œå…¨æŒ‡å—",
    "section": "æ¨¡å‹å‡è®¾ä¸å‰æ",
    "text": "æ¨¡å‹å‡è®¾ä¸å‰æ\nGBTM çš„å…³é”®å‡è®¾åŒ…æ‹¬ï¼š\n\nå—è¯•è€…å±äºæœ‰é™ä¸ªæ½œåœ¨è½¨è¿¹ç¾¤ç»„ä¹‹ä¸€ã€‚\næ¯ä¸ªç¾¤ç»„å†…éƒ¨è½¨è¿¹å…·æœ‰ç›¸åŒçš„å‡½æ•°å½¢å¼ï¼ˆå¦‚çº¿æ€§æˆ–äºŒæ¬¡ï¼‰ã€‚\nè§‚æµ‹è¯¯å·®åœ¨ç¾¤ç»„å†…ç‹¬ç«‹ä¸”ç¬¦åˆæ¨¡å‹æŒ‡å®šåˆ†å¸ƒï¼ˆå¦‚é«˜æ–¯ï¼‰ã€‚\nç»„å†…ä¸ªä½“å·®å¼‚å¯é€šè¿‡éšæœºæ•ˆåº”æˆ–è¯¯å·®é¡¹åˆ»ç”»ã€‚\n\nåœ¨å®è·µä¸­éœ€è¦æ£€æŸ¥ï¼š\n\nè½¨è¿¹é˜¶æ•°æ˜¯å¦åˆç†ï¼ˆçº¿æ€§/äºŒæ¬¡/ä¸‰æ¬¡ï¼‰ã€‚\nç¾¤ç»„æ•°é‡æ˜¯å¦è¿‡å¤šå¯¼è‡´å°ç¾¤ç»„æ ·æœ¬è¿‡å°‘ã€‚\næ¨¡å‹æ˜¯å¦æ”¶æ•›ä¸å¯è§£é‡Šã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "åŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹ (GBTM)"
    ]
  },
  {
    "objectID": "1098-gbtm.html#æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "href": "1098-gbtm.html#æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "title": "åŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹ (GBTM) å®Œå…¨æŒ‡å—",
    "section": "æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "text": "æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰\nGBTM çš„æ•°æ®é€šå¸¸æ˜¯é•¿æ ¼å¼ (long format)ï¼š\n\nidï¼šä¸ªä½“ç¼–å·ã€‚\ntimeï¼šæ—¶é—´å˜é‡ï¼ˆéšè®¿æ¬¡æ•°æˆ–æ—¶é—´ç‚¹ï¼‰ã€‚\nyï¼šè¿ç»­å‹ç»“å±€ï¼ˆå¦‚è¯„åˆ†ã€æŒ‡æ ‡ï¼‰ã€‚\n\nåœ¨ç¤ºä¾‹ä¸­ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®æ„å»º 3 ä¸ªæ½œåœ¨è½¨è¿¹ç¾¤ç»„ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "åŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹ (GBTM)"
    ]
  },
  {
    "objectID": "1098-gbtm.html#åˆ†ææµç¨‹æ­¥éª¤",
    "href": "1098-gbtm.html#åˆ†ææµç¨‹æ­¥éª¤",
    "title": "åŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹ (GBTM) å®Œå…¨æŒ‡å—",
    "section": "åˆ†ææµç¨‹æ­¥éª¤",
    "text": "åˆ†ææµç¨‹æ­¥éª¤\nä¸‹é¢æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„ GBTM åˆ†ææµç¨‹ï¼š\n\næ¢ç´¢æ€§æ£€æŸ¥ï¼šæŸ¥çœ‹æ¯ä¸ªä¸ªä½“çš„è¶‹åŠ¿æ›²çº¿ä¸æ€»ä½“åˆ†å¸ƒã€‚\næ‹Ÿåˆå•ç¾¤ç»„æ¨¡å‹ (ng = 1) ä½œä¸ºåŸºçº¿ã€‚\né€æ­¥å¢åŠ ç¾¤ç»„æ•°é‡å¹¶æ¯”è¾ƒ BIC/AICã€‚\nè¯„ä¼°ç¾¤ç»„è§„æ¨¡ä¸ç†µå€¼ï¼Œç¡®ä¿åˆ†ç±»æ¸…æ™°ã€‚\nè¾“å‡ºåéªŒæ¦‚ç‡ä¸ç¾¤ç»„åˆ†é…ã€‚\nå¯è§†åŒ–ç¾¤ç»„è½¨è¿¹å¹¶è¿›è¡Œå‘½åè§£é‡Šã€‚\n\n\næ–¹æ³•é€‰æ‹©å†³ç­–è¡¨\n\n\n\nåˆ¤æ–­ç»´åº¦\næ¨èæ ‡å‡†\nè§£é‡Š\n\n\n\n\nBIC\nè¶Šå°è¶Šå¥½\nå¯¹æ¨¡å‹å¤æ‚åº¦æƒ©ç½šæ›´å¼º\n\n\nAIC\nè¶Šå°è¶Šå¥½\nå€¾å‘é€‰æ‹©æ›´å¤æ‚æ¨¡å‹\n\n\nç†µ\n&gt; 0.7\nåˆ†ç±»æ¸…æ™°åº¦\n\n\næœ€å°ç¾¤ç»„æ¯”ä¾‹\n&gt; 5%\né¿å…è¿‡å°ç¾¤ç»„\n\n\nè§£é‡Šæ€§\nå¯è§£é‡Š\nä¸å­¦ç§‘çŸ¥è¯†ä¸€è‡´",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "åŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹ (GBTM)"
    ]
  },
  {
    "objectID": "1098-gbtm.html#ä»£ç å®ç°",
    "href": "1098-gbtm.html#ä»£ç å®ç°",
    "title": "åŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹ (GBTM) å®Œå…¨æŒ‡å—",
    "section": "ä»£ç å®ç°",
    "text": "ä»£ç å®ç°\n\n1. å‡†å¤‡æ¨¡æ‹Ÿæ•°æ®\n\nset.seed(42)\n\nn_id &lt;- 300\ntime_points &lt;- 0:5\n\n# ä¸‰ä¸ªæ½œåœ¨ç¾¤ç»„\nclass_prob &lt;- c(0.4, 0.35, 0.25)\nclass_id &lt;- sample(1:3, size = n_id, replace = TRUE, prob = class_prob)\n\nsim_data &lt;- expand.grid(\n  id = 1:n_id,\n  time = time_points\n)\n\nsim_data$class &lt;- class_id[sim_data$id]\n\n# è®¾å®šä¸åŒè½¨è¿¹\nsim_data$y &lt;- dplyr::case_when(\n  sim_data$class == 1 ~ 5 + 0.6 * sim_data$time + rnorm(nrow(sim_data), 0, 0.8),\n  sim_data$class == 2 ~ 8 - 0.4 * sim_data$time + rnorm(nrow(sim_data), 0, 0.8),\n  sim_data$class == 3 ~ 3 + 1.2 * sim_data$time - 0.15 * sim_data$time^2 + rnorm(nrow(sim_data), 0, 0.8)\n)\n\nhead(sim_data)\n\n  id time class        y\n1  1    0     3 3.608448\n2  2    0     3 2.862539\n3  3    0     1 5.933736\n4  4    0     3 2.660803\n5  5    0     2 8.642262\n6  6    0     2 6.637534\n\n\n\n\n2. åˆæ­¥å¯è§†åŒ–\n\nlibrary(ggplot2)\n\nsample_ids &lt;- sample(unique(sim_data$id), 40)\nplot_data &lt;- sim_data[sim_data$id %in% sample_ids, ]\n\nggplot(plot_data, aes(x = time, y = y, group = id)) +\n  geom_line(alpha = 0.4, color = \"#2563eb\") +\n  geom_point(alpha = 0.4, color = \"#1d4ed8\") +\n  labs(\n    title = \"ä¸ªä½“çºµå‘è½¨è¿¹ç¤ºä¾‹\",\n    x = \"æ—¶é—´\",\n    y = \"ç»“å±€å˜é‡\"\n  ) +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\n\n3. æ‹Ÿåˆ GBTM æ¨¡å‹\nè¿™é‡Œä½¿ç”¨ lcmm åŒ…ä¸­çš„ hlme() æ‹Ÿåˆ GBTMã€‚\n\ninstall.packages(\"lcmm\")\n\n\nlibrary(lcmm)\n\n# åŸºçº¿æ¨¡å‹ï¼šå•ç¾¤ç»„\nmodel_1 &lt;- hlme(\n  fixed = y ~ time,\n  random = ~ time,\n  subject = \"id\",\n  ng = 1,\n  data = sim_data\n)\n\n# ä¸‰ç¾¤ç»„æ¨¡å‹ï¼šä½¿ç”¨ gridsearch è‡ªåŠ¨æœç´¢æœ€ä½³åˆå€¼\n# gridsearch ä» model_1 ç”Ÿæˆå¤šç»„éšæœºåˆå€¼ï¼Œé€‰æ‹©æ”¶æ•›æœ€ä¼˜çš„ä¸€ç»„\nmodel_3 &lt;- gridsearch(\n  m = hlme(\n    fixed = y ~ time,\n    mixture = ~ time,\n    random = ~ time,\n    subject = \"id\",\n    ng = 3,\n    nwg = TRUE,\n    data = sim_data\n  ),\n  rep = 30,\n  maxiter = 15,\n  minit = model_1\n)\n\nsummary(model_3)\n\nHeterogenous linear mixed model \n     fitted by maximum likelihood method \n \nhlme(fixed = y ~ time, mixture = ~time, random = ~time, subject = \"id\", \n    ng = 3, nwg = TRUE, data = sim_data)\n \nStatistical Model: \n     Dataset: sim_data \n     Number of subjects: 300 \n     Number of observations: 1800 \n     Number of latent classes: 3 \n     Number of parameters: 14  \n \nIteration process: \n     Convergence criteria satisfied \n     Number of iterations:  7 \n     Convergence criteria: parameters= 3.3e-08 \n                         : likelihood= 3.6e-05 \n                         : second derivatives= 5.7e-06 \n \nGoodness-of-fit statistics: \n     maximum log-likelihood: -2519.95  \n     AIC: 5067.89  \n     BIC: 5119.75  \n \n \nMaximum Likelihood Estimates: \n \nFixed effects in the class-membership model:\n(the class of reference is the last class) \n\n                     coef      Se    Wald p-value\nintercept class1 -0.35723 0.15342  -2.329 0.01988\nintercept class2  0.17394 0.13410   1.297 0.19460\n\nFixed effects in the longitudinal model:\n\n                     coef      Se    Wald p-value\nintercept class1  3.51462 0.07075  49.675 0.00000\nintercept class2  4.94773 0.05419  91.310 0.00000\nintercept class3  7.96914 0.06058 131.546 0.00000\ntime class1       0.44919 0.02492  18.029 0.00000\ntime class2       0.61686 0.01787  34.516 0.00000\ntime class3      -0.38662 0.02144 -18.031 0.00000\n\n\nVariance-covariance matrix of the random-effects:\n          intercept    time\nintercept   0.01954        \ntime       -0.01284 0.00844\n\n                                    coef      Se\nProportional coefficient class1  0.93115 0.48944\nProportional coefficient class2  0.00460 0.39371\nResidual standard error:         0.81185 0.01433\n\n\n\n\n4. æ¨¡å‹æ¯”è¾ƒ\n\nmodel_compare &lt;- data.frame(\n  model = c(\"ng=1\", \"ng=3\"),\n  AIC = c(model_1$AIC, model_3$AIC),\n  BIC = c(model_1$BIC, model_3$BIC),\n  logLik = c(model_1$loglik, model_3$loglik)\n)\n\nmodel_compare\n\n  model      AIC      BIC    logLik\n1  ng=1 5571.185 5593.408 -2779.592\n2  ng=3 5067.894 5119.747 -2519.947\n\n\n\n\n5. åéªŒæ¦‚ç‡ä¸åˆ†ç±»è´¨é‡\n\npost_prob &lt;- model_3$pprob\nhead(post_prob)\n\n  id class        prob1        prob2        prob3\n1  1     1 1.000000e+00 6.842662e-15 3.362031e-18\n2  2     1 9.999999e-01 7.816252e-08 5.277158e-15\n3  3     2 8.169684e-09 9.998937e-01 1.062498e-04\n4  4     1 9.999989e-01 1.110646e-06 1.910193e-15\n5  5     3 5.627251e-15 4.612477e-08 1.000000e+00\n6  6     3 8.512709e-10 9.688579e-07 9.999990e-01\n\n# è®¡ç®—ç†µ\nposterior_matrix &lt;- as.matrix(post_prob[, grep(\"prob\", names(post_prob))])\nentropy &lt;- -rowSums(posterior_matrix * log(posterior_matrix + 1e-12))\nrelative_entropy &lt;- 1 - mean(entropy) / log(ncol(posterior_matrix))\nrelative_entropy\n\n[1] 0.9890365\n\n\n\n\n6. è½¨è¿¹å¯è§†åŒ–\n\npred_time &lt;- data.frame(time = seq(min(sim_data$time), max(sim_data$time), length.out = 50))\npred &lt;- predictY(model_3, newdata = pred_time, var.time = \"time\", draws = FALSE)\n\npred_df &lt;- data.frame(\n  time = rep(pred_time$time, model_3$ng),\n  y = as.vector(pred$pred),\n  class = factor(rep(1:model_3$ng, each = nrow(pred_time)))\n)\n\nggplot(pred_df, aes(x = time, y = y, color = class)) +\n  geom_line(size = 1.1) +\n  labs(\n    title = \"GBTM ä¼°è®¡è½¨è¿¹\",\n    x = \"æ—¶é—´\",\n    y = \"ç»“å±€å˜é‡\",\n    color = \"è½¨è¿¹ç»„\"\n  ) +\n  theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "åŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹ (GBTM)"
    ]
  },
  {
    "objectID": "1098-gbtm.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "href": "1098-gbtm.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "title": "åŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹ (GBTM) å®Œå…¨æŒ‡å—",
    "section": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "text": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š\næŠ¥å‘Šæ—¶éœ€æ˜ç¡®ï¼š\n\nç¾¤ç»„æ•°é‡ä¸é€‰æ‹©ç†ç”±ï¼ˆBICã€ç†µã€æ¯”ä¾‹ï¼‰ã€‚\nå„ç¾¤ç»„è½¨è¿¹å½¢æ€ï¼ˆä¸Šå‡ã€ä¸‹é™ã€å€’ Uï¼‰ã€‚\nç¾¤ç»„æ¯”ä¾‹ä¸åéªŒæ¦‚ç‡å‡å€¼ã€‚\n\nç¤ºä¾‹è¡¨è¿°ï¼š\n\nè¯†åˆ«å‡º 3 ä¸ªè½¨è¿¹ç¾¤ç»„ï¼šä¸Šå‡å‹ (40%)ã€ä¸‹é™å‹ (35%) ä¸å€’ U å‹ (25%)ã€‚BIC æœ€å°ä¸”ç›¸å¯¹ç†µä¸º 0.78ï¼Œè¯´æ˜åˆ†ç±»è´¨é‡è‰¯å¥½ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "åŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹ (GBTM)"
    ]
  },
  {
    "objectID": "1098-gbtm.html#å¸¸è§é”™è¯¯ä¸çº å",
    "href": "1098-gbtm.html#å¸¸è§é”™è¯¯ä¸çº å",
    "title": "åŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹ (GBTM) å®Œå…¨æŒ‡å—",
    "section": "å¸¸è§é”™è¯¯ä¸çº å",
    "text": "å¸¸è§é”™è¯¯ä¸çº å\n\n\n\né—®é¢˜\nå¯èƒ½åŸå› \nå¤„ç†å»ºè®®\n\n\n\n\næ¨¡å‹ä¸æ”¶æ•›\nåˆå€¼ä¸ä½³ã€é˜¶æ•°è¿‡é«˜\né™ä½é˜¶æ•°æˆ–è°ƒæ•´ B åˆå€¼\n\n\nç¾¤ç»„è¿‡å°\nè¿‡åº¦åˆ’åˆ†\nå‡å°‘ç¾¤ç»„æ•°é‡\n\n\nè½¨è¿¹ä¸åˆç†\né˜¶æ•°é€‰æ‹©é”™è¯¯\nå°è¯•çº¿æ€§ä¸äºŒæ¬¡æ¨¡å‹æ¯”è¾ƒ\n\n\nç†µå€¼è¿‡ä½\nç¾¤ç»„åŒºåˆ†åº¦å·®\nå¢åŠ æˆ–å‡å°‘ç¾¤ç»„æ•°ï¼Œé‡æ–°å»ºæ¨¡",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "åŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹ (GBTM)"
    ]
  },
  {
    "objectID": "1098-gbtm.html#è¿›é˜¶æ‰©å±•",
    "href": "1098-gbtm.html#è¿›é˜¶æ‰©å±•",
    "title": "åŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹ (GBTM) å®Œå…¨æŒ‡å—",
    "section": "è¿›é˜¶æ‰©å±•",
    "text": "è¿›é˜¶æ‰©å±•\n\nå¼•å…¥åå˜é‡é¢„æµ‹ç¾¤ç»„å½’å±ï¼šä½¿ç”¨ classmb å‚æ•°ã€‚\nè¿ç»­ç»“å±€ä»¥å¤–çš„æ¨¡å‹ï¼šlcmm æ”¯æŒäºŒé¡¹ã€è®¡æ•°å‹ç»“å±€æ‰©å±•ã€‚\nå¯¹æ¯”å¢é•¿æ··åˆæ¨¡å‹ (GMM)ï¼šå…è®¸æ›´ä¸°å¯Œçš„éšæœºæ•ˆåº”ç»“æ„ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "åŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹ (GBTM)"
    ]
  },
  {
    "objectID": "1098-gbtm.html#å‚è€ƒæ–‡çŒ®",
    "href": "1098-gbtm.html#å‚è€ƒæ–‡çŒ®",
    "title": "åŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹ (GBTM) å®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒæ–‡çŒ®",
    "text": "å‚è€ƒæ–‡çŒ®\n\nNagin, D. S. (2005). Group-Based Modeling of Development. Harvard University Press.\nProust-Lima, C., et al.Â (2017). Joint latent class mixed models. Statistical Methods in Medical Research, 26(1), 74-89.\nlcmm package documentation: https://cran.r-project.org/package=lcmm",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ“ é«˜çº§å»ºæ¨¡",
      "åŸºäºç¾¤ç»„çš„è½¨è¿¹æ¨¡å‹ (GBTM)"
    ]
  },
  {
    "objectID": "1099-nested-cv.html",
    "href": "1099-nested-cv.html",
    "title": "åµŒå¥—äº¤å‰éªŒè¯å®Œæ•´æ•™ç¨‹",
    "section": "",
    "text": "library(mlr3verse)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(tidyr)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "åµŒå¥—äº¤å‰éªŒè¯"
    ]
  },
  {
    "objectID": "1099-nested-cv.html#æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "href": "1099-nested-cv.html#æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "title": "åµŒå¥—äº¤å‰éªŒè¯å®Œæ•´æ•™ç¨‹",
    "section": "æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "text": "æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯\nåµŒå¥—äº¤å‰éªŒè¯ï¼ˆNested Cross-Validationï¼‰æ˜¯ä¸€ç§ç”¨äºåŒæ—¶å®Œæˆè¶…å‚æ•°è°ƒä¼˜ä¸æ¨¡å‹æ€§èƒ½è¯„ä¼°çš„æ— åæ–¹æ³•ã€‚åœ¨æœºå™¨å­¦ä¹ å®è·µä¸­ï¼Œå¦‚æœç”¨åŒä¸€ä»½æ•°æ®æ—¢è°ƒå‚åˆè¯„ä¼°ï¼Œä¼šå¯¼è‡´æ€§èƒ½ä¼°è®¡åé«˜ï¼Œè¿™æ­£æ˜¯åµŒå¥—äº¤å‰éªŒè¯è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜ã€‚\næœ¬æ•™ç¨‹å°†ç³»ç»Ÿè®²è§£åµŒå¥—äº¤å‰éªŒè¯çš„åŸç†ã€ä¸ºä»€ä¹ˆéœ€è¦å®ƒã€å¦‚ä½•ç”¨ mlr3 æ¡†æ¶å®ç°å®Œæ•´æµç¨‹ï¼Œä»¥åŠå¦‚ä½•æ­£ç¡®è§£è¯»è¾“å‡ºç»“æœã€‚\né€‚åˆåœºæ™¯\n\néœ€è¦åŒæ—¶è¿›è¡Œè¶…å‚æ•°è°ƒä¼˜å’Œæ— åæ€§èƒ½è¯„ä¼°\næ•°æ®é‡æœ‰é™ï¼Œæ— æ³•é¢„ç•™ç‹¬ç«‹æµ‹è¯•é›†\nå¸Œæœ›è·å¾—æ³›åŒ–è¯¯å·®çš„å¯é ä¼°è®¡\næ¨¡å‹é€‰æ‹©ä¸æ€§èƒ½æŠ¥å‘Šéœ€è¦ä¸¥è°¨åˆ†ç¦»\n\nä¸é€‚åˆåœºæ™¯\n\næ•°æ®é‡æå¤§ï¼Œå¯ä»¥é¢„ç•™ç‹¬ç«‹æµ‹è¯•é›†\nè®¡ç®—èµ„æºéå¸¸æœ‰é™ï¼Œæ— æ³•æ‰¿æ‹…åŒå±‚å¾ªç¯å¼€é”€\nåªéœ€è¦å¿«é€Ÿæ¢ç´¢ï¼Œä¸è¦æ±‚ä¸¥è°¨çš„æ€§èƒ½ä¼°è®¡",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "åµŒå¥—äº¤å‰éªŒè¯"
    ]
  },
  {
    "objectID": "1099-nested-cv.html#ä¸ºä»€ä¹ˆéœ€è¦åµŒå¥—äº¤å‰éªŒè¯",
    "href": "1099-nested-cv.html#ä¸ºä»€ä¹ˆéœ€è¦åµŒå¥—äº¤å‰éªŒè¯",
    "title": "åµŒå¥—äº¤å‰éªŒè¯å®Œæ•´æ•™ç¨‹",
    "section": "ä¸ºä»€ä¹ˆéœ€è¦åµŒå¥—äº¤å‰éªŒè¯",
    "text": "ä¸ºä»€ä¹ˆéœ€è¦åµŒå¥—äº¤å‰éªŒè¯\n\næ™®é€šäº¤å‰éªŒè¯çš„é—®é¢˜\nåœ¨ä¼ ç»Ÿçš„æœºå™¨å­¦ä¹ æµç¨‹ä¸­ï¼Œç ”ç©¶è€…å¸¸å¸¸ä½¿ç”¨ K æŠ˜äº¤å‰éªŒè¯æ¥è°ƒä¼˜è¶…å‚æ•°ï¼Œç„¶åç›´æ¥æŠ¥å‘Šäº¤å‰éªŒè¯çš„å¹³å‡æ€§èƒ½ä½œä¸ºæ¨¡å‹æ³›åŒ–èƒ½åŠ›çš„ä¼°è®¡ã€‚è¿™ç§åšæ³•å­˜åœ¨ä¸€ä¸ªæ ¹æœ¬æ€§é—®é¢˜ï¼šç”¨äºé€‰æ‹©æœ€ä¼˜è¶…å‚æ•°çš„æ•°æ®åŒæ—¶ä¹Ÿè¢«ç”¨äºè¯„ä¼°æ€§èƒ½ï¼Œå¯¼è‡´æ€§èƒ½ä¼°è®¡å­˜åœ¨ä¹è§‚åå·®ï¼ˆoptimistic biasï¼‰ã€‚\nå…·ä½“è€Œè¨€ï¼Œå‡è®¾ä½¿ç”¨ 5 æŠ˜äº¤å‰éªŒè¯é€‰æ‹©è¶…å‚æ•°ï¼Œæ¯ä¸€æŠ˜çš„éªŒè¯é›†éƒ½å‚ä¸äº†â€é€‰æ‹©å“ªç»„è¶…å‚æ•°æœ€å¥½â€è¿™ä¸€å†³ç­–ã€‚ç”±äºè¶…å‚æ•°æ˜¯æ ¹æ®è¿™äº›éªŒè¯é›†çš„è¡¨ç°æ¥é€‰æ‹©çš„ï¼Œæœ€ç»ˆæŠ¥å‘Šçš„äº¤å‰éªŒè¯åˆ†æ•°ä¼šé«˜ä¼°æ¨¡å‹åœ¨çœŸæ­£æœªè§æ•°æ®ä¸Šçš„è¡¨ç°ã€‚è¿™ç§ç°è±¡ç§°ä¸ºâ€ä¿¡æ¯æ³„éœ²â€æˆ–â€é€‰æ‹©åå·®â€ã€‚\n\n\nåµŒå¥—äº¤å‰éªŒè¯çš„è§£å†³æ–¹æ¡ˆ\nåµŒå¥—äº¤å‰éªŒè¯é€šè¿‡å¼•å…¥åŒå±‚å¾ªç¯ç»“æ„æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š\n\nå¤–å±‚å¾ªç¯ï¼ˆOuter Loopï¼‰ï¼šè´Ÿè´£æ— åçš„æ€§èƒ½è¯„ä¼°ã€‚å°†æ•°æ®åˆ’åˆ†ä¸º K ä¸ªå¤–å±‚æŠ˜å ï¼Œæ¯æ¬¡ç”¨ K-1 ä¸ªæŠ˜å è¿›è¡Œå®Œæ•´çš„æ¨¡å‹è®­ç»ƒï¼ˆåŒ…æ‹¬è°ƒå‚ï¼‰ï¼Œç”¨å‰©ä½™ 1 ä¸ªæŠ˜å è¯„ä¼°æ€§èƒ½ã€‚\nå†…å±‚å¾ªç¯ï¼ˆInner Loopï¼‰ï¼šè´Ÿè´£è¶…å‚æ•°è°ƒä¼˜ã€‚åœ¨å¤–å±‚çš„è®­ç»ƒé›†ä¸Šå†åšä¸€æ¬¡ K æŠ˜äº¤å‰éªŒè¯ï¼Œæ‰¾åˆ°æœ€ä¼˜è¶…å‚æ•°ã€‚\n\nè¿™æ ·ï¼Œå¤–å±‚æ¯ä¸€æŠ˜çš„æµ‹è¯•é›†ä»æœªå‚ä¸è¿‡ä»»ä½•è¶…å‚æ•°é€‰æ‹©å†³ç­–ï¼Œå› æ­¤å¤–å±‚ K æ¬¡è¯„ä¼°çš„å¹³å‡å€¼æ˜¯æ³›åŒ–æ€§èƒ½çš„æ— åä¼°è®¡ã€‚\n\n\næ•°å­¦ç›´è§‰\nè®¾ \\(D\\) ä¸ºå®Œæ•´æ•°æ®é›†ï¼Œ\\(D_{train}^{(k)}\\) å’Œ \\(D_{test}^{(k)}\\) åˆ†åˆ«ä¸ºå¤–å±‚ç¬¬ \\(k\\) æŠ˜çš„è®­ç»ƒé›†å’Œæµ‹è¯•é›†ã€‚å¯¹äºæ¯ä¸ªå¤–å±‚æŠ˜å  \\(k\\)ï¼š\n\nåœ¨ \\(D_{train}^{(k)}\\) ä¸Šé€šè¿‡å†…å±‚äº¤å‰éªŒè¯é€‰æ‹©æœ€ä¼˜è¶…å‚æ•° \\(\\lambda^*_k\\)\nç”¨ \\(\\lambda^*_k\\) åœ¨å®Œæ•´çš„ \\(D_{train}^{(k)}\\) ä¸Šè®­ç»ƒæœ€ç»ˆæ¨¡å‹\nåœ¨ \\(D_{test}^{(k)}\\) ä¸Šè¯„ä¼°è¯¥æ¨¡å‹\n\nå¤–å±‚çš„å¹³å‡æ€§èƒ½ \\(\\frac{1}{K}\\sum_{k=1}^K \\text{Performance}(D_{test}^{(k)})\\) æ˜¯æ³›åŒ–è¯¯å·®çš„æ— åä¼°è®¡ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "åµŒå¥—äº¤å‰éªŒè¯"
    ]
  },
  {
    "objectID": "1099-nested-cv.html#åµŒå¥—äº¤å‰éªŒè¯çš„æµç¨‹å›¾è§£",
    "href": "1099-nested-cv.html#åµŒå¥—äº¤å‰éªŒè¯çš„æµç¨‹å›¾è§£",
    "title": "åµŒå¥—äº¤å‰éªŒè¯å®Œæ•´æ•™ç¨‹",
    "section": "åµŒå¥—äº¤å‰éªŒè¯çš„æµç¨‹å›¾è§£",
    "text": "åµŒå¥—äº¤å‰éªŒè¯çš„æµç¨‹å›¾è§£\nä¸‹å›¾å±•ç¤ºäº† 5Ã—5 åµŒå¥—äº¤å‰éªŒè¯çš„ç»“æ„ï¼ˆå¤–å±‚ 5 æŠ˜ï¼Œå†…å±‚ 5 æŠ˜ï¼‰ï¼š\nå¤–å±‚ç¬¬1æŠ˜ï¼š\n  è®­ç»ƒé›†(æŠ˜2-5) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n     â””â”€â”€ å†…å±‚5æŠ˜CVé€‰æ‹©è¶…å‚æ•°                    â”‚\n     â””â”€â”€ ç”¨æœ€ä¼˜è¶…å‚æ•°åœ¨è®­ç»ƒé›†ä¸Šé‡æ–°è®­ç»ƒ         â”‚\n  æµ‹è¯•é›†(æŠ˜1) â”€â”€â”€â”€ è¯„ä¼°æ€§èƒ½ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n  \nå¤–å±‚ç¬¬2æŠ˜ï¼š\n  è®­ç»ƒé›†(æŠ˜1,3-5) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n     â””â”€â”€ å†…å±‚5æŠ˜CVé€‰æ‹©è¶…å‚æ•°                    â”‚\n     â””â”€â”€ ç”¨æœ€ä¼˜è¶…å‚æ•°åœ¨è®­ç»ƒé›†ä¸Šé‡æ–°è®­ç»ƒ         â”‚\n  æµ‹è¯•é›†(æŠ˜2) â”€â”€â”€â”€ è¯„ä¼°æ€§èƒ½ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n  \n... é‡å¤5æ¬¡ ...\n\næœ€ç»ˆæŠ¥å‘Šï¼š5æ¬¡å¤–å±‚è¯„ä¼°çš„å¹³å‡æ€§èƒ½",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "åµŒå¥—äº¤å‰éªŒè¯"
    ]
  },
  {
    "objectID": "1099-nested-cv.html#mlr3-æ¡†æ¶ç®€ä»‹",
    "href": "1099-nested-cv.html#mlr3-æ¡†æ¶ç®€ä»‹",
    "title": "åµŒå¥—äº¤å‰éªŒè¯å®Œæ•´æ•™ç¨‹",
    "section": "mlr3 æ¡†æ¶ç®€ä»‹",
    "text": "mlr3 æ¡†æ¶ç®€ä»‹\nmlr3 æ˜¯ R è¯­è¨€ä¸­ç°ä»£åŒ–çš„æœºå™¨å­¦ä¹ æ¡†æ¶ï¼Œé‡‡ç”¨ R6 é¢å‘å¯¹è±¡è®¾è®¡ã€‚å®ƒå°†æœºå™¨å­¦ä¹ æµç¨‹åˆ†è§£ä¸ºç‹¬ç«‹çš„æ¨¡å—ï¼šTaskï¼ˆä»»åŠ¡ï¼‰ã€Learnerï¼ˆå­¦ä¹ å™¨ï¼‰ã€Resamplingï¼ˆé‡é‡‡æ ·ï¼‰ã€Measureï¼ˆè¯„ä¼°æŒ‡æ ‡ï¼‰å’Œ Tunerï¼ˆè°ƒå‚å™¨ï¼‰ã€‚è¿™ç§æ¨¡å—åŒ–è®¾è®¡ä½¿å¾—å®ç°åµŒå¥—äº¤å‰éªŒè¯å˜å¾—ç›´è§‚ä¸”çµæ´»ã€‚\nåœ¨ mlr3 ä¸­ï¼ŒåµŒå¥—äº¤å‰éªŒè¯çš„å®ç°ä¾èµ–äº AutoTuner ç±»ï¼Œå®ƒå°†è¶…å‚æ•°è°ƒä¼˜å°è£…ä¸ºä¸€ä¸ªå¯ä»¥åƒæ™®é€šå­¦ä¹ å™¨ä¸€æ ·ä½¿ç”¨çš„å¯¹è±¡ã€‚å¤–å±‚é‡é‡‡æ ·åªéœ€å¯¹è¿™ä¸ª AutoTuner å¯¹è±¡è¿›è¡Œè¯„ä¼°ï¼Œå†…å±‚è°ƒå‚è¿‡ç¨‹è¢«è‡ªåŠ¨å¤„ç†ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "åµŒå¥—äº¤å‰éªŒè¯"
    ]
  },
  {
    "objectID": "1099-nested-cv.html#æ•°æ®å‡†å¤‡",
    "href": "1099-nested-cv.html#æ•°æ®å‡†å¤‡",
    "title": "åµŒå¥—äº¤å‰éªŒè¯å®Œæ•´æ•™ç¨‹",
    "section": "æ•°æ®å‡†å¤‡",
    "text": "æ•°æ®å‡†å¤‡\næœ¬æ•™ç¨‹ä½¿ç”¨ç»å…¸çš„ iris æ•°æ®é›†æ¼”ç¤ºåˆ†ç±»ä»»åŠ¡ï¼Œä½¿ç”¨ mtcars æ•°æ®é›†æ¼”ç¤ºå›å½’ä»»åŠ¡ã€‚ä¸ºäº†çªå‡ºåµŒå¥—äº¤å‰éªŒè¯çš„ä»·å€¼ï¼Œæˆ‘ä»¬é€‰æ‹©éœ€è¦è°ƒå‚çš„æ¨¡å‹ï¼ˆå¦‚å†³ç­–æ ‘ã€éšæœºæ£®æ—ï¼‰ã€‚\n\nset.seed(2026)\n\n# åˆ†ç±»ä»»åŠ¡ï¼šé¢„æµ‹é¸¢å°¾èŠ±ç§ç±»\ntask_iris &lt;- TaskClassif$new(\n\n  id = \"iris_species\",\n  backend = iris,\n  target = \"Species\"\n)\n\n# å›å½’ä»»åŠ¡ï¼šé¢„æµ‹æ±½è½¦æ²¹è€—\ntask_mtcars &lt;- TaskRegr$new(\n  id = \"mtcars_mpg\",\n  backend = mtcars,\n  target = \"mpg\"\n)\n\ntask_iris\n\n\nâ”€â”€ &lt;TaskClassif&gt; (150x5) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ Target: Species\nâ€¢ Target classes: setosa (33%), versicolor (33%), virginica (33%)\nâ€¢ Properties: multiclass\nâ€¢ Features (4):\n  â€¢ dbl (4): Petal.Length, Petal.Width, Sepal.Length, Sepal.Width\n\n\n\n# æŸ¥çœ‹æ•°æ®åŸºæœ¬ä¿¡æ¯\ncat(\"åˆ†ç±»ä»»åŠ¡æ ·æœ¬æ•°:\", task_iris$nrow, \"\\n\")\n\nåˆ†ç±»ä»»åŠ¡æ ·æœ¬æ•°: 150 \n\ncat(\"ç‰¹å¾æ•°:\", length(task_iris$feature_names), \"\\n\")\n\nç‰¹å¾æ•°: 4 \n\ncat(\"ç±»åˆ«åˆ†å¸ƒ:\\n\")\n\nç±»åˆ«åˆ†å¸ƒ:\n\ntable(iris$Species)\n\n\n    setosa versicolor  virginica \n        50         50         50",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "åµŒå¥—äº¤å‰éªŒè¯"
    ]
  },
  {
    "objectID": "1099-nested-cv.html#æ–¹æ³•ä¸€ä½¿ç”¨-mlr3-å®ç°åµŒå¥—äº¤å‰éªŒè¯",
    "href": "1099-nested-cv.html#æ–¹æ³•ä¸€ä½¿ç”¨-mlr3-å®ç°åµŒå¥—äº¤å‰éªŒè¯",
    "title": "åµŒå¥—äº¤å‰éªŒè¯å®Œæ•´æ•™ç¨‹",
    "section": "æ–¹æ³•ä¸€ï¼šä½¿ç”¨ mlr3 å®ç°åµŒå¥—äº¤å‰éªŒè¯",
    "text": "æ–¹æ³•ä¸€ï¼šä½¿ç”¨ mlr3 å®ç°åµŒå¥—äº¤å‰éªŒè¯\n\næ­¥éª¤ 1ï¼šå®šä¹‰å­¦ä¹ å™¨ä¸è¶…å‚æ•°æœç´¢ç©ºé—´\né¦–å…ˆå®šä¹‰ä¸€ä¸ªéœ€è¦è°ƒå‚çš„å­¦ä¹ å™¨ã€‚è¿™é‡Œä½¿ç”¨å†³ç­–æ ‘åˆ†ç±»å™¨ classif.rpartï¼Œå®ƒæœ‰ä¸¤ä¸ªå…³é”®è¶…å‚æ•°ï¼šcpï¼ˆå¤æ‚åº¦å‚æ•°ï¼‰å’Œ minsplitï¼ˆæœ€å°åˆ†è£‚æ ·æœ¬æ•°ï¼‰ã€‚\n\n# å®šä¹‰å†³ç­–æ ‘å­¦ä¹ å™¨\nlearner_rpart &lt;- lrn(\"classif.rpart\", predict_type = \"prob\")\n\n# æŸ¥çœ‹å¯è°ƒå‚æ•°\nlearner_rpart$param_set\n\n&lt;ParamSet(10)&gt;\n                id    class lower upper nlevels        default  value\n            &lt;char&gt;   &lt;char&gt; &lt;num&gt; &lt;num&gt;   &lt;num&gt;         &lt;list&gt; &lt;list&gt;\n 1:             cp ParamDbl     0     1     Inf           0.01 [NULL]\n 2:     keep_model ParamLgl    NA    NA       2          FALSE [NULL]\n 3:     maxcompete ParamInt     0   Inf     Inf              4 [NULL]\n 4:       maxdepth ParamInt     1    30      30             30 [NULL]\n 5:   maxsurrogate ParamInt     0   Inf     Inf              5 [NULL]\n 6:      minbucket ParamInt     1   Inf     Inf &lt;NoDefault[0]&gt; [NULL]\n 7:       minsplit ParamInt     1   Inf     Inf             20 [NULL]\n 8: surrogatestyle ParamInt     0     1       2              0 [NULL]\n 9:   usesurrogate ParamInt     0     2       3              2 [NULL]\n10:           xval ParamInt     0   Inf     Inf             10      0\n\n\n\n# å®šä¹‰è¶…å‚æ•°æœç´¢ç©ºé—´\nsearch_space &lt;- ps(\n  cp = p_dbl(lower = 0.001, upper = 0.1),\n  minsplit = p_int(lower = 5, upper = 30)\n)\n\nsearch_space\n\n&lt;ParamSet(2)&gt;\n         id    class lower upper nlevels        default  value\n     &lt;char&gt;   &lt;char&gt; &lt;num&gt; &lt;num&gt;   &lt;num&gt;         &lt;list&gt; &lt;list&gt;\n1:       cp ParamDbl 0.001   0.1     Inf &lt;NoDefault[0]&gt; [NULL]\n2: minsplit ParamInt 5.000  30.0      26 &lt;NoDefault[0]&gt; [NULL]\n\n\n\n\næ­¥éª¤ 2ï¼šé…ç½®å†…å±‚è°ƒå‚å™¨\nå†…å±‚å¾ªç¯è´Ÿè´£è¶…å‚æ•°è°ƒä¼˜ã€‚æˆ‘ä»¬ä½¿ç”¨ç½‘æ ¼æœç´¢ï¼ˆGrid Searchï¼‰ä½œä¸ºè°ƒå‚ç­–ç•¥ï¼Œ3 æŠ˜äº¤å‰éªŒè¯ä½œä¸ºå†…å±‚é‡é‡‡æ ·æ–¹æ³•ã€‚\n\n# å†…å±‚é‡é‡‡æ ·ï¼š3æŠ˜äº¤å‰éªŒè¯\ninner_resampling &lt;- rsmp(\"cv\", folds = 3)\n\n# è°ƒå‚ç»ˆæ­¢æ¡ä»¶ï¼šè¯„ä¼°20ç»„è¶…å‚æ•°\nterminator &lt;- trm(\"evals\", n_evals = 20)\n\n# è°ƒå‚å™¨ï¼šç½‘æ ¼æœç´¢\ntuner &lt;- tnr(\"grid_search\", resolution = 5)\n\n# è¯„ä¼°æŒ‡æ ‡ï¼šåˆ†ç±»å‡†ç¡®ç‡\nmeasure &lt;- msr(\"classif.acc\")\n\n\n\næ­¥éª¤ 3ï¼šåˆ›å»º AutoTuner å¯¹è±¡\nauto_tuner() å°†å­¦ä¹ å™¨å’Œè°ƒå‚è¿‡ç¨‹å°è£…åœ¨ä¸€èµ·ã€‚ä»å¤–å±‚å¾ªç¯çš„è§†è§’çœ‹ï¼Œå®ƒå°±åƒä¸€ä¸ªæ™®é€šçš„å­¦ä¹ å™¨ï¼Œä½†è®­ç»ƒæ—¶ä¼šè‡ªåŠ¨è¿›è¡Œå†…å±‚è°ƒå‚ã€‚\n\nat &lt;- auto_tuner(\n  tuner = tuner,\n  learner = learner_rpart,\n  resampling = inner_resampling,\n  measure = measure,\n  search_space = search_space,\n  terminator = terminator,\n  store_tuning_instance = TRUE\n)\n\nat\n\n\nâ”€â”€ &lt;AutoTuner&gt; (classif.rpart.tuned) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ Model: -\nâ€¢ Parameters: list()\nâ€¢ Packages: mlr3, mlr3tuning, and rpart\nâ€¢ Predict Types: response and [prob]\nâ€¢ Feature Types: logical, integer, numeric, factor, and ordered\nâ€¢ Encapsulation: none (fallback: -)\nâ€¢ Properties: importance, missings, multiclass, selected_features, twoclass,\nand weights\nâ€¢ Other settings: use_weights = 'use'\nâ€¢ Search Space:\n         id    class lower upper nlevels\n     &lt;char&gt;   &lt;char&gt; &lt;num&gt; &lt;num&gt;   &lt;num&gt;\n1:       cp ParamDbl 0.001   0.1     Inf\n2: minsplit ParamInt 5.000  30.0      26\n\n\n\n\næ­¥éª¤ 4ï¼šé…ç½®å¤–å±‚é‡é‡‡æ ·å¹¶æ‰§è¡ŒåµŒå¥—äº¤å‰éªŒè¯\nå¤–å±‚å¾ªç¯ä½¿ç”¨ 5 æŠ˜äº¤å‰éªŒè¯ã€‚å¯¹ AutoTuner å¯¹è±¡è¿›è¡Œ resample() æ“ä½œå³å¯å®Œæˆå®Œæ•´çš„åµŒå¥—äº¤å‰éªŒè¯ã€‚\n\nset.seed(2026)\n\n# å¤–å±‚é‡é‡‡æ ·ï¼š5æŠ˜äº¤å‰éªŒè¯\nouter_resampling &lt;- rsmp(\"cv\", folds = 5)\n\n# æ‰§è¡ŒåµŒå¥—äº¤å‰éªŒè¯\nrr &lt;- resample(\n  task = task_iris,\n  learner = at,\n  resampling = outer_resampling,\n  store_models = TRUE\n)\n\nrr\n\n\nâ”€â”€ &lt;ResampleResult&gt; with 5 resampling iterations â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n      task_id          learner_id resampling_id iteration     prediction_test\n iris_species classif.rpart.tuned            cv         1 &lt;PredictionClassif&gt;\n iris_species classif.rpart.tuned            cv         2 &lt;PredictionClassif&gt;\n iris_species classif.rpart.tuned            cv         3 &lt;PredictionClassif&gt;\n iris_species classif.rpart.tuned            cv         4 &lt;PredictionClassif&gt;\n iris_species classif.rpart.tuned            cv         5 &lt;PredictionClassif&gt;\n warnings errors\n        0      0\n        0      0\n        0      0\n        0      0\n        0      0\n\n\n\n\næ­¥éª¤ 5ï¼šæŸ¥çœ‹ç»“æœ\n\n# å¤–å±‚æ¯æŠ˜çš„æ€§èƒ½\nouter_scores &lt;- rr$score(msr(\"classif.acc\"))\nouter_scores[, .(iteration, classif.acc)]\n\n   iteration classif.acc\n       &lt;int&gt;       &lt;num&gt;\n1:         1   1.0000000\n2:         2   0.9333333\n3:         3   1.0000000\n4:         4   0.9000000\n5:         5   0.8666667\n\n\n\n# æ±‡æ€»ç»Ÿè®¡\ncat(\"åµŒå¥—äº¤å‰éªŒè¯ç»“æœ:\\n\")\n\nåµŒå¥—äº¤å‰éªŒè¯ç»“æœ:\n\ncat(\"å¹³å‡å‡†ç¡®ç‡:\", round(mean(outer_scores$classif.acc), 4), \"\\n\")\n\nå¹³å‡å‡†ç¡®ç‡: 0.94 \n\ncat(\"æ ‡å‡†å·®:\", round(sd(outer_scores$classif.acc), 4), \"\\n\")\n\næ ‡å‡†å·®: 0.0596 \n\ncat(\"æœ€å°å€¼:\", round(min(outer_scores$classif.acc), 4), \"\\n\")\n\næœ€å°å€¼: 0.8667 \n\ncat(\"æœ€å¤§å€¼:\", round(max(outer_scores$classif.acc), 4), \"\\n\")\n\næœ€å¤§å€¼: 1 \n\n\n\n\næ­¥éª¤ 6ï¼šæŸ¥çœ‹æ¯æŠ˜é€‰æ‹©çš„æœ€ä¼˜è¶…å‚æ•°\nåµŒå¥—äº¤å‰éªŒè¯çš„ä¸€ä¸ªé‡è¦è¾“å‡ºæ˜¯æ¯ä¸ªå¤–å±‚æŠ˜å é€‰æ‹©çš„æœ€ä¼˜è¶…å‚æ•°ã€‚å¦‚æœä¸åŒæŠ˜å é€‰æ‹©çš„è¶…å‚æ•°å·®å¼‚å¾ˆå¤§ï¼Œè¯´æ˜æ¨¡å‹å¯¹æ•°æ®åˆ’åˆ†æ•æ„Ÿï¼Œå¯èƒ½éœ€è¦æ›´å¤šæ•°æ®æˆ–æ›´ç¨³å®šçš„æ¨¡å‹ã€‚\n\n# æå–æ¯æŠ˜çš„æœ€ä¼˜è¶…å‚æ•°\noptimal_params &lt;- lapply(seq_len(5), function(i) {\n  model &lt;- rr$learners[[i]]\n  tuning_result &lt;- model$tuning_result\n  data.frame(\n    fold = i,\n    cp = tuning_result$cp,\n    minsplit = tuning_result$minsplit,\n    inner_score = tuning_result$classif.acc\n  )\n})\n\nparams_df &lt;- bind_rows(optimal_params)\nknitr::kable(params_df, digits = 4, caption = \"å„å¤–å±‚æŠ˜å çš„æœ€ä¼˜è¶…å‚æ•°\")\n\n\nå„å¤–å±‚æŠ˜å çš„æœ€ä¼˜è¶…å‚æ•°\n\n\nfold\ncp\nminsplit\ninner_score\n\n\n\n\n1\n0.0010\n24\n0.9250\n\n\n2\n0.0010\n24\n0.9417\n\n\n3\n0.0010\n11\n0.9250\n\n\n4\n0.0258\n18\n0.9667\n\n\n5\n0.0010\n5\n0.9667",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "åµŒå¥—äº¤å‰éªŒè¯"
    ]
  },
  {
    "objectID": "1099-nested-cv.html#å¯è§†åŒ–åˆ†æ",
    "href": "1099-nested-cv.html#å¯è§†åŒ–åˆ†æ",
    "title": "åµŒå¥—äº¤å‰éªŒè¯å®Œæ•´æ•™ç¨‹",
    "section": "å¯è§†åŒ–åˆ†æ",
    "text": "å¯è§†åŒ–åˆ†æ\n\nå¤–å±‚æ€§èƒ½åˆ†å¸ƒ\n\nscores_df &lt;- data.frame(\n  fold = factor(1:5),\n  accuracy = outer_scores$classif.acc\n)\n\nggplot(scores_df, aes(x = fold, y = accuracy, fill = fold)) +\n  geom_col(width = 0.6, alpha = 0.85) +\n  geom_hline(\n    yintercept = mean(scores_df$accuracy),\n    linetype = \"dashed\",\n    color = \"#4f46e5\",\n    linewidth = 1\n  ) +\n  scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\", \"#f97316\", \"#8b5cf6\", \"#06b6d4\")) +\n  scale_y_continuous(limits = c(0, 1), labels = scales::percent) +\n  labs(\n    title = \"åµŒå¥—äº¤å‰éªŒè¯å¤–å±‚æ€§èƒ½\",\n    subtitle = paste0(\"5æŠ˜å¹³å‡å‡†ç¡®ç‡: \", round(mean(scores_df$accuracy) * 100, 1), \"%\"),\n    x = \"å¤–å±‚æŠ˜å \",\n    y = \"åˆ†ç±»å‡†ç¡®ç‡\"\n  ) +\n  theme_minimal(base_size = 12) +\n  theme(legend.position = \"none\")\n\n\n\n\n\n\n\n\n\n\nè¶…å‚æ•°ç¨³å®šæ€§åˆ†æ\n\nparams_long &lt;- params_df |&gt;\n  select(fold, cp, minsplit) |&gt;\n  pivot_longer(cols = c(cp, minsplit), names_to = \"parameter\", values_to = \"value\") |&gt;\n  mutate(fold = factor(fold))\n\nggplot(params_long, aes(x = fold, y = value, fill = parameter)) +\n  geom_col(position = position_dodge(width = 0.7), width = 0.6, alpha = 0.85) +\n  facet_wrap(~parameter, scales = \"free_y\", ncol = 1) +\n  scale_fill_manual(values = c(\"#4f46e5\", \"#10b981\")) +\n  labs(\n    title = \"å„æŠ˜å é€‰æ‹©çš„æœ€ä¼˜è¶…å‚æ•°\",\n    subtitle = \"è¶…å‚æ•°ç¨³å®šæ€§åæ˜ æ¨¡å‹å¯¹æ•°æ®åˆ’åˆ†çš„æ•æ„Ÿåº¦\",\n    x = \"å¤–å±‚æŠ˜å \",\n    y = \"å‚æ•°å€¼\"\n  ) +\n  theme_minimal(base_size = 12) +\n  theme(legend.position = \"none\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "åµŒå¥—äº¤å‰éªŒè¯"
    ]
  },
  {
    "objectID": "1099-nested-cv.html#ä¸æ™®é€šäº¤å‰éªŒè¯çš„å¯¹æ¯”",
    "href": "1099-nested-cv.html#ä¸æ™®é€šäº¤å‰éªŒè¯çš„å¯¹æ¯”",
    "title": "åµŒå¥—äº¤å‰éªŒè¯å®Œæ•´æ•™ç¨‹",
    "section": "ä¸æ™®é€šäº¤å‰éªŒè¯çš„å¯¹æ¯”",
    "text": "ä¸æ™®é€šäº¤å‰éªŒè¯çš„å¯¹æ¯”\nä¸ºäº†å±•ç¤ºåµŒå¥—äº¤å‰éªŒè¯çš„ä»·å€¼ï¼Œæˆ‘ä»¬æ¯”è¾ƒä¸¤ç§æ–¹æ³•çš„æ€§èƒ½ä¼°è®¡ã€‚\n\næ™®é€šäº¤å‰éªŒè¯ï¼ˆæœ‰ä¹è§‚åå·®ï¼‰\n\nset.seed(2026)\n\n# æ™®é€š5æŠ˜äº¤å‰éªŒè¯è°ƒå‚\ninstance &lt;- ti(\n  task = task_iris,\n  learner = learner_rpart,\n  resampling = rsmp(\"cv\", folds = 5),\n  measures = msr(\"classif.acc\"),\n  search_space = search_space,\n  terminator = trm(\"evals\", n_evals = 20)\n)\n\ntuner$optimize(instance)\n\n      cp minsplit learner_param_vals  x_domain classif.acc\n   &lt;num&gt;    &lt;int&gt;             &lt;list&gt;    &lt;list&gt;       &lt;num&gt;\n1: 0.001        5          &lt;list[3]&gt; &lt;list[2]&gt;   0.9533333\n\nsimple_cv_score &lt;- instance$result_y\ncat(\"æ™®é€šäº¤å‰éªŒè¯æœ€ä¼˜åˆ†æ•°:\", round(simple_cv_score, 4), \"\\n\")\n\næ™®é€šäº¤å‰éªŒè¯æœ€ä¼˜åˆ†æ•°: 0.9533 \n\n\n\n\nå¯¹æ¯”åˆ†æ\n\ncomparison_df &lt;- data.frame(\n  method = c(\"æ™®é€šäº¤å‰éªŒè¯\", \"åµŒå¥—äº¤å‰éªŒè¯\"),\n  accuracy = c(simple_cv_score, mean(outer_scores$classif.acc)),\n  type = c(\"æœ‰åä¼°è®¡\", \"æ— åä¼°è®¡\")\n)\n\nggplot(comparison_df, aes(x = method, y = accuracy, fill = type)) +\n  geom_col(width = 0.5, alpha = 0.85) +\n  geom_text(aes(label = scales::percent(accuracy, accuracy = 0.1)), \n            vjust = -0.5, size = 4) +\n  scale_fill_manual(values = c(\"#f97316\", \"#10b981\")) +\n  scale_y_continuous(limits = c(0, 1.1), labels = scales::percent) +\n  labs(\n    title = \"æ™®é€šäº¤å‰éªŒè¯ vs åµŒå¥—äº¤å‰éªŒè¯\",\n    subtitle = \"æ™®é€šCVå€¾å‘äºé«˜ä¼°æ¨¡å‹æ€§èƒ½\",\n    x = \"\",\n    y = \"åˆ†ç±»å‡†ç¡®ç‡\",\n    fill = \"ä¼°è®¡ç±»å‹\"\n  ) +\n  theme_minimal(base_size = 12)\n\n\n\n\n\n\n\n\nè§£è¯»ï¼šæ™®é€šäº¤å‰éªŒè¯æŠ¥å‘Šçš„æ€§èƒ½é€šå¸¸é«˜äºåµŒå¥—äº¤å‰éªŒè¯ï¼Œå› ä¸ºå‰è€…å­˜åœ¨é€‰æ‹©åå·®ã€‚å·®å¼‚çš„å¤§å°å–å†³äºæ•°æ®å¤æ‚åº¦ã€è¶…å‚æ•°æœç´¢ç©ºé—´å’Œæ¨¡å‹çµæ´»æ€§ã€‚åœ¨é«˜ç»´æ•°æ®æˆ–å¤æ‚æ¨¡å‹ä¸Šï¼Œè¿™ç§å·®å¼‚å¯èƒ½æ›´æ˜æ˜¾ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "åµŒå¥—äº¤å‰éªŒè¯"
    ]
  },
  {
    "objectID": "1099-nested-cv.html#å›å½’ä»»åŠ¡ç¤ºä¾‹",
    "href": "1099-nested-cv.html#å›å½’ä»»åŠ¡ç¤ºä¾‹",
    "title": "åµŒå¥—äº¤å‰éªŒè¯å®Œæ•´æ•™ç¨‹",
    "section": "å›å½’ä»»åŠ¡ç¤ºä¾‹",
    "text": "å›å½’ä»»åŠ¡ç¤ºä¾‹\nåµŒå¥—äº¤å‰éªŒè¯åŒæ ·é€‚ç”¨äºå›å½’é—®é¢˜ã€‚ä¸‹é¢ä½¿ç”¨ mtcars æ•°æ®é›†æ¼”ç¤ºã€‚\n\nset.seed(2026)\n\n# å®šä¹‰éšæœºæ£®æ—å›å½’å™¨\nlearner_rf &lt;- lrn(\"regr.ranger\", num.trees = 100)\n\n# æœç´¢ç©ºé—´\nsearch_space_rf &lt;- ps(\n  mtry = p_int(lower = 2, upper = 8),\n  min.node.size = p_int(lower = 3, upper = 15)\n)\n\n# åˆ›å»ºAutoTuner\nat_rf &lt;- auto_tuner(\n  tuner = tnr(\"grid_search\", resolution = 4),\n  learner = learner_rf,\n  resampling = rsmp(\"cv\", folds = 3),\n  measure = msr(\"regr.rmse\"),\n  search_space = search_space_rf,\n  terminator = trm(\"evals\", n_evals = 15)\n)\n\n# æ‰§è¡ŒåµŒå¥—äº¤å‰éªŒè¯\nrr_rf &lt;- resample(\n  task = task_mtcars,\n  learner = at_rf,\n  resampling = rsmp(\"cv\", folds = 5),\n  store_models = TRUE\n)\n\n# ç»“æœ\nrf_scores &lt;- rr_rf$score(msr(\"regr.rmse\"))\ncat(\"å›å½’ä»»åŠ¡åµŒå¥—CVç»“æœ:\\n\")\n\nå›å½’ä»»åŠ¡åµŒå¥—CVç»“æœ:\n\ncat(\"å¹³å‡RMSE:\", round(mean(rf_scores$regr.rmse), 3), \"\\n\")\n\nå¹³å‡RMSE: 2.367 \n\ncat(\"æ ‡å‡†å·®:\", round(sd(rf_scores$regr.rmse), 3), \"\\n\")\n\næ ‡å‡†å·®: 0.437",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "åµŒå¥—äº¤å‰éªŒè¯"
    ]
  },
  {
    "objectID": "1099-nested-cv.html#è®¡ç®—å¤æ‚åº¦ä¸ä¼˜åŒ–å»ºè®®",
    "href": "1099-nested-cv.html#è®¡ç®—å¤æ‚åº¦ä¸ä¼˜åŒ–å»ºè®®",
    "title": "åµŒå¥—äº¤å‰éªŒè¯å®Œæ•´æ•™ç¨‹",
    "section": "è®¡ç®—å¤æ‚åº¦ä¸ä¼˜åŒ–å»ºè®®",
    "text": "è®¡ç®—å¤æ‚åº¦ä¸ä¼˜åŒ–å»ºè®®\n\nè®¡ç®—å¼€é”€åˆ†æ\nåµŒå¥—äº¤å‰éªŒè¯çš„è®¡ç®—å¤æ‚åº¦ä¸º \\(O(K_{outer} \\times K_{inner} \\times N_{params})\\)ï¼Œå…¶ä¸­ï¼š - \\(K_{outer}\\)ï¼šå¤–å±‚æŠ˜å æ•° - \\(K_{inner}\\)ï¼šå†…å±‚æŠ˜å æ•° - \\(N_{params}\\)ï¼šè¶…å‚æ•°ç»„åˆæ•°\nä¾‹å¦‚ï¼Œ5Ã—5 åµŒå¥— CV é…åˆ 100 ç»„è¶…å‚æ•°ï¼Œéœ€è¦è®­ç»ƒ \\(5 \\times 5 \\times 100 = 2500\\) ä¸ªæ¨¡å‹ã€‚\n\n\nä¼˜åŒ–ç­–ç•¥\n\nå‡å°‘æŠ˜å æ•°ï¼šå¤–å±‚ 5 æŠ˜ã€å†…å±‚ 3 æŠ˜é€šå¸¸è¶³å¤Ÿ\nä½¿ç”¨éšæœºæœç´¢ï¼šæ¯”ç½‘æ ¼æœç´¢æ›´é«˜æ•ˆ\nå¹¶è¡Œè®¡ç®—ï¼šmlr3 åŸç”Ÿæ”¯æŒå¹¶è¡ŒåŒ–\næ—©åœç­–ç•¥ï¼šè®¾ç½®åˆç†çš„ç»ˆæ­¢æ¡ä»¶\n\n\n# å¯ç”¨å¹¶è¡Œè®¡ç®—\nfuture::plan(\"multisession\", workers = 4)\n\n# æ‰§è¡ŒåµŒå¥—äº¤å‰éªŒè¯ï¼ˆè‡ªåŠ¨å¹¶è¡Œï¼‰\nrr_parallel &lt;- resample(\n  task = task_iris,\n  learner = at,\n  resampling = outer_resampling,\n  store_models = TRUE\n)\n\n# æ¢å¤ä¸²è¡Œæ¨¡å¼\nfuture::plan(\"sequential\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "åµŒå¥—äº¤å‰éªŒè¯"
    ]
  },
  {
    "objectID": "1099-nested-cv.html#å¸¸è§é”™è¯¯ä¸æ’æŸ¥",
    "href": "1099-nested-cv.html#å¸¸è§é”™è¯¯ä¸æ’æŸ¥",
    "title": "åµŒå¥—äº¤å‰éªŒè¯å®Œæ•´æ•™ç¨‹",
    "section": "å¸¸è§é”™è¯¯ä¸æ’æŸ¥",
    "text": "å¸¸è§é”™è¯¯ä¸æ’æŸ¥\n\n1. æ•°æ®æ³„éœ²\né”™è¯¯ï¼šåœ¨æ•´ä¸ªæ•°æ®é›†ä¸Šåšç‰¹å¾é€‰æ‹©æˆ–æ ‡å‡†åŒ–ï¼Œç„¶åå†åšåµŒå¥—äº¤å‰éªŒè¯ã€‚\næ­£ç¡®åšæ³•ï¼šå°†é¢„å¤„ç†æ­¥éª¤æ”¾å…¥ mlr3 çš„ Pipeline ä¸­ï¼Œç¡®ä¿æ¯æŠ˜ç‹¬ç«‹å¤„ç†ã€‚\n\n# æ­£ç¡®ï¼šé¢„å¤„ç†ä½œä¸ºPipelineçš„ä¸€éƒ¨åˆ†\npo_scale &lt;- po(\"scale\")\npo_learner &lt;- po(\"learner\", learner_rpart)\n\ngraph &lt;- po_scale %&gt;&gt;% po_learner\ngraph_learner &lt;- GraphLearner$new(graph)\n\n\n\n2. K å€¼é€‰æ‹©ä¸å½“\nå»ºè®®ï¼š - å¤–å±‚ï¼š5-10 æŠ˜ï¼Œç¡®ä¿æµ‹è¯•é›†æœ‰è¶³å¤Ÿæ ·æœ¬ - å†…å±‚ï¼š3-5 æŠ˜ï¼Œå¹³è¡¡è®¡ç®—å¼€é”€ä¸è°ƒå‚ç¨³å®šæ€§ - å°æ•°æ®é›†ï¼šè€ƒè™‘ç•™ä¸€æ³•ï¼ˆLOOï¼‰ä½œä¸ºå¤–å±‚\n\n\n3. å¿½ç•¥è¶…å‚æ•°ç¨³å®šæ€§\nå¦‚æœå„æŠ˜é€‰æ‹©çš„æœ€ä¼˜è¶…å‚æ•°å·®å¼‚å¾ˆå¤§ï¼Œå¯èƒ½è¡¨æ˜ï¼š - æœç´¢ç©ºé—´è®¾ç½®ä¸åˆç† - æ¨¡å‹å¯¹æ•°æ®åˆ’åˆ†è¿‡äºæ•æ„Ÿ - éœ€è¦æ›´å¤šæ•°æ®æˆ–æ›´ç®€å•çš„æ¨¡å‹\n\n\n4. ç»“æœæŠ¥å‘Šä¸å®Œæ•´\nå®Œæ•´çš„åµŒå¥—äº¤å‰éªŒè¯æŠ¥å‘Šåº”åŒ…æ‹¬ï¼š - å¤–å±‚æ€§èƒ½çš„å‡å€¼å’Œæ ‡å‡†å·® - å„æŠ˜é€‰æ‹©çš„æœ€ä¼˜è¶…å‚æ•° - ä¸æ™®é€š CV çš„å¯¹æ¯”ï¼ˆå¦‚é€‚ç”¨ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "åµŒå¥—äº¤å‰éªŒè¯"
    ]
  },
  {
    "objectID": "1099-nested-cv.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Šè§„èŒƒ",
    "href": "1099-nested-cv.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Šè§„èŒƒ",
    "title": "åµŒå¥—äº¤å‰éªŒè¯å®Œæ•´æ•™ç¨‹",
    "section": "ç»“æœè§£è¯»ä¸æŠ¥å‘Šè§„èŒƒ",
    "text": "ç»“æœè§£è¯»ä¸æŠ¥å‘Šè§„èŒƒ\n\næŠ¥å‘Šæ¨¡æ¿\nåœ¨è®ºæ–‡æˆ–æŠ¥å‘Šä¸­ï¼ŒåµŒå¥—äº¤å‰éªŒè¯çš„ç»“æœåº”æŒ‰å¦‚ä¸‹æ–¹å¼æŠ¥å‘Šï¼š\n\næ¨¡å‹æ€§èƒ½é€šè¿‡ 5Ã—3 åµŒå¥—äº¤å‰éªŒè¯è¯„ä¼°ã€‚å¤–å±‚ 5 æŠ˜ç”¨äºæ— åæ€§èƒ½ä¼°è®¡ï¼Œå†…å±‚ 3 æŠ˜ç”¨äºè¶…å‚æ•°è°ƒä¼˜ã€‚å†³ç­–æ ‘åˆ†ç±»å™¨åœ¨è¶…å‚æ•°ç©ºé—´ (cp âˆˆ [0.001, 0.1], minsplit âˆˆ [5, 30]) ä¸Šè¿›è¡Œç½‘æ ¼æœç´¢ä¼˜åŒ–ã€‚åµŒå¥—äº¤å‰éªŒè¯çš„å¹³å‡å‡†ç¡®ç‡ä¸º XX.X% (SD = X.X%)ï¼Œè¡¨æ˜æ¨¡å‹å…·æœ‰è¾ƒå¥½çš„æ³›åŒ–èƒ½åŠ›ã€‚\n\n\n\nå…³é”®è¾“å‡ºè§£è¯»\n\n# å®Œæ•´ç»“æœæ±‡æ€»\nsummary_df &lt;- data.frame(\n  æŒ‡æ ‡ = c(\"å¤–å±‚æŠ˜å æ•°\", \"å†…å±‚æŠ˜å æ•°\", \"è¶…å‚æ•°ç»„åˆæ•°\", \n           \"å¹³å‡å‡†ç¡®ç‡\", \"å‡†ç¡®ç‡æ ‡å‡†å·®\", \"95%ç½®ä¿¡åŒºé—´\"),\n  å€¼ = c(\"5\", \"3\", \"20\",\n         paste0(round(mean(outer_scores$classif.acc) * 100, 1), \"%\"),\n         paste0(round(sd(outer_scores$classif.acc) * 100, 1), \"%\"),\n         paste0(\"[\", \n                round((mean(outer_scores$classif.acc) - 1.96 * sd(outer_scores$classif.acc)) * 100, 1), \"%, \",\n                round((mean(outer_scores$classif.acc) + 1.96 * sd(outer_scores$classif.acc)) * 100, 1), \"%]\"))\n)\n\nknitr::kable(summary_df, caption = \"åµŒå¥—äº¤å‰éªŒè¯ç»“æœæ±‡æ€»\")\n\n\nåµŒå¥—äº¤å‰éªŒè¯ç»“æœæ±‡æ€»\n\n\næŒ‡æ ‡\nå€¼\n\n\n\n\nå¤–å±‚æŠ˜å æ•°\n5\n\n\nå†…å±‚æŠ˜å æ•°\n3\n\n\nè¶…å‚æ•°ç»„åˆæ•°\n20\n\n\nå¹³å‡å‡†ç¡®ç‡\n94%\n\n\nå‡†ç¡®ç‡æ ‡å‡†å·®\n6%\n\n\n95%ç½®ä¿¡åŒºé—´\n[82.3%, 105.7%]",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "åµŒå¥—äº¤å‰éªŒè¯"
    ]
  },
  {
    "objectID": "1099-nested-cv.html#è¿›é˜¶æ‰©å±•",
    "href": "1099-nested-cv.html#è¿›é˜¶æ‰©å±•",
    "title": "åµŒå¥—äº¤å‰éªŒè¯å®Œæ•´æ•™ç¨‹",
    "section": "è¿›é˜¶æ‰©å±•",
    "text": "è¿›é˜¶æ‰©å±•\n\n1. ä¸å…¶ä»–è¯„ä¼°æ–¹æ³•çš„å¯¹æ¯”\n\n\n\næ–¹æ³•\né€‚ç”¨åœºæ™¯\nåå·®\nè®¡ç®—å¼€é”€\n\n\n\n\nç•™å‡ºæ³•\nå¤§æ•°æ®é›†\né«˜\nä½\n\n\næ™®é€šKæŠ˜CV\nä¸­ç­‰æ•°æ®ã€æ— è°ƒå‚\nä¸­\nä¸­\n\n\nåµŒå¥—CV\néœ€è¦è°ƒå‚çš„åœºæ™¯\nä½\né«˜\n\n\nBootstrap\nå°æ ·æœ¬ç½®ä¿¡åŒºé—´\nä¸­\né«˜\n\n\n\n\n\n2. åµŒå¥—äº¤å‰éªŒè¯çš„å˜ä½“\n\né‡å¤åµŒå¥—CVï¼šå¤šæ¬¡è¿è¡ŒåµŒå¥—CVï¼ŒæŠ¥å‘Šå¤šæ¬¡ç»“æœçš„åˆ†å¸ƒ\nåˆ†å±‚åµŒå¥—CVï¼šç¡®ä¿æ¯æŠ˜çš„ç±»åˆ«æ¯”ä¾‹ä¸€è‡´\næ—¶é—´åºåˆ—åµŒå¥—CVï¼šä½¿ç”¨æ—¶é—´åˆ†å‰²è€Œééšæœºåˆ†å‰²\n\n\n\n3. æœ€ç»ˆæ¨¡å‹çš„è®­ç»ƒ\nåµŒå¥—äº¤å‰éªŒè¯ç»™å‡ºçš„æ˜¯æ€§èƒ½ä¼°è®¡ï¼Œè€Œéæœ€ç»ˆæ¨¡å‹ã€‚å¦‚æœéœ€è¦éƒ¨ç½²æ¨¡å‹ï¼Œåº”åœ¨å®Œæ•´æ•°æ®é›†ä¸Šé‡æ–°è¿›è¡Œè¶…å‚æ•°è°ƒä¼˜å¹¶è®­ç»ƒæœ€ç»ˆæ¨¡å‹ã€‚\n\n# åœ¨å®Œæ•´æ•°æ®ä¸Šé‡æ–°è°ƒå‚å¹¶è®­ç»ƒ\nfinal_instance &lt;- ti(\n  task = task_iris,\n  learner = learner_rpart,\n  resampling = rsmp(\"cv\", folds = 5),\n  measures = msr(\"classif.acc\"),\n  search_space = search_space,\n  terminator = trm(\"evals\", n_evals = 20)\n)\n\ntuner$optimize(final_instance)\n\n# ç”¨æœ€ä¼˜å‚æ•°è®­ç»ƒæœ€ç»ˆæ¨¡å‹\nfinal_learner &lt;- lrn(\"classif.rpart\")\nfinal_learner$param_set$values &lt;- final_instance$result_learner_param_vals\nfinal_learner$train(task_iris)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "åµŒå¥—äº¤å‰éªŒè¯"
    ]
  },
  {
    "objectID": "1099-nested-cv.html#æ€»ç»“",
    "href": "1099-nested-cv.html#æ€»ç»“",
    "title": "åµŒå¥—äº¤å‰éªŒè¯å®Œæ•´æ•™ç¨‹",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nåµŒå¥—äº¤å‰éªŒè¯æ˜¯åŒæ—¶è¿›è¡Œè¶…å‚æ•°è°ƒä¼˜ä¸æ— åæ€§èƒ½è¯„ä¼°çš„æ ‡å‡†æ–¹æ³•ã€‚è™½ç„¶è®¡ç®—å¼€é”€è¾ƒå¤§ï¼Œä½†å®ƒèƒ½å¤Ÿé¿å…æ™®é€šäº¤å‰éªŒè¯ä¸­çš„é€‰æ‹©åå·®ï¼Œæä¾›å¯é çš„æ³›åŒ–è¯¯å·®ä¼°è®¡ã€‚\næ ¸å¿ƒè¦ç‚¹ï¼š\n\nå¤–å±‚å¾ªç¯è¯„ä¼°æ€§èƒ½ï¼Œå†…å±‚å¾ªç¯è°ƒä¼˜è¶…å‚æ•°\nmlr3 çš„ AutoTuner ç®€åŒ–äº†å®ç°è¿‡ç¨‹\nå…³æ³¨è¶…å‚æ•°ç¨³å®šæ€§ï¼Œä¸ç¨³å®šå¯èƒ½æš—ç¤ºæ¨¡å‹é—®é¢˜\næŠ¥å‘Šæ—¶åŒ…æ‹¬å‡å€¼ã€æ ‡å‡†å·®å’Œç½®ä¿¡åŒºé—´\næœ€ç»ˆæ¨¡å‹éœ€è¦åœ¨å®Œæ•´æ•°æ®ä¸Šé‡æ–°è®­ç»ƒ\n\nåœ¨éœ€è¦ä¸¥è°¨æŠ¥å‘Šæ¨¡å‹æ€§èƒ½çš„åœºæ™¯ï¼ˆå¦‚è®ºæ–‡å‘è¡¨ã€ä¸´åºŠéªŒè¯ï¼‰ï¼ŒåµŒå¥—äº¤å‰éªŒè¯æ˜¯é¦–é€‰æ–¹æ³•ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "åµŒå¥—äº¤å‰éªŒè¯"
    ]
  },
  {
    "objectID": "1096-wavelet-transform.html",
    "href": "1096-wavelet-transform.html",
    "title": "å°æ³¢å˜æ¢ï¼šæ—¶é¢‘åˆ†æå®Œå…¨æŒ‡å—",
    "section": "",
    "text": "åœ¨ä¿¡å·åˆ†æä¸­ï¼Œæ—¶åŸŸå’Œé¢‘åŸŸå„æœ‰å±€é™ã€‚å°æ³¢å˜æ¢ï¼ˆWavelet Transformï¼‰æä¾›äº†ä¸€ç§åŒæ—¶åˆ†ææ—¶é—´å’Œé¢‘ç‡çš„å¼ºå¤§å·¥å…·ï¼Œç‰¹åˆ«é€‚åˆå¤„ç†éå¹³ç¨³ä¿¡å·ã€‚\n\n\n\n\n\næ–¹æ³•\næ—¶åŸŸä¿¡æ¯\né¢‘åŸŸä¿¡æ¯\né€‚ç”¨åœºæ™¯\n\n\n\n\næ—¶åŸŸåˆ†æ\nâœ“\nâœ—\nå‘¨æœŸæ£€æµ‹ã€å¼‚å¸¸è¯†åˆ«\n\n\nå‚…é‡Œå¶å˜æ¢ (FFT)\nâœ—\nâœ“\né¢‘è°±åˆ†æã€æ»¤æ³¢å™¨è®¾è®¡\n\n\nçŸ­æ—¶å‚…é‡Œå¶ (STFT)\nâœ“\nâœ“\nå›ºå®šæ—¶é¢‘åˆ†è¾¨ç‡\n\n\nå°æ³¢å˜æ¢\nâœ“\nâœ“\nå¤šåˆ†è¾¨ç‡åˆ†æ\n\n\n\nå°æ³¢å˜æ¢çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå¤šåˆ†è¾¨ç‡ï¼š - ä½é¢‘éƒ¨åˆ†ä½¿ç”¨å®½çª—å£ï¼ˆæ—¶é—´åˆ†è¾¨ç‡ä½ï¼Œé¢‘ç‡åˆ†è¾¨ç‡é«˜ï¼‰ - é«˜é¢‘éƒ¨åˆ†ä½¿ç”¨çª„çª—å£ï¼ˆæ—¶é—´åˆ†è¾¨ç‡é«˜ï¼Œé¢‘ç‡åˆ†è¾¨ç‡ä½ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å°æ³¢å˜æ¢ (Wavelet Transform)"
    ]
  },
  {
    "objectID": "1096-wavelet-transform.html#å‰è¨€",
    "href": "1096-wavelet-transform.html#å‰è¨€",
    "title": "å°æ³¢å˜æ¢ï¼šæ—¶é¢‘åˆ†æå®Œå…¨æŒ‡å—",
    "section": "",
    "text": "åœ¨ä¿¡å·åˆ†æä¸­ï¼Œæ—¶åŸŸå’Œé¢‘åŸŸå„æœ‰å±€é™ã€‚å°æ³¢å˜æ¢ï¼ˆWavelet Transformï¼‰æä¾›äº†ä¸€ç§åŒæ—¶åˆ†ææ—¶é—´å’Œé¢‘ç‡çš„å¼ºå¤§å·¥å…·ï¼Œç‰¹åˆ«é€‚åˆå¤„ç†éå¹³ç¨³ä¿¡å·ã€‚\n\n\n\n\n\næ–¹æ³•\næ—¶åŸŸä¿¡æ¯\né¢‘åŸŸä¿¡æ¯\né€‚ç”¨åœºæ™¯\n\n\n\n\næ—¶åŸŸåˆ†æ\nâœ“\nâœ—\nå‘¨æœŸæ£€æµ‹ã€å¼‚å¸¸è¯†åˆ«\n\n\nå‚…é‡Œå¶å˜æ¢ (FFT)\nâœ—\nâœ“\né¢‘è°±åˆ†æã€æ»¤æ³¢å™¨è®¾è®¡\n\n\nçŸ­æ—¶å‚…é‡Œå¶ (STFT)\nâœ“\nâœ“\nå›ºå®šæ—¶é¢‘åˆ†è¾¨ç‡\n\n\nå°æ³¢å˜æ¢\nâœ“\nâœ“\nå¤šåˆ†è¾¨ç‡åˆ†æ\n\n\n\nå°æ³¢å˜æ¢çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå¤šåˆ†è¾¨ç‡ï¼š - ä½é¢‘éƒ¨åˆ†ä½¿ç”¨å®½çª—å£ï¼ˆæ—¶é—´åˆ†è¾¨ç‡ä½ï¼Œé¢‘ç‡åˆ†è¾¨ç‡é«˜ï¼‰ - é«˜é¢‘éƒ¨åˆ†ä½¿ç”¨çª„çª—å£ï¼ˆæ—¶é—´åˆ†è¾¨ç‡é«˜ï¼Œé¢‘ç‡åˆ†è¾¨ç‡ä½ï¼‰",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å°æ³¢å˜æ¢ (Wavelet Transform)"
    ]
  },
  {
    "objectID": "1096-wavelet-transform.html#å°æ³¢å˜æ¢åŸºç¡€",
    "href": "1096-wavelet-transform.html#å°æ³¢å˜æ¢åŸºç¡€",
    "title": "å°æ³¢å˜æ¢ï¼šæ—¶é¢‘åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å°æ³¢å˜æ¢åŸºç¡€",
    "text": "å°æ³¢å˜æ¢åŸºç¡€\n\nå‚…é‡Œå¶å˜æ¢çš„å±€é™\nå‚…é‡Œå¶å˜æ¢å°†ä¿¡å·åˆ†è§£ä¸ºä¸åŒé¢‘ç‡çš„æ­£å¼¦æ³¢ï¼Œä½†å®ƒæœ‰ä¸¤ä¸ªå…³é”®é—®é¢˜ï¼š\n\næ—¶é—´ä¿¡æ¯ä¸¢å¤±ï¼šFFT å‘Šè¯‰æˆ‘ä»¬æœ‰å“ªäº›é¢‘ç‡æˆåˆ†ï¼Œä½†ä¸å‘Šè¯‰æˆ‘ä»¬è¿™äº›æˆåˆ†ä½•æ—¶å‡ºç°\nçª—å£å›°å¢ƒï¼šSTFT çš„çª—å£å¤§å°å›ºå®šï¼Œéš¾ä»¥åŒæ—¶å…¼é¡¾æ—¶é¢‘åˆ†è¾¨ç‡\n\n\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(wavelets)\n\n# è®¾ç½®åŸºæœ¬å‚æ•°\nfs &lt;- 1000  # é‡‡æ ·é¢‘ç‡ (Hz)\nt &lt;- seq(0, 2, 1 / fs)  # 2ç§’æ—¶é•¿\n\n# ç”Ÿæˆæµ‹è¯•ä¿¡å·ï¼šéå¹³ç¨³ä¿¡å·\nset.seed(123)\nsig &lt;- c(\n    sin(2 * pi * 10 * t[t &lt;= 1]),              # å‰åŠæ®µ: 10Hz\n    sin(2 * pi * 50 * t[t &gt; 1])               # ååŠæ®µ: 50Hz\n) + rnorm(length(t), 0, 0.2)  # æ·»åŠ å™ªå£°\n\n# ç»˜åˆ¶æ—¶åŸŸä¿¡å·\nggplot(data.frame(time = t, signal = sig), aes(x = time, y = signal)) +\n    geom_line(color = \"#4e79a7\", linewidth = 0.6) +\n    geom_vline(xintercept = 1, linetype = \"dashed\", color = \"#e15759\") +\n    geom_text(aes(x = 0.5, y = 1.5, label = \"10 Hz\"), color = \"#e15759\", size = 4) +\n    geom_text(aes(x = 1.5, y = 1.5, label = \"50 Hz\"), color = \"#e15759\", size = 4) +\n    labs(\n        title = \"éå¹³ç¨³ä¿¡å·ç¤ºä¾‹\",\n        subtitle = \"é¢‘ç‡åœ¨ t=1s å¤„çªç„¶å˜åŒ–\",\n        x = \"Time (s)\",\n        y = \"Amplitude\"\n    ) +\n    theme_minimal(base_size = 14)\n\n\n\n\n\n\n\n\n\n\nå°æ³¢å˜æ¢çš„å®šä¹‰\n\nè¿ç»­å°æ³¢å˜æ¢ (CWT)\nå¯¹äºè¿ç»­ä¿¡å· \\(x(t)\\)ï¼Œè¿ç»­å°æ³¢å˜æ¢å®šä¹‰ä¸ºï¼š\n\\[W(a, b) = \\frac{1}{\\sqrt{a}} \\int_{-\\infty}^{\\infty} x(t) \\psi^*\\left(\\frac{t - b}{a}\\right) dt\\]\nå…¶ä¸­ï¼š - \\(a\\)ï¼šå°ºåº¦ï¼ˆscaleï¼‰ï¼Œä¸é¢‘ç‡æˆåæ¯” - \\(b\\)ï¼šå¹³ç§»ï¼ˆtranslationï¼‰ï¼Œè¡¨ç¤ºæ—¶é—´ä½ç½® - \\(\\psi(t)\\)ï¼šæ¯å°æ³¢ï¼ˆmother waveletï¼‰ - \\(\\psi^*(t)\\)ï¼šæ¯å°æ³¢çš„å…±è½­\n\n\nç¦»æ•£å°æ³¢å˜æ¢ (DWT)\nç¦»æ•£å°æ³¢å˜æ¢å¯¹å°ºåº¦å’Œå¹³ç§»è¿›è¡Œç¦»æ•£åŒ–ï¼š\n\\[a = 2^j, \\quad b = k \\cdot 2^j\\]\n\\[W(j, k) = 2^{-j/2} \\int_{-\\infty}^{\\infty} x(t) \\psi^*\\left(2^{-j}t - k\\right) dt\\]\n\n\n\nå¸¸ç”¨å°æ³¢åŸº\n\n\n\nå°æ³¢ç±»å‹\nç‰¹ç‚¹\né€‚ç”¨åœºæ™¯\n\n\n\n\nHaar\nä¸è¿ç»­ï¼Œè®¡ç®—ç®€å•\nå¿«é€Ÿå»å™ªã€å‹ç¼©\n\n\nDaubechies (dbN)\nç´§æ”¯æ’‘ï¼Œæ­£äº¤\nä¿¡å·åˆ†è§£ã€ç‰¹å¾æå–\n\n\nSymlets\nè¿‘ä¼¼å¯¹ç§°\nä¿¡å·é‡æ„\n\n\nCoiflets\né«˜é˜¶æ¶ˆå¤±çŸ©\nä¿¡å·å¹³æ»‘\n\n\nMorlet\nå¤æ•°ï¼Œé¢‘åŸŸå±€åŸŸæ€§å¥½\næ—¶é¢‘åˆ†æ\n\n\nMexican Hat\nå¯¹ç§°ï¼ŒäºŒé˜¶å¯¼æ•°\nè¾¹ç¼˜æ£€æµ‹",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å°æ³¢å˜æ¢ (Wavelet Transform)"
    ]
  },
  {
    "objectID": "1096-wavelet-transform.html#r-è¯­è¨€å°æ³¢å˜æ¢å®ç°",
    "href": "1096-wavelet-transform.html#r-è¯­è¨€å°æ³¢å˜æ¢å®ç°",
    "title": "å°æ³¢å˜æ¢ï¼šæ—¶é¢‘åˆ†æå®Œå…¨æŒ‡å—",
    "section": "R è¯­è¨€å°æ³¢å˜æ¢å®ç°",
    "text": "R è¯­è¨€å°æ³¢å˜æ¢å®ç°\n\nå®‰è£…å¿…è¦çš„åŒ…\n\n# å°æ³¢å˜æ¢ç›¸å…³åŒ…\ninstall.packages(\"wavelets\")      # ç¦»æ•£å°æ³¢å˜æ¢\ninstall.packages(\"WaveletComp\")   # æ—¶é—´åºåˆ—å°æ³¢åˆ†æ\ninstall.packages(\"wmtsa\")         # æ°”è±¡/ç”Ÿæ€æ—¶é—´åºåˆ—\ninstall.packages(\"biwavelet\")     # äº¤å‰å°æ³¢åˆ†æ",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å°æ³¢å˜æ¢ (Wavelet Transform)"
    ]
  },
  {
    "objectID": "1096-wavelet-transform.html#è¿ç»­å°æ³¢å˜æ¢-cwt-1",
    "href": "1096-wavelet-transform.html#è¿ç»­å°æ³¢å˜æ¢-cwt-1",
    "title": "å°æ³¢å˜æ¢ï¼šæ—¶é¢‘åˆ†æå®Œå…¨æŒ‡å—",
    "section": "è¿ç»­å°æ³¢å˜æ¢ (CWT)",
    "text": "è¿ç»­å°æ³¢å˜æ¢ (CWT)\n\nä½¿ç”¨ wavelets åŒ…\n\n# è¿ç»­å°æ³¢å˜æ¢ï¼ˆç®€åŒ–å®ç°ï¼‰\n# ç”±äº wavelets åŒ…ä¸»è¦æ”¯æŒ DWTï¼Œè¿™é‡Œæˆ‘ä»¬å®ç°ä¸€ä¸ªåŸºç¡€çš„ CWT\n\nlibrary(wavelets)\n\n# CWT åŸºç¡€å®ç°\ncwt_basic &lt;- function(signal, scales, wavelet_func) {\n    n &lt;- length(signal)\n    cwt_matrix &lt;- matrix(0, nrow = length(scales), ncol = n)\n\n    for (i in seq_along(scales)) {\n        scale &lt;- scales[i]\n        for (j in 1:n) {\n            # å°æ³¢å·ç§¯ï¼ˆç®€åŒ–ç‰ˆï¼‰\n            for (k in 1:n) {\n                t &lt;- (j - k) / scale\n                cwt_matrix[i, j] &lt;- cwt_matrix[i, j] + signal[k] * wavelet_func(t)\n            }\n        }\n        cwt_matrix[i, ] &lt;- cwt_matrix[i, ] / sqrt(scale)\n    }\n\n    return(cwt_matrix)\n}\n\n# Morlet å°æ³¢\nmorlet &lt;- function(t) {\n    exp(-t^2 / 2) * cos(5 * t)\n}\n\n# å®šä¹‰å°ºåº¦ï¼ˆå¯¹åº”é¢‘ç‡ï¼‰\nscales &lt;- c(10, 20, 40, 80, 160)  # å°ºåº¦å€¼\nfrequencies &lt;- fs / scales  # å¯¹åº”é¢‘ç‡\n\n# è®¡ç®— CWT\ncwt_result &lt;- cwt_basic(sig, scales, morlet)\n\n\n\nCWT å¯è§†åŒ–\n\n# å°† CWT çŸ©é˜µè½¬æ¢ä¸ºé•¿æ ¼å¼æ•°æ®æ¡†\ncwt_df &lt;- expand.grid(\n    Time = t,\n    Scale = scales,\n    Frequency = frequencies\n)\ncwt_df$Power &lt;- as.vector(cwt_result^2)\n\n# è¿‡æ»¤æ˜¾ç¤ºèŒƒå›´\ncwt_df_filtered &lt;- cwt_df %&gt;%\n    filter(Frequency &gt;= 5 & Frequency &lt;= 100)\n\n# ç»˜åˆ¶æ—¶é¢‘å›¾\nggplot(cwt_df_filtered, aes(x = Time, y = Frequency, fill = Power)) +\n    geom_tile() +\n    scale_fill_viridis_c(option = \"plasma\") +\n    geom_vline(xintercept = 1, linetype = \"dashed\", color = \"white\", linewidth = 0.8) +\n    labs(\n        title = \"è¿ç»­å°æ³¢å˜æ¢æ—¶é¢‘å›¾\",\n        subtitle = \"å¯ä»¥çœ‹åˆ° t=1s å¤„é¢‘ç‡æˆåˆ†å‘ç”Ÿå˜åŒ–\",\n        x = \"Time (s)\",\n        y = \"Frequency (Hz)\",\n        fill = \"Power\"\n    ) +\n    theme_minimal(base_size = 14) +\n    coord_cartesian(ylim = c(5, 60))",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å°æ³¢å˜æ¢ (Wavelet Transform)"
    ]
  },
  {
    "objectID": "1096-wavelet-transform.html#ç¦»æ•£å°æ³¢å˜æ¢-dwt-1",
    "href": "1096-wavelet-transform.html#ç¦»æ•£å°æ³¢å˜æ¢-dwt-1",
    "title": "å°æ³¢å˜æ¢ï¼šæ—¶é¢‘åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç¦»æ•£å°æ³¢å˜æ¢ (DWT)",
    "text": "ç¦»æ•£å°æ³¢å˜æ¢ (DWT)\n\nä½¿ç”¨ wavelets åŒ…\n\nlibrary(wavelets)\n\n# æ‰§è¡Œç¦»æ•£å°æ³¢å˜æ¢\ndwt_result &lt;- dwt(sig,\n    filter = \"d4\",  # Daubechies 4 å°æ³¢\n    n.levels = 6,   # åˆ†è§£å±‚æ•°\n    boundary = \"reflection\"  # è¾¹ç•Œå¤„ç†æ–¹å¼\n)\n\n# æŸ¥çœ‹åˆ†è§£ç»“æœ\nprint(dwt_result)\n\nDWT Wavelet Coefficients:\nLevel 1\nSeries 1: -7.8904e-02 -5.5888e-02 -1.8846e-01 ... 1.1994e-01 -1.8697e-01 2.7906e-01\nLevel 2\nSeries 1: -3.2259e-01 2.1301e-02 -2.5739e-01 ... -1.8705e-01 -1.7038e-01 3.6417e-01\nLevel 3\nSeries 1: -2.1139e-01 -1.9381e-01 9.5306e-02 ... 3.8650e-02 2.4537e-02 -2.0040e-02\nLevel 4\nSeries 1: -8.4148e-01 4.3752e-01 5.3848e-01 ... 2.1647e-01 4.2174e-01 -5.4967e-02\nLevel 5\nSeries 1: -7.3033e-01 1.8488e+00 -1.1152e+00 ... 9.6673e-02 -2.2574e+00 1.4198e+00\nLevel 6\nSeries 1: 5.0308e+00 -6.2845e+00 2.5343e+00 ... 3.6992e+00 1.8163e+00 -5.7872e+00\n\nDWT Scaling Coefficients:\nLevel 1\nSeries 1: -1.1297e-01 4.8119e-01 5.3317e-01 ... 7.5885e-01 3.5679e-01 3.1772e-02\nLevel 2\nSeries 1: 6.2097e-01 7.7493e-01 1.4579e+00 ... 1.2376e+00 6.9343e-01 4.3392e-01\nLevel 3\nSeries 1: 9.0124e-01 2.1167e+00 2.3965e+00 ... 2.3247e+00 2.2135e+00 8.4096e-01\nLevel 4\nSeries 1: 1.6782e+00 3.7086e+00 2.6862e+00 ... 2.0442e+00 3.9054e+00 2.4051e+00\nLevel 5\nSeries 1: 3.2287e+00 2.2672e+00 -5.1424e+00 ... -3.8754e+00 -1.2108e+00 5.1269e+00\nLevel 6\nSeries 1: 7.1881e-01 1.8674e+00 -3.2111e+00 ... -3.2114e+00 2.4781e+00 1.7610e-02\n\nLength of Original Series: 4002\nWavelet Coefficients Aligned? FALSE\nCenter of Energy Method Used? FALSE\n\nBoundary Method: Reflection\nNumber of Boundaries Coefficients per Level:\nLevel 1: 1\nLevel 2: 2\nLevel 3: 2\nLevel 4: 2\nLevel 5: 2\nLevel 6: 2\n\nFilter Class: Daubechies\nFilter Name: D4\nFilter Length: 4\n\n\n\n\nè‡ªå®šä¹‰ DWT å¯è§†åŒ–\n\n# æå–å„å±‚åˆ†è§£ç»“æœ\nW &lt;- dwt_result@W  # å°æ³¢ç³»æ•°ï¼ˆç»†èŠ‚ï¼‰\nV &lt;- dwt_result@V  # å°ºåº¦ç³»æ•°ï¼ˆè¿‘ä¼¼ï¼‰\nlevels &lt;- length(W)\n\n# ä¸ºæ¯ä¸€å±‚åˆ›å»ºç»˜å›¾æ•°æ®\ndwt_plot_data &lt;- data.frame()\n\n# åŸå§‹ä¿¡å·\ndwt_plot_data &lt;- rbind(dwt_plot_data, data.frame(\n    level = \"Original\",\n    index = seq_along(sig),\n    value = sig\n))\n\n# å„å±‚ç»†èŠ‚å’Œè¿‘ä¼¼\nfor (i in 1:levels) {\n    # ç»†èŠ‚ç³»æ•°\n    w_values &lt;- rep(W[[i]], 2^i)\n    w_index &lt;- seq_along(w_values)\n    dwt_plot_data &lt;- rbind(dwt_plot_data, data.frame(\n        level = paste0(\"Detail D\", i),\n        index = w_index,\n        value = w_values\n    ))\n\n    # è¿‘ä¼¼ç³»æ•°\n    v_values &lt;- rep(V[[i]], 2^i)\n    v_index &lt;- seq_along(v_values)\n    dwt_plot_data &lt;- rbind(dwt_plot_data, data.frame(\n        level = paste0(\"Approx A\", i),\n        index = v_index,\n        value = v_values\n    ))\n}\n\n# å› å­åŒ–å¹¶æ’åº\ndwt_plot_data$level &lt;- factor(dwt_plot_data$level,\n    levels = c(\"Original\",\n                paste0(\"Detail D\", levels:1),\n                paste0(\"Approx A\", levels:1))\n)\n\n# è½¬æ¢æ—¶é—´ä¸ºç§’\ndwt_plot_data$time &lt;- dwt_plot_data$index / fs\n\n# ç»˜å›¾\nggplot(dwt_plot_data, aes(x = time, y = value)) +\n    geom_line(linewidth = 0.4) +\n    facet_wrap(~ level, scales = \"free\", ncol = 1,\n               strip.position = \"right\") +\n    labs(\n        title = \"ç¦»æ•£å°æ³¢å˜æ¢åˆ†è§£ç»“æœ\",\n        subtitle = \"D = ç»†èŠ‚ç³»æ•°ï¼ˆé«˜é¢‘ï¼‰ï¼ŒA = è¿‘ä¼¼ç³»æ•°ï¼ˆä½é¢‘ï¼‰\",\n        x = \"Time (s)\",\n        y = \"\"\n    ) +\n    theme_minimal(base_size = 12) +\n    theme(strip.text = element_text(face = \"bold\"),\n          strip.background = element_rect(fill = \"grey80\"))\n\n\n\n\n\n\n\n\n\n\nå°æ³¢é‡æ„ä¸ä¿¡å·å»å™ª\n\n# å°æ³¢é˜ˆå€¼å»å™ª - ç®€åŒ–æ¼”ç¤º\n# æ³¨æ„ï¼šå®Œæ•´çš„å»å™ªéœ€è¦æ›´ç²¾ç»†çš„é‡æ„ï¼Œè¿™é‡Œå±•ç¤ºæ¦‚å¿µ\n\n# 1. æå–å°æ³¢ç³»æ•°\nW &lt;- dwt_result@W  # ç»†èŠ‚ç³»æ•°ï¼ˆé«˜é¢‘ï¼‰\nV &lt;- dwt_result@V  # å°ºåº¦ç³»æ•°ï¼ˆä½é¢‘ï¼‰\n\n# 2. è®¡ç®—å„å±‚èƒ½é‡å æ¯”\nn_levels &lt;- length(W)\nenergy_by_level &lt;- sapply(1:n_levels, function(i) {\n    sum(W[[i]]^2) / sum(sig^2) * 100\n})\n\ncat(\"å„å±‚èƒ½é‡å æ¯” (%):\\n\")\n\nå„å±‚èƒ½é‡å æ¯” (%):\n\nprint(round(energy_by_level, 2))\n\n[1]  7.97  6.03 27.33 65.13 13.64 64.40\n\n# 3. ç®€å•çš„å»å™ªæ¼”ç¤ºï¼šåªä¿ç•™ä¸»è¦é¢‘ç‡æˆåˆ†\n# æå–è¿‘ä¼¼ç³»æ•°ï¼ˆä½é¢‘è¶‹åŠ¿ï¼‰ä½œä¸ºå»å™ªä¿¡å·\napprox_coeffs &lt;- V[[length(V)]]\n# é‡é‡‡æ ·åˆ°åŸå§‹é•¿åº¦\nsig_denoised &lt;- approx(seq_along(approx_coeffs), approx_coeffs,\n                     seq_along(sig), method = \"constant\")$y\n\ncat(\"åŸå§‹ä¿¡å·æ ‡å‡†å·®:\", round(sd(sig), 4), \"\\n\")\n\nåŸå§‹ä¿¡å·æ ‡å‡†å·®: 0.7352 \n\ncat(\"è¿‘ä¼¼ä¿¡å·æ ‡å‡†å·®:\", round(sd(sig_denoised, na.rm = TRUE), 4), \"\\n\")\n\nè¿‘ä¼¼ä¿¡å·æ ‡å‡†å·®: 1.6053 \n\n# 5. æ¯”è¾ƒåŸå§‹ä¿¡å·å’Œå»å™ªä¿¡å·\ncomparison_df &lt;- data.frame(\n    time = t,\n    original = sig,\n    denoised = sig_denoised\n)\n\n# ç»˜åˆ¶å¯¹æ¯”å›¾\ncomparison_long &lt;- pivot_longer(comparison_df,\n    cols = c(original, denoised),\n    names_to = \"Signal\", values_to = \"Value\"\n)\n\nggplot(comparison_long, aes(x = time, y = Value, color = Signal)) +\n    geom_line(linewidth = 0.6) +\n    geom_vline(xintercept = 1, linetype = \"dashed\", color = \"grey50\") +\n    scale_color_manual(values = c(original = \"#4e79a7\", denoised = \"#e15759\")) +\n    labs(\n        title = \"å°æ³¢å»å™ªæ•ˆæœ\",\n        subtitle = \"è½¯é˜ˆå€¼å»å™ªåï¼Œä¿¡å·æ›´å¹³æ»‘ä½†ä¿ç•™äº†ä¸»è¦ç‰¹å¾\",\n        x = \"Time (s)\",\n        y = \"Amplitude\"\n    ) +\n    theme_minimal(base_size = 14)\n\n\n\n\n\n\n\n\n\n\nè®¡ç®—å»å™ªä¿¡å™ªæ¯” (SNR)\n\n# è®¡ç®—ä¿¡å™ªæ¯”\ncalculate_snr &lt;- function(original, denoised) {\n    signal_power &lt;- sum(original^2)\n    noise_power &lt;- sum((original - denoised)^2)\n    10 * log10(signal_power / noise_power)\n}\n\n# è®¡ç®—åŸå§‹ä¿¡å·çš„ä¿¡å™ªæ¯”ï¼ˆå‡è®¾å™ªå£°æ–¹å·®å·²çŸ¥ï¼‰\noriginal_snr &lt;- calculate_snr(\n    sig - rnorm(length(sig), 0, 0.2),\n    sig - rnorm(length(sig), 0, 0.2)\n)\n\n# è®¡ç®—å»å™ªåçš„ä¿¡å™ªæ¯”\ndenoised_snr &lt;- calculate_snr(\n    sig_denoised - sig,\n    rep(0, length(sig))\n)\n\ncat(\"åŸå§‹ä¿¡å· SNR:\", round(original_snr, 2), \"dB\\n\")\n\nåŸå§‹ä¿¡å· SNR: 8.58 dB\n\ncat(\"å»å™ªå SNR:\", round(denoised_snr, 2), \"dB\\n\")\n\nå»å™ªå SNR: NA dB\n\ncat(\"SNR æå‡:\", round(denoised_snr - original_snr, 2), \"dB\\n\")\n\nSNR æå‡: NA dB",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å°æ³¢å˜æ¢ (Wavelet Transform)"
    ]
  },
  {
    "objectID": "1096-wavelet-transform.html#å°æ³¢ç³»æ•°ç»Ÿè®¡ç‰¹æ€§",
    "href": "1096-wavelet-transform.html#å°æ³¢ç³»æ•°ç»Ÿè®¡ç‰¹æ€§",
    "title": "å°æ³¢å˜æ¢ï¼šæ—¶é¢‘åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å°æ³¢ç³»æ•°ç»Ÿè®¡ç‰¹æ€§",
    "text": "å°æ³¢ç³»æ•°ç»Ÿè®¡ç‰¹æ€§\n\nå°æ³¢ç³»æ•°åˆ†å¸ƒ\n\n# æå–å°æ³¢ç³»æ•°ç”¨äºåˆ†æ\ncoeffs_df &lt;- data.frame()\n\nfor (i in 1:levels) {\n    coeffs_df &lt;- rbind(coeffs_df, data.frame(\n        Level = paste0(\"D\", i),\n        Coefficient = as.vector(W[[i]])\n    ))\n}\n\n# ç»˜åˆ¶å°æ³¢ç³»æ•°ç›´æ–¹å›¾\nggplot(coeffs_df, aes(x = Coefficient)) +\n    geom_histogram(aes(fill = Level), bins = 50, alpha = 0.7) +\n    facet_wrap(~ Level, scales = \"free\", ncol = 3) +\n    labs(\n        title = \"å°æ³¢ç³»æ•°åˆ†å¸ƒ\",\n        subtitle = \"å°æ³¢ç³»æ•°é€šå¸¸å‘ˆç°ç¨€ç–åˆ†å¸ƒï¼ˆå°–å³°åšå°¾ï¼‰\",\n        x = \"Coefficient Value\",\n        y = \"Frequency\",\n        fill = \"Level\"\n    ) +\n    theme_minimal(base_size = 12) +\n    scale_fill_viridis_d()\n\n\n\n\n\n\n\n\n\n\nå„å±‚èƒ½é‡åˆ†æ\n\n# è®¡ç®—å„å±‚èƒ½é‡\nenergy_analysis &lt;- data.frame(\n    Level = paste0(\"D\", 1:levels),\n    Energy = sapply(W, function(w) sum(w^2)),\n    StdDev = sapply(W, sd)\n)\n\nenergy_analysis &lt;- energy_analysis %&gt;%\n    mutate(Energy_Percent = Energy / sum(Energy) * 100)\n\n# ç»˜åˆ¶èƒ½é‡åˆ†å¸ƒ\nggplot(energy_analysis, aes(x = Level, y = Energy_Percent)) +\n    geom_col(aes(fill = Level), show.legend = FALSE) +\n    geom_text(aes(label = paste0(round(Energy_Percent, 1), \"%\")),\n              vjust = -0.5, size = 3.5) +\n    scale_fill_viridis_d() +\n    labs(\n        title = \"å„å±‚å°æ³¢ç³»æ•°èƒ½é‡å æ¯”\",\n        subtitle = \"é«˜é¢‘å±‚ï¼ˆD1, D2ï¼‰é€šå¸¸åŒ…å«å™ªå£°ï¼Œä½é¢‘å±‚åŒ…å«ä¸»è¦ä¿¡å·\",\n        x = \"Decomposition Level\",\n        y = \"Energy (%)\"\n    ) +\n    theme_minimal(base_size = 14)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å°æ³¢å˜æ¢ (Wavelet Transform)"
    ]
  },
  {
    "objectID": "1096-wavelet-transform.html#å®é™…åº”ç”¨æ¡ˆä¾‹",
    "href": "1096-wavelet-transform.html#å®é™…åº”ç”¨æ¡ˆä¾‹",
    "title": "å°æ³¢å˜æ¢ï¼šæ—¶é¢‘åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å®é™…åº”ç”¨æ¡ˆä¾‹",
    "text": "å®é™…åº”ç”¨æ¡ˆä¾‹\n\næ¡ˆä¾‹ 1ï¼šECG ä¿¡å·åˆ†æ\n\n# æ¨¡æ‹Ÿ ECG ä¿¡å·\ngenerate_ecg &lt;- function(duration = 5, fs = 250) {\n    t &lt;- seq(0, duration, 1 / fs)\n    hr &lt;- 75  # å¿ƒç‡ (bpm)\n    p_ecg &lt;- numeric(length(t))\n\n    for (i in 1:length(t)) {\n        # è®¡ç®—å½“å‰ç›¸ä½\n        phase &lt;- (t[i] * hr / 60) %% 1\n\n        # P æ³¢ (0.0-0.2)\n        if (phase &gt;= 0.0 && phase &lt; 0.2) {\n            p_ecg[i] &lt;- 0.25 * sin(pi * phase / 0.2)\n        }\n        # QRS å¤åˆæ³¢ (0.3-0.4)\n        else if (phase &gt;= 0.3 && phase &lt; 0.35) {\n            p_ecg[i] &lt;- -0.15 * sin(pi * (phase - 0.3) / 0.05)\n        }\n        else if (phase &gt;= 0.35 && phase &lt; 0.4) {\n            p_ecg[i] &lt;- 1.0 * sin(pi * (phase - 0.35) / 0.05)\n        }\n        else if (phase &gt;= 0.4 && phase &lt; 0.45) {\n            p_ecg[i] &lt;- -0.25 * sin(pi * (phase - 0.4) / 0.05)\n        }\n        # T æ³¢ (0.6-0.8)\n        else if (phase &gt;= 0.6 && phase &lt; 0.8) {\n            p_ecg[i] &lt;- 0.35 * sin(pi * (phase - 0.6) / 0.2)\n        }\n    }\n\n    # æ·»åŠ åŸºçº¿æ¼‚ç§»å’Œå™ªå£°\n    baseline &lt;- 0.2 * sin(2 * pi * 0.5 * t)  # å‘¼å¸é¢‘ç‡\n    noise &lt;- rnorm(length(t), 0, 0.05)\n\n    return(list(\n        signal = p_ecg + baseline + noise,\n        time = t,\n        fs = fs\n    ))\n}\n\n# ç”Ÿæˆ ECG ä¿¡å·\necg_data &lt;- generate_ecg(duration = 10, fs = 250)\necg_signal &lt;- ecg_data$signal\necg_time &lt;- ecg_data$time\necg_fs &lt;- ecg_data$fs\n\n# ç»˜åˆ¶ ECG ä¿¡å·\necg_df &lt;- data.frame(time = ecg_time, signal = ecg_signal)\n\nggplot(ecg_df, aes(x = time, y = signal)) +\n    geom_line(color = \"#e15759\", linewidth = 0.5) +\n    labs(\n        title = \"æ¨¡æ‹Ÿ ECG ä¿¡å·\",\n        subtitle = \"åŒ…å« P æ³¢ã€QRS å¤åˆæ³¢ã€T æ³¢ï¼Œä»¥åŠåŸºçº¿æ¼‚ç§»å’Œå™ªå£°\",\n        x = \"Time (s)\",\n        y = \"Amplitude (mV)\"\n    ) +\n    theme_minimal(base_size = 14)\n\n\n\n\n\n\n\n\n\n\nECG ä¿¡å·çš„å°æ³¢åˆ†è§£\n\n# å¯¹ ECG è¿›è¡Œ DWT åˆ†è§£\necg_dwt &lt;- dwt(ecg_signal,\n    filter = \"d4\",\n    n.levels = 5,\n    boundary = \"reflection\"\n)\n\n# æŸ¥çœ‹åˆ†è§£ç»“æœ\nprint(ecg_dwt)\n\nDWT Wavelet Coefficients:\nLevel 1\nSeries 1: -3.5209e-02 3.4111e-02 3.7842e-03 ... -7.0530e-02 8.0458e-02 -3.3447e-02\nLevel 2\nSeries 1: -5.2773e-02 7.3055e-02 -6.2396e-03 ... 2.1639e-02 -4.2581e-02 7.7699e-04\nLevel 3\nSeries 1: -9.5830e-02 -2.1107e-02 -1.3903e-02 ... -1.2397e-02 6.4631e-02 6.1983e-02\nLevel 4\nSeries 1: -3.6143e-01 1.5526e-01 -1.0823e-01 ... 1.1064e-01 -7.2190e-02 1.5352e-01\nLevel 5\nSeries 1: -2.1746e-01 1.7891e-01 -3.1450e-01 ... -3.2270e-01 1.5675e+00 2.4816e-02\n\nDWT Scaling Coefficients:\nLevel 1\nSeries 1: 1.3010e-02 5.7761e-02 1.9405e-01 ... 1.4338e-01 9.1555e-02 3.5270e-02\nLevel 2\nSeries 1: 1.3809e-01 2.6507e-01 4.8439e-01 ... 4.3516e-01 2.3746e-01 1.0055e-01\nLevel 3\nSeries 1: 2.3535e-01 6.9895e-01 8.6340e-01 ... 8.5732e-01 6.8031e-01 2.8156e-01\nLevel 4\nSeries 1: 9.7674e-01 9.5928e-01 4.0034e-01 ... 5.3306e-01 1.1201e+00 7.9683e-01\nLevel 5\nSeries 1: 1.3140e+00 6.5519e-01 2.0054e+00 ... 1.4443e+00 8.2016e-01 1.4233e+00\n\nLength of Original Series: 5002\nWavelet Coefficients Aligned? FALSE\nCenter of Energy Method Used? FALSE\n\nBoundary Method: Reflection\nNumber of Boundaries Coefficients per Level:\nLevel 1: 1\nLevel 2: 2\nLevel 3: 2\nLevel 4: 2\nLevel 5: 2\n\nFilter Class: Daubechies\nFilter Name: D4\nFilter Length: 4\n\n\n\n\nECG ç‰¹å¾æå–ï¼šæ£€æµ‹ R æ³¢\n\n# ä½¿ç”¨å°æ³¢ç³»æ•°æ£€æµ‹ R æ³¢ï¼ˆQRS å¤åˆæ³¢ï¼‰\n# R æ³¢é€šå¸¸åœ¨ D3 æˆ– D4 å±‚æœ€æ˜æ˜¾\ndetail_level &lt;- 3  # é€‰æ‹© D3 å±‚\nr_wave_coeffs &lt;- ecg_dwt@W[[detail_level]]\n\n# ç®€å•çš„å³°å€¼æ£€æµ‹\nfind_peaks &lt;- function(signal, threshold = 0.5, min_distance = 20) {\n    peaks &lt;- c()\n    threshold &lt;- threshold * max(signal)\n\n    for (i in 2:(length(signal) - 1)) {\n        if (signal[i] &gt; signal[i - 1] &&\n            signal[i] &gt; signal[i + 1] &&\n            signal[i] &gt; threshold) {\n            if (length(peaks) == 0 ||\n                i - peaks[length(peaks)] &gt; min_distance) {\n                peaks &lt;- c(peaks, i)\n            }\n        }\n    }\n\n    return(peaks)\n}\n\n# æ£€æµ‹ R æ³¢\nr_peaks_idx &lt;- find_peaks(abs(r_wave_coeffs), threshold = 0.3, min_distance = 50)\nr_peaks_time &lt;- r_peaks_idx / ecg_fs * 2^detail_level\n\n# è®¡ç®—å¿ƒç‡é—´éš”\nrr_intervals &lt;- diff(r_peaks_time)\nheart_rate &lt;- 60 / mean(rr_intervals)\n\n# å¯è§†åŒ–æ£€æµ‹ç»“æœ\necg_detection_df &lt;- data.frame(time = ecg_time, signal = ecg_signal)\n\nggplot(ecg_detection_df, aes(x = time, y = signal)) +\n    geom_line(color = \"grey50\", linewidth = 0.4) +\n    geom_vline(xintercept = r_peaks_time, color = \"#e15759\",\n               linetype = \"dashed\", linewidth = 0.8) +\n    labs(\n        title = \"åŸºäºå°æ³¢å˜æ¢çš„ R æ³¢æ£€æµ‹\",\n        subtitle = paste0(\"æ£€æµ‹åˆ° \", length(r_peaks_time), \" ä¸ª R æ³¢ï¼Œå¿ƒç‡ â‰ˆ \",\n                         round(heart_rate, 1), \" bpm\"),\n        x = \"Time (s)\",\n        y = \"Amplitude (mV)\"\n    ) +\n    theme_minimal(base_size = 14)\n\n\n\n\n\n\n\n\n\n\n\næ¡ˆä¾‹ 2ï¼šæ—¶é—´åºåˆ—å»å™ªï¼ˆé‡‘èæ•°æ®ï¼‰\n\n# æ¨¡æ‹Ÿé‡‘èæ—¶é—´åºåˆ—\ngenerate_ts &lt;- function(n = 1000) {\n    t &lt;- 1:n\n    # è¶‹åŠ¿\n    trend &lt;- 0.5 + 0.001 * t\n\n    # å‘¨æœŸæ€§\n    seasonality &lt;- 0.3 * sin(2 * pi * t / 100) +\n                   0.2 * sin(2 * pi * t / 50)\n\n    # éšæœºæ¸¸èµ°\n    noise &lt;- cumsum(rnorm(n, 0, 0.1))\n\n    # ç»„åˆ\n    ts &lt;- trend + seasonality + noise\n\n    return(list(\n        signal = ts,\n        time = t,\n        trend = trend,\n        seasonality = seasonality,\n        noise = noise\n    ))\n}\n\n# ç”Ÿæˆæ—¶é—´åºåˆ—\nts_data &lt;- generate_ts(500)\nts_signal &lt;- ts_data$signal\nts_time &lt;- ts_data$time\n\n# ç»˜åˆ¶åŸå§‹æ—¶é—´åºåˆ—\nts_df &lt;- data.frame(time = ts_time, signal = ts_signal)\n\nggplot(ts_df, aes(x = time, y = signal)) +\n    geom_line(color = \"#4e79a7\", linewidth = 0.6) +\n    labs(\n        title = \"æ¨¡æ‹Ÿé‡‘èæ—¶é—´åºåˆ—\",\n        subtitle = \"åŒ…å«è¶‹åŠ¿ã€å‘¨æœŸæ€§å’Œéšæœºå™ªå£°\",\n        x = \"Time\",\n        y = \"Value\"\n    ) +\n    theme_minimal(base_size = 14)\n\n\n\n\n\n\n\n\n\n\nå°æ³¢å»å™ªï¼ˆä¿ç•™è¶‹åŠ¿å’Œå‘¨æœŸæ€§ï¼‰\n\n# è½¯é˜ˆå€¼å‡½æ•°\nthreshold &lt;- function(coeffs, thr) {\n    sapply(coeffs, function(c) {\n        sign(c) * pmax(abs(c) - thr, 0)\n    })\n}\n\n# å°æ³¢åˆ†è§£\nts_dwt &lt;- dwt(ts_signal,\n    filter = \"d4\",\n    n.levels = 6,\n    boundary = \"reflection\"\n)\n\n# å»å™ªç­–ç•¥ï¼š\n# 1. ä¿ç•™è¿‘ä¼¼ç³»æ•° A6ï¼ˆåŒ…å«ä¸»è¦è¶‹åŠ¿ï¼‰\n# 2. ä¿ç•™ D4, D5ï¼ˆåŒ…å«å‘¨æœŸæ€§ï¼‰\n# 3. å»é™¤æˆ–å‡å¼± D1, D2, D3ï¼ˆé«˜é¢‘å™ªå£°ï¼‰\n\n# åˆ›å»ºä¿®æ”¹åçš„ DWT å¯¹è±¡\nts_dwt_denoised &lt;- ts_dwt\n\n# å¯¹é«˜é¢‘å±‚åº”ç”¨æ›´å¼ºçš„é˜ˆå€¼\nfor (i in 1:3) {\n    thr &lt;- 0.5 * sd(ts_dwt@W[[i]])\n    ts_dwt_denoised@W[[i]] &lt;- threshold(ts_dwt@W[[i]], thr)\n}\n\n# å¯¹ä¸­é¢‘å±‚åº”ç”¨è¾ƒå¼±çš„é˜ˆå€¼\nfor (i in 4:6) {\n    thr &lt;- 1.5 * sd(ts_dwt@W[[i]])\n    ts_dwt_denoised@W[[i]] &lt;- threshold(ts_dwt@W[[i]], thr)\n}\n\n# ç®€åŒ–é‡æ„ï¼šä½¿ç”¨æœ€ä½é¢‘è¿‘ä¼¼ç³»æ•°ä½œä¸ºå»å™ªä¿¡å·\nts_approx &lt;- ts_dwt_denoised@V[[length(ts_dwt_denoised@V)]]\nts_denoised &lt;- approx(seq_along(ts_approx), ts_approx,\n    seq_along(ts_signal), method = \"constant\")$y\n\n# ç»˜åˆ¶å¯¹æ¯”\nts_compare_df &lt;- data.frame(\n    time = ts_time,\n    original = ts_signal,\n    denoised = ts_denoised,\n    trend = ts_data$trend\n)\n\nts_compare_long &lt;- pivot_longer(ts_compare_df,\n    cols = c(original, denoised, trend),\n    names_to = \"Signal\", values_to = \"Value\"\n)\n\nggplot(ts_compare_long, aes(x = time, y = Value, color = Signal)) +\n    geom_line(linewidth = 0.6) +\n    scale_color_manual(\n        values = c(original = \"#4e79a7\", denoised = \"#e15759\", trend = \"#76b7b2\"),\n        labels = c(\"Original\", \"Denoised\", \"Trend\")\n    ) +\n    labs(\n        title = \"æ—¶é—´åºåˆ—å°æ³¢å»å™ª\",\n        subtitle = \"å»å™ªåä¿ç•™äº†è¶‹åŠ¿å’Œå‘¨æœŸæ€§ï¼Œå‡å°‘äº†éšæœºå™ªå£°\",\n        x = \"Time\",\n        y = \"Value\",\n        color = \"Signal\"\n    ) +\n    theme_minimal(base_size = 14)\n\n\n\n\n\n\n\n\n\n\nè¯„ä¼°å»å™ªæ•ˆæœ\n\n# è®¡ç®—åŸå§‹ä¿¡å·ä¸­å™ªå£°çš„æ ‡å‡†å·®\ntrue_noise_sd &lt;- sd(ts_data$noise)\n\n# è®¡ç®—å»å™ªåæ®‹å·®çš„æ ‡å‡†å·®\nresiduals &lt;- ts_denoised - ts_data$trend - ts_data$seasonality\ndenoised_noise_sd &lt;- sd(residuals)\n\ncat(\"åŸå§‹å™ªå£°æ ‡å‡†å·®:\", round(true_noise_sd, 4), \"\\n\")\n\nåŸå§‹å™ªå£°æ ‡å‡†å·®: 0.5927 \n\ncat(\"å»å™ªåå™ªå£°æ ‡å‡†å·®:\", round(denoised_noise_sd, 4), \"\\n\")\n\nå»å™ªåå™ªå£°æ ‡å‡†å·®: NA \n\ncat(\"å™ªå£°é™ä½:\", round((1 - denoised_noise_sd / true_noise_sd) * 100, 1), \"%\\n\")\n\nå™ªå£°é™ä½: NA %\n\n# ç»˜åˆ¶æ®‹å·®åˆ†å¸ƒ\nresidual_df &lt;- data.frame(residual = residuals)\n\nggplot(residual_df, aes(x = residual)) +\n    geom_histogram(aes(y = after_stat(density)), bins = 30,\n                   fill = \"#4e79a7\", alpha = 0.7) +\n    geom_density(color = \"#e15759\", linewidth = 1) +\n    geom_vline(xintercept = c(-1, 1) * denoised_noise_sd,\n               linetype = \"dashed\", color = \"grey50\") +\n    labs(\n        title = \"å»å™ªæ®‹å·®åˆ†å¸ƒ\",\n        subtitle = \"ç†æƒ³æƒ…å†µä¸‹æ®‹å·®åº”æœä»æ­£æ€åˆ†å¸ƒ N(0, ÏƒÂ²)\",\n        x = \"Residual\",\n        y = \"Density\"\n    ) +\n    theme_minimal(base_size = 14)",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å°æ³¢å˜æ¢ (Wavelet Transform)"
    ]
  },
  {
    "objectID": "1096-wavelet-transform.html#å°æ³¢åŒ…å˜æ¢",
    "href": "1096-wavelet-transform.html#å°æ³¢åŒ…å˜æ¢",
    "title": "å°æ³¢å˜æ¢ï¼šæ—¶é¢‘åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å°æ³¢åŒ…å˜æ¢",
    "text": "å°æ³¢åŒ…å˜æ¢\nå°æ³¢åŒ…å˜æ¢ï¼ˆWavelet Packet Transformï¼‰æ˜¯å°æ³¢å˜æ¢çš„æ‰©å±•ï¼Œå®ƒå¯¹è¿‘ä¼¼å’Œç»†èŠ‚ç³»æ•°éƒ½è¿›è¡Œè¿›ä¸€æ­¥åˆ†è§£ï¼Œæä¾›äº†æ›´ç²¾ç»†çš„é¢‘åŸŸåˆ†è¾¨ç‡ã€‚\n\n# ä½¿ç”¨ wavelets åŒ…è¿›è¡Œå°æ³¢åŒ…å˜æ¢ï¼ˆæ¦‚å¿µæ¼”ç¤ºï¼‰\n# æ³¨æ„ï¼šwavelets åŒ…çš„å°æ³¢åŒ…åŠŸèƒ½æœ‰é™ï¼Œè¿™é‡Œå±•ç¤ºåŸºæœ¬æ¦‚å¿µ\n\n# å¤šåˆ†è¾¨ç‡åˆ†æçš„é¢‘ç‡åˆ’åˆ†\nlevels &lt;- 4\n\n# åˆ›å»ºé¢‘ç‡åˆ’åˆ†ç¤ºæ„å›¾\nfreq_data &lt;- data.frame()\n\nfor (j in 0:levels) {\n    n_subbands &lt;- 2^j\n    bandwidth &lt;- 1 / n_subbands\n\n    for (i in 0:(n_subbands - 1)) {\n        freq_data &lt;- rbind(freq_data, data.frame(\n            Level = j,\n            Subband = i,\n            FreqLow = i * bandwidth,\n            FreqHigh = (i + 1) * bandwidth,\n            FreqMid = (i + 0.5) * bandwidth\n        ))\n    }\n}\n\n# ç»˜åˆ¶é¢‘ç‡åˆ’åˆ†å›¾\nfreq_data$Level &lt;- factor(freq_data$Level)\n\nggplot(freq_data, aes(x = Level, y = FreqMid, height = bandwidth)) +\n    geom_rect(aes(ymin = FreqLow, ymax = FreqHigh, fill = Subband),\n              stat = \"identity\", alpha = 0.7, width = 0.8) +\n    scale_fill_viridis_c() +\n    labs(\n        title = \"å°æ³¢å˜æ¢çš„é¢‘ç‡åˆ’åˆ†ï¼ˆå¤šåˆ†è¾¨ç‡åˆ†æï¼‰\",\n        subtitle = \"æ¯å±‚åˆ†è§£å°†é¢‘å¸¦ä¸€åˆ†ä¸ºäºŒï¼Œä½é¢‘å’Œé«˜é¢‘äº¤æ›¿\",\n        x = \"Decomposition Level\",\n        y = \"Normalized Frequency\",\n        fill = \"Subband\"\n    ) +\n    theme_minimal(base_size = 14) +\n    coord_cartesian(ylim = c(0, 1))",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å°æ³¢å˜æ¢ (Wavelet Transform)"
    ]
  },
  {
    "objectID": "1096-wavelet-transform.html#å®ç”¨å‡½æ•°å°è£…",
    "href": "1096-wavelet-transform.html#å®ç”¨å‡½æ•°å°è£…",
    "title": "å°æ³¢å˜æ¢ï¼šæ—¶é¢‘åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å®ç”¨å‡½æ•°å°è£…",
    "text": "å®ç”¨å‡½æ•°å°è£…\n\nå°æ³¢å»å™ªå‡½æ•°\n\n# ç»¼åˆå°æ³¢å»å™ªå‡½æ•°\nwavelet_denoise &lt;- function(signal,\n                            filter = \"d4\",\n                            n.levels = 5,\n                            threshold_method = \"universal\") {\n    # æ‰§è¡Œ DWT\n    dwt_result &lt;- dwt(signal,\n        filter = filter,\n        n.levels = n.levels,\n        boundary = \"reflection\"\n    )\n\n    # è®¡ç®—é˜ˆå€¼\n    if (threshold_method == \"universal\") {\n        # é€šç”¨é˜ˆå€¼ï¼ˆåŸºäºæœ€ç»†å±‚ï¼‰\n        thr &lt;- sd(dwt_result@W[[1]]) * sqrt(2 * log(length(signal)))\n    } else if (threshold_method == \"sure\") {\n        # SURE é˜ˆå€¼\n        thr &lt;- median(abs(dwt_result@W[[1]])) / 0.6745\n    }\n\n    # è½¯é˜ˆå€¼å‡½æ•°\n    soft_threshold &lt;- function(c, t) {\n        sign(c) * pmax(abs(c) - t, 0)\n    }\n\n    # å¯¹ç»†èŠ‚ç³»æ•°åº”ç”¨é˜ˆå€¼\n    W_denoised &lt;- lapply(dwt_result@W, function(w) {\n        # é«˜é¢‘å±‚ä½¿ç”¨æ›´å¼ºé˜ˆå€¼\n        level_thr &lt;- thr * 2\n        soft_threshold(w, level_thr)\n    })\n\n    # ç®€åŒ–é‡å»ºï¼šä½¿ç”¨æœ€ä½é¢‘è¿‘ä¼¼ç³»æ•°ä½œä¸ºå»å™ªä¿¡å·\n    dwt_result@W &lt;- W_denoised\n    approx_coeffs &lt;- dwt_result@V[[length(dwt_result@V)]]\n    denoised &lt;- approx(seq_along(approx_coeffs), approx_coeffs,\n        seq_along(signal), method = \"constant\")$y\n\n    return(list(\n        denoised = denoised,\n        threshold = thr,\n        dwt = dwt_result\n    ))\n}\n\n# æµ‹è¯•å»å™ªå‡½æ•°\ntest_noisy &lt;- rnorm(1000) + 0.5 * sin(2 * pi * seq(0, 10, 0.01))\ndenoised_test &lt;- wavelet_denoise(test_noisy)\n\ncat(\"å»å™ªç»“æœ:\\n\")\n\nå»å™ªç»“æœ:\n\ncat(\"åŸå§‹ä¿¡å·æ ‡å‡†å·®:\", round(sd(test_noisy), 4), \"\\n\")\n\nåŸå§‹ä¿¡å·æ ‡å‡†å·®: 1.0616 \n\ncat(\"å»å™ªåæ ‡å‡†å·®:\", round(sd(denoised_test$denoised), 4), \"\\n\")\n\nå»å™ªåæ ‡å‡†å·®: NA \n\ncat(\"ä½¿ç”¨çš„é˜ˆå€¼:\", round(denoised_test$threshold, 4), \"\\n\")\n\nä½¿ç”¨çš„é˜ˆå€¼: 3.6005 \n\n\n\n\nå°æ³¢ç³»æ•°èƒ½é‡åˆ†æå‡½æ•°\n\n# åˆ†æå„å±‚å°æ³¢ç³»æ•°çš„èƒ½é‡åˆ†å¸ƒ\nanalyze_wavelet_energy &lt;- function(dwt_result) {\n    W &lt;- dwt_result@W\n    V &lt;- dwt_result@V\n    levels &lt;- length(W)\n\n    # è®¡ç®—å„å±‚èƒ½é‡\n    energy_detail &lt;- sapply(W, function(w) sum(w^2))\n    energy_approx &lt;- sapply(V, function(v) sum(v^2))\n\n    # è®¡ç®—æ€»èƒ½é‡\n    total_energy &lt;- sum(energy_detail) + energy_approx[length(V)]\n\n    # åˆ›å»ºæ•°æ®æ¡†\n    energy_df &lt;- data.frame(\n        Level = 1:levels,\n        Type = \"Detail\",\n        Energy = energy_detail,\n        Percent = energy_detail / total_energy * 100\n    )\n\n    energy_df &lt;- rbind(energy_df, data.frame(\n        Level = levels,\n        Type = \"Approx\",\n        Energy = energy_approx[length(V)],\n        Percent = energy_approx[length(V)] / total_energy * 100\n    ))\n\n    # è®¡ç®—ç´¯ç§¯ç™¾åˆ†æ¯”\n    energy_df &lt;- energy_df %&gt;%\n        arrange(Level, desc(Type)) %&gt;%\n        mutate(Cumulative = cumsum(Percent))\n\n    return(energy_df)\n}\n\n# åº”ç”¨åˆ°ä¹‹å‰çš„ç¤ºä¾‹\nenergy_result &lt;- analyze_wavelet_energy(dwt_result)\nprint(energy_result)\n\n   Level   Type    Energy   Percent Cumulative\nW1     1 Detail  86.19258  4.005511   4.005511\nW2     2 Detail  65.17274  3.028685   7.034196\nW3     3 Detail 295.42675 13.728968  20.763163\nW4     4 Detail 704.18341 32.724563  53.487726\nW5     5 Detail 147.47324  6.853324  60.341050\nW6     6 Detail 696.20645 32.353860  92.694911\nV6     6 Approx 157.19455  7.305089 100.000000",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å°æ³¢å˜æ¢ (Wavelet Transform)"
    ]
  },
  {
    "objectID": "1096-wavelet-transform.html#å°æ³¢å˜æ¢ä¸å…¶ä»–æ–¹æ³•çš„å¯¹æ¯”",
    "href": "1096-wavelet-transform.html#å°æ³¢å˜æ¢ä¸å…¶ä»–æ–¹æ³•çš„å¯¹æ¯”",
    "title": "å°æ³¢å˜æ¢ï¼šæ—¶é¢‘åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å°æ³¢å˜æ¢ä¸å…¶ä»–æ–¹æ³•çš„å¯¹æ¯”",
    "text": "å°æ³¢å˜æ¢ä¸å…¶ä»–æ–¹æ³•çš„å¯¹æ¯”\n\nDWT vs CWT\n\n\n\nç‰¹æ€§\nDWT\nCWT\n\n\n\n\nè®¡ç®—æ•ˆç‡\né«˜ (O(N))\nè¾ƒä½ (O(NÂ²))\n\n\né¢‘åŸŸåˆ†è¾¨ç‡\nå¯¹æ•°å‡åŒ€\nå¯è‡ªå®šä¹‰\n\n\næ—¶åŸŸåˆ†è¾¨ç‡\nå˜åŒ–\nå¯è‡ªå®šä¹‰\n\n\nå†—ä½™åº¦\næ— å†—ä½™\né«˜å†—ä½™\n\n\né€‚ç”¨åœºæ™¯\nä¿¡å·å‹ç¼©ã€å»å™ª\næ—¶é¢‘åˆ†æã€ç‰¹å¾æå–\n\n\n\n\n\nå°æ³¢ vs EMD/EEMD/VMD\n\n\n\næ–¹æ³•\nè‡ªé€‚åº”æ€§\nè®¡ç®—å¤æ‚åº¦\nå™ªå£°é²æ£’æ€§\næ•°å­¦åŸºç¡€\n\n\n\n\nå°æ³¢å˜æ¢\nå›ºå®šå°æ³¢åŸº\nä½\nä¸­ç­‰\nä¸¥è°¨\n\n\nEMD\nå®Œå…¨è‡ªé€‚åº”\nä¸­ç­‰\nä½\nå¯å‘å¼\n\n\nEEMD\nè‡ªé€‚åº”\né«˜\né«˜\nå¯å‘å¼\n\n\nVMD\nå¯è°ƒ\nä¸­é«˜\né«˜\nå˜åˆ†åŸç†",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å°æ³¢å˜æ¢ (Wavelet Transform)"
    ]
  },
  {
    "objectID": "1096-wavelet-transform.html#æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹",
    "href": "1096-wavelet-transform.html#æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹",
    "title": "å°æ³¢å˜æ¢ï¼šæ—¶é¢‘åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹",
    "text": "æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹\n\nå‚æ•°é€‰æ‹©æŒ‡å—\n\nå°æ³¢åŸºé€‰æ‹©\n\n\n\nåº”ç”¨åœºæ™¯\næ¨èå°æ³¢åŸº\nåŸå› \n\n\n\n\nä¿¡å·å»å™ª\nDaubechies (db4, db8)\nå¹³æ»‘æ€§å¥½\n\n\nè¾¹ç¼˜æ£€æµ‹\nHaar, Mexican Hat\nå®šä½å‡†ç¡®\n\n\næ—¶é¢‘åˆ†æ\nMorlet, Gaussian\né¢‘åŸŸå±€åŸŸæ€§å¥½\n\n\nä¿¡å·å‹ç¼©\nSymlet, Coiflet\né‡æ„è¯¯å·®å°\n\n\nç”Ÿç‰©ä¿¡å·\nDaubechies 4\nECG/EEG å¸¸ç”¨\n\n\n\n\n\nåˆ†è§£å±‚æ•°é€‰æ‹©\n\nç»éªŒæ³•åˆ™ï¼šå±‚æ•° â‰ˆ logâ‚‚(ä¿¡å·é•¿åº¦)\næœ€ä½é¢‘æˆåˆ†ï¼šf_min = fs / 2^(n.levels+1)\nå™ªå£°å»é™¤ï¼šä¸€èˆ¬ 4-6 å±‚è¶³å¤Ÿ\n\n\n\né˜ˆå€¼é€‰æ‹©\n\n\n\næ–¹æ³•\nå…¬å¼\nç‰¹ç‚¹\n\n\n\n\né€šç”¨é˜ˆå€¼\nÏƒÂ·âˆš(2Â·ln(N))\nä¿å®ˆï¼Œå¯èƒ½è¿‡åº¦å»å™ª\n\n\nSURE é˜ˆå€¼\nmedian(\nWâ‚\n\n\næœ€å°æœ€å¤§é˜ˆå€¼\nä½¿æœ€å¤§è¯¯å·®æœ€å°åŒ–\nå¯¹æœªçŸ¥ä¿¡å·ä¿å®ˆ\n\n\nç»éªŒé˜ˆå€¼\næ‰‹åŠ¨è°ƒæ•´\nçµæ´»ä½†ä¸»è§‚\n\n\n\n\n\n\nå¸¸è§é—®é¢˜\nQ1: å¦‚ä½•åˆ¤æ–­å»å™ªæ•ˆæœï¼Ÿ\n\n# 1. è§†è§‰æ£€æŸ¥\nplot(original, col = \"grey\")\nlines(denoised, col = \"red\")\n\n# 2. è®¡ç®—ä¿¡å™ªæ¯”\nsnr &lt;- 10 * log10(sum(signal^2) / sum((signal - denoised)^2))\n\n# 3. ä¿ç•™ä¿¡å·ç‰¹å¾\ncorrelation &lt;- cor(signal, denoised)\n\nQ2: è¾¹ç•Œæ•ˆåº”å¦‚ä½•å¤„ç†ï¼Ÿ\n\n# å¸¸è§çš„è¾¹ç•Œå¤„ç†æ–¹å¼\ndwt(signal,\n    boundary = \"periodic\")    # å‘¨æœŸå»¶æ‹“\n    boundary = \"reflection\")  # å¯¹ç§°å»¶æ‹“ï¼ˆæ¨èï¼‰\n    boundary = \"zero\")         # é›¶å¡«å……ï¼ˆä¸æ¨èï¼‰\n\nQ3: å¦‚ä½•é€‰æ‹©åˆé€‚çš„é‡‡æ ·ç‡ï¼Ÿ\n\n# æ ¹æ®å¥ˆå¥æ–¯ç‰¹å®šç†\nfs &gt;= 2 * f_max\n\n# å®é™…åº”ç”¨ä¸­å»ºè®®\nfs &gt;= 4-10 * f_max  # ä¿è¯è¶³å¤Ÿåˆ†è¾¨ç‡",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å°æ³¢å˜æ¢ (Wavelet Transform)"
    ]
  },
  {
    "objectID": "1096-wavelet-transform.html#æ€»ç»“",
    "href": "1096-wavelet-transform.html#æ€»ç»“",
    "title": "å°æ³¢å˜æ¢ï¼šæ—¶é¢‘åˆ†æå®Œå…¨æŒ‡å—",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nå°æ³¢å˜æ¢é€šè¿‡å¤šåˆ†è¾¨ç‡åˆ†æå…‹æœäº†å‚…é‡Œå¶å˜æ¢çš„å±€é™ï¼Œåœ¨æ—¶é¢‘åˆ†æã€ä¿¡å·å»å™ªã€ç‰¹å¾æå–ç­‰æ–¹é¢å±•ç°å‡ºå¼ºå¤§ä¼˜åŠ¿ã€‚\n\næ ¸å¿ƒè¦ç‚¹\n\n\n\næ–¹æ³•\né€‚ç”¨åœºæ™¯\n\n\n\n\nCWT\næ—¶é¢‘åˆ†æã€ç¬æ€ä¿¡å·æ£€æµ‹\n\n\nDWT\nä¿¡å·å»å™ªã€å‹ç¼©ã€ç‰¹å¾æå–\n\n\nå°æ³¢åŒ…\nç²¾ç»†é¢‘åŸŸåˆ†æã€æ»¤æ³¢å™¨ç»„\n\n\né˜ˆå€¼å»å™ª\nå»é™¤é«˜æ–¯å™ªå£°\n\n\n\n\n\nåº”ç”¨é¢†åŸŸ\n\nç”Ÿç‰©åŒ»å­¦ï¼šECG/EEG åˆ†æã€å‘¼å¸ç›‘æµ‹\nå·¥ç¨‹ï¼šæœºæ¢°æ•…éšœè¯Šæ–­ã€æŒ¯åŠ¨åˆ†æ\né‡‘èï¼šæ—¶é—´åºåˆ—å»å™ªã€æ³¢åŠ¨åˆ†æ\nå›¾åƒï¼šå›¾åƒå‹ç¼©ã€è¾¹ç¼˜æ£€æµ‹\næ°”è±¡ï¼šæ°”å€™æ•°æ®åˆ†æã€é™æ°´é¢„æµ‹",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å°æ³¢å˜æ¢ (Wavelet Transform)"
    ]
  },
  {
    "objectID": "1096-wavelet-transform.html#å‚è€ƒæ–‡çŒ®",
    "href": "1096-wavelet-transform.html#å‚è€ƒæ–‡çŒ®",
    "title": "å°æ³¢å˜æ¢ï¼šæ—¶é¢‘åˆ†æå®Œå…¨æŒ‡å—",
    "section": "å‚è€ƒæ–‡çŒ®",
    "text": "å‚è€ƒæ–‡çŒ®\n\nMallat, S. (2008). A Wavelet Tour of Signal Processing. Academic Press.\nDaubechies, I. (1992). Ten Lectures on Wavelets. SIAM.\nTorrence, C., & Compo, G. P. (1998). A Practical Guide to Wavelet Analysis. Bulletin of the American Meteorological Society, 79(1), 61-78.\nPercival, D. B., & Walden, A. T. (2000). Wavelet Methods for Time Series Analysis. Cambridge University Press.\nDonoho, D. L., & Johnstone, I. M. (1994). Ideal spatial adaptation by wavelet shrinkage. Biometrika, 81(3), 425-455.",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å°æ³¢å˜æ¢ (Wavelet Transform)"
    ]
  },
  {
    "objectID": "1096-wavelet-transform.html#ç›¸å…³æ•™ç¨‹",
    "href": "1096-wavelet-transform.html#ç›¸å…³æ•™ç¨‹",
    "title": "å°æ³¢å˜æ¢ï¼šæ—¶é¢‘åˆ†æå®Œå…¨æŒ‡å—",
    "section": "ç›¸å…³æ•™ç¨‹",
    "text": "ç›¸å…³æ•™ç¨‹\n\nFFT + VMD + GMM ä¿¡å·åˆ†æ - ç»„åˆä¿¡å·åˆ†ææ–¹æ³•\nå˜åˆ†æ¨¡æ€åˆ†è§£ (VMD) - è‡ªé€‚åº”ä¿¡å·åˆ†è§£\næ—¶é—´åºåˆ—åˆ†æ - ä¼ ç»Ÿæ—¶åºåˆ†ææ–¹æ³•\nProphet æ—¶é—´åºåˆ—é¢„æµ‹ - å•†ä¸šæ—¶åºé¢„æµ‹",
    "crumbs": [
      "ä¸»é¡µ",
      "ç‰¹æ®Šåº”ç”¨",
      "ğŸ“¡ ä¿¡å·å¤„ç†",
      "å°æ³¢å˜æ¢ (Wavelet Transform)"
    ]
  },
  {
    "objectID": "1100-auc-auprc.html",
    "href": "1100-auc-auprc.html",
    "title": "AUC ä¸ AUPRC å¯¹æ¯”ä¸åº”ç”¨",
    "section": "",
    "text": "åœ¨äºŒåˆ†ç±»é¢„æµ‹ä¸­ï¼ŒAUCï¼ˆROC æ›²çº¿ä¸‹é¢ç§¯ï¼‰ä¸ AUPRCï¼ˆç²¾ç¡®ç‡-å¬å›ç‡æ›²çº¿ä¸‹é¢ç§¯ï¼‰éƒ½æ˜¯å¸¸è§çš„æ•´ä½“æ€§èƒ½æŒ‡æ ‡ã€‚AUCå¼ºè°ƒæ¨¡å‹å¯¹æ­£è´Ÿæ ·æœ¬çš„æ•´ä½“åŒºåˆ†èƒ½åŠ›ï¼Œè€ŒAUPRCå¼ºè°ƒåœ¨æ­£ç±»ç¨€å°‘æ—¶å¯¹â€œæ‰¾åˆ°æ­£ç±»â€çš„æœ‰æ•ˆæ€§ã€‚\nå½“æ­£ç±»æ¯”ä¾‹å¾ˆä½ï¼ˆä¾‹å¦‚ç½•è§ç–¾ç—…ã€æ¬ºè¯ˆæ£€æµ‹ã€å¼‚å¸¸å‘Šè­¦ï¼‰æ—¶ï¼ŒROC æ›²çº¿å¾€å¾€æ˜¾å¾—è¿‡äºä¹è§‚ï¼Œæ­¤æ—¶ AUPRC æ›´èƒ½åæ˜ å®é™…ä½¿ç”¨ä»·å€¼ï¼›å½“ç±»åˆ«ç›¸å¯¹å¹³è¡¡ã€å…³æ³¨æ•´ä½“åŒºåˆ†åº¦æ—¶ï¼ŒAUCæ›´ç¨³å¥ã€è§£é‡Šä¹Ÿæ›´ç›´è§‚ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "AUC ä¸ AUPRC å¯¹æ¯”"
    ]
  },
  {
    "objectID": "1100-auc-auprc.html#æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "href": "1100-auc-auprc.html#æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "title": "AUC ä¸ AUPRC å¯¹æ¯”ä¸åº”ç”¨",
    "section": "",
    "text": "åœ¨äºŒåˆ†ç±»é¢„æµ‹ä¸­ï¼ŒAUCï¼ˆROC æ›²çº¿ä¸‹é¢ç§¯ï¼‰ä¸ AUPRCï¼ˆç²¾ç¡®ç‡-å¬å›ç‡æ›²çº¿ä¸‹é¢ç§¯ï¼‰éƒ½æ˜¯å¸¸è§çš„æ•´ä½“æ€§èƒ½æŒ‡æ ‡ã€‚AUCå¼ºè°ƒæ¨¡å‹å¯¹æ­£è´Ÿæ ·æœ¬çš„æ•´ä½“åŒºåˆ†èƒ½åŠ›ï¼Œè€ŒAUPRCå¼ºè°ƒåœ¨æ­£ç±»ç¨€å°‘æ—¶å¯¹â€œæ‰¾åˆ°æ­£ç±»â€çš„æœ‰æ•ˆæ€§ã€‚\nå½“æ­£ç±»æ¯”ä¾‹å¾ˆä½ï¼ˆä¾‹å¦‚ç½•è§ç–¾ç—…ã€æ¬ºè¯ˆæ£€æµ‹ã€å¼‚å¸¸å‘Šè­¦ï¼‰æ—¶ï¼ŒROC æ›²çº¿å¾€å¾€æ˜¾å¾—è¿‡äºä¹è§‚ï¼Œæ­¤æ—¶ AUPRC æ›´èƒ½åæ˜ å®é™…ä½¿ç”¨ä»·å€¼ï¼›å½“ç±»åˆ«ç›¸å¯¹å¹³è¡¡ã€å…³æ³¨æ•´ä½“åŒºåˆ†åº¦æ—¶ï¼ŒAUCæ›´ç¨³å¥ã€è§£é‡Šä¹Ÿæ›´ç›´è§‚ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "AUC ä¸ AUPRC å¯¹æ¯”"
    ]
  },
  {
    "objectID": "1100-auc-auprc.html#æ ¸å¿ƒæ¦‚å¿µä¸æŒ‡æ ‡å…³ç³»",
    "href": "1100-auc-auprc.html#æ ¸å¿ƒæ¦‚å¿µä¸æŒ‡æ ‡å…³ç³»",
    "title": "AUC ä¸ AUPRC å¯¹æ¯”ä¸åº”ç”¨",
    "section": "æ ¸å¿ƒæ¦‚å¿µä¸æŒ‡æ ‡å…³ç³»",
    "text": "æ ¸å¿ƒæ¦‚å¿µä¸æŒ‡æ ‡å…³ç³»\n\nROC ä¸ PR çš„å·®å¼‚\nROC ä»¥ çµæ•åº¦ (TPR) å’Œ 1-ç‰¹å¼‚åº¦ (FPR) ä¸ºåæ ‡ï¼›PR ä»¥ å¬å›ç‡ (Recall) å’Œ ç²¾ç¡®ç‡ (Precision) ä¸ºåæ ‡ã€‚ä¸¤è€…éƒ½æ¥æºäºåŒä¸€ç»„é˜ˆå€¼ä¸‹çš„æ··æ·†çŸ©é˜µï¼Œä½†å…³æ³¨ç‚¹ä¸åŒã€‚\n\n\n\næŒ‡æ ‡\nå…¬å¼\nå…³æ³¨ç‚¹\n\n\n\n\nTPR / Recall\nTP / (TP + FN)\næ‰¾åˆ°æ­£ç±»çš„èƒ½åŠ›\n\n\nFPR\nFP / (FP + TN)\nè¯¯æŠ¥æ­£ç±»çš„æ¯”ä¾‹\n\n\nPrecision\nTP / (TP + FP)\né¢„æµ‹ä¸ºæ­£ä¸­æœ‰å¤šå°‘æ˜¯çœŸçš„\n\n\nAUC\nROC æ›²çº¿é¢ç§¯\næ•´ä½“åŒºåˆ†åº¦\n\n\nAUPRC\nPR æ›²çº¿é¢ç§¯\nç¨€æœ‰æ­£ç±»è¯†åˆ«è´¨é‡\n\n\n\n\n\nåŸºçº¿çš„å«ä¹‰\nROC çš„éšæœºåŸºçº¿æ˜¯ 0.5ï¼›è€Œ PR æ›²çº¿çš„éšæœºåŸºçº¿ç­‰äº æ­£ç±»æ¯”ä¾‹ï¼ˆprevalenceï¼‰ã€‚å½“æ­£ç±»å¾ˆå°‘æ—¶ï¼ŒAUPRC çš„åŸºçº¿ä¼šéå¸¸ä½ï¼Œå› æ­¤ AUPRC çš„è§£è¯»å¿…é¡»ç»“åˆæ­£ç±»æ¯”ä¾‹ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "AUC ä¸ AUPRC å¯¹æ¯”"
    ]
  },
  {
    "objectID": "1100-auc-auprc.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "href": "1100-auc-auprc.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "title": "AUC ä¸ AUPRC å¯¹æ¯”ä¸åº”ç”¨",
    "section": "æ¨¡å‹å‡è®¾ä¸å‰æ",
    "text": "æ¨¡å‹å‡è®¾ä¸å‰æ\n\nç»“å±€ä¸ºäºŒåˆ†ç±»ï¼Œä¸”å·²æ˜ç¡®â€œæ­£ç±»â€çš„å®šä¹‰ã€‚\næ¨¡å‹è¾“å‡ºä¸ºå¯æ’åºçš„è¯„åˆ†æˆ–æ¦‚ç‡ï¼Œé˜ˆå€¼å˜åŒ–èƒ½å½¢æˆæ›²çº¿ã€‚\nè¯„ä¼°åº”åœ¨ç‹¬ç«‹éªŒè¯é›†æˆ–äº¤å‰éªŒè¯ä¸­å®Œæˆã€‚\néœ€è¦æŠ¥å‘Šæ­£ç±»æ¯”ä¾‹ï¼Œå¦åˆ™ AUPRC ç¼ºä¹å¯æ¯”æ€§ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "AUC ä¸ AUPRC å¯¹æ¯”"
    ]
  },
  {
    "objectID": "1100-auc-auprc.html#æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "href": "1100-auc-auprc.html#æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "title": "AUC ä¸ AUPRC å¯¹æ¯”ä¸åº”ç”¨",
    "section": "æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "text": "æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰\nå…¸å‹æ•°æ®ç»“æ„åŒ…å«ï¼š\n\noutcomeï¼šäºŒåˆ†ç±»ç»“å±€ (0/1)\nscoreï¼šæ¨¡å‹é¢„æµ‹æ¦‚ç‡æˆ–è¯„åˆ†\ntrain/testï¼šç”¨äºæ¨¡å‹è®­ç»ƒä¸è¯„ä¼°çš„åˆ†å‰²",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "AUC ä¸ AUPRC å¯¹æ¯”"
    ]
  },
  {
    "objectID": "1100-auc-auprc.html#åˆ†ææµç¨‹æ­¥éª¤",
    "href": "1100-auc-auprc.html#åˆ†ææµç¨‹æ­¥éª¤",
    "title": "AUC ä¸ AUPRC å¯¹æ¯”ä¸åº”ç”¨",
    "section": "åˆ†ææµç¨‹æ­¥éª¤",
    "text": "åˆ†ææµç¨‹æ­¥éª¤\n\næ˜ç¡®æ­£ç±»å®šä¹‰ä¸ä¸šåŠ¡ç›®æ ‡ï¼ˆå‘ç°æ­£ç±» vs æ§åˆ¶è¯¯æŠ¥ï¼‰\né€‰æ‹©è¯„ä¼°æŒ‡æ ‡ï¼ˆAUCã€AUPRCã€é˜ˆå€¼å‹æŒ‡æ ‡ï¼‰\nè®¡ç®— ROC ä¸ PR æ›²çº¿\né€‰æ‹©é˜ˆå€¼å¹¶å½¢æˆæ··æ·†çŸ©é˜µ\næŠ¥å‘Š AUCã€AUPRC ä¸æ­£ç±»æ¯”ä¾‹\n\n\næ–¹æ³•é€‰æ‹©å†³ç­–è¡¨\n\n\n\næƒ…å¢ƒ\næ¨èæŒ‡æ ‡\nç†ç”±\n\n\n\n\næ­£ç±»æ¯”ä¾‹å¾ˆä½\nAUPRC\næ›´åæ˜ æ­£ç±»è¯†åˆ«è´¨é‡\n\n\nç±»åˆ«ç›¸å¯¹å‡è¡¡\nAUC\nåŒºåˆ†åº¦ç¨³å®šä¸”æ˜“è§£è¯»\n\n\nå¼ºè°ƒè¯¯æŠ¥æˆæœ¬\nPrecision/FPR\nç›´æ¥åæ˜ è¯¯æŠ¥é£é™©\n\n\nå¼ºè°ƒæ¼æŠ¥æˆæœ¬\nRecall/TPR\nç›´æ¥åæ˜ æ¼æŠ¥é£é™©",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "AUC ä¸ AUPRC å¯¹æ¯”"
    ]
  },
  {
    "objectID": "1100-auc-auprc.html#ç›¸å…³å†…å®¹é˜ˆå€¼æˆæœ¬ä¸æ ¡å‡†",
    "href": "1100-auc-auprc.html#ç›¸å…³å†…å®¹é˜ˆå€¼æˆæœ¬ä¸æ ¡å‡†",
    "title": "AUC ä¸ AUPRC å¯¹æ¯”ä¸åº”ç”¨",
    "section": "ç›¸å…³å†…å®¹ï¼šé˜ˆå€¼ã€æˆæœ¬ä¸æ ¡å‡†",
    "text": "ç›¸å…³å†…å®¹ï¼šé˜ˆå€¼ã€æˆæœ¬ä¸æ ¡å‡†\n\né˜ˆå€¼ä¸ä¸šåŠ¡æˆæœ¬ï¼šåœ¨åŒä¸€æ¡æ›²çº¿ä¸Šï¼Œä¸åŒé˜ˆå€¼å¯¹åº”ä¸åŒè¯¯æŠ¥/æ¼æŠ¥æƒè¡¡ï¼Œé˜ˆå€¼åº”ç”±ä¸šåŠ¡æˆæœ¬é©±åŠ¨ï¼Œè€Œéâ€œé»˜è®¤ 0.5â€ã€‚\næ ¡å‡† vs åŒºåˆ†ï¼šAUC/AUPRCè¡¡é‡åŒºåˆ†èƒ½åŠ›ï¼Œä¸ä»£è¡¨æ¦‚ç‡æ ¡å‡†ç¨‹åº¦ï¼Œå¿…è¦æ—¶éœ€æ ¡å‡†æ›²çº¿æˆ–Brieråˆ†æ•°ã€‚\næ­£ç±»æ¯”ä¾‹å˜åŒ–ï¼šAUPRCå¯¹æ¯”ä¾‹å˜åŒ–é«˜åº¦æ•æ„Ÿï¼Œä¸åŒæ•°æ®é›†é—´æ¯”è¾ƒæ—¶å¿…é¡»æŠ¥å‘Š prevalenceã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "AUC ä¸ AUPRC å¯¹æ¯”"
    ]
  },
  {
    "objectID": "1100-auc-auprc.html#ä»£ç å®ç°",
    "href": "1100-auc-auprc.html#ä»£ç å®ç°",
    "title": "AUC ä¸ AUPRC å¯¹æ¯”ä¸åº”ç”¨",
    "section": "ä»£ç å®ç°",
    "text": "ä»£ç å®ç°\nä¸‹é¢ç”¨æ¨¡æ‹Ÿçš„ä¸¥é‡ç±»åˆ«ä¸å¹³è¡¡æ•°æ®å±•ç¤º AUC ä¸ AUPRC çš„å·®å¼‚ï¼Œå¹¶ç»™å‡ºé˜ˆå€¼é€‰æ‹©ä¸ç»“æœè§£é‡Šæ–¹å¼ã€‚\n\n1. æ„å»ºæ¨¡æ‹Ÿæ•°æ®\n\nset.seed(42)\n\nn &lt;- 3000\npositive_rate &lt;- 0.06\n\nx1 &lt;- rnorm(n)\nx2 &lt;- rnorm(n)\nlin_pred &lt;- -3.2 + 1.4 * x1 + 0.8 * x2\nprob &lt;- plogis(lin_pred)\n\noutcome &lt;- rbinom(n, 1, prob)\ndata &lt;- data.frame(outcome, x1, x2)\n\ncat(\"å®é™…æ­£ç±»æ¯”ä¾‹:\", round(mean(outcome), 3), \"\\n\")\n\nå®é™…æ­£ç±»æ¯”ä¾‹: 0.089 \n\n\n\n\n2. è®­ç»ƒæ¨¡å‹å¹¶ç”Ÿæˆé¢„æµ‹åˆ†æ•°\n\nset.seed(42)\ntrain_index &lt;- sample(seq_len(n), size = 0.7 * n)\ntrain_data &lt;- data[train_index, ]\ntest_data &lt;- data[-train_index, ]\n\nmodel &lt;- glm(outcome ~ x1 + x2, data = train_data, family = binomial)\ntest_data$score &lt;- predict(model, newdata = test_data, type = \"response\")\n\n\n\n3. è®¡ç®— AUC ä¸ ROC æ›²çº¿\n\nlibrary(pROC)\nlibrary(ggplot2)\nlibrary(dplyr)\n\nroc_obj &lt;- roc(test_data$outcome, test_data$score)\nauc_value &lt;- auc(roc_obj)\n\nroc_df &lt;- data.frame(\n  fpr = 1 - roc_obj$specificities,\n  tpr = roc_obj$sensitivities\n)\n\ncat(\"AUC:\", round(auc_value, 3), \"\\n\")\n\nAUC: 0.839 \n\n\n\nggplot(roc_df, aes(x = fpr, y = tpr)) +\n  geom_line(color = \"#2563eb\", linewidth = 1.1) +\n  geom_abline(slope = 1, intercept = 0, linetype = \"dashed\", color = \"gray60\") +\n  labs(\n    title = \"ROC æ›²çº¿\",\n    x = \"1 - ç‰¹å¼‚åº¦ (FPR)\",\n    y = \"çµæ•åº¦ (TPR)\"\n  )\n\n\n\n\n\n\n\n\n\n\n4. è®¡ç®— AUPRC ä¸ PR æ›²çº¿\n\nlibrary(PRROC)\n\nscores_pos &lt;- test_data$score[test_data$outcome == 1]\nscores_neg &lt;- test_data$score[test_data$outcome == 0]\n\npr_obj &lt;- pr.curve(scores.class0 = scores_pos, scores.class1 = scores_neg, curve = TRUE)\nauprc_value &lt;- pr_obj$auc.integral\n\npr_df &lt;- data.frame(\n  recall = pr_obj$curve[, 1],\n  precision = pr_obj$curve[, 2]\n)\n\ncat(\"AUPRC:\", round(auprc_value, 3), \"\\n\")\n\nAUPRC: 0.381 \n\ncat(\"éšæœºåŸºçº¿(æ­£ç±»æ¯”ä¾‹):\", round(mean(test_data$outcome), 3), \"\\n\")\n\néšæœºåŸºçº¿(æ­£ç±»æ¯”ä¾‹): 0.083 \n\n\n\nggplot(pr_df, aes(x = recall, y = precision)) +\n  geom_line(color = \"#f97316\", linewidth = 1.1) +\n  geom_hline(yintercept = mean(test_data$outcome), linetype = \"dashed\", color = \"gray60\") +\n  labs(\n    title = \"PR æ›²çº¿\",\n    x = \"å¬å›ç‡ (Recall)\",\n    y = \"ç²¾ç¡®ç‡ (Precision)\"\n  )\n\n\n\n\n\n\n\n\n\n\n5. é˜ˆå€¼é€‰æ‹©ä¸æ··æ·†çŸ©é˜µ\n\nthresholds &lt;- seq(0.01, 0.99, by = 0.01)\n\ncalc_metrics &lt;- function(threshold, truth, score) {\n  pred &lt;- ifelse(score &gt;= threshold, 1, 0)\n  tp &lt;- sum(pred == 1 & truth == 1)\n  fp &lt;- sum(pred == 1 & truth == 0)\n  fn &lt;- sum(pred == 0 & truth == 1)\n  tn &lt;- sum(pred == 0 & truth == 0)\n\n  precision &lt;- ifelse(tp + fp == 0, NA, tp / (tp + fp))\n  recall &lt;- ifelse(tp + fn == 0, NA, tp / (tp + fn))\n  f1 &lt;- ifelse(is.na(precision + recall) | (precision + recall == 0), NA,\n    2 * precision * recall / (precision + recall)\n  )\n\n  data.frame(\n    threshold, tp, fp, fn, tn,\n    precision, recall, f1\n  )\n}\n\nmetric_table &lt;- bind_rows(lapply(thresholds, calc_metrics,\n  truth = test_data$outcome,\n  score = test_data$score\n))\n\nbest_row &lt;- metric_table %&gt;% filter(f1 == max(f1, na.rm = TRUE)) %&gt;% slice(1)\nbest_row\n\n  threshold tp fp fn  tn precision    recall        f1\n1      0.27 40 54 35 771 0.4255319 0.5333333 0.4733728\n\n\n\nbest_threshold &lt;- best_row$threshold\npred_best &lt;- ifelse(test_data$score &gt;= best_threshold, 1, 0)\n\nconfusion &lt;- table(\n  é¢„æµ‹ = factor(pred_best, levels = c(0, 1)),\n  çœŸå® = factor(test_data$outcome, levels = c(0, 1))\n)\nconfusion\n\n    çœŸå®\né¢„æµ‹   0   1\n   0 771  35\n   1  54  40",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "AUC ä¸ AUPRC å¯¹æ¯”"
    ]
  },
  {
    "objectID": "1100-auc-auprc.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "href": "1100-auc-auprc.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "title": "AUC ä¸ AUPRC å¯¹æ¯”ä¸åº”ç”¨",
    "section": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "text": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š\næŠ¥å‘Šæ—¶å»ºè®®åŒæ—¶ç»™å‡º AUCã€AUPRC ä¸æ­£ç±»æ¯”ä¾‹ï¼Œå¹¶è§£é‡Šé˜ˆå€¼ä¸‹çš„ç²¾ç¡®ç‡ä¸å¬å›ç‡ï¼š\n\næœ¬ä¾‹ AUC åæ˜ æ•´ä½“åŒºåˆ†åº¦ï¼Œä½† AUPRC æ›´èƒ½ä½“ç°â€œæ‰¾åˆ°å°‘æ•°æ­£ç±»â€çš„æ•ˆæœã€‚\nè‹¥æ­£ç±»æ¯”ä¾‹ä»…ä¸º 6%ï¼Œå³ä½¿ AUC å¾ˆé«˜ï¼ŒAUPRC ä»å¯èƒ½åä½ã€‚\né˜ˆå€¼é€‰æ‹©åº”ç»“åˆä¸šåŠ¡æˆæœ¬ï¼ŒæŠ¥å‘Šæœ€ä½³é˜ˆå€¼å¯¹åº”çš„ç²¾ç¡®ç‡ä¸å¬å›ç‡ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "AUC ä¸ AUPRC å¯¹æ¯”"
    ]
  },
  {
    "objectID": "1100-auc-auprc.html#å¸¸è§é”™è¯¯ä¸çº å",
    "href": "1100-auc-auprc.html#å¸¸è§é”™è¯¯ä¸çº å",
    "title": "AUC ä¸ AUPRC å¯¹æ¯”ä¸åº”ç”¨",
    "section": "å¸¸è§é”™è¯¯ä¸çº å",
    "text": "å¸¸è§é”™è¯¯ä¸çº å\n\næœªæŠ¥å‘Šæ­£ç±»æ¯”ä¾‹ï¼šAUPRCç¼ºä¹åŸºçº¿å‚ç…§ï¼Œå¿…é¡»åŒæ—¶æŠ¥å‘Š prevalenceã€‚\nç”¨åˆ†ç±»ç»“æœè®¡ç®—æ›²çº¿ï¼šROC/PR éœ€è¦è¿ç»­è¯„åˆ†ï¼Œè€Œä¸æ˜¯äºŒå€¼é¢„æµ‹ã€‚\nä¸åŒæ•°æ®é›†ç›´æ¥æ¯”è¾ƒ AUPRCï¼šæ­£ç±»æ¯”ä¾‹ä¸åŒä¼šæ˜¾è‘—æ”¹å˜ AUPRCã€‚\nåªçœ‹AUCå¿½è§†é˜ˆå€¼è¡¨ç°ï¼šé«˜ AUC å¯èƒ½å¯¹åº”å¾ˆä½ Precisionã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "AUC ä¸ AUPRC å¯¹æ¯”"
    ]
  },
  {
    "objectID": "1100-auc-auprc.html#è¿›é˜¶æ‰©å±•",
    "href": "1100-auc-auprc.html#è¿›é˜¶æ‰©å±•",
    "title": "AUC ä¸ AUPRC å¯¹æ¯”ä¸åº”ç”¨",
    "section": "è¿›é˜¶æ‰©å±•",
    "text": "è¿›é˜¶æ‰©å±•\n\nå¹³å‡ç²¾ç¡®ç‡ (Average Precision, AP)ï¼šä¸ AUPRC ç±»ä¼¼ä½†è®¡ç®—æ–¹å¼ä¸åŒã€‚\néƒ¨åˆ† AUC (pAUC)ï¼šå…³æ³¨ç‰¹å®š FPR åŒºé—´çš„æ¨¡å‹è¡¨ç°ã€‚\næˆæœ¬æ•æ„Ÿè¯„ä¼°ï¼šç»“åˆå†³ç­–æ›²çº¿åˆ†æ (Decision Curve Analysis)ã€‚\næ¦‚ç‡æ ¡å‡†ï¼šä½¿ç”¨æ ¡å‡†æ›²çº¿æˆ– Brier åˆ†æ•°è¯„ä¼°æ¦‚ç‡è´¨é‡ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "AUC ä¸ AUPRC å¯¹æ¯”"
    ]
  },
  {
    "objectID": "1100-auc-auprc.html#å°ç»“",
    "href": "1100-auc-auprc.html#å°ç»“",
    "title": "AUC ä¸ AUPRC å¯¹æ¯”ä¸åº”ç”¨",
    "section": "å°ç»“",
    "text": "å°ç»“\nAUC é€‚åˆè¡¡é‡æ•´ä½“åŒºåˆ†èƒ½åŠ›ï¼ŒAUPRCæ›´é€‚åˆç¨€æœ‰äº‹ä»¶çš„é¢„æµ‹è¯„ä¼°ã€‚äºŒè€…å¹¶ä¸å†²çªï¼Œæ¨èåœ¨ä¸å¹³è¡¡åœºæ™¯ä¸‹åŒæ—¶æŠ¥å‘Š AUCã€AUPRC ä¸æ­£ç±»æ¯”ä¾‹ï¼Œå¹¶ç»“åˆé˜ˆå€¼å‹æŒ‡æ ‡è§£é‡Šå®é™…åº”ç”¨æ•ˆæœã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "AUC ä¸ AUPRC å¯¹æ¯”"
    ]
  },
  {
    "objectID": "1101-ml-metrics.html",
    "href": "1101-ml-metrics.html",
    "title": "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡ä¸ä½¿ç”¨åœºæ™¯",
    "section": "",
    "text": "library(dplyr)\nlibrary(ggplot2)\nlibrary(rsample)\nlibrary(yardstick)\nlibrary(tibble)",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡"
    ]
  },
  {
    "objectID": "1101-ml-metrics.html#æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "href": "1101-ml-metrics.html#æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "title": "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡ä¸ä½¿ç”¨åœºæ™¯",
    "section": "æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯",
    "text": "æ•™ç¨‹ç›®æ ‡ä¸é€‚ç”¨åœºæ™¯\né¢„æµ‹æŒ‡æ ‡å†³å®šäº†æ¨¡å‹æ˜¯å¦â€œå¥½ç”¨â€ã€‚åŒä¸€ä¸ªæ¨¡å‹åœ¨ä¸åŒæŒ‡æ ‡ä¸‹å¯èƒ½è¡¨ç°å®Œå…¨ç›¸åã€‚ æœ¬æ•™ç¨‹ç³»ç»Ÿæ•´ç†æœºå™¨å­¦ä¹ å¸¸è§é¢„æµ‹æŒ‡æ ‡ã€é€‚ç”¨åœºæ™¯ä¸æ•°å€¼å¤§å°çš„è§£è¯»æ–¹å¼ï¼Œè¦†ç›–åˆ†ç±»ã€å›å½’ä¸æ¦‚ç‡é¢„æµ‹ã€‚\né€‚ç”¨åœºæ™¯\n\näºŒåˆ†ç±»/å¤šåˆ†ç±»ä»»åŠ¡çš„æŒ‡æ ‡é€‰æ‹©\nä¸å¹³è¡¡æ•°æ®ä¸­çš„è¯„ä¼°é™·é˜±\nå›å½’è¯¯å·®æŒ‡æ ‡çš„å¤§å°ç†è§£\næ¦‚ç‡è¾“å‡ºçš„æ ¡å‡†ä¸é£é™©è¯„ä¼°",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡"
    ]
  },
  {
    "objectID": "1101-ml-metrics.html#æ ¸å¿ƒæ¦‚å¿µä¸æŒ‡æ ‡ä½“ç³»",
    "href": "1101-ml-metrics.html#æ ¸å¿ƒæ¦‚å¿µä¸æŒ‡æ ‡ä½“ç³»",
    "title": "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡ä¸ä½¿ç”¨åœºæ™¯",
    "section": "æ ¸å¿ƒæ¦‚å¿µä¸æŒ‡æ ‡ä½“ç³»",
    "text": "æ ¸å¿ƒæ¦‚å¿µä¸æŒ‡æ ‡ä½“ç³»\né¢„æµ‹æŒ‡æ ‡ä¸»è¦åˆ†ä¸ºä¸‰ç±»ï¼š\n\nåˆ†ç±»æŒ‡æ ‡ï¼šAccuracyã€Precisionã€Recallã€F1ã€ROC AUCã€PR AUC\nå›å½’æŒ‡æ ‡ï¼šMAEã€RMSEã€R2ã€MAPE\næ¦‚ç‡æŒ‡æ ‡ï¼šLog Lossã€Brier Scoreã€æ ¡å‡†æ›²çº¿\n\næŒ‡æ ‡çš„â€œå¤§å°ç†è§£â€é€šå¸¸éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š\n\nè¶Šå¤§è¶Šå¥½ï¼šAccuracyã€Precisionã€Recallã€F1ã€AUCã€AUPRCã€R2\nè¶Šå°è¶Šå¥½ï¼šMAEã€RMSEã€MAPEã€Log Lossã€Brier\n\nä½†è¿™äº›æ•°å€¼å¿…é¡»ç»“åˆåŸºçº¿ï¼ˆä¾‹å¦‚éšæœºé¢„æµ‹æˆ–å‡å€¼é¢„æµ‹ï¼‰å’Œæ•°æ®åˆ†å¸ƒï¼ˆä¾‹å¦‚æ­£ç±»æ¯”ä¾‹ï¼‰ä¸€èµ·è§£é‡Šã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡"
    ]
  },
  {
    "objectID": "1101-ml-metrics.html#æŒ‡æ ‡é€‰æ‹©çš„åœºæ™¯æ˜ å°„",
    "href": "1101-ml-metrics.html#æŒ‡æ ‡é€‰æ‹©çš„åœºæ™¯æ˜ å°„",
    "title": "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡ä¸ä½¿ç”¨åœºæ™¯",
    "section": "æŒ‡æ ‡é€‰æ‹©çš„åœºæ™¯æ˜ å°„",
    "text": "æŒ‡æ ‡é€‰æ‹©çš„åœºæ™¯æ˜ å°„\n\n\n\nåœºæ™¯\né¦–é€‰æŒ‡æ ‡\nå…¸å‹åŸå› \n\n\n\n\nç±»åˆ«å¹³è¡¡ã€å…³æ³¨æ•´ä½“æ­£ç¡®ç‡\nAccuracy\nç›´è§‚ã€æ˜“æ²Ÿé€š\n\n\næ­£ç±»ç¨€å°‘ã€è¯¯æŠ¥æˆæœ¬é«˜\nPrecision / PR AUC\næ§åˆ¶è¯¯æŠ¥\n\n\næ­£ç±»ç¨€å°‘ã€æ¼æŠ¥æˆæœ¬é«˜\nRecall / PR AUC\né™ä½æ¼æŠ¥\n\n\néœ€è¦é˜ˆå€¼æ— å…³æ¯”è¾ƒ\nROC AUC\nåŒºåˆ†åº¦ç¨³å®š\n\n\nå›å½’ä»»åŠ¡ã€åå·®æƒ©ç½šå°\nMAE\næŠ—ç¦»ç¾¤\n\n\nå›å½’ä»»åŠ¡ã€å¼ºè°ƒå¤§è¯¯å·®\nRMSE\næ”¾å¤§å¤§è¯¯å·®\n\n\néœ€è¦æ¦‚ç‡è´¨é‡è¯„ä¼°\nLog Loss / Brier\nè¡¡é‡æ¦‚ç‡æ ¡å‡†",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡"
    ]
  },
  {
    "objectID": "1101-ml-metrics.html#æ•°æ®å‡†å¤‡ä¸ç¤ºä¾‹è®¾è®¡",
    "href": "1101-ml-metrics.html#æ•°æ®å‡†å¤‡ä¸ç¤ºä¾‹è®¾è®¡",
    "title": "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡ä¸ä½¿ç”¨åœºæ™¯",
    "section": "æ•°æ®å‡†å¤‡ä¸ç¤ºä¾‹è®¾è®¡",
    "text": "æ•°æ®å‡†å¤‡ä¸ç¤ºä¾‹è®¾è®¡\nä¸‹é¢æ„å»ºä¸¤ä¸ªå¯å¤ç°ç¤ºä¾‹ï¼š\n\nä¸å¹³è¡¡äºŒåˆ†ç±»ï¼šç”¨äºå±•ç¤º Accuracy çš„è¯¯å¯¼ä¸ PR AUC çš„ä»·å€¼ã€‚\nè¿ç»­å›å½’ï¼šå¯¹æ¯” MAEã€RMSE ä¸ R2 çš„å·®å¼‚ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡"
    ]
  },
  {
    "objectID": "1101-ml-metrics.html#ä»£ç å®ç°ä¸å¹³è¡¡åˆ†ç±»æŒ‡æ ‡",
    "href": "1101-ml-metrics.html#ä»£ç å®ç°ä¸å¹³è¡¡åˆ†ç±»æŒ‡æ ‡",
    "title": "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡ä¸ä½¿ç”¨åœºæ™¯",
    "section": "ä»£ç å®ç°ï¼šä¸å¹³è¡¡åˆ†ç±»æŒ‡æ ‡",
    "text": "ä»£ç å®ç°ï¼šä¸å¹³è¡¡åˆ†ç±»æŒ‡æ ‡\n\n1. ç”Ÿæˆä¸å¹³è¡¡äºŒåˆ†ç±»æ•°æ®\n\nset.seed(42)\n\nn &lt;- 2500\n\nx1 &lt;- rnorm(n)\nx2 &lt;- rnorm(n)\nlin_pred &lt;- -3.0 + 1.1 * x1 + 0.6 * x2\nprob &lt;- plogis(lin_pred)\n\noutcome &lt;- rbinom(n, 1, prob)\ndata_cls &lt;- tibble(\n  outcome = factor(outcome, levels = c(0, 1), labels = c(\"neg\", \"pos\")),\n  x1, x2\n)\n\ncat(\"å®é™…æ­£ç±»æ¯”ä¾‹:\", round(mean(outcome), 3), \"\\n\")\n\nå®é™…æ­£ç±»æ¯”ä¾‹: 0.091 \n\n\n\n\n2. åˆ‡åˆ†æ•°æ®å¹¶è®­ç»ƒæ¨¡å‹\n\nset.seed(42)\nsplit_cls &lt;- initial_split(data_cls, prop = 0.7, strata = outcome)\ntrain_cls &lt;- training(split_cls)\ntest_cls &lt;- testing(split_cls)\n\nmodel_cls &lt;- glm(outcome ~ x1 + x2, data = train_cls, family = binomial)\ntest_cls &lt;- test_cls %&gt;%\n  mutate(score = predict(model_cls, newdata = test_cls, type = \"response\"))\n\n\n\n3. å¸¸è§æŒ‡æ ‡è®¡ç®—\n\npred_cls &lt;- test_cls %&gt;%\n  mutate(pred_class = ifelse(score &gt;= 0.5, \"pos\", \"neg\")) %&gt;%\n  mutate(pred_class = factor(pred_class, levels = c(\"neg\", \"pos\")))\n\nmetrics_cls &lt;- metric_set(accuracy, bal_accuracy, precision, recall, f_meas)\nmetrics_cls(pred_cls, truth = outcome, estimate = pred_class, event_level = \"second\")\n\n# A tibble: 5 Ã— 3\n  .metric      .estimator .estimate\n  &lt;chr&gt;        &lt;chr&gt;          &lt;dbl&gt;\n1 accuracy     binary        0.9   \n2 bal_accuracy binary        0.505 \n3 precision    binary        0.25  \n4 recall       binary        0.0137\n5 f_meas       binary        0.0260\n\n\n\nroc_value &lt;- roc_auc(test_cls, truth = outcome, score, event_level = \"second\")\npr_value &lt;- pr_auc(test_cls, truth = outcome, score, event_level = \"second\")\n\nroc_value\n\n# A tibble: 1 Ã— 3\n  .metric .estimator .estimate\n  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;\n1 roc_auc binary         0.746\n\npr_value\n\n# A tibble: 1 Ã— 3\n  .metric .estimator .estimate\n  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;\n1 pr_auc  binary         0.277\n\n\n\n\n4. ROC ä¸ PR æ›²çº¿\n\nroc_curve_df &lt;- roc_curve(test_cls, truth = outcome, score, event_level = \"second\")\npr_curve_df &lt;- pr_curve(test_cls, truth = outcome, score, event_level = \"second\")\n\nggplot(roc_curve_df, aes(x = 1 - specificity, y = sensitivity)) +\n  geom_line(color = \"#2563eb\", linewidth = 1.1) +\n  geom_abline(slope = 1, intercept = 0, linetype = \"dashed\", color = \"gray60\") +\n  labs(title = \"ROC æ›²çº¿\", x = \"1 - ç‰¹å¼‚åº¦\", y = \"çµæ•åº¦\")\n\n\n\n\n\n\n\n\n\nggplot(pr_curve_df, aes(x = recall, y = precision)) +\n  geom_line(color = \"#f97316\", linewidth = 1.1) +\n  geom_hline(yintercept = mean(test_cls$outcome == \"pos\"),\n    linetype = \"dashed\", color = \"gray60\"\n  ) +\n  labs(title = \"PR æ›²çº¿\", x = \"å¬å›ç‡\", y = \"ç²¾ç¡®ç‡\")",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡"
    ]
  },
  {
    "objectID": "1101-ml-metrics.html#åˆ†ç±»æŒ‡æ ‡çš„å¤§å°ç†è§£",
    "href": "1101-ml-metrics.html#åˆ†ç±»æŒ‡æ ‡çš„å¤§å°ç†è§£",
    "title": "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡ä¸ä½¿ç”¨åœºæ™¯",
    "section": "åˆ†ç±»æŒ‡æ ‡çš„å¤§å°ç†è§£",
    "text": "åˆ†ç±»æŒ‡æ ‡çš„å¤§å°ç†è§£\n\nAccuracy ä¸ Balanced Accuracy\n\nAccuracy ä¼šè¢«ç±»åˆ«ä¸å¹³è¡¡æ”¾å¤§ï¼Œåº”ä¸æ­£ç±»æ¯”ä¾‹ä¸€èµ·è§£è¯»ã€‚\nBalanced Accuracy ç›¸å½“äº (Sensitivity + Specificity) / 2ï¼Œæ›´é€‚åˆä¸å¹³è¡¡æ•°æ®ã€‚\n\n\n\nPrecisionã€Recall ä¸ F1\n\nPrecision é«˜è¡¨ç¤ºè¯¯æŠ¥å°‘ï¼Œé€‚åˆé«˜æˆæœ¬è¯¯æŠ¥åœºæ™¯ã€‚\nRecall é«˜è¡¨ç¤ºæ¼æŠ¥å°‘ï¼Œé€‚åˆé«˜é£é™©æ¼æŠ¥åœºæ™¯ã€‚\nF1 å¹³è¡¡ Precision ä¸ Recallï¼Œä½†å¯èƒ½æ©ç›–ä¸šåŠ¡åå¥½ã€‚\n\n\n\nROC AUC ä¸ PR AUC\n\nROC AUC = 0.5 æ¥è¿‘éšæœºï¼Œ&gt; 0.8 é€šå¸¸å¯è§†ä¸ºå¯ç”¨åŒºåˆ†åº¦ã€‚\nPR AUC éœ€è¦å¯¹æ¯”æ­£ç±»æ¯”ä¾‹åŸºçº¿ï¼Œæ­£ç±»æ¯”ä¾‹è¶Šä½ï¼ŒåŸºçº¿è¶Šä½ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡"
    ]
  },
  {
    "objectID": "1101-ml-metrics.html#ä»£ç å®ç°å›å½’æŒ‡æ ‡",
    "href": "1101-ml-metrics.html#ä»£ç å®ç°å›å½’æŒ‡æ ‡",
    "title": "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡ä¸ä½¿ç”¨åœºæ™¯",
    "section": "ä»£ç å®ç°ï¼šå›å½’æŒ‡æ ‡",
    "text": "ä»£ç å®ç°ï¼šå›å½’æŒ‡æ ‡\n\n1. ç”Ÿæˆå›å½’æ•°æ®\n\nset.seed(42)\n\nn_reg &lt;- 1200\nx1 &lt;- runif(n_reg, -2, 2)\nx2 &lt;- rnorm(n_reg)\ny &lt;- 2 + 1.5 * x1 - 0.8 * x2 + rnorm(n_reg, sd = 0.6)\n\ndata_reg &lt;- tibble(y, x1, x2)\n\n\n\n2. è®­ç»ƒæ¨¡å‹å¹¶è®¡ç®—æŒ‡æ ‡\n\nset.seed(42)\nsplit_reg &lt;- initial_split(data_reg, prop = 0.7)\ntrain_reg &lt;- training(split_reg)\ntest_reg &lt;- testing(split_reg)\n\nmodel_reg &lt;- lm(y ~ x1 + x2, data = train_reg)\ntest_reg &lt;- test_reg %&gt;%\n  mutate(pred = predict(model_reg, newdata = test_reg))\n\nmetrics_reg &lt;- metric_set(mae, rmse, rsq)\nmetrics_reg(test_reg, truth = y, estimate = pred)\n\n# A tibble: 3 Ã— 3\n  .metric .estimator .estimate\n  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;\n1 mae     standard       0.463\n2 rmse    standard       0.595\n3 rsq     standard       0.916",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡"
    ]
  },
  {
    "objectID": "1101-ml-metrics.html#å›å½’æŒ‡æ ‡çš„å¤§å°ç†è§£",
    "href": "1101-ml-metrics.html#å›å½’æŒ‡æ ‡çš„å¤§å°ç†è§£",
    "title": "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡ä¸ä½¿ç”¨åœºæ™¯",
    "section": "å›å½’æŒ‡æ ‡çš„å¤§å°ç†è§£",
    "text": "å›å½’æŒ‡æ ‡çš„å¤§å°ç†è§£\n\nMAE ä¸ RMSE ä¸ç›®æ ‡å˜é‡åŒé‡çº²ï¼Œè¶Šæ¥è¿‘ 0 è¶Šå¥½ã€‚\nRMSE &gt; MAE æ˜¯å¸¸è§ç°è±¡ï¼Œè¯´æ˜å­˜åœ¨è¾ƒå¤§è¯¯å·®ç‚¹ã€‚\nR2 è¡¨ç¤ºè§£é‡Šåº¦ï¼Œå¯èƒ½å‡ºç°è´Ÿå€¼ï¼Œæ„å‘³ç€æ¨¡å‹ä¸å¦‚å‡å€¼é¢„æµ‹ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡"
    ]
  },
  {
    "objectID": "1101-ml-metrics.html#å¤šåˆ†ç±»ä¸å¹³å‡æ–¹å¼",
    "href": "1101-ml-metrics.html#å¤šåˆ†ç±»ä¸å¹³å‡æ–¹å¼",
    "title": "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡ä¸ä½¿ç”¨åœºæ™¯",
    "section": "å¤šåˆ†ç±»ä¸å¹³å‡æ–¹å¼",
    "text": "å¤šåˆ†ç±»ä¸å¹³å‡æ–¹å¼\nå¤šåˆ†ç±»ä»»åŠ¡éœ€é€‰æ‹© macro/micro/weighted å¹³å‡æ–¹å¼ï¼š\n\nmacroï¼šå„ç±»åˆ«ç­‰æƒï¼Œé€‚åˆå…³æ³¨å°ç±»è¡¨ç°ã€‚\nmicroï¼šæŒ‰æ ·æœ¬åŠ æƒï¼Œæ›´æ¥è¿‘æ€»ä½“å‡†ç¡®ç‡ã€‚\nweightedï¼šæŒ‰ç±»åˆ«é¢‘ç‡åŠ æƒï¼Œä»‹äº macro ä¸ micro ä¹‹é—´ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡"
    ]
  },
  {
    "objectID": "1101-ml-metrics.html#æ¦‚ç‡æŒ‡æ ‡ä¸æ ¡å‡†",
    "href": "1101-ml-metrics.html#æ¦‚ç‡æŒ‡æ ‡ä¸æ ¡å‡†",
    "title": "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡ä¸ä½¿ç”¨åœºæ™¯",
    "section": "æ¦‚ç‡æŒ‡æ ‡ä¸æ ¡å‡†",
    "text": "æ¦‚ç‡æŒ‡æ ‡ä¸æ ¡å‡†\nåˆ†ç±»æ¨¡å‹è‹¥è¾“å‡ºæ¦‚ç‡ï¼Œåº”å…³æ³¨ Log Loss ä¸ Brier Scoreï¼š\n\nLog Loss å¯¹è‡ªä¿¡ä¸”é”™è¯¯çš„é¢„æµ‹æƒ©ç½šå¾ˆå¤§\nBrier Score åŒæ—¶è¡¡é‡åŒºåˆ†åº¦ä¸æ ¡å‡†æ€§\n\nè¿™ç±»æŒ‡æ ‡çš„â€œå¤§å°ç†è§£â€å¿…é¡»ç»“åˆåŸºçº¿æ¨¡å‹ï¼Œå¦‚â€œå§‹ç»ˆé¢„æµ‹æ­£ç±»æ¯”ä¾‹â€çš„ç®€å•æ¨¡å‹ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡"
    ]
  },
  {
    "objectID": "1101-ml-metrics.html#å¸¸è§é”™è¯¯ä¸çº å",
    "href": "1101-ml-metrics.html#å¸¸è§é”™è¯¯ä¸çº å",
    "title": "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡ä¸ä½¿ç”¨åœºæ™¯",
    "section": "å¸¸è§é”™è¯¯ä¸çº å",
    "text": "å¸¸è§é”™è¯¯ä¸çº å\n\nåªçœ‹ Accuracyï¼šä¸å¹³è¡¡æ•°æ®ä¸‹å®¹æ˜“é«˜ä¼°æ¨¡å‹æ€§èƒ½ã€‚\nå¿½ç•¥æ­£ç±»æ¯”ä¾‹ï¼šPR AUC ä¸ Precision å¿…é¡»æŠ¥å‘Š prevalenceã€‚\næ··ç”¨é˜ˆå€¼ä¸æ¦‚ç‡æŒ‡æ ‡ï¼šROC/PR ä½¿ç”¨è¿ç»­è¯„åˆ†ï¼ŒAccuracy/F1 ä½¿ç”¨åˆ†ç±»é˜ˆå€¼ã€‚\nR2 ç›²ç›®è¿½æ±‚é«˜å€¼ï¼šéœ€åŒæ—¶æŠ¥å‘Š MAE/RMSE è§£é‡Šå®é™…è¯¯å·®ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡"
    ]
  },
  {
    "objectID": "1101-ml-metrics.html#è¿›é˜¶æ‰©å±•",
    "href": "1101-ml-metrics.html#è¿›é˜¶æ‰©å±•",
    "title": "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡ä¸ä½¿ç”¨åœºæ™¯",
    "section": "è¿›é˜¶æ‰©å±•",
    "text": "è¿›é˜¶æ‰©å±•\n\né˜ˆå€¼ä¼˜åŒ–ï¼šä½¿ç”¨æˆæœ¬çŸ©é˜µæˆ–å†³ç­–æ›²çº¿é€‰æ‹©é˜ˆå€¼ã€‚\næ—¶é—´åºåˆ—è¯„ä¼°ï¼šæ»šåŠ¨éªŒè¯ä¸æ—¶é—´çª—å£æŒ‡æ ‡ã€‚\nä¸ç¡®å®šæ€§è¯„ä¼°ï¼šé¢„æµ‹åŒºé—´ä¸åˆ†ä½æ•°æŸå¤±ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡"
    ]
  },
  {
    "objectID": "1101-ml-metrics.html#å°ç»“",
    "href": "1101-ml-metrics.html#å°ç»“",
    "title": "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡ä¸ä½¿ç”¨åœºæ™¯",
    "section": "å°ç»“",
    "text": "å°ç»“\né¢„æµ‹æŒ‡æ ‡çš„é€‰æ‹©åº”ä¸ä¸šåŠ¡ç›®æ ‡ä¸€è‡´ã€‚åˆ†ç±»ä»»åŠ¡ä¸­ï¼ŒAUC é€‚åˆå¯¹æ¯”åŒºåˆ†åº¦ï¼ŒPR AUC é€‚åˆä¸å¹³è¡¡åœºæ™¯ï¼›å›å½’ä»»åŠ¡éœ€åŒæ—¶æŠ¥å‘Š MAE ä¸ RMSEï¼›æ¦‚ç‡è¾“å‡ºéœ€è¦ Log Loss æˆ– Brier æ ¡å‡†ã€‚æŒ‡æ ‡çš„â€œå¤§å°â€åªæœ‰åœ¨åŸºçº¿ä¸åœºæ™¯æ˜ç¡®æ—¶æ‰æœ‰æ„ä¹‰ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ¤– æœºå™¨å­¦ä¹ æ¡†æ¶",
      "æœºå™¨å­¦ä¹ é¢„æµ‹æŒ‡æ ‡"
    ]
  },
  {
    "objectID": "1102-dca.html",
    "href": "1102-dca.html",
    "title": "å†³ç­–æ›²çº¿åˆ†æ (DCA)",
    "section": "",
    "text": "å†³ç­–æ›²çº¿åˆ†æï¼ˆDecision Curve Analysis, DCAï¼‰æ˜¯è¯„ä¼°ä¸´åºŠé¢„æµ‹æ¨¡å‹æˆ–è¯Šæ–­ç­–ç•¥å®ç”¨ä»·å€¼çš„ä¸€ç§æ–¹æ³•ã€‚ä¸ä¼ ç»Ÿçš„åŒºåˆ†åº¦æŒ‡æ ‡ï¼ˆå¦‚ AUCï¼‰æˆ–æ ¡å‡†åº¦æŒ‡æ ‡ä¸åŒï¼ŒDCA ç›´æ¥å›ç­”ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼šä½¿ç”¨è¿™ä¸ªæ¨¡å‹æŒ‡å¯¼ä¸´åºŠå†³ç­–ï¼Œèƒ½å¦ä¸ºæ‚£è€…å¸¦æ¥å‡€æ”¶ç›Šï¼Ÿ\nä¼ ç»Ÿçš„æ¨¡å‹è¯„ä»·æŒ‡æ ‡ï¼ˆå¦‚çµæ•åº¦ã€ç‰¹å¼‚åº¦ã€AUCï¼‰æè¿°çš„æ˜¯æ¨¡å‹çš„ç»Ÿè®¡æ€§èƒ½ï¼Œä½†å¹¶æœªç›´æ¥å›ç­”â€æ˜¯å¦åº”è¯¥åœ¨ä¸´åºŠä¸­ä½¿ç”¨è¿™ä¸ªæ¨¡å‹â€è¿™ä¸€é—®é¢˜ã€‚DCA é€šè¿‡å¼•å…¥é˜ˆå€¼æ¦‚ç‡ï¼ˆthreshold probabilityï¼‰å’Œå‡€æ”¶ç›Šï¼ˆnet benefitï¼‰çš„æ¦‚å¿µï¼Œå°†æ¨¡å‹çš„é¢„æµ‹æ€§èƒ½ä¸ä¸´åºŠå†³ç­–çš„åæœè”ç³»èµ·æ¥ï¼Œä»è€Œè¯„ä¼°æ¨¡å‹åœ¨å®é™…åº”ç”¨ä¸­çš„ä»·å€¼ã€‚\nDCA ç‰¹åˆ«é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š\n\næ¯”è¾ƒä¸åŒé¢„æµ‹æ¨¡å‹ï¼šå“ªä¸ªæ¨¡å‹åœ¨ç‰¹å®šé˜ˆå€¼èŒƒå›´å†…å‡€æ”¶ç›Šæ›´é«˜ï¼Ÿ\næ¯”è¾ƒæ¨¡å‹ä¸é»˜è®¤ç­–ç•¥ï¼šä½¿ç”¨æ¨¡å‹æ˜¯å¦ä¼˜äºâ€å…¨éƒ¨æ²»ç–—â€æˆ–â€å…¨éƒ¨ä¸æ²»ç–—â€ï¼Ÿ\nç¡®å®šæ¨¡å‹çš„é€‚ç”¨èŒƒå›´ï¼šæ¨¡å‹åœ¨å“ªäº›é˜ˆå€¼æ¦‚ç‡ä¸‹å…·æœ‰ä¸´åºŠä»·å€¼ï¼Ÿ\nè¯„ä¼°æ–°æ ‡å¿—ç‰©çš„å¢é‡ä»·å€¼ï¼šåœ¨å·²æœ‰æ¨¡å‹åŸºç¡€ä¸ŠåŠ å…¥æ–°å˜é‡ï¼Œå‡€æ”¶ç›Šæ˜¯å¦æé«˜ï¼Ÿ",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "å†³ç­–æ›²çº¿åˆ†æ (DCA)"
    ]
  },
  {
    "objectID": "1102-dca.html#æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "href": "1102-dca.html#æ–¹æ³•èƒŒæ™¯ä¸é€‚ç”¨åœºæ™¯",
    "title": "å†³ç­–æ›²çº¿åˆ†æ (DCA)",
    "section": "",
    "text": "å†³ç­–æ›²çº¿åˆ†æï¼ˆDecision Curve Analysis, DCAï¼‰æ˜¯è¯„ä¼°ä¸´åºŠé¢„æµ‹æ¨¡å‹æˆ–è¯Šæ–­ç­–ç•¥å®ç”¨ä»·å€¼çš„ä¸€ç§æ–¹æ³•ã€‚ä¸ä¼ ç»Ÿçš„åŒºåˆ†åº¦æŒ‡æ ‡ï¼ˆå¦‚ AUCï¼‰æˆ–æ ¡å‡†åº¦æŒ‡æ ‡ä¸åŒï¼ŒDCA ç›´æ¥å›ç­”ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼šä½¿ç”¨è¿™ä¸ªæ¨¡å‹æŒ‡å¯¼ä¸´åºŠå†³ç­–ï¼Œèƒ½å¦ä¸ºæ‚£è€…å¸¦æ¥å‡€æ”¶ç›Šï¼Ÿ\nä¼ ç»Ÿçš„æ¨¡å‹è¯„ä»·æŒ‡æ ‡ï¼ˆå¦‚çµæ•åº¦ã€ç‰¹å¼‚åº¦ã€AUCï¼‰æè¿°çš„æ˜¯æ¨¡å‹çš„ç»Ÿè®¡æ€§èƒ½ï¼Œä½†å¹¶æœªç›´æ¥å›ç­”â€æ˜¯å¦åº”è¯¥åœ¨ä¸´åºŠä¸­ä½¿ç”¨è¿™ä¸ªæ¨¡å‹â€è¿™ä¸€é—®é¢˜ã€‚DCA é€šè¿‡å¼•å…¥é˜ˆå€¼æ¦‚ç‡ï¼ˆthreshold probabilityï¼‰å’Œå‡€æ”¶ç›Šï¼ˆnet benefitï¼‰çš„æ¦‚å¿µï¼Œå°†æ¨¡å‹çš„é¢„æµ‹æ€§èƒ½ä¸ä¸´åºŠå†³ç­–çš„åæœè”ç³»èµ·æ¥ï¼Œä»è€Œè¯„ä¼°æ¨¡å‹åœ¨å®é™…åº”ç”¨ä¸­çš„ä»·å€¼ã€‚\nDCA ç‰¹åˆ«é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š\n\næ¯”è¾ƒä¸åŒé¢„æµ‹æ¨¡å‹ï¼šå“ªä¸ªæ¨¡å‹åœ¨ç‰¹å®šé˜ˆå€¼èŒƒå›´å†…å‡€æ”¶ç›Šæ›´é«˜ï¼Ÿ\næ¯”è¾ƒæ¨¡å‹ä¸é»˜è®¤ç­–ç•¥ï¼šä½¿ç”¨æ¨¡å‹æ˜¯å¦ä¼˜äºâ€å…¨éƒ¨æ²»ç–—â€æˆ–â€å…¨éƒ¨ä¸æ²»ç–—â€ï¼Ÿ\nç¡®å®šæ¨¡å‹çš„é€‚ç”¨èŒƒå›´ï¼šæ¨¡å‹åœ¨å“ªäº›é˜ˆå€¼æ¦‚ç‡ä¸‹å…·æœ‰ä¸´åºŠä»·å€¼ï¼Ÿ\nè¯„ä¼°æ–°æ ‡å¿—ç‰©çš„å¢é‡ä»·å€¼ï¼šåœ¨å·²æœ‰æ¨¡å‹åŸºç¡€ä¸ŠåŠ å…¥æ–°å˜é‡ï¼Œå‡€æ”¶ç›Šæ˜¯å¦æé«˜ï¼Ÿ",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "å†³ç­–æ›²çº¿åˆ†æ (DCA)"
    ]
  },
  {
    "objectID": "1102-dca.html#æ ¸å¿ƒæ¦‚å¿µä¸ç†è®ºåŸºç¡€",
    "href": "1102-dca.html#æ ¸å¿ƒæ¦‚å¿µä¸ç†è®ºåŸºç¡€",
    "title": "å†³ç­–æ›²çº¿åˆ†æ (DCA)",
    "section": "æ ¸å¿ƒæ¦‚å¿µä¸ç†è®ºåŸºç¡€",
    "text": "æ ¸å¿ƒæ¦‚å¿µä¸ç†è®ºåŸºç¡€\n\né˜ˆå€¼æ¦‚ç‡\né˜ˆå€¼æ¦‚ç‡ï¼ˆthreshold probability, \\(p_t\\)ï¼‰æ˜¯æŒ‡ä¸´åºŠåŒ»ç”Ÿæˆ–æ‚£è€…è®¤ä¸ºâ€æ¥å—æ²»ç–—çš„é¢„æœŸæ”¶ç›Šä¸ä¸æ²»ç–—çš„é¢„æœŸæ”¶ç›Šç›¸ç­‰â€æ—¶çš„ç–¾ç—…æ¦‚ç‡ã€‚æ¢è¨€ä¹‹ï¼Œå½“æ‚£è€…çš„é¢„æµ‹æ¦‚ç‡è¶…è¿‡é˜ˆå€¼æ¦‚ç‡æ—¶ï¼Œé€‰æ‹©æ²»ç–—ï¼›ä½äºé˜ˆå€¼æ¦‚ç‡æ—¶ï¼Œé€‰æ‹©ä¸æ²»ç–—ã€‚\né˜ˆå€¼æ¦‚ç‡åæ˜ äº†æ²»ç–—çš„æ”¶ç›Šä¸é£é™©ä¹‹é—´çš„æƒè¡¡ã€‚å‡è®¾ï¼š\n\næ”¶ç›Šï¼ˆBenefitï¼‰ï¼šæ­£ç¡®æ²»ç–—ä¸€ä¸ªçœŸæ­£æ‚£ç—…è€…å¸¦æ¥çš„æ”¶ç›Š\næŸå®³ï¼ˆHarmï¼‰ï¼šé”™è¯¯æ²»ç–—ä¸€ä¸ªæœªæ‚£ç—…è€…å¸¦æ¥çš„æŸå®³\n\né˜ˆå€¼æ¦‚ç‡å¯è¡¨ç¤ºä¸ºï¼š\n\\[p_t = \\frac{\\text{Harm}}{\\text{Benefit} + \\text{Harm}}\\]\næˆ–ç­‰ä»·åœ°ï¼š\n\\[\\frac{p_t}{1 - p_t} = \\frac{\\text{Harm}}{\\text{Benefit}}\\]\nä¸åŒçš„ä¸´åºŠæƒ…å¢ƒå¯¹åº”ä¸åŒçš„é˜ˆå€¼æ¦‚ç‡ã€‚ä¾‹å¦‚ï¼Œå¯¹äºä½é£é™©ç­›æŸ¥ï¼ˆå¦‚å¸¸è§„ä½“æ£€ï¼‰ï¼Œå¯èƒ½æ¥å—è¾ƒä½çš„é˜ˆå€¼ï¼ˆå¦‚ 5%ï¼‰ï¼›è€Œå¯¹äºé«˜é£é™©æ‰‹æœ¯å†³ç­–ï¼Œå¯èƒ½éœ€è¦è¾ƒé«˜çš„é˜ˆå€¼ï¼ˆå¦‚ 30%-50%ï¼‰ã€‚\n\n\nå‡€æ”¶ç›Š\nå‡€æ”¶ç›Šï¼ˆnet benefitï¼‰æ˜¯ DCA çš„æ ¸å¿ƒæŒ‡æ ‡ï¼Œå®šä¹‰ä¸ºï¼š\n\\[\\text{Net Benefit} = \\frac{\\text{TP}}{N} - \\frac{\\text{FP}}{N} \\times \\frac{p_t}{1 - p_t}\\]\nå…¶ä¸­ï¼š\n\n\\(\\text{TP}\\)ï¼šçœŸé˜³æ€§æ•°ï¼ˆæ­£ç¡®é¢„æµ‹ä¸ºé˜³æ€§çš„æ‚£ç—…è€…ï¼‰\n\\(\\text{FP}\\)ï¼šå‡é˜³æ€§æ•°ï¼ˆé”™è¯¯é¢„æµ‹ä¸ºé˜³æ€§çš„æœªæ‚£ç—…è€…ï¼‰\n\\(N\\)ï¼šæ€»æ ·æœ¬é‡\n\\(p_t\\)ï¼šé˜ˆå€¼æ¦‚ç‡\n\nå‡€æ”¶ç›Šçš„å«ä¹‰æ˜¯ï¼šåœ¨ç»™å®šé˜ˆå€¼æ¦‚ç‡ä¸‹ï¼Œä½¿ç”¨æ¨¡å‹è¿›è¡Œå†³ç­–æ‰€å¸¦æ¥çš„çœŸé˜³æ€§æ¯”ä¾‹ï¼Œå‡å»å‡é˜³æ€§å¸¦æ¥çš„â€åŠ æƒæŸå¤±â€ã€‚æƒé‡å› å­ \\(\\frac{p_t}{1-p_t}\\) ä½“ç°äº†å‡é˜³æ€§çš„ç›¸å¯¹å±å®³ç¨‹åº¦ã€‚\n\n\nåŸºå‡†ç­–ç•¥\nDCA é€šå¸¸å°†é¢„æµ‹æ¨¡å‹ä¸ä¸¤ç§æç«¯ç­–ç•¥è¿›è¡Œæ¯”è¾ƒï¼š\n\nå…¨éƒ¨æ²»ç–—ï¼ˆTreat Allï¼‰ï¼šå‡è®¾æ‰€æœ‰äººéƒ½æ‚£ç—…ï¼Œå…¨éƒ¨æ¥å—æ²»ç–—\n\nå‡€æ”¶ç›Š = æ‚£ç—…ç‡ - (1 - æ‚£ç—…ç‡) Ã— \\(\\frac{p_t}{1-p_t}\\)\néšç€é˜ˆå€¼æ¦‚ç‡å‡é«˜ï¼Œå‡€æ”¶ç›Šä¸‹é™\n\nå…¨éƒ¨ä¸æ²»ç–—ï¼ˆTreat Noneï¼‰ï¼šå‡è®¾æ‰€æœ‰äººéƒ½ä¸æ‚£ç—…ï¼Œå…¨éƒ¨ä¸æ²»ç–—\n\nå‡€æ”¶ç›Š = 0ï¼ˆæ’å®šï¼‰\n\n\nä¸€ä¸ªæœ‰ä¸´åºŠä»·å€¼çš„æ¨¡å‹ï¼Œå…¶å‡€æ”¶ç›Šæ›²çº¿åº”åœ¨æŸä¸ªé˜ˆå€¼èŒƒå›´å†…é«˜äºè¿™ä¸¤æ¡åŸºå‡†çº¿ã€‚\n\n\nå†³ç­–æ›²çº¿çš„è§£è¯»\nå†³ç­–æ›²çº¿ä»¥é˜ˆå€¼æ¦‚ç‡ä¸ºæ¨ªè½´ã€å‡€æ”¶ç›Šä¸ºçºµè½´ã€‚å…¸å‹çš„å†³ç­–æ›²çº¿å›¾åŒ…å«ï¼š\n\næ¨¡å‹æ›²çº¿ï¼šé¢„æµ‹æ¨¡å‹åœ¨ä¸åŒé˜ˆå€¼ä¸‹çš„å‡€æ”¶ç›Š\nTreat All çº¿ï¼šå…¨éƒ¨æ²»ç–—ç­–ç•¥çš„å‡€æ”¶ç›Šï¼ˆå‘å³ä¸‹æ–¹å€¾æ–œï¼‰\nTreat None çº¿ï¼šå…¨éƒ¨ä¸æ²»ç–—ç­–ç•¥çš„å‡€æ”¶ç›Šï¼ˆæ°´å¹³çº¿ï¼Œå‡€æ”¶ç›Š=0ï¼‰\n\nè§£è¯»è¦ç‚¹ï¼š\n\næ›²çº¿è¶Šé«˜ï¼Œå‡€æ”¶ç›Šè¶Šå¤§ï¼šåœ¨ç›¸åŒé˜ˆå€¼ä¸‹ï¼Œå‡€æ”¶ç›Šè¶Šé«˜çš„æ¨¡å‹è¶Šä¼˜\né«˜äºåŸºå‡†çº¿çš„åŒºé—´ï¼šæ¨¡å‹å…·æœ‰ä¸´åºŠä»·å€¼çš„é˜ˆå€¼èŒƒå›´\næ›²çº¿äº¤å‰ç‚¹ï¼šä¸åŒç­–ç•¥æˆ–æ¨¡å‹å‡€æ”¶ç›Šç›¸ç­‰çš„é˜ˆå€¼",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "å†³ç­–æ›²çº¿åˆ†æ (DCA)"
    ]
  },
  {
    "objectID": "1102-dca.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "href": "1102-dca.html#æ¨¡å‹å‡è®¾ä¸å‰æ",
    "title": "å†³ç­–æ›²çº¿åˆ†æ (DCA)",
    "section": "æ¨¡å‹å‡è®¾ä¸å‰æ",
    "text": "æ¨¡å‹å‡è®¾ä¸å‰æ\n\nç»“å±€ä¸ºäºŒåˆ†ç±»ï¼šDCA é€‚ç”¨äºäºŒåˆ†ç±»ç»“å±€ï¼ˆå¦‚æ‚£ç—…/æœªæ‚£ç—…ã€å‘ç”Ÿ/æœªå‘ç”Ÿï¼‰\næ¨¡å‹è¾“å‡ºä¸ºæ¦‚ç‡æˆ–é£é™©è¯„åˆ†ï¼šéœ€è¦è¿ç»­çš„é¢„æµ‹å€¼ä»¥ç»˜åˆ¶å®Œæ•´æ›²çº¿\né˜ˆå€¼æ¦‚ç‡èŒƒå›´åˆç†ï¼šé€šå¸¸é€‰æ‹©ä¸´åºŠç›¸å…³çš„é˜ˆå€¼èŒƒå›´è¿›è¡Œå±•ç¤º\nç‹¬ç«‹éªŒè¯æ•°æ®ï¼šå»ºè®®åœ¨ç‹¬ç«‹éªŒè¯é›†ä¸Šè®¡ç®—ï¼Œé¿å…è¿‡æ‹Ÿåˆå¯¼è‡´çš„ä¹è§‚ä¼°è®¡\næ ·æœ¬é‡è¶³å¤Ÿï¼šæ ·æœ¬é‡è¿‡å°ä¼šå¯¼è‡´å‡€æ”¶ç›Šä¼°è®¡ä¸ç¨³å®š",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "å†³ç­–æ›²çº¿åˆ†æ (DCA)"
    ]
  },
  {
    "objectID": "1102-dca.html#æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "href": "1102-dca.html#æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "title": "å†³ç­–æ›²çº¿åˆ†æ (DCA)",
    "section": "æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰",
    "text": "æ•°æ®å‡†å¤‡ä¸å˜é‡å®šä¹‰\nè¿›è¡Œ DCA åˆ†æéœ€è¦å‡†å¤‡ä»¥ä¸‹æ•°æ®ï¼š\n\nç»“å±€å˜é‡ï¼šäºŒåˆ†ç±»ï¼ˆ0/1 æˆ– FALSE/TRUEï¼‰\né¢„æµ‹æ¦‚ç‡ï¼šæ¨¡å‹è¾“å‡ºçš„é£é™©æ¦‚ç‡ï¼ˆ0-1 ä¹‹é—´ï¼‰\nåˆ†ç»„å˜é‡ï¼ˆå¯é€‰ï¼‰ï¼šç”¨äºæ¯”è¾ƒä¸åŒæ¨¡å‹æˆ–äºšç»„\n\næ•°æ®ç»“æ„ç¤ºä¾‹ï¼š\n\n\n\nID\noutcome\nmodel_a_prob\nmodel_b_prob\n\n\n\n\n1\n1\n0.72\n0.68\n\n\n2\n0\n0.15\n0.12\n\n\n3\n1\n0.45\n0.52\n\n\nâ€¦\nâ€¦\nâ€¦\nâ€¦",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "å†³ç­–æ›²çº¿åˆ†æ (DCA)"
    ]
  },
  {
    "objectID": "1102-dca.html#åˆ†ææµç¨‹æ­¥éª¤",
    "href": "1102-dca.html#åˆ†ææµç¨‹æ­¥éª¤",
    "title": "å†³ç­–æ›²çº¿åˆ†æ (DCA)",
    "section": "åˆ†ææµç¨‹æ­¥éª¤",
    "text": "åˆ†ææµç¨‹æ­¥éª¤\n\næ˜ç¡®ä¸´åºŠé—®é¢˜ï¼šå®šä¹‰ç»“å±€ã€æ²»ç–—å†³ç­–åŠå…¶æ”¶ç›Š/é£é™©\nç¡®å®šé˜ˆå€¼èŒƒå›´ï¼šæ ¹æ®ä¸´åºŠæƒ…å¢ƒé€‰æ‹©åˆç†çš„é˜ˆå€¼æ¦‚ç‡åŒºé—´\nè·å–é¢„æµ‹æ¦‚ç‡ï¼šä»å·²å»ºç«‹çš„é¢„æµ‹æ¨¡å‹è·å–é£é™©ä¼°è®¡\nè®¡ç®—å‡€æ”¶ç›Šï¼šåœ¨æ¯ä¸ªé˜ˆå€¼ç‚¹è®¡ç®—æ¨¡å‹å’ŒåŸºå‡†ç­–ç•¥çš„å‡€æ”¶ç›Š\nç»‘åˆ¶å†³ç­–æ›²çº¿ï¼šå¯è§†åŒ–æ¯”è¾ƒä¸åŒç­–ç•¥çš„å‡€æ”¶ç›Š\nè§£è¯»ä¸æŠ¥å‘Šï¼šç¡®å®šæ¨¡å‹çš„ä¸´åºŠé€‚ç”¨èŒƒå›´å’Œå¢é‡ä»·å€¼\n\n\næ–¹æ³•é€‰æ‹©å†³ç­–è¡¨\n\n\n\nè¯„ä¼°ç›®æ ‡\næ¨èæ–¹æ³•\nè¯´æ˜\n\n\n\n\næ¨¡å‹åŒºåˆ†åº¦\nAUC/C-statistic\nè¯„ä¼°æ’åºèƒ½åŠ›\n\n\næ ¡å‡†åº¦\næ ¡å‡†æ›²çº¿/Hosmer-Lemeshow\nè¯„ä¼°é¢„æµ‹å‡†ç¡®æ€§\n\n\nä¸´åºŠå®ç”¨ä»·å€¼\nDCA\nè¯„ä¼°å†³ç­–å‡€æ”¶ç›Š\n\n\nç¨€æœ‰äº‹ä»¶\nAUPRC\nå…³æ³¨é˜³æ€§æ£€å‡ºè´¨é‡",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "å†³ç­–æ›²çº¿åˆ†æ (DCA)"
    ]
  },
  {
    "objectID": "1102-dca.html#ä»£ç å®ç°",
    "href": "1102-dca.html#ä»£ç å®ç°",
    "title": "å†³ç­–æ›²çº¿åˆ†æ (DCA)",
    "section": "ä»£ç å®ç°",
    "text": "ä»£ç å®ç°\nä¸‹é¢ä½¿ç”¨ R ä¸­çš„ dcurves åŒ…æ¼”ç¤º DCA çš„å®Œæ•´åˆ†ææµç¨‹ã€‚\n\nå®‰è£…ä¸åŠ è½½åŒ…\n\n# å¦‚æœªå®‰è£…ï¼Œå…ˆå®‰è£…\n# install.packages(\"dcurves\")\n\nlibrary(dcurves)\nlibrary(ggplot2)\nlibrary(dplyr)\n\n\n\næ„å»ºæ¨¡æ‹Ÿæ•°æ®\næ„å»ºä¸€ä¸ªä¸´åºŠé¢„æµ‹åœºæ™¯ï¼šé¢„æµ‹æ‚£è€…æ˜¯å¦ä¼šå‘ç”ŸæŸç§ä¸è‰¯äº‹ä»¶ï¼Œå¹¶æ¯”è¾ƒä¸¤ä¸ªé¢„æµ‹æ¨¡å‹çš„å‡€æ”¶ç›Šã€‚\n\nset.seed(42)\n\nn &lt;- 1000\n\n# æ¨¡æ‹Ÿåå˜é‡\nage &lt;- rnorm(n, mean = 60, sd = 10)\nbiomarker_a &lt;- rnorm(n, mean = 0, sd = 1)\nbiomarker_b &lt;- rnorm(n, mean = 0, sd = 1)\n\n# çœŸå®é£é™©å‡½æ•°\nlog_odds &lt;- -3.5 + 0.04 * age + 0.8 * biomarker_a + 0.5 * biomarker_b\nprob_true &lt;- plogis(log_odds)\n\n# ç”Ÿæˆç»“å±€\noutcome &lt;- rbinom(n, 1, prob_true)\n\n# æ„å»ºæ•°æ®æ¡†\ndata &lt;- data.frame(\n  outcome = outcome,\n  age = age,\n  biomarker_a = biomarker_a,\n  biomarker_b = biomarker_b\n)\n\ncat(\"äº‹ä»¶å‘ç”Ÿç‡:\", round(mean(outcome), 3), \"\\n\")\n\näº‹ä»¶å‘ç”Ÿç‡: 0.276 \n\n\n\n\nå»ºç«‹é¢„æµ‹æ¨¡å‹\næ„å»ºä¸¤ä¸ªé¢„æµ‹æ¨¡å‹è¿›è¡Œæ¯”è¾ƒï¼š\n\næ¨¡å‹ Aï¼šä»…åŒ…å«å¹´é¾„å’Œæ ‡å¿—ç‰© A\næ¨¡å‹ Bï¼šåŒ…å«å¹´é¾„ã€æ ‡å¿—ç‰© A å’Œæ ‡å¿—ç‰© B\n\n\n# æ¨¡å‹ Aï¼šç®€å•æ¨¡å‹\nmodel_a &lt;- glm(outcome ~ age + biomarker_a, \n               data = data, family = binomial)\n\n# æ¨¡å‹ Bï¼šå®Œæ•´æ¨¡å‹\nmodel_b &lt;- glm(outcome ~ age + biomarker_a + biomarker_b, \n               data = data, family = binomial)\n\n# ç”Ÿæˆé¢„æµ‹æ¦‚ç‡\ndata$prob_a &lt;- predict(model_a, type = \"response\")\ndata$prob_b &lt;- predict(model_b, type = \"response\")\n\n# æŸ¥çœ‹æ¨¡å‹ AUC\ncat(\"æ¨¡å‹ A AUC:\", round(pROC::auc(data$outcome, data$prob_a), 3), \"\\n\")\n\næ¨¡å‹ A AUC: 0.685 \n\ncat(\"æ¨¡å‹ B AUC:\", round(pROC::auc(data$outcome, data$prob_b), 3), \"\\n\")\n\næ¨¡å‹ B AUC: 0.731 \n\n\n\n\nè®¡ç®—å¹¶ç»‘åˆ¶å†³ç­–æ›²çº¿\nä½¿ç”¨ dcurves åŒ…çš„ dca() å‡½æ•°è¿›è¡Œå†³ç­–æ›²çº¿åˆ†æï¼š\n\n# åŸºæœ¬ DCA åˆ†æ\ndca_result &lt;- dca(\n  outcome ~ prob_a + prob_b,\n  data = data,\n  thresholds = seq(0, 0.5, by = 0.01),\n  label = list(prob_a = \"æ¨¡å‹ A\", prob_b = \"æ¨¡å‹ B\")\n)\n\n# æŸ¥çœ‹ç»“æœæ‘˜è¦\ndca_result\n\n\n\n\n\n\n\n\n\n# ç»‘åˆ¶å†³ç­–æ›²çº¿\nplot(dca_result) +\n  labs(\n    title = \"å†³ç­–æ›²çº¿åˆ†æ\",\n    x = \"é˜ˆå€¼æ¦‚ç‡\",\n    y = \"å‡€æ”¶ç›Š\"\n  ) +\n  theme_minimal() +\n  theme(\n    legend.position = \"bottom\",\n    plot.title = element_text(hjust = 0.5)\n  )\n\n\n\n\n\n\n\n\n\n\næå–å‡€æ”¶ç›Šæ•°æ®\n\n# æå–å‡€æ”¶ç›Šæ•°æ®ç”¨äºè‡ªå®šä¹‰ç»‘å›¾\nnb_data &lt;- as_tibble(dca_result)\n\n# æŸ¥çœ‹æ•°æ®ç»“æ„\nhead(nb_data)\n\n# A tibble: 6 Ã— 9\n  variable label         n threshold pos_rate tp_rate fp_rate  harm net_benefit\n  &lt;chr&gt;    &lt;fct&gt;     &lt;int&gt;     &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;       &lt;dbl&gt;\n1 all      Treat All  1000      0       0.276   0.276   0.724     0       0.276\n2 all      Treat All  1000      0.01    0.276   0.276   0.724     0       0.269\n3 all      Treat All  1000      0.02    0.276   0.276   0.724     0       0.261\n4 all      Treat All  1000      0.03    0.276   0.276   0.724     0       0.254\n5 all      Treat All  1000      0.04    0.276   0.276   0.724     0       0.246\n6 all      Treat All  1000      0.05    0.276   0.276   0.724     0       0.238\n\n\n\n# è‡ªå®šä¹‰ç»‘å›¾å±•ç¤º\nggplot(nb_data, aes(x = threshold, y = net_benefit, color = label)) +\n  geom_line(linewidth = 1) +\n  scale_color_manual(\n    values = c(\"æ¨¡å‹ A\" = \"#2563eb\", \"æ¨¡å‹ B\" = \"#f97316\", \n               \"Treat All\" = \"#6b7280\", \"Treat None\" = \"#9ca3af\")\n  ) +\n  scale_x_continuous(labels = scales::percent_format()) +\n  labs(\n    title = \"å†³ç­–æ›²çº¿åˆ†æ\",\n    subtitle = \"æ¯”è¾ƒä¸¤ä¸ªé¢„æµ‹æ¨¡å‹ä¸é»˜è®¤ç­–ç•¥çš„å‡€æ”¶ç›Š\",\n    x = \"é˜ˆå€¼æ¦‚ç‡\",\n    y = \"å‡€æ”¶ç›Š\",\n    color = \"ç­–ç•¥\"\n  ) +\n  theme_minimal() +\n  theme(\n    legend.position = \"bottom\",\n    plot.title = element_text(hjust = 0.5),\n    plot.subtitle = element_text(hjust = 0.5, color = \"gray50\")\n  ) +\n  coord_cartesian(ylim = c(-0.05, 0.25))\n\n\n\n\n\n\n\n\n\n\nè®¡ç®—å‡€å‡å°‘å¹²é¢„é‡\nå‡€å‡å°‘å¹²é¢„é‡ï¼ˆNet Reduction in Interventionsï¼‰è¡¨ç¤ºåœ¨ç»´æŒç›¸åŒæ£€å‡ºç‡çš„å‰æä¸‹ï¼Œä½¿ç”¨æ¨¡å‹å¯ä»¥å‡å°‘å¤šå°‘ä¸å¿…è¦çš„å¹²é¢„ã€‚\n\n# è®¡ç®—å‡€å‡å°‘å¹²é¢„é‡\nnet_intervention &lt;- nb_data |&gt;\n  filter(label %in% c(\"æ¨¡å‹ A\", \"æ¨¡å‹ B\", \"Treat All\")) |&gt;\n  select(threshold, label, net_benefit) |&gt;\n  tidyr::pivot_wider(names_from = label, values_from = net_benefit) |&gt;\n  mutate(\n    reduction_a = (`æ¨¡å‹ A` - `Treat All`) / (threshold / (1 - threshold)) * 100,\n    reduction_b = (`æ¨¡å‹ B` - `Treat All`) / (threshold / (1 - threshold)) * 100\n  ) |&gt;\n  filter(threshold &gt;= 0.05 & threshold &lt;= 0.4)\n\n# å±•ç¤ºéƒ¨åˆ†ç»“æœ\nnet_intervention |&gt;\n  filter(threshold %in% c(0.1, 0.2, 0.3)) |&gt;\n  select(threshold, reduction_a, reduction_b) |&gt;\n  mutate(\n    threshold = scales::percent(threshold),\n    reduction_a = round(reduction_a, 1),\n    reduction_b = round(reduction_b, 1)\n  ) |&gt;\n  knitr::kable(\n    col.names = c(\"é˜ˆå€¼æ¦‚ç‡\", \"æ¨¡å‹Aå‡å°‘å¹²é¢„(%)\", \"æ¨¡å‹Bå‡å°‘å¹²é¢„(%)\"),\n    caption = \"ä½¿ç”¨æ¨¡å‹ç›¸æ¯”å…¨éƒ¨æ²»ç–—å¯å‡å°‘çš„ä¸å¿…è¦å¹²é¢„æ¯”ä¾‹\"\n  )\n\n\nä½¿ç”¨æ¨¡å‹ç›¸æ¯”å…¨éƒ¨æ²»ç–—å¯å‡å°‘çš„ä¸å¿…è¦å¹²é¢„æ¯”ä¾‹\n\n\né˜ˆå€¼æ¦‚ç‡\næ¨¡å‹Aå‡å°‘å¹²é¢„(%)\næ¨¡å‹Bå‡å°‘å¹²é¢„(%)\n\n\n\n\n10%\n3.1\n5.4\n\n\n20%\n9.0\n15.0\n\n\n30%\n22.2\n25.6\n\n\n\n\n\n\n\näºšç»„åˆ†æ\næŒ‰å¹´é¾„åˆ†å±‚è¿›è¡Œ DCA åˆ†æï¼š\n\n# æŒ‰å¹´é¾„åˆ†ç»„\ndata &lt;- data |&gt;\n  mutate(age_group = ifelse(age &gt;= 60, \"&gt;=60å²\", \"&lt;60å²\"))\n\n# åˆ†ç»„ DCA\ndca_by_age &lt;- dca(\n\n  outcome ~ prob_b,\n  data = data,\n  thresholds = seq(0, 0.5, by = 0.01),\n  label = list(prob_b = \"æ¨¡å‹ B\")\n)\n\n# ç»‘å›¾\nplot(dca_by_age) +\n  labs(\n    title = \"å†³ç­–æ›²çº¿åˆ†æ\",\n    x = \"é˜ˆå€¼æ¦‚ç‡\",\n    y = \"å‡€æ”¶ç›Š\"\n  ) +\n  theme_minimal()",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "å†³ç­–æ›²çº¿åˆ†æ (DCA)"
    ]
  },
  {
    "objectID": "1102-dca.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "href": "1102-dca.html#ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "title": "å†³ç­–æ›²çº¿åˆ†æ (DCA)",
    "section": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š",
    "text": "ç»“æœè§£è¯»ä¸æŠ¥å‘Š\n\nå†³ç­–æ›²çº¿è§£è¯»è¦ç‚¹\n\næ¨¡å‹æ›²çº¿é«˜äºåŸºå‡†çº¿çš„åŒºé—´ï¼š\n\nå½“æ¨¡å‹æ›²çº¿é«˜äº Treat All å’Œ Treat None æ—¶ï¼Œä½¿ç”¨æ¨¡å‹è¿›è¡Œå†³ç­–ä¼˜äºé»˜è®¤ç­–ç•¥\næœ¬ä¾‹ä¸­ï¼Œæ¨¡å‹ B åœ¨çº¦ 5%-40% çš„é˜ˆå€¼èŒƒå›´å†…å‡é«˜äºåŸºå‡†çº¿\n\næ¨¡å‹ä¹‹é—´çš„æ¯”è¾ƒï¼š\n\nåœ¨å¤§éƒ¨åˆ†é˜ˆå€¼èŒƒå›´å†…ï¼Œæ¨¡å‹ B çš„å‡€æ”¶ç›Šç•¥é«˜äºæ¨¡å‹ A\nè¿™è¡¨æ˜æ·»åŠ æ ‡å¿—ç‰© B åï¼Œæ¨¡å‹çš„ä¸´åºŠå†³ç­–ä»·å€¼æœ‰æ‰€æå‡\n\nå‡€æ”¶ç›Šçš„ç»å¯¹å€¼ï¼š\n\nå‡€æ”¶ç›Šå¯è§£é‡Šä¸ºâ€æ¯ 100 äººä¸­æ­£ç¡®è¯†åˆ«çš„å‡€çœŸé˜³æ€§æ•°â€\nä¾‹å¦‚ï¼Œé˜ˆå€¼ 20% æ—¶å‡€æ”¶ç›Š 0.10 è¡¨ç¤ºæ¯ 100 äººä¸­å‡€è·ç›Š 10 äºº\n\n\n\n\næŠ¥å‘Šè§„èŒƒ\næŠ¥å‘Š DCA ç»“æœæ—¶åº”åŒ…å«ï¼š\n\nåˆ†æè®¾ç½®ï¼šç»“å±€å®šä¹‰ã€æ¨¡å‹æè¿°ã€é˜ˆå€¼èŒƒå›´é€‰æ‹©ä¾æ®\nå†³ç­–æ›²çº¿å›¾ï¼šå±•ç¤ºæ‰€æœ‰æ¯”è¾ƒç­–ç•¥çš„å‡€æ”¶ç›Šæ›²çº¿\nå…³é”®é˜ˆå€¼ç‚¹çš„å‡€æ”¶ç›Šï¼šæŠ¥å‘Šä¸´åºŠç›¸å…³é˜ˆå€¼ä¸‹çš„å…·ä½“æ•°å€¼\næ¨¡å‹é€‚ç”¨èŒƒå›´ï¼šæ˜ç¡®æ¨¡å‹ä¼˜äºåŸºå‡†ç­–ç•¥çš„é˜ˆå€¼åŒºé—´\nå±€é™æ€§è¯´æ˜ï¼šæ ·æœ¬é‡ã€éªŒè¯æ–¹å¼ã€é˜ˆå€¼é€‰æ‹©çš„ä¸ç¡®å®šæ€§\n\nç¤ºä¾‹æŠ¥å‘Šæ®µè½ï¼š\n\nå†³ç­–æ›²çº¿åˆ†ææ˜¾ç¤ºï¼Œåœ¨ 5%-40% çš„é˜ˆå€¼æ¦‚ç‡èŒƒå›´å†…ï¼Œé¢„æµ‹æ¨¡å‹çš„å‡€æ”¶ç›Šå‡é«˜äºâ€å…¨éƒ¨æ²»ç–—â€å’Œâ€å…¨éƒ¨ä¸æ²»ç–—â€ç­–ç•¥ã€‚åœ¨ä¸´åºŠå¸¸ç”¨çš„ 20% é˜ˆå€¼ä¸‹ï¼Œæ¨¡å‹ B çš„å‡€æ”¶ç›Šä¸º 0.12ï¼Œç›¸æ¯”å…¨éƒ¨æ²»ç–—ç­–ç•¥å¯å‡å°‘çº¦ 35% çš„ä¸å¿…è¦å¹²é¢„ã€‚æ¨¡å‹ B åœ¨æ•´ä¸ªåˆ†æèŒƒå›´å†…ç•¥ä¼˜äºæ¨¡å‹ Aï¼Œæç¤ºæ ‡å¿—ç‰© B çš„åŠ å…¥å…·æœ‰ä¸€å®šçš„å¢é‡ä¸´åºŠä»·å€¼ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "å†³ç­–æ›²çº¿åˆ†æ (DCA)"
    ]
  },
  {
    "objectID": "1102-dca.html#å¸¸è§é”™è¯¯ä¸çº å",
    "href": "1102-dca.html#å¸¸è§é”™è¯¯ä¸çº å",
    "title": "å†³ç­–æ›²çº¿åˆ†æ (DCA)",
    "section": "å¸¸è§é”™è¯¯ä¸çº å",
    "text": "å¸¸è§é”™è¯¯ä¸çº å\n\né˜ˆå€¼èŒƒå›´é€‰æ‹©ä¸å½“\né—®é¢˜ï¼šå±•ç¤º 0-100% çš„å®Œæ•´é˜ˆå€¼èŒƒå›´ï¼Œä½†å¤§éƒ¨åˆ†åŒºé—´åœ¨ä¸´åºŠä¸Šä¸ç›¸å…³ã€‚\nçº æ­£ï¼šæ ¹æ®ä¸´åºŠæƒ…å¢ƒé€‰æ‹©åˆç†çš„é˜ˆå€¼èŒƒå›´ã€‚ä¾‹å¦‚ï¼Œç™Œç—‡ç­›æŸ¥å¯èƒ½å…³æ³¨ 1%-20%ï¼Œè€Œæ‰‹æœ¯å†³ç­–å¯èƒ½å…³æ³¨ 10%-50%ã€‚\n\n\næ··æ·†å‡€æ”¶ç›Šä¸ AUC\né—®é¢˜ï¼šè®¤ä¸º AUC é«˜çš„æ¨¡å‹ä¸€å®šå‡€æ”¶ç›Šé«˜ã€‚\nçº æ­£ï¼šAUC è¡¡é‡çš„æ˜¯æ•´ä½“åŒºåˆ†åº¦ï¼Œè€Œå‡€æ”¶ç›Šå…³æ³¨ç‰¹å®šé˜ˆå€¼ä¸‹çš„å†³ç­–ä»·å€¼ã€‚ä¸¤ä¸ªæ¨¡å‹å¯èƒ½ AUC ç›¸è¿‘ä½†å‡€æ”¶ç›Šå·®å¼‚æ˜æ˜¾ã€‚\n\n\nå¿½ç•¥æ ¡å‡†åº¦\né—®é¢˜ï¼šåœ¨æ ¡å‡†åº¦å¾ˆå·®çš„æ¨¡å‹ä¸Šè¿›è¡Œ DCAã€‚\nçº æ­£ï¼šDCA å‡è®¾é¢„æµ‹æ¦‚ç‡æ˜¯æ ¡å‡†çš„ã€‚å¦‚æœæ¨¡å‹ä¸¥é‡è¿‡ä¼°æˆ–ä½ä¼°é£é™©ï¼Œåº”å…ˆè¿›è¡Œæ ¡å‡†å†åš DCAã€‚\n\n\næ ·æœ¬é‡ä¸è¶³\né—®é¢˜ï¼šåœ¨å°æ ·æœ¬ä¸­è¿›è¡Œ DCAï¼Œå¯¼è‡´å‡€æ”¶ç›Šæ›²çº¿æ³¢åŠ¨å‰§çƒˆã€‚\nçº æ­£ï¼šç¡®ä¿æ ·æœ¬é‡è¶³å¤Ÿï¼Œç‰¹åˆ«æ˜¯äº‹ä»¶æ•°åº”å……è¶³ã€‚å¯è€ƒè™‘ä½¿ç”¨å¹³æ»‘æ–¹æ³•æˆ– Bootstrap ç½®ä¿¡åŒºé—´ã€‚\n\n\nä»…æŠ¥å‘Šä¼˜åŠ¿åŒºé—´\né—®é¢˜ï¼šé€‰æ‹©æ€§å±•ç¤ºæ¨¡å‹è¡¨ç°æœ€å¥½çš„é˜ˆå€¼åŒºé—´ã€‚\nçº æ­£ï¼šåº”å±•ç¤ºå®Œæ•´çš„ä¸´åºŠç›¸å…³é˜ˆå€¼èŒƒå›´ï¼ŒåŒ…æ‹¬æ¨¡å‹å¯èƒ½ä¸ä¼˜äºåŸºå‡†ç­–ç•¥çš„åŒºé—´ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "å†³ç­–æ›²çº¿åˆ†æ (DCA)"
    ]
  },
  {
    "objectID": "1102-dca.html#è¿›é˜¶æ‰©å±•",
    "href": "1102-dca.html#è¿›é˜¶æ‰©å±•",
    "title": "å†³ç­–æ›²çº¿åˆ†æ (DCA)",
    "section": "è¿›é˜¶æ‰©å±•",
    "text": "è¿›é˜¶æ‰©å±•\n\nç”Ÿå­˜ç»“å±€çš„ DCA\nå¯¹äºæ—¶é—´åˆ°äº‹ä»¶æ•°æ®ï¼Œå¯ä½¿ç”¨ stdca() å‡½æ•°è¿›è¡Œç”Ÿå­˜åˆ†æç‰ˆæœ¬çš„ DCAï¼š\n\n# ç”Ÿå­˜ DCA ç¤ºä¾‹ï¼ˆä¼ªä»£ç ï¼‰\nlibrary(dcurves)\n\n# å‡è®¾æœ‰ç”Ÿå­˜æ•°æ®\ndca_survival &lt;- dca(\n  Surv(time, status) ~ risk_score,\n  data = surv_data,\n  time = 5,  # 5å¹´æ—¶é—´ç‚¹\n  thresholds = seq(0, 0.5, by = 0.01)\n)\n\n\n\næˆæœ¬-æ•ˆç›Šåˆ†ææ•´åˆ\nDCA å¯ä¸æˆæœ¬-æ•ˆç›Šåˆ†æç»“åˆï¼Œé€šè¿‡è°ƒæ•´æƒé‡å› å­åæ˜ å®é™…çš„ç»æµæˆæœ¬ï¼š\n\n# è°ƒæ•´åçš„å‡€æ”¶ç›Šè®¡ç®—\n# å½“æ²»ç–—æˆæœ¬ä¸æ¼è¯Šæˆæœ¬ä¹‹æ¯”ä¸ç­‰äº pt/(1-pt) æ—¶\nadjusted_nb &lt;- tp_rate - fp_rate * cost_ratio\n\n\n\nBootstrap ç½®ä¿¡åŒºé—´\nä¸ºå‡€æ”¶ç›Šæ·»åŠ ç½®ä¿¡åŒºé—´ï¼Œå¢å¼ºç»“æœçš„å¯é æ€§ï¼š\n\n# Bootstrap DCAï¼ˆä¼ªä»£ç ï¼‰\nlibrary(boot)\n\ndca_boot &lt;- function(data, indices) {\n  d &lt;- data[indices, ]\n  # è®¡ç®—å‡€æ”¶ç›Š...\n}\n\nboot_results &lt;- boot(data, dca_boot, R = 1000)\n\n\n\nå¤šç±»åˆ«ç»“å±€\nå¯¹äºå¤šåˆ†ç±»ç»“å±€ï¼Œå¯é‡‡ç”¨ one-vs-rest ç­–ç•¥åˆ†åˆ«è¿›è¡Œ DCAï¼Œæˆ–ä½¿ç”¨ä¸“é—¨çš„å¤šç±»åˆ« DCA æ–¹æ³•ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "å†³ç­–æ›²çº¿åˆ†æ (DCA)"
    ]
  },
  {
    "objectID": "1102-dca.html#æ¨èé˜…è¯»",
    "href": "1102-dca.html#æ¨èé˜…è¯»",
    "title": "å†³ç­–æ›²çº¿åˆ†æ (DCA)",
    "section": "æ¨èé˜…è¯»",
    "text": "æ¨èé˜…è¯»\n\nVickers AJ, Elkin EB. Decision curve analysis: a novel method for evaluating prediction models. Medical Decision Making. 2006;26(6):565-574.\nVickers AJ, et al. Net benefit approaches to the evaluation of prediction models, molecular markers, and diagnostic tests. BMJ. 2016;352:i6.\nVan Calster B, et al. Reporting and interpreting decision curve analysis: a guide for investigators. European Urology. 2018;74(6):796-804.\ndcurves R åŒ…æ–‡æ¡£ï¼šhttps://www.danieldsjoberg.com/dcurves/",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "å†³ç­–æ›²çº¿åˆ†æ (DCA)"
    ]
  },
  {
    "objectID": "1102-dca.html#å°ç»“",
    "href": "1102-dca.html#å°ç»“",
    "title": "å†³ç­–æ›²çº¿åˆ†æ (DCA)",
    "section": "å°ç»“",
    "text": "å°ç»“\nå†³ç­–æ›²çº¿åˆ†æï¼ˆDCAï¼‰æ˜¯è¯„ä¼°ä¸´åºŠé¢„æµ‹æ¨¡å‹å®ç”¨ä»·å€¼çš„é‡è¦å·¥å…·ã€‚ä¸ä¼ ç»Ÿçš„åŒºåˆ†åº¦å’Œæ ¡å‡†åº¦æŒ‡æ ‡ä¸åŒï¼ŒDCA ç›´æ¥é‡åŒ–äº†æ¨¡å‹åœ¨ä¸åŒå†³ç­–é˜ˆå€¼ä¸‹çš„å‡€æ”¶ç›Šï¼Œå¸®åŠ©ç ”ç©¶è€…å’Œä¸´åºŠåŒ»ç”Ÿåˆ¤æ–­æ¨¡å‹æ˜¯å¦å€¼å¾—åœ¨å®è·µä¸­åº”ç”¨ã€‚åœ¨æŠ¥å‘Š DCA ç»“æœæ—¶ï¼Œåº”æ˜ç¡®é˜ˆå€¼èŒƒå›´çš„é€‰æ‹©ä¾æ®ï¼Œå±•ç¤ºå®Œæ•´çš„å†³ç­–æ›²çº¿ï¼Œå¹¶ç»“åˆä¸´åºŠæƒ…å¢ƒè§£è¯»å‡€æ”¶ç›Šçš„å®é™…æ„ä¹‰ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "ç»Ÿè®¡åˆ†ææ–¹æ³•",
      "ğŸ¯ æ¨¡å‹è¯„ä¼°",
      "å†³ç­–æ›²çº¿åˆ†æ (DCA)"
    ]
  },
  {
    "objectID": "5001-opencode.html",
    "href": "5001-opencode.html",
    "title": "OpenCode: å¼€æº AI ç¼–ç¨‹ä»£ç†",
    "section": "",
    "text": "OpenCode æ˜¯ä¸€ä¸ªå¼€æºçš„ AI ç¼–ç¨‹ä»£ç†ï¼Œä¸“ä¸ºå¼€å‘è€…è®¾è®¡ã€‚å®ƒæä¾›ç»ˆç«¯ç•Œé¢ï¼ˆTUIï¼‰ã€æ¡Œé¢åº”ç”¨å’Œ IDE æ‰©å±•ç­‰å¤šç§ä½¿ç”¨æ–¹å¼ï¼Œè®©ä½ å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä¸å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰åä½œå®Œæˆç¼–ç¨‹ä»»åŠ¡ã€‚\n\n\n\n\n\nç‰¹æ€§\nè¯´æ˜\n\n\n\n\nğŸ¯ ä»£ç æ„ŸçŸ¥\nè‡ªåŠ¨åˆ†æé¡¹ç›®ç»“æ„ï¼Œç†è§£ä»£ç ä¸Šä¸‹æ–‡\n\n\nğŸ”§ å·¥å…·ä¸°å¯Œ\nå†…ç½®æ–‡ä»¶è¯»å†™ã€bash æ‰§è¡Œã€ä»£ç æœç´¢ç­‰å·¥å…·\n\n\nğŸ¤– å¤šæ¨¡å‹æ”¯æŒ\næ”¯æŒ Anthropicã€OpenAIã€Gemini ç­‰ä¸»æµæä¾›å•†\n\n\nğŸ“ é¡¹ç›®çº§é…ç½®\né€šè¿‡ AGENTS.md å’Œ opencode.json å®šåˆ¶è¡Œä¸º\n\n\nğŸ”„ æ’¤é”€/é‡åš\nåŸºäº Git çš„æ–‡ä»¶æ›´æ”¹ç®¡ç†\n\n\nğŸ¨ ä¸»é¢˜è‡ªå®šä¹‰\næ”¯æŒå¤šç§ç»ˆç«¯ä¸»é¢˜å’Œå¿«æ·é”®é…ç½®\n\n\n\n\n\n\n\nä»£ç ç”Ÿæˆä¸é‡æ„ï¼šè®© AI å¸®ä½ ç¼–å†™ã€ä¿®æ”¹ä»£ç \nä»£ç ç†è§£ï¼šå¿«é€Ÿäº†è§£é™Œç”Ÿä»£ç åº“çš„ç»“æ„å’Œé€»è¾‘\nè°ƒè¯•è¾…åŠ©ï¼šåˆ†æé”™è¯¯ä¿¡æ¯ï¼Œå®šä½é—®é¢˜åŸå› \næ–‡æ¡£ç”Ÿæˆï¼šè‡ªåŠ¨ç”Ÿæˆä»£ç æ³¨é‡Šå’Œæ–‡æ¡£\nå­¦ä¹ åŠ©æ‰‹ï¼šè§£é‡Šä»£ç åŸç†ï¼Œå›ç­”ç¼–ç¨‹é—®é¢˜\n\n\n\n\n\n\n\nTipR è¯­è¨€ç”¨æˆ·\n\n\n\nè™½ç„¶ OpenCode ä¸»è¦é¢å‘é€šç”¨ç¼–ç¨‹åœºæ™¯ï¼Œä½†åŒæ ·é€‚ç”¨äº R é¡¹ç›®ï¼š - åˆ†æ R è„šæœ¬å’Œ RMarkdown æ–‡ä»¶ - å¸®åŠ©ç¼–å†™æ•°æ®å¤„ç†å’Œåˆ†æä»£ç  - è§£é‡Šå¤æ‚çš„ç»Ÿè®¡å‡½æ•° - ç”Ÿæˆå¯è§†åŒ–ä»£ç ",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode AI ç¼–ç¨‹ä»£ç†"
    ]
  },
  {
    "objectID": "5001-opencode.html#ä»€ä¹ˆæ˜¯-opencode",
    "href": "5001-opencode.html#ä»€ä¹ˆæ˜¯-opencode",
    "title": "OpenCode: å¼€æº AI ç¼–ç¨‹ä»£ç†",
    "section": "",
    "text": "OpenCode æ˜¯ä¸€ä¸ªå¼€æºçš„ AI ç¼–ç¨‹ä»£ç†ï¼Œä¸“ä¸ºå¼€å‘è€…è®¾è®¡ã€‚å®ƒæä¾›ç»ˆç«¯ç•Œé¢ï¼ˆTUIï¼‰ã€æ¡Œé¢åº”ç”¨å’Œ IDE æ‰©å±•ç­‰å¤šç§ä½¿ç”¨æ–¹å¼ï¼Œè®©ä½ å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä¸å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰åä½œå®Œæˆç¼–ç¨‹ä»»åŠ¡ã€‚\n\n\n\n\n\nç‰¹æ€§\nè¯´æ˜\n\n\n\n\nğŸ¯ ä»£ç æ„ŸçŸ¥\nè‡ªåŠ¨åˆ†æé¡¹ç›®ç»“æ„ï¼Œç†è§£ä»£ç ä¸Šä¸‹æ–‡\n\n\nğŸ”§ å·¥å…·ä¸°å¯Œ\nå†…ç½®æ–‡ä»¶è¯»å†™ã€bash æ‰§è¡Œã€ä»£ç æœç´¢ç­‰å·¥å…·\n\n\nğŸ¤– å¤šæ¨¡å‹æ”¯æŒ\næ”¯æŒ Anthropicã€OpenAIã€Gemini ç­‰ä¸»æµæä¾›å•†\n\n\nğŸ“ é¡¹ç›®çº§é…ç½®\né€šè¿‡ AGENTS.md å’Œ opencode.json å®šåˆ¶è¡Œä¸º\n\n\nğŸ”„ æ’¤é”€/é‡åš\nåŸºäº Git çš„æ–‡ä»¶æ›´æ”¹ç®¡ç†\n\n\nğŸ¨ ä¸»é¢˜è‡ªå®šä¹‰\næ”¯æŒå¤šç§ç»ˆç«¯ä¸»é¢˜å’Œå¿«æ·é”®é…ç½®\n\n\n\n\n\n\n\nä»£ç ç”Ÿæˆä¸é‡æ„ï¼šè®© AI å¸®ä½ ç¼–å†™ã€ä¿®æ”¹ä»£ç \nä»£ç ç†è§£ï¼šå¿«é€Ÿäº†è§£é™Œç”Ÿä»£ç åº“çš„ç»“æ„å’Œé€»è¾‘\nè°ƒè¯•è¾…åŠ©ï¼šåˆ†æé”™è¯¯ä¿¡æ¯ï¼Œå®šä½é—®é¢˜åŸå› \næ–‡æ¡£ç”Ÿæˆï¼šè‡ªåŠ¨ç”Ÿæˆä»£ç æ³¨é‡Šå’Œæ–‡æ¡£\nå­¦ä¹ åŠ©æ‰‹ï¼šè§£é‡Šä»£ç åŸç†ï¼Œå›ç­”ç¼–ç¨‹é—®é¢˜\n\n\n\n\n\n\n\nTipR è¯­è¨€ç”¨æˆ·\n\n\n\nè™½ç„¶ OpenCode ä¸»è¦é¢å‘é€šç”¨ç¼–ç¨‹åœºæ™¯ï¼Œä½†åŒæ ·é€‚ç”¨äº R é¡¹ç›®ï¼š - åˆ†æ R è„šæœ¬å’Œ RMarkdown æ–‡ä»¶ - å¸®åŠ©ç¼–å†™æ•°æ®å¤„ç†å’Œåˆ†æä»£ç  - è§£é‡Šå¤æ‚çš„ç»Ÿè®¡å‡½æ•° - ç”Ÿæˆå¯è§†åŒ–ä»£ç ",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode AI ç¼–ç¨‹ä»£ç†"
    ]
  },
  {
    "objectID": "5001-opencode.html#ä¸å…¶ä»–-ai-å·¥å…·å¯¹æ¯”",
    "href": "5001-opencode.html#ä¸å…¶ä»–-ai-å·¥å…·å¯¹æ¯”",
    "title": "OpenCode: å¼€æº AI ç¼–ç¨‹ä»£ç†",
    "section": "ä¸å…¶ä»– AI å·¥å…·å¯¹æ¯”",
    "text": "ä¸å…¶ä»– AI å·¥å…·å¯¹æ¯”\n\n\n\nå·¥å…·\nç•Œé¢\nå¼€æº\næœ¬åœ°è¿è¡Œ\nä»£ç æ„ŸçŸ¥\nä»·æ ¼\n\n\n\n\nOpenCode\nç»ˆç«¯/æ¡Œé¢/IDE\nâœ…\nâœ…\nâœ…\næŒ‰ API è®¡è´¹\n\n\nCursor\nIDE\nâŒ\nâœ…\nâœ…\n$20/æœˆèµ·\n\n\nGitHub Copilot\nIDE æ’ä»¶\nâŒ\nâŒ\nâœ…\n$10/æœˆèµ·\n\n\nClaude.ai\nç½‘é¡µ\nâŒ\nâŒ\nâŒ\næŒ‰ä½¿ç”¨è®¡è´¹\n\n\nChatGPT\nç½‘é¡µ/App\nâŒ\nâŒ\nâŒ\n$20/æœˆèµ·\n\n\n\nOpenCode çš„ä¼˜åŠ¿ï¼š\n\nå®Œå…¨å¼€æºï¼šä»£ç é€æ˜ï¼Œå¯å®¡è®¡ã€å¯å®šåˆ¶\nç»ˆç«¯å‹å¥½ï¼šé€‚åˆåå¥½å‘½ä»¤è¡Œå·¥ä½œæµçš„å¼€å‘è€…\nçµæ´»è®¡è´¹ï¼šæŒ‰å®é™… API ä½¿ç”¨é‡ä»˜è´¹ï¼Œæ— è®¢é˜…è´¹\næœ¬åœ°ä¼˜å…ˆï¼šæ•°æ®ä¸ç¦»å¼€æœ¬åœ°ï¼ˆé™¤ API è°ƒç”¨å¤–ï¼‰\né«˜åº¦å¯é…ç½®ï¼šä»æ¨¡å‹åˆ°å·¥å…·åˆ°æƒé™ï¼Œå…¨é¢å¯æ§",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode AI ç¼–ç¨‹ä»£ç†"
    ]
  },
  {
    "objectID": "5001-opencode.html#å®‰è£…æŒ‡å—",
    "href": "5001-opencode.html#å®‰è£…æŒ‡å—",
    "title": "OpenCode: å¼€æº AI ç¼–ç¨‹ä»£ç†",
    "section": "å®‰è£…æŒ‡å—",
    "text": "å®‰è£…æŒ‡å—\n\næ¡Œé¢åº”ç”¨ï¼ˆæ¨èæ–°æ‰‹ï¼‰\nä» OpenCode ä¸‹è½½é¡µé¢ è·å–é€‚ç”¨äºä½ æ“ä½œç³»ç»Ÿçš„å®‰è£…åŒ…ã€‚\nmacOS ç”¨æˆ·ä¹Ÿå¯ä»¥ä½¿ç”¨ Homebrewï¼š\nbrew install --cask opencode-desktop\n\n\nå‘½ä»¤è¡Œå®‰è£…\n\nå®‰è£…è„šæœ¬ï¼ˆæœ€ç®€å•ï¼‰\ncurl -fsSL https://opencode.ai/install | bash\n\n\nNode.jsï¼ˆè·¨å¹³å°ï¼‰\n# npm\nnpm install -g opencode-ai\n\n# pnpm\npnpm install -g opencode-ai\n\n# bun\nbun install -g opencode-ai\n\n\nWindows\n# Chocolatey\nchoco install opencode\n\n# Scoop\nscoop bucket add extras\nscoop install extras/opencode\n\n# æˆ–ä½¿ç”¨ npm\nnpm install -g opencode-ai\n\n\nmacOS/Linux\n# Homebrew\nbrew install opencode\n\n\n\nç»ˆç«¯è¦æ±‚\nå‘½ä»¤è¡Œç‰ˆæœ¬éœ€è¦ç°ä»£ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œæ¨èï¼š\n\nWezTerm - è·¨å¹³å°\nAlacritty - è·¨å¹³å°\nGhostty - Linux/macOS\nWindows Terminal - Windows",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode AI ç¼–ç¨‹ä»£ç†"
    ]
  },
  {
    "objectID": "5001-opencode.html#é…ç½®-api-æä¾›å•†",
    "href": "5001-opencode.html#é…ç½®-api-æä¾›å•†",
    "title": "OpenCode: å¼€æº AI ç¼–ç¨‹ä»£ç†",
    "section": "é…ç½® API æä¾›å•†",
    "text": "é…ç½® API æä¾›å•†\nOpenCode æ”¯æŒå¤šç§ LLM æä¾›å•†ã€‚é¦–æ¬¡ä½¿ç”¨éœ€è¦é…ç½® API å¯†é’¥ã€‚\n\nå¿«é€Ÿé…ç½®ï¼ˆOpenCode Zenï¼‰\nOpenCode æä¾›äº†å®˜æ–¹ç²¾é€‰çš„æ¨¡å‹åˆ—è¡¨ Zenï¼Œé€‚åˆæ–°æ‰‹ï¼š\n\nåœ¨ TUI ä¸­è¿è¡Œ /connect å‘½ä»¤\né€‰æ‹© opencode\nè®¿é—® opencode.ai/auth è·å– API å¯†é’¥\nç²˜è´´å¯†é’¥å®Œæˆé…ç½®\n\n\n\né…ç½®å…¶ä»–æä¾›å•†\nä»¥ Anthropic Claude ä¸ºä¾‹ï¼š\n\nè·å– Anthropic API å¯†é’¥\nè®¾ç½®ç¯å¢ƒå˜é‡ï¼š\n\n# Linux/macOS - æ·»åŠ åˆ° ~/.bashrc æˆ– ~/.zshrc\nexport ANTHROPIC_API_KEY=\"your-api-key\"\n\n# Windows PowerShell\n$env:ANTHROPIC_API_KEY = \"your-api-key\"\næˆ–åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ï¼š\n// ~/.config/opencode/opencode.json\n{\n  \"$schema\": \"https://opencode.ai/config.json\",\n  \"provider\": {\n    \"anthropic\": {\n      \"options\": {\n        \"apiKey\": \"{env:ANTHROPIC_API_KEY}\"\n      }\n    }\n  },\n  \"model\": \"anthropic/claude-sonnet-4-5\"\n}\n\n\næ”¯æŒçš„æä¾›å•†\n\n\n\næä¾›å•†\nç¯å¢ƒå˜é‡\næ¨èæ¨¡å‹\n\n\n\n\nAnthropic\nANTHROPIC_API_KEY\nclaude-sonnet-4-5\n\n\nOpenAI\nOPENAI_API_KEY\ngpt-4o\n\n\nGoogle\nGOOGLE_API_KEY\ngemini-2.0-flash\n\n\nOpenCode Zen\né€šè¿‡ /connect\nå¤šç§ç²¾é€‰æ¨¡å‹",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode AI ç¼–ç¨‹ä»£ç†"
    ]
  },
  {
    "objectID": "5001-opencode.html#åŸºæœ¬ä½¿ç”¨",
    "href": "5001-opencode.html#åŸºæœ¬ä½¿ç”¨",
    "title": "OpenCode: å¼€æº AI ç¼–ç¨‹ä»£ç†",
    "section": "åŸºæœ¬ä½¿ç”¨",
    "text": "åŸºæœ¬ä½¿ç”¨\n\nå¯åŠ¨ OpenCode\n# åœ¨é¡¹ç›®ç›®å½•å¯åŠ¨\ncd /path/to/your/project\nopencode\n\n# æˆ–æŒ‡å®šç›®å½•\nopencode /path/to/project\n\n\nåˆå§‹åŒ–é¡¹ç›®\né¦–æ¬¡åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œå»ºè®®è¿è¡Œåˆå§‹åŒ–å‘½ä»¤ï¼š\n/init\nè¿™ä¼šåˆ›å»º AGENTS.md æ–‡ä»¶ï¼Œå¸®åŠ© OpenCode ç†è§£ä½ çš„é¡¹ç›®ç»“æ„ã€‚\n\n\n\n\n\n\nNote\n\n\n\nå»ºè®®å°† AGENTS.md æäº¤åˆ° Gitï¼Œæ–¹ä¾¿å›¢é˜Ÿå…±äº«é¡¹ç›®ä¸Šä¸‹æ–‡ã€‚\n\n\n\n\nå‘é€æ¶ˆæ¯\nç›´æ¥åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥é—®é¢˜æˆ–æŒ‡ä»¤ï¼š\nç»™æˆ‘è§£é‡Šä¸€ä¸‹è¿™ä¸ªé¡¹ç›®çš„ç»“æ„\n\n\nå¼•ç”¨æ–‡ä»¶\nä½¿ç”¨ @ ç¬¦å·å¼•ç”¨é¡¹ç›®ä¸­çš„æ–‡ä»¶ï¼š\n@src/main.R è¿™ä¸ªè„šæœ¬æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ\n\n\nè¿è¡Œ Shell å‘½ä»¤\nä½¿ç”¨ ! å‰ç¼€æ‰§è¡Œ shell å‘½ä»¤ï¼š\n!ls -la\n!R --version",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode AI ç¼–ç¨‹ä»£ç†"
    ]
  },
  {
    "objectID": "5001-opencode.html#å¸¸ç”¨æ–œæ å‘½ä»¤",
    "href": "5001-opencode.html#å¸¸ç”¨æ–œæ å‘½ä»¤",
    "title": "OpenCode: å¼€æº AI ç¼–ç¨‹ä»£ç†",
    "section": "å¸¸ç”¨æ–œæ å‘½ä»¤",
    "text": "å¸¸ç”¨æ–œæ å‘½ä»¤\n\n\n\nå‘½ä»¤\nå¿«æ·é”®\nè¯´æ˜\n\n\n\n\n/help\nCtrl+x h\næ˜¾ç¤ºå¸®åŠ©\n\n\n/new\nCtrl+x n\nå¼€å§‹æ–°ä¼šè¯\n\n\n/undo\nCtrl+x u\næ’¤é”€æ›´æ”¹\n\n\n/redo\nCtrl+x r\né‡åšæ›´æ”¹\n\n\n/compact\nCtrl+x c\nå‹ç¼©ä¼šè¯ï¼ˆèŠ‚çœ tokenï¼‰\n\n\n/sessions\nCtrl+x l\nåˆ‡æ¢å†å²ä¼šè¯\n\n\n/share\nCtrl+x s\nåˆ†äº«å¯¹è¯\n\n\n/models\nCtrl+x m\nåˆ‡æ¢æ¨¡å‹\n\n\n/themes\nCtrl+x t\nåˆ‡æ¢ä¸»é¢˜\n\n\n/editor\nCtrl+x e\nç”¨å¤–éƒ¨ç¼–è¾‘å™¨å†™æ¶ˆæ¯\n\n\n/export\nCtrl+x x\nå¯¼å‡ºå¯¹è¯ä¸º Markdown\n\n\n/init\nCtrl+x i\nåˆå§‹åŒ–/æ›´æ–° AGENTS.md",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode AI ç¼–ç¨‹ä»£ç†"
    ]
  },
  {
    "objectID": "5001-opencode.html#ä»£ç†æ¨¡å¼",
    "href": "5001-opencode.html#ä»£ç†æ¨¡å¼",
    "title": "OpenCode: å¼€æº AI ç¼–ç¨‹ä»£ç†",
    "section": "ä»£ç†æ¨¡å¼",
    "text": "ä»£ç†æ¨¡å¼\nOpenCode æä¾›ä¸¤ç§ä¸»è¦ä»£ç†æ¨¡å¼ï¼Œå¯ç”¨ Tab é”®åˆ‡æ¢ï¼š\n\nBuild æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰\n\nå¯ç”¨æ‰€æœ‰å·¥å…·ï¼ˆæ–‡ä»¶è¯»å†™ã€bash æ‰§è¡Œç­‰ï¼‰\né€‚åˆéœ€è¦ AI ä¿®æ”¹ä»£ç çš„å¼€å‘å·¥ä½œ\nå³ä¸‹è§’æ˜¾ç¤º build æ ‡è¯†\n\n\n\nPlan æ¨¡å¼\n\nåªè¯»æ¨¡å¼ï¼Œç¦ç”¨æ–‡ä»¶ä¿®æ”¹å·¥å…·\né€‚åˆä»£ç åˆ†æã€æ–¹æ¡ˆè®¾è®¡\nå³ä¸‹è§’æ˜¾ç¤º plan æ ‡è¯†\n\n&lt;Tab&gt; åˆ‡æ¢åˆ° Plan æ¨¡å¼\n\næˆ‘æƒ³ä¸ºè¿™ä¸ªé¡¹ç›®æ·»åŠ æ•°æ®å¯¼å‡ºåŠŸèƒ½ï¼Œè¯·å¸®æˆ‘è®¾è®¡ä¸€ä¸ªæ–¹æ¡ˆã€‚\n\n&lt;Tab&gt; åˆ‡æ¢å› Build æ¨¡å¼\n\nå¬èµ·æ¥ä¸é”™ï¼Œå¼€å§‹å®ç°å§ã€‚\n\n\nå­ä»£ç†\nOpenCode å†…ç½®ä¸¤ä¸ªå­ä»£ç†ï¼Œå¯é€šè¿‡ @ æåŠè°ƒç”¨ï¼š\n\n@generalï¼šç ”ç©¶å¤æ‚é—®é¢˜ã€å¤šæ­¥éª¤ä»»åŠ¡\n@exploreï¼šå¿«é€Ÿæ¢ç´¢ä»£ç åº“\n\n@explore æ‰¾åˆ°æ‰€æœ‰å¤„ç†ç¼ºå¤±å€¼çš„å‡½æ•°",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode AI ç¼–ç¨‹ä»£ç†"
    ]
  },
  {
    "objectID": "5001-opencode.html#é…ç½®æ–‡ä»¶è¯¦è§£",
    "href": "5001-opencode.html#é…ç½®æ–‡ä»¶è¯¦è§£",
    "title": "OpenCode: å¼€æº AI ç¼–ç¨‹ä»£ç†",
    "section": "é…ç½®æ–‡ä»¶è¯¦è§£",
    "text": "é…ç½®æ–‡ä»¶è¯¦è§£\n\né…ç½®æ–‡ä»¶ä½ç½®\n\n\n\nä½ç½®\nä½œç”¨\n\n\n\n\n~/.config/opencode/opencode.json\nå…¨å±€é…ç½®\n\n\né¡¹ç›®ç›®å½•/opencode.json\né¡¹ç›®é…ç½®ï¼ˆè¦†ç›–å…¨å±€ï¼‰\n\n\nOPENCODE_CONFIG ç¯å¢ƒå˜é‡\nè‡ªå®šä¹‰è·¯å¾„\n\n\n\n\n\nå¸¸ç”¨é…ç½®ç¤ºä¾‹\n{\n  \"$schema\": \"https://opencode.ai/config.json\",\n  \n  // ä¸»é¢˜\n  \"theme\": \"opencode\",\n  \n  // é»˜è®¤æ¨¡å‹\n  \"model\": \"anthropic/claude-sonnet-4-5\",\n  \n  // è½»é‡ä»»åŠ¡ä½¿ç”¨çš„æ¨¡å‹\n  \"small_model\": \"anthropic/claude-haiku-4-5\",\n  \n  // è‡ªåŠ¨æ›´æ–°\n  \"autoupdate\": true,\n  \n  // å·¥å…·é…ç½®\n  \"tools\": {\n    \"bash\": true,\n    \"write\": true,\n    \"edit\": true\n  },\n  \n  // æƒé™é…ç½®\n  \"permission\": {\n    \"edit\": \"ask\",    // ç¼–è¾‘æ–‡ä»¶å‰è¯¢é—®\n    \"bash\": \"allow\"   // å…è®¸æ‰§è¡Œå‘½ä»¤\n  },\n  \n  // TUI é…ç½®\n  \"tui\": {\n    \"scroll_speed\": 3,\n    \"scroll_acceleration\": {\n      \"enabled\": true\n    }\n  }\n}\n\n\næƒé™æ§åˆ¶\n\n\n\næƒé™å€¼\nè¯´æ˜\n\n\n\n\n\"allow\"\nå…è®¸æ“ä½œï¼Œæ— éœ€ç¡®è®¤\n\n\n\"ask\"\næ¯æ¬¡æ“ä½œå‰è¯¢é—®\n\n\n\"deny\"\nç¦æ­¢æ“ä½œ",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode AI ç¼–ç¨‹ä»£ç†"
    ]
  },
  {
    "objectID": "5001-opencode.html#agents.md-é¡¹ç›®è§„åˆ™",
    "href": "5001-opencode.html#agents.md-é¡¹ç›®è§„åˆ™",
    "title": "OpenCode: å¼€æº AI ç¼–ç¨‹ä»£ç†",
    "section": "AGENTS.md é¡¹ç›®è§„åˆ™",
    "text": "AGENTS.md é¡¹ç›®è§„åˆ™\nAGENTS.md æ˜¯é¡¹ç›®çº§çš„æŒ‡ä»¤æ–‡ä»¶ï¼Œç±»ä¼¼äº Cursor çš„ .cursorrulesã€‚\n\nåˆ›å»ºæ–¹å¼\n/init\n\n\nç¤ºä¾‹å†…å®¹\n# é¡¹ç›®è¯´æ˜\n\nè¿™æ˜¯ä¸€ä¸ª R æ•°æ®åˆ†æé¡¹ç›®ï¼Œä½¿ç”¨ tidyverse ç”Ÿæ€ç³»ç»Ÿã€‚\n\n## é¡¹ç›®ç»“æ„\n\n- `R/` - R è„šæœ¬\n- `data/` - åŸå§‹æ•°æ®\n- `output/` - åˆ†æç»“æœ\n- `doc/` - æ–‡æ¡£\n\n## ä»£ç è§„èŒƒ\n\n- ä½¿ç”¨ tidyverse é£æ ¼çš„ä»£ç \n- å‡½æ•°å‘½åä½¿ç”¨ snake_case\n- æ³¨é‡Šä½¿ç”¨ä¸­æ–‡\n\n## ä¾èµ–åŒ…\n\n- tidyverse\n- ggplot2\n- data.table\n\n\nå¤šä½ç½®æ”¯æŒ\n\n\n\nä½ç½®\nè¯´æ˜\n\n\n\n\né¡¹ç›®æ ¹ç›®å½• AGENTS.md\né¡¹ç›®ç‰¹å®šè§„åˆ™\n\n\n~/.config/opencode/AGENTS.md\nå…¨å±€è§„åˆ™\n\n\nå­ç›®å½• AGENTS.md\nå­æ¨¡å—è§„åˆ™",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode AI ç¼–ç¨‹ä»£ç†"
    ]
  },
  {
    "objectID": "5001-opencode.html#agent-skillsä»£ç†æŠ€èƒ½",
    "href": "5001-opencode.html#agent-skillsä»£ç†æŠ€èƒ½",
    "title": "OpenCode: å¼€æº AI ç¼–ç¨‹ä»£ç†",
    "section": "Agent Skillsï¼ˆä»£ç†æŠ€èƒ½ï¼‰",
    "text": "Agent Skillsï¼ˆä»£ç†æŠ€èƒ½ï¼‰\nSkills æ˜¯å¯å¤ç”¨çš„æŒ‡ä»¤æ¨¡å—ï¼ŒæŒ‰éœ€åŠ è½½ã€‚\n\nåˆ›å»ºæŠ€èƒ½\nåœ¨ .opencode/skill/&lt;name&gt;/SKILL.md åˆ›å»ºï¼š\n---\nname: r-analysis\ndescription: R æ•°æ®åˆ†ææœ€ä½³å®è·µ\n---\n\n## ä»£ç è§„èŒƒ\n\n- ä¼˜å…ˆä½¿ç”¨ tidyverse å‡½æ•°\n- é¿å…ä½¿ç”¨ `attach()`\n- ä½¿ç”¨ `here::here()` å¤„ç†è·¯å¾„\n\n## å¯è§†åŒ–\n\n- ä½¿ç”¨ ggplot2 ç»‘å›¾\n- è®¾ç½®ç»Ÿä¸€ä¸»é¢˜ `theme_minimal()`\n- ä½¿ç”¨ `ggsave()` ä¿å­˜å›¾ç‰‡\n\n\næŠ€èƒ½å‘ç°ä½ç½®\n\n.opencode/skill/*/SKILL.md - é¡¹ç›®çº§\n~/.config/opencode/skill/*/SKILL.md - å…¨å±€",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode AI ç¼–ç¨‹ä»£ç†"
    ]
  },
  {
    "objectID": "5001-opencode.html#è‡ªå®šä¹‰ä»£ç†",
    "href": "5001-opencode.html#è‡ªå®šä¹‰ä»£ç†",
    "title": "OpenCode: å¼€æº AI ç¼–ç¨‹ä»£ç†",
    "section": "è‡ªå®šä¹‰ä»£ç†",
    "text": "è‡ªå®šä¹‰ä»£ç†\né™¤äº†å†…ç½®çš„ Build/Plan ä»£ç†ï¼Œå¯ä»¥åˆ›å»ºè‡ªå®šä¹‰ä»£ç†ã€‚\n\nMarkdown æ–¹å¼\nåœ¨ .opencode/agent/ æˆ– ~/.config/opencode/agent/ åˆ›å»º markdown æ–‡ä»¶ï¼š\n&lt;!-- ~/.config/opencode/agent/r-helper.md --&gt;\n---\ndescription: R è¯­è¨€ç¼–ç¨‹åŠ©æ‰‹\nmode: subagent\nmodel: anthropic/claude-sonnet-4-5\ntools:\n  bash: true\n  write: false\n---\n\nä½ æ˜¯ä¸€ä¸ª R è¯­è¨€ç¼–ç¨‹ä¸“å®¶ã€‚\n\næ“…é•¿é¢†åŸŸï¼š\n- tidyverse æ•°æ®å¤„ç†\n- ggplot2 å¯è§†åŒ–\n- ç»Ÿè®¡å»ºæ¨¡\n- æ€§èƒ½ä¼˜åŒ–\n\nå›ç­”é—®é¢˜æ—¶ï¼š\n- ä¼˜å…ˆç»™å‡ºå¯è¿è¡Œçš„ä»£ç ç¤ºä¾‹\n- è§£é‡Šä»£ç çš„å…³é”®æ­¥éª¤\n- æä¾›æ›¿ä»£æ–¹æ¡ˆ\n\n\nJSON æ–¹å¼\nåœ¨ opencode.json ä¸­é…ç½®ï¼š\n{\n  \"agent\": {\n    \"r-reviewer\": {\n      \"description\": \"å®¡æŸ¥ R ä»£ç è´¨é‡\",\n      \"mode\": \"subagent\",\n      \"model\": \"anthropic/claude-sonnet-4-5\",\n      \"tools\": {\n        \"write\": false,\n        \"edit\": false\n      }\n    }\n  }\n}\n\n\nè°ƒç”¨è‡ªå®šä¹‰ä»£ç†\n@r-helper å¦‚ä½•ç”¨ dplyr å®ç°åˆ†ç»„æ±‡æ€»ï¼Ÿ",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode AI ç¼–ç¨‹ä»£ç†"
    ]
  },
  {
    "objectID": "5001-opencode.html#è‡ªå®šä¹‰å‘½ä»¤",
    "href": "5001-opencode.html#è‡ªå®šä¹‰å‘½ä»¤",
    "title": "OpenCode: å¼€æº AI ç¼–ç¨‹ä»£ç†",
    "section": "è‡ªå®šä¹‰å‘½ä»¤",
    "text": "è‡ªå®šä¹‰å‘½ä»¤\nåˆ›å»ºå¯å¤ç”¨çš„å‘½ä»¤æ¨¡æ¿ã€‚\n\né…ç½®æ–¹å¼\n// opencode.json\n{\n  \"command\": {\n    \"analyze\": {\n      \"template\": \"åˆ†æ $ARGUMENTS æ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œç”Ÿæˆæè¿°æ€§ç»Ÿè®¡å’Œå¯è§†åŒ–å»ºè®®ã€‚\",\n      \"description\": \"åˆ†ææ•°æ®æ–‡ä»¶\"\n    },\n    \"review\": {\n      \"template\": \"å®¡æŸ¥ $ARGUMENTS çš„ä»£ç è´¨é‡ï¼Œæ£€æŸ¥æ½œåœ¨é—®é¢˜å¹¶ç»™å‡ºæ”¹è¿›å»ºè®®ã€‚\",\n      \"description\": \"ä»£ç å®¡æŸ¥\",\n      \"agent\": \"plan\"\n    }\n  }\n}\n\n\nä½¿ç”¨å‘½ä»¤\n/analyze data/survey.csv\n/review R/analysis.R",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode AI ç¼–ç¨‹ä»£ç†"
    ]
  },
  {
    "objectID": "5001-opencode.html#mcp-æœåŠ¡å™¨é›†æˆ",
    "href": "5001-opencode.html#mcp-æœåŠ¡å™¨é›†æˆ",
    "title": "OpenCode: å¼€æº AI ç¼–ç¨‹ä»£ç†",
    "section": "MCP æœåŠ¡å™¨é›†æˆ",
    "text": "MCP æœåŠ¡å™¨é›†æˆ\nOpenCode æ”¯æŒ Model Context Protocol (MCP) æœåŠ¡å™¨ï¼Œæ‰©å±•å·¥å…·èƒ½åŠ›ã€‚\n\né…ç½®ç¤ºä¾‹\n{\n  \"mcp\": {\n    \"filesystem\": {\n      \"command\": \"npx\",\n      \"args\": [\"-y\", \"@modelcontextprotocol/server-filesystem\", \"/path/to/allowed/dir\"]\n    },\n    \"github\": {\n      \"command\": \"npx\",\n      \"args\": [\"-y\", \"@modelcontextprotocol/server-github\"],\n      \"env\": {\n        \"GITHUB_PERSONAL_ACCESS_TOKEN\": \"{env:GITHUB_TOKEN}\"\n      }\n    }\n  }\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode AI ç¼–ç¨‹ä»£ç†"
    ]
  },
  {
    "objectID": "5001-opencode.html#å®ç”¨æŠ€å·§",
    "href": "5001-opencode.html#å®ç”¨æŠ€å·§",
    "title": "OpenCode: å¼€æº AI ç¼–ç¨‹ä»£ç†",
    "section": "å®ç”¨æŠ€å·§",
    "text": "å®ç”¨æŠ€å·§\n\nå›¾ç‰‡è¾“å…¥\nå°†å›¾ç‰‡æ‹–æ”¾åˆ°ç»ˆç«¯çª—å£ï¼ŒOpenCode ä¼šè‡ªåŠ¨è¯†åˆ«å›¾ç‰‡å†…å®¹ï¼š\n[æ‹–å…¥æˆªå›¾]\nè¿™ä¸ªå›¾è¡¨æ˜¾ç¤ºäº†ä»€ä¹ˆè¶‹åŠ¿ï¼Ÿ\n\n\nä¼šè¯å‹ç¼©\nå½“ä¼šè¯è¿‡é•¿æ—¶ï¼Œä½¿ç”¨ /compact å‹ç¼©å†å²ï¼ŒèŠ‚çœ tokenï¼š\n/compact\n\n\nåˆ†äº«å¯¹è¯\nç”Ÿæˆå¯¹è¯åˆ†äº«é“¾æ¥ï¼š\n/share\n\n\nå¤–éƒ¨ç¼–è¾‘å™¨\nä½¿ç”¨ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨ç¼–å†™é•¿æ¶ˆæ¯ï¼š\n/editor\néœ€è¦è®¾ç½® EDITOR ç¯å¢ƒå˜é‡ï¼š\nexport EDITOR=\"code --wait\"  # VS Code\nexport EDITOR=\"vim\"          # Vim",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode AI ç¼–ç¨‹ä»£ç†"
    ]
  },
  {
    "objectID": "5001-opencode.html#å¸¸è§é—®é¢˜",
    "href": "5001-opencode.html#å¸¸è§é—®é¢˜",
    "title": "OpenCode: å¼€æº AI ç¼–ç¨‹ä»£ç†",
    "section": "å¸¸è§é—®é¢˜",
    "text": "å¸¸è§é—®é¢˜\n\nQ: å¦‚ä½•åˆ‡æ¢æ¨¡å‹ï¼Ÿ\nä½¿ç”¨ /models å‘½ä»¤æˆ–å¿«æ·é”® Ctrl+x mã€‚\n\n\nQ: å¦‚ä½•æ’¤é”€ AI çš„ä¿®æ”¹ï¼Ÿ\nä½¿ç”¨ /undo å‘½ä»¤ï¼ŒOpenCode ä¼šåŸºäº Git è¿˜åŸæ›´æ”¹ã€‚\n\n\nQ: å¦‚ä½•å‡å°‘ API è´¹ç”¨ï¼Ÿ\n\nä½¿ç”¨æ›´å°çš„æ¨¡å‹ï¼ˆå¦‚ claude-haikuï¼‰å¤„ç†ç®€å•ä»»åŠ¡\nå®šæœŸä½¿ç”¨ /compact å‹ç¼©ä¼šè¯\nå–„ç”¨ Plan æ¨¡å¼è¿›è¡Œè§„åˆ’ï¼Œå‡å°‘æ— æ•ˆä¿®æ”¹\n\n\n\nQ: æ”¯æŒå“ªäº› IDEï¼Ÿ\nOpenCode æä¾› VS Codeã€Cursor ç­‰ IDE çš„æ‰©å±•ã€‚è¯¦è§ IDE æ–‡æ¡£ã€‚\n\n\nQ: å¦‚ä½•å¤„ç†ç½‘ç»œé—®é¢˜ï¼Ÿ\nå¯ä»¥é…ç½®ä»£ç†ï¼š\n{\n  \"network\": {\n    \"proxy\": \"http://127.0.0.1:7890\"\n  }\n}",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode AI ç¼–ç¨‹ä»£ç†"
    ]
  },
  {
    "objectID": "5001-opencode.html#èµ„æºé“¾æ¥",
    "href": "5001-opencode.html#èµ„æºé“¾æ¥",
    "title": "OpenCode: å¼€æº AI ç¼–ç¨‹ä»£ç†",
    "section": "èµ„æºé“¾æ¥",
    "text": "èµ„æºé“¾æ¥\n\n\n\nèµ„æº\né“¾æ¥\n\n\n\n\nå®˜æ–¹ç½‘ç«™\nopencode.ai\n\n\nä¸­æ–‡æ–‡æ¡£\nopencodecn.com\n\n\nGitHub\ngithub.com/anomalyco/opencode\n\n\nä¸‹è½½é¡µé¢\nopencode.ai/download\n\n\né…ç½® Schema\nopencode.ai/config.json",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode AI ç¼–ç¨‹ä»£ç†"
    ]
  },
  {
    "objectID": "5001-opencode.html#æ€»ç»“",
    "href": "5001-opencode.html#æ€»ç»“",
    "title": "OpenCode: å¼€æº AI ç¼–ç¨‹ä»£ç†",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nOpenCode æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å¼€æº AI ç¼–ç¨‹ä»£ç†ï¼Œç‰¹åˆ«é€‚åˆï¼š\n\nåå¥½å‘½ä»¤è¡Œå·¥ä½œæµçš„å¼€å‘è€…\néœ€è¦çµæ´»é…ç½®å’Œé«˜åº¦å¯æ§çš„ç”¨æˆ·\nå¸Œæœ›æŒ‰å®é™…ä½¿ç”¨é‡ä»˜è´¹çš„ç”¨æˆ·\næ³¨é‡ä»£ç å®‰å…¨å’Œéšç§çš„å›¢é˜Ÿ\n\nè™½ç„¶å®ƒä¸»è¦é¢å‘é€šç”¨ç¼–ç¨‹åœºæ™¯ï¼Œä½†å¯¹äº R è¯­è¨€ç”¨æˆ·æ¥è¯´ï¼ŒOpenCode åŒæ ·æ˜¯ä¸€ä¸ªä¼˜ç§€çš„è¾…åŠ©å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ä½ æ›´é«˜æ•ˆåœ°å®Œæˆæ•°æ®åˆ†æå’Œå¯è§†åŒ–ä»»åŠ¡ã€‚\nå¼€å§‹å°è¯•å§ï¼",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode AI ç¼–ç¨‹ä»£ç†"
    ]
  },
  {
    "objectID": "5002-opencode-skills.html",
    "href": "5002-opencode-skills.html",
    "title": "OpenCode Skills: æŠ€èƒ½ç³»ç»Ÿè¯¦è§£",
    "section": "",
    "text": "Skillsï¼ˆæŠ€èƒ½ï¼‰ æ˜¯ OpenCode ä¸­å¯å¤ç”¨çš„æŒ‡ä»¤æ¨¡å—ï¼Œç”¨äºä¸º AI ä»£ç†æä¾›ä¸“ä¸šåŒ–çš„è¡Œä¸ºæŒ‡å¯¼ã€‚ä¸é¡¹ç›®çº§çš„ AGENTS.md ä¸åŒï¼ŒSkills é‡‡ç”¨æŒ‰éœ€åŠ è½½æœºåˆ¶ï¼Œåªæœ‰åœ¨éœ€è¦æ—¶æ‰ä¼šè¢«æ¿€æ´»ã€‚\n\n\n\n\n\n\n\n\n\n\n\né…ç½®æ–¹å¼\nåŠ è½½æ—¶æœº\nä½œç”¨èŒƒå›´\nä¸»è¦ç”¨é€”\n\n\n\n\nAGENTS.md\næ¯æ¬¡å¯¹è¯è‡ªåŠ¨åŠ è½½\né¡¹ç›®å…¨å±€\né¡¹ç›®ç»“æ„ã€ä»£ç è§„èŒƒã€é€šç”¨æŒ‡ä»¤\n\n\nSkills\næŒ‰éœ€åŠ è½½ï¼ˆæ‰‹åŠ¨/è‡ªåŠ¨ï¼‰\nç‰¹å®šä»»åŠ¡\nä¸“ä¸šæŠ€èƒ½ã€å·¥ä½œæµæ¨¡æ¿\n\n\nCommands\nç”¨æˆ·è§¦å‘\nå•æ¬¡æ“ä½œ\nå¿«æ·å‘½ä»¤ã€æ¨¡æ¿å¡«å……\n\n\n\n\n\n\n\n\n\nTipç±»æ¯”ç†è§£\n\n\n\nå¦‚æœæŠŠ AGENTS.md æ¯”ä½œå‘˜å·¥çš„å²—ä½è¯´æ˜ä¹¦ï¼ˆå§‹ç»ˆéµå®ˆï¼‰ï¼Œé‚£ä¹ˆ Skills å°±æ˜¯ä¸“ä¸šåŸ¹è®­æ‰‹å†Œï¼ˆæŒ‰éœ€å–ç”¨ï¼‰â€”â€”ä½ ä¸ä¼šè®©æ‰€æœ‰å‘˜å·¥åŒæ—¶å­¦ä¼šæ‰€æœ‰æŠ€èƒ½ï¼Œè€Œæ˜¯åœ¨éœ€è¦æ—¶æ´¾å‡ºç›¸åº”çš„ä¸“å®¶ã€‚\n\n\n\n\n\n\né¿å…ä¸Šä¸‹æ–‡è†¨èƒ€ï¼šå°†æ‰€æœ‰æŒ‡ä»¤å¡è¿› AGENTS.md ä¼šå¯¼è‡´æ¯æ¬¡å¯¹è¯éƒ½æ¶ˆè€—å¤§é‡ token\næ¨¡å—åŒ–å¤ç”¨ï¼šä¸€ä¸ªæŠ€èƒ½å¯ä»¥åœ¨å¤šä¸ªé¡¹ç›®ä¸­ä½¿ç”¨\nä¸“ä¸šåŒ–æ·±åº¦ï¼šæ¯ä¸ªæŠ€èƒ½å¯ä»¥åŒ…å«éå¸¸è¯¦ç»†çš„ä¸“ä¸šçŸ¥è¯†\nçµæ´»ç»„åˆï¼šå¤šä¸ªæŠ€èƒ½å¯ä»¥ç»„åˆä½¿ç”¨",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode Skills æŠ€èƒ½ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "5002-opencode-skills.html#ä»€ä¹ˆæ˜¯-skills",
    "href": "5002-opencode-skills.html#ä»€ä¹ˆæ˜¯-skills",
    "title": "OpenCode Skills: æŠ€èƒ½ç³»ç»Ÿè¯¦è§£",
    "section": "",
    "text": "Skillsï¼ˆæŠ€èƒ½ï¼‰ æ˜¯ OpenCode ä¸­å¯å¤ç”¨çš„æŒ‡ä»¤æ¨¡å—ï¼Œç”¨äºä¸º AI ä»£ç†æä¾›ä¸“ä¸šåŒ–çš„è¡Œä¸ºæŒ‡å¯¼ã€‚ä¸é¡¹ç›®çº§çš„ AGENTS.md ä¸åŒï¼ŒSkills é‡‡ç”¨æŒ‰éœ€åŠ è½½æœºåˆ¶ï¼Œåªæœ‰åœ¨éœ€è¦æ—¶æ‰ä¼šè¢«æ¿€æ´»ã€‚\n\n\n\n\n\n\n\n\n\n\n\né…ç½®æ–¹å¼\nåŠ è½½æ—¶æœº\nä½œç”¨èŒƒå›´\nä¸»è¦ç”¨é€”\n\n\n\n\nAGENTS.md\næ¯æ¬¡å¯¹è¯è‡ªåŠ¨åŠ è½½\né¡¹ç›®å…¨å±€\né¡¹ç›®ç»“æ„ã€ä»£ç è§„èŒƒã€é€šç”¨æŒ‡ä»¤\n\n\nSkills\næŒ‰éœ€åŠ è½½ï¼ˆæ‰‹åŠ¨/è‡ªåŠ¨ï¼‰\nç‰¹å®šä»»åŠ¡\nä¸“ä¸šæŠ€èƒ½ã€å·¥ä½œæµæ¨¡æ¿\n\n\nCommands\nç”¨æˆ·è§¦å‘\nå•æ¬¡æ“ä½œ\nå¿«æ·å‘½ä»¤ã€æ¨¡æ¿å¡«å……\n\n\n\n\n\n\n\n\n\nTipç±»æ¯”ç†è§£\n\n\n\nå¦‚æœæŠŠ AGENTS.md æ¯”ä½œå‘˜å·¥çš„å²—ä½è¯´æ˜ä¹¦ï¼ˆå§‹ç»ˆéµå®ˆï¼‰ï¼Œé‚£ä¹ˆ Skills å°±æ˜¯ä¸“ä¸šåŸ¹è®­æ‰‹å†Œï¼ˆæŒ‰éœ€å–ç”¨ï¼‰â€”â€”ä½ ä¸ä¼šè®©æ‰€æœ‰å‘˜å·¥åŒæ—¶å­¦ä¼šæ‰€æœ‰æŠ€èƒ½ï¼Œè€Œæ˜¯åœ¨éœ€è¦æ—¶æ´¾å‡ºç›¸åº”çš„ä¸“å®¶ã€‚\n\n\n\n\n\n\né¿å…ä¸Šä¸‹æ–‡è†¨èƒ€ï¼šå°†æ‰€æœ‰æŒ‡ä»¤å¡è¿› AGENTS.md ä¼šå¯¼è‡´æ¯æ¬¡å¯¹è¯éƒ½æ¶ˆè€—å¤§é‡ token\næ¨¡å—åŒ–å¤ç”¨ï¼šä¸€ä¸ªæŠ€èƒ½å¯ä»¥åœ¨å¤šä¸ªé¡¹ç›®ä¸­ä½¿ç”¨\nä¸“ä¸šåŒ–æ·±åº¦ï¼šæ¯ä¸ªæŠ€èƒ½å¯ä»¥åŒ…å«éå¸¸è¯¦ç»†çš„ä¸“ä¸šçŸ¥è¯†\nçµæ´»ç»„åˆï¼šå¤šä¸ªæŠ€èƒ½å¯ä»¥ç»„åˆä½¿ç”¨",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode Skills æŠ€èƒ½ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "5002-opencode-skills.html#skill.md-æ–‡ä»¶æ ¼å¼",
    "href": "5002-opencode-skills.html#skill.md-æ–‡ä»¶æ ¼å¼",
    "title": "OpenCode Skills: æŠ€èƒ½ç³»ç»Ÿè¯¦è§£",
    "section": "SKILL.md æ–‡ä»¶æ ¼å¼",
    "text": "SKILL.md æ–‡ä»¶æ ¼å¼\nSkills é€šè¿‡ SKILL.md æ–‡ä»¶å®šä¹‰ï¼Œé‡‡ç”¨ YAML frontmatter + Markdown æ­£æ–‡çš„æ ¼å¼ã€‚\n\nåŸºæœ¬ç»“æ„\n---\nname: skill-name\ndescription: æŠ€èƒ½çš„ç®€çŸ­æè¿°ï¼ˆä¼šæ˜¾ç¤ºåœ¨æŠ€èƒ½åˆ—è¡¨ä¸­ï¼‰\nversion: 1.0.0\nglobs:\n  - \"*.R\"\n  - \"*.rmd\"\n---\n\n# æŠ€èƒ½æ ‡é¢˜\n\nè¿™é‡Œæ˜¯æŠ€èƒ½çš„è¯¦ç»†è¯´æ˜å’ŒæŒ‡ä»¤...\n\n## å·¥ä½œè§„èŒƒ\n\n- è§„èŒƒ 1\n- è§„èŒƒ 2\n\n## ä»£ç æ¨¡æ¿\n\n\\```r\n# ç¤ºä¾‹ä»£ç \n\\```\n\n\nFrontmatter å­—æ®µè¯´æ˜\n\n\n\nå­—æ®µ\nå¿…å¡«\nè¯´æ˜\n\n\n\n\nname\nâœ…\næŠ€èƒ½å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”¨äº /skill-name è°ƒç”¨\n\n\ndescription\nâœ…\næŠ€èƒ½ç®€çŸ­æè¿°ï¼Œæ˜¾ç¤ºåœ¨åˆ—è¡¨å’Œå¸®åŠ©ä¸­\n\n\nversion\nâŒ\nç‰ˆæœ¬å·ï¼ˆè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼‰\n\n\nglobs\nâŒ\nè‡ªåŠ¨æ¿€æ´»çš„æ–‡ä»¶æ¨¡å¼ï¼ˆè§ä¸‹æ–‡ï¼‰\n\n\nalwaysApply\nâŒ\nè®¾ä¸º true æ—¶å§‹ç»ˆåŠ è½½ï¼ˆç±»ä¼¼ AGENTS.mdï¼‰\n\n\n\n\n\nè‡ªåŠ¨æ¿€æ´»ï¼ˆGlobsï¼‰\né€šè¿‡ globs å­—æ®µï¼Œå¯ä»¥è®©æŠ€èƒ½åœ¨ç¼–è¾‘ç‰¹å®šæ–‡ä»¶æ—¶è‡ªåŠ¨æ¿€æ´»ï¼š\n---\nname: r-style\ndescription: R ä»£ç é£æ ¼è§„èŒƒ\nglobs:\n  - \"*.R\"\n  - \"*.r\"\n  - \"R/*.R\"\n---\nå½“ç”¨æˆ·ç¼–è¾‘åŒ¹é…çš„æ–‡ä»¶æ—¶ï¼Œè¯¥æŠ€èƒ½ä¼šè‡ªåŠ¨åŠ è½½åˆ°ä¸Šä¸‹æ–‡ä¸­ã€‚\n\n\n\n\n\n\nWarningè°¨æ…ä½¿ç”¨ globs\n\n\n\nè¿‡å¤šçš„è‡ªåŠ¨æ¿€æ´»ä¼šå¯¼è‡´ä¸Šä¸‹æ–‡è†¨èƒ€ã€‚å»ºè®®åªå¯¹æœ€æ ¸å¿ƒçš„è§„èŒƒä½¿ç”¨ globsï¼Œå…¶ä»–æŠ€èƒ½ä¿æŒæ‰‹åŠ¨æ¿€æ´»ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode Skills æŠ€èƒ½ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "5002-opencode-skills.html#æŠ€èƒ½å­˜æ”¾ä½ç½®",
    "href": "5002-opencode-skills.html#æŠ€èƒ½å­˜æ”¾ä½ç½®",
    "title": "OpenCode Skills: æŠ€èƒ½ç³»ç»Ÿè¯¦è§£",
    "section": "æŠ€èƒ½å­˜æ”¾ä½ç½®",
    "text": "æŠ€èƒ½å­˜æ”¾ä½ç½®\nOpenCode ä»å¤šä¸ªä½ç½®å‘ç°æŠ€èƒ½ï¼ŒæŒ‰ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼š\n\né¡¹ç›®çº§æŠ€èƒ½\nyour-project/\nâ”œâ”€â”€ .opencode/\nâ”‚   â””â”€â”€ skill/\nâ”‚       â”œâ”€â”€ r-analysis/\nâ”‚       â”‚   â””â”€â”€ SKILL.md\nâ”‚       â””â”€â”€ data-cleaning/\nâ”‚           â””â”€â”€ SKILL.md\nâ””â”€â”€ ...\n\n\nå…¨å±€æŠ€èƒ½\n~/.config/opencode/\nâ””â”€â”€ skill/\n    â”œâ”€â”€ r-style/\n    â”‚   â””â”€â”€ SKILL.md\n    â””â”€â”€ git-commit/\n        â””â”€â”€ SKILL.md\n\n\nå‘ç°ä¼˜å…ˆçº§\n\né¡¹ç›® .opencode/skill/*/SKILL.md\nå…¨å±€ ~/.config/opencode/skill/*/SKILL.md\nå†…ç½®æŠ€èƒ½\n\nåŒåæŠ€èƒ½ä¼˜å…ˆä½¿ç”¨é¡¹ç›®çº§ç‰ˆæœ¬ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode Skills æŠ€èƒ½ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "5002-opencode-skills.html#ä½¿ç”¨æŠ€èƒ½",
    "href": "5002-opencode-skills.html#ä½¿ç”¨æŠ€èƒ½",
    "title": "OpenCode Skills: æŠ€èƒ½ç³»ç»Ÿè¯¦è§£",
    "section": "ä½¿ç”¨æŠ€èƒ½",
    "text": "ä½¿ç”¨æŠ€èƒ½\n\næ‰‹åŠ¨è°ƒç”¨\nåœ¨å¯¹è¯ä¸­ä½¿ç”¨æ–œæ å‘½ä»¤åŠ è½½æŠ€èƒ½ï¼š\n/r-analysis\n\nå¸®æˆ‘åˆ†æè¿™ä¸ªæ•°æ®é›†çš„ç¼ºå¤±å€¼åˆ†å¸ƒ\n\n\næŸ¥çœ‹å¯ç”¨æŠ€èƒ½\n/skills\næ˜¾ç¤ºæ‰€æœ‰å¯ç”¨æŠ€èƒ½åŠå…¶æè¿°ã€‚\n\n\nåœ¨æç¤ºä¸­å¼•ç”¨\nç›´æ¥åœ¨æ¶ˆæ¯ä¸­æåŠæŠ€èƒ½åï¼š\nä½¿ç”¨ r-analysis æŠ€èƒ½ï¼Œå¸®æˆ‘å†™ä¸€ä¸ªå®Œæ•´çš„æ¢ç´¢æ€§æ•°æ®åˆ†æè„šæœ¬\n\n\nç»„åˆä½¿ç”¨\nå¯ä»¥åŒæ—¶åŠ è½½å¤šä¸ªæŠ€èƒ½ï¼š\n/r-analysis\n/visualization\n\nåŸºäºä¸Šè¿°ä¸¤ä¸ªæŠ€èƒ½çš„è§„èŒƒï¼Œå¸®æˆ‘å®Œæˆæ•°æ®åˆ†ææŠ¥å‘Š",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode Skills æŠ€èƒ½ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "5002-opencode-skills.html#r-ç”¨æˆ·å®ç”¨æŠ€èƒ½ç¤ºä¾‹",
    "href": "5002-opencode-skills.html#r-ç”¨æˆ·å®ç”¨æŠ€èƒ½ç¤ºä¾‹",
    "title": "OpenCode Skills: æŠ€èƒ½ç³»ç»Ÿè¯¦è§£",
    "section": "R ç”¨æˆ·å®ç”¨æŠ€èƒ½ç¤ºä¾‹",
    "text": "R ç”¨æˆ·å®ç”¨æŠ€èƒ½ç¤ºä¾‹\n\n1. R ä»£ç é£æ ¼è§„èŒƒ\n---\nname: r-style\ndescription: R ä»£ç é£æ ¼è§„èŒƒ (tidyverse style)\nglobs:\n  - \"*.R\"\n  - \"*.r\"\n---\n\n# R ä»£ç é£æ ¼è§„èŒƒ\n\néµå¾ª [tidyverse style guide](https://style.tidyverse.org/)ã€‚\n\n## å‘½åè§„èŒƒ\n\n- å˜é‡å’Œå‡½æ•°ï¼š`snake_case`\n- å¸¸é‡ï¼š`UPPER_SNAKE_CASE`\n- S3 æ–¹æ³•ï¼š`generic.class`\n\n## æ ¼å¼è§„èŒƒ\n\n- ç¼©è¿›ï¼š2 ä¸ªç©ºæ ¼\n- è¡Œå®½ï¼š80 å­—ç¬¦\n- è¿ç®—ç¬¦å‘¨å›´åŠ ç©ºæ ¼ï¼š`x + y`ï¼Œä¸æ˜¯ `x+y`\n- é€—å·ååŠ ç©ºæ ¼ï¼š`c(1, 2, 3)`\n\n## ç®¡é“æ“ä½œ\n\n- ä¼˜å…ˆä½¿ç”¨åŸç”Ÿç®¡é“ `|&gt;`\n- æ¯ä¸ªç®¡é“æ­¥éª¤æ¢è¡Œ\n- ç®¡é“é“¾è¶…è¿‡ 3 æ­¥æ—¶æ·»åŠ æ³¨é‡Š\n\n\\```r\n# Good\nresult &lt;- data |&gt;\n  filter(age &gt; 18) |&gt;\n  group_by(gender) |&gt;\n  summarise(mean_score = mean(score, na.rm = TRUE))\n\n# Bad\nresult &lt;- data |&gt; filter(age &gt; 18) |&gt; group_by(gender) |&gt; summarise(mean_score = mean(score, na.rm = TRUE))\n\\```\n\n## å‡½æ•°å®šä¹‰\n\n- å‚æ•°é»˜è®¤å€¼ä½¿ç”¨ `=` è€Œé `&lt;-`\n- å‚æ•°ä¹‹é—´æ¢è¡Œå¯¹é½\n- å‡½æ•°ä½“å§‹ç»ˆä½¿ç”¨å¤§æ‹¬å·\n\n\\```r\ncalculate_summary &lt;- function(data,\n                              group_var = NULL,\n                              summary_fn = mean,\n                              na_rm = TRUE) {\n  # å‡½æ•°ä½“\n}\n\\```\n\n\n2. æ•°æ®åˆ†æå·¥ä½œæµ\n---\nname: r-analysis\ndescription: R æ•°æ®åˆ†æå·¥ä½œæµæ¨¡æ¿\n---\n\n# R æ•°æ®åˆ†æå·¥ä½œæµ\n\n## æ ‡å‡†æµç¨‹\n\n1. **ç¯å¢ƒå‡†å¤‡**\n   - æ¸…ç†ç¯å¢ƒï¼š`rm(list = ls())`\n   - è®¾ç½®éšæœºç§å­ï¼š`set.seed(42)`\n   - åŠ è½½å¿…è¦åŒ…\n\n2. **æ•°æ®å¯¼å…¥**\n   - ä½¿ç”¨ `here::here()` æ„å»ºè·¯å¾„\n   - éªŒè¯æ•°æ®ç»´åº¦å’Œç±»å‹\n\n3. **æ¢ç´¢æ€§åˆ†æ (EDA)**\n   - æ•°æ®æ¦‚è§ˆï¼š`glimpse()`, `summary()`\n   - ç¼ºå¤±å€¼æ£€æŸ¥ï¼š`naniar::miss_var_summary()`\n   - åˆ†å¸ƒæ£€æŸ¥ï¼šç›´æ–¹å›¾ã€ç®±çº¿å›¾\n\n4. **æ•°æ®æ¸…æ´—**\n   - å¤„ç†ç¼ºå¤±å€¼\n   - å¤„ç†å¼‚å¸¸å€¼\n   - å˜é‡è½¬æ¢\n\n5. **åˆ†æå»ºæ¨¡**\n   - æè¿°æ€§ç»Ÿè®¡\n   - æ¨æ–­ç»Ÿè®¡\n   - æ¨¡å‹è¯Šæ–­\n\n6. **ç»“æœå‘ˆç°**\n   - è¡¨æ ¼ï¼š`gtsummary`\n   - å›¾å½¢ï¼š`ggplot2`\n   - å¯¼å‡ºï¼š`ggsave()`, `write_csv()`\n\n## ä»£ç æ¨¡æ¿\n\n\\```r\n# ============================================\n# é¡¹ç›®åç§°ï¼š\n# ä½œè€…ï¼š\n# æ—¥æœŸï¼š\n# ============================================\n\n# 0. ç¯å¢ƒå‡†å¤‡ --------------------------------\nrm(list = ls())\nset.seed(42)\n\nlibrary(tidyverse)\nlibrary(here)\n\n# 1. æ•°æ®å¯¼å…¥ --------------------------------\ndata_raw &lt;- read_csv(here(\"data\", \"raw_data.csv\"))\n\n# 2. æ•°æ®æ¢ç´¢ --------------------------------\nglimpse(data_raw)\nsummary(data_raw)\n\n# 3. æ•°æ®æ¸…æ´— --------------------------------\ndata_clean &lt;- data_raw |&gt;\n  # æ¸…æ´—æ­¥éª¤\n  drop_na(key_variable)\n\n# 4. åˆ†æå»ºæ¨¡ --------------------------------\n# ...\n\n# 5. ç»“æœå¯¼å‡º --------------------------------\nwrite_csv(results, here(\"output\", \"results.csv\"))\n\\```\n\n\n3. ggplot2 å¯è§†åŒ–è§„èŒƒ\n---\nname: r-viz\ndescription: ggplot2 å¯è§†åŒ–è§„èŒƒä¸æ¨¡æ¿\n---\n\n# ggplot2 å¯è§†åŒ–è§„èŒƒ\n\n## ä¸»é¢˜è®¾ç½®\n\nä¼˜å…ˆä½¿ç”¨ç®€æ´ä¸»é¢˜ï¼š\n\n\\```r\ntheme_set(theme_minimal(base_size = 12, base_family = \"sans\"))\n\\```\n\n## é…è‰²è§„èŒƒ\n\n- åˆ†ç±»å˜é‡ï¼šä½¿ç”¨ `scale_color_brewer(palette = \"Set2\")`\n- è¿ç»­å˜é‡ï¼šä½¿ç”¨ `scale_fill_viridis_c()`\n- å­¦æœ¯è®ºæ–‡ï¼šè€ƒè™‘è‰²ç›²å‹å¥½é…è‰²\n\n## å›¾å½¢å…ƒç´ \n\n- æ ‡é¢˜ç®€æ´æ˜äº†\n- åæ ‡è½´æ ‡ç­¾åŒ…å«å•ä½\n- å›¾ä¾‹ä½ç½®æ ¹æ®å›¾å½¢è°ƒæ•´\n- é¿å… 3D æ•ˆæœ\n\n## ä¿å­˜è®¾ç½®\n\n\\```r\nggsave(\n  filename = here(\"figures\", \"plot_name.png\"),\n  plot = p,\n  width = 8,\n  height = 6,\n  dpi = 300,\n  bg = \"white\"\n)\n\\```\n\n## å¸¸ç”¨æ¨¡æ¿\n\n### åˆ†ç»„ç®±çº¿å›¾\n\n\\```r\nggplot(data, aes(x = group, y = value, fill = group)) +\n  geom_boxplot(alpha = 0.7, outlier.shape = NA) +\n  geom_jitter(width = 0.2, alpha = 0.3) +\n  scale_fill_brewer(palette = \"Set2\") +\n  labs(\n    title = \"æ ‡é¢˜\",\n    x = \"åˆ†ç»„å˜é‡\",\n    y = \"æ•°å€¼å˜é‡ (å•ä½)\"\n  ) +\n  theme(legend.position = \"none\")\n\\```\n\n### æ•£ç‚¹å›¾ + å›å½’çº¿\n\n\\```r\nggplot(data, aes(x = x_var, y = y_var)) +\n  geom_point(alpha = 0.6) +\n  geom_smooth(method = \"lm\", se = TRUE, color = \"steelblue\") +\n  labs(\n    title = \"X ä¸ Y çš„å…³ç³»\",\n    x = \"X å˜é‡ (å•ä½)\",\n    y = \"Y å˜é‡ (å•ä½)\"\n  )\n\\```\n\n\n4. ç»Ÿè®¡æŠ¥å‘Šæ¨¡æ¿\n---\nname: r-report\ndescription: ç»Ÿè®¡åˆ†ææŠ¥å‘Šæ¨¡æ¿ (RMarkdown/Quarto)\n---\n\n# ç»Ÿè®¡æŠ¥å‘Šæ¨¡æ¿\n\n## æŠ¥å‘Šç»“æ„\n\n1. **æ‘˜è¦**ï¼šç ”ç©¶ç›®çš„ã€æ–¹æ³•ã€ä¸»è¦ç»“æœ\n2. **èƒŒæ™¯**ï¼šç ”ç©¶é—®é¢˜ã€å‡è®¾\n3. **æ–¹æ³•**ï¼šæ•°æ®æ¥æºã€åˆ†ææ–¹æ³•\n4. **ç»“æœ**ï¼šæè¿°æ€§ç»Ÿè®¡ã€æ¨æ–­ç»Ÿè®¡\n5. **è®¨è®º**ï¼šç»“æœè§£é‡Šã€å±€é™æ€§\n6. **é™„å½•**ï¼šè¡¥å……ææ–™ã€ä»£ç \n\n## YAML æ¨¡æ¿\n\n\\```yaml\n---\ntitle: \"åˆ†ææŠ¥å‘Šæ ‡é¢˜\"\nauthor: \"ä½œè€…\"\ndate: \"2026-01-20\"\nformat:\n  html:\n    toc: true\n    toc-depth: 3\n    code-fold: true\n    code-summary: \"æ˜¾ç¤ºä»£ç \"\nexecute:\n  warning: false\n  message: false\n---\n\\```\n\n## è¡¨æ ¼è¾“å‡º\n\nä½¿ç”¨ `gtsummary` ç”Ÿæˆå‘è¡¨çº§è¡¨æ ¼ï¼š\n\n\\```r\nlibrary(gtsummary)\n\ndata |&gt;\n  tbl_summary(\n    by = group,\n    include = c(age, gender, score),\n    statistic = list(\n      all_continuous() ~ \"{mean} ({sd})\",\n      all_categorical() ~ \"{n} ({p}%)\"\n    )\n  ) |&gt;\n  add_p() |&gt;\n  add_overall() |&gt;\n  modify_header(label = \"**å˜é‡**\")\n\\```\n\n## ç»“æœæè¿°æ¨¡æ¿\n\n&gt; æœ¬ç ”ç©¶å…±çº³å…¥ {n} åå‚ä¸è€…ï¼Œå…¶ä¸­ç”·æ€§ {n_male} äºº ({p_male}%)ã€‚\n&gt; å¹´é¾„èŒƒå›´ä¸º {age_min}-{age_max} å²ï¼Œå¹³å‡å¹´é¾„ {age_mean} Â± {age_sd} å²ã€‚\n&gt; ä¸¤ç»„é—´ {variable} å·®å¼‚å…·æœ‰ç»Ÿè®¡å­¦æ„ä¹‰ (t = {t_value}, p {p_symbol} {p_value})ã€‚",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode Skills æŠ€èƒ½ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "5002-opencode-skills.html#çƒ­é—¨æŠ€èƒ½ç»„åˆ",
    "href": "5002-opencode-skills.html#çƒ­é—¨æŠ€èƒ½ç»„åˆ",
    "title": "OpenCode Skills: æŠ€èƒ½ç³»ç»Ÿè¯¦è§£",
    "section": "çƒ­é—¨æŠ€èƒ½ç»„åˆ",
    "text": "çƒ­é—¨æŠ€èƒ½ç»„åˆ\nä»¥ä¸‹æ˜¯ OpenCode ç¤¾åŒºåˆ†äº«çš„çƒ­é—¨æŠ€èƒ½ç»„åˆï¼š\n\nğŸ“ æ–‡æ¡£æ¶æ„å¸ˆ (docs-architect)\nä¸“æ³¨äºç”Ÿæˆé«˜è´¨é‡æŠ€æœ¯æ–‡æ¡£ï¼š\n\nè‡ªåŠ¨è¯†åˆ«ä»£ç ç»“æ„\nç”Ÿæˆ API æ–‡æ¡£\nç¼–å†™ç”¨æˆ·æŒ‡å—\nç»´æŠ¤ README\n\n\n\nğŸŒ å…¨èƒ½ç½‘é¡µåŠ©æ‰‹ (e2e-tester)\nç»“åˆ Playwright MCP è¿›è¡Œç«¯åˆ°ç«¯æµ‹è¯•ï¼š\n\nè‡ªåŠ¨åŒ–æµè§ˆå™¨æµ‹è¯•\næˆªå›¾å¯¹æ¯”\næ€§èƒ½ç›‘æ§\nå¯è®¿é—®æ€§æ£€æŸ¥\n\n\n\nğŸ¦¸ Superpowers (TDD å·¥ä½œæµ)\næµ‹è¯•é©±åŠ¨å¼€å‘æœ€ä½³å®è·µï¼š\n\nå…ˆå†™æµ‹è¯•ï¼Œåå†™ä»£ç \nçº¢-ç»¿-é‡æ„å¾ªç¯\nè¦†ç›–ç‡æ£€æŸ¥\nè¾¹ç•Œæ¡ä»¶æµ‹è¯•\n\n\n\nğŸ“§ æ™ºèƒ½åŠå…¬ç§˜ä¹¦ (office-assistant)\næ—¥å¸¸åŠå…¬ä»»åŠ¡è‡ªåŠ¨åŒ–ï¼š\n\né‚®ä»¶æ¨¡æ¿ç”Ÿæˆ\nä¼šè®®çºªè¦æ•´ç†\næ—¥ç¨‹å®‰æ’\næ–‡æ¡£æ ¼å¼åŒ–\n\n\n\nâœ¨ çˆ†æ¬¾å†…å®¹åˆ›ä½œè€… (content-creator)\nå†…å®¹è¥é”€ä¸åˆ›ä½œï¼š\n\næ ‡é¢˜ä¼˜åŒ–\nSEO å»ºè®®\nå¤šå¹³å°é€‚é…\næ•°æ®åˆ†æè§†è§’\n\n\n\nğŸ“Š ç ”æŠ¥åˆ†æä¸“å®¶ (market-analyst)\né‡‘èç ”æŠ¥åˆ†æä¸ç”Ÿæˆï¼š\n\næ•°æ®æå–\nå›¾è¡¨è§£è¯»\nè¶‹åŠ¿åˆ†æ\næŠ•èµ„å»ºè®®",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode Skills æŠ€èƒ½ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "5002-opencode-skills.html#æƒé™é…ç½®",
    "href": "5002-opencode-skills.html#æƒé™é…ç½®",
    "title": "OpenCode Skills: æŠ€èƒ½ç³»ç»Ÿè¯¦è§£",
    "section": "æƒé™é…ç½®",
    "text": "æƒé™é…ç½®\nSkills å¯ä»¥å£°æ˜æ‰€éœ€çš„å·¥å…·æƒé™ï¼š\n---\nname: advanced-skill\ndescription: éœ€è¦ç‰¹æ®Šæƒé™çš„æŠ€èƒ½\npermissions:\n  bash: true\n  write: true\n  mcp:\n    - playwright\n    - github\n---\n\næƒé™å­—æ®µè¯´æ˜\n\n\n\næƒé™\nè¯´æ˜\n\n\n\n\nbash\nå…è®¸æ‰§è¡Œ shell å‘½ä»¤\n\n\nwrite\nå…è®¸å†™å…¥æ–‡ä»¶\n\n\nedit\nå…è®¸ç¼–è¾‘æ–‡ä»¶\n\n\nmcp\nå…è®¸ä½¿ç”¨çš„ MCP æœåŠ¡å™¨åˆ—è¡¨\n\n\n\n\n\nå®‰å…¨è€ƒè™‘\n\næ¥è‡ªä¸ä¿¡ä»»æ¥æºçš„æŠ€èƒ½åº”å®¡æŸ¥æƒé™å£°æ˜\næ•æ„Ÿæ“ä½œå»ºè®®åœ¨ opencode.json ä¸­è®¾ç½® \"permission\": \"ask\"\nå¯ä»¥é€šè¿‡é…ç½®ç¦ç”¨ç‰¹å®šæŠ€èƒ½çš„æƒé™",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode Skills æŠ€èƒ½ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "5002-opencode-skills.html#åˆ›å»ºè‡ªå®šä¹‰æŠ€èƒ½",
    "href": "5002-opencode-skills.html#åˆ›å»ºè‡ªå®šä¹‰æŠ€èƒ½",
    "title": "OpenCode Skills: æŠ€èƒ½ç³»ç»Ÿè¯¦è§£",
    "section": "åˆ›å»ºè‡ªå®šä¹‰æŠ€èƒ½",
    "text": "åˆ›å»ºè‡ªå®šä¹‰æŠ€èƒ½\n\næ­¥éª¤ 1ï¼šç¡®å®šæŠ€èƒ½èŒƒå›´\næ€è€ƒä»¥ä¸‹é—®é¢˜ï¼š\n\nè¿™ä¸ªæŠ€èƒ½è§£å†³ä»€ä¹ˆå…·ä½“é—®é¢˜ï¼Ÿ\næ˜¯å¦éœ€è¦è‡ªåŠ¨æ¿€æ´»ï¼ˆglobsï¼‰ï¼Ÿ\néœ€è¦å“ªäº›å·¥å…·æƒé™ï¼Ÿ\n\n\n\næ­¥éª¤ 2ï¼šåˆ›å»ºç›®å½•ç»“æ„\n# é¡¹ç›®çº§æŠ€èƒ½\nmkdir -p .opencode/skill/my-skill\ntouch .opencode/skill/my-skill/SKILL.md\n\n# å…¨å±€æŠ€èƒ½\nmkdir -p ~/.config/opencode/skill/my-skill\ntouch ~/.config/opencode/skill/my-skill/SKILL.md\n\n\næ­¥éª¤ 3ï¼šç¼–å†™ SKILL.md\n---\nname: my-skill\ndescription: æˆ‘çš„è‡ªå®šä¹‰æŠ€èƒ½\nversion: 1.0.0\n---\n\n# æŠ€èƒ½åç§°\n\n## èƒŒæ™¯è¯´æ˜\n\nè¯´æ˜è¿™ä¸ªæŠ€èƒ½çš„ç”¨é€”å’ŒèƒŒæ™¯ã€‚\n\n## å·¥ä½œè§„èŒƒ\n\n- è§„èŒƒ 1\n- è§„èŒƒ 2\n\n## ç¤ºä¾‹\n\næä¾›ä½¿ç”¨ç¤ºä¾‹...\n\n\næ­¥éª¤ 4ï¼šæµ‹è¯•æŠ€èƒ½\n/skills          # ç¡®è®¤æŠ€èƒ½å‡ºç°åœ¨åˆ—è¡¨ä¸­\n/my-skill        # åŠ è½½æŠ€èƒ½\nå¸®æˆ‘åšä¸€ä¸ªç¤ºä¾‹ä»»åŠ¡  # éªŒè¯æŠ€èƒ½æ•ˆæœ",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode Skills æŠ€èƒ½ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "5002-opencode-skills.html#æœ€ä½³å®è·µ",
    "href": "5002-opencode-skills.html#æœ€ä½³å®è·µ",
    "title": "OpenCode Skills: æŠ€èƒ½ç³»ç»Ÿè¯¦è§£",
    "section": "æœ€ä½³å®è·µ",
    "text": "æœ€ä½³å®è·µ\n\n1. æŠ€èƒ½ç²’åº¦\n\nå¤ªå¤§ï¼šéš¾ä»¥å¤ç”¨ï¼Œä¸Šä¸‹æ–‡è¿‡é•¿\nå¤ªå°ï¼šéœ€è¦é¢‘ç¹ç»„åˆï¼Œç®¡ç†å¤æ‚\nåˆé€‚ï¼šä¸€ä¸ªæŠ€èƒ½è§£å†³ä¸€ç±»é—®é¢˜\n\n\n\n2. æ–‡æ¡£è´¨é‡\n\næä¾›æ¸…æ™°çš„ä½¿ç”¨åœºæ™¯\nåŒ…å«å¯ç›´æ¥ä½¿ç”¨çš„ä»£ç æ¨¡æ¿\nåˆ—å‡ºç›¸å…³æŠ€èƒ½å’Œå‰ç½®è¦æ±‚\n\n\n\n3. ç‰ˆæœ¬ç®¡ç†\n\nä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬å·\né‡å¤§æ›´æ”¹æ—¶æ›´æ–°ç‰ˆæœ¬\nè®°å½•å˜æ›´æ—¥å¿—\n\n\n\n4. æµ‹è¯•éªŒè¯\n\næ–°æŠ€èƒ½å…ˆåœ¨å°ä»»åŠ¡ä¸Šæµ‹è¯•\néªŒè¯ä¸å…¶ä»–æŠ€èƒ½çš„å…¼å®¹æ€§\næ”¶é›†ç”¨æˆ·åé¦ˆæŒç»­æ”¹è¿›",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode Skills æŠ€èƒ½ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "5002-opencode-skills.html#æ•…éšœæ’é™¤",
    "href": "5002-opencode-skills.html#æ•…éšœæ’é™¤",
    "title": "OpenCode Skills: æŠ€èƒ½ç³»ç»Ÿè¯¦è§£",
    "section": "æ•…éšœæ’é™¤",
    "text": "æ•…éšœæ’é™¤\n\næŠ€èƒ½æœªæ˜¾ç¤ºåœ¨åˆ—è¡¨ä¸­\n\næ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®\nç¡®è®¤ SKILL.md æ–‡ä»¶åå¤§å°å†™æ­£ç¡®\néªŒè¯ YAML frontmatter æ ¼å¼\n\n# æ£€æŸ¥é¡¹ç›®çº§æŠ€èƒ½\nls -la .opencode/skill/\n\n# æ£€æŸ¥å…¨å±€æŠ€èƒ½\nls -la ~/.config/opencode/skill/\n\n\næŠ€èƒ½åŠ è½½å¤±è´¥\n\næ£€æŸ¥ frontmatter è¯­æ³•é”™è¯¯\nç¡®è®¤ name å­—æ®µå­˜åœ¨\næŸ¥çœ‹ OpenCode æ—¥å¿—\n\n\n\nGlobs ä¸ç”Ÿæ•ˆ\n\nç¡®è®¤æ–‡ä»¶æ¨¡å¼è¯­æ³•æ­£ç¡®\næ£€æŸ¥æ˜¯å¦è¢«æ›´é«˜ä¼˜å…ˆçº§æŠ€èƒ½è¦†ç›–\néªŒè¯æ–‡ä»¶æ‰©å±•ååŒ¹é…\n\n\n\næƒé™è¢«æ‹’ç»\n\næ£€æŸ¥ opencode.json ä¸­çš„æƒé™è®¾ç½®\nç¡®è®¤æŠ€èƒ½å£°æ˜çš„æƒé™æ­£ç¡®\nåœ¨æ•æ„Ÿæ“ä½œæ—¶é€‰æ‹©â€å…è®¸â€",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode Skills æŠ€èƒ½ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "5002-opencode-skills.html#èµ„æºé“¾æ¥",
    "href": "5002-opencode-skills.html#èµ„æºé“¾æ¥",
    "title": "OpenCode Skills: æŠ€èƒ½ç³»ç»Ÿè¯¦è§£",
    "section": "èµ„æºé“¾æ¥",
    "text": "èµ„æºé“¾æ¥\n\n\n\nèµ„æº\né“¾æ¥\n\n\n\n\nSkills å®˜æ–¹æ–‡æ¡£\nopencodecn.com/docs/skills\n\n\nçƒ­é—¨æŠ€èƒ½å±•ç¤º\nopencodecn.com/skills\n\n\nCommands æ–‡æ¡£\nopencodecn.com/docs/commands\n\n\nOpenCode åŸºç¡€æ•™ç¨‹\næœ¬ç«™ OpenCode æ•™ç¨‹",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode Skills æŠ€èƒ½ç³»ç»Ÿ"
    ]
  },
  {
    "objectID": "5002-opencode-skills.html#æ€»ç»“",
    "href": "5002-opencode-skills.html#æ€»ç»“",
    "title": "OpenCode Skills: æŠ€èƒ½ç³»ç»Ÿè¯¦è§£",
    "section": "æ€»ç»“",
    "text": "æ€»ç»“\nSkills æ˜¯ OpenCode ä¸­å®ç°ä¸“ä¸šåŒ–ã€æ¨¡å—åŒ–ã€å¯å¤ç”¨çš„å…³é”®æœºåˆ¶ï¼š\n\n\n\nç‰¹ç‚¹\nè¯´æ˜\n\n\n\n\næŒ‰éœ€åŠ è½½\né¿å…ä¸Šä¸‹æ–‡è†¨èƒ€ï¼ŒèŠ‚çœ token\n\n\næ¨¡å—åŒ–\nä¸€ä¸ªæŠ€èƒ½è§£å†³ä¸€ç±»é—®é¢˜\n\n\nå¯å¤ç”¨\né¡¹ç›®é—´ã€å›¢é˜Ÿé—´å…±äº«\n\n\nå¯ç»„åˆ\nå¤šä¸ªæŠ€èƒ½ååŒå·¥ä½œ\n\n\n\nå¯¹äº R è¯­è¨€ç”¨æˆ·ï¼Œå»ºè®®åˆ›å»ºä»¥ä¸‹æ ¸å¿ƒæŠ€èƒ½ï¼š\n\nr-styleï¼šä»£ç é£æ ¼è§„èŒƒï¼ˆå»ºè®®ä½¿ç”¨ globs è‡ªåŠ¨æ¿€æ´»ï¼‰\nr-analysisï¼šæ•°æ®åˆ†æå·¥ä½œæµæ¨¡æ¿\nr-vizï¼šggplot2 å¯è§†åŒ–è§„èŒƒ\nr-reportï¼šç»Ÿè®¡æŠ¥å‘Šæ¨¡æ¿\n\nä»è¿™äº›åŸºç¡€æŠ€èƒ½å¼€å§‹ï¼Œæ ¹æ®å®é™…éœ€æ±‚é€æ­¥æ‰©å±•ä½ çš„æŠ€èƒ½åº“ï¼",
    "crumbs": [
      "ä¸»é¡µ",
      "æœºå™¨å­¦ä¹ ä¸AI",
      "ğŸ› ï¸ AI å·¥å…·",
      "OpenCode Skills æŠ€èƒ½ç³»ç»Ÿ"
    ]
  }
]