---
name: section-r-packages
description: 生成实用R包分类页面的超详细教程内容，强调包的场景、功能与实践
compatibility: opencode
metadata:
  audience: intermediate
  section: r-packages
---

## 我做什么

- 为“实用 R 包”类页面生成超详细教程，覆盖包背景、核心功能、实践流程
- 确保每个包的内容包含“用途 → 安装 → 核心函数 → 示例 → 逐段解释 → 常见错误 → 扩展”
- 强调实用性、可复现性与文字解释密度，避免只有代码
- 适配本仓库中“表格制作/数据处理/模型整理”等子分类

## 输出结构要求

1. **包简介与定位**：说明包解决的问题、适用场景与替代方案。
2. **模型/工具入门**：从0解释包的核心理念与工作流。
3. **安装与环境**：安装命令、依赖包说明、版本注意事项。
4. **核心功能清单**：列出主函数与用途，说明输入/输出。
5. **完整示例流程**：从读取示例数据到得到结果，形成闭环。
6. **代码逐段解释**：每段代码解释意图、参数、返回值。
7. **常见错误与排查**：列出典型错误信息与解决方式。
8. **性能与最佳实践**：数据规模、效率优化、常用技巧。
9. **扩展阅读与关联包**：推荐可搭配使用的包。

## 写作与代码规范

- 标题不要手动编号（如 `### 1. xxx`），项目已配置自动编号。
- 每个包至少提供一个"最小可运行示例 + 扩展示例"。
- 代码块必须有清晰 chunk label，命名体现内容，如 `r brucer-summary`。
- 包函数尽量用 `pkg::fn`，若多次使用可 `library()` 并解释原因。
- 表格、图形输出说明文件路径与命名规则。
- 文字解释必须占据主要篇幅，代码为辅助。
- 教程文字必须通俗、完整、详尽，包含例子、对比与应用场景，确保读者能理解方法原理与使用方式。
- 代码章节尽量放在解释之后，逐段讲透参数与输出逻辑。
- 在任何代码之前必须先完整讲清方法/框架与整体流程，详尽程度对齐 `doc/1016-mlr3.rmd`，结构组织参考 `doc/1079-kmeans.rmd` 的“概念 → 流程 → 代码 → 解释”顺序。
- 语言风格要求客观、科学、结构清楚，以段落叙述为主；列表仅在能更清晰表达时使用。
- 避免面向读者的口语化指令或主观劝导（如“让读者…”），保持方法介绍的学术语气。
- 若文内没有图片，必须生成 SVG 封面并在 YAML 的 `image` 字段引用。

## 完成后操作

- 自动更新 `doc/_quarto.yml` 的侧边栏入口，确保页面能被索引。
- 若渲染报依赖缺失，先在终端安装所需 R 包后再渲染；除非依赖体积过大或环境不合适，否则应安装依赖，确保 `quarto render` 能产出图片。
- 必须完成 3 项 render 验证且全部成功：
  - `quarto render doc/<当前文章>`
  - `quarto render doc/index.qmd`
  - `quarto render doc/sections/<对应分类>.qmd`
- 三项 render全部通过后再执行其它操作，确认无报错。
- **更新 `doc/0001-guide.rmd`**：在对应分类表格中添加新教程条目，保持与现有格式一致。
- 渲染完成后询问是否提交；用户确认后执行 commit，并按需 push。

## 何时使用我

当需要编写“R包教程/功能总览/实践指南”类页面时使用。
如果未指定具体包名或场景，请先提出澄清问题。
