---
title: R语言矩阵图与成对图绘制
date: '2026-01-15'
categories:
- 数据可视化
- 关系图
- 统计图表
- 关联图
image: images/bindpairplot_cover.svg
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
    echo = TRUE, warning = FALSE, message = FALSE,
    fig.width = 10, fig.height = 10, fig.retina = 2, out.width = "100%", dpi = 150
)
```

## 什么是矩阵图/成对图

矩阵图（Pairwise Plot/Pairs Plot）将多个变量两两组合，在一个矩阵布局中同时展示所有变量之间的关系，是多变量探索性分析的利器。

---

## R包加载

```{r}
library(ggplot2)
library(dplyr)
library(GGally)
```

---

## 基础成对图

```{r}
# 使用内置iris数据
ggpairs(iris, columns = 1:4, aes(color = Species, alpha = 0.6)) +
    scale_color_manual(values = c("#4f46e5", "#10b981", "#f59e0b")) +
    scale_fill_manual(values = c("#4f46e5", "#10b981", "#f59e0b")) +
    theme_minimal() +
    theme(plot.title = element_text(face = "bold"))
```

---

## 自定义对角线

```{r}
ggpairs(iris,
    columns = 1:4, aes(color = Species),
    diag = list(continuous = wrap("densityDiag", alpha = 0.5)),
    lower = list(continuous = wrap("points", alpha = 0.5, size = 1)),
    upper = list(continuous = wrap("cor", size = 3))
) +
    scale_color_manual(values = c("#4f46e5", "#10b981", "#f59e0b")) +
    theme_bw()
```

---

## 使用基础R的pairs函数

```{r}
pairs(iris[, 1:4],
    col = c("#4f46e5", "#10b981", "#f59e0b")[iris$Species],
    pch = 19,
    main = "鸢尾花数据矩阵图"
)
```

---

## 总结

| 函数 | 特点 |
|------|------|
| `GGally::ggpairs()` | 最灵活，ggplot2风格 |
| `pairs()` | 基础R，快速简单 |

### 相关教程

- [相关图矩阵](2049-bindcorrplot.html)
- [散点图与趋势线](2026-bindscatterplot.html)
