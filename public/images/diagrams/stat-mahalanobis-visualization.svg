<svg width="900" height="600" viewBox="0 0 900 600" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="900" height="600" fill="#f8f9fa"/>

  <!-- Title -->
  <text x="450" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="28" font-weight="bold" fill="#2c3e50">
    马氏距离可视化
  </text>
  <text x="450" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" fill="#7f8c8d">
    考虑变量相关性和方差的"统计距离"
  </text>

  <!-- Main Visualization -->
  <g transform="translate(280, 320)">
    <!-- Axes -->
    <line x1="-220" y1="0" x2="220" y2="0" stroke="#3498db" stroke-width="2"/>
    <line x1="0" y1="-220" x2="0" y2="220" stroke="#3498db" stroke-width="2"/>
    <text x="230" y="5" font-family="Arial" font-size="16" fill="#3498db" font-weight="bold">变量 X₁</text>
    <text x="5" y="-230" font-family="Arial" font-size="16" fill="#3498db" font-weight="bold">变量 X₂</text>

    <!-- Data distribution cloud (ellipse) - tilted to show correlation -->
    <ellipse cx="0" cy="0" rx="180" ry="80" fill="#3498db" fill-opacity="0.1" stroke="#3498db" stroke-width="2" transform="rotate(-35)"/>
    <ellipse cx="0" cy="0" rx="120" ry="50" fill="#3498db" fill-opacity="0.15" stroke="#3498db" stroke-width="2" transform="rotate(-35)"/>
    <ellipse cx="0" cy="0" rx="60" ry="25" fill="#3498db" fill-opacity="0.2" stroke="#3498db" stroke-width="2" transform="rotate(-35)"/>

    <!-- Center point (mean) -->
    <circle cx="0" cy="0" r="8" fill="#2c3e50"/>
    <text x="15" y="5" font-family="Arial" font-size="14" font-weight="bold" fill="#2c3e50">μ (均值)</text>

    <!-- Normal points -->
    <circle cx="30" cy="20" r="5" fill="#2ecc71"/>
    <circle cx="-50" cy="-30" r="5" fill="#2ecc71"/>
    <circle cx="80" cy="50" r="5" fill="#2ecc71"/>
    <circle cx="-70" cy="40" r="5" fill="#2ecc71"/>
    <circle cx="40" cy="-20" r="5" fill="#2ecc71"/>
    <circle cx="-30" cy="50" r="5" fill="#2ecc71"/>
    <circle cx="60" cy="-40" r="5" fill="#2ecc71"/>
    <circle cx="-20" cy="-50" r="5" fill="#2ecc71"/>

    <!-- Outlier - same Euclidean distance but different Mahalanobis -->
    <circle cx="120" cy="-100" r="8" fill="#e74c3c"/>
    <text x="135" y="-95" font-family="Arial" font-size="12" font-weight="bold" fill="#e74c3c">异常点 A</text>

    <!-- Another outlier -->
    <circle cx="-100" cy="120" r="8" fill="#e74c3c"/>
    <text x="-115" y="135" font-family="Arial" font-size="12" font-weight="bold" fill="#e74c3c">异常点 B</text>

    <!-- Distance indicators -->
    <line x1="0" y1="0" x2="120" y2="-100" stroke="#e74c3c" stroke-width="2" stroke-dasharray="8,4"/>
    <line x1="0" y1="0" x2="-100" y2="120" stroke="#e74c3c" stroke-width="2" stroke-dasharray="8,4"/>

    <!-- Normal point distance indicator -->
    <line x1="0" y1="0" x2="30" y2="20" stroke="#2ecc71" stroke-width="2" stroke-dasharray="4,2"/>
    <text x="20" y="40" font-family="Arial" font-size="11" fill="#2ecc71">正常点</text>

  </g>

  <!-- Explanatory Box -->
  <g transform="translate(620, 150)">
    <rect width="250" height="380" fill="#ecf0f1" rx="10" ry="10"/>
    <text x="20" y="35" font-family="Arial" font-size="18" font-weight="bold" fill="#2c3e50">马氏距离公式</text>

    <text x="20" y="70" font-family="Courier New" font-size="12" fill="#34495e" font-weight="bold">d² = (x-μ)ᵀS⁻¹(x-μ)</text>

    <text x="20" y="110" font-family="Arial" font-size="14" font-weight="bold" fill="#2c3e50">关键特点</text>

    <circle cx="30" cy="135" r="4" fill="#3498db"/>
    <text x="45" y="140" font-family="Arial" font-size="12" fill="#34495e">自动标准化数据</text>

    <circle cx="30" cy="160" r="4" fill="#3498db"/>
    <text x="45" y="165" font-family="Arial" font-size="12" fill="#34495e">考虑变量相关性</text>

    <circle cx="30" cy="185" r="4" fill="#3498db"/>
    <text x="45" y="190" font-family="Arial" font-size="12" fill="#34495e">对异常值敏感</text>

    <text x="20" y="230" font-family="Arial" font-size="14" font-weight="bold" fill="#2c3e50">图示说明</text>

    <rect x="15" y="250" width="15" height="15" fill="#2ecc71" rx="3"/>
    <text x="40" y="263" font-family="Arial" font-size="11" fill="#34495e">正常点 (马氏距离小)</text>

    <rect x="15" y="275" width="15" height="15" fill="#e74c3c" rx="3"/>
    <text x="40" y="288" font-family="Arial" font-size="11" fill="#34495e">异常点 (马氏距离大)</text>

    <ellipse cx="22" cy="310" rx="12" ry="6" fill="none" stroke="#3498db" stroke-width="2"/>
    <text x="40" y="313" font-family="Arial" font-size="11" fill="#34495e">等马氏距离线</text>

    <text x="20" y="350" font-family="Arial" font-size="11" fill="#7f8c8d">椭圆旋转显示</text>
    <text x="20" y="368" font-family="Arial" font-size="11" fill="#7f8c8d">变量间相关性</text>
  </g>

  <!-- Bottom Formula Explanation -->
  <g transform="translate(50, 550)">
    <rect width="800" height="40" fill="#d5dbdb" rx="5" ry="5"/>
    <text x="20" y="27" font-family="Arial" font-size="13" fill="#34495e">
      <tspan font-weight="bold">S</tspan>: 协方差矩阵 (衡量变量相关性) |
      <tspan font-weight="bold">S⁻¹</tspan>: 逆矩阵 (标准化变换) |
      <tspan font-weight="bold">μ</tspan>: 均值向量 |
      马氏距离服从 χ² 分布，可用于统计检验
    </text>
  </g>

</svg>
