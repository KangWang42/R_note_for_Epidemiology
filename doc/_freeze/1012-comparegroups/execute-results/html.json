{
  "hash": "94f2eecd9d799993e86c30590211d04e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"compareGroups-描述性表一快速生成\"\ndate: \"2024-10-20\"\ncategories: [R包, 表格]\nimage: \"figure/comparegroups-cover.png\"\n---\n\n\n\n> 第95期 R语言教程！compareGroups神包制作描述性表一\n>\n> 描述性表1在论文写作中占据着开篇起笔的作用。**对所用的数据进行描述和简单分析，为后续的模型构建提供数据可靠性信息**\n>\n> 本期介绍如何使用compareGroups神包来快速生成符合学术规范的表1。并进行包括以下自定义设置：1**.设置亚组 2.设置非正态变量使用非参组间检验 3.设置显示缺失值 4.设置显示OR值 5.设置使用自定义组间比较方法 6 数据导出**\n\n## R包介绍\n\ncompareGroups 是一个在 CRAN 上可用的 R 包，**它可以生成描述性表格，展示几个变量的均值、标准差、分位数或频率。此外，还会使用适当的测试计算 p 值来检验组间差异。**\n\n通过简单的代码，就能在 R 中生成美观、规范且可直接用于论文发表的描述性表格。这些表格还可以**导出到不同的格式，如 Word、Excel、PDF，或插入到 R-Sweave 或 R-markdown 文档中**。\n\n在[手册](https://cran.r-project.org/web/packages/compareGroups/vignettes/compareGroups_vignette.html) <https://cran.r-project.org/web/packages/compareGroups/vignettes/compareGroups_vignette.html>里提供了非常友好的R包教程，描述了 compareGroups 的所有功能，并附有实际示例。\\\n\n## R包安装\n\n从CRAN中安装R包\n\n\n::: {.cell}\n\n```{.r .cell-code}\ninstall.packages(\"compareGroups\") \n```\n:::\n\n\n或者从github安装最新版本\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(devtools) \ndevtools::install_github(\"isubirana/compareGroups\")\n```\n:::\n\n\n## R包参数\n\n### **查看数据**\n\n(不重要可以不看，知道是**包含多种数据类型的数据集即可**)调用R包自带的regicor数据，包含25个变量。regicor（吉罗纳心脏登记）研究是一项横断面研究，参与者来自西班牙东北部地区。在此研究中，收集了参与者的各种数据集，包括人口统计信息（如年龄和性别）、人体测量数据（如身高、体重和腰围）以及脂质水平（包括总胆固醇和甘油三酯）。此外，参与者还完成了涵盖体育活动和生活质量等领域的问卷。\n\n为了追踪健康结果，研究还收集了关于心血管事件和死亡的数据。这些信息是通过医院和官方登记册及报告，在超过10年的时间里获得的。\n\n\n::: {.cell result='hide'}\n\n```{.r .cell-code}\nlibrary(compareGroups)\nlibrary(bruceR) #之前有介绍过，方便描述数据\n```\n:::\n\n\n\n::: {.cell result='hide'}\n\n```{.r .cell-code}\n# 方便起见，我们只分析前十个变量\ndata(\"regicor\")\n\nregicor <- regicor[,1:10]\n\nstr(regicor)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n'data.frame':\t2294 obs. of  10 variables:\n $ id     : num  2.26e+03 1.88e+03 3.00e+09 3.00e+09 3.00e+09 ...\n  ..- attr(*, \"label\")= Named chr \"Individual id\"\n  .. ..- attr(*, \"names\")= chr \"id\"\n $ year   : Factor w/ 3 levels \"1995\",\"2000\",..: 3 3 2 2 2 2 2 1 3 1 ...\n  ..- attr(*, \"label\")= Named chr \"Recruitment year\"\n  .. ..- attr(*, \"names\")= chr \"year\"\n $ age    : int  70 56 37 69 70 40 66 53 43 70 ...\n  ..- attr(*, \"label\")= Named chr \"Age\"\n  .. ..- attr(*, \"names\")= chr \"age\"\n $ sex    : Factor w/ 2 levels \"Male\",\"Female\": 2 2 1 2 2 2 1 2 2 1 ...\n  ..- attr(*, \"label\")= chr \"Sex\"\n $ smoker : Factor w/ 3 levels \"Never smoker\",..: 1 1 2 1 NA 2 1 1 3 3 ...\n  ..- attr(*, \"label\")= Named chr \"Smoking status\"\n  .. ..- attr(*, \"names\")= chr \"smoker\"\n $ sbp    : int  138 139 132 168 NA 108 120 132 95 142 ...\n  ..- attr(*, \"label\")= Named chr \"Systolic blood pressure\"\n  .. ..- attr(*, \"names\")= chr \"sbp\"\n $ dbp    : int  75 89 82 97 NA 70 72 78 65 78 ...\n  ..- attr(*, \"label\")= Named chr \"Diastolic blood pressure\"\n  .. ..- attr(*, \"names\")= chr \"dbp\"\n $ histhtn: Factor w/ 2 levels \"Yes\",\"No\": 2 2 2 2 2 2 1 2 2 2 ...\n  ..- attr(*, \"label\")= Named chr \"History of hypertension\"\n  .. ..- attr(*, \"names\")= chr \"histbp\"\n $ txhtn  : Factor w/ 2 levels \"No\",\"Yes\": 1 1 1 1 1 1 2 1 1 1 ...\n  ..- attr(*, \"label\")= chr \"Hypertension treatment\"\n $ chol   : num  294 220 245 168 NA NA 298 254 194 188 ...\n  ..- attr(*, \"label\")= Named chr \"Total cholesterol\"\n  .. ..- attr(*, \"names\")= chr \"chol\"\n```\n\n\n:::\n:::\n\n\n### **生成描述性统计表**\n\n简单生成一个最简单的描述性统计表，发现定量资料用平均值标准差描述，分类资料用例数和占比描述\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndescrTable( ~ ., data = regicor)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--------Summary descriptives table ---------\n\n_______________________________________________________ \n                                    [ALL]           N   \n                                   N=2294               \n¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ \nIndividual id              1215817624 (1339538686) 2294 \nRecruitment year:                                  2294 \n    1995                         431 (18.8%)            \n    2000                         786 (34.3%)            \n    2005                        1077 (46.9%)            \nAge                              54.7 (11.0)       2294 \nSex:                                               2294 \n    Male                        1101 (48.0%)            \n    Female                      1193 (52.0%)            \nSmoking status:                                    2233 \n    Never smoker                1201 (53.8%)            \n    Current or former < 1y       593 (26.6%)            \n    Former >= 1y                 439 (19.7%)            \nSystolic blood pressure          131 (20.3)        2280 \nDiastolic blood pressure         79.7 (10.5)       2280 \nHistory of hypertension:                           2286 \n    Yes                          723 (31.6%)            \n    No                          1563 (68.4%)            \nHypertension treatment:                            2251 \n    No                          1823 (81.0%)            \n    Yes                          428 (19.0%)            \nTotal cholesterol                219 (45.2)        2193 \n¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ \n```\n\n\n:::\n:::\n\n\n### **设置分组变量**\n\n根据吸烟情况将人群分为三组，同时生成组间比较列（p.overall）。自动使用卡方检验(分类变量)和方差分析(计量资料：两类时等价t检验)。\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndescrTable(`smoker`~ ., data = regicor)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--------Summary descriptives table by 'Smoking status'---------\n\n_________________________________________________________________________________________________________ \n                              Never smoker       Current or former < 1y       Former >= 1y      p.overall \n                                 N=1201                   N=593                  N=439                    \n¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ \nIndividual id            1229013133 (1337342152) 1534618659 (1372769742) 690225475 (1126583145)  <0.001   \nRecruitment year:                                                                                <0.001   \n    1995                       234 (19.5%)             109 (18.4%)             72 (16.4%)                 \n    2000                       414 (34.5%)             267 (45.0%)             77 (17.5%)                 \n    2005                       553 (46.0%)             217 (36.6%)            290 (66.1%)                 \nAge                            56.5 (10.8)             50.6 (10.7)            55.3 (10.6)        <0.001   \nSex:                                                                                             <0.001   \n    Male                       301 (25.1%)             410 (69.1%)            360 (82.0%)                 \n    Female                     900 (74.9%)             183 (30.9%)             79 (18.0%)                 \nSystolic blood pressure        132 (20.5)              128 (19.8)              133 (19.7)        <0.001   \nDiastolic blood pressure       79.5 (10.2)             78.8 (11.0)            81.2 (10.8)         0.002   \nHistory of hypertension:                                                                         <0.001   \n    Yes                        421 (35.1%)             125 (21.2%)            162 (36.9%)                 \n    No                         777 (64.9%)             464 (78.8%)            277 (63.1%)                 \nHypertension treatment:                                                                          <0.001   \n    No                         922 (77.9%)             525 (90.2%)            331 (77.2%)                 \n    Yes                        262 (22.1%)             57 (9.79%)              98 (22.8%)                 \nTotal cholesterol              220 (46.7)              219 (44.7)              214 (42.6)         0.030   \n¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ \n```\n\n\n:::\n:::\n\n\n### **删除某些变量不显示**\n\n如不希望描述性统计对Id和year进行描述，直接在\\~右侧的.后使用减号进行删除（如需要的变量比较少，也可以手动写公式一个个加）\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndescrTable(`smoker`~ .-id-year, data = regicor)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--------Summary descriptives table by 'Smoking status'---------\n\n___________________________________________________________________________________ \n                         Never smoker Current or former < 1y Former >= 1y p.overall \n                            N=1201            N=593             N=439               \n¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ \nAge                      56.5 (10.8)       50.6 (10.7)       55.3 (10.6)   <0.001   \nSex:                                                                       <0.001   \n    Male                 301 (25.1%)       410 (69.1%)       360 (82.0%)            \n    Female               900 (74.9%)       183 (30.9%)        79 (18.0%)            \nSystolic blood pressure   132 (20.5)        128 (19.8)        133 (19.7)   <0.001   \nDiastolic blood pressure 79.5 (10.2)       78.8 (11.0)       81.2 (10.8)    0.002   \nHistory of hypertension:                                                   <0.001   \n    Yes                  421 (35.1%)       125 (21.2%)       162 (36.9%)            \n    No                   777 (64.9%)       464 (78.8%)       277 (63.1%)            \nHypertension treatment:                                                    <0.001   \n    No                   922 (77.9%)       525 (90.2%)       331 (77.2%)            \n    Yes                  262 (22.1%)        57 (9.79%)        98 (22.8%)            \nTotal cholesterol         220 (46.7)        219 (44.7)        214 (42.6)    0.030   \n¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ \n```\n\n\n:::\n:::\n\n\n### **亚组描述**\n\nsubset=(逻辑判断)来挑选出男性患者进行分析\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndescrTable(`smoker`~ .-id-year-sex, data = regicor,\n           subset=(sex==\"Male\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--------Summary descriptives table by 'smoker'---------\n\n___________________________________________________________________________________ \n                         Never smoker Current or former < 1y Former >= 1y p.overall \n                            N=301             N=410             N=360               \n¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ \nAge                      55.0 (11.5)       52.7 (11.0)       56.8 (10.5)   <0.001   \nSystolic blood pressure   133 (18.5)        133 (19.0)        136 (19.0)    0.050   \nDiastolic blood pressure 81.3 (9.31)       81.2 (10.6)       82.3 (10.4)    0.263   \nHistory of hypertension:                                                   <0.001   \n    Yes                   85 (28.4%)       101 (24.8%)       145 (40.3%)            \n    No                   214 (71.6%)       306 (75.2%)       215 (59.7%)            \nHypertension treatment:                                                    <0.001   \n    No                   248 (83.5%)       357 (88.4%)       263 (75.1%)            \n    Yes                   49 (16.5%)        47 (11.6%)        87 (24.9%)            \nTotal cholesterol         213 (44.0)        221 (41.9)        216 (43.3)    0.061   \n¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ \n```\n\n\n:::\n:::\n\n\n### **自定义设置分组检验方法**\n\n设置mehtod参数值，如果不设置，默认所有变量符合正态分布。修改age为非正态后使用四分位数进行描述，同时使用非参检验进行分组比较\n\n-   **参数值为1：正态分布分析** ：此值强制分析假设行变量遵循正态分布。\n\n-   **参数值为2：连续非正态分析** ：选择此值意味着分析不假设行变量遵循正态分布，将其视为连续但非正态分布的变量。\n\n-   **参数值为3：分类分析**：此值强制分析将行变量视为分类变量，无论其原始类型如何。\n\n-   **参数值为4：Shapiro-Wilks检验 （正态检验）**：使用此值触发Shapiro-Wilks检验，以确定变量是否应在正态性假设下进行分析，还是非正态。这对于根据数据做出如何处理每个变量的决策非常有用。\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# descrTable(`smoker`~ .-id-year, data = regicor,method = 1) 假定所有变量符合正态分布\n\n#设置age变量为非正态，使用非参检验进行比较\ndescrTable(`sex`~ .-id-year, data = regicor, method=c(age = 2))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--------Summary descriptives table by 'Sex'---------\n\n______________________________________________________________________ \n                                 Male            Female      p.overall \n                                N=1101           N=1193                \n¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ \nAge                        54.0 [46.0;64.0] 55.0 [46.0;64.0]   0.851   \nSmoking status:                                               <0.001   \n    Never smoker             301 (28.1%)      900 (77.5%)              \n    Current or former < 1y   410 (38.3%)      183 (15.7%)              \n    Former >= 1y             360 (33.6%)       79 (6.80%)              \nSystolic blood pressure       134 (18.9)       129 (21.2)     <0.001   \nDiastolic blood pressure     81.7 (10.2)      77.8 (10.5)     <0.001   \nHistory of hypertension:                                       0.644   \n    Yes                      341 (31.1%)      382 (32.1%)              \n    No                       755 (68.9%)      808 (67.9%)              \nHypertension treatment:                                        0.096   \n    No                       889 (82.5%)      934 (79.6%)              \n    Yes                      189 (17.5%)      239 (20.4%)              \nTotal cholesterol             217 (42.7)       220 (47.4)      0.140   \n¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ \n```\n\n\n:::\n:::\n\n\n### **不显示标签label值**\n\n有些数据集自带label，可以通过**include.label设置是否显示标签**\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndescrTable(`sex`~ .-id-year, data = regicor, include.label= FALSE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--------Summary descriptives table by 'sex'---------\n\n____________________________________________________________ \n                              Male       Female    p.overall \n                             N=1101      N=1193              \n¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ \nage                        54.8 (11.1) 54.7 (11.0)   0.840   \nsmoker:                                             <0.001   \n    Never smoker           301 (28.1%) 900 (77.5%)           \n    Current or former < 1y 410 (38.3%) 183 (15.7%)           \n    Former >= 1y           360 (33.6%) 79 (6.80%)            \nsbp                        134 (18.9)  129 (21.2)   <0.001   \ndbp                        81.7 (10.2) 77.8 (10.5)  <0.001   \nhisthtn:                                             0.644   \n    Yes                    341 (31.1%) 382 (32.1%)           \n    No                     755 (68.9%) 808 (67.9%)           \ntxhtn:                                               0.096   \n    No                     889 (82.5%) 934 (79.6%)           \n    Yes                    189 (17.5%) 239 (20.4%)           \nchol                       217 (42.7)  220 (47.4)    0.140   \n¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ \n```\n\n\n:::\n:::\n\n\n### **设置计量资料用四分位法描述**\n\n设置**Q1参数和Q3参数**设置如何描述非正态连续变量。如果设置成0和1就是最小值最大值描述\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndescrTable(`sex`~ .-id-year, data = regicor,method = c(age=2),\n           Q1=0.025, Q3=0.975)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--------Summary descriptives table by 'Sex'---------\n\n______________________________________________________________________ \n                                 Male            Female      p.overall \n                                N=1101           N=1193                \n¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ \nAge                        54.0 [36.0;73.0] 55.0 [36.0;73.0]   0.851   \nSmoking status:                                               <0.001   \n    Never smoker             301 (28.1%)      900 (77.5%)              \n    Current or former < 1y   410 (38.3%)      183 (15.7%)              \n    Former >= 1y             360 (33.6%)       79 (6.80%)              \nSystolic blood pressure       134 (18.9)       129 (21.2)     <0.001   \nDiastolic blood pressure     81.7 (10.2)      77.8 (10.5)     <0.001   \nHistory of hypertension:                                       0.644   \n    Yes                      341 (31.1%)      382 (32.1%)              \n    No                       755 (68.9%)      808 (67.9%)              \nHypertension treatment:                                        0.096   \n    No                       889 (82.5%)      934 (79.6%)              \n    Yes                      189 (17.5%)      239 (20.4%)              \nTotal cholesterol             217 (42.7)       220 (47.4)      0.140   \n¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ \n```\n\n\n:::\n:::\n\n\n### **生成OR和HR值**\n\n使用show.ratio变量来显示OR值，对于变量类型是time-to-event变量则输出HR值\n\n\n::: {.cell}\n\n```{.r .cell-code}\n descrTable(`sex`~ .-id-year, data = regicor,show.ratio = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--------Summary descriptives table by 'Sex'---------\n\n_____________________________________________________________________________________ \n                              Male       Female           OR        p.ratio p.overall \n                             N=1101      N=1193                                       \n¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ \nAge                        54.8 (11.1) 54.7 (11.0) 1.00 [0.99;1.01]  0.840    0.840   \nSmoking status:                                                              <0.001   \n    Never smoker           301 (28.1%) 900 (77.5%)       Ref.        Ref.             \n    Current or former < 1y 410 (38.3%) 183 (15.7%) 0.15 [0.12;0.19]  0.000            \n    Former >= 1y           360 (33.6%) 79 (6.80%)  0.07 [0.06;0.10]  0.000            \nSystolic blood pressure    134 (18.9)  129 (21.2)  0.99 [0.98;0.99] <0.001   <0.001   \nDiastolic blood pressure   81.7 (10.2) 77.8 (10.5) 0.96 [0.96;0.97] <0.001   <0.001   \nHistory of hypertension:                                                      0.644   \n    Yes                    341 (31.1%) 382 (32.1%)       Ref.        Ref.             \n    No                     755 (68.9%) 808 (67.9%) 0.96 [0.80;1.14]  0.612            \nHypertension treatment:                                                       0.096   \n    No                     889 (82.5%) 934 (79.6%)       Ref.        Ref.             \n    Yes                    189 (17.5%) 239 (20.4%) 1.20 [0.97;1.49]  0.086            \nTotal cholesterol          217 (42.7)  220 (47.4)  1.00 [1.00;1.00]  0.141    0.140   \n¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ \n```\n\n\n:::\n:::\n\n\n#### **设置OR值的ref对照**\n\n使用ref参数设置变量的ref对照值。代码所示为把smoker的因子level为3（值为”Former\\>=1y”）的设置为对照组计算其它组的OR值\n\n同样作用的函数还有ref.no 和 ref.y\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndescrTable(`sex`~ .-id-year, data = regicor,\n           include.label = FALSE,show.ratio = TRUE,\n           ref = c(smoker=3))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--------Summary descriptives table by 'sex'---------\n\n_____________________________________________________________________________________ \n                              Male       Female           OR        p.ratio p.overall \n                             N=1101      N=1193                                       \n¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ \nage                        54.8 (11.1) 54.7 (11.0) 1.00 [0.99;1.01]  0.840    0.840   \nsmoker:                                                                      <0.001   \n    Never smoker           301 (28.1%) 900 (77.5%) 13.6 [10.4;18.0]  0.000            \n    Current or former < 1y 410 (38.3%) 183 (15.7%) 2.03 [1.51;2.75] <0.001            \n    Former >= 1y           360 (33.6%) 79 (6.80%)        Ref.        Ref.             \nsbp                        134 (18.9)  129 (21.2)  0.99 [0.98;0.99] <0.001   <0.001   \ndbp                        81.7 (10.2) 77.8 (10.5) 0.96 [0.96;0.97] <0.001   <0.001   \nhisthtn:                                                                      0.644   \n    Yes                    341 (31.1%) 382 (32.1%)       Ref.        Ref.             \n    No                     755 (68.9%) 808 (67.9%) 0.96 [0.80;1.14]  0.612            \ntxhtn:                                                                        0.096   \n    No                     889 (82.5%) 934 (79.6%)       Ref.        Ref.             \n    Yes                    189 (17.5%) 239 (20.4%) 1.20 [0.97;1.49]  0.086            \nchol                       217 (42.7)  220 (47.4)  1.00 [1.00;1.00]  0.141    0.140   \n¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ \n```\n\n\n:::\n:::\n\n\n### **不显示对照组的描述信息**\n\n使用hide.no来隐藏某些因子水平的描述。常用来隐藏掉2分类变量的否的信息\n\n\n::: {.cell}\n\n```{.r .cell-code}\n descrTable(`sex`~ .-id-year, data = regicor,hide.no = \"No\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--------Summary descriptives table by 'Sex'---------\n\n____________________________________________________________ \n                              Male       Female    p.overall \n                             N=1101      N=1193              \n¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ \nAge                        54.8 (11.1) 54.7 (11.0)   0.840   \nSmoking status:                                     <0.001   \n    Never smoker           301 (28.1%) 900 (77.5%)           \n    Current or former < 1y 410 (38.3%) 183 (15.7%)           \n    Former >= 1y           360 (33.6%) 79 (6.80%)            \nSystolic blood pressure    134 (18.9)  129 (21.2)   <0.001   \nDiastolic blood pressure   81.7 (10.2) 77.8 (10.5)  <0.001   \nHistory of hypertension    341 (31.1%) 382 (32.1%)   0.644   \nHypertension treatment     189 (17.5%) 239 (20.4%)   0.096   \nTotal cholesterol          217 (42.7)  220 (47.4)    0.140   \n¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ \n```\n\n\n:::\n:::\n\n\n### **同时显示总人群的描述**\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndescrTable(`sex`~ .-id-year, data = regicor,show.all = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n--------Summary descriptives table by 'Sex'---------\n\n_________________________________________________________________________ \n                              [ALL]        Male       Female    p.overall \n                              N=2294      N=1101      N=1193              \n¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ \nAge                        54.7 (11.0)  54.8 (11.1) 54.7 (11.0)   0.840   \nSmoking status:                                                  <0.001   \n    Never smoker           1201 (53.8%) 301 (28.1%) 900 (77.5%)           \n    Current or former < 1y 593 (26.6%)  410 (38.3%) 183 (15.7%)           \n    Former >= 1y           439 (19.7%)  360 (33.6%) 79 (6.80%)            \nSystolic blood pressure     131 (20.3)  134 (18.9)  129 (21.2)   <0.001   \nDiastolic blood pressure   79.7 (10.5)  81.7 (10.2) 77.8 (10.5)  <0.001   \nHistory of hypertension:                                          0.644   \n    Yes                    723 (31.6%)  341 (31.1%) 382 (32.1%)           \n    No                     1563 (68.4%) 755 (68.9%) 808 (67.9%)           \nHypertension treatment:                                           0.096   \n    No                     1823 (81.0%) 889 (82.5%) 934 (79.6%)           \n    Yes                    428 (19.0%)  189 (17.5%) 239 (20.4%)           \nTotal cholesterol           219 (45.2)  217 (42.7)  220 (47.4)    0.140   \n¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯¯ \n```\n\n\n:::\n:::\n\n\n### 结果导出\n\n可导出各种格式,export2xls, export2latex, export2pdf, export2csv, export2md, export2word\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexport2word(tab_0,file=\"1 data_summary.docx\")\n```\n:::\n\n\n### **快速可视化**\n\n使用plot函数进行可视化，设置file和type参数进行保存例如\n\nplot(res[c(1,2)], file=\"./figures/univar/\", type=\"png\")\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntab0 <- descrTable(`sex`~ .-id-year, data = regicor)\n\nplot(tab0)\n```\n\n::: {.cell-output-display}\n![](1012-comparegroups_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n\n::: {.cell-output-display}\n![](1012-comparegroups_files/figure-html/unnamed-chunk-17-2.png){width=672}\n:::\n\n::: {.cell-output-display}\n![](1012-comparegroups_files/figure-html/unnamed-chunk-17-3.png){width=672}\n:::\n\n::: {.cell-output-display}\n![](1012-comparegroups_files/figure-html/unnamed-chunk-17-4.png){width=672}\n:::\n\n::: {.cell-output-display}\n![](1012-comparegroups_files/figure-html/unnamed-chunk-17-5.png){width=672}\n:::\n\n::: {.cell-output-display}\n![](1012-comparegroups_files/figure-html/unnamed-chunk-17-6.png){width=672}\n:::\n\n::: {.cell-output-display}\n![](1012-comparegroups_files/figure-html/unnamed-chunk-17-7.png){width=672}\n:::\n:::\n\n\n",
    "supporting": [
      "1012-comparegroups_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}