<svg width="900" height="700" viewBox="0 0 900 700" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="900" height="700" fill="#f8f9fa"/>

  <!-- Title -->
  <text x="450" y="40" text-anchor="middle" font-family="Arial, sans-serif" font-size="28" font-weight="bold" fill="#2c3e50">
    距离指标选择流程图
  </text>
  <text x="450" y="70" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" fill="#7f8c8d">
    根据数据特征选择合适的距离指标
  </text>

  <!-- Flowchart -->
  <g transform="translate(450, 110)">
    <!-- Start Node -->
    <g transform="translate(0, 0)">
      <rect x="-120" y="-25" width="240" height="50" rx="25" fill="#3498db" stroke="#2980b9" stroke-width="3"/>
      <text x="0" y="8" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="white">开始：数据类型？</text>
    </g>

    <!-- Arrow down -->
    <line x1="0" y1="25" x2="0" y2="60" stroke="#34495e" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- Data Type Decision -->
    <g transform="translate(0, 85)">
      <polygon points="0,-30 150,30 0,90 -150,30" fill="#f39c12" stroke="#e67e22" stroke-width="2"/>
      <text x="0" y="25" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="white">数据类型</text>
      <text x="0" y="45" text-anchor="middle" font-family="Arial" font-size="12" fill="white">连续 / 离散 / 混合</text>
    </g>

    <!-- Branches -->
    <!-- Left: Continuous -->
    <line x1="-130" y1="130" x2="-200" y2="180" stroke="#34495e" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="-170" y="150" font-family="Arial" font-size="11" fill="#34495e">连续型</text>

    <!-- Right: Discrete -->
    <line x1="130" y1="130" x2="200" y2="180" stroke="#34495e" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="170" y="150" font-family="Arial" font-size="11" fill="#34495e">离散/二值</text>

    <!-- Middle: High Dim -->
    <line x1="0" y1="175" x2="0" y2="220" stroke="#34495e" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="15" y="200" font-family="Arial" font-size="11" fill="#34495e">文本/高维</text>

    <!-- Continuous branch -->
    <g transform="translate(-200, 210)">
      <rect x="-80" y="-25" width="160" height="50" rx="10" fill="#e67e22" stroke="#d35400" stroke-width="2"/>
      <text x="0" y="8" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="white">变量相关性？</text>
    </g>

    <line x1="-200" y1="235" x2="-200" y2="270" stroke="#34495e" stroke-width="2" marker-end="url(#arrowhead)"/>

    <g transform="translate(-200, 300)">
      <polygon points="0,-25 100,25 0,75 -100,25" fill="#f39c12" stroke="#e67e22" stroke-width="2"/>
      <text x="0" y="20" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold" fill="white">有相关性</text>
      <text x="0" y="40" text-anchor="middle" font-family="Arial" font-size="11" fill="white">无相关性</text>
    </g>

    <!-- Mahalanobis -->
    <line x1="-280" y1="335" x2="-320" y2="390" stroke="#34495e" stroke-width="2" marker-end="url(#arrowhead)"/>
    <g transform="translate(-320, 420)">
      <rect x="-70" y="-30" width="140" height="60" rx="10" fill="#9b59b6" stroke="#8e44ad" stroke-width="3"/>
      <text x="0" y="0" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="white">马氏距离</text>
      <text x="0" y="20" text-anchor="middle" font-family="Arial" font-size="10" fill="white">Mahalanobis</text>
    </g>

    <!-- Euclidean/Manhattan -->
    <line x1="-120" y1="335" x2="-80" y2="390" stroke="#34495e" stroke-width="2" marker-end="url(#arrowhead)"/>
    <g transform="translate(-80, 420)">
      <polygon points="0,-25 100,25 0,75 -100,25" fill="#f39c12" stroke="#e67e22" stroke-width="2"/>
      <text x="0" y="20" text-anchor="middle" font-family="Arial" font-size="10" font-weight="bold" fill="white">异常值多？</text>
    </g>

    <line x1="-80" y1="495" x2="-80" y2="530" stroke="#34495e" stroke-width="2" marker-end="url(#arrowhead)"/>

    <!-- Manhattan (robust) -->
    <line x1="-150" y1="555" x2="-180" y2="600" stroke="#34495e" stroke-width="2" marker-end="url(#arrowhead)"/>
    <g transform="translate(-180, 630)">
      <rect x="-70" y="-30" width="140" height="60" rx="10" fill="#16a085" stroke="#138d75" stroke-width="3"/>
      <text x="0" y="0" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="white">曼哈顿</text>
      <text x="0" y="20" text-anchor="middle" font-family="Arial" font-size="10" fill="white">Manhattan</text>
    </g>

    <!-- Euclidean (sensitive) -->
    <line x1="-10" y1="555" x2="20" y2="600" stroke="#34495e" stroke-width="2" marker-end="url(#arrowhead)"/>
    <g transform="translate(20, 630)">
      <rect x="-70" y="-30" width="140" height="60" rx="10" fill="#27ae60" stroke="#229954" stroke-width="3"/>
      <text x="0" y="0" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="white">欧氏距离</text>
      <text x="0" y="20" text-anchor="middle" font-family="Arial" font-size="10" fill="white">Euclidean</text>
    </g>

    <!-- Discrete branch -->
    <g transform="translate(200, 210)">
      <rect x="-80" y="-25" width="160" height="50" rx="10" fill="#e67e22" stroke="#d35400" stroke-width="2"/>
      <text x="0" y="8" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold" fill="white">数据特征？</text>
    </g>

    <line x1="200" y1="235" x2="200" y2="270" stroke="#34495e" stroke-width="2" marker-end="url(#arrowhead)"/>

    <g transform="translate(200, 300)">
      <polygon points="0,-25 120,25 0,75 -120,25" fill="#f39c12" stroke="#e67e22" stroke-width="2"/>
      <text x="0" y="20" text-anchor="middle" font-family="Arial" font-size="11" font-weight="bold" fill="white">字符串比较</text>
      <text x="0" y="40" text-anchor="middle" font-family="Arial" font-size="11" fill="white">集合比较</text>
    </g>

    <!-- Hamming -->
    <line x1="130" y1="335" x2="80" y2="390" stroke="#34495e" stroke-width="2" marker-end="url(#arrowhead)"/>
    <g transform="translate(80, 420)">
      <rect x="-70" y="-30" width="140" height="60" rx="10" fill="#c0392b" stroke="#a93226" stroke-width="3"/>
      <text x="0" y="0" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="white">汉明距离</text>
      <text x="0" y="20" text-anchor="middle" font-family="Arial" font-size="10" fill="white">Hamming</text>
    </g>

    <!-- Jaccard -->
    <line x1="270" y1="335" x2="320" y2="390" stroke="#34495e" stroke-width="2" marker-end="url(#arrowhead)"/>
    <g transform="translate(320, 420)">
      <rect x="-70" y="-30" width="140" height="60" rx="10" fill="#e74c3c" stroke="#cb4335" stroke-width="3"/>
      <text x="0" y="0" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="white">Jaccard</text>
      <text x="0" y="20" text-anchor="middle" font-family="Arial" font-size="10" fill="white">集合相似度</text>
    </g>

    <!-- Text/High Dim branch -->
    <g transform="translate(0, 250)">
      <rect x="-80" y="-25" width="160" height="50" rx="10" fill="#9b59b6" stroke="#8e44ad" stroke-width="3"/>
      <text x="0" y="8" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="white">余弦相似度</text>
      <text x="0" y="28" text-anchor="middle" font-family="Arial" font-size="10" fill="white">Cosine Similarity</text>
    </g>

  </g>

  <!-- Legend -->
  <g transform="translate(650, 150)">
    <rect width="200" height="250" fill="#ecf0f1" rx="10" ry="10"/>
    <text x="20" y="30" font-family="Arial" font-size="16" font-weight="bold" fill="#2c3e50">图例说明</text>

    <rect x="20" y="55" width="20" height="20" rx="5" fill="#9b59b6"/>
    <text x="50" y="72" font-family="Arial" font-size="12" fill="#34495e">马氏距离</text>

    <rect x="20" y="90" width="20" height="20" rx="5" fill="#27ae60"/>
    <text x="50" y="107" font-family="Arial" font-size="12" fill="#34495e">欧氏距离</text>

    <rect x="20" y="125" width="20" height="20" rx="5" fill="#16a085"/>
    <text x="50" y="142" font-family="Arial" font-size="12" fill="#34495e">曼哈顿距离</text>

    <rect x="20" y="160" width="20" height="20" rx="5" fill="#c0392b"/>
    <text x="50" y="177" font-family="Arial" font-size="12" fill="#34495e">汉明距离</text>

    <rect x="20" y="195" width="20" height="20" rx="5" fill="#e74c3c"/>
    <text x="50" y="212" font-family="Arial" font-size="12" fill="#34495e">Jaccard 距离</text>

    <polygon points="30,235 40,245 30,255 20,245" fill="#9b59b6"/>
    <text x="50" y="248" font-family="Arial" font-size="12" fill="#34495e">余弦相似度</text>
  </g>

  <!-- Arrowhead marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#34495e"/>
    </marker>
  </defs>

</svg>
